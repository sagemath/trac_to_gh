# Issue 18845: Update NTL to 9.2.0

archive/issues_018608.json:
```json
{
    "assignees": [],
    "body": "See:\n* http://www.shoup.net/ntl/ntl-9.2.0.tar.gz\n\nLibtoolized tarball:\n* http://boxen.math.washington.edu/home/jpflori/upstream/ntl-9.2.0.tar.bz2\n\nDepends on #18866\n\nDepends on #18867\n\n**CC:**  @kiwifb @jdemeyer\n\n**Branch:** [4fd99b370fca63dd04213519f614df7721314fba](https://github.com/sagemath/sagetrac-mirror/commit/4fd99b370fca63dd04213519f614df7721314fba)\n\n**Reviewer:** Volker Braun\n\n**Author:** Jean-Pierre Flori\n\nIssue created by migration from https://trac.sagemath.org/ticket/18845\n\n",
    "closed_at": "2015-07-09T19:55:55Z",
    "created_at": "2015-07-03T08:11:04Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Update NTL to 9.2.0",
    "type": "issue",
    "updated_at": "2015-07-09T20:43:30Z",
    "url": "https://github.com/sagemath/sage/issues/18845",
    "user": "https://github.com/sagetrac-jpflori"
}
```
See:
* http://www.shoup.net/ntl/ntl-9.2.0.tar.gz

Libtoolized tarball:
* http://boxen.math.washington.edu/home/jpflori/upstream/ntl-9.2.0.tar.bz2

Depends on #18866

Depends on #18867

**CC:**  @kiwifb @jdemeyer

**Branch:** [4fd99b370fca63dd04213519f614df7721314fba](https://github.com/sagemath/sagetrac-mirror/commit/4fd99b370fca63dd04213519f614df7721314fba)

**Reviewer:** Volker Braun

**Author:** Jean-Pierre Flori

Issue created by migration from https://trac.sagemath.org/ticket/18845





---

archive/issue_events_230429.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2015-07-03T08:11:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18845#event-230429"
}
```



---

archive/issue_events_230430.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2015-07-03T08:11:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "08517b",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18845#event-230430"
}
```



---

archive/issue_events_230431.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2015-07-03T08:11:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18845#event-230431"
}
```



---

archive/issue_comments_266177.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,5 @@\n See:\n * http://www.shoup.net/ntl/ntl-9.2.0.tar.gz\n \n-\n+Libtoolized tarball:\n+* http://boxen.math.washington.edu/home/jpflori/upstream/ntl-9.2.0.tar.bz2\n``````\n",
    "created_at": "2015-07-03T08:15:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266177",
    "user": "https://github.com/sagetrac-jpflori"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,5 @@
 See:
 * http://www.shoup.net/ntl/ntl-9.2.0.tar.gz
 
-
+Libtoolized tarball:
+* http://boxen.math.washington.edu/home/jpflori/upstream/ntl-9.2.0.tar.bz2
``````




---

archive/issue_comments_266178.json:
```json
{
    "body": "<a id='comment:2'>**Comment 2:**</a>\nCCing s-o-g folk as they already worked hard to include an uptodate NTL there.",
    "created_at": "2015-07-03T08:39:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266178",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:2'>**Comment 2:**</a>
CCing s-o-g folk as they already worked hard to include an uptodate NTL there.



---

archive/issue_comments_266179.json:
```json
{
    "body": "**Commit:** [dd2285505edf4bf7b96283d7954de05333e232e6](https://github.com/sagemath/sagetrac-mirror/commit/dd2285505edf4bf7b96283d7954de05333e232e6)",
    "created_at": "2015-07-03T08:44:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266179",
    "user": "https://github.com/sagetrac-jpflori"
}
```

**Commit:** [dd2285505edf4bf7b96283d7954de05333e232e6](https://github.com/sagemath/sagetrac-mirror/commit/dd2285505edf4bf7b96283d7954de05333e232e6)



---

archive/issue_comments_266180.json:
```json
{
    "body": "<a id='comment:3'>**Comment 3:**</a>\nI've updated three fuzzy/failing patching.\n\nI've not touched the error callback patch which does not apply ass we have two solutions:\n* update our patch,\n* use the native NTL error callback mechanism, this can arguably be done elsewhere if the former solution is trivial.\n\nThere should still be trouble with flint, singular and friends.\nFrom what I read flint is fixed in git master.\nNo clear idea about Singular. From what I read there is a fix upstream, but is it available for 3.x as we are stuck with that at the moment, or only for 4.x?\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dd2285505edf4bf7b96283d7954de05333e232e6\">dd22855</a></td><td><code>Update some NTL patches. WIP.</code></td></tr></table>\n",
    "created_at": "2015-07-03T08:44:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266180",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:3'>**Comment 3:**</a>
I've updated three fuzzy/failing patching.

I've not touched the error callback patch which does not apply ass we have two solutions:
* update our patch,
* use the native NTL error callback mechanism, this can arguably be done elsewhere if the former solution is trivial.

There should still be trouble with flint, singular and friends.
From what I read flint is fixed in git master.
No clear idea about Singular. From what I read there is a fix upstream, but is it available for 3.x as we are stuck with that at the moment, or only for 4.x?

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dd2285505edf4bf7b96283d7954de05333e232e6">dd22855</a></td><td><code>Update some NTL patches. WIP.</code></td></tr></table>




---

archive/issue_comments_266181.json:
```json
{
    "body": "**Branch:** [u/jpflori/ticket/18845](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/18845)",
    "created_at": "2015-07-03T08:44:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266181",
    "user": "https://github.com/sagetrac-jpflori"
}
```

**Branch:** [u/jpflori/ticket/18845](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/18845)



---

archive/issue_comments_266182.json:
```json
{
    "body": "<a id='comment:4'>**Comment 4:**</a>\n`flint` will build against it but not `singular`, I am not even sure `singular-4` will. I would need to check my inbox from when we looked at it in Gentoo with the guy that bumped `ntl` to 9.x.",
    "created_at": "2015-07-03T09:14:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266182",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:4'>**Comment 4:**</a>
`flint` will build against it but not `singular`, I am not even sure `singular-4` will. I would need to check my inbox from when we looked at it in Gentoo with the guy that bumped `ntl` to 9.x.



---

archive/issue_comments_266183.json:
```json
{
    "body": "<a id='comment:5'>**Comment 5:**</a>\n`singular-4` has a fix in master: https://github.com/Singular/Sources/commit/de688442dfe449992dc14a000bca0691ecc7e106 that may be back portable.",
    "created_at": "2015-07-03T10:12:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266183",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:5'>**Comment 5:**</a>
`singular-4` has a fix in master: https://github.com/Singular/Sources/commit/de688442dfe449992dc14a000bca0691ecc7e106 that may be back portable.



---

archive/issue_comments_266184.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\nReplying to [@kiwifb](#comment%3A5):\n> `singular-4` has a fix in master: https://github.com/Singular/Sources/commit/de688442dfe449992dc14a000bca0691ecc7e106 that may be back portable.\n\nYes, it seems it just applies as is (with offset).",
    "created_at": "2015-07-06T14:19:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266184",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:6'>**Comment 6:**</a>
Replying to [@kiwifb](#comment%3A5):
> `singular-4` has a fix in master: https://github.com/Singular/Sources/commit/de688442dfe449992dc14a000bca0691ecc7e106 that may be back portable.

Yes, it seems it just applies as is (with offset).



---

archive/issue_comments_266185.json:
```json
{
    "body": "**Changing commit** from \"[dd2285505edf4bf7b96283d7954de05333e232e6](https://github.com/sagemath/sagetrac-mirror/commit/dd2285505edf4bf7b96283d7954de05333e232e6)\" to \"[cedaaa41aa8b5bd123d8f399f60b553f1b7e440f](https://github.com/sagemath/sagetrac-mirror/commit/cedaaa41aa8b5bd123d8f399f60b553f1b7e440f)\".",
    "created_at": "2015-07-06T15:51:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266185",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[dd2285505edf4bf7b96283d7954de05333e232e6](https://github.com/sagemath/sagetrac-mirror/commit/dd2285505edf4bf7b96283d7954de05333e232e6)" to "[cedaaa41aa8b5bd123d8f399f60b553f1b7e440f](https://github.com/sagemath/sagetrac-mirror/commit/cedaaa41aa8b5bd123d8f399f60b553f1b7e440f)".



---

archive/issue_comments_266186.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cedaaa41aa8b5bd123d8f399f60b553f1b7e440f\">cedaaa4</a></td><td><code>Fix NTL patches.</code></td></tr></table>\n",
    "created_at": "2015-07-06T15:51:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266186",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:7'>**Comment 7:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cedaaa41aa8b5bd123d8f399f60b553f1b7e440f">cedaaa4</a></td><td><code>Fix NTL patches.</code></td></tr></table>




---

archive/issue_comments_266187.json:
```json
{
    "body": "<a id='comment:8'>**Comment 8:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6611ff64f0490fde3d8e802c6cce92140e8476a3\">6611ff6</a></td><td><code>Use new style description for NTL patches.</code></td></tr></table>\n",
    "created_at": "2015-07-06T16:01:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266187",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:8'>**Comment 8:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6611ff64f0490fde3d8e802c6cce92140e8476a3">6611ff6</a></td><td><code>Use new style description for NTL patches.</code></td></tr></table>




---

archive/issue_comments_266188.json:
```json
{
    "body": "**Changing commit** from \"[cedaaa41aa8b5bd123d8f399f60b553f1b7e440f](https://github.com/sagemath/sagetrac-mirror/commit/cedaaa41aa8b5bd123d8f399f60b553f1b7e440f)\" to \"[6611ff64f0490fde3d8e802c6cce92140e8476a3](https://github.com/sagemath/sagetrac-mirror/commit/6611ff64f0490fde3d8e802c6cce92140e8476a3)\".",
    "created_at": "2015-07-06T16:01:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266188",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[cedaaa41aa8b5bd123d8f399f60b553f1b7e440f](https://github.com/sagemath/sagetrac-mirror/commit/cedaaa41aa8b5bd123d8f399f60b553f1b7e440f)" to "[6611ff64f0490fde3d8e802c6cce92140e8476a3](https://github.com/sagemath/sagetrac-mirror/commit/6611ff64f0490fde3d8e802c6cce92140e8476a3)".



---

archive/issue_comments_266189.json:
```json
{
    "body": "<a id='comment:9'>**Comment 9:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/365bc00c05b2db0d9baec352abd6e27dbd30fd22\">365bc00</a></td><td><code>Update David Harvey's bernmm code for new NTL versions.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ca9d43e58c82dcd6ecff92a68770e4e3c7e57b18\">ca9d43e</a></td><td><code>Fix C++ namespaces ambiguity.</code></td></tr></table>\n",
    "created_at": "2015-07-06T17:32:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266189",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:9'>**Comment 9:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/365bc00c05b2db0d9baec352abd6e27dbd30fd22">365bc00</a></td><td><code>Update David Harvey's bernmm code for new NTL versions.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ca9d43e58c82dcd6ecff92a68770e4e3c7e57b18">ca9d43e</a></td><td><code>Fix C++ namespaces ambiguity.</code></td></tr></table>




---

archive/issue_comments_266190.json:
```json
{
    "body": "**Changing commit** from \"[6611ff64f0490fde3d8e802c6cce92140e8476a3](https://github.com/sagemath/sagetrac-mirror/commit/6611ff64f0490fde3d8e802c6cce92140e8476a3)\" to \"[ca9d43e58c82dcd6ecff92a68770e4e3c7e57b18](https://github.com/sagemath/sagetrac-mirror/commit/ca9d43e58c82dcd6ecff92a68770e4e3c7e57b18)\".",
    "created_at": "2015-07-06T17:32:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266190",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[6611ff64f0490fde3d8e802c6cce92140e8476a3](https://github.com/sagemath/sagetrac-mirror/commit/6611ff64f0490fde3d8e802c6cce92140e8476a3)" to "[ca9d43e58c82dcd6ecff92a68770e4e3c7e57b18](https://github.com/sagemath/sagetrac-mirror/commit/ca9d43e58c82dcd6ecff92a68770e4e3c7e57b18)".



---

archive/issue_comments_266191.json:
```json
{
    "body": "<a id='comment:10'>**Comment 10:**</a>\nThere is something wrong with my modifs to David's code.\nIf someone could have a look, nothing jumps to me now...",
    "created_at": "2015-07-06T21:14:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266191",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:10'>**Comment 10:**</a>
There is something wrong with my modifs to David's code.
If someone could have a look, nothing jumps to me now...



---

archive/issue_comments_266192.json:
```json
{
    "body": "<a id='comment:11'>**Comment 11:**</a>\nMy changes look pretty similar to the ones here:\n* https://vabs.archlinux-br.org/x86_64/community-testing/S/sagemath-6.7-2/ntl9.patch\nexcept for using `NTL::mulmod_t` instead of `NTL::wide_double`.",
    "created_at": "2015-07-06T21:25:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266192",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:11'>**Comment 11:**</a>
My changes look pretty similar to the ones here:
* https://vabs.archlinux-br.org/x86_64/community-testing/S/sagemath-6.7-2/ntl9.patch
except for using `NTL::mulmod_t` instead of `NTL::wide_double`.



---

archive/issue_comments_266193.json:
```json
{
    "body": "<a id='comment:12'>**Comment 12:**</a>\nNo idea what the difference is I am afraid.",
    "created_at": "2015-07-06T21:33:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266193",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:12'>**Comment 12:**</a>
No idea what the difference is I am afraid.



---

archive/issue_comments_266194.json:
```json
{
    "body": "**Changing commit** from \"[ca9d43e58c82dcd6ecff92a68770e4e3c7e57b18](https://github.com/sagemath/sagetrac-mirror/commit/ca9d43e58c82dcd6ecff92a68770e4e3c7e57b18)\" to \"[79246f0d651207b38ec0333d2a499dc54cf8a5de](https://github.com/sagemath/sagetrac-mirror/commit/79246f0d651207b38ec0333d2a499dc54cf8a5de)\".",
    "created_at": "2015-07-06T21:37:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266194",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[ca9d43e58c82dcd6ecff92a68770e4e3c7e57b18](https://github.com/sagemath/sagetrac-mirror/commit/ca9d43e58c82dcd6ecff92a68770e4e3c7e57b18)" to "[79246f0d651207b38ec0333d2a499dc54cf8a5de](https://github.com/sagemath/sagetrac-mirror/commit/79246f0d651207b38ec0333d2a499dc54cf8a5de)".



---

archive/issue_comments_266195.json:
```json
{
    "body": "<a id='comment:13'>**Comment 13:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/79246f0d651207b38ec0333d2a499dc54cf8a5de\">79246f0</a></td><td><code>Further fixes for NTL update.</code></td></tr></table>\n",
    "created_at": "2015-07-06T21:37:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266195",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:13'>**Comment 13:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/79246f0d651207b38ec0333d2a499dc54cf8a5de">79246f0</a></td><td><code>Further fixes for NTL update.</code></td></tr></table>




---

archive/issue_comments_266196.json:
```json
{
    "body": "<a id='comment:14'>**Comment 14:**</a>\nReplying to [@kiwifb](#comment%3A12):\n> No idea what the difference is I am afraid.\n\nCould you test this on a usual arch?\nCurrently, I only have Sage installed on a POWER7...",
    "created_at": "2015-07-06T21:46:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266196",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:14'>**Comment 14:**</a>
Replying to [@kiwifb](#comment%3A12):
> No idea what the difference is I am afraid.

Could you test this on a usual arch?
Currently, I only have Sage installed on a POWER7...



---

archive/issue_comments_266197.json:
```json
{
    "body": "<a id='comment:15'>**Comment 15:**</a>\nI'll have a look on my mac.",
    "created_at": "2015-07-06T21:48:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266197",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:15'>**Comment 15:**</a>
I'll have a look on my mac.



---

archive/issue_comments_266198.json:
```json
{
    "body": "<a id='comment:16'>**Comment 16:**</a>\nTaking longer than expected I wasn't completely up to date to beta7 (was on beta5). Will let you know when it is all done.",
    "created_at": "2015-07-06T22:17:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266198",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:16'>**Comment 16:**</a>
Taking longer than expected I wasn't completely up to date to beta7 (was on beta5). Will let you know when it is all done.



---

archive/issue_comments_266199.json:
```json
{
    "body": "<a id='comment:17'>**Comment 17:**</a>\nOK, I almost fell like I should have done a new build from scratch.\n\n```\nMirage:sage-6.8.beta5 fbissey$ ./sage -t --long --warn-long 34.4 src/sage/rings/arith.py\nRunning doctests with ID 2015-07-07-17-26-18-c6eb7fbc.\nGit branch: ntl92\nUsing --optional=gcc,mpir,python2,sage,scons\nDoctesting 1 file.\nsage -t --long --warn-long 34.4 src/sage/rings/arith.py\n**********************************************************************\nFile \"src/sage/rings/arith.py\", line 294, in sage.rings.arith.bernoulli\nFailed example:\n    union([len(union(x))==1 for x in vals])  # long time (depends on previous line)\nExpected:\n    [True]\nGot:\n    [False, True]\n**********************************************************************\nFile \"src/sage/rings/arith.py\", line 299, in sage.rings.arith.bernoulli\nFailed example:\n    union([len(union(x))==1 for x in vals])  # long time (depends on previous line)\nExpected:\n    [True]\nGot:\n    [False, True]\n**********************************************************************\n1 item had failures:\n   2 of  16 in sage.rings.arith.bernoulli\n    [785 tests, 2 failures, 51.51 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long 34.4 src/sage/rings/arith.py  # 2 doctests failed\n----------------------------------------------------------------------\nTotal time for all tests: 51.7 seconds\n    cpu time: 38.6 seconds\n    cumulative wall time: 51.5 seconds\nMirage:sage-6.8.beta5 fbissey$ ./sage -t --long --warn-long 34.4 src/sage/rings/bernmm.pyx\nRunning doctests with ID 2015-07-07-19-02-38-d29775f0.\nGit branch: ntl92\nUsing --optional=gcc,mpir,python2,sage,scons\nDoctesting 1 file.\nsage -t --long --warn-long 34.4 src/sage/rings/bernmm.pyx\n**********************************************************************\nFile \"src/sage/rings/bernmm.pyx\", line 68, in sage.rings.bernmm.bernmm_bern_rat\nFailed example:\n    lst1 == lst2\nExpected:\n    True\nGot:\n    False\n**********************************************************************\nFile \"src/sage/rings/bernmm.pyx\", line 70, in sage.rings.bernmm.bernmm_bern_rat\nFailed example:\n    [ Zmod(101)(t) for t in lst1 ]\nExpected:\n    [77, 72, 89, 98, 86]\nGot:\n    [99, 0, 44, 42, 57]\n**********************************************************************\n1 item had failures:\n   2 of  13 in sage.rings.bernmm.bernmm_bern_rat\n    [23 tests, 2 failures, 0.79 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long 34.4 src/sage/rings/bernmm.pyx  # 2 doctests failed\n----------------------------------------------------------------------\nTotal time for all tests: 0.8 seconds\n    cpu time: 1.2 seconds\n    cumulative wall time: 0.8 seconds\nMirage:sage-6.8.beta5 fbissey$ ./sage -t --long --warn-long 34.4 src/doc/en/thematic_tutorials/explicit_methods_in_number_theory/birds_other.rst\nRunning doctests with ID 2015-07-07-19-02-58-71d664dd.\nGit branch: ntl92\nUsing --optional=gcc,mpir,python2,sage,scons\nDoctesting 1 file.\nsage -t --long --warn-long 34.4 src/doc/en/thematic_tutorials/explicit_methods_in_number_theory/birds_other.rst\n**********************************************************************\nFile \"src/doc/en/thematic_tutorials/explicit_methods_in_number_theory/birds_other.rst\", line 212, in doc.en.thematic_tutorials.explicit_methods_in_number_theory.birds_other\nWarning, slow doctest:\n    w2 = bernoulli(100000, algorithm='pari')   # long time (6s on sage.math, 2011)\nTest ran for 55.38 s\n**********************************************************************\nFile \"src/doc/en/thematic_tutorials/explicit_methods_in_number_theory/birds_other.rst\", line 213, in doc.en.thematic_tutorials.explicit_methods_in_number_theory.birds_other\nFailed example:\n    w1 == w2  # long time\nExpected:\n    True\nGot:\n    False\n**********************************************************************\n1 item had failures:\n   1 of  42 in doc.en.thematic_tutorials.explicit_methods_in_number_theory.birds_other\n    [34 tests, 1 failure, 62.40 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long 34.4 src/doc/en/thematic_tutorials/explicit_methods_in_number_theory/birds_other.rst  # 1 doctest failed\n----------------------------------------------------------------------\nTotal time for all tests: 62.4 seconds\n    cpu time: 67.9 seconds\n    cumulative wall time: 62.4 seconds\n```",
    "created_at": "2015-07-07T07:06:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266199",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:17'>**Comment 17:**</a>
OK, I almost fell like I should have done a new build from scratch.

```
Mirage:sage-6.8.beta5 fbissey$ ./sage -t --long --warn-long 34.4 src/sage/rings/arith.py
Running doctests with ID 2015-07-07-17-26-18-c6eb7fbc.
Git branch: ntl92
Using --optional=gcc,mpir,python2,sage,scons
Doctesting 1 file.
sage -t --long --warn-long 34.4 src/sage/rings/arith.py
**********************************************************************
File "src/sage/rings/arith.py", line 294, in sage.rings.arith.bernoulli
Failed example:
    union([len(union(x))==1 for x in vals])  # long time (depends on previous line)
Expected:
    [True]
Got:
    [False, True]
**********************************************************************
File "src/sage/rings/arith.py", line 299, in sage.rings.arith.bernoulli
Failed example:
    union([len(union(x))==1 for x in vals])  # long time (depends on previous line)
Expected:
    [True]
Got:
    [False, True]
**********************************************************************
1 item had failures:
   2 of  16 in sage.rings.arith.bernoulli
    [785 tests, 2 failures, 51.51 s]
----------------------------------------------------------------------
sage -t --long --warn-long 34.4 src/sage/rings/arith.py  # 2 doctests failed
----------------------------------------------------------------------
Total time for all tests: 51.7 seconds
    cpu time: 38.6 seconds
    cumulative wall time: 51.5 seconds
Mirage:sage-6.8.beta5 fbissey$ ./sage -t --long --warn-long 34.4 src/sage/rings/bernmm.pyx
Running doctests with ID 2015-07-07-19-02-38-d29775f0.
Git branch: ntl92
Using --optional=gcc,mpir,python2,sage,scons
Doctesting 1 file.
sage -t --long --warn-long 34.4 src/sage/rings/bernmm.pyx
**********************************************************************
File "src/sage/rings/bernmm.pyx", line 68, in sage.rings.bernmm.bernmm_bern_rat
Failed example:
    lst1 == lst2
Expected:
    True
Got:
    False
**********************************************************************
File "src/sage/rings/bernmm.pyx", line 70, in sage.rings.bernmm.bernmm_bern_rat
Failed example:
    [ Zmod(101)(t) for t in lst1 ]
Expected:
    [77, 72, 89, 98, 86]
Got:
    [99, 0, 44, 42, 57]
**********************************************************************
1 item had failures:
   2 of  13 in sage.rings.bernmm.bernmm_bern_rat
    [23 tests, 2 failures, 0.79 s]
----------------------------------------------------------------------
sage -t --long --warn-long 34.4 src/sage/rings/bernmm.pyx  # 2 doctests failed
----------------------------------------------------------------------
Total time for all tests: 0.8 seconds
    cpu time: 1.2 seconds
    cumulative wall time: 0.8 seconds
Mirage:sage-6.8.beta5 fbissey$ ./sage -t --long --warn-long 34.4 src/doc/en/thematic_tutorials/explicit_methods_in_number_theory/birds_other.rst
Running doctests with ID 2015-07-07-19-02-58-71d664dd.
Git branch: ntl92
Using --optional=gcc,mpir,python2,sage,scons
Doctesting 1 file.
sage -t --long --warn-long 34.4 src/doc/en/thematic_tutorials/explicit_methods_in_number_theory/birds_other.rst
**********************************************************************
File "src/doc/en/thematic_tutorials/explicit_methods_in_number_theory/birds_other.rst", line 212, in doc.en.thematic_tutorials.explicit_methods_in_number_theory.birds_other
Warning, slow doctest:
    w2 = bernoulli(100000, algorithm='pari')   # long time (6s on sage.math, 2011)
Test ran for 55.38 s
**********************************************************************
File "src/doc/en/thematic_tutorials/explicit_methods_in_number_theory/birds_other.rst", line 213, in doc.en.thematic_tutorials.explicit_methods_in_number_theory.birds_other
Failed example:
    w1 == w2  # long time
Expected:
    True
Got:
    False
**********************************************************************
1 item had failures:
   1 of  42 in doc.en.thematic_tutorials.explicit_methods_in_number_theory.birds_other
    [34 tests, 1 failure, 62.40 s]
----------------------------------------------------------------------
sage -t --long --warn-long 34.4 src/doc/en/thematic_tutorials/explicit_methods_in_number_theory/birds_other.rst  # 1 doctest failed
----------------------------------------------------------------------
Total time for all tests: 62.4 seconds
    cpu time: 67.9 seconds
    cumulative wall time: 62.4 seconds
```



---

archive/issue_comments_266200.json:
```json
{
    "body": "<a id='comment:18'>**Comment 18:**</a>\nYou get the same errors as I do.\n\nAnd I cannot get NTL to build with `NTL_LEGACY_SP_MULMOD=on` to check that the old `double` implem is still fine.\nBuild fails with `#if with no expression` just as in #3486 or https://groups.google.com/forum/#!topic/sage-devel/4r8HrQVOSe4",
    "created_at": "2015-07-07T10:04:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266200",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:18'>**Comment 18:**</a>
You get the same errors as I do.

And I cannot get NTL to build with `NTL_LEGACY_SP_MULMOD=on` to check that the old `double` implem is still fine.
Build fails with `#if with no expression` just as in #3486 or https://groups.google.com/forum/#!topic/sage-devel/4r8HrQVOSe4



---

archive/issue_comments_266201.json:
```json
{
    "body": "<a id='comment:19'>**Comment 19:**</a>\nFor info, the corresponding part of NTL doc is at:\n* http://www.shoup.net/ntl/doc/ZZ.cpp.html#modarith",
    "created_at": "2015-07-07T10:06:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266201",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:19'>**Comment 19:**</a>
For info, the corresponding part of NTL doc is at:
* http://www.shoup.net/ntl/doc/ZZ.cpp.html#modarith



---

archive/issue_comments_266202.json:
```json
{
    "body": "<a id='comment:20'>**Comment 20:**</a>\nMy inability to try `NTL_LEGACY_SP_MULMOD` is caused by the fact that `InitSettings` does not build when it is set because of the typo:\n\n```\n static inline long MulMod2(long a, long b, long n, wide_double bninv)\n{\n   return MulMod2_legacy(a, b, n, ninv);\n}\n```",
    "created_at": "2015-07-07T10:55:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266202",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:20'>**Comment 20:**</a>
My inability to try `NTL_LEGACY_SP_MULMOD` is caused by the fact that `InitSettings` does not build when it is set because of the typo:

```
 static inline long MulMod2(long a, long b, long n, wide_double bninv)
{
   return MulMod2_legacy(a, b, n, ninv);
}
```



---

archive/issue_comments_266203.json:
```json
{
    "body": "<a id='comment:21'>**Comment 21:**</a>\nUpstream bug then.",
    "created_at": "2015-07-07T10:59:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266203",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:21'>**Comment 21:**</a>
Upstream bug then.



---

archive/issue_comments_266204.json:
```json
{
    "body": "<a id='comment:22'>**Comment 22:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b1f14a3976e375ee23271a780b4e54e057549ec\">3b1f14a</a></td><td><code>Fix typo in sp_arith.h.</code></td></tr></table>\n",
    "created_at": "2015-07-07T11:03:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266204",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:22'>**Comment 22:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b1f14a3976e375ee23271a780b4e54e057549ec">3b1f14a</a></td><td><code>Fix typo in sp_arith.h.</code></td></tr></table>




---

archive/issue_comments_266205.json:
```json
{
    "body": "**Changing commit** from \"[79246f0d651207b38ec0333d2a499dc54cf8a5de](https://github.com/sagemath/sagetrac-mirror/commit/79246f0d651207b38ec0333d2a499dc54cf8a5de)\" to \"[3b1f14a3976e375ee23271a780b4e54e057549ec](https://github.com/sagemath/sagetrac-mirror/commit/3b1f14a3976e375ee23271a780b4e54e057549ec)\".",
    "created_at": "2015-07-07T11:03:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266205",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[79246f0d651207b38ec0333d2a499dc54cf8a5de](https://github.com/sagemath/sagetrac-mirror/commit/79246f0d651207b38ec0333d2a499dc54cf8a5de)" to "[3b1f14a3976e375ee23271a780b4e54e057549ec](https://github.com/sagemath/sagetrac-mirror/commit/3b1f14a3976e375ee23271a780b4e54e057549ec)".



---

archive/issue_comments_266206.json:
```json
{
    "body": "<a id='comment:23'>**Comment 23:**</a>\nReplying to [@kiwifb](#comment%3A21):\n> Upstream bug then.\n\nSure, I just sent a report to Victor Shoup.\n\nNote that it does not explain the failure in `bernmm` code with the new sp implem in (new) NTL.\nIt will just allow us to check that `bernmm` works as expected with the old sp implem in (new) NTL.",
    "created_at": "2015-07-07T11:05:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266206",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:23'>**Comment 23:**</a>
Replying to [@kiwifb](#comment%3A21):
> Upstream bug then.

Sure, I just sent a report to Victor Shoup.

Note that it does not explain the failure in `bernmm` code with the new sp implem in (new) NTL.
It will just allow us to check that `bernmm` works as expected with the old sp implem in (new) NTL.



---

archive/issue_comments_266207.json:
```json
{
    "body": "<a id='comment:24'>**Comment 24:**</a>\nAnd it works just fine.\n\nYou can try NTL built with the legacy sp implem at `u/jpflori/ticket/18845legacy`.",
    "created_at": "2015-07-07T11:13:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266207",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:24'>**Comment 24:**</a>
And it works just fine.

You can try NTL built with the legacy sp implem at `u/jpflori/ticket/18845legacy`.



---

archive/issue_comments_266208.json:
```json
{
    "body": "<a id='comment:25'>**Comment 25:**</a>\nReplying to [jpflori](#comment%3A23):\n> Replying to [@kiwifb](#comment%3A21):\n> > Upstream bug then.\n\n> Sure, I just sent a report to Victor Shoup.\n> \n\nAnd he will fix it asap.",
    "created_at": "2015-07-07T11:14:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266208",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:25'>**Comment 25:**</a>
Replying to [jpflori](#comment%3A23):
> Replying to [@kiwifb](#comment%3A21):
> > Upstream bug then.

> Sure, I just sent a report to Victor Shoup.
> 

And he will fix it asap.



---

archive/issue_comments_266209.json:
```json
{
    "body": "<a id='comment:26'>**Comment 26:**</a>\nDo you think you can fix the `bernmm` problem? If not, using the old the \"legacy\" implementation is better than not merging this ticket.",
    "created_at": "2015-07-07T12:24:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266209",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:26'>**Comment 26:**</a>
Do you think you can fix the `bernmm` problem? If not, using the old the "legacy" implementation is better than not merging this ticket.



---

archive/issue_comments_266210.json:
```json
{
    "body": "<a id='comment:27'>**Comment 27:**</a>\nIf this is true:\n\n```\nNTL provides its own error callback framework\n```\nwe should use it.",
    "created_at": "2015-07-07T12:26:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266210",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:27'>**Comment 27:**</a>
If this is true:

```
NTL provides its own error callback framework
```
we should use it.



---

archive/issue_comments_266211.json:
```json
{
    "body": "<a id='comment:28'>**Comment 28:**</a>\nOK, we still need the patch to the callback, but not for the reason stated. So, please\nreplace\n\n```\nNTL provides its own error callback framework, but it is simpler\nthan the one provided by this patch: there is no context object.\n```\nby\n\n```\nNTL provides its own error callback framework, but it's not suitable\nfor Sage since we don't want to see the error message printed, we want\nthe error message to be part of the callback function.\n```",
    "created_at": "2015-07-07T12:35:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266211",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:28'>**Comment 28:**</a>
OK, we still need the patch to the callback, but not for the reason stated. So, please
replace

```
NTL provides its own error callback framework, but it is simpler
than the one provided by this patch: there is no context object.
```
by

```
NTL provides its own error callback framework, but it's not suitable
for Sage since we don't want to see the error message printed, we want
the error message to be part of the callback function.
```



---

archive/issue_comments_266212.json:
```json
{
    "body": "<a id='comment:29'>**Comment 29:**</a>\nI just sent an e-mail to Shoup about the callback function.",
    "created_at": "2015-07-07T12:48:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266212",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:29'>**Comment 29:**</a>
I just sent an e-mail to Shoup about the callback function.



---

archive/issue_comments_266213.json:
```json
{
    "body": "<a id='comment:30'>**Comment 30:**</a>\nReplying to [@jdemeyer](#comment%3A26):\n> Do you think you can fix the `bernmm` problem? If not, using the old the \"legacy\" implementation is better than not merging this ticket.\n\nI'd say not quickly and I'm away for one week starting tonight.\n\nI really have no idea why it does not work with the current patch.\nThe only way I see to understand this is to print everything bern_modp does to find the problem.\nA small couple of problematic values is `k = 128` and `p = 7` (or another small prime).\n\nSo unless you see some obvious mistake in what I did, we can postpone the use of the new (and recommended upstream) sp implem for later.\nWe'll just need to remove one line in `spkg-install`.",
    "created_at": "2015-07-07T13:01:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266213",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:30'>**Comment 30:**</a>
Replying to [@jdemeyer](#comment%3A26):
> Do you think you can fix the `bernmm` problem? If not, using the old the "legacy" implementation is better than not merging this ticket.

I'd say not quickly and I'm away for one week starting tonight.

I really have no idea why it does not work with the current patch.
The only way I see to understand this is to print everything bern_modp does to find the problem.
A small couple of problematic values is `k = 128` and `p = 7` (or another small prime).

So unless you see some obvious mistake in what I did, we can postpone the use of the new (and recommended upstream) sp implem for later.
We'll just need to remove one line in `spkg-install`.



---

archive/issue_comments_266214.json:
```json
{
    "body": "<a id='comment:31'>**Comment 31:**</a>\nReplying to [@jdemeyer](#comment%3A29):\n> I just sent an e-mail to Shoup about the callback function.\n\nThanks, I already mentioned that twice during our exchanges with Shoup but never really explained to him the difference between our and his error callback.\n\nIf by any chance you know why the `C++ new` patch for Singular is needed, I'd be happy you tell Shoup and I.",
    "created_at": "2015-07-07T13:03:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266214",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:31'>**Comment 31:**</a>
Replying to [@jdemeyer](#comment%3A29):
> I just sent an e-mail to Shoup about the callback function.

Thanks, I already mentioned that twice during our exchanges with Shoup but never really explained to him the difference between our and his error callback.

If by any chance you know why the `C++ new` patch for Singular is needed, I'd be happy you tell Shoup and I.



---

archive/issue_comments_266215.json:
```json
{
    "body": "<a id='comment:32'>**Comment 32:**</a>\nAlso note that NTL now provides exception handling though I've not activated it here.",
    "created_at": "2015-07-07T13:03:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266215",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:32'>**Comment 32:**</a>
Also note that NTL now provides exception handling though I've not activated it here.



---

archive/issue_comments_266216.json:
```json
{
    "body": "**Changing commit** from \"[3b1f14a3976e375ee23271a780b4e54e057549ec](https://github.com/sagemath/sagetrac-mirror/commit/3b1f14a3976e375ee23271a780b4e54e057549ec)\" to \"[a1b327a4b22269f79b237a1a936a5abde1431712](https://github.com/sagemath/sagetrac-mirror/commit/a1b327a4b22269f79b237a1a936a5abde1431712)\".",
    "created_at": "2015-07-07T13:06:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266216",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[3b1f14a3976e375ee23271a780b4e54e057549ec](https://github.com/sagemath/sagetrac-mirror/commit/3b1f14a3976e375ee23271a780b4e54e057549ec)" to "[a1b327a4b22269f79b237a1a936a5abde1431712](https://github.com/sagemath/sagetrac-mirror/commit/a1b327a4b22269f79b237a1a936a5abde1431712)".



---

archive/issue_comments_266217.json:
```json
{
    "body": "<a id='comment:33'>**Comment 33:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9fde69ea0bfccfaae8c45addd499e5f6874ff0fd\">9fde69e</a></td><td><code>Better description for errorcallback.patch.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a1b327a4b22269f79b237a1a936a5abde1431712\">a1b327a</a></td><td><code>Branch to test NTL with legacy sp implem.</code></td></tr></table>\n",
    "created_at": "2015-07-07T13:06:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266217",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:33'>**Comment 33:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9fde69ea0bfccfaae8c45addd499e5f6874ff0fd">9fde69e</a></td><td><code>Better description for errorcallback.patch.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a1b327a4b22269f79b237a1a936a5abde1431712">a1b327a</a></td><td><code>Branch to test NTL with legacy sp implem.</code></td></tr></table>




---

archive/issue_comments_266218.json:
```json
{
    "body": "<a id='comment:34'>**Comment 34:**</a>\nReplying to [@jdemeyer](#comment%3A28):\n> OK, we still need the patch to the callback, but not for the reason stated. So, please\n> replace\n> \n> ```\n> NTL provides its own error callback framework, but it is simpler\n> than the one provided by this patch: there is no context object.\n> ```\n> by\n> \n> ```\n> NTL provides its own error callback framework, but it's not suitable\n> for Sage since we don't want to see the error message printed, we want\n> the error message to be part of the callback function.\n> ```\n\nDone.\n\nI've also merged the changes from the legacy branch.",
    "created_at": "2015-07-07T13:07:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266218",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:34'>**Comment 34:**</a>
Replying to [@jdemeyer](#comment%3A28):
> OK, we still need the patch to the callback, but not for the reason stated. So, please
> replace
> 
> ```
> NTL provides its own error callback framework, but it is simpler
> than the one provided by this patch: there is no context object.
> ```
> by
> 
> ```
> NTL provides its own error callback framework, but it's not suitable
> for Sage since we don't want to see the error message printed, we want
> the error message to be part of the callback function.
> ```

Done.

I've also merged the changes from the legacy branch.



---

archive/issue_comments_266219.json:
```json
{
    "body": "**Changing commit** from \"[a1b327a4b22269f79b237a1a936a5abde1431712](https://github.com/sagemath/sagetrac-mirror/commit/a1b327a4b22269f79b237a1a936a5abde1431712)\" to \"[db8cf9977d8f5827371b128249f22348839872a4](https://github.com/sagemath/sagetrac-mirror/commit/db8cf9977d8f5827371b128249f22348839872a4)\".",
    "created_at": "2015-07-07T13:37:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266219",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[a1b327a4b22269f79b237a1a936a5abde1431712](https://github.com/sagemath/sagetrac-mirror/commit/a1b327a4b22269f79b237a1a936a5abde1431712)" to "[db8cf9977d8f5827371b128249f22348839872a4](https://github.com/sagemath/sagetrac-mirror/commit/db8cf9977d8f5827371b128249f22348839872a4)".



---

archive/issue_comments_266220.json:
```json
{
    "body": "<a id='comment:35'>**Comment 35:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/db8cf9977d8f5827371b128249f22348839872a4\">db8cf99</a></td><td><code>No c++11 for NTL without threads and exceptions.</code></td></tr></table>\n",
    "created_at": "2015-07-07T13:37:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266220",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:35'>**Comment 35:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/db8cf9977d8f5827371b128249f22348839872a4">db8cf99</a></td><td><code>No c++11 for NTL without threads and exceptions.</code></td></tr></table>




---

archive/issue_comments_266221.json:
```json
{
    "body": "<a id='comment:36'>**Comment 36:**</a>\nShoup answered that he will update the callback function such that it will be good enough for Sage.",
    "created_at": "2015-07-07T13:59:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266221",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:36'>**Comment 36:**</a>
Shoup answered that he will update the callback function such that it will be good enough for Sage.



---

archive/issue_comments_266222.json:
```json
{
    "body": "**Author:** Jean-Pierre Flori",
    "created_at": "2015-07-07T15:53:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266222",
    "user": "https://github.com/sagetrac-jpflori"
}
```

**Author:** Jean-Pierre Flori



---

archive/issue_events_230432.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2015-07-07T15:53:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18845#event-230432"
}
```



---

archive/issue_comments_266223.json:
```json
{
    "body": "<a id='comment:38'>**Comment 38:**</a>\n\n```\nTraceback (most recent call last):\n  File \"/usr/local/src/sage-config/src/doc/common/builder.py\", line 1619, in <module>\n    import sage.all\n  File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/all.py\", line 103, in <module>\n    import sage.symbolic.pynac\nImportError: /usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/symbolic/pynac.so: undefined symbol: _ZN3NTL5ErrorEPKc\n```",
    "created_at": "2015-07-07T17:09:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266223",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:38'>**Comment 38:**</a>

```
Traceback (most recent call last):
  File "/usr/local/src/sage-config/src/doc/common/builder.py", line 1619, in <module>
    import sage.all
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/all.py", line 103, in <module>
    import sage.symbolic.pynac
ImportError: /usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/symbolic/pynac.so: undefined symbol: _ZN3NTL5ErrorEPKc
```



---

archive/issue_events_230433.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-07-07T17:09:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18845#event-230433"
}
```



---

archive/issue_events_230434.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-07-07T17:09:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18845#event-230434"
}
```



---

archive/issue_comments_266224.json:
```json
{
    "body": "<a id='comment:39'>**Comment 39:**</a>\nIt's a dependency problem: that module should depend on NTL, but it doesn't.",
    "created_at": "2015-07-07T17:32:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266224",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:39'>**Comment 39:**</a>
It's a dependency problem: that module should depend on NTL, but it doesn't.



---

archive/issue_comments_266225.json:
```json
{
    "body": "<a id='comment:40'>**Comment 40:**</a>\nStrange:\n\n```\n[sage.git]$ ./sage \n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 SageMath Version 6.8.beta7, Release Date: 2015-07-02               \u2502\n\u2502 Type \"notebook()\" for the browser-based notebook interface.        \u2502\n\u2502 Type \"help()\" for help.                                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\nsage: import sage.symbolic.pynac\nsage:\n```\nand\n\n```\n[sage.git]$ nm local/lib/python/site-packages/sage/symbolic/pynac.so |grep NTL\n000000000000c610 t 00000058.plt_call._ZN3NTL13TerminalErrorEPKc+0\n000000000000d088 t 00000058.plt_call._ZN3NTL14BlockConstructEPNS_4ZZ_pEl+0\n000000000000ca20 t 00000058.plt_call._ZN3NTL3VecINS_4ZZ_pEE10AllocateToEl+0\n000000000000c7a0 t 00000058.plt_call._ZN3NTL3VecINS_5ZZ_pEEE10AllocateToEl+0\n000000000000d074 t 00000058.plt_call._ZN3NTL5ZZ_pX9normalizeEv+0\n000000000000c55c t 00000058.plt_call._ZN3NTL6ZZ_pEX9normalizeEv+0\n000000000000c764 t 00000058.plt_call._ZNK3NTL11ZZ_pContext7restoreEv+0\n0000000000078cf0 D _Z19ZZ_pEX_conv_modulusRN3NTL6ZZ_pEXERKS0_RKNS_11ZZ_pContextE\n                 U _ZN3NTL13TerminalErrorEPKc\n                 U _ZN3NTL14BlockConstructEPNS_4ZZ_pEl\n0000000000078cd0 W _ZN3NTL3VecINS_4ZZ_pEE10AllocateToEl\n0000000000078ce0 W _ZN3NTL3VecINS_5ZZ_pEEE10AllocateToEl\n                 U _ZN3NTL5ZZ_pX9normalizeEv\n                 U _ZN3NTL6ZZ_pEX9normalizeEv\n                 U _ZN3NTL8ZZ_pInfoE\n                 U _ZNK3NTL11ZZ_pContext7restoreEv\n```\n\nPlain `Error` does not exist anymore in NTL 9.x.",
    "created_at": "2015-07-07T17:33:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266225",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:40'>**Comment 40:**</a>
Strange:

```
[sage.git]$ ./sage 

 SageMath Version 6.8.beta7, Release Date: 2015-07-02               
 Type "notebook()" for the browser-based notebook interface.        
 Type "help()" for help.                                            


 Warning: this is a prerelease version, and it may be unstable.     

sage: import sage.symbolic.pynac
sage:
```
and

```
[sage.git]$ nm local/lib/python/site-packages/sage/symbolic/pynac.so |grep NTL
000000000000c610 t 00000058.plt_call._ZN3NTL13TerminalErrorEPKc+0
000000000000d088 t 00000058.plt_call._ZN3NTL14BlockConstructEPNS_4ZZ_pEl+0
000000000000ca20 t 00000058.plt_call._ZN3NTL3VecINS_4ZZ_pEE10AllocateToEl+0
000000000000c7a0 t 00000058.plt_call._ZN3NTL3VecINS_5ZZ_pEEE10AllocateToEl+0
000000000000d074 t 00000058.plt_call._ZN3NTL5ZZ_pX9normalizeEv+0
000000000000c55c t 00000058.plt_call._ZN3NTL6ZZ_pEX9normalizeEv+0
000000000000c764 t 00000058.plt_call._ZNK3NTL11ZZ_pContext7restoreEv+0
0000000000078cf0 D _Z19ZZ_pEX_conv_modulusRN3NTL6ZZ_pEXERKS0_RKNS_11ZZ_pContextE
                 U _ZN3NTL13TerminalErrorEPKc
                 U _ZN3NTL14BlockConstructEPNS_4ZZ_pEl
0000000000078cd0 W _ZN3NTL3VecINS_4ZZ_pEE10AllocateToEl
0000000000078ce0 W _ZN3NTL3VecINS_5ZZ_pEEE10AllocateToEl
                 U _ZN3NTL5ZZ_pX9normalizeEv
                 U _ZN3NTL6ZZ_pEX9normalizeEv
                 U _ZN3NTL8ZZ_pInfoE
                 U _ZNK3NTL11ZZ_pContext7restoreEv
```

Plain `Error` does not exist anymore in NTL 9.x.



---

archive/issue_comments_266226.json:
```json
{
    "body": "<a id='comment:41'>**Comment 41:**</a>\nReplying to [@jdemeyer](#comment%3A39):\n> It's a dependency problem: that module should depend on NTL, but it doesn't.\n\nI see.\nCan you fix this or should I do it?",
    "created_at": "2015-07-07T17:35:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266226",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:41'>**Comment 41:**</a>
Replying to [@jdemeyer](#comment%3A39):
> It's a dependency problem: that module should depend on NTL, but it doesn't.

I see.
Can you fix this or should I do it?



---

archive/issue_comments_266227.json:
```json
{
    "body": "<a id='comment:42'>**Comment 42:**</a>\nHmm, it's strange that this module isn't actually linked against `ntl`:\n\n```\ng++ -pthread -shared -L/usr/local/src/sage-config/local/lib build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/symbolic/pynac.o -L/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -lgsl -lgmp -lcblas -latlas -lpynac -lstdc++ -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/symbolic/pynac.so\n```",
    "created_at": "2015-07-07T17:59:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266227",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:42'>**Comment 42:**</a>
Hmm, it's strange that this module isn't actually linked against `ntl`:

```
g++ -pthread -shared -L/usr/local/src/sage-config/local/lib build/temp.linux-x86_64-2.7/usr/local/src/sage-config/src/build/cythonized/sage/symbolic/pynac.o -L/usr/local/src/sage-config/local/lib -L/usr/local/src/sage-config/local/lib -lgsl -lgmp -lcblas -latlas -lpynac -lstdc++ -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/symbolic/pynac.so
```



---

archive/issue_comments_266228.json:
```json
{
    "body": "<a id='comment:43'>**Comment 43:**</a>\nI'm lost here... regardless of this ticket, the module `sage.symbolic.pynac` is *not* linked against NTL, but it does contain those NTL symbols.",
    "created_at": "2015-07-07T18:12:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266228",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:43'>**Comment 43:**</a>
I'm lost here... regardless of this ticket, the module `sage.symbolic.pynac` is *not* linked against NTL, but it does contain those NTL symbols.



---

archive/issue_comments_266229.json:
```json
{
    "body": "<a id='comment:44'>**Comment 44:**</a>\nC++ templates black magic ? :)\n\nActually I had a quick look at the pyx file and found nothing about NTL...",
    "created_at": "2015-07-07T22:15:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266229",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:44'>**Comment 44:**</a>
C++ templates black magic ? :)

Actually I had a quick look at the pyx file and found nothing about NTL...



---

archive/issue_comments_266230.json:
```json
{
    "body": "<a id='comment:45'>**Comment 45:**</a>\nHad a quick look earlier this morning, the only way `ntl` can get pulled is by a chain of include files that are not obvious to follow. `sage.symbolic.pynac` import some stuff from `sage.rings` and I think something in `rings.pxd` import some `ntl` stuff eventually. I will look for where precise `NTL` symbols are used next.",
    "created_at": "2015-07-07T22:25:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266230",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:45'>**Comment 45:**</a>
Had a quick look earlier this morning, the only way `ntl` can get pulled is by a chain of include files that are not obvious to follow. `sage.symbolic.pynac` import some stuff from `sage.rings` and I think something in `rings.pxd` import some `ntl` stuff eventually. I will look for where precise `NTL` symbols are used next.



---

archive/issue_comments_266231.json:
```json
{
    "body": "<a id='comment:46'>**Comment 46:**</a>\nI'll be in a hidden valley for one week and though I might reply here, I won't have any ssh connection and any chance to fix this, so feel free to close the ticket without my help!",
    "created_at": "2015-07-07T22:30:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266231",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:46'>**Comment 46:**</a>
I'll be in a hidden valley for one week and though I might reply here, I won't have any ssh connection and any chance to fix this, so feel free to close the ticket without my help!



---

archive/issue_comments_266232.json:
```json
{
    "body": "<a id='comment:47'>**Comment 47:**</a>\nIt seems that the module is really underlinked:\n\n```\n$ ./sage --python\nPython 2.7.9 (default, Jul  5 2015, 21:49:10) \n[GCC 4.8.4] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import sage.symbolic.pynac\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\nImportError: /usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/symbolic/pynac.so: undefined symbol: _ZN3NTL8ZZ_pInfoE\n```\nThe only reason there is no error in Sage is that NTL was imported before (by some other module imported earlier).",
    "created_at": "2015-07-08T06:00:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266232",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:47'>**Comment 47:**</a>
It seems that the module is really underlinked:

```
$ ./sage --python
Python 2.7.9 (default, Jul  5 2015, 21:49:10) 
[GCC 4.8.4] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import sage.symbolic.pynac
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: /usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/symbolic/pynac.so: undefined symbol: _ZN3NTL8ZZ_pInfoE
```
The only reason there is no error in Sage is that NTL was imported before (by some other module imported earlier).



---

archive/issue_comments_266233.json:
```json
{
    "body": "**Dependencies:** #18866",
    "created_at": "2015-07-08T08:26:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266233",
    "user": "https://github.com/jdemeyer"
}
```

**Dependencies:** #18866



---

archive/issue_comments_266234.json:
```json
{
    "body": "<a id='comment:48'>**Comment 48:**</a>\nThere are *many* modules with the same linking problem. I think it's pointless to fix that problem without cleaning up the whole NTL interface (which is a big mess).\n\nThat leaves the problem of the dependency checking: I opened #18866 for that.",
    "created_at": "2015-07-08T08:26:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266234",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:48'>**Comment 48:**</a>
There are *many* modules with the same linking problem. I think it's pointless to fix that problem without cleaning up the whole NTL interface (which is a big mess).

That leaves the problem of the dependency checking: I opened #18866 for that.



---

archive/issue_comments_266235.json:
```json
{
    "body": "**Changing branch** from \"[u/jpflori/ticket/18845](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/18845)\" to \"[u/jdemeyer/ticket/18845](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/18845)\".",
    "created_at": "2015-07-08T09:29:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266235",
    "user": "https://github.com/jdemeyer"
}
```

**Changing branch** from "[u/jpflori/ticket/18845](https://github.com/sagemath/sagetrac-mirror/tree/u/jpflori/ticket/18845)" to "[u/jdemeyer/ticket/18845](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/18845)".



---

archive/issue_comments_266236.json:
```json
{
    "body": "**Changing commit** from \"[db8cf9977d8f5827371b128249f22348839872a4](https://github.com/sagemath/sagetrac-mirror/commit/db8cf9977d8f5827371b128249f22348839872a4)\" to \"[50a36992701a707aaa319bcf447a833b4ea600df](https://github.com/sagemath/sagetrac-mirror/commit/50a36992701a707aaa319bcf447a833b4ea600df)\".",
    "created_at": "2015-07-08T09:29:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266236",
    "user": "https://github.com/jdemeyer"
}
```

**Changing commit** from "[db8cf9977d8f5827371b128249f22348839872a4](https://github.com/sagemath/sagetrac-mirror/commit/db8cf9977d8f5827371b128249f22348839872a4)" to "[50a36992701a707aaa319bcf447a833b4ea600df](https://github.com/sagemath/sagetrac-mirror/commit/50a36992701a707aaa319bcf447a833b4ea600df)".



---

archive/issue_comments_266237.json:
```json
{
    "body": "<a id='comment:50'>**Comment 50:**</a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3892efc0c2f7f171eac3761b1e4ec63a1397f801\">3892efc</a></td><td><code>Modules using NTL should depend on NTL</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8f3d9a5cd7320556f5f323d9cd5f0af2dc3a9806\">8f3d9a5</a></td><td><code>Merge remote-tracking branch 'trac/u/jpflori/ticket/18845' into ticket/18845</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/50a36992701a707aaa319bcf447a833b4ea600df\">50a3699</a></td><td><code>Change version_stamp to support downgrading NTL</code></td></tr></table>\n",
    "created_at": "2015-07-08T09:29:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266237",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:50'>**Comment 50:**</a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3892efc0c2f7f171eac3761b1e4ec63a1397f801">3892efc</a></td><td><code>Modules using NTL should depend on NTL</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8f3d9a5cd7320556f5f323d9cd5f0af2dc3a9806">8f3d9a5</a></td><td><code>Merge remote-tracking branch 'trac/u/jpflori/ticket/18845' into ticket/18845</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/50a36992701a707aaa319bcf447a833b4ea600df">50a3699</a></td><td><code>Change version_stamp to support downgrading NTL</code></td></tr></table>




---

archive/issue_comments_266238.json:
```json
{
    "body": "**Changing dependencies** from \"#18866\" to \"#18866, #18867\".",
    "created_at": "2015-07-08T09:41:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266238",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#18866" to "#18866, #18867".



---

archive/issue_comments_266239.json:
```json
{
    "body": "<a id='comment:52'>**Comment 52:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/71ffefc5a30c59be7d163d744f3584d7cb0e480a\">71ffefc</a></td><td><code>Revert all changes to bernmm</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4e39fd6990a25935bd3df3df537cf1d084a9e493\">4e39fd6</a></td><td><code>Fix C++ namespaces ambiguity.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4fd99b370fca63dd04213519f614df7721314fba\">4fd99b3</a></td><td><code>Merge remote-tracking branch 'trac/u/jdemeyer/ticket/18867' into ticket/18845</code></td></tr></table>\n",
    "created_at": "2015-07-08T09:41:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266239",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:52'>**Comment 52:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/71ffefc5a30c59be7d163d744f3584d7cb0e480a">71ffefc</a></td><td><code>Revert all changes to bernmm</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4e39fd6990a25935bd3df3df537cf1d084a9e493">4e39fd6</a></td><td><code>Fix C++ namespaces ambiguity.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4fd99b370fca63dd04213519f614df7721314fba">4fd99b3</a></td><td><code>Merge remote-tracking branch 'trac/u/jdemeyer/ticket/18867' into ticket/18845</code></td></tr></table>




---

archive/issue_comments_266240.json:
```json
{
    "body": "**Changing commit** from \"[50a36992701a707aaa319bcf447a833b4ea600df](https://github.com/sagemath/sagetrac-mirror/commit/50a36992701a707aaa319bcf447a833b4ea600df)\" to \"[4fd99b370fca63dd04213519f614df7721314fba](https://github.com/sagemath/sagetrac-mirror/commit/4fd99b370fca63dd04213519f614df7721314fba)\".",
    "created_at": "2015-07-08T09:41:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266240",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[50a36992701a707aaa319bcf447a833b4ea600df](https://github.com/sagemath/sagetrac-mirror/commit/50a36992701a707aaa319bcf447a833b4ea600df)" to "[4fd99b370fca63dd04213519f614df7721314fba](https://github.com/sagemath/sagetrac-mirror/commit/4fd99b370fca63dd04213519f614df7721314fba)".



---

archive/issue_events_230435.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-07-08T12:57:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18845#event-230435"
}
```



---

archive/issue_events_230436.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-07-08T12:57:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18845#event-230436"
}
```



---

archive/issue_comments_266241.json:
```json
{
    "body": "<a id='comment:53'>**Comment 53:**</a>\nAll doctests pass (but I haven't actually reviewed the changes)",
    "created_at": "2015-07-08T12:57:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266241",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:53'>**Comment 53:**</a>
All doctests pass (but I haven't actually reviewed the changes)



---

archive/issue_comments_266242.json:
```json
{
    "body": "**Reviewer:** Volker Braun",
    "created_at": "2015-07-08T22:53:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266242",
    "user": "https://github.com/vbraun"
}
```

**Reviewer:** Volker Braun



---

archive/issue_events_230437.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-07-08T22:53:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18845#event-230437"
}
```



---

archive/issue_events_230438.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-07-08T22:53:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18845#event-230438"
}
```



---

archive/issue_events_230439.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-07-09T19:55:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18845#event-230439"
}
```



---

archive/issue_events_230440.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "55adbdf4bad3cb769b9ee626fb9394422f6f9b7b",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-07-09T19:55:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18845#event-230440"
}
```



---

archive/issue_comments_266243.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/ticket/18845](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/18845)\" to \"[4fd99b370fca63dd04213519f614df7721314fba](https://github.com/sagemath/sagetrac-mirror/commit/4fd99b370fca63dd04213519f614df7721314fba)\".",
    "created_at": "2015-07-09T19:55:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266243",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/jdemeyer/ticket/18845](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/18845)" to "[4fd99b370fca63dd04213519f614df7721314fba](https://github.com/sagemath/sagetrac-mirror/commit/4fd99b370fca63dd04213519f614df7721314fba)".



---

archive/issue_comments_266244.json:
```json
{
    "body": "<a id='comment:56'>**Comment 56:**</a>\nFollow-up: #18875",
    "created_at": "2015-07-09T20:43:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266244",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:56'>**Comment 56:**</a>
Follow-up: #18875



---

archive/issue_comments_266245.json:
```json
{
    "body": "**Changing commit** from \"[4fd99b370fca63dd04213519f614df7721314fba](https://github.com/sagemath/sagetrac-mirror/commit/4fd99b370fca63dd04213519f614df7721314fba)\" to \"\".",
    "created_at": "2015-07-09T20:43:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18845",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18845#issuecomment-266245",
    "user": "https://github.com/jdemeyer"
}
```

**Changing commit** from "[4fd99b370fca63dd04213519f614df7721314fba](https://github.com/sagemath/sagetrac-mirror/commit/4fd99b370fca63dd04213519f614df7721314fba)" to "".
