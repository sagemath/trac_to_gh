# Issue 18066: Cleanup of ModulesWithBasis and friends

archive/issues_017829.json:
```json
{
    "assignees": [
        "https://github.com/tscrim"
    ],
    "body": "Currently `ModulesWithBasis` requires its implementations to behave like `CombinatorialFreeModule`, along with having an indexing set for the basis which is comparable. The aim of this ticket is to move various methods from `CombintorialFreeModule` and it's element class to `ModulesWithBasis`. This ticket will also give better generic functionality, such as a default implementation of `support`.\n\nCC:  @nthiery @darijgr @anneschilling @zabrocki @jhpalmieri\n\nBranch: **[`96004df`](https://github.com/sagemath/sagetrac-mirror/commit/96004dfa8a3368fe4f2fe122268744d9f6e4bf79)**\n\nReviewer: **Darij Grinberg**\n\nAuthor: **Travis Scrimshaw**\n\nComponent: **categories**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/18066_\n\n",
    "closed_at": "2015-10-26T00:18:42Z",
    "created_at": "2015-03-27T06:32:19Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20categories",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.10",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Cleanup of ModulesWithBasis and friends",
    "type": "issue",
    "updated_at": "2019-07-30T13:53:51Z",
    "url": "https://github.com/sagemath/sage/issues/18066",
    "user": "https://github.com/tscrim"
}
```
Currently `ModulesWithBasis` requires its implementations to behave like `CombinatorialFreeModule`, along with having an indexing set for the basis which is comparable. The aim of this ticket is to move various methods from `CombintorialFreeModule` and it's element class to `ModulesWithBasis`. This ticket will also give better generic functionality, such as a default implementation of `support`.

CC:  @nthiery @darijgr @anneschilling @zabrocki @jhpalmieri

Branch: **[`96004df`](https://github.com/sagemath/sagetrac-mirror/commit/96004dfa8a3368fe4f2fe122268744d9f6e4bf79)**

Reviewer: **Darij Grinberg**

Author: **Travis Scrimshaw**

Component: **categories**

_Issue created by migration from https://trac.sagemath.org/ticket/18066_





---

archive/issue_events_254601.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-03-27T06:32:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18066#event-254601"
}
```



---

archive/issue_events_254602.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-03-27T06:32:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20categories",
    "label_color": "0000ff",
    "label_name": "c: categories",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18066#event-254602"
}
```



---

archive/issue_events_254603.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-03-27T06:32:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18066#event-254603"
}
```



---

archive/issue_events_254604.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-03-27T06:32:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18066#event-254604"
}
```



---

archive/issue_events_254605.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-03-27T06:32:19Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "subject": "https://github.com/tscrim",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18066#event-254605"
}
```



---

archive/issue_comments_246135.json:
```json
{
    "body": "Commit: **[`f8bd451`](https://github.com/sagemath/sagetrac-mirror/commit/f8bd45183a2894e9260073209ecd8b93b957f6c4)**",
    "created_at": "2015-10-11T19:24:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246135",
    "user": "https://github.com/tscrim"
}
```

Commit: **[`f8bd451`](https://github.com/sagemath/sagetrac-mirror/commit/f8bd45183a2894e9260073209ecd8b93b957f6c4)**



---

archive/issue_comments_246136.json:
```json
{
    "body": "Author: **Travis Scrimshaw**",
    "created_at": "2015-10-11T19:24:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246136",
    "user": "https://github.com/tscrim"
}
```

Author: **Travis Scrimshaw**



---

archive/issue_events_254606.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-11T19:24:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18066#event-254606"
}
```



---

archive/issue_events_254607.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-11T19:24:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18066#event-254607"
}
```



---

archive/issue_comments_246137.json:
```json
{
    "body": "Branch: **[public/categories/cleanup_CFM_modules_wBasis-18066](https://github.com/sagemath/sagetrac-mirror/tree/public/categories/cleanup_CFM_modules_wBasis-18066)**",
    "created_at": "2015-10-11T19:24:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246137",
    "user": "https://github.com/tscrim"
}
```

Branch: **[public/categories/cleanup_CFM_modules_wBasis-18066](https://github.com/sagemath/sagetrac-mirror/tree/public/categories/cleanup_CFM_modules_wBasis-18066)**



---

archive/issue_events_254608.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-11T19:24:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18066#event-254608"
}
```



---

archive/issue_comments_246138.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nOkay, I figured this was the best starting point for trying to see if the quack of a free module echoes. For this ticket, I moved many methods up and was able to generalize them. There were only minimal changes needed to remove the ordering on `support` (only the Macdonald basis of `Sym`) and make `monomial_coefficients()` an abstract method. I added the `copy` parameter to monomial coefficients for both speed and `dict` in the usual free modules has this API. Most of the other changes are trivial changes to doctest output.\n\nThe next thing to do would be to check to see if #10672 becomes invalid because of this ticket (execpt perhaps the iteration issue). After that, then move onto either merging CFM and (sparse?) free modules #10671 or rebasing and finalizing #18310.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f8bd45183a2894e9260073209ecd8b93b957f6c4\"><code>f8bd451</code></a></td><td><code>Moving code up from CFM to modules_with_basis.</code></td></tr></table>\n",
    "created_at": "2015-10-11T19:24:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246138",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:1" align="right">comment:1</div>

Okay, I figured this was the best starting point for trying to see if the quack of a free module echoes. For this ticket, I moved many methods up and was able to generalize them. There were only minimal changes needed to remove the ordering on `support` (only the Macdonald basis of `Sym`) and make `monomial_coefficients()` an abstract method. I added the `copy` parameter to monomial coefficients for both speed and `dict` in the usual free modules has this API. Most of the other changes are trivial changes to doctest output.

The next thing to do would be to check to see if #10672 becomes invalid because of this ticket (execpt perhaps the iteration issue). After that, then move onto either merging CFM and (sparse?) free modules #10671 or rebasing and finalizing #18310.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f8bd45183a2894e9260073209ecd8b93b957f6c4"><code>f8bd451</code></a></td><td><code>Moving code up from CFM to modules_with_basis.</code></td></tr></table>




---

archive/issue_comments_246139.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nAlso a question mostly for Nicolas, do we still need `_apply_module_morphism`? Is it just a method so that we don't have to create a full morphism object?",
    "created_at": "2015-10-11T19:30:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246139",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:2" align="right">comment:2</div>

Also a question mostly for Nicolas, do we still need `_apply_module_morphism`? Is it just a method so that we don't have to create a full morphism object?



---

archive/issue_comments_246140.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\n+1! This is the way to go, and thanks for doing it.\n\nHowever, one thing I'm still missing is an explicit explanation of what methods one needs to implement in order to inherit from `ModulesWithBasis`. I suspect this is no longer up-to-date:\n\n```\n        # To implement a module_with_basis you need to implement either\n        #   basis() or an _indices attribute and monomial().\n```\n(as in, we probably need more now), right? \n\nCoercion of coefficients into the base ring needs to be carefully thought over. As of now, I am not sure if it works correctly. For instance, `term` does no coercion, but `__invert__` does `self.parent().term(one, ~mcs[one])`, although the inversion operator `~` might produce an element of a bigger ring (for example, `~(ZZ(2))` returns `1/2`).\n\nOne more thing, which is probably not your fault but just caught my eyes. The docstring of `module_morphism` says:\n\n```\n            - ``matrix``   -- a matrix of size `\\dim X \\times \\dim Y`\n              or `\\dim Y \\times \\dim X`\n```\nI don't see why the \"or\" is here. The doctests show that `\\dim Y \\times \\dim X` works, but does `\\dim X \\times \\dim Y` work too? And if so, *should* it? I think checking whether the matrix has the \"wrong\" dimensions, and then trying to fix them by transposing it, would be a brittle paradigm. \n\nAlso, could we have doctests proving that the `monomial_coefficients` method works correctly (including not mutating the dictionary unless explicitly required) on various instances of `ModulesWithBasis` (e.g., vector spaces)? Thank you!",
    "created_at": "2015-10-12T19:49:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246140",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:3" align="right">comment:3</div>

+1! This is the way to go, and thanks for doing it.

However, one thing I'm still missing is an explicit explanation of what methods one needs to implement in order to inherit from `ModulesWithBasis`. I suspect this is no longer up-to-date:

```
        # To implement a module_with_basis you need to implement either
        #   basis() or an _indices attribute and monomial().
```
(as in, we probably need more now), right? 

Coercion of coefficients into the base ring needs to be carefully thought over. As of now, I am not sure if it works correctly. For instance, `term` does no coercion, but `__invert__` does `self.parent().term(one, ~mcs[one])`, although the inversion operator `~` might produce an element of a bigger ring (for example, `~(ZZ(2))` returns `1/2`).

One more thing, which is probably not your fault but just caught my eyes. The docstring of `module_morphism` says:

```
            - ``matrix``   -- a matrix of size `\dim X \times \dim Y`
              or `\dim Y \times \dim X`
```
I don't see why the "or" is here. The doctests show that `\dim Y \times \dim X` works, but does `\dim X \times \dim Y` work too? And if so, *should* it? I think checking whether the matrix has the "wrong" dimensions, and then trying to fix them by transposing it, would be a brittle paradigm. 

Also, could we have doctests proving that the `monomial_coefficients` method works correctly (including not mutating the dictionary unless explicitly required) on various instances of `ModulesWithBasis` (e.g., vector spaces)? Thank you!



---

archive/issue_comments_246141.json:
```json
{
    "body": "Changed commit from **[`f8bd451`](https://github.com/sagemath/sagetrac-mirror/commit/f8bd45183a2894e9260073209ecd8b93b957f6c4)** to **[`aa444d2`](https://github.com/sagemath/sagetrac-mirror/commit/aa444d2681187c178d9eca7c410468056a14bb3d)**",
    "created_at": "2015-10-12T22:19:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246141",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f8bd451`](https://github.com/sagemath/sagetrac-mirror/commit/f8bd45183a2894e9260073209ecd8b93b957f6c4)** to **[`aa444d2`](https://github.com/sagemath/sagetrac-mirror/commit/aa444d2681187c178d9eca7c410468056a14bb3d)**



---

archive/issue_comments_246142.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa444d2681187c178d9eca7c410468056a14bb3d\"><code>aa444d2</code></a></td><td><code>Fixing doctests, trying to improve compatibility, and some changes.</code></td></tr></table>\n",
    "created_at": "2015-10-12T22:19:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246142",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa444d2681187c178d9eca7c410468056a14bb3d"><code>aa444d2</code></a></td><td><code>Fixing doctests, trying to improve compatibility, and some changes.</code></td></tr></table>




---

archive/issue_comments_246143.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/954e3542ccc00ef3cc294f19019da3608d87a5a8\"><code>954e354</code></a></td><td><code>Added a test Darij requested.</code></td></tr></table>\n",
    "created_at": "2015-10-12T22:34:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246143",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/954e3542ccc00ef3cc294f19019da3608d87a5a8"><code>954e354</code></a></td><td><code>Added a test Darij requested.</code></td></tr></table>




---

archive/issue_comments_246144.json:
```json
{
    "body": "Changed commit from **[`aa444d2`](https://github.com/sagemath/sagetrac-mirror/commit/aa444d2681187c178d9eca7c410468056a14bb3d)** to **[`954e354`](https://github.com/sagemath/sagetrac-mirror/commit/954e3542ccc00ef3cc294f19019da3608d87a5a8)**",
    "created_at": "2015-10-12T22:34:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246144",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`aa444d2`](https://github.com/sagemath/sagetrac-mirror/commit/aa444d2681187c178d9eca7c410468056a14bb3d)** to **[`954e354`](https://github.com/sagemath/sagetrac-mirror/commit/954e3542ccc00ef3cc294f19019da3608d87a5a8)**



---

archive/issue_comments_246145.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nSo in my latest commit I fixed doctests. Some were trivial due to `support` no longer being ordered (and hence changes to the k-schur book tests and the cc of Anne and Mike), some were more substantial:\n\n- `ChainComplexes` when passed a field said `VectorSpaces`, and so it did not consider itself as having a distinguished basis. However, if you give it a ring (like `ZZ`), then it became in `ModulesWithBasis` (=`FreeModules`), which it currently does not live from what I saw. Since there wasn't anything using this extra functionality (any attempt to use it was likely broken), I opted to downgrade the category to just `Modules`. (John, I cc'ed you to let you know.)\n\n- I added a `dense_coefficient_list` for finite dimensional modules with basis so that you could get an ordered list of coefficients including 0's. This was needed for hyperplane arrangements. I'm open to different names.\n\n- I made the linear expression code be in finite dimensional modules with basis.\n\nReplying to [@darijgr](#comment:3):\n> However, one thing I'm still missing is an explicit explanation of what methods one needs to implement in order to inherit from `ModulesWithBasis`. I suspect this is no longer up-to-date:\n> \n> ```\n>         # To implement a module_with_basis you need to implement either\n>         #   basis() or an _indices attribute and monomial().\n> ```\n> (as in, we probably need more now), right? \n\nI put that in there because that is all that should be required. However, how the code breaks and the traceback tells you everything you need to know as far as what to implement.\n\n> Coercion of coefficients into the base ring needs to be carefully thought over. As of now, I am not sure if it works correctly. For instance, `term` does no coercion, but `__invert__` does `self.parent().term(one, ~mcs[one])`, although the inversion operator `~` might produce an element of a bigger ring (for example, `~(ZZ(2))` returns `1/2`).\n\nActually my generic implementation should handle this with grace as it is `coeff * self.monomial(index)`. However, CFM currently does not do any coercion as indicated in the docstring, but that is a discussion for another ticket.\n\n> One more thing, which is probably not your fault but just caught my eyes. The docstring of `module_morphism` says:\n> \n> ```\n>             - ``matrix``   -- a matrix of size `\\dim X \\times \\dim Y`\n>               or `\\dim Y \\times \\dim X`\n> ```\n> I don't see why the \"or\" is here. The doctests show that `\\dim Y \\times \\dim X` works, but does `\\dim X \\times \\dim Y` work too? And if so, *should* it? I think checking whether the matrix has the \"wrong\" dimensions, and then trying to fix them by transposing it, would be a brittle paradigm. \n\nI don't know and I don't really care as that is outside of the scope of this ticket.\n\n> Also, could we have doctests proving that the `monomial_coefficients` method works correctly (including not mutating the dictionary unless explicitly required) on various instances of `ModulesWithBasis` (e.g., vector spaces)?\n\nAdded.",
    "created_at": "2015-10-12T22:38:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246145",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:6" align="right">comment:6</div>

So in my latest commit I fixed doctests. Some were trivial due to `support` no longer being ordered (and hence changes to the k-schur book tests and the cc of Anne and Mike), some were more substantial:

- `ChainComplexes` when passed a field said `VectorSpaces`, and so it did not consider itself as having a distinguished basis. However, if you give it a ring (like `ZZ`), then it became in `ModulesWithBasis` (=`FreeModules`), which it currently does not live from what I saw. Since there wasn't anything using this extra functionality (any attempt to use it was likely broken), I opted to downgrade the category to just `Modules`. (John, I cc'ed you to let you know.)

- I added a `dense_coefficient_list` for finite dimensional modules with basis so that you could get an ordered list of coefficients including 0's. This was needed for hyperplane arrangements. I'm open to different names.

- I made the linear expression code be in finite dimensional modules with basis.

Replying to [@darijgr](#comment:3):
> However, one thing I'm still missing is an explicit explanation of what methods one needs to implement in order to inherit from `ModulesWithBasis`. I suspect this is no longer up-to-date:
> 
> ```
>         # To implement a module_with_basis you need to implement either
>         #   basis() or an _indices attribute and monomial().
> ```
> (as in, we probably need more now), right? 

I put that in there because that is all that should be required. However, how the code breaks and the traceback tells you everything you need to know as far as what to implement.

> Coercion of coefficients into the base ring needs to be carefully thought over. As of now, I am not sure if it works correctly. For instance, `term` does no coercion, but `__invert__` does `self.parent().term(one, ~mcs[one])`, although the inversion operator `~` might produce an element of a bigger ring (for example, `~(ZZ(2))` returns `1/2`).

Actually my generic implementation should handle this with grace as it is `coeff * self.monomial(index)`. However, CFM currently does not do any coercion as indicated in the docstring, but that is a discussion for another ticket.

> One more thing, which is probably not your fault but just caught my eyes. The docstring of `module_morphism` says:
> 
> ```
>             - ``matrix``   -- a matrix of size `\dim X \times \dim Y`
>               or `\dim Y \times \dim X`
> ```
> I don't see why the "or" is here. The doctests show that `\dim Y \times \dim X` works, but does `\dim X \times \dim Y` work too? And if so, *should* it? I think checking whether the matrix has the "wrong" dimensions, and then trying to fix them by transposing it, would be a brittle paradigm. 

I don't know and I don't really care as that is outside of the scope of this ticket.

> Also, could we have doctests proving that the `monomial_coefficients` method works correctly (including not mutating the dictionary unless explicitly required) on various instances of `ModulesWithBasis` (e.g., vector spaces)?

Added.



---

archive/issue_comments_246146.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@darijgr](#comment:3):\n> One more thing, which is probably not your fault but just caught my eyes. The docstring of `module_morphism` says:\n> \n> ```\n>             - ``matrix``   -- a matrix of size `\\dim X \\times \\dim Y`\n>               or `\\dim Y \\times \\dim X`\n> ```\n> I don't see why the \"or\" is here. The doctests show that `\\dim Y \\times \\dim X` works, but does `\\dim X \\times \\dim Y` work too? And if so, *should* it? I think checking whether the matrix has the \"wrong\" dimensions, and then trying to fix them by transposing it, would be a brittle paradigm. \n\nWhich of the two it is depends on the value of the optional ``side`` argument. No worry, there is no attempt at \"fixing\" things by transposition.",
    "created_at": "2015-10-13T21:36:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246146",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@darijgr](#comment:3):
> One more thing, which is probably not your fault but just caught my eyes. The docstring of `module_morphism` says:
> 
> ```
>             - ``matrix``   -- a matrix of size `\dim X \times \dim Y`
>               or `\dim Y \times \dim X`
> ```
> I don't see why the "or" is here. The doctests show that `\dim Y \times \dim X` works, but does `\dim X \times \dim Y` work too? And if so, *should* it? I think checking whether the matrix has the "wrong" dimensions, and then trying to fix them by transposing it, would be a brittle paradigm. 

Which of the two it is depends on the value of the optional ``side`` argument. No worry, there is no attempt at "fixing" things by transposition.



---

archive/issue_comments_246147.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@tscrim](#comment:2):\n> Also a question mostly for Nicolas, do we still need `_apply_module_morphism`? Is it just a method so that we don't have to create a full morphism object?\n\nAs far as I know, that was indeed the motivation when Mike H implemented it. I imagine it can make sense in certain cases where many different morphisms are applied. But I don't have a strong opinion either.",
    "created_at": "2015-10-13T21:38:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246147",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@tscrim](#comment:2):
> Also a question mostly for Nicolas, do we still need `_apply_module_morphism`? Is it just a method so that we don't have to create a full morphism object?

As far as I know, that was indeed the motivation when Mike H implemented it. I imagine it can make sense in certain cases where many different morphisms are applied. But I don't have a strong opinion either.



---

archive/issue_comments_246148.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThanks for the progress on that btw!",
    "created_at": "2015-10-13T21:40:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246148",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:9" align="right">comment:9</div>

Thanks for the progress on that btw!



---

archive/issue_comments_246149.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@nthiery](#comment:8):\n> Replying to [@tscrim](#comment:2):\n> > Also a question mostly for Nicolas, do we still need `_apply_module_morphism`? Is it just a method so that we don't have to create a full morphism object?\n\n> \n> As far as I know, that was indeed the motivation when Mike H implemented it. I imagine it can make sense in certain cases where many different morphisms are applied. But I don't have a strong opinion either.\n\nI ended up doing something for diagram algebras where I found this to be useful (although I could have used a full morphism to work around it), so I'm happy enough to keep it around for now.",
    "created_at": "2015-10-13T21:50:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246149",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@nthiery](#comment:8):
> Replying to [@tscrim](#comment:2):
> > Also a question mostly for Nicolas, do we still need `_apply_module_morphism`? Is it just a method so that we don't have to create a full morphism object?

> 
> As far as I know, that was indeed the motivation when Mike H implemented it. I imagine it can make sense in certain cases where many different morphisms are applied. But I don't have a strong opinion either.

I ended up doing something for diagram algebras where I found this to be useful (although I could have used a full morphism to work around it), so I'm happy enough to keep it around for now.



---

archive/issue_comments_246150.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@nthiery](#comment:7):\n> Replying to [@darijgr](#comment:3):\n> > One more thing, which is probably not your fault but just caught my eyes. The docstring of `module_morphism` says:\n> > \n> > ```\n> >             - ``matrix``   -- a matrix of size `\\dim X \\times \\dim Y`\n> >               or `\\dim Y \\times \\dim X`\n> > ```\n> > I don't see why the \"or\" is here. The doctests show that `\\dim Y \\times \\dim X` works, but does `\\dim X \\times \\dim Y` work too? And if so, *should* it? I think checking whether the matrix has the \"wrong\" dimensions, and then trying to fix them by transposing it, would be a brittle paradigm. \n\n> \n> Which of the two it is depends on the value of the optional ``side`` argument. No worry, there is no attempt at \"fixing\" things by transposition.\n\nAh, thank you! I didn't see this, as the argument is hidden inside the `**keywords`.",
    "created_at": "2015-10-14T04:09:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246150",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@nthiery](#comment:7):
> Replying to [@darijgr](#comment:3):
> > One more thing, which is probably not your fault but just caught my eyes. The docstring of `module_morphism` says:
> > 
> > ```
> >             - ``matrix``   -- a matrix of size `\dim X \times \dim Y`
> >               or `\dim Y \times \dim X`
> > ```
> > I don't see why the "or" is here. The doctests show that `\dim Y \times \dim X` works, but does `\dim X \times \dim Y` work too? And if so, *should* it? I think checking whether the matrix has the "wrong" dimensions, and then trying to fix them by transposing it, would be a brittle paradigm. 

> 
> Which of the two it is depends on the value of the optional ``side`` argument. No worry, there is no attempt at "fixing" things by transposition.

Ah, thank you! I didn't see this, as the argument is hidden inside the `**keywords`.



---

archive/issue_comments_246151.json:
```json
{
    "body": "Changed commit from **[`954e354`](https://github.com/sagemath/sagetrac-mirror/commit/954e3542ccc00ef3cc294f19019da3608d87a5a8)** to **[`2a935f5`](https://github.com/sagemath/sagetrac-mirror/commit/2a935f54705b998469f68f54cc8af77c440fb1f7)**",
    "created_at": "2015-10-14T18:21:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246151",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`954e354`](https://github.com/sagemath/sagetrac-mirror/commit/954e3542ccc00ef3cc294f19019da3608d87a5a8)** to **[`2a935f5`](https://github.com/sagemath/sagetrac-mirror/commit/2a935f54705b998469f68f54cc8af77c440fb1f7)**



---

archive/issue_comments_246152.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a935f54705b998469f68f54cc8af77c440fb1f7\"><code>2a935f5</code></a></td><td><code>Made FreeModules in the category of finite dimensional free modules with basis.</code></td></tr></table>\n",
    "created_at": "2015-10-14T18:21:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246152",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a935f54705b998469f68f54cc8af77c440fb1f7"><code>2a935f5</code></a></td><td><code>Made FreeModules in the category of finite dimensional free modules with basis.</code></td></tr></table>




---

archive/issue_comments_246153.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/570bc493fe22bd8fb6f517300a27fea751cb6585\"><code>570bc49</code></a></td><td><code>Merge branch 'public/categories/super_categories-18044' into 6.9.b1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b91cd828945a4668938298ef741769ce64f909a3\"><code>b91cd82</code></a></td><td><code>trac #18044 correct one typo in the doc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7fd1df2ac522180985b49e66895ffb58bb93823b\"><code>7fd1df2</code></a></td><td><code>Merge branch 'public/categories/super_categories-18044' of trac.sagemath.org:sage into public/categories/super_categories-18044</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/057933782566ba05423d302fe8fae82276238edc\"><code>0579337</code></a></td><td><code>Some reviewer tweaks and doc additions.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aec22cc54dee46aceaa315a96905059927ad1ea4\"><code>aec22cc</code></a></td><td><code>Added one more test.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b2046fdfb0545b3b0908f8c3de609becd78bc5f\"><code>4b2046f</code></a></td><td><code>Merge branch 'public/categories/super_categories-18044' into public/categories/filtered_algebras-17096</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3f67b6b0d0e10c2f4816acc791f6dc2a016eeb8d\"><code>3f67b6b</code></a></td><td><code>Fixing trivial doctest due to changes in category heirarchy.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fa476ddac910418cb12790af8896154ddca8fd00\"><code>fa476dd</code></a></td><td><code>Fixing double-colon in INPUT block.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6cc8b8460dfe5a05380e73e667dc7294e4369774\"><code>6cc8b84</code></a></td><td><code>Reviewer changes with Darij.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7c0223af13ccb7e92191eea50431b3ebc477dbc7\"><code>7c0223a</code></a></td><td><code>Merge branch 'public/categories/filtered_algebras-17096' of trac.sagemath.org:sage into public/categories/cleanup_CFM_modules_wBasis-18066</code></td></tr></table>\n",
    "created_at": "2015-10-15T02:34:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246153",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/570bc493fe22bd8fb6f517300a27fea751cb6585"><code>570bc49</code></a></td><td><code>Merge branch 'public/categories/super_categories-18044' into 6.9.b1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b91cd828945a4668938298ef741769ce64f909a3"><code>b91cd82</code></a></td><td><code>trac #18044 correct one typo in the doc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7fd1df2ac522180985b49e66895ffb58bb93823b"><code>7fd1df2</code></a></td><td><code>Merge branch 'public/categories/super_categories-18044' of trac.sagemath.org:sage into public/categories/super_categories-18044</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/057933782566ba05423d302fe8fae82276238edc"><code>0579337</code></a></td><td><code>Some reviewer tweaks and doc additions.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aec22cc54dee46aceaa315a96905059927ad1ea4"><code>aec22cc</code></a></td><td><code>Added one more test.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b2046fdfb0545b3b0908f8c3de609becd78bc5f"><code>4b2046f</code></a></td><td><code>Merge branch 'public/categories/super_categories-18044' into public/categories/filtered_algebras-17096</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3f67b6b0d0e10c2f4816acc791f6dc2a016eeb8d"><code>3f67b6b</code></a></td><td><code>Fixing trivial doctest due to changes in category heirarchy.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fa476ddac910418cb12790af8896154ddca8fd00"><code>fa476dd</code></a></td><td><code>Fixing double-colon in INPUT block.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6cc8b8460dfe5a05380e73e667dc7294e4369774"><code>6cc8b84</code></a></td><td><code>Reviewer changes with Darij.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7c0223af13ccb7e92191eea50431b3ebc477dbc7"><code>7c0223a</code></a></td><td><code>Merge branch 'public/categories/filtered_algebras-17096' of trac.sagemath.org:sage into public/categories/cleanup_CFM_modules_wBasis-18066</code></td></tr></table>




---

archive/issue_comments_246154.json:
```json
{
    "body": "Changed commit from **[`2a935f5`](https://github.com/sagemath/sagetrac-mirror/commit/2a935f54705b998469f68f54cc8af77c440fb1f7)** to **[`7c0223a`](https://github.com/sagemath/sagetrac-mirror/commit/7c0223af13ccb7e92191eea50431b3ebc477dbc7)**",
    "created_at": "2015-10-15T02:34:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246154",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2a935f5`](https://github.com/sagemath/sagetrac-mirror/commit/2a935f54705b998469f68f54cc8af77c440fb1f7)** to **[`7c0223a`](https://github.com/sagemath/sagetrac-mirror/commit/7c0223af13ccb7e92191eea50431b3ebc477dbc7)**



---

archive/issue_comments_246155.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nIt wasn't letting me post this comment:\n\nTo fix the failing doctests, I made the free modules be in the category of finite dimensional modules with basis, which I believe they should have been awhile ago. I also merged in the filtered algebras patch.",
    "created_at": "2015-10-15T14:31:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246155",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:14" align="right">comment:14</div>

It wasn't letting me post this comment:

To fix the failing doctests, I made the free modules be in the category of finite dimensional modules with basis, which I believe they should have been awhile ago. I also merged in the filtered algebras patch.



---

archive/issue_comments_246156.json:
```json
{
    "body": "Changed commit from **[`7c0223a`](https://github.com/sagemath/sagetrac-mirror/commit/7c0223af13ccb7e92191eea50431b3ebc477dbc7)** to **[`c504110`](https://github.com/sagemath/sagetrac-mirror/commit/c504110a3d44de5381b3ed33ed5d9765e2b060a9)**",
    "created_at": "2015-10-22T02:29:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246156",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7c0223a`](https://github.com/sagemath/sagetrac-mirror/commit/7c0223af13ccb7e92191eea50431b3ebc477dbc7)** to **[`c504110`](https://github.com/sagemath/sagetrac-mirror/commit/c504110a3d44de5381b3ed33ed5d9765e2b060a9)**



---

archive/issue_comments_246157.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/caa532352be867123954697988c9dc143cc9daf9\"><code>caa5323</code></a></td><td><code>Merge branch 'develop' into public/categories/cleanup_CFM_modules_wBasis-18066</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c504110a3d44de5381b3ed33ed5d9765e2b060a9\"><code>c504110</code></a></td><td><code>Merge branch 'develop' into public/categories/cleanup_CFM_modules_wBasis-18066</code></td></tr></table>\n",
    "created_at": "2015-10-22T02:29:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246157",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/caa532352be867123954697988c9dc143cc9daf9"><code>caa5323</code></a></td><td><code>Merge branch 'develop' into public/categories/cleanup_CFM_modules_wBasis-18066</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c504110a3d44de5381b3ed33ed5d9765e2b060a9"><code>c504110</code></a></td><td><code>Merge branch 'develop' into public/categories/cleanup_CFM_modules_wBasis-18066</code></td></tr></table>




---

archive/issue_comments_246158.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/913a0c14f45142e5f80579c58147174daa18f27b\"><code>913a0c1</code></a></td><td><code>Fixing doctest/tab issues from merge.</code></td></tr></table>\n",
    "created_at": "2015-10-24T17:29:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246158",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/913a0c14f45142e5f80579c58147174daa18f27b"><code>913a0c1</code></a></td><td><code>Fixing doctest/tab issues from merge.</code></td></tr></table>




---

archive/issue_comments_246159.json:
```json
{
    "body": "Changed commit from **[`c504110`](https://github.com/sagemath/sagetrac-mirror/commit/c504110a3d44de5381b3ed33ed5d9765e2b060a9)** to **[`913a0c1`](https://github.com/sagemath/sagetrac-mirror/commit/913a0c14f45142e5f80579c58147174daa18f27b)**",
    "created_at": "2015-10-24T17:29:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246159",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c504110`](https://github.com/sagemath/sagetrac-mirror/commit/c504110a3d44de5381b3ed33ed5d9765e2b060a9)** to **[`913a0c1`](https://github.com/sagemath/sagetrac-mirror/commit/913a0c14f45142e5f80579c58147174daa18f27b)**



---

archive/issue_comments_246160.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/07cc001e5c45b27a68088d175699732847adcc63\"><code>07cc001</code></a></td><td><code>18411: Fixed unused import</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7c103df59914913d77102a559686d932d1918f1d\"><code>7c103df</code></a></td><td><code>18411: cleanup spacing for optional arguments</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a35ef8a704cc966a3a118c84b50a46e3cd6f6245\"><code>a35ef8a</code></a></td><td><code>18411: proofreading</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/22f8b77a3cc2223863396f8d422fbbeec51d1656\"><code>22f8b77</code></a></td><td><code>18411: proofreading</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4a9fd817869ca4805df87637c6269e3a1b7e783d\"><code>4a9fd81</code></a></td><td><code>Trac 18411: merge Sage 6.10.beta0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/525d03837adb1ef1265d44314474f59421ed2363\"><code>525d038</code></a></td><td><code>Trac 18411: Fix doctest in colored_permutations.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/41af76268e8bc96a6fcf23a2d0c70da58fc6df80\"><code>41af762</code></a></td><td><code>Trac 18411: pass keywords in __call__</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6e27ddedfb0e8322914e6fd036dbe5b3fef6f996\"><code>6e27dde</code></a></td><td><code>Trac 18411: merge sage-6.10.beta1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b21396ce5b52e6c6ffc86f58a1a3683af058a59b\"><code>b21396c</code></a></td><td><code>Merge branch '18411' into HEAD</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b32e479bffac439f3cfb561027dfebc871d01528\"><code>b32e479</code></a></td><td><code>further changes (mostly doc)</code></td></tr></table>\n",
    "created_at": "2015-10-24T21:38:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246160",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/07cc001e5c45b27a68088d175699732847adcc63"><code>07cc001</code></a></td><td><code>18411: Fixed unused import</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7c103df59914913d77102a559686d932d1918f1d"><code>7c103df</code></a></td><td><code>18411: cleanup spacing for optional arguments</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a35ef8a704cc966a3a118c84b50a46e3cd6f6245"><code>a35ef8a</code></a></td><td><code>18411: proofreading</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/22f8b77a3cc2223863396f8d422fbbeec51d1656"><code>22f8b77</code></a></td><td><code>18411: proofreading</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4a9fd817869ca4805df87637c6269e3a1b7e783d"><code>4a9fd81</code></a></td><td><code>Trac 18411: merge Sage 6.10.beta0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/525d03837adb1ef1265d44314474f59421ed2363"><code>525d038</code></a></td><td><code>Trac 18411: Fix doctest in colored_permutations.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/41af76268e8bc96a6fcf23a2d0c70da58fc6df80"><code>41af762</code></a></td><td><code>Trac 18411: pass keywords in __call__</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6e27ddedfb0e8322914e6fd036dbe5b3fef6f996"><code>6e27dde</code></a></td><td><code>Trac 18411: merge sage-6.10.beta1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b21396ce5b52e6c6ffc86f58a1a3683af058a59b"><code>b21396c</code></a></td><td><code>Merge branch '18411' into HEAD</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b32e479bffac439f3cfb561027dfebc871d01528"><code>b32e479</code></a></td><td><code>further changes (mostly doc)</code></td></tr></table>




---

archive/issue_comments_246161.json:
```json
{
    "body": "Changed commit from **[`913a0c1`](https://github.com/sagemath/sagetrac-mirror/commit/913a0c14f45142e5f80579c58147174daa18f27b)** to **[`b32e479`](https://github.com/sagemath/sagetrac-mirror/commit/b32e479bffac439f3cfb561027dfebc871d01528)**",
    "created_at": "2015-10-24T21:38:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246161",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`913a0c1`](https://github.com/sagemath/sagetrac-mirror/commit/913a0c14f45142e5f80579c58147174daa18f27b)** to **[`b32e479`](https://github.com/sagemath/sagetrac-mirror/commit/b32e479bffac439f3cfb561027dfebc871d01528)**



---

archive/issue_comments_246162.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dbb5789a5daf6bd54a4b315ecb8fa77f20a848c6\"><code>dbb5789</code></a></td><td><code>Further fixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e2fb14a393beb5e40519df8cf7ae06b077a398b0\"><code>e2fb14a</code></a></td><td><code>remove _test_keytype since submodules of free modules are currently failing it</code></td></tr></table>\n",
    "created_at": "2015-10-24T23:46:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246162",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dbb5789a5daf6bd54a4b315ecb8fa77f20a848c6"><code>dbb5789</code></a></td><td><code>Further fixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e2fb14a393beb5e40519df8cf7ae06b077a398b0"><code>e2fb14a</code></a></td><td><code>remove _test_keytype since submodules of free modules are currently failing it</code></td></tr></table>




---

archive/issue_comments_246163.json:
```json
{
    "body": "Changed commit from **[`b32e479`](https://github.com/sagemath/sagetrac-mirror/commit/b32e479bffac439f3cfb561027dfebc871d01528)** to **[`e2fb14a`](https://github.com/sagemath/sagetrac-mirror/commit/e2fb14a393beb5e40519df8cf7ae06b077a398b0)**",
    "created_at": "2015-10-24T23:46:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246163",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b32e479`](https://github.com/sagemath/sagetrac-mirror/commit/b32e479bffac439f3cfb561027dfebc871d01528)** to **[`e2fb14a`](https://github.com/sagemath/sagetrac-mirror/commit/e2fb14a393beb5e40519df8cf7ae06b077a398b0)**



---

archive/issue_comments_246164.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nGreat job, Travis. If you are fine with my edits and the doctests agree, this is a positive_review.\n\nI am somewhat unhappy about the fact that submodules of free modules don't play nicely with `monomial_coefficients` (if `M` is a submodule of `R^n` given as the span of some vectors, then `m.monomial_coefficients` for `m \\in M` gives me the monomial coefficients of `m` with respect to the standard basis of `R^n`, not with respect to any basis of `M`), but this is hardly a flaw of this particular ticket.",
    "created_at": "2015-10-24T23:50:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246164",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:19" align="right">comment:19</div>

Great job, Travis. If you are fine with my edits and the doctests agree, this is a positive_review.

I am somewhat unhappy about the fact that submodules of free modules don't play nicely with `monomial_coefficients` (if `M` is a submodule of `R^n` given as the span of some vectors, then `m.monomial_coefficients` for `m \in M` gives me the monomial coefficients of `m` with respect to the standard basis of `R^n`, not with respect to any basis of `M`), but this is hardly a flaw of this particular ticket.



---

archive/issue_events_254609.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-25T00:01:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18066#event-254609"
}
```



---

archive/issue_events_254610.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-25T00:01:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18066#event-254610"
}
```



---

archive/issue_comments_246165.json:
```json
{
    "body": "Reviewer: **Darij Grinberg**",
    "created_at": "2015-10-25T00:02:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246165",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Darij Grinberg**



---

archive/issue_events_254611.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-10-25T08:36:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18066#event-254611"
}
```



---

archive/issue_events_254612.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-10-25T08:36:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18066#event-254612"
}
```



---

archive/issue_comments_246166.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nHow about running the tests before setting something to positive review?\n\n```\nsage -t --long src/sage/geometry/linear_expression.py\n**********************************************************************\nFile \"src/sage/geometry/linear_expression.py\", line 183, in sage.geometry.linear_expression.LinearExpression.monomial_coefficients\nFailed example:\n    sorted(linear.monomial_coefficients().items()\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 856, in compile_and_execute\n        compiled = compiler(example)\n      File \"/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 494, in <lambda>\n        example.source, filename, \"single\", compileflags, 1)\n      File \"<doctest sage.geometry.linear_expression.LinearExpression.monomial_coefficients[3]>\", line 1\n        sorted(linear.monomial_coefficients().items()\n                                                    ^\n    SyntaxError: unexpected EOF while parsing\n**********************************************************************\n1 item had failures:\n   1 of   5 in sage.geometry.linear_expression.LinearExpression.monomial_coefficients\n    [165 tests, 1 failure, 1.47 s]\n```",
    "created_at": "2015-10-25T08:36:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246166",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:22" align="right">comment:22</div>

How about running the tests before setting something to positive review?

```
sage -t --long src/sage/geometry/linear_expression.py
**********************************************************************
File "src/sage/geometry/linear_expression.py", line 183, in sage.geometry.linear_expression.LinearExpression.monomial_coefficients
Failed example:
    sorted(linear.monomial_coefficients().items()
Exception raised:
    Traceback (most recent call last):
      File "/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 856, in compile_and_execute
        compiled = compiler(example)
      File "/mnt/disk/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 494, in <lambda>
        example.source, filename, "single", compileflags, 1)
      File "<doctest sage.geometry.linear_expression.LinearExpression.monomial_coefficients[3]>", line 1
        sorted(linear.monomial_coefficients().items()
                                                    ^
    SyntaxError: unexpected EOF while parsing
**********************************************************************
1 item had failures:
   1 of   5 in sage.geometry.linear_expression.LinearExpression.monomial_coefficients
    [165 tests, 1 failure, 1.47 s]
```



---

archive/issue_comments_246167.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96004dfa8a3368fe4f2fe122268744d9f6e4bf79\"><code>96004df</code></a></td><td><code>Darij...</code></td></tr></table>\n",
    "created_at": "2015-10-25T14:27:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246167",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96004dfa8a3368fe4f2fe122268744d9f6e4bf79"><code>96004df</code></a></td><td><code>Darij...</code></td></tr></table>




---

archive/issue_comments_246168.json:
```json
{
    "body": "Changed commit from **[`e2fb14a`](https://github.com/sagemath/sagetrac-mirror/commit/e2fb14a393beb5e40519df8cf7ae06b077a398b0)** to **[`96004df`](https://github.com/sagemath/sagetrac-mirror/commit/96004dfa8a3368fe4f2fe122268744d9f6e4bf79)**",
    "created_at": "2015-10-25T14:27:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246168",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e2fb14a`](https://github.com/sagemath/sagetrac-mirror/commit/e2fb14a393beb5e40519df8cf7ae06b077a398b0)** to **[`96004df`](https://github.com/sagemath/sagetrac-mirror/commit/96004dfa8a3368fe4f2fe122268744d9f6e4bf79)**



---

archive/issue_events_254613.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-25T14:28:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18066#event-254613"
}
```



---

archive/issue_events_254614.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-25T14:28:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18066#event-254614"
}
```



---

archive/issue_comments_246169.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nThanks Travis! (I've just fired up my virtual machine a few minutes ago to deal with this...)\n\nNote to self: do test sage/geometry...",
    "created_at": "2015-10-25T14:29:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246169",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:25" align="right">comment:25</div>

Thanks Travis! (I've just fired up my virtual machine a few minutes ago to deal with this...)

Note to self: do test sage/geometry...



---

archive/issue_comments_246170.json:
```json
{
    "body": "Changed branch from **[public/categories/cleanup_CFM_modules_wBasis-18066](https://github.com/sagemath/sagetrac-mirror/tree/public/categories/cleanup_CFM_modules_wBasis-18066)** to **[`96004df`](https://github.com/sagemath/sagetrac-mirror/commit/96004dfa8a3368fe4f2fe122268744d9f6e4bf79)**",
    "created_at": "2015-10-26T00:18:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246170",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/categories/cleanup_CFM_modules_wBasis-18066](https://github.com/sagemath/sagetrac-mirror/tree/public/categories/cleanup_CFM_modules_wBasis-18066)** to **[`96004df`](https://github.com/sagemath/sagetrac-mirror/commit/96004dfa8a3368fe4f2fe122268744d9f6e4bf79)**



---

archive/issue_events_254615.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-10-26T00:18:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18066#event-254615"
}
```



---

archive/issue_events_254616.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "ef4609566c2bf1e9986971b721efe7de761ffb60",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-10-26T00:18:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18066#event-254616"
}
```



---

archive/issue_comments_246171.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nin `src/sage/categories/modules_with_basis.py` one still sees \n\n```\n   Once :trac:`18066` is merged\n```\nnamely here:\n\n```\n9bc28fd5fdb (Travis Scrimshaw  2015-03-26 23:33:19 -0700  129)         This category currently requires an implementation of an\n6cc8b8460df (Travis Scrimshaw  2015-10-04 16:20:51 -0500  130)         element method ``support``. Once :trac:`18066` is merged, an\n6cc8b8460df (Travis Scrimshaw  2015-10-04 16:20:51 -0500  131)         implementation of an ``items`` method will be required.\n```",
    "created_at": "2019-07-30T13:53:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246171",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:27" align="right">comment:27</div>

in `src/sage/categories/modules_with_basis.py` one still sees 

```
   Once :trac:`18066` is merged
```
namely here:

```
9bc28fd5fdb (Travis Scrimshaw  2015-03-26 23:33:19 -0700  129)         This category currently requires an implementation of an
6cc8b8460df (Travis Scrimshaw  2015-10-04 16:20:51 -0500  130)         element method ``support``. Once :trac:`18066` is merged, an
6cc8b8460df (Travis Scrimshaw  2015-10-04 16:20:51 -0500  131)         implementation of an ``items`` method will be required.
```



---

archive/issue_comments_246172.json:
```json
{
    "body": "Changed commit from **[`96004df`](https://github.com/sagemath/sagetrac-mirror/commit/96004dfa8a3368fe4f2fe122268744d9f6e4bf79)** to none",
    "created_at": "2019-07-30T13:53:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18066#issuecomment-246172",
    "user": "https://github.com/dimpase"
}
```

Changed commit from **[`96004df`](https://github.com/sagemath/sagetrac-mirror/commit/96004dfa8a3368fe4f2fe122268744d9f6e4bf79)** to none
