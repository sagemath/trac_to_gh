# Issue 18787: symbolic modular integers still broken

archive/issues_018550.json:
```json
{
    "assignees": [],
    "body": "> \n> ```\n> sage: f(x) = Zmod(7)(1) * x**2 + Zmod(9)(1) * x**3\n> sage: f(1)\n> 2\n> sage: Zmod(7)(1) + Zmod(9)(1)\n> ```\n\nTypeError: unsupported operand parent(s) for '+': 'Ring of integers modulo 7' and 'Ring of integers modulo 9'\n> }}}\n\n\nDepends on #21391\n\nCC:  @kcrisman @slel\n\nComponent: **symbolics**\n\nBranch/Commit: **[u/rws/symbolic_modular_integers_still_broken](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/symbolic_modular_integers_still_broken) @ [`be9ec4e`](https://github.com/sagemath/sagetrac-mirror/commit/be9ec4e97557a2ff7ed682ed62c2101d084de498)**\n\nReviewer: **Ralf Stephan**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/18787_\n\n",
    "closed_at": "2017-12-12T08:23:33Z",
    "created_at": "2015-06-25T11:07:30Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
        "https://github.com/sagemath/sage/labels/wontfix"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "symbolic modular integers still broken",
    "type": "issue",
    "updated_at": "2017-12-12T08:23:33Z",
    "url": "https://github.com/sagemath/sage/issues/18787",
    "user": "https://github.com/sagetrac-tmonteil"
}
```
> 
> ```
> sage: f(x) = Zmod(7)(1) * x**2 + Zmod(9)(1) * x**3
> sage: f(1)
> 2
> sage: Zmod(7)(1) + Zmod(9)(1)
> ```

TypeError: unsupported operand parent(s) for '+': 'Ring of integers modulo 7' and 'Ring of integers modulo 9'
> }}}


Depends on #21391

CC:  @kcrisman @slel

Component: **symbolics**

Branch/Commit: **[u/rws/symbolic_modular_integers_still_broken](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/symbolic_modular_integers_still_broken) @ [`be9ec4e`](https://github.com/sagemath/sagetrac-mirror/commit/be9ec4e97557a2ff7ed682ed62c2101d084de498)**

Reviewer: **Ralf Stephan**

_Issue created by migration from https://trac.sagemath.org/ticket/18787_





---

archive/issue_events_264425.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2015-06-25T11:07:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264425"
}
```



---

archive/issue_events_264426.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2015-06-25T11:07:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "c: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264426"
}
```



---

archive/issue_events_264427.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2015-06-25T11:07:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264427"
}
```



---

archive/issue_events_264428.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2015-06-25T11:07:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264428"
}
```



---

archive/issue_comments_262378.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,9 +1,8 @@\n As reported on [this ask question](http://ask.sagemath.org/question/27196/multiplying-matrices-with-different-parents/)\n \n ```\n-sage: sage: var('A,B,C,D')\n-(A, B, C, D)\n-sage: S = matrix(SR,2,[[1+3*A,3*B],[3*C,1+3*D]])\n+sage: _ =var('A,B,C,D')\n+sage: S = matrix([[1+3*A,3*B],[3*C,1+3*D]])\n sage: R = Zmod(9)\n sage: g = matrix(R,2,[[2,1],[2,6]])\n sage: gi = matrix(R,2,[[6,8],[7,2]])\n@@ -15,12 +14,12 @@\n While we have (look at the second line):\n \n ```\n-sage: R.<A,B,C,D> = PolynomialRing(Zmod(9),4)\n+sage: P.<A,B,C,D> = ZZ[]\n+sage: S = matrix([[1+3*A,3*B],[3*C,1+3*D]])\n+sage: R = Zmod(9)\n sage: g = matrix(R,2,[[2,1],[2,6]])\n sage: gi = matrix(R,2,[[6,8],[7,2]])\n-sage: S = matrix(R,2,[[1+3*A,3*B],[3*C,1+3*D]])\n sage: g*S*gi\n [        6*B + 3*D + 1 3*A + 3*B + 6*C + 6*D]\n [                  6*B         3*A + 3*B + 1]\n ```\n-\n``````\n",
    "created_at": "2015-06-25T12:05:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262378",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,9 +1,8 @@
 As reported on [this ask question](http://ask.sagemath.org/question/27196/multiplying-matrices-with-different-parents/)
 
 ```
-sage: sage: var('A,B,C,D')
-(A, B, C, D)
-sage: S = matrix(SR,2,[[1+3*A,3*B],[3*C,1+3*D]])
+sage: _ =var('A,B,C,D')
+sage: S = matrix([[1+3*A,3*B],[3*C,1+3*D]])
 sage: R = Zmod(9)
 sage: g = matrix(R,2,[[2,1],[2,6]])
 sage: gi = matrix(R,2,[[6,8],[7,2]])
@@ -15,12 +14,12 @@
 While we have (look at the second line):
 
 ```
-sage: R.<A,B,C,D> = PolynomialRing(Zmod(9),4)
+sage: P.<A,B,C,D> = ZZ[]
+sage: S = matrix([[1+3*A,3*B],[3*C,1+3*D]])
+sage: R = Zmod(9)
 sage: g = matrix(R,2,[[2,1],[2,6]])
 sage: gi = matrix(R,2,[[6,8],[7,2]])
-sage: S = matrix(R,2,[[1+3*A,3*B],[3*C,1+3*D]])
 sage: g*S*gi
 [        6*B + 3*D + 1 3*A + 3*B + 6*C + 6*D]
 [                  6*B         3*A + 3*B + 1]
 ```
-
``````




---

archive/issue_comments_262379.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,25 +1,7 @@\n As reported on [this ask question](http://ask.sagemath.org/question/27196/multiplying-matrices-with-different-parents/)\n \n ```\n-sage: _ =var('A,B,C,D')\n-sage: S = matrix([[1+3*A,3*B],[3*C,1+3*D]])\n-sage: R = Zmod(9)\n-sage: g = matrix(R,2,[[2,1],[2,6]])\n-sage: gi = matrix(R,2,[[6,8],[7,2]])\n-sage: g*S*gi\n-[        6*B + 3*D + 1 3*A + 3*B + 6*C + 6*D]\n-[            0*A + 0*D         3*A + 0*D + 1]\n+sage: _ = var('A,B,C,D')\n+sage: (B + 3*D)*Zmod(9)(6)\n+0*D\n ```\n-\n-While we have (look at the second line):\n-\n-```\n-sage: P.<A,B,C,D> = ZZ[]\n-sage: S = matrix([[1+3*A,3*B],[3*C,1+3*D]])\n-sage: R = Zmod(9)\n-sage: g = matrix(R,2,[[2,1],[2,6]])\n-sage: gi = matrix(R,2,[[6,8],[7,2]])\n-sage: g*S*gi\n-[        6*B + 3*D + 1 3*A + 3*B + 6*C + 6*D]\n-[                  6*B         3*A + 3*B + 1]\n-```\n``````\n",
    "created_at": "2015-06-25T12:11:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262379",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,25 +1,7 @@
 As reported on [this ask question](http://ask.sagemath.org/question/27196/multiplying-matrices-with-different-parents/)
 
 ```
-sage: _ =var('A,B,C,D')
-sage: S = matrix([[1+3*A,3*B],[3*C,1+3*D]])
-sage: R = Zmod(9)
-sage: g = matrix(R,2,[[2,1],[2,6]])
-sage: gi = matrix(R,2,[[6,8],[7,2]])
-sage: g*S*gi
-[        6*B + 3*D + 1 3*A + 3*B + 6*C + 6*D]
-[            0*A + 0*D         3*A + 0*D + 1]
+sage: _ = var('A,B,C,D')
+sage: (B + 3*D)*Zmod(9)(6)
+0*D
 ```
-
-While we have (look at the second line):
-
-```
-sage: P.<A,B,C,D> = ZZ[]
-sage: S = matrix([[1+3*A,3*B],[3*C,1+3*D]])
-sage: R = Zmod(9)
-sage: g = matrix(R,2,[[2,1],[2,6]])
-sage: gi = matrix(R,2,[[6,8],[7,2]])
-sage: g*S*gi
-[        6*B + 3*D + 1 3*A + 3*B + 6*C + 6*D]
-[                  6*B         3*A + 3*B + 1]
-```
``````




---

archive/issue_events_264429.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-06-25T12:12:05Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "title_is": "Bug with products of symbolic variables with modular integers",
    "title_was": "Bug with matrice products over Symbolic Ring with modular integers",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264429"
}
```



---

archive/issue_comments_262380.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThanks for isolating the problem.",
    "created_at": "2015-06-25T12:23:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262380",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:4" align="right">comment:4</div>

Thanks for isolating the problem.



---

archive/issue_comments_262381.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,10 @@\n As reported on [this ask question](http://ask.sagemath.org/question/27196/multiplying-matrices-with-different-parents/)\n \n ```\n-sage: _ = var('A,B,C,D')\n-sage: (B + 3*D)*Zmod(9)(6)\n-0*D\n+sage: _ = var('A,B')\n+sage: (A + 3*B)*Zmod(9)(6)\n+0*B\n ```\n+\n+while the result should be `6*A`.\n+\n``````\n",
    "created_at": "2015-06-25T12:23:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262381",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,10 @@
 As reported on [this ask question](http://ask.sagemath.org/question/27196/multiplying-matrices-with-different-parents/)
 
 ```
-sage: _ = var('A,B,C,D')
-sage: (B + 3*D)*Zmod(9)(6)
-0*D
+sage: _ = var('A,B')
+sage: (A + 3*B)*Zmod(9)(6)
+0*B
 ```
+
+while the result should be `6*A`.
+
``````




---

archive/issue_comments_262382.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThanks very much to both for reporting and simplifying this.",
    "created_at": "2015-06-25T13:20:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262382",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:5" align="right">comment:5</div>

Thanks very much to both for reporting and simplifying this.



---

archive/issue_comments_262383.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nA different issue, but it might be related:\n\n```\nsage: F=sum((i+1)*x^i for i in [0..20])\nsage: G=sum(Zmod(7)(i+1)*x^i for i in [0..20])\nsage: F*Zmod(7)(1) - G\nx^19 + 2*x^18 + 0*x^13 + 0*x^6\nsage: G*Zmod(7)(1) - G\n0\n```\nso there seems to be something fishy with symbolic multiplication involving integers and elements of Z/n in general. It's not just a zero-divisor problem.\n\nIt's not just powers either:\n\n```\nsage: V=[SR.var(\"x%s\"%i) for i in [0..20]]\nsage: F=sum((i+1)*V[i] for i in [0..20])\nsage: G=sum(Zmod(7)(i+1)*V[i] for i in [0..20])\nsage: sage: F*Zmod(7)(1)-G\n-x0 + 0*x13 + 6*x14 + 0*x20 + 3*x3 + 0*x6\nsage: F-G \n14*x13 + 21*x20 + 7*x6\n```\nThe last one is correct, since the terms with x6, x20 and x13 are really missing from G. This illustrates why mixing characteristics in SR is always going to be a mess (even if non-zero characteristic works properly otherwise).",
    "created_at": "2015-06-25T18:53:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262383",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:6" align="right">comment:6</div>

A different issue, but it might be related:

```
sage: F=sum((i+1)*x^i for i in [0..20])
sage: G=sum(Zmod(7)(i+1)*x^i for i in [0..20])
sage: F*Zmod(7)(1) - G
x^19 + 2*x^18 + 0*x^13 + 0*x^6
sage: G*Zmod(7)(1) - G
0
```
so there seems to be something fishy with symbolic multiplication involving integers and elements of Z/n in general. It's not just a zero-divisor problem.

It's not just powers either:

```
sage: V=[SR.var("x%s"%i) for i in [0..20]]
sage: F=sum((i+1)*V[i] for i in [0..20])
sage: G=sum(Zmod(7)(i+1)*V[i] for i in [0..20])
sage: sage: F*Zmod(7)(1)-G
-x0 + 0*x13 + 6*x14 + 0*x20 + 3*x3 + 0*x6
sage: F-G 
14*x13 + 21*x20 + 7*x6
```
The last one is correct, since the terms with x6, x20 and x13 are really missing from G. This illustrates why mixing characteristics in SR is always going to be a mess (even if non-zero characteristic works properly otherwise).



---

archive/issue_comments_262384.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nIt seems to be a pynac/ginac issue, right ? So what should we do on our side ? Add a stopgap during conversion/coercion Zmod(n) -> SR ?",
    "created_at": "2015-06-25T20:03:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262384",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:7" align="right">comment:7</div>

It seems to be a pynac/ginac issue, right ? So what should we do on our side ? Add a stopgap during conversion/coercion Zmod(n) -> SR ?



---

archive/issue_comments_262385.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\n(Or even just disallow it?)",
    "created_at": "2015-06-25T20:24:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262385",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:8" align="right">comment:8</div>

(Or even just disallow it?)



---

archive/issue_comments_262386.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThis is working in pynac-0.4.1 (but not 0.3.9.1).\n\nEDIT: I meant the original case.",
    "created_at": "2015-06-26T06:30:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262386",
    "user": "https://github.com/rwst"
}
```

<div id="comment:9" align="right">comment:9</div>

This is working in pynac-0.4.1 (but not 0.3.9.1).

EDIT: I meant the original case.



---

archive/issue_comments_262387.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@nbruin](#comment%3A6):\n> It's not just powers either:\n> \n> ```\n> sage: V=[SR.var(\"x%s\"%i) for i in [0..20]]\n> sage: F=sum((i+1)*V[i] for i in [0..20])\n> sage: G=sum(Zmod(7)(i+1)*V[i] for i in [0..20])\n> sage: sage: F*Zmod(7)(1)-G\n> -x0 + 0*x13 + 6*x14 + 0*x20 + 3*x3 + 0*x6\n> sage: F-G \n> 14*x13 + 21*x20 + 7*x6\n> ```\n\nThis is different in 0.4.1:\n\n```\nsage: sage: sage: F*Zmod(7)(1)-G\n-x0 + 0*x13 + 0*x20 + 4*x9\nsage: F-G\n14*x13 + 21*x20 + 7*x6\nsage: F\nx0 + 2*x1 + 11*x10 + 12*x11 + 13*x12 + 14*x13 + 15*x14 + 16*x15 + 17*x16 + 18*x17 + 19*x18 + 20*x19 + 3*x2 + 21*x20 + 4*x3 + 5*x4 + 6*x5 + 7*x6 + 8*x7 + 9*x8 + 10*x9\nsage: G\nx0 + 2*x1 + 4*x10 + 5*x11 + 6*x12 + x14 + 2*x15 + 3*x16 + 4*x17 + 5*x18 + 6*x19 + 3*x2 + 4*x3 + 5*x4 + 6*x5 + x7 + 2*x8 + 3*x9\n```\nEDIT: Added `F`,`G`.",
    "created_at": "2015-06-26T06:35:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262387",
    "user": "https://github.com/rwst"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@nbruin](#comment%3A6):
> It's not just powers either:
> 
> ```
> sage: V=[SR.var("x%s"%i) for i in [0..20]]
> sage: F=sum((i+1)*V[i] for i in [0..20])
> sage: G=sum(Zmod(7)(i+1)*V[i] for i in [0..20])
> sage: sage: F*Zmod(7)(1)-G
> -x0 + 0*x13 + 6*x14 + 0*x20 + 3*x3 + 0*x6
> sage: F-G 
> 14*x13 + 21*x20 + 7*x6
> ```

This is different in 0.4.1:

```
sage: sage: sage: F*Zmod(7)(1)-G
-x0 + 0*x13 + 0*x20 + 4*x9
sage: F-G
14*x13 + 21*x20 + 7*x6
sage: F
x0 + 2*x1 + 11*x10 + 12*x11 + 13*x12 + 14*x13 + 15*x14 + 16*x15 + 17*x16 + 18*x17 + 19*x18 + 20*x19 + 3*x2 + 21*x20 + 4*x3 + 5*x4 + 6*x5 + 7*x6 + 8*x7 + 9*x8 + 10*x9
sage: G
x0 + 2*x1 + 4*x10 + 5*x11 + 6*x12 + x14 + 2*x15 + 3*x16 + 4*x17 + 5*x18 + 6*x19 + 3*x2 + 4*x3 + 5*x4 + 6*x5 + x7 + 2*x8 + 3*x9
```
EDIT: Added `F`,`G`.



---

archive/issue_comments_262388.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nCorrection: this is not pynac-0.4.1 but pynac master. Narrowing down the reponsible change...",
    "created_at": "2015-06-26T07:01:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262388",
    "user": "https://github.com/rwst"
}
```

<div id="comment:11" align="right">comment:11</div>

Correction: this is not pynac-0.4.1 but pynac master. Narrowing down the reponsible change...



---

archive/issue_comments_262389.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,5 +6,12 @@\n 0*B\n ```\n \n-while the result should be `6*A`.\n+while the result should be `6*A`. There is even (with the 6.6 Linux tarball)\n \n+```\n+sage: (3*A + 3*B + 1)*Zmod(9)(6)\n+6\n+sage: (3*A + 3*B)*Zmod(9)(6)\n+                           <------------ !!\n+sage:\n+```\n``````\n",
    "created_at": "2015-06-26T13:06:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262389",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,5 +6,12 @@
 0*B
 ```
 
-while the result should be `6*A`.
+while the result should be `6*A`. There is even (with the 6.6 Linux tarball)
 
+```
+sage: (3*A + 3*B + 1)*Zmod(9)(6)
+6
+sage: (3*A + 3*B)*Zmod(9)(6)
+                           <------------ !!
+sage:
+```
``````




---

archive/issue_comments_262390.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,12 +6,19 @@\n 0*B\n ```\n \n-while the result should be `6*A`. There is even (with the 6.6 Linux tarball)\n+while the result should be `6*A`.\n+\n+It seems that the internal state of these objects is really messed up:\n \n ```\n-sage: (3*A + 3*B + 1)*Zmod(9)(6)\n-6\n-sage: (3*A + 3*B)*Zmod(9)(6)\n-                           <------------ !!\n-sage:\n+sage: _ = var('A,B')\n+sage: (3*A + 3*B)*Zmod(9)(6)    # Yes, the output is really empty!\n+\n+sage: (3*A + 3*B)*Zmod(9)(6)*A  \n+------------------------------------------------------------------------\n+Unhandled SIGSEGV: A segmentation fault occurred in Sage.\n+This probably occurred because a *compiled* component of Sage has a bug\n+in it and is not properly wrapped with sig_on(), sig_off().\n+Sage will now terminate.\n+------------------------------------------------------------------------\n ```\n``````\n",
    "created_at": "2015-06-26T13:59:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262390",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,12 +6,19 @@
 0*B
 ```
 
-while the result should be `6*A`. There is even (with the 6.6 Linux tarball)
+while the result should be `6*A`.
+
+It seems that the internal state of these objects is really messed up:
 
 ```
-sage: (3*A + 3*B + 1)*Zmod(9)(6)
-6
-sage: (3*A + 3*B)*Zmod(9)(6)
-                           <------------ !!
-sage:
+sage: _ = var('A,B')
+sage: (3*A + 3*B)*Zmod(9)(6)    # Yes, the output is really empty!
+
+sage: (3*A + 3*B)*Zmod(9)(6)*A  
+------------------------------------------------------------------------
+Unhandled SIGSEGV: A segmentation fault occurred in Sage.
+This probably occurred because a *compiled* component of Sage has a bug
+in it and is not properly wrapped with sig_on(), sig_off().
+Sage will now terminate.
+------------------------------------------------------------------------
 ```
``````




---

archive/issue_comments_262391.json:
```json
{
    "body": "Dependencies: **pynac-0.3.9.2**",
    "created_at": "2015-06-26T15:12:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262391",
    "user": "https://github.com/rwst"
}
```

Dependencies: **pynac-0.3.9.2**



---

archive/issue_comments_262392.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nThe following patch works for these two examples, just to point at the direction further completion is needed:\n\n```\ndiff --git a/ginac/expairseq.cpp b/ginac/expairseq.cpp\nindex 2abb7b7..acef09b 100644\n--- a/ginac/expairseq.cpp\n+++ b/ginac/expairseq.cpp\n@@ -1207,16 +1207,17 @@ void expairseq::combine_same_terms_sorted_seq()\n \t// must_copy will be set to true the first time some combination is \n \t// possible from then on the sequence has changed and must be compacted\n \tbool must_copy = false;\n+        numeric itin1_c = ex_to<numeric>(itin1->coeff);\n \twhile (itin2!=last) {\n \t\tif (itin1->rest.compare(itin2->rest)==0 &&\n \t\t\t\tunlikely(!is_a<infinity>(itin1->rest))) {\n-\t\t\titin1->coeff = ex_to<numeric>(itin1->coeff).\n+\t\t\titin1->coeff = itin1_c.\n \t\t\t               add_dyn(ex_to<numeric>(itin2->coeff));\n \t\t\tif (expair_needs_further_processing(itin1))\n \t\t\t\tneeds_further_processing = true;\n \t\t\tmust_copy = true;\n \t\t} else {\n-\t\t\tif (!ex_to<numeric>(itin1->coeff).is_zero()) {\n+\t\t\tif (not itin1_c.is_zero() or itin1_c.is_parent_pos_char()) {\n \t\t\t\tif (must_copy)\n \t\t\t\t\t*itout = *itin1;\n \t\t\t\t++itout;\n@@ -1225,7 +1226,7 @@ void expairseq::combine_same_terms_sorted_seq()\n \t\t}\n \t\t++itin2;\n \t}\n-\tif (!ex_to<numeric>(itin1->coeff).is_zero()) {\n+\tif (not itin1_c.is_zero() or itin1_c.is_parent_pos_char()) {\n \t\tif (must_copy)\n \t\t\t*itout = *itin1;\n \t\t++itout;\n```\nThe relevant ticket would be https://github.com/pynac/pynac/issues/77.",
    "created_at": "2015-06-26T15:12:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262392",
    "user": "https://github.com/rwst"
}
```

<div id="comment:14" align="right">comment:14</div>

The following patch works for these two examples, just to point at the direction further completion is needed:

```
diff --git a/ginac/expairseq.cpp b/ginac/expairseq.cpp
index 2abb7b7..acef09b 100644
--- a/ginac/expairseq.cpp
+++ b/ginac/expairseq.cpp
@@ -1207,16 +1207,17 @@ void expairseq::combine_same_terms_sorted_seq()
 	// must_copy will be set to true the first time some combination is 
 	// possible from then on the sequence has changed and must be compacted
 	bool must_copy = false;
+        numeric itin1_c = ex_to<numeric>(itin1->coeff);
 	while (itin2!=last) {
 		if (itin1->rest.compare(itin2->rest)==0 &&
 				unlikely(!is_a<infinity>(itin1->rest))) {
-			itin1->coeff = ex_to<numeric>(itin1->coeff).
+			itin1->coeff = itin1_c.
 			               add_dyn(ex_to<numeric>(itin2->coeff));
 			if (expair_needs_further_processing(itin1))
 				needs_further_processing = true;
 			must_copy = true;
 		} else {
-			if (!ex_to<numeric>(itin1->coeff).is_zero()) {
+			if (not itin1_c.is_zero() or itin1_c.is_parent_pos_char()) {
 				if (must_copy)
 					*itout = *itin1;
 				++itout;
@@ -1225,7 +1226,7 @@ void expairseq::combine_same_terms_sorted_seq()
 		}
 		++itin2;
 	}
-	if (!ex_to<numeric>(itin1->coeff).is_zero()) {
+	if (not itin1_c.is_zero() or itin1_c.is_parent_pos_char()) {
 		if (must_copy)
 			*itout = *itin1;
 		++itout;
```
The relevant ticket would be https://github.com/pynac/pynac/issues/77.



---

archive/issue_comments_262393.json:
```json
{
    "body": "Upstream: **Reported upstream. Developers acknowledge bug.**",
    "created_at": "2015-06-26T15:12:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262393",
    "user": "https://github.com/rwst"
}
```

Upstream: **Reported upstream. Developers acknowledge bug.**



---

archive/issue_comments_262394.json:
```json
{
    "body": "Branch: **[u/rws/bug_with_products_of_symbolic_variables_with_modular_integers](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/bug_with_products_of_symbolic_variables_with_modular_integers)**",
    "created_at": "2015-06-30T13:56:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262394",
    "user": "https://github.com/rwst"
}
```

Branch: **[u/rws/bug_with_products_of_symbolic_variables_with_modular_integers](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/bug_with_products_of_symbolic_variables_with_modular_integers)**



---

archive/issue_events_264430.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-07-16T06:00:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264430"
}
```



---

archive/issue_events_264431.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-07-16T06:00:01Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "title_is": "doctest symbolic modular integers fix",
    "title_was": "Bug with products of symbolic variables with modular integers",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264431"
}
```



---

archive/issue_comments_262395.json:
```json
{
    "body": "Author: **Ralf Stephan**",
    "created_at": "2015-07-16T06:00:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262395",
    "user": "https://github.com/rwst"
}
```

Author: **Ralf Stephan**



---

archive/issue_comments_262396.json:
```json
{
    "body": "Changed upstream from **Reported upstream. Developers acknowledge bug.** to none",
    "created_at": "2015-07-16T06:00:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262396",
    "user": "https://github.com/rwst"
}
```

Changed upstream from **Reported upstream. Developers acknowledge bug.** to none



---

archive/issue_comments_262397.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f9e551e2110aa700b29eee6f379ec93890d7ba8\"><code>6f9e551</code></a></td><td><code>18787: doctests</code></td></tr></table>\n",
    "created_at": "2015-07-16T06:00:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262397",
    "user": "https://github.com/rwst"
}
```

<div id="comment:16"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f9e551e2110aa700b29eee6f379ec93890d7ba8"><code>6f9e551</code></a></td><td><code>18787: doctests</code></td></tr></table>




---

archive/issue_comments_262398.json:
```json
{
    "body": "Commit: **[`6f9e551`](https://github.com/sagemath/sagetrac-mirror/commit/6f9e551e2110aa700b29eee6f379ec93890d7ba8)**",
    "created_at": "2015-07-16T06:00:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262398",
    "user": "https://github.com/rwst"
}
```

Commit: **[`6f9e551`](https://github.com/sagemath/sagetrac-mirror/commit/6f9e551e2110aa700b29eee6f379ec93890d7ba8)**



---

archive/issue_comments_262399.json:
```json
{
    "body": "Changed dependencies from **pynac-0.3.9.2** to none",
    "created_at": "2015-07-16T06:00:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262399",
    "user": "https://github.com/rwst"
}
```

Changed dependencies from **pynac-0.3.9.2** to none



---

archive/issue_comments_262400.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nWith Sage-6.8.rc0:\n\n```\n**********************************************************************\nFile \"src/sage/symbolic/expression.pyx\", line 2821, in sage.symbolic.expression.Expression._add_\nFailed example:\n    (A + 3*B)*Zmod(9)(6)\nExpected:\n    6*A\nGot:\n    0* + 6*A\n**********************************************************************\nFile \"src/sage/symbolic/expression.pyx\", line 2823, in sage.symbolic.expression.Expression._add_\nFailed example:\n    (3*A + 3*B)*Zmod(9)(6)\nExpected:\n    0\nGot:\n    0*\n**********************************************************************\nFile \"src/sage/symbolic/expression.pyx\", line 2825, in sage.symbolic.expression.Expression._add_\nFailed example:\n    (3*A + 3*B)*Zmod(9)(6)*A\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.symbolic.expression.Expression._add_[24]>\", line 1, in <module>\n        (Integer(3)*A + Integer(3)*B)*Zmod(Integer(9))(Integer(6))*A\n      File \"sage/structure/element.pyx\", line 1849, in sage.structure.element.RingElement.__mul__ (build/cythonized/sage/structure/element.c:16581)\n        return (<RingElement>left)._mul_(<RingElement>right)\n      File \"sage/symbolic/expression.pyx\", line 3148, in sage.symbolic.expression.Expression._mul_ (build/cythonized/sage/symbolic/expression.cpp:19837)\n        x = gmul(left._gobj, _right._gobj)\n    OverflowError: numeric::div(): division by zero\n**********************************************************************\n```",
    "created_at": "2015-07-16T13:14:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262400",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">comment:17</div>

With Sage-6.8.rc0:

```
**********************************************************************
File "src/sage/symbolic/expression.pyx", line 2821, in sage.symbolic.expression.Expression._add_
Failed example:
    (A + 3*B)*Zmod(9)(6)
Expected:
    6*A
Got:
    0* + 6*A
**********************************************************************
File "src/sage/symbolic/expression.pyx", line 2823, in sage.symbolic.expression.Expression._add_
Failed example:
    (3*A + 3*B)*Zmod(9)(6)
Expected:
    0
Got:
    0*
**********************************************************************
File "src/sage/symbolic/expression.pyx", line 2825, in sage.symbolic.expression.Expression._add_
Failed example:
    (3*A + 3*B)*Zmod(9)(6)*A
Exception raised:
    Traceback (most recent call last):
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.symbolic.expression.Expression._add_[24]>", line 1, in <module>
        (Integer(3)*A + Integer(3)*B)*Zmod(Integer(9))(Integer(6))*A
      File "sage/structure/element.pyx", line 1849, in sage.structure.element.RingElement.__mul__ (build/cythonized/sage/structure/element.c:16581)
        return (<RingElement>left)._mul_(<RingElement>right)
      File "sage/symbolic/expression.pyx", line 3148, in sage.symbolic.expression.Expression._mul_ (build/cythonized/sage/symbolic/expression.cpp:19837)
        x = gmul(left._gobj, _right._gobj)
    OverflowError: numeric::div(): division by zero
**********************************************************************
```



---

archive/issue_events_264432.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-07-16T13:14:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264432"
}
```



---

archive/issue_events_264433.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-07-16T13:14:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264433"
}
```



---

archive/issue_comments_262401.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nAlso a detail: it's better style to use\n\n```\nsage: x = foo\n```\ninstead of\n\n```\nsage: x=foo\n```",
    "created_at": "2015-07-16T13:16:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262401",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:18" align="right">comment:18</div>

Also a detail: it's better style to use

```
sage: x = foo
```
instead of

```
sage: x=foo
```



---

archive/issue_comments_262402.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nSeems the backport from Pynac-0.4.2 missed something. When will C++11 be mandatory in Sage?",
    "created_at": "2015-07-16T13:27:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262402",
    "user": "https://github.com/rwst"
}
```

<div id="comment:19" align="right">comment:19</div>

Seems the backport from Pynac-0.4.2 missed something. When will C++11 be mandatory in Sage?



---

archive/issue_comments_262403.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@rwst](#comment%3A19):\n> When will C++11 be mandatory in Sage?\n\nI think I already mentioned this: I recommend you write to sage-devel with this request.",
    "created_at": "2015-07-16T13:31:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262403",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@rwst](#comment%3A19):
> When will C++11 be mandatory in Sage?

I think I already mentioned this: I recommend you write to sage-devel with this request.



---

archive/issue_comments_262404.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nLet me add that the hard part will be to define the precise subset of C++11 that you need.\n\nIt's easy to require that the C++ compiler supports the `-std=c++0x` or `-std=c++11` option, but I don't know if that is sufficient.",
    "created_at": "2015-07-16T13:33:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262404",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:21" align="right">comment:21</div>

Let me add that the hard part will be to define the precise subset of C++11 that you need.

It's easy to require that the C++ compiler supports the `-std=c++0x` or `-std=c++11` option, but I don't know if that is sufficient.



---

archive/issue_comments_262405.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@jdemeyer](#comment%3A21):\n> Let me add that the hard part will be to define the precise subset of C++11 that you need.\n\nWhy? We have already committed to gcc-4.6 in our conversation. For the other system without gcc there will have to be an Xcode version that has equivalent functionality. These two versions will be made the minimum. No other definition necessary.",
    "created_at": "2015-07-16T14:23:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262405",
    "user": "https://github.com/rwst"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@jdemeyer](#comment%3A21):
> Let me add that the hard part will be to define the precise subset of C++11 that you need.

Why? We have already committed to gcc-4.6 in our conversation. For the other system without gcc there will have to be an Xcode version that has equivalent functionality. These two versions will be made the minimum. No other definition necessary.



---

archive/issue_comments_262406.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@rwst](#comment%3A22):\n> We have already committed to gcc-4.6 in our conversation\n\nReally? I understood that you were not sure if GCC 4.6 was in fact sufficient. But if you are, that's fine for me.\n\nNote that, for various reasons, we actually do not support GCC 4.6 in Sage, which would make GCC 4.7 the minimum.\n\nIf you're willing to go ahead with this, you should:\n1. write to `sage-devel` explaining why you want C++11 support and that this means requiring GCC 4.7.\n2. create a ticket for requiring C++11 and GCC 4.7 in Sage.\n3. create a ticket for upgrading Pynac to the version and make it depend on the ticket in 2.",
    "created_at": "2015-07-16T14:44:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262406",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@rwst](#comment%3A22):
> We have already committed to gcc-4.6 in our conversation

Really? I understood that you were not sure if GCC 4.6 was in fact sufficient. But if you are, that's fine for me.

Note that, for various reasons, we actually do not support GCC 4.6 in Sage, which would make GCC 4.7 the minimum.

If you're willing to go ahead with this, you should:
1. write to `sage-devel` explaining why you want C++11 support and that this means requiring GCC 4.7.
2. create a ticket for requiring C++11 and GCC 4.7 in Sage.
3. create a ticket for upgrading Pynac to the version and make it depend on the ticket in 2.



---

archive/issue_events_264434.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-07-30T13:58:50Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264434"
}
```



---

archive/issue_events_264435.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-07-30T13:58:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264435"
}
```



---

archive/issue_comments_262407.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@jdemeyer](#comment%3A17):\n> With Sage-6.8.rc0:\n> \n> ```\n> Got:\n>     0* + 6*A\n> Got:\n>     0*\n> ```\n\nFound it. The backport was indeed incomplete. Fix in pynac-0.3.9.3.",
    "created_at": "2015-07-30T13:58:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262407",
    "user": "https://github.com/rwst"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@jdemeyer](#comment%3A17):
> With Sage-6.8.rc0:
> 
> ```
> Got:
>     0* + 6*A
> Got:
>     0*
> ```

Found it. The backport was indeed incomplete. Fix in pynac-0.3.9.3.



---

archive/issue_comments_262408.json:
```json
{
    "body": "Dependencies: **pynac-0.3.9.3/-0.4.2**",
    "created_at": "2015-07-30T13:58:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262408",
    "user": "https://github.com/rwst"
}
```

Dependencies: **pynac-0.3.9.3/-0.4.2**



---

archive/issue_events_264436.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-08-02T09:26:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264436"
}
```



---

archive/issue_events_264437.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-08-02T09:26:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264437"
}
```



---

archive/issue_comments_262409.json:
```json
{
    "body": "Changed dependencies from **pynac-0.3.9.3/-0.4.2** to **#18980**",
    "created_at": "2015-08-02T09:26:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262409",
    "user": "https://github.com/rwst"
}
```

Changed dependencies from **pynac-0.3.9.3/-0.4.2** to **#18980**



---

archive/issue_events_264438.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-08-20T13:46:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264438"
}
```



---

archive/issue_events_264439.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-08-20T13:46:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264439"
}
```



---

archive/issue_events_264440.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-09-19T03:43:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264440"
}
```



---

archive/issue_events_264441.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-09-19T03:43:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264441"
}
```



---

archive/issue_comments_262410.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nWhy is it in sage-pending?\n\nWhat about the following (inspired from [comment:6](#comment%3A6)\n\n```\nsage: f(x) = Zmod(7)(3) * x**2 + Zmod(9)(3) * x**3\nsage: f(1)\n** BOOM **\n```\nwhile\n\n```\nsage: f(x) = Zmod(7)(1) * x**2 + Zmod(9)(1) * x**3\nsage: f(1)\n2\n```\n\nVincent",
    "created_at": "2015-09-19T03:43:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262410",
    "user": "https://github.com/videlec"
}
```

<div id="comment:27" align="right">comment:27</div>

Why is it in sage-pending?

What about the following (inspired from [comment:6](#comment%3A6)

```
sage: f(x) = Zmod(7)(3) * x**2 + Zmod(9)(3) * x**3
sage: f(1)
** BOOM **
```
while

```
sage: f(x) = Zmod(7)(1) * x**2 + Zmod(9)(1) * x**3
sage: f(1)
2
```

Vincent



---

archive/issue_events_264442.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-09-19T06:18:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264442"
}
```



---

archive/issue_events_264443.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-09-19T06:18:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264443"
}
```



---

archive/issue_comments_262411.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@videlec](#comment%3A27):\n> Why is it in sage-pending?\n\nI didn't want patchbot on it.",
    "created_at": "2015-09-19T06:18:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262411",
    "user": "https://github.com/rwst"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@videlec](#comment%3A27):
> Why is it in sage-pending?

I didn't want patchbot on it.



---

archive/issue_comments_262412.json:
```json
{
    "body": "Changed dependencies from **#18980** to none",
    "created_at": "2015-09-19T06:18:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262412",
    "user": "https://github.com/rwst"
}
```

Changed dependencies from **#18980** to none



---

archive/issue_comments_262413.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,24 +1,11 @@\n-As reported on [this ask question](http://ask.sagemath.org/question/27196/multiplying-matrices-with-different-parents/)\n+> \n+> ```\n+> sage: f(x) = Zmod(7)(1) * x**2 + Zmod(9)(1) * x**3\n+> sage: f(1)\n+> 2\n+> sage: Zmod(7)(1) + Zmod(9)(1)\n+> ```\n \n-```\n-sage: _ = var('A,B')\n-sage: (A + 3*B)*Zmod(9)(6)\n-0*B\n-```\n+TypeError: unsupported operand parent(s) for '+': 'Ring of integers modulo 7' and 'Ring of integers modulo 9'\n+> }}}\n \n-while the result should be `6*A`.\n-\n-It seems that the internal state of these objects is really messed up:\n-\n-```\n-sage: _ = var('A,B')\n-sage: (3*A + 3*B)*Zmod(9)(6)    # Yes, the output is really empty!\n-\n-sage: (3*A + 3*B)*Zmod(9)(6)*A  \n-------------------------------------------------------------------------\n-Unhandled SIGSEGV: A segmentation fault occurred in Sage.\n-This probably occurred because a *compiled* component of Sage has a bug\n-in it and is not properly wrapped with sig_on(), sig_off().\n-Sage will now terminate.\n-------------------------------------------------------------------------\n-```\n``````\n",
    "created_at": "2015-09-19T06:18:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262413",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,24 +1,11 @@
-As reported on [this ask question](http://ask.sagemath.org/question/27196/multiplying-matrices-with-different-parents/)
+> 
+> ```
+> sage: f(x) = Zmod(7)(1) * x**2 + Zmod(9)(1) * x**3
+> sage: f(1)
+> 2
+> sage: Zmod(7)(1) + Zmod(9)(1)
+> ```
 
-```
-sage: _ = var('A,B')
-sage: (A + 3*B)*Zmod(9)(6)
-0*B
-```
+TypeError: unsupported operand parent(s) for '+': 'Ring of integers modulo 7' and 'Ring of integers modulo 9'
+> }}}
 
-while the result should be `6*A`.
-
-It seems that the internal state of these objects is really messed up:
-
-```
-sage: _ = var('A,B')
-sage: (3*A + 3*B)*Zmod(9)(6)    # Yes, the output is really empty!
-
-sage: (3*A + 3*B)*Zmod(9)(6)*A  
-------------------------------------------------------------------------
-Unhandled SIGSEGV: A segmentation fault occurred in Sage.
-This probably occurred because a *compiled* component of Sage has a bug
-in it and is not properly wrapped with sig_on(), sig_off().
-Sage will now terminate.
-------------------------------------------------------------------------
-```
``````




---

archive/issue_events_264444.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-09-19T06:18:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264444"
}
```



---

archive/issue_events_264445.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-09-19T06:18:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264445"
}
```



---

archive/issue_events_264446.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-09-19T06:18:48Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "title_is": "symbolic modular integers still broken",
    "title_was": "doctest symbolic modular integers fix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264446"
}
```



---

archive/issue_comments_262414.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@videlec](#comment%3A27):\n> What about the following (inspired from [comment:6](#comment%3A6)\n> \n> ```\n> sage: f(x) = Zmod(7)(3) * x**2 + Zmod(9)(3) * x**3\n> sage: f(1)\n> ** BOOM **\n> ```\n> while\n> \n> ```\n> sage: f(x) = Zmod(7)(1) * x**2 + Zmod(9)(1) * x**3\n> sage: f(1)\n> 2\n> ```\n\nThis both now gives a `TypeError` in pynac master, equivalently to `GF(7)(1) + GF(9)(1)` and `GF(7)(3) + GF(9)(3)`.\n\nThe ticket should doctest this as soon as pynac is upgraded to 0.6.4",
    "created_at": "2016-03-07T07:54:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262414",
    "user": "https://github.com/rwst"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@videlec](#comment%3A27):
> What about the following (inspired from [comment:6](#comment%3A6)
> 
> ```
> sage: f(x) = Zmod(7)(3) * x**2 + Zmod(9)(3) * x**3
> sage: f(1)
> ** BOOM **
> ```
> while
> 
> ```
> sage: f(x) = Zmod(7)(1) * x**2 + Zmod(9)(1) * x**3
> sage: f(1)
> 2
> ```

This both now gives a `TypeError` in pynac master, equivalently to `GF(7)(1) + GF(9)(1)` and `GF(7)(3) + GF(9)(3)`.

The ticket should doctest this as soon as pynac is upgraded to 0.6.4



---

archive/issue_comments_262415.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nI believe this is resolved in #21391.",
    "created_at": "2017-01-16T07:14:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262415",
    "user": "https://github.com/rwst"
}
```

<div id="comment:31" align="right">comment:31</div>

I believe this is resolved in #21391.



---

archive/issue_comments_262416.json:
```json
{
    "body": "Changed commit from **[`6f9e551`](https://github.com/sagemath/sagetrac-mirror/commit/6f9e551e2110aa700b29eee6f379ec93890d7ba8)** to none",
    "created_at": "2017-01-16T07:14:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262416",
    "user": "https://github.com/rwst"
}
```

Changed commit from **[`6f9e551`](https://github.com/sagemath/sagetrac-mirror/commit/6f9e551e2110aa700b29eee6f379ec93890d7ba8)** to none



---

archive/issue_comments_262417.json:
```json
{
    "body": "Changed branch from **[u/rws/bug_with_products_of_symbolic_variables_with_modular_integers](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/bug_with_products_of_symbolic_variables_with_modular_integers)** to none",
    "created_at": "2017-01-16T07:14:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262417",
    "user": "https://github.com/rwst"
}
```

Changed branch from **[u/rws/bug_with_products_of_symbolic_variables_with_modular_integers](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/bug_with_products_of_symbolic_variables_with_modular_integers)** to none



---

archive/issue_events_264447.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-01-16T07:14:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264447"
}
```



---

archive/issue_events_264448.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-01-16T07:14:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264448"
}
```



---

archive/issue_comments_262418.json:
```json
{
    "body": "Changed author from **Ralf Stephan** to none",
    "created_at": "2017-01-16T07:14:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262418",
    "user": "https://github.com/rwst"
}
```

Changed author from **Ralf Stephan** to none



---

archive/issue_events_264449.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-01-16T07:14:22Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264449"
}
```



---

archive/issue_events_264450.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2017-03-06T22:37:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264450"
}
```



---

archive/issue_comments_262419.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@rwst](#comment%3A31):\n> I believe this is resolved in #21391.\n\nIt seems inteed to works better now. But why not adding the tests discussed on the current ticket as you did previously ?",
    "created_at": "2017-03-06T22:37:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262419",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@rwst](#comment%3A31):
> I believe this is resolved in #21391.

It seems inteed to works better now. But why not adding the tests discussed on the current ticket as you did previously ?



---

archive/issue_events_264451.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2017-03-06T22:37:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264451"
}
```



---

archive/issue_events_264452.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2017-03-06T22:37:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264452"
}
```



---

archive/issue_comments_262420.json:
```json
{
    "body": "Branch: **[u/rws/symbolic_modular_integers_still_broken](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/symbolic_modular_integers_still_broken)**",
    "created_at": "2017-03-07T14:24:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262420",
    "user": "https://github.com/rwst"
}
```

Branch: **[u/rws/symbolic_modular_integers_still_broken](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/symbolic_modular_integers_still_broken)**



---

archive/issue_comments_262421.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nMade dependent on #21391 to prevent merge conflicts.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7147699e66955b2a130a871b97886ec5af3a665d\"><code>7147699</code></a></td><td><code>21391: Disallow mixing of pos.char.ring elements and symbolic variables</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dd6ad96992067f48fdd3c8982c267d6f67b434fd\"><code>dd6ad96</code></a></td><td><code>Merge branch 'develop' into t/21391/disallow_mixing_of_pos_char_ring_elements_and_symbolic_variables</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/03ccd07aba29c84e4510b41811567ae71c9d1151\"><code>03ccd07</code></a></td><td><code>Merge branch 'develop' into t/21391/disallow_mixing_of_pos_char_ring_elements_and_symbolic_variables</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f2933cc95f5ace319d93038c92bd92e9b6e3e3ac\"><code>f2933cc</code></a></td><td><code>21391: introduce ex.has_finite_parent()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/333db3c0de1e767304a8b9be2e2894038d0b3cbd\"><code>333db3c</code></a></td><td><code>Merge branch 'develop' into t/21391/disallow_mixing_of_pos_char_ring_elements_and_symbolic_variables</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8700e0048e85cbd330ef1c2cc739708893b6d599\"><code>8700e00</code></a></td><td><code>Merge branch 'develop' into t/21391/disallow_mixing_of_pos_char_ring_elements_and_symbolic_variables</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c7f8ad21a2d23d2cf33594b84224ece11a459a23\"><code>c7f8ad2</code></a></td><td><code>21391: to prevent fails give the coordinate functions an explicit characteristic</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9430605a17f8793efff5453966fea424e28423a0\"><code>9430605</code></a></td><td><code>21391: doctest fixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/be9ec4e97557a2ff7ed682ed62c2101d084de498\"><code>be9ec4e</code></a></td><td><code>18787: doctest</code></td></tr></table>\n",
    "created_at": "2017-03-07T14:26:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262421",
    "user": "https://github.com/rwst"
}
```

<div id="comment:34" align="right">comment:34</div>

Made dependent on #21391 to prevent merge conflicts.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7147699e66955b2a130a871b97886ec5af3a665d"><code>7147699</code></a></td><td><code>21391: Disallow mixing of pos.char.ring elements and symbolic variables</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dd6ad96992067f48fdd3c8982c267d6f67b434fd"><code>dd6ad96</code></a></td><td><code>Merge branch 'develop' into t/21391/disallow_mixing_of_pos_char_ring_elements_and_symbolic_variables</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/03ccd07aba29c84e4510b41811567ae71c9d1151"><code>03ccd07</code></a></td><td><code>Merge branch 'develop' into t/21391/disallow_mixing_of_pos_char_ring_elements_and_symbolic_variables</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f2933cc95f5ace319d93038c92bd92e9b6e3e3ac"><code>f2933cc</code></a></td><td><code>21391: introduce ex.has_finite_parent()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/333db3c0de1e767304a8b9be2e2894038d0b3cbd"><code>333db3c</code></a></td><td><code>Merge branch 'develop' into t/21391/disallow_mixing_of_pos_char_ring_elements_and_symbolic_variables</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8700e0048e85cbd330ef1c2cc739708893b6d599"><code>8700e00</code></a></td><td><code>Merge branch 'develop' into t/21391/disallow_mixing_of_pos_char_ring_elements_and_symbolic_variables</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c7f8ad21a2d23d2cf33594b84224ece11a459a23"><code>c7f8ad2</code></a></td><td><code>21391: to prevent fails give the coordinate functions an explicit characteristic</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9430605a17f8793efff5453966fea424e28423a0"><code>9430605</code></a></td><td><code>21391: doctest fixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/be9ec4e97557a2ff7ed682ed62c2101d084de498"><code>be9ec4e</code></a></td><td><code>18787: doctest</code></td></tr></table>




---

archive/issue_comments_262422.json:
```json
{
    "body": "Commit: **[`be9ec4e`](https://github.com/sagemath/sagetrac-mirror/commit/be9ec4e97557a2ff7ed682ed62c2101d084de498)**",
    "created_at": "2017-03-07T14:26:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262422",
    "user": "https://github.com/rwst"
}
```

Commit: **[`be9ec4e`](https://github.com/sagemath/sagetrac-mirror/commit/be9ec4e97557a2ff7ed682ed62c2101d084de498)**



---

archive/issue_events_264453.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-03-07T14:26:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264453"
}
```



---

archive/issue_events_264454.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-03-07T14:26:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264454"
}
```



---

archive/issue_comments_262423.json:
```json
{
    "body": "Author: **Ralf Stephan**",
    "created_at": "2017-03-07T14:26:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262423",
    "user": "https://github.com/rwst"
}
```

Author: **Ralf Stephan**



---

archive/issue_comments_262424.json:
```json
{
    "body": "Dependencies: **#21391**",
    "created_at": "2017-03-07T14:26:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262424",
    "user": "https://github.com/rwst"
}
```

Dependencies: **#21391**



---

archive/issue_comments_262425.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nDo the people on this ticket agree that #24072 solves this ticket as is claimed there?",
    "created_at": "2017-10-25T10:27:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262425",
    "user": "https://github.com/koffie"
}
```

<div id="comment:35" align="right">comment:35</div>

Do the people on this ticket agree that #24072 solves this ticket as is claimed there?



---

archive/issue_events_264455.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-25T12:44:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264455"
}
```



---

archive/issue_comments_262426.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nAgree.",
    "created_at": "2017-10-25T12:44:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262426",
    "user": "https://github.com/rwst"
}
```

<div id="comment:36" align="right">comment:36</div>

Agree.



---

archive/issue_comments_262427.json:
```json
{
    "body": "Reviewer: **Ralf Stephan**",
    "created_at": "2017-10-25T22:40:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262427",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Ralf Stephan**



---

archive/issue_comments_262428.json:
```json
{
    "body": "Changed author from **Ralf Stephan** to none",
    "created_at": "2017-10-25T22:40:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18787#issuecomment-262428",
    "user": "https://github.com/tscrim"
}
```

Changed author from **Ralf Stephan** to none



---

archive/issue_events_264456.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-10-25T22:40:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264456"
}
```



---

archive/issue_events_264457.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-10-25T22:40:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264457"
}
```



---

archive/issue_events_264458.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-12T08:23:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264458"
}
```



---

archive/issue_events_264459.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-12T08:23:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264459"
}
```



---

archive/issue_events_264460.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-12T08:23:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264460"
}
```



---

archive/issue_events_264461.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-12T08:23:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18787",
    "label": "https://github.com/sagemath/sage/labels/wontfix",
    "label_color": "c6c6c6",
    "label_name": "wontfix",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18787#event-264461"
}
```
