# Issue 18272: unset MACOSX_DEPLOYMENT_TARGET, rather than sometimes setting a bogus value

archive/issues_018035.json:
```json
{
    "assignees": [],
    "body": "Related: \n\n- #31326 (removes an instance of `MACOSX_DEPLOYMENT_TARGET` in `build/pkgs/scipy/spkg-install.in`) and \n\n- [#31204 comment:9](https://github.com/sagemath/sage/issues/31204#comment:9) (should we set `MACOSX_DEPLOYMENT_TARGET` before running doctests?)\n\n- [#18254 comment:32](https://github.com/sagemath/sage/issues/18254#comment:32) (comment from 2015, not sure if still relevant...)\n\n- https://github.com/sagemath/sage/pull/38 (also from 2015)\n\n\nDepends on #31227\n\nCC:  @kiwifb\n\nBranch/Commit: **[7581b9c](https://github.com/sagemath/sagetrac-mirror/commit/7581b9cf1acabf0479d7e2a67409966bbfa51674)**\n\nReviewer: **Matthias Koeppe**\n\nAuthor: **John Palmieri**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/18272_\n\n",
    "closed_at": "2021-05-27T20:30:38Z",
    "created_at": "2015-04-21T17:45:51Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "unset MACOSX_DEPLOYMENT_TARGET, rather than sometimes setting a bogus value",
    "type": "issue",
    "updated_at": "2021-05-27T20:30:38Z",
    "url": "https://github.com/sagemath/sage/issues/18272",
    "user": "https://github.com/bukzor"
}
```
Related: 

- #31326 (removes an instance of `MACOSX_DEPLOYMENT_TARGET` in `build/pkgs/scipy/spkg-install.in`) and 

- [#31204 comment:9](https://github.com/sagemath/sage/issues/31204#comment:9) (should we set `MACOSX_DEPLOYMENT_TARGET` before running doctests?)

- [#18254 comment:32](https://github.com/sagemath/sage/issues/18254#comment:32) (comment from 2015, not sure if still relevant...)

- https://github.com/sagemath/sage/pull/38 (also from 2015)


Depends on #31227

CC:  @kiwifb

Branch/Commit: **[7581b9c](https://github.com/sagemath/sagetrac-mirror/commit/7581b9cf1acabf0479d7e2a67409966bbfa51674)**

Reviewer: **Matthias Koeppe**

Author: **John Palmieri**

_Issue created by migration from https://trac.sagemath.org/ticket/18272_





---

archive/issue_events_242107.json:
```json
{
    "actor": "https://github.com/bukzor",
    "created_at": "2015-04-21T17:45:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "milestone_number": null,
    "milestone_title": "sage-6.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18272#event-242107"
}
```



---

archive/issue_events_242108.json:
```json
{
    "actor": "https://github.com/bukzor",
    "created_at": "2015-04-21T17:45:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18272#event-242108"
}
```



---

archive/issue_comments_253207.json:
```json
{
    "body": "Branch: **[u/github/ticket/18272](https://github.com/sagemath/sagetrac-mirror/tree/u/github/ticket/18272)**",
    "created_at": "2015-04-21T17:45:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18272#issuecomment-253207",
    "user": "https://github.com/sagetrac-github-bot"
}
```

Branch: **[u/github/ticket/18272](https://github.com/sagemath/sagetrac-mirror/tree/u/github/ticket/18272)**



---

archive/issue_events_242109.json:
```json
{
    "actor": "https://github.com/sagetrac-github-bot",
    "created_at": "2015-04-21T17:45:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18272#event-242109"
}
```



---

archive/issue_comments_253208.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/569f12d06763baf11bf341129a9b7312a2bceb24\">569f12d</a></td><td><code>unset MACOSX_DEPLOYMENT_TARGET, rather than sometimes setting a bogus value</code></td></tr></table>\n",
    "created_at": "2015-04-21T17:46:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18272#issuecomment-253208",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2" align="right">Comment 2</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/569f12d06763baf11bf341129a9b7312a2bceb24">569f12d</a></td><td><code>unset MACOSX_DEPLOYMENT_TARGET, rather than sometimes setting a bogus value</code></td></tr></table>




---

archive/issue_comments_253209.json:
```json
{
    "body": "Commit: **[569f12d](https://github.com/sagemath/sagetrac-mirror/commit/569f12d06763baf11bf341129a9b7312a2bceb24)**",
    "created_at": "2015-04-21T17:46:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18272#issuecomment-253209",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[569f12d](https://github.com/sagemath/sagetrac-mirror/commit/569f12d06763baf11bf341129a9b7312a2bceb24)**



---

archive/issue_events_242110.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2015-05-12T19:26:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20porting",
    "label_color": "000080",
    "label_name": "component: porting",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18272#event-242110"
}
```



---

archive/issue_events_242111.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2015-05-12T19:26:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18272#event-242111"
}
```



---

archive/issue_comments_253210.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nGiven [[#18254 comment:43](https://github.com/sagemath/sage/issues/18254#comment:43)], this needs to be at least \"needs work\", if not \"wontfix\": it doesn't address the issues at #7095 which resulted in setting `MACOSX_DEPLOYMENT_TARGET`.",
    "created_at": "2015-05-13T00:28:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18272#issuecomment-253210",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:4" align="right">Comment 4</div>

Given [[#18254 comment:43](https://github.com/sagemath/sage/issues/18254#comment:43)], this needs to be at least "needs work", if not "wontfix": it doesn't address the issues at #7095 which resulted in setting `MACOSX_DEPLOYMENT_TARGET`.



---

archive/issue_events_242112.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2015-05-13T00:28:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18272#event-242112"
}
```



---

archive/issue_events_242113.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2015-05-13T00:28:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18272#event-242113"
}
```



---

archive/issue_events_242114.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-11-23T16:03:54Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "milestone_number": null,
    "milestone_title": "sage-6.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18272#event-242114"
}
```



---

archive/issue_events_242115.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-11-23T16:03:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18272#event-242115"
}
```



---

archive/issue_events_242116.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-11-23T16:03:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18272#event-242116"
}
```



---

archive/issue_comments_253211.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nold stuff, do you agree that this can be closed ?",
    "created_at": "2019-11-23T16:03:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18272#issuecomment-253211",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:5" align="right">Comment 5</div>

old stuff, do you agree that this can be closed ?



---

archive/issue_events_242117.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-11-23T16:03:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18272#event-242117"
}
```



---

archive/issue_events_242118.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-11-23T16:03:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18272#event-242118"
}
```



---

archive/issue_comments_253212.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nWe need to keep setting `MACOSX_DEPLOYMENT_TARGET`: I just build Sage without, and I hit the docteset failures mentioned at #18524. Is it worth keeping this ticket around to remind us to check? It is a little strange to be using `MACOSX_DEPLOYMENT_TARGET=10.9` with a much later version of OS X.",
    "created_at": "2019-11-23T19:44:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18272#issuecomment-253212",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:6" align="right">Comment 6</div>

We need to keep setting `MACOSX_DEPLOYMENT_TARGET`: I just build Sage without, and I hit the docteset failures mentioned at #18524. Is it worth keeping this ticket around to remind us to check? It is a little strange to be using `MACOSX_DEPLOYMENT_TARGET=10.9` with a much later version of OS X.



---

archive/issue_comments_253213.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nRegarding the latter comment, this is from [this commit](https://github.com/sagemath/sage/commit/d3f5e995393794d56bc73bd05faebfaa784a2afe) which says\n\n```\n        # various packages have still have issues with\n        # two digit OS X versions\n```\nrather than something about libtool.  Unfortunately I couldn't find the ticket this was from.  Did the packages which cause problems along these lines ever get enumerated?  The ones listed at ticket:17204, reviewed by none other than jhpalmieri, seem to all have to do with `libtool`.   (Though I get \n\n```\n$ libtool -V\nApple Inc. version cctools-886\n```\nso who knows whether the bug is fixed there.)  Anyway, it could be worth testing whether setting sane deployments now works for 10.12, say.",
    "created_at": "2019-11-24T02:58:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18272#issuecomment-253213",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:7" align="right">Comment 7</div>

Regarding the latter comment, this is from [this commit](https://github.com/sagemath/sage/commit/d3f5e995393794d56bc73bd05faebfaa784a2afe) which says

```
        # various packages have still have issues with
        # two digit OS X versions
```
rather than something about libtool.  Unfortunately I couldn't find the ticket this was from.  Did the packages which cause problems along these lines ever get enumerated?  The ones listed at ticket:17204, reviewed by none other than jhpalmieri, seem to all have to do with `libtool`.   (Though I get 

```
$ libtool -V
Apple Inc. version cctools-886
```
so who knows whether the bug is fixed there.)  Anyway, it could be worth testing whether setting sane deployments now works for 10.12, say.



---

archive/issue_comments_253214.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nRight now I have access to computers running OS X 10.14 and 10.15. On both, using `MACOSX_DEPLOYMENT_TARGET=10.14` works, while `10.15` fails. (`MACOSX_VERSION` is 18 or 19 on these machines, so the formula `MACOSX_DEPLOYMENT_TARGET=10.$[$MACOSX_VERSION-4]` (which we only use if `MACOSX_VERSION` is 13 or lower) wouldn't work in this case. But maybe we could bump it up to 10.14.\n\nWhen I says that `10.15` fails, I mean that it leads to a lot of doctest failures. I think that they all arise from `pari`, so I'm testing to see if we can just set `MACOSX_DEPLOYMENT_TARGET` for `pari`, not globally. \n\nEither approach would have to be tested on older versions of OS X, though.",
    "created_at": "2019-11-25T23:29:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18272#issuecomment-253214",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:8" align="right">Comment 8</div>

Right now I have access to computers running OS X 10.14 and 10.15. On both, using `MACOSX_DEPLOYMENT_TARGET=10.14` works, while `10.15` fails. (`MACOSX_VERSION` is 18 or 19 on these machines, so the formula `MACOSX_DEPLOYMENT_TARGET=10.$[$MACOSX_VERSION-4]` (which we only use if `MACOSX_VERSION` is 13 or lower) wouldn't work in this case. But maybe we could bump it up to 10.14.

When I says that `10.15` fails, I mean that it leads to a lot of doctest failures. I think that they all arise from `pari`, so I'm testing to see if we can just set `MACOSX_DEPLOYMENT_TARGET` for `pari`, not globally. 

Either approach would have to be tested on older versions of OS X, though.



---

archive/issue_comments_253215.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nTo confirm: I can set `MACOSX_DEPLOYMENT_TARGET` just in the `spkg-install` file for `pari`, not globally. I am having problems debugging this from the `pari` end, though: I can build `pari` on its own without setting `MACOSX_DEPLOYMENT_TARGET` just fine.",
    "created_at": "2019-11-26T23:34:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18272#issuecomment-253215",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:9" align="right">Comment 9</div>

To confirm: I can set `MACOSX_DEPLOYMENT_TARGET` just in the `spkg-install` file for `pari`, not globally. I am having problems debugging this from the `pari` end, though: I can build `pari` on its own without setting `MACOSX_DEPLOYMENT_TARGET` just fine.



---

archive/issue_comments_253216.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nWe should get rid of this - after 4+ years.\n\n```\nif [ $MACOSX_VERSION -ge 14 ]; then\n    # various packages have still have issues with\n    # two digit OS X versions\n    MACOSX_DEPLOYMENT_TARGET=10.9\n```\nMoreover, there should be a way for the user to override it (as noted already on #16312).",
    "created_at": "2020-01-15T21:00:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18272#issuecomment-253216",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:10" align="right">Comment 10</div>

We should get rid of this - after 4+ years.

```
if [ $MACOSX_VERSION -ge 14 ]; then
    # various packages have still have issues with
    # two digit OS X versions
    MACOSX_DEPLOYMENT_TARGET=10.9
```
Moreover, there should be a way for the user to override it (as noted already on #16312).



---

archive/issue_events_242119.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-01-15T21:00:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18272#event-242119"
}
```



---

archive/issue_events_242120.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-01-15T21:00:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18272#event-242120"
}
```



---

archive/issue_events_242121.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-01-15T21:00:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18272#event-242121"
}
```



---

archive/issue_comments_253217.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nMoving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.",
    "created_at": "2020-05-01T04:28:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18272#issuecomment-253217",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:11" align="right">Comment 11</div>

Moving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.



---

archive/issue_events_242122.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-01T04:28:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18272#event-242122"
}
```



---

archive/issue_events_242123.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-01T04:28:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18272#event-242123"
}
```



---

archive/issue_events_242124.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18272#event-242124"
}
```



---

archive/issue_events_242125.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18272#event-242125"
}
```



---

archive/issue_comments_253218.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nHere is a branch, only tested so far on OS X Big Sur. Sage builds for me with its own Python, with homebrew's Python, or with the system `/usr/bin/python3`. Doctests pass (except for unrelated errors) with the first two; with `/usr/bin/python3`, I get a lot of failures because of messages\n\n```\nld: warning: dylib (/usr/local/lib/libmpfr.dylib) was built for newer macOS version (11.0) than being linked (10.14.6)\n```\n(Significantly, those messages are not printed in the first two cases, which is a good sign.)",
    "created_at": "2021-02-04T04:05:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18272#issuecomment-253218",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:13" align="right">Comment 13</div>

Here is a branch, only tested so far on OS X Big Sur. Sage builds for me with its own Python, with homebrew's Python, or with the system `/usr/bin/python3`. Doctests pass (except for unrelated errors) with the first two; with `/usr/bin/python3`, I get a lot of failures because of messages

```
ld: warning: dylib (/usr/local/lib/libmpfr.dylib) was built for newer macOS version (11.0) than being linked (10.14.6)
```
(Significantly, those messages are not printed in the first two cases, which is a good sign.)



---

archive/issue_comments_253219.json:
```json
{
    "body": "Changed branch from **[u/github/ticket/18272](https://github.com/sagemath/sagetrac-mirror/tree/u/github/ticket/18272)** to **[u/jhpalmieri/ticket/18272](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/ticket/18272)**",
    "created_at": "2021-02-04T04:06:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18272#issuecomment-253219",
    "user": "https://github.com/jhpalmieri"
}
```

Changed branch from **[u/github/ticket/18272](https://github.com/sagemath/sagetrac-mirror/tree/u/github/ticket/18272)** to **[u/jhpalmieri/ticket/18272](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/ticket/18272)**



---

archive/issue_events_242126.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-02-04T04:06:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18272#event-242126"
}
```



---

archive/issue_events_242127.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-02-04T04:06:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18272#event-242127"
}
```



---

archive/issue_events_242128.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-02-04T04:06:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20porting",
    "label_color": "000080",
    "label_name": "component: porting",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18272#event-242128"
}
```



---

archive/issue_events_242129.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-02-04T04:06:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18272#event-242129"
}
```



---

archive/issue_comments_253220.json:
```json
{
    "body": "Author: **John Palmieri**",
    "created_at": "2021-02-04T04:06:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18272#issuecomment-253220",
    "user": "https://github.com/jhpalmieri"
}
```

Author: **John Palmieri**



---

archive/issue_comments_253221.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/be3196dbfd015b9fbdbf7a06b9c953b687db3726\">be3196d</a></td><td><code>build/pkgs/python3/spkg-configure.m4, src/bin/sage-env[-config.in]: Prepare conditional setting of ARCHFLAGS</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4c1596ccbf57b7d63f56a189681852e82fe5bac9\">4c1596c</a></td><td><code>build/pkgs/python3/spkg-configure.m4, m4/sage_check_python_for_venv.m4: Refactor through new macro SAGE_PYTHON_CHECK_DISTUTILS</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dc5e22511f783391282eca6a986971e6fe6f20b3\">dc5e225</a></td><td><code>build/pkgs/python3/spkg-configure.m4: On macOS, if the distutils test fails, try using empty ARCHFLAGS</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/df17ad4e916d4db69a49dbe7c8082014abbcb539\">df17ad4</a></td><td><code>tox.ini: Add configuration factors for specific homebrew python3.x</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/914ea58a359df5478484da7fa3293007fad2b2df\">914ea58</a></td><td><code>build/pkgs/python3/spkg-configure.m4: Get rid of stray AC_SUBST</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/986739b940952c7b10dfe0bd2b17dce2407f1ee0\">986739b</a></td><td><code>m4/sage_check_python_for_venv.m4: Fix reason</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0b3e70d458ef88d610c6883ddedaf19565f7de3a\">0b3e70d</a></td><td><code>build/pkgs/python3/spkg-configure.m4: If PYTHON_FOR_VENV is configured to build multiarch extensions, set SAGE_ARCHFLAGS to disable it</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/372adcb4b2f3de7a230b14f5c275299d7d8c50fc\">372adcb</a></td><td><code>.github/workflows/tox.yml: Update xcode versions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fc8b67644bada9ea52cbb7c91f53f763ca84f4bb\">fc8b676</a></td><td><code>SAGE_CHECK_PYTHON_FOR_VENV: Rework with less nesting</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/478697b0fb15f1ff3236f37e9c92cd4420e14a4e\">478697b</a></td><td><code>trac 18272: stop setting MACOSX_DEPLOYMENT_TARGET</code></td></tr></table>\n",
    "created_at": "2021-02-04T04:06:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18272#issuecomment-253221",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:15" align="right">Comment 15</div>

Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/be3196dbfd015b9fbdbf7a06b9c953b687db3726">be3196d</a></td><td><code>build/pkgs/python3/spkg-configure.m4, src/bin/sage-env[-config.in]: Prepare conditional setting of ARCHFLAGS</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4c1596ccbf57b7d63f56a189681852e82fe5bac9">4c1596c</a></td><td><code>build/pkgs/python3/spkg-configure.m4, m4/sage_check_python_for_venv.m4: Refactor through new macro SAGE_PYTHON_CHECK_DISTUTILS</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dc5e22511f783391282eca6a986971e6fe6f20b3">dc5e225</a></td><td><code>build/pkgs/python3/spkg-configure.m4: On macOS, if the distutils test fails, try using empty ARCHFLAGS</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/df17ad4e916d4db69a49dbe7c8082014abbcb539">df17ad4</a></td><td><code>tox.ini: Add configuration factors for specific homebrew python3.x</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/914ea58a359df5478484da7fa3293007fad2b2df">914ea58</a></td><td><code>build/pkgs/python3/spkg-configure.m4: Get rid of stray AC_SUBST</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/986739b940952c7b10dfe0bd2b17dce2407f1ee0">986739b</a></td><td><code>m4/sage_check_python_for_venv.m4: Fix reason</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0b3e70d458ef88d610c6883ddedaf19565f7de3a">0b3e70d</a></td><td><code>build/pkgs/python3/spkg-configure.m4: If PYTHON_FOR_VENV is configured to build multiarch extensions, set SAGE_ARCHFLAGS to disable it</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/372adcb4b2f3de7a230b14f5c275299d7d8c50fc">372adcb</a></td><td><code>.github/workflows/tox.yml: Update xcode versions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fc8b67644bada9ea52cbb7c91f53f763ca84f4bb">fc8b676</a></td><td><code>SAGE_CHECK_PYTHON_FOR_VENV: Rework with less nesting</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/478697b0fb15f1ff3236f37e9c92cd4420e14a4e">478697b</a></td><td><code>trac 18272: stop setting MACOSX_DEPLOYMENT_TARGET</code></td></tr></table>




---

archive/issue_comments_253222.json:
```json
{
    "body": "Changed commit from **[569f12d](https://github.com/sagemath/sagetrac-mirror/commit/569f12d06763baf11bf341129a9b7312a2bceb24)** to **[478697b](https://github.com/sagemath/sagetrac-mirror/commit/478697b0fb15f1ff3236f37e9c92cd4420e14a4e)**",
    "created_at": "2021-02-04T04:06:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18272#issuecomment-253222",
    "user": "https://github.com/jhpalmieri"
}
```

Changed commit from **[569f12d](https://github.com/sagemath/sagetrac-mirror/commit/569f12d06763baf11bf341129a9b7312a2bceb24)** to **[478697b](https://github.com/sagemath/sagetrac-mirror/commit/478697b0fb15f1ff3236f37e9c92cd4420e14a4e)**



---

archive/issue_comments_253223.json:
```json
{
    "body": "Dependencies: **#31227**",
    "created_at": "2021-02-04T04:09:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18272#issuecomment-253223",
    "user": "https://github.com/jhpalmieri"
}
```

Dependencies: **#31227**



---

archive/issue_comments_253224.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nOnly the last commit is for this ticket; the rest come from #31227.",
    "created_at": "2021-02-04T04:13:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18272#issuecomment-253224",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:17" align="right">Comment 17</div>

Only the last commit is for this ticket; the rest come from #31227.



---

archive/issue_comments_253225.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nReplying to [@jhpalmieri](#comment%3A13):\n> Here is a branch, only tested so far on OS X Big Sur. Sage builds for me with its own Python, with homebrew's Python, or with the system `/usr/bin/python3`. Doctests pass (except for unrelated errors) with the first two; with `/usr/bin/python3`, I get a lot of failures because of messages\n> \n> ```\n> ld: warning: dylib (/usr/local/lib/libmpfr.dylib) was built for newer macOS version (11.0) than being linked (10.14.6)\n> ```\n> (Significantly, those messages are not printed in the first two cases, which is a good sign.)\n\nI have the same experience with Catalina. On both Big Sur and Catalina, I can avoid the doctest failures by using\n\n```\n% MACOSX_DEPLOYMENT_TARGET=X make ptestlong\n```\nwhere `X` is a suitable number for the operating system (either 11.0 or 10.15).\n\nI do not have access to any older versions of the MacOS.",
    "created_at": "2021-02-04T19:05:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18272#issuecomment-253225",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:18" align="right">Comment 18</div>

Replying to [@jhpalmieri](#comment%3A13):
> Here is a branch, only tested so far on OS X Big Sur. Sage builds for me with its own Python, with homebrew's Python, or with the system `/usr/bin/python3`. Doctests pass (except for unrelated errors) with the first two; with `/usr/bin/python3`, I get a lot of failures because of messages
> 
> ```
> ld: warning: dylib (/usr/local/lib/libmpfr.dylib) was built for newer macOS version (11.0) than being linked (10.14.6)
> ```
> (Significantly, those messages are not printed in the first two cases, which is a good sign.)

I have the same experience with Catalina. On both Big Sur and Catalina, I can avoid the doctest failures by using

```
% MACOSX_DEPLOYMENT_TARGET=X make ptestlong
```
where `X` is a suitable number for the operating system (either 11.0 or 10.15).

I do not have access to any older versions of the MacOS.



---

archive/issue_events_242130.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-14T19:37:05Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18272#event-242130"
}
```



---

archive/issue_events_242131.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-14T19:37:05Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18272#event-242131"
}
```



---

archive/issue_comments_253226.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nred branch => needs work",
    "created_at": "2021-03-22T15:52:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18272#issuecomment-253226",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:21" align="right">Comment 21</div>

red branch => needs work



---

archive/issue_events_242132.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-03-22T15:52:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18272#event-242132"
}
```



---

archive/issue_events_242133.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-03-22T15:52:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18272#event-242133"
}
```



---

archive/issue_comments_253227.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7581b9cf1acabf0479d7e2a67409966bbfa51674\">7581b9c</a></td><td><code>Merge branch 'develop' into t/18272/ticket/18272</code></td></tr></table>\n",
    "created_at": "2021-03-23T00:11:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18272#issuecomment-253227",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22" align="right">Comment 22</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7581b9cf1acabf0479d7e2a67409966bbfa51674">7581b9c</a></td><td><code>Merge branch 'develop' into t/18272/ticket/18272</code></td></tr></table>




---

archive/issue_comments_253228.json:
```json
{
    "body": "Changed commit from **[478697b](https://github.com/sagemath/sagetrac-mirror/commit/478697b0fb15f1ff3236f37e9c92cd4420e14a4e)** to **[7581b9c](https://github.com/sagemath/sagetrac-mirror/commit/7581b9cf1acabf0479d7e2a67409966bbfa51674)**",
    "created_at": "2021-03-23T00:11:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18272#issuecomment-253228",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[478697b](https://github.com/sagemath/sagetrac-mirror/commit/478697b0fb15f1ff3236f37e9c92cd4420e14a4e)** to **[7581b9c](https://github.com/sagemath/sagetrac-mirror/commit/7581b9cf1acabf0479d7e2a67409966bbfa51674)**



---

archive/issue_comments_253229.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nRebased.",
    "created_at": "2021-03-23T00:50:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18272#issuecomment-253229",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:23" align="right">Comment 23</div>

Rebased.



---

archive/issue_events_242134.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-03-23T00:50:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18272#event-242134"
}
```



---

archive/issue_events_242135.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-03-23T00:50:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18272#event-242135"
}
```



---

archive/issue_comments_253230.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nIt appears that there is still one instance of `MACOSX_DEPLOYMENT_TARGET` in `built/pkgs/scipy/spkg-install.in`. I don't think it is on purpose.",
    "created_at": "2021-03-23T00:59:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18272#issuecomment-253230",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:25" align="right">Comment 25</div>

It appears that there is still one instance of `MACOSX_DEPLOYMENT_TARGET` in `built/pkgs/scipy/spkg-install.in`. I don't think it is on purpose.



---

archive/issue_comments_253231.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\n#31326?",
    "created_at": "2021-03-23T01:06:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18272#issuecomment-253231",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:26" align="right">Comment 26</div>

#31326?



---

archive/issue_comments_253232.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nReplying to [@mkoeppe](#comment%3A26):\n> #31326?\n\nThat'll do. Should it be in the summary for completness?",
    "created_at": "2021-03-23T01:07:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18272#issuecomment-253232",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:27" align="right">Comment 27</div>

Replying to [@mkoeppe](#comment%3A26):
> #31326?

That'll do. Should it be in the summary for completness?



---

archive/issue_comments_253233.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,10 @@\n-See: [#18254 comment:32](https://github.com/sagemath/sage/issues/18254#comment:32)\n+Related: \n \n-https://github.com/sagemath/sage/pull/38\n+- #31326 (removes an instance of `MACOSX_DEPLOYMENT_TARGET` in `build/pkgs/scipy/spkg-install.in`) and \n+\n+- [#31204 comment:9](https://github.com/sagemath/sage/issues/31204#comment:9) (should we set `MACOSX_DEPLOYMENT_TARGET` before running doctests?)\n+\n+- [#18254 comment:32](https://github.com/sagemath/sage/issues/18254#comment:32) (comment from 2015, not sure if still relevant...)\n+\n+- https://github.com/sagemath/sage/pull/38 (also from 2015)\n+\n``````\n",
    "created_at": "2021-03-23T01:57:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18272#issuecomment-253233",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,10 @@
-See: [#18254 comment:32](https://github.com/sagemath/sage/issues/18254#comment:32)
+Related: 
 
-https://github.com/sagemath/sage/pull/38
+- #31326 (removes an instance of `MACOSX_DEPLOYMENT_TARGET` in `build/pkgs/scipy/spkg-install.in`) and 
+
+- [#31204 comment:9](https://github.com/sagemath/sage/issues/31204#comment:9) (should we set `MACOSX_DEPLOYMENT_TARGET` before running doctests?)
+
+- [#18254 comment:32](https://github.com/sagemath/sage/issues/18254#comment:32) (comment from 2015, not sure if still relevant...)
+
+- https://github.com/sagemath/sage/pull/38 (also from 2015)
+
``````




---

archive/issue_comments_253234.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nAnother approach would be to use the `MACOSX_DEPLOYMENT_TARGET` that the configured system `python3` uses, because that's a lower bound for the target that we can build for using that Python. \n\nThis can be obtained by `python3 -m sysconfig | grep MACOSX_DEPLOYMENT_TARGET`. (See also #31567)",
    "created_at": "2021-03-27T00:22:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18272#issuecomment-253234",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:29" align="right">Comment 29</div>

Another approach would be to use the `MACOSX_DEPLOYMENT_TARGET` that the configured system `python3` uses, because that's a lower bound for the target that we can build for using that Python. 

This can be obtained by `python3 -m sysconfig | grep MACOSX_DEPLOYMENT_TARGET`. (See also #31567)



---

archive/issue_comments_253235.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nIf we're not building a `bdist`, why should we have to set `MACOSX_DEPLOYMENT_TARGET` at all? My recollection is that we did this to work around some bugs in various spkgs, but if we can build without setting it, shouldn't we?",
    "created_at": "2021-03-29T01:28:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18272#issuecomment-253235",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:30" align="right">Comment 30</div>

If we're not building a `bdist`, why should we have to set `MACOSX_DEPLOYMENT_TARGET` at all? My recollection is that we did this to work around some bugs in various spkgs, but if we can build without setting it, shouldn't we?



---

archive/issue_comments_253236.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nI agree, for normal builds, not setting `MACOSX_DEPLOYMENT_TARGET` at all will be fine.\n\nThis ticket would need to go through testing on all supported platforms again -- do you want this change in 9.3?",
    "created_at": "2021-03-29T01:51:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18272#issuecomment-253236",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:31" align="right">Comment 31</div>

I agree, for normal builds, not setting `MACOSX_DEPLOYMENT_TARGET` at all will be fine.

This ticket would need to go through testing on all supported platforms again -- do you want this change in 9.3?



---

archive/issue_comments_253237.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\n9.4 is a fine milestone. It's been a problem for so long that it is not crucial to fix it right away.",
    "created_at": "2021-03-29T02:04:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18272#issuecomment-253237",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:32" align="right">Comment 32</div>

9.4 is a fine milestone. It's been a problem for so long that it is not crucial to fix it right away.



---

archive/issue_comments_253238.json:
```json
{
    "body": "Reviewer: **Matthias Koeppe**",
    "created_at": "2021-03-29T03:59:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18272#issuecomment-253238",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Matthias Koeppe**



---

archive/issue_events_242136.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-08T15:57:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18272#event-242136"
}
```



---

archive/issue_events_242137.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-08T15:57:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18272#event-242137"
}
```



---

archive/issue_events_242138.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-05-27T20:30:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18272#event-242138"
}
```



---

archive/issue_events_242139.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "c8258dbf7eb8e83b91b90d5e2f90b41a3a60984f",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-05-27T20:30:38Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18272#event-242139"
}
```



---

archive/issue_comments_253239.json:
```json
{
    "body": "Changed branch from **[u/jhpalmieri/ticket/18272](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/ticket/18272)** to **[7581b9c](https://github.com/sagemath/sagetrac-mirror/commit/7581b9cf1acabf0479d7e2a67409966bbfa51674)**",
    "created_at": "2021-05-27T20:30:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18272#issuecomment-253239",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jhpalmieri/ticket/18272](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/ticket/18272)** to **[7581b9c](https://github.com/sagemath/sagetrac-mirror/commit/7581b9cf1acabf0479d7e2a67409966bbfa51674)**
