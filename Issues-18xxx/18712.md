# Issue 18712: Create test for Degeneracy in Normal Form Games

archive/issues_018475.json:
```json
{
    "body": "Degenerate games can cause problems for many algorithms resulting in strange and conflicting output. This ticket would add a method `game.is_degenerate()` to test for such behaviour.\n\nCC:  @kcrisman @ptigwe @drvinceknight @dimpase\n\nKeywords: Game Theory, Normal Form Game, Degenerate\n\nBranch/Commit: 972bc70d47dfed7d41fb2abffe1103f426e954b3\n\nReviewer: Dima Pasechnik, Tobenna P. Igwe\n\nAuthor: Vince Knight,  James Campbell\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/18712\n\n",
    "closed_at": "2015-08-21T01:56:11Z",
    "created_at": "2015-06-16T12:49:21Z",
    "labels": [
        "component: game theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "Create test for Degeneracy in Normal Form Games",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18712",
    "user": "https://github.com/theref"
}
```
Degenerate games can cause problems for many algorithms resulting in strange and conflicting output. This ticket would add a method `game.is_degenerate()` to test for such behaviour.

CC:  @kcrisman @ptigwe @drvinceknight @dimpase

Keywords: Game Theory, Normal Form Game, Degenerate

Branch/Commit: 972bc70d47dfed7d41fb2abffe1103f426e954b3

Reviewer: Dima Pasechnik, Tobenna P. Igwe

Author: Vince Knight,  James Campbell

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/18712





---

archive/issue_comments_267223.json:
```json
{
    "body": "<a id='comment:1'></a>I'm CC'ing Karl also in case it is of interest to him.",
    "created_at": "2015-06-16T13:10:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18712#issuecomment-267223",
    "user": "https://github.com/drvinceknight"
}
```

<a id='comment:1'></a>I'm CC'ing Karl also in case it is of interest to him.



---

archive/issue_comments_267224.json:
```json
{
    "body": "<a id='comment:2'></a>Last 10 new commits:",
    "created_at": "2015-06-18T09:53:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18712#issuecomment-267224",
    "user": "https://github.com/theref"
}
```

<a id='comment:2'></a>Last 10 new commits:



---

archive/issue_comments_267225.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-06-18T09:53:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18712#issuecomment-267225",
    "user": "https://github.com/theref"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_267226.json:
```json
{
    "body": "<a id='comment:3'></a>Could you add a test where the row players payoff is given as\n\n[[3, 0],\n[0, 3],\n[1.5, 1.5]]\n\nThis shows an example where the game is degenerate in mixed strategies, but not in pure.",
    "created_at": "2015-06-19T14:20:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18712#issuecomment-267226",
    "user": "https://github.com/ptigwe"
}
```

<a id='comment:3'></a>Could you add a test where the row players payoff is given as

[[3, 0],
[0, 3],
[1.5, 1.5]]

This shows an example where the game is degenerate in mixed strategies, but not in pure.



---

archive/issue_comments_267227.json:
```json
{
    "body": "<a id='comment:4'></a>Done :)\n\n---\nNew commits:",
    "created_at": "2015-06-20T15:19:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18712#issuecomment-267227",
    "user": "https://github.com/drvinceknight"
}
```

<a id='comment:4'></a>Done :)

---
New commits:



---

archive/issue_comments_267228.json:
```json
{
    "body": "<a id='comment:5'></a>Unless if I've gone wrong some where, the following game shouldn't be degenerate.\n\n```\nA = [[1, 0], [0, 1], [0, 0]]\nB = [[1, 0], [0, 1], [0.7, 0.8]]\ng = NormalFormGame([A, B])\ng.is_degenerate()\nTrue\n```\n\nYou could try plotting the upper envelope diagrams on http://www.maths.lse.ac.uk/personal/stengel/UpperEnv.swf to see this.",
    "created_at": "2015-06-22T10:59:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18712#issuecomment-267228",
    "user": "https://github.com/ptigwe"
}
```

<a id='comment:5'></a>Unless if I've gone wrong some where, the following game shouldn't be degenerate.

```
A = [[1, 0], [0, 1], [0, 0]]
B = [[1, 0], [0, 1], [0.7, 0.8]]
g = NormalFormGame([A, B])
g.is_degenerate()
True
```

You could try plotting the upper envelope diagrams on http://www.maths.lse.ac.uk/personal/stengel/UpperEnv.swf to see this.



---

archive/issue_comments_267229.json:
```json
{
    "body": "<a id='comment:6'></a>i'll look into it now",
    "created_at": "2015-06-22T11:01:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18712#issuecomment-267229",
    "user": "https://github.com/theref"
}
```

<a id='comment:6'></a>i'll look into it now



---

archive/issue_comments_267230.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2015-06-26T16:33:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18712#issuecomment-267230",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_267231.json:
```json
{
    "body": "<a id='comment:8'></a>This is now ready for review. It involved a bit of work to figure out how to change the search over all mixed strategies to one over supports. We wrote the idea up here: http://vknight.org/unpeudemath/code/2015/06/25/on_testing_degeneracy_of_games/\n\nIt would be nice to reorganise the method in to a separate file but this could potentially be left to #18609 http://trac.sagemath.org/ticket/18609 and there is also a discussion here about reorganising the file structure: https://github.com/theref/sage-game-theory/issues/103",
    "created_at": "2015-06-26T16:37:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18712#issuecomment-267231",
    "user": "https://github.com/drvinceknight"
}
```

<a id='comment:8'></a>This is now ready for review. It involved a bit of work to figure out how to change the search over all mixed strategies to one over supports. We wrote the idea up here: http://vknight.org/unpeudemath/code/2015/06/25/on_testing_degeneracy_of_games/

It would be nice to reorganise the method in to a separate file but this could potentially be left to #18609 http://trac.sagemath.org/ticket/18609 and there is also a discussion here about reorganising the file structure: https://github.com/theref/sage-game-theory/issues/103



---

archive/issue_comments_267232.json:
```json
{
    "body": "<a id='comment:9'></a>I think it might be useful to have a `best_responses` function, which returns the indexes of the best response. So as a result, one could either make a call to this function from `num_best_responses`, or remove it completely as it would become a single line.",
    "created_at": "2015-06-29T11:33:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18712#issuecomment-267232",
    "user": "https://github.com/ptigwe"
}
```

<a id='comment:9'></a>I think it might be useful to have a `best_responses` function, which returns the indexes of the best response. So as a result, one could either make a call to this function from `num_best_responses`, or remove it completely as it would become a single line.



---

archive/issue_comments_267233.json:
```json
{
    "body": "<a id='comment:10'></a>New commits:",
    "created_at": "2015-07-01T08:49:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18712#issuecomment-267233",
    "user": "https://github.com/theref"
}
```

<a id='comment:10'></a>New commits:



---

archive/issue_comments_267234.json:
```json
{
    "body": "<a id='comment:11'></a>Instead of passing the payoff matrix into the `best_response` function, could you make it such that the player index i.e. either 1 or 2 (or 0, 1. I don't remember which is officially used in the documentation or if we actually have a documented indexing of players) is passed in place if the payoff matrix. This way you can then retrieve the payoff matrix from the given player. Next, could you make this function locked to two players.",
    "created_at": "2015-07-01T14:51:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18712#issuecomment-267234",
    "user": "https://github.com/ptigwe"
}
```

<a id='comment:11'></a>Instead of passing the payoff matrix into the `best_response` function, could you make it such that the player index i.e. either 1 or 2 (or 0, 1. I don't remember which is officially used in the documentation or if we actually have a documented indexing of players) is passed in place if the payoff matrix. This way you can then retrieve the payoff matrix from the given player. Next, could you make this function locked to two players.



---

archive/issue_comments_267235.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:11 ptigwe]:\n> Instead of passing the payoff matrix into the `best_response` function, could you make it such that the player index i.e. either 1 or 2 (or 0, 1. I don't remember which is officially used in the documentation or if we actually have a documented indexing of players) is passed in place if the payoff matrix. This way you can then retrieve the payoff matrix from the given player. Next, could you make this function locked to two players.\n\n\nHave implemented this: went for 0,1 indexing although this is not documented as such. Everything is documented with examples. Furthermore I added exception handling for games with more than 2 players and also handling certain bad strategy vectors.\n\nI've also changed some of the documentation slightly to make use of the normal form game catalog that is now in `develop` (see #17392).\n\n---\nNew commits:",
    "created_at": "2015-07-05T14:53:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18712#issuecomment-267235",
    "user": "https://github.com/drvinceknight"
}
```

<a id='comment:12'></a>Replying to [comment:11 ptigwe]:
> Instead of passing the payoff matrix into the `best_response` function, could you make it such that the player index i.e. either 1 or 2 (or 0, 1. I don't remember which is officially used in the documentation or if we actually have a documented indexing of players) is passed in place if the payoff matrix. This way you can then retrieve the payoff matrix from the given player. Next, could you make this function locked to two players.


Have implemented this: went for 0,1 indexing although this is not documented as such. Everything is documented with examples. Furthermore I added exception handling for games with more than 2 players and also handling certain bad strategy vectors.

I've also changed some of the documentation slightly to make use of the normal form game catalog that is now in `develop` (see #17392).

---
New commits:



---

archive/issue_comments_267236.json:
```json
{
    "body": "<a id='comment:13'></a>In the examples for the `best_responses` function, the second example for the second player actually calculates the best response for the first player.\n\n```\nsage: g.best_responses((1/2, 1/2), player=0)\n```\n\nAlso, I think a value error should be raised when `player` is greater than 1. Currently the following happens.\n\n```\ng = NormalFormGame([matrix.identity(3)])\ng.best_responses([1, 0, 0], 2)\n.....\nUnboundLocalError: local variable 'payoff_matrix' referenced before assignment\n```",
    "created_at": "2015-07-07T11:34:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18712#issuecomment-267236",
    "user": "https://github.com/ptigwe"
}
```

<a id='comment:13'></a>In the examples for the `best_responses` function, the second example for the second player actually calculates the best response for the first player.

```
sage: g.best_responses((1/2, 1/2), player=0)
```

Also, I think a value error should be raised when `player` is greater than 1. Currently the following happens.

```
g = NormalFormGame([matrix.identity(3)])
g.best_responses([1, 0, 0], 2)
.....
UnboundLocalError: local variable 'payoff_matrix' referenced before assignment
```



---

archive/issue_comments_267237.json:
```json
{
    "body": "<a id='comment:14'></a>New commits:",
    "created_at": "2015-07-08T10:34:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18712#issuecomment-267237",
    "user": "https://github.com/theref"
}
```

<a id='comment:14'></a>New commits:



---

archive/issue_comments_267238.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-28T08:05:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18712#issuecomment-267238",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_267239.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-28T10:11:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18712#issuecomment-267239",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_267240.json:
```json
{
    "body": "<a id='comment:17'></a>New commits:",
    "created_at": "2015-07-28T10:53:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18712#issuecomment-267240",
    "user": "https://github.com/drvinceknight"
}
```

<a id='comment:17'></a>New commits:



---

archive/issue_comments_267241.json:
```json
{
    "body": "<a id='comment:18'></a>Have tested and documentation builds.",
    "created_at": "2015-07-28T10:54:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18712#issuecomment-267241",
    "user": "https://github.com/drvinceknight"
}
```

<a id='comment:18'></a>Have tested and documentation builds.



---

archive/issue_comments_267242.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-28T10:56:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18712#issuecomment-267242",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_267243.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-07-28T11:04:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18712#issuecomment-267243",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_267244.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-07-28T18:40:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18712#issuecomment-267244",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_267245.json:
```json
{
    "body": "<a id='comment:21'></a>author & reviewer name",
    "created_at": "2015-07-28T18:40:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18712#issuecomment-267245",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:21'></a>author & reviewer name



---

archive/issue_comments_267246.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-07-28T18:43:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18712#issuecomment-267246",
    "user": "https://github.com/drvinceknight"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_267247.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-08-20T17:06:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18712#issuecomment-267247",
    "user": "https://github.com/drvinceknight"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_052414.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-08-21T01:56:11Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18712",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18712#event-52414"
}
```



---

archive/issue_comments_267248.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-08-21T01:56:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18712",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18712#issuecomment-267248",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
