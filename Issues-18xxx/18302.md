# Issue 18302: faster matroid 3 connectivity

archive/issues_018302.json:
```json
{
    "body": "Assignee: @chaoxu\n\nCC:  stefan yomcat rudi\n\nImplement the efficient 3 connectivity algorithm.\n\nR. E. Bixby, W. H. Cunningham, Matroids, Graphs, and 3-Connectivity. In Graph theory and related topics (Proc. Conf., Univ. Waterloo, Waterloo, ON, 1977), 91-103\n\nIssue created by migration from https://trac.sagemath.org/ticket/18539\n\n",
    "closed_at": "2015-06-19T08:25:01Z",
    "created_at": "2015-05-28T20:34:07Z",
    "labels": [
        "component: matroid theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "faster matroid 3 connectivity",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18302",
    "user": "https://github.com/chaoxu"
}
```
Assignee: @chaoxu

CC:  stefan yomcat rudi

Implement the efficient 3 connectivity algorithm.

R. E. Bixby, W. H. Cunningham, Matroids, Graphs, and 3-Connectivity. In Graph theory and related topics (Proc. Conf., Univ. Waterloo, Waterloo, ON, 1977), 91-103

Issue created by migration from https://trac.sagemath.org/ticket/18539





---

archive/issue_comments_247732.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2015-05-28T20:40:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247732",
    "user": "https://github.com/chaoxu"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_247733.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to matroid theory.",
    "created_at": "2015-05-28T20:40:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247733",
    "user": "https://github.com/chaoxu"
}
```

Changing component from PLEASE CHANGE to matroid theory.



---

archive/issue_comments_247734.json:
```json
{
    "body": "Set assignee to @chaoxu.",
    "created_at": "2015-05-28T20:40:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247734",
    "user": "https://github.com/chaoxu"
}
```

Set assignee to @chaoxu.



---

archive/issue_comments_247735.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-05-28T20:40:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247735",
    "user": "https://github.com/chaoxu"
}
```

New commits:



---

archive/issue_comments_247736.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-28T21:00:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247736",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_247737.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-30T04:59:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247737",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_247738.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-30T06:21:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247738",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_247739.json:
```json
{
    "body": "Running the following code shows the new implementation matches the current behavior on named matroids.\n\n```\ndef test(M): \n\treturn M.is_3connected_beta()==M.is_3connected()\nresults = []\nfor M in matroids.named_matroids.__dict__.values():\n    if callable(M):\n        results.append(test(M()))\nall(results)\n```\n\nI will generate some larger examples to test the running time and start optimizing.\n\nFor the base case, I need to access Uniform(r,n). A direct import seems to cause circular dependency. If I use\n\n```\nfrom sage.matroids.catalog import Uniform\n# some code that calls Uniform(r,n)\n```\n\nthen the error `ImportError: cannot import name Uniform` appears during runtime.\nSomehow using `from sage.matroids.catalog import *` and write `sage.matroids.catalog.Uniform(r,n)` for every call works out. I wonder if there are better ways.",
    "created_at": "2015-05-30T06:46:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247739",
    "user": "https://github.com/chaoxu"
}
```

Running the following code shows the new implementation matches the current behavior on named matroids.

```
def test(M): 
	return M.is_3connected_beta()==M.is_3connected()
results = []
for M in matroids.named_matroids.__dict__.values():
    if callable(M):
        results.append(test(M()))
all(results)
```

I will generate some larger examples to test the running time and start optimizing.

For the base case, I need to access Uniform(r,n). A direct import seems to cause circular dependency. If I use

```
from sage.matroids.catalog import Uniform
# some code that calls Uniform(r,n)
```

then the error `ImportError: cannot import name Uniform` appears during runtime.
Somehow using `from sage.matroids.catalog import *` and write `sage.matroids.catalog.Uniform(r,n)` for every call works out. I wonder if there are better ways.



---

archive/issue_comments_247740.json:
```json
{
    "body": "Replying to [comment:8 chaoxu]:\n\n> For the base case, I need to access Uniform(r,n). A direct import seems to cause circular dependency. If I use\n> \n> \n> ```\n> from sage.matroids.catalog import Uniform\n> # some code that calls Uniform(r,n)\n> ```\n> \n> then the error `ImportError: cannot import name Uniform` appears during runtime.\n> Somehow using `from sage.matroids.catalog import *` and write `sage.matroids.catalog.Uniform(r,n)` for every call works out. I wonder if there are better ways.\n\nA matroid of rank 1 is uniform if and only if it has no loops, and dually a matroid of corank 1 is uniform iff it has no coloops.  So you could also replace your test\n\n```\n     if (self.size() <= 1 or\n            self.is_isomorphic(sage.matroids.catalog.Uniform(1,2)) or\n            self.is_isomorphic(sage.matroids.catalog.Uniform(1,3)) or\n            self.is_isomorphic(sage.matroids.catalog.Uniform(2,3))):\n            return True\n```\nwith this simpler one\n\n```\n     if self.size() <= 1:\n            return True\n     if self.size() <= 3 and self.full_rank()==1 and not self.loops():\n            return True\n     if self.size() <= 3 and self.full_corank()==1 and not self.coloops():\n            return True\n```",
    "created_at": "2015-05-30T09:54:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247740",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Replying to [comment:8 chaoxu]:

> For the base case, I need to access Uniform(r,n). A direct import seems to cause circular dependency. If I use
> 
> 
> ```
> from sage.matroids.catalog import Uniform
> # some code that calls Uniform(r,n)
> ```
> 
> then the error `ImportError: cannot import name Uniform` appears during runtime.
> Somehow using `from sage.matroids.catalog import *` and write `sage.matroids.catalog.Uniform(r,n)` for every call works out. I wonder if there are better ways.

A matroid of rank 1 is uniform if and only if it has no loops, and dually a matroid of corank 1 is uniform iff it has no coloops.  So you could also replace your test

```
     if (self.size() <= 1 or
            self.is_isomorphic(sage.matroids.catalog.Uniform(1,2)) or
            self.is_isomorphic(sage.matroids.catalog.Uniform(1,3)) or
            self.is_isomorphic(sage.matroids.catalog.Uniform(2,3))):
            return True
```
with this simpler one

```
     if self.size() <= 1:
            return True
     if self.size() <= 3 and self.full_rank()==1 and not self.loops():
            return True
     if self.size() <= 3 and self.full_corank()==1 and not self.coloops():
            return True
```



---

archive/issue_comments_247741.json:
```json
{
    "body": "While I agree that Rudi's method is better (isomorphism testing is VERY expensive), let's look at the import issue too. Was your import inside the method instead of global? You might want to look at the way it was done in, for instance, the _minor method in matroid.pyx. I think you can't do it better than that.",
    "created_at": "2015-05-30T16:51:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247741",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

While I agree that Rudi's method is better (isomorphism testing is VERY expensive), let's look at the import issue too. Was your import inside the method instead of global? You might want to look at the way it was done in, for instance, the _minor method in matroid.pyx. I think you can't do it better than that.



---

archive/issue_comments_247742.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-01T11:45:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247742",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_247743.json:
```json
{
    "body": "Thanks Rudi, I have incorporated your suggestions. It's much faster now. \n\nOne can use the following code to test the running time of the current implementation and the original one. \n\n```\ndef bench(beta=False):\n\tfor M in matroids.named_matroids.__dict__.values():\n  \t\tif callable(M):\n  \t\t\tif beta:\n\t\t\t\tM().is_3connected_beta()\n\t\t\telse:\n\t\t\t\tM().is_3connected()\n```\n\n\n```\nsage: %time bench(False)\nCPU times: user 298 ms, sys: 10.5 ms, total: 309 ms\nWall time: 301 ms\nsage: %time bench(True)\nCPU times: user 36.9 ms, sys: 1.83 ms, total: 38.8 ms\nWall time: 37.5 ms\n```\n\nI also benchmarked on 3-connected binary matroids [listed here](https://groups.google.com/d/msg/sage-matroid/invXwv8SYsE/8tXA2hYUluEJ). The old algorithm takes 925 ms, the new one takes 51 ms. \n\nFor correctness, I will try to see if the original and the new implementation agrees for all matroids with at most 9 elements. (data from [Database of Matroids](http://www-imai.is.s.u-tokyo.ac.jp/~ymatsu/matroid/index.html)).",
    "created_at": "2015-06-01T12:11:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247743",
    "user": "https://github.com/chaoxu"
}
```

Thanks Rudi, I have incorporated your suggestions. It's much faster now. 

One can use the following code to test the running time of the current implementation and the original one. 

```
def bench(beta=False):
	for M in matroids.named_matroids.__dict__.values():
  		if callable(M):
  			if beta:
				M().is_3connected_beta()
			else:
				M().is_3connected()
```


```
sage: %time bench(False)
CPU times: user 298 ms, sys: 10.5 ms, total: 309 ms
Wall time: 301 ms
sage: %time bench(True)
CPU times: user 36.9 ms, sys: 1.83 ms, total: 38.8 ms
Wall time: 37.5 ms
```

I also benchmarked on 3-connected binary matroids [listed here](https://groups.google.com/d/msg/sage-matroid/invXwv8SYsE/8tXA2hYUluEJ). The old algorithm takes 925 ms, the new one takes 51 ms. 

For correctness, I will try to see if the original and the new implementation agrees for all matroids with at most 9 elements. (data from [Database of Matroids](http://www-imai.is.s.u-tokyo.ac.jp/~ymatsu/matroid/index.html)).



---

archive/issue_comments_247744.json:
```json
{
    "body": "all matroids on n<= 9 elements with rank <= n/2",
    "created_at": "2015-06-01T12:58:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247744",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

all matroids on n<= 9 elements with rank <= n/2



---

archive/issue_comments_247745.json:
```json
{
    "body": "Attachment [matroids9_low_rank.sobj](tarball://root/attachments/some-uuid/ticket18539/matroids9_low_rank.sobj) by Rudi created at 2015-06-01 13:15:17\n\nReplying to [comment:12 chaoxu]:\n> One can use the following code to test the running time of the current implementation and the original one. \n> \n> ```\n> sage: %time bench(False)\n> CPU times: user 298 ms, sys: 10.5 ms, total: 309 ms\n> Wall time: 301 ms\n> sage: %time bench(True)\n> CPU times: user 36.9 ms, sys: 1.83 ms, total: 38.8 ms\n> Wall time: 37.5 ms\n> ```\n> \n> I also benchmarked on 3-connected binary matroids [listed here](https://groups.google.com/d/msg/sage-matroid/invXwv8SYsE/8tXA2hYUluEJ). The old algorithm takes 925 ms, the new one takes 51 ms. \n> \n\n\nThat really is very nice work. Cheers! \n\nWhat part of your code is currently using most of the time on these test cases?\n\n\n> For correctness, I will try to see if the original and the new implementation agrees for all matroids with at most 9 elements. (data from [Database of Matroids](http://www-imai.is.s.u-tokyo.ac.jp/~ymatsu/matroid/index.html)).\n\n\nI have attached the set of matroids on at most 9 elements, perhaps that will save you some time translating their data. If you want I can also send the Sage code I used to generate these matroids, just let me know.",
    "created_at": "2015-06-01T13:15:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247745",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Attachment [matroids9_low_rank.sobj](tarball://root/attachments/some-uuid/ticket18539/matroids9_low_rank.sobj) by Rudi created at 2015-06-01 13:15:17

Replying to [comment:12 chaoxu]:
> One can use the following code to test the running time of the current implementation and the original one. 
> 
> ```
> sage: %time bench(False)
> CPU times: user 298 ms, sys: 10.5 ms, total: 309 ms
> Wall time: 301 ms
> sage: %time bench(True)
> CPU times: user 36.9 ms, sys: 1.83 ms, total: 38.8 ms
> Wall time: 37.5 ms
> ```
> 
> I also benchmarked on 3-connected binary matroids [listed here](https://groups.google.com/d/msg/sage-matroid/invXwv8SYsE/8tXA2hYUluEJ). The old algorithm takes 925 ms, the new one takes 51 ms. 
> 


That really is very nice work. Cheers! 

What part of your code is currently using most of the time on these test cases?


> For correctness, I will try to see if the original and the new implementation agrees for all matroids with at most 9 elements. (data from [Database of Matroids](http://www-imai.is.s.u-tokyo.ac.jp/~ymatsu/matroid/index.html)).


I have attached the set of matroids on at most 9 elements, perhaps that will save you some time translating their data. If you want I can also send the Sage code I used to generate these matroids, just let me know.



---

archive/issue_comments_247746.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-01T22:26:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247746",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_247747.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-01T23:56:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247747",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_247748.json:
```json
{
    "body": "Replying to [comment:13 Rudi]:\n\n> I have attached the set of matroids on at most 9 elements, perhaps that will save you some time translating their data.\n\nThanks, that's really helpful. I found a bug and now it have been fixed. Now it works for all test cases. I'm pretty convinced of the correctness.\n\n> What part of your code is currently using most of the time on these test cases?\n\nFor the named cases,  _corank and minor operation taking the most of the time. \nFor the small 3 connected binary matroids, most time was spent on is_circuit, is_cosimple, is_simple.\nFor matroids with large rank (I generated a random rank 500 binary matroid), components take the most time.\nHere is an time breakdown for a rank 500 binary matroid. \n\n```\n         136529 function calls in 18.426 seconds\n\n   Ordered by: internal time\n\n   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\n      501    6.947    0.014   11.109    0.022 matroid.pyx:4477(components)\n   125515    4.162    0.000    4.162    0.000 matroid.pyx:1351(circuit)\n        1    3.968    3.968    3.968    3.968 matroid.pyx:4441(is_cosimple)\n      500    3.216    0.006    3.246    0.006 matroid.pyx:3438(minor)\n        1    0.027    0.027   14.356   14.356 matroid.pyx:4807(_is_3connected_beta)\n     1000    0.026    0.000    0.044    0.000 matroid.pyx:1772(fundamental_cocircuit)\n        1    0.026    0.026    0.026    0.026 matroid.pyx:4408(is_simple)\n     1000    0.014    0.000    0.014    0.000 matroid.pyx:820(_is_basis)\n      500    0.013    0.000    0.013    0.000 {method '_max_coindependent' of 'sage.matroids.basis_exchange_matroid.BasisExchangeMatroid' objects}\n      500    0.005    0.000    0.030    0.000 utilities.py:184(sanitize_contractions_deletions)\n        1    0.005    0.005    0.005    0.005 matroid.pyx:2040(coloops)\n      500    0.005    0.000    0.005    0.000 {method '_max_independent' of 'sage.matroids.basis_exchange_matroid.BasisExchangeMatroid' objects}\n     1000    0.003    0.000    0.017    0.000 matroid.pyx:1887(is_basis)\n     1000    0.003    0.000    0.003    0.000 {method 'issuperset' of 'frozenset' objects}\n     1000    0.002    0.000    0.002    0.000 {method 'difference' of 'frozenset' objects}\n     1000    0.002    0.000    0.002    0.000 {method 'union' of 'frozenset' objects}\n      500    0.001    0.000    3.248    0.006 matroid.pyx:3631(delete)\n      500    0.000    0.000   11.060    0.022 matroid.pyx:4518(is_connected)\n      500    0.000    0.000    0.000    0.000 {method 'isdisjoint' of 'frozenset' objects}\n     1000    0.000    0.000    0.000    0.000 {method 'groundset' of 'sage.matroids.basis_exchange_matroid.BasisExchangeMatroid' objects}\n        1    0.000    0.000    0.000    0.000 matroid.pyx:1811(loops)\n        1    0.000    0.000   18.431   18.431 <string>:1(<module>)\n        1    0.000    0.000   18.431   18.431 {method 'is_3connected_beta' of 'sage.matroids.matroid.Matroid' objects}\n        1    0.000    0.000   18.431   18.431 matroid.pyx:4740(is_3connected_beta)\n        3    0.000    0.000    0.000    0.000 matroid.pyx:1216(size)\n        1    0.000    0.000    0.000    0.000 matroid.pyx:1236(rank)\n        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}\n```\n\nI will get it to return a separator and write some docs for the next update.",
    "created_at": "2015-06-01T23:58:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247748",
    "user": "https://github.com/chaoxu"
}
```

Replying to [comment:13 Rudi]:

> I have attached the set of matroids on at most 9 elements, perhaps that will save you some time translating their data.

Thanks, that's really helpful. I found a bug and now it have been fixed. Now it works for all test cases. I'm pretty convinced of the correctness.

> What part of your code is currently using most of the time on these test cases?

For the named cases,  _corank and minor operation taking the most of the time. 
For the small 3 connected binary matroids, most time was spent on is_circuit, is_cosimple, is_simple.
For matroids with large rank (I generated a random rank 500 binary matroid), components take the most time.
Here is an time breakdown for a rank 500 binary matroid. 

```
         136529 function calls in 18.426 seconds

   Ordered by: internal time

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
      501    6.947    0.014   11.109    0.022 matroid.pyx:4477(components)
   125515    4.162    0.000    4.162    0.000 matroid.pyx:1351(circuit)
        1    3.968    3.968    3.968    3.968 matroid.pyx:4441(is_cosimple)
      500    3.216    0.006    3.246    0.006 matroid.pyx:3438(minor)
        1    0.027    0.027   14.356   14.356 matroid.pyx:4807(_is_3connected_beta)
     1000    0.026    0.000    0.044    0.000 matroid.pyx:1772(fundamental_cocircuit)
        1    0.026    0.026    0.026    0.026 matroid.pyx:4408(is_simple)
     1000    0.014    0.000    0.014    0.000 matroid.pyx:820(_is_basis)
      500    0.013    0.000    0.013    0.000 {method '_max_coindependent' of 'sage.matroids.basis_exchange_matroid.BasisExchangeMatroid' objects}
      500    0.005    0.000    0.030    0.000 utilities.py:184(sanitize_contractions_deletions)
        1    0.005    0.005    0.005    0.005 matroid.pyx:2040(coloops)
      500    0.005    0.000    0.005    0.000 {method '_max_independent' of 'sage.matroids.basis_exchange_matroid.BasisExchangeMatroid' objects}
     1000    0.003    0.000    0.017    0.000 matroid.pyx:1887(is_basis)
     1000    0.003    0.000    0.003    0.000 {method 'issuperset' of 'frozenset' objects}
     1000    0.002    0.000    0.002    0.000 {method 'difference' of 'frozenset' objects}
     1000    0.002    0.000    0.002    0.000 {method 'union' of 'frozenset' objects}
      500    0.001    0.000    3.248    0.006 matroid.pyx:3631(delete)
      500    0.000    0.000   11.060    0.022 matroid.pyx:4518(is_connected)
      500    0.000    0.000    0.000    0.000 {method 'isdisjoint' of 'frozenset' objects}
     1000    0.000    0.000    0.000    0.000 {method 'groundset' of 'sage.matroids.basis_exchange_matroid.BasisExchangeMatroid' objects}
        1    0.000    0.000    0.000    0.000 matroid.pyx:1811(loops)
        1    0.000    0.000   18.431   18.431 <string>:1(<module>)
        1    0.000    0.000   18.431   18.431 {method 'is_3connected_beta' of 'sage.matroids.matroid.Matroid' objects}
        1    0.000    0.000   18.431   18.431 matroid.pyx:4740(is_3connected_beta)
        3    0.000    0.000    0.000    0.000 matroid.pyx:1216(size)
        1    0.000    0.000    0.000    0.000 matroid.pyx:1236(rank)
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}
```

I will get it to return a separator and write some docs for the next update.



---

archive/issue_comments_247749.json:
```json
{
    "body": "Replying to [comment:16 chaoxu]:\n\n> > What part of your code is currently using most of the time on these test cases?\n\n> For the named cases,  _corank and minor operation taking the most of the time. \n> For the small 3 connected binary matroids, most time was spent on is_circuit, is_cosimple, is_simple.\n> For matroids with large rank (I generated a random rank 500 binary matroid), components take the most time.\n> Here is an time breakdown for a rank 500 binary matroid. \n> \n\n\nThanks for sending that data. The many calls to circuits() are probably happening in the Matroids.components() routine. I think I may have written that routine, and looks as if I did not really optimize it for speed.\n- the method calls .circuit() in it's innermost loop, and then the use of _circuit() is preferred. The underscored versions of Matroid methods do the same as the original, but without the sanity checking of the input (in this case, testing if the input is a set of elements from the ground set). \n- `circuit()` is used to get a fundamental circuit, and I think we later created that optimized method for that: `fundamental_circuit`\n \nSo the following tweaks to `components()` may make a difference.\n\n```\n        B = self.basis()\n        components = []\n        for e in self.groundset() - B:\n            C = set(self._fundamental_cocircuit(B,e))\n            components2 = []\n            for comp in components:\n                if (C & comp):\n                    C.update(comp)\n                else:\n                    components2.append(comp)\n            components2.append(frozenset(C))\n            components = components2\n        components.extend([frozenset([e]) for e in self.loops()])\n        return components\n```\nYou could also consider rewriting a bit more, use the above when `r(M) <= r^*(M)`  and the dual version (circuits) in the other case. That way the inner loop always has the least number of iterations. And if this routine really stays a bottleneck, a bitpacked version is always an option.\n\nSince your routine is_3connected_beta also computes fundamental cocircuits, you would also gain a bit by using the unguarded _fundamental_cocircuit. It is perhaps wasteful to compute those fundamental cocircuits again in `components` and indirectly, in  `is_connected`. You could consider rewriting these routines so that they take a set of fundamental circuits and/or a set of fundamental cociruits as input. Note that if Y is a fundamental cocircuit as in step 2, then the fundamental cocircuits of self.delete(Y) are obtained by deleting Y from the other fundamental cocircuits of self. So you could even avoid creating self.delete(Y) in step 2.  \n\nIt is very, very strange indeed that a single call to `is_cosimple` takes that much time. I cannot explain how it can take any more time than is_simple. I'll look into it.\n\nA quicker method to create the parallel class of e is: \n\n```\nparallel_class = M._closure([e])\n```\n\nThe minor-taking/deletion is also expensive in your method. Improving the inefficiency of `minor` itself is probably more involved, and this would really deserve it's own ticket. It may be possible to reduce the number of times you construct a minor, e.g. by testing the rank of the minor before actually constructing it.",
    "created_at": "2015-06-02T08:28:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247749",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Replying to [comment:16 chaoxu]:

> > What part of your code is currently using most of the time on these test cases?

> For the named cases,  _corank and minor operation taking the most of the time. 
> For the small 3 connected binary matroids, most time was spent on is_circuit, is_cosimple, is_simple.
> For matroids with large rank (I generated a random rank 500 binary matroid), components take the most time.
> Here is an time breakdown for a rank 500 binary matroid. 
> 


Thanks for sending that data. The many calls to circuits() are probably happening in the Matroids.components() routine. I think I may have written that routine, and looks as if I did not really optimize it for speed.
- the method calls .circuit() in it's innermost loop, and then the use of _circuit() is preferred. The underscored versions of Matroid methods do the same as the original, but without the sanity checking of the input (in this case, testing if the input is a set of elements from the ground set). 
- `circuit()` is used to get a fundamental circuit, and I think we later created that optimized method for that: `fundamental_circuit`
 
So the following tweaks to `components()` may make a difference.

```
        B = self.basis()
        components = []
        for e in self.groundset() - B:
            C = set(self._fundamental_cocircuit(B,e))
            components2 = []
            for comp in components:
                if (C & comp):
                    C.update(comp)
                else:
                    components2.append(comp)
            components2.append(frozenset(C))
            components = components2
        components.extend([frozenset([e]) for e in self.loops()])
        return components
```
You could also consider rewriting a bit more, use the above when `r(M) <= r^*(M)`  and the dual version (circuits) in the other case. That way the inner loop always has the least number of iterations. And if this routine really stays a bottleneck, a bitpacked version is always an option.

Since your routine is_3connected_beta also computes fundamental cocircuits, you would also gain a bit by using the unguarded _fundamental_cocircuit. It is perhaps wasteful to compute those fundamental cocircuits again in `components` and indirectly, in  `is_connected`. You could consider rewriting these routines so that they take a set of fundamental circuits and/or a set of fundamental cociruits as input. Note that if Y is a fundamental cocircuit as in step 2, then the fundamental cocircuits of self.delete(Y) are obtained by deleting Y from the other fundamental cocircuits of self. So you could even avoid creating self.delete(Y) in step 2.  

It is very, very strange indeed that a single call to `is_cosimple` takes that much time. I cannot explain how it can take any more time than is_simple. I'll look into it.

A quicker method to create the parallel class of e is: 

```
parallel_class = M._closure([e])
```

The minor-taking/deletion is also expensive in your method. Improving the inefficiency of `minor` itself is probably more involved, and this would really deserve it's own ticket. It may be possible to reduce the number of times you construct a minor, e.g. by testing the rank of the minor before actually constructing it.



---

archive/issue_comments_247750.json:
```json
{
    "body": "Hi Chao,\n\nsomehow the inefficiency of components() became a major earworm for me today, so I coded a more efficient version for BasisExchangeMatroid (ticket #18591) to get it out of my system. The real inefficiency turned out to be in the set union operations, and calculating with bitsets rather than python sets works miracles for that. \n\nI also felt a bit bad for luring you into my bad habits of premature code optimization, but by just using my patch you can stay focussed on testing correctness and enhancing functionality, which is probably better.\n\nI realized why is_cosimple() is that much slower than is_simple() for BinaryMatroids (and Ternary and Quaternary). There is a specialized ultra fast method to get a fundamental cocircuit for such matroids, essentially copying the row of a bitpacked matrix (which is a bitset) into another bitset, which is the internal representation of the cocircuit. For circuits you are back to touching each of the groundset elements one by one, which is way slower. This asymmetry makes closure() faster that coclosure, and in turn is_simple faster than is_cosimple. I still need to see what is a clean way to solve that.\n\nRudi",
    "created_at": "2015-06-02T21:23:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247750",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Hi Chao,

somehow the inefficiency of components() became a major earworm for me today, so I coded a more efficient version for BasisExchangeMatroid (ticket #18591) to get it out of my system. The real inefficiency turned out to be in the set union operations, and calculating with bitsets rather than python sets works miracles for that. 

I also felt a bit bad for luring you into my bad habits of premature code optimization, but by just using my patch you can stay focussed on testing correctness and enhancing functionality, which is probably better.

I realized why is_cosimple() is that much slower than is_simple() for BinaryMatroids (and Ternary and Quaternary). There is a specialized ultra fast method to get a fundamental cocircuit for such matroids, essentially copying the row of a bitpacked matrix (which is a bitset) into another bitset, which is the internal representation of the cocircuit. For circuits you are back to touching each of the groundset elements one by one, which is way slower. This asymmetry makes closure() faster that coclosure, and in turn is_simple faster than is_cosimple. I still need to see what is a clean way to solve that.

Rudi



---

archive/issue_comments_247751.json:
```json
{
    "body": "Replying to [comment:18 Rudi]:\n\n> The real inefficiency turned out to be in the set union operations, and calculating with bitsets rather than python sets works miracles for that. \n\n\nGreat. Thanks I will review that code soon.\nWhat is the abstract way to find components from a set of fundamental cocircuits?\nThis code didn't return the same output as the original components.\n \n```\n       B = self.basis()\n        components = []\n        for e in self.groundset() - B:\n            C = set(self._fundamental_cocircuit(B,e))\n            components2 = []\n            for comp in components:\n                if (C & comp):\n                    C.update(comp)\n                else:\n                    components2.append(comp)\n            components2.append(frozenset(C))\n            components = components2\n        components.extend([frozenset([e]) for e in self.loops()])\n        return components\n```",
    "created_at": "2015-06-02T21:34:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247751",
    "user": "https://github.com/chaoxu"
}
```

Replying to [comment:18 Rudi]:

> The real inefficiency turned out to be in the set union operations, and calculating with bitsets rather than python sets works miracles for that. 


Great. Thanks I will review that code soon.
What is the abstract way to find components from a set of fundamental cocircuits?
This code didn't return the same output as the original components.
 
```
       B = self.basis()
        components = []
        for e in self.groundset() - B:
            C = set(self._fundamental_cocircuit(B,e))
            components2 = []
            for comp in components:
                if (C & comp):
                    C.update(comp)
                else:
                    components2.append(comp)
            components2.append(frozenset(C))
            components = components2
        components.extend([frozenset([e]) for e in self.loops()])
        return components
```



---

archive/issue_comments_247752.json:
```json
{
    "body": "Replying to [comment:19 chaoxu]:\n> This code didn't return the same output as the original components.\n\n>\nIt should be:  \n\n```\n           for e in B:\n           C = set(self._fundamental_cocircuit(B,e))\n```\nor \n\n```\n           for e in self.groundset() - B:\n           C = set(self._fundamental_circuit(B,e))\n```\nI mixed them up.\n>What is the abstract way to find components from a set of fundamental cocircuits?\n\nConsider the hypergraph H whose ground set is E(M) and whose edges are the fundamental cocircuits of M relative to a fixed basis B. Then the components of H are the components of M.",
    "created_at": "2015-06-02T21:45:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247752",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Replying to [comment:19 chaoxu]:
> This code didn't return the same output as the original components.

>
It should be:  

```
           for e in B:
           C = set(self._fundamental_cocircuit(B,e))
```
or 

```
           for e in self.groundset() - B:
           C = set(self._fundamental_circuit(B,e))
```
I mixed them up.
>What is the abstract way to find components from a set of fundamental cocircuits?

Consider the hypergraph H whose ground set is E(M) and whose edges are the fundamental cocircuits of M relative to a fixed basis B. Then the components of H are the components of M.



---

archive/issue_comments_247753.json:
```json
{
    "body": "Hi Chao,\n\nI have reduced the amount of time spent on is_cosimple() as well, see ticket #18605. Together with the patch for components() this leaves minor() as the main bottleneck. Not so sure if I can make that one much more efficient. \n\n\nLooking at the effect of my patches on various types of matroids I ran into a bug. Try this:\n\n```\nsage: M=Matroid(graphs.RandomRegular(3,200))\nsage: M.is_3connected_beta()\n```\nIt's random, but nearly always results in a error.",
    "created_at": "2015-06-04T20:01:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247753",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Hi Chao,

I have reduced the amount of time spent on is_cosimple() as well, see ticket #18605. Together with the patch for components() this leaves minor() as the main bottleneck. Not so sure if I can make that one much more efficient. 


Looking at the effect of my patches on various types of matroids I ran into a bug. Try this:

```
sage: M=Matroid(graphs.RandomRegular(3,200))
sage: M.is_3connected_beta()
```
It's random, but nearly always results in a error.



---

archive/issue_comments_247754.json:
```json
{
    "body": "Hi Chao,\n\nthere is an import `from sage.matroids.catalog import *` in your `matroid.pyx` which causes errors and breaks the doctest (my guess is this is probably due to circular imports). You don't seem to need this import anymore since you stopped checking isomorphism with uniform matroids, so perhaps it is best if you remove this line.\n\nCheers,\nRudi",
    "created_at": "2015-06-06T11:54:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247754",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Hi Chao,

there is an import `from sage.matroids.catalog import *` in your `matroid.pyx` which causes errors and breaks the doctest (my guess is this is probably due to circular imports). You don't seem to need this import anymore since you stopped checking isomorphism with uniform matroids, so perhaps it is best if you remove this line.

Cheers,
Rudi



---

archive/issue_comments_247755.json:
```json
{
    "body": "Hi Chao,\n\nI worked a bit on _minor(), a patch is in ticket #18660. Together with #18638 and #18605 that will probably take the time needed to solve your 500x1000 binary matroid to below 1 second.\n\nIt should be possible to make your method another ~5x faster, seeing that essentially all the work is happening in Step 2. It is possible to eliminate all the minor-taking from that part of your method. The set of fundamental circuits by itself is enough to detect that disconnecting cocircuit, and so a routine which solves that problem using bitpacked fundamental cocircuits could do all that in about the time now spent on components().  I will perhaps write such a specialised routine once your code is in final form, in a follow-up ticket.\n\nCheers,\nRudi",
    "created_at": "2015-06-11T12:35:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247755",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Hi Chao,

I worked a bit on _minor(), a patch is in ticket #18660. Together with #18638 and #18605 that will probably take the time needed to solve your 500x1000 binary matroid to below 1 second.

It should be possible to make your method another ~5x faster, seeing that essentially all the work is happening in Step 2. It is possible to eliminate all the minor-taking from that part of your method. The set of fundamental circuits by itself is enough to detect that disconnecting cocircuit, and so a routine which solves that problem using bitpacked fundamental cocircuits could do all that in about the time now spent on components().  I will perhaps write such a specialised routine once your code is in final form, in a follow-up ticket.

Cheers,
Rudi



---

archive/issue_comments_247756.json:
```json
{
    "body": "Hi Rudi,\n\nThis is great news, I will take a look.\n\nWe could create a function that finds the components of a hypergraph given the edges. Then both components() and the code in Step 2 can just call that function.",
    "created_at": "2015-06-11T17:24:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247756",
    "user": "https://github.com/chaoxu"
}
```

Hi Rudi,

This is great news, I will take a look.

We could create a function that finds the components of a hypergraph given the edges. Then both components() and the code in Step 2 can just call that function.



---

archive/issue_comments_247757.json:
```json
{
    "body": "Replying to [comment:24 chaoxu]:\n> We could create a function that finds the components of a hypergraph given the edges. Then both components() and the code in Step 2 can just call that function. \n\n\nThat is true, and it would not be that much work either to make such a more elementary function for SetSystem. But I'm afraid that just filling these hypergraphs with python sets may become the bottleneck. But maybe if I also write a routine for SetSystem to delete a fixed subset from all subsets in the system. \n\nI'll whip something up.",
    "created_at": "2015-06-11T19:19:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247757",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Replying to [comment:24 chaoxu]:
> We could create a function that finds the components of a hypergraph given the edges. Then both components() and the code in Step 2 can just call that function. 


That is true, and it would not be that much work either to make such a more elementary function for SetSystem. But I'm afraid that just filling these hypergraphs with python sets may become the bottleneck. But maybe if I also write a routine for SetSystem to delete a fixed subset from all subsets in the system. 

I'll whip something up.



---

archive/issue_comments_247758.json:
```json
{
    "body": "I wrote .is_connected() for SetSystem here #18682, and it seems to work, have look. But looking at the timings just this one command may not be enough for what you need. The connectivity routine is fast enough, but filling the SetSystems may not be. Or maybe you can experiment with it a bit. \n\nIf not enough, what exactly would suffice for your purposes? A method component(e) (to compute the component containing e) and a method to restrict all subsets to a given subset?",
    "created_at": "2015-06-11T20:13:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247758",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

I wrote .is_connected() for SetSystem here #18682, and it seems to work, have look. But looking at the timings just this one command may not be enough for what you need. The connectivity routine is fast enough, but filling the SetSystems may not be. Or maybe you can experiment with it a bit. 

If not enough, what exactly would suffice for your purposes? A method component(e) (to compute the component containing e) and a method to restrict all subsets to a given subset?



---

archive/issue_comments_247759.json:
```json
{
    "body": "It's fairly strange that filling in the SetSystem takes that long... I will check if it can be optimized.\n\n> If not enough, what exactly would suffice for your purposes? A method component(e) (to compute the component containing e) and a method to restrict all subsets to a given subset?\n\n\nYes. But instead of component(e), components() is enough, since we have to iterate over all components if it's not connected.",
    "created_at": "2015-06-11T21:07:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247759",
    "user": "https://github.com/chaoxu"
}
```

It's fairly strange that filling in the SetSystem takes that long... I will check if it can be optimized.

> If not enough, what exactly would suffice for your purposes? A method component(e) (to compute the component containing e) and a method to restrict all subsets to a given subset?


Yes. But instead of component(e), components() is enough, since we have to iterate over all components if it's not connected.



---

archive/issue_comments_247760.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-11T23:59:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247760",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_247761.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-06-12T00:25:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247761",
    "user": "https://github.com/chaoxu"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_247762.json:
```json
{
    "body": "This is the completed code for bridge based 3-connectivity algorithm.\n\nIt doesn't return a separator. (The ticket:18687 will implement an alternative algorithm that returns a separator).",
    "created_at": "2015-06-12T00:25:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247762",
    "user": "https://github.com/chaoxu"
}
```

This is the completed code for bridge based 3-connectivity algorithm.

It doesn't return a separator. (The ticket:18687 will implement an alternative algorithm that returns a separator).



---

archive/issue_comments_247763.json:
```json
{
    "body": "Hi Chao,\n\nI don't think I should be reviewing your code since Stefan is your mentor on the gsoc project, but I can help a little. \n\nSo I tested your code to see if it would detect a separation if it exist, using the following:\n\n```\ndef binary_matroid_with_2_separation(r,n):\n    A=MatrixSpace(GF(2),r,n).random_element()\n    s = ZZ.random_element(2,r-3)\n    m = ZZ.random_element(2,n-2)\n    for i in range(s+1, r):\n        for j in range(m):\n            A[i,j] =0\n    for i in range(s):\n        for j in range(m, n):\n            A[i,j] =0        \n    return Matroid(A)\n```\nand \n\n```\nfor i in range(10000):\n    r=ZZ.random_element(6,20)\n    n=ZZ.random_element(r+6, 5*r)\n    M = binary_matroid_with_2_separation(20,50)\n    if M.is_3connected():\n        print M\n        break\n```\nYour code seems to withstand such testing all the time.\n\nCheers,\nRudi",
    "created_at": "2015-06-15T09:13:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247763",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Hi Chao,

I don't think I should be reviewing your code since Stefan is your mentor on the gsoc project, but I can help a little. 

So I tested your code to see if it would detect a separation if it exist, using the following:

```
def binary_matroid_with_2_separation(r,n):
    A=MatrixSpace(GF(2),r,n).random_element()
    s = ZZ.random_element(2,r-3)
    m = ZZ.random_element(2,n-2)
    for i in range(s+1, r):
        for j in range(m):
            A[i,j] =0
    for i in range(s):
        for j in range(m, n):
            A[i,j] =0        
    return Matroid(A)
```
and 

```
for i in range(10000):
    r=ZZ.random_element(6,20)
    n=ZZ.random_element(r+6, 5*r)
    M = binary_matroid_with_2_separation(20,50)
    if M.is_3connected():
        print M
        break
```
Your code seems to withstand such testing all the time.

Cheers,
Rudi



---

archive/issue_comments_247764.json:
```json
{
    "body": "Rudi, feel free to review any GSoC tickets.\n\nFWIW, here's a slightly more generic test where the 2-separation is a truly random partition:\n\n```\ndef test_3c(n,m):\n    A = Matrix(GF(2), n, m)\n    k = ZZ.random_element(n)\n    R = set([ZZ.random_element(n) for i in range(k)])\n    k = ZZ.random_element(m)\n    C = set([ZZ.random_element(m) for i in range(k)])\n    if len(R) + m - len(C) < 2 or len(C) + n - len(R) < 2:\n        print \"boundary case\"\n        return False\n    #  Rank-1 submatrix indexed by R, C\n    Rs = {x: ZZ.random_element(2) for x in R}\n    Cs = {x: ZZ.random_element(2) for x in C}\n    for i in range(n):\n        for j in range(m):\n            if i in R and j in C:\n                A[i,j] = Rs[i] * Cs[j]\n            elif i in R or j in C:\n                A[i,j] = ZZ.random_element(2)\n            else:\n                A[i,j] = 0\n    return Matroid(field=GF(2), reduced_matrix=A).is_3connected()\n```\nwhich I ran a bunch of times:\n\n```\n%time\nfor n in range(10,20):\n    for m in range(15,25):\n        for k in range(1000):\n            if test_3c(n,m):\n                print \"Whoops\"\nprint \"ok\"\n```\nTook under 36 seconds on my laptop.\n\nNow, for the review of this ticket.\n\n* You removed the optional argument to is_3connected. When I told you not to implement it at this point, I didn't realize the argument was already there. For now, I would say you have a second helper method (something like _is_3connected_naive) that does the old, brute-force thing. You can't just remove functionality from Sage without a deprecation period.\n* Every method, even the hidden ones, needs an EXAMPLES:: section for testing purposes. The code snippets in that section are run and compared against the provided output for every new release of Sage. This ensures everything keeps working as it should. You can run those tests with `./sage -t src/sage/matroids/*.py*` from the Sage home directory. You can test if your code satisfies the requirements by running `./sage -coverage src/sage/matroids/*.py*`\n* The helper function does not need a \"SEEALSO\" section, but it DOES need an explicit description of assumptions on the instances for which it is invoked (simple, at least 4 elements, etc.)\n* The comment in line 4727 is confusing\n* In line 4730, why do you make a copy?\n* Maybe name the helper function _is_3connected_BC to indicate which algorithm it implements? That way, we can also have an _is_3connected_shifting version.\n\nApart from that, the code looks clean. If you make these changes, it can get a positive review.",
    "created_at": "2015-06-15T20:27:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247764",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

Rudi, feel free to review any GSoC tickets.

FWIW, here's a slightly more generic test where the 2-separation is a truly random partition:

```
def test_3c(n,m):
    A = Matrix(GF(2), n, m)
    k = ZZ.random_element(n)
    R = set([ZZ.random_element(n) for i in range(k)])
    k = ZZ.random_element(m)
    C = set([ZZ.random_element(m) for i in range(k)])
    if len(R) + m - len(C) < 2 or len(C) + n - len(R) < 2:
        print "boundary case"
        return False
    #  Rank-1 submatrix indexed by R, C
    Rs = {x: ZZ.random_element(2) for x in R}
    Cs = {x: ZZ.random_element(2) for x in C}
    for i in range(n):
        for j in range(m):
            if i in R and j in C:
                A[i,j] = Rs[i] * Cs[j]
            elif i in R or j in C:
                A[i,j] = ZZ.random_element(2)
            else:
                A[i,j] = 0
    return Matroid(field=GF(2), reduced_matrix=A).is_3connected()
```
which I ran a bunch of times:

```
%time
for n in range(10,20):
    for m in range(15,25):
        for k in range(1000):
            if test_3c(n,m):
                print "Whoops"
print "ok"
```
Took under 36 seconds on my laptop.

Now, for the review of this ticket.

* You removed the optional argument to is_3connected. When I told you not to implement it at this point, I didn't realize the argument was already there. For now, I would say you have a second helper method (something like _is_3connected_naive) that does the old, brute-force thing. You can't just remove functionality from Sage without a deprecation period.
* Every method, even the hidden ones, needs an EXAMPLES:: section for testing purposes. The code snippets in that section are run and compared against the provided output for every new release of Sage. This ensures everything keeps working as it should. You can run those tests with `./sage -t src/sage/matroids/*.py*` from the Sage home directory. You can test if your code satisfies the requirements by running `./sage -coverage src/sage/matroids/*.py*`
* The helper function does not need a "SEEALSO" section, but it DOES need an explicit description of assumptions on the instances for which it is invoked (simple, at least 4 elements, etc.)
* The comment in line 4727 is confusing
* In line 4730, why do you make a copy?
* Maybe name the helper function _is_3connected_BC to indicate which algorithm it implements? That way, we can also have an _is_3connected_shifting version.

Apart from that, the code looks clean. If you make these changes, it can get a positive review.



---

archive/issue_comments_247765.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-06-15T20:27:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247765",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_247766.json:
```json
{
    "body": "Replying to [comment:31 Stefan]:\n> * Maybe name the helper function _is_3connected_BC to indicate which algorithm it implements? That way, we can also have an _is_3connected_shifting version.\n> \n \nIs this the best way to implement it? Would an optional argument algorithm='??' (that defaults to whichever algorithm ends up being faster) work better?",
    "created_at": "2015-06-16T04:52:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247766",
    "user": "https://trac.sagemath.org/admin/accounts/users/yomcat"
}
```

Replying to [comment:31 Stefan]:
> * Maybe name the helper function _is_3connected_BC to indicate which algorithm it implements? That way, we can also have an _is_3connected_shifting version.
> 
 
Is this the best way to implement it? Would an optional argument algorithm='??' (that defaults to whichever algorithm ends up being faster) work better?



---

archive/issue_comments_247767.json:
```json
{
    "body": "Replying to [comment:32 yomcat]:\n> Would an optional argument algorithm='??' (that defaults to whichever algorithm ends up being faster) work better?\n\nI think such an optional argument would be best. So you would have\n\n is_3connected(certify = False, algorithm = None)\n\nand helper functions \n _is_3_connected_BC(certify = False), your new algorithm, throwing NotImplemented when certify =True\n _is_3_connected_CE(certify = False), the algorithm using matroid intersection you removed (Cunningham - Edmonds?)",
    "created_at": "2015-06-16T10:33:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247767",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Replying to [comment:32 yomcat]:
> Would an optional argument algorithm='??' (that defaults to whichever algorithm ends up being faster) work better?

I think such an optional argument would be best. So you would have

 is_3connected(certify = False, algorithm = None)

and helper functions 
 _is_3_connected_BC(certify = False), your new algorithm, throwing NotImplemented when certify =True
 _is_3_connected_CE(certify = False), the algorithm using matroid intersection you removed (Cunningham - Edmonds?)



---

archive/issue_comments_247768.json:
```json
{
    "body": "Replying to [comment:32 yomcat]:\n> Replying to [comment:31 Stefan]:\n> > * Maybe name the helper function _is_3connected_BC to indicate which algorithm it implements? That way, we can also have an _is_3connected_shifting version.\n> > \n \n> Is this the best way to implement it? Would an optional argument algorithm='??' (that defaults to whichever algorithm ends up being faster) work better?\n\nThe public-facing function would work like you describe, and call one of the private ones either using an internal decision process, or using the algorithm argument. A separate method for each algorithm allows you to do things like recursion (in this case relevant). So I guess we are all on the same page.",
    "created_at": "2015-06-16T13:55:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247768",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

Replying to [comment:32 yomcat]:
> Replying to [comment:31 Stefan]:
> > * Maybe name the helper function _is_3connected_BC to indicate which algorithm it implements? That way, we can also have an _is_3connected_shifting version.
> > 
 
> Is this the best way to implement it? Would an optional argument algorithm='??' (that defaults to whichever algorithm ends up being faster) work better?

The public-facing function would work like you describe, and call one of the private ones either using an internal decision process, or using the algorithm argument. A separate method for each algorithm allows you to do things like recursion (in this case relevant). So I guess we are all on the same page.



---

archive/issue_comments_247769.json:
```json
{
    "body": "The standard name for the certifying argument in the Graph methods is \"certificate\", which I'd use as an alternate to the \"separation\" argument. So the signature would be\n\ncpdef is_3connected(self, certificate=False, algorithm=None, separation=False):\n\nwhere you start with \n\n`certificate = certificate or separation`, and put in a deprecation warning when the \"separation\" argument is set to True.",
    "created_at": "2015-06-16T22:44:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247769",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

The standard name for the certifying argument in the Graph methods is "certificate", which I'd use as an alternate to the "separation" argument. So the signature would be

cpdef is_3connected(self, certificate=False, algorithm=None, separation=False):

where you start with 

`certificate = certificate or separation`, and put in a deprecation warning when the "separation" argument is set to True.



---

archive/issue_comments_247770.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-17T00:33:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247770",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_247771.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-06-17T00:43:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247771",
    "user": "https://github.com/chaoxu"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_247772.json:
```json
{
    "body": "I have made the suggested changes.",
    "created_at": "2015-06-17T00:43:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247772",
    "user": "https://github.com/chaoxu"
}
```

I have made the suggested changes.



---

archive/issue_comments_247773.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-06-17T00:53:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247773",
    "user": "https://trac.sagemath.org/admin/accounts/users/yomcat"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_247774.json:
```json
{
    "body": "Rudi changed the naive algorithm in #18429 (which I missed) to one based on matroid intersection. You should update names and docstrings to reflect that.\n\nI also think (but am happy to be overruled) that something like this is more appropriate:\n\n\n```\n``None`` -- The most appropriate algorithm is chosen automatically.\n+          - ``\"bridges\"`` -- Bixby and Cunningham's algorithm, based on bridges [BC79]_. Note that this cannot return a separator.\n+          - ``\"intersection\"`` An algorithm based on matroid intersection.\n```",
    "created_at": "2015-06-17T00:53:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247774",
    "user": "https://trac.sagemath.org/admin/accounts/users/yomcat"
}
```

Rudi changed the naive algorithm in #18429 (which I missed) to one based on matroid intersection. You should update names and docstrings to reflect that.

I also think (but am happy to be overruled) that something like this is more appropriate:


```
``None`` -- The most appropriate algorithm is chosen automatically.
+          - ``"bridges"`` -- Bixby and Cunningham's algorithm, based on bridges [BC79]_. Note that this cannot return a separator.
+          - ``"intersection"`` An algorithm based on matroid intersection.
```



---

archive/issue_comments_247775.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-17T01:42:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247775",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_247776.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-06-17T01:44:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247776",
    "user": "https://github.com/chaoxu"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_247777.json:
```json
{
    "body": "Good point. updated.",
    "created_at": "2015-06-17T01:44:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247777",
    "user": "https://github.com/chaoxu"
}
```

Good point. updated.



---

archive/issue_comments_247778.json:
```json
{
    "body": "I'm happy with it now. I'll wait for Stefan/Rudi to give the final sign off. And patchbot should get involved.",
    "created_at": "2015-06-17T05:45:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247778",
    "user": "https://trac.sagemath.org/admin/accounts/users/yomcat"
}
```

I'm happy with it now. I'll wait for Stefan/Rudi to give the final sign off. And patchbot should get involved.



---

archive/issue_comments_247779.json:
```json
{
    "body": "Hi Chao,\n\nI think the code as such looks great and works great. Repair these last few issues and  I'll give a positive review:\n\n The docstring of is_3connected only mentions BC under `..ALGORITHM:`. Please also describe the other method.\n\n When _is_3connected_BC throws `NotImplementedError,` give a description of the problem , e.g. NotImplementedError(\"The Bixby-Cunningham algorithm does not return a separation\")\n\n In the docstring of _is_3connected_CE and _is_3connected_BC, there are several X and one T that need to have single accolades (now double). You can check the appearance of the docstring in the notebook by entering `M._is_3connected_BC?` on a matroid M.\n\n \nFinally, I don't believe keeping&depricating the option `separation` is necessary in this case. This option was introduced in 6.8 beta and so never saw an official release. So if we make sure it's gone before 6.8 is released we should be fine. \n\nIf the others agree you can perhaps still change this. Otherwise I'll give the positive review after you settled the above 3 issues.",
    "created_at": "2015-06-17T14:21:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247779",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Hi Chao,

I think the code as such looks great and works great. Repair these last few issues and  I'll give a positive review:

 The docstring of is_3connected only mentions BC under `..ALGORITHM:`. Please also describe the other method.

 When _is_3connected_BC throws `NotImplementedError,` give a description of the problem , e.g. NotImplementedError("The Bixby-Cunningham algorithm does not return a separation")

 In the docstring of _is_3connected_CE and _is_3connected_BC, there are several X and one T that need to have single accolades (now double). You can check the appearance of the docstring in the notebook by entering `M._is_3connected_BC?` on a matroid M.

 
Finally, I don't believe keeping&depricating the option `separation` is necessary in this case. This option was introduced in 6.8 beta and so never saw an official release. So if we make sure it's gone before 6.8 is released we should be fine. 

If the others agree you can perhaps still change this. Otherwise I'll give the positive review after you settled the above 3 issues.



---

archive/issue_comments_247780.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-17T17:34:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247780",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_247781.json:
```json
{
    "body": "```\nError building the documentation.\nTraceback (most recent call last):\n  File \"/Users/rudi/Documents/Development/sage-6.7/src/doc/common/builder.py\", line 1626, in <module>\n    getattr(get_builder(name), type)()\n  File \"/Users/rudi/Documents/Development/sage-6.7/src/doc/common/builder.py\", line 292, in _wrapper\n    getattr(get_builder(document), 'inventory')(*args, **kwds)\n  File \"/Users/rudi/Documents/Development/sage-6.7/src/doc/common/builder.py\", line 503, in _wrapper\n    x.get(99999)\n  File \"/Users/rudi/Documents/Development/sage-6.7/local/lib/python/multiprocessing/pool.py\", line 558, in get\n    raise self._value\nOSError: [matroids ] docstring of sage.matroids.matroid.Matroid.is_3connected:33: WARNING: Bullet list ends without a blank line; unexpected unindent.\n```",
    "created_at": "2015-06-17T18:18:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247781",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

```
Error building the documentation.
Traceback (most recent call last):
  File "/Users/rudi/Documents/Development/sage-6.7/src/doc/common/builder.py", line 1626, in <module>
    getattr(get_builder(name), type)()
  File "/Users/rudi/Documents/Development/sage-6.7/src/doc/common/builder.py", line 292, in _wrapper
    getattr(get_builder(document), 'inventory')(*args, **kwds)
  File "/Users/rudi/Documents/Development/sage-6.7/src/doc/common/builder.py", line 503, in _wrapper
    x.get(99999)
  File "/Users/rudi/Documents/Development/sage-6.7/local/lib/python/multiprocessing/pool.py", line 558, in get
    raise self._value
OSError: [matroids ] docstring of sage.matroids.matroid.Matroid.is_3connected:33: WARNING: Bullet list ends without a blank line; unexpected unindent.
```



---

archive/issue_comments_247782.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-17T18:24:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247782",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_247783.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-06-17T18:34:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247783",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_247784.json:
```json
{
    "body": "Code compiles, tests succeed, docs build. \n\nPositive review!",
    "created_at": "2015-06-17T18:34:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247784",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Code compiles, tests succeed, docs build. 

Positive review!



---

archive/issue_comments_247785.json:
```json
{
    "body": "merge conflict, probably #18448",
    "created_at": "2015-06-17T20:11:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247785",
    "user": "https://github.com/vbraun"
}
```

merge conflict, probably #18448



---

archive/issue_comments_247786.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-06-17T20:11:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247786",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_247787.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-18T05:19:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247787",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_247788.json:
```json
{
    "body": "What can I do at this point to resolve the merge conflict?",
    "created_at": "2015-06-18T05:22:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247788",
    "user": "https://github.com/chaoxu"
}
```

What can I do at this point to resolve the merge conflict?



---

archive/issue_comments_247789.json:
```json
{
    "body": "Hi Chao,\n\nI am also still learning git so perhaps I'm not the right person to give expert advice. But take a look at the way a merge conflict is resolved in this recent ticket #17492. The way to go seems to be to merge the conflicting ticket #18448 into your code. You can do so by a git trac pull 18448 while working on your ticket (this is destructive so if you want to be safe, perform a merge of the two patches in a separate branch). The automatic merge will partially fail and you have to repair some of the source (probably matroid.pyx). Places where the automerger could not decide what to do will be indicated in the source with <<< and >>>.\n\nI doubt that the manual merge will be very difficult in this case, the issue is probably that the new code in both tickets are more or less in the same location. If you want, I will attempt the merge for you.\n\nJust merging develop into your branch as you just did may not suffice, since 18448 is not yet part of develop.\n\nCheers,\nRudi",
    "created_at": "2015-06-18T07:18:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247789",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Hi Chao,

I am also still learning git so perhaps I'm not the right person to give expert advice. But take a look at the way a merge conflict is resolved in this recent ticket #17492. The way to go seems to be to merge the conflicting ticket #18448 into your code. You can do so by a git trac pull 18448 while working on your ticket (this is destructive so if you want to be safe, perform a merge of the two patches in a separate branch). The automatic merge will partially fail and you have to repair some of the source (probably matroid.pyx). Places where the automerger could not decide what to do will be indicated in the source with <<< and >>>.

I doubt that the manual merge will be very difficult in this case, the issue is probably that the new code in both tickets are more or less in the same location. If you want, I will attempt the merge for you.

Just merging develop into your branch as you just did may not suffice, since 18448 is not yet part of develop.

Cheers,
Rudi



---

archive/issue_comments_247790.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2015-06-18T08:34:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247790",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_247791.json:
```json
{
    "body": "Thanks Rudi, I followed your steps.\nHopefully this solves all the conflicts.",
    "created_at": "2015-06-18T08:39:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247791",
    "user": "https://github.com/chaoxu"
}
```

Thanks Rudi, I followed your steps.
Hopefully this solves all the conflicts.



---

archive/issue_comments_247792.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-06-18T08:39:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247792",
    "user": "https://github.com/chaoxu"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_247793.json:
```json
{
    "body": "Yes, that should do it. Positive review again.",
    "created_at": "2015-06-18T13:18:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247793",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Yes, that should do it. Positive review again.



---

archive/issue_comments_247794.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-06-18T13:18:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247794",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_247795.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-06-19T08:25:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18302#issuecomment-247795",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_052121.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-06-19T08:25:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18302",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18302#event-52121"
}
```
