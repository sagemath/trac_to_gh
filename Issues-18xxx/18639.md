# Issue 18639: New class NumberFieldZeroIdeal

archive/issues_018402.json:
```json
{
    "body": "There are several issues with the zero ideal in number fields:\n\n```\nsage: K.<a> = NumberField(x^2-10)\nsage: K.<a> = NumberField(x^2-10)\nsage: 0/K.ideal(a)\n------------------------------------------------------------------------\nUnhandled SIGSEGV: A segmentation fault occurred in Sage.\nThis probably occurred because a *compiled* component of Sage has a bug\nin it and is not properly wrapped with sig_on(), sig_off().\nSage will now terminate.\n------------------------------------------------------------------------\n```\n\n```\nsage: K.<a> = NumberField(x^2-15)\nsage: three = K.ideal(3)\nsage: zero = K(0)\nsage: three.divides(zero)\n------------------------------------------------------------------------\nUnhandled SIGSEGV: A segmentation fault occurred in Sage.\nThis probably occurred because a *compiled* component of Sage has a bug\nin it and is not properly wrapped with sig_on(), sig_off().\nSage will now terminate.\n------------------------------------------------------------------------\n```\n\n```\nsage: K.<a> = QuadraticField(-5) \nsage: K.ideal(0) * K.ideal(a+1,3)\n...\nPariError: incorrect type in basistoalg (t_MAT)\n```\n\n(and probably more)\n\nI propose to do some redesign and add a new class `NumberFieldZeroIdeal` for just the zero ideal. Then most methods of the current `NumberFieldIdeal` should probably be moved to either or both of `NumberFieldZeroIdeal`/`NumberFieldFractionalIdeal`.\n\nCC:  @mmasdeu\n\nAuthor: John Cremona\n\nBranch: u/cremona/18639\n\nStatus: needs_work\n\nDependencies: #18622\n\nCommit: 4f60fb466895fb07d9ab06e89f1f5f9510101b68\n\nIssue created by migration from https://trac.sagemath.org/ticket/18639\n\n",
    "created_at": "2015-06-08T19:38:26Z",
    "labels": [
        "component: number fields",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.10",
    "title": "New class NumberFieldZeroIdeal",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18639",
    "user": "https://github.com/JohnCremona"
}
```
There are several issues with the zero ideal in number fields:

```
sage: K.<a> = NumberField(x^2-10)
sage: K.<a> = NumberField(x^2-10)
sage: 0/K.ideal(a)
------------------------------------------------------------------------
Unhandled SIGSEGV: A segmentation fault occurred in Sage.
This probably occurred because a *compiled* component of Sage has a bug
in it and is not properly wrapped with sig_on(), sig_off().
Sage will now terminate.
------------------------------------------------------------------------
```

```
sage: K.<a> = NumberField(x^2-15)
sage: three = K.ideal(3)
sage: zero = K(0)
sage: three.divides(zero)
------------------------------------------------------------------------
Unhandled SIGSEGV: A segmentation fault occurred in Sage.
This probably occurred because a *compiled* component of Sage has a bug
in it and is not properly wrapped with sig_on(), sig_off().
Sage will now terminate.
------------------------------------------------------------------------
```

```
sage: K.<a> = QuadraticField(-5) 
sage: K.ideal(0) * K.ideal(a+1,3)
...
PariError: incorrect type in basistoalg (t_MAT)
```

(and probably more)

I propose to do some redesign and add a new class `NumberFieldZeroIdeal` for just the zero ideal. Then most methods of the current `NumberFieldIdeal` should probably be moved to either or both of `NumberFieldZeroIdeal`/`NumberFieldFractionalIdeal`.

CC:  @mmasdeu

Author: John Cremona

Branch: u/cremona/18639

Status: needs_work

Dependencies: #18622

Commit: 4f60fb466895fb07d9ab06e89f1f5f9510101b68

Issue created by migration from https://trac.sagemath.org/ticket/18639





---

archive/issue_comments_327726.json:
```json
{
    "body": "Changing commit from \"\" to \"30ca3956b9439aba717ed73397a39dea99a26430\"",
    "created_at": "2015-06-08T19:50:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18639#issuecomment-327726",
    "user": "https://github.com/JohnCremona"
}
```

Changing commit from "" to "30ca3956b9439aba717ed73397a39dea99a26430"



---

archive/issue_comments_327727.json:
```json
{
    "body": "<a id='comment:1'></a>New commits:",
    "created_at": "2015-06-08T19:50:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18639#issuecomment-327727",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:1'></a>New commits:



---

archive/issue_comments_327728.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-06-08T19:50:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18639#issuecomment-327728",
    "user": "https://github.com/JohnCremona"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_327729.json:
```json
{
    "body": "Changing branch from \"\" to \"u/cremona/18639\"",
    "created_at": "2015-06-08T19:50:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18639#issuecomment-327729",
    "user": "https://github.com/JohnCremona"
}
```

Changing branch from "" to "u/cremona/18639"



---

archive/issue_comments_327730.json:
```json
{
    "body": "<a id='comment:2'></a>Wouldn't the proper fix to just allow `(0) / I = (0)` for a fractional ideal `I`? Can you check if #18622 does that?",
    "created_at": "2015-06-08T21:06:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18639#issuecomment-327730",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>Wouldn't the proper fix to just allow `(0) / I = (0)` for a fractional ideal `I`? Can you check if #18622 does that?



---

archive/issue_comments_327731.json:
```json
{
    "body": "<a id='comment:3'></a>OK, I will check that.  Certainly the 0 ideal passes the is_integral() test, and that should be done anyway, as it is already p ossible to multiply the 0 idal with a nonzero (fractional) one.",
    "created_at": "2015-06-08T21:19:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18639#issuecomment-327731",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:3'></a>OK, I will check that.  Certainly the 0 ideal passes the is_integral() test, and that should be done anyway, as it is already p ossible to multiply the 0 idal with a nonzero (fractional) one.



---

archive/issue_comments_327732.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-06-09T06:42:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18639#issuecomment-327732",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_327733.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#186222\"",
    "created_at": "2015-06-09T06:42:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18639#issuecomment-327733",
    "user": "https://github.com/jdemeyer"
}
```

Changing dependencies from "" to "#186222"



---

archive/issue_comments_327734.json:
```json
{
    "body": "<a id='comment:4'></a>It's worse with #18622: it gives a segmentation fault.\n\nIn any case, I still think that allowing `(0)/I` is the proper fix here, so I'm boldly changing the ticket to do that.",
    "created_at": "2015-06-09T06:42:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18639#issuecomment-327734",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>It's worse with #18622: it gives a segmentation fault.

In any case, I still think that allowing `(0)/I` is the proper fix here, so I'm boldly changing the ticket to do that.



---

archive/issue_comments_327735.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,37 +1,14 @@\n ```\n sage: K.<a> = NumberField(x^2-10)\n-sage: a.divides(K(10))\n-True\n-sage: a.divides(K(0))                                                                          \n-True\n-sage: I = K.ideal(a)\n-sage: I.divides(K(10))                                                                         \n-True\n-sage: I.divides(K(0))                                                                          \n----------------------------------------------------------------------------\n-TypeError                                 Traceback (most recent call last)\n-<ipython-input-18-bfc74602576b> in <module>()\n-----> 1 I.divides(K(Integer(0)))\n-\n-/home/jec/sage/local/lib/python2.7/site-packages/sage/rings/number_field/number_field_ideal.pyc in divides(self, other)\n-   1753         if not isinstance(other, NumberFieldIdeal):\n-   1754             other = self.number_field().ideal(other)\n--> 1755         return (other / self).is_integral()\n-   1756 \n-   1757     def factor(self):\n-\n-TypeError: unsupported operand type(s) for /: 'NumberFieldIdeal' and 'NumberFieldFractionalIdeal'\n+sage: K.<a> = NumberField(x^2-10)\n+sage: 0/K.ideal(a)\n+------------------------------------------------------------------------\n+Unhandled SIGSEGV: A segmentation fault occurred in Sage.\n+This probably occurred because a *compiled* component of Sage has a bug\n+in it and is not properly wrapped with sig_on(), sig_off().\n+Sage will now terminate.\n+------------------------------------------------------------------------\n ```\n-This is failing because the divides method does this:\n-\n-```\n-       if not isinstance(other, NumberFieldIdeal):\n-            other = self.number_field().ideal(other)\n-        return (other / self).is_integral()\n-```\n-and the / operator does not like having the left operand the zero ideal (which is not a fractional ideal).  Similarly, I.divides(K.ideal(0)) fails.\n-\n-The simple fix is to check whether other.is_zero() first.\n \n Author: John Cremona\n \n``````\n",
    "created_at": "2015-06-09T06:42:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18639#issuecomment-327735",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,37 +1,14 @@
 ```
 sage: K.<a> = NumberField(x^2-10)
-sage: a.divides(K(10))
-True
-sage: a.divides(K(0))                                                                          
-True
-sage: I = K.ideal(a)
-sage: I.divides(K(10))                                                                         
-True
-sage: I.divides(K(0))                                                                          
----------------------------------------------------------------------------
-TypeError                                 Traceback (most recent call last)
-<ipython-input-18-bfc74602576b> in <module>()
-----> 1 I.divides(K(Integer(0)))
-
-/home/jec/sage/local/lib/python2.7/site-packages/sage/rings/number_field/number_field_ideal.pyc in divides(self, other)
-   1753         if not isinstance(other, NumberFieldIdeal):
-   1754             other = self.number_field().ideal(other)
--> 1755         return (other / self).is_integral()
-   1756 
-   1757     def factor(self):
-
-TypeError: unsupported operand type(s) for /: 'NumberFieldIdeal' and 'NumberFieldFractionalIdeal'
+sage: K.<a> = NumberField(x^2-10)
+sage: 0/K.ideal(a)
+------------------------------------------------------------------------
+Unhandled SIGSEGV: A segmentation fault occurred in Sage.
+This probably occurred because a *compiled* component of Sage has a bug
+in it and is not properly wrapped with sig_on(), sig_off().
+Sage will now terminate.
+------------------------------------------------------------------------
 ```
-This is failing because the divides method does this:
-
-```
-       if not isinstance(other, NumberFieldIdeal):
-            other = self.number_field().ideal(other)
-        return (other / self).is_integral()
-```
-and the / operator does not like having the left operand the zero ideal (which is not a fractional ideal).  Similarly, I.divides(K.ideal(0)) fails.
-
-The simple fix is to check whether other.is_zero() first.
 
 Author: John Cremona
 
``````




---

archive/issue_comments_327736.json:
```json
{
    "body": "<a id='comment:5'></a>I see that #18622 has been merged but is not in the current beta, so the branch name has disappeared from that ticket, so I am hoping that schecking out rremote branch trac/u/jdemeyer/ticket/18611 is the right thing to do.",
    "created_at": "2015-06-09T08:31:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18639#issuecomment-327736",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:5'></a>I see that #18622 has been merged but is not in the current beta, so the branch name has disappeared from that ticket, so I am hoping that schecking out rremote branch trac/u/jdemeyer/ticket/18611 is the right thing to do.



---

archive/issue_comments_327737.json:
```json
{
    "body": "Changing dependencies from \"#186222\" to \"#18622\"",
    "created_at": "2015-06-09T08:31:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18639#issuecomment-327737",
    "user": "https://github.com/JohnCremona"
}
```

Changing dependencies from "#186222" to "#18622"



---

archive/issue_comments_327738.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:5 cremona]:\n> I see that #18622 has been merged but is not in the current beta, so the branch name has disappeared from that ticket, so I am hoping that schecking out rremote branch trac/u/jdemeyer/ticket/18611 is the right thing to do.\n\nYou can always use the commit hash, that should always work:\n\n```\ngit fetch trac  # or just \"git fetch\" depending on your configuration\ngit checkout f61588ecabefc84103c4daa40e648b76e6e58828\n```",
    "created_at": "2015-06-09T09:06:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18639#issuecomment-327738",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>Replying to [comment:5 cremona]:
> I see that #18622 has been merged but is not in the current beta, so the branch name has disappeared from that ticket, so I am hoping that schecking out rremote branch trac/u/jdemeyer/ticket/18611 is the right thing to do.

You can always use the commit hash, that should always work:

```
git fetch trac  # or just "git fetch" depending on your configuration
git checkout f61588ecabefc84103c4daa40e648b76e6e58828
```



---

archive/issue_comments_327739.json:
```json
{
    "body": "<a id='comment:7'></a>There are actually many issues with the zero ideal...",
    "created_at": "2015-06-09T09:25:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18639#issuecomment-327739",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>There are actually many issues with the zero ideal...



---

archive/issue_comments_327740.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,23 @@\n+There are several issues with the zero ideal in number fields:\n \n+```\n+sage: K.<a> = NumberField(x^2-10)\n+sage: K.<a> = NumberField(x^2-10)\n+sage: 0/K.ideal(a)\n+------------------------------------------------------------------------\n+Unhandled SIGSEGV: A segmentation fault occurred in Sage.\n+This probably occurred because a *compiled* component of Sage has a bug\n+in it and is not properly wrapped with sig_on(), sig_off().\n+Sage will now terminate.\n+------------------------------------------------------------------------\n+```\n+\n+```\n+sage: K.<a> = QuadraticField(-5) \n+sage: K.ideal(0) * K.ideal(a+1,3)\n+...\n+PariError: incorrect type in basistoalg (t_MAT)\n+```\n \n Author: John Cremona\n \n``````\n",
    "created_at": "2015-06-09T09:25:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18639#issuecomment-327740",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,23 @@
+There are several issues with the zero ideal in number fields:
 
+```
+sage: K.<a> = NumberField(x^2-10)
+sage: K.<a> = NumberField(x^2-10)
+sage: 0/K.ideal(a)
+------------------------------------------------------------------------
+Unhandled SIGSEGV: A segmentation fault occurred in Sage.
+This probably occurred because a *compiled* component of Sage has a bug
+in it and is not properly wrapped with sig_on(), sig_off().
+Sage will now terminate.
+------------------------------------------------------------------------
+```
+
+```
+sage: K.<a> = QuadraticField(-5) 
+sage: K.ideal(0) * K.ideal(a+1,3)
+...
+PariError: incorrect type in basistoalg (t_MAT)
+```
 
 Author: John Cremona
 
``````




---

archive/issue_comments_327741.json:
```json
{
    "body": "Changing commit from \"30ca3956b9439aba717ed73397a39dea99a26430\" to \"7be38840da684f9110b4a295712a7eb212f94318\"",
    "created_at": "2015-06-09T09:27:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18639#issuecomment-327741",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "30ca3956b9439aba717ed73397a39dea99a26430" to "7be38840da684f9110b4a295712a7eb212f94318"



---

archive/issue_comments_327742.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-09T09:27:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18639#issuecomment-327742",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_327743.json:
```json
{
    "body": "<a id='comment:9'></a>I hope you don't mind that I'm making this ticket much more general than you intended, but there is really not much point in fixing one specific method when maybe the whole approach needs to be changed.\n\nI am now thinking about the following: introduce a new class `NumberFieldZeroIdeal` to represent the zero ideal. Then inherit both `NumberFieldZeroIdeal` and `NumberFieldFractionalIdeal` from `NumberFieldIdeal` (which shouldn't have much functionality).",
    "created_at": "2015-06-09T09:30:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18639#issuecomment-327743",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>I hope you don't mind that I'm making this ticket much more general than you intended, but there is really not much point in fixing one specific method when maybe the whole approach needs to be changed.

I am now thinking about the following: introduce a new class `NumberFieldZeroIdeal` to represent the zero ideal. Then inherit both `NumberFieldZeroIdeal` and `NumberFieldFractionalIdeal` from `NumberFieldIdeal` (which shouldn't have much functionality).



---

archive/issue_comments_327744.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [comment:8 git]:\n> Branch pushed to git repo; I updated commit sha1. New commits:\n> |                                                                                                                                          |                                     |\n> |------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|\n> |[7be3884](http://git.sagemath.org/sage.git/commit/?id=7be38840da684f9110b4a295712a7eb212f94318)|`#18639: handle division for 0 ideal`|\n\n\nSorry, but this will conflict with #18622.",
    "created_at": "2015-06-09T09:31:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18639#issuecomment-327744",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>Replying to [comment:8 git]:
> Branch pushed to git repo; I updated commit sha1. New commits:
> |                                                                                                                                          |                                     |
> |------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|
> |[7be3884](http://git.sagemath.org/sage.git/commit/?id=7be38840da684f9110b4a295712a7eb212f94318)|`#18639: handle division for 0 ideal`|


Sorry, but this will conflict with #18622.



---

archive/issue_comments_327745.json:
```json
{
    "body": "<a id='comment:11'></a>I have done what was suggested.  Basically the __div__ function is moved from NumberFieldFractionalIdeal to NumberFieldIdeal with appropriate tests.  The test from the original patch are included too, to show that the porioginal issue is resolved.  I based this on my original branch but also tested it based on #18622.\n\nI'm sure you will find something I did not do right and/or want to do more (I just saw your comment).  Feel free to take this over from me 100% as I have other things to do today.",
    "created_at": "2015-06-09T09:32:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18639#issuecomment-327745",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:11'></a>I have done what was suggested.  Basically the __div__ function is moved from NumberFieldFractionalIdeal to NumberFieldIdeal with appropriate tests.  The test from the original patch are included too, to show that the porioginal issue is resolved.  I based this on my original branch but also tested it based on #18622.

I'm sure you will find something I did not do right and/or want to do more (I just saw your comment).  Feel free to take this over from me 100% as I have other things to do today.



---

archive/issue_comments_327746.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:11 cremona]:\n> but also tested it based on #18622.\n\nAre you sure? I ask because #18622 actually changes `__div__` to `_div_` so I find it hard to believe that you didn't get a conflict.\n\n> Feel free to take this over from me 100% as I have other things to do today.\n\nMe too :-)\n\nWhat do you think about the approach I propose in [comment:9]?",
    "created_at": "2015-06-09T09:34:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18639#issuecomment-327746",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>Replying to [comment:11 cremona]:
> but also tested it based on #18622.

Are you sure? I ask because #18622 actually changes `__div__` to `_div_` so I find it hard to believe that you didn't get a conflict.

> Feel free to take this over from me 100% as I have other things to do today.

Me too :-)

What do you think about the approach I propose in [comment:9]?



---

archive/issue_comments_327747.json:
```json
{
    "body": "<a id='comment:13'></a>Replying to [comment:12 jdemeyer]:\n> Replying to [comment:11 cremona]:\n> > but also tested it based on #18622.\n\n> Are you sure? I ask because #18622 actually changes `__div__` to `_div_` so I find it hard to believe that you didn't get a conflict.\n> \n> > Feel free to take this over from me 100% as I have other things to do today.\n\n> Me too :-)\n\nI am sure you do!  I am in the middle of implementing Kraus's condictoins and global minimal (or almost global minimal) models for elliptic curves over number fields of class number 1, which no-one has ever done before.  Nearly finished...\n\n> \n> What do you think about the approach I propose in [comment:9]?\n\n\nGood idea.  I think WIlliam and I considered this way back (see line 10 of the file in question -- it was in fact 28 Jan 2008, almost my first ever Sage development session, and took place in a hotel room in New Jersey where he and I had nothing else to do all day...)",
    "created_at": "2015-06-09T09:45:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18639#issuecomment-327747",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:13'></a>Replying to [comment:12 jdemeyer]:
> Replying to [comment:11 cremona]:
> > but also tested it based on #18622.

> Are you sure? I ask because #18622 actually changes `__div__` to `_div_` so I find it hard to believe that you didn't get a conflict.
> 
> > Feel free to take this over from me 100% as I have other things to do today.

> Me too :-)

I am sure you do!  I am in the middle of implementing Kraus's condictoins and global minimal (or almost global minimal) models for elliptic curves over number fields of class number 1, which no-one has ever done before.  Nearly finished...

> 
> What do you think about the approach I propose in [comment:9]?


Good idea.  I think WIlliam and I considered this way back (see line 10 of the file in question -- it was in fact 28 Jan 2008, almost my first ever Sage development session, and took place in a hotel room in New Jersey where he and I had nothing else to do all day...)



---

archive/issue_comments_327748.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [comment:13 cremona]:\n> Good idea.  I think WIlliam and I considered this way back (see line 10 of the file in question -- it was in fact 28 Jan 2008, almost my first ever Sage development session, and took place in a hotel room in New Jersey where he and I had nothing else to do all day...)\n\n\nI know. The problem is that currently there is really no way to write special code for just the zero ideal. I also think that `NumberFieldZeroIdeal` is more explicit about its intentions, which is a good thing.",
    "created_at": "2015-06-09T09:49:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18639#issuecomment-327748",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'></a>Replying to [comment:13 cremona]:
> Good idea.  I think WIlliam and I considered this way back (see line 10 of the file in question -- it was in fact 28 Jan 2008, almost my first ever Sage development session, and took place in a hotel room in New Jersey where he and I had nothing else to do all day...)


I know. The problem is that currently there is really no way to write special code for just the zero ideal. I also think that `NumberFieldZeroIdeal` is more explicit about its intentions, which is a good thing.



---

archive/issue_comments_327749.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,27 @@\n+There are several issues with the zero ideal in number fields:\n \n+```\n+sage: K.<a> = NumberField(x^2-10)\n+sage: K.<a> = NumberField(x^2-10)\n+sage: 0/K.ideal(a)\n+------------------------------------------------------------------------\n+Unhandled SIGSEGV: A segmentation fault occurred in Sage.\n+This probably occurred because a *compiled* component of Sage has a bug\n+in it and is not properly wrapped with sig_on(), sig_off().\n+Sage will now terminate.\n+------------------------------------------------------------------------\n+```\n+\n+```\n+sage: K.<a> = QuadraticField(-5) \n+sage: K.ideal(0) * K.ideal(a+1,3)\n+...\n+PariError: incorrect type in basistoalg (t_MAT)\n+```\n+\n+(and probably more)\n+\n+I propose to do some redesign and add a new class `NumberFieldZeroIdeal` for just the zero ideal. Then most methods of the current `NumberFieldIdeal` should probably be moved to either or both of `NumberFieldZeroIdeal`/`NumberFieldFractionalIdeal`.\n \n Author: John Cremona\n \n``````\n",
    "created_at": "2015-06-09T09:52:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18639#issuecomment-327749",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,27 @@
+There are several issues with the zero ideal in number fields:
 
+```
+sage: K.<a> = NumberField(x^2-10)
+sage: K.<a> = NumberField(x^2-10)
+sage: 0/K.ideal(a)
+------------------------------------------------------------------------
+Unhandled SIGSEGV: A segmentation fault occurred in Sage.
+This probably occurred because a *compiled* component of Sage has a bug
+in it and is not properly wrapped with sig_on(), sig_off().
+Sage will now terminate.
+------------------------------------------------------------------------
+```
+
+```
+sage: K.<a> = QuadraticField(-5) 
+sage: K.ideal(0) * K.ideal(a+1,3)
+...
+PariError: incorrect type in basistoalg (t_MAT)
+```
+
+(and probably more)
+
+I propose to do some redesign and add a new class `NumberFieldZeroIdeal` for just the zero ideal. Then most methods of the current `NumberFieldIdeal` should probably be moved to either or both of `NumberFieldZeroIdeal`/`NumberFieldFractionalIdeal`.
 
 Author: John Cremona
 
``````




---

archive/issue_events_052288.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-12-09T19:46:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18639",
    "milestone": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18639#event-52288"
}
```



---

archive/issue_comments_327750.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,40 @@\n+There are several issues with the zero ideal in number fields:\n \n+```\n+sage: K.<a> = NumberField(x^2-10)\n+sage: K.<a> = NumberField(x^2-10)\n+sage: 0/K.ideal(a)\n+------------------------------------------------------------------------\n+Unhandled SIGSEGV: A segmentation fault occurred in Sage.\n+This probably occurred because a *compiled* component of Sage has a bug\n+in it and is not properly wrapped with sig_on(), sig_off().\n+Sage will now terminate.\n+------------------------------------------------------------------------\n+```\n+\n+```\n+sage: K.<a> = NumberField(x^2-15)\n+sage: three = K.ideal(3)\n+sage: zero = K(0)\n+sage: three.divides(zero)\n+------------------------------------------------------------------------\n+Unhandled SIGSEGV: A segmentation fault occurred in Sage.\n+This probably occurred because a *compiled* component of Sage has a bug\n+in it and is not properly wrapped with sig_on(), sig_off().\n+Sage will now terminate.\n+------------------------------------------------------------------------\n+```\n+\n+```\n+sage: K.<a> = QuadraticField(-5) \n+sage: K.ideal(0) * K.ideal(a+1,3)\n+...\n+PariError: incorrect type in basistoalg (t_MAT)\n+```\n+\n+(and probably more)\n+\n+I propose to do some redesign and add a new class `NumberFieldZeroIdeal` for just the zero ideal. Then most methods of the current `NumberFieldIdeal` should probably be moved to either or both of `NumberFieldZeroIdeal`/`NumberFieldFractionalIdeal`.\n \n Author: John Cremona\n \n``````\n",
    "created_at": "2015-12-09T19:46:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18639#issuecomment-327750",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,40 @@
+There are several issues with the zero ideal in number fields:
 
+```
+sage: K.<a> = NumberField(x^2-10)
+sage: K.<a> = NumberField(x^2-10)
+sage: 0/K.ideal(a)
+------------------------------------------------------------------------
+Unhandled SIGSEGV: A segmentation fault occurred in Sage.
+This probably occurred because a *compiled* component of Sage has a bug
+in it and is not properly wrapped with sig_on(), sig_off().
+Sage will now terminate.
+------------------------------------------------------------------------
+```
+
+```
+sage: K.<a> = NumberField(x^2-15)
+sage: three = K.ideal(3)
+sage: zero = K(0)
+sage: three.divides(zero)
+------------------------------------------------------------------------
+Unhandled SIGSEGV: A segmentation fault occurred in Sage.
+This probably occurred because a *compiled* component of Sage has a bug
+in it and is not properly wrapped with sig_on(), sig_off().
+Sage will now terminate.
+------------------------------------------------------------------------
+```
+
+```
+sage: K.<a> = QuadraticField(-5) 
+sage: K.ideal(0) * K.ideal(a+1,3)
+...
+PariError: incorrect type in basistoalg (t_MAT)
+```
+
+(and probably more)
+
+I propose to do some redesign and add a new class `NumberFieldZeroIdeal` for just the zero ideal. Then most methods of the current `NumberFieldIdeal` should probably be moved to either or both of `NumberFieldZeroIdeal`/`NumberFieldFractionalIdeal`.
 
 Author: John Cremona
 
``````




---

archive/issue_comments_327751.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-02-02T16:49:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18639#issuecomment-327751",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_327752.json:
```json
{
    "body": "Changing commit from \"7be38840da684f9110b4a295712a7eb212f94318\" to \"4f60fb466895fb07d9ab06e89f1f5f9510101b68\"",
    "created_at": "2021-02-02T16:49:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18639#issuecomment-327752",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7be38840da684f9110b4a295712a7eb212f94318" to "4f60fb466895fb07d9ab06e89f1f5f9510101b68"



---

archive/issue_comments_327753.json:
```json
{
    "body": "<a id='comment:18'></a>Although this has become inactive, I thought it worth at least merging in the current develop branch and resolving conflicts (there were very few).",
    "created_at": "2021-02-02T16:50:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18639#issuecomment-327753",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:18'></a>Although this has become inactive, I thought it worth at least merging in the current develop branch and resolving conflicts (there were very few).
