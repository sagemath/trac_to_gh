# Issue 18455: Remove many unneeded includes of cdefs.pxi

archive/issues_018218.json:
```json
{
    "body": "Many Sage files contain\n\n```\ninclude 'sage/ext/cdefs.pxi'\n```\nwithout a good reason.\n\nThis file adds a dependency on the GMP declarations which is often unwanted.\n\nIn some cases, we just move the `cdefs.pxi` include from the `.pxd` file to the `.pyx` file.\n\nCC:  jpflori\n\nReviewer: Jean-Pierre Flori, Marc Mezzarobba\n\nAuthor: Jeroen Demeyer\n\nBranch: 370106df8a115b314ef4c50ac1ae494458c4d1b1\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/18455\n\n",
    "closed_at": "2015-05-24T16:13:42Z",
    "created_at": "2015-05-19T20:46:05Z",
    "labels": [
        "component: cython"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "Remove many unneeded includes of cdefs.pxi",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18455",
    "user": "https://github.com/jdemeyer"
}
```
Many Sage files contain

```
include 'sage/ext/cdefs.pxi'
```
without a good reason.

This file adds a dependency on the GMP declarations which is often unwanted.

In some cases, we just move the `cdefs.pxi` include from the `.pxd` file to the `.pyx` file.

CC:  jpflori

Reviewer: Jean-Pierre Flori, Marc Mezzarobba

Author: Jeroen Demeyer

Branch: 370106df8a115b314ef4c50ac1ae494458c4d1b1

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/18455





---

archive/issue_comments_261821.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -7,6 +7,8 @@\n \n This file adds a dependency on the GMP declarations which is often unwanted.\n \n+In some cases, we just move the \\`cdefs.pxi\\` include from the \\`.pxd\\` file to the \\`.pyx\\` file.\n+\n Author: Jeroen Demeyer\n \n Comment: 1\n```\n",
    "created_at": "2015-05-19T20:56:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18455#issuecomment-261821",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -7,6 +7,8 @@
 
 This file adds a dependency on the GMP declarations which is often unwanted.
 
+In some cases, we just move the \`cdefs.pxi\` include from the \`.pxd\` file to the \`.pyx\` file.
+
 Author: Jeroen Demeyer
 
 Comment: 1
```




---

archive/issue_comments_261822.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-05-19T21:48:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18455#issuecomment-261822",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_261823.json:
```json
{
    "body": "<a id='comment:4'></a>New commits:",
    "created_at": "2015-05-19T21:48:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18455#issuecomment-261823",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>New commits:



---

archive/issue_comments_261824.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-20T06:32:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18455#issuecomment-261824",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_261825.json:
```json
{
    "body": "<a id='comment:6'></a>Couldn't we completely get rid of `cdefs.pxi`?\nIt does not seem that useful.\nOr at least get rid of the `gmp` part within it.\n\nBy the way, your commits added an inclusion of `cdefs.pxi` in `integer.pyx`, was it intended?",
    "created_at": "2015-05-20T07:24:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18455#issuecomment-261825",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:6'></a>Couldn't we completely get rid of `cdefs.pxi`?
It does not seem that useful.
Or at least get rid of the `gmp` part within it.

By the way, your commits added an inclusion of `cdefs.pxi` in `integer.pyx`, was it intended?



---

archive/issue_comments_261826.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-20T09:29:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18455#issuecomment-261826",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_261827.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:6 jpflori]:\n> Couldn't we completely get rid of `cdefs.pxi`?\n\nWell, there is always backwards compatibility for custom Cython code.\nIn the Sage library, we could get of it. But I'd rather not do that in this ticket, it's already big enough.\n\n> By the way, your commits added an inclusion of `cdefs.pxi` in `integer.pyx`, was it intended?\n\nYes.",
    "created_at": "2015-05-20T09:31:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18455#issuecomment-261827",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>Replying to [comment:6 jpflori]:
> Couldn't we completely get rid of `cdefs.pxi`?

Well, there is always backwards compatibility for custom Cython code.
In the Sage library, we could get of it. But I'd rather not do that in this ticket, it's already big enough.

> By the way, your commits added an inclusion of `cdefs.pxi` in `integer.pyx`, was it intended?

Yes.



---

archive/issue_comments_261828.json:
```json
{
    "body": "<a id='comment:9'></a>Now that #18450 is officially ready for review, I do not plan to make further changes to this ticket (unless requested by a reviewer of course).",
    "created_at": "2015-05-20T09:34:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18455#issuecomment-261828",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>Now that #18450 is officially ready for review, I do not plan to make further changes to this ticket (unless requested by a reviewer of course).



---

archive/issue_comments_261829.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-05-24T07:55:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18455#issuecomment-261829",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_051952.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-05-24T16:13:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18455",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18455#event-51952"
}
```



---

archive/issue_comments_261830.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-05-24T16:13:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18455#issuecomment-261830",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_261831.json:
```json
{
    "body": "<a id='comment:12'></a>Follow-up: #18519",
    "created_at": "2015-05-26T14:59:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18455#issuecomment-261831",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>Follow-up: #18519
