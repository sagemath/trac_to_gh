# Issue 18455: Remove many unneeded includes of cdefs.pxi

archive/issues_018218.json:
```json
{
    "assignees": [],
    "body": "Many Sage files contain\n\n```\ninclude 'sage/ext/cdefs.pxi'\n```\nwithout a good reason.\n\nThis file adds a dependency on the GMP declarations which is often unwanted.\n\nIn some cases, we just move the `cdefs.pxi` include from the `.pxd` file to the `.pyx` file.\n\nCC:  jpflori\n\nBranch: **[370106d](https://github.com/sagemath/sagetrac-mirror/commit/370106df8a115b314ef4c50ac1ae494458c4d1b1)**\n\nReviewer: **Jean-Pierre Flori, Marc Mezzarobba**\n\nAuthor: **Jeroen Demeyer**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/18455_\n\n",
    "closed_at": "2015-05-24T16:13:42Z",
    "created_at": "2015-05-19T20:46:05Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20cython",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Remove many unneeded includes of cdefs.pxi",
    "type": "issue",
    "updated_at": "2015-05-26T14:59:05Z",
    "url": "https://github.com/sagemath/sage/issues/18455",
    "user": "https://github.com/jdemeyer"
}
```
Many Sage files contain

```
include 'sage/ext/cdefs.pxi'
```
without a good reason.

This file adds a dependency on the GMP declarations which is often unwanted.

In some cases, we just move the `cdefs.pxi` include from the `.pxd` file to the `.pyx` file.

CC:  jpflori

Branch: **[370106d](https://github.com/sagemath/sagetrac-mirror/commit/370106df8a115b314ef4c50ac1ae494458c4d1b1)**

Reviewer: **Jean-Pierre Flori, Marc Mezzarobba**

Author: **Jeroen Demeyer**

_Issue created by migration from https://trac.sagemath.org/ticket/18455_





---

archive/issue_events_235761.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-19T20:46:05Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18455",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18455#event-235761"
}
```



---

archive/issue_events_235762.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-19T20:46:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18455",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20cython",
    "label_color": "000080",
    "label_name": "component: cython",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18455#event-235762"
}
```



---

archive/issue_events_235763.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-19T20:46:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18455",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18455#event-235763"
}
```



---

archive/issue_events_235764.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-19T20:46:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18455",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18455#event-235764"
}
```



---

archive/issue_comments_257247.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,3 +6,5 @@\n without a good reason.\n \n This file adds a dependency on the GMP declarations which is often unwanted.\n+\n+In some cases, we just move the `cdefs.pxi` include from the `.pxd` file to the `.pyx` file.\n``````\n",
    "created_at": "2015-05-19T20:56:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18455#issuecomment-257247",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,3 +6,5 @@
 without a good reason.
 
 This file adds a dependency on the GMP declarations which is often unwanted.
+
+In some cases, we just move the `cdefs.pxi` include from the `.pxd` file to the `.pyx` file.
``````




---

archive/issue_comments_257248.json:
```json
{
    "body": "Branch: **[u/jdemeyer/ticket/18455](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/18455)**",
    "created_at": "2015-05-19T21:48:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18455#issuecomment-257248",
    "user": "https://github.com/jdemeyer"
}
```

Branch: **[u/jdemeyer/ticket/18455](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/18455)**



---

archive/issue_comments_257249.json:
```json
{
    "body": "Commit: **[2ed346b](https://github.com/sagemath/sagetrac-mirror/commit/2ed346b88143b4f0417432cd5546e9aed00b55e2)**",
    "created_at": "2015-05-19T21:48:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18455#issuecomment-257249",
    "user": "https://github.com/jdemeyer"
}
```

Commit: **[2ed346b](https://github.com/sagemath/sagetrac-mirror/commit/2ed346b88143b4f0417432cd5546e9aed00b55e2)**



---

archive/issue_events_235765.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-19T21:48:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18455",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18455#event-235765"
}
```



---

archive/issue_comments_257250.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ed346b88143b4f0417432cd5546e9aed00b55e2\">2ed346b</a></td><td><code>Remove unneeded inclusions of cdefs.pxi</code></td></tr></table>\n",
    "created_at": "2015-05-19T21:48:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18455#issuecomment-257250",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'>Comment 4:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ed346b88143b4f0417432cd5546e9aed00b55e2">2ed346b</a></td><td><code>Remove unneeded inclusions of cdefs.pxi</code></td></tr></table>




---

archive/issue_comments_257251.json:
```json
{
    "body": "Changed commit from **[2ed346b](https://github.com/sagemath/sagetrac-mirror/commit/2ed346b88143b4f0417432cd5546e9aed00b55e2)** to **[57e9278](https://github.com/sagemath/sagetrac-mirror/commit/57e92784a5df59af03c6f9a778a9fc295b41e038)**",
    "created_at": "2015-05-20T06:32:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18455#issuecomment-257251",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2ed346b](https://github.com/sagemath/sagetrac-mirror/commit/2ed346b88143b4f0417432cd5546e9aed00b55e2)** to **[57e9278](https://github.com/sagemath/sagetrac-mirror/commit/57e92784a5df59af03c6f9a778a9fc295b41e038)**



---

archive/issue_comments_257252.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/57e92784a5df59af03c6f9a778a9fc295b41e038\">57e9278</a></td><td><code>More removals of cdefs.pxi</code></td></tr></table>\n",
    "created_at": "2015-05-20T06:32:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18455#issuecomment-257252",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:5'>Comment 5:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/57e92784a5df59af03c6f9a778a9fc295b41e038">57e9278</a></td><td><code>More removals of cdefs.pxi</code></td></tr></table>




---

archive/issue_comments_257253.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nCouldn't we completely get rid of `cdefs.pxi`?\nIt does not seem that useful.\nOr at least get rid of the `gmp` part within it.\n\nBy the way, your commits added an inclusion of `cdefs.pxi` in `integer.pyx`, was it intended?",
    "created_at": "2015-05-20T07:24:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18455#issuecomment-257253",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:6'>Comment 6:</a>
Couldn't we completely get rid of `cdefs.pxi`?
It does not seem that useful.
Or at least get rid of the `gmp` part within it.

By the way, your commits added an inclusion of `cdefs.pxi` in `integer.pyx`, was it intended?



---

archive/issue_comments_257254.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/370106df8a115b314ef4c50ac1ae494458c4d1b1\">370106d</a></td><td><code>Even more removals of cdefs</code></td></tr></table>\n",
    "created_at": "2015-05-20T09:29:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18455#issuecomment-257254",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:7'>Comment 7:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/370106df8a115b314ef4c50ac1ae494458c4d1b1">370106d</a></td><td><code>Even more removals of cdefs</code></td></tr></table>




---

archive/issue_comments_257255.json:
```json
{
    "body": "Changed commit from **[57e9278](https://github.com/sagemath/sagetrac-mirror/commit/57e92784a5df59af03c6f9a778a9fc295b41e038)** to **[370106d](https://github.com/sagemath/sagetrac-mirror/commit/370106df8a115b314ef4c50ac1ae494458c4d1b1)**",
    "created_at": "2015-05-20T09:29:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18455#issuecomment-257255",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[57e9278](https://github.com/sagemath/sagetrac-mirror/commit/57e92784a5df59af03c6f9a778a9fc295b41e038)** to **[370106d](https://github.com/sagemath/sagetrac-mirror/commit/370106df8a115b314ef4c50ac1ae494458c4d1b1)**



---

archive/issue_comments_257256.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nReplying to [jpflori](#comment%3A6):\n> Couldn't we completely get rid of `cdefs.pxi`?\n\nWell, there is always backwards compatibility for custom Cython code.\nIn the Sage library, we could get of it. But I'd rather not do that in this ticket, it's already big enough.\n\n> By the way, your commits added an inclusion of `cdefs.pxi` in `integer.pyx`, was it intended?\n\nYes.",
    "created_at": "2015-05-20T09:31:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18455#issuecomment-257256",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'>Comment 8:</a>
Replying to [jpflori](#comment%3A6):
> Couldn't we completely get rid of `cdefs.pxi`?

Well, there is always backwards compatibility for custom Cython code.
In the Sage library, we could get of it. But I'd rather not do that in this ticket, it's already big enough.

> By the way, your commits added an inclusion of `cdefs.pxi` in `integer.pyx`, was it intended?

Yes.



---

archive/issue_comments_257257.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nNow that #18450 is officially ready for review, I do not plan to make further changes to this ticket (unless requested by a reviewer of course).",
    "created_at": "2015-05-20T09:34:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18455#issuecomment-257257",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'>Comment 9:</a>
Now that #18450 is officially ready for review, I do not plan to make further changes to this ticket (unless requested by a reviewer of course).



---

archive/issue_comments_257258.json:
```json
{
    "body": "Reviewer: **Jean-Pierre Flori, Marc Mezzarobba**",
    "created_at": "2015-05-24T07:55:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18455#issuecomment-257258",
    "user": "https://github.com/mezzarobba"
}
```

Reviewer: **Jean-Pierre Flori, Marc Mezzarobba**



---

archive/issue_events_235766.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2015-05-24T07:55:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18455",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18455#event-235766"
}
```



---

archive/issue_events_235767.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2015-05-24T07:55:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18455",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18455#event-235767"
}
```



---

archive/issue_comments_257259.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/ticket/18455](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/18455)** to **[370106d](https://github.com/sagemath/sagetrac-mirror/commit/370106df8a115b314ef4c50ac1ae494458c4d1b1)**",
    "created_at": "2015-05-24T16:13:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18455#issuecomment-257259",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/ticket/18455](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/18455)** to **[370106d](https://github.com/sagemath/sagetrac-mirror/commit/370106df8a115b314ef4c50ac1ae494458c4d1b1)**



---

archive/issue_events_235768.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-05-24T16:13:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18455",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18455#event-235768"
}
```



---

archive/issue_events_235769.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "43ae018faf60e9cb4e73b10b67278d24f01fc78e",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-05-24T16:13:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/18455",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18455#event-235769"
}
```



---

archive/issue_comments_257260.json:
```json
{
    "body": "Changed commit from **[370106d](https://github.com/sagemath/sagetrac-mirror/commit/370106df8a115b314ef4c50ac1ae494458c4d1b1)** to none",
    "created_at": "2015-05-26T14:59:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18455#issuecomment-257260",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[370106d](https://github.com/sagemath/sagetrac-mirror/commit/370106df8a115b314ef4c50ac1ae494458c4d1b1)** to none



---

archive/issue_comments_257261.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nFollow-up: #18519",
    "created_at": "2015-05-26T14:59:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18455#issuecomment-257261",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'>Comment 12:</a>
Follow-up: #18519
