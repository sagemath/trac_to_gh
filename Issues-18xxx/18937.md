# Issue 18937: Upgrade patchbot again

archive/issues_018700.json:
```json
{
    "body": "CC:  @videlec @nathanncohen\n\nKeywords: patchbot\n\nA lot of work has been done on the patchbot since the latest update in #16872.\n\nIn particular, the ascii plugin now looks for unicode only in .py[x] missing utf8 declaration, and the patchbot does not look at spkg tickets more than once per day.\n\nThere is also an improvement in the system of trust check for code authors.\n\n**Tarball**: [http://chapoton.perso.math.cnrs.fr/patchbot-2.5.2.tar.bz2](http://chapoton.perso.math.cnrs.fr/patchbot-2.5.2.tar.bz2)\n\nIssue created by migration from https://trac.sagemath.org/ticket/18937\n\n",
    "closed_at": "2015-10-12T07:16:14Z",
    "created_at": "2015-07-22T12:36:12Z",
    "labels": [
        "component: packages: optional"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.9",
    "title": "Upgrade patchbot again",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18937",
    "user": "https://github.com/fchapoton"
}
```
CC:  @videlec @nathanncohen

Keywords: patchbot

A lot of work has been done on the patchbot since the latest update in #16872.

In particular, the ascii plugin now looks for unicode only in .py[x] missing utf8 declaration, and the patchbot does not look at spkg tickets more than once per day.

There is also an improvement in the system of trust check for code authors.

**Tarball**: [http://chapoton.perso.math.cnrs.fr/patchbot-2.5.2.tar.bz2](http://chapoton.perso.math.cnrs.fr/patchbot-2.5.2.tar.bz2)

Issue created by migration from https://trac.sagemath.org/ticket/18937





---

archive/issue_events_052825.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-07-29T06:38:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "milestone": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18937#event-52825"
}
```



---

archive/issue_comments_254630.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-08-04T09:37:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254630",
    "user": "https://github.com/fchapoton"
}
```

New commits:



---

archive/issue_comments_254631.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-20T20:27:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254631",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254632.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-08-20T20:30:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254632",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_254633.json:
```json
{
    "body": "I think that I am getting close to the correct switch to new style spkg.\n\nPlease double check !",
    "created_at": "2015-08-20T20:30:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254633",
    "user": "https://github.com/fchapoton"
}
```

I think that I am getting close to the correct switch to new style spkg.

Please double check !



---

archive/issue_comments_254634.json:
```json
{
    "body": "Just a small comment: you can replace\n\n```\nif [ -e \"$SAGE_LOCAL/bin/patchbot\" ]; then\n   rm -rf \"$SAGE_LOCAL/bin/patchbot\"\nfi\n```\nby\n\n```\nrm -rf \"$SAGE_LOCAL/bin/patchbot\"\n```",
    "created_at": "2015-08-20T21:33:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254634",
    "user": "https://github.com/jdemeyer"
}
```

Just a small comment: you can replace

```
if [ -e "$SAGE_LOCAL/bin/patchbot" ]; then
   rm -rf "$SAGE_LOCAL/bin/patchbot"
fi
```
by

```
rm -rf "$SAGE_LOCAL/bin/patchbot"
```



---

archive/issue_comments_254635.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-21T07:41:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254635",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254636.json:
```json
{
    "body": "I have simplified the spkg-install as suggested.\n\nThis package works, and has been tested, see its report on top of http://patchbot.sagemath.org/ticket/18594/\n\nNeeds review.",
    "created_at": "2015-08-21T13:22:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254636",
    "user": "https://github.com/fchapoton"
}
```

I have simplified the spkg-install as suggested.

This package works, and has been tested, see its report on top of http://patchbot.sagemath.org/ticket/18594/

Needs review.



---

archive/issue_comments_254637.json:
```json
{
    "body": "I need help, please. What is the correct top-level content of the tar archive:\n\na directory \"patchbot-2.4.0\" ? or a directory \"src\" ?",
    "created_at": "2015-08-22T16:36:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254637",
    "user": "https://github.com/fchapoton"
}
```

I need help, please. What is the correct top-level content of the tar archive:

a directory "patchbot-2.4.0" ? or a directory "src" ?



---

archive/issue_comments_254638.json:
```json
{
    "body": "Replying to [comment:11 chapoton]:\n> I need help, please. What is the correct top-level content of the tar archive:\n> \n> a directory \"patchbot-2.4.0\" ? or a directory \"src\" ?\n\n\nI'd say: anything is fine, as long as it works.",
    "created_at": "2015-08-23T19:59:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254638",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:11 chapoton]:
> I need help, please. What is the correct top-level content of the tar archive:
> 
> a directory "patchbot-2.4.0" ? or a directory "src" ?


I'd say: anything is fine, as long as it works.



---

archive/issue_comments_254639.json:
```json
{
    "body": "This is a problem:\n\n```\nTraceback (most recent call last):\n  File \"/home/patchbot/sage-patchbot/local/bin/patchbot/patchbot.py\", line 45, in <module>\n    from trac import scrape, pull_from_trac\n  File \"/home/patchbot/sage-patchbot/local/bin/patchbot/trac.py\", line 15, in <module>\n    from util import (do_or_die, now_str, describe_branch,\n  File \"/home/patchbot/sage-patchbot/local/bin/patchbot/util.py\", line 7, in <module>\n    import pytz\nImportError: No module named pytz\n```",
    "created_at": "2015-08-26T17:54:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254639",
    "user": "https://github.com/jdemeyer"
}
```

This is a problem:

```
Traceback (most recent call last):
  File "/home/patchbot/sage-patchbot/local/bin/patchbot/patchbot.py", line 45, in <module>
    from trac import scrape, pull_from_trac
  File "/home/patchbot/sage-patchbot/local/bin/patchbot/trac.py", line 15, in <module>
    from util import (do_or_die, now_str, describe_branch,
  File "/home/patchbot/sage-patchbot/local/bin/patchbot/util.py", line 7, in <module>
    import pytz
ImportError: No module named pytz
```



---

archive/issue_comments_254640.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-08-26T17:54:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254640",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_254641.json:
```json
{
    "body": "Instead of `wget`, why not use `sage-download-file` which will work on every system?",
    "created_at": "2015-08-27T07:14:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254641",
    "user": "https://github.com/jdemeyer"
}
```

Instead of `wget`, why not use `sage-download-file` which will work on every system?



---

archive/issue_comments_254642.json:
```json
{
    "body": "The patchbot is not Python 3 compatible:\n\n```\n  File \"/usr/local/src/sage-git/local/bin/patchbot/patchbot.py\", line 128\n    print datetime()\n                 ^\nSyntaxError: invalid syntax\n```",
    "created_at": "2015-08-27T07:42:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254642",
    "user": "https://github.com/jdemeyer"
}
```

The patchbot is not Python 3 compatible:

```
  File "/usr/local/src/sage-git/local/bin/patchbot/patchbot.py", line 128
    print datetime()
                 ^
SyntaxError: invalid syntax
```



---

archive/issue_comments_254643.json:
```json
{
    "body": "Yes, indeed. Several print statements are problematic.. Should I try to switch to python3 only, or really try to make a code that can run in both py2 and py3 ?",
    "created_at": "2015-08-27T07:47:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254643",
    "user": "https://github.com/fchapoton"
}
```

Yes, indeed. Several print statements are problematic.. Should I try to switch to python3 only, or really try to make a code that can run in both py2 and py3 ?



---

archive/issue_comments_254644.json:
```json
{
    "body": "Since you're using the system Python, you really need to support both Python 2 and Python 3.\n\nHowever, you might be able to use the `2to3` tool at install-time to solve this.",
    "created_at": "2015-08-27T07:54:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254644",
    "user": "https://github.com/jdemeyer"
}
```

Since you're using the system Python, you really need to support both Python 2 and Python 3.

However, you might be able to use the `2to3` tool at install-time to solve this.



---

archive/issue_comments_254645.json:
```json
{
    "body": "The upstream github repo contains a `spkg-install` file which is not the same as the one in Sage. Can you also update it upstream please?",
    "created_at": "2015-08-27T07:59:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254645",
    "user": "https://github.com/jdemeyer"
}
```

The upstream github repo contains a `spkg-install` file which is not the same as the one in Sage. Can you also update it upstream please?



---

archive/issue_comments_254646.json:
```json
{
    "body": "May I instead remove the \"spkg-install\" and the \"SPKG.txt\" completely inside the tar ball ?",
    "created_at": "2015-08-27T08:48:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254646",
    "user": "https://github.com/fchapoton"
}
```

May I instead remove the "spkg-install" and the "SPKG.txt" completely inside the tar ball ?



---

archive/issue_comments_254647.json:
```json
{
    "body": "Replying to [comment:19 chapoton]:\n> May I instead remove the \"spkg-install\" and the \"SPKG.txt\" completely inside the tar ball ?\n\n\nYes, under the condition that the patchbot can be easily installed from the sources (which is the case currently, just copy/symlink the whole directory).\n\nIf (for whatever reason) the installation procedure needs to become more complicated, that complexity should go to an install script inside the sources, not to `spkg-install`. It should not become a *requirement* to use Sage's `spkg-install` to install the patchbot.",
    "created_at": "2015-08-28T10:23:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254647",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:19 chapoton]:
> May I instead remove the "spkg-install" and the "SPKG.txt" completely inside the tar ball ?


Yes, under the condition that the patchbot can be easily installed from the sources (which is the case currently, just copy/symlink the whole directory).

If (for whatever reason) the installation procedure needs to become more complicated, that complexity should go to an install script inside the sources, not to `spkg-install`. It should not become a *requirement* to use Sage's `spkg-install` to install the patchbot.



---

archive/issue_comments_254648.json:
```json
{
    "body": "Hello,\n\nI am having trouble to get the patchbot running on python3, because of severe encoding problems. Would it be possible to keep this enhancement for a later upgrading of the patchbot spkg ?",
    "created_at": "2015-08-28T18:32:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254648",
    "user": "https://github.com/fchapoton"
}
```

Hello,

I am having trouble to get the patchbot running on python3, because of severe encoding problems. Would it be possible to keep this enhancement for a later upgrading of the patchbot spkg ?



---

archive/issue_comments_254649.json:
```json
{
    "body": "Fine for me, but I would really prefer to see the system-wide dependencies reduced, in particular the `pytz` package, which is not installed by default on many operating systems.",
    "created_at": "2015-08-29T15:25:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254649",
    "user": "https://github.com/jdemeyer"
}
```

Fine for me, but I would really prefer to see the system-wide dependencies reduced, in particular the `pytz` package, which is not installed by default on many operating systems.



---

archive/issue_comments_254650.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-30T15:42:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254650",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254651.json:
```json
{
    "body": "Ok, here is a version without need for pytz. It still needs dateutil, but it would be hard\nto do without anything to handle timezones..\n\nThis is not working in python3, because of encoding problems. Still I think it would be good to have a recent patchbot in the new style spkg.\n\nThis patchbot has not yet been run on a ticket.",
    "created_at": "2015-08-30T15:46:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254651",
    "user": "https://github.com/fchapoton"
}
```

Ok, here is a version without need for pytz. It still needs dateutil, but it would be hard
to do without anything to handle timezones..

This is not working in python3, because of encoding problems. Still I think it would be good to have a recent patchbot in the new style spkg.

This patchbot has not yet been run on a ticket.



---

archive/issue_comments_254652.json:
```json
{
    "body": "I think this is good to go, and so set to needs_review",
    "created_at": "2015-09-01T09:47:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254652",
    "user": "https://github.com/fchapoton"
}
```

I think this is good to go, and so set to needs_review



---

archive/issue_comments_254653.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-09-01T09:47:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254653",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_254654.json:
```json
{
    "body": "It is highly recommended to add a `build/pkgs/patchbot/dependencies` file.",
    "created_at": "2015-09-01T09:53:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254654",
    "user": "https://github.com/jdemeyer"
}
```

It is highly recommended to add a `build/pkgs/patchbot/dependencies` file.



---

archive/issue_comments_254655.json:
```json
{
    "body": "You just added an additional dependency on `six`:\n\n```\nTraceback (most recent call last):\n  File \"/home/worker/sage-patchbot/local/bin/patchbot/patchbot.py\", line 41, in <module>\n    from six.moves import cPickle as pickle\nImportError: No module named six.moves\n```",
    "created_at": "2015-09-01T09:53:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254655",
    "user": "https://github.com/jdemeyer"
}
```

You just added an additional dependency on `six`:

```
Traceback (most recent call last):
  File "/home/worker/sage-patchbot/local/bin/patchbot/patchbot.py", line 41, in <module>
    from six.moves import cPickle as pickle
ImportError: No module named six.moves
```



---

archive/issue_comments_254656.json:
```json
{
    "body": "Another question: why is `safe_only=True` the default? Why is there such an option in the first place?",
    "created_at": "2015-09-01T09:56:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254656",
    "user": "https://github.com/jdemeyer"
}
```

Another question: why is `safe_only=True` the default? Why is there such an option in the first place?



---

archive/issue_comments_254657.json:
```json
{
    "body": "Since the need for `six` is again quite trivial, could you just replace the 2 uses of `six` by some logic like\n\n```\ntry:\n    import ...\nexcept ImportError:\n    import ...\n```",
    "created_at": "2015-09-01T10:30:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254657",
    "user": "https://github.com/jdemeyer"
}
```

Since the need for `six` is again quite trivial, could you just replace the 2 uses of `six` by some logic like

```
try:
    import ...
except ImportError:
    import ...
```



---

archive/issue_comments_254658.json:
```json
{
    "body": "* Ok, I will remove the dependency on six.\n\n* What should I put in the build/pkgs/patchbot/dependencies ? This is not explained in the doc\n\nhttp://doc.sagemath.org/html/en/developer/packaging.html\n\nIt is not clear to me if I should write there shell commands, python packages, or both.\n\n* Concerning the safe-only mode, this is certainly not perfect. I guess its main aim is to avoid the horribly long recompilation that can take place sometimes when some low-level things are changed. Patchbot users are always free to change the default setting. It is up to them to decide whether or not they test all the tickets, including some that may take a **lot** of time.",
    "created_at": "2015-09-01T11:40:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254658",
    "user": "https://github.com/fchapoton"
}
```

* Ok, I will remove the dependency on six.

* What should I put in the build/pkgs/patchbot/dependencies ? This is not explained in the doc

http://doc.sagemath.org/html/en/developer/packaging.html

It is not clear to me if I should write there shell commands, python packages, or both.

* Concerning the safe-only mode, this is certainly not perfect. I guess its main aim is to avoid the horribly long recompilation that can take place sometimes when some low-level things are changed. Patchbot users are always free to change the default setting. It is up to them to decide whether or not they test all the tickets, including some that may take a **lot** of time.



---

archive/issue_comments_254659.json:
```json
{
    "body": "Replying to [comment:31 chapoton]:\n> * What should I put in the build/pkgs/patchbot/dependencies ? This is not explained in the doc\n\n\nTrue, the documentation is lacking. For the patchbot, I think there are no dependencies, so something like\n\n```\n# No dependencies\n```\nshould be fine.\n\n> * Concerning the safe-only mode, this is certainly not perfect. I guess its main aim is to avoid the horribly long recompilation that can take place sometimes when some low-level things are changed.\n \nIf that is the reason, the name `safe_only` looks badly chosen: it seems to imply that testing other tickets is \"unsafe\" somehow.\n\n> Patchbot users are always free to change the default setting. It is up to them to decide whether or not they test all the tickets, including some that may take a **lot** of time.\n\nPersonally, I would prefer to have `safe_only=False` by default. I think that most patchbots are running all the time, so I don't see the problem.",
    "created_at": "2015-09-01T11:54:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254659",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:31 chapoton]:
> * What should I put in the build/pkgs/patchbot/dependencies ? This is not explained in the doc


True, the documentation is lacking. For the patchbot, I think there are no dependencies, so something like

```
# No dependencies
```
should be fine.

> * Concerning the safe-only mode, this is certainly not perfect. I guess its main aim is to avoid the horribly long recompilation that can take place sometimes when some low-level things are changed.
 
If that is the reason, the name `safe_only` looks badly chosen: it seems to imply that testing other tickets is "unsafe" somehow.

> Patchbot users are always free to change the default setting. It is up to them to decide whether or not they test all the tickets, including some that may take a **lot** of time.

Personally, I would prefer to have `safe_only=False` by default. I think that most patchbots are running all the time, so I don't see the problem.



---

archive/issue_comments_254660.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-01T13:56:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254660",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254661.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-01T13:59:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254661",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254662.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-01T14:04:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254662",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254663.json:
```json
{
    "body": "ok, here is a version without six, and with a dependencies file added",
    "created_at": "2015-09-01T14:05:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254663",
    "user": "https://github.com/fchapoton"
}
```

ok, here is a version without six, and with a dependencies file added



---

archive/issue_comments_254664.json:
```json
{
    "body": "Is there a difference between\n\n```\ndatetime.now()\n```\nand\n\n```\ndatetime.now(tzlocal())\n```\nand between\n\n```\ndatetime.utcnow()\n```\nand\n\n```\ndatetime.now(tzutc())\n```",
    "created_at": "2015-09-03T07:35:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254664",
    "user": "https://github.com/jdemeyer"
}
```

Is there a difference between

```
datetime.now()
```
and

```
datetime.now(tzlocal())
```
and between

```
datetime.utcnow()
```
and

```
datetime.now(tzutc())
```



---

archive/issue_comments_254665.json:
```json
{
    "body": "Apart from [comment:37], the only remaining use of `dateutil` is `dateutil.parser`.",
    "created_at": "2015-09-03T07:38:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254665",
    "user": "https://github.com/jdemeyer"
}
```

Apart from [comment:37], the only remaining use of `dateutil` is `dateutil.parser`.



---

archive/issue_comments_254666.json:
```json
{
    "body": "In fact, there is a **big** difference between datetime.utcnow() and datetime.now(tzutc())\n\n* `datetime.utcnow()` does not have any information about its timezone\n* `datetime.now(tzutc())` is an object that knows that it is in UTC timezone\n\nBecause I want to take differences between times, the clean way is to make pretty sure\nthat all datetimes are aware of their own timezones.\n\nGiven the nature of the patchbot, which is to receive and compare data from all over the world, I think there is no point in trying to get rid of the dateutil package.",
    "created_at": "2015-09-03T07:47:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254666",
    "user": "https://github.com/fchapoton"
}
```

In fact, there is a **big** difference between datetime.utcnow() and datetime.now(tzutc())

* `datetime.utcnow()` does not have any information about its timezone
* `datetime.now(tzutc())` is an object that knows that it is in UTC timezone

Because I want to take differences between times, the clean way is to make pretty sure
that all datetimes are aware of their own timezones.

Given the nature of the patchbot, which is to receive and compare data from all over the world, I think there is no point in trying to get rid of the dateutil package.



---

archive/issue_comments_254667.json:
```json
{
    "body": "Well, the patchbot package worked fine for a long time without `dateutil`, so there is no fundamental reason why we need it. We could do the replacements in [comment:37] and revert the `parse_datetime` function to what it was in earlier patchbot versions and have the patchbot \"just work\" that way.",
    "created_at": "2015-09-03T09:02:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254667",
    "user": "https://github.com/jdemeyer"
}
```

Well, the patchbot package worked fine for a long time without `dateutil`, so there is no fundamental reason why we need it. We could do the replacements in [comment:37] and revert the `parse_datetime` function to what it was in earlier patchbot versions and have the patchbot "just work" that way.



---

archive/issue_comments_254668.json:
```json
{
    "body": "Is there any fundamental reason why we should avoid any dependency ? Should we trade at all prize clean code for code which may be approximate but our own ?\n\nI am grateful that you look at the patchbot code. Nevertheless, during this time, sage4 using patchbot 2.3.3 is just spending its time looptesting #258, once every two minutes. Maybe you should rather stop it.\n\nThe patchbot has several issues, the main one in my opinion being the recognition of trusted users, that is currently not good at all. I hope that it will not be necessary to solve all the issues in order to have a new style spkg.",
    "created_at": "2015-09-03T09:49:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254668",
    "user": "https://github.com/fchapoton"
}
```

Is there any fundamental reason why we should avoid any dependency ? Should we trade at all prize clean code for code which may be approximate but our own ?

I am grateful that you look at the patchbot code. Nevertheless, during this time, sage4 using patchbot 2.3.3 is just spending its time looptesting #258, once every two minutes. Maybe you should rather stop it.

The patchbot has several issues, the main one in my opinion being the recognition of trusted users, that is currently not good at all. I hope that it will not be necessary to solve all the issues in order to have a new style spkg.



---

archive/issue_comments_254669.json:
```json
{
    "body": "Replying to [comment:41 chapoton]:\n> Is there any fundamental reason why we should avoid any dependency ?\n\nYes: `patchbot` would be the only Sage package which has dependencies beyond Sage. Installing packages system-wide is a big requirement.",
    "created_at": "2015-09-03T13:50:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254669",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:41 chapoton]:
> Is there any fundamental reason why we should avoid any dependency ?

Yes: `patchbot` would be the only Sage package which has dependencies beyond Sage. Installing packages system-wide is a big requirement.



---

archive/issue_comments_254670.json:
```json
{
    "body": "> Yes: `patchbot` would be the only Sage package which has dependencies beyond Sage. \n\n\nhttps://groups.google.com/d/msg/sage-devel/-oLvlyvbclA/GXK3UjXVCwAJ\n\n> Installing packages system-wide is a big requirement.\n\n\nFor those who install the patchbot? Come on, who installs that except developpers? If they get a message saying that \"X must be installed\" they will install it, and that's it.\n\nTo install mine I had to fight for days, create an user account only for the patchbot, fight with ccache... Having a system dependency like that really isn't a problem (if an explicit error message appears).\n\nNathann",
    "created_at": "2015-09-03T14:20:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254670",
    "user": "https://github.com/nathanncohen"
}
```

> Yes: `patchbot` would be the only Sage package which has dependencies beyond Sage. 


https://groups.google.com/d/msg/sage-devel/-oLvlyvbclA/GXK3UjXVCwAJ

> Installing packages system-wide is a big requirement.


For those who install the patchbot? Come on, who installs that except developpers? If they get a message saying that "X must be installed" they will install it, and that's it.

To install mine I had to fight for days, create an user account only for the patchbot, fight with ccache... Having a system dependency like that really isn't a problem (if an explicit error message appears).

Nathann



---

archive/issue_comments_254671.json:
```json
{
    "body": "Jeroen, do you object if this is made a new-style spkg in its current state ?\n\nVersion 2.4.2 works well, it is now running quite smoothly on arando since a long time.\n\nI would really like the patchbot to survive the \"disparition\" of old-style spkgs..",
    "created_at": "2015-09-10T19:58:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254671",
    "user": "https://github.com/fchapoton"
}
```

Jeroen, do you object if this is made a new-style spkg in its current state ?

Version 2.4.2 works well, it is now running quite smoothly on arando since a long time.

I would really like the patchbot to survive the "disparition" of old-style spkgs..



---

archive/issue_comments_254672.json:
```json
{
    "body": "There is no such thing as disparation of old style package. We will still be able to do\n\n```\nsage -i FULL_URL_OF_OLD_PKG\n```\n\nNote that having new style package for the patchbot is much less flexible then the old one (i.e. you have to wait the next release to have the patchbot updated).",
    "created_at": "2015-09-10T22:32:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254672",
    "user": "https://github.com/videlec"
}
```

There is no such thing as disparation of old style package. We will still be able to do

```
sage -i FULL_URL_OF_OLD_PKG
```

Note that having new style package for the patchbot is much less flexible then the old one (i.e. you have to wait the next release to have the patchbot updated).



---

archive/issue_comments_254673.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-11T19:49:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254673",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254674.json:
```json
{
    "body": "Here is major new version 2.4.3\n\nI have enhanced the trust control, hereby reducing the number of tickets that were not tested for wrong reasons. But this will work better if all people that run patchbots agree to update their patchbots.\n\nTherefore this ticket needs review, more than ever.",
    "created_at": "2015-09-11T19:53:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254674",
    "user": "https://github.com/fchapoton"
}
```

Here is major new version 2.4.3

I have enhanced the trust control, hereby reducing the number of tickets that were not tested for wrong reasons. But this will work better if all people that run patchbots agree to update their patchbots.

Therefore this ticket needs review, more than ever.



---

archive/issue_comments_254675.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-09-11T22:59:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254675",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_254676.json:
```json
{
    "body": "Would be better with a working patchbot... break after ten seconds with\n\n```\n[2015-09-11 22:58:44 +0000] Getting ticket list...\nTraceback (most recent call last):\n  File \"/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py\", line 1316, in main\n    patchbot.test_a_ticket(ticket)\n  File \"/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py\", line 846, in test_a_ticket\n    rating, ticket = self.get_one_ticket()\n  File \"/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py\", line 672, in get_one_ticket\n    for t in all))\n  File \"/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py\", line 672, in <genexpr>\n    for t in all))\n  File \"/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py\", line 728, in rate_ticket\n    if not ticket['authors_fullnames']:\nKeyError: 'authors_fullnames'\n```",
    "created_at": "2015-09-11T22:59:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254676",
    "user": "https://github.com/videlec"
}
```

Would be better with a working patchbot... break after ten seconds with

```
[2015-09-11 22:58:44 +0000] Getting ticket list...
Traceback (most recent call last):
  File "/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py", line 1316, in main
    patchbot.test_a_ticket(ticket)
  File "/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py", line 846, in test_a_ticket
    rating, ticket = self.get_one_ticket()
  File "/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py", line 672, in get_one_ticket
    for t in all))
  File "/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py", line 672, in <genexpr>
    for t in all))
  File "/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py", line 728, in rate_ticket
    if not ticket['authors_fullnames']:
KeyError: 'authors_fullnames'
```



---

archive/issue_comments_254677.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-12T07:47:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254677",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254678.json:
```json
{
    "body": "I am very sorry. I was a bit over-enthusiastic for having an idea to solve the trust-checking issue. This should work now.\n\nBy the way, what will happen if I do\n\n```\nsage -i patchbot-2.4.9\n```\nwith a future instance of the new-style spkg ?\nIn other words, can one install new-style spkg updates in that way ?",
    "created_at": "2015-09-12T07:50:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254678",
    "user": "https://github.com/fchapoton"
}
```

I am very sorry. I was a bit over-enthusiastic for having an idea to solve the trust-checking issue. This should work now.

By the way, what will happen if I do

```
sage -i patchbot-2.4.9
```
with a future instance of the new-style spkg ?
In other words, can one install new-style spkg updates in that way ?



---

archive/issue_comments_254679.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-09-12T07:56:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254679",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_254680.json:
```json
{
    "body": "You should seriously test the patchbot before posting a new tarball here...\n\n```\n19158: Pending\nok (report successfully posted)\n2015-09-12 14:22:29 +0000\nTraceback (most recent call last):\n  File \"/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py\", line 886, in test_a_ticket\n    print(self.banner())\nUnicodeEncodeError: 'ascii' codec can't encode characters in position 0-9: ordinal not in range(128)\n2015-09-12 14:22:29 +0000\n0 seconds\n[2015-09-12 14:22:31 +0000] An exception has been raised during the test of #19158\nTraceback (most recent call last):\n  File \"/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py\", line 886, in test_a_ticket\n    print(self.banner())\nUnicodeEncodeError: 'ascii' codec can't encode characters in position 0-9: ordinal not in range(128)\nTraceback (most recent call last):\n  File \"/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py\", line 1316, in main\n    patchbot.test_a_ticket(ticket)\n  File \"/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py\", line 1023, in test_a_ticket\n    self.write_log(\"Reporting #{} with status {}\".format(ticket['id'], status[state]),\nUnboundLocalError: local variable 'state' referenced before assignment\n```",
    "created_at": "2015-09-12T14:23:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254680",
    "user": "https://github.com/videlec"
}
```

You should seriously test the patchbot before posting a new tarball here...

```
19158: Pending
ok (report successfully posted)
2015-09-12 14:22:29 +0000
Traceback (most recent call last):
  File "/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py", line 886, in test_a_ticket
    print(self.banner())
UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-9: ordinal not in range(128)
2015-09-12 14:22:29 +0000
0 seconds
[2015-09-12 14:22:31 +0000] An exception has been raised during the test of #19158
Traceback (most recent call last):
  File "/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py", line 886, in test_a_ticket
    print(self.banner())
UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-9: ordinal not in range(128)
Traceback (most recent call last):
  File "/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py", line 1316, in main
    patchbot.test_a_ticket(ticket)
  File "/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py", line 1023, in test_a_ticket
    self.write_log("Reporting #{} with status {}".format(ticket['id'], status[state]),
UnboundLocalError: local variable 'state' referenced before assignment
```



---

archive/issue_comments_254681.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-09-12T14:23:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254681",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_254682.json:
```json
{
    "body": "I had tested it, but obviously not enough.. I'm testing usually inside a ipython session.\n\nDifficulties with utf8, I find them quite hard and messy.",
    "created_at": "2015-09-12T15:40:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254682",
    "user": "https://github.com/fchapoton"
}
```

I had tested it, but obviously not enough.. I'm testing usually inside a ipython session.

Difficulties with utf8, I find them quite hard and messy.



---

archive/issue_comments_254683.json:
```json
{
    "body": "`@`vincent: maybe it is your terminal that does not support utf8 ?\n\nI do not see this problem when I try to test the same ticket.",
    "created_at": "2015-09-12T16:04:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254683",
    "user": "https://github.com/fchapoton"
}
```

`@`vincent: maybe it is your terminal that does not support utf8 ?

I do not see this problem when I try to test the same ticket.



---

archive/issue_comments_254684.json:
```json
{
    "body": "Perhaps my terminal is messy but anyway the final traceback is\n\n```\nTraceback (most recent call last):\n  File \"/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py\", line 1316, in main\n    patchbot.test_a_ticket(ticket)\n  File \"/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py\", line 1023, in test_a_ticket\n    self.write_log(\"Reporting #{} with status {}\".format(ticket['id'], status[state]),\nUnboundLocalError: local variable 'state' referenced before assignment\n```\nwhich tells that something is wrong.\n\nAnyway, it used to work with the very same terminal.",
    "created_at": "2015-09-12T17:22:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254684",
    "user": "https://github.com/videlec"
}
```

Perhaps my terminal is messy but anyway the final traceback is

```
Traceback (most recent call last):
  File "/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py", line 1316, in main
    patchbot.test_a_ticket(ticket)
  File "/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py", line 1023, in test_a_ticket
    self.write_log("Reporting #{} with status {}".format(ticket['id'], status[state]),
UnboundLocalError: local variable 'state' referenced before assignment
```
which tells that something is wrong.

Anyway, it used to work with the very same terminal.



---

archive/issue_comments_254685.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-13T15:55:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254685",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254686.json:
```json
{
    "body": "Vincent or Jeroen, would you please try that one ? I do no longer dare to put that into needs_review... :(",
    "created_at": "2015-09-14T16:40:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254686",
    "user": "https://github.com/fchapoton"
}
```

Vincent or Jeroen, would you please try that one ? I do no longer dare to put that into needs_review... :(



---

archive/issue_comments_254687.json:
```json
{
    "body": "Same problem as before\n\n```\n2015-09-14 16:50:06 +0000\nTraceback (most recent call last):\n  File \"/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py\", line 889, in test_a_ticket\n    print(self.banner())\nUnicodeEncodeError: 'ascii' codec can't encode characters in position 0-9: ordinal not in range(128)\n2015-09-14 16:50:06 +0000\n0 seconds\n```",
    "created_at": "2015-09-14T16:50:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254687",
    "user": "https://github.com/videlec"
}
```

Same problem as before

```
2015-09-14 16:50:06 +0000
Traceback (most recent call last):
  File "/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py", line 889, in test_a_ticket
    print(self.banner())
UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-9: ordinal not in range(128)
2015-09-14 16:50:06 +0000
0 seconds
```



---

archive/issue_comments_254688.json:
```json
{
    "body": "damn.. could you please check your terminal utf8 capacities ?",
    "created_at": "2015-09-14T20:11:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254688",
    "user": "https://github.com/fchapoton"
}
```

damn.. could you please check your terminal utf8 capacities ?



---

archive/issue_comments_254689.json:
```json
{
    "body": "Works perfectly with version 2.3.9 of the patchbot.",
    "created_at": "2015-09-14T23:37:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254689",
    "user": "https://github.com/videlec"
}
```

Works perfectly with version 2.3.9 of the patchbot.



---

archive/issue_comments_254690.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-15T13:19:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254690",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254691.json:
```json
{
    "body": "I think that I have solved this problem of utf8. Please check.",
    "created_at": "2015-09-15T13:21:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254691",
    "user": "https://github.com/fchapoton"
}
```

I think that I have solved this problem of utf8. Please check.



---

archive/issue_comments_254692.json:
```json
{
    "body": "At least it started! Yipee! It currently runs on librae. Let see what happens.\n\nVincent",
    "created_at": "2015-09-15T13:29:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254692",
    "user": "https://github.com/videlec"
}
```

At least it started! Yipee! It currently runs on librae. Let see what happens.

Vincent



---

archive/issue_comments_254693.json:
```json
{
    "body": "Remains the question about Python module dependencies... what is the current status?\n\nCould you also split the very long line in SPKG.txt?\n\nVincent",
    "created_at": "2015-09-15T21:36:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254693",
    "user": "https://github.com/videlec"
}
```

Remains the question about Python module dependencies... what is the current status?

Could you also split the very long line in SPKG.txt?

Vincent



---

archive/issue_comments_254694.json:
```json
{
    "body": "Changing status from needs_work to needs_info.",
    "created_at": "2015-09-15T21:36:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254694",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_work to needs_info.



---

archive/issue_comments_254695.json:
```json
{
    "body": "In the `history.txt` file I got some strange missing things\n\n```\n[2015-09-15 15:25:11 +0000] #19001: starting tests\n[2015-09-15 16:00:53 +0000] #19001: TestsPassed\n[2015-09-15 16:01:10 +0000] #19043: starting tests\n[2015-09-15 16:01:26 +0000] #19048: starting tests\n[2015-09-15 16:02:21 +0000] #19068: starting tests\n```\nIndeed #19043 is unsafe and was skipped. But this does not appear in the history.\n\nFor #19048 I think that something gets wrong because in `patchbot.log` I got\n\n```\n[2015-09-15 16:02:09 +0000] An exception has been raised during the test of #19048\n```\nWhich is not very precise. Looking at 19048-log.txt it appears that\n\n```\n[calculus ] reading sources... [  5%] sage/calculus/calculus\nError building the documentation.\nTraceback (most recent call last):\n  File \"/home/vincent/sage_patchbot/src/doc/common/builder.py\", line 1626, in <module>\n    getattr(get_builder(name), type)()\n  File \"/home/vincent/sage_patchbot/src/doc/common/builder.py\", line 292, in _wrapper\n    getattr(get_builder(document), 'inventory')(*args, **kwds)\n  File \"/home/vincent/sage_patchbot/src/doc/common/builder.py\", line 503, in _wrapper\n    x.get(99999)\n  File \"/home/vincent/sage_patchbot/local/lib/python/multiprocessing/pool.py\", line 558, in get\n    raise self._value\nOSError: [rings    ] /home/vincent/sage_patchbot/local/lib/python2.7/site-packages/sage/rings/asymptotic/asymptotic_ring.py:docstring of sage.rings.asymptotic.asymptotic_ring:16: ERROR: Unexpected indentation.\n```\nSo the report status should be that the documentation does not build... the error was catched but somehow misinterpreted.\n\nVincent",
    "created_at": "2015-09-15T22:42:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254695",
    "user": "https://github.com/videlec"
}
```

In the `history.txt` file I got some strange missing things

```
[2015-09-15 15:25:11 +0000] #19001: starting tests
[2015-09-15 16:00:53 +0000] #19001: TestsPassed
[2015-09-15 16:01:10 +0000] #19043: starting tests
[2015-09-15 16:01:26 +0000] #19048: starting tests
[2015-09-15 16:02:21 +0000] #19068: starting tests
```
Indeed #19043 is unsafe and was skipped. But this does not appear in the history.

For #19048 I think that something gets wrong because in `patchbot.log` I got

```
[2015-09-15 16:02:09 +0000] An exception has been raised during the test of #19048
```
Which is not very precise. Looking at 19048-log.txt it appears that

```
[calculus ] reading sources... [  5%] sage/calculus/calculus
Error building the documentation.
Traceback (most recent call last):
  File "/home/vincent/sage_patchbot/src/doc/common/builder.py", line 1626, in <module>
    getattr(get_builder(name), type)()
  File "/home/vincent/sage_patchbot/src/doc/common/builder.py", line 292, in _wrapper
    getattr(get_builder(document), 'inventory')(*args, **kwds)
  File "/home/vincent/sage_patchbot/src/doc/common/builder.py", line 503, in _wrapper
    x.get(99999)
  File "/home/vincent/sage_patchbot/local/lib/python/multiprocessing/pool.py", line 558, in get
    raise self._value
OSError: [rings    ] /home/vincent/sage_patchbot/local/lib/python2.7/site-packages/sage/rings/asymptotic/asymptotic_ring.py:docstring of sage.rings.asymptotic.asymptotic_ring:16: ERROR: Unexpected indentation.
```
So the report status should be that the documentation does not build... the error was catched but somehow misinterpreted.

Vincent



---

archive/issue_comments_254696.json:
```json
{
    "body": "Comes from this commit\n\n```\ncommit f648b882bebdb033e423fe038237dad3f1e5df1e\nAuthor: Fr\u00e9d\u00e9ric Chapoton <chapoton@math.univ-lyon1.fr>\nDate:   Mon Mar 30 14:24:22 2015 +0200\n\n    little more doc\n\n```\nit desactivate the docbuild plugin and hence does not catch error when building the documentation.\n\nEDIT: not sure that it was fine before the mentioned commit... because the build would have failed anyway.",
    "created_at": "2015-09-15T22:45:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254696",
    "user": "https://github.com/videlec"
}
```

Comes from this commit

```
commit f648b882bebdb033e423fe038237dad3f1e5df1e
Author: Frédéric Chapoton <chapoton@math.univ-lyon1.fr>
Date:   Mon Mar 30 14:24:22 2015 +0200

    little more doc

```
it desactivate the docbuild plugin and hence does not catch error when building the documentation.

EDIT: not sure that it was fine before the mentioned commit... because the build would have failed anyway.



---

archive/issue_comments_254697.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2015-09-15T22:45:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254697",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_254698.json:
```json
{
    "body": "1) the html doc is now always build, when doing make, so the plugin is not activated to avoid a duplicate. There is also a pdf-doc plugin, not activated by default.\n\n2) \"An exception has been raised during the test\" is now raised when nothing is known about the exception. Maybe this was a wrong change, and should be reverted ?\n\n3) concerning python dependencies, there is only dateutil. I would prefer to keep it, because it makes sense to have a correct handling of timezones in a world-wide server.",
    "created_at": "2015-09-16T08:13:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254698",
    "user": "https://github.com/fchapoton"
}
```

1) the html doc is now always build, when doing make, so the plugin is not activated to avoid a duplicate. There is also a pdf-doc plugin, not activated by default.

2) "An exception has been raised during the test" is now raised when nothing is known about the exception. Maybe this was a wrong change, and should be reverted ?

3) concerning python dependencies, there is only dateutil. I would prefer to keep it, because it makes sense to have a correct handling of timezones in a world-wide server.



---

archive/issue_comments_254699.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-16T09:27:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254699",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254700.json:
```json
{
    "body": "Replying to [comment:69 chapoton]:\n> 1) the html doc is now always build, when doing make, so the plugin is not activated to avoid a duplicate. There is also a pdf-doc plugin, not activated by default.\n> \n> 2) \"An exception has been raised during the test\" is now raised when nothing is known about the exception. Maybe this was a wrong change, and should be reverted ?\n\n\nThis is a clear problem. The patchbot did report nothing to #19048 where it should have said documentation failed to build. I do not know how it handled it before but I thought that the patchbot did report some kind of \"documentation failed\" as a status. Though, the main problem is not the fact that it does not know what kind of error it is (you can figure out from the log) but the fact that the patchbot did not send the log to the server...\n\n> 3) concerning python dependencies, there is only dateutil. I would prefer to keep it, because it makes sense to have a correct handling of timezones in a world-wide server.\n\n\nThen perhaps its presence could be checked in the installation script?",
    "created_at": "2015-09-16T13:28:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254700",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:69 chapoton]:
> 1) the html doc is now always build, when doing make, so the plugin is not activated to avoid a duplicate. There is also a pdf-doc plugin, not activated by default.
> 
> 2) "An exception has been raised during the test" is now raised when nothing is known about the exception. Maybe this was a wrong change, and should be reverted ?


This is a clear problem. The patchbot did report nothing to #19048 where it should have said documentation failed to build. I do not know how it handled it before but I thought that the patchbot did report some kind of "documentation failed" as a status. Though, the main problem is not the fact that it does not know what kind of error it is (you can figure out from the log) but the fact that the patchbot did not send the log to the server...

> 3) concerning python dependencies, there is only dateutil. I would prefer to keep it, because it makes sense to have a correct handling of timezones in a world-wide server.


Then perhaps its presence could be checked in the installation script?



---

archive/issue_comments_254701.json:
```json
{
    "body": "Replying to [comment:71 vdelecroix]:\n> Then perhaps its presence could be checked in the installation script?\n\n\nOr, alternatively, remove the artificial dependency on `dateutil`.\n\nI still find it hard to believe that something as trivial as a patchbot needs to deal with timezones (and, if you look at the code, it doesn't actually deal with different timezones). You could just assume all times to be in UTC, problem solved.",
    "created_at": "2015-09-16T13:58:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254701",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:71 vdelecroix]:
> Then perhaps its presence could be checked in the installation script?


Or, alternatively, remove the artificial dependency on `dateutil`.

I still find it hard to believe that something as trivial as a patchbot needs to deal with timezones (and, if you look at the code, it doesn't actually deal with different timezones). You could just assume all times to be in UTC, problem solved.



---

archive/issue_comments_254702.json:
```json
{
    "body": "ok, ok, I will now remove dateutil dependencies.\n\nCurrently doc failure should be reported as BuildFailed, but I may have broken that.",
    "created_at": "2015-09-16T14:24:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254702",
    "user": "https://github.com/fchapoton"
}
```

ok, ok, I will now remove dateutil dependencies.

Currently doc failure should be reported as BuildFailed, but I may have broken that.



---

archive/issue_comments_254703.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-17T08:40:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254703",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254704.json:
```json
{
    "body": "Ok, here is a new version, again (I am starting to get tired to work on a patchbot that nobody uses).\n\nIt does no longer depends on dateutil.\n\nIt has a better log in history.txt for skipped tickets.\n\nThe doc plugin has been reactivated, and the initial \"make\" replaced by \"make build\".\nSo the doc is only build once, and doc failure is reported as a plugin failure.\n\nI have tested it, it seems to work. Please double-check.",
    "created_at": "2015-09-17T08:44:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254704",
    "user": "https://github.com/fchapoton"
}
```

Ok, here is a new version, again (I am starting to get tired to work on a patchbot that nobody uses).

It does no longer depends on dateutil.

It has a better log in history.txt for skipped tickets.

The doc plugin has been reactivated, and the initial "make" replaced by "make build".
So the doc is only build once, and doc failure is reported as a plugin failure.

I have tested it, it seems to work. Please double-check.



---

archive/issue_comments_254705.json:
```json
{
    "body": "So it's needs_review again?\n\n> I am starting to get tired to work on a patchbot that nobody uses\n\nWell, after this is done, hopefully more people will use it!",
    "created_at": "2015-09-17T08:54:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254705",
    "user": "https://github.com/jdemeyer"
}
```

So it's needs_review again?

> I am starting to get tired to work on a patchbot that nobody uses

Well, after this is done, hopefully more people will use it!



---

archive/issue_comments_254706.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-09-17T08:54:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254706",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_254707.json:
```json
{
    "body": "I'm now testing it on `arando`.",
    "created_at": "2015-09-17T09:15:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254707",
    "user": "https://github.com/jdemeyer"
}
```

I'm now testing it on `arando`.



---

archive/issue_comments_254708.json:
```json
{
    "body": "On the previous version of the patchbot, namely 2.4.6, I got\n\n```\n[2015-09-17 09:22:03 +0000] Getting ticket list...\nTraceback (most recent call last):\n  File \".../patchbot.py\", line 1321, in main\n    patchbot.test_a_ticket(ticket)\n  File \".../patchbot.py\", line 850, in test_a_ticket\n    rating, ticket = self.get_one_ticket()\n  File \".../patchbot.py\", line 673, in get_one_ticket\n    for t in all)))\n  File \".../patchbot.py\", line 673, in <genexpr>\n    for t in all)))\n  File \".../patchbot.py\", line 772, in rate_ticket\n    prune_pending(ticket)\n  File \".../util.py\", line 60, in prune_pending\n    elif (now - t).total_seconds() > timeout:\nTypeError: can't subtract offset-naive and offset-aware datetimes\n```\nBut I do not know whether it is fixed in your last version.",
    "created_at": "2015-09-17T09:29:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254708",
    "user": "https://github.com/videlec"
}
```

On the previous version of the patchbot, namely 2.4.6, I got

```
[2015-09-17 09:22:03 +0000] Getting ticket list...
Traceback (most recent call last):
  File ".../patchbot.py", line 1321, in main
    patchbot.test_a_ticket(ticket)
  File ".../patchbot.py", line 850, in test_a_ticket
    rating, ticket = self.get_one_ticket()
  File ".../patchbot.py", line 673, in get_one_ticket
    for t in all)))
  File ".../patchbot.py", line 673, in <genexpr>
    for t in all)))
  File ".../patchbot.py", line 772, in rate_ticket
    prune_pending(ticket)
  File ".../util.py", line 60, in prune_pending
    elif (now - t).total_seconds() > timeout:
TypeError: can't subtract offset-naive and offset-aware datetimes
```
But I do not know whether it is fixed in your last version.



---

archive/issue_comments_254709.json:
```json
{
    "body": "yes, this should be fixed by the removal of dateutil dependencies.",
    "created_at": "2015-09-17T09:44:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254709",
    "user": "https://github.com/fchapoton"
}
```

yes, this should be fixed by the removal of dateutil dependencies.



---

archive/issue_comments_254710.json:
```json
{
    "body": "Replying to [comment:81 chapoton]:\n> yes, this should be fixed by the removal of dateutil dependencies.\n\n\nNice ;-) I also launched the 2.4.7 on librae.",
    "created_at": "2015-09-17T10:58:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254710",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:81 chapoton]:
> yes, this should be fixed by the removal of dateutil dependencies.


Nice ;-) I also launched the 2.4.7 on librae.



---

archive/issue_comments_254711.json:
```json
{
    "body": "Hmm, there is a problem:\n\nA) either we do not build the doc before running the tests, and the tests fail when a new sage-release appears\n(this is what happens with 2.4.7, I think, see your reports on ticket 0)\n\nB) or we do build the doc before, but then there is no plugin reporting about doc failure\n(this would revert to the previous behaviour)\n\nC) or we can build the doc twice..\n\nD) or find a better solution (do make when a new develop is pulled ?)\n\nI would vote for B) or D)\n\nFrederic",
    "created_at": "2015-09-17T15:54:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254711",
    "user": "https://github.com/fchapoton"
}
```

Hmm, there is a problem:

A) either we do not build the doc before running the tests, and the tests fail when a new sage-release appears
(this is what happens with 2.4.7, I think, see your reports on ticket 0)

B) or we do build the doc before, but then there is no plugin reporting about doc failure
(this would revert to the previous behaviour)

C) or we can build the doc twice..

D) or find a better solution (do make when a new develop is pulled ?)

I would vote for B) or D)

Frederic



---

archive/issue_comments_254712.json:
```json
{
    "body": "Replying to [comment:83 chapoton]:\n> Hmm, there is a problem\n\nCan you explain what the problem is?",
    "created_at": "2015-09-17T18:42:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254712",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:83 chapoton]:
> Hmm, there is a problem

Can you explain what the problem is?



---

archive/issue_comments_254713.json:
```json
{
    "body": "Hello,\nI am not quite sure, but looking at the latest report of arando and librae on 6.9.b7 here:\n\nhttp://patchbot.sagemath.org/log/Pending/0/Ubuntu/14.04/i686/3.13.0-40-generic/arando/2015-09-17%2013:28:51?short\n\n(librae report is no longer there)\n\none finds that one of them fails because the doc was not build before the tests were run, and the other for some strange reason.",
    "created_at": "2015-09-17T19:31:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254713",
    "user": "https://github.com/fchapoton"
}
```

Hello,
I am not quite sure, but looking at the latest report of arando and librae on 6.9.b7 here:

http://patchbot.sagemath.org/log/Pending/0/Ubuntu/14.04/i686/3.13.0-40-generic/arando/2015-09-17%2013:28:51?short

(librae report is no longer there)

one finds that one of them fails because the doc was not build before the tests were run, and the other for some strange reason.



---

archive/issue_comments_254714.json:
```json
{
    "body": "Replying to [comment:85 chapoton]:\n> one finds that one of them fails because the doc was not build before the tests were run\n\nWell, in the arando report, it is clear that the doc was built. So I don't know why you think that the problem is related to the docs.",
    "created_at": "2015-09-17T19:51:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254714",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:85 chapoton]:
> one finds that one of them fails because the doc was not build before the tests were run

Well, in the arando report, it is clear that the doc was built. So I don't know why you think that the problem is related to the docs.



---

archive/issue_comments_254715.json:
```json
{
    "body": "The arando failure is genuine, not the fault of the patchbot.",
    "created_at": "2015-09-17T20:00:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254715",
    "user": "https://github.com/jdemeyer"
}
```

The arando failure is genuine, not the fault of the patchbot.



---

archive/issue_comments_254716.json:
```json
{
    "body": "Another problem with bot 2.4.7 on arando: it apparently does not report anything when there is a doctest failure!\n\nLooking at http://patchbot.sagemath.org/log/Pending/19191/Ubuntu/14.04/i686/3.13.0-40-generic/arando/2015-09-18%2016:54:52?short\n\nor there\n\nhttp://patchbot.sagemath.org/log/Pending/8829/Ubuntu/14.04/i686/3.13.0-40-generic/arando/2015-09-18%2012:15:11?short\n\nfor example. I have no time to analyse that now.",
    "created_at": "2015-09-18T19:25:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254716",
    "user": "https://github.com/fchapoton"
}
```

Another problem with bot 2.4.7 on arando: it apparently does not report anything when there is a doctest failure!

Looking at http://patchbot.sagemath.org/log/Pending/19191/Ubuntu/14.04/i686/3.13.0-40-generic/arando/2015-09-18%2016:54:52?short

or there

http://patchbot.sagemath.org/log/Pending/8829/Ubuntu/14.04/i686/3.13.0-40-generic/arando/2015-09-18%2012:15:11?short

for example. I have no time to analyse that now.



---

archive/issue_comments_254717.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-22T19:09:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254717",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254718.json:
```json
{
    "body": "This new version should fix the issue with wrong \"reporting test failure as pending\".\n\nCould you please run that on librae and arando ?",
    "created_at": "2015-09-22T19:11:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254718",
    "user": "https://github.com/fchapoton"
}
```

This new version should fix the issue with wrong "reporting test failure as pending".

Could you please run that on librae and arando ?



---

archive/issue_comments_254719.json:
```json
{
    "body": "On librae, the patchbot was stuck (version 2.3.9) with\n\n```\n[2015-09-22 19:14:16 +0000] Check base.\ngit checkout patchbot/base\nAlready on 'patchbot/base'\ngit fetch git://github.com/sagemath/sage.git +develop:patchbot/base_upstream\n[2015-09-22 19:14:17 +0000] Getting ticket list...\nTraceback (most recent call last):\n  File \".../patchbot/patchbot.py\", line 1260, in main\n    patchbot.test_a_ticket(ticket)\n  File \".../patchbot/patchbot.py\", line 800, in test_a_ticket\n    rating, ticket = self.get_one_ticket()\n  File \".../bin/patchbot/patchbot.py\", line 632, in get_one_ticket\n    for t in all))\n  File \".../bin/patchbot/patchbot.py\", line 632, in <genexpr>\n    for t in all))\n  File \".../bin/patchbot/patchbot.py\", line 722, in rate_ticket\n    prune_pending(ticket)\n  File \".../patchbot/util.py\", line 70, in prune_pending\n    elif (now - t).total_seconds() > timeout:\nTypeError: can't subtract offset-naive and offset-aware datetimes\n```\nDo you know if this is fixed?\n\nVincent",
    "created_at": "2015-09-22T19:17:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254719",
    "user": "https://github.com/videlec"
}
```

On librae, the patchbot was stuck (version 2.3.9) with

```
[2015-09-22 19:14:16 +0000] Check base.
git checkout patchbot/base
Already on 'patchbot/base'
git fetch git://github.com/sagemath/sage.git +develop:patchbot/base_upstream
[2015-09-22 19:14:17 +0000] Getting ticket list...
Traceback (most recent call last):
  File ".../patchbot/patchbot.py", line 1260, in main
    patchbot.test_a_ticket(ticket)
  File ".../patchbot/patchbot.py", line 800, in test_a_ticket
    rating, ticket = self.get_one_ticket()
  File ".../bin/patchbot/patchbot.py", line 632, in get_one_ticket
    for t in all))
  File ".../bin/patchbot/patchbot.py", line 632, in <genexpr>
    for t in all))
  File ".../bin/patchbot/patchbot.py", line 722, in rate_ticket
    prune_pending(ticket)
  File ".../patchbot/util.py", line 70, in prune_pending
    elif (now - t).total_seconds() > timeout:
TypeError: can't subtract offset-naive and offset-aware datetimes
```
Do you know if this is fixed?

Vincent



---

archive/issue_comments_254720.json:
```json
{
    "body": "Launched on librae.",
    "created_at": "2015-09-22T19:23:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254720",
    "user": "https://github.com/videlec"
}
```

Launched on librae.



---

archive/issue_comments_254721.json:
```json
{
    "body": "The [#19125 report](http://patchbot.sagemath.org/log/19125/Ubuntu/14.04/x86_64/3.13.0-63-generic/librae/2015-09-22%2020:59:40?short) and many others say\n\n```\nGit branch: patchbot/ticket_merged\nUsing --optional=mpir,python2,sage\nDoctesting entire Sage library.\nSorting sources by runtime so that slower doctests are run first....\nDoctesting 3186 files using 7 threads.\nsage -t --long src/sage/misc/sagedoc.py\n**********************************************************************\nFile \"src/sage/misc/sagedoc.py\", line 22, in sage.misc.sagedoc\nFailed example:\n    for line in open(docfilename):\n          if \"#sage.symbolic.expression.Expression.N\" in line:\n              print line\nException raised:\n    Traceback (most recent call last):\n      File \".../sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \".../sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.misc.sagedoc[1]>\", line 1, in <module>\n        for line in open(docfilename):\n    IOError: [Errno 2] No such file or directory:\n    '.../doc/output/html/en/reference/calculus/sage/symbolic/expression.html'\n**********************************************************************\n```\n... it seems that the doc is not built anymore. Note that I had a very special configuration where the plugin \"doctest.continuation\" is **not** activated. It was stupid from my side but either this plugin is mandatory and it is not a plugin or the patchbot should not run into such troubles.",
    "created_at": "2015-09-22T21:29:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254721",
    "user": "https://github.com/videlec"
}
```

The [#19125 report](http://patchbot.sagemath.org/log/19125/Ubuntu/14.04/x86_64/3.13.0-63-generic/librae/2015-09-22%2020:59:40?short) and many others say

```
Git branch: patchbot/ticket_merged
Using --optional=mpir,python2,sage
Doctesting entire Sage library.
Sorting sources by runtime so that slower doctests are run first....
Doctesting 3186 files using 7 threads.
sage -t --long src/sage/misc/sagedoc.py
**********************************************************************
File "src/sage/misc/sagedoc.py", line 22, in sage.misc.sagedoc
Failed example:
    for line in open(docfilename):
          if "#sage.symbolic.expression.Expression.N" in line:
              print line
Exception raised:
    Traceback (most recent call last):
      File ".../sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File ".../sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.misc.sagedoc[1]>", line 1, in <module>
        for line in open(docfilename):
    IOError: [Errno 2] No such file or directory:
    '.../doc/output/html/en/reference/calculus/sage/symbolic/expression.html'
**********************************************************************
```
... it seems that the doc is not built anymore. Note that I had a very special configuration where the plugin "doctest.continuation" is **not** activated. It was stupid from my side but either this plugin is mandatory and it is not a plugin or the patchbot should not run into such troubles.



---

archive/issue_comments_254722.json:
```json
{
    "body": "And the patchbot seems to avoid testing base now.",
    "created_at": "2015-09-22T21:32:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254722",
    "user": "https://github.com/videlec"
}
```

And the patchbot seems to avoid testing base now.



---

archive/issue_comments_254723.json:
```json
{
    "body": "I relaunched the patchbot on librae and it gets better. But still, the doctest construction needs to be fixed (or the status of plugins clearer).",
    "created_at": "2015-09-22T22:41:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254723",
    "user": "https://github.com/videlec"
}
```

I relaunched the patchbot on librae and it gets better. But still, the doctest construction needs to be fixed (or the status of plugins clearer).



---

archive/issue_comments_254724.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-09-22T22:41:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254724",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_254725.json:
```json
{
    "body": "In the current state, the plugin \ufffc\"plugins.docbuild\" is indeed mandatory, otherwise the doc is not build and therefore the tests do not pass.\n\nSome time ago, the doc was build once with a \"make\" and then again in the optional \"docbuild\" plugin. Now it is only build once in the plugin.\n\nI can enforce in the code that the plugin \"docbuild\" is always activated.\n\nOR I can step back and build the doc during the initial \"make\" call. But then doc failure will be again reported as Build failure, and the \"docbuild\" plugin will again become useless.\n\nOpinions are required, please.\n\nI find it very annoying that some tests do not pass if the doc is not build.",
    "created_at": "2015-09-23T08:42:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254725",
    "user": "https://github.com/fchapoton"
}
```

In the current state, the plugin ￼"plugins.docbuild" is indeed mandatory, otherwise the doc is not build and therefore the tests do not pass.

Some time ago, the doc was build once with a "make" and then again in the optional "docbuild" plugin. Now it is only build once in the plugin.

I can enforce in the code that the plugin "docbuild" is always activated.

OR I can step back and build the doc during the initial "make" call. But then doc failure will be again reported as Build failure, and the "docbuild" plugin will again become useless.

Opinions are required, please.

I find it very annoying that some tests do not pass if the doc is not build.



---

archive/issue_comments_254726.json:
```json
{
    "body": "Replying to [comment:96 chapoton]:\n> I find it very annoying that some tests do not pass if the doc is not build.\n\n\nWe will not change that in this ticket.\n\n> In the current state, the plugin \ufffc\"plugins.docbuild\" is indeed mandatory, otherwise the doc is not build and therefore the tests do not pass.\n> \n> Some time ago, the doc was build once with a \"make\" and then again in the optional \"docbuild\" plugin. Now it is only build once in the plugin.\n> \n> I can enforce in the code that the plugin \"docbuild\" is always activated.\n\n>\n> OR I can step back and build the doc during the initial \"make\" call. But then doc failure will be again reported as Build failure, and the \"docbuild\" plugin will again become useless.\n\n\nIMO, it is better to report properly docbuild errors and hence to separate the \"make doc\" from the \"make build\". That being said, I have no opinion whether or not the \"make doc\" process should stay a module. And I have nothing against mandatory modules.",
    "created_at": "2015-09-23T11:30:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254726",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:96 chapoton]:
> I find it very annoying that some tests do not pass if the doc is not build.


We will not change that in this ticket.

> In the current state, the plugin ￼"plugins.docbuild" is indeed mandatory, otherwise the doc is not build and therefore the tests do not pass.
> 
> Some time ago, the doc was build once with a "make" and then again in the optional "docbuild" plugin. Now it is only build once in the plugin.
> 
> I can enforce in the code that the plugin "docbuild" is always activated.

>
> OR I can step back and build the doc during the initial "make" call. But then doc failure will be again reported as Build failure, and the "docbuild" plugin will again become useless.


IMO, it is better to report properly docbuild errors and hence to separate the "make doc" from the "make build". That being said, I have no opinion whether or not the "make doc" process should stay a module. And I have nothing against mandatory modules.



---

archive/issue_comments_254727.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-23T13:16:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254727",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254728.json:
```json
{
    "body": "Here is a new version that always activates the docbuild plugin (unless in plugin_only mode)\nso that the tests can pass.\n\nVincent, do you confirm that there is a problem with testing the base ?",
    "created_at": "2015-09-23T13:19:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254728",
    "user": "https://github.com/fchapoton"
}
```

Here is a new version that always activates the docbuild plugin (unless in plugin_only mode)
so that the tests can pass.

Vincent, do you confirm that there is a problem with testing the base ?



---

archive/issue_comments_254729.json:
```json
{
    "body": "Replying to [comment:99 chapoton]:\n> Vincent, do you confirm that there is a problem with testing the base ?\n\n\nI don't know. Under which conditions it should check the base? I launched it twice and twice it avoided it.",
    "created_at": "2015-09-23T15:15:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254729",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:99 chapoton]:
> Vincent, do you confirm that there is a problem with testing the base ?


I don't know. Under which conditions it should check the base? I launched it twice and twice it avoided it.



---

archive/issue_comments_254730.json:
```json
{
    "body": "Something weird happend with patchbot-2.4.8:\n\n```\n[2015-09-23 00:07:24] Getting ticket list...\n[2015-09-23 00:07:30] testing found ticket #17096\n[2015-09-23 00:07:30] #17096: starting tests\n[2015-09-23 15:17:25] #17096 raises an exception: [Errno 32] Broken pipe\n```\n15 hours is not reasonable to test a ticket. The broken pipe is because I just interrupted it with Ctrl-C. The log `17096-log.txt` just stops after the doc build. I do not know what is going wrong.",
    "created_at": "2015-09-23T15:23:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254730",
    "user": "https://github.com/videlec"
}
```

Something weird happend with patchbot-2.4.8:

```
[2015-09-23 00:07:24] Getting ticket list...
[2015-09-23 00:07:30] testing found ticket #17096
[2015-09-23 00:07:30] #17096: starting tests
[2015-09-23 15:17:25] #17096 raises an exception: [Errno 32] Broken pipe
```
15 hours is not reasonable to test a ticket. The broken pipe is because I just interrupted it with Ctrl-C. The log `17096-log.txt` just stops after the doc build. I do not know what is going wrong.



---

archive/issue_comments_254731.json:
```json
{
    "body": "I launched 2.4.9 on librae. And again it did not start with checking the base.\n\nVincent",
    "created_at": "2015-09-23T15:28:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254731",
    "user": "https://github.com/videlec"
}
```

I launched 2.4.9 on librae. And again it did not start with checking the base.

Vincent



---

archive/issue_comments_254732.json:
```json
{
    "body": "With 2.4.9, something is indeed fishy with the docbuild plugin. Note the \"elapsed time\" and the total time for the plugin, there is a difference of about 900s:\n\n```\nBuild finished. The built documents can be found in /home/patchbot/sage-patchbot/src/doc/output/html/en/thematic_tutorials\nElapsed time: 1003.6 seconds.\nDone building the documentation!\nmake[1]: Leaving directory `/home/patchbot/sage-patchbot/build/make'\n\nreal    32m6.825s\nuser    14m4.656s\nsys     0m25.444s\nSage build/upgrade complete!\nplugins.docbuild -- 1948 seconds\n========== end plugins.docbuild ==========\n```",
    "created_at": "2015-09-23T17:26:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254732",
    "user": "https://github.com/jdemeyer"
}
```

With 2.4.9, something is indeed fishy with the docbuild plugin. Note the "elapsed time" and the total time for the plugin, there is a difference of about 900s:

```
Build finished. The built documents can be found in /home/patchbot/sage-patchbot/src/doc/output/html/en/thematic_tutorials
Elapsed time: 1003.6 seconds.
Done building the documentation!
make[1]: Leaving directory `/home/patchbot/sage-patchbot/build/make'

real    32m6.825s
user    14m4.656s
sys     0m25.444s
Sage build/upgrade complete!
plugins.docbuild -- 1948 seconds
========== end plugins.docbuild ==========
```



---

archive/issue_comments_254733.json:
```json
{
    "body": "`@`Jeroen, on which ticket do you see these 900 seconds, please ?\n\nWell, maybe this could be an effect of the grep command in that plugin ?\n\nWhat is the size of your SAGE_ROOT/logs/dochtml.log ? Mine is 73 Mo\n\nDo you know if the \"make doc\" command clears this log or not ?",
    "created_at": "2015-09-23T20:00:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254733",
    "user": "https://github.com/fchapoton"
}
```

`@`Jeroen, on which ticket do you see these 900 seconds, please ?

Well, maybe this could be an effect of the grep command in that plugin ?

What is the size of your SAGE_ROOT/logs/dochtml.log ? Mine is 73 Mo

Do you know if the "make doc" command clears this log or not ?



---

archive/issue_comments_254734.json:
```json
{
    "body": "Patchbot got stuck after 5 tickets\n\n```\n$ tail -n 3 history.txt\n[2015-09-23 18:48:40] #18223: TestsFailed\n[2015-09-23 18:48:49] #18411: starting tests\n[2015-09-23 20:18:06] #18411 raises an exception: [Errno 32] Broken pipe\n```\n(the Broken pipe is because of my Ctrl-C). It seems that the patchbot was doing nothing. Its last line of output was\n\n```\nBuild finished. The built documents can be found in .../doc/output/html/ca/intro\n```\n\nMy `dochtml.log` is 14M and `install.log` is 39M.",
    "created_at": "2015-09-23T20:19:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254734",
    "user": "https://github.com/videlec"
}
```

Patchbot got stuck after 5 tickets

```
$ tail -n 3 history.txt
[2015-09-23 18:48:40] #18223: TestsFailed
[2015-09-23 18:48:49] #18411: starting tests
[2015-09-23 20:18:06] #18411 raises an exception: [Errno 32] Broken pipe
```
(the Broken pipe is because of my Ctrl-C). It seems that the patchbot was doing nothing. Its last line of output was

```
Build finished. The built documents can be found in .../doc/output/html/ca/intro
```

My `dochtml.log` is 14M and `install.log` is 39M.



---

archive/issue_comments_254735.json:
```json
{
    "body": "Replying to [comment:104 chapoton]:\n> `@`Jeroen, on which ticket do you see these 900 seconds, please ?\n\nTicket #0\n\n> Do you know if the \"make doc\" command clears this log or not ?\n\nIt does not. In fact, Sage logs are never cleared automatically (except with `make distclean`)",
    "created_at": "2015-09-24T07:44:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254735",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:104 chapoton]:
> `@`Jeroen, on which ticket do you see these 900 seconds, please ?

Ticket #0

> Do you know if the "make doc" command clears this log or not ?

It does not. In fact, Sage logs are never cleared automatically (except with `make distclean`)



---

archive/issue_comments_254736.json:
```json
{
    "body": "Replying to [comment:104 chapoton]:\n> What is the size of your SAGE_ROOT/logs/dochtml.log ?\n\n449 MB",
    "created_at": "2015-09-24T07:47:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254736",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:104 chapoton]:
> What is the size of your SAGE_ROOT/logs/dochtml.log ?

449 MB



---

archive/issue_comments_254737.json:
```json
{
    "body": "I don't think you should `grep dochtml.log`. Instead, just check the status of the `make doc` command. If it succeeds, it means that the doc builds fine.",
    "created_at": "2015-09-24T07:48:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254737",
    "user": "https://github.com/jdemeyer"
}
```

I don't think you should `grep dochtml.log`. Instead, just check the status of the `make doc` command. If it succeeds, it means that the doc builds fine.



---

archive/issue_comments_254738.json:
```json
{
    "body": "Thanks.\n\nI will remove the grep on the logs, but I am afraid that it is not the real problem.\n\nI suspect that pickling may be the cause.. Still investigating.",
    "created_at": "2015-09-24T08:03:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254738",
    "user": "https://github.com/fchapoton"
}
```

Thanks.

I will remove the grep on the logs, but I am afraid that it is not the real problem.

I suspect that pickling may be the cause.. Still investigating.



---

archive/issue_comments_254739.json:
```json
{
    "body": "`@`Vincent: very strange, it seems that this is not the usual end of make doc. Could it be that the patchbot was stuck inside the doc building ??\n\nReplying to [comment:105 vdelecroix]:\n> Patchbot got stuck after 5 tickets\n> \n> ```\n> $ tail -n 3 history.txt\n> [2015-09-23 18:48:40] #18223: TestsFailed\n> [2015-09-23 18:48:49] #18411: starting tests\n> [2015-09-23 20:18:06] #18411 raises an exception: [Errno 32] Broken pipe\n> ```\n> (the Broken pipe is because of my Ctrl-C). It seems that the patchbot was doing nothing. Its last line of output was\n> \n> ```\n> Build finished. The built documents can be found in .../doc/output/html/ca/intro\n> ```\n> \n> My `dochtml.log` is 14M and `install.log` is 39M.",
    "created_at": "2015-09-24T08:11:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254739",
    "user": "https://github.com/fchapoton"
}
```

`@`Vincent: very strange, it seems that this is not the usual end of make doc. Could it be that the patchbot was stuck inside the doc building ??

Replying to [comment:105 vdelecroix]:
> Patchbot got stuck after 5 tickets
> 
> ```
> $ tail -n 3 history.txt
> [2015-09-23 18:48:40] #18223: TestsFailed
> [2015-09-23 18:48:49] #18411: starting tests
> [2015-09-23 20:18:06] #18411 raises an exception: [Errno 32] Broken pipe
> ```
> (the Broken pipe is because of my Ctrl-C). It seems that the patchbot was doing nothing. Its last line of output was
> 
> ```
> Build finished. The built documents can be found in .../doc/output/html/ca/intro
> ```
> 
> My `dochtml.log` is 14M and `install.log` is 39M.



---

archive/issue_comments_254740.json:
```json
{
    "body": "The patchbot should run `./configure` before testing a ticket: [https://groups.google.com/forum/#!topic/sage-devel/AcwT37Zndeg](https://groups.google.com/forum/#!topic/sage-devel/AcwT37Zndeg)",
    "created_at": "2015-09-25T12:44:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254740",
    "user": "https://github.com/jdemeyer"
}
```

The patchbot should run `./configure` before testing a ticket: [https://groups.google.com/forum/#!topic/sage-devel/AcwT37Zndeg](https://groups.google.com/forum/#!topic/sage-devel/AcwT37Zndeg)



---

archive/issue_comments_254741.json:
```json
{
    "body": "Currently:\n\n```\ndo_or_die('$MAKE doc-clean')\ndo_or_die(\"$MAKE build\")  # doc is made later in a plugin\n```\nWhere should I insert the \"./configure\" ?",
    "created_at": "2015-09-25T15:00:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254741",
    "user": "https://github.com/fchapoton"
}
```

Currently:

```
do_or_die('$MAKE doc-clean')
do_or_die("$MAKE build")  # doc is made later in a plugin
```
Where should I insert the "./configure" ?



---

archive/issue_comments_254742.json:
```json
{
    "body": "Replying to [comment:112 chapoton]:\n> Where should I insert the \"./configure\" ?\n\nAs very first command.",
    "created_at": "2015-09-25T18:36:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254742",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:112 chapoton]:
> Where should I insert the "./configure" ?

As very first command.



---

archive/issue_comments_254743.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-25T19:14:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254743",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254744.json:
```json
{
    "body": "`@`Jeroen\n\nok, I have added the ./configure before the make (but not tested the resulting patchbot, sorry). I have also removed the grep in the doc plugins.\n\n`@`Vincent\n\npatchbot 2.4.9 has been working quite good (I think) on arando (including testing the base\nwhen necessary). Have you checked your json config for librae (skip_base in particular) ?",
    "created_at": "2015-09-25T19:17:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254744",
    "user": "https://github.com/fchapoton"
}
```

`@`Jeroen

ok, I have added the ./configure before the make (but not tested the resulting patchbot, sorry). I have also removed the grep in the doc plugins.

`@`Vincent

patchbot 2.4.9 has been working quite good (I think) on arando (including testing the base
when necessary). Have you checked your json config for librae (skip_base in particular) ?



---

archive/issue_comments_254745.json:
```json
{
    "body": "I launch twice the 2.5.0 patchbot and twice I ran out of memory during the docbuild. I thought that 8G should be enough for that purpose...\n\nVincent",
    "created_at": "2015-09-25T23:26:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254745",
    "user": "https://github.com/videlec"
}
```

I launch twice the 2.5.0 patchbot and twice I ran out of memory during the docbuild. I thought that 8G should be enough for that purpose...

Vincent



---

archive/issue_comments_254746.json:
```json
{
    "body": "Replying to [comment:116 vdelecroix]:\n> I launch twice the 2.5.0 patchbot and twice I ran out of memory during the docbuild. I thought that 8G should be enough for that purpose...\n\n\nHopefully, it does not seem to be because of the patchbot; see [sage-6.9.rc0 thread on sage-release](https://groups.google.com/forum/#!topic/sage-release/MGkb_-y-moM).",
    "created_at": "2015-09-26T10:43:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254746",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:116 vdelecroix]:
> I launch twice the 2.5.0 patchbot and twice I ran out of memory during the docbuild. I thought that 8G should be enough for that purpose...


Hopefully, it does not seem to be because of the patchbot; see [sage-6.9.rc0 thread on sage-release](https://groups.google.com/forum/#!topic/sage-release/MGkb_-y-moM).



---

archive/issue_comments_254747.json:
```json
{
    "body": "Docbuilder on arando:\n\n```\nElapsed time: 6632.6 seconds.\nDone building the documentation!\nmake[1]: Leaving directory `/home/patchbot/sage-patchbot/build/make'\n\nreal    112m57.498s\nuser    14m29.724s\nsys     1m57.856s\nSage build/upgrade complete!\nplugins.docbuild -- 6778 seconds\n```",
    "created_at": "2015-09-26T11:02:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254747",
    "user": "https://github.com/jdemeyer"
}
```

Docbuilder on arando:

```
Elapsed time: 6632.6 seconds.
Done building the documentation!
make[1]: Leaving directory `/home/patchbot/sage-patchbot/build/make'

real    112m57.498s
user    14m29.724s
sys     1m57.856s
Sage build/upgrade complete!
plugins.docbuild -- 6778 seconds
```



---

archive/issue_comments_254748.json:
```json
{
    "body": "One more thing: I find it very annoying that the patchbot doesn't respect `$MAKE`. It seems to use 3 threads regardless of `$MAKE`.",
    "created_at": "2015-09-26T19:28:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254748",
    "user": "https://github.com/jdemeyer"
}
```

One more thing: I find it very annoying that the patchbot doesn't respect `$MAKE`. It seems to use 3 threads regardless of `$MAKE`.



---

archive/issue_comments_254749.json:
```json
{
    "body": "The docbuild really is a problem. I just cannot run a patchbot anymore on `arando`, the machine becomes unresponsive when building the documentation.",
    "created_at": "2015-09-26T19:30:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254749",
    "user": "https://github.com/jdemeyer"
}
```

The docbuild really is a problem. I just cannot run a patchbot anymore on `arando`, the machine becomes unresponsive when building the documentation.



---

archive/issue_comments_254750.json:
```json
{
    "body": "Replying to [comment:119 jdemeyer]:\n> One more thing: I find it very annoying that the patchbot doesn't respect `$MAKE`. It seems to use 3 threads regardless of `$MAKE`.\n\n\n* Which $MAKE do you want it to respect ? The system-wide MAKE if it is set ?\n  The patchbot currently sets MAKE to its own value, with a number of parallel threads      that can be chosen in the config of the patchbot.\n\n* Do you think the problem with the very-long and memory consuming docbuild comes from the patchbot ?",
    "created_at": "2015-09-26T20:51:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254750",
    "user": "https://github.com/fchapoton"
}
```

Replying to [comment:119 jdemeyer]:
> One more thing: I find it very annoying that the patchbot doesn't respect `$MAKE`. It seems to use 3 threads regardless of `$MAKE`.


* Which $MAKE do you want it to respect ? The system-wide MAKE if it is set ?
  The patchbot currently sets MAKE to its own value, with a number of parallel threads      that can be chosen in the config of the patchbot.

* Do you think the problem with the very-long and memory consuming docbuild comes from the patchbot ?



---

archive/issue_comments_254751.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-27T07:15:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254751",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254752.json:
```json
{
    "body": "I have stepped back to use simply \"make\" in the doc plugins (instead of custom $MAKE).\n\nHopefully, this can restore the previous behavior of the plugins.",
    "created_at": "2015-09-27T07:18:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254752",
    "user": "https://github.com/fchapoton"
}
```

I have stepped back to use simply "make" in the doc plugins (instead of custom $MAKE).

Hopefully, this can restore the previous behavior of the plugins.



---

archive/issue_comments_254753.json:
```json
{
    "body": "Replying to [comment:123 chapoton]:\n> I have stepped back to use simply \"make\" in the doc plugins (instead of custom $MAKE).\n\n\nPlease don't! Just respect the existing value of `$MAKE`.",
    "created_at": "2015-09-27T07:49:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254753",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:123 chapoton]:
> I have stepped back to use simply "make" in the doc plugins (instead of custom $MAKE).


Please don't! Just respect the existing value of `$MAKE`.



---

archive/issue_comments_254754.json:
```json
{
    "body": "Replying to [comment:124 jdemeyer]:\n> Replying to [comment:123 chapoton]:\n> > I have stepped back to use simply \"make\" in the doc plugins (instead of custom $MAKE).\n\n> \n> Please don't! Just respect the existing value of `$MAKE`.\n\n\nWhy should I expect that there exists a $MAKE at all?",
    "created_at": "2015-09-27T08:19:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254754",
    "user": "https://github.com/fchapoton"
}
```

Replying to [comment:124 jdemeyer]:
> Replying to [comment:123 chapoton]:
> > I have stepped back to use simply "make" in the doc plugins (instead of custom $MAKE).

> 
> Please don't! Just respect the existing value of `$MAKE`.


Why should I expect that there exists a $MAKE at all?



---

archive/issue_comments_254755.json:
```json
{
    "body": "```\nsage: import os\nsage: my_make = os.environ['MAKE'] or 'make -j whathever'\n```\n\nEDIT: the solution above will give you a `KeyError` if `MAKE` is not defined... better solution\n\n```\nsage: os.getenv('MAKE', default_value)\n```",
    "created_at": "2015-09-27T18:38:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254755",
    "user": "https://github.com/videlec"
}
```

```
sage: import os
sage: my_make = os.environ['MAKE'] or 'make -j whathever'
```

EDIT: the solution above will give you a `KeyError` if `MAKE` is not defined... better solution

```
sage: os.getenv('MAKE', default_value)
```



---

archive/issue_comments_254756.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-28T09:32:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254756",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_254757.json:
```json
{
    "body": "Here is a new version, which should respect your $MAKE if you have one.\n\nCan I hope that there will be a positive review one day ?",
    "created_at": "2015-09-28T09:35:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254757",
    "user": "https://github.com/fchapoton"
}
```

Here is a new version, which should respect your $MAKE if you have one.

Can I hope that there will be a positive review one day ?



---

archive/issue_comments_254758.json:
```json
{
    "body": "Replying to [comment:128 chapoton]:\n> Can I hope that there will be a positive review one day ?\n\n\nAt least, you'll need to set it to needs_review...",
    "created_at": "2015-09-29T08:22:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254758",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:128 chapoton]:
> Can I hope that there will be a positive review one day ?


At least, you'll need to set it to needs_review...



---

archive/issue_comments_254759.json:
```json
{
    "body": "ok. Is this all ?",
    "created_at": "2015-09-29T13:53:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254759",
    "user": "https://github.com/fchapoton"
}
```

ok. Is this all ?



---

archive/issue_comments_254760.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-09-29T13:53:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254760",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_254761.json:
```json
{
    "body": "Please, please, would it be possible to let this get a positive review ?\n\nI know it is not perfect, but it is working, no ?",
    "created_at": "2015-09-30T18:18:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254761",
    "user": "https://github.com/fchapoton"
}
```

Please, please, would it be possible to let this get a positive review ?

I know it is not perfect, but it is working, no ?



---

archive/issue_comments_254762.json:
```json
{
    "body": "I'd like to run my patchbots for a few days and see if things work out...",
    "created_at": "2015-09-30T18:41:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254762",
    "user": "https://github.com/jdemeyer"
}
```

I'd like to run my patchbots for a few days and see if things work out...



---

archive/issue_comments_254763.json:
```json
{
    "body": "I understand. Let us see if something bad happens..",
    "created_at": "2015-09-30T18:48:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254763",
    "user": "https://github.com/fchapoton"
}
```

I understand. Let us see if something bad happens..



---

archive/issue_comments_254764.json:
```json
{
    "body": "Also, I'd really like to investigate better the docbuilding issue.\n\nIt's clear to me that there is an issue on arando: until not so long ago, the docbuilding took on the order of minutes to finish, now it's more like 1 hour.",
    "created_at": "2015-10-01T10:32:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254764",
    "user": "https://github.com/jdemeyer"
}
```

Also, I'd really like to investigate better the docbuilding issue.

It's clear to me that there is an issue on arando: until not so long ago, the docbuilding took on the order of minutes to finish, now it's more like 1 hour.



---

archive/issue_comments_254765.json:
```json
{
    "body": "I don't know how much technical assistance I can provide, but I am testing the new patchbot on a few different machines. I'll leave them running while I'm out of town for the next few days, and let you know if anything breaks when I get back.",
    "created_at": "2015-10-02T17:19:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254765",
    "user": "https://github.com/kevindilks"
}
```

I don't know how much technical assistance I can provide, but I am testing the new patchbot on a few different machines. I'll leave them running while I'm out of town for the next few days, and let you know if anything breaks when I get back.



---

archive/issue_comments_254766.json:
```json
{
    "body": "There is something weird with the following report\n\n    http://patchbot.sagemath.org/log/19345/Ubuntu/14.04/x86_64/3.13.0-65-generic/librae/2015-10-05%2006:12:03?short\n\nThere is a timeout problem (apparently because of communication problem with the server). But the patchbot report appears as `TestsFailed`.",
    "created_at": "2015-10-05T21:38:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254766",
    "user": "https://github.com/videlec"
}
```

There is something weird with the following report

    http://patchbot.sagemath.org/log/19345/Ubuntu/14.04/x86_64/3.13.0-65-generic/librae/2015-10-05%2006:12:03?short

There is a timeout problem (apparently because of communication problem with the server). But the patchbot report appears as `TestsFailed`.



---

archive/issue_comments_254767.json:
```json
{
    "body": "Here is the relevant part from `history.txt`\n\n```\n[2015-10-05 05:52:00] #19345: init phase\n[2015-10-05 05:54:29] #19345 raises an exception: <urlopen error [Errno 110] Connection timed out>\n[2015-10-05 05:54:29] #19345: TestsFailed\n[2015-10-05 06:01:37] #19345: TestsFailed\n[2015-10-05 06:06:53] #19345: TestsFailed\n[2015-10-05 06:12:03] #19345: TestsFailed\n```",
    "created_at": "2015-10-05T21:43:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254767",
    "user": "https://github.com/videlec"
}
```

Here is the relevant part from `history.txt`

```
[2015-10-05 05:52:00] #19345: init phase
[2015-10-05 05:54:29] #19345 raises an exception: <urlopen error [Errno 110] Connection timed out>
[2015-10-05 05:54:29] #19345: TestsFailed
[2015-10-05 06:01:37] #19345: TestsFailed
[2015-10-05 06:06:53] #19345: TestsFailed
[2015-10-05 06:12:03] #19345: TestsFailed
```



---

archive/issue_comments_254768.json:
```json
{
    "body": "Indeed `urllib2.URLError` is more general than `urllib2.HTTPError`...\n\n```\nsage: import urllib2\nsage: issubclass(urllib2.URLError, urllib2.HTTPError)\nFalse\nsage: issubclass(urllib2.HTTPError, urllib2.URLError)\nTrue\n```\nBut only `urllib2.HTTPError` is catch at line `1024` of `patchbot.py`. Maybe it should be changed?\n\nEDIT: but it is not clear what was the error raised!",
    "created_at": "2015-10-05T21:52:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254768",
    "user": "https://github.com/videlec"
}
```

Indeed `urllib2.URLError` is more general than `urllib2.HTTPError`...

```
sage: import urllib2
sage: issubclass(urllib2.URLError, urllib2.HTTPError)
False
sage: issubclass(urllib2.HTTPError, urllib2.URLError)
True
```
But only `urllib2.HTTPError` is catch at line `1024` of `patchbot.py`. Maybe it should be changed?

EDIT: but it is not clear what was the error raised!



---

archive/issue_comments_254769.json:
```json
{
    "body": "My home server still has issues with the timezone stuff (I'm pretty sure I have all the necessary dependencies, but maybe there's one not listed on the wiki I'm forgetting about?), but things seem to have been running fine for the past 5 days on my home desktop, laptop, and virtual machine on my office computer.",
    "created_at": "2015-10-07T15:02:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254769",
    "user": "https://github.com/kevindilks"
}
```

My home server still has issues with the timezone stuff (I'm pretty sure I have all the necessary dependencies, but maybe there's one not listed on the wiki I'm forgetting about?), but things seem to have been running fine for the past 5 days on my home desktop, laptop, and virtual machine on my office computer.



---

archive/issue_comments_254770.json:
```json
{
    "body": "Thanks a lot for reporting.\n\nWith bot 2.5.2, there is no more any dependency about timezone and the like..\n\nIs your home server also running 2.5.2 ? What is the name of the machine where you see problems ?",
    "created_at": "2015-10-07T15:23:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254770",
    "user": "https://github.com/fchapoton"
}
```

Thanks a lot for reporting.

With bot 2.5.2, there is no more any dependency about timezone and the like..

Is your home server also running 2.5.2 ? What is the name of the machine where you see problems ?



---

archive/issue_comments_254771.json:
```json
{
    "body": "I was just being dumb. I had downloaded the tarball, but hadn't pulled this ticket. So the installation failed, I didn't pay enough attention to notice, and it was still running the old version.",
    "created_at": "2015-10-08T04:06:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254771",
    "user": "https://github.com/kevindilks"
}
```

I was just being dumb. I had downloaded the tarball, but hadn't pulled this ticket. So the installation failed, I didn't pay enough attention to notice, and it was still running the old version.



---

archive/issue_comments_254772.json:
```json
{
    "body": "yes, that's the reason why it would be much simpler to have this ticket into positive review, so that one can simply do \"sage -i patchbot\"",
    "created_at": "2015-10-08T09:14:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254772",
    "user": "https://github.com/fchapoton"
}
```

yes, that's the reason why it would be much simpler to have this ticket into positive review, so that one can simply do "sage -i patchbot"



---

archive/issue_comments_254773.json:
```json
{
    "body": "I'd be willing to give it a positive review based on usability, but I can't comment at all about quality of the underlying code/documentation/etc.",
    "created_at": "2015-10-09T16:33:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254773",
    "user": "https://github.com/kevindilks"
}
```

I'd be willing to give it a positive review based on usability, but I can't comment at all about quality of the underlying code/documentation/etc.



---

archive/issue_comments_254774.json:
```json
{
    "body": "Well, this is only an optional package. This code is not going to be included in sage.\n\nJeroen and/or Vincent, could you please say your word now ?",
    "created_at": "2015-10-09T16:45:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254774",
    "user": "https://github.com/fchapoton"
}
```

Well, this is only an optional package. This code is not going to be included in sage.

Jeroen and/or Vincent, could you please say your word now ?



---

archive/issue_comments_254775.json:
```json
{
    "body": "I have no objections to a positive_review.",
    "created_at": "2015-10-09T17:43:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254775",
    "user": "https://github.com/jdemeyer"
}
```

I have no objections to a positive_review.



---

archive/issue_comments_254776.json:
```json
{
    "body": "So, could somebody please express more than an absence of objection ?",
    "created_at": "2015-10-10T19:05:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254776",
    "user": "https://github.com/fchapoton"
}
```

So, could somebody please express more than an absence of objection ?



---

archive/issue_comments_254777.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-10-10T19:08:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254777",
    "user": "https://github.com/kevindilks"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_254778.json:
```json
{
    "body": "I was giving Vincent a day or two to weigh in. But I guess based on my experience and Jeroen's non-objection, this is good enough for positive review, and any other problems/enhancements/etc. can be part of future tickets.",
    "created_at": "2015-10-10T19:08:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254778",
    "user": "https://github.com/kevindilks"
}
```

I was giving Vincent a day or two to weigh in. But I guess based on my experience and Jeroen's non-objection, this is good enough for positive review, and any other problems/enhancements/etc. can be part of future tickets.



---

archive/issue_comments_254779.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-10-12T07:16:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18937#issuecomment-254779",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_052826.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-10-12T07:16:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18937",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18937#event-52826"
}
```
