# Issue 18937: Upgrade patchbot again

archive/issues_018700.json:
```json
{
    "assignees": [],
    "body": "A lot of work has been done on the patchbot since the latest update in #16872.\n\nIn particular, the ascii plugin now looks for unicode only in .py[x] missing utf8 declaration, and the patchbot does not look at spkg tickets more than once per day.\n\nThere is also an improvement in the system of trust check for code authors.\n\n**Tarball**: [http://chapoton.perso.math.cnrs.fr/patchbot-2.5.2.tar.bz2](http://chapoton.perso.math.cnrs.fr/patchbot-2.5.2.tar.bz2)\n\nCC:  @videlec @nathanncohen\n\nKeywords: **patchbot**\n\nBranch/Commit: **[`10aedb7`](https://github.com/sagemath/sagetrac-mirror/commit/10aedb7e47ce3466bd80ca6ed7724df263e706ee)**\n\nReviewer: **Jeroen Demeyer, Nathann Cohen, Vincent Delecroix**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\nComponent: **packages: optional**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/18937_\n\n",
    "closed_at": "2015-10-12T07:16:14Z",
    "created_at": "2015-07-22T12:36:12Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20optional",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.9",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade patchbot again",
    "type": "issue",
    "updated_at": "2015-10-12T07:16:14Z",
    "url": "https://github.com/sagemath/sage/issues/18937",
    "user": "https://github.com/fchapoton"
}
```
A lot of work has been done on the patchbot since the latest update in #16872.

In particular, the ascii plugin now looks for unicode only in .py[x] missing utf8 declaration, and the patchbot does not look at spkg tickets more than once per day.

There is also an improvement in the system of trust check for code authors.

**Tarball**: [http://chapoton.perso.math.cnrs.fr/patchbot-2.5.2.tar.bz2](http://chapoton.perso.math.cnrs.fr/patchbot-2.5.2.tar.bz2)

CC:  @videlec @nathanncohen

Keywords: **patchbot**

Branch/Commit: **[`10aedb7`](https://github.com/sagemath/sagetrac-mirror/commit/10aedb7e47ce3466bd80ca6ed7724df263e706ee)**

Reviewer: **Jeroen Demeyer, Nathann Cohen, Vincent Delecroix**

Author: **Frédéric Chapoton**

Component: **packages: optional**

_Issue created by migration from https://trac.sagemath.org/ticket/18937_





---

archive/issue_events_270095.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-07-22T12:36:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18937#event-270095"
}
```



---

archive/issue_events_270096.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-07-22T12:36:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20optional",
    "label_color": "000080",
    "label_name": "c: packages: optional",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18937#event-270096"
}
```



---

archive/issue_events_270097.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-07-22T12:36:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18937#event-270097"
}
```



---

archive/issue_events_270098.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-07-22T12:36:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18937#event-270098"
}
```



---

archive/issue_comments_265648.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-A lot of work has been done on the patchbot since the latest update.\n+A lot of work has been done on the patchbot since the latest update in #16872.\n \n In particular, the ascii plugin now looks for unicode only in .py[x] missing utf8 declaration.\n \n``````\n",
    "created_at": "2015-07-22T12:59:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265648",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-A lot of work has been done on the patchbot since the latest update.
+A lot of work has been done on the patchbot since the latest update in #16872.
 
 In particular, the ascii plugin now looks for unicode only in .py[x] missing utf8 declaration.
 
``````




---

archive/issue_events_270099.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-07-29T06:38:28Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18937#event-270099"
}
```



---

archive/issue_events_270100.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-07-29T06:38:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18937#event-270100"
}
```



---

archive/issue_comments_265649.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,6 +2,6 @@\n \n In particular, the ascii plugin now looks for unicode only in .py[x] missing utf8 declaration.\n \n-Latest available version is 2.3.8\n+Latest available version is 2.3.9\n \n-spkg here : http://chapoton.perso.math.cnrs.fr/patchbot-2.3.8.spkg\n+spkg here : http://chapoton.perso.math.cnrs.fr/patchbot-2.3.9.spkg\n``````\n",
    "created_at": "2015-08-04T09:04:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265649",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,6 +2,6 @@
 
 In particular, the ascii plugin now looks for unicode only in .py[x] missing utf8 declaration.
 
-Latest available version is 2.3.8
+Latest available version is 2.3.9
 
-spkg here : http://chapoton.perso.math.cnrs.fr/patchbot-2.3.8.spkg
+spkg here : http://chapoton.perso.math.cnrs.fr/patchbot-2.3.9.spkg
``````




---

archive/issue_comments_265650.json:
```json
{
    "body": "Branch: **[u/chapoton/18937](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/18937)**",
    "created_at": "2015-08-04T09:37:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265650",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/18937](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/18937)**



---

archive/issue_comments_265651.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/00c7ca58ceaa0febc0ff72c393cf265178cda03a\"><code>00c7ca5</code></a></td><td><code>towards new style spkg for patchbot</code></td></tr></table>\n",
    "created_at": "2015-08-04T09:37:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265651",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:4"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/00c7ca58ceaa0febc0ff72c393cf265178cda03a"><code>00c7ca5</code></a></td><td><code>towards new style spkg for patchbot</code></td></tr></table>




---

archive/issue_comments_265652.json:
```json
{
    "body": "Commit: **[`00c7ca5`](https://github.com/sagemath/sagetrac-mirror/commit/00c7ca58ceaa0febc0ff72c393cf265178cda03a)**",
    "created_at": "2015-08-04T09:37:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265652",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[`00c7ca5`](https://github.com/sagemath/sagetrac-mirror/commit/00c7ca58ceaa0febc0ff72c393cf265178cda03a)**



---

archive/issue_comments_265653.json:
```json
{
    "body": "Changed commit from **[`00c7ca5`](https://github.com/sagemath/sagetrac-mirror/commit/00c7ca58ceaa0febc0ff72c393cf265178cda03a)** to **[`6122b08`](https://github.com/sagemath/sagetrac-mirror/commit/6122b083c484cb580e61040fade56fded6da9a6a)**",
    "created_at": "2015-08-20T20:27:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265653",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`00c7ca5`](https://github.com/sagemath/sagetrac-mirror/commit/00c7ca58ceaa0febc0ff72c393cf265178cda03a)** to **[`6122b08`](https://github.com/sagemath/sagetrac-mirror/commit/6122b083c484cb580e61040fade56fded6da9a6a)**



---

archive/issue_comments_265654.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4169537d3f8429e72f823ac6656ae5f58237d32b\"><code>4169537</code></a></td><td><code>Merge branch 'u/chapoton/18937' into 6.9.b2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6122b083c484cb580e61040fade56fded6da9a6a\"><code>6122b08</code></a></td><td><code>trac #18937 now 2.4.0, still trying to switch to new style spkg</code></td></tr></table>\n",
    "created_at": "2015-08-20T20:27:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265654",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4169537d3f8429e72f823ac6656ae5f58237d32b"><code>4169537</code></a></td><td><code>Merge branch 'u/chapoton/18937' into 6.9.b2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6122b083c484cb580e61040fade56fded6da9a6a"><code>6122b08</code></a></td><td><code>trac #18937 now 2.4.0, still trying to switch to new style spkg</code></td></tr></table>




---

archive/issue_events_270101.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-08-20T20:30:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18937#event-270101"
}
```



---

archive/issue_comments_265655.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,6 +2,6 @@\n \n In particular, the ascii plugin now looks for unicode only in .py[x] missing utf8 declaration.\n \n-Latest available version is 2.3.9\n+Latest available version is 2.4.0\n \n-spkg here : http://chapoton.perso.math.cnrs.fr/patchbot-2.3.9.spkg\n+spkg here : http://chapoton.perso.math.cnrs.fr/patchbot-2.4.0.spkg\n``````\n",
    "created_at": "2015-08-20T20:30:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265655",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,6 +2,6 @@
 
 In particular, the ascii plugin now looks for unicode only in .py[x] missing utf8 declaration.
 
-Latest available version is 2.3.9
+Latest available version is 2.4.0
 
-spkg here : http://chapoton.perso.math.cnrs.fr/patchbot-2.3.9.spkg
+spkg here : http://chapoton.perso.math.cnrs.fr/patchbot-2.4.0.spkg
``````




---

archive/issue_comments_265656.json:
```json
{
    "body": "Author: **Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2015-08-20T20:30:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265656",
    "user": "https://github.com/fchapoton"
}
```

Author: **Frédéric Chapoton**



---

archive/issue_comments_265657.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI think that I am getting close to the correct switch to new style spkg.\n\nPlease double check !",
    "created_at": "2015-08-20T20:30:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265657",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:6" align="right">comment:6</div>

I think that I am getting close to the correct switch to new style spkg.

Please double check !



---

archive/issue_comments_265658.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,4 +4,4 @@\n \n Latest available version is 2.4.0\n \n-spkg here : http://chapoton.perso.math.cnrs.fr/patchbot-2.4.0.spkg\n+spkg here : http://chapoton.perso.math.cnrs.fr/patchbot-2.4.0.tar.bz2\n``````\n",
    "created_at": "2015-08-20T20:31:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265658",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,4 +4,4 @@
 
 Latest available version is 2.4.0
 
-spkg here : http://chapoton.perso.math.cnrs.fr/patchbot-2.4.0.spkg
+spkg here : http://chapoton.perso.math.cnrs.fr/patchbot-2.4.0.tar.bz2
``````




---

archive/issue_comments_265659.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nJust a small comment: you can replace\n\n```\nif [ -e \"$SAGE_LOCAL/bin/patchbot\" ]; then\n   rm -rf \"$SAGE_LOCAL/bin/patchbot\"\nfi\n```\nby\n\n```\nrm -rf \"$SAGE_LOCAL/bin/patchbot\"\n```",
    "created_at": "2015-08-20T21:33:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265659",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

Just a small comment: you can replace

```
if [ -e "$SAGE_LOCAL/bin/patchbot" ]; then
   rm -rf "$SAGE_LOCAL/bin/patchbot"
fi
```
by

```
rm -rf "$SAGE_LOCAL/bin/patchbot"
```



---

archive/issue_comments_265660.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/62756e97c33ed9b8cbc04f5e50da0a9f71771f6a\"><code>62756e9</code></a></td><td><code>trac #18937 simplify spkg-install</code></td></tr></table>\n",
    "created_at": "2015-08-21T07:41:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265660",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/62756e97c33ed9b8cbc04f5e50da0a9f71771f6a"><code>62756e9</code></a></td><td><code>trac #18937 simplify spkg-install</code></td></tr></table>




---

archive/issue_comments_265661.json:
```json
{
    "body": "Changed commit from **[`6122b08`](https://github.com/sagemath/sagetrac-mirror/commit/6122b083c484cb580e61040fade56fded6da9a6a)** to **[`62756e9`](https://github.com/sagemath/sagetrac-mirror/commit/62756e97c33ed9b8cbc04f5e50da0a9f71771f6a)**",
    "created_at": "2015-08-21T07:41:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265661",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6122b08`](https://github.com/sagemath/sagetrac-mirror/commit/6122b083c484cb580e61040fade56fded6da9a6a)** to **[`62756e9`](https://github.com/sagemath/sagetrac-mirror/commit/62756e97c33ed9b8cbc04f5e50da0a9f71771f6a)**



---

archive/issue_comments_265662.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI have simplified the spkg-install as suggested.\n\nThis package works, and has been tested, see its report on top of http://patchbot.sagemath.org/ticket/18594/\n\nNeeds review.",
    "created_at": "2015-08-21T13:22:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265662",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:10" align="right">comment:10</div>

I have simplified the spkg-install as suggested.

This package works, and has been tested, see its report on top of http://patchbot.sagemath.org/ticket/18594/

Needs review.



---

archive/issue_comments_265663.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI need help, please. What is the correct top-level content of the tar archive:\n\na directory \"patchbot-2.4.0\" ? or a directory \"src\" ?",
    "created_at": "2015-08-22T16:36:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265663",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:11" align="right">comment:11</div>

I need help, please. What is the correct top-level content of the tar archive:

a directory "patchbot-2.4.0" ? or a directory "src" ?



---

archive/issue_comments_265664.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@fchapoton](#comment:11):\n> I need help, please. What is the correct top-level content of the tar archive:\n> \n> a directory \"patchbot-2.4.0\" ? or a directory \"src\" ?\n\nI'd say: anything is fine, as long as it works.",
    "created_at": "2015-08-23T19:59:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265664",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@fchapoton](#comment:11):
> I need help, please. What is the correct top-level content of the tar archive:
> 
> a directory "patchbot-2.4.0" ? or a directory "src" ?

I'd say: anything is fine, as long as it works.



---

archive/issue_comments_265665.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThis is a problem:\n\n```\nTraceback (most recent call last):\n  File \"/home/patchbot/sage-patchbot/local/bin/patchbot/patchbot.py\", line 45, in <module>\n    from trac import scrape, pull_from_trac\n  File \"/home/patchbot/sage-patchbot/local/bin/patchbot/trac.py\", line 15, in <module>\n    from util import (do_or_die, now_str, describe_branch,\n  File \"/home/patchbot/sage-patchbot/local/bin/patchbot/util.py\", line 7, in <module>\n    import pytz\nImportError: No module named pytz\n```",
    "created_at": "2015-08-26T17:54:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265665",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:13" align="right">comment:13</div>

This is a problem:

```
Traceback (most recent call last):
  File "/home/patchbot/sage-patchbot/local/bin/patchbot/patchbot.py", line 45, in <module>
    from trac import scrape, pull_from_trac
  File "/home/patchbot/sage-patchbot/local/bin/patchbot/trac.py", line 15, in <module>
    from util import (do_or_die, now_str, describe_branch,
  File "/home/patchbot/sage-patchbot/local/bin/patchbot/util.py", line 7, in <module>
    import pytz
ImportError: No module named pytz
```



---

archive/issue_events_270102.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-08-26T17:54:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18937#event-270102"
}
```



---

archive/issue_events_270103.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-08-26T17:54:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18937#event-270103"
}
```



---

archive/issue_comments_265666.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nInstead of `wget`, why not use `sage-download-file` which will work on every system?",
    "created_at": "2015-08-27T07:14:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265666",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:14" align="right">comment:14</div>

Instead of `wget`, why not use `sage-download-file` which will work on every system?



---

archive/issue_comments_265667.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThe patchbot is not Python 3 compatible:\n\n```\n  File \"/usr/local/src/sage-git/local/bin/patchbot/patchbot.py\", line 128\n    print datetime()\n                 ^\nSyntaxError: invalid syntax\n```",
    "created_at": "2015-08-27T07:42:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265667",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:15" align="right">comment:15</div>

The patchbot is not Python 3 compatible:

```
  File "/usr/local/src/sage-git/local/bin/patchbot/patchbot.py", line 128
    print datetime()
                 ^
SyntaxError: invalid syntax
```



---

archive/issue_comments_265668.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nYes, indeed. Several print statements are problematic.. Should I try to switch to python3 only, or really try to make a code that can run in both py2 and py3 ?",
    "created_at": "2015-08-27T07:47:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265668",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:16" align="right">comment:16</div>

Yes, indeed. Several print statements are problematic.. Should I try to switch to python3 only, or really try to make a code that can run in both py2 and py3 ?



---

archive/issue_comments_265669.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nSince you're using the system Python, you really need to support both Python 2 and Python 3.\n\nHowever, you might be able to use the `2to3` tool at install-time to solve this.",
    "created_at": "2015-08-27T07:54:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265669",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">comment:17</div>

Since you're using the system Python, you really need to support both Python 2 and Python 3.

However, you might be able to use the `2to3` tool at install-time to solve this.



---

archive/issue_comments_265670.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nThe upstream github repo contains a `spkg-install` file which is not the same as the one in Sage. Can you also update it upstream please?",
    "created_at": "2015-08-27T07:59:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265670",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:18" align="right">comment:18</div>

The upstream github repo contains a `spkg-install` file which is not the same as the one in Sage. Can you also update it upstream please?



---

archive/issue_comments_265671.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nMay I instead remove the \"spkg-install\" and the \"SPKG.txt\" completely inside the tar ball ?",
    "created_at": "2015-08-27T08:48:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265671",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:19" align="right">comment:19</div>

May I instead remove the "spkg-install" and the "SPKG.txt" completely inside the tar ball ?



---

archive/issue_comments_265672.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@fchapoton](#comment:19):\n> May I instead remove the \"spkg-install\" and the \"SPKG.txt\" completely inside the tar ball ?\n\nYes, under the condition that the patchbot can be easily installed from the sources (which is the case currently, just copy/symlink the whole directory).\n\nIf (for whatever reason) the installation procedure needs to become more complicated, that complexity should go to an install script inside the sources, not to `spkg-install`. It should not become a *requirement* to use Sage's `spkg-install` to install the patchbot.",
    "created_at": "2015-08-28T10:23:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265672",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@fchapoton](#comment:19):
> May I instead remove the "spkg-install" and the "SPKG.txt" completely inside the tar ball ?

Yes, under the condition that the patchbot can be easily installed from the sources (which is the case currently, just copy/symlink the whole directory).

If (for whatever reason) the installation procedure needs to become more complicated, that complexity should go to an install script inside the sources, not to `spkg-install`. It should not become a *requirement* to use Sage's `spkg-install` to install the patchbot.



---

archive/issue_comments_265673.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nHello,\n\nI am having trouble to get the patchbot running on python3, because of severe encoding problems. Would it be possible to keep this enhancement for a later upgrading of the patchbot spkg ?",
    "created_at": "2015-08-28T18:32:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265673",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:21" align="right">comment:21</div>

Hello,

I am having trouble to get the patchbot running on python3, because of severe encoding problems. Would it be possible to keep this enhancement for a later upgrading of the patchbot spkg ?



---

archive/issue_comments_265674.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nFine for me, but I would really prefer to see the system-wide dependencies reduced, in particular the `pytz` package, which is not installed by default on many operating systems.",
    "created_at": "2015-08-29T15:25:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265674",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:22" align="right">comment:22</div>

Fine for me, but I would really prefer to see the system-wide dependencies reduced, in particular the `pytz` package, which is not installed by default on many operating systems.



---

archive/issue_comments_265675.json:
```json
{
    "body": "Changed commit from **[`62756e9`](https://github.com/sagemath/sagetrac-mirror/commit/62756e97c33ed9b8cbc04f5e50da0a9f71771f6a)** to **[`8aa97d3`](https://github.com/sagemath/sagetrac-mirror/commit/8aa97d33ebf996d3943db2cb470d67dbb2bdbbfe)**",
    "created_at": "2015-08-30T15:42:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265675",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`62756e9`](https://github.com/sagemath/sagetrac-mirror/commit/62756e97c33ed9b8cbc04f5e50da0a9f71771f6a)** to **[`8aa97d3`](https://github.com/sagemath/sagetrac-mirror/commit/8aa97d33ebf996d3943db2cb470d67dbb2bdbbfe)**



---

archive/issue_comments_265676.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/514ab9f8e04fcec4498c09ff39783a89ed868d5a\"><code>514ab9f</code></a></td><td><code>Merge branch 'u/chapoton/18937' into 6.9.b4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8aa97d33ebf996d3943db2cb470d67dbb2bdbbfe\"><code>8aa97d3</code></a></td><td><code>trac #18937 patchbot version without pytz</code></td></tr></table>\n",
    "created_at": "2015-08-30T15:42:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265676",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/514ab9f8e04fcec4498c09ff39783a89ed868d5a"><code>514ab9f</code></a></td><td><code>Merge branch 'u/chapoton/18937' into 6.9.b4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8aa97d33ebf996d3943db2cb470d67dbb2bdbbfe"><code>8aa97d3</code></a></td><td><code>trac #18937 patchbot version without pytz</code></td></tr></table>




---

archive/issue_comments_265677.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nOk, here is a version without need for pytz. It still needs dateutil, but it would be hard\nto do without anything to handle timezones..\n\nThis is not working in python3, because of encoding problems. Still I think it would be good to have a recent patchbot in the new style spkg.\n\nThis patchbot has not yet been run on a ticket.",
    "created_at": "2015-08-30T15:46:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265677",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:24" align="right">comment:24</div>

Ok, here is a version without need for pytz. It still needs dateutil, but it would be hard
to do without anything to handle timezones..

This is not working in python3, because of encoding problems. Still I think it would be good to have a recent patchbot in the new style spkg.

This patchbot has not yet been run on a ticket.



---

archive/issue_comments_265678.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,6 +2,6 @@\n \n In particular, the ascii plugin now looks for unicode only in .py[x] missing utf8 declaration.\n \n-Latest available version is 2.4.0\n+Latest available version is 2.4.1\n \n-spkg here : http://chapoton.perso.math.cnrs.fr/patchbot-2.4.0.tar.bz2\n+tarball here: http://chapoton.perso.math.cnrs.fr/patchbot-2.4.1.tar.bz2\n``````\n",
    "created_at": "2015-08-31T07:54:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265678",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,6 +2,6 @@
 
 In particular, the ascii plugin now looks for unicode only in .py[x] missing utf8 declaration.
 
-Latest available version is 2.4.0
+Latest available version is 2.4.1
 
-spkg here : http://chapoton.perso.math.cnrs.fr/patchbot-2.4.0.tar.bz2
+tarball here: http://chapoton.perso.math.cnrs.fr/patchbot-2.4.1.tar.bz2
``````




---

archive/issue_comments_265679.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nI think this is good to go, and so set to needs_review",
    "created_at": "2015-09-01T09:47:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265679",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:26" align="right">comment:26</div>

I think this is good to go, and so set to needs_review



---

archive/issue_events_270104.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-09-01T09:47:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18937#event-270104"
}
```



---

archive/issue_events_270105.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-09-01T09:47:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18937#event-270105"
}
```



---

archive/issue_comments_265680.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nIt is highly recommended to add a `build/pkgs/patchbot/dependencies` file.",
    "created_at": "2015-09-01T09:53:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265680",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:27" align="right">comment:27</div>

It is highly recommended to add a `build/pkgs/patchbot/dependencies` file.



---

archive/issue_comments_265681.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nYou just added an additional dependency on `six`:\n\n```\nTraceback (most recent call last):\n  File \"/home/worker/sage-patchbot/local/bin/patchbot/patchbot.py\", line 41, in <module>\n    from six.moves import cPickle as pickle\nImportError: No module named six.moves\n```",
    "created_at": "2015-09-01T09:53:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265681",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:28" align="right">comment:28</div>

You just added an additional dependency on `six`:

```
Traceback (most recent call last):
  File "/home/worker/sage-patchbot/local/bin/patchbot/patchbot.py", line 41, in <module>
    from six.moves import cPickle as pickle
ImportError: No module named six.moves
```



---

archive/issue_comments_265682.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nAnother question: why is `safe_only=True` the default? Why is there such an option in the first place?",
    "created_at": "2015-09-01T09:56:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265682",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:29" align="right">comment:29</div>

Another question: why is `safe_only=True` the default? Why is there such an option in the first place?



---

archive/issue_comments_265683.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nSince the need for `six` is again quite trivial, could you just replace the 2 uses of `six` by some logic like\n\n```\ntry:\n    import ...\nexcept ImportError:\n    import ...\n```",
    "created_at": "2015-09-01T10:30:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265683",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:30" align="right">comment:30</div>

Since the need for `six` is again quite trivial, could you just replace the 2 uses of `six` by some logic like

```
try:
    import ...
except ImportError:
    import ...
```



---

archive/issue_comments_265684.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\n* Ok, I will remove the dependency on six.\n\n* What should I put in the build/pkgs/patchbot/dependencies ? This is not explained in the doc\n\nhttp://doc.sagemath.org/html/en/developer/packaging.html\n\nIt is not clear to me if I should write there shell commands, python packages, or both.\n\n* Concerning the safe-only mode, this is certainly not perfect. I guess its main aim is to avoid the horribly long recompilation that can take place sometimes when some low-level things are changed. Patchbot users are always free to change the default setting. It is up to them to decide whether or not they test all the tickets, including some that may take a **lot** of time.",
    "created_at": "2015-09-01T11:40:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265684",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:31" align="right">comment:31</div>

* Ok, I will remove the dependency on six.

* What should I put in the build/pkgs/patchbot/dependencies ? This is not explained in the doc

http://doc.sagemath.org/html/en/developer/packaging.html

It is not clear to me if I should write there shell commands, python packages, or both.

* Concerning the safe-only mode, this is certainly not perfect. I guess its main aim is to avoid the horribly long recompilation that can take place sometimes when some low-level things are changed. Patchbot users are always free to change the default setting. It is up to them to decide whether or not they test all the tickets, including some that may take a **lot** of time.



---

archive/issue_comments_265685.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@fchapoton](#comment:31):\n> * What should I put in the build/pkgs/patchbot/dependencies ? This is not explained in the doc\n\nTrue, the documentation is lacking. For the patchbot, I think there are no dependencies, so something like\n\n```\n# No dependencies\n```\nshould be fine.\n\n> * Concerning the safe-only mode, this is certainly not perfect. I guess its main aim is to avoid the horribly long recompilation that can take place sometimes when some low-level things are changed.\n\nIf that is the reason, the name `safe_only` looks badly chosen: it seems to imply that testing other tickets is \"unsafe\" somehow.\n\n> Patchbot users are always free to change the default setting. It is up to them to decide whether or not they test all the tickets, including some that may take a **lot** of time.\n\nPersonally, I would prefer to have `safe_only=False` by default. I think that most patchbots are running all the time, so I don't see the problem.",
    "created_at": "2015-09-01T11:54:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265685",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@fchapoton](#comment:31):
> * What should I put in the build/pkgs/patchbot/dependencies ? This is not explained in the doc

True, the documentation is lacking. For the patchbot, I think there are no dependencies, so something like

```
# No dependencies
```
should be fine.

> * Concerning the safe-only mode, this is certainly not perfect. I guess its main aim is to avoid the horribly long recompilation that can take place sometimes when some low-level things are changed.

If that is the reason, the name `safe_only` looks badly chosen: it seems to imply that testing other tickets is "unsafe" somehow.

> Patchbot users are always free to change the default setting. It is up to them to decide whether or not they test all the tickets, including some that may take a **lot** of time.

Personally, I would prefer to have `safe_only=False` by default. I think that most patchbots are running all the time, so I don't see the problem.



---

archive/issue_comments_265686.json:
```json
{
    "body": "<div id=\"comment:33\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5ef48b17f3e76760d567e75f6420382709f1d482\"><code>5ef48b1</code></a></td><td><code>trac #18937 adding the dependencies file</code></td></tr></table>\n",
    "created_at": "2015-09-01T13:56:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265686",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5ef48b17f3e76760d567e75f6420382709f1d482"><code>5ef48b1</code></a></td><td><code>trac #18937 adding the dependencies file</code></td></tr></table>




---

archive/issue_comments_265687.json:
```json
{
    "body": "Changed commit from **[`8aa97d3`](https://github.com/sagemath/sagetrac-mirror/commit/8aa97d33ebf996d3943db2cb470d67dbb2bdbbfe)** to **[`5ef48b1`](https://github.com/sagemath/sagetrac-mirror/commit/5ef48b17f3e76760d567e75f6420382709f1d482)**",
    "created_at": "2015-09-01T13:56:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265687",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8aa97d3`](https://github.com/sagemath/sagetrac-mirror/commit/8aa97d33ebf996d3943db2cb470d67dbb2bdbbfe)** to **[`5ef48b1`](https://github.com/sagemath/sagetrac-mirror/commit/5ef48b17f3e76760d567e75f6420382709f1d482)**



---

archive/issue_comments_265688.json:
```json
{
    "body": "Changed commit from **[`5ef48b1`](https://github.com/sagemath/sagetrac-mirror/commit/5ef48b17f3e76760d567e75f6420382709f1d482)** to **[`6d2c1f4`](https://github.com/sagemath/sagetrac-mirror/commit/6d2c1f465c683641910916afcaf2323da42880f0)**",
    "created_at": "2015-09-01T13:59:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265688",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5ef48b1`](https://github.com/sagemath/sagetrac-mirror/commit/5ef48b17f3e76760d567e75f6420382709f1d482)** to **[`6d2c1f4`](https://github.com/sagemath/sagetrac-mirror/commit/6d2c1f465c683641910916afcaf2323da42880f0)**



---

archive/issue_comments_265689.json:
```json
{
    "body": "<div id=\"comment:34\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d2c1f465c683641910916afcaf2323da42880f0\"><code>6d2c1f4</code></a></td><td><code>adding a missing newline</code></td></tr></table>\n",
    "created_at": "2015-09-01T13:59:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265689",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:34"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d2c1f465c683641910916afcaf2323da42880f0"><code>6d2c1f4</code></a></td><td><code>adding a missing newline</code></td></tr></table>




---

archive/issue_comments_265690.json:
```json
{
    "body": "Changed commit from **[`6d2c1f4`](https://github.com/sagemath/sagetrac-mirror/commit/6d2c1f465c683641910916afcaf2323da42880f0)** to **[`d2ff062`](https://github.com/sagemath/sagetrac-mirror/commit/d2ff0627171251668b807e811bbcc3797ea56dc0)**",
    "created_at": "2015-09-01T14:04:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265690",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6d2c1f4`](https://github.com/sagemath/sagetrac-mirror/commit/6d2c1f465c683641910916afcaf2323da42880f0)** to **[`d2ff062`](https://github.com/sagemath/sagetrac-mirror/commit/d2ff0627171251668b807e811bbcc3797ea56dc0)**



---

archive/issue_comments_265691.json:
```json
{
    "body": "<div id=\"comment:35\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d2ff0627171251668b807e811bbcc3797ea56dc0\"><code>d2ff062</code></a></td><td><code>trac #18937 turning to 2.4.2</code></td></tr></table>\n",
    "created_at": "2015-09-01T14:04:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265691",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:35"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d2ff0627171251668b807e811bbcc3797ea56dc0"><code>d2ff062</code></a></td><td><code>trac #18937 turning to 2.4.2</code></td></tr></table>




---

archive/issue_comments_265692.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nok, here is a version without six, and with a dependencies file added",
    "created_at": "2015-09-01T14:05:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265692",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:36" align="right">comment:36</div>

ok, here is a version without six, and with a dependencies file added



---

archive/issue_comments_265693.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,6 +2,6 @@\n \n In particular, the ascii plugin now looks for unicode only in .py[x] missing utf8 declaration.\n \n-Latest available version is 2.4.1\n+Latest available version is 2.4.2\n \n-tarball here: http://chapoton.perso.math.cnrs.fr/patchbot-2.4.1.tar.bz2\n+tarball here: http://chapoton.perso.math.cnrs.fr/patchbot-2.4.2.tar.bz2\n``````\n",
    "created_at": "2015-09-01T14:05:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265693",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,6 +2,6 @@
 
 In particular, the ascii plugin now looks for unicode only in .py[x] missing utf8 declaration.
 
-Latest available version is 2.4.1
+Latest available version is 2.4.2
 
-tarball here: http://chapoton.perso.math.cnrs.fr/patchbot-2.4.1.tar.bz2
+tarball here: http://chapoton.perso.math.cnrs.fr/patchbot-2.4.2.tar.bz2
``````




---

archive/issue_comments_265694.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nIs there a difference between\n\n```\ndatetime.now()\n```\nand\n\n```\ndatetime.now(tzlocal())\n```\nand between\n\n```\ndatetime.utcnow()\n```\nand\n\n```\ndatetime.now(tzutc())\n```",
    "created_at": "2015-09-03T07:35:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265694",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:37" align="right">comment:37</div>

Is there a difference between

```
datetime.now()
```
and

```
datetime.now(tzlocal())
```
and between

```
datetime.utcnow()
```
and

```
datetime.now(tzutc())
```



---

archive/issue_comments_265695.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nApart from [comment:37], the only remaining use of `dateutil` is `dateutil.parser`.",
    "created_at": "2015-09-03T07:38:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265695",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:38" align="right">comment:38</div>

Apart from [comment:37], the only remaining use of `dateutil` is `dateutil.parser`.



---

archive/issue_comments_265696.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nIn fact, there is a **big** difference between datetime.utcnow() and datetime.now(tzutc())\n\n* `datetime.utcnow()` does not have any information about its timezone\n* `datetime.now(tzutc())` is an object that knows that it is in UTC timezone\n\nBecause I want to take differences between times, the clean way is to make pretty sure\nthat all datetimes are aware of their own timezones.\n\nGiven the nature of the patchbot, which is to receive and compare data from all over the world, I think there is no point in trying to get rid of the dateutil package.",
    "created_at": "2015-09-03T07:47:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265696",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:39" align="right">comment:39</div>

In fact, there is a **big** difference between datetime.utcnow() and datetime.now(tzutc())

* `datetime.utcnow()` does not have any information about its timezone
* `datetime.now(tzutc())` is an object that knows that it is in UTC timezone

Because I want to take differences between times, the clean way is to make pretty sure
that all datetimes are aware of their own timezones.

Given the nature of the patchbot, which is to receive and compare data from all over the world, I think there is no point in trying to get rid of the dateutil package.



---

archive/issue_comments_265697.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nWell, the patchbot package worked fine for a long time without `dateutil`, so there is no fundamental reason why we need it. We could do the replacements in [comment:37] and revert the `parse_datetime` function to what it was in earlier patchbot versions and have the patchbot \"just work\" that way.",
    "created_at": "2015-09-03T09:02:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265697",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:40" align="right">comment:40</div>

Well, the patchbot package worked fine for a long time without `dateutil`, so there is no fundamental reason why we need it. We could do the replacements in [comment:37] and revert the `parse_datetime` function to what it was in earlier patchbot versions and have the patchbot "just work" that way.



---

archive/issue_comments_265698.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nIs there any fundamental reason why we should avoid any dependency ? Should we trade at all prize clean code for code which may be approximate but our own ?\n\nI am grateful that you look at the patchbot code. Nevertheless, during this time, sage4 using patchbot 2.3.3 is just spending its time looptesting #258, once every two minutes. Maybe you should rather stop it.\n\nThe patchbot has several issues, the main one in my opinion being the recognition of trusted users, that is currently not good at all. I hope that it will not be necessary to solve all the issues in order to have a new style spkg.",
    "created_at": "2015-09-03T09:49:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265698",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:41" align="right">comment:41</div>

Is there any fundamental reason why we should avoid any dependency ? Should we trade at all prize clean code for code which may be approximate but our own ?

I am grateful that you look at the patchbot code. Nevertheless, during this time, sage4 using patchbot 2.3.3 is just spending its time looptesting #258, once every two minutes. Maybe you should rather stop it.

The patchbot has several issues, the main one in my opinion being the recognition of trusted users, that is currently not good at all. I hope that it will not be necessary to solve all the issues in order to have a new style spkg.



---

archive/issue_comments_265699.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n A lot of work has been done on the patchbot since the latest update in #16872.\n \n-In particular, the ascii plugin now looks for unicode only in .py[x] missing utf8 declaration.\n+In particular, the ascii plugin now looks for unicode only in .py[x] missing utf8 declaration, and the patchbot does not look at spkg tickets more than once per day.\n \n Latest available version is 2.4.2\n \n``````\n",
    "created_at": "2015-09-03T11:39:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265699",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 A lot of work has been done on the patchbot since the latest update in #16872.
 
-In particular, the ascii plugin now looks for unicode only in .py[x] missing utf8 declaration.
+In particular, the ascii plugin now looks for unicode only in .py[x] missing utf8 declaration, and the patchbot does not look at spkg tickets more than once per day.
 
 Latest available version is 2.4.2
 
``````




---

archive/issue_comments_265700.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nReplying to [@fchapoton](#comment:41):\n> Is there any fundamental reason why we should avoid any dependency ?\n\nYes: `patchbot` would be the only Sage package which has dependencies beyond Sage. Installing packages system-wide is a big requirement.",
    "created_at": "2015-09-03T13:50:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265700",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:43" align="right">comment:43</div>

Replying to [@fchapoton](#comment:41):
> Is there any fundamental reason why we should avoid any dependency ?

Yes: `patchbot` would be the only Sage package which has dependencies beyond Sage. Installing packages system-wide is a big requirement.



---

archive/issue_comments_265701.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\n> Yes: `patchbot` would be the only Sage package which has dependencies beyond Sage. \n\nhttps://groups.google.com/d/msg/sage-devel/-oLvlyvbclA/GXK3UjXVCwAJ\n\n> Installing packages system-wide is a big requirement.\n\nFor those who install the patchbot? Come on, who installs that except developpers? If they get a message saying that \"X must be installed\" they will install it, and that's it.\n\nTo install mine I had to fight for days, create an user account only for the patchbot, fight with ccache... Having a system dependency like that really isn't a problem (if an explicit error message appears).\n\nNathann",
    "created_at": "2015-09-03T14:20:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265701",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:44" align="right">comment:44</div>

> Yes: `patchbot` would be the only Sage package which has dependencies beyond Sage. 

https://groups.google.com/d/msg/sage-devel/-oLvlyvbclA/GXK3UjXVCwAJ

> Installing packages system-wide is a big requirement.

For those who install the patchbot? Come on, who installs that except developpers? If they get a message saying that "X must be installed" they will install it, and that's it.

To install mine I had to fight for days, create an user account only for the patchbot, fight with ccache... Having a system dependency like that really isn't a problem (if an explicit error message appears).

Nathann



---

archive/issue_comments_265702.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nJeroen, do you object if this is made a new-style spkg in its current state ?\n\nVersion 2.4.2 works well, it is now running quite smoothly on arando since a long time.\n\nI would really like the patchbot to survive the \"disparition\" of old-style spkgs..",
    "created_at": "2015-09-10T19:58:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265702",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:45" align="right">comment:45</div>

Jeroen, do you object if this is made a new-style spkg in its current state ?

Version 2.4.2 works well, it is now running quite smoothly on arando since a long time.

I would really like the patchbot to survive the "disparition" of old-style spkgs..



---

archive/issue_comments_265703.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nThere is no such thing as disparation of old style package. We will still be able to do\n\n```\nsage -i FULL_URL_OF_OLD_PKG\n```\n\nNote that having new style package for the patchbot is much less flexible then the old one (i.e. you have to wait the next release to have the patchbot updated).",
    "created_at": "2015-09-10T22:32:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265703",
    "user": "https://github.com/videlec"
}
```

<div id="comment:46" align="right">comment:46</div>

There is no such thing as disparation of old style package. We will still be able to do

```
sage -i FULL_URL_OF_OLD_PKG
```

Note that having new style package for the patchbot is much less flexible then the old one (i.e. you have to wait the next release to have the patchbot updated).



---

archive/issue_comments_265704.json:
```json
{
    "body": "Changed commit from **[`d2ff062`](https://github.com/sagemath/sagetrac-mirror/commit/d2ff0627171251668b807e811bbcc3797ea56dc0)** to **[`9791f5b`](https://github.com/sagemath/sagetrac-mirror/commit/9791f5bf370666d65b8e5e9237460b49dc64d089)**",
    "created_at": "2015-09-11T19:49:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265704",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d2ff062`](https://github.com/sagemath/sagetrac-mirror/commit/d2ff0627171251668b807e811bbcc3797ea56dc0)** to **[`9791f5b`](https://github.com/sagemath/sagetrac-mirror/commit/9791f5bf370666d65b8e5e9237460b49dc64d089)**



---

archive/issue_comments_265705.json:
```json
{
    "body": "<div id=\"comment:47\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/462b4150784e4c31b1de7a5c406eacc7d8cd7b4b\"><code>462b415</code></a></td><td><code>Merge branch 'u/chapoton/18937' into 6.9.b6</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9791f5bf370666d65b8e5e9237460b49dc64d089\"><code>9791f5b</code></a></td><td><code>trac #18937 new patchbot 2.4.3 with enhanced trust control</code></td></tr></table>\n",
    "created_at": "2015-09-11T19:49:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265705",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:47"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/462b4150784e4c31b1de7a5c406eacc7d8cd7b4b"><code>462b415</code></a></td><td><code>Merge branch 'u/chapoton/18937' into 6.9.b6</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9791f5bf370666d65b8e5e9237460b49dc64d089"><code>9791f5b</code></a></td><td><code>trac #18937 new patchbot 2.4.3 with enhanced trust control</code></td></tr></table>




---

archive/issue_comments_265706.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,6 +2,6 @@\n \n In particular, the ascii plugin now looks for unicode only in .py[x] missing utf8 declaration, and the patchbot does not look at spkg tickets more than once per day.\n \n-Latest available version is 2.4.2\n+Latest available version is 2.4.3\n \n-tarball here: http://chapoton.perso.math.cnrs.fr/patchbot-2.4.2.tar.bz2\n+tarball here: http://chapoton.perso.math.cnrs.fr/patchbot-2.4.3.tar.bz2\n``````\n",
    "created_at": "2015-09-11T19:53:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265706",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,6 +2,6 @@
 
 In particular, the ascii plugin now looks for unicode only in .py[x] missing utf8 declaration, and the patchbot does not look at spkg tickets more than once per day.
 
-Latest available version is 2.4.2
+Latest available version is 2.4.3
 
-tarball here: http://chapoton.perso.math.cnrs.fr/patchbot-2.4.2.tar.bz2
+tarball here: http://chapoton.perso.math.cnrs.fr/patchbot-2.4.3.tar.bz2
``````




---

archive/issue_comments_265707.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nHere is major new version 2.4.3\n\nI have enhanced the trust control, hereby reducing the number of tickets that were not tested for wrong reasons. But this will work better if all people that run patchbots agree to update their patchbots.\n\nTherefore this ticket needs review, more than ever.",
    "created_at": "2015-09-11T19:53:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265707",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:48" align="right">comment:48</div>

Here is major new version 2.4.3

I have enhanced the trust control, hereby reducing the number of tickets that were not tested for wrong reasons. But this will work better if all people that run patchbots agree to update their patchbots.

Therefore this ticket needs review, more than ever.



---

archive/issue_events_270106.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-09-11T22:59:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18937#event-270106"
}
```



---

archive/issue_events_270107.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-09-11T22:59:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18937#event-270107"
}
```



---

archive/issue_comments_265708.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nWould be better with a working patchbot... break after ten seconds with\n\n```\n[2015-09-11 22:58:44 +0000] Getting ticket list...\nTraceback (most recent call last):\n  File \"/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py\", line 1316, in main\n    patchbot.test_a_ticket(ticket)\n  File \"/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py\", line 846, in test_a_ticket\n    rating, ticket = self.get_one_ticket()\n  File \"/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py\", line 672, in get_one_ticket\n    for t in all))\n  File \"/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py\", line 672, in <genexpr>\n    for t in all))\n  File \"/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py\", line 728, in rate_ticket\n    if not ticket['authors_fullnames']:\nKeyError: 'authors_fullnames'\n```",
    "created_at": "2015-09-11T22:59:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265708",
    "user": "https://github.com/videlec"
}
```

<div id="comment:49" align="right">comment:49</div>

Would be better with a working patchbot... break after ten seconds with

```
[2015-09-11 22:58:44 +0000] Getting ticket list...
Traceback (most recent call last):
  File "/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py", line 1316, in main
    patchbot.test_a_ticket(ticket)
  File "/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py", line 846, in test_a_ticket
    rating, ticket = self.get_one_ticket()
  File "/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py", line 672, in get_one_ticket
    for t in all))
  File "/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py", line 672, in <genexpr>
    for t in all))
  File "/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py", line 728, in rate_ticket
    if not ticket['authors_fullnames']:
KeyError: 'authors_fullnames'
```



---

archive/issue_comments_265709.json:
```json
{
    "body": "Changed commit from **[`9791f5b`](https://github.com/sagemath/sagetrac-mirror/commit/9791f5bf370666d65b8e5e9237460b49dc64d089)** to **[`4ed09ec`](https://github.com/sagemath/sagetrac-mirror/commit/4ed09ecce4b1bd1028b6046cfa9cb0f74e690c9a)**",
    "created_at": "2015-09-12T07:47:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265709",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9791f5b`](https://github.com/sagemath/sagetrac-mirror/commit/9791f5bf370666d65b8e5e9237460b49dc64d089)** to **[`4ed09ec`](https://github.com/sagemath/sagetrac-mirror/commit/4ed09ecce4b1bd1028b6046cfa9cb0f74e690c9a)**



---

archive/issue_comments_265710.json:
```json
{
    "body": "<div id=\"comment:50\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4ed09ecce4b1bd1028b6046cfa9cb0f74e690c9a\"><code>4ed09ec</code></a></td><td><code>trac #18937 patchbot 2.4.4 bugfix for broken 2.4.3</code></td></tr></table>\n",
    "created_at": "2015-09-12T07:47:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265710",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:50"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4ed09ecce4b1bd1028b6046cfa9cb0f74e690c9a"><code>4ed09ec</code></a></td><td><code>trac #18937 patchbot 2.4.4 bugfix for broken 2.4.3</code></td></tr></table>




---

archive/issue_comments_265711.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nI am very sorry. I was a bit over-enthusiastic for having an idea to solve the trust-checking issue. This should work now.\n\nBy the way, what will happen if I do\n\n```\nsage -i patchbot-2.4.9\n```\nwith a future instance of the new-style spkg ?\nIn other words, can one install new-style spkg updates in that way ?",
    "created_at": "2015-09-12T07:50:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265711",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:51" align="right">comment:51</div>

I am very sorry. I was a bit over-enthusiastic for having an idea to solve the trust-checking issue. This should work now.

By the way, what will happen if I do

```
sage -i patchbot-2.4.9
```
with a future instance of the new-style spkg ?
In other words, can one install new-style spkg updates in that way ?



---

archive/issue_comments_265712.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,6 +2,6 @@\n \n In particular, the ascii plugin now looks for unicode only in .py[x] missing utf8 declaration, and the patchbot does not look at spkg tickets more than once per day.\n \n-Latest available version is 2.4.3\n+Latest available version is 2.4.4\n \n-tarball here: http://chapoton.perso.math.cnrs.fr/patchbot-2.4.3.tar.bz2\n+tarball here: http://chapoton.perso.math.cnrs.fr/patchbot-2.4.4.tar.bz2\n``````\n",
    "created_at": "2015-09-12T07:50:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265712",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,6 +2,6 @@
 
 In particular, the ascii plugin now looks for unicode only in .py[x] missing utf8 declaration, and the patchbot does not look at spkg tickets more than once per day.
 
-Latest available version is 2.4.3
+Latest available version is 2.4.4
 
-tarball here: http://chapoton.perso.math.cnrs.fr/patchbot-2.4.3.tar.bz2
+tarball here: http://chapoton.perso.math.cnrs.fr/patchbot-2.4.4.tar.bz2
``````




---

archive/issue_events_270108.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-09-12T07:56:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18937#event-270108"
}
```



---

archive/issue_events_270109.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-09-12T07:56:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18937#event-270109"
}
```



---

archive/issue_comments_265713.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nYou should seriously test the patchbot before posting a new tarball here...\n\n```\n19158: Pending\nok (report successfully posted)\n2015-09-12 14:22:29 +0000\nTraceback (most recent call last):\n  File \"/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py\", line 886, in test_a_ticket\n    print(self.banner())\nUnicodeEncodeError: 'ascii' codec can't encode characters in position 0-9: ordinal not in range(128)\n2015-09-12 14:22:29 +0000\n0 seconds\n[2015-09-12 14:22:31 +0000] An exception has been raised during the test of #19158\nTraceback (most recent call last):\n  File \"/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py\", line 886, in test_a_ticket\n    print(self.banner())\nUnicodeEncodeError: 'ascii' codec can't encode characters in position 0-9: ordinal not in range(128)\nTraceback (most recent call last):\n  File \"/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py\", line 1316, in main\n    patchbot.test_a_ticket(ticket)\n  File \"/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py\", line 1023, in test_a_ticket\n    self.write_log(\"Reporting #{} with status {}\".format(ticket['id'], status[state]),\nUnboundLocalError: local variable 'state' referenced before assignment\n```",
    "created_at": "2015-09-12T14:23:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265713",
    "user": "https://github.com/videlec"
}
```

<div id="comment:53" align="right">comment:53</div>

You should seriously test the patchbot before posting a new tarball here...

```
19158: Pending
ok (report successfully posted)
2015-09-12 14:22:29 +0000
Traceback (most recent call last):
  File "/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py", line 886, in test_a_ticket
    print(self.banner())
UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-9: ordinal not in range(128)
2015-09-12 14:22:29 +0000
0 seconds
[2015-09-12 14:22:31 +0000] An exception has been raised during the test of #19158
Traceback (most recent call last):
  File "/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py", line 886, in test_a_ticket
    print(self.banner())
UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-9: ordinal not in range(128)
Traceback (most recent call last):
  File "/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py", line 1316, in main
    patchbot.test_a_ticket(ticket)
  File "/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py", line 1023, in test_a_ticket
    self.write_log("Reporting #{} with status {}".format(ticket['id'], status[state]),
UnboundLocalError: local variable 'state' referenced before assignment
```



---

archive/issue_events_270110.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-09-12T14:23:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18937#event-270110"
}
```



---

archive/issue_events_270111.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-09-12T14:23:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18937#event-270111"
}
```



---

archive/issue_comments_265714.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nI had tested it, but obviously not enough.. I'm testing usually inside a ipython session.\n\nDifficulties with utf8, I find them quite hard and messy.",
    "created_at": "2015-09-12T15:40:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265714",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:54" align="right">comment:54</div>

I had tested it, but obviously not enough.. I'm testing usually inside a ipython session.

Difficulties with utf8, I find them quite hard and messy.



---

archive/issue_comments_265715.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\n`@`vincent: maybe it is your terminal that does not support utf8 ?\n\nI do not see this problem when I try to test the same ticket.",
    "created_at": "2015-09-12T16:04:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265715",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:55" align="right">comment:55</div>

`@`vincent: maybe it is your terminal that does not support utf8 ?

I do not see this problem when I try to test the same ticket.



---

archive/issue_comments_265716.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nPerhaps my terminal is messy but anyway the final traceback is\n\n```\nTraceback (most recent call last):\n  File \"/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py\", line 1316, in main\n    patchbot.test_a_ticket(ticket)\n  File \"/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py\", line 1023, in test_a_ticket\n    self.write_log(\"Reporting #{} with status {}\".format(ticket['id'], status[state]),\nUnboundLocalError: local variable 'state' referenced before assignment\n```\nwhich tells that something is wrong.\n\nAnyway, it used to work with the very same terminal.",
    "created_at": "2015-09-12T17:22:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265716",
    "user": "https://github.com/videlec"
}
```

<div id="comment:56" align="right">comment:56</div>

Perhaps my terminal is messy but anyway the final traceback is

```
Traceback (most recent call last):
  File "/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py", line 1316, in main
    patchbot.test_a_ticket(ticket)
  File "/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py", line 1023, in test_a_ticket
    self.write_log("Reporting #{} with status {}".format(ticket['id'], status[state]),
UnboundLocalError: local variable 'state' referenced before assignment
```
which tells that something is wrong.

Anyway, it used to work with the very same terminal.



---

archive/issue_comments_265717.json:
```json
{
    "body": "Changed commit from **[`4ed09ec`](https://github.com/sagemath/sagetrac-mirror/commit/4ed09ecce4b1bd1028b6046cfa9cb0f74e690c9a)** to **[`61aa576`](https://github.com/sagemath/sagetrac-mirror/commit/61aa576861e6a227bdfdfe4dfa15bb78b6d28729)**",
    "created_at": "2015-09-13T15:55:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265717",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4ed09ec`](https://github.com/sagemath/sagetrac-mirror/commit/4ed09ecce4b1bd1028b6046cfa9cb0f74e690c9a)** to **[`61aa576`](https://github.com/sagemath/sagetrac-mirror/commit/61aa576861e6a227bdfdfe4dfa15bb78b6d28729)**



---

archive/issue_comments_265718.json:
```json
{
    "body": "<div id=\"comment:57\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/61aa576861e6a227bdfdfe4dfa15bb78b6d28729\"><code>61aa576</code></a></td><td><code>trac #18937 version 2.4.5</code></td></tr></table>\n",
    "created_at": "2015-09-13T15:55:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265718",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:57"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/61aa576861e6a227bdfdfe4dfa15bb78b6d28729"><code>61aa576</code></a></td><td><code>trac #18937 version 2.4.5</code></td></tr></table>




---

archive/issue_comments_265719.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,6 +2,6 @@\n \n In particular, the ascii plugin now looks for unicode only in .py[x] missing utf8 declaration, and the patchbot does not look at spkg tickets more than once per day.\n \n-Latest available version is 2.4.4\n+Latest available version is 2.4.5\n \n-tarball here: http://chapoton.perso.math.cnrs.fr/patchbot-2.4.4.tar.bz2\n+tarball here: http://chapoton.perso.math.cnrs.fr/patchbot-2.4.5.tar.bz2\n``````\n",
    "created_at": "2015-09-13T15:57:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265719",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,6 +2,6 @@
 
 In particular, the ascii plugin now looks for unicode only in .py[x] missing utf8 declaration, and the patchbot does not look at spkg tickets more than once per day.
 
-Latest available version is 2.4.4
+Latest available version is 2.4.5
 
-tarball here: http://chapoton.perso.math.cnrs.fr/patchbot-2.4.4.tar.bz2
+tarball here: http://chapoton.perso.math.cnrs.fr/patchbot-2.4.5.tar.bz2
``````




---

archive/issue_comments_265720.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nVincent or Jeroen, would you please try that one ? I do no longer dare to put that into needs_review... :(",
    "created_at": "2015-09-14T16:40:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265720",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:59" align="right">comment:59</div>

Vincent or Jeroen, would you please try that one ? I do no longer dare to put that into needs_review... :(



---

archive/issue_comments_265721.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nSame problem as before\n\n```\n2015-09-14 16:50:06 +0000\nTraceback (most recent call last):\n  File \"/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py\", line 889, in test_a_ticket\n    print(self.banner())\nUnicodeEncodeError: 'ascii' codec can't encode characters in position 0-9: ordinal not in range(128)\n2015-09-14 16:50:06 +0000\n0 seconds\n```",
    "created_at": "2015-09-14T16:50:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265721",
    "user": "https://github.com/videlec"
}
```

<div id="comment:60" align="right">comment:60</div>

Same problem as before

```
2015-09-14 16:50:06 +0000
Traceback (most recent call last):
  File "/home/vincent/sage_patchbot/local/bin/patchbot/patchbot.py", line 889, in test_a_ticket
    print(self.banner())
UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-9: ordinal not in range(128)
2015-09-14 16:50:06 +0000
0 seconds
```



---

archive/issue_comments_265722.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\ndamn.. could you please check your terminal utf8 capacities ?",
    "created_at": "2015-09-14T20:11:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265722",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:61" align="right">comment:61</div>

damn.. could you please check your terminal utf8 capacities ?



---

archive/issue_comments_265723.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nWorks perfectly with version 2.3.9 of the patchbot.",
    "created_at": "2015-09-14T23:37:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265723",
    "user": "https://github.com/videlec"
}
```

<div id="comment:62" align="right">comment:62</div>

Works perfectly with version 2.3.9 of the patchbot.



---

archive/issue_comments_265724.json:
```json
{
    "body": "Changed commit from **[`61aa576`](https://github.com/sagemath/sagetrac-mirror/commit/61aa576861e6a227bdfdfe4dfa15bb78b6d28729)** to **[`f71f7fa`](https://github.com/sagemath/sagetrac-mirror/commit/f71f7fac22538903327fa1ed78aa0c36055892f1)**",
    "created_at": "2015-09-15T13:19:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265724",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`61aa576`](https://github.com/sagemath/sagetrac-mirror/commit/61aa576861e6a227bdfdfe4dfa15bb78b6d28729)** to **[`f71f7fa`](https://github.com/sagemath/sagetrac-mirror/commit/f71f7fac22538903327fa1ed78aa0c36055892f1)**



---

archive/issue_comments_265725.json:
```json
{
    "body": "<div id=\"comment:63\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f71f7fac22538903327fa1ed78aa0c36055892f1\"><code>f71f7fa</code></a></td><td><code>version 2.4.6</code></td></tr></table>\n",
    "created_at": "2015-09-15T13:19:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265725",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:63"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f71f7fac22538903327fa1ed78aa0c36055892f1"><code>f71f7fa</code></a></td><td><code>version 2.4.6</code></td></tr></table>




---

archive/issue_comments_265726.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,6 +2,6 @@\n \n In particular, the ascii plugin now looks for unicode only in .py[x] missing utf8 declaration, and the patchbot does not look at spkg tickets more than once per day.\n \n-Latest available version is 2.4.5\n+Latest available version is 2.4.6\n \n-tarball here: http://chapoton.perso.math.cnrs.fr/patchbot-2.4.5.tar.bz2\n+tarball here: http://chapoton.perso.math.cnrs.fr/patchbot-2.4.6.tar.bz2\n``````\n",
    "created_at": "2015-09-15T13:21:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265726",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,6 +2,6 @@
 
 In particular, the ascii plugin now looks for unicode only in .py[x] missing utf8 declaration, and the patchbot does not look at spkg tickets more than once per day.
 
-Latest available version is 2.4.5
+Latest available version is 2.4.6
 
-tarball here: http://chapoton.perso.math.cnrs.fr/patchbot-2.4.5.tar.bz2
+tarball here: http://chapoton.perso.math.cnrs.fr/patchbot-2.4.6.tar.bz2
``````




---

archive/issue_comments_265727.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nI think that I have solved this problem of utf8. Please check.",
    "created_at": "2015-09-15T13:21:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265727",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:64" align="right">comment:64</div>

I think that I have solved this problem of utf8. Please check.



---

archive/issue_comments_265728.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nAt least it started! Yipee! It currently runs on librae. Let see what happens.\n\nVincent",
    "created_at": "2015-09-15T13:29:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265728",
    "user": "https://github.com/videlec"
}
```

<div id="comment:65" align="right">comment:65</div>

At least it started! Yipee! It currently runs on librae. Let see what happens.

Vincent



---

archive/issue_comments_265729.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nRemains the question about Python module dependencies... what is the current status?\n\nCould you also split the very long line in SPKG.txt?\n\nVincent",
    "created_at": "2015-09-15T21:36:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265729",
    "user": "https://github.com/videlec"
}
```

<div id="comment:66" align="right">comment:66</div>

Remains the question about Python module dependencies... what is the current status?

Could you also split the very long line in SPKG.txt?

Vincent



---

archive/issue_events_270112.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-09-15T21:36:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18937#event-270112"
}
```



---

archive/issue_events_270113.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-09-15T21:36:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18937#event-270113"
}
```



---

archive/issue_comments_265730.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer, Nathann Cohen, Vincent Delecroix**",
    "created_at": "2015-09-15T21:36:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265730",
    "user": "https://github.com/videlec"
}
```

Reviewer: **Jeroen Demeyer, Nathann Cohen, Vincent Delecroix**



---

archive/issue_comments_265731.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nIn the `history.txt` file I got some strange missing things\n\n```\n[2015-09-15 15:25:11 +0000] #19001: starting tests\n[2015-09-15 16:00:53 +0000] #19001: TestsPassed\n[2015-09-15 16:01:10 +0000] #19043: starting tests\n[2015-09-15 16:01:26 +0000] #19048: starting tests\n[2015-09-15 16:02:21 +0000] #19068: starting tests\n```\nIndeed #19043 is unsafe and was skipped. But this does not appear in the history.\n\nFor #19048 I think that something gets wrong because in `patchbot.log` I got\n\n```\n[2015-09-15 16:02:09 +0000] An exception has been raised during the test of #19048\n```\nWhich is not very precise. Looking at 19048-log.txt it appears that\n\n```\n[calculus ] reading sources... [  5%] sage/calculus/calculus\nError building the documentation.\nTraceback (most recent call last):\n  File \"/home/vincent/sage_patchbot/src/doc/common/builder.py\", line 1626, in <module>\n    getattr(get_builder(name), type)()\n  File \"/home/vincent/sage_patchbot/src/doc/common/builder.py\", line 292, in _wrapper\n    getattr(get_builder(document), 'inventory')(*args, **kwds)\n  File \"/home/vincent/sage_patchbot/src/doc/common/builder.py\", line 503, in _wrapper\n    x.get(99999)\n  File \"/home/vincent/sage_patchbot/local/lib/python/multiprocessing/pool.py\", line 558, in get\n    raise self._value\nOSError: [rings    ] /home/vincent/sage_patchbot/local/lib/python2.7/site-packages/sage/rings/asymptotic/asymptotic_ring.py:docstring of sage.rings.asymptotic.asymptotic_ring:16: ERROR: Unexpected indentation.\n```\nSo the report status should be that the documentation does not build... the error was catched but somehow misinterpreted.\n\nVincent",
    "created_at": "2015-09-15T22:42:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265731",
    "user": "https://github.com/videlec"
}
```

<div id="comment:67" align="right">comment:67</div>

In the `history.txt` file I got some strange missing things

```
[2015-09-15 15:25:11 +0000] #19001: starting tests
[2015-09-15 16:00:53 +0000] #19001: TestsPassed
[2015-09-15 16:01:10 +0000] #19043: starting tests
[2015-09-15 16:01:26 +0000] #19048: starting tests
[2015-09-15 16:02:21 +0000] #19068: starting tests
```
Indeed #19043 is unsafe and was skipped. But this does not appear in the history.

For #19048 I think that something gets wrong because in `patchbot.log` I got

```
[2015-09-15 16:02:09 +0000] An exception has been raised during the test of #19048
```
Which is not very precise. Looking at 19048-log.txt it appears that

```
[calculus ] reading sources... [  5%] sage/calculus/calculus
Error building the documentation.
Traceback (most recent call last):
  File "/home/vincent/sage_patchbot/src/doc/common/builder.py", line 1626, in <module>
    getattr(get_builder(name), type)()
  File "/home/vincent/sage_patchbot/src/doc/common/builder.py", line 292, in _wrapper
    getattr(get_builder(document), 'inventory')(*args, **kwds)
  File "/home/vincent/sage_patchbot/src/doc/common/builder.py", line 503, in _wrapper
    x.get(99999)
  File "/home/vincent/sage_patchbot/local/lib/python/multiprocessing/pool.py", line 558, in get
    raise self._value
OSError: [rings    ] /home/vincent/sage_patchbot/local/lib/python2.7/site-packages/sage/rings/asymptotic/asymptotic_ring.py:docstring of sage.rings.asymptotic.asymptotic_ring:16: ERROR: Unexpected indentation.
```
So the report status should be that the documentation does not build... the error was catched but somehow misinterpreted.

Vincent



---

archive/issue_comments_265732.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nComes from this commit\n\n```\ncommit f648b882bebdb033e423fe038237dad3f1e5df1e\nAuthor: Fr\u00e9d\u00e9ric Chapoton <chapoton@math.univ-lyon1.fr>\nDate:   Mon Mar 30 14:24:22 2015 +0200\n\n    little more doc\n\n```\nit desactivate the docbuild plugin and hence does not catch error when building the documentation.\n\nEDIT: not sure that it was fine before the mentioned commit... because the build would have failed anyway.",
    "created_at": "2015-09-15T22:45:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265732",
    "user": "https://github.com/videlec"
}
```

<div id="comment:68" align="right">comment:68</div>

Comes from this commit

```
commit f648b882bebdb033e423fe038237dad3f1e5df1e
Author: Frédéric Chapoton <chapoton@math.univ-lyon1.fr>
Date:   Mon Mar 30 14:24:22 2015 +0200

    little more doc

```
it desactivate the docbuild plugin and hence does not catch error when building the documentation.

EDIT: not sure that it was fine before the mentioned commit... because the build would have failed anyway.



---

archive/issue_events_270114.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-09-15T22:45:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18937#event-270114"
}
```



---

archive/issue_events_270115.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-09-15T22:45:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18937#event-270115"
}
```



---

archive/issue_comments_265733.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\n1) the html doc is now always build, when doing make, so the plugin is not activated to avoid a duplicate. There is also a pdf-doc plugin, not activated by default.\n\n2) \"An exception has been raised during the test\" is now raised when nothing is known about the exception. Maybe this was a wrong change, and should be reverted ?\n\n3) concerning python dependencies, there is only dateutil. I would prefer to keep it, because it makes sense to have a correct handling of timezones in a world-wide server.",
    "created_at": "2015-09-16T08:13:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265733",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:69" align="right">comment:69</div>

1) the html doc is now always build, when doing make, so the plugin is not activated to avoid a duplicate. There is also a pdf-doc plugin, not activated by default.

2) "An exception has been raised during the test" is now raised when nothing is known about the exception. Maybe this was a wrong change, and should be reverted ?

3) concerning python dependencies, there is only dateutil. I would prefer to keep it, because it makes sense to have a correct handling of timezones in a world-wide server.



---

archive/issue_comments_265734.json:
```json
{
    "body": "<div id=\"comment:70\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b06cc7f2214b94c24a071e7fe06eb39772ce3a44\"><code>b06cc7f</code></a></td><td><code>trac #18937 changes to patchbot SPKG.txt</code></td></tr></table>\n",
    "created_at": "2015-09-16T09:27:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265734",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:70"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b06cc7f2214b94c24a071e7fe06eb39772ce3a44"><code>b06cc7f</code></a></td><td><code>trac #18937 changes to patchbot SPKG.txt</code></td></tr></table>




---

archive/issue_comments_265735.json:
```json
{
    "body": "Changed commit from **[`f71f7fa`](https://github.com/sagemath/sagetrac-mirror/commit/f71f7fac22538903327fa1ed78aa0c36055892f1)** to **[`b06cc7f`](https://github.com/sagemath/sagetrac-mirror/commit/b06cc7f2214b94c24a071e7fe06eb39772ce3a44)**",
    "created_at": "2015-09-16T09:27:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265735",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f71f7fa`](https://github.com/sagemath/sagetrac-mirror/commit/f71f7fac22538903327fa1ed78aa0c36055892f1)** to **[`b06cc7f`](https://github.com/sagemath/sagetrac-mirror/commit/b06cc7f2214b94c24a071e7fe06eb39772ce3a44)**



---

archive/issue_comments_265736.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nReplying to [@fchapoton](#comment:69):\n> 1) the html doc is now always build, when doing make, so the plugin is not activated to avoid a duplicate. There is also a pdf-doc plugin, not activated by default.\n> \n> 2) \"An exception has been raised during the test\" is now raised when nothing is known about the exception. Maybe this was a wrong change, and should be reverted ?\n\nThis is a clear problem. The patchbot did report nothing to #19048 where it should have said documentation failed to build. I do not know how it handled it before but I thought that the patchbot did report some kind of \"documentation failed\" as a status. Though, the main problem is not the fact that it does not know what kind of error it is (you can figure out from the log) but the fact that the patchbot did not send the log to the server...\n\n> 3) concerning python dependencies, there is only dateutil. I would prefer to keep it, because it makes sense to have a correct handling of timezones in a world-wide server.\n\nThen perhaps its presence could be checked in the installation script?",
    "created_at": "2015-09-16T13:28:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265736",
    "user": "https://github.com/videlec"
}
```

<div id="comment:71" align="right">comment:71</div>

Replying to [@fchapoton](#comment:69):
> 1) the html doc is now always build, when doing make, so the plugin is not activated to avoid a duplicate. There is also a pdf-doc plugin, not activated by default.
> 
> 2) "An exception has been raised during the test" is now raised when nothing is known about the exception. Maybe this was a wrong change, and should be reverted ?

This is a clear problem. The patchbot did report nothing to #19048 where it should have said documentation failed to build. I do not know how it handled it before but I thought that the patchbot did report some kind of "documentation failed" as a status. Though, the main problem is not the fact that it does not know what kind of error it is (you can figure out from the log) but the fact that the patchbot did not send the log to the server...

> 3) concerning python dependencies, there is only dateutil. I would prefer to keep it, because it makes sense to have a correct handling of timezones in a world-wide server.

Then perhaps its presence could be checked in the installation script?



---

archive/issue_comments_265737.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nReplying to [@videlec](#comment:71):\n> Then perhaps its presence could be checked in the installation script?\n\nOr, alternatively, remove the artificial dependency on `dateutil`.\n\nI still find it hard to believe that something as trivial as a patchbot needs to deal with timezones (and, if you look at the code, it doesn't actually deal with different timezones). You could just assume all times to be in UTC, problem solved.",
    "created_at": "2015-09-16T13:58:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265737",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:72" align="right">comment:72</div>

Replying to [@videlec](#comment:71):
> Then perhaps its presence could be checked in the installation script?

Or, alternatively, remove the artificial dependency on `dateutil`.

I still find it hard to believe that something as trivial as a patchbot needs to deal with timezones (and, if you look at the code, it doesn't actually deal with different timezones). You could just assume all times to be in UTC, problem solved.



---

archive/issue_comments_265738.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nok, ok, I will now remove dateutil dependencies.\n\nCurrently doc failure should be reported as BuildFailed, but I may have broken that.",
    "created_at": "2015-09-16T14:24:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265738",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:73" align="right">comment:73</div>

ok, ok, I will now remove dateutil dependencies.

Currently doc failure should be reported as BuildFailed, but I may have broken that.



---

archive/issue_comments_265739.json:
```json
{
    "body": "<div id=\"comment:74\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3318570ec262afdaaf26041c3dfc34e89840f927\"><code>3318570</code></a></td><td><code>trac #18937 patchbot 2.4.7, no more needing dateutil, better log</code></td></tr></table>\n",
    "created_at": "2015-09-17T08:40:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265739",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:74"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3318570ec262afdaaf26041c3dfc34e89840f927"><code>3318570</code></a></td><td><code>trac #18937 patchbot 2.4.7, no more needing dateutil, better log</code></td></tr></table>




---

archive/issue_comments_265740.json:
```json
{
    "body": "Changed commit from **[`b06cc7f`](https://github.com/sagemath/sagetrac-mirror/commit/b06cc7f2214b94c24a071e7fe06eb39772ce3a44)** to **[`3318570`](https://github.com/sagemath/sagetrac-mirror/commit/3318570ec262afdaaf26041c3dfc34e89840f927)**",
    "created_at": "2015-09-17T08:40:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265740",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b06cc7f`](https://github.com/sagemath/sagetrac-mirror/commit/b06cc7f2214b94c24a071e7fe06eb39772ce3a44)** to **[`3318570`](https://github.com/sagemath/sagetrac-mirror/commit/3318570ec262afdaaf26041c3dfc34e89840f927)**



---

archive/issue_comments_265741.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nOk, here is a new version, again (I am starting to get tired to work on a patchbot that nobody uses).\n\nIt does no longer depends on dateutil.\n\nIt has a better log in history.txt for skipped tickets.\n\nThe doc plugin has been reactivated, and the initial \"make\" replaced by \"make build\".\nSo the doc is only build once, and doc failure is reported as a plugin failure.\n\nI have tested it, it seems to work. Please double-check.",
    "created_at": "2015-09-17T08:44:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265741",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:75" align="right">comment:75</div>

Ok, here is a new version, again (I am starting to get tired to work on a patchbot that nobody uses).

It does no longer depends on dateutil.

It has a better log in history.txt for skipped tickets.

The doc plugin has been reactivated, and the initial "make" replaced by "make build".
So the doc is only build once, and doc failure is reported as a plugin failure.

I have tested it, it seems to work. Please double-check.



---

archive/issue_comments_265742.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nSo it's needs_review again?\n\n> I am starting to get tired to work on a patchbot that nobody uses\n\nWell, after this is done, hopefully more people will use it!",
    "created_at": "2015-09-17T08:54:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265742",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:76" align="right">comment:76</div>

So it's needs_review again?

> I am starting to get tired to work on a patchbot that nobody uses

Well, after this is done, hopefully more people will use it!



---

archive/issue_events_270116.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-09-17T08:54:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18937#event-270116"
}
```



---

archive/issue_events_270117.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-09-17T08:54:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18937#event-270117"
}
```



---

archive/issue_comments_265743.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,6 +2,4 @@\n \n In particular, the ascii plugin now looks for unicode only in .py[x] missing utf8 declaration, and the patchbot does not look at spkg tickets more than once per day.\n \n-Latest available version is 2.4.6\n-\n-tarball here: http://chapoton.perso.math.cnrs.fr/patchbot-2.4.6.tar.bz2\n+**Tarball**: [http://chapoton.perso.math.cnrs.fr/patchbot-2.4.7.tar.bz2](http://chapoton.perso.math.cnrs.fr/patchbot-2.4.7.tar.bz2)]\n``````\n",
    "created_at": "2015-09-17T08:57:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265743",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,6 +2,4 @@
 
 In particular, the ascii plugin now looks for unicode only in .py[x] missing utf8 declaration, and the patchbot does not look at spkg tickets more than once per day.
 
-Latest available version is 2.4.6
-
-tarball here: http://chapoton.perso.math.cnrs.fr/patchbot-2.4.6.tar.bz2
+**Tarball**: [http://chapoton.perso.math.cnrs.fr/patchbot-2.4.7.tar.bz2](http://chapoton.perso.math.cnrs.fr/patchbot-2.4.7.tar.bz2)]
``````




---

archive/issue_comments_265744.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,4 @@\n \n In particular, the ascii plugin now looks for unicode only in .py[x] missing utf8 declaration, and the patchbot does not look at spkg tickets more than once per day.\n \n-**Tarball**: [http://chapoton.perso.math.cnrs.fr/patchbot-2.4.7.tar.bz2](http://chapoton.perso.math.cnrs.fr/patchbot-2.4.7.tar.bz2)]\n+**Tarball**: [http://chapoton.perso.math.cnrs.fr/patchbot-2.4.7.tar.bz2](http://chapoton.perso.math.cnrs.fr/patchbot-2.4.7.tar.bz2)\n``````\n",
    "created_at": "2015-09-17T08:57:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265744",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,4 @@
 
 In particular, the ascii plugin now looks for unicode only in .py[x] missing utf8 declaration, and the patchbot does not look at spkg tickets more than once per day.
 
-**Tarball**: [http://chapoton.perso.math.cnrs.fr/patchbot-2.4.7.tar.bz2](http://chapoton.perso.math.cnrs.fr/patchbot-2.4.7.tar.bz2)]
+**Tarball**: [http://chapoton.perso.math.cnrs.fr/patchbot-2.4.7.tar.bz2](http://chapoton.perso.math.cnrs.fr/patchbot-2.4.7.tar.bz2)
``````




---

archive/issue_comments_265745.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\nI'm now testing it on `arando`.",
    "created_at": "2015-09-17T09:15:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265745",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:79" align="right">comment:79</div>

I'm now testing it on `arando`.



---

archive/issue_comments_265746.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">comment:80</div>\n\nOn the previous version of the patchbot, namely 2.4.6, I got\n\n```\n[2015-09-17 09:22:03 +0000] Getting ticket list...\nTraceback (most recent call last):\n  File \".../patchbot.py\", line 1321, in main\n    patchbot.test_a_ticket(ticket)\n  File \".../patchbot.py\", line 850, in test_a_ticket\n    rating, ticket = self.get_one_ticket()\n  File \".../patchbot.py\", line 673, in get_one_ticket\n    for t in all)))\n  File \".../patchbot.py\", line 673, in <genexpr>\n    for t in all)))\n  File \".../patchbot.py\", line 772, in rate_ticket\n    prune_pending(ticket)\n  File \".../util.py\", line 60, in prune_pending\n    elif (now - t).total_seconds() > timeout:\nTypeError: can't subtract offset-naive and offset-aware datetimes\n```\nBut I do not know whether it is fixed in your last version.",
    "created_at": "2015-09-17T09:29:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265746",
    "user": "https://github.com/videlec"
}
```

<div id="comment:80" align="right">comment:80</div>

On the previous version of the patchbot, namely 2.4.6, I got

```
[2015-09-17 09:22:03 +0000] Getting ticket list...
Traceback (most recent call last):
  File ".../patchbot.py", line 1321, in main
    patchbot.test_a_ticket(ticket)
  File ".../patchbot.py", line 850, in test_a_ticket
    rating, ticket = self.get_one_ticket()
  File ".../patchbot.py", line 673, in get_one_ticket
    for t in all)))
  File ".../patchbot.py", line 673, in <genexpr>
    for t in all)))
  File ".../patchbot.py", line 772, in rate_ticket
    prune_pending(ticket)
  File ".../util.py", line 60, in prune_pending
    elif (now - t).total_seconds() > timeout:
TypeError: can't subtract offset-naive and offset-aware datetimes
```
But I do not know whether it is fixed in your last version.



---

archive/issue_comments_265747.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nyes, this should be fixed by the removal of dateutil dependencies.",
    "created_at": "2015-09-17T09:44:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265747",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:81" align="right">comment:81</div>

yes, this should be fixed by the removal of dateutil dependencies.



---

archive/issue_comments_265748.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\nReplying to [@fchapoton](#comment:81):\n> yes, this should be fixed by the removal of dateutil dependencies.\n\nNice ;-) I also launched the 2.4.7 on librae.",
    "created_at": "2015-09-17T10:58:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265748",
    "user": "https://github.com/videlec"
}
```

<div id="comment:82" align="right">comment:82</div>

Replying to [@fchapoton](#comment:81):
> yes, this should be fixed by the removal of dateutil dependencies.

Nice ;-) I also launched the 2.4.7 on librae.



---

archive/issue_comments_265749.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">comment:83</div>\n\nHmm, there is a problem:\n\nA) either we do not build the doc before running the tests, and the tests fail when a new sage-release appears\n(this is what happens with 2.4.7, I think, see your reports on ticket 0)\n\nB) or we do build the doc before, but then there is no plugin reporting about doc failure\n(this would revert to the previous behaviour)\n\nC) or we can build the doc twice..\n\nD) or find a better solution (do make when a new develop is pulled ?)\n\nI would vote for B) or D)\n\nFrederic",
    "created_at": "2015-09-17T15:54:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265749",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:83" align="right">comment:83</div>

Hmm, there is a problem:

A) either we do not build the doc before running the tests, and the tests fail when a new sage-release appears
(this is what happens with 2.4.7, I think, see your reports on ticket 0)

B) or we do build the doc before, but then there is no plugin reporting about doc failure
(this would revert to the previous behaviour)

C) or we can build the doc twice..

D) or find a better solution (do make when a new develop is pulled ?)

I would vote for B) or D)

Frederic



---

archive/issue_comments_265750.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\nReplying to [@fchapoton](#comment:83):\n> Hmm, there is a problem\n\nCan you explain what the problem is?",
    "created_at": "2015-09-17T18:42:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265750",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:84" align="right">comment:84</div>

Replying to [@fchapoton](#comment:83):
> Hmm, there is a problem

Can you explain what the problem is?



---

archive/issue_comments_265751.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\nHello,\nI am not quite sure, but looking at the latest report of arando and librae on 6.9.b7 here:\n\nhttp://patchbot.sagemath.org/log/Pending/0/Ubuntu/14.04/i686/3.13.0-40-generic/arando/2015-09-17%2013:28:51?short\n\n(librae report is no longer there)\n\none finds that one of them fails because the doc was not build before the tests were run, and the other for some strange reason.",
    "created_at": "2015-09-17T19:31:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265751",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:85" align="right">comment:85</div>

Hello,
I am not quite sure, but looking at the latest report of arando and librae on 6.9.b7 here:

http://patchbot.sagemath.org/log/Pending/0/Ubuntu/14.04/i686/3.13.0-40-generic/arando/2015-09-17%2013:28:51?short

(librae report is no longer there)

one finds that one of them fails because the doc was not build before the tests were run, and the other for some strange reason.



---

archive/issue_comments_265752.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">comment:86</div>\n\nReplying to [@fchapoton](#comment:85):\n> one finds that one of them fails because the doc was not build before the tests were run\n\nWell, in the arando report, it is clear that the doc was built. So I don't know why you think that the problem is related to the docs.",
    "created_at": "2015-09-17T19:51:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265752",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:86" align="right">comment:86</div>

Replying to [@fchapoton](#comment:85):
> one finds that one of them fails because the doc was not build before the tests were run

Well, in the arando report, it is clear that the doc was built. So I don't know why you think that the problem is related to the docs.



---

archive/issue_comments_265753.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">comment:87</div>\n\nThe arando failure is genuine, not the fault of the patchbot.",
    "created_at": "2015-09-17T20:00:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265753",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:87" align="right">comment:87</div>

The arando failure is genuine, not the fault of the patchbot.



---

archive/issue_comments_265754.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">comment:88</div>\n\nAnother problem with bot 2.4.7 on arando: it apparently does not report anything when there is a doctest failure!\n\nLooking at http://patchbot.sagemath.org/log/Pending/19191/Ubuntu/14.04/i686/3.13.0-40-generic/arando/2015-09-18%2016:54:52?short\n\nor there\n\nhttp://patchbot.sagemath.org/log/Pending/8829/Ubuntu/14.04/i686/3.13.0-40-generic/arando/2015-09-18%2012:15:11?short\n\nfor example. I have no time to analyse that now.",
    "created_at": "2015-09-18T19:25:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265754",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:88" align="right">comment:88</div>

Another problem with bot 2.4.7 on arando: it apparently does not report anything when there is a doctest failure!

Looking at http://patchbot.sagemath.org/log/Pending/19191/Ubuntu/14.04/i686/3.13.0-40-generic/arando/2015-09-18%2016:54:52?short

or there

http://patchbot.sagemath.org/log/Pending/8829/Ubuntu/14.04/i686/3.13.0-40-generic/arando/2015-09-18%2012:15:11?short

for example. I have no time to analyse that now.



---

archive/issue_comments_265755.json:
```json
{
    "body": "Changed commit from **[`3318570`](https://github.com/sagemath/sagetrac-mirror/commit/3318570ec262afdaaf26041c3dfc34e89840f927)** to **[`5f57064`](https://github.com/sagemath/sagetrac-mirror/commit/5f5706434f184eafc41ed4c0dad9b76abe1293b7)**",
    "created_at": "2015-09-22T19:09:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265755",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3318570`](https://github.com/sagemath/sagetrac-mirror/commit/3318570ec262afdaaf26041c3dfc34e89840f927)** to **[`5f57064`](https://github.com/sagemath/sagetrac-mirror/commit/5f5706434f184eafc41ed4c0dad9b76abe1293b7)**



---

archive/issue_comments_265756.json:
```json
{
    "body": "<div id=\"comment:89\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7df5c36251ea2185cda614fc219b280b752ee41a\"><code>7df5c36</code></a></td><td><code>Merge branch 'u/chapoton/18937' into 6.9.b7</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5f5706434f184eafc41ed4c0dad9b76abe1293b7\"><code>5f57064</code></a></td><td><code>trac #18937 patchbot version 2.4.8 (bugfix)</code></td></tr></table>\n",
    "created_at": "2015-09-22T19:09:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265756",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:89"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7df5c36251ea2185cda614fc219b280b752ee41a"><code>7df5c36</code></a></td><td><code>Merge branch 'u/chapoton/18937' into 6.9.b7</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5f5706434f184eafc41ed4c0dad9b76abe1293b7"><code>5f57064</code></a></td><td><code>trac #18937 patchbot version 2.4.8 (bugfix)</code></td></tr></table>




---

archive/issue_comments_265757.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">comment:90</div>\n\nThis new version should fix the issue with wrong \"reporting test failure as pending\".\n\nCould you please run that on librae and arando ?",
    "created_at": "2015-09-22T19:11:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265757",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:90" align="right">comment:90</div>

This new version should fix the issue with wrong "reporting test failure as pending".

Could you please run that on librae and arando ?



---

archive/issue_comments_265758.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,6 @@\n \n In particular, the ascii plugin now looks for unicode only in .py[x] missing utf8 declaration, and the patchbot does not look at spkg tickets more than once per day.\n \n-**Tarball**: [http://chapoton.perso.math.cnrs.fr/patchbot-2.4.7.tar.bz2](http://chapoton.perso.math.cnrs.fr/patchbot-2.4.7.tar.bz2)\n+There is also an improvement in the system of trust check for code authors.\n+\n+**Tarball**: [http://chapoton.perso.math.cnrs.fr/patchbot-2.4.8.tar.bz2](http://chapoton.perso.math.cnrs.fr/patchbot-2.4.8.tar.bz2)\n``````\n",
    "created_at": "2015-09-22T19:11:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265758",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,6 @@
 
 In particular, the ascii plugin now looks for unicode only in .py[x] missing utf8 declaration, and the patchbot does not look at spkg tickets more than once per day.
 
-**Tarball**: [http://chapoton.perso.math.cnrs.fr/patchbot-2.4.7.tar.bz2](http://chapoton.perso.math.cnrs.fr/patchbot-2.4.7.tar.bz2)
+There is also an improvement in the system of trust check for code authors.
+
+**Tarball**: [http://chapoton.perso.math.cnrs.fr/patchbot-2.4.8.tar.bz2](http://chapoton.perso.math.cnrs.fr/patchbot-2.4.8.tar.bz2)
``````




---

archive/issue_comments_265759.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">comment:91</div>\n\nOn librae, the patchbot was stuck (version 2.3.9) with\n\n```\n[2015-09-22 19:14:16 +0000] Check base.\ngit checkout patchbot/base\nAlready on 'patchbot/base'\ngit fetch git://github.com/sagemath/sage.git +develop:patchbot/base_upstream\n[2015-09-22 19:14:17 +0000] Getting ticket list...\nTraceback (most recent call last):\n  File \".../patchbot/patchbot.py\", line 1260, in main\n    patchbot.test_a_ticket(ticket)\n  File \".../patchbot/patchbot.py\", line 800, in test_a_ticket\n    rating, ticket = self.get_one_ticket()\n  File \".../bin/patchbot/patchbot.py\", line 632, in get_one_ticket\n    for t in all))\n  File \".../bin/patchbot/patchbot.py\", line 632, in <genexpr>\n    for t in all))\n  File \".../bin/patchbot/patchbot.py\", line 722, in rate_ticket\n    prune_pending(ticket)\n  File \".../patchbot/util.py\", line 70, in prune_pending\n    elif (now - t).total_seconds() > timeout:\nTypeError: can't subtract offset-naive and offset-aware datetimes\n```\nDo you know if this is fixed?\n\nVincent",
    "created_at": "2015-09-22T19:17:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265759",
    "user": "https://github.com/videlec"
}
```

<div id="comment:91" align="right">comment:91</div>

On librae, the patchbot was stuck (version 2.3.9) with

```
[2015-09-22 19:14:16 +0000] Check base.
git checkout patchbot/base
Already on 'patchbot/base'
git fetch git://github.com/sagemath/sage.git +develop:patchbot/base_upstream
[2015-09-22 19:14:17 +0000] Getting ticket list...
Traceback (most recent call last):
  File ".../patchbot/patchbot.py", line 1260, in main
    patchbot.test_a_ticket(ticket)
  File ".../patchbot/patchbot.py", line 800, in test_a_ticket
    rating, ticket = self.get_one_ticket()
  File ".../bin/patchbot/patchbot.py", line 632, in get_one_ticket
    for t in all))
  File ".../bin/patchbot/patchbot.py", line 632, in <genexpr>
    for t in all))
  File ".../bin/patchbot/patchbot.py", line 722, in rate_ticket
    prune_pending(ticket)
  File ".../patchbot/util.py", line 70, in prune_pending
    elif (now - t).total_seconds() > timeout:
TypeError: can't subtract offset-naive and offset-aware datetimes
```
Do you know if this is fixed?

Vincent



---

archive/issue_comments_265760.json:
```json
{
    "body": "<div id=\"comment:92\" align=\"right\">comment:92</div>\n\nLaunched on librae.",
    "created_at": "2015-09-22T19:23:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265760",
    "user": "https://github.com/videlec"
}
```

<div id="comment:92" align="right">comment:92</div>

Launched on librae.



---

archive/issue_comments_265761.json:
```json
{
    "body": "<div id=\"comment:93\" align=\"right\">comment:93</div>\n\nThe [#19125 report](http://patchbot.sagemath.org/log/19125/Ubuntu/14.04/x86_64/3.13.0-63-generic/librae/2015-09-22%2020:59:40?short) and many others say\n\n```\nGit branch: patchbot/ticket_merged\nUsing --optional=mpir,python2,sage\nDoctesting entire Sage library.\nSorting sources by runtime so that slower doctests are run first....\nDoctesting 3186 files using 7 threads.\nsage -t --long src/sage/misc/sagedoc.py\n**********************************************************************\nFile \"src/sage/misc/sagedoc.py\", line 22, in sage.misc.sagedoc\nFailed example:\n    for line in open(docfilename):\n          if \"#sage.symbolic.expression.Expression.N\" in line:\n              print line\nException raised:\n    Traceback (most recent call last):\n      File \".../sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \".../sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.misc.sagedoc[1]>\", line 1, in <module>\n        for line in open(docfilename):\n    IOError: [Errno 2] No such file or directory:\n    '.../doc/output/html/en/reference/calculus/sage/symbolic/expression.html'\n**********************************************************************\n```\n... it seems that the doc is not built anymore. Note that I had a very special configuration where the plugin \"doctest.continuation\" is **not** activated. It was stupid from my side but either this plugin is mandatory and it is not a plugin or the patchbot should not run into such troubles.",
    "created_at": "2015-09-22T21:29:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265761",
    "user": "https://github.com/videlec"
}
```

<div id="comment:93" align="right">comment:93</div>

The [#19125 report](http://patchbot.sagemath.org/log/19125/Ubuntu/14.04/x86_64/3.13.0-63-generic/librae/2015-09-22%2020:59:40?short) and many others say

```
Git branch: patchbot/ticket_merged
Using --optional=mpir,python2,sage
Doctesting entire Sage library.
Sorting sources by runtime so that slower doctests are run first....
Doctesting 3186 files using 7 threads.
sage -t --long src/sage/misc/sagedoc.py
**********************************************************************
File "src/sage/misc/sagedoc.py", line 22, in sage.misc.sagedoc
Failed example:
    for line in open(docfilename):
          if "#sage.symbolic.expression.Expression.N" in line:
              print line
Exception raised:
    Traceback (most recent call last):
      File ".../sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File ".../sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.misc.sagedoc[1]>", line 1, in <module>
        for line in open(docfilename):
    IOError: [Errno 2] No such file or directory:
    '.../doc/output/html/en/reference/calculus/sage/symbolic/expression.html'
**********************************************************************
```
... it seems that the doc is not built anymore. Note that I had a very special configuration where the plugin "doctest.continuation" is **not** activated. It was stupid from my side but either this plugin is mandatory and it is not a plugin or the patchbot should not run into such troubles.



---

archive/issue_comments_265762.json:
```json
{
    "body": "<div id=\"comment:94\" align=\"right\">comment:94</div>\n\nAnd the patchbot seems to avoid testing base now.",
    "created_at": "2015-09-22T21:32:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265762",
    "user": "https://github.com/videlec"
}
```

<div id="comment:94" align="right">comment:94</div>

And the patchbot seems to avoid testing base now.



---

archive/issue_comments_265763.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">comment:95</div>\n\nI relaunched the patchbot on librae and it gets better. But still, the doctest construction needs to be fixed (or the status of plugins clearer).",
    "created_at": "2015-09-22T22:41:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265763",
    "user": "https://github.com/videlec"
}
```

<div id="comment:95" align="right">comment:95</div>

I relaunched the patchbot on librae and it gets better. But still, the doctest construction needs to be fixed (or the status of plugins clearer).



---

archive/issue_events_270118.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-09-22T22:41:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18937#event-270118"
}
```



---

archive/issue_events_270119.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-09-22T22:41:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18937#event-270119"
}
```



---

archive/issue_comments_265764.json:
```json
{
    "body": "<div id=\"comment:96\" align=\"right\">comment:96</div>\n\nIn the current state, the plugin \ufffc\"plugins.docbuild\" is indeed mandatory, otherwise the doc is not build and therefore the tests do not pass.\n\nSome time ago, the doc was build once with a \"make\" and then again in the optional \"docbuild\" plugin. Now it is only build once in the plugin.\n\nI can enforce in the code that the plugin \"docbuild\" is always activated.\n\nOR I can step back and build the doc during the initial \"make\" call. But then doc failure will be again reported as Build failure, and the \"docbuild\" plugin will again become useless.\n\nOpinions are required, please.\n\nI find it very annoying that some tests do not pass if the doc is not build.",
    "created_at": "2015-09-23T08:42:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265764",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:96" align="right">comment:96</div>

In the current state, the plugin ￼"plugins.docbuild" is indeed mandatory, otherwise the doc is not build and therefore the tests do not pass.

Some time ago, the doc was build once with a "make" and then again in the optional "docbuild" plugin. Now it is only build once in the plugin.

I can enforce in the code that the plugin "docbuild" is always activated.

OR I can step back and build the doc during the initial "make" call. But then doc failure will be again reported as Build failure, and the "docbuild" plugin will again become useless.

Opinions are required, please.

I find it very annoying that some tests do not pass if the doc is not build.



---

archive/issue_comments_265765.json:
```json
{
    "body": "<div id=\"comment:97\" align=\"right\">comment:97</div>\n\nReplying to [@fchapoton](#comment:96):\n> I find it very annoying that some tests do not pass if the doc is not build.\n\nWe will not change that in this ticket.\n\n> In the current state, the plugin \ufffc\"plugins.docbuild\" is indeed mandatory, otherwise the doc is not build and therefore the tests do not pass.\n> \n> Some time ago, the doc was build once with a \"make\" and then again in the optional \"docbuild\" plugin. Now it is only build once in the plugin.\n> \n> I can enforce in the code that the plugin \"docbuild\" is always activated.\n\n>\n> OR I can step back and build the doc during the initial \"make\" call. But then doc failure will be again reported as Build failure, and the \"docbuild\" plugin will again become useless.\n\nIMO, it is better to report properly docbuild errors and hence to separate the \"make doc\" from the \"make build\". That being said, I have no opinion whether or not the \"make doc\" process should stay a module. And I have nothing against mandatory modules.",
    "created_at": "2015-09-23T11:30:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265765",
    "user": "https://github.com/videlec"
}
```

<div id="comment:97" align="right">comment:97</div>

Replying to [@fchapoton](#comment:96):
> I find it very annoying that some tests do not pass if the doc is not build.

We will not change that in this ticket.

> In the current state, the plugin ￼"plugins.docbuild" is indeed mandatory, otherwise the doc is not build and therefore the tests do not pass.
> 
> Some time ago, the doc was build once with a "make" and then again in the optional "docbuild" plugin. Now it is only build once in the plugin.
> 
> I can enforce in the code that the plugin "docbuild" is always activated.

>
> OR I can step back and build the doc during the initial "make" call. But then doc failure will be again reported as Build failure, and the "docbuild" plugin will again become useless.

IMO, it is better to report properly docbuild errors and hence to separate the "make doc" from the "make build". That being said, I have no opinion whether or not the "make doc" process should stay a module. And I have nothing against mandatory modules.



---

archive/issue_comments_265766.json:
```json
{
    "body": "<div id=\"comment:98\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/57457eb26536a776cfd024f3f881f731d14021a0\"><code>57457eb</code></a></td><td><code>trac #18937 version 2.4.9, forcing the doc to build so that tests can pass</code></td></tr></table>\n",
    "created_at": "2015-09-23T13:16:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265766",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:98"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/57457eb26536a776cfd024f3f881f731d14021a0"><code>57457eb</code></a></td><td><code>trac #18937 version 2.4.9, forcing the doc to build so that tests can pass</code></td></tr></table>




---

archive/issue_comments_265767.json:
```json
{
    "body": "Changed commit from **[`5f57064`](https://github.com/sagemath/sagetrac-mirror/commit/5f5706434f184eafc41ed4c0dad9b76abe1293b7)** to **[`57457eb`](https://github.com/sagemath/sagetrac-mirror/commit/57457eb26536a776cfd024f3f881f731d14021a0)**",
    "created_at": "2015-09-23T13:16:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265767",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5f57064`](https://github.com/sagemath/sagetrac-mirror/commit/5f5706434f184eafc41ed4c0dad9b76abe1293b7)** to **[`57457eb`](https://github.com/sagemath/sagetrac-mirror/commit/57457eb26536a776cfd024f3f881f731d14021a0)**



---

archive/issue_comments_265768.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">comment:99</div>\n\nHere is a new version that always activates the docbuild plugin (unless in plugin_only mode)\nso that the tests can pass.\n\nVincent, do you confirm that there is a problem with testing the base ?",
    "created_at": "2015-09-23T13:19:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265768",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:99" align="right">comment:99</div>

Here is a new version that always activates the docbuild plugin (unless in plugin_only mode)
so that the tests can pass.

Vincent, do you confirm that there is a problem with testing the base ?



---

archive/issue_comments_265769.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,4 +4,4 @@\n \n There is also an improvement in the system of trust check for code authors.\n \n-**Tarball**: [http://chapoton.perso.math.cnrs.fr/patchbot-2.4.8.tar.bz2](http://chapoton.perso.math.cnrs.fr/patchbot-2.4.8.tar.bz2)\n+**Tarball**: [http://chapoton.perso.math.cnrs.fr/patchbot-2.4.9.tar.bz2](http://chapoton.perso.math.cnrs.fr/patchbot-2.4.9.tar.bz2)\n``````\n",
    "created_at": "2015-09-23T13:19:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265769",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,4 +4,4 @@
 
 There is also an improvement in the system of trust check for code authors.
 
-**Tarball**: [http://chapoton.perso.math.cnrs.fr/patchbot-2.4.8.tar.bz2](http://chapoton.perso.math.cnrs.fr/patchbot-2.4.8.tar.bz2)
+**Tarball**: [http://chapoton.perso.math.cnrs.fr/patchbot-2.4.9.tar.bz2](http://chapoton.perso.math.cnrs.fr/patchbot-2.4.9.tar.bz2)
``````




---

archive/issue_comments_265770.json:
```json
{
    "body": "<div id=\"comment:100\" align=\"right\">comment:100</div>\n\nReplying to [@fchapoton](#comment:99):\n> Vincent, do you confirm that there is a problem with testing the base ?\n\nI don't know. Under which conditions it should check the base? I launched it twice and twice it avoided it.",
    "created_at": "2015-09-23T15:15:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265770",
    "user": "https://github.com/videlec"
}
```

<div id="comment:100" align="right">comment:100</div>

Replying to [@fchapoton](#comment:99):
> Vincent, do you confirm that there is a problem with testing the base ?

I don't know. Under which conditions it should check the base? I launched it twice and twice it avoided it.



---

archive/issue_comments_265771.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nSomething weird happend with patchbot-2.4.8:\n\n```\n[2015-09-23 00:07:24] Getting ticket list...\n[2015-09-23 00:07:30] testing found ticket #17096\n[2015-09-23 00:07:30] #17096: starting tests\n[2015-09-23 15:17:25] #17096 raises an exception: [Errno 32] Broken pipe\n```\n15 hours is not reasonable to test a ticket. The broken pipe is because I just interrupted it with Ctrl-C. The log `17096-log.txt` just stops after the doc build. I do not know what is going wrong.",
    "created_at": "2015-09-23T15:23:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265771",
    "user": "https://github.com/videlec"
}
```

<div id="comment:1" align="right">comment:1</div>

Something weird happend with patchbot-2.4.8:

```
[2015-09-23 00:07:24] Getting ticket list...
[2015-09-23 00:07:30] testing found ticket #17096
[2015-09-23 00:07:30] #17096: starting tests
[2015-09-23 15:17:25] #17096 raises an exception: [Errno 32] Broken pipe
```
15 hours is not reasonable to test a ticket. The broken pipe is because I just interrupted it with Ctrl-C. The log `17096-log.txt` just stops after the doc build. I do not know what is going wrong.



---

archive/issue_comments_265772.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI launched 2.4.9 on librae. And again it did not start with checking the base.\n\nVincent",
    "created_at": "2015-09-23T15:28:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265772",
    "user": "https://github.com/videlec"
}
```

<div id="comment:2" align="right">comment:2</div>

I launched 2.4.9 on librae. And again it did not start with checking the base.

Vincent



---

archive/issue_comments_265773.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nWith 2.4.9, something is indeed fishy with the docbuild plugin. Note the \"elapsed time\" and the total time for the plugin, there is a difference of about 900s:\n\n```\nBuild finished. The built documents can be found in /home/patchbot/sage-patchbot/src/doc/output/html/en/thematic_tutorials\nElapsed time: 1003.6 seconds.\nDone building the documentation!\nmake[1]: Leaving directory `/home/patchbot/sage-patchbot/build/make'\n\nreal    32m6.825s\nuser    14m4.656s\nsys     0m25.444s\nSage build/upgrade complete!\nplugins.docbuild -- 1948 seconds\n========== end plugins.docbuild ==========\n```",
    "created_at": "2015-09-23T17:26:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265773",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:3" align="right">comment:3</div>

With 2.4.9, something is indeed fishy with the docbuild plugin. Note the "elapsed time" and the total time for the plugin, there is a difference of about 900s:

```
Build finished. The built documents can be found in /home/patchbot/sage-patchbot/src/doc/output/html/en/thematic_tutorials
Elapsed time: 1003.6 seconds.
Done building the documentation!
make[1]: Leaving directory `/home/patchbot/sage-patchbot/build/make'

real    32m6.825s
user    14m4.656s
sys     0m25.444s
Sage build/upgrade complete!
plugins.docbuild -- 1948 seconds
========== end plugins.docbuild ==========
```



---

archive/issue_comments_265774.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\n@jdemeyer, on which ticket do you see these 900 seconds, please ?\n\nWell, maybe this could be an effect of the grep command in that plugin ?\n\nWhat is the size of your SAGE_ROOT/logs/dochtml.log ? Mine is 73 Mo\n\nDo you know if the \"make doc\" command clears this log or not ?",
    "created_at": "2015-09-23T20:00:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265774",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:4" align="right">comment:4</div>

@jdemeyer, on which ticket do you see these 900 seconds, please ?

Well, maybe this could be an effect of the grep command in that plugin ?

What is the size of your SAGE_ROOT/logs/dochtml.log ? Mine is 73 Mo

Do you know if the "make doc" command clears this log or not ?



---

archive/issue_comments_265775.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nPatchbot got stuck after 5 tickets\n\n```\n$ tail -n 3 history.txt\n[2015-09-23 18:48:40] #18223: TestsFailed\n[2015-09-23 18:48:49] #18411: starting tests\n[2015-09-23 20:18:06] #18411 raises an exception: [Errno 32] Broken pipe\n```\n(the Broken pipe is because of my Ctrl-C). It seems that the patchbot was doing nothing. Its last line of output was\n\n```\nBuild finished. The built documents can be found in .../doc/output/html/ca/intro\n```\n\nMy `dochtml.log` is 14M and `install.log` is 39M.",
    "created_at": "2015-09-23T20:19:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265775",
    "user": "https://github.com/videlec"
}
```

<div id="comment:5" align="right">comment:5</div>

Patchbot got stuck after 5 tickets

```
$ tail -n 3 history.txt
[2015-09-23 18:48:40] #18223: TestsFailed
[2015-09-23 18:48:49] #18411: starting tests
[2015-09-23 20:18:06] #18411 raises an exception: [Errno 32] Broken pipe
```
(the Broken pipe is because of my Ctrl-C). It seems that the patchbot was doing nothing. Its last line of output was

```
Build finished. The built documents can be found in .../doc/output/html/ca/intro
```

My `dochtml.log` is 14M and `install.log` is 39M.



---

archive/issue_comments_265776.json:
```json
{
    "body": "<div id=\"comment:106\" align=\"right\">comment:106</div>\n\nReplying to [@fchapoton](#comment:104):\n> @jdemeyer, on which ticket do you see these 900 seconds, please ?\n\nTicket #0\n\n> Do you know if the \"make doc\" command clears this log or not ?\n\nIt does not. In fact, Sage logs are never cleared automatically (except with `make distclean`)",
    "created_at": "2015-09-24T07:44:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265776",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:106" align="right">comment:106</div>

Replying to [@fchapoton](#comment:104):
> @jdemeyer, on which ticket do you see these 900 seconds, please ?

Ticket #0

> Do you know if the "make doc" command clears this log or not ?

It does not. In fact, Sage logs are never cleared automatically (except with `make distclean`)



---

archive/issue_comments_265777.json:
```json
{
    "body": "<div id=\"comment:107\" align=\"right\">comment:107</div>\n\nReplying to [@fchapoton](#comment:104):\n> What is the size of your SAGE_ROOT/logs/dochtml.log ?\n\n449 MB",
    "created_at": "2015-09-24T07:47:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265777",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:107" align="right">comment:107</div>

Replying to [@fchapoton](#comment:104):
> What is the size of your SAGE_ROOT/logs/dochtml.log ?

449 MB



---

archive/issue_comments_265778.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI don't think you should `grep dochtml.log`. Instead, just check the status of the `make doc` command. If it succeeds, it means that the doc builds fine.",
    "created_at": "2015-09-24T07:48:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265778",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

I don't think you should `grep dochtml.log`. Instead, just check the status of the `make doc` command. If it succeeds, it means that the doc builds fine.



---

archive/issue_comments_265779.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThanks.\n\nI will remove the grep on the logs, but I am afraid that it is not the real problem.\n\nI suspect that pickling may be the cause.. Still investigating.",
    "created_at": "2015-09-24T08:03:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265779",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:9" align="right">comment:9</div>

Thanks.

I will remove the grep on the logs, but I am afraid that it is not the real problem.

I suspect that pickling may be the cause.. Still investigating.



---

archive/issue_comments_265780.json:
```json
{
    "body": "<div id=\"comment:110\" align=\"right\">comment:110</div>\n\n`@`Vincent: very strange, it seems that this is not the usual end of make doc. Could it be that the patchbot was stuck inside the doc building ??\n\nReplying to [@videlec](#comment:105):\n> Patchbot got stuck after 5 tickets\n> \n> ```\n> $ tail -n 3 history.txt\n> [2015-09-23 18:48:40] #18223: TestsFailed\n> [2015-09-23 18:48:49] #18411: starting tests\n> [2015-09-23 20:18:06] #18411 raises an exception: [Errno 32] Broken pipe\n> ```\n> (the Broken pipe is because of my Ctrl-C). It seems that the patchbot was doing nothing. Its last line of output was\n> \n> ```\n> Build finished. The built documents can be found in .../doc/output/html/ca/intro\n> ```\n> \n> My `dochtml.log` is 14M and `install.log` is 39M.",
    "created_at": "2015-09-24T08:11:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265780",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:110" align="right">comment:110</div>

`@`Vincent: very strange, it seems that this is not the usual end of make doc. Could it be that the patchbot was stuck inside the doc building ??

Replying to [@videlec](#comment:105):
> Patchbot got stuck after 5 tickets
> 
> ```
> $ tail -n 3 history.txt
> [2015-09-23 18:48:40] #18223: TestsFailed
> [2015-09-23 18:48:49] #18411: starting tests
> [2015-09-23 20:18:06] #18411 raises an exception: [Errno 32] Broken pipe
> ```
> (the Broken pipe is because of my Ctrl-C). It seems that the patchbot was doing nothing. Its last line of output was
> 
> ```
> Build finished. The built documents can be found in .../doc/output/html/ca/intro
> ```
> 
> My `dochtml.log` is 14M and `install.log` is 39M.



---

archive/issue_comments_265781.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThe patchbot should run `./configure` before testing a ticket: [https://groups.google.com/forum/#!topic/sage-devel/AcwT37Zndeg](https://groups.google.com/forum/#!topic/sage-devel/AcwT37Zndeg)",
    "created_at": "2015-09-25T12:44:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265781",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:1" align="right">comment:1</div>

The patchbot should run `./configure` before testing a ticket: [https://groups.google.com/forum/#!topic/sage-devel/AcwT37Zndeg](https://groups.google.com/forum/#!topic/sage-devel/AcwT37Zndeg)



---

archive/issue_comments_265782.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nCurrently:\n\n```\ndo_or_die('$MAKE doc-clean')\ndo_or_die(\"$MAKE build\")  # doc is made later in a plugin\n```\nWhere should I insert the \"./configure\" ?",
    "created_at": "2015-09-25T15:00:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265782",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:2" align="right">comment:2</div>

Currently:

```
do_or_die('$MAKE doc-clean')
do_or_die("$MAKE build")  # doc is made later in a plugin
```
Where should I insert the "./configure" ?



---

archive/issue_comments_265783.json:
```json
{
    "body": "<div id=\"comment:113\" align=\"right\">comment:113</div>\n\nReplying to [@fchapoton](#comment:112):\n> Where should I insert the \"./configure\" ?\n\nAs very first command.",
    "created_at": "2015-09-25T18:36:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265783",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:113" align="right">comment:113</div>

Replying to [@fchapoton](#comment:112):
> Where should I insert the "./configure" ?

As very first command.



---

archive/issue_comments_265784.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/75a907a99664e79b98fbb02590779b9cd2d6e024\"><code>75a907a</code></a></td><td><code>Merge branch 'u/chapoton/18937' into 6.9.rc0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3848dc75d2811fbae85c33b3a1e599f569daf7bb\"><code>3848dc7</code></a></td><td><code>trac #18937 version 2.5.0, (grep removed in doc plugin and adapted to sage 6.9 by using ./configure)</code></td></tr></table>\n",
    "created_at": "2015-09-25T19:14:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265784",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/75a907a99664e79b98fbb02590779b9cd2d6e024"><code>75a907a</code></a></td><td><code>Merge branch 'u/chapoton/18937' into 6.9.rc0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3848dc75d2811fbae85c33b3a1e599f569daf7bb"><code>3848dc7</code></a></td><td><code>trac #18937 version 2.5.0, (grep removed in doc plugin and adapted to sage 6.9 by using ./configure)</code></td></tr></table>




---

archive/issue_comments_265785.json:
```json
{
    "body": "Changed commit from **[`57457eb`](https://github.com/sagemath/sagetrac-mirror/commit/57457eb26536a776cfd024f3f881f731d14021a0)** to **[`3848dc7`](https://github.com/sagemath/sagetrac-mirror/commit/3848dc75d2811fbae85c33b3a1e599f569daf7bb)**",
    "created_at": "2015-09-25T19:14:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265785",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`57457eb`](https://github.com/sagemath/sagetrac-mirror/commit/57457eb26536a776cfd024f3f881f731d14021a0)** to **[`3848dc7`](https://github.com/sagemath/sagetrac-mirror/commit/3848dc75d2811fbae85c33b3a1e599f569daf7bb)**



---

archive/issue_comments_265786.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,4 +4,4 @@\n \n There is also an improvement in the system of trust check for code authors.\n \n-**Tarball**: [http://chapoton.perso.math.cnrs.fr/patchbot-2.4.9.tar.bz2](http://chapoton.perso.math.cnrs.fr/patchbot-2.4.9.tar.bz2)\n+**Tarball**: [http://chapoton.perso.math.cnrs.fr/patchbot-2.5.0.tar.bz2](http://chapoton.perso.math.cnrs.fr/patchbot-2.5.0.tar.bz2)\n``````\n",
    "created_at": "2015-09-25T19:17:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265786",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,4 +4,4 @@
 
 There is also an improvement in the system of trust check for code authors.
 
-**Tarball**: [http://chapoton.perso.math.cnrs.fr/patchbot-2.4.9.tar.bz2](http://chapoton.perso.math.cnrs.fr/patchbot-2.4.9.tar.bz2)
+**Tarball**: [http://chapoton.perso.math.cnrs.fr/patchbot-2.5.0.tar.bz2](http://chapoton.perso.math.cnrs.fr/patchbot-2.5.0.tar.bz2)
``````




---

archive/issue_comments_265787.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\n@jdemeyer\n\nok, I have added the ./configure before the make (but not tested the resulting patchbot, sorry). I have also removed the grep in the doc plugins.\n\n`@`Vincent\n\npatchbot 2.4.9 has been working quite good (I think) on arando (including testing the base\nwhen necessary). Have you checked your json config for librae (skip_base in particular) ?",
    "created_at": "2015-09-25T19:17:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265787",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:5" align="right">comment:5</div>

@jdemeyer

ok, I have added the ./configure before the make (but not tested the resulting patchbot, sorry). I have also removed the grep in the doc plugins.

`@`Vincent

patchbot 2.4.9 has been working quite good (I think) on arando (including testing the base
when necessary). Have you checked your json config for librae (skip_base in particular) ?



---

archive/issue_comments_265788.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI launch twice the 2.5.0 patchbot and twice I ran out of memory during the docbuild. I thought that 8G should be enough for that purpose...\n\nVincent",
    "created_at": "2015-09-25T23:26:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265788",
    "user": "https://github.com/videlec"
}
```

<div id="comment:6" align="right">comment:6</div>

I launch twice the 2.5.0 patchbot and twice I ran out of memory during the docbuild. I thought that 8G should be enough for that purpose...

Vincent



---

archive/issue_comments_265789.json:
```json
{
    "body": "<div id=\"comment:117\" align=\"right\">comment:117</div>\n\nReplying to [@videlec](#comment:116):\n> I launch twice the 2.5.0 patchbot and twice I ran out of memory during the docbuild. I thought that 8G should be enough for that purpose...\n\nHopefully, it does not seem to be because of the patchbot; see [sage-6.9.rc0 thread on sage-release](https://groups.google.com/forum/#!topic/sage-release/MGkb_-y-moM).",
    "created_at": "2015-09-26T10:43:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265789",
    "user": "https://github.com/videlec"
}
```

<div id="comment:117" align="right">comment:117</div>

Replying to [@videlec](#comment:116):
> I launch twice the 2.5.0 patchbot and twice I ran out of memory during the docbuild. I thought that 8G should be enough for that purpose...

Hopefully, it does not seem to be because of the patchbot; see [sage-6.9.rc0 thread on sage-release](https://groups.google.com/forum/#!topic/sage-release/MGkb_-y-moM).



---

archive/issue_comments_265790.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nDocbuilder on arando:\n\n```\nElapsed time: 6632.6 seconds.\nDone building the documentation!\nmake[1]: Leaving directory `/home/patchbot/sage-patchbot/build/make'\n\nreal    112m57.498s\nuser    14m29.724s\nsys     1m57.856s\nSage build/upgrade complete!\nplugins.docbuild -- 6778 seconds\n```",
    "created_at": "2015-09-26T11:02:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265790",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

Docbuilder on arando:

```
Elapsed time: 6632.6 seconds.
Done building the documentation!
make[1]: Leaving directory `/home/patchbot/sage-patchbot/build/make'

real    112m57.498s
user    14m29.724s
sys     1m57.856s
Sage build/upgrade complete!
plugins.docbuild -- 6778 seconds
```



---

archive/issue_comments_265791.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nOne more thing: I find it very annoying that the patchbot doesn't respect `$MAKE`. It seems to use 3 threads regardless of `$MAKE`.",
    "created_at": "2015-09-26T19:28:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265791",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">comment:9</div>

One more thing: I find it very annoying that the patchbot doesn't respect `$MAKE`. It seems to use 3 threads regardless of `$MAKE`.



---

archive/issue_comments_265792.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nThe docbuild really is a problem. I just cannot run a patchbot anymore on `arando`, the machine becomes unresponsive when building the documentation.",
    "created_at": "2015-09-26T19:30:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265792",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:0" align="right">comment:0</div>

The docbuild really is a problem. I just cannot run a patchbot anymore on `arando`, the machine becomes unresponsive when building the documentation.



---

archive/issue_comments_265793.json:
```json
{
    "body": "<div id=\"comment:121\" align=\"right\">comment:121</div>\n\nReplying to [@jdemeyer](#comment:119):\n> One more thing: I find it very annoying that the patchbot doesn't respect `$MAKE`. It seems to use 3 threads regardless of `$MAKE`.\n\n* Which $MAKE do you want it to respect ? The system-wide MAKE if it is set ?\n  The patchbot currently sets MAKE to its own value, with a number of parallel threads      that can be chosen in the config of the patchbot.\n\n* Do you think the problem with the very-long and memory consuming docbuild comes from the patchbot ?",
    "created_at": "2015-09-26T20:51:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265793",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:121" align="right">comment:121</div>

Replying to [@jdemeyer](#comment:119):
> One more thing: I find it very annoying that the patchbot doesn't respect `$MAKE`. It seems to use 3 threads regardless of `$MAKE`.

* Which $MAKE do you want it to respect ? The system-wide MAKE if it is set ?
  The patchbot currently sets MAKE to its own value, with a number of parallel threads      that can be chosen in the config of the patchbot.

* Do you think the problem with the very-long and memory consuming docbuild comes from the patchbot ?



---

archive/issue_comments_265794.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/25a60cb27ea91e4a001a8e370e2d08a615a43c35\"><code>25a60cb</code></a></td><td><code>trac #18937 version 2.5.1, back to simple \"make\" in doc plugins</code></td></tr></table>\n",
    "created_at": "2015-09-27T07:15:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265794",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/25a60cb27ea91e4a001a8e370e2d08a615a43c35"><code>25a60cb</code></a></td><td><code>trac #18937 version 2.5.1, back to simple "make" in doc plugins</code></td></tr></table>




---

archive/issue_comments_265795.json:
```json
{
    "body": "Changed commit from **[`3848dc7`](https://github.com/sagemath/sagetrac-mirror/commit/3848dc75d2811fbae85c33b3a1e599f569daf7bb)** to **[`25a60cb`](https://github.com/sagemath/sagetrac-mirror/commit/25a60cb27ea91e4a001a8e370e2d08a615a43c35)**",
    "created_at": "2015-09-27T07:15:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265795",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3848dc7`](https://github.com/sagemath/sagetrac-mirror/commit/3848dc75d2811fbae85c33b3a1e599f569daf7bb)** to **[`25a60cb`](https://github.com/sagemath/sagetrac-mirror/commit/25a60cb27ea91e4a001a8e370e2d08a615a43c35)**



---

archive/issue_comments_265796.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI have stepped back to use simply \"make\" in the doc plugins (instead of custom $MAKE).\n\nHopefully, this can restore the previous behavior of the plugins.",
    "created_at": "2015-09-27T07:18:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265796",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:3" align="right">comment:3</div>

I have stepped back to use simply "make" in the doc plugins (instead of custom $MAKE).

Hopefully, this can restore the previous behavior of the plugins.



---

archive/issue_comments_265797.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,4 +4,4 @@\n \n There is also an improvement in the system of trust check for code authors.\n \n-**Tarball**: [http://chapoton.perso.math.cnrs.fr/patchbot-2.5.0.tar.bz2](http://chapoton.perso.math.cnrs.fr/patchbot-2.5.0.tar.bz2)\n+**Tarball**: [http://chapoton.perso.math.cnrs.fr/patchbot-2.5.1.tar.bz2](http://chapoton.perso.math.cnrs.fr/patchbot-2.5.1.tar.bz2)\n``````\n",
    "created_at": "2015-09-27T07:18:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265797",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,4 +4,4 @@
 
 There is also an improvement in the system of trust check for code authors.
 
-**Tarball**: [http://chapoton.perso.math.cnrs.fr/patchbot-2.5.0.tar.bz2](http://chapoton.perso.math.cnrs.fr/patchbot-2.5.0.tar.bz2)
+**Tarball**: [http://chapoton.perso.math.cnrs.fr/patchbot-2.5.1.tar.bz2](http://chapoton.perso.math.cnrs.fr/patchbot-2.5.1.tar.bz2)
``````




---

archive/issue_comments_265798.json:
```json
{
    "body": "<div id=\"comment:124\" align=\"right\">comment:124</div>\n\nReplying to [@fchapoton](#comment:123):\n> I have stepped back to use simply \"make\" in the doc plugins (instead of custom $MAKE).\n\nPlease don't! Just respect the existing value of `$MAKE`.",
    "created_at": "2015-09-27T07:49:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265798",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:124" align="right">comment:124</div>

Replying to [@fchapoton](#comment:123):
> I have stepped back to use simply "make" in the doc plugins (instead of custom $MAKE).

Please don't! Just respect the existing value of `$MAKE`.



---

archive/issue_comments_265799.json:
```json
{
    "body": "<div id=\"comment:125\" align=\"right\">comment:125</div>\n\nReplying to [@jdemeyer](#comment:124):\n> Replying to [@fchapoton](#comment:123):\n> > I have stepped back to use simply \"make\" in the doc plugins (instead of custom $MAKE).\n\n> \n> Please don't! Just respect the existing value of `$MAKE`.\n\nWhy should I expect that there exists a $MAKE at all?",
    "created_at": "2015-09-27T08:19:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265799",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:125" align="right">comment:125</div>

Replying to [@jdemeyer](#comment:124):
> Replying to [@fchapoton](#comment:123):
> > I have stepped back to use simply "make" in the doc plugins (instead of custom $MAKE).

> 
> Please don't! Just respect the existing value of `$MAKE`.

Why should I expect that there exists a $MAKE at all?



---

archive/issue_comments_265800.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\n\n```\nsage: import os\nsage: my_make = os.environ['MAKE'] or 'make -j whathever'\n```\n\nEDIT: the solution above will give you a `KeyError` if `MAKE` is not defined... better solution\n\n```\nsage: os.getenv('MAKE', default_value)\n```",
    "created_at": "2015-09-27T18:38:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265800",
    "user": "https://github.com/videlec"
}
```

<div id="comment:6" align="right">comment:6</div>


```
sage: import os
sage: my_make = os.environ['MAKE'] or 'make -j whathever'
```

EDIT: the solution above will give you a `KeyError` if `MAKE` is not defined... better solution

```
sage: os.getenv('MAKE', default_value)
```



---

archive/issue_comments_265801.json:
```json
{
    "body": "Changed commit from **[`25a60cb`](https://github.com/sagemath/sagetrac-mirror/commit/25a60cb27ea91e4a001a8e370e2d08a615a43c35)** to **[`10aedb7`](https://github.com/sagemath/sagetrac-mirror/commit/10aedb7e47ce3466bd80ca6ed7724df263e706ee)**",
    "created_at": "2015-09-28T09:32:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265801",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`25a60cb`](https://github.com/sagemath/sagetrac-mirror/commit/25a60cb27ea91e4a001a8e370e2d08a615a43c35)** to **[`10aedb7`](https://github.com/sagemath/sagetrac-mirror/commit/10aedb7e47ce3466bd80ca6ed7724df263e706ee)**



---

archive/issue_comments_265802.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/10aedb7e47ce3466bd80ca6ed7724df263e706ee\"><code>10aedb7</code></a></td><td><code>trac #18937, bot version 2.5.2, respecting $MAKE if it exists</code></td></tr></table>\n",
    "created_at": "2015-09-28T09:32:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265802",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/10aedb7e47ce3466bd80ca6ed7724df263e706ee"><code>10aedb7</code></a></td><td><code>trac #18937, bot version 2.5.2, respecting $MAKE if it exists</code></td></tr></table>




---

archive/issue_comments_265803.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,4 +4,4 @@\n \n There is also an improvement in the system of trust check for code authors.\n \n-**Tarball**: [http://chapoton.perso.math.cnrs.fr/patchbot-2.5.1.tar.bz2](http://chapoton.perso.math.cnrs.fr/patchbot-2.5.1.tar.bz2)\n+**Tarball**: [http://chapoton.perso.math.cnrs.fr/patchbot-2.5.2.tar.bz2](http://chapoton.perso.math.cnrs.fr/patchbot-2.5.2.tar.bz2)\n``````\n",
    "created_at": "2015-09-28T09:35:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265803",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,4 +4,4 @@
 
 There is also an improvement in the system of trust check for code authors.
 
-**Tarball**: [http://chapoton.perso.math.cnrs.fr/patchbot-2.5.1.tar.bz2](http://chapoton.perso.math.cnrs.fr/patchbot-2.5.1.tar.bz2)
+**Tarball**: [http://chapoton.perso.math.cnrs.fr/patchbot-2.5.2.tar.bz2](http://chapoton.perso.math.cnrs.fr/patchbot-2.5.2.tar.bz2)
``````




---

archive/issue_comments_265804.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nHere is a new version, which should respect your $MAKE if you have one.\n\nCan I hope that there will be a positive review one day ?",
    "created_at": "2015-09-28T09:35:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265804",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:8" align="right">comment:8</div>

Here is a new version, which should respect your $MAKE if you have one.

Can I hope that there will be a positive review one day ?



---

archive/issue_comments_265805.json:
```json
{
    "body": "<div id=\"comment:129\" align=\"right\">comment:129</div>\n\nReplying to [@fchapoton](#comment:128):\n> Can I hope that there will be a positive review one day ?\n\nAt least, you'll need to set it to needs_review...",
    "created_at": "2015-09-29T08:22:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265805",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:129" align="right">comment:129</div>

Replying to [@fchapoton](#comment:128):
> Can I hope that there will be a positive review one day ?

At least, you'll need to set it to needs_review...



---

archive/issue_comments_265806.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nok. Is this all ?",
    "created_at": "2015-09-29T13:53:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265806",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:0" align="right">comment:0</div>

ok. Is this all ?



---

archive/issue_events_270120.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-09-29T13:53:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18937#event-270120"
}
```



---

archive/issue_events_270121.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-09-29T13:53:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18937#event-270121"
}
```



---

archive/issue_comments_265807.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nPlease, please, would it be possible to let this get a positive review ?\n\nI know it is not perfect, but it is working, no ?",
    "created_at": "2015-09-30T18:18:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265807",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:1" align="right">comment:1</div>

Please, please, would it be possible to let this get a positive review ?

I know it is not perfect, but it is working, no ?



---

archive/issue_comments_265808.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI'd like to run my patchbots for a few days and see if things work out...",
    "created_at": "2015-09-30T18:41:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265808",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:2" align="right">comment:2</div>

I'd like to run my patchbots for a few days and see if things work out...



---

archive/issue_comments_265809.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI understand. Let us see if something bad happens..",
    "created_at": "2015-09-30T18:48:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265809",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:3" align="right">comment:3</div>

I understand. Let us see if something bad happens..



---

archive/issue_comments_265810.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nAlso, I'd really like to investigate better the docbuilding issue.\n\nIt's clear to me that there is an issue on arando: until not so long ago, the docbuilding took on the order of minutes to finish, now it's more like 1 hour.",
    "created_at": "2015-10-01T10:32:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265810",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4" align="right">comment:4</div>

Also, I'd really like to investigate better the docbuilding issue.

It's clear to me that there is an issue on arando: until not so long ago, the docbuilding took on the order of minutes to finish, now it's more like 1 hour.



---

archive/issue_comments_265811.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI don't know how much technical assistance I can provide, but I am testing the new patchbot on a few different machines. I'll leave them running while I'm out of town for the next few days, and let you know if anything breaks when I get back.",
    "created_at": "2015-10-02T17:19:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265811",
    "user": "https://github.com/kevindilks"
}
```

<div id="comment:5" align="right">comment:5</div>

I don't know how much technical assistance I can provide, but I am testing the new patchbot on a few different machines. I'll leave them running while I'm out of town for the next few days, and let you know if anything breaks when I get back.



---

archive/issue_comments_265812.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThere is something weird with the following report\n\n    http://patchbot.sagemath.org/log/19345/Ubuntu/14.04/x86_64/3.13.0-65-generic/librae/2015-10-05%2006:12:03?short\n\nThere is a timeout problem (apparently because of communication problem with the server). But the patchbot report appears as `TestsFailed`.",
    "created_at": "2015-10-05T21:38:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265812",
    "user": "https://github.com/videlec"
}
```

<div id="comment:6" align="right">comment:6</div>

There is something weird with the following report

    http://patchbot.sagemath.org/log/19345/Ubuntu/14.04/x86_64/3.13.0-65-generic/librae/2015-10-05%2006:12:03?short

There is a timeout problem (apparently because of communication problem with the server). But the patchbot report appears as `TestsFailed`.



---

archive/issue_comments_265813.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nHere is the relevant part from `history.txt`\n\n```\n[2015-10-05 05:52:00] #19345: init phase\n[2015-10-05 05:54:29] #19345 raises an exception: <urlopen error [Errno 110] Connection timed out>\n[2015-10-05 05:54:29] #19345: TestsFailed\n[2015-10-05 06:01:37] #19345: TestsFailed\n[2015-10-05 06:06:53] #19345: TestsFailed\n[2015-10-05 06:12:03] #19345: TestsFailed\n```",
    "created_at": "2015-10-05T21:43:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265813",
    "user": "https://github.com/videlec"
}
```

<div id="comment:7" align="right">comment:7</div>

Here is the relevant part from `history.txt`

```
[2015-10-05 05:52:00] #19345: init phase
[2015-10-05 05:54:29] #19345 raises an exception: <urlopen error [Errno 110] Connection timed out>
[2015-10-05 05:54:29] #19345: TestsFailed
[2015-10-05 06:01:37] #19345: TestsFailed
[2015-10-05 06:06:53] #19345: TestsFailed
[2015-10-05 06:12:03] #19345: TestsFailed
```



---

archive/issue_comments_265814.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nIndeed `urllib2.URLError` is more general than `urllib2.HTTPError`...\n\n```\nsage: import urllib2\nsage: issubclass(urllib2.URLError, urllib2.HTTPError)\nFalse\nsage: issubclass(urllib2.HTTPError, urllib2.URLError)\nTrue\n```\nBut only `urllib2.HTTPError` is catch at line `1024` of `patchbot.py`. Maybe it should be changed?\n\nEDIT: but it is not clear what was the error raised!",
    "created_at": "2015-10-05T21:52:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265814",
    "user": "https://github.com/videlec"
}
```

<div id="comment:8" align="right">comment:8</div>

Indeed `urllib2.URLError` is more general than `urllib2.HTTPError`...

```
sage: import urllib2
sage: issubclass(urllib2.URLError, urllib2.HTTPError)
False
sage: issubclass(urllib2.HTTPError, urllib2.URLError)
True
```
But only `urllib2.HTTPError` is catch at line `1024` of `patchbot.py`. Maybe it should be changed?

EDIT: but it is not clear what was the error raised!



---

archive/issue_comments_265815.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nMy home server still has issues with the timezone stuff (I'm pretty sure I have all the necessary dependencies, but maybe there's one not listed on the wiki I'm forgetting about?), but things seem to have been running fine for the past 5 days on my home desktop, laptop, and virtual machine on my office computer.",
    "created_at": "2015-10-07T15:02:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265815",
    "user": "https://github.com/kevindilks"
}
```

<div id="comment:9" align="right">comment:9</div>

My home server still has issues with the timezone stuff (I'm pretty sure I have all the necessary dependencies, but maybe there's one not listed on the wiki I'm forgetting about?), but things seem to have been running fine for the past 5 days on my home desktop, laptop, and virtual machine on my office computer.



---

archive/issue_comments_265816.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nThanks a lot for reporting.\n\nWith bot 2.5.2, there is no more any dependency about timezone and the like..\n\nIs your home server also running 2.5.2 ? What is the name of the machine where you see problems ?",
    "created_at": "2015-10-07T15:23:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265816",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:0" align="right">comment:0</div>

Thanks a lot for reporting.

With bot 2.5.2, there is no more any dependency about timezone and the like..

Is your home server also running 2.5.2 ? What is the name of the machine where you see problems ?



---

archive/issue_comments_265817.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI was just being dumb. I had downloaded the tarball, but hadn't pulled this ticket. So the installation failed, I didn't pay enough attention to notice, and it was still running the old version.",
    "created_at": "2015-10-08T04:06:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265817",
    "user": "https://github.com/kevindilks"
}
```

<div id="comment:1" align="right">comment:1</div>

I was just being dumb. I had downloaded the tarball, but hadn't pulled this ticket. So the installation failed, I didn't pay enough attention to notice, and it was still running the old version.



---

archive/issue_comments_265818.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nyes, that's the reason why it would be much simpler to have this ticket into positive review, so that one can simply do \"sage -i patchbot\"",
    "created_at": "2015-10-08T09:14:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265818",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:2" align="right">comment:2</div>

yes, that's the reason why it would be much simpler to have this ticket into positive review, so that one can simply do "sage -i patchbot"



---

archive/issue_comments_265819.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI'd be willing to give it a positive review based on usability, but I can't comment at all about quality of the underlying code/documentation/etc.",
    "created_at": "2015-10-09T16:33:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265819",
    "user": "https://github.com/kevindilks"
}
```

<div id="comment:3" align="right">comment:3</div>

I'd be willing to give it a positive review based on usability, but I can't comment at all about quality of the underlying code/documentation/etc.



---

archive/issue_comments_265820.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nWell, this is only an optional package. This code is not going to be included in sage.\n\nJeroen and/or Vincent, could you please say your word now ?",
    "created_at": "2015-10-09T16:45:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265820",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:4" align="right">comment:4</div>

Well, this is only an optional package. This code is not going to be included in sage.

Jeroen and/or Vincent, could you please say your word now ?



---

archive/issue_comments_265821.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI have no objections to a positive_review.",
    "created_at": "2015-10-09T17:43:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265821",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:5" align="right">comment:5</div>

I have no objections to a positive_review.



---

archive/issue_comments_265822.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nSo, could somebody please express more than an absence of objection ?",
    "created_at": "2015-10-10T19:05:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265822",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:6" align="right">comment:6</div>

So, could somebody please express more than an absence of objection ?



---

archive/issue_events_270122.json:
```json
{
    "actor": "https://github.com/kevindilks",
    "created_at": "2015-10-10T19:08:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18937#event-270122"
}
```



---

archive/issue_events_270123.json:
```json
{
    "actor": "https://github.com/kevindilks",
    "created_at": "2015-10-10T19:08:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18937#event-270123"
}
```



---

archive/issue_comments_265823.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI was giving Vincent a day or two to weigh in. But I guess based on my experience and Jeroen's non-objection, this is good enough for positive review, and any other problems/enhancements/etc. can be part of future tickets.",
    "created_at": "2015-10-10T19:08:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265823",
    "user": "https://github.com/kevindilks"
}
```

<div id="comment:7" align="right">comment:7</div>

I was giving Vincent a day or two to weigh in. But I guess based on my experience and Jeroen's non-objection, this is good enough for positive review, and any other problems/enhancements/etc. can be part of future tickets.



---

archive/issue_comments_265824.json:
```json
{
    "body": "Changed branch from **[u/chapoton/18937](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/18937)** to **[`10aedb7`](https://github.com/sagemath/sagetrac-mirror/commit/10aedb7e47ce3466bd80ca6ed7724df263e706ee)**",
    "created_at": "2015-10-12T07:16:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18937#issuecomment-265824",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/chapoton/18937](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/18937)** to **[`10aedb7`](https://github.com/sagemath/sagetrac-mirror/commit/10aedb7e47ce3466bd80ca6ed7724df263e706ee)**



---

archive/issue_events_270124.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-10-12T07:16:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18937#event-270124"
}
```



---

archive/issue_events_270125.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "fd457c143eef229c41d77a75a81012b1e5b359f4",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-10-12T07:16:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/18937",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18937#event-270125"
}
```
