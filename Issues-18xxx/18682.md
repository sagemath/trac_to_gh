# Issue 18682: Add SetSystem.is_connected()

archive/issues_018445.json:
```json
{
    "assignees": [
        "https://github.com/sagetrac-Rudi"
    ],
    "body": "Add a routine for testing connectivity of a SetSystem.\n\nCC:  @chaoxu @videlec\n\nBranch/Commit: **[`7b136ab`](https://github.com/sagemath/sagetrac-mirror/commit/7b136abb135ee7872ef4999b06d1893d79905f4a)**\n\nReviewer: **Nathann Cohen**\n\nAuthor: **Rudi Pendavingh**\n\nComponent: **matroid theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/18682_\n\n",
    "closed_at": "2015-06-14T21:43:33Z",
    "created_at": "2015-06-11T19:11:22Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20matroid%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Add SetSystem.is_connected()",
    "type": "issue",
    "updated_at": "2015-06-14T21:43:33Z",
    "url": "https://github.com/sagemath/sage/issues/18682",
    "user": "https://github.com/sagetrac-Rudi"
}
```
Add a routine for testing connectivity of a SetSystem.

CC:  @chaoxu @videlec

Branch/Commit: **[`7b136ab`](https://github.com/sagemath/sagetrac-mirror/commit/7b136abb135ee7872ef4999b06d1893d79905f4a)**

Reviewer: **Nathann Cohen**

Author: **Rudi Pendavingh**

Component: **matroid theory**

_Issue created by migration from https://trac.sagemath.org/ticket/18682_





---

archive/issue_events_263072.json:
```json
{
    "actor": "https://github.com/sagetrac-Rudi",
    "created_at": "2015-06-11T19:11:22Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18682#event-263072"
}
```



---

archive/issue_events_263073.json:
```json
{
    "actor": "https://github.com/sagetrac-Rudi",
    "created_at": "2015-06-11T19:11:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20matroid%20theory",
    "label_color": "0000ff",
    "label_name": "c: matroid theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18682#event-263073"
}
```



---

archive/issue_events_263074.json:
```json
{
    "actor": "https://github.com/sagetrac-Rudi",
    "created_at": "2015-06-11T19:11:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18682#event-263074"
}
```



---

archive/issue_events_263075.json:
```json
{
    "actor": "https://github.com/sagetrac-Rudi",
    "created_at": "2015-06-11T19:11:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18682#event-263075"
}
```



---

archive/issue_events_263076.json:
```json
{
    "actor": "https://github.com/sagetrac-Rudi",
    "created_at": "2015-06-11T19:11:22Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "subject": "https://github.com/sagetrac-Rudi",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18682#event-263076"
}
```



---

archive/issue_comments_260222.json:
```json
{
    "body": "Branch: **[u/Rudi/add_setsystem_is_connected__](https://github.com/sagemath/sagetrac-mirror/tree/u/Rudi/add_setsystem_is_connected__)**",
    "created_at": "2015-06-11T19:24:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18682#issuecomment-260222",
    "user": "https://github.com/sagetrac-Rudi"
}
```

Branch: **[u/Rudi/add_setsystem_is_connected__](https://github.com/sagemath/sagetrac-mirror/tree/u/Rudi/add_setsystem_is_connected__)**



---

archive/issue_comments_260223.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nFirst try.\n\n```\nsage: from sage.matroids.set_system import SetSystem\nsage: M = Matroid(MatrixSpace(GF(2), 500,1000).random_element())\nsage: B = M.basis()\nsage: %time FC = [M.fundamental_cocircuit(B,e) for e in B]\nCPU times: user 27.5 ms, sys: 3.13 ms, total: 30.7 ms\nWall time: 30.4 ms\nsage: %time S = SetSystem(list(M.groundset()), FC)\nCPU times: user 5.06 ms, sys: 106 \u00b5s, total: 5.17 ms\nWall time: 5.18 ms\nsage: timeit(\"S.is_connected()\")\n625 loops, best of 3: 12.8 \u00b5s per loop\n```\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b91c71c431875d347257e5d410534ed20b21b435\"><code>b91c71c</code></a></td><td><code>Added SetSystem.is_connected()</code></td></tr></table>\n",
    "created_at": "2015-06-11T19:33:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18682#issuecomment-260223",
    "user": "https://github.com/sagetrac-Rudi"
}
```

<div id="comment:2" align="right">comment:2</div>

First try.

```
sage: from sage.matroids.set_system import SetSystem
sage: M = Matroid(MatrixSpace(GF(2), 500,1000).random_element())
sage: B = M.basis()
sage: %time FC = [M.fundamental_cocircuit(B,e) for e in B]
CPU times: user 27.5 ms, sys: 3.13 ms, total: 30.7 ms
Wall time: 30.4 ms
sage: %time S = SetSystem(list(M.groundset()), FC)
CPU times: user 5.06 ms, sys: 106 µs, total: 5.17 ms
Wall time: 5.18 ms
sage: timeit("S.is_connected()")
625 loops, best of 3: 12.8 µs per loop
```

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b91c71c431875d347257e5d410534ed20b21b435"><code>b91c71c</code></a></td><td><code>Added SetSystem.is_connected()</code></td></tr></table>




---

archive/issue_comments_260224.json:
```json
{
    "body": "Commit: **[`b91c71c`](https://github.com/sagemath/sagetrac-mirror/commit/b91c71c431875d347257e5d410534ed20b21b435)**",
    "created_at": "2015-06-11T19:33:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18682#issuecomment-260224",
    "user": "https://github.com/sagetrac-Rudi"
}
```

Commit: **[`b91c71c`](https://github.com/sagemath/sagetrac-mirror/commit/b91c71c431875d347257e5d410534ed20b21b435)**



---

archive/issue_comments_260225.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\n`Hypergraph.is_connected()` `:-/`\n\nGuys, we are doing this work twice `:-/`\n\nNathann",
    "created_at": "2015-06-11T20:47:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18682#issuecomment-260225",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:3" align="right">comment:3</div>

`Hypergraph.is_connected()` `:-/`

Guys, we are doing this work twice `:-/`

Nathann



---

archive/issue_comments_260226.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@nathanncohen](#comment%3A3):\n> `Hypergraph.is_connected()` `:-/`\n> \n> Guys, we are doing this work twice `:-/`\n\nI'm helping to speed up the code in this ticket #18539, for that we just need a fast connectivity checker. I tried Sage's Hypergraph first, but look at this (same example as above):\n\n```\nsage: %time S = Hypergraph(points = list(M.groundset()), blocks =FC)\nCPU times: user 1.17 s, sys: 20.9 ms, total: 1.19 s\nWall time: 1.18 s\nsage: %time S.is_connected()\nCPU times: user 50.7 s, sys: 593 ms, total: 51.3 s\nWall time: 50.7 s\nTrue\n```\nCompared to SetSystem, the Hypergraph I want takes 200 times longer to construct, and finding out if it is connected takes about 4 million times longer. \n\nSo what would you do in this case?",
    "created_at": "2015-06-11T21:45:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18682#issuecomment-260226",
    "user": "https://github.com/sagetrac-Rudi"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@nathanncohen](#comment%3A3):
> `Hypergraph.is_connected()` `:-/`
> 
> Guys, we are doing this work twice `:-/`

I'm helping to speed up the code in this ticket #18539, for that we just need a fast connectivity checker. I tried Sage's Hypergraph first, but look at this (same example as above):

```
sage: %time S = Hypergraph(points = list(M.groundset()), blocks =FC)
CPU times: user 1.17 s, sys: 20.9 ms, total: 1.19 s
Wall time: 1.18 s
sage: %time S.is_connected()
CPU times: user 50.7 s, sys: 593 ms, total: 51.3 s
Wall time: 50.7 s
True
```
Compared to SetSystem, the Hypergraph I want takes 200 times longer to construct, and finding out if it is connected takes about 4 million times longer. 

So what would you do in this case?



---

archive/issue_comments_260227.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\n> Compared to SetSystem, the Hypergraph I want takes 200 times longer to construct, and finding out if it is connected takes about 4 million times longer. \n> \n> So what would you do in this case?\n\nYou got me wrong: I did not claim that Hypergraph's version was faster (just look at the code, you will see why it is slow), but I hope that I do not need to convince you that having two class with the same purpose (Hypergraph and SetSystem) and developping them in parallel is a very very bad idea.\n\nNathann",
    "created_at": "2015-06-11T21:47:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18682#issuecomment-260227",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:5" align="right">comment:5</div>

> Compared to SetSystem, the Hypergraph I want takes 200 times longer to construct, and finding out if it is connected takes about 4 million times longer. 
> 
> So what would you do in this case?

You got me wrong: I did not claim that Hypergraph's version was faster (just look at the code, you will see why it is slow), but I hope that I do not need to convince you that having two class with the same purpose (Hypergraph and SetSystem) and developping them in parallel is a very very bad idea.

Nathann



---

archive/issue_comments_260228.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@nathanncohen](#comment%3A5):\n> You got me wrong: I did not claim that Hypergraph's version was faster (just look at the code, you will see why it is slow), but I hope that I do not need to convince you that having two class with the same purpose (Hypergraph and SetSystem) and developping them in parallel is a very very bad idea.\n\nI agree, but what would you suggest? I do not want to open up SetSystem for public use and on the other hand, to get what I want from Hypergraph I would need to make changes to it's internal datastructure, using bitsets from the ground up. This would affect nearly every line of code in 'incidence_structures.py'. Apart from it being a bit of work, I hesitate to make such radical changes to other people's work. What there is probably works well for the application it was written for.\n\nSo who are working that part of sage right now? They might want to consider re-implementing this stuff using bitsets themselves. Bitsets simply work for this kind of thing.",
    "created_at": "2015-06-11T22:15:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18682#issuecomment-260228",
    "user": "https://github.com/sagetrac-Rudi"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@nathanncohen](#comment%3A5):
> You got me wrong: I did not claim that Hypergraph's version was faster (just look at the code, you will see why it is slow), but I hope that I do not need to convince you that having two class with the same purpose (Hypergraph and SetSystem) and developping them in parallel is a very very bad idea.

I agree, but what would you suggest? I do not want to open up SetSystem for public use and on the other hand, to get what I want from Hypergraph I would need to make changes to it's internal datastructure, using bitsets from the ground up. This would affect nearly every line of code in 'incidence_structures.py'. Apart from it being a bit of work, I hesitate to make such radical changes to other people's work. What there is probably works well for the application it was written for.

So who are working that part of sage right now? They might want to consider re-implementing this stuff using bitsets themselves. Bitsets simply work for this kind of thing.



---

archive/issue_comments_260229.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\n> I agree, but what would you suggest? I do not want to open up SetSystem for public use and on the other hand, to get what I want from Hypergraph I would need to make changes to it's internal datastructure, using bitsets from the ground up. This would affect nearly every line of code in 'incidence_structures.py'. Apart from it being a bit of work, I hesitate to make such radical changes to other people's work. What there is probably works well for the application it was written for.\n\nHMmmm... Makes sense, but still.. Maybe we could have at least some generic class for the high-level functions `:-/`\n\n> So who are working that part of sage right now? They might want to consider re-implementing this stuff using bitsets themselves. Bitsets simply work for this kind of thing.\n\nNot if you store 3-uniform hypergraphs on a large ground set. You would waste a lot of memory. It's like for graphs, you would need different data structures for different purposes `:-/`\n\nNathann",
    "created_at": "2015-06-11T22:35:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18682#issuecomment-260229",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:7" align="right">comment:7</div>

> I agree, but what would you suggest? I do not want to open up SetSystem for public use and on the other hand, to get what I want from Hypergraph I would need to make changes to it's internal datastructure, using bitsets from the ground up. This would affect nearly every line of code in 'incidence_structures.py'. Apart from it being a bit of work, I hesitate to make such radical changes to other people's work. What there is probably works well for the application it was written for.

HMmmm... Makes sense, but still.. Maybe we could have at least some generic class for the high-level functions `:-/`

> So who are working that part of sage right now? They might want to consider re-implementing this stuff using bitsets themselves. Bitsets simply work for this kind of thing.

Not if you store 3-uniform hypergraphs on a large ground set. You would waste a lot of memory. It's like for graphs, you would need different data structures for different purposes `:-/`

Nathann



---

archive/issue_comments_260230.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@nathanncohen](#comment%3A7):\n\n## ==\n\n> > So who are working that part of sage right now? They might want to consider re-implementing this stuff using bitsets themselves. Bitsets simply work for this kind of thing.\n\n> \n> Not if you store 3-uniform hypergraphs on a large ground set. You would waste a lot of memory. It's like for graphs, you would need different data structures for different purposes `:-/`\n\nHmm, that's true. You need a sparse data structure too. So how about just replacing that incidence-matrix in there with one over GF(2)? There's dense and sparse versions of such matrices. I think I also saw a data_structures/bitset_matrix.pxi , perhaps use that for the dense version.",
    "created_at": "2015-06-12T05:52:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18682#issuecomment-260230",
    "user": "https://github.com/sagetrac-Rudi"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@nathanncohen](#comment%3A7):

## ==

> > So who are working that part of sage right now? They might want to consider re-implementing this stuff using bitsets themselves. Bitsets simply work for this kind of thing.

> 
> Not if you store 3-uniform hypergraphs on a large ground set. You would waste a lot of memory. It's like for graphs, you would need different data structures for different purposes `:-/`

Hmm, that's true. You need a sparse data structure too. So how about just replacing that incidence-matrix in there with one over GF(2)? There's dense and sparse versions of such matrices. I think I also saw a data_structures/bitset_matrix.pxi , perhaps use that for the dense version.



---

archive/issue_comments_260231.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\n> Hmm, that's true. You need a sparse data structure too. So how about just replacing that incidence-matrix in there with one over GF(2)? There's dense and sparse versions of such matrices. I think I also saw a data_structures/bitset_matrix.pxi , perhaps use that for the dense version.\n\nIf you think that by doing that we can unify the two classes then why not?",
    "created_at": "2015-06-12T07:38:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18682#issuecomment-260231",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:9" align="right">comment:9</div>

> Hmm, that's true. You need a sparse data structure too. So how about just replacing that incidence-matrix in there with one over GF(2)? There's dense and sparse versions of such matrices. I think I also saw a data_structures/bitset_matrix.pxi , perhaps use that for the dense version.

If you think that by doing that we can unify the two classes then why not?



---

archive/issue_comments_260232.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@nathanncohen](#comment%3A9):\n> If you think that by doing that we can unify the two classes then why not?\n\nReplacing the incidence matrix would be a good start for speeding up the existing Hypergraph, but it will take a very long time before I can replace Setsystem. Not because the code would remain inefficient (it won't) but because I need something in the matroid code that on a very low level agrees with that code. (My SetSystems are really just a thinly veiled arrays of bitsets, which I use to avoid unnecessary translation between bitsets and python sets in the matroid code.)\n\nThe alternative is that I at some point write a new class Hypergraph from the ground up, and then we work afterwards to make that class mimick the interface of the current class Hypergraph. Would that work for you?",
    "created_at": "2015-06-12T17:16:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18682#issuecomment-260232",
    "user": "https://github.com/sagetrac-Rudi"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@nathanncohen](#comment%3A9):
> If you think that by doing that we can unify the two classes then why not?

Replacing the incidence matrix would be a good start for speeding up the existing Hypergraph, but it will take a very long time before I can replace Setsystem. Not because the code would remain inefficient (it won't) but because I need something in the matroid code that on a very low level agrees with that code. (My SetSystems are really just a thinly veiled arrays of bitsets, which I use to avoid unnecessary translation between bitsets and python sets in the matroid code.)

The alternative is that I at some point write a new class Hypergraph from the ground up, and then we work afterwards to make that class mimick the interface of the current class Hypergraph. Would that work for you?



---

archive/issue_comments_260233.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\n> The alternative is that I at some point write a new class Hypergraph from the ground up, and then we work afterwards to make that class mimick the interface of the current class Hypergraph. Would that work for you?  \n\nHmmm.. Do you think we could settle that with having some high-level Hypergraph classes, and some low-level hypergraph classes? That's how it works for graphs at the moment:\n\n```\nsage: graphs.PetersenGraph()._backend\n<type 'sage.graphs.base.sparse_graph.SparseGraphBackend'>\n```\n\nThis way we would have data-structure-specific code in data-structure-specific files, and high-level code in high-level files?\n\nNathann",
    "created_at": "2015-06-12T18:42:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18682#issuecomment-260233",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:11" align="right">comment:11</div>

> The alternative is that I at some point write a new class Hypergraph from the ground up, and then we work afterwards to make that class mimick the interface of the current class Hypergraph. Would that work for you?  

Hmmm.. Do you think we could settle that with having some high-level Hypergraph classes, and some low-level hypergraph classes? That's how it works for graphs at the moment:

```
sage: graphs.PetersenGraph()._backend
<type 'sage.graphs.base.sparse_graph.SparseGraphBackend'>
```

This way we would have data-structure-specific code in data-structure-specific files, and high-level code in high-level files?

Nathann



---

archive/issue_comments_260234.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@nathanncohen](#comment%3A11):\n\n> Hmmm.. Do you think we could settle that with having some high-level Hypergraph classes, and some low-level hypergraph classes? \n\nSounds right. So how about I come up with a barebones HypergraphDense (or whatever name you like) at some point, and then we talk about how to integrate this in a parent class Hypergraph?",
    "created_at": "2015-06-12T19:22:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18682#issuecomment-260234",
    "user": "https://github.com/sagetrac-Rudi"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@nathanncohen](#comment%3A11):

> Hmmm.. Do you think we could settle that with having some high-level Hypergraph classes, and some low-level hypergraph classes? 

Sounds right. So how about I come up with a barebones HypergraphDense (or whatever name you like) at some point, and then we talk about how to integrate this in a parent class Hypergraph?



---

archive/issue_comments_260235.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nYo !\n\n> Sounds right. So how about I come up with a barebones HypergraphDense (or whatever name you like) at some point, and then we talk about how to integrate this in a parent class Hypergraph?\n\nHmmmm... Assuming that you did not mean \"parent\" like in \"`Parent/Element`\", then yes `:-P`\nBut let's discuss the design a bit, first.\n\nI am looking at `matroid/set_system` at the moment, and it seems that most of what you have inside are private methods. It really does not look like it should be used from the outside indeed `O_o`\n\nIs there any reason why `SetSystemIterator` is a class? Could that be because it was written before 'yield' became a Cython keyword?\n\nNathann",
    "created_at": "2015-06-12T21:16:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18682#issuecomment-260235",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:13" align="right">comment:13</div>

Yo !

> Sounds right. So how about I come up with a barebones HypergraphDense (or whatever name you like) at some point, and then we talk about how to integrate this in a parent class Hypergraph?

Hmmmm... Assuming that you did not mean "parent" like in "`Parent/Element`", then yes `:-P`
But let's discuss the design a bit, first.

I am looking at `matroid/set_system` at the moment, and it seems that most of what you have inside are private methods. It really does not look like it should be used from the outside indeed `O_o`

Is there any reason why `SetSystemIterator` is a class? Could that be because it was written before 'yield' became a Cython keyword?

Nathann



---

archive/issue_comments_260236.json:
```json
{
    "body": "Reviewer: **Nathann Cohen**",
    "created_at": "2015-06-12T21:34:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18682#issuecomment-260236",
    "user": "https://github.com/nathanncohen"
}
```

Reviewer: **Nathann Cohen**



---

archive/issue_comments_260237.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nHello again,\n\nI agree with this ticket, and added a small commit at `public/18682`. It is only style and doc:\n- The first line of the docstring must be a short sentence\n- A link toward `SetSystem` instead of plain text\n- Comments in the code\n\nIt was a bit hard to read at first, for many variables hide their meaning:\n- `_len` is the number of subsets (it could have been the number of points)\n- `_temp` is a shipped bitset of size \"number of points\"\n\nAnyway. If that's okay with you, then you can set this ticket to `positive_review`.\n\nNathann",
    "created_at": "2015-06-12T21:34:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18682#issuecomment-260237",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:14" align="right">comment:14</div>

Hello again,

I agree with this ticket, and added a small commit at `public/18682`. It is only style and doc:
- The first line of the docstring must be a short sentence
- A link toward `SetSystem` instead of plain text
- Comments in the code

It was a bit hard to read at first, for many variables hide their meaning:
- `_len` is the number of subsets (it could have been the number of points)
- `_temp` is a shipped bitset of size "number of points"

Anyway. If that's okay with you, then you can set this ticket to `positive_review`.

Nathann



---

archive/issue_comments_260238.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@nathanncohen](#comment%3A14):\n> Hello again,\n> \n> I agree with this ticket, and added a small commit at `public/18682`. It is only style and doc:\n> - The first line of the docstring must be a short sentence\n> - A link toward `SetSystem` instead of plain text\n> - Comments in the code\n> \n\nAgreed.\n\n> It was a bit hard to read at first, for many variables hide their meaning:\n> - `_len` is the number of subsets (it could have been the number of points)\n> - `_temp` is a shipped bitset of size \"number of points\"\n> \n\nThe style is pretty terrible, I'll grant you that. I was learning python/cython while I was writing the whole thing, so there are several things I would do differently if I had to start over. \n\nThis in perhaps one of the reasons why making a entirely fresh start for Hypergraph (as opposed to re-using SetSystem) is a good idea. This SetSystem class essentially popped out of work on matroids and became much more of a separate entity than I had intended when I started writing the whole matroid code. So now it looks independent, but really isn't, with all kinds of backdoors for the matroid code I have to preserve.\n\nOn the positive side, I always did a lot of experimenting to see what actually gave the best efficiency. That experience should be reusable (even if it does create some uglyness in the code at times).\n\n> Anyway. If that's okay with you, then you can set this ticket to `positive_review`.\n\n>\n\nI will, thanks. My first review before I even asked for one! :)",
    "created_at": "2015-06-13T08:06:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18682#issuecomment-260238",
    "user": "https://github.com/sagetrac-Rudi"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@nathanncohen](#comment%3A14):
> Hello again,
> 
> I agree with this ticket, and added a small commit at `public/18682`. It is only style and doc:
> - The first line of the docstring must be a short sentence
> - A link toward `SetSystem` instead of plain text
> - Comments in the code
> 

Agreed.

> It was a bit hard to read at first, for many variables hide their meaning:
> - `_len` is the number of subsets (it could have been the number of points)
> - `_temp` is a shipped bitset of size "number of points"
> 

The style is pretty terrible, I'll grant you that. I was learning python/cython while I was writing the whole thing, so there are several things I would do differently if I had to start over. 

This in perhaps one of the reasons why making a entirely fresh start for Hypergraph (as opposed to re-using SetSystem) is a good idea. This SetSystem class essentially popped out of work on matroids and became much more of a separate entity than I had intended when I started writing the whole matroid code. So now it looks independent, but really isn't, with all kinds of backdoors for the matroid code I have to preserve.

On the positive side, I always did a lot of experimenting to see what actually gave the best efficiency. That experience should be reusable (even if it does create some uglyness in the code at times).

> Anyway. If that's okay with you, then you can set this ticket to `positive_review`.

>

I will, thanks. My first review before I even asked for one! :)



---

archive/issue_events_263077.json:
```json
{
    "actor": "https://github.com/sagetrac-Rudi",
    "created_at": "2015-06-13T08:06:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18682#event-263077"
}
```



---

archive/issue_comments_260239.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nFirst let's see how the patchbot likes it..",
    "created_at": "2015-06-13T08:06:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18682#issuecomment-260239",
    "user": "https://github.com/sagetrac-Rudi"
}
```

<div id="comment:16" align="right">comment:16</div>

First let's see how the patchbot likes it..



---

archive/issue_comments_260240.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nIt likes it.",
    "created_at": "2015-06-13T10:07:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18682#issuecomment-260240",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:17" align="right">comment:17</div>

It likes it.



---

archive/issue_events_263078.json:
```json
{
    "actor": "https://github.com/sagetrac-Rudi",
    "created_at": "2015-06-13T15:33:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18682#event-263078"
}
```



---

archive/issue_events_263079.json:
```json
{
    "actor": "https://github.com/sagetrac-Rudi",
    "created_at": "2015-06-13T15:33:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18682#event-263079"
}
```



---

archive/issue_comments_260241.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nGreat!",
    "created_at": "2015-06-13T15:33:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18682#issuecomment-260241",
    "user": "https://github.com/sagetrac-Rudi"
}
```

<div id="comment:18" align="right">comment:18</div>

Great!



---

archive/issue_events_263080.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-06-13T16:18:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18682#event-263080"
}
```



---

archive/issue_events_263081.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-06-13T16:18:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18682#event-263081"
}
```



---

archive/issue_comments_260242.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nCould you add my commit to your branch?",
    "created_at": "2015-06-13T16:18:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18682#issuecomment-260242",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:19" align="right">comment:19</div>

Could you add my commit to your branch?



---

archive/issue_comments_260243.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@nathanncohen](#comment%3A19):\n> Could you add my commit to your branch?\n\nSorry, I thought you had already committed these changes to this branch. \n\nI'm afraid I'm too much of a git novice to know how to pull/merge your commit in public/18682. What git command do I give?",
    "created_at": "2015-06-13T17:53:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18682#issuecomment-260243",
    "user": "https://github.com/sagetrac-Rudi"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@nathanncohen](#comment%3A19):
> Could you add my commit to your branch?

Sorry, I thought you had already committed these changes to this branch. 

I'm afraid I'm too much of a git novice to know how to pull/merge your commit in public/18682. What git command do I give?



---

archive/issue_comments_260244.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nHelloooooooooo,\n\n> I'm afraid I'm too much of a git novice to know how to pull/merge your commit in public/18682. What git command do I give?\n\nThe most trivial method to do it is simply to change the branch's name to public/18682, though that's how you would learn the least.\n\nYou have several other ways to do it. The first would be, as you say, to merge my branch with yours. This would mean:\n\n```\ngit pull trac public/18682\n```\n\nIn theory, that should create a merge commit atop your branch and atop mine, containing the changes of both. In practice, as my branch is merely yours with an additional commit, that would just move your branch's tip where mine is.\n\nYou can then push your branch, as usual, at its current location.\n\nNathann",
    "created_at": "2015-06-13T23:17:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18682#issuecomment-260244",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:21" align="right">comment:21</div>

Helloooooooooo,

> I'm afraid I'm too much of a git novice to know how to pull/merge your commit in public/18682. What git command do I give?

The most trivial method to do it is simply to change the branch's name to public/18682, though that's how you would learn the least.

You have several other ways to do it. The first would be, as you say, to merge my branch with yours. This would mean:

```
git pull trac public/18682
```

In theory, that should create a merge commit atop your branch and atop mine, containing the changes of both. In practice, as my branch is merely yours with an additional commit, that would just move your branch's tip where mine is.

You can then push your branch, as usual, at its current location.

Nathann



---

archive/issue_comments_260245.json:
```json
{
    "body": "Changed commit from **[`b91c71c`](https://github.com/sagemath/sagetrac-mirror/commit/b91c71c431875d347257e5d410534ed20b21b435)** to **[`7b136ab`](https://github.com/sagemath/sagetrac-mirror/commit/7b136abb135ee7872ef4999b06d1893d79905f4a)**",
    "created_at": "2015-06-14T12:44:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18682#issuecomment-260245",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b91c71c`](https://github.com/sagemath/sagetrac-mirror/commit/b91c71c431875d347257e5d410534ed20b21b435)** to **[`7b136ab`](https://github.com/sagemath/sagetrac-mirror/commit/7b136abb135ee7872ef4999b06d1893d79905f4a)**



---

archive/issue_comments_260246.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/69466b658766bacb6d1df082a87f6d7493bf6fd7\"><code>69466b6</code></a></td><td><code>trac #18682: Merged with 6.8.beta4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7b136abb135ee7872ef4999b06d1893d79905f4a\"><code>7b136ab</code></a></td><td><code>trac #18682: Review</code></td></tr></table>\n",
    "created_at": "2015-06-14T12:44:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18682#issuecomment-260246",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/69466b658766bacb6d1df082a87f6d7493bf6fd7"><code>69466b6</code></a></td><td><code>trac #18682: Merged with 6.8.beta4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7b136abb135ee7872ef4999b06d1893d79905f4a"><code>7b136ab</code></a></td><td><code>trac #18682: Review</code></td></tr></table>




---

archive/issue_events_263082.json:
```json
{
    "actor": "https://github.com/sagetrac-Rudi",
    "created_at": "2015-06-14T12:46:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18682#event-263082"
}
```



---

archive/issue_events_263083.json:
```json
{
    "actor": "https://github.com/sagetrac-Rudi",
    "created_at": "2015-06-14T12:46:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18682#event-263083"
}
```



---

archive/issue_comments_260247.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nPerfect!",
    "created_at": "2015-06-14T13:07:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18682#issuecomment-260247",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:24" align="right">comment:24</div>

Perfect!



---

archive/issue_comments_260248.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@nathanncohen](#comment%3A24):\n> Perfect!\n\nI had a good teacher :)\n\nSo if I want to politely propose a change in the work someone else did on a ticket, then this the way to go, push my modified branch somewhere else as in `git trac push public/some_name`? Excellent, I was wondering about that before.",
    "created_at": "2015-06-14T13:15:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18682#issuecomment-260248",
    "user": "https://github.com/sagetrac-Rudi"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@nathanncohen](#comment%3A24):
> Perfect!

I had a good teacher :)

So if I want to politely propose a change in the work someone else did on a ticket, then this the way to go, push my modified branch somewhere else as in `git trac push public/some_name`? Excellent, I was wondering about that before.



---

archive/issue_comments_260249.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nHelloooooooo,\n\n> So if I want to politely propose a change in the work someone else did on a ticket, then this the way to go, push my modified branch somewhere else as in `git trac push public/some_name`? Excellent, I was wondering about that before. \n\nThat's how I work, and I believe that it is indeed the \"most polite way\" to proceed. I always find it a bit unpleasant when I see that the branch's name has been changed by somebody else who pushed commits I don't like on a ticket I'm working on, sometimes without even explaining what they do.\n\nBy pushing that stuff to another branch, you propose them to the author and if he likes them he can merge them to his ticket. If he does not like them, you can either forget about them or propose them on another ticket of your own.\n\nNathann",
    "created_at": "2015-06-14T13:21:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18682#issuecomment-260249",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:26" align="right">comment:26</div>

Helloooooooo,

> So if I want to politely propose a change in the work someone else did on a ticket, then this the way to go, push my modified branch somewhere else as in `git trac push public/some_name`? Excellent, I was wondering about that before. 

That's how I work, and I believe that it is indeed the "most polite way" to proceed. I always find it a bit unpleasant when I see that the branch's name has been changed by somebody else who pushed commits I don't like on a ticket I'm working on, sometimes without even explaining what they do.

By pushing that stuff to another branch, you propose them to the author and if he likes them he can merge them to his ticket. If he does not like them, you can either forget about them or propose them on another ticket of your own.

Nathann



---

archive/issue_events_263084.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-06-14T21:43:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18682#event-263084"
}
```



---

archive/issue_events_263085.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "7653c8ef1dd9a8675e3701917e8b37168a6ea8bd",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-06-14T21:43:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18682#event-263085"
}
```



---

archive/issue_comments_260250.json:
```json
{
    "body": "Changed branch from **[u/Rudi/add_setsystem_is_connected__](https://github.com/sagemath/sagetrac-mirror/tree/u/Rudi/add_setsystem_is_connected__)** to **[`7b136ab`](https://github.com/sagemath/sagetrac-mirror/commit/7b136abb135ee7872ef4999b06d1893d79905f4a)**",
    "created_at": "2015-06-14T21:43:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18682",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18682#issuecomment-260250",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/Rudi/add_setsystem_is_connected__](https://github.com/sagemath/sagetrac-mirror/tree/u/Rudi/add_setsystem_is_connected__)** to **[`7b136ab`](https://github.com/sagemath/sagetrac-mirror/commit/7b136abb135ee7872ef4999b06d1893d79905f4a)**
