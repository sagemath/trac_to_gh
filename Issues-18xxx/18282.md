# Issue 18282: Fixes, cleanup and improvements to the default evaluation method for univariate polynomials

archive/issues_018045.json:
```json
{
    "assignees": [],
    "body": "Simplify `Polynomial.__call__()`, fix the following issues (note that in calls of the form `p(x,y,...)`, `x` is the *outermost* variable), and add a few tests.\n\n```\nsage: Pol_x.<x> = QQ[]\nsage: Pol_xy.<y> = Pol_x[]\nsage: pol = 1000*x^2*y^2 + 100*y + 10*x + 1\nsage: pol(y, 0)\n1000*x^2*y^2 + 100*y + 10*x + 1\n```\n\n```\nsage: pol(y, 0)\n1000*x^2*y^2 + 100*y + 10*x + 1\n```\n\n```\nsage: pol(~y, 0) # not the same bug as above\n((10*x + 1)*y^2 + 100*y + 1000*x^2)/y^2\n```\n\n```\nsage: pol(x, y, x=1)\n1000*y^2 + 10*y + 101\n```\n\n```\nsage: zero = Pol_xy(0)\nsage: zero(1).parent()\nInteger Ring\n```\n\n```\nsage: zero = QQ['x'](0)\nsage: a = matrix(ZZ, [[1]])\nsage: zero(a).parent() # should be over QQ\nFull MatrixSpace of 1 by 1 dense matrices over Integer Ring\n```\n\n```\nsage: zero = GF(2)['x'](0)\nsage: zero(1.).parent() # should raise an error\nReal Field with 53 bits of precision\n```\n\n```\nsage: pol(y=x, x=1)\n1111\n```\n\n```\nsage: pol = QQ['x'](range(10))\nsage: pol(x) # technically not a bug, but should be expanded\n((((((((9*x + 8)*x + 7)*x + 6)*x + 5)*x + 4)*x + 3)*x + 2)*x + 1)*x\n```\n\nAlso implement a method to compute the Horner form of a polynomial expression, in order not to lose the \u201cfeature\u201d illustrated in the last example.\n\nCC:  @rwst @sagetrac-jpflori\n\nBranch: **[8ed1967](https://github.com/sagemath/sagetrac-mirror/commit/8ed19674f4788e97c9f3697fdb67a06c2ef2c781)**\n\nReviewer: **Ralf Stephan**\n\nAuthor: **Marc Mezzarobba**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/18282_\n\n",
    "closed_at": "2015-07-31T17:52:27Z",
    "created_at": "2015-04-22T16:01:55Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20commutative%20algebra",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.9",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Fixes, cleanup and improvements to the default evaluation method for univariate polynomials",
    "type": "issue",
    "updated_at": "2015-08-01T08:35:32Z",
    "url": "https://github.com/sagemath/sage/issues/18282",
    "user": "https://github.com/mezzarobba"
}
```
Simplify `Polynomial.__call__()`, fix the following issues (note that in calls of the form `p(x,y,...)`, `x` is the *outermost* variable), and add a few tests.

```
sage: Pol_x.<x> = QQ[]
sage: Pol_xy.<y> = Pol_x[]
sage: pol = 1000*x^2*y^2 + 100*y + 10*x + 1
sage: pol(y, 0)
1000*x^2*y^2 + 100*y + 10*x + 1
```

```
sage: pol(y, 0)
1000*x^2*y^2 + 100*y + 10*x + 1
```

```
sage: pol(~y, 0) # not the same bug as above
((10*x + 1)*y^2 + 100*y + 1000*x^2)/y^2
```

```
sage: pol(x, y, x=1)
1000*y^2 + 10*y + 101
```

```
sage: zero = Pol_xy(0)
sage: zero(1).parent()
Integer Ring
```

```
sage: zero = QQ['x'](0)
sage: a = matrix(ZZ, [[1]])
sage: zero(a).parent() # should be over QQ
Full MatrixSpace of 1 by 1 dense matrices over Integer Ring
```

```
sage: zero = GF(2)['x'](0)
sage: zero(1.).parent() # should raise an error
Real Field with 53 bits of precision
```

```
sage: pol(y=x, x=1)
1111
```

```
sage: pol = QQ['x'](range(10))
sage: pol(x) # technically not a bug, but should be expanded
((((((((9*x + 8)*x + 7)*x + 6)*x + 5)*x + 4)*x + 3)*x + 2)*x + 1)*x
```

Also implement a method to compute the Horner form of a polynomial expression, in order not to lose the “feature” illustrated in the last example.

CC:  @rwst @sagetrac-jpflori

Branch: **[8ed1967](https://github.com/sagemath/sagetrac-mirror/commit/8ed19674f4788e97c9f3697fdb67a06c2ef2c781)**

Reviewer: **Ralf Stephan**

Author: **Marc Mezzarobba**

_Issue created by migration from https://trac.sagemath.org/ticket/18282_





---

archive/issue_events_242243.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2015-04-22T16:01:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "milestone_number": null,
    "milestone_title": "sage-6.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18282#event-242243"
}
```



---

archive/issue_events_242244.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2015-04-22T16:01:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "component: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18282#event-242244"
}
```



---

archive/issue_events_242245.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2015-04-22T16:01:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18282#event-242245"
}
```



---

archive/issue_events_242246.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2015-04-22T16:01:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18282#event-242246"
}
```



---

archive/issue_comments_253329.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/012631ea03f6c11371df9c5e3f2bb3e4676cfc9f\">012631e</a></td><td><code>Horner form of symbolic expressions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4fdccb24c57c1886aa8849bb1f8e6fe8c4cae1ea\">4fdccb2</a></td><td><code>Improve pol(expr) for expr in SR</code></td></tr></table>\n",
    "created_at": "2015-04-23T11:03:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18282#issuecomment-253329",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:1" align="right">Comment 1</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/012631ea03f6c11371df9c5e3f2bb3e4676cfc9f">012631e</a></td><td><code>Horner form of symbolic expressions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4fdccb24c57c1886aa8849bb1f8e6fe8c4cae1ea">4fdccb2</a></td><td><code>Improve pol(expr) for expr in SR</code></td></tr></table>




---

archive/issue_comments_253330.json:
```json
{
    "body": "Changed commit from **[64339bc](https://github.com/sagemath/sagetrac-mirror/commit/64339bcbe4c00d54447e76c20862f93ea92f77c1)** to **[4fdccb2](https://github.com/sagemath/sagetrac-mirror/commit/4fdccb24c57c1886aa8849bb1f8e6fe8c4cae1ea)**",
    "created_at": "2015-04-23T11:03:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18282#issuecomment-253330",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[64339bc](https://github.com/sagemath/sagetrac-mirror/commit/64339bcbe4c00d54447e76c20862f93ea92f77c1)** to **[4fdccb2](https://github.com/sagemath/sagetrac-mirror/commit/4fdccb24c57c1886aa8849bb1f8e6fe8c4cae1ea)**



---

archive/issue_comments_253331.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,56 @@\n-Evaluating of a polynomial (from a polynomial ring) on an element of `SR` calls a generic implementation of Horner evaluation, so that the result is in (a kind of) Horner form:\n+Simplify `Polynomial.__call__()`, fix the following issues (note that in calls of the form `p(x,y,...)`, `x` is the *outermost* variable), and add a few tests.\n+\n+```\n+sage: Pol_x.<x> = QQ[]\n+sage: Pol_xy.<y> = Pol_x[]\n+sage: pol = 1000*x^2*y^2 + 100*y + 10*x + 1\n+sage: pol(y, 0)\n+1000*x^2*y^2 + 100*y + 10*x + 1\n+```\n+\n+```\n+sage: pol(y, 0)\n+1000*x^2*y^2 + 100*y + 10*x + 1\n+```\n+\n+```\n+sage: pol(~y, 0) # not the same bug as above\n+((10*x + 1)*y^2 + 100*y + 1000*x^2)/y^2\n+```\n+\n+```\n+sage: pol(x, y, x=1)\n+1000*y^2 + 10*y + 101\n+```\n+\n+```\n+sage: zero = Pol_xy(0)\n+sage: zero(1).parent()\n+Integer Ring\n+```\n+\n+```\n+sage: zero = QQ['x'](0)\n+sage: a = matrix(ZZ, [[1]])\n+sage: zero(a).parent() # should be over QQ\n+Full MatrixSpace of 1 by 1 dense matrices over Integer Ring\n+```\n+\n+```\n+sage: zero = GF(2)['x'](0)\n+sage: zero(1.).parent() # should raise an error\n+Real Field with 53 bits of precision\n+```\n+\n+```\n+sage: pol(y=x, x=1)\n+1111\n+```\n \n ```\n sage: pol = QQ['x'](range(10))\n-sage: pol(x)\n+sage: pol(x) # technically not a bug, but should be expanded\n ((((((((9*x + 8)*x + 7)*x + 6)*x + 5)*x + 4)*x + 3)*x + 2)*x + 1)*x\n ```\n-This is probably not what users expect. Additionally, the conversion could be much more efficient.\n+\n+Also implement a method to compute the Horner form of a polynomial expression, in order not to lose the \u201cfeature\u201d illustrated in the last example.\n``````\n",
    "created_at": "2015-04-24T11:28:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18282#issuecomment-253331",
    "user": "https://github.com/mezzarobba"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,56 @@
-Evaluating of a polynomial (from a polynomial ring) on an element of `SR` calls a generic implementation of Horner evaluation, so that the result is in (a kind of) Horner form:
+Simplify `Polynomial.__call__()`, fix the following issues (note that in calls of the form `p(x,y,...)`, `x` is the *outermost* variable), and add a few tests.
+
+```
+sage: Pol_x.<x> = QQ[]
+sage: Pol_xy.<y> = Pol_x[]
+sage: pol = 1000*x^2*y^2 + 100*y + 10*x + 1
+sage: pol(y, 0)
+1000*x^2*y^2 + 100*y + 10*x + 1
+```
+
+```
+sage: pol(y, 0)
+1000*x^2*y^2 + 100*y + 10*x + 1
+```
+
+```
+sage: pol(~y, 0) # not the same bug as above
+((10*x + 1)*y^2 + 100*y + 1000*x^2)/y^2
+```
+
+```
+sage: pol(x, y, x=1)
+1000*y^2 + 10*y + 101
+```
+
+```
+sage: zero = Pol_xy(0)
+sage: zero(1).parent()
+Integer Ring
+```
+
+```
+sage: zero = QQ['x'](0)
+sage: a = matrix(ZZ, [[1]])
+sage: zero(a).parent() # should be over QQ
+Full MatrixSpace of 1 by 1 dense matrices over Integer Ring
+```
+
+```
+sage: zero = GF(2)['x'](0)
+sage: zero(1.).parent() # should raise an error
+Real Field with 53 bits of precision
+```
+
+```
+sage: pol(y=x, x=1)
+1111
+```
 
 ```
 sage: pol = QQ['x'](range(10))
-sage: pol(x)
+sage: pol(x) # technically not a bug, but should be expanded
 ((((((((9*x + 8)*x + 7)*x + 6)*x + 5)*x + 4)*x + 3)*x + 2)*x + 1)*x
 ```
-This is probably not what users expect. Additionally, the conversion could be much more efficient.
+
+Also implement a method to compute the Horner form of a polynomial expression, in order not to lose the “feature” illustrated in the last example.
``````




---

archive/issue_events_242247.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2015-04-24T11:28:24Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "title_is": "Improve the default evaluation method for univariate polynomials",
    "title_was": "Improve the evaluation of polynomials on symbolic expressions",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18282#event-242247"
}
```



---

archive/issue_events_242248.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-04-24T12:30:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "component: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18282#event-242248"
}
```



---

archive/issue_events_242249.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-04-24T12:30:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20commutative%20algebra",
    "label_color": "0000ff",
    "label_name": "component: commutative algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18282#event-242249"
}
```



---

archive/issue_comments_253332.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e62e7618bc84838fb630f94e606dd5b49bea1130\">e62e761</a></td><td><code>Horner form of symbolic expressions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4d59c7d7833765d55ea4510d1a819a81a0826860\">4d59c7d</a></td><td><code>Improve pol(expr) for expr in SR</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1f7feb6ad9527fb1a237294d68a0a1fcb08484da\">1f7feb6</a></td><td><code>Simplify Polynomial.__call__</code></td></tr></table>\n",
    "created_at": "2015-04-24T16:46:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18282#issuecomment-253332",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5" align="right">Comment 5</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e62e7618bc84838fb630f94e606dd5b49bea1130">e62e761</a></td><td><code>Horner form of symbolic expressions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4d59c7d7833765d55ea4510d1a819a81a0826860">4d59c7d</a></td><td><code>Improve pol(expr) for expr in SR</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1f7feb6ad9527fb1a237294d68a0a1fcb08484da">1f7feb6</a></td><td><code>Simplify Polynomial.__call__</code></td></tr></table>




---

archive/issue_comments_253333.json:
```json
{
    "body": "Changed commit from **[4fdccb2](https://github.com/sagemath/sagetrac-mirror/commit/4fdccb24c57c1886aa8849bb1f8e6fe8c4cae1ea)** to **[1f7feb6](https://github.com/sagemath/sagetrac-mirror/commit/1f7feb6ad9527fb1a237294d68a0a1fcb08484da)**",
    "created_at": "2015-04-24T16:46:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18282#issuecomment-253333",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4fdccb2](https://github.com/sagemath/sagetrac-mirror/commit/4fdccb24c57c1886aa8849bb1f8e6fe8c4cae1ea)** to **[1f7feb6](https://github.com/sagemath/sagetrac-mirror/commit/1f7feb6ad9527fb1a237294d68a0a1fcb08484da)**



---

archive/issue_comments_253334.json:
```json
{
    "body": "Changed commit from **[1f7feb6](https://github.com/sagemath/sagetrac-mirror/commit/1f7feb6ad9527fb1a237294d68a0a1fcb08484da)** to **[8967173](https://github.com/sagemath/sagetrac-mirror/commit/89671731fdf80e827f11b120a6655659c28c0225)**",
    "created_at": "2015-04-25T06:55:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18282#issuecomment-253334",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1f7feb6](https://github.com/sagemath/sagetrac-mirror/commit/1f7feb6ad9527fb1a237294d68a0a1fcb08484da)** to **[8967173](https://github.com/sagemath/sagetrac-mirror/commit/89671731fdf80e827f11b120a6655659c28c0225)**



---

archive/issue_comments_253335.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/89671731fdf80e827f11b120a6655659c28c0225\">8967173</a></td><td><code>Simplify Polynomial.__call__</code></td></tr></table>\n",
    "created_at": "2015-04-25T06:55:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18282#issuecomment-253335",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6" align="right">Comment 6</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/89671731fdf80e827f11b120a6655659c28c0225">8967173</a></td><td><code>Simplify Polynomial.__call__</code></td></tr></table>




---

archive/issue_events_242250.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2015-04-25T06:56:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18282#event-242250"
}
```



---

archive/issue_comments_253336.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\n\n```\nsage: pol(y, 0)\n1000*x^2*y^2 + 100*y + 10*x + 1\n```\nIf I understand correctly, you now make this evaluate to `100*y+1`? In which ring? You've evaluated `x`, so the answer should lie in QQ['y'], which is not a ring that exists at this moment. What about `pol(y,I)`? should that return an answer in `QuadraticField(-1,name=\"I\")['y']`?\n\n-1 on this: The method you're calling is evaluating a univariate polynomial over an arbitrary ring. You don't know what \"evaluation\" of the coefficient would mean and, more importantly, whether it's supported at all. Furthermore, the rings in which the answer is supposed to lie likely don't exist yet. Letting sage choose which rings should be constructed likely leads to difficult to predict behaviour (you'd basically be relying on the common parents the coercion framework cooks up, and then I think it's better to let the user rely on it him/herself).\n\nI think that `pol(y,0)` should be an error because there's an unhandled coefficient `0` present. It's not clear at all that the *second* argument should be used for the variable that gets mentioned *first* in `QQ['x']['y']`. One might think that `pol(y0,x0)==pol(y0)(x0)`, but that's not the case either. Error really is safer.",
    "created_at": "2015-04-25T19:08:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18282#issuecomment-253336",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:8" align="right">Comment 8</div>


```
sage: pol(y, 0)
1000*x^2*y^2 + 100*y + 10*x + 1
```
If I understand correctly, you now make this evaluate to `100*y+1`? In which ring? You've evaluated `x`, so the answer should lie in QQ['y'], which is not a ring that exists at this moment. What about `pol(y,I)`? should that return an answer in `QuadraticField(-1,name="I")['y']`?

-1 on this: The method you're calling is evaluating a univariate polynomial over an arbitrary ring. You don't know what "evaluation" of the coefficient would mean and, more importantly, whether it's supported at all. Furthermore, the rings in which the answer is supposed to lie likely don't exist yet. Letting sage choose which rings should be constructed likely leads to difficult to predict behaviour (you'd basically be relying on the common parents the coercion framework cooks up, and then I think it's better to let the user rely on it him/herself).

I think that `pol(y,0)` should be an error because there's an unhandled coefficient `0` present. It's not clear at all that the *second* argument should be used for the variable that gets mentioned *first* in `QQ['x']['y']`. One might think that `pol(y0,x0)==pol(y0)(x0)`, but that's not the case either. Error really is safer.



---

archive/issue_comments_253337.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nReplying to [@nbruin](#comment%3A8):\n> \n> ```\n> sage: pol(y, 0)\n> 1000*x^2*y^2 + 100*y + 10*x + 1\n> ```\n> If I understand correctly, you now make this evaluate to `100*y+1`?\n\nYes:\n\n```\nsage: pol(y, 0) # with patch\n100*y + 1\n```\n\nNote that the previous implementation wouldn't work in the case of `pol(y, 0)`, but would happily compute\n\n```\nsage: sage: pol(y+1, 0) # without patch\n100*y + 101\n```\n\n> In which ring? You've evaluated `x`, so the answer should lie in QQ['y'], which is not a ring that exists at this moment.\n\nNot exactly:\n\n```\nsage: pol(y, 0).parent() # with patch\nUnivariate Polynomial Ring in y over Univariate Polynomial Ring in x over Rational Field\n```\nThe logic here is that yes, I have evaluated x, so the evaluated coefficients lie in \u211a, *but* then I'm evaluating the resulting element of \u211a[Y] on y \u2208 \u211a[x][y], not y \u2208 \u211a[y]. So the answer should lie in \u211a[x][y].\n\nIn contrast,\n\n```\nsage: pol(0, x).parent() # with patch\nUnivariate Polynomial Ring in x over Rational Field\n```\nsince `x.parent()` is `QQ[x]`, not `QQ[x][y]`.\n\n> What about `pol(y,I)`? should that return an answer in `QuadraticField(-1,name=\"I\")['y']`?\n\n```\nsage: pol(y, I).parent() # with patch - TBI, see #18036\nSymbolic Ring\nsage: pol(y, I.pyobject()).parent() # with patch\nUnivariate Polynomial Ring in y over Univariate Polynomial Ring in x over Number Field in I with defining polynomial x^2 + 1\n```\n\n> Furthermore, the rings in which the answer is supposed to lie likely don't exist yet. Letting sage choose which rings should be constructed likely leads to difficult to predict behaviour (you'd basically be relying on the common parents the coercion framework cooks up,\n\nWell, yes, but that's already the case when you just do `a + b`! Would you really want the evaluation of elements of \u2124[x][y] on y = y0 \u2208 \u211a to raise an error?\n\n> I think that `pol(y,0)` should be an error because there's an unhandled coefficient `0` present. It's not clear at all that the *second* argument should be used for the variable that gets mentioned *first* in `QQ['x']['y']`. One might think that `pol(y0,x0)==pol(y0)(x0)`, but that's not the case either. Error really is safer.\n\nPerhaps, yes, but I didn't invent this feature. It has been present for years, and people use it! There are even examples in the sage library that rely on `pol(y,x)` working when pol \u2208 R[y] where R is *not* a polynomial ring (but another ring with callable elements). So really this ticket is only about making the implementation understandable, and fixing lots of corner cases such as those mentioned above.",
    "created_at": "2015-04-26T07:09:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18282#issuecomment-253337",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:9" align="right">Comment 9</div>

Replying to [@nbruin](#comment%3A8):
> 
> ```
> sage: pol(y, 0)
> 1000*x^2*y^2 + 100*y + 10*x + 1
> ```
> If I understand correctly, you now make this evaluate to `100*y+1`?

Yes:

```
sage: pol(y, 0) # with patch
100*y + 1
```

Note that the previous implementation wouldn't work in the case of `pol(y, 0)`, but would happily compute

```
sage: sage: pol(y+1, 0) # without patch
100*y + 101
```

> In which ring? You've evaluated `x`, so the answer should lie in QQ['y'], which is not a ring that exists at this moment.

Not exactly:

```
sage: pol(y, 0).parent() # with patch
Univariate Polynomial Ring in y over Univariate Polynomial Ring in x over Rational Field
```
The logic here is that yes, I have evaluated x, so the evaluated coefficients lie in ℚ, *but* then I'm evaluating the resulting element of ℚ[Y] on y ∈ ℚ[x][y], not y ∈ ℚ[y]. So the answer should lie in ℚ[x][y].

In contrast,

```
sage: pol(0, x).parent() # with patch
Univariate Polynomial Ring in x over Rational Field
```
since `x.parent()` is `QQ[x]`, not `QQ[x][y]`.

> What about `pol(y,I)`? should that return an answer in `QuadraticField(-1,name="I")['y']`?

```
sage: pol(y, I).parent() # with patch - TBI, see #18036
Symbolic Ring
sage: pol(y, I.pyobject()).parent() # with patch
Univariate Polynomial Ring in y over Univariate Polynomial Ring in x over Number Field in I with defining polynomial x^2 + 1
```

> Furthermore, the rings in which the answer is supposed to lie likely don't exist yet. Letting sage choose which rings should be constructed likely leads to difficult to predict behaviour (you'd basically be relying on the common parents the coercion framework cooks up,

Well, yes, but that's already the case when you just do `a + b`! Would you really want the evaluation of elements of ℤ[x][y] on y = y0 ∈ ℚ to raise an error?

> I think that `pol(y,0)` should be an error because there's an unhandled coefficient `0` present. It's not clear at all that the *second* argument should be used for the variable that gets mentioned *first* in `QQ['x']['y']`. One might think that `pol(y0,x0)==pol(y0)(x0)`, but that's not the case either. Error really is safer.

Perhaps, yes, but I didn't invent this feature. It has been present for years, and people use it! There are even examples in the sage library that rely on `pol(y,x)` working when pol ∈ R[y] where R is *not* a polynomial ring (but another ring with callable elements). So really this ticket is only about making the implementation understandable, and fixing lots of corner cases such as those mentioned above.



---

archive/issue_comments_253338.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nReplying to [@mezzarobba](#comment%3A9):\n> Perhaps, yes, but I didn't invent this feature. It has been present for years, and people use it! There are even examples in the sage library that rely on `pol(y,x)` working when pol \u2208 R[y] where R is *not* a polynomial ring (but another ring with callable elements). So really this ticket is only about making the implementation understandable, and fixing lots of corner cases such as those mentioned above.\n\nOK, that seems to be the case indeed. Thanks for cleaning things up a bit.",
    "created_at": "2015-04-26T17:18:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18282#issuecomment-253338",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:10" align="right">Comment 10</div>

Replying to [@mezzarobba](#comment%3A9):
> Perhaps, yes, but I didn't invent this feature. It has been present for years, and people use it! There are even examples in the sage library that rely on `pol(y,x)` working when pol ∈ R[y] where R is *not* a polynomial ring (but another ring with callable elements). So really this ticket is only about making the implementation understandable, and fixing lots of corner cases such as those mentioned above.

OK, that seems to be the case indeed. Thanks for cleaning things up a bit.



---

archive/issue_comments_253339.json:
```json
{
    "body": "Changed commit from **[8967173](https://github.com/sagemath/sagetrac-mirror/commit/89671731fdf80e827f11b120a6655659c28c0225)** to **[0cbf0e5](https://github.com/sagemath/sagetrac-mirror/commit/0cbf0e5395205c323f5a06bc0f9502bf52a88b8c)**",
    "created_at": "2015-05-24T08:11:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18282#issuecomment-253339",
    "user": "https://github.com/mezzarobba"
}
```

Changed commit from **[8967173](https://github.com/sagemath/sagetrac-mirror/commit/89671731fdf80e827f11b120a6655659c28c0225)** to **[0cbf0e5](https://github.com/sagemath/sagetrac-mirror/commit/0cbf0e5395205c323f5a06bc0f9502bf52a88b8c)**



---

archive/issue_events_242251.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2015-05-24T08:11:32Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "milestone_number": null,
    "milestone_title": "sage-6.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18282#event-242251"
}
```



---

archive/issue_events_242252.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2015-05-24T08:11:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18282#event-242252"
}
```



---

archive/issue_comments_253340.json:
```json
{
    "body": "Changed branch from **[u/mmezzarobba/wip/pol_of_symb](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/wip/pol_of_symb)** to **[u/mmezzarobba/pol_call](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/pol_call)**",
    "created_at": "2015-05-24T08:11:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18282#issuecomment-253340",
    "user": "https://github.com/mezzarobba"
}
```

Changed branch from **[u/mmezzarobba/wip/pol_of_symb](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/wip/pol_of_symb)** to **[u/mmezzarobba/pol_call](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/pol_call)**



---

archive/issue_comments_253341.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5ffd32196e2d2a54a6d13e41f02711b739b1dcd2\">5ffd321</a></td><td><code>#18282 Horner form of symbolic expressions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4a519fdd053b499cb01ae279c8797bf1e651c285\">4a519fd</a></td><td><code>#18282 Improve pol(expr) for expr in SR</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/84d6a1b874c241e8eed8196cc42fd9075be40206\">84d6a1b</a></td><td><code>#18282 Simplify Polynomial.__call__</code></td></tr></table>\n",
    "created_at": "2015-05-30T09:56:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18282#issuecomment-253341",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13" align="right">Comment 13</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5ffd32196e2d2a54a6d13e41f02711b739b1dcd2">5ffd321</a></td><td><code>#18282 Horner form of symbolic expressions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4a519fdd053b499cb01ae279c8797bf1e651c285">4a519fd</a></td><td><code>#18282 Improve pol(expr) for expr in SR</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/84d6a1b874c241e8eed8196cc42fd9075be40206">84d6a1b</a></td><td><code>#18282 Simplify Polynomial.__call__</code></td></tr></table>




---

archive/issue_comments_253342.json:
```json
{
    "body": "Changed commit from **[0cbf0e5](https://github.com/sagemath/sagetrac-mirror/commit/0cbf0e5395205c323f5a06bc0f9502bf52a88b8c)** to **[84d6a1b](https://github.com/sagemath/sagetrac-mirror/commit/84d6a1b874c241e8eed8196cc42fd9075be40206)**",
    "created_at": "2015-05-30T09:56:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18282#issuecomment-253342",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0cbf0e5](https://github.com/sagemath/sagetrac-mirror/commit/0cbf0e5395205c323f5a06bc0f9502bf52a88b8c)** to **[84d6a1b](https://github.com/sagemath/sagetrac-mirror/commit/84d6a1b874c241e8eed8196cc42fd9075be40206)**



---

archive/issue_events_242253.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2015-05-30T09:58:52Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "title_is": "Fixes, cleanup and improvements to the default evaluation method for univariate polynomials",
    "title_was": "Improve the default evaluation method for univariate polynomials",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18282#event-242253"
}
```



---

archive/issue_comments_253343.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nRebased.",
    "created_at": "2015-05-30T09:58:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18282#issuecomment-253343",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:14" align="right">Comment 14</div>

Rebased.



---

archive/issue_comments_253344.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nIn view of #18600 (and older sisters #18518 and #18585), I think `__call__` may be at the same time improved and adapted to high degree sparse polynomials: Basically, when a univariate polynomial `p` is evaluated on a value `v` (other than a symbolic variable), it uses a Horner scheme that ranges over all the coefficients of `p`, including the zeroes. One could easily modify lines 755-756 in `src/sage/rings/polynomial/polynomial_element.pyx` to make the loop ranges over the nonzero coefficients. I've not checked already whether it is slower in a sensible way for really dense polynomials or not, but it would be faster for sparse polynomials. And as a side benefit, one would be able to evaluate polynomials such as `x<sup>2</sup>500`, at least on \"easy\" values such as `1` or `-1` or on finite fields.\n\nWhat do you think of my proposal?",
    "created_at": "2015-06-03T15:11:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18282#issuecomment-253344",
    "user": "https://github.com/bgrenet"
}
```

<div id="comment:15" align="right">Comment 15</div>

In view of #18600 (and older sisters #18518 and #18585), I think `__call__` may be at the same time improved and adapted to high degree sparse polynomials: Basically, when a univariate polynomial `p` is evaluated on a value `v` (other than a symbolic variable), it uses a Horner scheme that ranges over all the coefficients of `p`, including the zeroes. One could easily modify lines 755-756 in `src/sage/rings/polynomial/polynomial_element.pyx` to make the loop ranges over the nonzero coefficients. I've not checked already whether it is slower in a sensible way for really dense polynomials or not, but it would be faster for sparse polynomials. And as a side benefit, one would be able to evaluate polynomials such as `x<sup>2</sup>500`, at least on "easy" values such as `1` or `-1` or on finite fields.

What do you think of my proposal?



---

archive/issue_comments_253345.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nReplying to [@bgrenet](#comment%3A15):\n> One could easily modify lines 755-756 in `src/sage/rings/polynomial/polynomial_element.pyx` to make the loop ranges over the nonzero coefficients. I've not checked already whether it is slower in a sensible way for really dense polynomials or not, but it would be faster for sparse polynomials.\n\nSounds reasonable\u2014or perhaps one should override `__call__` in `Polynomial_generic_sparse`, I don't know. In any case I have no time to spend on this ticket now, but please feel free to add improvements if you want!",
    "created_at": "2015-06-04T07:40:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18282#issuecomment-253345",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:16" align="right">Comment 16</div>

Replying to [@bgrenet](#comment%3A15):
> One could easily modify lines 755-756 in `src/sage/rings/polynomial/polynomial_element.pyx` to make the loop ranges over the nonzero coefficients. I've not checked already whether it is slower in a sensible way for really dense polynomials or not, but it would be faster for sparse polynomials.

Sounds reasonable—or perhaps one should override `__call__` in `Polynomial_generic_sparse`, I don't know. In any case I have no time to spend on this ticket now, but please feel free to add improvements if you want!



---

archive/issue_comments_253346.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nReplying to [@mezzarobba](#comment%3A16):\n> Replying to [@bgrenet](#comment%3A15):\n> > One could easily modify lines 755-756 in `src/sage/rings/polynomial/polynomial_element.pyx` to make the loop ranges over the nonzero coefficients. I've not checked already whether it is slower in a sensible way for really dense polynomials or not, but it would be faster for sparse polynomials.\n\n> \n> Sounds reasonable\u2014or perhaps one should override `__call__` in `Polynomial_generic_sparse`, I don't know. In any case I have no time to spend on this ticket now, but please feel free to add improvements if you want!\n\nActually, I did some tests. It appears that it should be better to implement a `__call__` method in `Polynomial_generic_sparse` to avoid hindering performances. The other solution would be to have tests inside the current `__call__` method to check whether the `parent` is sparse or not. One advantage is to avoid code duplication (for `*args` and `*kwds`), though I guess it is not the right solution.\n\nI'd better let this ticket as it is (and actually try to review it...) and open a new ticket for sparse polynomials.",
    "created_at": "2015-06-04T08:07:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18282#issuecomment-253346",
    "user": "https://github.com/bgrenet"
}
```

<div id="comment:17" align="right">Comment 17</div>

Replying to [@mezzarobba](#comment%3A16):
> Replying to [@bgrenet](#comment%3A15):
> > One could easily modify lines 755-756 in `src/sage/rings/polynomial/polynomial_element.pyx` to make the loop ranges over the nonzero coefficients. I've not checked already whether it is slower in a sensible way for really dense polynomials or not, but it would be faster for sparse polynomials.

> 
> Sounds reasonable—or perhaps one should override `__call__` in `Polynomial_generic_sparse`, I don't know. In any case I have no time to spend on this ticket now, but please feel free to add improvements if you want!

Actually, I did some tests. It appears that it should be better to implement a `__call__` method in `Polynomial_generic_sparse` to avoid hindering performances. The other solution would be to have tests inside the current `__call__` method to check whether the `parent` is sparse or not. One advantage is to avoid code duplication (for `*args` and `*kwds`), though I guess it is not the right solution.

I'd better let this ticket as it is (and actually try to review it...) and open a new ticket for sparse polynomials.



---

archive/issue_comments_253347.json:
```json
{
    "body": "Changed branch from **[u/mmezzarobba/pol_call](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/pol_call)** to **[public/18282](https://github.com/sagemath/sagetrac-mirror/tree/public/18282)**",
    "created_at": "2015-07-29T15:44:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18282#issuecomment-253347",
    "user": "https://github.com/rwst"
}
```

Changed branch from **[u/mmezzarobba/pol_call](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/pol_call)** to **[public/18282](https://github.com/sagemath/sagetrac-mirror/tree/public/18282)**



---

archive/issue_comments_253348.json:
```json
{
    "body": "Changed commit from **[84d6a1b](https://github.com/sagemath/sagetrac-mirror/commit/84d6a1b874c241e8eed8196cc42fd9075be40206)** to **[8ed1967](https://github.com/sagemath/sagetrac-mirror/commit/8ed19674f4788e97c9f3697fdb67a06c2ef2c781)**",
    "created_at": "2015-07-29T15:45:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18282#issuecomment-253348",
    "user": "https://github.com/rwst"
}
```

Changed commit from **[84d6a1b](https://github.com/sagemath/sagetrac-mirror/commit/84d6a1b874c241e8eed8196cc42fd9075be40206)** to **[8ed1967](https://github.com/sagemath/sagetrac-mirror/commit/8ed19674f4788e97c9f3697fdb67a06c2ef2c781)**



---

archive/issue_comments_253349.json:
```json
{
    "body": "Reviewer: **Ralf Stephan**",
    "created_at": "2015-07-29T15:45:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18282#issuecomment-253349",
    "user": "https://github.com/rwst"
}
```

Reviewer: **Ralf Stephan**



---

archive/issue_events_242254.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-07-29T15:45:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18282#event-242254"
}
```



---

archive/issue_events_242255.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-07-29T15:45:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18282#event-242255"
}
```



---

archive/issue_comments_253350.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nIn Pynac-0.4.3 (maybe 0.3.9.3) `sin(pi/5)` expands immediately to `1/4*sqrt(-2*sqrt(5) + 10)` (actually every `sin`/`cos`/`tan` value expressible with `sqrt`s of depth 3), so I'll change the doctest to `sin(pi/7)`.\n\nAs I trust Nils on the general purpose, and I can see nothing missing in the code, also the patchbot is happy and my patch is only a doctest change I'll take the liberty to set positive.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ed19674f4788e97c9f3697fdb67a06c2ef2c781\">8ed1967</a></td><td><code>Merge branch 'u/mmezzarobba/pol_call' of trac.sagemath.org:sage into tmp4</code></td></tr></table>\n",
    "created_at": "2015-07-29T15:45:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18282#issuecomment-253350",
    "user": "https://github.com/rwst"
}
```

<div id="comment:19" align="right">Comment 19</div>

In Pynac-0.4.3 (maybe 0.3.9.3) `sin(pi/5)` expands immediately to `1/4*sqrt(-2*sqrt(5) + 10)` (actually every `sin`/`cos`/`tan` value expressible with `sqrt`s of depth 3), so I'll change the doctest to `sin(pi/7)`.

As I trust Nils on the general purpose, and I can see nothing missing in the code, also the patchbot is happy and my patch is only a doctest change I'll take the liberty to set positive.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ed19674f4788e97c9f3697fdb67a06c2ef2c781">8ed1967</a></td><td><code>Merge branch 'u/mmezzarobba/pol_call' of trac.sagemath.org:sage into tmp4</code></td></tr></table>




---

archive/issue_events_242256.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-07-29T15:45:08Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18282#event-242256"
}
```



---

archive/issue_events_242257.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-07-29T15:45:08Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18282#event-242257"
}
```



---

archive/issue_comments_253351.json:
```json
{
    "body": "Changed branch from **[public/18282](https://github.com/sagemath/sagetrac-mirror/tree/public/18282)** to **[8ed1967](https://github.com/sagemath/sagetrac-mirror/commit/8ed19674f4788e97c9f3697fdb67a06c2ef2c781)**",
    "created_at": "2015-07-31T17:52:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18282#issuecomment-253351",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/18282](https://github.com/sagemath/sagetrac-mirror/tree/public/18282)** to **[8ed1967](https://github.com/sagemath/sagetrac-mirror/commit/8ed19674f4788e97c9f3697fdb67a06c2ef2c781)**



---

archive/issue_events_242258.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-07-31T17:52:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18282#event-242258"
}
```



---

archive/issue_events_242259.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "c0d4e06cd5661795a3b48d893b8adf52b0d59945",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-07-31T17:52:27Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18282#event-242259"
}
```



---

archive/issue_comments_253352.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nThanks!",
    "created_at": "2015-08-01T08:35:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18282#issuecomment-253352",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:21" align="right">Comment 21</div>

Thanks!



---

archive/issue_comments_253353.json:
```json
{
    "body": "Changed commit from **[8ed1967](https://github.com/sagemath/sagetrac-mirror/commit/8ed19674f4788e97c9f3697fdb67a06c2ef2c781)** to none",
    "created_at": "2015-08-01T08:35:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18282#issuecomment-253353",
    "user": "https://github.com/mezzarobba"
}
```

Changed commit from **[8ed1967](https://github.com/sagemath/sagetrac-mirror/commit/8ed19674f4788e97c9f3697fdb67a06c2ef2c781)** to none
