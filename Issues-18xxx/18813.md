# Issue 18813: New decoding structure for linear codes

archive/issues_018576.json:
```json
{
    "body": "For now, linear codes don't have a proper structure for decoding, where \"decoding\" means using an error-correction algorithm to recover the original codeword.\n\nWe propose in this ticket a new structure, designed to handle word -> codeword and word -> message transformations.\n\nWe provide the following:\n\n- An abstract class `Decoder`, for inheritances purposes. Every `Decoder` will inherit from this class. It contains:\n    - a default constructor;\n    - `decode_to_code` and `decode_to_message` default implementation;\n    - several methods to get information on the instance of the class and\n    - explanations on what to do to create a new decoder subclass. \n\n- An exception class `DecodingFailure`, for errors related to decoding algorithms. \n\n- Methods for decoding handling in `AbstractLinearCode` (see Design) \n\n## Design\n\n\nWhat \"Decoding\" means depends on the algorithm used to find and correct the errors in a provided word. For instance, there are decoding algorithms able to locate and correct up to a certain amount of errors, and will fail if there is more errors than this bound. Others will return a list of codewords, which contain the original codeword. Some decoding algorithms are probabilistic, some are deterministic.\n\nTo describe the variety of behaviours, we introduce a list of \"types\", called `_decoder_type` which is a set of keywords describing the semantics of the decoding algorithm represented by the class.\n\nDecodig usually recovers codewords close to the provided words. Some decoding algorithms, however, naturally decode directly to the message from which the codeword was obtained. This is e.g. the case with the Berlekamp-Welch or the Guruswami-Sudan algorithms. Since both uses are natural and in common use in theory and practice, we provide two different methods: decode_to_code and decode_to_message. The former corrects the errors and return an element from the code, while the latter corrects the errors and returns an element from a message space. Thanks to a default implementation, reimplmenting both is not needed. One only needs to override one of these two methods in a Decoder class, and the default implementation will be used to perform the other one.\n\nAs is discussed in #18376, a code can have many message spaces, and the map between a message space and the code is given by an Encoder. The `decode_to_message` will pertain to a certain such `Encoder`, so we introduce the string field `_connected_encoder_name` to point to this encoder. A user can acquire the actual `Encoder` object by calling `Decoder.connected_encoder`.\n\nFurthermore, we propose here the exact same structure of registration for decoders as the one we introduced in #18376, and the same handling of it on the level of codes: each code will have a `default_decoder`, so if one does not want to be bothered by multiple decoding algorithms when he just wants to decode a word `y` for his code `C`, all he has to do is to write `C.decode_to_code(y)`, and the default decoder will be used to correct the errors in `y`.\n\nWith this structure, we are able to represent different decoding algorithms for each code, even if they have different behaviour. We also have a versatile structure which allows specific experimentation on chosen decoding algorithms alongside with generic decodings in which the algorithm does not matter.\n\n\n## Notes\n\nThis ticket relies on the encoding structure proposed on trac #18376, as every decoder has to be linked with an encoder. \n\nThe original decoding algorithms, which were in decoder.py are now in two different `Decoder` objects in `linear_code.py`. I removed the guava one as the call to guava's decoding algorithm returned a guava error.\n\nCC:  @johanrosenkilde jpflori @videlec @defeo @ClementPernet\n\nBranch/Commit: cf5ac32123eaff98d9620f6ce21afb9887a3c758\n\nReviewer: Cl\u00e9ment Pernet\n\nAuthor: David Lucas\n\nDependencies: #18376\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/18813\n\n",
    "closed_at": "2015-11-26T18:23:50Z",
    "created_at": "2015-06-29T12:22:36Z",
    "labels": [
        "component: coding theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.10",
    "title": "New decoding structure for linear codes",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18813",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```
For now, linear codes don't have a proper structure for decoding, where "decoding" means using an error-correction algorithm to recover the original codeword.

We propose in this ticket a new structure, designed to handle word -> codeword and word -> message transformations.

We provide the following:

- An abstract class `Decoder`, for inheritances purposes. Every `Decoder` will inherit from this class. It contains:
    - a default constructor;
    - `decode_to_code` and `decode_to_message` default implementation;
    - several methods to get information on the instance of the class and
    - explanations on what to do to create a new decoder subclass. 

- An exception class `DecodingFailure`, for errors related to decoding algorithms. 

- Methods for decoding handling in `AbstractLinearCode` (see Design) 

## Design


What "Decoding" means depends on the algorithm used to find and correct the errors in a provided word. For instance, there are decoding algorithms able to locate and correct up to a certain amount of errors, and will fail if there is more errors than this bound. Others will return a list of codewords, which contain the original codeword. Some decoding algorithms are probabilistic, some are deterministic.

To describe the variety of behaviours, we introduce a list of "types", called `_decoder_type` which is a set of keywords describing the semantics of the decoding algorithm represented by the class.

Decodig usually recovers codewords close to the provided words. Some decoding algorithms, however, naturally decode directly to the message from which the codeword was obtained. This is e.g. the case with the Berlekamp-Welch or the Guruswami-Sudan algorithms. Since both uses are natural and in common use in theory and practice, we provide two different methods: decode_to_code and decode_to_message. The former corrects the errors and return an element from the code, while the latter corrects the errors and returns an element from a message space. Thanks to a default implementation, reimplmenting both is not needed. One only needs to override one of these two methods in a Decoder class, and the default implementation will be used to perform the other one.

As is discussed in #18376, a code can have many message spaces, and the map between a message space and the code is given by an Encoder. The `decode_to_message` will pertain to a certain such `Encoder`, so we introduce the string field `_connected_encoder_name` to point to this encoder. A user can acquire the actual `Encoder` object by calling `Decoder.connected_encoder`.

Furthermore, we propose here the exact same structure of registration for decoders as the one we introduced in #18376, and the same handling of it on the level of codes: each code will have a `default_decoder`, so if one does not want to be bothered by multiple decoding algorithms when he just wants to decode a word `y` for his code `C`, all he has to do is to write `C.decode_to_code(y)`, and the default decoder will be used to correct the errors in `y`.

With this structure, we are able to represent different decoding algorithms for each code, even if they have different behaviour. We also have a versatile structure which allows specific experimentation on chosen decoding algorithms alongside with generic decodings in which the algorithm does not matter.


## Notes

This ticket relies on the encoding structure proposed on trac #18376, as every decoder has to be linked with an encoder. 

The original decoding algorithms, which were in decoder.py are now in two different `Decoder` objects in `linear_code.py`. I removed the guava one as the call to guava's decoding algorithm returned a guava error.

CC:  @johanrosenkilde jpflori @videlec @defeo @ClementPernet

Branch/Commit: cf5ac32123eaff98d9620f6ce21afb9887a3c758

Reviewer: Cl√©ment Pernet

Author: David Lucas

Dependencies: #18376

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/18813





---

archive/issue_comments_268888.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -31,9 +31,11 @@\n With this structure, we are able to represent different decoding algorithms for each code, even if they have different behaviour. We also have a versatile structure which allows specific experimentation on chosen decoding algorithms alongside with generic decodings in which the algorithm does not matter.\n \n \n-## Note\n+## Notes\n \n-This ticket relies on the encoding structure proposed on trac #18376, as every decoder has to be linked with an encoder.\n+This ticket relies on the encoding structure proposed on trac #18376, as every decoder has to be linked with an encoder. \n+\n+The original decoding algorithms, which were in decoder.py are now in two different `Decoder` objects in `linear_code.py`. I removed the guava one as the call to guava's decoding algorithm returned a guava error.\n \n Comment: 1\n \n```\n",
    "created_at": "2015-06-29T12:26:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268888",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

Description changed:
```diff
--- 
+++ 
@@ -31,9 +31,11 @@
 With this structure, we are able to represent different decoding algorithms for each code, even if they have different behaviour. We also have a versatile structure which allows specific experimentation on chosen decoding algorithms alongside with generic decodings in which the algorithm does not matter.
 
 
-## Note
+## Notes
 
-This ticket relies on the encoding structure proposed on trac #18376, as every decoder has to be linked with an encoder.
+This ticket relies on the encoding structure proposed on trac #18376, as every decoder has to be linked with an encoder. 
+
+The original decoding algorithms, which were in decoder.py are now in two different `Decoder` objects in `linear_code.py`. I removed the guava one as the call to guava's decoding algorithm returned a guava error.
 
 Comment: 1
 
```




---

archive/issue_comments_268889.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-06-29T12:33:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268889",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_268890.json:
```json
{
    "body": "<a id='comment:3'></a>New commits:",
    "created_at": "2015-06-29T12:33:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268890",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:3'></a>New commits:



---

archive/issue_comments_268891.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,40 @@\n+For now, linear codes don't have a proper structure for decoding, where \"decoding\" means using an error-correction algorithm to recover the original codeword.\n \n+We propose in this ticket a new structure, designed to handle word -> codeword and word -> message transformations.\n+\n+We provide the following:\n+\n+- An abstract class `Decoder`, for inheritances purposes. Every `Decoder` will inherit from this class. It contains:\n+    - a default constructor;\n+    - `decode_to_code` and `decode_to_message` default implementation;\n+    - several methods to get information on the instance of the class and\n+    - explanations on what to do to create a new decoder subclass. \n+\n+- An exception class `DecodingFailure`, for errors related to decoding algorithms. \n+\n+- Methods for decoding handling in `AbstractLinearCode` (see Design) \n+\n+## Design\n+\n+\n+What \"Decoding\" means depends on the algorithm used to find and correct the errors in a provided word. For instance, there are decoding algorithms able to locate and correct up to a certain amount of errors, and will fail if there is more errors than this bound. Others will return a list of codewords, which contain the original codeword. Some decoding algorithms are probabilistic, some are deterministic.\n+\n+To describe the variety of behaviours, we introduce a list of \"types\", called `_decoder_type` which is a set of keywords describing the semantics of the decoding algorithm represented by the class.\n+\n+Decodig usually recovers codewords close to the provided words. Some decoding algorithms, however, naturally decode directly to the message from which the codeword was obtained. This is e.g. the case with the Berlekamp-Welch or the Guruswami-Sudan algorithms. Since both uses are natural and in common use in theory and practice, we provide two different methods: decode_to_code and decode_to_message. The former corrects the errors and return an element from the code, while the latter corrects the errors and returns an element from a message space. Thanks to a default implementation, reimplmenting both is not needed. One only needs to override one of these two methods in a Decoder class, and the default implementation will be used to perform the other one.\n+\n+As is discussed in #18376, a code can have many message spaces, and the map between a message space and the code is given by an Encoder. The `decode_to_message` will pertain to a certain such `Encoder`, so we introduce the string field `_connected_encoder_name` to point to this encoder. A user can acquire the actual `Encoder` object by calling `Decoder.connected_encoder`.\n+\n+Furthermore, we propose here the exact same structure of registration for decoders as the one we introduced in #18376, and the same handling of it on the level of codes: each code will have a `default_decoder`, so if one does not want to be bothered by multiple decoding algorithms when he just wants to decode a word `y` for his code `C`, all he has to do is to write `C.decode_to_code(y)`, and the default decoder will be used to correct the errors in `y`.\n+\n+With this structure, we are able to represent different decoding algorithms for each code, even if they have different behaviour. We also have a versatile structure which allows specific experimentation on chosen decoding algorithms alongside with generic decodings in which the algorithm does not matter.\n+\n+\n+## Notes\n+\n+This ticket relies on the encoding structure proposed on trac #18376, as every decoder has to be linked with an encoder. \n+\n+The original decoding algorithms, which were in decoder.py are now in two different `Decoder` objects in `linear_code.py`. I removed the guava one as the call to guava's decoding algorithm returned a guava error.\n \n Comment: 1\n \n```\n",
    "created_at": "2015-06-29T19:21:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268891",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,40 @@
+For now, linear codes don't have a proper structure for decoding, where "decoding" means using an error-correction algorithm to recover the original codeword.
 
+We propose in this ticket a new structure, designed to handle word -> codeword and word -> message transformations.
+
+We provide the following:
+
+- An abstract class `Decoder`, for inheritances purposes. Every `Decoder` will inherit from this class. It contains:
+    - a default constructor;
+    - `decode_to_code` and `decode_to_message` default implementation;
+    - several methods to get information on the instance of the class and
+    - explanations on what to do to create a new decoder subclass. 
+
+- An exception class `DecodingFailure`, for errors related to decoding algorithms. 
+
+- Methods for decoding handling in `AbstractLinearCode` (see Design) 
+
+## Design
+
+
+What "Decoding" means depends on the algorithm used to find and correct the errors in a provided word. For instance, there are decoding algorithms able to locate and correct up to a certain amount of errors, and will fail if there is more errors than this bound. Others will return a list of codewords, which contain the original codeword. Some decoding algorithms are probabilistic, some are deterministic.
+
+To describe the variety of behaviours, we introduce a list of "types", called `_decoder_type` which is a set of keywords describing the semantics of the decoding algorithm represented by the class.
+
+Decodig usually recovers codewords close to the provided words. Some decoding algorithms, however, naturally decode directly to the message from which the codeword was obtained. This is e.g. the case with the Berlekamp-Welch or the Guruswami-Sudan algorithms. Since both uses are natural and in common use in theory and practice, we provide two different methods: decode_to_code and decode_to_message. The former corrects the errors and return an element from the code, while the latter corrects the errors and returns an element from a message space. Thanks to a default implementation, reimplmenting both is not needed. One only needs to override one of these two methods in a Decoder class, and the default implementation will be used to perform the other one.
+
+As is discussed in #18376, a code can have many message spaces, and the map between a message space and the code is given by an Encoder. The `decode_to_message` will pertain to a certain such `Encoder`, so we introduce the string field `_connected_encoder_name` to point to this encoder. A user can acquire the actual `Encoder` object by calling `Decoder.connected_encoder`.
+
+Furthermore, we propose here the exact same structure of registration for decoders as the one we introduced in #18376, and the same handling of it on the level of codes: each code will have a `default_decoder`, so if one does not want to be bothered by multiple decoding algorithms when he just wants to decode a word `y` for his code `C`, all he has to do is to write `C.decode_to_code(y)`, and the default decoder will be used to correct the errors in `y`.
+
+With this structure, we are able to represent different decoding algorithms for each code, even if they have different behaviour. We also have a versatile structure which allows specific experimentation on chosen decoding algorithms alongside with generic decodings in which the algorithm does not matter.
+
+
+## Notes
+
+This ticket relies on the encoding structure proposed on trac #18376, as every decoder has to be linked with an encoder. 
+
+The original decoding algorithms, which were in decoder.py are now in two different `Decoder` objects in `linear_code.py`. I removed the guava one as the call to guava's decoding algorithm returned a guava error.
 
 Comment: 1
 
```




---

archive/issue_comments_268892.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-02T08:10:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268892",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_052603.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/dlucas",
    "created_at": "2015-09-02T08:11:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "milestone": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18813#event-52603"
}
```



---

archive/issue_comments_268893.json:
```json
{
    "body": "<a id='comment:7'></a>I modified this tickets accordingly with reviewer's remarks in #18376, as these two are quite symmetrical. It's still ready for review.",
    "created_at": "2015-09-09T14:58:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268893",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:7'></a>I modified this tickets accordingly with reviewer's remarks in #18376, as these two are quite symmetrical. It's still ready for review.



---

archive/issue_comments_268894.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-10-16T08:44:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268894",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_268895.json:
```json
{
    "body": "<a id='comment:10'></a>I merged with latest beta and resolved conflicts.\nI also updated some things accordingly with what was said in #18376, fixed a typo in encoder and added forgotten GPL licence blocks in `encoders_catalog` and `decoders_catalog`.\n\nStill pending for review.",
    "created_at": "2015-10-16T08:47:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268895",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:10'></a>I merged with latest beta and resolved conflicts.
I also updated some things accordingly with what was said in #18376, fixed a typo in encoder and added forgotten GPL licence blocks in `encoders_catalog` and `decoders_catalog`.

Still pending for review.



---

archive/issue_comments_268896.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-10-23T08:22:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268896",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_268897.json:
```json
{
    "body": "<a id='comment:12'></a>I fixed a few things patchbot was complaining about. It'll probably continue to complain on coverage but I don't see the point of adding doctests on a deprecated function so if the reviewer agrees I'm going to ignore this warning. \nThis is still pending for review.",
    "created_at": "2015-10-23T08:24:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268897",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:12'></a>I fixed a few things patchbot was complaining about. It'll probably continue to complain on coverage but I don't see the point of adding doctests on a deprecated function so if the reviewer agrees I'm going to ignore this warning. 
This is still pending for review.



---

archive/issue_events_052604.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/dlucas",
    "created_at": "2015-10-23T08:24:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "milestone": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18813#event-52604"
}
```



---

archive/issue_events_052605.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/dlucas",
    "created_at": "2015-10-23T08:24:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "milestone": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18813#event-52605"
}
```



---

archive/issue_comments_268898.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-08T23:58:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268898",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_268899.json:
```json
{
    "body": "<a id='comment:14'></a>I updated to latest beta and fixed the conflicts that arose after that merge. It's ready for review again.",
    "created_at": "2015-11-08T23:59:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268899",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:14'></a>I updated to latest beta and fixed the conflicts that arose after that merge. It's ready for review again.



---

archive/issue_comments_268900.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-09T15:35:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268900",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_268901.json:
```json
{
    "body": "<a id='comment:16'></a>`linear_code` module is now lazily imported in `sd_codes`, so `decoder` is no longer available in global namespace.",
    "created_at": "2015-11-09T15:37:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268901",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:16'></a>`linear_code` module is now lazily imported in `sd_codes`, so `decoder` is no longer available in global namespace.



---

archive/issue_comments_268902.json:
```json
{
    "body": "<a id='comment:17'></a>The semantic of the field: `input_space` of a decoder is unclear.\nIt seems to me that it should corresponds to the ambient space of the associated code, and it is implemented this way line 246 of decoder.py or line 4028 of linear_code.py. \nBut line 75 of decoder.py, it is set to `code.base_field()`.\n\nAlso a clear definition of what this field means should be added somewhere.",
    "created_at": "2015-11-24T12:59:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268902",
    "user": "https://github.com/ClementPernet"
}
```

<a id='comment:17'></a>The semantic of the field: `input_space` of a decoder is unclear.
It seems to me that it should corresponds to the ambient space of the associated code, and it is implemented this way line 246 of decoder.py or line 4028 of linear_code.py. 
But line 75 of decoder.py, it is set to `code.base_field()`.

Also a clear definition of what this field means should be added somewhere.



---

archive/issue_comments_268903.json:
```json
{
    "body": "<a id='comment:18'></a>In the current state, the output of the hash function does not depend on the code, but only on its dimensions. (changing some coeffcients in the generating matrix G line 107 of decoder.py does not change the hash of the linear code and therefore does not change the hash of the decoder neither.\n\nThis remark is just to point out this inconsistency: either add a __hash__ in encoder and in linear_code or remove the hash here.",
    "created_at": "2015-11-24T13:18:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268903",
    "user": "https://github.com/ClementPernet"
}
```

<a id='comment:18'></a>In the current state, the output of the hash function does not depend on the code, but only on its dimensions. (changing some coeffcients in the generating matrix G line 107 of decoder.py does not change the hash of the linear code and therefore does not change the hash of the decoder neither.

This remark is just to point out this inconsistency: either add a __hash__ in encoder and in linear_code or remove the hash here.



---

archive/issue_comments_268904.json:
```json
{
    "body": "<a id='comment:19'></a>line 183 of decoder.py: `decode_to_message` decodes `r` to the message space of self's **connected_encoder** (not **code**)",
    "created_at": "2015-11-24T16:08:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268904",
    "user": "https://github.com/ClementPernet"
}
```

<a id='comment:19'></a>line 183 of decoder.py: `decode_to_message` decodes `r` to the message space of self's **connected_encoder** (not **code**)



---

archive/issue_comments_268905.json:
```json
{
    "body": "<a id='comment:20'></a>Overriding method `decoding_radius` is optional, but documentation (line 41 of decoder.py) says it is required.",
    "created_at": "2015-11-25T09:32:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268905",
    "user": "https://github.com/ClementPernet"
}
```

<a id='comment:20'></a>Overriding method `decoding_radius` is optional, but documentation (line 41 of decoder.py) says it is required.



---

archive/issue_comments_268906.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-25T10:33:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268906",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_268907.json:
```json
{
    "body": "<a id='comment:22'></a>I added a clear definition of `input_space` in the constructor of `Decoder` in `decoder.py`, fixed the errors you noticed and added a hash function to `LinearCode`, with an extra doctest which check if the bug you found is fixed (see ll 3908-3911 in `linear_code.py`).",
    "created_at": "2015-11-25T10:36:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268907",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:22'></a>I added a clear definition of `input_space` in the constructor of `Decoder` in `decoder.py`, fixed the errors you noticed and added a hash function to `LinearCode`, with an extra doctest which check if the bug you found is fixed (see ll 3908-3911 in `linear_code.py`).



---

archive/issue_comments_268908.json:
```json
{
    "body": "<a id='comment:23'></a>linear_code.py : lines 878 and 883 are redundant.",
    "created_at": "2015-11-25T13:36:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268908",
    "user": "https://github.com/ClementPernet"
}
```

<a id='comment:23'></a>linear_code.py : lines 878 and 883 are redundant.



---

archive/issue_comments_268909.json:
```json
{
    "body": "<a id='comment:24'></a>minor spelling corrections in linear_code.py\n- filling -> filling in 4 occurences \n- an -> a lines 829 and 824\n- lines 1613 and 1639: remove \"test\"",
    "created_at": "2015-11-25T14:12:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268909",
    "user": "https://github.com/ClementPernet"
}
```

<a id='comment:24'></a>minor spelling corrections in linear_code.py
- filling -> filling in 4 occurences 
- an -> a lines 829 and 824
- lines 1613 and 1639: remove "test"



---

archive/issue_comments_268910.json:
```json
{
    "body": "<a id='comment:25'></a>line 3904 of linear_code.py: differs -> differ\n\nIn the same __hash__ method: the XOR of hash(Str) twice is equivalent to applying the identity. One of them should be removed or replaced by hash(G) maybe. not sure to understand the motivation behind doing this XOR. hash((G,Str)) should do the job.",
    "created_at": "2015-11-25T14:32:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268910",
    "user": "https://github.com/ClementPernet"
}
```

<a id='comment:25'></a>line 3904 of linear_code.py: differs -> differ

In the same __hash__ method: the XOR of hash(Str) twice is equivalent to applying the identity. One of them should be removed or replaced by hash(G) maybe. not sure to understand the motivation behind doing this XOR. hash((G,Str)) should do the job.



---

archive/issue_comments_268911.json:
```json
{
    "body": "<a id='comment:26'></a>\"XORing\" hash(Str) twice is a mistake, it should (and will) be `[...] ^ hash(G) ^ hash(Str)`.\n\nRegarding the motivation behing the xor, I did as advised in [Python doc](https://docs.python.org/2.7/reference/datamodel.html#object.__hash__) crossed with this useful (imho) question on [stack overflow](http://stackoverflow.com/questions/2909106/python-whats-a-correct-and-good-way-to-implement-hash)\n\n>it is advised to somehow mix together (e.g. using exclusive or) the hash values for the components of the object that also play a part in comparison of objects.",
    "created_at": "2015-11-25T14:46:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268911",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:26'></a>"XORing" hash(Str) twice is a mistake, it should (and will) be `[...] ^ hash(G) ^ hash(Str)`.

Regarding the motivation behing the xor, I did as advised in [Python doc](https://docs.python.org/2.7/reference/datamodel.html#object.__hash__) crossed with this useful (imho) question on [stack overflow](http://stackoverflow.com/questions/2909106/python-whats-a-correct-and-good-way-to-implement-hash)

>it is advised to somehow mix together (e.g. using exclusive or) the hash values for the components of the object that also play a part in comparison of objects.



---

archive/issue_comments_268912.json:
```json
{
    "body": "<a id='comment:27'></a>I'm confused by the syndrome method.\nIt really looks to me as a \"NearestNeighbor\" decoding, not as syndrome decoding.\n\nSyndrome decoding means (following Roth's Book)\n1/ compute the syndrome s=Hy  where H is the parity check matrix\n2/ Among the coset of vectors sharing the same syndrome, return the coset leader, with minimal Hamming weight\n\nI don't see any parity check matrix here, and the output is simply the leader of the coset of **all** r+C vectors.\n\n+ fix the docstring \"Returns the all ...\"",
    "created_at": "2015-11-25T15:23:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268912",
    "user": "https://github.com/ClementPernet"
}
```

<a id='comment:27'></a>I'm confused by the syndrome method.
It really looks to me as a "NearestNeighbor" decoding, not as syndrome decoding.

Syndrome decoding means (following Roth's Book)
1/ compute the syndrome s=Hy  where H is the parity check matrix
2/ Among the coset of vectors sharing the same syndrome, return the coset leader, with minimal Hamming weight

I don't see any parity check matrix here, and the output is simply the leader of the coset of **all** r+C vectors.

+ fix the docstring "Returns the all ..."



---

archive/issue_comments_268913.json:
```json
{
    "body": "<a id='comment:28'></a>I definitely agree. But these methods were written before me, and all I did here was to make them fit in the new structure.\nWriting a true (and efficient) syndrome decoder is of course on the map, as a short term goal, but I think it does not belong to this ticket.",
    "created_at": "2015-11-25T15:28:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268913",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:28'></a>I definitely agree. But these methods were written before me, and all I did here was to make them fit in the new structure.
Writing a true (and efficient) syndrome decoder is of course on the map, as a short term goal, but I think it does not belong to this ticket.



---

archive/issue_comments_268914.json:
```json
{
    "body": "<a id='comment:29'></a>decoder.py line 184: connectoed -> connected",
    "created_at": "2015-11-25T16:01:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268914",
    "user": "https://github.com/ClementPernet"
}
```

<a id='comment:29'></a>decoder.py line 184: connectoed -> connected



---

archive/issue_comments_268915.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-25T16:01:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268915",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_268916.json:
```json
{
    "body": "<a id='comment:31'></a>Last push fixes all your comments but the last one. I wait for the (potential) other remarks before writing another patch :)",
    "created_at": "2015-11-25T16:03:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268916",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:31'></a>Last push fixes all your comments but the last one. I wait for the (potential) other remarks before writing another patch :)



---

archive/issue_comments_268917.json:
```json
{
    "body": "<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-25T16:05:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268917",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_268918.json:
```json
{
    "body": "<a id='comment:33'></a>As you just told me it was ok, here's the fix for the typo you noticed.",
    "created_at": "2015-11-25T16:05:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268918",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:33'></a>As you just told me it was ok, here's the fix for the typo you noticed.



---

archive/issue_comments_268919.json:
```json
{
    "body": "<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-25T16:09:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268919",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_268920.json:
```json
{
    "body": "<a id='comment:35'></a>All my remarks have been addressed.\nI'm giving this ticket a positive review.",
    "created_at": "2015-11-25T16:12:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268920",
    "user": "https://github.com/ClementPernet"
}
```

<a id='comment:35'></a>All my remarks have been addressed.
I'm giving this ticket a positive review.



---

archive/issue_comments_268921.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-11-25T16:12:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268921",
    "user": "https://github.com/ClementPernet"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_268922.json:
```json
{
    "body": "<a id='comment:38'></a>Merge conflict, possibly with #16080",
    "created_at": "2015-11-25T20:18:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268922",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:38'></a>Merge conflict, possibly with #16080



---

archive/issue_comments_268923.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-11-25T20:18:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268923",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_268924.json:
```json
{
    "body": "<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-26T13:29:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268924",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_268925.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-11-26T13:30:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268925",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_268926.json:
```json
{
    "body": "<a id='comment:40'></a>I merged in #16080 and fixed the conflict in `linear_code.py`.\nThis should do the trick!",
    "created_at": "2015-11-26T13:30:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268926",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:40'></a>I merged in #16080 and fixed the conflict in `linear_code.py`.
This should do the trick!



---

archive/issue_comments_268927.json:
```json
{
    "body": "<a id='comment:41'></a>This merge works for me.\nPositive review.",
    "created_at": "2015-11-26T14:27:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268927",
    "user": "https://github.com/ClementPernet"
}
```

<a id='comment:41'></a>This merge works for me.
Positive review.



---

archive/issue_comments_268928.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-11-26T14:27:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268928",
    "user": "https://github.com/ClementPernet"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_268929.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-11-26T18:23:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18813#issuecomment-268929",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_052606.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-11-26T18:23:50Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18813",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18813#event-52606"
}
```
