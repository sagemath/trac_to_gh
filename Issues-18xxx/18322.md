# Issue 18322: _cmp should try _richcmp_ if _cmp_ failed

archive/issues_018085.json:
```json
{
    "body": "With the current comparison implementation, defining `__cmp__` in a Cython class can actually *break* `cmp()` if `_cmp_` raises `NotImplementedError`. This is because defining `__cmp__` causes Python to use `__cmp__` and *only* `__cmp__`. Instead, `__cmp__` (so really `_cmp` in Cython) should itself try `_richcmp_` if `_cmp_` didn't work.\n\nTo avoid an infinite loop, it's important that only `_cmp` calls `_richcmp_`, we should not change `_cmp_` here.\n\n**CC:**  @videlec\n\n**Branch/Commit:** [ac9ca1c83737253b380a79cde33b4908a51d0ead](https://github.com/sagemath/sagetrac-mirror/commit/ac9ca1c83737253b380a79cde33b4908a51d0ead)\n\n**Reviewer:** Vincent Delecroix\n\n**Author:** Jeroen Demeyer\n\nIssue created by migration from https://trac.sagemath.org/ticket/18322\n\n",
    "closed_at": "2015-05-09T23:03:11Z",
    "created_at": "2015-04-28T16:09:10Z",
    "labels": [
        "component: coercion",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.7",
    "title": "_cmp should try _richcmp_ if _cmp_ failed",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18322",
    "user": "https://github.com/jdemeyer"
}
```
With the current comparison implementation, defining `__cmp__` in a Cython class can actually *break* `cmp()` if `_cmp_` raises `NotImplementedError`. This is because defining `__cmp__` causes Python to use `__cmp__` and *only* `__cmp__`. Instead, `__cmp__` (so really `_cmp` in Cython) should itself try `_richcmp_` if `_cmp_` didn't work.

To avoid an infinite loop, it's important that only `_cmp` calls `_richcmp_`, we should not change `_cmp_` here.

**CC:**  @videlec

**Branch/Commit:** [ac9ca1c83737253b380a79cde33b4908a51d0ead](https://github.com/sagemath/sagetrac-mirror/commit/ac9ca1c83737253b380a79cde33b4908a51d0ead)

**Reviewer:** Vincent Delecroix

**Author:** Jeroen Demeyer

Issue created by migration from https://trac.sagemath.org/ticket/18322





---

archive/issue_comments_304827.json:
```json
{
    "body": "**Branch:** [u/jdemeyer/_cmp_should_try__richcmp__if__cmp__failed](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/_cmp_should_try__richcmp__if__cmp__failed)",
    "created_at": "2015-04-29T09:15:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18322#issuecomment-304827",
    "user": "https://github.com/jdemeyer"
}
```

**Branch:** [u/jdemeyer/_cmp_should_try__richcmp__if__cmp__failed](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/_cmp_should_try__richcmp__if__cmp__failed)



---

archive/issue_comments_304828.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2015-04-29T09:16:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18322#issuecomment-304828",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_304829.json:
```json
{
    "body": "**Commit:** [c1d1881c5034a6712b2efc2c735788494aefbeeb](https://github.com/sagemath/sagetrac-mirror/commit/c1d1881c5034a6712b2efc2c735788494aefbeeb)",
    "created_at": "2015-04-29T09:16:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18322#issuecomment-304829",
    "user": "https://github.com/jdemeyer"
}
```

**Commit:** [c1d1881c5034a6712b2efc2c735788494aefbeeb](https://github.com/sagemath/sagetrac-mirror/commit/c1d1881c5034a6712b2efc2c735788494aefbeeb)



---

archive/issue_comments_304830.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ad339bf0c8ffe75d23ddaa6d896121b8c96636d\">1ad339b</a></td><td><code>Implement _rich_to_bool as inline function instead of member function</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/17bd067153ad40ced061147390687f514a7f7cba\">17bd067</a></td><td><code>Merge tag '6.7.beta2' into t/17890/ticket/17890</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/313a400146b0fb19d80c31117d44ce735041d4ec\">313a400</a></td><td><code>Optimize rich_to_bool_sgn</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/629f6a5618ec6e5f616bf89e4886ea4dd92ae60e\">629f6a5</a></td><td><code>Improve comparisons for permutation groups</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0d1e049f807a1c34b00cf0e58ee65cc7734d1ad1\">0d1e049</a></td><td><code>Improve _richcmp and documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/39273f1aacfdd307d20b729ae732e349438a8422\">39273f1</a></td><td><code>Fix doctest formatting</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/04570b3dfd194fea8c2437c8717c3dfb8704b4af\">04570b3</a></td><td><code>Fix bad doctest in etaproducts</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3976f2cc4ec59c9f978d9d02c7f697c81025c4ef\">3976f2c</a></td><td><code>Add pointers for special uses of __richcmp__</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1de420c4ae43a5eb89824d21318bf805a01147c7\">1de420c</a></td><td><code>Merge commit '3976f2cc4ec59c9f978d9d02c7f697c81025c4ef' into t/18322/_cmp_should_try__richcmp__if__cmp__failed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c1d1881c5034a6712b2efc2c735788494aefbeeb\">c1d1881</a></td><td><code>_cmp should try _richcmp_ if _cmp_ failed</code></td></tr></table>\n",
    "created_at": "2015-04-29T09:16:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18322#issuecomment-304830",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>
**Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ad339bf0c8ffe75d23ddaa6d896121b8c96636d">1ad339b</a></td><td><code>Implement _rich_to_bool as inline function instead of member function</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/17bd067153ad40ced061147390687f514a7f7cba">17bd067</a></td><td><code>Merge tag '6.7.beta2' into t/17890/ticket/17890</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/313a400146b0fb19d80c31117d44ce735041d4ec">313a400</a></td><td><code>Optimize rich_to_bool_sgn</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/629f6a5618ec6e5f616bf89e4886ea4dd92ae60e">629f6a5</a></td><td><code>Improve comparisons for permutation groups</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0d1e049f807a1c34b00cf0e58ee65cc7734d1ad1">0d1e049</a></td><td><code>Improve _richcmp and documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/39273f1aacfdd307d20b729ae732e349438a8422">39273f1</a></td><td><code>Fix doctest formatting</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/04570b3dfd194fea8c2437c8717c3dfb8704b4af">04570b3</a></td><td><code>Fix bad doctest in etaproducts</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3976f2cc4ec59c9f978d9d02c7f697c81025c4ef">3976f2c</a></td><td><code>Add pointers for special uses of __richcmp__</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1de420c4ae43a5eb89824d21318bf805a01147c7">1de420c</a></td><td><code>Merge commit '3976f2cc4ec59c9f978d9d02c7f697c81025c4ef' into t/18322/_cmp_should_try__richcmp__if__cmp__failed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c1d1881c5034a6712b2efc2c735788494aefbeeb">c1d1881</a></td><td><code>_cmp should try _richcmp_ if _cmp_ failed</code></td></tr></table>




---

archive/issue_comments_304831.json:
```json
{
    "body": "**Changing commit** from \"[c1d1881c5034a6712b2efc2c735788494aefbeeb](https://github.com/sagemath/sagetrac-mirror/commit/c1d1881c5034a6712b2efc2c735788494aefbeeb)\" to \"[c70bd3973cc30346d965f3cee6db2648d081be80](https://github.com/sagemath/sagetrac-mirror/commit/c70bd3973cc30346d965f3cee6db2648d081be80)\".",
    "created_at": "2015-05-06T07:40:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18322#issuecomment-304831",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c1d1881c5034a6712b2efc2c735788494aefbeeb](https://github.com/sagemath/sagetrac-mirror/commit/c1d1881c5034a6712b2efc2c735788494aefbeeb)" to "[c70bd3973cc30346d965f3cee6db2648d081be80](https://github.com/sagemath/sagetrac-mirror/commit/c70bd3973cc30346d965f3cee6db2648d081be80)".



---

archive/issue_comments_304832.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c70bd3973cc30346d965f3cee6db2648d081be80\">c70bd39</a></td><td><code>_cmp should try _richcmp_ if _cmp_ failed</code></td></tr></table>\n",
    "created_at": "2015-05-06T07:40:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18322#issuecomment-304832",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c70bd3973cc30346d965f3cee6db2648d081be80">c70bd39</a></td><td><code>_cmp should try _richcmp_ if _cmp_ failed</code></td></tr></table>




---

archive/issue_comments_304833.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/621bd1020cadde224d361c0711ddb2ceba2378ed\">621bd10</a></td><td><code>_cmp should try _richcmp_ if _cmp_ failed</code></td></tr></table>\n",
    "created_at": "2015-05-06T07:41:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18322#issuecomment-304833",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/621bd1020cadde224d361c0711ddb2ceba2378ed">621bd10</a></td><td><code>_cmp should try _richcmp_ if _cmp_ failed</code></td></tr></table>




---

archive/issue_comments_304834.json:
```json
{
    "body": "**Changing commit** from \"[c70bd3973cc30346d965f3cee6db2648d081be80](https://github.com/sagemath/sagetrac-mirror/commit/c70bd3973cc30346d965f3cee6db2648d081be80)\" to \"[621bd1020cadde224d361c0711ddb2ceba2378ed](https://github.com/sagemath/sagetrac-mirror/commit/621bd1020cadde224d361c0711ddb2ceba2378ed)\".",
    "created_at": "2015-05-06T07:41:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18322#issuecomment-304834",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c70bd3973cc30346d965f3cee6db2648d081be80](https://github.com/sagemath/sagetrac-mirror/commit/c70bd3973cc30346d965f3cee6db2648d081be80)" to "[621bd1020cadde224d361c0711ddb2ceba2378ed](https://github.com/sagemath/sagetrac-mirror/commit/621bd1020cadde224d361c0711ddb2ceba2378ed)".



---

archive/issue_comments_304835.json:
```json
{
    "body": "**Changing dependencies** from \"#17890\" to \"\".",
    "created_at": "2015-05-06T07:42:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18322#issuecomment-304835",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#17890" to "".



---

archive/issue_comments_304836.json:
```json
{
    "body": "**Changing commit** from \"[621bd1020cadde224d361c0711ddb2ceba2378ed](https://github.com/sagemath/sagetrac-mirror/commit/621bd1020cadde224d361c0711ddb2ceba2378ed)\" to \"[cb07254a1a8ec6b862a42492ddfecd0cb238d4e0](https://github.com/sagemath/sagetrac-mirror/commit/cb07254a1a8ec6b862a42492ddfecd0cb238d4e0)\".",
    "created_at": "2015-05-06T07:52:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18322#issuecomment-304836",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[621bd1020cadde224d361c0711ddb2ceba2378ed](https://github.com/sagemath/sagetrac-mirror/commit/621bd1020cadde224d361c0711ddb2ceba2378ed)" to "[cb07254a1a8ec6b862a42492ddfecd0cb238d4e0](https://github.com/sagemath/sagetrac-mirror/commit/cb07254a1a8ec6b862a42492ddfecd0cb238d4e0)".



---

archive/issue_comments_304837.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cb07254a1a8ec6b862a42492ddfecd0cb238d4e0\">cb07254</a></td><td><code>_cmp should try _richcmp_ if _cmp_ failed</code></td></tr></table>\n",
    "created_at": "2015-05-06T07:52:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18322#issuecomment-304837",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cb07254a1a8ec6b862a42492ddfecd0cb238d4e0">cb07254</a></td><td><code>_cmp should try _richcmp_ if _cmp_ failed</code></td></tr></table>




---

archive/issue_comments_304838.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bb98fd07ee04b18a4ec329aeb2bf061dab4f7d6d\">bb98fd0</a></td><td><code>_cmp should try _richcmp_ if _cmp_ failed</code></td></tr></table>\n",
    "created_at": "2015-05-06T08:10:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18322#issuecomment-304838",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bb98fd07ee04b18a4ec329aeb2bf061dab4f7d6d">bb98fd0</a></td><td><code>_cmp should try _richcmp_ if _cmp_ failed</code></td></tr></table>




---

archive/issue_comments_304839.json:
```json
{
    "body": "**Changing commit** from \"[cb07254a1a8ec6b862a42492ddfecd0cb238d4e0](https://github.com/sagemath/sagetrac-mirror/commit/cb07254a1a8ec6b862a42492ddfecd0cb238d4e0)\" to \"[bb98fd07ee04b18a4ec329aeb2bf061dab4f7d6d](https://github.com/sagemath/sagetrac-mirror/commit/bb98fd07ee04b18a4ec329aeb2bf061dab4f7d6d)\".",
    "created_at": "2015-05-06T08:10:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18322#issuecomment-304839",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[cb07254a1a8ec6b862a42492ddfecd0cb238d4e0](https://github.com/sagemath/sagetrac-mirror/commit/cb07254a1a8ec6b862a42492ddfecd0cb238d4e0)" to "[bb98fd07ee04b18a4ec329aeb2bf061dab4f7d6d](https://github.com/sagemath/sagetrac-mirror/commit/bb98fd07ee04b18a4ec329aeb2bf061dab4f7d6d)".



---

archive/issue_comments_304840.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2015-05-08T09:25:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18322#issuecomment-304840",
    "user": "https://github.com/videlec"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_304841.json:
```json
{
    "body": "<a id='comment:8'></a>\n1. The code of `_cmp_` raises a `NotImplementedError` which has a custom error message which involves string formatting. As this error is catched in a critical part of the code (i.e. `_cmp`) I would either:\n   - remove the message `\"comparison not implemented for %r\"%type(left)`\n   - or use lazy strings\n\n   The second option looks better to me.\n\n2. It would be nice to update this comment:\n\n```\n    ####################################################################\n    # For a derived Cython class, you **must** put the __richcmp__\n    ...\n    # arguments have identical parents.\n    ####################################################################\n```\n  with something like: <code>implementing \\`_richcmp_\\` will automatically makes \\`cmp\\` works, see the implementation of Element._cmp</code>.\n\n3. Actually, the current implementation let met think that for elements we should:\n   - implement `_richcmp_` for more speed (e.g. `==` is cheap but `<` is not) or if `_cmp_` does not make sense (e.g. we want to test for equality but raise errors on `<`)\n   - implement `_cmp_` otherwise\n\n   Am I right?\n\nVincent",
    "created_at": "2015-05-08T09:25:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18322#issuecomment-304841",
    "user": "https://github.com/videlec"
}
```

<a id='comment:8'></a>
1. The code of `_cmp_` raises a `NotImplementedError` which has a custom error message which involves string formatting. As this error is catched in a critical part of the code (i.e. `_cmp`) I would either:
   - remove the message `"comparison not implemented for %r"%type(left)`
   - or use lazy strings

   The second option looks better to me.

2. It would be nice to update this comment:

```
    ####################################################################
    # For a derived Cython class, you **must** put the __richcmp__
    ...
    # arguments have identical parents.
    ####################################################################
```
  with something like: <code>implementing \`_richcmp_\` will automatically makes \`cmp\` works, see the implementation of Element._cmp</code>.

3. Actually, the current implementation let met think that for elements we should:
   - implement `_richcmp_` for more speed (e.g. `==` is cheap but `<` is not) or if `_cmp_` does not make sense (e.g. we want to test for equality but raise errors on `<`)
   - implement `_cmp_` otherwise

   Am I right?

Vincent



---

archive/issue_comments_304842.json:
```json
{
    "body": "**Changing commit** from \"[bb98fd07ee04b18a4ec329aeb2bf061dab4f7d6d](https://github.com/sagemath/sagetrac-mirror/commit/bb98fd07ee04b18a4ec329aeb2bf061dab4f7d6d)\" to \"[d826520e60f02169ff9b93e2e6c29eb662d1d14f](https://github.com/sagemath/sagetrac-mirror/commit/d826520e60f02169ff9b93e2e6c29eb662d1d14f)\".",
    "created_at": "2015-05-08T15:36:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18322#issuecomment-304842",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[bb98fd07ee04b18a4ec329aeb2bf061dab4f7d6d](https://github.com/sagemath/sagetrac-mirror/commit/bb98fd07ee04b18a4ec329aeb2bf061dab4f7d6d)" to "[d826520e60f02169ff9b93e2e6c29eb662d1d14f](https://github.com/sagemath/sagetrac-mirror/commit/d826520e60f02169ff9b93e2e6c29eb662d1d14f)".



---

archive/issue_comments_304843.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d826520e60f02169ff9b93e2e6c29eb662d1d14f\">d826520</a></td><td><code>Use LazyFormat for _cmp_ exception</code></td></tr></table>\n",
    "created_at": "2015-05-08T15:36:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18322#issuecomment-304843",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d826520e60f02169ff9b93e2e6c29eb662d1d14f">d826520</a></td><td><code>Use LazyFormat for _cmp_ exception</code></td></tr></table>




---

archive/issue_comments_304844.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [vdelecroix](#comment%3A8):\n> 3. Actually, the current implementation let met think that for elements we should:\n>    - implement `_richcmp_` for more speed (e.g. `==` is cheap but `<` is not) or if `_cmp_` does not make sense (e.g. we want to test for equality but raise errors on `<`)\n>    - implement `_cmp_` otherwise\n  \nI think so, yes.",
    "created_at": "2015-05-08T16:52:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18322#issuecomment-304844",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>
Replying to [vdelecroix](#comment%3A8):
> 3. Actually, the current implementation let met think that for elements we should:
>    - implement `_richcmp_` for more speed (e.g. `==` is cheap but `<` is not) or if `_cmp_` does not make sense (e.g. we want to test for equality but raise errors on `<`)
>    - implement `_cmp_` otherwise
  
I think so, yes.



---

archive/issue_comments_304845.json:
```json
{
    "body": "<a id='comment:11'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ac9ca1c83737253b380a79cde33b4908a51d0ead\">ac9ca1c</a></td><td><code>Update comment</code></td></tr></table>\n",
    "created_at": "2015-05-08T17:00:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18322#issuecomment-304845",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ac9ca1c83737253b380a79cde33b4908a51d0ead">ac9ca1c</a></td><td><code>Update comment</code></td></tr></table>




---

archive/issue_comments_304846.json:
```json
{
    "body": "**Changing commit** from \"[d826520e60f02169ff9b93e2e6c29eb662d1d14f](https://github.com/sagemath/sagetrac-mirror/commit/d826520e60f02169ff9b93e2e6c29eb662d1d14f)\" to \"[ac9ca1c83737253b380a79cde33b4908a51d0ead](https://github.com/sagemath/sagetrac-mirror/commit/ac9ca1c83737253b380a79cde33b4908a51d0ead)\".",
    "created_at": "2015-05-08T17:00:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18322#issuecomment-304846",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d826520e60f02169ff9b93e2e6c29eb662d1d14f](https://github.com/sagemath/sagetrac-mirror/commit/d826520e60f02169ff9b93e2e6c29eb662d1d14f)" to "[ac9ca1c83737253b380a79cde33b4908a51d0ead](https://github.com/sagemath/sagetrac-mirror/commit/ac9ca1c83737253b380a79cde33b4908a51d0ead)".



---

archive/issue_comments_304847.json:
```json
{
    "body": "**Reviewer:** Vincent Delecroix",
    "created_at": "2015-05-08T17:00:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18322#issuecomment-304847",
    "user": "https://github.com/jdemeyer"
}
```

**Reviewer:** Vincent Delecroix



---

archive/issue_comments_304848.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2015-05-08T17:00:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18322#issuecomment-304848",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_304849.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2015-05-08T21:38:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18322#issuecomment-304849",
    "user": "https://github.com/videlec"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_events_059057.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-05-09T23:03:11Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18322",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18322#event-59057"
}
```



---

archive/issue_comments_304850.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/_cmp_should_try__richcmp__if__cmp__failed](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/_cmp_should_try__richcmp__if__cmp__failed)\" to \"[ac9ca1c83737253b380a79cde33b4908a51d0ead](https://github.com/sagemath/sagetrac-mirror/commit/ac9ca1c83737253b380a79cde33b4908a51d0ead)\".",
    "created_at": "2015-05-09T23:03:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18322#issuecomment-304850",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/jdemeyer/_cmp_should_try__richcmp__if__cmp__failed](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/_cmp_should_try__richcmp__if__cmp__failed)" to "[ac9ca1c83737253b380a79cde33b4908a51d0ead](https://github.com/sagemath/sagetrac-mirror/commit/ac9ca1c83737253b380a79cde33b4908a51d0ead)".
