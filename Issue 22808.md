# Issue 22808: gsl does not pass self-tests on 32bit systems

archive/issues_022808.json:
```json
{
    "body": "CC:  chapoton tscrim\n\nSee the attached build log `gsl-2.1.p1.log` and the corresponding failing test suite `test-suite.log`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/23045\n\n",
    "created_at": "2017-05-21T20:59:34Z",
    "labels": [
        "packages: standard",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "gsl does not pass self-tests on 32bit systems",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22808",
    "user": "tmonteil"
}
```
CC:  chapoton tscrim

See the attached build log `gsl-2.1.p1.log` and the corresponding failing test suite `test-suite.log`.

Issue created by migration from https://trac.sagemath.org/ticket/23045





---

archive/issue_comments_318977.json:
```json
{
    "body": "Attachment [gsl-2.1.p1.log](tarball://root/attachments/some-uuid/ticket23045/gsl-2.1.p1.log) by tmonteil created at 2017-05-21 21:00:12",
    "created_at": "2017-05-21T21:00:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22808",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22808#issuecomment-318977",
    "user": "tmonteil"
}
```

Attachment [gsl-2.1.p1.log](tarball://root/attachments/some-uuid/ticket23045/gsl-2.1.p1.log) by tmonteil created at 2017-05-21 21:00:12



---

archive/issue_comments_318978.json:
```json
{
    "body": "Attachment [test-suite.log](tarball://root/attachments/some-uuid/ticket23045/test-suite.log) by tmonteil created at 2017-05-21 21:22:29\n\nNote that self-tests pass on x86_64.",
    "created_at": "2017-05-21T21:22:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22808",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22808#issuecomment-318978",
    "user": "tmonteil"
}
```

Attachment [test-suite.log](tarball://root/attachments/some-uuid/ticket23045/test-suite.log) by tmonteil created at 2017-05-21 21:22:29

Note that self-tests pass on x86_64.



---

archive/issue_comments_318979.json:
```json
{
    "body": "Not all self-tests work on all systems (sometimes for mondane reasons like network access). Not a blocker imho.",
    "created_at": "2017-05-24T19:15:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22808",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22808#issuecomment-318979",
    "user": "vbraun"
}
```

Not all self-tests work on all systems (sometimes for mondane reasons like network access). Not a blocker imho.



---

archive/issue_comments_318980.json:
```json
{
    "body": "Replying to [comment:2 vbraun]:\n> Not all self-tests work on all systems (sometimes for mondane reasons like network access). Not a blocker imho.\n\nIn such cases, i guess we should at least know (and collect somewhere), which errors are \"recurrent\" or \"unfixable\". We should run the self-tests more frequently, as finding broken self-tests also leads to  bugfixes that benefit to all of us, see e.g. #23056, #23057 which will be fixed soon. Apart from `python` which is known not to pass self-tests, i hope that all other will pass on 32bit system (which is still a supported arch).\n\nI agree that since i am doing a systematic check of all standard packages for the first time on 32bits (and will go to all optional when this will be done), there are many blockeres appearing in a short delay, and it might be unreasonable to wait for all of them. However, once they will be all fixed, we could become more strict when a new issue appears, and for this to happen smoothly, we should be sure that those tests are run on a more regular basis to avoid such an accumulation, e.g. by letting the patchbots to run them.",
    "created_at": "2017-05-25T08:40:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22808",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22808#issuecomment-318980",
    "user": "tmonteil"
}
```

Replying to [comment:2 vbraun]:
> Not all self-tests work on all systems (sometimes for mondane reasons like network access). Not a blocker imho.

In such cases, i guess we should at least know (and collect somewhere), which errors are "recurrent" or "unfixable". We should run the self-tests more frequently, as finding broken self-tests also leads to  bugfixes that benefit to all of us, see e.g. #23056, #23057 which will be fixed soon. Apart from `python` which is known not to pass self-tests, i hope that all other will pass on 32bit system (which is still a supported arch).

I agree that since i am doing a systematic check of all standard packages for the first time on 32bits (and will go to all optional when this will be done), there are many blockeres appearing in a short delay, and it might be unreasonable to wait for all of them. However, once they will be all fixed, we could become more strict when a new issue appears, and for this to happen smoothly, we should be sure that those tests are run on a more regular basis to avoid such an accumulation, e.g. by letting the patchbots to run them.



---

archive/issue_comments_318981.json:
```json
{
    "body": "Agree but not a blocker...",
    "created_at": "2017-06-11T09:46:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22808",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22808#issuecomment-318981",
    "user": "vbraun"
}
```

Agree but not a blocker...



---

archive/issue_comments_318982.json:
```json
{
    "body": "Changing priority from blocker to major.",
    "created_at": "2017-06-11T09:46:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22808",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22808#issuecomment-318982",
    "user": "vbraun"
}
```

Changing priority from blocker to major.



---

archive/issue_comments_318983.json:
```json
{
    "body": "I just want to make a comment on that one. My understanding is that upstream gsl has stopped doing testing on 32bits architectures. Tolerance for tests have therefore been only tested on 64bits. Some distros (fedora at least) have tried to do some patching for the tolerance problem. But they only go so far as their testing environment. For example the fedora patch for this problem did not help me on Gentoo when doing a multilib build (both 64 and 32bit on a 64bit host). I am not the \"real\" gsl maintainer for Gentoo but I brought a number of improvements to it recently and that was a major headache.",
    "created_at": "2017-06-12T04:08:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22808",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22808#issuecomment-318983",
    "user": "fbissey"
}
```

I just want to make a comment on that one. My understanding is that upstream gsl has stopped doing testing on 32bits architectures. Tolerance for tests have therefore been only tested on 64bits. Some distros (fedora at least) have tried to do some patching for the tolerance problem. But they only go so far as their testing environment. For example the fedora patch for this problem did not help me on Gentoo when doing a multilib build (both 64 and 32bit on a 64bit host). I am not the "real" gsl maintainer for Gentoo but I brought a number of improvements to it recently and that was a major headache.



---

archive/issue_comments_318984.json:
```json
{
    "body": "Replying to [comment:5 fbissey]:\n> I just want to make a comment on that one. My understanding is that upstream gsl has stopped doing testing on 32bits architectures. Tolerance for tests have therefore been only tested on 64bits. Some distros (fedora at least) have tried to do some patching for the tolerance problem. But they only go so far as their testing environment. For example the fedora patch for this problem did not help me on Gentoo when doing a multilib build (both 64 and 32bit on a 64bit host). I am not the \"real\" gsl maintainer for Gentoo but I brought a number of improvements to it recently and that was a major headache.\n\nThey seem to be reactive to such issues, see the recent thread https://lists.gnu.org/archive/html/bug-gsl/2017-05/msg00010.html So, perhaps could we contribute to bug reports directly upstream each time we find such a problem, so that every distro benefit from the changes (with some delay), not only the ones that can afford writing their own patches ?\n\nI need to test the problem on the latest version first, in case it is fixed already.",
    "created_at": "2017-06-12T14:55:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22808",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22808#issuecomment-318984",
    "user": "tmonteil"
}
```

Replying to [comment:5 fbissey]:
> I just want to make a comment on that one. My understanding is that upstream gsl has stopped doing testing on 32bits architectures. Tolerance for tests have therefore been only tested on 64bits. Some distros (fedora at least) have tried to do some patching for the tolerance problem. But they only go so far as their testing environment. For example the fedora patch for this problem did not help me on Gentoo when doing a multilib build (both 64 and 32bit on a 64bit host). I am not the "real" gsl maintainer for Gentoo but I brought a number of improvements to it recently and that was a major headache.

They seem to be reactive to such issues, see the recent thread https://lists.gnu.org/archive/html/bug-gsl/2017-05/msg00010.html So, perhaps could we contribute to bug reports directly upstream each time we find such a problem, so that every distro benefit from the changes (with some delay), not only the ones that can afford writing their own patches ?

I need to test the problem on the latest version first, in case it is fixed already.



---

archive/issue_comments_318985.json:
```json
{
    "body": "2.3 fixes the issue. Tested on Debian GNU/Linux, 32 and 64 bits.",
    "created_at": "2017-06-14T10:37:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22808",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22808#issuecomment-318985",
    "user": "tmonteil"
}
```

2.3 fixes the issue. Tested on Debian GNU/Linux, 32 and 64 bits.



---

archive/issue_comments_318986.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-06-14T10:37:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22808",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22808#issuecomment-318986",
    "user": "tmonteil"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_318987.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-06-15T11:43:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22808",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22808#issuecomment-318987",
    "user": "tmonteil"
}
```

New commits:



---

archive/issue_comments_318988.json:
```json
{
    "body": "LGTM.",
    "created_at": "2017-06-16T12:11:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22808",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22808#issuecomment-318988",
    "user": "tscrim"
}
```

LGTM.



---

archive/issue_comments_318989.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-06-16T12:18:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22808",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22808#issuecomment-318989",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_318990.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-06-17T10:29:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22808",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22808#issuecomment-318990",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_318991.json:
```json
{
    "body": "Changing keywords from \"\" to \"sdl\".",
    "created_at": "2019-08-26T12:30:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22808",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22808#issuecomment-318991",
    "user": "tmonteil"
}
```

Changing keywords from "" to "sdl".
