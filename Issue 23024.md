# Issue 23024: py3: some care for cmp in modular/overconvergent

archive/issues_023024.json:
```json
{
    "body": "CC:  @tscrim @jdemeyer @jhpalmieri\n\nas another tiny step to py3\n\nIssue created by migration from https://trac.sagemath.org/ticket/23261\n\n",
    "created_at": "2017-06-16T20:03:14Z",
    "labels": [
        "python3",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "py3: some care for cmp in modular/overconvergent",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23024",
    "user": "@fchapoton"
}
```
CC:  @tscrim @jdemeyer @jhpalmieri

as another tiny step to py3

Issue created by migration from https://trac.sagemath.org/ticket/23261





---

archive/issue_comments_322052.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-06-16T20:04:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23024#issuecomment-322052",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_322053.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-06-16T20:08:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23024#issuecomment-322053",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_322054.json:
```json
{
    "body": "bot is morally green, please review",
    "created_at": "2017-06-19T19:25:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23024#issuecomment-322054",
    "user": "@fchapoton"
}
```

bot is morally green, please review



---

archive/issue_comments_322055.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-06-19T19:25:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23024#issuecomment-322055",
    "user": "@fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_322056.json:
```json
{
    "body": "In `genus0.py`, why convert one `__cmp__` to `__eq__` and `__ne__`, while converting the other to `_richcmp_`?",
    "created_at": "2017-06-19T20:51:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23024#issuecomment-322056",
    "user": "@jhpalmieri"
}
```

In `genus0.py`, why convert one `__cmp__` to `__eq__` and `__ne__`, while converting the other to `_richcmp_`?



---

archive/issue_comments_322057.json:
```json
{
    "body": "`_richcmp_` (and the former `_cmp_`) can be used only for Element classes, and will be used by the coercion framework.\n\nOn the other hand, if often makes no sense to define a total order on a set of parents. That's why `__cmp__` is replaced by just `__eq__` and `__ne__`.\n\n**EDIT** When comparison is really wanted for parents, one soon will be able to use `__richcmp__`, which is for the moment restricted to .pyx files.",
    "created_at": "2017-06-20T05:45:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23024#issuecomment-322057",
    "user": "@fchapoton"
}
```

`_richcmp_` (and the former `_cmp_`) can be used only for Element classes, and will be used by the coercion framework.

On the other hand, if often makes no sense to define a total order on a set of parents. That's why `__cmp__` is replaced by just `__eq__` and `__ne__`.

**EDIT** When comparison is really wanted for parents, one soon will be able to use `__richcmp__`, which is for the moment restricted to .pyx files.



---

archive/issue_comments_322058.json:
```json
{
    "body": "For these elements, it seems that we only care about `__eq__` and `__ne__`, not a total ordering. Or at least the doctests don't show any interest in a total ordering. Is `_richcmp_` preferable anyway because it uses coercion, or for some other reason?\n\n(I am not objecting to the changes, just curious.)",
    "created_at": "2017-06-20T18:14:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23024#issuecomment-322058",
    "user": "@jhpalmieri"
}
```

For these elements, it seems that we only care about `__eq__` and `__ne__`, not a total ordering. Or at least the doctests don't show any interest in a total ordering. Is `_richcmp_` preferable anyway because it uses coercion, or for some other reason?

(I am not objecting to the changes, just curious.)



---

archive/issue_comments_322059.json:
```json
{
    "body": "Well, I would see at least two reasons for using `_richcmp_`, namely\n\n# this is easy to use, as a quick replacement for `__cmp__` or `_cmp_`\n\nGiven the quantity of work remaining to be done on cmp, this is a big plus.\n\n# it uses coercion\n\nthis allows in particular to remove all checks of the kind \"do they have the same parent\"",
    "created_at": "2017-06-20T18:26:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23024#issuecomment-322059",
    "user": "@fchapoton"
}
```

Well, I would see at least two reasons for using `_richcmp_`, namely

# this is easy to use, as a quick replacement for `__cmp__` or `_cmp_`

Given the quantity of work remaining to be done on cmp, this is a big plus.

# it uses coercion

this allows in particular to remove all checks of the kind "do they have the same parent"



---

archive/issue_comments_322060.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-06-20T18:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23024#issuecomment-322060",
    "user": "@jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_322061.json:
```json
{
    "body": "Thanks !",
    "created_at": "2017-06-20T18:59:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23024#issuecomment-322061",
    "user": "@fchapoton"
}
```

Thanks !



---

archive/issue_comments_322062.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-06-22T07:24:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23024",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23024#issuecomment-322062",
    "user": "@vbraun"
}
```

Resolution: fixed
