# Issue 23024: py3: some care for cmp in modular/overconvergent

Issue created by migration from Trac.

Original creator: chapoton

Original creation time: 2017-06-16 20:03:14

CC:  tscrim jdemeyer jhpalmieri

as another tiny step to py3


---

Comment by git created at 2017-06-16 20:04:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-06-16 20:08:29

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2017-06-19 19:25:40

bot is morally green, please review


---

Comment by chapoton created at 2017-06-19 19:25:40

Changing status from new to needs_review.


---

Comment by jhpalmieri created at 2017-06-19 20:51:04

In `genus0.py`, why convert one `__cmp__` to `__eq__` and `__ne__`, while converting the other to `_richcmp_`?


---

Comment by chapoton created at 2017-06-20 05:45:33

`_richcmp_` (and the former `_cmp_`) can be used only for Element classes, and will be used by the coercion framework.

On the other hand, if often makes no sense to define a total order on a set of parents. That's why `__cmp__` is replaced by just `__eq__` and `__ne__`.

**EDIT** When comparison is really wanted for parents, one soon will be able to use `__richcmp__`, which is for the moment restricted to .pyx files.


---

Comment by jhpalmieri created at 2017-06-20 18:14:40

For these elements, it seems that we only care about `__eq__` and `__ne__`, not a total ordering. Or at least the doctests don't show any interest in a total ordering. Is `_richcmp_` preferable anyway because it uses coercion, or for some other reason?

(I am not objecting to the changes, just curious.)


---

Comment by chapoton created at 2017-06-20 18:26:01

Well, I would see at least two reasons for using `_richcmp_`, namely

# this is easy to use, as a quick replacement for `__cmp__` or `_cmp_`

Given the quantity of work remaining to be done on cmp, this is a big plus.

# it uses coercion

this allows in particular to remove all checks of the kind "do they have the same parent"


---

Comment by jhpalmieri created at 2017-06-20 18:58:24

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2017-06-20 18:59:18

Thanks !


---

Comment by vbraun created at 2017-06-22 07:24:14

Resolution: fixed
