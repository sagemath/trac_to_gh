# Issue 22445: Let R pick up system/user configuration files

Issue created by migration from https://trac.sagemath.org/ticket/22682

Original creator: novoselt

Original creation time: 2017-03-26 19:36:01

CC:  embray charpent

Some 9 year old code in R interface prevents it from picking up any configuration and forces PNG plotting. This was changed for a while in [SageMathCell](SageMathCell) version to implement plotting support, see
https://groups.google.com/d/topic/sage-support/NUIxQcMJLjk/discussion
for some details and discussion.



---

Comment by novoselt created at 2017-03-26 19:41:55

Changing status from new to needs_review.


---

Comment by novoselt created at 2017-03-26 19:41:55

Would be nice to incorporate this change into Sage, it is one of 3 little things that are still different in [SageMathCell](SageMathCell) special branch.

I am not entirely sure how to test the change. All tests pass for me and as for functionality - locally plotting works with and without, while remotely it does not work currently anyway.
----
New commits:


---

Comment by charpent created at 2017-03-27 07:13:31

I'll have a look at this, but don't hold your breath...

I'm a bit wary of "not forcing the PNG device" : this one is the default fallback for a lot of R graphics and is used (alas) by a lot of R interfaces. What do you plan to do ?

I'm also thinking of suggesting a couple of build-time dependencies for R :
* explicitly using Sage's openblas for lapack and blas.
* advising the installation of tcl/tk (used as a basic dependency in a couple of base R packages).
* similarly, advise installation of TIFF libraries (necessary for producing graphics for a few retro journals (sep. in application domains, such as medicine) which ave not yet heard of PDF or EPS files ;-).

I also plan to add, in a separate ticket, openssl as a standard package. This will cut the SSL licensing nonsense we have heard more than once recently...

Adding embray to Cc : I hear that Cygwin can be a bitch... Adding aMac OS/X user interested in R would also be a good idea. Who ?

Also, depending on #20523 seems a good idea : our curent 3.2.4-revised version is an antique...


---

Comment by novoselt created at 2017-03-28 04:29:48

Replying to [comment:3 charpent]:
> I'm a bit wary of "not forcing the PNG device" : this one is the default fallback for a lot of R graphics and is used (alas) by a lot of R interfaces. What do you plan to do ?

Yet somehow on a remote server I get errors about X11 rather than PNG plot... In any case what I would like is to set this default if at all necessary via some external files/variables, not have it hard-coded in Sage interface. Also - don't R people want their graphics to display well? So don't they already have some sensible default way which makes it unnecessary to fiddle with in most cases? And in others perhaps users have configured R appropriately via configuration files, so I propose to pick up those settings. [SageMathCell](SageMathCell) does this https://github.com/sagemath/sagecell/blob/master/contrib/vm/container_manager.py#L434


---

Comment by mkoeppe created at 2020-04-25 02:07:52

Changing status from needs_review to needs_work.
