# Issue 31930: fricas gets daemonized and eats up the CPU when Sage terminal is closed

archive/issues_031930.json:
```json
{
    "body": "Here are the steps to reproduce:\n\n- start Sage in a terminal\n- run a Sage command involving fricas, e.g.\n   `sage: integrate(sin(x),x,0,1,algorithm='fricas')`\n- in another terminal, track the evolution of fricas process : \n   `ps -eo pid,ppid,pcpu,comm | grep FRICAS`\n- if you quit Sage with `exit` or `CTRL+D`, you get a message `Exiting FriCAS with PID ...` and fricas process terminates, great.\n- if instead you close the terminal running Sage, you see that the fricas process gets daemonized (its parent becomes `PID 1`), and its CPU usage inreases and heats your computer.\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/32167\n\n",
    "created_at": "2021-07-09T11:15:11Z",
    "labels": [
        "packages: optional",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "fricas gets daemonized and eats up the CPU when Sage terminal is closed",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31930",
    "user": "tmonteil"
}
```
Here are the steps to reproduce:

- start Sage in a terminal
- run a Sage command involving fricas, e.g.
   `sage: integrate(sin(x),x,0,1,algorithm='fricas')`
- in another terminal, track the evolution of fricas process : 
   `ps -eo pid,ppid,pcpu,comm | grep FRICAS`
- if you quit Sage with `exit` or `CTRL+D`, you get a message `Exiting FriCAS with PID ...` and fricas process terminates, great.
- if instead you close the terminal running Sage, you see that the fricas process gets daemonized (its parent becomes `PID 1`), and its CPU usage inreases and heats your computer.



Issue created by migration from https://trac.sagemath.org/ticket/32167





---

archive/issue_comments_456165.json:
```json
{
    "body": "Changing keywords from \"\" to \"FriCAS\".",
    "created_at": "2021-07-09T20:18:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31930#issuecomment-456165",
    "user": "@mantepse"
}
```

Changing keywords from "" to "FriCAS".



---

archive/issue_comments_456166.json:
```json
{
    "body": "I cannot reproduce this :-(\n\nDoes this always happen on your computer?",
    "created_at": "2021-07-09T20:24:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31930#issuecomment-456166",
    "user": "@mantepse"
}
```

I cannot reproduce this :-(

Does this always happen on your computer?



---

archive/issue_comments_456167.json:
```json
{
    "body": "Replying to [comment:2 mantepse]:\n> I cannot reproduce this :-(\n> \n> Does this always happen on your computer?\n\nI can reproduce it consistently, with the procedure above. I am using Debian buster GNU/Linux 64bits.\n\nHowever, i am on the commit 7eeb80c9e1b4e656e0616d157fbc16b31f94ba52 which installs fricas 1.3.7.p1.",
    "created_at": "2021-07-10T10:07:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31930#issuecomment-456167",
    "user": "tmonteil"
}
```

Replying to [comment:2 mantepse]:
> I cannot reproduce this :-(
> 
> Does this always happen on your computer?

I can reproduce it consistently, with the procedure above. I am using Debian buster GNU/Linux 64bits.

However, i am on the commit 7eeb80c9e1b4e656e0616d157fbc16b31f94ba52 which installs fricas 1.3.7.p1.



---

archive/issue_comments_456168.json:
```json
{
    "body": "I see this behaviour now, too :-(",
    "created_at": "2021-07-20T14:12:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31930#issuecomment-456168",
    "user": "@mantepse"
}
```

I see this behaviour now, too :-(
