# Issue 28135: Update Cremona database of elliptic curves

Issue created by migration from https://trac.sagemath.org/ticket/28372

Original creator: cremona

Original creation time: 2019-08-20 10:24:01

CC:  slelievre saraedum

Keywords: elliptic curve database

An update of optional spkg database_cremona_ellcurve is in preparation fllowing the enlargement of the database from conductor bound 400000 to 500000.  (Thanks to Andrew Sutherland, GCP and the Simons Foundation.)  The new data is at https://github.com/JohnCremona/ecdata and a new spkg will be available shortly.


---

Comment by cremona created at 2019-08-21 09:42:25

Changing status from new to needs_review.


---

Comment by cremona created at 2019-08-21 09:44:58

Note on code changes:  I made some modifications to the scripts in src/sage/databases/cremona.py to create the new file cremona.db in the spkg.  Firstly to make it work (SAGE_SHARE had to be imported) and also after reviewing and modifying the instructions in SPKG.txt.

I did a full make ptestlong and nothing required any further changes (all test passed).


---

Comment by slelievre created at 2019-08-26 22:06:28

Typo: "tha tarball" -> "the tarball".


---

Comment by git created at 2019-08-27 07:53:30

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2019-08-27 10:30:05

So basically the only thing to review is the changes to the generating code?


---

Comment by jdemeyer created at 2019-08-27 10:32:08

`SPKG.txt` documents two methods, which one did you use? And why is the other one documented if you don't use it? I would rather just document the one and true method.


---

Comment by git created at 2019-08-27 10:54:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by cremona created at 2019-08-27 10:54:43

The content of SPKG.txt has always and forever been ignored by everybody.  I just updated it so that it bears some relation to what now actually works.  As far as I am concerned it could be deleted altogether: what other SPKG.txt files contain instructions on how to update the spkg?

Anyway I used Method 2 and will update the text accordingly, but I do *not* expect anyone reviewing this to test the spkg creation instructions.  Instead, test that after installing this version of the spkg all of Sage still works, and (if you care) look at the output of CremonaDatabase() to see if it shows a number just under 500000 instead of 400000 with the old version.
----
New commits:
----
New commits:


---

Comment by jdemeyer created at 2019-08-27 12:47:38

Replying to [comment:11 cremona]:
> what other SPKG.txt files contain instructions on how to update the spkg?

Actually, such information should be there whenever updating is non-trivial. I've certainly seen various packages like that (I don't recall which). Ideally, there shouldn't be such instructions, simply because the instructions are trivial ("just download the package from upstream.")


---

Comment by cremona created at 2019-08-27 13:13:07

Replying to [comment:12 jdemeyer]:
> Replying to [comment:11 cremona]:
> > what other SPKG.txt files contain instructions on how to update the spkg?
> 
> Actually, such information should be there whenever updating is non-trivial. I've certainly seen various packages like that (I don't recall which). Ideally, there shouldn't be such instructions, simply because the instructions are trivial ("just download the package from upstream.")

In this direction Julien Puydt has made a python script which when run (from the right place) creates the cremona.db file, and the plan is to include this script in with eclib.  Then there could be a Makefile target whose action is to create a new database_cremona_ellcurve spkg.

On the other hand I have no current plans for further expansion of the database (though make not promises not to).


---

Comment by cremona created at 2019-08-30 08:12:14

Is there are problem?


---

Comment by cremona created at 2019-09-11 11:07:05

Replying to [comment:14 cremona]:
> Is there are problem?

In fact yes, there is a missing curve (thanks to Bill Allombert for noticing).  I am doing further checks and will update this when that is finished.


---

Comment by cremona created at 2019-09-11 11:07:05

Changing status from needs_review to needs_work.


---

Comment by git created at 2019-09-11 16:07:58

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by cremona created at 2019-09-11 16:10:27

Replying to [comment:15 cremona]:
> Replying to [comment:14 cremona]:
> > Is there are problem?
> 
> In fact yes, there is a missing curve (thanks to Bill Allombert for noticing).  I am doing further checks and will update this when that is finished.

Data and checksums etc updated, ready for review again.  Note that the pkg tarball name has changed (the version number contains today's date).


---

Comment by cremona created at 2019-09-11 18:34:09

Changing status from needs_work to needs_review.


---

Comment by cremona created at 2019-09-12 15:33:32

I would like to make a strong case for the inclusion of this in release 8.9 for the following reasons:
   1. Magma has had the new database since Aug.28, updated today Sept 12 (see http://magma.maths.usyd.edu.au/magma/.
   2. Pari/gp has the new database since today (see http://pari.math.u-bordeaux.fr/packages.html).
   3. The new curves are all in the LMFDB (see http://www.lmfdb.org/EllipticCurve/Q/).

And finally, not a single line of Sage code had to be changed.  So please!


---

Comment by chapoton created at 2019-09-12 15:54:40

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2019-09-12 15:54:40

ok, works for me


---

Comment by cremona created at 2019-09-12 15:56:37

Thanks!


---

Comment by chapoton created at 2019-09-30 08:12:27

moving milestone to 9.0 (after release of 8.9)


---

Comment by vbraun created at 2019-10-03 17:58:00

Resolution: fixed
