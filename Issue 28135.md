# Issue 28135: Update Cremona database of elliptic curves

archive/issues_028135.json:
```json
{
    "body": "CC:  @slel @saraedum\n\nKeywords: elliptic curve database\n\nAn update of optional spkg database_cremona_ellcurve is in preparation fllowing the enlargement of the database from conductor bound 400000 to 500000.  (Thanks to Andrew Sutherland, GCP and the Simons Foundation.)  The new data is at https://github.com/JohnCremona/ecdata and a new spkg will be available shortly.\n\nIssue created by migration from https://trac.sagemath.org/ticket/28372\n\n",
    "created_at": "2019-08-20T10:24:01Z",
    "labels": [
        "packages: optional",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.0",
    "title": "Update Cremona database of elliptic curves",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28135",
    "user": "@JohnCremona"
}
```
CC:  @slel @saraedum

Keywords: elliptic curve database

An update of optional spkg database_cremona_ellcurve is in preparation fllowing the enlargement of the database from conductor bound 400000 to 500000.  (Thanks to Andrew Sutherland, GCP and the Simons Foundation.)  The new data is at https://github.com/JohnCremona/ecdata and a new spkg will be available shortly.

Issue created by migration from https://trac.sagemath.org/ticket/28372





---

archive/issue_comments_397375.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-08-21T09:42:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28135#issuecomment-397375",
    "user": "@JohnCremona"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_397376.json:
```json
{
    "body": "Note on code changes:  I made some modifications to the scripts in src/sage/databases/cremona.py to create the new file cremona.db in the spkg.  Firstly to make it work (SAGE_SHARE had to be imported) and also after reviewing and modifying the instructions in SPKG.txt.\n\nI did a full make ptestlong and nothing required any further changes (all test passed).",
    "created_at": "2019-08-21T09:44:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28135#issuecomment-397376",
    "user": "@JohnCremona"
}
```

Note on code changes:  I made some modifications to the scripts in src/sage/databases/cremona.py to create the new file cremona.db in the spkg.  Firstly to make it work (SAGE_SHARE had to be imported) and also after reviewing and modifying the instructions in SPKG.txt.

I did a full make ptestlong and nothing required any further changes (all test passed).



---

archive/issue_comments_397377.json:
```json
{
    "body": "Typo: \"tha tarball\" -> \"the tarball\".",
    "created_at": "2019-08-26T22:06:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28135#issuecomment-397377",
    "user": "@slel"
}
```

Typo: "tha tarball" -> "the tarball".



---

archive/issue_comments_397378.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-08-27T07:53:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28135#issuecomment-397378",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_397379.json:
```json
{
    "body": "So basically the only thing to review is the changes to the generating code?",
    "created_at": "2019-08-27T10:30:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28135#issuecomment-397379",
    "user": "@jdemeyer"
}
```

So basically the only thing to review is the changes to the generating code?



---

archive/issue_comments_397380.json:
```json
{
    "body": "`SPKG.txt` documents two methods, which one did you use? And why is the other one documented if you don't use it? I would rather just document the one and true method.",
    "created_at": "2019-08-27T10:32:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28135#issuecomment-397380",
    "user": "@jdemeyer"
}
```

`SPKG.txt` documents two methods, which one did you use? And why is the other one documented if you don't use it? I would rather just document the one and true method.



---

archive/issue_comments_397381.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-08-27T10:54:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28135#issuecomment-397381",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_397382.json:
```json
{
    "body": "The content of SPKG.txt has always and forever been ignored by everybody.  I just updated it so that it bears some relation to what now actually works.  As far as I am concerned it could be deleted altogether: what other SPKG.txt files contain instructions on how to update the spkg?\n\nAnyway I used Method 2 and will update the text accordingly, but I do *not* expect anyone reviewing this to test the spkg creation instructions.  Instead, test that after installing this version of the spkg all of Sage still works, and (if you care) look at the output of CremonaDatabase() to see if it shows a number just under 500000 instead of 400000 with the old version.\n----\nNew commits:\n----\nNew commits:",
    "created_at": "2019-08-27T10:54:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28135#issuecomment-397382",
    "user": "@JohnCremona"
}
```

The content of SPKG.txt has always and forever been ignored by everybody.  I just updated it so that it bears some relation to what now actually works.  As far as I am concerned it could be deleted altogether: what other SPKG.txt files contain instructions on how to update the spkg?

Anyway I used Method 2 and will update the text accordingly, but I do *not* expect anyone reviewing this to test the spkg creation instructions.  Instead, test that after installing this version of the spkg all of Sage still works, and (if you care) look at the output of CremonaDatabase() to see if it shows a number just under 500000 instead of 400000 with the old version.
----
New commits:
----
New commits:



---

archive/issue_comments_397383.json:
```json
{
    "body": "Replying to [comment:11 cremona]:\n> what other SPKG.txt files contain instructions on how to update the spkg?\n\nActually, such information should be there whenever updating is non-trivial. I've certainly seen various packages like that (I don't recall which). Ideally, there shouldn't be such instructions, simply because the instructions are trivial (\"just download the package from upstream.\")",
    "created_at": "2019-08-27T12:47:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28135#issuecomment-397383",
    "user": "@jdemeyer"
}
```

Replying to [comment:11 cremona]:
> what other SPKG.txt files contain instructions on how to update the spkg?

Actually, such information should be there whenever updating is non-trivial. I've certainly seen various packages like that (I don't recall which). Ideally, there shouldn't be such instructions, simply because the instructions are trivial ("just download the package from upstream.")



---

archive/issue_comments_397384.json:
```json
{
    "body": "Replying to [comment:12 jdemeyer]:\n> Replying to [comment:11 cremona]:\n> > what other SPKG.txt files contain instructions on how to update the spkg?\n> \n> Actually, such information should be there whenever updating is non-trivial. I've certainly seen various packages like that (I don't recall which). Ideally, there shouldn't be such instructions, simply because the instructions are trivial (\"just download the package from upstream.\")\n\nIn this direction Julien Puydt has made a python script which when run (from the right place) creates the cremona.db file, and the plan is to include this script in with eclib.  Then there could be a Makefile target whose action is to create a new database_cremona_ellcurve spkg.\n\nOn the other hand I have no current plans for further expansion of the database (though make not promises not to).",
    "created_at": "2019-08-27T13:13:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28135#issuecomment-397384",
    "user": "@JohnCremona"
}
```

Replying to [comment:12 jdemeyer]:
> Replying to [comment:11 cremona]:
> > what other SPKG.txt files contain instructions on how to update the spkg?
> 
> Actually, such information should be there whenever updating is non-trivial. I've certainly seen various packages like that (I don't recall which). Ideally, there shouldn't be such instructions, simply because the instructions are trivial ("just download the package from upstream.")

In this direction Julien Puydt has made a python script which when run (from the right place) creates the cremona.db file, and the plan is to include this script in with eclib.  Then there could be a Makefile target whose action is to create a new database_cremona_ellcurve spkg.

On the other hand I have no current plans for further expansion of the database (though make not promises not to).



---

archive/issue_comments_397385.json:
```json
{
    "body": "Is there are problem?",
    "created_at": "2019-08-30T08:12:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28135#issuecomment-397385",
    "user": "@JohnCremona"
}
```

Is there are problem?



---

archive/issue_comments_397386.json:
```json
{
    "body": "Replying to [comment:14 cremona]:\n> Is there are problem?\n\nIn fact yes, there is a missing curve (thanks to Bill Allombert for noticing).  I am doing further checks and will update this when that is finished.",
    "created_at": "2019-09-11T11:07:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28135#issuecomment-397386",
    "user": "@JohnCremona"
}
```

Replying to [comment:14 cremona]:
> Is there are problem?

In fact yes, there is a missing curve (thanks to Bill Allombert for noticing).  I am doing further checks and will update this when that is finished.



---

archive/issue_comments_397387.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-09-11T11:07:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28135#issuecomment-397387",
    "user": "@JohnCremona"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_397388.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-09-11T16:07:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28135#issuecomment-397388",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_397389.json:
```json
{
    "body": "Replying to [comment:15 cremona]:\n> Replying to [comment:14 cremona]:\n> > Is there are problem?\n> \n> In fact yes, there is a missing curve (thanks to Bill Allombert for noticing).  I am doing further checks and will update this when that is finished.\n\nData and checksums etc updated, ready for review again.  Note that the pkg tarball name has changed (the version number contains today's date).",
    "created_at": "2019-09-11T16:10:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28135#issuecomment-397389",
    "user": "@JohnCremona"
}
```

Replying to [comment:15 cremona]:
> Replying to [comment:14 cremona]:
> > Is there are problem?
> 
> In fact yes, there is a missing curve (thanks to Bill Allombert for noticing).  I am doing further checks and will update this when that is finished.

Data and checksums etc updated, ready for review again.  Note that the pkg tarball name has changed (the version number contains today's date).



---

archive/issue_comments_397390.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-09-11T18:34:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28135#issuecomment-397390",
    "user": "@JohnCremona"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_397391.json:
```json
{
    "body": "I would like to make a strong case for the inclusion of this in release 8.9 for the following reasons:\n1. Magma has had the new database since Aug.28, updated today Sept 12 (see http://magma.maths.usyd.edu.au/magma/.\n2. Pari/gp has the new database since today (see http://pari.math.u-bordeaux.fr/packages.html).\n3. The new curves are all in the LMFDB (see http://www.lmfdb.org/EllipticCurve/Q/).\n\nAnd finally, not a single line of Sage code had to be changed.  So please!",
    "created_at": "2019-09-12T15:33:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28135#issuecomment-397391",
    "user": "@JohnCremona"
}
```

I would like to make a strong case for the inclusion of this in release 8.9 for the following reasons:
1. Magma has had the new database since Aug.28, updated today Sept 12 (see http://magma.maths.usyd.edu.au/magma/.
2. Pari/gp has the new database since today (see http://pari.math.u-bordeaux.fr/packages.html).
3. The new curves are all in the LMFDB (see http://www.lmfdb.org/EllipticCurve/Q/).

And finally, not a single line of Sage code had to be changed.  So please!



---

archive/issue_comments_397392.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-09-12T15:54:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28135#issuecomment-397392",
    "user": "@fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_397393.json:
```json
{
    "body": "ok, works for me",
    "created_at": "2019-09-12T15:54:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28135#issuecomment-397393",
    "user": "@fchapoton"
}
```

ok, works for me



---

archive/issue_comments_397394.json:
```json
{
    "body": "Thanks!",
    "created_at": "2019-09-12T15:56:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28135#issuecomment-397394",
    "user": "@JohnCremona"
}
```

Thanks!



---

archive/issue_comments_397395.json:
```json
{
    "body": "moving milestone to 9.0 (after release of 8.9)",
    "created_at": "2019-09-30T08:12:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28135#issuecomment-397395",
    "user": "@fchapoton"
}
```

moving milestone to 9.0 (after release of 8.9)



---

archive/issue_comments_397396.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-10-03T17:58:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28135#issuecomment-397396",
    "user": "@vbraun"
}
```

Resolution: fixed
