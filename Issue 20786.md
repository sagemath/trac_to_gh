# Issue 20786: remove traces of mercurial in sage/misc/banner.py

Issue created by migration from https://trac.sagemath.org/ticket/21023

Original creator: schilly

Original creation time: 2016-07-14 10:37:59

In `sage/misc/banner.py` the function `version(clone = False)` does read the filesystem for a mercurial branch info every time. Remove this `os.popen(...)` and get rid of `clone`. Maybe there are similar traces in such files, too ...


---

Comment by chapoton created at 2016-07-15 09:20:53

Changing status from new to needs_review.


---

Comment by chapoton created at 2016-07-15 09:20:53

New commits:


---

Comment by jmantysalo created at 2016-07-15 11:50:57

Just


```
fgrep -R -i -l mercurial src/sage
```


found seven files referring to Mercurial. Do you want this ticket to be reviewed, or to check those first?


---

Comment by chapoton created at 2016-07-15 11:54:25

Indeed. See also `git grep -P "ercurial"`

Do we still ship the package `hg` ?


---

Comment by jmantysalo created at 2016-07-15 11:56:50

Replying to [comment:3 chapoton]:

> Do we still ship the package `hg` ?

No idea. I don't _really_ know Sage to be able to answer questions like this.


---

Comment by chapoton created at 2016-07-15 14:02:07

So let us please just use this ticket for its current minimal changes.


---

Comment by jmantysalo created at 2016-07-15 14:48:21

Replying to [comment:5 chapoton]:
> So let us please just use this ticket for its current minimal changes.

OK.


---

Comment by jmantysalo created at 2016-07-15 14:48:21

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-07-16 08:15:24


```
sage -t --long src/sage/misc/abstract_method.py  # 1 doctest failed
sage -t --long src/sage/misc/lazy_attribute.pyx  # 1 doctest failed
```



---

Comment by vbraun created at 2016-07-16 08:15:24

Changing status from positive_review to needs_work.


---

Comment by git created at 2016-07-16 09:28:24

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2016-07-16 09:28:53

Changing status from needs_work to needs_review.


---

Comment by jmantysalo created at 2016-07-18 06:31:52

Works now.


---

Comment by jmantysalo created at 2016-07-18 06:31:52

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-07-19 23:12:58

Resolution: fixed
