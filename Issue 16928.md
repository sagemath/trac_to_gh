# Issue 16928: Refactor some generic finite field code

Issue created by migration from Trac.

Original creator: jpflori

Original creation time: 2014-10-16 14:47:15

CC:  jdemeyer

There are some generic methods defined in `element_ext_pari` files.
There is no reason why they shouldn't be in `element_base` files.


---

Comment by jpflori created at 2014-10-16 14:48:41

Changing status from new to needs_review.


---

Comment by jpflori created at 2014-10-16 14:48:41

Last 10 new commits:


---

Comment by git created at 2014-10-16 14:50:31

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2014-10-16 15:35:47

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2014-10-16 15:35:47

Can you please not add `# commented out code`


---

Comment by jdemeyer created at 2014-10-16 15:39:29

I would prefer not to add the `rational_reconstruction()` method since `FiniteField_prime_modn` inherits from `IntegerModRing_generic` which has the method.


---

Comment by jpflori created at 2014-10-16 16:16:09

I'll remove the code I moved and commented out.

I don't really get your second request (without actually thinking), so please help me, you mean:
* the `FiniteField_prime_modn` both inherits from `IntegerModRing_generic` and the base class for FF elements?
So should we completely trash out the moved rational reconstruction code?
It actually checks the parent is a prime field, so the element should be in a  `FiniteField_prime_modn`.


---

Comment by jdemeyer created at 2014-10-16 16:21:33

Replying to [comment:6 jpflori]:
> I don't really get your second request (without actually thinking), so please help me, you mean:
> * the `FiniteField_prime_modn` both inherits from `IntegerModRing_generic` and the base class for FF elements?
yes, there is

```
class FiniteField_prime_modn(FiniteField_generic, integer_mod_ring.IntegerModRing_generic):
```


> So should we completely trash out the moved rational reconstruction code?
yes, remove the code and move the doctests to `src/sage/rings/finite_rings/integer_mod.pyx`


---

Comment by jdemeyer created at 2014-10-16 16:22:26

And remove the unused doctest line

```
sage: from sage.rings.finite_rings.finite_field_ext_pari import FiniteField_ext_pari
```



---

Comment by jpflori created at 2014-10-17 10:11:48

Replying to [comment:8 jdemeyer]:
> And remove the unused doctest line
> {{{
> sage: from sage.rings.finite_rings.finite_field_ext_pari import FiniteField_ext_pari
> }}}
Which one do you mean?


---

Comment by jdemeyer created at 2014-10-17 10:16:58

Replying to [comment:9 jpflori]:
> Replying to [comment:8 jdemeyer]:
> > And remove the unused doctest line
> > {{{
> > sage: from sage.rings.finite_rings.finite_field_ext_pari import FiniteField_ext_pari
> > }}}
> Which one do you mean?
In `def rational_reconstruction`


---

Comment by jpflori created at 2014-10-17 10:19:22

Ah, I didn't read correctly your previous comment.
Sorry for my stupid question.


---

Comment by git created at 2014-10-17 10:23:47

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2014-10-17 10:28:07

inhereted -> inherited


---

Comment by jpflori created at 2014-10-17 10:30:39

Yes, I just saw that, fix on its way...


---

Comment by jpflori created at 2014-10-17 10:32:57

Some doctest output also changed.


---

Comment by git created at 2014-10-17 14:45:23

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jpflori created at 2014-10-17 14:46:32

I only have a newline issue in a doctest now...


---

Comment by jdemeyer created at 2014-10-17 14:53:02


```
raise ValueError, "must be a perfect square"
```

should be

```
raise ValueError("must be a perfect square")
```



---

Comment by git created at 2014-10-17 15:43:03

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jpflori created at 2014-10-17 15:53:18

Any idea of where the newline comes from?


---

Comment by git created at 2014-10-17 16:05:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jpflori created at 2014-10-17 16:08:08

Ok, I forgot the final dot.
What a waste of time.


---

Comment by jpflori created at 2014-10-17 16:08:08

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2014-10-19 20:15:38

All tests pass, but I wait for final review until next beta comes out.


---

Comment by jdemeyer created at 2014-10-31 09:32:08

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-11-07 16:15:19

Resolution: fixed
