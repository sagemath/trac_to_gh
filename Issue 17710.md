# Issue 17710: implement the cluster fans

Issue created by migration from https://trac.sagemath.org/ticket/17947

Original creator: chapoton

Original creation time: 2015-03-13 15:20:16

CC:  gmoose05 jipilab

Fans play an important role in cluster algebra theory. Let's have them in.


---

Comment by chapoton created at 2015-03-13 15:23:49

Changing status from new to needs_review.


---

Comment by chapoton created at 2015-03-13 15:23:49

Changing keywords from "" to "cluster, fan".


---

Comment by chapoton created at 2015-03-13 15:23:49

New commits:


---

Comment by git created at 2015-03-13 15:36:33

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by darij created at 2015-03-13 17:55:55

Care to define it in the docstring?

I've always wanted to understand what Nathan is talking about all the time, but I never got over my laziness to read up on it. I guess this is my chance :) Thanks a lot.


---

Comment by git created at 2015-03-16 16:17:35

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by darij created at 2015-03-17 01:10:50

Thanks -- this makes things a lot less scarier. I feel I need some more help, though. Is a simplicial fan the same as a simplicial complex but with "simplex" replaced by "simplicial cone"? How exactly do the vectors `d` in `\ZZ^n` give rise to a cone? Is the cone corresponding to a cluster simply the set of all nonnegative linear combinations of the denominator vectors? What is a smooth fan? Why do you require acyclicity; isn't finite-type enough?


---

Comment by chapoton created at 2015-03-17 08:25:58

Replying to [comment:5 darij]:
> Thanks -- this makes things a lot less scarier. I feel I need some more help, though.

Yes. I hope you do not want all these explanations to be written in the doc ?

> Is a simplicial fan the same as a simplicial complex but with "simplex" replaced by "simplicial cone"? 

Yes, essentially, but not quite because some convexity issues enter the definition. For the exact definition of a fan, see Fulton book on toric varieties for example. A simplicial fan is a fan where every cone is simplicial, namely has the minimal number of generators wrt its dimension.

>How exactly do the vectors `d` in `\ZZ^n` give rise to a cone?

The d associated with variables in a given cluster span the rays of a cone.

>Is the cone corresponding to a cluster simply the set of all nonnegative linear combinations of the denominator vectors?

Yes.

> What is a smooth fan? 

a smooth fan is a simplicial fan such that each cone is smooth. A smooth cone is a simplicial cone whose rays define a basis of the lattice (they have determinant +-1)

This is related to the smoothness of the toric variety associated to the fan.

> Why do you require acyclicity; isn't finite-type enough?

No, with this version of the fan. If you apply it to the cyclic quiver with 3 vertices, the result is not an interesting fan (in particular it is not smooth). There is maybe another version of the fan using the g-vector instead. I do not remember the details right now.


---

Comment by darij created at 2015-04-02 03:08:27

OK, I am not able to review this, but thank you a lot for the explanations. I still don't know what almost positive roots are, how `Cone` infers its lattice, etc., so I'll defer to someone more familiar with these things, though the code does look good to me.
----
New commits:


---

Comment by git created at 2015-04-02 03:09:11

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-06-03 17:15:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vpilaud created at 2015-06-03 17:25:01

I attempt my first Sage Days on cluster algebras, and I wanted to implant d-vector fans and g-vector fans. I realized that this was already partially done in this ticket. For the functions d_vector_fan and g_vector_fan to be coherent, I merged with #18588 which implements the d_matrix function.


---

Comment by vpilaud created at 2015-06-03 17:25:01

Changing keywords from "cluster, fan" to "cluster, fan, Sage Days 64.5".


---

Comment by jipilab created at 2015-06-03 17:52:28

Hi!

I would be happy to review this ticket!

It will be quite handy!


---

Comment by chapoton created at 2015-06-05 07:53:21

Duplicate import

```
+        from cluster_seed import ClusterSeed
+        from cluster_seed import ClusterSeed
```



---

Comment by chapoton created at 2015-06-05 07:53:21

Changing status from needs_review to needs_work.


---

Comment by git created at 2015-06-06 15:50:00

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jipilab created at 2015-06-07 09:35:01

There are blank lines that contain white spaces in the function d_vector_fan in the quiver.py file.

Otherwise it looks good to me.


---

Comment by git created at 2015-06-29 17:52:10

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2015-06-29 17:52:26

Changing status from needs_work to needs_review.


---

Comment by git created at 2015-09-12 08:38:42

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-09-25 12:43:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2015-09-29 07:50:12

Ping ? The patchbot has given a green light !


---

Comment by chapoton created at 2015-10-07 18:45:57

Re-ping ? this should be an easy ticket !


---

Comment by jipilab created at 2015-10-12 14:36:31

All test passed on sage-6.9.

This looks good to me. I set this as positive review.


---

Comment by jipilab created at 2015-10-12 14:36:31

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2015-10-12 16:54:59

Thanks a lot ! Maybe you could also look at #16209 ?


---

Comment by vbraun created at 2015-10-15 19:41:06

Just a PSA: Your ticket will never be merged if it depends on a invalid/wontfix ticket. At least not until that one is being merged into the git tree.


---

Comment by chapoton created at 2015-10-15 19:56:03

ok, thanks. Let us remove the dependency then. It has been taken care of in another ticket.


---

Comment by vbraun created at 2015-10-16 18:42:44

Resolution: fixed
