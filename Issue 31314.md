# Issue 31314: Incorrect conversion from ℚ[-i] to SR

Issue created by migration from https://trac.sagemath.org/ticket/31551

Original creator: mmezzarobba

Original creation time: 2021-03-24 17:55:51

CC:  vdelecroix

This should return `-I`, not `I`:

```
sage: K.<j> = QuadraticField(-1, embedding=CC(0,-1))
sage: SR(j)
I
```

Works under Sage 9.2, so maybe related to


---

Comment by slelievre created at 2021-03-24 21:41:06

Possibly related:

- #30518: Eigenvectors over QQbar are incorrectly conjugated


---

Comment by vdelecroix created at 2021-03-25 09:19:38

Indeed, the following method on gaussian integers looks bad

```
    def _symbolic_(self, SR):
        r"""
        EXAMPLES::

            sage: SR(1 + 2*i)
            2*I + 1
        """
        from sage.symbolic.constants import I
        return self[1]*I + self[0]
```



---

Comment by mmezzarobba created at 2021-03-25 09:27:16

Hmm, if I remember right, the `GaussianInteger` class was intended for ℚ[i] _with its standard embedding_, so I think there is something else.


---

Comment by mmezzarobba created at 2021-03-25 10:10:35

...but I see no reason not to extend it to support both embeddings.
----
New commits:


---

Comment by mmezzarobba created at 2021-03-25 10:10:35

Changing status from new to needs_review.


---

Comment by vdelecroix created at 2021-03-25 10:12:36

looks good... waiting for patchbot.


---

Comment by vdelecroix created at 2021-03-25 13:23:51

Changing status from needs_review to positive_review.


---

Comment by mmezzarobba created at 2021-03-25 15:29:52

thanks for the quick review!


---

Comment by mmezzarobba created at 2021-03-26 09:06:00

Changing priority from major to critical.


---

Comment by mmezzarobba created at 2021-03-26 09:06:00

Raising the priority to critical to stress that the fix really should go in Sage 9.3.


---

Comment by mkoeppe created at 2021-03-29 23:54:39

Setting priority to blocker to bring this ticket to the attention of the release bot.


---

Comment by mkoeppe created at 2021-03-29 23:54:39

Changing priority from critical to blocker.


---

Comment by vbraun created at 2021-04-01 19:45:14

Resolution: fixed
