# Issue 27352: uninstall.py should always remove symbolic links

Issue created by migration from https://trac.sagemath.org/ticket/27589

Original creator: dimpase

Original creation time: 2019-04-01 19:06:51

CC:  embray jhpalmieri

On OSX 10.14 I see a weird behaviour of uninstall.py: sometimes it leaves symbolic links to libraries unremoved, and then the re-install of a package fails, as these links cannot be overwritten.

I gather this might be due to `os.path.exists()` returning False on existing, but broken, symbolic links (and they can become broken if files they point to are removed first).

I am experimenting with  `os.path.exists() or os.path.lexists()` test for existence in `build/sage_bootstrap/uninstall.py` - this should return True on broken links too.



---

Comment by jhpalmieri created at 2019-04-01 19:22:58

Is this a duplicate of #27544?


---

Comment by dimpase created at 2019-04-01 19:52:35

it is. Somehow I ended up on a branch without that ticket...


---

Comment by jhpalmieri created at 2019-04-01 19:55:11

Changing status from new to needs_review.


---

Comment by jhpalmieri created at 2019-04-01 19:55:17

Changing status from needs_review to positive_review.


---

Comment by embray created at 2019-04-02 13:40:56

Resolution: duplicate


---

Comment by embray created at 2019-04-02 13:40:56

It was only merged by Volker 4 days ago so it's not too surprising you missed it. At least this adds further confirmation of the issue and its solution.
