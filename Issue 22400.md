# Issue 22400: Fix treatment of tensor field restrictions on parallelizable manifolds

archive/issues_022400.json:
```json
{
    "body": "CC:  @tscrim\n\nKeywords: tensor field, parallelizable manifold\n\nThe following is a bug:\n\n```\nsage: S1 = Manifold(1, 'S^1') # the circle\nsage: U = S1.open_subset('U') # the complement of one point\nsage: Xt.<t> =  U.chart('t:(0,2*pi)') # the standard angle coordinate\nsage: V = S1.open_subset('V') # the complement of the point t=pi\nsage: Xu.<u> = V.chart('u:(0,2*pi)') # the angle t-pi\nsage: S1.declare_union(U, V)\nsage: Xt_to_Xu = Xt.transition_map(Xu, (t-pi,), intersection_name='W',\n....:                              restrictions1 = t!=pi, restrictions2 = u!=pi)\nsage: Xt_to_Xu.inverse()\nsage: W = U.intersection(V)\nsage: e = S1.vector_frame('e') # a global vector frame (makes S^1 parallelizable)\nsage: R2 = Manifold(2, 'R^2', start_index=1) # Euclidean space R^2\nsage: X2.<x,y> = R2.chart() # Cartesian coordinates\nsage: F = S1.diff_map(R2, {(Xt,X2): [cos(t), sin(t)],\n....:                      (Xu,X2): [-cos(u), -sin(u)]}) # embedding S^1 --> R^2\nsage: dx = X2.coframe()[1] # the 1-form dx on R^2\nsage: a = F.pullback(dx) ; a\n1-form on the 1-dimensional differentiable manifold S^1\nsage: a.restrict(U).display()\n-sin(t) dt\nsage: a.restrict(W).display()\n...\nValueError: no basis could be found for computing the components in the Coordinate frame (W, (d/dt))\n```\n\nThe current ticket fixes this, by trying, if possible, to get the restriction from subdomains (here the restriction to `W` will be obtained from that to `U`, `W` being a subset of `U`)\n\nIssue created by migration from https://trac.sagemath.org/ticket/22637\n\n",
    "created_at": "2017-03-18T11:06:08Z",
    "labels": [
        "component: geometry",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "Fix treatment of tensor field restrictions on parallelizable manifolds",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22400",
    "user": "https://github.com/egourgoulhon"
}
```
CC:  @tscrim

Keywords: tensor field, parallelizable manifold

The following is a bug:

```
sage: S1 = Manifold(1, 'S^1') # the circle
sage: U = S1.open_subset('U') # the complement of one point
sage: Xt.<t> =  U.chart('t:(0,2*pi)') # the standard angle coordinate
sage: V = S1.open_subset('V') # the complement of the point t=pi
sage: Xu.<u> = V.chart('u:(0,2*pi)') # the angle t-pi
sage: S1.declare_union(U, V)
sage: Xt_to_Xu = Xt.transition_map(Xu, (t-pi,), intersection_name='W',
....:                              restrictions1 = t!=pi, restrictions2 = u!=pi)
sage: Xt_to_Xu.inverse()
sage: W = U.intersection(V)
sage: e = S1.vector_frame('e') # a global vector frame (makes S^1 parallelizable)
sage: R2 = Manifold(2, 'R^2', start_index=1) # Euclidean space R^2
sage: X2.<x,y> = R2.chart() # Cartesian coordinates
sage: F = S1.diff_map(R2, {(Xt,X2): [cos(t), sin(t)],
....:                      (Xu,X2): [-cos(u), -sin(u)]}) # embedding S^1 --> R^2
sage: dx = X2.coframe()[1] # the 1-form dx on R^2
sage: a = F.pullback(dx) ; a
1-form on the 1-dimensional differentiable manifold S^1
sage: a.restrict(U).display()
-sin(t) dt
sage: a.restrict(W).display()
...
ValueError: no basis could be found for computing the components in the Coordinate frame (W, (d/dt))
```

The current ticket fixes this, by trying, if possible, to get the restriction from subdomains (here the restriction to `W` will be obtained from that to `U`, `W` being a subset of `U`)

Issue created by migration from https://trac.sagemath.org/ticket/22637





---

archive/issue_comments_311550.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-03-18T11:08:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22400#issuecomment-311550",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_311551.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-03-18T11:08:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22400#issuecomment-311551",
    "user": "https://github.com/egourgoulhon"
}
```

New commits:



---

archive/issue_comments_311552.json:
```json
{
    "body": "LGTM.",
    "created_at": "2017-03-18T14:34:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22400#issuecomment-311552",
    "user": "https://github.com/tscrim"
}
```

LGTM.



---

archive/issue_comments_311553.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-03-18T14:34:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22400#issuecomment-311553",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_311554.json:
```json
{
    "body": "Replying to [comment:2 tscrim]:\n> LGTM.\nThanks for the review!",
    "created_at": "2017-03-19T10:13:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22400#issuecomment-311554",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [comment:2 tscrim]:
> LGTM.
Thanks for the review!



---

archive/issue_comments_311555.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-04-03T21:00:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22400#issuecomment-311555",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_021086.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-04-03T21:00:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22400",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22400#event-21086"
}
```
