# Issue 33433: Add interface to nauty-gentreeg (generator of trees)

archive/issues_033433.json:
```json
{
    "body": "Add interface to Nauty's gentreeg generator of non-isomorphic trees.\n\nIt is slower than `graphs.trees()` but has more options.\n\nIssue created by migration from https://trac.sagemath.org/ticket/33670\n\n",
    "created_at": "2022-04-10T15:22:19Z",
    "labels": [
        "graph theory",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "Add interface to nauty-gentreeg (generator of trees)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33433",
    "user": "@dcoudert"
}
```
Add interface to Nauty's gentreeg generator of non-isomorphic trees.

It is slower than `graphs.trees()` but has more options.

Issue created by migration from https://trac.sagemath.org/ticket/33670





---

archive/issue_comments_475874.json:
```json
{
    "body": "New commits:",
    "created_at": "2022-04-10T15:25:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33433#issuecomment-475874",
    "user": "@dcoudert"
}
```

New commits:



---

archive/issue_comments_475875.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-04-10T15:25:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33433#issuecomment-475875",
    "user": "@dcoudert"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_475876.json:
```json
{
    "body": "typo \"aggrees\"",
    "created_at": "2022-04-14T18:54:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33433#issuecomment-475876",
    "user": "@fchapoton"
}
```

typo "aggrees"



---

archive/issue_comments_475877.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-04-14T20:32:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33433#issuecomment-475877",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_475878.json:
```json
{
    "body": "fixed.",
    "created_at": "2022-04-14T20:33:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33433#issuecomment-475878",
    "user": "@dcoudert"
}
```

fixed.



---

archive/issue_comments_475879.json:
```json
{
    "body": "feu vert",
    "created_at": "2022-04-15T14:16:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33433#issuecomment-475879",
    "user": "@fchapoton"
}
```

feu vert



---

archive/issue_comments_475880.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-04-15T14:16:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33433#issuecomment-475880",
    "user": "@fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_475881.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-05-22T09:57:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33433#issuecomment-475881",
    "user": "@vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_475882.json:
```json
{
    "body": "I've seen a few failures related to this on CI. For example\nhttps://github.com/mkoeppe/sage/runs/7244909758?check_suite_focus=true\n\n```\nsage -t --random-seed=339975412379786288587528093076040376748 src/sage/graphs/generators/families.py\n**********************************************************************\nFile \"src/sage/graphs/generators/families.py\", line 3479, in sage.graphs.generators.families.nauty_gentreeg\nFailed example:\n    [len(list(graphs.nauty_gentreeg(str(i)))) for i in range(1, 15)]\nExpected:\n    [1, 1, 1, 2, 3, 6, 11, 23, 47, 106, 235, 551, 1301, 3159]\nGot:\n    [1, 2, 1, 2, 3, 6, 11, 23, 47, 106, 235, 551, 1301, 3159]\n```\n\n(that's on debian-stretch-standard using system nauty 2.6r7+ds-1)",
    "created_at": "2022-07-08T18:54:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33433#issuecomment-475882",
    "user": "@mkoeppe"
}
```

I've seen a few failures related to this on CI. For example
https://github.com/mkoeppe/sage/runs/7244909758?check_suite_focus=true

```
sage -t --random-seed=339975412379786288587528093076040376748 src/sage/graphs/generators/families.py
**********************************************************************
File "src/sage/graphs/generators/families.py", line 3479, in sage.graphs.generators.families.nauty_gentreeg
Failed example:
    [len(list(graphs.nauty_gentreeg(str(i)))) for i in range(1, 15)]
Expected:
    [1, 1, 1, 2, 3, 6, 11, 23, 47, 106, 235, 551, 1301, 3159]
Got:
    [1, 2, 1, 2, 3, 6, 11, 23, 47, 106, 235, 551, 1301, 3159]
```

(that's on debian-stretch-standard using system nauty 2.6r7+ds-1)



---

archive/issue_comments_475883.json:
```json
{
    "body": "I've opened #34133 for this",
    "created_at": "2022-07-08T19:41:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33433#issuecomment-475883",
    "user": "@mkoeppe"
}
```

I've opened #34133 for this
