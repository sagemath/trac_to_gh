# Issue 22277: Constants in an InfinitePolynomialRing do not act like polynomials

archive/issues_022277.json:
```json
{
    "body": "CC:  tscrim\n\nConstants in an InfinitePolynomialRing are missing many expected methods.  For example:\n\n\n```\nsage: R.<x> = InfinitePolynomialRing(ZZ)\nsage: a = R(3)\nsage: b = 3 + x[0]\nsage: type(a)\n<class 'sage.rings.polynomial.infinite_polynomial_element.InfinitePolynomial_sparse'>\nsage: type(b)\n<class 'sage.rings.polynomial.infinite_polynomial_element.InfinitePolynomial_sparse'>\nsage: b.is_constant()\nFalse\nsage: a.is_constant()\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n<ipython-input-13-4b9a13af2a7a> in <module>()\n----> 1 a.is_constant()\n\n/opt/sage/local/lib/python2.7/site-packages/sage/rings/polynomial/infinite_polynomial_element.pyc in __getattr__(self, s)\n    409             return getattr(self._p,s)\n    410         except AttributeError:\n--> 411             raise AttributeError('%s has no attribute %s'%(self.__class__, s))\n    412 \n    413     def ring(self):\n\nAttributeError: <class 'sage.rings.polynomial.infinite_polynomial_element.InfinitePolynomial_sparse'> has no attribute is_constant\n```\n\n\nAnother example:\n\n```\nsage: b.constant_coefficient()\n3\nsage: a.constant_coefficient()\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n<ipython-input-14-2f3d9cae0a11> in <module>()\n----> 1 a.constant_coefficient()\n\n/opt/sage/local/lib/python2.7/site-packages/sage/rings/polynomial/infinite_polynomial_element.pyc in __getattr__(self, s)\n    409             return getattr(self._p,s)\n    410         except AttributeError:\n--> 411             raise AttributeError('%s has no attribute %s'%(self.__class__, s))\n    412 \n    413     def ring(self):\n\nAttributeError: <class 'sage.rings.polynomial.infinite_polynomial_element.InfinitePolynomial_sparse'> has no attribute constant_coefficient\n```\n\n\nAnd another:\n\n```\nsage: b.degree()\n1\nsage: a.degree()\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n<ipython-input-10-1191944a72df> in <module>()\n----> 1 a.degree()\n\n/opt/sage/local/lib/python2.7/site-packages/sage/rings/polynomial/infinite_polynomial_element.pyc in __getattr__(self, s)\n    409             return getattr(self._p,s)\n    410         except AttributeError:\n--> 411             raise AttributeError('%s has no attribute %s'%(self.__class__, s))\n    412 \n    413     def ring(self):\n\nAttributeError: <class 'sage.rings.polynomial.infinite_polynomial_element.InfinitePolynomial_sparse'> has no attribute degree\n```\n\n\nThis appears to follow from the type of the ``_p`` field of the values:\n\n```\nsage: type(b._p)\n<type 'sage.rings.polynomial.multi_polynomial_libsingular.MPolynomial_libsingular'>\nsage: type(a._p)\n<type 'sage.rings.finite_rings.integer_mod.IntegerMod_int'>\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/22514\n\n",
    "created_at": "2017-03-04T16:07:50Z",
    "labels": [
        "algebra",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "Constants in an InfinitePolynomialRing do not act like polynomials",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22277",
    "user": "msaaltink"
}
```
CC:  tscrim

Constants in an InfinitePolynomialRing are missing many expected methods.  For example:


```
sage: R.<x> = InfinitePolynomialRing(ZZ)
sage: a = R(3)
sage: b = 3 + x[0]
sage: type(a)
<class 'sage.rings.polynomial.infinite_polynomial_element.InfinitePolynomial_sparse'>
sage: type(b)
<class 'sage.rings.polynomial.infinite_polynomial_element.InfinitePolynomial_sparse'>
sage: b.is_constant()
False
sage: a.is_constant()
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-13-4b9a13af2a7a> in <module>()
----> 1 a.is_constant()

/opt/sage/local/lib/python2.7/site-packages/sage/rings/polynomial/infinite_polynomial_element.pyc in __getattr__(self, s)
    409             return getattr(self._p,s)
    410         except AttributeError:
--> 411             raise AttributeError('%s has no attribute %s'%(self.__class__, s))
    412 
    413     def ring(self):

AttributeError: <class 'sage.rings.polynomial.infinite_polynomial_element.InfinitePolynomial_sparse'> has no attribute is_constant
```


Another example:

```
sage: b.constant_coefficient()
3
sage: a.constant_coefficient()
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-14-2f3d9cae0a11> in <module>()
----> 1 a.constant_coefficient()

/opt/sage/local/lib/python2.7/site-packages/sage/rings/polynomial/infinite_polynomial_element.pyc in __getattr__(self, s)
    409             return getattr(self._p,s)
    410         except AttributeError:
--> 411             raise AttributeError('%s has no attribute %s'%(self.__class__, s))
    412 
    413     def ring(self):

AttributeError: <class 'sage.rings.polynomial.infinite_polynomial_element.InfinitePolynomial_sparse'> has no attribute constant_coefficient
```


And another:

```
sage: b.degree()
1
sage: a.degree()
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-10-1191944a72df> in <module>()
----> 1 a.degree()

/opt/sage/local/lib/python2.7/site-packages/sage/rings/polynomial/infinite_polynomial_element.pyc in __getattr__(self, s)
    409             return getattr(self._p,s)
    410         except AttributeError:
--> 411             raise AttributeError('%s has no attribute %s'%(self.__class__, s))
    412 
    413     def ring(self):

AttributeError: <class 'sage.rings.polynomial.infinite_polynomial_element.InfinitePolynomial_sparse'> has no attribute degree
```


This appears to follow from the type of the ``_p`` field of the values:

```
sage: type(b._p)
<type 'sage.rings.polynomial.multi_polynomial_libsingular.MPolynomial_libsingular'>
sage: type(a._p)
<type 'sage.rings.finite_rings.integer_mod.IntegerMod_int'>
```


Issue created by migration from https://trac.sagemath.org/ticket/22514





---

archive/issue_comments_309700.json:
```json
{
    "body": "When the base ring is itself a polynomial ring, we can get mathematically incorrect answers:\n\n```\nsage: S.<y> = ZZ[]\nsage: Q.<z> = InfinitePolynomialRing(S)\nsage: a = Q(1+y)\nsage: a\ny + 1\nsage: b = (1+y+z[0]) - z[0]\nsage: b\ny + 1\nsage: a.parent()\nInfinite polynomial ring in z over Univariate Polynomial Ring in y over Integer Ring\nsage: b.parent()\nInfinite polynomial ring in z over Univariate Polynomial Ring in y over Integer Ring\nsage: a == b\nTrue\nsage: a.is_constant()\nFalse\nsage: b.is_constant()\nTrue\nsage: a.constant_coefficient()\n1\nsage: b.constant_coefficient()\ny + 1\n```\n\n`b` is giving the correct answers, while `a` is not.",
    "created_at": "2017-05-29T21:52:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22277#issuecomment-309700",
    "user": "msaaltink"
}
```

When the base ring is itself a polynomial ring, we can get mathematically incorrect answers:

```
sage: S.<y> = ZZ[]
sage: Q.<z> = InfinitePolynomialRing(S)
sage: a = Q(1+y)
sage: a
y + 1
sage: b = (1+y+z[0]) - z[0]
sage: b
y + 1
sage: a.parent()
Infinite polynomial ring in z over Univariate Polynomial Ring in y over Integer Ring
sage: b.parent()
Infinite polynomial ring in z over Univariate Polynomial Ring in y over Integer Ring
sage: a == b
True
sage: a.is_constant()
False
sage: b.is_constant()
True
sage: a.constant_coefficient()
1
sage: b.constant_coefficient()
y + 1
```

`b` is giving the correct answers, while `a` is not.



---

archive/issue_comments_309701.json:
```json
{
    "body": "There are also issues when creating from strings:\n\n```\nR.<x> = InfinitePolynomialRing(ZZ)\nsage: R(3).parent()\nInfinite polynomial ring in x over Integer Ring\nsage: R(\"3\").parent()\nInteger Ring\n```\n\n\nOther polynomial rings work differently:\n\n```\nsage: S.<y> = ZZ[]\nsage: S(3).parent()\nUnivariate Polynomial Ring in y over Integer Ring\nsage: S(\"3\").parent()\nUnivariate Polynomial Ring in y over Integer Ring\n```\n",
    "created_at": "2017-05-29T21:58:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22277#issuecomment-309701",
    "user": "msaaltink"
}
```

There are also issues when creating from strings:

```
R.<x> = InfinitePolynomialRing(ZZ)
sage: R(3).parent()
Infinite polynomial ring in x over Integer Ring
sage: R("3").parent()
Integer Ring
```


Other polynomial rings work differently:

```
sage: S.<y> = ZZ[]
sage: S(3).parent()
Univariate Polynomial Ring in y over Integer Ring
sage: S("3").parent()
Univariate Polynomial Ring in y over Integer Ring
```




---

archive/issue_comments_309702.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-07-09T20:32:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22277#issuecomment-309702",
    "user": "msaaltink"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_309703.json:
```json
{
    "body": "I am not at all sure that this is the right way to fix the problem, but it is one way to do it.  I got a bit lost in the thickets of the coercion system trying to find a more reasonable place than in the `__init__` method (which has a comment stating that all the needed checks should already have been done elsewhere).\n----\nNew commits:",
    "created_at": "2017-07-09T20:32:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22277#issuecomment-309703",
    "user": "msaaltink"
}
```

I am not at all sure that this is the right way to fix the problem, but it is one way to do it.  I got a bit lost in the thickets of the coercion system trying to find a more reasonable place than in the `__init__` method (which has a comment stating that all the needed checks should already have been done elsewhere).
----
New commits:



---

archive/issue_comments_309704.json:
```json
{
    "body": "To the question\n\n```\n# is there a better way to recognize polynomials than this \"duck typing\"?\n```\n\nthe answer is yes\n\n```\nsage: from sage.rings.polynomial.polynomial_element import is_Polynomial\nsage: from sage.rings.polynomial.multi_polynomial_element import is_MPolynomial\nsage: p1 = ZZ['x'].an_element()\nsage: p2 = ZZ.an_element()\nsage: p3 = ZZ['x']['y'].an_element()\nsage: p4 = ZZ['x,y'].an_element()\nsage: def is_poly(p):\n....:     return is_Polynomial(p) or is_MPolynomial(p)\nsage: [is_poly(p) for p in (p1,p2,p3,p4)]\n[True, False, True, True]\n```\n",
    "created_at": "2017-07-09T21:00:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22277#issuecomment-309704",
    "user": "vdelecroix"
}
```

To the question

```
# is there a better way to recognize polynomials than this "duck typing"?
```

the answer is yes

```
sage: from sage.rings.polynomial.polynomial_element import is_Polynomial
sage: from sage.rings.polynomial.multi_polynomial_element import is_MPolynomial
sage: p1 = ZZ['x'].an_element()
sage: p2 = ZZ.an_element()
sage: p3 = ZZ['x']['y'].an_element()
sage: p4 = ZZ['x,y'].an_element()
sage: def is_poly(p):
....:     return is_Polynomial(p) or is_MPolynomial(p)
sage: [is_poly(p) for p in (p1,p2,p3,p4)]
[True, False, True, True]
```




---

archive/issue_comments_309705.json:
```json
{
    "body": "OK, that's useful, thanks.  In fact, the _p field should always satisfy is_MPolynomial so I should just be able to use that.",
    "created_at": "2017-07-09T21:21:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22277#issuecomment-309705",
    "user": "msaaltink"
}
```

OK, that's useful, thanks.  In fact, the _p field should always satisfy is_MPolynomial so I should just be able to use that.



---

archive/issue_comments_309706.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-07-09T21:22:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22277#issuecomment-309706",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_309707.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-07-10T06:57:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22277#issuecomment-309707",
    "user": "vdelecroix"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_309708.json:
```json
{
    "body": "In the doctests, you need to have a line break before the first example and indent the examples with four spaces.\n\n```\nCheck that :trac:`22514` is fixed\n::\nsage: R.<x> = InfinitePolynomialRing(ZZ)\n```\n\nshould be\n\n```\nCheck that :trac:`22514` is fixed::\n\n   sage: R.<x> = InfinitePolynomialRing(ZZ)\n```\n",
    "created_at": "2017-07-10T06:57:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22277#issuecomment-309708",
    "user": "vdelecroix"
}
```

In the doctests, you need to have a line break before the first example and indent the examples with four spaces.

```
Check that :trac:`22514` is fixed
::
sage: R.<x> = InfinitePolynomialRing(ZZ)
```

should be

```
Check that :trac:`22514` is fixed::

   sage: R.<x> = InfinitePolynomialRing(ZZ)
```




---

archive/issue_comments_309709.json:
```json
{
    "body": "This behavior is wrong\n\n```\nsage: R.<x> = InfinitePolynomialRing(QQ)\nsage: R.gens_dict()['1']\n1\nsage: parent(_)\nRational Field\n```\n\nIn order to respect compatibility with the other polynomial rings, 1 should not be a generator. (And the 1 above should not have been a Rational).",
    "created_at": "2017-07-10T07:04:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22277#issuecomment-309709",
    "user": "vdelecroix"
}
```

This behavior is wrong

```
sage: R.<x> = InfinitePolynomialRing(QQ)
sage: R.gens_dict()['1']
1
sage: parent(_)
Rational Field
```

In order to respect compatibility with the other polynomial rings, 1 should not be a generator. (And the 1 above should not have been a Rational).



---

archive/issue_comments_309710.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-07-10T13:54:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22277#issuecomment-309710",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_309711.json:
```json
{
    "body": "Re: \"In the doctests, you need to have a line break before the first example and indent the examples ...\"\n\nIndeed this was a mistake; I have pushed a fix.\n\nRe \"This behavior is wrong  ... `R.gens_dict()['1']` ...\": that's the way it worked before these patches.  I agree it is wrong, but seems unrelated to this ticket.  Should it perhaps be a new issue?\n\nStrangely enough, `R.gens_dict()[s]` does not exhibit this problem for s = `'0'` or s = `'2'`; the underlying issue seems to be this:\n\n```\nsage: QQ.gens_dict()\n{'1': 1}\n```\n\n\nYou can get a similar issue with \n\n```\nsage: GaussianIntegers().gens_dict()\n{'I': I}\nsage: R.<x> = InfinitePolynomialRing(GaussianIntegers())\nsage: R.gens_dict()['I']\nI\n```\n",
    "created_at": "2017-07-10T14:07:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22277#issuecomment-309711",
    "user": "msaaltink"
}
```

Re: "In the doctests, you need to have a line break before the first example and indent the examples ..."

Indeed this was a mistake; I have pushed a fix.

Re "This behavior is wrong  ... `R.gens_dict()['1']` ...": that's the way it worked before these patches.  I agree it is wrong, but seems unrelated to this ticket.  Should it perhaps be a new issue?

Strangely enough, `R.gens_dict()[s]` does not exhibit this problem for s = `'0'` or s = `'2'`; the underlying issue seems to be this:

```
sage: QQ.gens_dict()
{'1': 1}
```


You can get a similar issue with 

```
sage: GaussianIntegers().gens_dict()
{'I': I}
sage: R.<x> = InfinitePolynomialRing(GaussianIntegers())
sage: R.gens_dict()['I']
I
```




---

archive/issue_comments_309712.json:
```json
{
    "body": "Replying to [comment:12 msaaltink]:\n> Re \"This behavior is wrong  ... `R.gens_dict()['1']` ...\": that's the way it worked before these patches.  I agree it is wrong, but seems unrelated to this ticket.  Should it perhaps be a new issue?\n\nI am not completely sure about that. The infinite polynomial ring is considered as tower of polynomial rings, which we really are considering as algebras over a base ring `R`. In this tower, there is a ring isomorphic to `R`, which is generated by `1` as an `R`-algebra. This is in line with, e.g., **Q**:\n\n```\nsage: QQ.gens()\n(1,)\n```\n\nAs `@`vdelecroix points out, this is inconsistent with polynomial rings in Sage:\n\n```\nsage: R = PolynomialRing(QQ, 0, 'x')\nsage: R.gens()\n()\n```\n\nYet, to me, this says that the polynomial ring over `R` with 0 variables is precisely `{0}`. So I would instead classify this behavior of polynomial rings as a bug.\n\nHowever, this is a little tangential to this ticket and probably should be a separate ticket.",
    "created_at": "2017-07-10T16:12:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22277#issuecomment-309712",
    "user": "tscrim"
}
```

Replying to [comment:12 msaaltink]:
> Re "This behavior is wrong  ... `R.gens_dict()['1']` ...": that's the way it worked before these patches.  I agree it is wrong, but seems unrelated to this ticket.  Should it perhaps be a new issue?

I am not completely sure about that. The infinite polynomial ring is considered as tower of polynomial rings, which we really are considering as algebras over a base ring `R`. In this tower, there is a ring isomorphic to `R`, which is generated by `1` as an `R`-algebra. This is in line with, e.g., **Q**:

```
sage: QQ.gens()
(1,)
```

As `@`vdelecroix points out, this is inconsistent with polynomial rings in Sage:

```
sage: R = PolynomialRing(QQ, 0, 'x')
sage: R.gens()
()
```

Yet, to me, this says that the polynomial ring over `R` with 0 variables is precisely `{0}`. So I would instead classify this behavior of polynomial rings as a bug.

However, this is a little tangential to this ticket and probably should be a separate ticket.



---

archive/issue_comments_309713.json:
```json
{
    "body": "Replying to comment:13 from tscrim:\n\nAn old discussion on sage-devel, https://groups.google.com/forum/#!msg/sage-devel/BRE2F90oezU/xmKC86SRllEJ;context-place=forum/sage-devel suggests the following rule: if `R.base_ring()` is not `R`, then `R.gens()` should return the generators for R over its base ring.  So in your example, `R.base_ring()` is `QQ`, which is not `R` if we are being pedantic (ind indeed Sage is), and so a slavish adoption of the rule says that the empty set of generators is in fact the right answer.\n\nThe same rigid adoption of this rule says Sage is wrong here:\n\n```\nsage: R.<x> = InfinitePolynomialRing(QQ)\nsage: R.ngens()\n1\n```\n\nSurely the answer should be `+Infinity`.  I can see that the `gens_dict` we get for this makes some kind of sense, with an apparent infinity of keys, but `gens` seems wrong - it returns  one \"generator\" that is not even an element of the ring.\n\nI'll do up a separate ticket on the generators.  With that, can *this* ticket go back to the needs_review state (or maybe positive_review), or is there still some other issue?",
    "created_at": "2017-07-24T20:44:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22277#issuecomment-309713",
    "user": "msaaltink"
}
```

Replying to comment:13 from tscrim:

An old discussion on sage-devel, https://groups.google.com/forum/#!msg/sage-devel/BRE2F90oezU/xmKC86SRllEJ;context-place=forum/sage-devel suggests the following rule: if `R.base_ring()` is not `R`, then `R.gens()` should return the generators for R over its base ring.  So in your example, `R.base_ring()` is `QQ`, which is not `R` if we are being pedantic (ind indeed Sage is), and so a slavish adoption of the rule says that the empty set of generators is in fact the right answer.

The same rigid adoption of this rule says Sage is wrong here:

```
sage: R.<x> = InfinitePolynomialRing(QQ)
sage: R.ngens()
1
```

Surely the answer should be `+Infinity`.  I can see that the `gens_dict` we get for this makes some kind of sense, with an apparent infinity of keys, but `gens` seems wrong - it returns  one "generator" that is not even an element of the ring.

I'll do up a separate ticket on the generators.  With that, can *this* ticket go back to the needs_review state (or maybe positive_review), or is there still some other issue?



---

archive/issue_comments_309714.json:
```json
{
    "body": "Borrowing a famous quote, \"It depends on what the meaning of the word 'is' is.\" If 'is' is in the Python sense, then yes. If 'is' means isomorphic to, then no. Plus, I think that it is worse to not break with convention here as 0 generators implies `{0}` a little too much.\n\nI would say it is slightly misleading to call it a \"discussion\" when it is one question and one response. Plus, that is too far out of date to say that should still be the convention. We can always try a new thread on sage-devel and see what people think about this corner case.\n\nHowever, the generators issue can definitely be a separate ticket. Sage has evolved since the initial implementation of `InfinitePolynomialRing`. I think the best way forward is to have an `algebra_generators` (and maybe `gens`) return a subclass of the appropriate `Family` that combines the behavior of `GensDictWithBasering`. Then we kill `ngens` with fire and holy water, where it becomes `R.gens().cardinality()` in real code. Finally, we implement a special `_first_ngens` that returns the appropriate `InfinitePolynomialGen` so we keep supporting the `R.<x> = ...` syntax.",
    "created_at": "2017-07-24T22:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22277#issuecomment-309714",
    "user": "tscrim"
}
```

Borrowing a famous quote, "It depends on what the meaning of the word 'is' is." If 'is' is in the Python sense, then yes. If 'is' means isomorphic to, then no. Plus, I think that it is worse to not break with convention here as 0 generators implies `{0}` a little too much.

I would say it is slightly misleading to call it a "discussion" when it is one question and one response. Plus, that is too far out of date to say that should still be the convention. We can always try a new thread on sage-devel and see what people think about this corner case.

However, the generators issue can definitely be a separate ticket. Sage has evolved since the initial implementation of `InfinitePolynomialRing`. I think the best way forward is to have an `algebra_generators` (and maybe `gens`) return a subclass of the appropriate `Family` that combines the behavior of `GensDictWithBasering`. Then we kill `ngens` with fire and holy water, where it becomes `R.gens().cardinality()` in real code. Finally, we implement a special `_first_ngens` that returns the appropriate `InfinitePolynomialGen` so we keep supporting the `R.<x> = ...` syntax.



---

archive/issue_comments_309715.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-07-27T01:45:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22277#issuecomment-309715",
    "user": "msaaltink"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_309716.json:
```json
{
    "body": "I opened a topic on the correct behaviour of `R.gens()` and `R.gens_dict()` in the `sage-devel` group.  When there's some consensus there, I'll be happy to open a new ticket to have `InfinitePolynomialRing` conform to it.  With that deferred, I think this ticket is ready for review again.",
    "created_at": "2017-07-27T01:45:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22277#issuecomment-309716",
    "user": "msaaltink"
}
```

I opened a topic on the correct behaviour of `R.gens()` and `R.gens_dict()` in the `sage-devel` group.  When there's some consensus there, I'll be happy to open a new ticket to have `InfinitePolynomialRing` conform to it.  With that deferred, I think this ticket is ready for review again.



---

archive/issue_comments_309717.json:
```json
{
    "body": "To [This is the Trac macro *ticket:22514* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#ticket:22514-macro) and [This is the Trac macro *ticket:22514* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#ticket:22514-macro):  This has been stalled for quite a while now and there has been no interest in the general question on `R.gens()` in `sage-devel`.  Is this patch just dead?  Can't we fix this defect?  What, if anything, can I do to move it forward?",
    "created_at": "2018-01-10T15:53:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22277#issuecomment-309717",
    "user": "msaaltink"
}
```

To [This is the Trac macro *ticket:22514* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#ticket:22514-macro) and [This is the Trac macro *ticket:22514* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#ticket:22514-macro):  This has been stalled for quite a while now and there has been no interest in the general question on `R.gens()` in `sage-devel`.  Is this patch just dead?  Can't we fix this defect?  What, if anything, can I do to move it forward?



---

archive/issue_comments_309718.json:
```json
{
    "body": "\"Authors\" field of the ticket sould be filled.",
    "created_at": "2018-01-11T17:11:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22277#issuecomment-309718",
    "user": "vdelecroix"
}
```

"Authors" field of the ticket sould be filled.



---

archive/issue_comments_309719.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-02-17T20:51:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22277#issuecomment-309719",
    "user": "vdelecroix"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_309720.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-02-17T20:51:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22277#issuecomment-309720",
    "user": "vdelecroix"
}
```

New commits:



---

archive/issue_comments_309721.json:
```json
{
    "body": "(rebased on latest beta)",
    "created_at": "2020-02-17T20:51:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22277#issuecomment-309721",
    "user": "vdelecroix"
}
```

(rebased on latest beta)



---

archive/issue_comments_309722.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-02-17T21:06:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22277#issuecomment-309722",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_309723.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-02-17T21:07:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22277#issuecomment-309723",
    "user": "vdelecroix"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_309724.json:
```json
{
    "body": "needs somebody to double check my changes",
    "created_at": "2020-02-17T21:07:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22277#issuecomment-309724",
    "user": "vdelecroix"
}
```

needs somebody to double check my changes



---

archive/issue_comments_309725.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-02-17T23:15:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22277#issuecomment-309725",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_309726.json:
```json
{
    "body": "LGTM.",
    "created_at": "2020-02-17T23:15:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22277#issuecomment-309726",
    "user": "tscrim"
}
```

LGTM.



---

archive/issue_comments_309727.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-02-21T22:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22277#issuecomment-309727",
    "user": "vbraun"
}
```

Resolution: fixed
