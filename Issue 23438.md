# Issue 23438: more specific imports (avoid from sage.all) in pxy files

Issue created by migration from Trac.

Original creator: chapoton

Original creation time: 2017-08-22 15:25:55

CC:  tscrim jdemeyer jhpalmieri

and removing one scaring "import sage.all"


---

Comment by chapoton created at 2017-08-22 15:26:34

New commits:


---

Comment by chapoton created at 2017-08-22 15:26:34

Changing status from new to needs_review.


---

Comment by tscrim created at 2017-08-22 19:39:21

LGTM modulo green patchbot and instead making this change

```diff
diff --git a/src/sage/rings/number_field/number_field_element.pyx b/src/sage/rings/number_field/number_field_element.pyx
index fdceffd..8f3dcff 100644
--- a/src/sage/rings/number_field/number_field_element.pyx
+++ b/src/sage/rings/number_field/number_field_element.pyx
`@``@` -2104,12 +2104,13 `@``@` cdef class NumberFieldElement(FieldElement):
         roots = f.roots()
         if all:
             return [r[0] for r in roots]
-        elif len(roots) > 0:
+        elif roots:
             return roots[0][0]
         else:
             try:
```



---

Comment by jdemeyer created at 2017-08-22 20:11:58

Changing status from needs_review to needs_info.


---

Comment by jdemeyer created at 2017-08-22 20:11:58

Why? In other words: which problem does this solve?


---

Comment by chapoton created at 2017-08-23 06:06:36

During python3 experiments, I meet (apparently) very complicated circular import issues. I hope to mitigate at least some of them. In particular, removing the useless "import sage.all" is clearly a forward step.


---

Comment by git created at 2017-08-23 06:09:06

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2017-08-23 08:16:15

On the other hand, importing from `sage.all` is convenient because it allows internal reorganization of the code without breaking those imports.

For circular imports, I would guess that it's mostly the top-level imports from `sage.all` which might be problematic. Imports inside a function should generally be safe.


---

Comment by chapoton created at 2017-08-23 08:20:45

Yes, I agree with that. I **do not** intend to ban all `from sage.all` imports.

But there seems to be a serious problem with imports in python3-sage (the infamous sage-import-hell ?), and I am trying to prepare the ground for this issue. This branch does no harm, right ?


---

Comment by chapoton created at 2017-08-24 13:01:42

so please, can we turn this to positive_review ?


---

Comment by chapoton created at 2017-08-25 06:04:08

Changing status from needs_info to needs_review.


---

Comment by tscrim created at 2017-08-25 14:04:32

I'm setting a positive review. Jeroen, if you have any more questions/objections, feel free to set it back.


---

Comment by tscrim created at 2017-08-25 14:04:32

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2017-08-25 14:07:10

I already mentioned all my objections :-)


---

Comment by vbraun created at 2017-09-04 06:10:26

Resolution: fixed
