# Issue 29504: Bender-Knuth involutions

archive/issues_029504.json:
```json
{
    "body": "CC:  @kevindilks @mantepse pfannerer @darijgr @tscrim\n\nKeywords: Bender-Knuth, Gelfand-Tsetlin\n\nThis implements the Berenstein-Kirillov construction of the Bender-Knuth involutions on Gelfand-tsetlin patterns.\n\nIssue created by migration from https://trac.sagemath.org/ticket/29741\n\n",
    "created_at": "2020-05-27T12:13:11Z",
    "labels": [
        "combinatorics",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Bender-Knuth involutions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29504",
    "user": "@BruceWestbury"
}
```
CC:  @kevindilks @mantepse pfannerer @darijgr @tscrim

Keywords: Bender-Knuth, Gelfand-Tsetlin

This implements the Berenstein-Kirillov construction of the Bender-Knuth involutions on Gelfand-tsetlin patterns.

Issue created by migration from https://trac.sagemath.org/ticket/29741





---

archive/issue_comments_418873.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-05-27T12:38:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29504#issuecomment-418873",
    "user": "@BruceWestbury"
}
```

New commits:



---

archive/issue_comments_418874.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-05-27T12:38:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29504#issuecomment-418874",
    "user": "@BruceWestbury"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_418875.json:
```json
{
    "body": "A few little things to fix up.\n\nInstead of `'` in the docstring, you should use ```.\n\nYour `toggle` function is over-indented.\n\nI am a little worried about the assignment `result[r] = ...`. It works, but it could change if the internal workings of the GT patterns change (it is also a little too mutable IMO). I think it would be better to do it more explicitly:\n\n```python\nr = n - i\nP = self.parent()\ndata = [list(row) for row in self]\ndata[r] = [toggle(r,s) for s in range(i)]\nreturn P.element_class(P, data)\n```\n",
    "created_at": "2020-05-29T10:43:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29504#issuecomment-418875",
    "user": "@tscrim"
}
```

A few little things to fix up.

Instead of `'` in the docstring, you should use ```.

Your `toggle` function is over-indented.

I am a little worried about the assignment `result[r] = ...`. It works, but it could change if the internal workings of the GT patterns change (it is also a little too mutable IMO). I think it would be better to do it more explicitly:

```python
r = n - i
P = self.parent()
data = [list(row) for row in self]
data[r] = [toggle(r,s) for s in range(i)]
return P.element_class(P, data)
```




---

archive/issue_comments_418876.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-05-29T11:47:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29504#issuecomment-418876",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_418877.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-05-30T00:26:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29504#issuecomment-418877",
    "user": "@tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_418878.json:
```json
{
    "body": "Thanks. LGTM.",
    "created_at": "2020-05-30T00:26:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29504#issuecomment-418878",
    "user": "@tscrim"
}
```

Thanks. LGTM.



---

archive/issue_comments_418879.json:
```json
{
    "body": "This is not good:\n\n```diff\n+            sage: all(all( G.bender_knuth_involution(i).to_tableau() == G.to_tableau().bender_knuth_involution(i) \\\n+                   for i in range(1,len(G)) ) for G in GelfandTsetlinPatterns(top_row=[3,3,3,0,0]))\n```\n\nand should have used\n`....:`}",
    "created_at": "2020-05-30T10:17:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29504#issuecomment-418879",
    "user": "@fchapoton"
}
```

This is not good:

```diff
+            sage: all(all( G.bender_knuth_involution(i).to_tableau() == G.to_tableau().bender_knuth_involution(i) \
+                   for i in range(1,len(G)) ) for G in GelfandTsetlinPatterns(top_row=[3,3,3,0,0]))
```

and should have used
`....:`}



---

archive/issue_comments_418880.json:
```json
{
    "body": "I am not sure what you want me to do.\nWrite a tester function...?",
    "created_at": "2020-05-30T10:54:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29504#issuecomment-418880",
    "user": "@BruceWestbury"
}
```

I am not sure what you want me to do.
Write a tester function...?



---

archive/issue_comments_418881.json:
```json
{
    "body": "This was just a comment about the line break. In the doc, we never use the character \"\\\" to break the long lines, but use `....:` to start the next logical line.\n\nSee for example\n\nhttps://doc.sagemath.org/html/en/reference/graphs/sage/graphs/spanning_tree.html#sage.graphs.spanning_tree.filter_kruskal_iterator",
    "created_at": "2020-05-30T11:22:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29504#issuecomment-418881",
    "user": "@fchapoton"
}
```

This was just a comment about the line break. In the doc, we never use the character "\" to break the long lines, but use `....:` to start the next logical line.

See for example

https://doc.sagemath.org/html/en/reference/graphs/sage/graphs/spanning_tree.html#sage.graphs.spanning_tree.filter_kruskal_iterator



---

archive/issue_comments_418882.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2020-05-30T11:44:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29504#issuecomment-418882",
    "user": "git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_418883.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2020-05-30T11:44:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29504#issuecomment-418883",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_418884.json:
```json
{
    "body": "Thanks for catching that `@`chapoton.",
    "created_at": "2020-05-31T05:28:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29504#issuecomment-418884",
    "user": "@tscrim"
}
```

Thanks for catching that `@`chapoton.



---

archive/issue_comments_418885.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-05-31T05:28:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29504#issuecomment-418885",
    "user": "@tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_418886.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-05-31T23:11:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29504#issuecomment-418886",
    "user": "@vbraun"
}
```

Resolution: fixed
