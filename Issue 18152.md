# Issue 18152: Fix comparison for MPComplexNumber

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2015-05-09 12:02:50

The Cython extension type `MPComplexNumber` uses `__cmp__` which is not the preferred way to implement comparisons.


---

Comment by jdemeyer created at 2015-05-09 12:46:44

New commits:


---

Comment by jdemeyer created at 2015-05-09 12:46:44

Changing status from new to needs_review.


---

Comment by tscrim created at 2015-05-09 23:46:33

Does `_cmp_` need to be `cpdef` or can it be `cdef` (as I thought there was a small speed penalty for the former)? Also can you add a doctest for each of the new (boilerplate) methods?


---

Comment by jdemeyer created at 2015-05-10 07:02:09

Replying to [comment:3 tscrim]:
> Does `_cmp_` need to be `cpdef`
In Sage, there are many `Parent` and `Element` classes implemented in Python, so it must be `cpdef`.

> I thought there was a small speed penalty for the former
That's true, but the penalty should be really small.

> Also can you add a doctest for each of the new (boilerplate) methods?
There is really no point for that, what could I possibly put in there that is not redundant?


---

Comment by tscrim created at 2015-05-10 16:16:41

Replying to [comment:4 jdemeyer]:
> Replying to [comment:3 tscrim]:
> > Does `_cmp_` need to be `cpdef`
> In Sage, there are many `Parent` and `Element` classes implemented in Python, so it must be `cpdef`.

Ah, it has to be `cpdef` in order to be compatible with the `def _cmp_` in `Element`.

> > Also can you add a doctest for each of the new (boilerplate) methods?
> There is really no point for that, what could I possibly put in there that is not redundant?

Except for our policy that any new function/method must be documented, but I'm okay with redundant doctests. Perhaps some comparisons with `<=` or `>=`?


---

Comment by jdemeyer created at 2015-05-11 07:36:32

Replying to [comment:5 tscrim]:
> but I'm okay with redundant doctests.
I'm not OK with completely pointless and redundant doctests which don't appear in the reference manual anyway.


---

Comment by jdemeyer created at 2015-05-21 12:12:37

Note that the boilerplate comparison methods will be deleted in #18329. So there is even less reason to add doctests since they will be removed in a follow-up ticket.


---

Comment by tscrim created at 2015-05-21 21:53:00

Fair enough. Positive review.


---

Comment by tscrim created at 2015-05-21 21:53:00

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-05-23 06:10:22

Resolution: fixed
