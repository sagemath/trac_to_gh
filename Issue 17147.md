# Issue 17147: Slowness when calling Graph(a_dictionary)

Issue created by migration from Trac.

Original creator: ncohen

Original creation time: 2014-11-23 10:55:11

CC:  vdelecroix tscrim dimpase dcoudert jmantysalo azi

It has been reported by Jean Betrema on sage-devel [1] that building a graph from a dictionary was actually quite slow


```
sage: d=graphs.Grid2dGraph(100,100).to_dictionary()
sage: %time Graph(d)
CPU times: user 2.67 s, sys: 20 ms, total: 2.69 s
Wall time: 2.63 s
Graph on 10000 vertices
```


This does not make any sense, and indeed it only comes from a miswritten line in the code. After this branch is applied, it becomes


```
sage: d=graphs.Grid2dGraph(100,100).to_dictionary()
sage: %time Graph(d)
CPU times: user 104 ms, sys: 4 ms, total: 108 ms
Wall time: 97.2 ms
Graph on 10000 vertices
```


Nathann

[1] https://groups.google.com/d/msg/sage-devel/x3h4m3LjWkI/1HY80TsjxCoJ


---

Comment by ncohen created at 2014-11-23 10:55:33

Changing component from PLEASE CHANGE to graph theory.


---

Comment by ncohen created at 2014-11-23 10:55:33

Changing status from new to needs_review.


---

Comment by git created at 2014-11-23 10:56:06

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2014-11-23 21:06:33

Changing status from needs_review to positive_review.


---

Comment by vdelecroix created at 2014-11-23 21:06:33

I love this `set().union(...)` ;-D

There are other easy optimizations... follow-up on #17385


Vincent


---

Comment by ncohen created at 2014-11-24 03:15:31

Yo !

> There are other easy optimizations... follow-up on #17385

Ahahah. Yeah yeah, you taught me that trick in some design patch I believe `:-)`

Thanks for the review !

Nathann


---

Comment by vbraun created at 2014-11-24 15:59:42

Resolution: fixed
