# Issue 33811: save_session() crashes when any variable is an ETuple

Issue created by migration from https://trac.sagemath.org/ticket/34048

Original creator: @denissunko

Original creation time: 2022-06-22 07:24:54

CC:  was tscrim

Keywords: save_session, ETuple


```
┌────────────────────────────────────────────────────────────────────┐
│ SageMath version 9.6, Release Date: 2022-05-15                     │
│ Using Python 3.9.2. Type "help()" for help.                        │
└────────────────────────────────────────────────────────────────────┘
sage: from sage.rings.polynomial.polydict import ETuple
sage: key = ETuple((1,2,3,4))
sage: save_session('data/sessions/example')
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-3-d30e03fac8a0> in <module>
----> 1 save_session('data/sessions/example')

/opt/Sage/sage-9.6/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/misc/session.pyx in sage.misc.session.save_session (build/cythonized/sage/misc/session.c:2698)()
    304     # We iterate only over the new variables that were defined in this
    305     # session, since those are the only ones we will save.
--> 306     for k in show_identifiers(hidden = True):
    307         try:
    308             x = state[k]

/opt/Sage/sage-9.6/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/misc/session.pyx in sage.misc.session.show_identifiers (build/cythonized/sage/misc/session.c:2461)()
    221 
    222     return sorted([x for x, v in state.items() if _is_new_var(x, v, hidden)
--> 223                    and not _in_extra_globals(x, v)])
    224 
    225 

/opt/Sage/sage-9.6/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/misc/session.pyx in sage.misc.session.show_identifiers._in_extra_globals (build/cythonized/sage/misc/session.c:2203)()
    218     _none = object()
    219     def _in_extra_globals(name, val):
--> 220         return val == DocTestTask.extra_globals.get(name, _none)
    221 
    222     return sorted([x for x, v in state.items() if _is_new_var(x, v, hidden)

TypeError: Argument 'other' has incorrect type (expected sage.rings.polynomial.polydict.ETuple, got object)
```

