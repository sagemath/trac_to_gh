# Issue 31149: Move list of scripts from setup.py to setup.cfg

Issue created by migration from https://trac.sagemath.org/ticket/31386

Original creator: mkoeppe

Original creation time: 2021-02-12 02:09:49

CC:  fbissey dimpase @kliem jhpalmieri klee @tobiasdiez




---

Comment by mkoeppe created at 2021-09-10 06:10:41

reduced scope of the ticket


---

Comment by git created at 2021-11-18 22:49:20

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-11-18 22:51:37

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2021-11-18 22:52:26

Changing status from needs_review to needs_work.


---

Comment by git created at 2021-11-18 23:02:16

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-11-18 23:15:04

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-11-18 23:15:16

Changing status from needs_work to needs_review.


---

Comment by jhpalmieri created at 2021-11-20 00:20:23

The documentation doesn't build for me; the log file says

```
make[4]: warning: -jN forced in submake: disabling jobserver mode.
Traceback (most recent call last):
  File "/usr/local/Cellar/python@3.9/3.9.8/Frameworks/Python.framework/Versions/3.9/lib/python3.9/runpy.py", line 188, in _run_module_as_main
    mod_name, mod_spec, code = _get_module_details(mod_name, _Error)
  File "/usr/local/Cellar/python@3.9/3.9.8/Frameworks/Python.framework/Versions/3.9/lib/python3.9/runpy.py", line 147, in _get_module_details
    return _get_module_details(pkg_main_name, error)
  File "/usr/local/Cellar/python@3.9/3.9.8/Frameworks/Python.framework/Versions/3.9/lib/python3.9/runpy.py", line 111, in _get_module_details
    __import__(pkg_name)
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage_docbuild/__init__.py", line 57, in <module>
    import sage.all
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/all.py", line 111, in <module>
    from sage.misc.all       import *         # takes a while
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/misc/all.py", line 90, in <module>
    from .functional import (additive_order,
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/misc/functional.py", line 26, in <module>
    from sage.rings.complex_double import CDF
  File "sage/rings/complex_double.pyx", line 113, in init sage.rings.complex_double (build/cythonized/sage/rings/complex_double.c:24979)
  File "sage/rings/complex_mpfr.pyx", line 210, in sage.rings.complex_mpfr.ComplexField (build/cythonized/sage/rings/complex_mpfr.c:5570)
  File "sage/rings/complex_mpfr.pyx", line 309, in sage.rings.complex_mpfr.ComplexField_class.__init__ (build/cythonized/sage/rings/complex_mpfr.c:5934)
  File "sage/rings/complex_mpfr.pyx", line 3390, in sage.rings.complex_mpfr.RRtoCC.__init__ (build/cythonized/sage/rings/complex_mpfr.c:29162)
  File "sage/categories/map.pyx", line 125, in sage.categories.map.Map.__init__ (build/cythonized/sage/categories/map.c:3623)
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/categories/homset.py", line 395, in Hom
    H = Hom(X, Y, category, check=False)
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/categories/homset.py", line 422, in Hom
    H = X._Hom_(Y, category)
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/categories/rings.py", line 422, in _Hom_
    from sage.rings.homset import RingHomset
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/rings/homset.py", line 18, in <module>
    from . import quotient_ring
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/rings/quotient_ring.py", line 113, in <module>
    import sage.rings.polynomial.multi_polynomial_ideal
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/rings/polynomial/multi_polynomial_ideal.py", line 235, in <module>
    from sage.interfaces.all import (singular as singular_default,
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/interfaces/all.py", line 23, in <module>
    from .maxima import maxima, Maxima
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/interfaces/maxima.py", line 1248, in <module>
    maxima = Maxima(init_code = ['display2d : false',
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/interfaces/maxima.py", line 541, in __init__
    raise RuntimeError('You must get the file sage-maxima.lisp')
RuntimeError: You must get the file sage-maxima.lisp
make -j6 doc-inventory--
make[5]: warning: -jN forced in submake: disabling jobserver mode.
cd /Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6 && ./sage --docbuild --no-pdf-links .o inventory 
Traceback (most recent call last):
  File "/usr/local/Cellar/python@3.9/3.9.8/Frameworks/Python.framework/Versions/3.9/lib/python3.9/runpy.py", line 188, in _run_module_as_main
    mod_name, mod_spec, code = _get_module_details(mod_name, _Error)
  File "/usr/local/Cellar/python@3.9/3.9.8/Frameworks/Python.framework/Versions/3.9/lib/python3.9/runpy.py", line 147, in _get_module_details
    return _get_module_details(pkg_main_name, error)
  File "/usr/local/Cellar/python@3.9/3.9.8/Frameworks/Python.framework/Versions/3.9/lib/python3.9/runpy.py", line 111, in _get_module_details
    __import__(pkg_name)
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage_docbuild/__init__.py", line 57, in <module>
    import sage.all
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/all.py", line 111, in <module>
    from sage.misc.all       import *         # takes a while
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/misc/all.py", line 90, in <module>
    from .functional import (additive_order,
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/misc/functional.py", line 26, in <module>
    from sage.rings.complex_double import CDF
  File "sage/rings/complex_double.pyx", line 113, in init sage.rings.complex_double (build/cythonized/sage/rings/complex_double.c:24979)
  File "sage/rings/complex_mpfr.pyx", line 210, in sage.rings.complex_mpfr.ComplexField (build/cythonized/sage/rings/complex_mpfr.c:5570)
  File "sage/rings/complex_mpfr.pyx", line 309, in sage.rings.complex_mpfr.ComplexField_class.__init__ (build/cythonized/sage/rings/complex_mpfr.c:5934)
  File "sage/rings/complex_mpfr.pyx", line 3390, in sage.rings.complex_mpfr.RRtoCC.__init__ (build/cythonized/sage/rings/complex_mpfr.c:29162)
  File "sage/categories/map.pyx", line 125, in sage.categories.map.Map.__init__ (build/cythonized/sage/categories/map.c:3623)
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/categories/homset.py", line 395, in Hom
    H = Hom(X, Y, category, check=False)
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/categories/homset.py", line 422, in Hom
    H = X._Hom_(Y, category)
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/categories/rings.py", line 422, in _Hom_
    from sage.rings.homset import RingHomset
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/rings/homset.py", line 18, in <module>
    from . import quotient_ring
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/rings/quotient_ring.py", line 113, in <module>
    import sage.rings.polynomial.multi_polynomial_ideal
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/rings/polynomial/multi_polynomial_ideal.py", line 235, in <module>
    from sage.interfaces.all import (singular as singular_default,
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/interfaces/all.py", line 23, in <module>
    from .maxima import maxima, Maxima
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/interfaces/maxima.py", line 1248, in <module>
    maxima = Maxima(init_code = ['display2d : false',
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/interfaces/maxima.py", line 541, in __init__
    raise RuntimeError('You must get the file sage-maxima.lisp')
RuntimeError: You must get the file sage-maxima.lisp
make[5]: *** [doc-inventory--.o] Error 1
make[4]: *** [doc-inventory-reference] Error 2
```



---

Comment by mkoeppe created at 2021-11-20 02:07:14

I think you may have to run `./bootstrap` manually


---

Comment by git created at 2021-11-26 23:01:28

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by dimpase created at 2021-11-27 12:26:54

Hmm, aren't `setup.cfg` outdated? Or YMMV?


---

Comment by @tobiasdiez created at 2021-11-27 16:35:31

I'm also in favor of using Pyproject.toml as much as possible. Setup.cfg will be deprecated eventually. See also https://github.com/pypa/setuptools/issues/1688.


---

Comment by mkoeppe created at 2021-11-27 16:44:11

Replying to [comment:20 dimpase]:
> Hmm, aren't `setup.cfg` outdated?

Nope. Part of current best practices when using setuptools.


---

Comment by jhpalmieri created at 2021-12-07 21:24:53

[edit: sorry, forgot to run `./bootstrap` again.]


---

Comment by jhpalmieri created at 2021-12-07 23:21:44

Are there other concerns here? This works for me.


---

Comment by jhpalmieri created at 2021-12-13 21:40:26

Let's merge this. Everyone should feel free to add their name to the list of reviewers.


---

Comment by jhpalmieri created at 2021-12-13 21:40:26

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-12-14 02:08:42

Thanks!


---

Comment by vbraun created at 2021-12-23 20:26:12

Resolution: fixed
