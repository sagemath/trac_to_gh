# Issue 19032: add category Posets to ZZ and QQ

Issue created by migration from Trac.

Original creator: dkrenn

Original creation time: 2015-09-22 12:52:52

CC:  ncohen behackl tscrim nthiery

`ZZ` and `QQ` should have the category `Posets` as well.


---

Comment by dkrenn created at 2015-09-22 13:30:16

New commits:


---

Comment by dkrenn created at 2015-09-22 13:30:16

Changing status from new to needs_review.


---

Comment by dkrenn created at 2015-09-22 13:31:21

Changing status from needs_review to needs_work.


---

Comment by vdelecroix created at 2015-09-22 13:33:42

Hola,

We should try to make the cartesian products of copies of `ZZ` compatible with the current behavior of `ZZ^n` (actually, I would feel more confortable if `cartesian_product([ZZ,ZZ])` would return `ZZ^2`). But vectors are compared with respect to the lexicographic ordering

```
sage: V = ZZ^2
sage: my_list = [V((i,j)) for i in range(3) for j in range(3)]
[(0, 0), (0, 1), (0, 2), (1, 0), (1, 1), (1, 2), (2, 0), (2, 1), (2, 2)]
```

So it is not (strictly speaking) a cartesian product of posets. Several solutions:
 - change the behavior of comparisons for vectors
   - modify `richcmp` to be the product order and keep `cmp` to be the lexicographic ordering in order to keep the sort feature... we will have some Python3 troubles later on
   - break the sort operation
 - find a compromise with respect to the order of the product (how?)

Having so many category for `ZZ` might also be a problem when it comes to morphisms. What should be

```
sage: Hom(ZZ,ZZ)
sage: Hom(ZZ^2, ZZ^2)
```

In the category of `Euclidean domains + Posets` there are few elements! And most of the time, when people think about `ZZ^2` they do not care about the poset structure. Something likethe following should work out of the box

```
sage: Hom(ZZ^2, ZZ^2, Posets())
sage: Hom(ZZ^2, ZZ^2, Modules(ZZ))
```

My question is about the default behavior of `Hom` with this multiple categories.

Vincent


---

Comment by vdelecroix created at 2015-09-22 13:34:19

Could you base the branch on the latest beta? Trac is not able to automatically merge.


---

Comment by git created at 2015-09-22 13:39:30

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dkrenn created at 2015-09-22 13:40:25

Replying to [comment:7 vdelecroix]:
> Could you base the branch on the latest beta? Trac is not able to automatically merge.

Done.


---

Comment by dkrenn created at 2015-09-22 13:58:54

Changing status from needs_work to needs_info.


---

Comment by dkrenn created at 2015-10-21 11:06:41

Replying to [comment:6 vdelecroix]:
> Having so many category for `ZZ` might also be a problem when it comes to morphisms. What should be
> {{{
> sage: Hom(ZZ,ZZ)
> sage: Hom(ZZ^2, ZZ^2)
> }}}
> In the category of `Euclidean domains + Posets` there are few elements! And most of the time, when people think about `ZZ^2` they do not care about the poset structure. Something likethe following should work out of the box
> {{{
> sage: Hom(ZZ^2, ZZ^2, Posets())
> sage: Hom(ZZ^2, ZZ^2, Modules(ZZ))
> }}}
> My question is about the default behavior of `Hom` with this multiple categories.

What would be a solution to this or what are possible scenarios? What can we do to get this ticket (make ZZ and QQ posets) towards a positive review?


---

Comment by vdelecroix created at 2015-10-21 12:06:23

Replying to [comment:12 dkrenn]:
> Replying to [comment:6 vdelecroix]:
> > Having so many category for `ZZ` might also be a problem when it comes to morphisms. What should be
> > {{{
> > sage: Hom(ZZ,ZZ)
> > sage: Hom(ZZ^2, ZZ^2)
> > }}}
> > In the category of `Euclidean domains + Posets` there are few elements! And most of the time, when people think about `ZZ^2` they do not care about the poset structure. Something likethe following should work out of the box
> > {{{
> > sage: Hom(ZZ^2, ZZ^2, Posets())
> > sage: Hom(ZZ^2, ZZ^2, Modules(ZZ))
> > }}}
> > My question is about the default behavior of `Hom` with this multiple categories.
> 
> What would be a solution to this or what are possible scenarios? What can we do to get this ticket (make ZZ and QQ posets) towards a positive review?

Indeed, it was a question... One possibility: make some priorities for the `Hom` functor in `sage.categories.homset`.

Currently, to deduce the category of `Hom(X,Y)` the functor does `X.category()._meet_(Y.category())` which is documented as being "the largest common subcategory of self and other". Instead of `_meet_` one could try to implement a more dedicated method that forget some of the categories (such as the Poset one if there is some algebraic structure).

Vincent


---

Comment by dkrenn created at 2015-10-21 15:10:23

Replying to [comment:13 vdelecroix]:
> Indeed, it was a question... One possibility: make some priorities for the `Hom` functor in `sage.categories.homset`.
> 
> Currently, to deduce the category of `Hom(X,Y)` the functor does `X.category()._meet_(Y.category())` which is documented as being "the largest common subcategory of self and other". Instead of `_meet_` one could try to implement a more dedicated method that forget some of the categories (such as the Poset one if there is some algebraic structure).

This could be something like an negated version of `extra_super_categories`, which kicks the specified (forbidden) categories out...


---

Comment by mkoeppe created at 2021-03-15 22:07:04

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.


---

Comment by mkoeppe created at 2021-07-19 00:44:56

Setting a new milestone for this ticket based on a cursory review.


---

Comment by mkoeppe created at 2021-12-18 19:53:12

Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.
