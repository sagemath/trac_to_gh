# Issue 20292: Get rid of SAGE_ORIG_LD_LIBRARY_PATH

Issue created by migration from https://trac.sagemath.org/ticket/20529

Original creator: vbraun

Original creation time: 2016-05-01 16:43:54

CC:  embray jdemeyer




---

Comment by chapoton created at 2016-05-01 18:35:13

New commits:


---

Comment by git created at 2016-05-01 18:36:43

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-05-01 19:55:09

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by vbraun created at 2016-05-01 19:56:30

Changing status from new to needs_review.


---

Comment by vbraun created at 2016-05-01 19:56:30

IMHO a bit more drastic action is needed ;-)


---

Comment by chapoton created at 2016-05-01 19:58:58

Right, thanks for taking care of that. Let us wait for a bot report.


---

Comment by vdelecroix created at 2016-05-01 22:56:51

Why `SAGE_ORIG_LD_LIBRARY_PATH_SET` was introduced in the first place?


---

Comment by vdelecroix created at 2016-05-01 22:58:21

seems to go back to the old #975...


---

Comment by chapoton created at 2016-05-02 07:33:47

Hmm, sadly there will be no bot report, as this is not a "safe" ticket. And the "safe_only=False" mode of the bot is not something I would try myself, as it has not been
used or taken care of for quite a long time.


---

Comment by chapoton created at 2016-05-03 06:07:07

ok, I have tested that on a linux machine, and all tests passed.

Maybe someone on Darwin could confirm ?


---

Comment by vbraun created at 2016-05-03 20:35:24

thats what bots are for...


---

Comment by vbraun created at 2016-05-06 22:06:01

Any progress?


---

Comment by chapoton created at 2016-05-08 08:49:32

No.

0) once again, the patchbots are not going to look at that, because it is not "safe".
1) besides, there are very few patchbots running, and not a single one on Darwin.
2) I have no Darwin machine to check it myself.

So no progress, no way.


---

Comment by vbraun created at 2016-05-08 08:59:16

The buildbot will test it on OSX


---

Comment by chapoton created at 2016-05-08 09:02:59

Hello !

Does this mean that I need to set a positive review *before* this is tested on Darwin ?


---

Comment by vbraun created at 2016-05-08 09:04:07

Yes. Related: Review is about reading the code, not about testing it by hand on multiple platforms.


---

Comment by chapoton created at 2016-05-09 08:15:10

There remains an "LD_LIBRARY_PATH" in the Cygwin section of src/bin/sage-env. But maybe this is still needed ?
Anyway, this is way above my technical expertise. So, help is required, please!


---

Comment by embray created at 2016-05-09 09:51:21

This was added in #14380.  It should still be there (library search paths are "weird" in Cygwin due to the use of Windows conventions for searching for DLLs--as for `$LD_LIBRARY_PATH` it doesn't normally need to be set but does affect `dlopen()` calls so we set it here).


---

Comment by chapoton created at 2016-07-07 06:51:15

Could please somebody review this ticket ? This prevents one of my patchbots from working
correctly. I do not feel able to review this myself.


---

Comment by embray created at 2016-07-07 10:07:36

I would but the description of the ticket is empty and I have no context for this.  Why for example is `sage.repl.interpreter` being removed entirely?


---

Comment by vbraun created at 2016-07-07 10:43:45

Replying to [comment:19 embray]:
> I would but the description of the ticket is empty and I have no context for this.  Why for example is `sage.repl.interpreter` being removed entirely?

It is not if you look at the commit https://git.sagemath.org/sage.git/commit/?h=82d0a8c49fa59d57fc862d89dcdd974011d92cc0

This seems odd in the trac git diff viewer...


---

Comment by embray created at 2016-07-07 12:57:34

Weird, something is definitely amiss with the diff viewer....


---

Comment by embray created at 2016-07-07 12:59:43

So I guess it's safe to say nobody actually needs `SAGE_ORIG_LD_LIBRARY_PATH` anymore?  In that case, looks good to me.


---

Comment by nbruin created at 2016-07-07 15:49:09

I would expect that `sage-native-execute` (which is necessary for various interfaces and tools in sage) would need to restore the original `LD_LIBRARY_PATH`. See #9386.


---

Comment by vbraun created at 2016-07-07 15:53:31

We don't set `LD_LIBRARY_PATH` any more, which is why we don't need `SAGE_ORIG_LD_LIBRARY_PATH`


---

Comment by chapoton created at 2016-07-11 09:01:53

Eric, are you ready to set that to positive review ?


---

Comment by embray created at 2016-07-11 12:02:31

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2016-07-11 12:07:04

Thanks a lot.


---

Comment by vbraun created at 2016-07-12 07:25:15

Resolution: fixed
