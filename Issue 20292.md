# Issue 20292: Get rid of SAGE_ORIG_LD_LIBRARY_PATH

archive/issues_020292.json:
```json
{
    "body": "CC:  embray jdemeyer\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/20529\n\n",
    "created_at": "2016-05-01T16:43:54Z",
    "labels": [
        "build",
        "major",
        "enhancement"
    ],
    "title": "Get rid of SAGE_ORIG_LD_LIBRARY_PATH",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20292",
    "user": "vbraun"
}
```
CC:  embray jdemeyer



Issue created by migration from https://trac.sagemath.org/ticket/20529





---

archive/issue_comments_279743.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-05-01T18:35:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20292#issuecomment-279743",
    "user": "chapoton"
}
```

New commits:



---

archive/issue_comments_279744.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-05-01T18:36:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20292#issuecomment-279744",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_279745.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-05-01T19:55:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20292#issuecomment-279745",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_279746.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-05-01T19:56:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20292#issuecomment-279746",
    "user": "vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_279747.json:
```json
{
    "body": "IMHO a bit more drastic action is needed ;-)",
    "created_at": "2016-05-01T19:56:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20292#issuecomment-279747",
    "user": "vbraun"
}
```

IMHO a bit more drastic action is needed ;-)



---

archive/issue_comments_279748.json:
```json
{
    "body": "Right, thanks for taking care of that. Let us wait for a bot report.",
    "created_at": "2016-05-01T19:58:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20292#issuecomment-279748",
    "user": "chapoton"
}
```

Right, thanks for taking care of that. Let us wait for a bot report.



---

archive/issue_comments_279749.json:
```json
{
    "body": "Why `SAGE_ORIG_LD_LIBRARY_PATH_SET` was introduced in the first place?",
    "created_at": "2016-05-01T22:56:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20292#issuecomment-279749",
    "user": "vdelecroix"
}
```

Why `SAGE_ORIG_LD_LIBRARY_PATH_SET` was introduced in the first place?



---

archive/issue_comments_279750.json:
```json
{
    "body": "seems to go back to the old #975...",
    "created_at": "2016-05-01T22:58:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20292#issuecomment-279750",
    "user": "vdelecroix"
}
```

seems to go back to the old #975...



---

archive/issue_comments_279751.json:
```json
{
    "body": "Hmm, sadly there will be no bot report, as this is not a \"safe\" ticket. And the \"safe_only=False\" mode of the bot is not something I would try myself, as it has not been\nused or taken care of for quite a long time.",
    "created_at": "2016-05-02T07:33:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20292#issuecomment-279751",
    "user": "chapoton"
}
```

Hmm, sadly there will be no bot report, as this is not a "safe" ticket. And the "safe_only=False" mode of the bot is not something I would try myself, as it has not been
used or taken care of for quite a long time.



---

archive/issue_comments_279752.json:
```json
{
    "body": "ok, I have tested that on a linux machine, and all tests passed.\n\nMaybe someone on Darwin could confirm ?",
    "created_at": "2016-05-03T06:07:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20292#issuecomment-279752",
    "user": "chapoton"
}
```

ok, I have tested that on a linux machine, and all tests passed.

Maybe someone on Darwin could confirm ?



---

archive/issue_comments_279753.json:
```json
{
    "body": "thats what bots are for...",
    "created_at": "2016-05-03T20:35:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20292#issuecomment-279753",
    "user": "vbraun"
}
```

thats what bots are for...



---

archive/issue_comments_279754.json:
```json
{
    "body": "Any progress?",
    "created_at": "2016-05-06T22:06:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20292#issuecomment-279754",
    "user": "vbraun"
}
```

Any progress?



---

archive/issue_comments_279755.json:
```json
{
    "body": "No.\n\n0) once again, the patchbots are not going to look at that, because it is not \"safe\".\n1) besides, there are very few patchbots running, and not a single one on Darwin.\n2) I have no Darwin machine to check it myself.\n\nSo no progress, no way.",
    "created_at": "2016-05-08T08:49:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20292#issuecomment-279755",
    "user": "chapoton"
}
```

No.

0) once again, the patchbots are not going to look at that, because it is not "safe".
1) besides, there are very few patchbots running, and not a single one on Darwin.
2) I have no Darwin machine to check it myself.

So no progress, no way.



---

archive/issue_comments_279756.json:
```json
{
    "body": "The buildbot will test it on OSX",
    "created_at": "2016-05-08T08:59:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20292#issuecomment-279756",
    "user": "vbraun"
}
```

The buildbot will test it on OSX



---

archive/issue_comments_279757.json:
```json
{
    "body": "Hello !\n\nDoes this mean that I need to set a positive review **before** this is tested on Darwin ?",
    "created_at": "2016-05-08T09:02:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20292#issuecomment-279757",
    "user": "chapoton"
}
```

Hello !

Does this mean that I need to set a positive review **before** this is tested on Darwin ?



---

archive/issue_comments_279758.json:
```json
{
    "body": "Yes. Related: Review is about reading the code, not about testing it by hand on multiple platforms.",
    "created_at": "2016-05-08T09:04:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20292#issuecomment-279758",
    "user": "vbraun"
}
```

Yes. Related: Review is about reading the code, not about testing it by hand on multiple platforms.



---

archive/issue_comments_279759.json:
```json
{
    "body": "There remains an \"LD_LIBRARY_PATH\" in the Cygwin section of src/bin/sage-env. But maybe this is still needed ?\nAnyway, this is way above my technical expertise. So, help is required, please!",
    "created_at": "2016-05-09T08:15:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20292#issuecomment-279759",
    "user": "chapoton"
}
```

There remains an "LD_LIBRARY_PATH" in the Cygwin section of src/bin/sage-env. But maybe this is still needed ?
Anyway, this is way above my technical expertise. So, help is required, please!



---

archive/issue_comments_279760.json:
```json
{
    "body": "This was added in #14380.  It should still be there (library search paths are \"weird\" in Cygwin due to the use of Windows conventions for searching for DLLs--as for `$LD_LIBRARY_PATH` it doesn't normally need to be set but does affect `dlopen()` calls so we set it here).",
    "created_at": "2016-05-09T09:51:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20292#issuecomment-279760",
    "user": "embray"
}
```

This was added in #14380.  It should still be there (library search paths are "weird" in Cygwin due to the use of Windows conventions for searching for DLLs--as for `$LD_LIBRARY_PATH` it doesn't normally need to be set but does affect `dlopen()` calls so we set it here).



---

archive/issue_comments_279761.json:
```json
{
    "body": "Could please somebody review this ticket ? This prevents one of my patchbots from working\ncorrectly. I do not feel able to review this myself.",
    "created_at": "2016-07-07T06:51:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20292#issuecomment-279761",
    "user": "chapoton"
}
```

Could please somebody review this ticket ? This prevents one of my patchbots from working
correctly. I do not feel able to review this myself.



---

archive/issue_comments_279762.json:
```json
{
    "body": "I would but the description of the ticket is empty and I have no context for this.  Why for example is `sage.repl.interpreter` being removed entirely?",
    "created_at": "2016-07-07T10:07:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20292#issuecomment-279762",
    "user": "embray"
}
```

I would but the description of the ticket is empty and I have no context for this.  Why for example is `sage.repl.interpreter` being removed entirely?



---

archive/issue_comments_279763.json:
```json
{
    "body": "Replying to [comment:19 embray]:\n> I would but the description of the ticket is empty and I have no context for this.  Why for example is `sage.repl.interpreter` being removed entirely?\n\nIt is not if you look at the commit https://git.sagemath.org/sage.git/commit/?h=82d0a8c49fa59d57fc862d89dcdd974011d92cc0\n\nThis seems odd in the trac git diff viewer...",
    "created_at": "2016-07-07T10:43:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20292#issuecomment-279763",
    "user": "vbraun"
}
```

Replying to [comment:19 embray]:
> I would but the description of the ticket is empty and I have no context for this.  Why for example is `sage.repl.interpreter` being removed entirely?

It is not if you look at the commit https://git.sagemath.org/sage.git/commit/?h=82d0a8c49fa59d57fc862d89dcdd974011d92cc0

This seems odd in the trac git diff viewer...



---

archive/issue_comments_279764.json:
```json
{
    "body": "Weird, something is definitely amiss with the diff viewer....",
    "created_at": "2016-07-07T12:57:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20292#issuecomment-279764",
    "user": "embray"
}
```

Weird, something is definitely amiss with the diff viewer....



---

archive/issue_comments_279765.json:
```json
{
    "body": "So I guess it's safe to say nobody actually needs `SAGE_ORIG_LD_LIBRARY_PATH` anymore?  In that case, looks good to me.",
    "created_at": "2016-07-07T12:59:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20292#issuecomment-279765",
    "user": "embray"
}
```

So I guess it's safe to say nobody actually needs `SAGE_ORIG_LD_LIBRARY_PATH` anymore?  In that case, looks good to me.



---

archive/issue_comments_279766.json:
```json
{
    "body": "I would expect that `sage-native-execute` (which is necessary for various interfaces and tools in sage) would need to restore the original `LD_LIBRARY_PATH`. See #9386.",
    "created_at": "2016-07-07T15:49:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20292#issuecomment-279766",
    "user": "nbruin"
}
```

I would expect that `sage-native-execute` (which is necessary for various interfaces and tools in sage) would need to restore the original `LD_LIBRARY_PATH`. See #9386.



---

archive/issue_comments_279767.json:
```json
{
    "body": "We don't set `LD_LIBRARY_PATH` any more, which is why we don't need `SAGE_ORIG_LD_LIBRARY_PATH`",
    "created_at": "2016-07-07T15:53:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20292#issuecomment-279767",
    "user": "vbraun"
}
```

We don't set `LD_LIBRARY_PATH` any more, which is why we don't need `SAGE_ORIG_LD_LIBRARY_PATH`



---

archive/issue_comments_279768.json:
```json
{
    "body": "Eric, are you ready to set that to positive review ?",
    "created_at": "2016-07-11T09:01:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20292#issuecomment-279768",
    "user": "chapoton"
}
```

Eric, are you ready to set that to positive review ?



---

archive/issue_comments_279769.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-07-11T12:02:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20292#issuecomment-279769",
    "user": "embray"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_279770.json:
```json
{
    "body": "Thanks a lot.",
    "created_at": "2016-07-11T12:07:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20292#issuecomment-279770",
    "user": "chapoton"
}
```

Thanks a lot.



---

archive/issue_comments_279771.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-07-12T07:25:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20292#issuecomment-279771",
    "user": "vbraun"
}
```

Resolution: fixed
