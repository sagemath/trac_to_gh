# Issue 12532: Restore doctesting of non-library files

Issue created by migration from https://trac.sagemath.org/ticket/12704

Original creator: fwclarke

Original creation time: 2012-03-20 10:59:36

Assignee: mvngu

CC:  jhpalmieri

Since #9739, it has not been possible to doctest non-library files (if, as is likely, they contain definitions which get tested).  This is because in `sage-doctest` the same name is used for:

 1. the python file which is created in `SAGE_TESTDIR` (a copy of, or a preparsed version of, the file being tested), and
 1. the file which loads the previous file and contains the extracted doctests.

As a result, the first file is overwritten by the second, and then loads itself. Thus definitions from the original file are not available to the doctests.


---

Attachment

The one-line patch solves the problem.


---

Comment by fwclarke created at 2012-03-20 11:28:16

Changing status from new to needs_review.


---

Comment by jhpalmieri created at 2012-03-20 14:33:49

I think this is a duplicate of #12069.


---

Comment by fwclarke created at 2012-03-21 19:38:19

Changing status from needs_review to positive_review.


---

Comment by fwclarke created at 2012-03-21 19:38:19

Replying to [comment:2 jhpalmieri]:

> I think this is a duplicate of #12069  .

Indeed, it is; it should be closed.  

Sorry for missing #12069, which does a more thorough job.  Perhaps it should be added to #11337.


---

Comment by jhpalmieri created at 2012-03-21 19:54:19

I just added #12069 to #11337.


---

Comment by jdemeyer created at 2012-03-29 07:59:08

Resolution: duplicate
