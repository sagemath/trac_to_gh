# Issue 11817: make doc-html failed due on to failed gap command

Issue created by migration from https://trac.sagemath.org/ticket/11989

Original creator: gostrc

Original creation time: 2011-11-03 22:24:53

Assignee: GeorgSWeber

I am building sage 4.7.2 in a clean chroot and I am experiencing the following error during make doc-html:

RuntimeError: Unable to start gap because the command 'gap -r -b -p -T -o 9999G /build/src/sage-4.7.2/data//extcode/gap/sage.g' failed.

This is in a clean chroot building on archlinux. I build with the following way:
http://projects.archlinux.org/svntogit/community.git/tree/trunk/PKGBUILD?h=packages/sage-mathematics

I have attached the full build log.


---

Comment by gostrc created at 2011-11-03 22:25:30

full build log for sage 4.7.2 on archlinux


---

Attachment

Did you search sage-devel?

For example, take a look at [this thread](http://groups.google.com/group/sage-devel/browse_thread/thread/32710f229fbd129b/43d2fc054d3a3cc6#43d2fc054d3a3cc6).


---

Comment by leif created at 2011-11-03 23:12:30

Replying to [comment:1 leif]:
> For example, take a look at [this thread](http://groups.google.com/group/sage-devel/browse_thread/thread/32710f229fbd129b/43d2fc054d3a3cc6#43d2fc054d3a3cc6).

I.e., see also #5965.


---

Comment by gostrc created at 2011-11-05 17:48:19

I took a look at them, my chroot mounts
/dev/shm with the following command:

```
mount -t tmpfs shm "${working_dir}/dev/shm" -o nodev,nosuid,size=128M
```

/dev/pts with:

```
mount -t devpts devpts "${working_dir}/dev/pts" -o ptmxmode=666
```

Does this look like it should work?


---

Comment by gostrc created at 2011-11-08 23:16:12

Ok, so I found out the solution:


```
mount -t devpts devpts "${working_dir}/dev/pts" -o ptmxmode=666
```


needs an extra option: newinstance


```
mount -t devpts devpts "${working_dir}/dev/pts" -o newinstance,ptmxmode=666
```


I don't know why this is as I'm not very familiar with the inner workings of building sage's documents, but this is a pretty big obstacle for anyone building in a chroot.. perhaps a building sage in a chroot page would be nice to start?


---

Comment by jdemeyer created at 2013-05-19 13:12:47

User error, nothing to do with Sage.


---

Comment by jdemeyer created at 2013-05-19 13:12:47

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2013-05-19 13:12:56

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-05-21 07:25:22

Resolution: worksforme
