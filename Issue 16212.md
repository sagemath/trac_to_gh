# Issue 16212: Add plot() and show() methods to abstract Matroid class

archive/issues_016212.json:
```json
{
    "body": "CC:  stefan rudi\n\nKeywords: visualization, geometric representation\n\nplot() method will return a sage graphics object corresponding to the geometric representation of rank <=3 matroid. \nshow() method will be analogous to that of graphics objects.\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/16449\n\n",
    "created_at": "2014-06-05T23:04:40Z",
    "labels": [
        "matroid theory",
        "minor",
        "enhancement"
    ],
    "title": "Add plot() and show() methods to abstract Matroid class",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16212",
    "user": "Jayant"
}
```
CC:  stefan rudi

Keywords: visualization, geometric representation

plot() method will return a sage graphics object corresponding to the geometric representation of rank <=3 matroid. 
show() method will be analogous to that of graphics objects.


Issue created by migration from https://trac.sagemath.org/ticket/16449





---

archive/issue_comments_211671.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-06T04:48:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16212#issuecomment-211671",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_211672.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-06T06:07:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16212#issuecomment-211672",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_211673.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-06T11:37:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16212#issuecomment-211673",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_211674.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-09T04:03:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16212#issuecomment-211674",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_211675.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-10T09:11:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16212#issuecomment-211675",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_211676.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-12T06:01:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16212#issuecomment-211676",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_211677.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-14T03:57:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16212#issuecomment-211677",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_211678.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-06-14T03:59:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16212#issuecomment-211678",
    "user": "Jayant"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_211679.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-14T19:30:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16212#issuecomment-211679",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_211680.json:
```json
{
    "body": "Hi Jayant,\n\nThe user positioning works as advertised. Very nice!\n\nI just have some minor issues left. Look at the result of executing this code:\n\n\n```\nM=matroids.named_matroids.BetsyRoss()\npos={}\ns=\"abcde\"\nt=\"fghij\"\nx=1.61\ny=1/1.61\nfor i in range(5):\n    pos[s[i]]=(RR(x*sin(2*pi*i/5)), RR(x*cos(2*pi*i/5)))\n    pos[t[i]]=(RR(y*sin(2*pi*(i+1/2)/5)), RR(y*cos(2*pi*(i+1/2)/5)))\npos['k']=(0,0)\nM.show(pos_method=1, pos_dict=pos)\n```\n\n\nThis gives a star-like object. The input is clearly centered at (0,0) and has rotational symmetry. \n\n- The output of show() is flattenened (on my screen) and there is some empty space above the image. \n- If you show the output generated by plot(), then there is no flattening, but the some of the dots representing the groundset elements are cut by the boundary of the image.\n\nSo I wonder, could you perhaps get rid of the flattening in show()? The behaviour of the boundary is another thing. The minimal solution is to simply state the position of the windowframe in the docstring, and leave it to the user to accomodate. A more advanced solution is auto-framing the given picture, but then you should somehow make sure that all the dots and curves fall completely within the frame. \n\nFinally, one more request. I see that the point positioning of M in the above example is cached, so that if I just do M.show() again I get the same nice picture. Could you create a command M._fix_positions(pos_dict) which will likewise fix the point positions, but without showing or plotting the matroid? I guess I could call M.plot() with a user point positioning once and ignore the output to that effect, but I'm fairly sure you can get the same result without calling all the plot routines. I want to fit the named_matroids of rank <=3 with a nice default point positioning, so I could use a command like that.",
    "created_at": "2014-06-15T12:37:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16212#issuecomment-211680",
    "user": "Rudi"
}
```

Hi Jayant,

The user positioning works as advertised. Very nice!

I just have some minor issues left. Look at the result of executing this code:


```
M=matroids.named_matroids.BetsyRoss()
pos={}
s="abcde"
t="fghij"
x=1.61
y=1/1.61
for i in range(5):
    pos[s[i]]=(RR(x*sin(2*pi*i/5)), RR(x*cos(2*pi*i/5)))
    pos[t[i]]=(RR(y*sin(2*pi*(i+1/2)/5)), RR(y*cos(2*pi*(i+1/2)/5)))
pos['k']=(0,0)
M.show(pos_method=1, pos_dict=pos)
```


This gives a star-like object. The input is clearly centered at (0,0) and has rotational symmetry. 

- The output of show() is flattenened (on my screen) and there is some empty space above the image. 
- If you show the output generated by plot(), then there is no flattening, but the some of the dots representing the groundset elements are cut by the boundary of the image.

So I wonder, could you perhaps get rid of the flattening in show()? The behaviour of the boundary is another thing. The minimal solution is to simply state the position of the windowframe in the docstring, and leave it to the user to accomodate. A more advanced solution is auto-framing the given picture, but then you should somehow make sure that all the dots and curves fall completely within the frame. 

Finally, one more request. I see that the point positioning of M in the above example is cached, so that if I just do M.show() again I get the same nice picture. Could you create a command M._fix_positions(pos_dict) which will likewise fix the point positions, but without showing or plotting the matroid? I guess I could call M.plot() with a user point positioning once and ignore the output to that effect, but I'm fairly sure you can get the same result without calling all the plot routines. I want to fit the named_matroids of rank <=3 with a nice default point positioning, so I could use a command like that.



---

archive/issue_comments_211681.json:
```json
{
    "body": "Some more pedantic comments:\n\n1) There are some formatting issues: try to wrap lines at 78 characters, and get rid of trailing whitespace. You may want to use a pep8 checking tool.\n2) Some doctests fail. You can run them by writing\n\n./sage -t src/sage/matroids/matroids_plot_helpers.py\n\nfrom the base Sage directory.\n\nI'll test-drive the code later this morning.",
    "created_at": "2014-06-16T13:08:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16212#issuecomment-211681",
    "user": "Stefan"
}
```

Some more pedantic comments:

1) There are some formatting issues: try to wrap lines at 78 characters, and get rid of trailing whitespace. You may want to use a pep8 checking tool.
2) Some doctests fail. You can run them by writing

./sage -t src/sage/matroids/matroids_plot_helpers.py

from the base Sage directory.

I'll test-drive the code later this morning.



---

archive/issue_comments_211682.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-06-16T13:08:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16212#issuecomment-211682",
    "user": "Stefan"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_211683.json:
```json
{
    "body": "More issues: \"make doc\" gives the following errors:\n\n\n```\n[matroids ] building [inventory]: targets for 15 source files that are out of date\n[matroids ] updating environment: [config changed] 15 added, 0 changed, 0 removed\n[matroids ] reading sources... [  6%] index\n[matroids ] reading sources... [ 13%] sage/matroids/advanced\n[matroids ] reading sources... [ 20%] sage/matroids/basis_exchange_matroid\n[matroids ] reading sources... [ 26%] sage/matroids/basis_matroid\n[matroids ] reading sources... [ 33%] sage/matroids/catalog\n[matroids ] reading sources... [ 40%] sage/matroids/circuit_closures_matroid\n[matroids ] reading sources... [ 46%] sage/matroids/constructor\n[matroids ] reading sources... [ 53%] sage/matroids/dual_matroid\n[matroids ] reading sources... [ 60%] sage/matroids/extension\n[matroids ] reading sources... [ 66%] sage/matroids/linear_matroid\n[matroids ] reading sources... [ 73%] sage/matroids/matroid\n[matroids ] reading sources... [ 80%] sage/matroids/matroids_catalog\n[matroids ] reading sources... [ 86%] sage/matroids/minor_matroid\n[matroids ] reading sources... [ 93%] sage/matroids/rank_matroid\n[matroids ] reading sources... [100%] sage/matroids/utilities\n[matroids ] docstring of sage.matroids.matroid:3: WARNING: Bullet list ends without a blank line; unexpected unindent.\n[matroids ] docstring of sage.matroids.matroid:8: ERROR: Unexpected indentation.\n[matroids ] docstring of sage.matroids.matroid:11: WARNING: Block quote ends without a blank line; unexpected unindent.\n[matroids ] docstring of sage.matroids.matroid:13: WARNING: Bullet list ends without a blank line; unexpected unindent.\n[matroids ] docstring of sage.matroids.matroid:3: WARNING: Bullet list ends without a blank line; unexpected unindent.\n[matroids ] docstring of sage.matroids.matroid:8: ERROR: Unexpected indentation.\n[matroids ] docstring of sage.matroids.matroid:11: WARNING: Block quote ends without a blank line; unexpected unindent.\n[matroids ] docstring of sage.matroids.matroid:13: WARNING: Bullet list ends without a blank line; unexpected unindent.\nError building the documentation.\n\nNote: incremental documentation builds sometimes cause spurious\nerror messages. To be certain that these are real errors, run\n\"make doc-clean\" first and try again.\nTraceback (most recent call last):\n  File \"/Users/stefan/sage/src/doc/common/builder.py\", line 1477, in <module>\n    getattr(get_builder(name), type)()\n  File \"/Users/stefan/sage/src/doc/common/builder.py\", line 276, in _wrapper\n    getattr(get_builder(document), 'inventory')(*args, **kwds)\n  File \"/Users/stefan/sage/src/doc/common/builder.py\", line 487, in _wrapper\n    x.get(99999)\n  File \"/Users/stefan/sage/local/lib/python/multiprocessing/pool.py\", line 554, in get\n    raise self._value\nOSError: [matroids ] docstring of sage.matroids.matroid:3: WARNING: Bullet list ends without a blank line; unexpected unindent.\n\nmake: *** [doc-html] Error 1\n```\n\n\nThese are hard to track down, since line numbers are relative to the comment block, and it doesn't tell you which block we're in. But it's safe to assume these occur in your docstrings.",
    "created_at": "2014-06-16T14:07:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16212#issuecomment-211683",
    "user": "Stefan"
}
```

More issues: "make doc" gives the following errors:


```
[matroids ] building [inventory]: targets for 15 source files that are out of date
[matroids ] updating environment: [config changed] 15 added, 0 changed, 0 removed
[matroids ] reading sources... [  6%] index
[matroids ] reading sources... [ 13%] sage/matroids/advanced
[matroids ] reading sources... [ 20%] sage/matroids/basis_exchange_matroid
[matroids ] reading sources... [ 26%] sage/matroids/basis_matroid
[matroids ] reading sources... [ 33%] sage/matroids/catalog
[matroids ] reading sources... [ 40%] sage/matroids/circuit_closures_matroid
[matroids ] reading sources... [ 46%] sage/matroids/constructor
[matroids ] reading sources... [ 53%] sage/matroids/dual_matroid
[matroids ] reading sources... [ 60%] sage/matroids/extension
[matroids ] reading sources... [ 66%] sage/matroids/linear_matroid
[matroids ] reading sources... [ 73%] sage/matroids/matroid
[matroids ] reading sources... [ 80%] sage/matroids/matroids_catalog
[matroids ] reading sources... [ 86%] sage/matroids/minor_matroid
[matroids ] reading sources... [ 93%] sage/matroids/rank_matroid
[matroids ] reading sources... [100%] sage/matroids/utilities
[matroids ] docstring of sage.matroids.matroid:3: WARNING: Bullet list ends without a blank line; unexpected unindent.
[matroids ] docstring of sage.matroids.matroid:8: ERROR: Unexpected indentation.
[matroids ] docstring of sage.matroids.matroid:11: WARNING: Block quote ends without a blank line; unexpected unindent.
[matroids ] docstring of sage.matroids.matroid:13: WARNING: Bullet list ends without a blank line; unexpected unindent.
[matroids ] docstring of sage.matroids.matroid:3: WARNING: Bullet list ends without a blank line; unexpected unindent.
[matroids ] docstring of sage.matroids.matroid:8: ERROR: Unexpected indentation.
[matroids ] docstring of sage.matroids.matroid:11: WARNING: Block quote ends without a blank line; unexpected unindent.
[matroids ] docstring of sage.matroids.matroid:13: WARNING: Bullet list ends without a blank line; unexpected unindent.
Error building the documentation.

Note: incremental documentation builds sometimes cause spurious
error messages. To be certain that these are real errors, run
"make doc-clean" first and try again.
Traceback (most recent call last):
  File "/Users/stefan/sage/src/doc/common/builder.py", line 1477, in <module>
    getattr(get_builder(name), type)()
  File "/Users/stefan/sage/src/doc/common/builder.py", line 276, in _wrapper
    getattr(get_builder(document), 'inventory')(*args, **kwds)
  File "/Users/stefan/sage/src/doc/common/builder.py", line 487, in _wrapper
    x.get(99999)
  File "/Users/stefan/sage/local/lib/python/multiprocessing/pool.py", line 554, in get
    raise self._value
OSError: [matroids ] docstring of sage.matroids.matroid:3: WARNING: Bullet list ends without a blank line; unexpected unindent.

make: *** [doc-html] Error 1
```


These are hard to track down, since line numbers are relative to the comment block, and it doesn't tell you which block we're in. But it's safe to assume these occur in your docstrings.



---

archive/issue_comments_211684.json:
```json
{
    "body": "The white text labels are an unfortunate choice, as illustrated here:\n\n```\nM1 = Matroid(groundset=['Carolyn', 'Mike', 'Rudi', 'Stefan', 'Jayant', 'Dillon', 'Hassler'], field=GF(2), reduced_matrix=[[1,1,0,1],[1,0,1,1],[0,1,1,1]])\nM2 = Matroid(groundset=range(200,207), field=GF(3), reduced_matrix=[[1,1,0,0],[1,0,1,0],[0,1,-1,0]])\nM1.show()\nM2.show()\n```\n\nThe following results in an error:\n\n```\nM3 = matroids.Uniform(1,6)\nM3.show()\n```\n\n\n\n```\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"_sage_input_19.py\", line 10, in <module>\n    exec compile(u'open(\"___code___.py\",\"w\").write(\"# -*- coding: utf-8 -*-\\\\n\" + _support_.preparse_worksheet_cell(base64.b64decode(\"TTMgPSBtYXRyb2lkcy5Vbmlmb3JtKDEsNikKTTMuc2hvdygp\"),globals())+\"\\\\n\"); execfile(os.path.abspath(\"___code___.py\"))\n  File \"\", line 1, in <module>\n    \n  File \"/private/var/folders/8p/gpt0bd4x5vg46bg2j4l0mnfr0000gn/T/tmppZYy7q/___code___.py\", line 4, in <module>\n    exec compile(u'M3.show()\n  File \"\", line 1, in <module>\n    \n  File \"matroid.pyx\", line 4812, in sage.matroids.matroid.Matroid.show (sage/matroids/matroid.c:32349)\n  File \"matroid.pyx\", line 4850, in sage.matroids.matroid.Matroid.show (sage/matroids/matroid.c:32173)\n  File \"matroid.pyx\", line 4810, in sage.matroids.matroid.Matroid.plot (sage/matroids/matroid.c:31770)\n  File \"/Users/stefan/sage/local/lib/python2.7/site-packages/sage/matroids/matroids_plot_helpers.py\", line 670, in geomrep\n    G = addlp(M1,M,L,P,pts2,G)\n  File \"/Users/stefan/sage/local/lib/python2.7/site-packages/sage/matroids/matroids_plot_helpers.py\", line 421, in addlp\n    gnd = sorted(M1.groundset_list())\nAttributeError: 'MinorMatroid' object has no attribute 'groundset_list'\n```\n\n\nThis should result in a \"NotImplementedError\", but doesn't do anything:\n\n```\nP8 = matroids.named_matroids.P8()\nP8.show()\n```\n",
    "created_at": "2014-06-16T15:21:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16212#issuecomment-211684",
    "user": "Stefan"
}
```

The white text labels are an unfortunate choice, as illustrated here:

```
M1 = Matroid(groundset=['Carolyn', 'Mike', 'Rudi', 'Stefan', 'Jayant', 'Dillon', 'Hassler'], field=GF(2), reduced_matrix=[[1,1,0,1],[1,0,1,1],[0,1,1,1]])
M2 = Matroid(groundset=range(200,207), field=GF(3), reduced_matrix=[[1,1,0,0],[1,0,1,0],[0,1,-1,0]])
M1.show()
M2.show()
```

The following results in an error:

```
M3 = matroids.Uniform(1,6)
M3.show()
```



```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "_sage_input_19.py", line 10, in <module>
    exec compile(u'open("___code___.py","w").write("# -*- coding: utf-8 -*-\\n" + _support_.preparse_worksheet_cell(base64.b64decode("TTMgPSBtYXRyb2lkcy5Vbmlmb3JtKDEsNikKTTMuc2hvdygp"),globals())+"\\n"); execfile(os.path.abspath("___code___.py"))
  File "", line 1, in <module>
    
  File "/private/var/folders/8p/gpt0bd4x5vg46bg2j4l0mnfr0000gn/T/tmppZYy7q/___code___.py", line 4, in <module>
    exec compile(u'M3.show()
  File "", line 1, in <module>
    
  File "matroid.pyx", line 4812, in sage.matroids.matroid.Matroid.show (sage/matroids/matroid.c:32349)
  File "matroid.pyx", line 4850, in sage.matroids.matroid.Matroid.show (sage/matroids/matroid.c:32173)
  File "matroid.pyx", line 4810, in sage.matroids.matroid.Matroid.plot (sage/matroids/matroid.c:31770)
  File "/Users/stefan/sage/local/lib/python2.7/site-packages/sage/matroids/matroids_plot_helpers.py", line 670, in geomrep
    G = addlp(M1,M,L,P,pts2,G)
  File "/Users/stefan/sage/local/lib/python2.7/site-packages/sage/matroids/matroids_plot_helpers.py", line 421, in addlp
    gnd = sorted(M1.groundset_list())
AttributeError: 'MinorMatroid' object has no attribute 'groundset_list'
```


This should result in a "NotImplementedError", but doesn't do anything:

```
P8 = matroids.named_matroids.P8()
P8.show()
```




---

archive/issue_comments_211685.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-17T01:11:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16212#issuecomment-211685",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_211686.json:
```json
{
    "body": "Replying to [comment:12 Rudi]: Added tracking of x-y limits which in a sense, does auto-framing that you mentioned. It keeps track of min and max x and y points whenever new point or line (set of points) is added. Leaves uniform space (Currently 0.5) on all sides. The _fix_positions() method is also in place now. \n> Hi Jayant,\n> \n> The user positioning works as advertised. Very nice!\n> \n> I just have some minor issues left. Look at the result of executing this code:\n> \n> {{{\n> M=matroids.named_matroids.BetsyRoss()\n> pos={}\n> s=\"abcde\"\n> t=\"fghij\"\n> x=1.61\n> y=1/1.61\n> for i in range(5):\n>     pos[s[i]]=(RR(x*sin(2*pi*i/5)), RR(x*cos(2*pi*i/5)))\n>     pos[t[i]]=(RR(y*sin(2*pi*(i+1/2)/5)), RR(y*cos(2*pi*(i+1/2)/5)))\n> pos['k']=(0,0)\n> M.show(pos_method=1, pos_dict=pos)\n> }}}\n> \n> This gives a star-like object. The input is clearly centered at (0,0) and has rotational symmetry. \n> \n> - The output of show() is flattenened (on my screen) and there is some empty space above the image. \n> - If you show the output generated by plot(), then there is no flattening, but the some of the dots representing the groundset elements are cut by the boundary of the image.\n> \n> So I wonder, could you perhaps get rid of the flattening in show()? The behaviour of the boundary is another thing. The minimal solution is to simply state the position of the windowframe in the docstring, and leave it to the user to accomodate. A more advanced solution is auto-framing the given picture, but then you should somehow make sure that all the dots and curves fall completely within the frame. \n> \n> Finally, one more request. I see that the point positioning of M in the above example is cached, so that if I just do M.show() again I get the same nice picture. Could you create a command M._fix_positions(pos_dict) which will likewise fix the point positions, but without showing or plotting the matroid? I guess I could call M.plot() with a user point positioning once and ignore the output to that effect, but I'm fairly sure you can get the same result without calling all the plot routines. I want to fit the named_matroids of rank <=3 with a nice default point positioning, so I could use a command like that.",
    "created_at": "2014-06-17T01:27:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16212#issuecomment-211686",
    "user": "Jayant"
}
```

Replying to [comment:12 Rudi]: Added tracking of x-y limits which in a sense, does auto-framing that you mentioned. It keeps track of min and max x and y points whenever new point or line (set of points) is added. Leaves uniform space (Currently 0.5) on all sides. The _fix_positions() method is also in place now. 
> Hi Jayant,
> 
> The user positioning works as advertised. Very nice!
> 
> I just have some minor issues left. Look at the result of executing this code:
> 
> {{{
> M=matroids.named_matroids.BetsyRoss()
> pos={}
> s="abcde"
> t="fghij"
> x=1.61
> y=1/1.61
> for i in range(5):
>     pos[s[i]]=(RR(x*sin(2*pi*i/5)), RR(x*cos(2*pi*i/5)))
>     pos[t[i]]=(RR(y*sin(2*pi*(i+1/2)/5)), RR(y*cos(2*pi*(i+1/2)/5)))
> pos['k']=(0,0)
> M.show(pos_method=1, pos_dict=pos)
> }}}
> 
> This gives a star-like object. The input is clearly centered at (0,0) and has rotational symmetry. 
> 
> - The output of show() is flattenened (on my screen) and there is some empty space above the image. 
> - If you show the output generated by plot(), then there is no flattening, but the some of the dots representing the groundset elements are cut by the boundary of the image.
> 
> So I wonder, could you perhaps get rid of the flattening in show()? The behaviour of the boundary is another thing. The minimal solution is to simply state the position of the windowframe in the docstring, and leave it to the user to accomodate. A more advanced solution is auto-framing the given picture, but then you should somehow make sure that all the dots and curves fall completely within the frame. 
> 
> Finally, one more request. I see that the point positioning of M in the above example is cached, so that if I just do M.show() again I get the same nice picture. Could you create a command M._fix_positions(pos_dict) which will likewise fix the point positions, but without showing or plotting the matroid? I guess I could call M.plot() with a user point positioning once and ignore the output to that effect, but I'm fairly sure you can get the same result without calling all the plot routines. I want to fit the named_matroids of rank <=3 with a nice default point positioning, so I could use a command like that.



---

archive/issue_comments_211687.json:
```json
{
    "body": "In order to keep the _cached_info from becoming a mess, I suggest naming the keys \"plot_positions\" and \"plot_lineorders\".\n\nWhen typing\n\n\n```\nM = matroids.named_matroids.NonFano()\nM.show? <tab key>\n```\n\nin a notebook, you can see some formatting issues (possibly related to the docbuild errors I mentioned above). Also, the \"limits\" option is undocumented. It's ok, by the way, to cross reference the \"plot\" method from the \"show\" method, instead of copying and pasting all documentation.",
    "created_at": "2014-06-17T19:44:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16212#issuecomment-211687",
    "user": "Stefan"
}
```

In order to keep the _cached_info from becoming a mess, I suggest naming the keys "plot_positions" and "plot_lineorders".

When typing


```
M = matroids.named_matroids.NonFano()
M.show? <tab key>
```

in a notebook, you can see some formatting issues (possibly related to the docbuild errors I mentioned above). Also, the "limits" option is undocumented. It's ok, by the way, to cross reference the "plot" method from the "show" method, instead of copying and pasting all documentation.



---

archive/issue_comments_211688.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-18T11:04:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16212#issuecomment-211688",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_211689.json:
```json
{
    "body": "Replying to [comment:13 Stefan]: Just finished using pep8. The file matroids_plot_helpers.py is now pep8 compliant. Some doctests are still failing. These are the bugs that probably came in when I added the limits tracking feature. [72 tests, 9 failures, 1.32 s]\n \n> Some more pedantic comments:\n> \n> 1) There are some formatting issues: try to wrap lines at 78 characters, and get rid of trailing whitespace. You may want to use a pep8 checking tool.\n> 2) Some doctests fail. You can run them by writing\n> \n> ./sage -t src/sage/matroids/matroids_plot_helpers.py\n> \n> from the base Sage directory.\n> \n> I'll test-drive the code later this morning.",
    "created_at": "2014-06-18T11:24:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16212#issuecomment-211689",
    "user": "Jayant"
}
```

Replying to [comment:13 Stefan]: Just finished using pep8. The file matroids_plot_helpers.py is now pep8 compliant. Some doctests are still failing. These are the bugs that probably came in when I added the limits tracking feature. [72 tests, 9 failures, 1.32 s]
 
> Some more pedantic comments:
> 
> 1) There are some formatting issues: try to wrap lines at 78 characters, and get rid of trailing whitespace. You may want to use a pep8 checking tool.
> 2) Some doctests fail. You can run them by writing
> 
> ./sage -t src/sage/matroids/matroids_plot_helpers.py
> 
> from the base Sage directory.
> 
> I'll test-drive the code later this morning.



---

archive/issue_comments_211690.json:
```json
{
    "body": "I added a few fixes to documentation, whitespace, and doctests. The documentation build still seems to give errors, though I didn't do a full build:\n\n\n```\n[matroids ] docstring of sage.matroids.matroid:3: WARNING: Bullet list ends without a blank line; unexpected unindent.\n[matroids ] docstring of sage.matroids.matroid:8: ERROR: Unexpected indentation.\n[matroids ] docstring of sage.matroids.matroid:11: WARNING: Block quote ends without a blank line; unexpected unindent.\n[matroids ] docstring of sage.matroids.matroid:13: WARNING: Bullet list ends without a blank line; unexpected unindent.\nError building the documentation.\n```\n\n----\nNew commits:",
    "created_at": "2014-06-18T18:15:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16212#issuecomment-211690",
    "user": "Stefan"
}
```

I added a few fixes to documentation, whitespace, and doctests. The documentation build still seems to give errors, though I didn't do a full build:


```
[matroids ] docstring of sage.matroids.matroid:3: WARNING: Bullet list ends without a blank line; unexpected unindent.
[matroids ] docstring of sage.matroids.matroid:8: ERROR: Unexpected indentation.
[matroids ] docstring of sage.matroids.matroid:11: WARNING: Block quote ends without a blank line; unexpected unindent.
[matroids ] docstring of sage.matroids.matroid:13: WARNING: Bullet list ends without a blank line; unexpected unindent.
Error building the documentation.
```

----
New commits:



---

archive/issue_comments_211691.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-18T18:47:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16212#issuecomment-211691",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_211692.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-06-20T03:53:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16212#issuecomment-211692",
    "user": "Jayant"
}
```

New commits:



---

archive/issue_comments_211693.json:
```json
{
    "body": "Is this ready for review?",
    "created_at": "2014-06-20T20:18:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16212#issuecomment-211693",
    "user": "Stefan"
}
```

Is this ready for review?



---

archive/issue_comments_211694.json:
```json
{
    "body": "Replying to [comment:25 Stefan]: Yeah, I think so. I did doctest and `make doc` and they didn't give any errors. The points are now gray with black labels. `_cached_info`\u00a0dictionary labels are changed. Rank>3 gives not implemented error. `matroids.Uniform(1,6).show()`\u00a0is working. `lims` option of `show()` has documentation.\n\n> Is this ready for review?",
    "created_at": "2014-06-20T20:50:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16212#issuecomment-211694",
    "user": "Jayant"
}
```

Replying to [comment:25 Stefan]: Yeah, I think so. I did doctest and `make doc` and they didn't give any errors. The points are now gray with black labels. `_cached_info` dictionary labels are changed. Rank>3 gives not implemented error. `matroids.Uniform(1,6).show()` is working. `lims` option of `show()` has documentation.

> Is this ready for review?



---

archive/issue_comments_211695.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-06-20T20:58:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16212#issuecomment-211695",
    "user": "Stefan"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_211696.json:
```json
{
    "body": "Ok. Next time change the ticket status to \"review\"",
    "created_at": "2014-06-20T20:58:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16212#issuecomment-211696",
    "user": "Stefan"
}
```

Ok. Next time change the ticket status to "review"



---

archive/issue_comments_211697.json:
```json
{
    "body": "Replying to [comment:27 Stefan]: Oops. Sorry about that.\n> Ok. Next time change the ticket status to \"review\"",
    "created_at": "2014-06-20T21:00:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16212#issuecomment-211697",
    "user": "Jayant"
}
```

Replying to [comment:27 Stefan]: Oops. Sorry about that.
> Ok. Next time change the ticket status to "review"



---

archive/issue_comments_211698.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-06-23T22:11:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16212#issuecomment-211698",
    "user": "Stefan"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_211699.json:
```json
{
    "body": "There are still issues with parallel elements and low-rank matroids.\n\nThis is a good example:\n\n```\nM = matroids.PG(3,2).contract(0)\nM.show()\nM.simplify().show()\n```\n\nAlso, with the same example, specifying a basis goes wrong:\n\n```\nM.show(B=[5,6,7])\n```\n\ngives\n\n```\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"_sage_input_24.py\", line 10, in <module>\n    exec compile(u'open(\"___code___.py\",\"w\").write(\"# -*- coding: utf-8 -*-\\\\n\" + _support_.preparse_worksheet_cell(base64.b64decode(\"TS5zaG93KEI9WzUsNiw3XSk=\"),globals())+\"\\\\n\"); execfile(os.path.abspath(\"___code___.py\"))\n  File \"\", line 1, in <module>\n    \n  File \"/private/var/folders/8p/gpt0bd4x5vg46bg2j4l0mnfr0000gn/T/tmpBK25kT/___code___.py\", line 3, in <module>\n    exec compile(u'M.show(B=[_sage_const_5 ,_sage_const_6 ,_sage_const_7 ])\n  File \"\", line 1, in <module>\n    \n  File \"matroid.pyx\", line 4958, in sage.matroids.matroid.Matroid.show (build/cythonized/sage/matroids/matroid.c:33380)\n  File \"matroid.pyx\", line 4999, in sage.matroids.matroid.Matroid.show (build/cythonized/sage/matroids/matroid.c:33147)\n  File \"matroid.pyx\", line 4956, in sage.matroids.matroid.Matroid.plot (build/cythonized/sage/matroids/matroid.c:32728)\n  File \"/Users/stefan/sage/local/lib/python2.7/site-packages/sage/matroids/matroids_plot_helpers.py\", line 763, in geomrep\n    [M, L, P] = slp(M1, pos_dict=pd, B=B1)\n  File \"/Users/stefan/sage/local/lib/python2.7/site-packages/sage/matroids/matroids_plot_helpers.py\", line 445, in slp\n    newP.extend(list(pcl - set([pcl[0]])))\nTypeError: 'frozenset' object does not support indexing\n```\n\nThen there's\n\n```\nM = matroids.Uniform(0,4)\nM.show()\n```\n\ngiving\n\n```\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"_sage_input_25.py\", line 10, in <module>\n    exec compile(u'open(\"___code___.py\",\"w\").write(\"# -*- coding: utf-8 -*-\\\\n\" + _support_.preparse_worksheet_cell(base64.b64decode(\"TSA9IG1hdHJvaWRzLlVuaWZvcm0oMCw0KQpNLnNob3coKQ==\"),globals())+\"\\\\n\"); execfile(os.path.abspath(\"___code___.py\"))\n  File \"\", line 1, in <module>\n    \n  File \"/private/var/folders/8p/gpt0bd4x5vg46bg2j4l0mnfr0000gn/T/tmp1peeRw/___code___.py\", line 4, in <module>\n    exec compile(u'M.show()\n  File \"\", line 1, in <module>\n    \n  File \"matroid.pyx\", line 4958, in sage.matroids.matroid.Matroid.show (build/cythonized/sage/matroids/matroid.c:33380)\n  File \"matroid.pyx\", line 4999, in sage.matroids.matroid.Matroid.show (build/cythonized/sage/matroids/matroid.c:33147)\n  File \"matroid.pyx\", line 4956, in sage.matroids.matroid.Matroid.plot (build/cythonized/sage/matroids/matroid.c:32728)\n  File \"/Users/stefan/sage/local/lib/python2.7/site-packages/sage/matroids/matroids_plot_helpers.py\", line 830, in geomrep\n    list(set(L) | set(P)))\n  File \"/Users/stefan/sage/local/lib/python2.7/site-packages/sage/matroids/matroids_plot_helpers.py\", line 157, in it\n    lines.append([B1[pairs[i-1][0]]])\nIndexError: list index out of range\n```\n\nI'm not so sure about the output of\n\n```\nM3 = matroids.Uniform(1,6)\nM3.show()\n```\n\nWhat does the set mean? Why is it so far removed from the point? Putting *all* elements from the parallel class into the set is clearer. And leave the point empty, or give it a new label (use the sage.matroids.utilities.newlabel function) and write on the sidelines\n\nn = {0,1,2,3,4,5}\n\n(where n is the new label).\n\nFinally, I'd go for a lighter gray for the points.\n\nPlease test thoroughly with lots of examples, especially degenerate ones, before setting this to \"needs_review\" again.",
    "created_at": "2014-06-23T22:11:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16212#issuecomment-211699",
    "user": "Stefan"
}
```

There are still issues with parallel elements and low-rank matroids.

This is a good example:

```
M = matroids.PG(3,2).contract(0)
M.show()
M.simplify().show()
```

Also, with the same example, specifying a basis goes wrong:

```
M.show(B=[5,6,7])
```

gives

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "_sage_input_24.py", line 10, in <module>
    exec compile(u'open("___code___.py","w").write("# -*- coding: utf-8 -*-\\n" + _support_.preparse_worksheet_cell(base64.b64decode("TS5zaG93KEI9WzUsNiw3XSk="),globals())+"\\n"); execfile(os.path.abspath("___code___.py"))
  File "", line 1, in <module>
    
  File "/private/var/folders/8p/gpt0bd4x5vg46bg2j4l0mnfr0000gn/T/tmpBK25kT/___code___.py", line 3, in <module>
    exec compile(u'M.show(B=[_sage_const_5 ,_sage_const_6 ,_sage_const_7 ])
  File "", line 1, in <module>
    
  File "matroid.pyx", line 4958, in sage.matroids.matroid.Matroid.show (build/cythonized/sage/matroids/matroid.c:33380)
  File "matroid.pyx", line 4999, in sage.matroids.matroid.Matroid.show (build/cythonized/sage/matroids/matroid.c:33147)
  File "matroid.pyx", line 4956, in sage.matroids.matroid.Matroid.plot (build/cythonized/sage/matroids/matroid.c:32728)
  File "/Users/stefan/sage/local/lib/python2.7/site-packages/sage/matroids/matroids_plot_helpers.py", line 763, in geomrep
    [M, L, P] = slp(M1, pos_dict=pd, B=B1)
  File "/Users/stefan/sage/local/lib/python2.7/site-packages/sage/matroids/matroids_plot_helpers.py", line 445, in slp
    newP.extend(list(pcl - set([pcl[0]])))
TypeError: 'frozenset' object does not support indexing
```

Then there's

```
M = matroids.Uniform(0,4)
M.show()
```

giving

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "_sage_input_25.py", line 10, in <module>
    exec compile(u'open("___code___.py","w").write("# -*- coding: utf-8 -*-\\n" + _support_.preparse_worksheet_cell(base64.b64decode("TSA9IG1hdHJvaWRzLlVuaWZvcm0oMCw0KQpNLnNob3coKQ=="),globals())+"\\n"); execfile(os.path.abspath("___code___.py"))
  File "", line 1, in <module>
    
  File "/private/var/folders/8p/gpt0bd4x5vg46bg2j4l0mnfr0000gn/T/tmp1peeRw/___code___.py", line 4, in <module>
    exec compile(u'M.show()
  File "", line 1, in <module>
    
  File "matroid.pyx", line 4958, in sage.matroids.matroid.Matroid.show (build/cythonized/sage/matroids/matroid.c:33380)
  File "matroid.pyx", line 4999, in sage.matroids.matroid.Matroid.show (build/cythonized/sage/matroids/matroid.c:33147)
  File "matroid.pyx", line 4956, in sage.matroids.matroid.Matroid.plot (build/cythonized/sage/matroids/matroid.c:32728)
  File "/Users/stefan/sage/local/lib/python2.7/site-packages/sage/matroids/matroids_plot_helpers.py", line 830, in geomrep
    list(set(L) | set(P)))
  File "/Users/stefan/sage/local/lib/python2.7/site-packages/sage/matroids/matroids_plot_helpers.py", line 157, in it
    lines.append([B1[pairs[i-1][0]]])
IndexError: list index out of range
```

I'm not so sure about the output of

```
M3 = matroids.Uniform(1,6)
M3.show()
```

What does the set mean? Why is it so far removed from the point? Putting *all* elements from the parallel class into the set is clearer. And leave the point empty, or give it a new label (use the sage.matroids.utilities.newlabel function) and write on the sidelines

n = {0,1,2,3,4,5}

(where n is the new label).

Finally, I'd go for a lighter gray for the points.

Please test thoroughly with lots of examples, especially degenerate ones, before setting this to "needs_review" again.



---

archive/issue_comments_211700.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-24T07:45:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16212#issuecomment-211700",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_211701.json:
```json
{
    "body": "Sorry, more nitpicking...\n\n\n```\nmatroids.PG(3,2).contract(0).contract(1).show()\n```\n\n\nYou need to make sure the \"newlabel\" method gives a unique new label for each parallel class. Also, you can (and should) plot rank-0 matroids: they're just a bunch of loops.",
    "created_at": "2014-06-24T14:24:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16212#issuecomment-211701",
    "user": "Stefan"
}
```

Sorry, more nitpicking...


```
matroids.PG(3,2).contract(0).contract(1).show()
```


You need to make sure the "newlabel" method gives a unique new label for each parallel class. Also, you can (and should) plot rank-0 matroids: they're just a bunch of loops.



---

archive/issue_comments_211702.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-25T05:58:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16212#issuecomment-211702",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_211703.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2014-06-25T14:45:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16212#issuecomment-211703",
    "user": "Stefan"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_211704.json:
```json
{
    "body": "I'm satisfied, this is ready to go in!",
    "created_at": "2014-06-25T14:45:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16212#issuecomment-211704",
    "user": "Stefan"
}
```

I'm satisfied, this is ready to go in!



---

archive/issue_comments_211705.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-06-26T19:37:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16212",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16212#issuecomment-211705",
    "user": "vbraun"
}
```

Resolution: fixed
