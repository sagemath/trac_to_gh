# Issue 20186: Updated patch for building MPFR on Cygwin

Issue created by migration from https://trac.sagemath.org/ticket/20423

Original creator: embray

Original creation time: 2016-04-11 14:25:49

Keywords: windows cygwin days77

This is the update to #20380 with a new patch mirroring the upstream fix for the same issue.  The patch I added was taking [directly from SVN](https://gforge.inria.fr/scm/viewvc.php/mpfr/trunk/src/mpfr-impl.h?r1=10257&r2=10260&view=patch) and applies to the current version of MPFR in sage with some fuzz (I don't know if this matters or not).

I confirmed that, as expected, like #20380 this fixes building MPFR on Cygwin.


---

Comment by embray created at 2016-04-11 14:25:59

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2016-04-12 09:14:00

One detail: could you add some comment on the top of the patch file? In particular, a link to the SVN repo and this Sage ticket would be useful.

I cannot test on Cygwin myself, but if you tell me that it works for you, then I'll believe that. I checked that it doesn't break anything on Linux.


---

Comment by embray created at 2016-04-12 09:21:51

Sure--perhaps something in the SPKG.txt as well?


---

Comment by jdemeyer created at 2016-04-12 09:26:14

Replying to [comment:3 embray]:
> Sure--perhaps something in the SPKG.txt as well?

That's not really needed. Better just document it in one place.


---

Comment by git created at 2016-04-12 09:46:36

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2016-04-12 09:51:23

Changing component from build to porting: Cygwin.


---

Comment by jdemeyer created at 2016-04-12 09:51:23

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-04-12 20:23:21

merge conflict


---

Comment by vbraun created at 2016-04-12 20:23:21

Changing status from positive_review to needs_work.


---

Comment by embray created at 2016-04-13 12:12:09

So my patch from #20380 _was_ merged?  That was very non-obvious.


---

Comment by git created at 2016-04-13 12:17:11

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by embray created at 2016-04-13 12:17:45

Rebased.


---

Comment by jdemeyer created at 2016-04-13 12:42:38

If it's ready for review, change the status to `needs_review`.


---

Comment by jdemeyer created at 2016-04-13 12:49:15

Replying to [comment:8 embray]:
> So my patch from #20380 _was_ merged?  That was very non-obvious.

When a ticket is closed as "fixed", it means that it's merged in Volker's private branch https://github.com/vbraun/sage/tree/develop
This happens before buildbot testing.

This is really a private branch, which means that you should not use it for development. It is common for git history to be rewritten in that branch.

After buildbot testing, Volker will release a new beta release and Volker's branch will become the "real" `develop` branch.


---

Comment by embray created at 2016-04-13 14:07:33

Changing status from needs_work to needs_review.


---

Comment by embray created at 2016-04-13 14:07:33

Thanks for the explanation--that explains why I didn't see it merged in `develop`.

I'm no so sure how I feel about that. It would be nice to have a branch in the main repo representing what is currently merged, rather than on someone else's fork.  I'm also confused why it would be closed as "fixed" if buildbot testing hasn't run yet--isn't it possible the ticket will be reopened if the testing fails?


---

Comment by jdemeyer created at 2016-04-13 14:41:50

Replying to [comment:13 embray]:
> isn't it possible the ticket will be reopened if the testing fails?

Yes, that's possible and it happens occasionally.


---

Comment by jdemeyer created at 2016-04-13 14:45:35

Changing status from needs_review to positive_review.


---

Comment by embray created at 2016-04-14 10:23:12

I'd suggest an additional workflow stage representing this.  To me something isn't "fixed" if the "fix" breaks the build.


---

Comment by jdemeyer created at 2016-04-14 11:18:19

Replying to [comment:16 embray]:
> I'd suggest an additional workflow stage representing this.  To me something isn't "fixed" if the "fix" breaks the build.

I would suggest no additional workflow stage, just to close the ticket as fixed only when it's actually going to be merged. That was how I operated as release manager.

But it's not my decision, you have to convince Volker.


---

Comment by embray created at 2016-04-14 11:49:20

Either way.


---

Comment by vbraun created at 2016-04-14 21:56:54

Resolution: fixed
