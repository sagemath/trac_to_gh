# Issue 15370: Upgrade database_stein_watkins to the 2007 data

Issue created by migration from https://trac.sagemath.org/ticket/15607

Original creator: cremona

Original creation time: 2013-12-29 13:59:34

CC:  slelievre

Keywords: database elliptic curves

The original Stein-Watkins database was created in 2003.  In 2007, a few revisions and additions were made to the data.  In this ticket we upgrade the git optional/huge spkgs database_stein_watkins_mini and database_stein_watkins to version 20070827.

The replacement data files are at [http://modular.math.washington.edu/ecdb/FIX.tar](http://modular.math.washington.edu/ecdb/FIX.tar). The new upstream tarballs are at:

 1. [http://boxen.math.washington.edu/home/cremona/database_stein_watkins_mini-20070827.tar.bz2](http://boxen.math.washington.edu/home/cremona/database_stein_watkins_mini-20070827.tar.bz2)
 1. [http://boxen.math.washington.edu/home/cremona/database_stein_watkins-20070827.tar.bz2](http://boxen.math.washington.edu/home/cremona/database_stein_watkins-20070827.tar.bz2)


---

Comment by cremona created at 2013-12-29 14:10:24

New commits:


---

Comment by cremona created at 2013-12-29 14:12:19

Changing status from new to needs_review.


---

Comment by cremona created at 2013-12-29 14:12:19

Note: only the last commit (2bd09e) is not on the dependent #15556.


---

Comment by jdemeyer created at 2013-12-29 19:12:03

Again, fix the permissions in the upstream tarballs (should be 0644).


---

Comment by jdemeyer created at 2013-12-29 19:12:03

Changing status from needs_review to needs_work.


---

Comment by cremona created at 2013-12-29 19:40:48

Replying to [comment:3 jdemeyer]:
> Again, fix the permissions in the upstream tarballs (should be 0644).

Oops, sorry.  The mini one is done, the big one takes longer...and is now done.


---

Comment by cremona created at 2013-12-29 19:58:54

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2014-01-06 14:36:45

The checksums must be updated now...


---

Comment by jdemeyer created at 2014-01-06 14:36:45

Changing status from needs_review to needs_work.


---

Comment by git created at 2014-01-06 21:10:40

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by cremona created at 2014-01-06 21:14:38

I have updated the checksums.


---

Comment by cremona created at 2014-01-06 21:14:38

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2014-01-07 15:32:51

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2014-01-07 15:32:51

The checksums still do not match the tarballs:

```
Found local metadata for database_stein_watkins_mini-20070827
Found local sources at /usr/local/src/sage-2217/upstream/database_stein_watkins_mini-20070827.tar.bz2
Checksum: b4a664687ea7f2f77ae63070e7ba620dde06511c vs 4979191668e7cc8490eda75044435519faab0f9c
Invalid checksum for /usr/local/src/sage-2217/upstream/database_stein_watkins_mini-20070827.tar.bz2
```



```
Found local metadata for database_stein_watkins-20070827
Found local sources at /usr/local/src/sage-2217/upstream/database_stein_watkins-20070827.tar.bz2
Checksum: 8695b291912c4bbf07c5f6619f133b7985de6c83 vs 3cd5b8f38bc45c48b91229b05cb545801f6babcf
Invalid checksum for /usr/local/src/sage-2217/upstream/database_stein_watkins-20070827.tar.bz2
```



---

Comment by jdemeyer created at 2014-01-07 15:37:32

The sha1sums of the tarballs are indeed:

```
jdemeyer@boxen:/home/cremona$ sha1sum database_stein_watkins*2007*.tar*
3cd5b8f38bc45c48b91229b05cb545801f6babcf  database_stein_watkins-20070827.tar.bz2
4979191668e7cc8490eda75044435519faab0f9c  database_stein_watkins_mini-20070827.tar.bz2
```



---

Comment by cremona created at 2014-01-07 16:25:54

I discovered that the files on sagemath are not the same as the ones on my machine which explains this discrepancy (since I computed the checksums on my machine).  Now I need to work out which files are correct!  It is rather tedious since (for the large file) both bzip2/bunzip2 and of course the scp take rather a long time.  Be patient...


---

Comment by git created at 2014-01-07 16:49:33

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by cremona created at 2014-01-07 16:53:22

Changing status from needs_work to needs_review.


---

Comment by cremona created at 2014-01-07 16:53:22

Try this.  I scp's the bz2 files back to home where I reissued the sage-fix-pkg-checksums command.  I think that earlier I had changed some files in the tarball on both my machine and sagemath and done the tar/bzip2 again on sagemath to save the file transfer.  CLearly that does not work even if the directory contents are the same, perhaps because my username is different.  This time I copied the tarballs from sagemath (which you have access to) back before recomputing the checksums.

Not a mistake I'll ever make again, I promise!


---

Comment by jdemeyer created at 2014-01-07 18:22:50

Replying to [comment:14 cremona]:
> Try this.  I scp's the bz2 files back to home where I reissued the sage-fix-pkg-checksums command.  I think that earlier I had changed some files in the tarball on both my machine and sagemath and done the tar/bzip2 again on sagemath to save the file transfer.  CLearly that does not work even if the directory contents are the same, perhaps because my username is different.
Also timestamps are stored in the tarball, that might matter.


---

Comment by jdemeyer created at 2014-01-07 18:51:39

Changing status from needs_review to positive_review.


---

Comment by cremona created at 2014-01-07 19:42:43

Thanks!  I don't expect there to be many updates to this one.


---

Comment by vbraun created at 2014-01-10 07:29:49

Resolution: fixed
