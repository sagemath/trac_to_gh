# Issue 25355: enum_affine_rational_field function is missing points

Issue created by migration from Trac.

Original creator: raghukul01

Original creation time: 2018-06-16 20:31:15

CC:  bhutz raghukul01

Keywords: gsoc2018

enum_affine_rational_field function misses some points, consider the example shown below.

```
sage: A.<x,y> = AffineSpace(2, QQ)
sage: C = Curve(x^2+y-x)
sage: enum_affine_rational_field(C, 10)
[(-2, -6), (-1, -2), (0, 0), (1, 0), (2, -2), (3, -6)]
```

but 

```
(-2/3, -10/9)
(-1/2, -3/4)
(-1/3, -4/9)
(1/3, 2/9)
(1/2, 1/4)
(2/3, 2/9)
(3/2, -3/4)
```

also lie on the scheme, and satisfy height bound.


---

Comment by raghukul01 created at 2018-06-17 08:48:58

New commits:


---

Comment by raghukul01 created at 2018-06-17 08:48:58

Changing status from new to needs_review.


---

Comment by bhutz created at 2018-06-17 16:14:20

This looks fine. Although I made a slight change to be more memory efficient. We don't need to create and store the entire list of points in the rational case. I think that is worth the slight penalty of the 'if' we must check once per dimension.

If you think new version is fine, I'll mark this positive.
----
New commits:


---

Comment by raghukul01 created at 2018-06-17 16:36:09

Sir, but isn't that calling range_by_height function every time would have some time penalty? (it calculates `gcd` for `H^2` times each of which would have a complexity of `log(m) + log(n)`).

I think there would be a trade off between memory and time, which one would be significant would be deciding.


---

Comment by bhutz created at 2018-06-19 14:18:20

Yes, but I think the memory penalty is worse for storing the whole list.


---

Comment by raghukul01 created at 2018-06-19 16:43:11

Okay then it is fine :)


---

Comment by bhutz created at 2018-06-19 20:05:35

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2018-06-20 18:06:26

Resolution: fixed
