# Issue 17061: Adding Graded/Weighted Hilbert Series Functionality to Sage

archive/issues_017061.json:
```json
{
    "body": "\n\nIssue created by migration from https://trac.sagemath.org/ticket/17298\n\n",
    "created_at": "2014-11-06T06:51:26Z",
    "labels": [
        "PLEASE CHANGE",
        "major",
        "PLEASE CHANGE"
    ],
    "title": "Adding Graded/Weighted Hilbert Series Functionality to Sage",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17061",
    "user": "john_perry"
}
```


Issue created by migration from https://trac.sagemath.org/ticket/17298





---

archive/issue_comments_226914.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to commutative algebra.",
    "created_at": "2014-11-06T06:54:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17061#issuecomment-226914",
    "user": "john_perry"
}
```

Changing component from PLEASE CHANGE to commutative algebra.



---

archive/issue_comments_226915.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2014-11-06T06:54:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17061#issuecomment-226915",
    "user": "john_perry"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_226916.json:
```json
{
    "body": "Changing keywords from \"\" to \"Hilbert Series, weighted, singular\".",
    "created_at": "2014-11-06T06:54:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17061#issuecomment-226916",
    "user": "john_perry"
}
```

Changing keywords from "" to "Hilbert Series, weighted, singular".



---

archive/issue_comments_226917.json:
```json
{
    "body": "Hello\n\nThe description should explain the basic issue, but this is the first change I'm submitting via git & I can't seem to click on the \"branch\" field above, so as to ensure the changes I expected to see are actually there. I did follow the directions in the Developer's Guide, through `git trac push`; as far as I can tell, the subsequent sections don't apply. Please let me know if you also can't see the changes.",
    "created_at": "2014-11-06T07:01:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17061#issuecomment-226917",
    "user": "john_perry"
}
```

Hello

The description should explain the basic issue, but this is the first change I'm submitting via git & I can't seem to click on the "branch" field above, so as to ensure the changes I expected to see are actually there. I did follow the directions in the Developer's Guide, through `git trac push`; as far as I can tell, the subsequent sections don't apply. Please let me know if you also can't see the changes.



---

archive/issue_comments_226918.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-11-06T07:01:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17061#issuecomment-226918",
    "user": "john_perry"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_226919.json:
```json
{
    "body": "others also can't see the changes.\n\nyou could probably succeed with the sage dev scripts instead of using git directly,\nsee http://www.sagemath.org/doc/developer/dev_script.html#chapter-devscript",
    "created_at": "2014-11-06T09:45:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17061#issuecomment-226919",
    "user": "jakobkroeker"
}
```

others also can't see the changes.

you could probably succeed with the sage dev scripts instead of using git directly,
see http://www.sagemath.org/doc/developer/dev_script.html#chapter-devscript



---

archive/issue_comments_226920.json:
```json
{
    "body": "Replying to [comment:4 jakobkroeker]:\n> others also can't see the changes.\n\nThanks. Even worse, I found an error, tried to change the file, and discovered after the fact that Sage had reverted all my changes to the original. I'm deeply confused why this is happening.\n\n> you could probably succeed with the sage dev scripts instead of using git directly,\n> see http://www.sagemath.org/doc/developer/dev_script.html#chapter-devscript\n\n...which has a green box declaring,\n\n    **Hint:** We recommend to not use the developer scripts. You will have to *learn git* sooner or later, why not start now?\n\n:-) I'll try it. Thanks again.",
    "created_at": "2014-11-06T09:51:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17061#issuecomment-226920",
    "user": "john_perry"
}
```

Replying to [comment:4 jakobkroeker]:
> others also can't see the changes.

Thanks. Even worse, I found an error, tried to change the file, and discovered after the fact that Sage had reverted all my changes to the original. I'm deeply confused why this is happening.

> you could probably succeed with the sage dev scripts instead of using git directly,
> see http://www.sagemath.org/doc/developer/dev_script.html#chapter-devscript

...which has a green box declaring,

    **Hint:** We recommend to not use the developer scripts. You will have to *learn git* sooner or later, why not start now?

:-) I'll try it. Thanks again.



---

archive/issue_comments_226921.json:
```json
{
    "body": "> re: learn git\n\nIf you are unfamiliar with git, I would also recommend that you experiment a bit in a sandbox project first. There are great tutorials on the web.\n\n>Even worse, I found an error, tried to change the file, and discovered after the fact that Sage had >reverted all my changes to the original. I'm deeply confused why this is happening.\n\njust guessing; you checked out a different branch \n(check on which branch you are with 'git branch')? \nOr did a 'git reset' or similar? \nOr you edited an installed file instead a repository file? \nAfter changing a file before it is committed you should see that something changed with 'git status'",
    "created_at": "2014-11-06T10:07:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17061#issuecomment-226921",
    "user": "jakobkroeker"
}
```

> re: learn git

If you are unfamiliar with git, I would also recommend that you experiment a bit in a sandbox project first. There are great tutorials on the web.

>Even worse, I found an error, tried to change the file, and discovered after the fact that Sage had >reverted all my changes to the original. I'm deeply confused why this is happening.

just guessing; you checked out a different branch 
(check on which branch you are with 'git branch')? 
Or did a 'git reset' or similar? 
Or you edited an installed file instead a repository file? 
After changing a file before it is committed you should see that something changed with 'git status'



---

archive/issue_comments_226922.json:
```json
{
    "body": "Replying to [comment:6 jakobkroeker]:\n> >Even worse, I found an error, tried to change the file, and discovered after the fact that Sage had >reverted all my changes to the original. I'm deeply confused why this is happening.\n> \n> just guessing; you checked out a different branch\n\nNope\n \n> (check on which branch you are with 'git branch')? \n\nsage$ git branch\n  develop\n  master\n  multigraded_hilbert\n* t/17298/adding_graded_weighted_hilbert_series_functionality_to_sage\n  ticket/10716\n  ticket_10716\n\nIt looks to me that, if anything changed, it was done by git itself. I *should* be on \"multigraded_hilbert\". (I THINK. I was seeing this problem before I tried to commit, too.)\n\n> Or did a 'git reset' or similar? \n\nNope.\n\n> Or you edited an installed file instead a repository file? \n\nUhmmm... Where is this distinction made in the developer's guide?\n\nWait a second. Looking at what `git branch` told me above, I switched to the `multigraded_hilbert` branch, and found the changes I made. I did not create this new branch manually. Apparently, this change occurred when `git commit` created a new trac ticket?",
    "created_at": "2014-11-06T10:16:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17061#issuecomment-226922",
    "user": "john_perry"
}
```

Replying to [comment:6 jakobkroeker]:
> >Even worse, I found an error, tried to change the file, and discovered after the fact that Sage had >reverted all my changes to the original. I'm deeply confused why this is happening.
> 
> just guessing; you checked out a different branch

Nope
 
> (check on which branch you are with 'git branch')? 

sage$ git branch
  develop
  master
  multigraded_hilbert
* t/17298/adding_graded_weighted_hilbert_series_functionality_to_sage
  ticket/10716
  ticket_10716

It looks to me that, if anything changed, it was done by git itself. I *should* be on "multigraded_hilbert". (I THINK. I was seeing this problem before I tried to commit, too.)

> Or did a 'git reset' or similar? 

Nope.

> Or you edited an installed file instead a repository file? 

Uhmmm... Where is this distinction made in the developer's guide?

Wait a second. Looking at what `git branch` told me above, I switched to the `multigraded_hilbert` branch, and found the changes I made. I did not create this new branch manually. Apparently, this change occurred when `git commit` created a new trac ticket?



---

archive/issue_comments_226923.json:
```json
{
    "body": "> I *should* be on \"multigraded_hilbert\"\n\nnot necessarily. \nThe workflow is to create a new ticket using 'git trac create', \nwhich likely created and switched to\n't/17298/adding_graded_weighted_hilbert_series_functionality_to_sage' \nand THEN do the changes on that branch. \n\nWhat I would try is while on 'multigraded_hilbert' do \n'git diff t/17298/adding_graded_weighted_hilbert_series_functionality_to_sage' \nand if the diff has only your changes, \nswitch to 't/17298/adding_graded_weighted_hilbert_series_functionality_to_sage' ,\nand 'git merge multigraded_hilbert'\ninto your ticket.",
    "created_at": "2014-11-06T10:56:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17061#issuecomment-226923",
    "user": "jakobkroeker"
}
```

> I *should* be on "multigraded_hilbert"

not necessarily. 
The workflow is to create a new ticket using 'git trac create', 
which likely created and switched to
't/17298/adding_graded_weighted_hilbert_series_functionality_to_sage' 
and THEN do the changes on that branch. 

What I would try is while on 'multigraded_hilbert' do 
'git diff t/17298/adding_graded_weighted_hilbert_series_functionality_to_sage' 
and if the diff has only your changes, 
switch to 't/17298/adding_graded_weighted_hilbert_series_functionality_to_sage' ,
and 'git merge multigraded_hilbert'
into your ticket.



---

archive/issue_comments_226924.json:
```json
{
    "body": "It seems you are using the git-trac script. \n* `git checkout` switches between local branches\n* `git trac checkout` will download a branch from our git server and switch to it\n\nYou should figure out which local branch contains your changes, then switch to it, then run `git trac push 17298` to upload it to this ticket (you might need to add `--force`). And delete the unwanted local branch.",
    "created_at": "2014-11-06T11:12:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17061#issuecomment-226924",
    "user": "vbraun"
}
```

It seems you are using the git-trac script. 
* `git checkout` switches between local branches
* `git trac checkout` will download a branch from our git server and switch to it

You should figure out which local branch contains your changes, then switch to it, then run `git trac push 17298` to upload it to this ticket (you might need to add `--force`). And delete the unwanted local branch.



---

archive/issue_comments_226925.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-11-06T11:33:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17061#issuecomment-226925",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_226926.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-11-06T11:37:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17061#issuecomment-226926",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_226927.json:
```json
{
    "body": "Thank you, Volker! I'm seeing the changes, and they're looking like what I expected. (Forgot to commit the last change before the first push; sorry about that.)",
    "created_at": "2014-11-06T11:38:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17061#issuecomment-226927",
    "user": "john_perry"
}
```

Thank you, Volker! I'm seeing the changes, and they're looking like what I expected. (Forgot to commit the last change before the first push; sorry about that.)



---

archive/issue_comments_226928.json:
```json
{
    "body": "So I've made some reviewer changes to clean up the code which better handles things like `grading=(2/2, int(3))`. It might be nice to add support for grading given as a vector or an additive abelian group, but that can be done later. So if you're happy with my changes, then you can set a positive review.\n----\nNew commits:",
    "created_at": "2014-11-06T18:59:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17061#issuecomment-226928",
    "user": "tscrim"
}
```

So I've made some reviewer changes to clean up the code which better handles things like `grading=(2/2, int(3))`. It might be nice to add support for grading given as a vector or an additive abelian group, but that can be done later. So if you're happy with my changes, then you can set a positive review.
----
New commits:



---

archive/issue_comments_226929.json:
```json
{
    "body": "Replying to [comment:13 tscrim]:\n> So I've made some reviewer changes to clean up the code which better handles things like `grading=(2/2, int(3))`. It might be nice to add support for grading given as a vector or an additive abelian group, but that can be done later. So if you're happy with my changes, then you can set a positive review.\n\nI had thought about a vector, but it was so little work I figured the client could do it. Grading by an additive abelian group is a new one to me; how does that work? If it isn't too much trouble, we could work it into this ticket; otherwise, I'll just mark it \"positive review.\"",
    "created_at": "2014-11-07T08:05:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17061#issuecomment-226929",
    "user": "john_perry"
}
```

Replying to [comment:13 tscrim]:
> So I've made some reviewer changes to clean up the code which better handles things like `grading=(2/2, int(3))`. It might be nice to add support for grading given as a vector or an additive abelian group, but that can be done later. So if you're happy with my changes, then you can set a positive review.

I had thought about a vector, but it was so little work I figured the client could do it. Grading by an additive abelian group is a new one to me; how does that work? If it isn't too much trouble, we could work it into this ticket; otherwise, I'll just mark it "positive review."



---

archive/issue_comments_226930.json:
```json
{
    "body": "Replying to [comment:14 john_perry]:\n> I had thought about a vector, but it was so little work I figured the client could do it. Grading by an additive abelian group is a new one to me; how does that work? If it isn't too much trouble, we could work it into this ticket; otherwise, I'll just mark it \"positive review.\"\n\nWell, (free) additive abelian groups of rank n are just ZZ<sup>n</sup>. Although IDK if it makes mathematical sense to consider a grading group with torsion (such as exterior algebras which have a natural ZZ<sub>2</sub> grading), and if it doesn't, that's a bunch of parent checking. Yet from a coding point of view, one just needs to pass it to `tuple`:\n\n```\nsage: G = AdditiveAbelianGroup([0,0])\nsage: x = G(vector([4,2])); x\n(4, 2)\nsage: tuple(x)\n(4, 2)\n```\n\nSo since you're okay with making the user do things for a vector, then I'd say set a positive review.",
    "created_at": "2014-11-07T08:38:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17061#issuecomment-226930",
    "user": "tscrim"
}
```

Replying to [comment:14 john_perry]:
> I had thought about a vector, but it was so little work I figured the client could do it. Grading by an additive abelian group is a new one to me; how does that work? If it isn't too much trouble, we could work it into this ticket; otherwise, I'll just mark it "positive review."

Well, (free) additive abelian groups of rank n are just ZZ<sup>n</sup>. Although IDK if it makes mathematical sense to consider a grading group with torsion (such as exterior algebras which have a natural ZZ<sub>2</sub> grading), and if it doesn't, that's a bunch of parent checking. Yet from a coding point of view, one just needs to pass it to `tuple`:

```
sage: G = AdditiveAbelianGroup([0,0])
sage: x = G(vector([4,2])); x
(4, 2)
sage: tuple(x)
(4, 2)
```

So since you're okay with making the user do things for a vector, then I'd say set a positive review.



---

archive/issue_comments_226931.json:
```json
{
    "body": "Replying to [comment:15 tscrim]:\n> So since you're okay with making the user do things for a vector, then I'd say set a positive review.\n\nThat's likely what I'll do. The changes you made are definitely an improvement; unfortunately, they require me to rebuild a whole bunch of things, ** *some of which don't build! * **\n\n\n\n```\nfrom cpython.slice cimport *\n^\n------------------------------------------------------------\n\n./sage/ext/python.pxi:23:0: 'cpython.slice.pxd' not found\nTraceback (most recent call last):\n  File \"/Applications/sage/local/lib/python2.7/site-packages/Cython/Build/Dependencies.py\", line 919, in cythonize_one_helper\n    return cythonize_one(*m[1:])\n  File \"/Applications/sage/local/lib/python2.7/site-packages/Cython/Build/Dependencies.py\", line 902, in cythonize_one\n    raise CompileError(None, pyx_file)\nCompileError: sage/algebras/quatalg/quaternion_algebra_cython.pyx\nTraceback (most recent call last):\n  File \"setup.py\", line 565, in <module>\n    run_cythonize()\n  File \"setup.py\", line 557, in run_cythonize\n    'profile': profile,\n  File \"/Applications/sage/local/lib/python2.7/site-packages/Cython/Build/Dependencies.py\", line 782, in cythonize\n    pool.map(cythonize_one_helper, to_compile)\n  File \"/Applications/sage/local/lib/python/multiprocessing/pool.py\", line 251, in map\nCythonizing sage/modules/vector_complex_double_dense.pyx\n    return self.map_async(func, iterable, chunksize).get()\n  File \"/Applications/sage/local/lib/python/multiprocessing/pool.py\", line 558, in get\n    raise self._value\nCython.Compiler.Errors.CompileError: sage/algebras/quatalg/quaternion_algebra_cython.pyx\n```\n\n\nSo I'm not sure I *can* put a positive review on it, even though this is clearly a different problem, simply because I can't test it.",
    "created_at": "2014-11-07T09:39:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17061#issuecomment-226931",
    "user": "john_perry"
}
```

Replying to [comment:15 tscrim]:
> So since you're okay with making the user do things for a vector, then I'd say set a positive review.

That's likely what I'll do. The changes you made are definitely an improvement; unfortunately, they require me to rebuild a whole bunch of things, ** *some of which don't build! * **



```
from cpython.slice cimport *
^
------------------------------------------------------------

./sage/ext/python.pxi:23:0: 'cpython.slice.pxd' not found
Traceback (most recent call last):
  File "/Applications/sage/local/lib/python2.7/site-packages/Cython/Build/Dependencies.py", line 919, in cythonize_one_helper
    return cythonize_one(*m[1:])
  File "/Applications/sage/local/lib/python2.7/site-packages/Cython/Build/Dependencies.py", line 902, in cythonize_one
    raise CompileError(None, pyx_file)
CompileError: sage/algebras/quatalg/quaternion_algebra_cython.pyx
Traceback (most recent call last):
  File "setup.py", line 565, in <module>
    run_cythonize()
  File "setup.py", line 557, in run_cythonize
    'profile': profile,
  File "/Applications/sage/local/lib/python2.7/site-packages/Cython/Build/Dependencies.py", line 782, in cythonize
    pool.map(cythonize_one_helper, to_compile)
  File "/Applications/sage/local/lib/python/multiprocessing/pool.py", line 251, in map
Cythonizing sage/modules/vector_complex_double_dense.pyx
    return self.map_async(func, iterable, chunksize).get()
  File "/Applications/sage/local/lib/python/multiprocessing/pool.py", line 558, in get
    raise self._value
Cython.Compiler.Errors.CompileError: sage/algebras/quatalg/quaternion_algebra_cython.pyx
```


So I'm not sure I *can* put a positive review on it, even though this is clearly a different problem, simply because I can't test it.



---

archive/issue_comments_226932.json:
```json
{
    "body": "NOTE: *...and* it's rebuilding all the Cython code, even when I switch back. That's deeply annoying: the only change here lies in a few lines of **one Python module.**",
    "created_at": "2014-11-07T09:41:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17061#issuecomment-226932",
    "user": "john_perry"
}
```

NOTE: *...and* it's rebuilding all the Cython code, even when I switch back. That's deeply annoying: the only change here lies in a few lines of **one Python module.**



---

archive/issue_comments_226933.json:
```json
{
    "body": "Ah sorry, I forgot to mention that I upgraded it to the latest development version (the `develop` branch), which (likely) requires you to run `make` (or `make build`) from Sage's root directory. So you might want to do the following:\n\n```\ngit fetch trac develop:develop\n```\n\nwhere `trac` is my remote name for trac's git server, and then base everything off that branch (perhaps merging it into your other branches before running `make`).",
    "created_at": "2014-11-07T15:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17061#issuecomment-226933",
    "user": "tscrim"
}
```

Ah sorry, I forgot to mention that I upgraded it to the latest development version (the `develop` branch), which (likely) requires you to run `make` (or `make build`) from Sage's root directory. So you might want to do the following:

```
git fetch trac develop:develop
```

where `trac` is my remote name for trac's git server, and then base everything off that branch (perhaps merging it into your other branches before running `make`).



---

archive/issue_comments_226934.json:
```json
{
    "body": "Replying to [comment:18 tscrim]:\n> Ah sorry, I forgot to mention that I upgraded it to the latest development version (the `develop` branch), which (likely) requires you to run `make` (or `make build`) from Sage's root directory. ...\n\nOK. I'm afraid I won't be doing that anytime soon; I can't afford to tie up my installation for 2 hours of compilation every time a few lines of Python code change, and I'm traveling, so I only have one laptop with me, which I need for work. I'll try to do it before too long, though.",
    "created_at": "2014-11-07T15:52:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17061#issuecomment-226934",
    "user": "john_perry"
}
```

Replying to [comment:18 tscrim]:
> Ah sorry, I forgot to mention that I upgraded it to the latest development version (the `develop` branch), which (likely) requires you to run `make` (or `make build`) from Sage's root directory. ...

OK. I'm afraid I won't be doing that anytime soon; I can't afford to tie up my installation for 2 hours of compilation every time a few lines of Python code change, and I'm traveling, so I only have one laptop with me, which I need for work. I'll try to do it before too long, though.



---

archive/issue_comments_226935.json:
```json
{
    "body": "Well, something you can do to check my commits is create another branch based off `d1703bc` and cherry-pick the 2 non-merge commits.",
    "created_at": "2014-11-07T16:03:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17061#issuecomment-226935",
    "user": "tscrim"
}
```

Well, something you can do to check my commits is create another branch based off `d1703bc` and cherry-pick the 2 non-merge commits.



---

archive/issue_comments_226936.json:
```json
{
    "body": "Two comments, requesting change:\n\n* In the Hilbert numerator function, the documentation is wrong: \"Hilbert numerator\" changed to \"Hilbert series.\" I presume that's a copy & paste error. :-)\n\n* The original error message,\n     Grading for Hilbert Series must be a list or tuple of integers\n  has changed to,\n     Grading must be a list or a tuple of integers.\n  When I run a script or program, I find it useful when an error message tells me not only *that* something is wrong, but also *where* it's wrong. Can you change it back to the original error message? (This is the kind of thing I notice only when I edit the changes by hand.)",
    "created_at": "2014-11-08T06:14:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17061#issuecomment-226936",
    "user": "john_perry"
}
```

Two comments, requesting change:

* In the Hilbert numerator function, the documentation is wrong: "Hilbert numerator" changed to "Hilbert series." I presume that's a copy & paste error. :-)

* The original error message,
     Grading for Hilbert Series must be a list or tuple of integers
  has changed to,
     Grading must be a list or a tuple of integers.
  When I run a script or program, I find it useful when an error message tells me not only *that* something is wrong, but also *where* it's wrong. Can you change it back to the original error message? (This is the kind of thing I notice only when I edit the changes by hand.)



---

archive/issue_comments_226937.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-11-08T17:01:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17061#issuecomment-226937",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_226938.json:
```json
{
    "body": "Fixed the c/p error. However the traceback tells you where the error occurred:\n\n```\nsage: P.<x,y,z> = PolynomialRing(QQ)\nsage: I = Ideal([x^3*y^2 + 3*x^2*y^2*z + y^3*z^2 + z^5])\nsage: I.hilbert_numerator(grading=5)\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-3-49f8689d83b8> in <module>()\n----> 1 I.hilbert_numerator(grading=Integer(5))\n\n/home/travis/sage/local/lib/python2.7/site-packages/sage/rings/polynomial/multi_polynomial_ideal.pyc in __call__(self, *args, **kwds)\n    603         if not R.base_ring().is_field():\n    604             raise ValueError(\"Coefficient ring must be a field for function '%s'.\"%(self.f.__name__))\n--> 605         return self.f(self._instance, *args, **kwds)\n    606 \n    607 require_field = RequireField\n\n/home/travis/sage/local/lib/python2.7/site-packages/sage/rings/polynomial/multi_polynomial_ideal.pyc in hilbert_numerator(self, singular, grading)\n   2824         if grading is not None:\n   2825             if not isinstance(grading, (list, tuple)) or any(a not in ZZ for a in grading):\n-> 2826                 raise TypeError(\"Grading must be a list or a tuple of integers.\")\n   2827 \n   2828             hs = hilb(gb, 1, tuple(grading), attributes={gb: {'isSB': 1}})\n\nTypeError: Grading must be a list or a tuple of integers.\n```\n\nI believe the error message should be concise and not repeat information (plus I think most error messages in Sage/python don't tell you this info and rely on the traceback). However if you feel strongly about having `Hilbert series` into the error message, I'll change it.",
    "created_at": "2014-11-08T17:07:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17061#issuecomment-226938",
    "user": "tscrim"
}
```

Fixed the c/p error. However the traceback tells you where the error occurred:

```
sage: P.<x,y,z> = PolynomialRing(QQ)
sage: I = Ideal([x^3*y^2 + 3*x^2*y^2*z + y^3*z^2 + z^5])
sage: I.hilbert_numerator(grading=5)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-3-49f8689d83b8> in <module>()
----> 1 I.hilbert_numerator(grading=Integer(5))

/home/travis/sage/local/lib/python2.7/site-packages/sage/rings/polynomial/multi_polynomial_ideal.pyc in __call__(self, *args, **kwds)
    603         if not R.base_ring().is_field():
    604             raise ValueError("Coefficient ring must be a field for function '%s'."%(self.f.__name__))
--> 605         return self.f(self._instance, *args, **kwds)
    606 
    607 require_field = RequireField

/home/travis/sage/local/lib/python2.7/site-packages/sage/rings/polynomial/multi_polynomial_ideal.pyc in hilbert_numerator(self, singular, grading)
   2824         if grading is not None:
   2825             if not isinstance(grading, (list, tuple)) or any(a not in ZZ for a in grading):
-> 2826                 raise TypeError("Grading must be a list or a tuple of integers.")
   2827 
   2828             hs = hilb(gb, 1, tuple(grading), attributes={gb: {'isSB': 1}})

TypeError: Grading must be a list or a tuple of integers.
```

I believe the error message should be concise and not repeat information (plus I think most error messages in Sage/python don't tell you this info and rely on the traceback). However if you feel strongly about having `Hilbert series` into the error message, I'll change it.



---

archive/issue_comments_226939.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-11-08T17:12:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17061#issuecomment-226939",
    "user": "john_perry"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_226940.json:
```json
{
    "body": "Replying to [comment:23 tscrim]:\n> However the traceback tells you where the error occurred: ...\n> {{{\n> TypeError: Grading must be a list or a tuple of integers.\n> }}}\n> I believe the error message should be concise and not repeat information (plus I think most error messages in Sage/python don't tell you this info and rely on the traceback).\n\nOK, I think I had confused this type of error message with another (e.g., I'm working with a Cython program, and it doesn't usually tell you where something happened). I'll give it a positive review.\n\nThank you very much for the help w/improving this patch. :-)",
    "created_at": "2014-11-08T17:12:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17061#issuecomment-226940",
    "user": "john_perry"
}
```

Replying to [comment:23 tscrim]:
> However the traceback tells you where the error occurred: ...
> {{{
> TypeError: Grading must be a list or a tuple of integers.
> }}}
> I believe the error message should be concise and not repeat information (plus I think most error messages in Sage/python don't tell you this info and rely on the traceback).

OK, I think I had confused this type of error message with another (e.g., I'm working with a Cython program, and it doesn't usually tell you where something happened). I'll give it a positive review.

Thank you very much for the help w/improving this patch. :-)



---

archive/issue_comments_226941.json:
```json
{
    "body": "Not a problem.",
    "created_at": "2014-11-08T17:18:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17061#issuecomment-226941",
    "user": "tscrim"
}
```

Not a problem.



---

archive/issue_comments_226942.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-11-15T16:21:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17061#issuecomment-226942",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_226943.json:
```json
{
    "body": "The Milestone says \"sage-6.4\", but I'm looking at Sage 6.4 code and it's not in there. Does that happen often?",
    "created_at": "2014-11-19T09:16:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17061#issuecomment-226943",
    "user": "john_perry"
}
```

The Milestone says "sage-6.4", but I'm looking at Sage 6.4 code and it's not in there. Does that happen often?



---

archive/issue_comments_226944.json:
```json
{
    "body": "See https://groups.google.com/d/msg/sage-devel/sY0Be1aXxSg/XofRuzl8obkJ",
    "created_at": "2014-11-19T10:27:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17061#issuecomment-226944",
    "user": "vbraun"
}
```

See https://groups.google.com/d/msg/sage-devel/sY0Be1aXxSg/XofRuzl8obkJ
