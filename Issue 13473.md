# Issue 13473: Improve __repr__ and __str__ methods of WordMorphism

Issue created by migration from Trac.

Original creator: slabbe

Original creation time: 2012-10-31 16:03:34

Assignee: slabbe

CC:  tjolivet vdelecroix

Keywords: wordmorphism

The `__repr__` method is not fun:


```
sage: WordMorphism('a->ab,b->ba')
Morphism from Words over Ordered Alphabet ['a', 'b'] to Words over Ordered Alphabet ['a', 'b']
sage: WordMorphism({0:[0,1],1:[1,0]})  
Morphism from Words over Ordered Alphabet [0, 1] to Words over Ordered Alphabet [0, 1]
```


One always have to use the print statement (which calls `__str__`) ::


```
sage: print WordMorphism('a->ab,b->ba')
WordMorphism: a->ab, b->ba
sage: print WordMorphism({0:[0,1],1:[1,0]})
WordMorphism: 0->01, 1->10
```


Also, this is ugly:


```
sage: sigma = WordMorphism({1:[1,2], 2:[1,3], 3:[1]})
sage: E = E1Star(sigma)                              
sage: E                                              
E_1^*(WordMorphism: 1->12, 2->13, 3->1)
```


The proposed solution is to change the code of `__repr__` so that it behaves like the actual `__str__` and change the `__str__` to remove the `WordMorphism: ` part. See examples below :

The new `__repr__` method :


```
sage: WordMorphism('a->ab,b->ba')
WordMorphism: a->ab, b->ba
sage: WordMorphism({0:[0,1],1:[1,0]})
WordMorphism: 0->01, 1->10
```


The new `__str__` method :


```
sage: print WordMorphism('a->ab,b->ba')
a->ab, b->ba
```



```
sage: sigma = WordMorphism({1:[1,2], 2:[1,3], 3:[1]})
sage: E = E1Star(sigma)                              
sage: E  
E_1^*(1->12, 2->13, 3->1)
```






---

Comment by slabbe created at 2012-10-31 16:09:40

Changing status from new to needs_review.


---

Attachment


---

Attachment

I changed #13676 to remove the dependancies (by not including new `_latex_` method next to the `__repr__` and `__str__` methods).

I separated the patch into 3 pieces : the code changed, docfixes in `sage/combinat/words`, docfixes in `sage/combinat/iet`. It will be easier to review like that and also easier to update if future conflicts occur.

Needs review!


---

Attachment


---

Comment by tjolivet created at 2012-11-12 07:56:53

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2012-11-15 08:45:56

Please clarify which patches need to be applied.


---

Comment by slabbe created at 2012-11-15 12:32:22

Replying to [comment:7 jdemeyer]:
> Please clarify which patches need to be applied.

All of them, in any order.


---

Comment by jdemeyer created at 2012-11-17 08:56:17

Resolution: fixed
