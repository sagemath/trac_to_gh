# Issue 24869: Don't require matplotlib to run doctests

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2018-04-06 13:49:39

CC:  simonking

The doctest framework itself should not depend on matplotlib.


---

Comment by git created at 2018-04-06 14:39:39

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2018-04-06 14:40:18

Changing status from new to needs_review.


---

Comment by jhpalmieri created at 2018-05-02 17:56:18

This looks okay to me. Simon, any opinions?


---

Comment by SimonKing created at 2018-05-02 18:13:21

Replying to [comment:5 jhpalmieri]:
> This looks okay to me. Simon, any opinions?

I'd find it very good if one could use the SageMath doctest framework with as few prerequisites as possible. So, if this branch makes it so that sympy and matplotlib are not required to run doctests, I am +1!


---

Comment by SimonKing created at 2018-05-02 18:17:10

On the other hand: Both sympy and matplotlib are standard packages, and I don't see what harm would be done if Sage requires two of its standard packages to run tests.


---

Comment by jdemeyer created at 2018-05-07 07:52:22

Replying to [comment:7 SimonKing]:
> I don't see what harm would be done if Sage requires two of its standard packages to run tests.

There is harm if the *Sage doctesting framework* requires two of *Sage's* standard packages to run tests because the Sage doctesting framework is used for non-Sage tests too in #18514.


---

Comment by SimonKing created at 2018-05-07 12:03:25

Replying to [comment:8 jdemeyer]:
> Replying to [comment:7 SimonKing]:
> > I don't see what harm would be done if Sage requires two of its standard packages to run tests.
> 
> There is harm if the *Sage doctesting framework* requires two of *Sage's* standard packages to run tests because the Sage doctesting framework is used for non-Sage tests too in #18514.

No it isn't. The `p_group_cohomology` spkg has always and foremost been a *Sage* package (that's what spkg stands for). So, the `p_group_cohomology`'s test suite requires Sage being present. Otherwise it would simply not run.

Best regards,
Simon


---

Comment by jdemeyer created at 2018-05-08 07:52:08

This ticket is not about p_group_cohomology. I don't think that the Sage doctesting framework should require all standard Sage packages.


---

Comment by jhpalmieri created at 2018-05-20 22:19:29

I'm willing to give this a positive review. I don't see a downside to it, and there are potential advantages, even if there are no immediate uses for it yet (#18514 doesn't require it, I think).


---

Comment by saraedum created at 2018-05-20 23:45:51

Changing status from needs_review to positive_review.


---

Comment by saraedum created at 2018-05-20 23:45:51

Looks good to me. jhpalmieri, feel free to add yourself to the reviewer list.

jdemeyer: So, our doctesting framework could/should be an independent standard SPKG then?


---

Comment by jdemeyer created at 2018-05-22 20:25:20

Replying to [comment:12 saraedum]:
> jdemeyer: So, our doctesting framework could/should be an independent standard SPKG then?

Depends what you mean with "independent". It should certainly be usable by other packages besides Sage (for example `p_group_cohomology`). But it still depends on pieces of Sage, so it's not that simple to make it truly independent.


---

Comment by vbraun created at 2018-05-24 07:10:51

Resolution: fixed
