# Issue 16862: Fix quaternion algebras over number field

archive/issues_016862.json:
```json
{
    "body": "CC:  @NathanDunfield @williamstein\n\nIn this [sage devel thread](https://groups.google.com/forum/#!topic/sage-devel/0AkI7IEHCIw) was mentioned the following bug\n\n```\nsage: K = NumberField(x**3 + x - 1, 'a')\nsage: D.<i,j,k> = QuaternionAlgebra(K, -1, -3)\nsage: j/3 + (2*j)/3 == j\nFalse\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/17099\n\n",
    "created_at": "2014-10-04T18:49:19Z",
    "labels": [
        "component: algebra",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Fix quaternion algebras over number field",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16862",
    "user": "https://github.com/videlec"
}
```
CC:  @NathanDunfield @williamstein

In this [sage devel thread](https://groups.google.com/forum/#!topic/sage-devel/0AkI7IEHCIw) was mentioned the following bug

```
sage: K = NumberField(x**3 + x - 1, 'a')
sage: D.<i,j,k> = QuaternionAlgebra(K, -1, -3)
sage: j/3 + (2*j)/3 == j
False
```


Issue created by migration from https://trac.sagemath.org/ticket/17099





---

archive/issue_comments_223023.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-10-04T18:54:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16862#issuecomment-223023",
    "user": "https://github.com/videlec"
}
```

New commits:



---

archive/issue_comments_223024.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-10-04T18:54:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16862#issuecomment-223024",
    "user": "https://github.com/videlec"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_223025.json:
```json
{
    "body": "I looked at Vincent's patch and tested it on my own machine.  It definitely fixes the issue and the new doctest passes.   However, buildbot reports doctest failures in other modules (including ones almost certainly unconnected with the quaternion algebra code, like \"src/sage/rings/real_double.pyx\").  Am I allowed to move the status to \"positive review\" in this situation?",
    "created_at": "2014-10-05T14:03:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16862#issuecomment-223025",
    "user": "https://github.com/NathanDunfield"
}
```

I looked at Vincent's patch and tested it on my own machine.  It definitely fixes the issue and the new doctest passes.   However, buildbot reports doctest failures in other modules (including ones almost certainly unconnected with the quaternion algebra code, like "src/sage/rings/real_double.pyx").  Am I allowed to move the status to "positive review" in this situation?



---

archive/issue_comments_223026.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-10-06T17:51:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16862#issuecomment-223026",
    "user": "https://github.com/NathanDunfield"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_223027.json:
```json
{
    "body": "Ok, of the five doctests that failed on buildbot, on my machine two fail in what Vincent branched from (sr.py and pbori.py) and the other three (polynomial_element.pyx, modform/numerical.py, and real_double.pyx) pass both before and after.  I think this looks good, so moving to positive review.",
    "created_at": "2014-10-06T17:51:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16862#issuecomment-223027",
    "user": "https://github.com/NathanDunfield"
}
```

Ok, of the five doctests that failed on buildbot, on my machine two fail in what Vincent branched from (sr.py and pbori.py) and the other three (polynomial_element.pyx, modform/numerical.py, and real_double.pyx) pass both before and after.  I think this looks good, so moving to positive review.



---

archive/issue_comments_223028.json:
```json
{
    "body": "Thanks Nathan! The buildbot has some trouble... (there is a thread about that on sage devel)\n\nVincent",
    "created_at": "2014-10-06T18:44:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16862#issuecomment-223028",
    "user": "https://github.com/videlec"
}
```

Thanks Nathan! The buildbot has some trouble... (there is a thread about that on sage devel)

Vincent



---

archive/issue_comments_223029.json:
```json
{
    "body": "Yeah, I saw that thread, which is another reason I when ahead to \"positive review\"...",
    "created_at": "2014-10-06T19:09:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16862#issuecomment-223029",
    "user": "https://github.com/NathanDunfield"
}
```

Yeah, I saw that thread, which is another reason I when ahead to "positive review"...



---

archive/issue_events_049691.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-10-08T12:59:52Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16862",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16862#event-49691"
}
```



---

archive/issue_comments_223030.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-10-08T12:59:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16862",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16862#issuecomment-223030",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
