# Issue 16862: Fix quaternion algebras over number field

Issue created by migration from https://trac.sagemath.org/ticket/17099

Original creator: vdelecroix

Original creation time: 2014-10-04 18:49:19

CC:  dunfield was

In this [sage devel thread](https://groups.google.com/forum/#!topic/sage-devel/0AkI7IEHCIw) was mentioned the following bug

```
sage: K = NumberField(x**3 + x - 1, 'a')
sage: D.<i,j,k> = QuaternionAlgebra(K, -1, -3)
sage: j/3 + (2*j)/3 == j
False
```



---

Comment by vdelecroix created at 2014-10-04 18:54:11

New commits:


---

Comment by vdelecroix created at 2014-10-04 18:54:11

Changing status from new to needs_review.


---

Comment by dunfield created at 2014-10-05 14:03:28

I looked at Vincent's patch and tested it on my own machine.  It definitely fixes the issue and the new doctest passes.   However, buildbot reports doctest failures in other modules (including ones almost certainly unconnected with the quaternion algebra code, like "src/sage/rings/real_double.pyx").  Am I allowed to move the status to "positive review" in this situation?


---

Comment by dunfield created at 2014-10-06 17:51:40

Changing status from needs_review to positive_review.


---

Comment by dunfield created at 2014-10-06 17:51:40

Ok, of the five doctests that failed on buildbot, on my machine two fail in what Vincent branched from (sr.py and pbori.py) and the other three (polynomial_element.pyx, modform/numerical.py, and real_double.pyx) pass both before and after.  I think this looks good, so moving to positive review.


---

Comment by vdelecroix created at 2014-10-06 18:44:53

Thanks Nathan! The buildbot has some trouble... (there is a thread about that on sage devel)

Vincent


---

Comment by dunfield created at 2014-10-06 19:09:39

Yeah, I saw that thread, which is another reason I when ahead to "positive review"...


---

Comment by vbraun created at 2014-10-08 12:59:52

Resolution: fixed
