# Issue 32103: document behavior of .is_prime() for number fields

Issue created by migration from https://trac.sagemath.org/ticket/32340

Original creator: lorenz

Original creation time: 2021-08-06 05:55:53

CC:  nbruin

Keywords: number fields, prime elements, documentation

This patch addresses the issue raised in comment 15 of #7596.

(I am creating a new ticket for this because #7596 is about something much more general.)


---

Comment by lorenz created at 2021-08-06 05:56:48

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2021-12-18 19:53:12

Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.


---

Comment by tscrim created at 2022-06-16 01:05:41

I am suspicious that this is the correct place to put this documentation since the method just is calling the super one. That suggests it should go in the implementation of the base class.


---

Comment by lorenz created at 2022-06-16 07:11:41

I did it like this because comment:15:ticket:7596 said:
> In this case, it probably means equipping number field elements with a fresh implementation of `is_prime` with appropriate doc.

Presumably, the way the patch is currently done increases the visibility of the warning to those users who need to see it: They'd most likely be reading the number fields documentation, not the rings documentation. But I don't have a strong opinion either way.


---

Comment by tscrim created at 2022-06-16 08:59:48

Replying to [comment:7 lorenz]:
> I did it like this because comment:15:ticket:7596 said:
> > In this case, it probably means equipping number field elements with a fresh implementation of `is_prime` with appropriate doc.
> 
> Presumably, the way the patch is currently done increases the visibility of the warning to those users who need to see it: They'd most likely be reading the number fields documentation, not the rings documentation. But I don't have a strong opinion either way.

I don’t quite buy that argument. From the interactive documentation with `?`, you see it all the same. I don’t think it makes that much difference in the online doc. It does add an extra (Python) indirection, which means the code it (albeit likely just marginally) slower. The same message would, in principle, apply for anything using the base class as well.


---

Comment by git created at 2022-06-16 11:03:51

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by lorenz created at 2022-06-16 11:04:30

Alright, how about this?


---

Comment by tscrim created at 2022-06-16 23:31:04

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2022-06-16 23:31:04

Thank you. I think that is a much more natural place to put it (which reflects the fact that it uses the `ideal()` method).

Perhaps interesting, we get oddities like this:

```
sage: z = QQ['z'].0
sage: K = NumberField(z - 1,'s'); K
Number Field in s with defining polynomial z - 1
sage: K(7).is_prime()
True
```

I guess that is what structure you want to put on it: a number field or a usual field. Perhaps this is one way out of #7596, to have `QQ.number_field()` return the object above.


---

Comment by vbraun created at 2022-06-21 23:22:57

Resolution: fixed
