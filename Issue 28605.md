# Issue 28605: Uncatched AttributeError in integrate()

archive/issues_028605.json:
```json
{
    "body": "CC:  @dimpase @EmmanuelCharpentier\n\nKeywords: integrate, integral, sympy, RootSum\n\nAs reported in this [sage-devel post](https://groups.google.com/d/msg/sage-devel/_wwyqHmE5Lg/M24X8Mv_AAAJ), some integral computations may go through SymPy and return a `RootSum` object, which has currently no translation to Sage (cf. #16816)\n\n```\nsage: integrate(1/(x^4 + x^3 + 1), x)\n...\nAttributeError: 'RootSum' object has no attribute '_sage_'\n```\n\nUntil #16816 is solved, the current ticket proposes a quick fix by catching the `AttributeError` as if no valid result were found, so that we get \n\n```\nsage: integrate(1/(x^4 + x^3 + 1), x)\nintegrate(1/(x^4 + x^3 + 1), x)\n```\n\nwhich was the behavior prior to Sage 8.9, i.e. prior to the automatic use of SymPy if Maxima fails.\n\nIssue created by migration from https://trac.sagemath.org/ticket/28842\n\n",
    "created_at": "2019-12-04T21:57:39Z",
    "labels": [
        "component: symbolics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.0",
    "title": "Uncatched AttributeError in integrate()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28605",
    "user": "https://github.com/egourgoulhon"
}
```
CC:  @dimpase @EmmanuelCharpentier

Keywords: integrate, integral, sympy, RootSum

As reported in this [sage-devel post](https://groups.google.com/d/msg/sage-devel/_wwyqHmE5Lg/M24X8Mv_AAAJ), some integral computations may go through SymPy and return a `RootSum` object, which has currently no translation to Sage (cf. #16816)

```
sage: integrate(1/(x^4 + x^3 + 1), x)
...
AttributeError: 'RootSum' object has no attribute '_sage_'
```

Until #16816 is solved, the current ticket proposes a quick fix by catching the `AttributeError` as if no valid result were found, so that we get 

```
sage: integrate(1/(x^4 + x^3 + 1), x)
integrate(1/(x^4 + x^3 + 1), x)
```

which was the behavior prior to Sage 8.9, i.e. prior to the automatic use of SymPy if Maxima fails.

Issue created by migration from https://trac.sagemath.org/ticket/28842





---

archive/issue_comments_403336.json:
```json
{
    "body": "New commits:",
    "created_at": "2019-12-04T22:08:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28605#issuecomment-403336",
    "user": "https://github.com/egourgoulhon"
}
```

New commits:



---

archive/issue_comments_403337.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-12-04T22:08:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28605#issuecomment-403337",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_403338.json:
```json
{
    "body": "If/when patchbot says this is good, I think this is a good interim solution.  Good catch.",
    "created_at": "2019-12-05T04:38:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28605#issuecomment-403338",
    "user": "https://github.com/kcrisman"
}
```

If/when patchbot says this is good, I think this is a good interim solution.  Good catch.



---

archive/issue_comments_403339.json:
```json
{
    "body": "patchbot says\n\n```\n++        Check that trac:`28842` is fixed::\n+Bad trac link inserted on 1 non-empty lines\n```\n",
    "created_at": "2019-12-05T07:23:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28605#issuecomment-403339",
    "user": "https://github.com/fchapoton"
}
```

patchbot says

```
++        Check that trac:`28842` is fixed::
+Bad trac link inserted on 1 non-empty lines
```




---

archive/issue_comments_403340.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-05T08:27:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28605#issuecomment-403340",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403341.json:
```json
{
    "body": "Replying to [comment:3 chapoton]:\n> patchbot says\n> {{{\n> ++        Check that trac:`28842` is fixed::\n> +Bad trac link inserted on 1 non-empty lines\n> }}}\n\nOups! This is corrected in the above commit.",
    "created_at": "2019-12-05T08:27:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28605#issuecomment-403341",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [comment:3 chapoton]:
> patchbot says
> {{{
> ++        Check that trac:`28842` is fixed::
> +Bad trac link inserted on 1 non-empty lines
> }}}

Oups! This is corrected in the above commit.



---

archive/issue_comments_403342.json:
```json
{
    "body": "Minor English nitpick :)",
    "created_at": "2019-12-05T12:06:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28605#issuecomment-403342",
    "user": "https://github.com/embray"
}
```

Minor English nitpick :)



---

archive/issue_comments_403343.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-12-05T12:11:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28605#issuecomment-403343",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_403344.json:
```json
{
    "body": "ok, let it be",
    "created_at": "2019-12-05T12:11:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28605#issuecomment-403344",
    "user": "https://github.com/fchapoton"
}
```

ok, let it be



---

archive/issue_comments_403345.json:
```json
{
    "body": "Replying to [comment:6 embray]:\n> Minor English nitpick :)\nShame on me! Thanks for correcting it.",
    "created_at": "2019-12-05T12:21:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28605#issuecomment-403345",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [comment:6 embray]:
> Minor English nitpick :)
Shame on me! Thanks for correcting it.



---

archive/issue_comments_403346.json:
```json
{
    "body": "Replying to [comment:7 chapoton]:\n> ok, let it be\n\nThanks for the review!",
    "created_at": "2019-12-05T12:22:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28605#issuecomment-403346",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [comment:7 chapoton]:
> ok, let it be

Thanks for the review!



---

archive/issue_comments_403347.json:
```json
{
    "body": "> > Minor English nitpick :)\n> Shame on me! Thanks for correcting it.\nHaha, I thought about doing this but since it was just in the Trac title I didn't bother.\n\n> patchbot says\n\nI was wondering if that was the correct syntax.  Glad patchbot saw it.",
    "created_at": "2019-12-05T14:38:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28605#issuecomment-403347",
    "user": "https://github.com/kcrisman"
}
```

> > Minor English nitpick :)
> Shame on me! Thanks for correcting it.
Haha, I thought about doing this but since it was just in the Trac title I didn't bother.

> patchbot says

I was wondering if that was the correct syntax.  Glad patchbot saw it.



---

archive/issue_events_072936.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-12-09T22:54:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28605",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28605#event-72936"
}
```



---

archive/issue_comments_403348.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-12-09T22:54:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28605",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28605#issuecomment-403348",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
