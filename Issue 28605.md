# Issue 28605: Uncatched AttributeError in integrate()

Issue created by migration from https://trac.sagemath.org/ticket/28842

Original creator: egourgoulhon

Original creation time: 2019-12-04 21:57:39

CC:  dimpase charpent

Keywords: integrate, integral, sympy, RootSum

As reported in this [sage-devel post](https://groups.google.com/d/msg/sage-devel/_wwyqHmE5Lg/M24X8Mv_AAAJ), some integral computations may go through SymPy and return a `RootSum` object, which has currently no translation to Sage (cf. #16816)

```
sage: integrate(1/(x^4 + x^3 + 1), x)
...
AttributeError: 'RootSum' object has no attribute '_sage_'
```

Until #16816 is solved, the current ticket proposes a quick fix by catching the `AttributeError` as if no valid result were found, so that we get 

```
sage: integrate(1/(x^4 + x^3 + 1), x)
integrate(1/(x^4 + x^3 + 1), x)
```

which was the behavior prior to Sage 8.9, i.e. prior to the automatic use of SymPy if Maxima fails.


---

Comment by egourgoulhon created at 2019-12-04 22:08:38

New commits:


---

Comment by egourgoulhon created at 2019-12-04 22:08:38

Changing status from new to needs_review.


---

Comment by kcrisman created at 2019-12-05 04:38:34

If/when patchbot says this is good, I think this is a good interim solution.  Good catch.


---

Comment by chapoton created at 2019-12-05 07:23:48

patchbot says

```
++        Check that trac:`28842` is fixed::
+Bad trac link inserted on 1 non-empty lines
```



---

Comment by git created at 2019-12-05 08:27:10

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by egourgoulhon created at 2019-12-05 08:27:56

Replying to [comment:3 chapoton]:
> patchbot says
> {{{
> ++        Check that trac:`28842` is fixed::
> +Bad trac link inserted on 1 non-empty lines
> }}}

Oups! This is corrected in the above commit.


---

Comment by embray created at 2019-12-05 12:06:05

Minor English nitpick :)


---

Comment by chapoton created at 2019-12-05 12:11:45

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2019-12-05 12:11:45

ok, let it be


---

Comment by egourgoulhon created at 2019-12-05 12:21:31

Replying to [comment:6 embray]:
> Minor English nitpick :)
Shame on me! Thanks for correcting it.


---

Comment by egourgoulhon created at 2019-12-05 12:22:37

Replying to [comment:7 chapoton]:
> ok, let it be

Thanks for the review!


---

Comment by kcrisman created at 2019-12-05 14:38:00

> > Minor English nitpick :)
> Shame on me! Thanks for correcting it.
Haha, I thought about doing this but since it was just in the Trac title I didn't bother.

> patchbot says

I was wondering if that was the correct syntax.  Glad patchbot saw it.


---

Comment by vbraun created at 2019-12-09 22:54:28

Resolution: fixed
