# Issue 29040: Incidence matrix method doesnt work for G = DiGraph({0: ['a']})

archive/issues_029040.json:
```json
{
    "body": "CC:  dcoudert\n\nCurrent behavior:\n\n```\nsage: G = DiGraph({0: ['a']})\nsage: G.incidence_matrix()\nTraceback (most recent call last)\n...\nTypeError: '<' not supported between instances of 'int' and 'str'\n```\n\n\nincidence_matrix method should be able to handle the case when vertices are of mismatched types.\n\nIssue created by migration from https://trac.sagemath.org/ticket/29277\n\n",
    "created_at": "2020-03-03T19:24:28Z",
    "labels": [
        "graph theory",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Incidence matrix method doesnt work for G = DiGraph({0: ['a']})",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29040",
    "user": "@vipul79321"
}
```
CC:  dcoudert

Current behavior:

```
sage: G = DiGraph({0: ['a']})
sage: G.incidence_matrix()
Traceback (most recent call last)
...
TypeError: '<' not supported between instances of 'int' and 'str'
```


incidence_matrix method should be able to handle the case when vertices are of mismatched types.

Issue created by migration from https://trac.sagemath.org/ticket/29277





---

archive/issue_comments_411033.json:
```json
{
    "body": "When vertices are of different types, a solution is to give as input an ordering of the vertices\n\n```\nsage: G = DiGraph({0: ['a']})\nsage: G.incidence_matrix(vertices=[0, 'a'])\n[-1]\n[ 1]\nsage: G.incidence_matrix(vertices=list(G))\n[ 1]\n[-1]\n```\n\nand we will have to proceed with #22349 to stop sorting vertices and edges by default (not easy).",
    "created_at": "2020-03-04T09:06:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29040#issuecomment-411033",
    "user": "dcoudert"
}
```

When vertices are of different types, a solution is to give as input an ordering of the vertices

```
sage: G = DiGraph({0: ['a']})
sage: G.incidence_matrix(vertices=[0, 'a'])
[-1]
[ 1]
sage: G.incidence_matrix(vertices=list(G))
[ 1]
[-1]
```

and we will have to proceed with #22349 to stop sorting vertices and edges by default (not easy).



---

archive/issue_comments_411034.json:
```json
{
    "body": "Replying to [comment:1 dcoudert]:\n> When vertices are of different types, a solution is to give as input an ordering of the vertices\n> {{{\n> sage: G = DiGraph({0: ['a']})\n> sage: G.incidence_matrix(vertices=[0, 'a'])\n> [-1]\n> [ 1]\n> sage: G.incidence_matrix(vertices=list(G))\n> [ 1]\n> [-1]\n> }}}\n> and we will have to proceed with #22349 to stop sorting vertices and edges by default (not easy).\nI was wondering why can't we make the following changes:\nInstead of calling `self.vertices()`, we can call `self.vertices(sort=False)` which will solve our problem. And then we can modify doc-tests and documentation accordingly.\\\\\n\nAlso, We are kind of expecting the same behavior as above from fixing of #22349",
    "created_at": "2020-03-07T17:29:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29040#issuecomment-411034",
    "user": "@vipul79321"
}
```

Replying to [comment:1 dcoudert]:
> When vertices are of different types, a solution is to give as input an ordering of the vertices
> {{{
> sage: G = DiGraph({0: ['a']})
> sage: G.incidence_matrix(vertices=[0, 'a'])
> [-1]
> [ 1]
> sage: G.incidence_matrix(vertices=list(G))
> [ 1]
> [-1]
> }}}
> and we will have to proceed with #22349 to stop sorting vertices and edges by default (not easy).
I was wondering why can't we make the following changes:
Instead of calling `self.vertices()`, we can call `self.vertices(sort=False)` which will solve our problem. And then we can modify doc-tests and documentation accordingly.\\

Also, We are kind of expecting the same behavior as above from fixing of #22349



---

archive/issue_comments_411035.json:
```json
{
    "body": "We did a hard work on the graph module to make it compatible with Python3. We let this case for compatibility with other codes for the moment. The compromise was to introduce parameter `vertices`.\nAlso, I prefer to first deprecate default sorting of vertices and edges before changing the behavior of this method. Meanwhile, we can document the issue in the doctests of the method to should that it is better to specify the order of vertices and edges.",
    "created_at": "2020-03-08T13:19:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29040#issuecomment-411035",
    "user": "dcoudert"
}
```

We did a hard work on the graph module to make it compatible with Python3. We let this case for compatibility with other codes for the moment. The compromise was to introduce parameter `vertices`.
Also, I prefer to first deprecate default sorting of vertices and edges before changing the behavior of this method. Meanwhile, we can document the issue in the doctests of the method to should that it is better to specify the order of vertices and edges.



---

archive/issue_comments_411036.json:
```json
{
    "body": "Moving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.",
    "created_at": "2020-05-01T04:28:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29040#issuecomment-411036",
    "user": "mkoeppe"
}
```

Moving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.



---

archive/issue_comments_411037.json:
```json
{
    "body": "Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-04-07T19:29:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29040#issuecomment-411037",
    "user": "mkoeppe"
}
```

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review.
