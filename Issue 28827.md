# Issue 28827: is_galois() / automorphisms() can be made faster

Issue created by migration from https://trac.sagemath.org/ticket/29064

Original creator: rburing

Original creation time: 2020-01-21 23:36:23

Keywords: is_galois,automorphisms

Let `K.<a> = NumberField(f)`. The method `K.is_galois()` does the following:


```
if self.degree() < 12:
    return self.galois_group(type='pari').order() == self.degree()
else:
    return len(self.automorphisms()) == self.degree()
```


The method `K.automorphisms()` [defined here](https://github.com/sagemath/sage/blob/31cb54b77951c888af513734ca36ac045fa9ca86/src/sage/rings/number_field/number_field.py#L8329) runs essentially the PARI code


```
nfgaloisconj(nfinit(f))
```


to compute the automorphisms, followed by some conversions.
As [just discussed on pari-users](https://pari.math.u-bordeaux.fr/archives/pari-users-2001/msg00002.html), it is faster to run instead


```
nfgaloisconj(f)
```


because `nfinit` computes the full factorization of the discriminant of the polynomial, which is not (always) needed.

The question is whether the `nfinit(f)` data is really needed for the conversions in `K.automorphisms()`. If it is not needed, then the optimization (that is, calling `nfgaloisconj(f)` instead) can be implemented there. If it is needed, then the optimization can be implemented in `is_galois()`.

Either way, this would make `is_galois()` work faster for extensions of high degree.

The fact that it is currently slow was [reported on Ask SageMath](https://ask.sagemath.org/question/49620/is_galois-computation/), which led me to investigate.


---

Comment by mkoeppe created at 2020-04-14 19:41:51

Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.


---

Comment by mkoeppe created at 2021-02-13 20:51:01

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.
