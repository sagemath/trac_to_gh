# Issue 6506: further numpy type conversions

archive/issues_006506.json:
```json
{
    "assignees": [
        "https://github.com/sagetrac-jkantor"
    ],
    "body": "Followup to #5081, depends on Python 2.6\n\nBetter handling of ZZ, QQ and CC now supported. \n\nCC:  @sagetrac-cwitty\n\nReviewer: **Jason Grout, Robert Bradshaw, Minh Van Nguyen**\n\nAuthor: **Robert Bradshaw, Jason Grout**\n\nMerged: **Sage 4.1.1.rc0**\n\nComponent: **numerical**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/6506_\n\n",
    "closed_at": "2009-07-29T13:46:57Z",
    "created_at": "2009-07-10T06:53:49Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20numerical",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.1.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "further numpy type conversions",
    "type": "issue",
    "updated_at": "2016-01-07T11:13:53Z",
    "url": "https://github.com/sagemath/sage/issues/6506",
    "user": "https://github.com/robertwb"
}
```
Followup to #5081, depends on Python 2.6

Better handling of ZZ, QQ and CC now supported. 

CC:  @sagetrac-cwitty

Reviewer: **Jason Grout, Robert Bradshaw, Minh Van Nguyen**

Author: **Robert Bradshaw, Jason Grout**

Merged: **Sage 4.1.1.rc0**

Component: **numerical**

_Issue created by migration from https://trac.sagemath.org/ticket/6506_





---

archive/issue_events_078055.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2009-07-10T06:53:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "milestone_number": null,
    "milestone_title": "sage-4.1.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6506#event-78055"
}
```



---

archive/issue_events_078056.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2009-07-10T06:53:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20numerical",
    "label_color": "0000ff",
    "label_name": "c: numerical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6506#event-78056"
}
```



---

archive/issue_events_078057.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2009-07-10T06:53:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6506#event-78057"
}
```



---

archive/issue_events_078058.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2009-07-10T06:53:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6506#event-78058"
}
```



---

archive/issue_events_078059.json:
```json
{
    "actor": "https://github.com/sagetrac-jkantor",
    "created_at": "2009-07-10T06:53:49Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "subject": "https://github.com/robertwb",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6506#event-78059"
}
```



---

archive/issue_events_078060.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2009-07-10T06:54:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6506#event-78060"
}
```



---

archive/issue_comments_044760.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n-Followup to #5081. \n+Followup to #5081, depends on Python 2.6\n+\n+Better handling of ZZ, QQ and CC now supported. \n``````\n",
    "created_at": "2009-07-10T06:54:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6506#issuecomment-44760",
    "user": "https://github.com/robertwb"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
-Followup to #5081. 
+Followup to #5081, depends on Python 2.6
+
+Better handling of ZZ, QQ and CC now supported. 
``````




---

archive/issue_comments_044761.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nAttachment: **[6506-numpy-types.patch.gz](https://github.com/sagemath/sage/files/ticket6506/6506-numpy-types.patch.gz)**\n\nCarl, as one of the resident experts on precision issues, could you glance at the last part of this patch, which touches real_mpfr.pyx and seems to deal with precision issues?",
    "created_at": "2009-07-18T23:57:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6506#issuecomment-44761",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:2" align="right">comment:2</div>

Attachment: **[6506-numpy-types.patch.gz](https://github.com/sagemath/sage/files/ticket6506/6506-numpy-types.patch.gz)**

Carl, as one of the resident experts on precision issues, could you glance at the last part of this patch, which touches real_mpfr.pyx and seems to deal with precision issues?



---

archive/issue_comments_044762.json:
```json
{
    "body": "apply on top of previous patch",
    "created_at": "2009-07-19T03:38:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6506#issuecomment-44762",
    "user": "https://github.com/jasongrout"
}
```

apply on top of previous patch



---

archive/issue_comments_044763.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nAttachment: **[trac-6506-doc-fixes.patch.gz](https://github.com/sagemath/sage/files/ticket6506/trac-6506-doc-fixes.patch.gz)**\n\nI posted a patch which fixes lots of the documentation errors on #5081.  There are still some problems.\n\n* printing issues, presumably because of the work from the patch on this ticket on the precision code.  It appears there is one less zero printed in numbers.\n\n```\n$ sage -t complex_number.pyx \nsage -t  \"devel/sage-main/sage/rings/complex_number.pyx\"    \n**********************************************************************\nFile \"/home/grout/sage/devel/sage-main/sage/rings/complex_number.pyx\", line 1917:\n    sage: ComplexNumber(1.000000000000000000000000000,2)\nExpected:\n    1.000000000000000000000000000 + 2.000000000000000000000000000*I\nGot:\n    1.00000000000000000000000000 + 2.00000000000000000000000000*I\n**********************************************************************\nFile \"/home/grout/sage/devel/sage-main/sage/rings/complex_number.pyx\", line 1919:\n    sage: ComplexNumber(1,2.000000000000000000000)\nExpected:\n    1.000000000000000000000 + 2.000000000000000000000*I\nGot:\n    1.00000000000000000000 + 2.00000000000000000000*I\n**********************************************************************\n1 items had failures:\n   2 of   9 in __main__.example_74\n***Test Failed*** 2 failures.\nFor whitespace errors, see the file /home/grout/sage/tmp/.doctest_complex_number.py\n\t [11.8 s]\nexit code: 1024\n \n----------------------------------------------------------------------\nThe following tests failed:\n\n\n\tsage -t  \"devel/sage-main/sage/rings/complex_number.pyx\"\nTotal time for all tests: 11.8 seconds\n\n\n$ sage -t real_mpfr.pyx \nsage -t  \"devel/sage-main/sage/rings/real_mpfr.pyx\"         \n**********************************************************************\nFile \"/home/grout/sage/devel/sage-main/sage/rings/real_mpfr.pyx\", line 4299:\n    sage: RealNumber('1.0000000000000000000000000000000000')\nExpected:\n    1.0000000000000000000000000000000000\nGot:\n    1.000000000000000000000000000000000\n**********************************************************************\n1 items had failures:\n   1 of   9 in __main__.example_126\n***Test Failed*** 1 failures.\nFor whitespace errors, see the file /home/grout/sage/tmp/.doctest_real_mpfr.py\n\t [15.1 s]\nexit code: 1024\n \n----------------------------------------------------------------------\nThe following tests failed:\n\n\n\tsage -t  \"devel/sage-main/sage/rings/real_mpfr.pyx\"\nTotal time for all tests: 15.1 seconds\n\n\n\n```\n\n\n* Another error pointed out on #5081 that is deeper than a printing issue.  There appears to be a bug in the code---the same variable is used in a list comprehension as is used in an enclosing loop.  I rewrote some of the code to not use some numpy and string parsing, instead using python zip and string join methods.  However, there still seems to be an error.  Can someone more familiar with the code look at this?  I think all of these errors stem from the same problem.\n\n```\n$ sage -t rings/number_field/totallyreal_rel.py \nsage -t  \"devel/sage-main/sage/rings/number_field/totallyreal_rel.py\"\n**********************************************************************\nFile \"/home/grout/sage/devel/sage-main/sage/rings/number_field/totallyreal_rel.py\", line 156:\n    sage: T = sage.rings.number_field.totallyreal_rel.tr_data_rel(F, 2, 2000)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/grout/sage/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/home/grout/sage/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/home/grout/sage/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_3[3]>\", line 1, in <module>\n        T = sage.rings.number_field.totallyreal_rel.tr_data_rel(F, Integer(2), Integer(2000))###line 156:\n    sage: T = sage.rings.number_field.totallyreal_rel.tr_data_rel(F, 2, 2000)\n      File \"/home/grout/sage/local/lib/python/site-packages/sage/rings/number_field/totallyreal_rel.py\", line 200, in __init__\n        anm1s[i] += sum([m*Z_Fbasis[i]*adj[i].__int__()//adj[self.d].__int__() for i in range(self.d)])\n    IndexError: list index out of range\n**********************************************************************\nFile \"/home/grout/sage/devel/sage-main/sage/rings/number_field/totallyreal_rel.py\", line 568:\n    sage: enumerate_totallyreal_fields_rel(F, 2, 2000)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/grout/sage/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/home/grout/sage/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/home/grout/sage/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_5[4]>\", line 1, in <module>\n        enumerate_totallyreal_fields_rel(F, Integer(2), Integer(2000))###line 568:\n    sage: enumerate_totallyreal_fields_rel(F, 2, 2000)\n      File \"/home/grout/sage/local/lib/python/site-packages/sage/rings/number_field/totallyreal_rel.py\", line 646, in enumerate_totallyreal_fields_rel\n        T = tr_data_rel(F,m,B,a)\n      File \"/home/grout/sage/local/lib/python/site-packages/sage/rings/number_field/totallyreal_rel.py\", line 200, in __init__\n        anm1s[i] += sum([m*Z_Fbasis[i]*adj[i].__int__()//adj[self.d].__int__() for i in range(self.d)])\n    IndexError: list index out of range\n**********************************************************************\nFile \"/home/grout/sage/devel/sage-main/sage/rings/number_field/totallyreal_rel.py\", line 577:\n    sage: ls = enumerate_totallyreal_fields_rel(F, 2, 10^4)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/grout/sage/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/home/grout/sage/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/home/grout/sage/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_5[6]>\", line 1, in <module>\n        ls = enumerate_totallyreal_fields_rel(F, Integer(2), Integer(10)**Integer(4))###line 577:\n    sage: ls = enumerate_totallyreal_fields_rel(F, 2, 10^4)\n      File \"/home/grout/sage/local/lib/python/site-packages/sage/rings/number_field/totallyreal_rel.py\", line 646, in enumerate_totallyreal_fields_rel\n        T = tr_data_rel(F,m,B,a)\n      File \"/home/grout/sage/local/lib/python/site-packages/sage/rings/number_field/totallyreal_rel.py\", line 200, in __init__\n        anm1s[i] += sum([m*Z_Fbasis[i]*adj[i].__int__()//adj[self.d].__int__() for i in range(self.d)])\n    IndexError: list index out of range\n**********************************************************************\nFile \"/home/grout/sage/devel/sage-main/sage/rings/number_field/totallyreal_rel.py\", line 578:\n    sage: print \"ignore this\";  ls # random (the second factor is platform-dependent)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/grout/sage/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/home/grout/sage/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/home/grout/sage/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_5[7]>\", line 1, in <module>\n        print \"ignore this\";  ls # random (the second factor is platform-dependent)###line 578:\n    sage: print \"ignore this\";  ls # random (the second factor is platform-dependent)\n    NameError: name 'ls' is not defined\n**********************************************************************\nFile \"/home/grout/sage/devel/sage-main/sage/rings/number_field/totallyreal_rel.py\", line 600:\n    sage: [ f[0] for f in ls ]\nException raised:\n    Traceback (most recent call last):\n      File \"/home/grout/sage/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/home/grout/sage/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/home/grout/sage/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_5[8]>\", line 1, in <module>\n        [ f[Integer(0)] for f in ls ]###line 600:\n    sage: [ f[0] for f in ls ]\n    NameError: name 'ls' is not defined\n**********************************************************************\nFile \"/home/grout/sage/devel/sage-main/sage/rings/number_field/totallyreal_rel.py\", line 603:\n    sage: [NumberField(ZZx(x[1]), 't').is_galois() for x in ls]\nException raised:\n    Traceback (most recent call last):\n      File \"/home/grout/sage/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/home/grout/sage/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/home/grout/sage/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_5[9]>\", line 1, in <module>\n        [NumberField(ZZx(x[Integer(1)]), 't').is_galois() for x in ls]###line 603:\n    sage: [NumberField(ZZx(x[1]), 't').is_galois() for x in ls]\n    NameError: name 'ls' is not defined\n**********************************************************************\n2 items had failures:\n   1 of   4 in __main__.example_3\n   5 of  12 in __main__.example_5\n***Test Failed*** 6 failures.\nFor whitespace errors, see the file /home/grout/sage/tmp/.doctest_totallyreal_rel.py\n\t [4.3 s]\nexit code: 1024\n \n----------------------------------------------------------------------\nThe following tests failed:\n\n\n\tsage -t  \"devel/sage-main/sage/rings/number_field/totallyreal_rel.py\"\nTotal time for all tests: 4.3 seconds\n```",
    "created_at": "2009-07-19T03:44:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6506#issuecomment-44763",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:3" align="right">comment:3</div>

Attachment: **[trac-6506-doc-fixes.patch.gz](https://github.com/sagemath/sage/files/ticket6506/trac-6506-doc-fixes.patch.gz)**

I posted a patch which fixes lots of the documentation errors on #5081.  There are still some problems.

* printing issues, presumably because of the work from the patch on this ticket on the precision code.  It appears there is one less zero printed in numbers.

```
$ sage -t complex_number.pyx 
sage -t  "devel/sage-main/sage/rings/complex_number.pyx"    
**********************************************************************
File "/home/grout/sage/devel/sage-main/sage/rings/complex_number.pyx", line 1917:
    sage: ComplexNumber(1.000000000000000000000000000,2)
Expected:
    1.000000000000000000000000000 + 2.000000000000000000000000000*I
Got:
    1.00000000000000000000000000 + 2.00000000000000000000000000*I
**********************************************************************
File "/home/grout/sage/devel/sage-main/sage/rings/complex_number.pyx", line 1919:
    sage: ComplexNumber(1,2.000000000000000000000)
Expected:
    1.000000000000000000000 + 2.000000000000000000000*I
Got:
    1.00000000000000000000 + 2.00000000000000000000*I
**********************************************************************
1 items had failures:
   2 of   9 in __main__.example_74
***Test Failed*** 2 failures.
For whitespace errors, see the file /home/grout/sage/tmp/.doctest_complex_number.py
	 [11.8 s]
exit code: 1024
 
----------------------------------------------------------------------
The following tests failed:


	sage -t  "devel/sage-main/sage/rings/complex_number.pyx"
Total time for all tests: 11.8 seconds


$ sage -t real_mpfr.pyx 
sage -t  "devel/sage-main/sage/rings/real_mpfr.pyx"         
**********************************************************************
File "/home/grout/sage/devel/sage-main/sage/rings/real_mpfr.pyx", line 4299:
    sage: RealNumber('1.0000000000000000000000000000000000')
Expected:
    1.0000000000000000000000000000000000
Got:
    1.000000000000000000000000000000000
**********************************************************************
1 items had failures:
   1 of   9 in __main__.example_126
***Test Failed*** 1 failures.
For whitespace errors, see the file /home/grout/sage/tmp/.doctest_real_mpfr.py
	 [15.1 s]
exit code: 1024
 
----------------------------------------------------------------------
The following tests failed:


	sage -t  "devel/sage-main/sage/rings/real_mpfr.pyx"
Total time for all tests: 15.1 seconds



```


* Another error pointed out on #5081 that is deeper than a printing issue.  There appears to be a bug in the code---the same variable is used in a list comprehension as is used in an enclosing loop.  I rewrote some of the code to not use some numpy and string parsing, instead using python zip and string join methods.  However, there still seems to be an error.  Can someone more familiar with the code look at this?  I think all of these errors stem from the same problem.

```
$ sage -t rings/number_field/totallyreal_rel.py 
sage -t  "devel/sage-main/sage/rings/number_field/totallyreal_rel.py"
**********************************************************************
File "/home/grout/sage/devel/sage-main/sage/rings/number_field/totallyreal_rel.py", line 156:
    sage: T = sage.rings.number_field.totallyreal_rel.tr_data_rel(F, 2, 2000)
Exception raised:
    Traceback (most recent call last):
      File "/home/grout/sage/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/home/grout/sage/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/home/grout/sage/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_3[3]>", line 1, in <module>
        T = sage.rings.number_field.totallyreal_rel.tr_data_rel(F, Integer(2), Integer(2000))###line 156:
    sage: T = sage.rings.number_field.totallyreal_rel.tr_data_rel(F, 2, 2000)
      File "/home/grout/sage/local/lib/python/site-packages/sage/rings/number_field/totallyreal_rel.py", line 200, in __init__
        anm1s[i] += sum([m*Z_Fbasis[i]*adj[i].__int__()//adj[self.d].__int__() for i in range(self.d)])
    IndexError: list index out of range
**********************************************************************
File "/home/grout/sage/devel/sage-main/sage/rings/number_field/totallyreal_rel.py", line 568:
    sage: enumerate_totallyreal_fields_rel(F, 2, 2000)
Exception raised:
    Traceback (most recent call last):
      File "/home/grout/sage/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/home/grout/sage/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/home/grout/sage/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_5[4]>", line 1, in <module>
        enumerate_totallyreal_fields_rel(F, Integer(2), Integer(2000))###line 568:
    sage: enumerate_totallyreal_fields_rel(F, 2, 2000)
      File "/home/grout/sage/local/lib/python/site-packages/sage/rings/number_field/totallyreal_rel.py", line 646, in enumerate_totallyreal_fields_rel
        T = tr_data_rel(F,m,B,a)
      File "/home/grout/sage/local/lib/python/site-packages/sage/rings/number_field/totallyreal_rel.py", line 200, in __init__
        anm1s[i] += sum([m*Z_Fbasis[i]*adj[i].__int__()//adj[self.d].__int__() for i in range(self.d)])
    IndexError: list index out of range
**********************************************************************
File "/home/grout/sage/devel/sage-main/sage/rings/number_field/totallyreal_rel.py", line 577:
    sage: ls = enumerate_totallyreal_fields_rel(F, 2, 10^4)
Exception raised:
    Traceback (most recent call last):
      File "/home/grout/sage/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/home/grout/sage/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/home/grout/sage/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_5[6]>", line 1, in <module>
        ls = enumerate_totallyreal_fields_rel(F, Integer(2), Integer(10)**Integer(4))###line 577:
    sage: ls = enumerate_totallyreal_fields_rel(F, 2, 10^4)
      File "/home/grout/sage/local/lib/python/site-packages/sage/rings/number_field/totallyreal_rel.py", line 646, in enumerate_totallyreal_fields_rel
        T = tr_data_rel(F,m,B,a)
      File "/home/grout/sage/local/lib/python/site-packages/sage/rings/number_field/totallyreal_rel.py", line 200, in __init__
        anm1s[i] += sum([m*Z_Fbasis[i]*adj[i].__int__()//adj[self.d].__int__() for i in range(self.d)])
    IndexError: list index out of range
**********************************************************************
File "/home/grout/sage/devel/sage-main/sage/rings/number_field/totallyreal_rel.py", line 578:
    sage: print "ignore this";  ls # random (the second factor is platform-dependent)
Exception raised:
    Traceback (most recent call last):
      File "/home/grout/sage/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/home/grout/sage/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/home/grout/sage/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_5[7]>", line 1, in <module>
        print "ignore this";  ls # random (the second factor is platform-dependent)###line 578:
    sage: print "ignore this";  ls # random (the second factor is platform-dependent)
    NameError: name 'ls' is not defined
**********************************************************************
File "/home/grout/sage/devel/sage-main/sage/rings/number_field/totallyreal_rel.py", line 600:
    sage: [ f[0] for f in ls ]
Exception raised:
    Traceback (most recent call last):
      File "/home/grout/sage/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/home/grout/sage/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/home/grout/sage/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_5[8]>", line 1, in <module>
        [ f[Integer(0)] for f in ls ]###line 600:
    sage: [ f[0] for f in ls ]
    NameError: name 'ls' is not defined
**********************************************************************
File "/home/grout/sage/devel/sage-main/sage/rings/number_field/totallyreal_rel.py", line 603:
    sage: [NumberField(ZZx(x[1]), 't').is_galois() for x in ls]
Exception raised:
    Traceback (most recent call last):
      File "/home/grout/sage/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/home/grout/sage/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/home/grout/sage/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_5[9]>", line 1, in <module>
        [NumberField(ZZx(x[Integer(1)]), 't').is_galois() for x in ls]###line 603:
    sage: [NumberField(ZZx(x[1]), 't').is_galois() for x in ls]
    NameError: name 'ls' is not defined
**********************************************************************
2 items had failures:
   1 of   4 in __main__.example_3
   5 of  12 in __main__.example_5
***Test Failed*** 6 failures.
For whitespace errors, see the file /home/grout/sage/tmp/.doctest_totallyreal_rel.py
	 [4.3 s]
exit code: 1024
 
----------------------------------------------------------------------
The following tests failed:


	sage -t  "devel/sage-main/sage/rings/number_field/totallyreal_rel.py"
Total time for all tests: 4.3 seconds
```



---

archive/issue_events_078061.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2009-07-19T03:44:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6506#event-78061"
}
```



---

archive/issue_events_078062.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2009-07-19T03:44:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6506#event-78062"
}
```



---

archive/issue_comments_044764.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nSee the documentation patch (the second patch above) for changes to the totallyreal_rel.py file, including a comment about where a bug probably is.",
    "created_at": "2009-07-19T03:45:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6506#issuecomment-44764",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:4" align="right">comment:4</div>

See the documentation patch (the second patch above) for changes to the totallyreal_rel.py file, including a comment about where a bug probably is.



---

archive/issue_comments_044765.json:
```json
{
    "body": "Reviewer: **Jason Grout**",
    "created_at": "2009-07-19T03:45:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6506#issuecomment-44765",
    "user": "https://github.com/jasongrout"
}
```

Reviewer: **Jason Grout**



---

archive/issue_comments_044766.json:
```json
{
    "body": "Author: **Robert Bradshaw, Jason Grout**",
    "created_at": "2009-07-19T03:45:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6506#issuecomment-44766",
    "user": "https://github.com/jasongrout"
}
```

Author: **Robert Bradshaw, Jason Grout**



---

archive/issue_comments_044767.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI should mention that I'm not qualified to correct the code in totallyreal_rel.py, since I don't know which i is from the comprehension and which i is from the outer loop.",
    "created_at": "2009-07-19T03:56:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6506#issuecomment-44767",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:5" align="right">comment:5</div>

I should mention that I'm not qualified to correct the code in totallyreal_rel.py, since I don't know which i is from the comprehension and which i is from the outer loop.



---

archive/issue_comments_044768.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nJason, your code looks good to me. I've fixed totallyreal_rel.py--I don't totally understand the code/error either but did extensive comparison with the original code. I also fixed the remaining precision issues--the missing 0 is due to the fact that the decimal point is no longer considered a significant digit. \n\nIt'd be nice to get this into 4.1.1.",
    "created_at": "2009-07-25T10:48:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6506#issuecomment-44768",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:6" align="right">comment:6</div>

Jason, your code looks good to me. I've fixed totallyreal_rel.py--I don't totally understand the code/error either but did extensive comparison with the original code. I also fixed the remaining precision issues--the missing 0 is due to the fact that the decimal point is no longer considered a significant digit. 

It'd be nice to get this into 4.1.1.



---

archive/issue_events_078063.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2009-07-25T10:48:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6506#event-78063"
}
```



---

archive/issue_events_078064.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2009-07-25T10:48:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6506#event-78064"
}
```



---

archive/issue_comments_044769.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nAttachment: **[6506-numpy-types-fixes.patch.gz](https://github.com/sagemath/sage/files/ticket6506/6506-numpy-types-fixes.patch.gz)**\n\nAll doctests pass now.  I assume your comments mean that you are giving a positive review to my changes in totallyreal_rel.py (correct me if I'm wrong!).  Doctests now pass in totallyreal_rel.py and the other files mentioned above, so I'm changing this to a positive review and marking you as a reviewer too.\n\nI agree that it would be very, very nice to get this into 4.1.1, especially considering how many times it's come up on the mailing lists just in the past week.",
    "created_at": "2009-07-27T16:26:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6506#issuecomment-44769",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:7" align="right">comment:7</div>

Attachment: **[6506-numpy-types-fixes.patch.gz](https://github.com/sagemath/sage/files/ticket6506/6506-numpy-types-fixes.patch.gz)**

All doctests pass now.  I assume your comments mean that you are giving a positive review to my changes in totallyreal_rel.py (correct me if I'm wrong!).  Doctests now pass in totallyreal_rel.py and the other files mentioned above, so I'm changing this to a positive review and marking you as a reviewer too.

I agree that it would be very, very nice to get this into 4.1.1, especially considering how many times it's come up on the mailing lists just in the past week.



---

archive/issue_comments_044770.json:
```json
{
    "body": "Changed reviewer from **Jason Grout** to **Jason Grout, Robert Bradshaw**",
    "created_at": "2009-07-27T16:26:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6506#issuecomment-44770",
    "user": "https://github.com/jasongrout"
}
```

Changed reviewer from **Jason Grout** to **Jason Grout, Robert Bradshaw**



---

archive/issue_events_078065.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2009-07-27T16:26:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6506#event-78065"
}
```



---

archive/issue_events_078066.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2009-07-27T16:26:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6506#event-78066"
}
```



---

archive/issue_comments_044771.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nWhen I say above that all doctests pass, I mean the doctests pointed out in my comment above.  I assume that when this patch is merged, *all* doctests will be run and any errors will kick this ticket back to \"needs work\".",
    "created_at": "2009-07-27T16:27:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6506#issuecomment-44771",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:8" align="right">comment:8</div>

When I say above that all doctests pass, I mean the doctests pointed out in my comment above.  I assume that when this patch is merged, *all* doctests will be run and any errors will kick this ticket back to "needs work".



---

archive/issue_events_078067.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2009-07-29T11:51:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6506#event-78067"
}
```



---

archive/issue_events_078068.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2009-07-29T11:51:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6506#event-78068"
}
```



---

archive/issue_comments_044772.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI applied patches in this order:\n1. patch at #5081\n2. `6506-numpy-types.patch`\n3. `trac-6506-doc-fixes.patch`\n4. `6506-numpy-types-fixes.patch`\nDoctesting revealed the following failures, which are mostly numerical noise:\n\n```\nsage -t -long devel/sage-main/sage/symbolic/expression.pyx\n**********************************************************************\nFile \"/scratch/mvngu/release/sage-4.1.1.alpha1/devel/sage-main/sage/symbolic/expression.pyx\", line 4360:\n    sage: SR(1.0000000000000000000000000).cosh()\nExpected:\n    cosh(1.0000000000000000000000000)\nGot:\n    cosh(1.000000000000000000000000)\n**********************************************************************\n1 items had failures:\n   1 of  12 in __main__.example_111\n***Test Failed*** 1 failures.\nFor whitespace errors, see the file /scratch/mvngu/release/sage-4.1.1.alpha1/tmp/.doctest_expression.py\n\t [30.5 s]\n\nsage -t -long devel/sage-main/sage/functions/special.py\n**********************************************************************\nFile \"/scratch/mvngu/release/sage-4.1.1.alpha1/devel/sage-main/sage/functions/special.py\", line 655:\n    sage: bessel_I(0,1,\"maxima\")\nExpected:\n    1.26606587775200...\nGot:\n    1.26606587775201\n**********************************************************************\n1 items had failures:\n   1 of   8 in __main__.example_8\n***Test Failed*** 1 failures.\nFor whitespace errors, see the file /scratch/mvngu/release/sage-4.1.1.alpha1/tmp/.doctest_special.py\n\t [5.7 s]\n\nsage -t -long devel/sage-main/sage/combinat/combinat.py\n**********************************************************************\nFile \"/scratch/mvngu/release/sage-4.1.1.alpha1/devel/sage-main/sage/combinat/combinat.py\", line 1733:\n    sage: hurwitz_zeta(11/10,1/2,50)\nExpected:\n    12.103813495683755105709077412966680619033648618088\nGot:\n    12.10381349568375510570907741296668061903364861809\n**********************************************************************\n1 items had failures:\n   1 of   5 in __main__.example_76\n***Test Failed*** 1 failures.\nFor whitespace errors, see the file /scratch/mvngu/release/sage-4.1.1.alpha1/tmp/.doctest_combinat.py\n\t [4.0 s]\n\nsage -t -long devel/sage-main/sage/rings/rational_field.py\n**********************************************************************\nFile \"/scratch/mvngu/release/sage-4.1.1.alpha1/devel/sage-main/sage/rings/rational_field.py\", line 118:\n    sage: 6530219459687219.0/281474976710656\nExpected:\n    23.199999999999999\nGot:\n    23.20000000000000\n**********************************************************************\n1 items had failures:\n   1 of  24 in __main__.example_1\n***Test Failed*** 1 failures.\nFor whitespace errors, see the file /scratch/mvngu/release/sage-4.1.1.alpha1/tmp/.doctest_rational_field.py\n\t [2.9 s]\n\nsage -t -long devel/sage-main/sage/functions/transcendental.py\n**********************************************************************\nFile \"/scratch/mvngu/release/sage-4.1.1.alpha1/devel/sage-main/sage/functions/transcendental.py\", line 395:\n    sage: dickman_rho(10.00000000000000000000000000000000000000)\nExpected:\n    2.770171837725958988758121200634342326343e-11\nGot:\n    2.77017183772595898875812120063434232634e-11\n**********************************************************************\n1 items had failures:\n   1 of   6 in __main__.example_8\n***Test Failed*** 1 failures.\nFor whitespace errors, see the file /scratch/mvngu/release/sage-4.1.1.alpha1/tmp/.doctest_transcendental.py\n\t [3.5 s]\n\nsage -t -long devel/sage-main/sage/rings/complex_interval.pyx\n**********************************************************************\nFile \"/scratch/mvngu/release/sage-4.1.1.alpha1/devel/sage-main/sage/rings/complex_interval.pyx\", line 1052:\n    sage: ComplexIntervalFieldElement(1.234567890123456789012345, 5.4321098654321987654321)\nExpected:\n    1.2345678901234567890123450? + 5.4321098654321987654321000?*I\nGot:\n    1.234567890123456789012350? + 5.432109865432198765432000?*I\n**********************************************************************\n1 items had failures:\n   1 of   9 in __main__.example_32\n***Test Failed*** 1 failures.\nFor whitespace errors, see the file /scratch/mvngu/release/sage-4.1.1.alpha1/tmp/.doctest_complex_interval.py\n\t [2.9 s]\n```",
    "created_at": "2009-07-29T11:51:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6506#issuecomment-44772",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<div id="comment:9" align="right">comment:9</div>

I applied patches in this order:
1. patch at #5081
2. `6506-numpy-types.patch`
3. `trac-6506-doc-fixes.patch`
4. `6506-numpy-types-fixes.patch`
Doctesting revealed the following failures, which are mostly numerical noise:

```
sage -t -long devel/sage-main/sage/symbolic/expression.pyx
**********************************************************************
File "/scratch/mvngu/release/sage-4.1.1.alpha1/devel/sage-main/sage/symbolic/expression.pyx", line 4360:
    sage: SR(1.0000000000000000000000000).cosh()
Expected:
    cosh(1.0000000000000000000000000)
Got:
    cosh(1.000000000000000000000000)
**********************************************************************
1 items had failures:
   1 of  12 in __main__.example_111
***Test Failed*** 1 failures.
For whitespace errors, see the file /scratch/mvngu/release/sage-4.1.1.alpha1/tmp/.doctest_expression.py
	 [30.5 s]

sage -t -long devel/sage-main/sage/functions/special.py
**********************************************************************
File "/scratch/mvngu/release/sage-4.1.1.alpha1/devel/sage-main/sage/functions/special.py", line 655:
    sage: bessel_I(0,1,"maxima")
Expected:
    1.26606587775200...
Got:
    1.26606587775201
**********************************************************************
1 items had failures:
   1 of   8 in __main__.example_8
***Test Failed*** 1 failures.
For whitespace errors, see the file /scratch/mvngu/release/sage-4.1.1.alpha1/tmp/.doctest_special.py
	 [5.7 s]

sage -t -long devel/sage-main/sage/combinat/combinat.py
**********************************************************************
File "/scratch/mvngu/release/sage-4.1.1.alpha1/devel/sage-main/sage/combinat/combinat.py", line 1733:
    sage: hurwitz_zeta(11/10,1/2,50)
Expected:
    12.103813495683755105709077412966680619033648618088
Got:
    12.10381349568375510570907741296668061903364861809
**********************************************************************
1 items had failures:
   1 of   5 in __main__.example_76
***Test Failed*** 1 failures.
For whitespace errors, see the file /scratch/mvngu/release/sage-4.1.1.alpha1/tmp/.doctest_combinat.py
	 [4.0 s]

sage -t -long devel/sage-main/sage/rings/rational_field.py
**********************************************************************
File "/scratch/mvngu/release/sage-4.1.1.alpha1/devel/sage-main/sage/rings/rational_field.py", line 118:
    sage: 6530219459687219.0/281474976710656
Expected:
    23.199999999999999
Got:
    23.20000000000000
**********************************************************************
1 items had failures:
   1 of  24 in __main__.example_1
***Test Failed*** 1 failures.
For whitespace errors, see the file /scratch/mvngu/release/sage-4.1.1.alpha1/tmp/.doctest_rational_field.py
	 [2.9 s]

sage -t -long devel/sage-main/sage/functions/transcendental.py
**********************************************************************
File "/scratch/mvngu/release/sage-4.1.1.alpha1/devel/sage-main/sage/functions/transcendental.py", line 395:
    sage: dickman_rho(10.00000000000000000000000000000000000000)
Expected:
    2.770171837725958988758121200634342326343e-11
Got:
    2.77017183772595898875812120063434232634e-11
**********************************************************************
1 items had failures:
   1 of   6 in __main__.example_8
***Test Failed*** 1 failures.
For whitespace errors, see the file /scratch/mvngu/release/sage-4.1.1.alpha1/tmp/.doctest_transcendental.py
	 [3.5 s]

sage -t -long devel/sage-main/sage/rings/complex_interval.pyx
**********************************************************************
File "/scratch/mvngu/release/sage-4.1.1.alpha1/devel/sage-main/sage/rings/complex_interval.pyx", line 1052:
    sage: ComplexIntervalFieldElement(1.234567890123456789012345, 5.4321098654321987654321)
Expected:
    1.2345678901234567890123450? + 5.4321098654321987654321000?*I
Got:
    1.234567890123456789012350? + 5.432109865432198765432000?*I
**********************************************************************
1 items had failures:
   1 of   9 in __main__.example_32
***Test Failed*** 1 failures.
For whitespace errors, see the file /scratch/mvngu/release/sage-4.1.1.alpha1/tmp/.doctest_complex_interval.py
	 [2.9 s]
```



---

archive/issue_comments_044773.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI believe these are due to the correction of real number precision, not numerical noise. They all look fine to me--I'll try and post a patch later today.",
    "created_at": "2009-07-29T12:03:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6506#issuecomment-44773",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:10" align="right">comment:10</div>

I believe these are due to the correction of real number precision, not numerical noise. They all look fine to me--I'll try and post a patch later today.



---

archive/issue_events_078069.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2009-07-29T12:17:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6506#event-78069"
}
```



---

archive/issue_events_078070.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2009-07-29T12:17:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6506#event-78070"
}
```



---

archive/issue_comments_044774.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThe above issues are resolved.",
    "created_at": "2009-07-29T12:17:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6506#issuecomment-44774",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:11" align="right">comment:11</div>

The above issues are resolved.



---

archive/issue_events_078071.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2009-07-29T12:39:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6506#event-78071"
}
```



---

archive/issue_events_078072.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2009-07-29T12:39:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6506#event-78072"
}
```



---

archive/issue_comments_044775.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nWith the patch at #5081 and the patches on this ticket, I still get a doctest failure:\n\n```\nsage -t -long devel/sage-main/sage/combinat/combinat.py\n**********************************************************************\nFile \"/scratch/mvngu/release/sage-4.1.1.alpha1/devel/sage-main/sage/combinat/combinat.py\", line 1733:\n    sage: hurwitz_zeta(11/10,1/2,50)\nExpected:\n    12.103813495683755105709077412966680619033648618088\nGot:\n    12.10381349568375510570907741296668061903364861809\n**********************************************************************\n1 items had failures:\n   1 of   5 in __main__.example_76\n***Test Failed*** 1 failures.\nFor whitespace errors, see the file /scratch/mvngu/release/sage-4.1.1.alpha1/tmp/.doctest_combinat.py\n\t [3.9 s]\n```",
    "created_at": "2009-07-29T12:39:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6506#issuecomment-44775",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<div id="comment:12" align="right">comment:12</div>

With the patch at #5081 and the patches on this ticket, I still get a doctest failure:

```
sage -t -long devel/sage-main/sage/combinat/combinat.py
**********************************************************************
File "/scratch/mvngu/release/sage-4.1.1.alpha1/devel/sage-main/sage/combinat/combinat.py", line 1733:
    sage: hurwitz_zeta(11/10,1/2,50)
Expected:
    12.103813495683755105709077412966680619033648618088
Got:
    12.10381349568375510570907741296668061903364861809
**********************************************************************
1 items had failures:
   1 of   5 in __main__.example_76
***Test Failed*** 1 failures.
For whitespace errors, see the file /scratch/mvngu/release/sage-4.1.1.alpha1/tmp/.doctest_combinat.py
	 [3.9 s]
```



---

archive/issue_events_078073.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2009-07-29T13:24:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6506#event-78073"
}
```



---

archive/issue_events_078074.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2009-07-29T13:24:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6506#event-78074"
}
```



---

archive/issue_comments_044776.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nAttachment: **[numpy-fixes-3.patch.gz](https://github.com/sagemath/sage/files/ticket6506/numpy-fixes-3.patch.gz)**\n\nOh, somehow I missed that one. I've refreshed the patch.",
    "created_at": "2009-07-29T13:24:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6506#issuecomment-44776",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:13" align="right">comment:13</div>

Attachment: **[numpy-fixes-3.patch.gz](https://github.com/sagemath/sage/files/ticket6506/numpy-fixes-3.patch.gz)**

Oh, somehow I missed that one. I've refreshed the patch.



---

archive/issue_comments_044777.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nMerged all four patches.",
    "created_at": "2009-07-29T13:46:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6506#issuecomment-44777",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<div id="comment:14" align="right">comment:14</div>

Merged all four patches.



---

archive/issue_comments_044778.json:
```json
{
    "body": "Changed reviewer from **Jason Grout, Robert Bradshaw** to **Jason Grout, Robert Bradshaw, Minh Van Nguyen**",
    "created_at": "2009-07-29T13:46:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6506#issuecomment-44778",
    "user": "https://github.com/sagetrac-mvngu"
}
```

Changed reviewer from **Jason Grout, Robert Bradshaw** to **Jason Grout, Robert Bradshaw, Minh Van Nguyen**



---

archive/issue_events_078075.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2009-07-29T13:46:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6506#event-78075"
}
```



---

archive/issue_events_078076.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2009-07-29T13:46:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6506#event-78076"
}
```



---

archive/issue_comments_044779.json:
```json
{
    "body": "Merged: **Sage 4.1.1.rc0**",
    "created_at": "2009-07-29T13:46:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6506#issuecomment-44779",
    "user": "https://github.com/sagetrac-mvngu"
}
```

Merged: **Sage 4.1.1.rc0**



---

archive/issue_events_078077.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2009-07-29T13:47:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6506#event-78077"
}
```



---

archive/issue_events_078078.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2009-07-29T13:47:08Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6506#event-78078"
}
```



---

archive/issue_comments_044780.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nWhat's this?\n\n```\n            if self._prec <= 57: # max size of repr(float)\n```\nThe \"57\" makes no sense to me. How is `repr()` even related?",
    "created_at": "2015-12-22T13:04:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6506#issuecomment-44780",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:16" align="right">comment:16</div>

What's this?

```
            if self._prec <= 57: # max size of repr(float)
```
The "57" makes no sense to me. How is `repr()` even related?



---

archive/issue_comments_044781.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nThe \"57\" has been fixed in #19758.",
    "created_at": "2016-01-07T11:13:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6506#issuecomment-44781",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">comment:17</div>

The "57" has been fixed in #19758.
