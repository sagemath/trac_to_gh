# Issue 6616: refactor heegner points code out of ell_rational_field and support computing higher heegner points

archive/issues_006616.json:
```json
{
    "body": "I made a clean hg bundle against sage-4.1.1 that includes patches 1-16 along with the patches from 6745 and 6751:\n\n\nhttp://sage.math.washington.edu/home/wstein/patches/heegner-1-to-16.hg\n\n\nNOTE: If you apply patches, the code after part 7 depends on #6745, #6751, so make sure you apply those patches!\n\nPLAN:\n\n1. Refactor ell_rational_field, so the Heegner points code (nearly 1000 lines!) is in a new file heegner.py. \n\n2. Extend the heegner point code to compute y_lambda for lambda > 1. \n\n3. Implement first ever algorithm for provable verification of Kolyvagin's conjecture for specific rank 2 curves.\n\n\nI'm doing 1 and 2 together, since 2 is a fairly small change, but to do it right and make it at all fast requires restructuring the code a lot, otherwise one ends up fighting a lot with badly structured code instead of focusing on optimizing algorithms. \n\nAlso, this refactoring is a long time coming!\n\n\n\n**Assignee:** @williamstein\n\n**CC:**  @williamstein @JohnCremona\n\n**Author:** William Stein\n\n**Reviewer:** John Cremona\n\n**Merged:** sage-4.3.1.rc0\n\nIssue created by migration from https://trac.sagemath.org/ticket/6616\n\n",
    "closed_at": "2010-01-14T01:21:13Z",
    "created_at": "2009-07-25T10:23:56Z",
    "labels": [
        "component: number theory",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.3.1",
    "title": "refactor heegner points code out of ell_rational_field and support computing higher heegner points",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/6616",
    "user": "https://github.com/robertwb"
}
```
I made a clean hg bundle against sage-4.1.1 that includes patches 1-16 along with the patches from 6745 and 6751:


http://sage.math.washington.edu/home/wstein/patches/heegner-1-to-16.hg


NOTE: If you apply patches, the code after part 7 depends on #6745, #6751, so make sure you apply those patches!

PLAN:

1. Refactor ell_rational_field, so the Heegner points code (nearly 1000 lines!) is in a new file heegner.py. 

2. Extend the heegner point code to compute y_lambda for lambda > 1. 

3. Implement first ever algorithm for provable verification of Kolyvagin's conjecture for specific rank 2 curves.


I'm doing 1 and 2 together, since 2 is a fairly small change, but to do it right and make it at all fast requires restructuring the code a lot, otherwise one ends up fighting a lot with badly structured code instead of focusing on optimizing algorithms. 

Also, this refactoring is a long time coming!



**Assignee:** @williamstein

**CC:**  @williamstein @JohnCremona

**Author:** William Stein

**Reviewer:** John Cremona

**Merged:** sage-4.3.1.rc0

Issue created by migration from https://trac.sagemath.org/ticket/6616





---

archive/attachments_007887.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "6616-higher-heegner.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket6616/6616-higher-heegner.patch",
    "created_at": "2009-07-25T10:27:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/robertwb"
}
```



---

archive/issue_comments_060413.json:
```json
{
    "body": "",
    "created_at": "2009-07-25T10:27:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60413",
    "user": "https://github.com/robertwb"
}
```





---

archive/issue_events_020154.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "rename": {
        "from": "higher heegner points",
        "to": "refactor heegner points code out of ell_rational_field and support computing higher heegner points"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/6616#event-20154"
}
```



---

archive/issue_comments_060414.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,9 @@\n-Extend the heegner point code to compute y_lambda for lambda > 1. \n+1. Refactor ell_rational_field, so the Heegner points code (nearly 1000 lines!) is in a new file heegner.py. \n+\n+2. Extend the heegner point code to compute y_lambda for lambda > 1. \n+\n+This depends on #6045.\n+\n+I'm doing 1 and 2 together, since 2 is a fairly small change, but to do it right and make it at all fast requires restructuring the code a lot, otherwise one ends up fighting a lot with badly structured code instead of focusing on optimizing algorithms. \n+\n+Also, this refactoring is a long time coming!\n``````\n",
    "created_at": "2009-07-29T21:21:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60414",
    "user": "https://github.com/williamstein"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,9 @@
-Extend the heegner point code to compute y_lambda for lambda > 1. 
+1. Refactor ell_rational_field, so the Heegner points code (nearly 1000 lines!) is in a new file heegner.py. 
+
+2. Extend the heegner point code to compute y_lambda for lambda > 1. 
+
+This depends on #6045.
+
+I'm doing 1 and 2 together, since 2 is a fairly small change, but to do it right and make it at all fast requires restructuring the code a lot, otherwise one ends up fighting a lot with badly structured code instead of focusing on optimizing algorithms. 
+
+Also, this refactoring is a long time coming!
``````




---

archive/attachments_007888.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_6616-part3.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket6616/trac_6616-part3.patch",
    "created_at": "2009-08-01T01:41:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/williamstein"
}
```



---

archive/issue_comments_060415.json:
```json
{
    "body": "<a id='comment:2'></a>\nNext (?):\n* computing y_c by computing all the conjugates of y_c numerically\n* computing the (huge) Kolyvagin point P_c\n* choosing y-coordinate of y_c correctly.\n* computing degree of ring class field K[c] in all cases (not just Kolyvagin c)\n* optimization",
    "created_at": "2009-08-01T01:41:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60415",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:2'></a>
Next (?):
* computing y_c by computing all the conjugates of y_c numerically
* computing the (huge) Kolyvagin point P_c
* choosing y-coordinate of y_c correctly.
* computing degree of ring class field K[c] in all cases (not just Kolyvagin c)
* optimization



---

archive/issue_comments_060416.json:
```json
{
    "body": "<a id='comment:3'></a>\nThis calculation uses massive RAM:\n\n```\nsage: E = EllipticCurve([877,0])\nsage: P = E.heegner_point(-7)\nsage: P\nHeegner point of discriminant -7 on curve of conductor 49224256\nsage: N(P)\n[approx 5GB RAM (?) -- didn't wait for it to crash my laptop]\n```\n\nThis should get dealt with.  No clue what causes this.",
    "created_at": "2009-08-01T22:56:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60416",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:3'></a>
This calculation uses massive RAM:

```
sage: E = EllipticCurve([877,0])
sage: P = E.heegner_point(-7)
sage: P
Heegner point of discriminant -7 on curve of conductor 49224256
sage: N(P)
[approx 5GB RAM (?) -- didn't wait for it to crash my laptop]
```

This should get dealt with.  No clue what causes this.



---

archive/attachments_007889.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_6616-part5.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket6616/trac_6616-part5.patch",
    "created_at": "2009-08-05T05:27:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/williamstein"
}
```



---

archive/issue_comments_060417.json:
```json
{
    "body": "",
    "created_at": "2009-08-05T05:27:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60417",
    "user": "https://github.com/williamstein"
}
```





---

archive/attachments_007890.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_6616-part6.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket6616/trac_6616-part6.patch",
    "created_at": "2009-08-06T00:55:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/williamstein"
}
```



---

archive/issue_comments_060418.json:
```json
{
    "body": "",
    "created_at": "2009-08-06T00:55:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60418",
    "user": "https://github.com/williamstein"
}
```





---

archive/issue_comments_060419.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -7,3 +7,5 @@\n I'm doing 1 and 2 together, since 2 is a fairly small change, but to do it right and make it at all fast requires restructuring the code a lot, otherwise one ends up fighting a lot with badly structured code instead of focusing on optimizing algorithms. \n \n Also, this refactoring is a long time coming!\n+\n+(NOTE: Code after part 7 might end up depending on #6745, #6751.)\n``````\n",
    "created_at": "2009-08-15T01:38:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60419",
    "user": "https://github.com/williamstein"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -7,3 +7,5 @@
 I'm doing 1 and 2 together, since 2 is a fairly small change, but to do it right and make it at all fast requires restructuring the code a lot, otherwise one ends up fighting a lot with badly structured code instead of focusing on optimizing algorithms. 
 
 Also, this refactoring is a long time coming!
+
+(NOTE: Code after part 7 might end up depending on #6745, #6751.)
``````




---

archive/issue_comments_060420.json:
```json
{
    "body": "rebased against 4.1.1",
    "created_at": "2009-08-30T22:09:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60420",
    "user": "https://github.com/williamstein"
}
```

rebased against 4.1.1



---

archive/issue_comments_060421.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,20 @@\n+---\n+\n+Apply patches in this order:\n+\n+```\n+ 6616-higher-heegner.patch\n+ trac_6616-part2.patch\n+ trac_6616-part3.patch\n+ trac_6616-part4.patch\n+ trac_6616-part5.patch\n+ trac_6616-part6.patch\n+ trac_6616-part7.patch\n+```\n+\n+\n+\n+---\n 1. Refactor ell_rational_field, so the Heegner points code (nearly 1000 lines!) is in a new file heegner.py. \n \n 2. Extend the heegner point code to compute y_lambda for lambda > 1. \n``````\n",
    "created_at": "2009-08-30T22:12:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60421",
    "user": "https://github.com/williamstein"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,20 @@
+---
+
+Apply patches in this order:
+
+```
+ 6616-higher-heegner.patch
+ trac_6616-part2.patch
+ trac_6616-part3.patch
+ trac_6616-part4.patch
+ trac_6616-part5.patch
+ trac_6616-part6.patch
+ trac_6616-part7.patch
+```
+
+
+
+---
 1. Refactor ell_rational_field, so the Heegner points code (nearly 1000 lines!) is in a new file heegner.py. 
 
 2. Extend the heegner point code to compute y_lambda for lambda > 1. 
``````




---

archive/attachments_007891.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_6616-part2.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket6616/trac_6616-part2.patch",
    "created_at": "2009-08-30T22:12:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/williamstein"
}
```



---

archive/issue_comments_060422.json:
```json
{
    "body": "<a id='comment:5'></a>\n",
    "created_at": "2009-08-30T22:12:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60422",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:5'></a>




---

archive/issue_comments_060423.json:
```json
{
    "body": "rebased against 4.1.1",
    "created_at": "2009-08-30T22:13:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60423",
    "user": "https://github.com/williamstein"
}
```

rebased against 4.1.1



---

archive/attachments_007892.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_6616-part4.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket6616/trac_6616-part4.patch",
    "created_at": "2009-08-30T22:16:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/williamstein"
}
```



---

archive/issue_comments_060424.json:
```json
{
    "body": "rebased against 4.1.1",
    "created_at": "2009-08-30T22:16:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60424",
    "user": "https://github.com/williamstein"
}
```

rebased against 4.1.1



---

archive/attachments_007893.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_6616-part7.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket6616/trac_6616-part7.patch",
    "created_at": "2009-08-30T22:17:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/williamstein"
}
```



---

archive/issue_comments_060425.json:
```json
{
    "body": "<a id='comment:6'></a>\n",
    "created_at": "2009-08-30T22:17:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60425",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:6'></a>




---

archive/issue_comments_060426.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,3 @@\n----\n \n Apply patches in this order:\n \n@@ -12,9 +11,8 @@\n  trac_6616-part7.patch\n ```\n \n+PLAN:\n \n-\n----\n 1. Refactor ell_rational_field, so the Heegner points code (nearly 1000 lines!) is in a new file heegner.py. \n \n 2. Extend the heegner point code to compute y_lambda for lambda > 1. \n``````\n",
    "created_at": "2009-08-30T22:17:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60426",
    "user": "https://github.com/williamstein"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,3 @@
----
 
 Apply patches in this order:
 
@@ -12,9 +11,8 @@
  trac_6616-part7.patch
 ```
 
+PLAN:
 
-
----
 1. Refactor ell_rational_field, so the Heegner points code (nearly 1000 lines!) is in a new file heegner.py. 
 
 2. Extend the heegner point code to compute y_lambda for lambda > 1. 
``````




---

archive/attachments_007894.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_6616-part8.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket6616/trac_6616-part8.patch",
    "created_at": "2009-08-31T00:51:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/williamstein"
}
```



---

archive/issue_comments_060427.json:
```json
{
    "body": "",
    "created_at": "2009-08-31T00:51:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60427",
    "user": "https://github.com/williamstein"
}
```





---

archive/issue_comments_060428.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,3 @@\n-\n Apply patches in this order:\n \n ```\n@@ -9,6 +8,8 @@\n  trac_6616-part5.patch\n  trac_6616-part6.patch\n  trac_6616-part7.patch\n+ trac_6616-part8.patch\n+ trac_6616-part9.patch\n ```\n \n PLAN:\n``````\n",
    "created_at": "2009-09-03T07:43:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60428",
    "user": "https://github.com/williamstein"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,3 @@
-
 Apply patches in this order:
 
 ```
@@ -9,6 +8,8 @@
  trac_6616-part5.patch
  trac_6616-part6.patch
  trac_6616-part7.patch
+ trac_6616-part8.patch
+ trac_6616-part9.patch
 ```
 
 PLAN:
``````




---

archive/attachments_007895.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_6616-part10.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket6616/trac_6616-part10.patch",
    "created_at": "2009-09-03T07:44:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/williamstein"
}
```



---

archive/issue_comments_060429.json:
```json
{
    "body": "<a id='comment:8'></a>\n",
    "created_at": "2009-09-03T07:44:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60429",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:8'></a>




---

archive/issue_comments_060430.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -10,6 +10,7 @@\n  trac_6616-part7.patch\n  trac_6616-part8.patch\n  trac_6616-part9.patch\n+ trac_6616-part10.patch\n ```\n \n PLAN:\n``````\n",
    "created_at": "2009-09-03T07:44:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60430",
    "user": "https://github.com/williamstein"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -10,6 +10,7 @@
  trac_6616-part7.patch
  trac_6616-part8.patch
  trac_6616-part9.patch
+ trac_6616-part10.patch
 ```
 
 PLAN:
``````




---

archive/attachments_007896.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_6616-part11.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket6616/trac_6616-part11.patch",
    "created_at": "2009-09-05T22:24:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/williamstein"
}
```



---

archive/issue_comments_060431.json:
```json
{
    "body": "",
    "created_at": "2009-09-05T22:24:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60431",
    "user": "https://github.com/williamstein"
}
```





---

archive/attachments_007897.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_6616-part12.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket6616/trac_6616-part12.patch",
    "created_at": "2009-09-07T08:10:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/williamstein"
}
```



---

archive/issue_comments_060432.json:
```json
{
    "body": "",
    "created_at": "2009-09-07T08:10:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60432",
    "user": "https://github.com/williamstein"
}
```





---

archive/attachments_007898.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_6616-patch13.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket6616/trac_6616-patch13.patch",
    "created_at": "2009-09-08T07:55:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/williamstein"
}
```



---

archive/issue_comments_060433.json:
```json
{
    "body": "",
    "created_at": "2009-09-08T07:55:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60433",
    "user": "https://github.com/williamstein"
}
```





---

archive/issue_comments_060434.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-Apply patches in this order:\n+You can apply http://sage.math.washington.edu/home/wstein/tmp/heegner.hg or  apply patches in this order:\n \n ```\n  6616-higher-heegner.patch\n@@ -11,6 +11,7 @@\n  trac_6616-part8.patch\n  trac_6616-part9.patch\n  trac_6616-part10.patch\n+...\n ```\n \n PLAN:\n``````\n",
    "created_at": "2009-09-08T08:06:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60434",
    "user": "https://github.com/williamstein"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-Apply patches in this order:
+You can apply http://sage.math.washington.edu/home/wstein/tmp/heegner.hg or  apply patches in this order:
 
 ```
  6616-higher-heegner.patch
@@ -11,6 +11,7 @@
  trac_6616-part8.patch
  trac_6616-part9.patch
  trac_6616-part10.patch
+...
 ```
 
 PLAN:
``````




---

archive/attachments_007899.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_6616-part14.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket6616/trac_6616-part14.patch",
    "created_at": "2009-09-13T21:24:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/williamstein"
}
```



---

archive/issue_comments_060435.json:
```json
{
    "body": "",
    "created_at": "2009-09-13T21:24:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60435",
    "user": "https://github.com/williamstein"
}
```





---

archive/attachments_007900.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_6616-part15.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket6616/trac_6616-part15.patch",
    "created_at": "2009-09-19T08:18:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/williamstein"
}
```



---

archive/issue_comments_060436.json:
```json
{
    "body": "",
    "created_at": "2009-09-19T08:18:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60436",
    "user": "https://github.com/williamstein"
}
```





---

archive/attachments_007901.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_6616-part16.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket6616/trac_6616-part16.patch",
    "created_at": "2009-09-19T08:36:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/williamstein"
}
```



---

archive/issue_comments_060437.json:
```json
{
    "body": "<a id='comment:10'></a>\n",
    "created_at": "2009-09-19T08:36:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60437",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:10'></a>




---

archive/issue_comments_060438.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -20,7 +20,6 @@\n \n 2. Extend the heegner point code to compute y_lambda for lambda > 1. \n \n-This depends on #6045.\n \n I'm doing 1 and 2 together, since 2 is a fairly small change, but to do it right and make it at all fast requires restructuring the code a lot, otherwise one ends up fighting a lot with badly structured code instead of focusing on optimizing algorithms. \n \n``````\n",
    "created_at": "2009-09-19T08:36:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60438",
    "user": "https://github.com/williamstein"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -20,7 +20,6 @@
 
 2. Extend the heegner point code to compute y_lambda for lambda > 1. 
 
-This depends on #6045.
 
 I'm doing 1 and 2 together, since 2 is a fairly small change, but to do it right and make it at all fast requires restructuring the code a lot, otherwise one ends up fighting a lot with badly structured code instead of focusing on optimizing algorithms. 
 
``````




---

archive/issue_comments_060439.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-You can apply http://sage.math.washington.edu/home/wstein/tmp/heegner.hg or  apply patches in this order:\n+You can apply http://sage.math.washington.edu/home/wstein/pat/heegner.hg or  apply patches in this order:\n \n ```\n  6616-higher-heegner.patch\n@@ -13,6 +13,7 @@\n  trac_6616-part10.patch\n ...\n ```\n+NOTE: Code after part 7 depends on #6745, #6751, so make sure you apply those patches!\n \n PLAN:\n \n@@ -20,9 +21,11 @@\n \n 2. Extend the heegner point code to compute y_lambda for lambda > 1. \n \n+3. Implement first ever algorithm for provable verification of Kolyvagin's conjecture for specific rank 2 curves.\n+\n \n I'm doing 1 and 2 together, since 2 is a fairly small change, but to do it right and make it at all fast requires restructuring the code a lot, otherwise one ends up fighting a lot with badly structured code instead of focusing on optimizing algorithms. \n \n Also, this refactoring is a long time coming!\n \n-(NOTE: Code after part 7 might end up depending on #6745, #6751.)\n+\n``````\n",
    "created_at": "2009-09-19T08:52:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60439",
    "user": "https://github.com/williamstein"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-You can apply http://sage.math.washington.edu/home/wstein/tmp/heegner.hg or  apply patches in this order:
+You can apply http://sage.math.washington.edu/home/wstein/pat/heegner.hg or  apply patches in this order:
 
 ```
  6616-higher-heegner.patch
@@ -13,6 +13,7 @@
  trac_6616-part10.patch
 ...
 ```
+NOTE: Code after part 7 depends on #6745, #6751, so make sure you apply those patches!
 
 PLAN:
 
@@ -20,9 +21,11 @@
 
 2. Extend the heegner point code to compute y_lambda for lambda > 1. 
 
+3. Implement first ever algorithm for provable verification of Kolyvagin's conjecture for specific rank 2 curves.
+
 
 I'm doing 1 and 2 together, since 2 is a fairly small change, but to do it right and make it at all fast requires restructuring the code a lot, otherwise one ends up fighting a lot with badly structured code instead of focusing on optimizing algorithms. 
 
 Also, this refactoring is a long time coming!
 
-(NOTE: Code after part 7 might end up depending on #6745, #6751.)
+
``````




---

archive/attachments_007902.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_6616-part9.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket6616/trac_6616-part9.patch",
    "created_at": "2009-09-19T08:52:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/williamstein"
}
```



---

archive/issue_comments_060440.json:
```json
{
    "body": "<a id='comment:11'></a>\n",
    "created_at": "2009-09-19T08:52:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60440",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:11'></a>




---

archive/issue_comments_060441.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,19 +1,10 @@\n-You can apply http://sage.math.washington.edu/home/wstein/pat/heegner.hg or  apply patches in this order:\n+I made a clean hg bundle against sage-4.1.1 that includes patches 1-16 along with the patches from 6745 and 6751:\n \n-```\n- 6616-higher-heegner.patch\n- trac_6616-part2.patch\n- trac_6616-part3.patch\n- trac_6616-part4.patch\n- trac_6616-part5.patch\n- trac_6616-part6.patch\n- trac_6616-part7.patch\n- trac_6616-part8.patch\n- trac_6616-part9.patch\n- trac_6616-part10.patch\n-...\n-```\n-NOTE: Code after part 7 depends on #6745, #6751, so make sure you apply those patches!\n+\n+http://sage.math.washington.edu/home/wstein/patches/heegner-1-to-16.hg\n+\n+\n+NOTE: If you apply patches, the code after part 7 depends on #6745, #6751, so make sure you apply those patches!\n \n PLAN:\n \n``````\n",
    "created_at": "2009-09-19T09:14:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60441",
    "user": "https://github.com/williamstein"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,19 +1,10 @@
-You can apply http://sage.math.washington.edu/home/wstein/pat/heegner.hg or  apply patches in this order:
+I made a clean hg bundle against sage-4.1.1 that includes patches 1-16 along with the patches from 6745 and 6751:
 
-```
- 6616-higher-heegner.patch
- trac_6616-part2.patch
- trac_6616-part3.patch
- trac_6616-part4.patch
- trac_6616-part5.patch
- trac_6616-part6.patch
- trac_6616-part7.patch
- trac_6616-part8.patch
- trac_6616-part9.patch
- trac_6616-part10.patch
-...
-```
-NOTE: Code after part 7 depends on #6745, #6751, so make sure you apply those patches!
+
+http://sage.math.washington.edu/home/wstein/patches/heegner-1-to-16.hg
+
+
+NOTE: If you apply patches, the code after part 7 depends on #6745, #6751, so make sure you apply those patches!
 
 PLAN:
 
``````




---

archive/issue_comments_060442.json:
```json
{
    "body": "clean bundle with 1-16 against sage-4.1.1",
    "created_at": "2009-09-19T09:14:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60442",
    "user": "https://github.com/williamstein"
}
```

clean bundle with 1-16 against sage-4.1.1



---

archive/attachments_007903.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "heegner-1-to-16.hg",
    "asset_url": "tarball://root/attachments/some-uuid/ticket6616/heegner-1-to-16.hg",
    "created_at": "2009-10-22T04:40:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.hg",
    "user": "https://github.com/williamstein"
}
```



---

archive/issue_comments_060443.json:
```json
{
    "body": "<a id='comment:13'></a>\nThis is a clean bundle against sage-4.2.alpha0:\n\n   http://sage.math.washington.edu/home/wstein/patches/heegner-20091021-rebased_against_4.2.alpha0.hg",
    "created_at": "2009-10-22T04:40:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60443",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:13'></a>
This is a clean bundle against sage-4.2.alpha0:

   http://sage.math.washington.edu/home/wstein/patches/heegner-20091021-rebased_against_4.2.alpha0.hg



---

archive/attachments_007904.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "heegner-4.2.1.hg",
    "asset_url": "tarball://root/attachments/some-uuid/ticket6616/heegner-4.2.1.hg",
    "created_at": "2009-12-02T05:03:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.hg",
    "user": "https://github.com/williamstein"
}
```



---

archive/issue_comments_060444.json:
```json
{
    "body": "rebased against 4.2.1",
    "created_at": "2009-12-02T05:03:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60444",
    "user": "https://github.com/williamstein"
}
```

rebased against 4.2.1



---

archive/issue_comments_060445.json:
```json
{
    "body": "this is based against 4.2.1 after applying the hg bundle right above this patch.",
    "created_at": "2009-12-04T03:35:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60445",
    "user": "https://github.com/williamstein"
}
```

this is based against 4.2.1 after applying the hg bundle right above this patch.



---

archive/attachments_007905.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_6616-part18.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket6616/trac_6616-part18.patch",
    "created_at": "2009-12-04T09:40:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/williamstein"
}
```



---

archive/issue_comments_060446.json:
```json
{
    "body": "",
    "created_at": "2009-12-04T09:40:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60446",
    "user": "https://github.com/williamstein"
}
```





---

archive/attachments_007906.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac-6616-everything_rebased_against_4.3.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket6616/trac-6616-everything_rebased_against_4.3.patch",
    "created_at": "2010-01-01T02:15:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/williamstein"
}
```



---

archive/issue_comments_060447.json:
```json
{
    "body": "apply just this one patch against a clean sage-4.3",
    "created_at": "2010-01-01T02:15:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60447",
    "user": "https://github.com/williamstein"
}
```

apply just this one patch against a clean sage-4.3



---

archive/issue_comments_060448.json:
```json
{
    "body": "<a id='comment:14'></a>\nThis is *finally* ready for review.  Apply just this patch against a clean sage-4.3 build:\n\n    trac-6616-everything_rebased_against_4.3.patch",
    "created_at": "2010-01-01T02:21:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60448",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:14'></a>
This is *finally* ready for review.  Apply just this patch against a clean sage-4.3 build:

    trac-6616-everything_rebased_against_4.3.patch



---

archive/issue_comments_060449.json:
```json
{
    "body": "**Upstream:** N/A",
    "created_at": "2010-01-01T02:21:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60449",
    "user": "https://github.com/williamstein"
}
```

**Upstream:** N/A



---

archive/issue_comments_060450.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2010-01-01T02:21:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60450",
    "user": "https://github.com/williamstein"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_060451.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2010-01-01T04:46:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60451",
    "user": "https://github.com/williamstein"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_060452.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2010-01-03T16:51:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60452",
    "user": "https://github.com/JohnCremona"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_060453.json:
```json
{
    "body": "<a id='comment:16'></a>\nReview:  I am immensely impressed by the huge amount of work which has gone into this ten thousand-line patch!  It goes far beyond the refactoring of the title.\n\nI read through the patch itself, and liked what I saw.  (There are a few minor typos in the docstrings, which I did not note as I went through -- sorry).  Some docstrings which did not format properly:  numerical_approx, rational_kolyvagin_divisor, KolyvaginPoint.\n\nThere are a lot if interesting mathematical and algorithmic issues which are highlighted very well in comments and TODO blocks, which is good.\n\nTesting all files in the elliptic_curves directory I found these problems.\n\n```\n\tsage -t  \"devel/sage-tests/sage/schemes/elliptic_curves/lseries_ell.py\"\n\tsage -t  \"devel/sage-tests/sage/schemes/elliptic_curves/heegner.py\"\n\tsage -t  \"devel/sage-tests/sage/schemes/elliptic_curves/period_lattice.py\"\n\tsage -t  \"devel/sage-tests/sage/schemes/elliptic_curves/ell_rational_field.py\"\n```\nIn heegner.py it's mainly a mixture of numerical noise and hash differences (this is on a 32-bit machine), but not all.  Details:\n\n```\nsage -t  \"devel/sage-tests/sage/schemes/elliptic_curves/heegner.py\"\n**********************************************************************\nFile \"/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py\", line 2582:\n    sage: hash(y)\nExpected:\n    -5236815264926108755\nGot:\n    733770669\n**********************************************************************\nFile \"/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py\", line 2886:\n    sage: hash(EllipticCurve('389a').heegner_point(-7,5))\nExpected:\n    ???                              \nGot:\n    733770669\n**********************************************************************\nFile \"/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py\", line 3010:\n    sage: P.numerical_approx()\nExpected:\n    (-3.41893279409096e-16 - 2.00036208715867e-16*I : 3.42282625853674e-16 + 2.00035300823576e-16*I : 1.00000000000000)\nGot:\n    (-3.41901661684534e-16 - 2.00073402416951e-16*I : 3.42011575310552e-16 + 2.00035300823576e-16*I : 1.00000000000000)\n**********************************************************************\nFile \"/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py\", line 3032:\n    sage: P = E.heegner_point(-19); y = P._trace_numerical_conductor_1(); y\nExpected:\n    (-9.52657106432722e-17 - 1.11102282864639e-16*I : -1.00000000000000 + 2.21773554381910e-16*I : 1.00000000000000)\nGot:\n    (-9.53960112385537e-17 - 1.11192361105451e-16*I : -1.00000000000000 + 2.21827764490534e-16*I : 1.00000000000000)\n**********************************************************************\nFile \"/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py\", line 3039:\n    sage: P = E.heegner_point(-68); P._trace_numerical_conductor_1()\nExpected:\n    (9.20680004622768e28 - 1.55670186905154e28*I : -2.76369626392776e43 + 7.09357788995373e42*I : 1.00000000000000)\nGot:\n    (9.22516515637394e28 - 1.48330779290131e28*I : -2.77483419563894e43 + 6.76511130239484e42*I : 1.00000000000000)\n**********************************************************************\nFile \"/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py\", line 3106:\n    sage: P.numerical_approx()\nExpected:\n    (-3.41893279409096e-16 - 2.00036208715867e-16*I : 3.42282625853674e-16 + 2.00035300823576e-16*I : 1.00000000000000)\nGot:\n    (-3.41901661684534e-16 - 2.00073402416951e-16*I : 3.42011575310552e-16 + 2.00035300823576e-16*I : 1.00000000000000)\n**********************************************************************\nFile \"/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py\", line 3110:\n    sage: P.numerical_approx(100)[0]\nExpected:\n    8.4419827889841225189186778139e-31 + 6.0876476174448148263632780203e-31*I\nGot:\n    8.4419827889841225189186778139e-31 + 6.0876476185623182015101748774e-31*I\n**********************************************************************\nFile \"/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py\", line 3114:\n    sage: P.numerical_approx()\nExpected:\n    (-6.68094502209485e-16 + 1.41421356237310*I : 1.00000000000000 - 1.41421356237309*I : 1.00000000000000)\nGot:\n    (-6.68276051475152e-16 + 1.41421356237310*I : 1.00000000000000 - 1.41421356237309*I : 1.00000000000000)\n**********************************************************************\nFile \"/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py\", line 3123:\n    sage: P.numerical_approx()\nExpected:\n    (4.08580183114324e28 + 1.50348132882460e28*I : -7.84283601876376e42 - 4.58366020722762e42*I : 1.00000000000000)\nGot:\n    (0 : 1.00000000000000 : 0)\n**********************************************************************\nFile \"/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py\", line 3558:\n    sage: P._trace_numerical_conductor_1()\nExpected:\n    (1.00000000000000 + 4.49510220712490e-16*I : 1.77646525961750e-16 - 4.49510220712490e-16*I : 1.00000000000000)\nGot:\n    (1.00000000000000 + 4.49618640929739e-16*I : 1.77809156287623e-16 - 4.49672851038363e-16*I : 1.00000000000000)\n**********************************************************************\nFile \"/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py\", line 3939:\n    sage: P.numerical_approx()\nExpected:\n    (-3.41893279409096e-16 - 2.00036208715867e-16*I : 3.42282625853674e-16 + 2.00035300823576e-16*I : 1.00000000000000)\nGot:\n    (-3.41901661684534e-16 - 2.00073402416951e-16*I : 3.42011575310552e-16 + 2.00035300823576e-16*I : 1.00000000000000)\n**********************************************************************\nFile \"/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py\", line 3943:\n    sage: P.numerical_approx(100)[0]\nExpected:\n    8.4419827889841225189186778139e-31 + 6.0876476174448148263632780203e-31*I\nGot:\n    8.4419827889841225189186778139e-31 + 6.0876476185623182015101748774e-31*I\n**********************************************************************\nFile \"/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py\", line 3989:\n    sage: P.point_exact()\nExpected:\n    Traceback (most recent call last):\n    ...\n    RuntimeError: insufficient precision to find exact point\nGot:\n    (0 : 1 : 0)\n**********************************************************************\nFile \"/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py\", line 4082:\n    sage: P.numerical_approx()\nExpected:\n    (6.00000000000000 + 8.04701070793563e-16*I : -15.0000000000000 - 2.96897922913431e-15*I : 1.00000000000000)\nGot:\n    (6.00000000000000 + 8.05181817160869e-16*I : -15.0000000000000 - 2.96897922913431e-15*I : 1.00000000000000)\n**********************************************************************\nFile \"/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py\", line 605:\n    sage: hash(G)\nExpected:\n    -6198252699510613726\nGot:\n    1905285410\n**********************************************************************\nFile \"/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py\", line 607:\n    sage: hash((G.field(), G.base_field()))\nExpected:\n    -6198252699510613726\nGot:\n    1905285410\n**********************************************************************\nFile \"/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py\", line 6189:\n    sage: P.numerical_approx()\nExpected:\n    (6.00000000000000 + 8.04701070793563e-16*I : -15.0000000000000 - 2.96897922913431e-15*I : 1.00000000000000)\nGot:\n    (6.00000000000000 + 8.05181817160869e-16*I : -15.0000000000000 - 2.96897922913431e-15*I : 1.00000000000000)\n**********************************************************************\nFile \"/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py\", line 1253:\n    sage: conj = G.complex_conjugation(); hash(conj)\nExpected:\n    1347197483068745902\nGot:\n    480045230\n**********************************************************************\nFile \"/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py\", line 1447:\n    sage: hash(s)\nExpected:\n    ??                      \nGot:\n    -1994029223\n**********************************************************************\nFile \"/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py\", line 274:\n    sage: hash(K5)\nExpected:\n    -3713088127102618519\nGot:\n    1817441385\n**********************************************************************\nFile \"/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py\", line 276:\n    sage: hash((-7,5))\nExpected:\n    -3713088127102618519\nGot:\n    1817441385\n**********************************************************************\nFile \"/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py\", line 1688:\n    sage: hash(H)\nExpected:\n    6187687223143458874\nGot:\n    -458201030\n**********************************************************************\n15 items had failures:\n```\nIncidentally that test takes 90s which is rather long (I have not tested it with \"-long\" yet!)\n\nSome of this might be caused by the fact that I have a new version of lcalc (from reviewing another ticket) although this is a fresh clone?\n\n```\nsage -t  \"devel/sage-tests/sage/schemes/elliptic_curves/lseries_ell.py\"\n**********************************************************************\nFile \"/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/lseries_ell.py\", line 258:\n    sage: E.lseries().zeros_in_interval(6, 10, 0.1)      # long\nException raised:\n    Traceback (most recent call last):\n      File \"/home/john/sage-4.3/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/home/john/sage-4.3/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/home/john/sage-4.3/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_10[3]>\", line 1, in <module>\n        E.lseries().zeros_in_interval(Integer(6), Integer(10), RealNumber('0.1'))      # long###line 258:\n    sage: E.lseries().zeros_in_interval(6, 10, 0.1)      # long\n      File \"/home/john/sage-4.3/local/lib/python/site-packages/sage/schemes/elliptic_curves/lseries_ell.py\", line 262, in zeros_in_interval\n        return lcalc.zeros_in_interval(x, y, stepsize, L=self.__E)\n      File \"/home/john/sage-4.3/local/lib/python/site-packages/sage/lfunctions/lcalc.py\", line 162, in zeros_in_interval\n        return [tuple([RR(z) for z in t.split()]) for t in X.split('\\n')]\n      File \"parent.pyx\", line 538, in sage.structure.parent.Parent.__call__ (sage/structure/parent.c:4956)\n      File \"coerce_maps.pyx\", line 82, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (sage/structure/coerce_maps.c:3142)\n      File \"coerce_maps.pyx\", line 77, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (sage/structure/coerce_maps.c:3040)\n      File \"real_mpfr.pyx\", line 384, in sage.rings.real_mpfr.RealField._element_constructor_ (sage/rings/real_mpfr.c:5053)\n      File \"real_mpfr.pyx\", line 1009, in sage.rings.real_mpfr.RealNumber._set (sage/rings/real_mpfr.c:8794)\n    TypeError: Unable to convert x (='You') to real number.\n**********************************************************************\nFile \"/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/lseries_ell.py\", line 311:\n    sage: print \"ignore this\";  E.lseries().twist_values(1, -12, -4)    # slightly random output depending on architecture\nException raised:\n    Traceback (most recent call last):\n      File \"/home/john/sage-4.3/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/home/john/sage-4.3/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/home/john/sage-4.3/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_12[3]>\", line 1, in <module>\n        print \"ignore this\";  E.lseries().twist_values(Integer(1), -Integer(12), -Integer(4))    # slightly random output depending on architecture###line 311:\n    sage: print \"ignore this\";  E.lseries().twist_values(1, -12, -4)    # slightly random output depending on architecture\n      File \"/home/john/sage-4.3/local/lib/python/site-packages/sage/schemes/elliptic_curves/lseries_ell.py\", line 321, in twist_values\n        return lcalc.twist_values(s - RationalField()('1/2'), dmin, dmax, L=self.__E)\n      File \"/home/john/sage-4.3/local/lib/python/site-packages/sage/lfunctions/lcalc.py\", line 296, in twist_values\n        d,x,y = a.split()\n    ValueError: too many values to unpack\n**********************************************************************\nFile \"/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/lseries_ell.py\", line 343:\n    sage: E.lseries().twist_zeros(3, -4, -3)         # long\nException raised:\n    Traceback (most recent call last):\n      File \"/home/john/sage-4.3/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/home/john/sage-4.3/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/home/john/sage-4.3/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_13[3]>\", line 1, in <module>\n        E.lseries().twist_zeros(Integer(3), -Integer(4), -Integer(3))         # long###line 343:\n    sage: E.lseries().twist_zeros(3, -4, -3)         # long\n      File \"/home/john/sage-4.3/local/lib/python/site-packages/sage/schemes/elliptic_curves/lseries_ell.py\", line 347, in twist_zeros\n        return lcalc.twist_zeros(n, dmin, dmax, L=self.__E)\n      File \"/home/john/sage-4.3/local/lib/python/site-packages/sage/lfunctions/lcalc.py\", line 342, in twist_zeros\n        d, x = a.split()\n    ValueError: too many values to unpack\n**********************************************************************\nFile \"/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/lseries_ell.py\", line 226:\n    sage: E.lseries().zeros(2)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/john/sage-4.3/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/home/john/sage-4.3/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/home/john/sage-4.3/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_9[3]>\", line 1, in <module>\n        E.lseries().zeros(Integer(2))###line 226:\n    sage: E.lseries().zeros(2)\n      File \"/home/john/sage-4.3/local/lib/python/site-packages/sage/schemes/elliptic_curves/lseries_ell.py\", line 236, in zeros\n        return lcalc.zeros(n, L=self.__E)\n      File \"/home/john/sage-4.3/local/lib/python/site-packages/sage/lfunctions/lcalc.py\", line 126, in zeros\n        return [RR(z) for z in X.split()]\n      File \"parent.pyx\", line 538, in sage.structure.parent.Parent.__call__ (sage/structure/parent.c:4956)\n      File \"coerce_maps.pyx\", line 82, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (sage/structure/coerce_maps.c:3142)\n      File \"coerce_maps.pyx\", line 77, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (sage/structure/coerce_maps.c:3040)\n      File \"real_mpfr.pyx\", line 384, in sage.rings.real_mpfr.RealField._element_constructor_ (sage/rings/real_mpfr.c:5053)\n      File \"real_mpfr.pyx\", line 1009, in sage.rings.real_mpfr.RealNumber._set (sage/rings/real_mpfr.c:8794)\n    TypeError: Unable to convert x (='You') to real number.\n**********************************************************************\n4 items had failures:\n```\n\nThe perennial noise issues in period_lattice.py:\n\n```\nsage -t  \"devel/sage-tests/sage/schemes/elliptic_curves/period_lattice.py\"\n**********************************************************************\nFile \"/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/period_lattice.py\", line 1111:\n    sage: L.elliptic_exponential(z)\nExpected:\n    (1.06844510091205e-15 : 2.00000000000000 : 1.00000000000000)\nGot:\n    (1.06663809729124e-15 : 2.00000000000000 : 1.00000000000000)\n**********************************************************************\nFile \"/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/period_lattice.py\", line 1119:\n    sage: L.elliptic_exponential(z)\nExpected:\n    (-1.0773137765183430387827930528831385613292568270511670949401e-60 : 2.0000000000000000000000000000000000000000000000000000000000 : 1.0000000000000000000000000000000000000000000000000000000000)\nGot:\n    (-1.0773140994173990301711557437150639986876632707626675784012e-60 : 2.0000000000000000000000000000000000000000000000000000000000 : 1.0000000000000000000000000000000000000000000000000000000000)\n```\n\nLastly, in ell_rational_field.py, we have some more of the same plus a very weird issue with \"rubenstein\":\n\n```\nsage -t  \"devel/sage-tests/sage/schemes/elliptic_curves/ell_rational_field.py\"\n**********************************************************************\nFile \"/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1334:\n    sage: E.analytic_rank(algorithm='rubinstein')\nException raised:\n    Traceback (most recent call last):\n      File \"/home/john/sage-4.3/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/home/john/sage-4.3/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/home/john/sage-4.3/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_28[4]>\", line 1, in <module>\n        E.analytic_rank(algorithm='rubinstein')###line 1334:\n    sage: E.analytic_rank(algorithm='rubinstein')\n      File \"/home/john/sage-4.3/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1363, in analytic_rank\n        raise RuntimeError, \"unable to compute analytic rank using rubinstein algorithm ('%s')\"%msg\n    RuntimeError: unable to compute analytic rank using rubinstein algorithm ('unable to convert x (=eed to uncomment the line: PARI_DEFINE = -DINCLUDE_PARI\n    in the Makefile and do: 'make clean', then 'make' if you wish to use\n    elliptic curve L-functions. Requires that you already have pari installed\n    on your machine.) to an integer')\n**********************************************************************\nFile \"/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1340:\n    sage: E.analytic_rank(algorithm='all')\nException raised:\n    Traceback (most recent call last):\n      File \"/home/john/sage-4.3/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/home/john/sage-4.3/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/home/john/sage-4.3/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_28[6]>\", line 1, in <module>\n        E.analytic_rank(algorithm='all')###line 1340:\n    sage: E.analytic_rank(algorithm='all')\n      File \"/home/john/sage-4.3/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1372, in analytic_rank\n        self.analytic_rank('rubinstein'), self.analytic_rank('sympow')]))\n      File \"/home/john/sage-4.3/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1363, in analytic_rank\n        raise RuntimeError, \"unable to compute analytic rank using rubinstein algorithm ('%s')\"%msg\n    RuntimeError: unable to compute analytic rank using rubinstein algorithm ('unable to convert x (=eed to uncomment the line: PARI_DEFINE = -DINCLUDE_PARI\n    in the Makefile and do: 'make clean', then 'make' if you wish to use\n    elliptic curve L-functions. Requires that you already have pari installed\n    on your machine.) to an integer')\n**********************************************************************\nFile \"/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1347:\n    sage: EllipticCurve([1234567,89101112]).analytic_rank(algorithm='rubinstein')\nExpected:\n    Traceback (most recent call last):\n    ...\n    RuntimeError: unable to compute analytic rank using rubinstein algorithm ('unable to convert x (= 6.19283e+19 and is too large) to an integer')\nGot:\n    Traceback (most recent call last):\n      File \"/home/john/sage-4.3/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/home/john/sage-4.3/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/home/john/sage-4.3/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_28[7]>\", line 1, in <module>\n        EllipticCurve([Integer(1234567),Integer(89101112)]).analytic_rank(algorithm='rubinstein')###line 1347:\n    sage: EllipticCurve([1234567,89101112]).analytic_rank(algorithm='rubinstein')\n      File \"/home/john/sage-4.3/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1363, in analytic_rank\n        raise RuntimeError, \"unable to compute analytic rank using rubinstein algorithm ('%s')\"%msg\n    RuntimeError: unable to compute analytic rank using rubinstein algorithm ('unable to convert x (=eed to uncomment the line: PARI_DEFINE = -DINCLUDE_PARI\n    in the Makefile and do: 'make clean', then 'make' if you wish to use\n    elliptic curve L-functions. Requires that you already have pari installed\n    on your machine.) to an integer')\n**********************************************************************\nFile \"/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/ell_rational_field.py\", line 2901:\n    sage: E.elliptic_exponential(z)\nExpected:\n    (-7.4445166218537606141680653627e-30 : 2.0000000000000000000000000000 : 1.0000000000000000000000000000)\nGot:\n    (-7.4445166228333392396252290308e-30 : 2.0000000000000000000000000000 : 1.0000000000000000000000000000)\n**********************************************************************\nFile \"/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/ell_rational_field.py\", line 2904:\n    sage: E.elliptic_exponential(z)\nExpected:\n    (-1.0773137765183430387827930528831385613292568270511670949401e-60 : 2.0000000000000000000000000000000000000000000000000000000000 : 1.0000000000000000000000000000000000000000000000000000000000)\nGot:\n    (-1.0773140994173990301711557437150639986876632707626675784012e-60 : 2.0000000000000000000000000000000000000000000000000000000000 : 1.0000000000000000000000000000000000000000000000000000000000)\n**********************************************************************\nFile \"/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/ell_rational_field.py\", line 2916:\n    sage: E.elliptic_exponential(P.elliptic_logarithm())\nExpected:\n    (-1.0000000000000000000000000000 + 4.3761255281366123414673626379e-31*I : 1.0000000000000000000000000000 - 1.4587084969798853407242847702e-31*I : 1.0000000000000000000000000000)\nGot:\n    (-1.0000000000000000000000000000 + 4.3761255295105644085291631657e-31*I : 1.0000000000000000000000000000 - 1.4587084969798853407242847702e-31*I : 1.0000000000000000000000000000)\n**********************************************************************\n2 items had failures:\n   3 of   9 in __main__.example_28\n   3 of  22 in __main__.example_61\n***Test Failed*** 6 failures.\nFor whitespace errors, see the file /home/john/.sage//tmp/.doctest_ell_rational_field.py\n\t [69.0 s]\n```\n\nSo the conclusion is, regretfully,  \"needs work\", though the work that needs doing is trivial compared with what has been done already (which is probably worth a PhD thesis for someone!).",
    "created_at": "2010-01-03T16:51:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60453",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:16'></a>
Review:  I am immensely impressed by the huge amount of work which has gone into this ten thousand-line patch!  It goes far beyond the refactoring of the title.

I read through the patch itself, and liked what I saw.  (There are a few minor typos in the docstrings, which I did not note as I went through -- sorry).  Some docstrings which did not format properly:  numerical_approx, rational_kolyvagin_divisor, KolyvaginPoint.

There are a lot if interesting mathematical and algorithmic issues which are highlighted very well in comments and TODO blocks, which is good.

Testing all files in the elliptic_curves directory I found these problems.

```
	sage -t  "devel/sage-tests/sage/schemes/elliptic_curves/lseries_ell.py"
	sage -t  "devel/sage-tests/sage/schemes/elliptic_curves/heegner.py"
	sage -t  "devel/sage-tests/sage/schemes/elliptic_curves/period_lattice.py"
	sage -t  "devel/sage-tests/sage/schemes/elliptic_curves/ell_rational_field.py"
```
In heegner.py it's mainly a mixture of numerical noise and hash differences (this is on a 32-bit machine), but not all.  Details:

```
sage -t  "devel/sage-tests/sage/schemes/elliptic_curves/heegner.py"
**********************************************************************
File "/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py", line 2582:
    sage: hash(y)
Expected:
    -5236815264926108755
Got:
    733770669
**********************************************************************
File "/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py", line 2886:
    sage: hash(EllipticCurve('389a').heegner_point(-7,5))
Expected:
    ???                              
Got:
    733770669
**********************************************************************
File "/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py", line 3010:
    sage: P.numerical_approx()
Expected:
    (-3.41893279409096e-16 - 2.00036208715867e-16*I : 3.42282625853674e-16 + 2.00035300823576e-16*I : 1.00000000000000)
Got:
    (-3.41901661684534e-16 - 2.00073402416951e-16*I : 3.42011575310552e-16 + 2.00035300823576e-16*I : 1.00000000000000)
**********************************************************************
File "/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py", line 3032:
    sage: P = E.heegner_point(-19); y = P._trace_numerical_conductor_1(); y
Expected:
    (-9.52657106432722e-17 - 1.11102282864639e-16*I : -1.00000000000000 + 2.21773554381910e-16*I : 1.00000000000000)
Got:
    (-9.53960112385537e-17 - 1.11192361105451e-16*I : -1.00000000000000 + 2.21827764490534e-16*I : 1.00000000000000)
**********************************************************************
File "/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py", line 3039:
    sage: P = E.heegner_point(-68); P._trace_numerical_conductor_1()
Expected:
    (9.20680004622768e28 - 1.55670186905154e28*I : -2.76369626392776e43 + 7.09357788995373e42*I : 1.00000000000000)
Got:
    (9.22516515637394e28 - 1.48330779290131e28*I : -2.77483419563894e43 + 6.76511130239484e42*I : 1.00000000000000)
**********************************************************************
File "/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py", line 3106:
    sage: P.numerical_approx()
Expected:
    (-3.41893279409096e-16 - 2.00036208715867e-16*I : 3.42282625853674e-16 + 2.00035300823576e-16*I : 1.00000000000000)
Got:
    (-3.41901661684534e-16 - 2.00073402416951e-16*I : 3.42011575310552e-16 + 2.00035300823576e-16*I : 1.00000000000000)
**********************************************************************
File "/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py", line 3110:
    sage: P.numerical_approx(100)[0]
Expected:
    8.4419827889841225189186778139e-31 + 6.0876476174448148263632780203e-31*I
Got:
    8.4419827889841225189186778139e-31 + 6.0876476185623182015101748774e-31*I
**********************************************************************
File "/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py", line 3114:
    sage: P.numerical_approx()
Expected:
    (-6.68094502209485e-16 + 1.41421356237310*I : 1.00000000000000 - 1.41421356237309*I : 1.00000000000000)
Got:
    (-6.68276051475152e-16 + 1.41421356237310*I : 1.00000000000000 - 1.41421356237309*I : 1.00000000000000)
**********************************************************************
File "/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py", line 3123:
    sage: P.numerical_approx()
Expected:
    (4.08580183114324e28 + 1.50348132882460e28*I : -7.84283601876376e42 - 4.58366020722762e42*I : 1.00000000000000)
Got:
    (0 : 1.00000000000000 : 0)
**********************************************************************
File "/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py", line 3558:
    sage: P._trace_numerical_conductor_1()
Expected:
    (1.00000000000000 + 4.49510220712490e-16*I : 1.77646525961750e-16 - 4.49510220712490e-16*I : 1.00000000000000)
Got:
    (1.00000000000000 + 4.49618640929739e-16*I : 1.77809156287623e-16 - 4.49672851038363e-16*I : 1.00000000000000)
**********************************************************************
File "/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py", line 3939:
    sage: P.numerical_approx()
Expected:
    (-3.41893279409096e-16 - 2.00036208715867e-16*I : 3.42282625853674e-16 + 2.00035300823576e-16*I : 1.00000000000000)
Got:
    (-3.41901661684534e-16 - 2.00073402416951e-16*I : 3.42011575310552e-16 + 2.00035300823576e-16*I : 1.00000000000000)
**********************************************************************
File "/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py", line 3943:
    sage: P.numerical_approx(100)[0]
Expected:
    8.4419827889841225189186778139e-31 + 6.0876476174448148263632780203e-31*I
Got:
    8.4419827889841225189186778139e-31 + 6.0876476185623182015101748774e-31*I
**********************************************************************
File "/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py", line 3989:
    sage: P.point_exact()
Expected:
    Traceback (most recent call last):
    ...
    RuntimeError: insufficient precision to find exact point
Got:
    (0 : 1 : 0)
**********************************************************************
File "/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py", line 4082:
    sage: P.numerical_approx()
Expected:
    (6.00000000000000 + 8.04701070793563e-16*I : -15.0000000000000 - 2.96897922913431e-15*I : 1.00000000000000)
Got:
    (6.00000000000000 + 8.05181817160869e-16*I : -15.0000000000000 - 2.96897922913431e-15*I : 1.00000000000000)
**********************************************************************
File "/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py", line 605:
    sage: hash(G)
Expected:
    -6198252699510613726
Got:
    1905285410
**********************************************************************
File "/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py", line 607:
    sage: hash((G.field(), G.base_field()))
Expected:
    -6198252699510613726
Got:
    1905285410
**********************************************************************
File "/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py", line 6189:
    sage: P.numerical_approx()
Expected:
    (6.00000000000000 + 8.04701070793563e-16*I : -15.0000000000000 - 2.96897922913431e-15*I : 1.00000000000000)
Got:
    (6.00000000000000 + 8.05181817160869e-16*I : -15.0000000000000 - 2.96897922913431e-15*I : 1.00000000000000)
**********************************************************************
File "/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py", line 1253:
    sage: conj = G.complex_conjugation(); hash(conj)
Expected:
    1347197483068745902
Got:
    480045230
**********************************************************************
File "/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py", line 1447:
    sage: hash(s)
Expected:
    ??                      
Got:
    -1994029223
**********************************************************************
File "/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py", line 274:
    sage: hash(K5)
Expected:
    -3713088127102618519
Got:
    1817441385
**********************************************************************
File "/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py", line 276:
    sage: hash((-7,5))
Expected:
    -3713088127102618519
Got:
    1817441385
**********************************************************************
File "/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py", line 1688:
    sage: hash(H)
Expected:
    6187687223143458874
Got:
    -458201030
**********************************************************************
15 items had failures:
```
Incidentally that test takes 90s which is rather long (I have not tested it with "-long" yet!)

Some of this might be caused by the fact that I have a new version of lcalc (from reviewing another ticket) although this is a fresh clone?

```
sage -t  "devel/sage-tests/sage/schemes/elliptic_curves/lseries_ell.py"
**********************************************************************
File "/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/lseries_ell.py", line 258:
    sage: E.lseries().zeros_in_interval(6, 10, 0.1)      # long
Exception raised:
    Traceback (most recent call last):
      File "/home/john/sage-4.3/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/home/john/sage-4.3/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/home/john/sage-4.3/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_10[3]>", line 1, in <module>
        E.lseries().zeros_in_interval(Integer(6), Integer(10), RealNumber('0.1'))      # long###line 258:
    sage: E.lseries().zeros_in_interval(6, 10, 0.1)      # long
      File "/home/john/sage-4.3/local/lib/python/site-packages/sage/schemes/elliptic_curves/lseries_ell.py", line 262, in zeros_in_interval
        return lcalc.zeros_in_interval(x, y, stepsize, L=self.__E)
      File "/home/john/sage-4.3/local/lib/python/site-packages/sage/lfunctions/lcalc.py", line 162, in zeros_in_interval
        return [tuple([RR(z) for z in t.split()]) for t in X.split('\n')]
      File "parent.pyx", line 538, in sage.structure.parent.Parent.__call__ (sage/structure/parent.c:4956)
      File "coerce_maps.pyx", line 82, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (sage/structure/coerce_maps.c:3142)
      File "coerce_maps.pyx", line 77, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (sage/structure/coerce_maps.c:3040)
      File "real_mpfr.pyx", line 384, in sage.rings.real_mpfr.RealField._element_constructor_ (sage/rings/real_mpfr.c:5053)
      File "real_mpfr.pyx", line 1009, in sage.rings.real_mpfr.RealNumber._set (sage/rings/real_mpfr.c:8794)
    TypeError: Unable to convert x (='You') to real number.
**********************************************************************
File "/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/lseries_ell.py", line 311:
    sage: print "ignore this";  E.lseries().twist_values(1, -12, -4)    # slightly random output depending on architecture
Exception raised:
    Traceback (most recent call last):
      File "/home/john/sage-4.3/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/home/john/sage-4.3/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/home/john/sage-4.3/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_12[3]>", line 1, in <module>
        print "ignore this";  E.lseries().twist_values(Integer(1), -Integer(12), -Integer(4))    # slightly random output depending on architecture###line 311:
    sage: print "ignore this";  E.lseries().twist_values(1, -12, -4)    # slightly random output depending on architecture
      File "/home/john/sage-4.3/local/lib/python/site-packages/sage/schemes/elliptic_curves/lseries_ell.py", line 321, in twist_values
        return lcalc.twist_values(s - RationalField()('1/2'), dmin, dmax, L=self.__E)
      File "/home/john/sage-4.3/local/lib/python/site-packages/sage/lfunctions/lcalc.py", line 296, in twist_values
        d,x,y = a.split()
    ValueError: too many values to unpack
**********************************************************************
File "/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/lseries_ell.py", line 343:
    sage: E.lseries().twist_zeros(3, -4, -3)         # long
Exception raised:
    Traceback (most recent call last):
      File "/home/john/sage-4.3/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/home/john/sage-4.3/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/home/john/sage-4.3/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_13[3]>", line 1, in <module>
        E.lseries().twist_zeros(Integer(3), -Integer(4), -Integer(3))         # long###line 343:
    sage: E.lseries().twist_zeros(3, -4, -3)         # long
      File "/home/john/sage-4.3/local/lib/python/site-packages/sage/schemes/elliptic_curves/lseries_ell.py", line 347, in twist_zeros
        return lcalc.twist_zeros(n, dmin, dmax, L=self.__E)
      File "/home/john/sage-4.3/local/lib/python/site-packages/sage/lfunctions/lcalc.py", line 342, in twist_zeros
        d, x = a.split()
    ValueError: too many values to unpack
**********************************************************************
File "/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/lseries_ell.py", line 226:
    sage: E.lseries().zeros(2)
Exception raised:
    Traceback (most recent call last):
      File "/home/john/sage-4.3/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/home/john/sage-4.3/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/home/john/sage-4.3/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_9[3]>", line 1, in <module>
        E.lseries().zeros(Integer(2))###line 226:
    sage: E.lseries().zeros(2)
      File "/home/john/sage-4.3/local/lib/python/site-packages/sage/schemes/elliptic_curves/lseries_ell.py", line 236, in zeros
        return lcalc.zeros(n, L=self.__E)
      File "/home/john/sage-4.3/local/lib/python/site-packages/sage/lfunctions/lcalc.py", line 126, in zeros
        return [RR(z) for z in X.split()]
      File "parent.pyx", line 538, in sage.structure.parent.Parent.__call__ (sage/structure/parent.c:4956)
      File "coerce_maps.pyx", line 82, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (sage/structure/coerce_maps.c:3142)
      File "coerce_maps.pyx", line 77, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (sage/structure/coerce_maps.c:3040)
      File "real_mpfr.pyx", line 384, in sage.rings.real_mpfr.RealField._element_constructor_ (sage/rings/real_mpfr.c:5053)
      File "real_mpfr.pyx", line 1009, in sage.rings.real_mpfr.RealNumber._set (sage/rings/real_mpfr.c:8794)
    TypeError: Unable to convert x (='You') to real number.
**********************************************************************
4 items had failures:
```

The perennial noise issues in period_lattice.py:

```
sage -t  "devel/sage-tests/sage/schemes/elliptic_curves/period_lattice.py"
**********************************************************************
File "/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/period_lattice.py", line 1111:
    sage: L.elliptic_exponential(z)
Expected:
    (1.06844510091205e-15 : 2.00000000000000 : 1.00000000000000)
Got:
    (1.06663809729124e-15 : 2.00000000000000 : 1.00000000000000)
**********************************************************************
File "/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/period_lattice.py", line 1119:
    sage: L.elliptic_exponential(z)
Expected:
    (-1.0773137765183430387827930528831385613292568270511670949401e-60 : 2.0000000000000000000000000000000000000000000000000000000000 : 1.0000000000000000000000000000000000000000000000000000000000)
Got:
    (-1.0773140994173990301711557437150639986876632707626675784012e-60 : 2.0000000000000000000000000000000000000000000000000000000000 : 1.0000000000000000000000000000000000000000000000000000000000)
```

Lastly, in ell_rational_field.py, we have some more of the same plus a very weird issue with "rubenstein":

```
sage -t  "devel/sage-tests/sage/schemes/elliptic_curves/ell_rational_field.py"
**********************************************************************
File "/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/ell_rational_field.py", line 1334:
    sage: E.analytic_rank(algorithm='rubinstein')
Exception raised:
    Traceback (most recent call last):
      File "/home/john/sage-4.3/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/home/john/sage-4.3/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/home/john/sage-4.3/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_28[4]>", line 1, in <module>
        E.analytic_rank(algorithm='rubinstein')###line 1334:
    sage: E.analytic_rank(algorithm='rubinstein')
      File "/home/john/sage-4.3/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 1363, in analytic_rank
        raise RuntimeError, "unable to compute analytic rank using rubinstein algorithm ('%s')"%msg
    RuntimeError: unable to compute analytic rank using rubinstein algorithm ('unable to convert x (=eed to uncomment the line: PARI_DEFINE = -DINCLUDE_PARI
    in the Makefile and do: 'make clean', then 'make' if you wish to use
    elliptic curve L-functions. Requires that you already have pari installed
    on your machine.) to an integer')
**********************************************************************
File "/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/ell_rational_field.py", line 1340:
    sage: E.analytic_rank(algorithm='all')
Exception raised:
    Traceback (most recent call last):
      File "/home/john/sage-4.3/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/home/john/sage-4.3/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/home/john/sage-4.3/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_28[6]>", line 1, in <module>
        E.analytic_rank(algorithm='all')###line 1340:
    sage: E.analytic_rank(algorithm='all')
      File "/home/john/sage-4.3/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 1372, in analytic_rank
        self.analytic_rank('rubinstein'), self.analytic_rank('sympow')]))
      File "/home/john/sage-4.3/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 1363, in analytic_rank
        raise RuntimeError, "unable to compute analytic rank using rubinstein algorithm ('%s')"%msg
    RuntimeError: unable to compute analytic rank using rubinstein algorithm ('unable to convert x (=eed to uncomment the line: PARI_DEFINE = -DINCLUDE_PARI
    in the Makefile and do: 'make clean', then 'make' if you wish to use
    elliptic curve L-functions. Requires that you already have pari installed
    on your machine.) to an integer')
**********************************************************************
File "/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/ell_rational_field.py", line 1347:
    sage: EllipticCurve([1234567,89101112]).analytic_rank(algorithm='rubinstein')
Expected:
    Traceback (most recent call last):
    ...
    RuntimeError: unable to compute analytic rank using rubinstein algorithm ('unable to convert x (= 6.19283e+19 and is too large) to an integer')
Got:
    Traceback (most recent call last):
      File "/home/john/sage-4.3/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/home/john/sage-4.3/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/home/john/sage-4.3/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_28[7]>", line 1, in <module>
        EllipticCurve([Integer(1234567),Integer(89101112)]).analytic_rank(algorithm='rubinstein')###line 1347:
    sage: EllipticCurve([1234567,89101112]).analytic_rank(algorithm='rubinstein')
      File "/home/john/sage-4.3/local/lib/python/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 1363, in analytic_rank
        raise RuntimeError, "unable to compute analytic rank using rubinstein algorithm ('%s')"%msg
    RuntimeError: unable to compute analytic rank using rubinstein algorithm ('unable to convert x (=eed to uncomment the line: PARI_DEFINE = -DINCLUDE_PARI
    in the Makefile and do: 'make clean', then 'make' if you wish to use
    elliptic curve L-functions. Requires that you already have pari installed
    on your machine.) to an integer')
**********************************************************************
File "/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/ell_rational_field.py", line 2901:
    sage: E.elliptic_exponential(z)
Expected:
    (-7.4445166218537606141680653627e-30 : 2.0000000000000000000000000000 : 1.0000000000000000000000000000)
Got:
    (-7.4445166228333392396252290308e-30 : 2.0000000000000000000000000000 : 1.0000000000000000000000000000)
**********************************************************************
File "/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/ell_rational_field.py", line 2904:
    sage: E.elliptic_exponential(z)
Expected:
    (-1.0773137765183430387827930528831385613292568270511670949401e-60 : 2.0000000000000000000000000000000000000000000000000000000000 : 1.0000000000000000000000000000000000000000000000000000000000)
Got:
    (-1.0773140994173990301711557437150639986876632707626675784012e-60 : 2.0000000000000000000000000000000000000000000000000000000000 : 1.0000000000000000000000000000000000000000000000000000000000)
**********************************************************************
File "/home/john/sage-4.3/devel/sage-tests/sage/schemes/elliptic_curves/ell_rational_field.py", line 2916:
    sage: E.elliptic_exponential(P.elliptic_logarithm())
Expected:
    (-1.0000000000000000000000000000 + 4.3761255281366123414673626379e-31*I : 1.0000000000000000000000000000 - 1.4587084969798853407242847702e-31*I : 1.0000000000000000000000000000)
Got:
    (-1.0000000000000000000000000000 + 4.3761255295105644085291631657e-31*I : 1.0000000000000000000000000000 - 1.4587084969798853407242847702e-31*I : 1.0000000000000000000000000000)
**********************************************************************
2 items had failures:
   3 of   9 in __main__.example_28
   3 of  22 in __main__.example_61
***Test Failed*** 6 failures.
For whitespace errors, see the file /home/john/.sage//tmp/.doctest_ell_rational_field.py
	 [69.0 s]
```

So the conclusion is, regretfully,  "needs work", though the work that needs doing is trivial compared with what has been done already (which is probably worth a PhD thesis for someone!).



---

archive/issue_comments_060454.json:
```json
{
    "body": "**Reviewer:** John Cremona",
    "created_at": "2010-01-03T16:51:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60454",
    "user": "https://github.com/JohnCremona"
}
```

**Reviewer:** John Cremona



---

archive/attachments_007907.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac-6616-everything_rebased_against_4.3-part2.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket6616/trac-6616-everything_rebased_against_4.3-part2.patch",
    "created_at": "2010-01-13T15:12:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/williamstein"
}
```



---

archive/issue_comments_060455.json:
```json
{
    "body": "apply this and the previous patch; then this should past all tests on 32-bit as well as 64-bit.",
    "created_at": "2010-01-13T15:12:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60455",
    "user": "https://github.com/williamstein"
}
```

apply this and the previous patch; then this should past all tests on 32-bit as well as 64-bit.



---

archive/issue_comments_060456.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2010-01-13T15:12:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60456",
    "user": "https://github.com/williamstein"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_060457.json:
```json
{
    "body": "<a id='comment:18'></a>\nI posted a new patch fixing all the issues above, except possibly the \"very weird\" ell_rational_field issue.  I couldn't replicate that on any test machine yet. \n\nI also didn't carefully reformat the docstrings.  Which ones aren't formatted correctly?  I thought I had got them right.",
    "created_at": "2010-01-13T15:14:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60457",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:18'></a>
I posted a new patch fixing all the issues above, except possibly the "very weird" ell_rational_field issue.  I couldn't replicate that on any test machine yet. 

I also didn't carefully reformat the docstrings.  Which ones aren't formatted correctly?  I thought I had got them right.



---

archive/attachments_007908.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac-6616-everything_rebased_against_4.3-part2.2.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket6616/trac-6616-everything_rebased_against_4.3-part2.2.patch",
    "created_at": "2010-01-13T16:22:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/JohnCremona"
}
```



---

archive/issue_comments_060458.json:
```json
{
    "body": "apply instead of previous one",
    "created_at": "2010-01-13T16:22:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60458",
    "user": "https://github.com/JohnCremona"
}
```

apply instead of previous one



---

archive/issue_comments_060459.json:
```json
{
    "body": "<a id='comment:19'></a>\ncremona>> The patches say they are based on 4.3 rather than 4.3.1.  the first\n>> one produced one failed hunk when I applied it to 4.3.1 (see attached\n>> -- looks minor).\n\n>\nwas> That's in a doctest for something probably unrelated, so can be safely\n> ignored for refereeing.\n\n\nIgnoring that, there was just one small thing (testing on 64-bit), namely\n\n```\nFile \"/home/jec/sage-4.3.1.alpha1/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py\", line 277:\n    sage: hash((-7,5))\nExpected:\n    -3713088127102618519     \n    1817441385\nGot:\n    -3713088127102618519\n```\nwhich is just because someone forgot to add the tag # 32-bit.  I added that by editing the patch, and the corrected version is now attached here.\n\nSo: positive review on 64-bit.  I'll test on 32-bit when I get home (leaving now, hope I do not get buried in the snow...)",
    "created_at": "2010-01-13T16:23:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60459",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:19'></a>
cremona>> The patches say they are based on 4.3 rather than 4.3.1.  the first
>> one produced one failed hunk when I applied it to 4.3.1 (see attached
>> -- looks minor).

>
was> That's in a doctest for something probably unrelated, so can be safely
> ignored for refereeing.


Ignoring that, there was just one small thing (testing on 64-bit), namely

```
File "/home/jec/sage-4.3.1.alpha1/devel/sage-tests/sage/schemes/elliptic_curves/heegner.py", line 277:
    sage: hash((-7,5))
Expected:
    -3713088127102618519     
    1817441385
Got:
    -3713088127102618519
```
which is just because someone forgot to add the tag # 32-bit.  I added that by editing the patch, and the corrected version is now attached here.

So: positive review on 64-bit.  I'll test on 32-bit when I get home (leaving now, hope I do not get buried in the snow...)



---

archive/issue_comments_060460.json:
```json
{
    "body": "Apply after previous (reviewer's patch fixing some docstring issues)",
    "created_at": "2010-01-13T18:20:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60460",
    "user": "https://github.com/JohnCremona"
}
```

Apply after previous (reviewer's patch fixing some docstring issues)



---

archive/issue_comments_060461.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2010-01-13T18:23:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60461",
    "user": "https://github.com/JohnCremona"
}
```

**Changing status** from needs_review to positive_review.



---

archive/attachments_007909.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac-6616-review.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket6616/trac-6616-review.patch",
    "created_at": "2010-01-13T18:23:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/JohnCremona"
}
```



---

archive/issue_comments_060462.json:
```json
{
    "body": "<a id='comment:20'></a>\nPositive review after testing on 32-bit, and also fixing lots of documentation glitches (in the reviewer's patch).  These were mainly found by actually running \"sage -docbuild all html\" and reading the error messages (hint hint).  Most common error was double :: where they shouldn't be.\n\nGreat work!",
    "created_at": "2010-01-13T18:23:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60462",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:20'></a>
Positive review after testing on 32-bit, and also fixing lots of documentation glitches (in the reviewer's patch).  These were mainly found by actually running "sage -docbuild all html" and reading the error messages (hint hint).  Most common error was double :: where they shouldn't be.

Great work!



---

archive/issue_comments_060463.json:
```json
{
    "body": "**Author:** William Stein",
    "created_at": "2010-01-14T01:21:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60463",
    "user": "https://github.com/rlmill"
}
```

**Author:** William Stein



---

archive/issue_comments_060464.json:
```json
{
    "body": "**Merged:** sage-4.3.1.rc0",
    "created_at": "2010-01-14T01:21:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60464",
    "user": "https://github.com/rlmill"
}
```

**Merged:** sage-4.3.1.rc0



---

archive/issue_comments_060465.json:
```json
{
    "body": "<a id='comment:21'></a>\nApplied:\n\n```\ntrac-6616-everything_rebased_against_4.3.patch\ntrac-6616-everything_rebased_against_4.3-part2.2.patch\ntrac-6616-review.patch\n```",
    "created_at": "2010-01-14T01:21:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6616#issuecomment-60465",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:21'></a>
Applied:

```
trac-6616-everything_rebased_against_4.3.patch
trac-6616-everything_rebased_against_4.3-part2.2.patch
trac-6616-review.patch
```



---

archive/issue_events_020155.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-01-14T01:21:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/6616",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/6616#event-20155"
}
```
