# Issue 6749: Knapsack algorithm

archive/issues_006749.json:
```json
{
    "assignees": [
        "https://github.com/sagetrac-jkantor"
    ],
    "body": "A general knapsack algorithm using Linear programming ( check you have #6502 installed ! ) to patiently wait for more efficient versions :-)\n\nComponent: **numerical**\n\nAuthor: **Nathann Cohen**\n\nReviewer: **David Joyner**\n\nMerged: **Sage 4.1.2.alpha2**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/6749_\n\n",
    "closed_at": "2009-09-10T12:02:01Z",
    "created_at": "2009-08-14T21:01:44Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20numerical",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.1.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Knapsack algorithm",
    "type": "issue",
    "updated_at": "2009-09-10T12:02:01Z",
    "url": "https://github.com/sagemath/sage/issues/6749",
    "user": "https://github.com/nathanncohen"
}
```
A general knapsack algorithm using Linear programming ( check you have #6502 installed ! ) to patiently wait for more efficient versions :-)

Component: **numerical**

Author: **Nathann Cohen**

Reviewer: **David Joyner**

Merged: **Sage 4.1.2.alpha2**

_Issue created by migration from https://trac.sagemath.org/ticket/6749_





---

archive/issue_events_081204.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-08-14T21:01:44Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "milestone_number": null,
    "milestone_title": "sage-4.1.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6749#event-81204"
}
```



---

archive/issue_events_081205.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-08-14T21:01:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20numerical",
    "label_color": "0000ff",
    "label_name": "c: numerical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6749#event-81205"
}
```



---

archive/issue_events_081206.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-08-14T21:01:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6749#event-81206"
}
```



---

archive/issue_events_081207.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-08-14T21:01:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6749#event-81207"
}
```



---

archive/issue_events_081208.json:
```json
{
    "actor": "https://github.com/sagetrac-jkantor",
    "created_at": "2009-08-14T21:01:44Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "subject": "https://github.com/nathanncohen",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6749#event-81208"
}
```



---

archive/issue_events_081209.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-08-14T21:01:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6749#event-81209"
}
```



---

archive/issue_events_081210.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2009-08-15T21:20:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6749#event-81210"
}
```



---

archive/issue_comments_047569.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThis needs a really detailed example, worked out so that a non-expert (like myself) can understand it. This of the first example you would try to teach an undergraduate. That would be perfect.",
    "created_at": "2009-08-15T21:20:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6749#issuecomment-47569",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:1" align="right">comment:1</div>

This needs a really detailed example, worked out so that a non-expert (like myself) can understand it. This of the first example you would try to teach an undergraduate. That would be perfect.



---

archive/issue_comments_047570.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nReplying to [@wdjoyner](#comment:1):\n> This needs a really detailed example, worked out so that a non-expert (like myself) can understand it. Think of the first example you would try to teach an undergraduate. That would be perfect.\n\nFor example, there seems to be a simple knapsack problems solved here: http://sites.google.com/site/mikescoderama/Home/0-1-knapsack-problem-in-p\nThere is a more complicated one here: http://rosettacode.org/wiki/Knapsack_Problem#Simple_Solution\nAlso, http://webspace.ship.edu/thbrig/DynamicProgramming/Knapsack%20Program/index.html, and the xkcd example\nhttp://www.itl.nist.gov/div897/sqg/dads/HTML/knapsackProblem.html :-)",
    "created_at": "2009-08-16T12:48:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6749#issuecomment-47570",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:2" align="right">comment:2</div>

Replying to [@wdjoyner](#comment:1):
> This needs a really detailed example, worked out so that a non-expert (like myself) can understand it. Think of the first example you would try to teach an undergraduate. That would be perfect.

For example, there seems to be a simple knapsack problems solved here: http://sites.google.com/site/mikescoderama/Home/0-1-knapsack-problem-in-p
There is a more complicated one here: http://rosettacode.org/wiki/Knapsack_Problem#Simple_Solution
Also, http://webspace.ship.edu/thbrig/DynamicProgramming/Knapsack%20Program/index.html, and the xkcd example
http://www.itl.nist.gov/div897/sqg/dads/HTML/knapsackProblem.html :-)



---

archive/issue_comments_047571.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI just added documentation and the example you required. I guess the docstrings took me 10 times what the function requires, but I learned a lot about sage's documentation, the Reference manual, Sphinx, and the fact that you should NEVER, for ANY REASON, delete a branch of Sage.\n\nIt gets angry if you do.\n\nAnd I uploaded a new knapsack.patch replacing the old one ;-)\n\nNathann",
    "created_at": "2009-08-16T14:54:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6749#issuecomment-47571",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:3" align="right">comment:3</div>

I just added documentation and the example you required. I guess the docstrings took me 10 times what the function requires, but I learned a lot about sage's documentation, the Reference manual, Sphinx, and the fact that you should NEVER, for ANY REASON, delete a branch of Sage.

It gets angry if you do.

And I uploaded a new knapsack.patch replacing the old one ;-)

Nathann



---

archive/issue_events_081211.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-08-16T14:54:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6749#event-81211"
}
```



---

archive/issue_events_081212.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-08-16T14:54:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6749#event-81212"
}
```



---

archive/issue_comments_047572.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nA small mistake when uploading the patch... Well, now the two of them are good ;-)",
    "created_at": "2009-08-16T14:55:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6749#issuecomment-47572",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:4" align="right">comment:4</div>

A small mistake when uploading the patch... Well, now the two of them are good ;-)



---

archive/issue_comments_047573.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThis patch (after the dependencies are applied) applies fine to 4.1.1.rc2 on an intel macbook running 10.4.11. It passes sage -testall except for (apparently unrelated) errors with \n\n```\nThe following tests failed:\n\n\n        sage -t  \"devel/sage/sage/interfaces/maxima.py\"\n        sage -t  \"devel/sage/sage/symbolic/expression.pyx\"\n```\nHowever, I will ask someone at work (an expert in OR) to check the code before posting a positive review.",
    "created_at": "2009-08-16T23:46:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6749#issuecomment-47573",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:5" align="right">comment:5</div>

This patch (after the dependencies are applied) applies fine to 4.1.1.rc2 on an intel macbook running 10.4.11. It passes sage -testall except for (apparently unrelated) errors with 

```
The following tests failed:


        sage -t  "devel/sage/sage/interfaces/maxima.py"
        sage -t  "devel/sage/sage/symbolic/expression.pyx"
```
However, I will ask someone at work (an expert in OR) to check the code before posting a positive review.



---

archive/issue_comments_047574.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI've had a talk with my OR colleague. I don't think \"A list of pairs (weight,value) where each pair is repeated the number of times it is taken into the solution. \" is the proper English grammar for what is meant. I think \"A list of pairs (w_i, u_i), for each object i occurring in the solution. \" is better. Do you agree? \n\nAlso, he suggested that the \"objective value\" (or maximal useful value, in your terminology) be included in the solution. Perhaps you could include this as an optional keyword, leaving the current behaviour as the default? If you also agree to this, please add a corresponding example to the docstring.",
    "created_at": "2009-08-20T23:32:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6749#issuecomment-47574",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:6" align="right">comment:6</div>

I've had a talk with my OR colleague. I don't think "A list of pairs (weight,value) where each pair is repeated the number of times it is taken into the solution. " is the proper English grammar for what is meant. I think "A list of pairs (w_i, u_i), for each object i occurring in the solution. " is better. Do you agree? 

Also, he suggested that the "objective value" (or maximal useful value, in your terminology) be included in the solution. Perhaps you could include this as an optional keyword, leaving the current behaviour as the default? If you also agree to this, please add a corresponding example to the docstring.



---

archive/issue_events_081213.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2009-08-20T23:33:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6749#event-81213"
}
```



---

archive/issue_events_081214.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2009-08-20T23:33:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6749#event-81214"
}
```



---

archive/issue_comments_047575.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nExcellent suggestion ! So :\n* I fixed the grammar error ( sorry, I'm still learning english every day ;-) )\n* I Included the objective value in the output\n\nBut :\nActually, this objective value requires no computation at all as it is automatically computed by the LP solver.. So as it can be useful anyway, the function now returns a pair [value, list] ( where list is the value the function returned previously ), and value=maximum useful value.\nBesides, I added the flag value_only in case the use only needs the optimal value and does not care about the assignment. This, because the LP solvers can be forced not to return the assignment of the variables and only the objective value, avoiding this way some computations.\n\nBesides, this syntax makes knapsack consistant with the other optimization functions I wrote for graphs, and I hope will all the LP functions we will write in the future ;-)\n\nTo avoid mistakes, I updated both patches ( they were identical ), and the new version obviously contains the old one, plus the update I just wrote ! \n\nThank you for your review !\n\nNathann",
    "created_at": "2009-08-21T07:44:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6749#issuecomment-47575",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:8" align="right">comment:8</div>

Excellent suggestion ! So :
* I fixed the grammar error ( sorry, I'm still learning english every day ;-) )
* I Included the objective value in the output

But :
Actually, this objective value requires no computation at all as it is automatically computed by the LP solver.. So as it can be useful anyway, the function now returns a pair [value, list] ( where list is the value the function returned previously ), and value=maximum useful value.
Besides, I added the flag value_only in case the use only needs the optimal value and does not care about the assignment. This, because the LP solvers can be forced not to return the assignment of the variables and only the objective value, avoiding this way some computations.

Besides, this syntax makes knapsack consistant with the other optimization functions I wrote for graphs, and I hope will all the LP functions we will write in the future ;-)

To avoid mistakes, I updated both patches ( they were identical ), and the new version obviously contains the old one, plus the update I just wrote ! 

Thank you for your review !

Nathann



---

archive/issue_events_081215.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-08-21T07:44:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6749#event-81215"
}
```



---

archive/issue_events_081216.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-08-21T07:44:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6749#event-81216"
}
```



---

archive/issue_comments_047576.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThere was this failure:\n\n```\nsage -t  \"devel/sage/sage/numerical/knapsack.py\"            \n**********************************************************************\nFile \"/Users/davidjoyner/sagefiles/sage-4.1.1.rc2/devel/sage/sage/numerical/knapsack.py\", line 608:\n    sage: knapsack([1,1.5,0.5], max=2)\nExpected:\n    [2.0, [1, 0.500000000000000]]\nGot:\n    [2.0, [1.50000000000000, 0.500000000000000]]\n**********************************************************************\n```",
    "created_at": "2009-08-22T01:01:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6749#issuecomment-47576",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:9" align="right">comment:9</div>

There was this failure:

```
sage -t  "devel/sage/sage/numerical/knapsack.py"            
**********************************************************************
File "/Users/davidjoyner/sagefiles/sage-4.1.1.rc2/devel/sage/sage/numerical/knapsack.py", line 608:
    sage: knapsack([1,1.5,0.5], max=2)
Expected:
    [2.0, [1, 0.500000000000000]]
Got:
    [2.0, [1.50000000000000, 0.500000000000000]]
**********************************************************************
```



---

archive/issue_events_081217.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2009-08-22T01:03:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6749#event-81217"
}
```



---

archive/issue_events_081218.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2009-08-22T01:03:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6749#event-81218"
}
```



---

archive/issue_comments_047577.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI always forget the LP solvers are non-deterministic algorithms, and because of this the values they return sometimes change, which causes trouble with docstrings ;-)\n\nSorry !\n\n( Fixed, as usual the two patches are updated )",
    "created_at": "2009-08-22T06:17:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6749#issuecomment-47577",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:11" align="right">comment:11</div>

I always forget the LP solvers are non-deterministic algorithms, and because of this the values they return sometimes change, which causes trouble with docstrings ;-)

Sorry !

( Fixed, as usual the two patches are updated )



---

archive/issue_events_081219.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-08-22T07:50:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6749#event-81219"
}
```



---

archive/issue_events_081220.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-08-22T07:50:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6749#event-81220"
}
```



---

archive/issue_events_081221.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2009-08-22T18:44:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6749#event-81221"
}
```



---

archive/issue_events_081222.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2009-08-22T18:44:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6749#event-81222"
}
```



---

archive/issue_comments_047578.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThis last patch (and its dependency) installed fine as before (same system, and version) with the following failures:\n\n```\nThe following tests failed:\n\n\n        sage -t  \"devel/sage/doc/en/bordeaux_2008/birds_other.rst\"\n        sage -t  \"devel/sage/sage/interfaces/maxima.py\"\n        sage -t  \"devel/sage/sage/symbolic/expression.pyx\"\n```\nI think these are unrelated, so this gets a positive review from me. Thanks for implementing it!",
    "created_at": "2009-08-22T18:44:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6749#issuecomment-47578",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:13" align="right">comment:13</div>

This last patch (and its dependency) installed fine as before (same system, and version) with the following failures:

```
The following tests failed:


        sage -t  "devel/sage/doc/en/bordeaux_2008/birds_other.rst"
        sage -t  "devel/sage/sage/interfaces/maxima.py"
        sage -t  "devel/sage/sage/symbolic/expression.pyx"
```
I think these are unrelated, so this gets a positive review from me. Thanks for implementing it!



---

archive/issue_comments_047579.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nThis will have to wait until #6502 is resolved. Which patch is to be merged? Most likely, I think some if not all doctests would have to be flagged with \"# optional\" if they require the optional GLPK spkg.",
    "created_at": "2009-08-25T03:11:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6749#issuecomment-47579",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<div id="comment:14" align="right">comment:14</div>

This will have to wait until #6502 is resolved. Which patch is to be merged? Most likely, I think some if not all doctests would have to be flagged with "# optional" if they require the optional GLPK spkg.



---

archive/issue_comments_047580.json:
```json
{
    "body": "Attachment: **[knapsack.patch.gz](https://github.com/sagemath/sage/files/ticket6749/knapsack.patch.gz)**",
    "created_at": "2009-08-25T06:55:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6749#issuecomment-47580",
    "user": "https://github.com/nathanncohen"
}
```

Attachment: **[knapsack.patch.gz](https://github.com/sagemath/sage/files/ticket6749/knapsack.patch.gz)**



---

archive/issue_comments_047581.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nAttachment: **[knapsack.2.patch.gz](https://github.com/sagemath/sage/files/ticket6749/knapsack.2.patch.gz)**\n\nUpdated. And you can apply any one of them, they're both the same ( I uploaded two by mistake the first time, then updated both )",
    "created_at": "2009-08-25T06:56:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6749#issuecomment-47581",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:15" align="right">comment:15</div>

Attachment: **[knapsack.2.patch.gz](https://github.com/sagemath/sage/files/ticket6749/knapsack.2.patch.gz)**

Updated. And you can apply any one of them, they're both the same ( I uploaded two by mistake the first time, then updated both )



---

archive/issue_events_081223.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2009-08-25T18:05:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6749#event-81223"
}
```



---

archive/issue_events_081224.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2009-08-25T18:05:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6749#event-81224"
}
```



---

archive/issue_comments_047582.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nThis patch (on top of the updated 6502) did not apply for me (4.1.1.rc2, intel macbook 10.4.11).",
    "created_at": "2009-08-25T18:05:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6749#issuecomment-47582",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:16" align="right">comment:16</div>

This patch (on top of the updated 6502) did not apply for me (4.1.1.rc2, intel macbook 10.4.11).



---

archive/issue_comments_047583.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nI am using 4.1.1, perhaps it explains ?\n\nI just tried it again with only 6502 and this one, and noticed nothing wrong O_o",
    "created_at": "2009-08-25T18:57:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6749#issuecomment-47583",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:17" align="right">comment:17</div>

I am using 4.1.1, perhaps it explains ?

I just tried it again with only 6502 and this one, and noticed nothing wrong O_o



---

archive/issue_events_081225.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-08-25T18:59:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6749#event-81225"
}
```



---

archive/issue_events_081226.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-08-25T18:59:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6749#event-81226"
}
```



---

archive/issue_comments_047584.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nCould you please try it again on a 4.1.1 ?",
    "created_at": "2009-08-25T18:59:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6749#issuecomment-47584",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:18" align="right">comment:18</div>

Could you please try it again on a 4.1.1 ?



---

archive/issue_events_081227.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2009-08-25T20:49:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6749#event-81227"
}
```



---

archive/issue_events_081228.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2009-08-25T20:49:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6749#event-81228"
}
```



---

archive/issue_comments_047585.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@nathanncohen](#comment:18):\n> Could you please try it again on a 4.1.1 ?\n\nI created a new clone and re-tried this. This time it worked! Passed tests as before (same Sage version, same machine ....).",
    "created_at": "2009-08-25T20:49:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6749#issuecomment-47585",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@nathanncohen](#comment:18):
> Could you please try it again on a 4.1.1 ?

I created a new clone and re-tried this. This time it worked! Passed tests as before (same Sage version, same machine ....).



---

archive/issue_events_081229.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-08-31T15:55:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6749#event-81229"
}
```



---

archive/issue_events_081230.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-08-31T15:55:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6749#event-81230"
}
```



---

archive/issue_comments_047586.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nAs the functions dealing with LP have not been reviewed, I prefer to rewrite the MIP class for Sage to make it easier to use. I will post a new version of the MIP patch as soon as possible, along with all the patches for functions using it.\n\nSorry for the trouble, I'll try to make it quick !\n\nNathann",
    "created_at": "2009-08-31T15:55:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6749#issuecomment-47586",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:20" align="right">comment:20</div>

As the functions dealing with LP have not been reviewed, I prefer to rewrite the MIP class for Sage to make it easier to use. I will post a new version of the MIP patch as soon as possible, along with all the patches for functions using it.

Sorry for the trouble, I'll try to make it quick !

Nathann



---

archive/issue_comments_047587.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nHere is the new version, slightly modified to use the symbolics from #6869 ( the new version of MIP you need to try this code ! )",
    "created_at": "2009-09-03T09:44:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6749#issuecomment-47587",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:21" align="right">comment:21</div>

Here is the new version, slightly modified to use the symbolics from #6869 ( the new version of MIP you need to try this code ! )



---

archive/issue_comments_047588.json:
```json
{
    "body": "Attachment: **[knapsack-symbolics.patch.gz](https://github.com/sagemath/sage/files/ticket6749/knapsack-symbolics.patch.gz)**",
    "created_at": "2009-09-03T09:44:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6749#issuecomment-47588",
    "user": "https://github.com/nathanncohen"
}
```

Attachment: **[knapsack-symbolics.patch.gz](https://github.com/sagemath/sage/files/ticket6749/knapsack-symbolics.patch.gz)**



---

archive/issue_events_081231.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-09-03T09:45:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6749#event-81231"
}
```



---

archive/issue_events_081232.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-09-03T09:45:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6749#event-81232"
}
```



---

archive/issue_comments_047589.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThis applies fine to 4.1.2.a0 and passes testall without any other packages installed (no glpk, etc).\n\nRunning more tests...",
    "created_at": "2009-09-08T18:05:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6749#issuecomment-47589",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:23" align="right">comment:23</div>

This applies fine to 4.1.2.a0 and passes testall without any other packages installed (no glpk, etc).

Running more tests...



---

archive/issue_comments_047590.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nThis applies fine to 4.1.2.a0 and passes testall with glpk package installed.",
    "created_at": "2009-09-09T10:52:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6749#issuecomment-47590",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:24" align="right">comment:24</div>

This applies fine to 4.1.2.a0 and passes testall with glpk package installed.



---

archive/issue_events_081233.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2009-09-09T10:52:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6749#event-81233"
}
```



---

archive/issue_events_081234.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2009-09-09T10:52:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6749#event-81234"
}
```



---

archive/issue_comments_047591.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nMerged `knapsack-symbolics.patch`.\n\n\n\nWith `knapsack-symbolics.patch`, I got a warning when building the reference manual:\n\n```\nWARNING: /scratch/mvngu/release/sage-4.1.2.alpha1/local/lib/python2.6/site-packages/sage/numerical/knapsack.py:docstring of sage.numerical.knapsack.knapsack:69: (WARNING/2) Block quote ends without a blank line; unexpected unindent.\n```\nSee #6916 for a follow-up to this ticket.",
    "created_at": "2009-09-10T12:02:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6749#issuecomment-47591",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<div id="comment:25" align="right">comment:25</div>

Merged `knapsack-symbolics.patch`.



With `knapsack-symbolics.patch`, I got a warning when building the reference manual:

```
WARNING: /scratch/mvngu/release/sage-4.1.2.alpha1/local/lib/python2.6/site-packages/sage/numerical/knapsack.py:docstring of sage.numerical.knapsack.knapsack:69: (WARNING/2) Block quote ends without a blank line; unexpected unindent.
```
See #6916 for a follow-up to this ticket.



---

archive/issue_events_081235.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2009-09-10T12:02:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6749#event-81235"
}
```



---

archive/issue_events_081236.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2009-09-10T12:02:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6749#event-81236"
}
```



---

archive/issue_comments_047592.json:
```json
{
    "body": "Author: **Nathann Cohen**",
    "created_at": "2009-09-10T12:02:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6749#issuecomment-47592",
    "user": "https://github.com/sagetrac-mvngu"
}
```

Author: **Nathann Cohen**



---

archive/issue_comments_047593.json:
```json
{
    "body": "Reviewer: **David Joyner**",
    "created_at": "2009-09-10T12:02:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6749#issuecomment-47593",
    "user": "https://github.com/sagetrac-mvngu"
}
```

Reviewer: **David Joyner**



---

archive/issue_comments_047594.json:
```json
{
    "body": "Merged: **Sage 4.1.2.alpha2**",
    "created_at": "2009-09-10T12:02:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6749#issuecomment-47594",
    "user": "https://github.com/sagetrac-mvngu"
}
```

Merged: **Sage 4.1.2.alpha2**
