# Issue 6790: 12 doctest failures in devel/sage/sage/server/simple/twist.py

archive/issues_006790.json:
```json
{
    "body": "On Solaris 10 update 7 (SPARC), the following test failed. Both ECL and Maxima were updated - ECL version 9.8.4, Maxima version 5.19.1. Sage was built with gcc 4.4.1\n\n```\n----------------------------------------------------------------------\n| Sage Version 4.1.1, Release Date: 2009-08-14                       |\n| Type notebook() for the GUI, and license() for information.        |\n----------------------------------------------------------------------\nThu Aug 20 20:02:37 BST 2009\ndsage-trial tmp directory doesn't exist - creating ...\nThis script will run the unit tests for DSage\n```\n<SNIP>\n\n```\nsage -t  \"devel/sage/sage/server/simple/twist.py\"\n**********************************************************************\nFile \"/export/home/drkirkby/sage/sage-4.1.1/devel/sage/sage/server/simple/twist.py\", line 26:\n    sage: nb = test_notebook(passwd, secure=False, address='localhost', port=port, verbose=True) #doctest: +ELLIPSIS\nException raised:\n    Traceback (most recent call last):\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest `__main__`.example_0[6]>\", line 1, in <module>\n        nb = test_notebook(passwd, secure=False, address='localhost', port=port, verbose=True) #doctest: +ELLIPSIS###line 26:\n    sage: nb = test_notebook(passwd, secure=False, address='localhost', port=port, verbose=True) #doctest: +ELLIPSIS\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/lib/python/site-packages/sage/server/notebook/notebook_object.py\", line 214, in test_notebook        p.expect(\"Starting factory\")\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/lib/python/site-packages/pexpect.py\", line 912, in expect\n        return self.expect_list(compiled_pattern_list, timeout, searchwindowsize)\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/lib/python/site-packages/pexpect.py\", line 989, in expect_list\n        raise TIMEOUT (str(e) + '\\n' + str(self))\n    TIMEOUT: Timeout exceeded in read_nonblocking().\n    <pexpect.spawn instance at 0x3b83dc8>\n    version: 2.0 ($Revision: 1.151 $)\n    command: /export/home/drkirkby/sage/sage-4.1.1/sage\n    args: ['/export/home/drkirkby/sage/sage-4.1.1/sage', '-twistd', '--pidfile=tmpcsoWuM/twistd.pid', '-ny', 'tmpcsoWuM/twistedconf.tac']\n    patterns:\n        Starting factory\n    buffer (last 100 chars):\n    before (last 100 chars): y:12: DeprecationWarning: the md5 module is deprecated; use hashlib instead\n      import os, md5, sys\n\n    after: <class 'pexpect.TIMEOUT'>\n    match: None\n    match_index: None\n    exitstatus: None\n    flag_eof: 0\n    pid: 12091\n    child_fd: 3\n    timeout: 30\n    delimiter: <class 'pexpect.EOF'>\n    logfile: None\n    maxread: 2000\n    searchwindowsize: None\n    delaybeforesend: 0.1\n**********************************************************************\nFile \"/export/home/drkirkby/sage/sage-4.1.1/devel/sage/sage/server/simple/twist.py\", line 40:\n    sage: login_page = get_url('http://localhost:%s/simple/login?username=admin&password=%s' % (port, passwd))\nException raised:\n    Traceback (most recent call last):\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest `__main__`.example_0[10]>\", line 1, in <module>\n        login_page = get_url('http://localhost:%s/simple/login?username=admin&password=%s' % (port, passwd))###line 40:\n    sage: login_page = get_url('http://localhost:%s/simple/login?username=admin&password=%s' % (port, passwd))\n      File \"<doctest `__main__`.example_0[8]>\", line 1, in get_url\n        def get_url(url): h = urllib.urlopen(url); data = h.read(); h.close(); return data###line 35:\n    sage: def get_url(url): h = urllib.urlopen(url); data = h.read(); h.close(); return data\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/lib/python2.6/urllib.py\", line 87, in urlopen\n        return opener.open(url)\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/lib/python2.6/urllib.py\", line 203, in open\n        return getattr(self, name)(url)\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/lib/python2.6/urllib.py\", line 342, in open_http\n        h.endheaders()\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/lib/python2.6/httplib.py\", line 868, in endheaders\n        self._send_output()\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/lib/python2.6/httplib.py\", line 740, in `_send_`output\n        self.send(msg)\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/lib/python2.6/httplib.py\", line 699, in send\n        self.connect()\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/lib/python2.6/httplib.py\", line 683, in connect\n        self.timeout)\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/lib/python2.6/socket.py\", line 514, in create_connection\n        raise error, msg\n    IOError: [Errno socket error] [Errno 128] Network is unreachable\n**********************************************************************\nFile \"/export/home/drkirkby/sage/sage-4.1.1/devel/sage/sage/server/simple/twist.py\", line 41:\n    sage: print \"ignore this\";  print login_page # random session id\nException raised:\n    Traceback (most recent call last):\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest `__main__`.example_0[11]>\", line 1, in <module>\n        print \"ignore this\";  print login_page # random session id###line 41:\n    sage: print \"ignore this\";  print login_page # random session id\n    NameError: name 'login_page' is not defined\n**********************************************************************\nFile \"/export/home/drkirkby/sage/sage-4.1.1/devel/sage/sage/server/simple/twist.py\", line 46:\n    sage: session = re.match(r'.*\"session\": \"([^\"]*)\"', login_page, re.DOTALL).groups()[0]\nException raised:\n    Traceback (most recent call last):\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest `__main__`.example_0[12]>\", line 1, in <module>\n        session = re.match(r'.*\"session\": \"([^\"]*)\"', login_page, re.DOTALL).groups()[Integer(0)]###line 46:\n    sage: session = re.match(r'.*\"session\": \"([^\"]*)\"', login_page, re.DOTALL).groups()[0]\n    NameError: name 'login_page' is not defined\n**********************************************************************\nFile \"/export/home/drkirkby/sage/sage-4.1.1/devel/sage/sage/server/simple/twist.py\", line 51:\n    sage: print get_url('http://localhost:%s/simple/compute?session=%s&code=2*2' % (port, session))\nException raised:\n    Traceback (most recent call last):\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest `__main__`.example_0[14]>\", line 1, in <module>\n        print get_url('http://localhost:%s/simple/compute?session=%s&code=2*2' % (port, session))###line 51:\n    sage: print get_url('http://localhost:%s/simple/compute?session=%s&code=2*2' % (port, session))\n    NameError: name 'session' is not defined\n**********************************************************************\nFile \"/export/home/drkirkby/sage/sage-4.1.1/devel/sage/sage/server/simple/twist.py\", line 69:\n    sage: print get_url('http://localhost:%s/simple/compute?session=%s&code=factor(%s)&timeout=0.1' % (port, session, n))\nException raised:\n    Traceback (most recent call last):\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest `__main__`.example_0[16]>\", line 1, in <module>\n        print get_url('http://localhost:%s/simple/compute?session=%s&code=factor(%s)&timeout=0.1' % (port, session, n))###line 69:\n    sage: print get_url('http://localhost:%s/simple/compute?session=%s&code=factor(%s)&timeout=0.1' % (port, session, n))\n    NameError: name 'session' is not defined\n**********************************************************************\nFile \"/export/home/drkirkby/sage/sage-4.1.1/devel/sage/sage/server/simple/twist.py\", line 79:\n    sage: print get_url('http://localhost:%s/simple/status?session=%s&cell=2' % (port, session))\nException raised:\n    Traceback (most recent call last):\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest `__main__`.example_0[17]>\", line 1, in <module>\n        print get_url('http://localhost:%s/simple/status?session=%s&cell=2' % (port, session))###line 79:\n    sage: print get_url('http://localhost:%s/simple/status?session=%s&cell=2' % (port, session))\n    NameError: name 'session' is not defined\n**********************************************************************\nFile \"/export/home/drkirkby/sage/sage-4.1.1/devel/sage/sage/server/simple/twist.py\", line 89:\n    sage: _ = get_url('http://localhost:%s/simple/interrupt?session=%s' % (port, session))\nException raised:\n    Traceback (most recent call last):\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest `__main__`.example_0[18]>\", line 1, in <module>\n        _ = get_url('http://localhost:%s/simple/interrupt?session=%s' % (port, session))###line 89:\n    sage: _ = get_url('http://localhost:%s/simple/interrupt?session=%s' % (port, session))\n    NameError: name 'session' is not defined\n**********************************************************************\nFile \"/export/home/drkirkby/sage/sage-4.1.1/devel/sage/sage/server/simple/twist.py\", line 95:\n    sage: print get_url('http://localhost:%s/simple/compute?session=%s&code=%s' % (port, session, urllib.quote(code)))\nException raised:\n    Traceback (most recent call last):\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest `__main__`.example_0[20]>\", line 1, in <module>\n        print get_url('http://localhost:%s/simple/compute?session=%s&code=%s' % (port, session, urllib.quote(code)))###line 95:\n    sage: print get_url('http://localhost:%s/simple/compute?session=%s&code=%s' % (port, session, urllib.quote(code)))\n    NameError: name 'session' is not defined\n**********************************************************************\nFile \"/export/home/drkirkby/sage/sage-4.1.1/devel/sage/sage/server/simple/twist.py\", line 103:\n    sage: print get_url('http://localhost:%s/simple/file?session=%s&cell=3&file=a.txt' % (port, session))\nException raised:\n    Traceback (most recent call last):\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest `__main__`.example_0[21]>\", line 1, in <module>\n        print get_url('http://localhost:%s/simple/file?session=%s&cell=3&file=a.txt' % (port, session))###line 103:\n    sage: print get_url('http://localhost:%s/simple/file?session=%s&cell=3&file=a.txt' % (port, session))\n    NameError: name 'session' is not defined\n**********************************************************************\nFile \"/export/home/drkirkby/sage/sage-4.1.1/devel/sage/sage/server/simple/twist.py\", line 108:\n    sage: _ = get_url('http://localhost:%s/simple/logout?session=%s' % (port, session))\nException raised:\n    Traceback (most recent call last):\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest `__main__`.example_0[22]>\", line 1, in <module>\n        _ = get_url('http://localhost:%s/simple/logout?session=%s' % (port, session))###line 108:\n    sage: _ = get_url('http://localhost:%s/simple/logout?session=%s' % (port, session))\n    NameError: name 'session' is not defined\n**********************************************************************\nFile \"/export/home/drkirkby/sage/sage-4.1.1/devel/sage/sage/server/simple/twist.py\", line 109:\n    sage: nb.dispose()\nException raised:\n    Traceback (most recent call last):\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest `__main__`.example_0[23]>\", line 1, in <module>\n        nb.dispose()###line 109:\n    sage: nb.dispose()\n    NameError: name 'nb' is not defined\n**********************************************************************\n1 items had failures:\n  12 of  24 in `__main__`.example_0\n***Test Failed*** 12 failures.\nFor whitespace errors, see the file /export/home/drkirkby/sage/sage-4.1.1/tmp/.doctest_twist.py\n         [52.9 s]\nsage -t  \"devel/sage/sage/server/notebook/jquery.py\"\n         [20.3 s]\n```\n\n**Assignee:** boothby\n\n**Resolution:** worksforme\n\nIssue created by migration from https://trac.sagemath.org/ticket/6790\n\n",
    "closed_at": "2010-08-20T12:31:26Z",
    "created_at": "2009-08-20T22:28:19Z",
    "labels": [
        "component: notebook",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "12 doctest failures in devel/sage/sage/server/simple/twist.py",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/6790",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```
On Solaris 10 update 7 (SPARC), the following test failed. Both ECL and Maxima were updated - ECL version 9.8.4, Maxima version 5.19.1. Sage was built with gcc 4.4.1

```
----------------------------------------------------------------------
| Sage Version 4.1.1, Release Date: 2009-08-14                       |
| Type notebook() for the GUI, and license() for information.        |
----------------------------------------------------------------------
Thu Aug 20 20:02:37 BST 2009
dsage-trial tmp directory doesn't exist - creating ...
This script will run the unit tests for DSage
```
<SNIP>

```
sage -t  "devel/sage/sage/server/simple/twist.py"
**********************************************************************
File "/export/home/drkirkby/sage/sage-4.1.1/devel/sage/sage/server/simple/twist.py", line 26:
    sage: nb = test_notebook(passwd, secure=False, address='localhost', port=port, verbose=True) #doctest: +ELLIPSIS
Exception raised:
    Traceback (most recent call last):
      File "/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/export/home/drkirkby/sage/sage-4.1.1/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest `__main__`.example_0[6]>", line 1, in <module>
        nb = test_notebook(passwd, secure=False, address='localhost', port=port, verbose=True) #doctest: +ELLIPSIS###line 26:
    sage: nb = test_notebook(passwd, secure=False, address='localhost', port=port, verbose=True) #doctest: +ELLIPSIS
      File "/export/home/drkirkby/sage/sage-4.1.1/local/lib/python/site-packages/sage/server/notebook/notebook_object.py", line 214, in test_notebook        p.expect("Starting factory")
      File "/export/home/drkirkby/sage/sage-4.1.1/local/lib/python/site-packages/pexpect.py", line 912, in expect
        return self.expect_list(compiled_pattern_list, timeout, searchwindowsize)
      File "/export/home/drkirkby/sage/sage-4.1.1/local/lib/python/site-packages/pexpect.py", line 989, in expect_list
        raise TIMEOUT (str(e) + '\n' + str(self))
    TIMEOUT: Timeout exceeded in read_nonblocking().
    <pexpect.spawn instance at 0x3b83dc8>
    version: 2.0 ($Revision: 1.151 $)
    command: /export/home/drkirkby/sage/sage-4.1.1/sage
    args: ['/export/home/drkirkby/sage/sage-4.1.1/sage', '-twistd', '--pidfile=tmpcsoWuM/twistd.pid', '-ny', 'tmpcsoWuM/twistedconf.tac']
    patterns:
        Starting factory
    buffer (last 100 chars):
    before (last 100 chars): y:12: DeprecationWarning: the md5 module is deprecated; use hashlib instead
      import os, md5, sys

    after: <class 'pexpect.TIMEOUT'>
    match: None
    match_index: None
    exitstatus: None
    flag_eof: 0
    pid: 12091
    child_fd: 3
    timeout: 30
    delimiter: <class 'pexpect.EOF'>
    logfile: None
    maxread: 2000
    searchwindowsize: None
    delaybeforesend: 0.1
**********************************************************************
File "/export/home/drkirkby/sage/sage-4.1.1/devel/sage/sage/server/simple/twist.py", line 40:
    sage: login_page = get_url('http://localhost:%s/simple/login?username=admin&password=%s' % (port, passwd))
Exception raised:
    Traceback (most recent call last):
      File "/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/export/home/drkirkby/sage/sage-4.1.1/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest `__main__`.example_0[10]>", line 1, in <module>
        login_page = get_url('http://localhost:%s/simple/login?username=admin&password=%s' % (port, passwd))###line 40:
    sage: login_page = get_url('http://localhost:%s/simple/login?username=admin&password=%s' % (port, passwd))
      File "<doctest `__main__`.example_0[8]>", line 1, in get_url
        def get_url(url): h = urllib.urlopen(url); data = h.read(); h.close(); return data###line 35:
    sage: def get_url(url): h = urllib.urlopen(url); data = h.read(); h.close(); return data
      File "/export/home/drkirkby/sage/sage-4.1.1/local/lib/python2.6/urllib.py", line 87, in urlopen
        return opener.open(url)
      File "/export/home/drkirkby/sage/sage-4.1.1/local/lib/python2.6/urllib.py", line 203, in open
        return getattr(self, name)(url)
      File "/export/home/drkirkby/sage/sage-4.1.1/local/lib/python2.6/urllib.py", line 342, in open_http
        h.endheaders()
      File "/export/home/drkirkby/sage/sage-4.1.1/local/lib/python2.6/httplib.py", line 868, in endheaders
        self._send_output()
      File "/export/home/drkirkby/sage/sage-4.1.1/local/lib/python2.6/httplib.py", line 740, in `_send_`output
        self.send(msg)
      File "/export/home/drkirkby/sage/sage-4.1.1/local/lib/python2.6/httplib.py", line 699, in send
        self.connect()
      File "/export/home/drkirkby/sage/sage-4.1.1/local/lib/python2.6/httplib.py", line 683, in connect
        self.timeout)
      File "/export/home/drkirkby/sage/sage-4.1.1/local/lib/python2.6/socket.py", line 514, in create_connection
        raise error, msg
    IOError: [Errno socket error] [Errno 128] Network is unreachable
**********************************************************************
File "/export/home/drkirkby/sage/sage-4.1.1/devel/sage/sage/server/simple/twist.py", line 41:
    sage: print "ignore this";  print login_page # random session id
Exception raised:
    Traceback (most recent call last):
      File "/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/export/home/drkirkby/sage/sage-4.1.1/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest `__main__`.example_0[11]>", line 1, in <module>
        print "ignore this";  print login_page # random session id###line 41:
    sage: print "ignore this";  print login_page # random session id
    NameError: name 'login_page' is not defined
**********************************************************************
File "/export/home/drkirkby/sage/sage-4.1.1/devel/sage/sage/server/simple/twist.py", line 46:
    sage: session = re.match(r'.*"session": "([^"]*)"', login_page, re.DOTALL).groups()[0]
Exception raised:
    Traceback (most recent call last):
      File "/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/export/home/drkirkby/sage/sage-4.1.1/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest `__main__`.example_0[12]>", line 1, in <module>
        session = re.match(r'.*"session": "([^"]*)"', login_page, re.DOTALL).groups()[Integer(0)]###line 46:
    sage: session = re.match(r'.*"session": "([^"]*)"', login_page, re.DOTALL).groups()[0]
    NameError: name 'login_page' is not defined
**********************************************************************
File "/export/home/drkirkby/sage/sage-4.1.1/devel/sage/sage/server/simple/twist.py", line 51:
    sage: print get_url('http://localhost:%s/simple/compute?session=%s&code=2*2' % (port, session))
Exception raised:
    Traceback (most recent call last):
      File "/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/export/home/drkirkby/sage/sage-4.1.1/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest `__main__`.example_0[14]>", line 1, in <module>
        print get_url('http://localhost:%s/simple/compute?session=%s&code=2*2' % (port, session))###line 51:
    sage: print get_url('http://localhost:%s/simple/compute?session=%s&code=2*2' % (port, session))
    NameError: name 'session' is not defined
**********************************************************************
File "/export/home/drkirkby/sage/sage-4.1.1/devel/sage/sage/server/simple/twist.py", line 69:
    sage: print get_url('http://localhost:%s/simple/compute?session=%s&code=factor(%s)&timeout=0.1' % (port, session, n))
Exception raised:
    Traceback (most recent call last):
      File "/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/export/home/drkirkby/sage/sage-4.1.1/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest `__main__`.example_0[16]>", line 1, in <module>
        print get_url('http://localhost:%s/simple/compute?session=%s&code=factor(%s)&timeout=0.1' % (port, session, n))###line 69:
    sage: print get_url('http://localhost:%s/simple/compute?session=%s&code=factor(%s)&timeout=0.1' % (port, session, n))
    NameError: name 'session' is not defined
**********************************************************************
File "/export/home/drkirkby/sage/sage-4.1.1/devel/sage/sage/server/simple/twist.py", line 79:
    sage: print get_url('http://localhost:%s/simple/status?session=%s&cell=2' % (port, session))
Exception raised:
    Traceback (most recent call last):
      File "/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/export/home/drkirkby/sage/sage-4.1.1/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest `__main__`.example_0[17]>", line 1, in <module>
        print get_url('http://localhost:%s/simple/status?session=%s&cell=2' % (port, session))###line 79:
    sage: print get_url('http://localhost:%s/simple/status?session=%s&cell=2' % (port, session))
    NameError: name 'session' is not defined
**********************************************************************
File "/export/home/drkirkby/sage/sage-4.1.1/devel/sage/sage/server/simple/twist.py", line 89:
    sage: _ = get_url('http://localhost:%s/simple/interrupt?session=%s' % (port, session))
Exception raised:
    Traceback (most recent call last):
      File "/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/export/home/drkirkby/sage/sage-4.1.1/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest `__main__`.example_0[18]>", line 1, in <module>
        _ = get_url('http://localhost:%s/simple/interrupt?session=%s' % (port, session))###line 89:
    sage: _ = get_url('http://localhost:%s/simple/interrupt?session=%s' % (port, session))
    NameError: name 'session' is not defined
**********************************************************************
File "/export/home/drkirkby/sage/sage-4.1.1/devel/sage/sage/server/simple/twist.py", line 95:
    sage: print get_url('http://localhost:%s/simple/compute?session=%s&code=%s' % (port, session, urllib.quote(code)))
Exception raised:
    Traceback (most recent call last):
      File "/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/export/home/drkirkby/sage/sage-4.1.1/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest `__main__`.example_0[20]>", line 1, in <module>
        print get_url('http://localhost:%s/simple/compute?session=%s&code=%s' % (port, session, urllib.quote(code)))###line 95:
    sage: print get_url('http://localhost:%s/simple/compute?session=%s&code=%s' % (port, session, urllib.quote(code)))
    NameError: name 'session' is not defined
**********************************************************************
File "/export/home/drkirkby/sage/sage-4.1.1/devel/sage/sage/server/simple/twist.py", line 103:
    sage: print get_url('http://localhost:%s/simple/file?session=%s&cell=3&file=a.txt' % (port, session))
Exception raised:
    Traceback (most recent call last):
      File "/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/export/home/drkirkby/sage/sage-4.1.1/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest `__main__`.example_0[21]>", line 1, in <module>
        print get_url('http://localhost:%s/simple/file?session=%s&cell=3&file=a.txt' % (port, session))###line 103:
    sage: print get_url('http://localhost:%s/simple/file?session=%s&cell=3&file=a.txt' % (port, session))
    NameError: name 'session' is not defined
**********************************************************************
File "/export/home/drkirkby/sage/sage-4.1.1/devel/sage/sage/server/simple/twist.py", line 108:
    sage: _ = get_url('http://localhost:%s/simple/logout?session=%s' % (port, session))
Exception raised:
    Traceback (most recent call last):
      File "/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/export/home/drkirkby/sage/sage-4.1.1/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest `__main__`.example_0[22]>", line 1, in <module>
        _ = get_url('http://localhost:%s/simple/logout?session=%s' % (port, session))###line 108:
    sage: _ = get_url('http://localhost:%s/simple/logout?session=%s' % (port, session))
    NameError: name 'session' is not defined
**********************************************************************
File "/export/home/drkirkby/sage/sage-4.1.1/devel/sage/sage/server/simple/twist.py", line 109:
    sage: nb.dispose()
Exception raised:
    Traceback (most recent call last):
      File "/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/export/home/drkirkby/sage/sage-4.1.1/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/export/home/drkirkby/sage/sage-4.1.1/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest `__main__`.example_0[23]>", line 1, in <module>
        nb.dispose()###line 109:
    sage: nb.dispose()
    NameError: name 'nb' is not defined
**********************************************************************
1 items had failures:
  12 of  24 in `__main__`.example_0
***Test Failed*** 12 failures.
For whitespace errors, see the file /export/home/drkirkby/sage/sage-4.1.1/tmp/.doctest_twist.py
         [52.9 s]
sage -t  "devel/sage/sage/server/notebook/jquery.py"
         [20.3 s]
```

**Assignee:** boothby

**Resolution:** worksforme

Issue created by migration from https://trac.sagemath.org/ticket/6790





---

archive/issue_comments_069972.json:
```json
{
    "body": "<a id='comment:1'></a>\nThis has 0% chance of being related to either the ECL or the Maxima upgrades.",
    "created_at": "2009-08-20T23:58:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6790#issuecomment-69972",
    "user": "https://github.com/aghitza"
}
```

<a id='comment:1'></a>
This has 0% chance of being related to either the ECL or the Maxima upgrades.



---

archive/issue_comments_069973.json:
```json
{
    "body": "**Upstream:** N/A",
    "created_at": "2010-08-20T01:36:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6790#issuecomment-69973",
    "user": "https://github.com/qed777"
}
```

**Upstream:** N/A



---

archive/issue_comments_069974.json:
```json
{
    "body": "<a id='comment:2'></a>\nThis should no longer be a problem.  David, could you confirm this?",
    "created_at": "2010-08-20T01:36:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6790#issuecomment-69974",
    "user": "https://github.com/qed777"
}
```

<a id='comment:2'></a>
This should no longer be a problem.  David, could you confirm this?



---

archive/issue_comments_069975.json:
```json
{
    "body": "<a id='comment:3'></a>\nReplying to [mpatel](#comment%3A2):\n> This should no longer be a problem.  David, could you confirm this?\n\nYes, this can be closed. I've no idea when it was fixed, but it was a long time ago. \n\nDave",
    "created_at": "2010-08-20T11:06:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6790#issuecomment-69975",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:3'></a>
Replying to [mpatel](#comment%3A2):
> This should no longer be a problem.  David, could you confirm this?

Yes, this can be closed. I've no idea when it was fixed, but it was a long time ago. 

Dave



---

archive/issue_events_020471.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-08-20T12:31:26Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/6790",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/6790#event-20471"
}
```



---

archive/issue_events_020472.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-08-20T12:31:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/6790",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/6790#event-20472"
}
```



---

archive/issue_comments_069976.json:
```json
{
    "body": "**Resolution:** worksforme",
    "created_at": "2010-08-20T12:31:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6790#issuecomment-69976",
    "user": "https://github.com/qed777"
}
```

**Resolution:** worksforme
