# Issue 6568: Migrate Notebook to Jinja

archive/issues_006568.json:
```json
{
    "assignees": [
        "https://github.com/TimDumol"
    ],
    "body": "Jinja is a templating engine based on Django's. It's already included\nin Sage due to the inclusion of Sphinx. Migrating from HTML to\ntemplates should make it easier to make future changes to the code,\nand make things easier to read.\n\nAdditionally, this will give us the option of switching to a web framework such as Django.\n\nCC:  @jasongrout\n\nKeywords: **notebook, jinja, templating engine**\n\nReviewer: **William Stein, Minh Van Nguyen**\n\nAuthor: **Tim Dumol**\n\nMerged: **Sage 4.1.2.alpha0**\n\nComponent: **notebook**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/6568_\n\n",
    "closed_at": "2009-08-30T11:32:22Z",
    "created_at": "2009-07-20T13:50:24Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20user%20interface",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.1.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Migrate Notebook to Jinja",
    "type": "issue",
    "updated_at": "2016-07-14T07:36:06Z",
    "url": "https://github.com/sagemath/sage/issues/6568",
    "user": "https://github.com/TimDumol"
}
```
Jinja is a templating engine based on Django's. It's already included
in Sage due to the inclusion of Sphinx. Migrating from HTML to
templates should make it easier to make future changes to the code,
and make things easier to read.

Additionally, this will give us the option of switching to a web framework such as Django.

CC:  @jasongrout

Keywords: **notebook, jinja, templating engine**

Reviewer: **William Stein, Minh Van Nguyen**

Author: **Tim Dumol**

Merged: **Sage 4.1.2.alpha0**

Component: **notebook**

_Issue created by migration from https://trac.sagemath.org/ticket/6568_





---

archive/issue_events_078871.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2009-07-20T13:50:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20user%20interface",
    "label_color": "0000b0",
    "label_name": "c: user interface",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6568#event-78871"
}
```



---

archive/issue_events_078872.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2009-07-20T13:50:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6568#event-78872"
}
```



---

archive/issue_events_078873.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2009-07-20T13:50:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6568#event-78873"
}
```



---

archive/issue_events_078874.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2009-07-20T13:50:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "label": "https://github.com/sagemath/sage/labels/wishlist%20item",
    "label_color": "e81ff9",
    "label_name": "wishlist item",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6568#event-78874"
}
```



---

archive/issue_events_078875.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2009-07-20T13:50:24Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "subject": "https://github.com/TimDumol",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6568#event-78875"
}
```



---

archive/issue_events_078876.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2009-07-20T17:35:51Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "title_is": "[not ready for review] Migrate Notebook to Jinja",
    "title_was": "Migrate Notebook to Jinja",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6568#event-78876"
}
```



---

archive/issue_events_078877.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2009-07-20T17:40:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6568#event-78877"
}
```



---

archive/issue_events_078878.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2009-07-20T17:40:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6568#event-78878"
}
```



---

archive/issue_comments_045384.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\ntimdumol: There should be a proper username on the patch. At the moment I see this\n\n```\n# User deadlyx@localhost.localdomain\n```\nThe username should not be a leet handle or anything like that. In order to properly credit contributors to Sage, the username should following this format:\n\n```\n# User Full Name <email@somewhere.com>\n```\nYou can set a proper username in the file `~/.hgrc` with something like\n\n```\n[ui]\nusername = Full Name <email@somewhere.com>\n```\nI say \"should\", not \"must\". If you don't want to, then at least fill in the \"Author(s):\" field with your full name. That way, it makes it easy to credit you.",
    "created_at": "2009-07-20T19:04:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45384",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<div id="comment:3" align="right">comment:3</div>

timdumol: There should be a proper username on the patch. At the moment I see this

```
# User deadlyx@localhost.localdomain
```
The username should not be a leet handle or anything like that. In order to properly credit contributors to Sage, the username should following this format:

```
# User Full Name <email@somewhere.com>
```
You can set a proper username in the file `~/.hgrc` with something like

```
[ui]
username = Full Name <email@somewhere.com>
```
I say "should", not "must". If you don't want to, then at least fill in the "Author(s):" field with your full name. That way, it makes it easy to credit you.



---

archive/issue_comments_045385.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@sagetrac-mvngu](#comment:3):\n> timdumol: There should be a proper username on the patch. At the moment I see this\n> \n> ```\n> # User deadlyx@localhost.localdomain\n> ```\n> The username should not be a leet handle or anything like that. In order to properly credit contributors to Sage, the username should following this format:\n> \n> ```\n> # User Full Name <email@somewhere.com>\n> ```\n> You can set a proper username in the file `~/.hgrc` with something like\n> \n> ```\n> [ui]\n> username = Full Name <email@somewhere.com>\n> ```\n> I say \"should\", not \"must\". If you don't want to, then at least fill in the \"Author(s):\" field with your full name. That way, it makes it easy to credit you.\n\nThank you very much for noticing that. I didn't realize that my local username was included in the patch. I'll fix it asap.",
    "created_at": "2009-07-21T10:10:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45385",
    "user": "https://github.com/TimDumol"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@sagetrac-mvngu](#comment:3):
> timdumol: There should be a proper username on the patch. At the moment I see this
> 
> ```
> # User deadlyx@localhost.localdomain
> ```
> The username should not be a leet handle or anything like that. In order to properly credit contributors to Sage, the username should following this format:
> 
> ```
> # User Full Name <email@somewhere.com>
> ```
> You can set a proper username in the file `~/.hgrc` with something like
> 
> ```
> [ui]
> username = Full Name <email@somewhere.com>
> ```
> I say "should", not "must". If you don't want to, then at least fill in the "Author(s):" field with your full name. That way, it makes it easy to credit you.

Thank you very much for noticing that. I didn't realize that my local username was included in the patch. I'll fix it asap.



---

archive/issue_comments_045386.json:
```json
{
    "body": "Author: **Tim Joseph Dumol**",
    "created_at": "2009-07-21T12:43:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45386",
    "user": "https://github.com/TimDumol"
}
```

Author: **Tim Joseph Dumol**



---

archive/issue_events_078879.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2009-07-21T12:43:26Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "title_is": "[unfinished] Migrate Notebook to Jinja",
    "title_was": "[not ready for review] Migrate Notebook to Jinja",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6568#event-78879"
}
```



---

archive/issue_events_078880.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2009-07-21T12:43:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6568#event-78880"
}
```



---

archive/issue_events_078881.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2009-07-25T19:47:48Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "title_is": "Migrate Notebook to Jinja",
    "title_was": "[unfinished] Migrate Notebook to Jinja",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6568#event-78881"
}
```



---

archive/issue_comments_045387.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nHi,\n\nI get 8 rejects when trying to apply the first patch to a 100% clean build of sage-4.1:\n\n```\nwstein@sage:~/build/sage-4.1$ ./sage\n----------------------------------------------------------------------\n| Sage Version 4.1, Release Date: 2009-07-09                         |\n| Type notebook() for the GUI, and license() for information.        |\n----------------------------------------------------------------------\nLoading Sage library. Current Mercurial branch is: ref3\nsage: hg_sage.apply('https://github.com/sagemath/sage/files/ticket6568/12659.patch.gz')\nAttempting to load remote file: https://github.com/sagemath/sage/files/ticket6568/12659.patch.gz\nLoading: [.........]\ncd \"/scratch/wstein/build/sage-4.1/devel/sage\" && hg status\n/scratch/wstein/build/sage-4.1/local/lib/python2.6/site-packages/sage/misc/hg.py:240: DeprecationWarning: os.popen3 is deprecated.  Use the subprocess module.\n  x = os.popen3(s)\ncd \"/scratch/wstein/build/sage-4.1/devel/sage\" && hg status\ncd \"/scratch/wstein/build/sage-4.1/devel/sage\" && hg import   \"/scratch/wstein/sage/temp/sage.math.washington.edu/5378/tmp_1.patch\"\napplying /scratch/wstein/sage/temp/sage.math.washington.edu/5378/tmp_1.patch\npatching file sage/server/notebook/notebook.py\nHunk #1 FAILED at 23\nHunk #2 FAILED at 32\nHunk #3 FAILED at 1355\nHunk #4 FAILED at 1402\nHunk #5 FAILED at 1506\nHunk #6 FAILED at 1704\nHunk #7 FAILED at 1903\nHunk #8 FAILED at 2162\n8 out of 8 hunks FAILED -- saving rejects to file sage/server/notebook/notebook.py.rej\nfile sage/server/notebook/templates/debug_window.html already exists\n1 out of 1 hunks FAILED -- saving rejects to file sage/server/notebook/templates/debug_window.html.rej\nfile sage/server/notebook/templates/guest_top_bar_and_worksheet.html already exists\n1 out of 1 hunks FAILED -- saving rejects to file sage/server/notebook/templates/guest_top_bar_and_worksheet.html.rej\nfile sage/server/notebook/templates/head.html already exists\n1 out of 1 hunks FAILED -- saving rejects to file sage/server/notebook/templates/head.html.rej\nfile sage/server/notebook/templates/top_bar_and_worksheet.html already exists\n1 out of 1 hunks FAILED -- saving rejects to file sage/server/notebook/templates/top_bar_and_worksheet.html.rej\nfile sage/server/notebook/templates/user_controls.tmpl already exists\n1 out of 1 hunks FAILED -- saving rejects to file sage/server/notebook/templates/user_controls.tmpl.rej\nfile sage/server/notebook/templates/worksheet_body.html already exists\n1 out of 1 hunks FAILED -- saving rejects to file sage/server/notebook/templates/worksheet_body.html.rej\nfile sage/server/notebook/templates/worksheet_topbar.tmpl already exists\n1 out of 1 hunks FAILED -- saving rejects to file sage/server/notebook/templates/worksheet_topbar.tmpl.rej\nabort: patch failed to apply\n```\n\nWhat should I do?  What are these patches against exactly?",
    "created_at": "2009-07-26T19:09:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45387",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:7" align="right">comment:7</div>

Hi,

I get 8 rejects when trying to apply the first patch to a 100% clean build of sage-4.1:

```
wstein@sage:~/build/sage-4.1$ ./sage
----------------------------------------------------------------------
| Sage Version 4.1, Release Date: 2009-07-09                         |
| Type notebook() for the GUI, and license() for information.        |
----------------------------------------------------------------------
Loading Sage library. Current Mercurial branch is: ref3
sage: hg_sage.apply('https://github.com/sagemath/sage/files/ticket6568/12659.patch.gz')
Attempting to load remote file: https://github.com/sagemath/sage/files/ticket6568/12659.patch.gz
Loading: [.........]
cd "/scratch/wstein/build/sage-4.1/devel/sage" && hg status
/scratch/wstein/build/sage-4.1/local/lib/python2.6/site-packages/sage/misc/hg.py:240: DeprecationWarning: os.popen3 is deprecated.  Use the subprocess module.
  x = os.popen3(s)
cd "/scratch/wstein/build/sage-4.1/devel/sage" && hg status
cd "/scratch/wstein/build/sage-4.1/devel/sage" && hg import   "/scratch/wstein/sage/temp/sage.math.washington.edu/5378/tmp_1.patch"
applying /scratch/wstein/sage/temp/sage.math.washington.edu/5378/tmp_1.patch
patching file sage/server/notebook/notebook.py
Hunk #1 FAILED at 23
Hunk #2 FAILED at 32
Hunk #3 FAILED at 1355
Hunk #4 FAILED at 1402
Hunk #5 FAILED at 1506
Hunk #6 FAILED at 1704
Hunk #7 FAILED at 1903
Hunk #8 FAILED at 2162
8 out of 8 hunks FAILED -- saving rejects to file sage/server/notebook/notebook.py.rej
file sage/server/notebook/templates/debug_window.html already exists
1 out of 1 hunks FAILED -- saving rejects to file sage/server/notebook/templates/debug_window.html.rej
file sage/server/notebook/templates/guest_top_bar_and_worksheet.html already exists
1 out of 1 hunks FAILED -- saving rejects to file sage/server/notebook/templates/guest_top_bar_and_worksheet.html.rej
file sage/server/notebook/templates/head.html already exists
1 out of 1 hunks FAILED -- saving rejects to file sage/server/notebook/templates/head.html.rej
file sage/server/notebook/templates/top_bar_and_worksheet.html already exists
1 out of 1 hunks FAILED -- saving rejects to file sage/server/notebook/templates/top_bar_and_worksheet.html.rej
file sage/server/notebook/templates/user_controls.tmpl already exists
1 out of 1 hunks FAILED -- saving rejects to file sage/server/notebook/templates/user_controls.tmpl.rej
file sage/server/notebook/templates/worksheet_body.html already exists
1 out of 1 hunks FAILED -- saving rejects to file sage/server/notebook/templates/worksheet_body.html.rej
file sage/server/notebook/templates/worksheet_topbar.tmpl already exists
1 out of 1 hunks FAILED -- saving rejects to file sage/server/notebook/templates/worksheet_topbar.tmpl.rej
abort: patch failed to apply
```

What should I do?  What are these patches against exactly?



---

archive/issue_events_078882.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-07-26T19:09:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6568#event-78882"
}
```



---

archive/issue_events_078883.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-07-26T19:09:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6568#event-78883"
}
```



---

archive/issue_comments_045388.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\n@williamstein:\nIt seems something went wrong with the patch exporting. I cleaned up my hg history and combined a few changesets to make the patches easier to apply. The new patches are _12659.patch and _12660.patch. Sorry for the inconvenience.\n\nThe new patches are against r12658. The old ones were as well, but I don't know what happened to them.",
    "created_at": "2009-07-27T02:43:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45388",
    "user": "https://github.com/TimDumol"
}
```

<div id="comment:8" align="right">comment:8</div>

@williamstein:
It seems something went wrong with the patch exporting. I cleaned up my hg history and combined a few changesets to make the patches easier to apply. The new patches are _12659.patch and _12660.patch. Sorry for the inconvenience.

The new patches are against r12658. The old ones were as well, but I don't know what happened to them.



---

archive/issue_events_078884.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2009-07-30T10:19:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6568#event-78884"
}
```



---

archive/issue_events_078885.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2009-07-30T10:19:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6568#event-78885"
}
```



---

archive/issue_comments_045389.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI can't apply/review this patch immediately, but it seems that each change appears twice in the latest version.  For example, \n\n```\n$ grep \"sage/server/notebook/templates/notebook/worksheet.html\" _12660.patch\ndiff -r d3be9e0b1090 -r a60e86f38be7 sage/server/notebook/templates/notebook/worksheet.html\n+++ b/sage/server/notebook/templates/notebook/worksheet.html    Sun Jul 26 14:08:17 2009 +0800\ndiff -r d3be9e0b1090 -r 1335daa5adcd sage/server/notebook/templates/notebook/worksheet.html\n+++ b/sage/server/notebook/templates/notebook/worksheet.html    Tue Jul 28 21:33:54 2009 +0800\n```\nAlso, should \"reviisons\" appear in the patch?  Sorry, if I'm wrong.",
    "created_at": "2009-08-04T06:23:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45389",
    "user": "https://github.com/qed777"
}
```

<div id="comment:10" align="right">comment:10</div>

I can't apply/review this patch immediately, but it seems that each change appears twice in the latest version.  For example, 

```
$ grep "sage/server/notebook/templates/notebook/worksheet.html" _12660.patch
diff -r d3be9e0b1090 -r a60e86f38be7 sage/server/notebook/templates/notebook/worksheet.html
+++ b/sage/server/notebook/templates/notebook/worksheet.html    Sun Jul 26 14:08:17 2009 +0800
diff -r d3be9e0b1090 -r 1335daa5adcd sage/server/notebook/templates/notebook/worksheet.html
+++ b/sage/server/notebook/templates/notebook/worksheet.html    Tue Jul 28 21:33:54 2009 +0800
```
Also, should "reviisons" appear in the patch?  Sorry, if I'm wrong.



---

archive/issue_comments_045390.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThe transition to templates is much needed and appreciated.  Thanks very much for doing this.  Is it possible to break up the changes into a few separate pieces, possibly logically independent?  This might make it easier to review them and to get feedback on and track down any changes in the behavior of the notebook.  On the other hand, it may be better to do it all at once.  Thoughts?",
    "created_at": "2009-08-04T06:37:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45390",
    "user": "https://github.com/qed777"
}
```

<div id="comment:11" align="right">comment:11</div>

The transition to templates is much needed and appreciated.  Thanks very much for doing this.  Is it possible to break up the changes into a few separate pieces, possibly logically independent?  This might make it easier to review them and to get feedback on and track down any changes in the behavior of the notebook.  On the other hand, it may be better to do it all at once.  Thoughts?



---

archive/issue_comments_045391.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\n@qed777\n\nThanks for the feedback. Yeah, that's a typo. Thanks for catching it.\n\nIt seems that the patches are messed up. I've fixed them up with `hg histedit`. I don't see any repeated changes in the patches anymore. Please tell me if there are anymore problems.\n\nBreaking them up seems like a good idea. There are quite a lot of functions though, so there'll be a lot of patches. It may be inconvenient to try them all. Anyways, I'll work on them asap.",
    "created_at": "2009-08-05T01:35:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45391",
    "user": "https://github.com/TimDumol"
}
```

<div id="comment:12" align="right">comment:12</div>

@qed777

Thanks for the feedback. Yeah, that's a typo. Thanks for catching it.

It seems that the patches are messed up. I've fixed them up with `hg histedit`. I don't see any repeated changes in the patches anymore. Please tell me if there are anymore problems.

Breaking them up seems like a good idea. There are quite a lot of functions though, so there'll be a lot of patches. It may be inconvenient to try them all. Anyways, I'll work on them asap.



---

archive/issue_comments_045392.json:
```json
{
    "body": "Migrated notebook.py from HTML to Jinja. Base: r12658 (Sage 4.4.1)",
    "created_at": "2009-08-05T01:38:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45392",
    "user": "https://github.com/TimDumol"
}
```

Migrated notebook.py from HTML to Jinja. Base: r12658 (Sage 4.4.1)



---

archive/issue_comments_045393.json:
```json
{
    "body": "Attachment: **[sage-trac-6568.1.patch.gz](https://github.com/sagemath/sage/files/ticket6568/sage-trac-6568.1.patch.gz)**\n\nMigrated worksheet.py to Jinja. Added doctests. Removed html_slide_controls. Incremental patch from the first patch.",
    "created_at": "2009-08-05T01:39:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45393",
    "user": "https://github.com/TimDumol"
}
```

Attachment: **[sage-trac-6568.1.patch.gz](https://github.com/sagemath/sage/files/ticket6568/sage-trac-6568.1.patch.gz)**

Migrated worksheet.py to Jinja. Added doctests. Removed html_slide_controls. Incremental patch from the first patch.



---

archive/issue_comments_045394.json:
```json
{
    "body": "Attachment: **[sage-trac-6568.2.patch.gz](https://github.com/sagemath/sage/files/ticket6568/sage-trac-6568.2.patch.gz)**\n\nAttachment: **[12659.patch.gz](https://github.com/sagemath/sage/files/ticket6568/12659.patch.gz)**\n\nOBSOLETE.",
    "created_at": "2009-08-05T01:40:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45394",
    "user": "https://github.com/TimDumol"
}
```

Attachment: **[sage-trac-6568.2.patch.gz](https://github.com/sagemath/sage/files/ticket6568/sage-trac-6568.2.patch.gz)**

Attachment: **[12659.patch.gz](https://github.com/sagemath/sage/files/ticket6568/12659.patch.gz)**

OBSOLETE.



---

archive/issue_comments_045395.json:
```json
{
    "body": "OBSOLETE.",
    "created_at": "2009-08-05T01:41:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45395",
    "user": "https://github.com/TimDumol"
}
```

OBSOLETE.



---

archive/issue_comments_045396.json:
```json
{
    "body": "Attachment: **[12660.patch.gz](https://github.com/sagemath/sage/files/ticket6568/12660.patch.gz)**\n\nOBSOLETE.",
    "created_at": "2009-08-05T01:41:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45396",
    "user": "https://github.com/TimDumol"
}
```

Attachment: **[12660.patch.gz](https://github.com/sagemath/sage/files/ticket6568/12660.patch.gz)**

OBSOLETE.



---

archive/issue_comments_045397.json:
```json
{
    "body": "Attachment: **[12661.patch.gz](https://github.com/sagemath/sage/files/ticket6568/12661.patch.gz)**\n\nAttachment: **[12662.patch.gz](https://github.com/sagemath/sage/files/ticket6568/12662.patch.gz)**\n\nOBSOLETE.",
    "created_at": "2009-08-05T01:41:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45397",
    "user": "https://github.com/TimDumol"
}
```

Attachment: **[12661.patch.gz](https://github.com/sagemath/sage/files/ticket6568/12661.patch.gz)**

Attachment: **[12662.patch.gz](https://github.com/sagemath/sage/files/ticket6568/12662.patch.gz)**

OBSOLETE.



---

archive/issue_comments_045398.json:
```json
{
    "body": "OBSOLETE.",
    "created_at": "2009-08-05T01:41:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45398",
    "user": "https://github.com/TimDumol"
}
```

OBSOLETE.



---

archive/issue_comments_045399.json:
```json
{
    "body": "Attachment: **[12663.patch.gz](https://github.com/sagemath/sage/files/ticket6568/12663.patch.gz)**\n\nAttachment: **[12664.patch.gz](https://github.com/sagemath/sage/files/ticket6568/12664.patch.gz)**\n\nOBSOLETE.",
    "created_at": "2009-08-05T01:42:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45399",
    "user": "https://github.com/TimDumol"
}
```

Attachment: **[12663.patch.gz](https://github.com/sagemath/sage/files/ticket6568/12663.patch.gz)**

Attachment: **[12664.patch.gz](https://github.com/sagemath/sage/files/ticket6568/12664.patch.gz)**

OBSOLETE.



---

archive/issue_comments_045400.json:
```json
{
    "body": "Attachment: **[12665.patch.gz](https://github.com/sagemath/sage/files/ticket6568/12665.patch.gz)**\n\nOBSOLETE.",
    "created_at": "2009-08-05T01:42:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45400",
    "user": "https://github.com/TimDumol"
}
```

Attachment: **[12665.patch.gz](https://github.com/sagemath/sage/files/ticket6568/12665.patch.gz)**

OBSOLETE.



---

archive/issue_comments_045401.json:
```json
{
    "body": "OBSOLETE.",
    "created_at": "2009-08-05T01:42:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45401",
    "user": "https://github.com/TimDumol"
}
```

OBSOLETE.



---

archive/issue_comments_045402.json:
```json
{
    "body": "Attachment: **[12666.patch.gz](https://github.com/sagemath/sage/files/ticket6568/12666.patch.gz)**\n\nAttachment: **[12667.patch.gz](https://github.com/sagemath/sage/files/ticket6568/12667.patch.gz)**\n\nOBSOLETE.",
    "created_at": "2009-08-05T01:42:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45402",
    "user": "https://github.com/TimDumol"
}
```

Attachment: **[12666.patch.gz](https://github.com/sagemath/sage/files/ticket6568/12666.patch.gz)**

Attachment: **[12667.patch.gz](https://github.com/sagemath/sage/files/ticket6568/12667.patch.gz)**

OBSOLETE.



---

archive/issue_comments_045403.json:
```json
{
    "body": "OBSOLETE.",
    "created_at": "2009-08-05T01:42:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45403",
    "user": "https://github.com/TimDumol"
}
```

OBSOLETE.



---

archive/issue_comments_045404.json:
```json
{
    "body": "Attachment: **[_12659.patch.gz](https://github.com/sagemath/sage/files/ticket6568/_12659.patch.gz)**\n\nOBSOLETE.",
    "created_at": "2009-08-05T01:43:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45404",
    "user": "https://github.com/TimDumol"
}
```

Attachment: **[_12659.patch.gz](https://github.com/sagemath/sage/files/ticket6568/_12659.patch.gz)**

OBSOLETE.



---

archive/issue_comments_045405.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nAttachment: **[_12660.patch.gz](https://github.com/sagemath/sage/files/ticket6568/_12660.patch.gz)**\n\n#4808 appears to be a duplicate of this ticket.  When one is merged, please consider closing the other.",
    "created_at": "2009-08-10T09:27:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45405",
    "user": "https://github.com/qed777"
}
```

<div id="comment:13" align="right">comment:13</div>

Attachment: **[_12660.patch.gz](https://github.com/sagemath/sage/files/ticket6568/_12660.patch.gz)**

#4808 appears to be a duplicate of this ticket.  When one is merged, please consider closing the other.



---

archive/issue_comments_045406.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nFrom some testing in Firefox 3.5 on Linux, with both new patches applied:\n* Live doc worksheets do not load their stylesheets.\n* Published worksheets are now [partially] editable.\n* The \"re-publish\" and \"stop publishing\" buttons do not work, apparently.\n* The print representation of a worksheet is missing cell boundaries.\n\nAlso, a number of doctests in `notebook.py` and `worksheet.py` failed with `sage -t -long -option -verbose -randorder`.  For `worksheet.py`, there are mostly just small changes in expected HTML output.  I think some of the randomized failures are pre-existing:\n\n```\nsage -t -long -optional -randorder=87873 \"4.1.1.rc1/devel/sage-main/sage/server/notebook/worksheet.py\"\n**********************************************************************\nFile \"/home/apps/sage-4.1.1.rc1/devel/sage-main/sage/server/notebook/worksheet.py\", line 178:\n    sage: sage.server.notebook.worksheet.one_prestarted_sage(None,None)\nExpected:\n    Sage\nGot nothing\n**********************************************************************\nFile \"/home/apps/sage-4.1.1.rc1/devel/sage-main/sage/server/notebook/worksheet.py\", line 148:\n    sage: sage.server.notebook.worksheet._a_sage\nExpected nothing\nGot:\n    Sage\n**********************************************************************\n2 items had failures:\n   1 of   6 in __main__.example_1270084472\n   1 of   5 in __main__.example_1700749147\n***Test Failed*** 2 failures.\nFor whitespace errors, see the file /home/apps/sage/tmp/.doctest_worksheet.py\n         [7.9 s]\nexit code: 1024\n \n----------------------------------------------------------------------\nThe following tests failed:\n        sage -t -long -optional -randorder=87873 \"4.1.1.rc1/devel/sage-main/sage/server/notebook/worksheet.py\"\nTotal time for all tests: 7.9 seconds\n```\nFor `notebook.py`, there are other error types.",
    "created_at": "2009-08-13T06:36:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45406",
    "user": "https://github.com/qed777"
}
```

<div id="comment:14" align="right">comment:14</div>

From some testing in Firefox 3.5 on Linux, with both new patches applied:
* Live doc worksheets do not load their stylesheets.
* Published worksheets are now [partially] editable.
* The "re-publish" and "stop publishing" buttons do not work, apparently.
* The print representation of a worksheet is missing cell boundaries.

Also, a number of doctests in `notebook.py` and `worksheet.py` failed with `sage -t -long -option -verbose -randorder`.  For `worksheet.py`, there are mostly just small changes in expected HTML output.  I think some of the randomized failures are pre-existing:

```
sage -t -long -optional -randorder=87873 "4.1.1.rc1/devel/sage-main/sage/server/notebook/worksheet.py"
**********************************************************************
File "/home/apps/sage-4.1.1.rc1/devel/sage-main/sage/server/notebook/worksheet.py", line 178:
    sage: sage.server.notebook.worksheet.one_prestarted_sage(None,None)
Expected:
    Sage
Got nothing
**********************************************************************
File "/home/apps/sage-4.1.1.rc1/devel/sage-main/sage/server/notebook/worksheet.py", line 148:
    sage: sage.server.notebook.worksheet._a_sage
Expected nothing
Got:
    Sage
**********************************************************************
2 items had failures:
   1 of   6 in __main__.example_1270084472
   1 of   5 in __main__.example_1700749147
***Test Failed*** 2 failures.
For whitespace errors, see the file /home/apps/sage/tmp/.doctest_worksheet.py
         [7.9 s]
exit code: 1024
 
----------------------------------------------------------------------
The following tests failed:
        sage -t -long -optional -randorder=87873 "4.1.1.rc1/devel/sage-main/sage/server/notebook/worksheet.py"
Total time for all tests: 7.9 seconds
```
For `notebook.py`, there are other error types.



---

archive/issue_comments_045407.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nAlso,\n\n```\n$ grep reviisons sage-trac-6568.*\nsage-trac-6568.2.patch:+<a class=\"listcontrol\" href=\"reviisons?rev={{ rev }}&action=publis\">Publish this one</a>&nbsp;&nbsp;\n```",
    "created_at": "2009-08-13T06:40:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45407",
    "user": "https://github.com/qed777"
}
```

<div id="comment:15" align="right">comment:15</div>

Also,

```
$ grep reviisons sage-trac-6568.*
sage-trac-6568.2.patch:+<a class="listcontrol" href="reviisons?rev={{ rev }}&action=publis">Publish this one</a>&nbsp;&nbsp;
```



---

archive/issue_events_078886.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2009-08-13T10:55:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6568#event-78886"
}
```



---

archive/issue_events_078887.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2009-08-13T10:55:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6568#event-78887"
}
```



---

archive/issue_comments_045408.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nI've checked the doctests out on a fresh install (r12659). They also fail, so I assume they're pre-existing. I'm not too familiar with the Notebook code, but I'll see if I can fix them up. Meanwhile, perhaps they should be put on a new ticket.\n\nI'm working on the rest of the problems now.",
    "created_at": "2009-08-13T10:55:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45408",
    "user": "https://github.com/TimDumol"
}
```

<div id="comment:16" align="right">comment:16</div>

I've checked the doctests out on a fresh install (r12659). They also fail, so I assume they're pre-existing. I'm not too familiar with the Notebook code, but I'll see if I can fix them up. Meanwhile, perhaps they should be put on a new ticket.

I'm working on the rest of the problems now.



---

archive/issue_comments_045409.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@TimDumol](#comment:16):\n> I've checked the doctests out on a fresh install (r12659). They also fail, so I assume they're pre-existing. I'm not too familiar with the Notebook code, but I'll see if I can fix them up. Meanwhile, perhaps they should be put on a new ticket.\n> \n> I'm working on the rest of the problems now.\n\nI'm sorry, I meant r12658.",
    "created_at": "2009-08-13T11:06:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45409",
    "user": "https://github.com/TimDumol"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@TimDumol](#comment:16):
> I've checked the doctests out on a fresh install (r12659). They also fail, so I assume they're pre-existing. I'm not too familiar with the Notebook code, but I'll see if I can fix them up. Meanwhile, perhaps they should be put on a new ticket.
> 
> I'm working on the rest of the problems now.

I'm sorry, I meant r12658.



---

archive/issue_comments_045410.json:
```json
{
    "body": "Fixed several bugs. Incremental patch from sage-trac-6568.2.patch",
    "created_at": "2009-08-13T12:49:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45410",
    "user": "https://github.com/TimDumol"
}
```

Fixed several bugs. Incremental patch from sage-trac-6568.2.patch



---

archive/issue_comments_045411.json:
```json
{
    "body": "Attachment: **[sage-trac-6568.3.patch.gz](https://github.com/sagemath/sage/files/ticket6568/sage-trac-6568.3.patch.gz)**\n\nAttachment: **[sage-trac-6568.4.patch.gz](https://github.com/sagemath/sage/files/ticket6568/sage-trac-6568.4.patch.gz)**\n\nFixed bug in styling of documentation pages.",
    "created_at": "2009-08-13T13:51:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45411",
    "user": "https://github.com/TimDumol"
}
```

Attachment: **[sage-trac-6568.3.patch.gz](https://github.com/sagemath/sage/files/ticket6568/sage-trac-6568.3.patch.gz)**

Attachment: **[sage-trac-6568.4.patch.gz](https://github.com/sagemath/sage/files/ticket6568/sage-trac-6568.4.patch.gz)**

Fixed bug in styling of documentation pages.



---

archive/issue_events_078888.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2009-08-13T14:00:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6568#event-78888"
}
```



---

archive/issue_events_078889.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2009-08-13T14:00:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6568#event-78889"
}
```



---

archive/issue_comments_045412.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI've fixed all the outlined bugs, and one more. The doctests all seem to pass, except for the pre-existing failures that you pointed out.",
    "created_at": "2009-08-13T14:00:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45412",
    "user": "https://github.com/TimDumol"
}
```

<div id="comment:18" align="right">comment:18</div>

I've fixed all the outlined bugs, and one more. The doctests all seem to pass, except for the pre-existing failures that you pointed out.



---

archive/issue_comments_045413.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\n* I think clicking \"No\" in reply to \"Do you want to publish this worksheet\" unpublishes the worksheet, but it does not return the sheet to interactive mode.\n\n  * jsMath is not included in printed worksheets.  The page itself is missing the title.\n\n  * How does the `morecss` block work?  Can we now avoid `twist.py`'s \"hack\" altogether?\n\n  * Should, e.g., `server/notebook/templates/doc.html` still be there?\n\nIf you're not already using the [Mercurial Queues extension](http://wiki.sagemath.org/MercurialQueues), it may be worth trying. `hg qrefresh` can be very helpful.\n\nI've added Jason Grout to the CC: list, since my checks may not cover the range of notebook usage patterns.  Perhaps we can get other volunteers?",
    "created_at": "2009-08-13T22:57:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45413",
    "user": "https://github.com/qed777"
}
```

<div id="comment:19" align="right">comment:19</div>

* I think clicking "No" in reply to "Do you want to publish this worksheet" unpublishes the worksheet, but it does not return the sheet to interactive mode.

  * jsMath is not included in printed worksheets.  The page itself is missing the title.

  * How does the `morecss` block work?  Can we now avoid `twist.py`'s "hack" altogether?

  * Should, e.g., `server/notebook/templates/doc.html` still be there?

If you're not already using the [Mercurial Queues extension](http://wiki.sagemath.org/MercurialQueues), it may be worth trying. `hg qrefresh` can be very helpful.

I've added Jason Grout to the CC: list, since my checks may not cover the range of notebook usage patterns.  Perhaps we can get other volunteers?



---

archive/issue_events_078890.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2009-08-13T22:57:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6568#event-78890"
}
```



---

archive/issue_events_078891.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2009-08-13T22:57:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6568#event-78891"
}
```



---

archive/issue_events_078892.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2009-08-13T22:57:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6568#event-78892"
}
```



---

archive/issue_events_078893.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2009-08-13T22:57:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6568#event-78893"
}
```



---

archive/issue_comments_045414.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\n* The `morecss` inserts the code in the block after the first css include. It should be possible to avoid it by creating another template specifically for documentation pages.\n* Probably not. I'll work on cleaning up the file tree asap.\n* I'll work on the rest of the bugs.\n\nI've actually been using histedit to combine changesets. Although I'm guessing patch queues are more idiomatic.\n\nI'm pretty new to the Sage community, so I don't know.",
    "created_at": "2009-08-14T04:40:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45414",
    "user": "https://github.com/TimDumol"
}
```

<div id="comment:20" align="right">comment:20</div>

* The `morecss` inserts the code in the block after the first css include. It should be possible to avoid it by creating another template specifically for documentation pages.
* Probably not. I'll work on cleaning up the file tree asap.
* I'll work on the rest of the bugs.

I've actually been using histedit to combine changesets. Although I'm guessing patch queues are more idiomatic.

I'm pretty new to the Sage community, so I don't know.



---

archive/issue_comments_045415.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nThe [official site](http://mercurial.selenic.com/wiki/) of Mercurial contains many tutorials on using Mercurial itself. In particular, I recommend that you go through its [tutorial for beginners](http://mercurial.selenic.com/wiki/Tutorial). After that, you might want to look through a [section](http://hgbook.red-bean.com/read/managing-change-with-mercurial-queues.html) on using Mercurial queues to manage patches. Anyway, please tell me if you have problems with using Mercurial or its queue extension.",
    "created_at": "2009-08-14T04:52:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45415",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<div id="comment:21" align="right">comment:21</div>

The [official site](http://mercurial.selenic.com/wiki/) of Mercurial contains many tutorials on using Mercurial itself. In particular, I recommend that you go through its [tutorial for beginners](http://mercurial.selenic.com/wiki/Tutorial). After that, you might want to look through a [section](http://hgbook.red-bean.com/read/managing-change-with-mercurial-queues.html) on using Mercurial queues to manage patches. Anyway, please tell me if you have problems with using Mercurial or its queue extension.



---

archive/issue_comments_045416.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nAlso, you might look at http://wiki.sagemath.org/MercurialQueues for a quick hands-on introduction to queues.",
    "created_at": "2009-08-14T05:49:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45416",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:22" align="right">comment:22</div>

Also, you might look at http://wiki.sagemath.org/MercurialQueues for a quick hands-on introduction to queues.



---

archive/issue_comments_045417.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nActually, I meant \"I don't know.\" as in I don't know about the possibility of finding other volunteers. I'm familiar with patch queues. Thanks for the help.",
    "created_at": "2009-08-14T08:16:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45417",
    "user": "https://github.com/TimDumol"
}
```

<div id="comment:23" align="right">comment:23</div>

Actually, I meant "I don't know." as in I don't know about the possibility of finding other volunteers. I'm familiar with patch queues. Thanks for the help.



---

archive/issue_comments_045418.json:
```json
{
    "body": "Attachment: **[sage-trac-6568.5.patch.gz](https://github.com/sagemath/sage/files/ticket6568/sage-trac-6568.5.patch.gz)**\n\nFixed a few bugs in templating.",
    "created_at": "2009-08-14T09:43:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45418",
    "user": "https://github.com/TimDumol"
}
```

Attachment: **[sage-trac-6568.5.patch.gz](https://github.com/sagemath/sage/files/ticket6568/sage-trac-6568.5.patch.gz)**

Fixed a few bugs in templating.



---

archive/issue_comments_045419.json:
```json
{
    "body": "Attachment: **[sage-trac-6568.6.patch.gz](https://github.com/sagemath/sage/files/ticket6568/sage-trac-6568.6.patch.gz)**\n\nRemoved hack in twist.py for documentation page creation. Removed unused files.",
    "created_at": "2009-08-14T09:52:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45419",
    "user": "https://github.com/TimDumol"
}
```

Attachment: **[sage-trac-6568.6.patch.gz](https://github.com/sagemath/sage/files/ticket6568/sage-trac-6568.6.patch.gz)**

Removed hack in twist.py for documentation page creation. Removed unused files.



---

archive/issue_comments_045420.json:
```json
{
    "body": "Attachment: **[sage-trac-6568.6.cumulative.patch.gz](https://github.com/sagemath/sage/files/ticket6568/sage-trac-6568.6.cumulative.patch.gz)**\n\nCumulative patches from sage-trac-6568.2.patch to sage-trac-6568.6.patch. Incremental patch from sage-trac-6568.1.patch.",
    "created_at": "2009-08-14T09:57:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45420",
    "user": "https://github.com/TimDumol"
}
```

Attachment: **[sage-trac-6568.6.cumulative.patch.gz](https://github.com/sagemath/sage/files/ticket6568/sage-trac-6568.6.cumulative.patch.gz)**

Cumulative patches from sage-trac-6568.2.patch to sage-trac-6568.6.patch. Incremental patch from sage-trac-6568.1.patch.



---

archive/issue_comments_045421.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nI've fixed all the bugs pointed out, and the kludge/\"hack\" was removed. I've also cleaned up the templates file tree. Thanks for noting them.",
    "created_at": "2009-08-14T10:00:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45421",
    "user": "https://github.com/TimDumol"
}
```

<div id="comment:24" align="right">comment:24</div>

I've fixed all the bugs pointed out, and the kludge/"hack" was removed. I've also cleaned up the templates file tree. Thanks for noting them.



---

archive/issue_events_078894.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2009-08-14T10:00:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6568#event-78894"
}
```



---

archive/issue_events_078895.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2009-08-14T10:00:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6568#event-78895"
}
```



---

archive/issue_comments_045422.json:
```json
{
    "body": "All-in-one.  Apply only this patch.",
    "created_at": "2009-08-15T03:05:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45422",
    "user": "https://github.com/qed777"
}
```

All-in-one.  Apply only this patch.



---

archive/issue_comments_045423.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nAttachment: **[trac_6568-jinja_migration.patch.gz](https://github.com/sagemath/sage/files/ticket6568/trac_6568-jinja_migration.patch.gz)**\n\nI've attached a solo patch comprised of Tim Dumol's six recent patches.  (I did not use the cumulative patch.)  I've ignored a few small rejected hunks from the sixth patch --- in `notebook.py`, `twist.py`, and `base.html` --- since it appears that the rejected changes are applied by an earlier patch.  Of course, all credit for the hard work of migrating the notebook to Jinja should go to Tim.\n\nI haven't tested the latest changes extensively, but I've noticed no unwelcome surprises.",
    "created_at": "2009-08-15T03:30:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45423",
    "user": "https://github.com/qed777"
}
```

<div id="comment:25" align="right">comment:25</div>

Attachment: **[trac_6568-jinja_migration.patch.gz](https://github.com/sagemath/sage/files/ticket6568/trac_6568-jinja_migration.patch.gz)**

I've attached a solo patch comprised of Tim Dumol's six recent patches.  (I did not use the cumulative patch.)  I've ignored a few small rejected hunks from the sixth patch --- in `notebook.py`, `twist.py`, and `base.html` --- since it appears that the rejected changes are applied by an earlier patch.  Of course, all credit for the hard work of migrating the notebook to Jinja should go to Tim.

I haven't tested the latest changes extensively, but I've noticed no unwelcome surprises.



---

archive/issue_comments_045424.json:
```json
{
    "body": "Fixed introspection, minor clean-ups.  Apply only this patch.",
    "created_at": "2009-08-16T13:23:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45424",
    "user": "https://github.com/qed777"
}
```

Fixed introspection, minor clean-ups.  Apply only this patch.



---

archive/issue_comments_045425.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nAttachment: **[trac_6568-jinja_migration_v2.patch.gz](https://github.com/sagemath/sage/files/ticket6568/trac_6568-jinja_migration_v2.patch.gz)**\n\nVersion 2 (of the uber-patch) should fix introspection.  It also\n* Simplifies `Notebook.plain_text_worksheet_html()`.\n* Indents `Notebook.html_debug_window()`'s docstring.\n\nThere's still some HTML generation in\n* `Notebook.object_list_html()`, `Notebook.list_window_javascript()`, `Notebook.html_settings()`.\n* `Worksheet.html_ratings_into()`\nbut these methods are unused or minor.  Of course, there's markup in `interact.py`, etc.\n\nShould we make a separate ticket for moving `css.py`'s stylesheets to `templates/`?  Rebasing other tickets against this one may be easier than the opposite.\n\nMy review is positive, though someone else should check the most recent changes.  It would be useful to get feedback from other testers.",
    "created_at": "2009-08-16T14:08:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45425",
    "user": "https://github.com/qed777"
}
```

<div id="comment:26" align="right">comment:26</div>

Attachment: **[trac_6568-jinja_migration_v2.patch.gz](https://github.com/sagemath/sage/files/ticket6568/trac_6568-jinja_migration_v2.patch.gz)**

Version 2 (of the uber-patch) should fix introspection.  It also
* Simplifies `Notebook.plain_text_worksheet_html()`.
* Indents `Notebook.html_debug_window()`'s docstring.

There's still some HTML generation in
* `Notebook.object_list_html()`, `Notebook.list_window_javascript()`, `Notebook.html_settings()`.
* `Worksheet.html_ratings_into()`
but these methods are unused or minor.  Of course, there's markup in `interact.py`, etc.

Should we make a separate ticket for moving `css.py`'s stylesheets to `templates/`?  Rebasing other tickets against this one may be easier than the opposite.

My review is positive, though someone else should check the most recent changes.  It would be useful to get feedback from other testers.



---

archive/issue_comments_045426.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nThe patch seems quite large enough as is without including the sheets from `css.py`. I think another ticket would be more suitable.\n\nActually, I hope to clean the HTML up and replace the table layout with CSS once this gets committed, so it may be nice to put those changes into a new ticket as well.",
    "created_at": "2009-08-16T16:18:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45426",
    "user": "https://github.com/TimDumol"
}
```

<div id="comment:27" align="right">comment:27</div>

The patch seems quite large enough as is without including the sheets from `css.py`. I think another ticket would be more suitable.

Actually, I hope to clean the HTML up and replace the table layout with CSS once this gets committed, so it may be nice to put those changes into a new ticket as well.



---

archive/issue_comments_045427.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nSounds great.  I'll steer clear.  In the near term, I'll try to simplify the jsMath-related code for #4714, along the lines of #6673.\n\nI should add that v2 of the uni-patch also fixes the \"User Management\" page at, e.g., `http://localhost:8000/users` (for admins).  The problem was a misuse of `template.template()` in `twist.py`.",
    "created_at": "2009-08-17T06:44:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45427",
    "user": "https://github.com/qed777"
}
```

<div id="comment:28" align="right">comment:28</div>

Sounds great.  I'll steer clear.  In the near term, I'll try to simplify the jsMath-related code for #4714, along the lines of #6673.

I should add that v2 of the uni-patch also fixes the "User Management" page at, e.g., `http://localhost:8000/users` (for admins).  The problem was a misuse of `template.template()` in `twist.py`.



---

archive/issue_events_078896.json:
```json
{
    "actor": "https://github.com/aghitza",
    "created_at": "2009-08-19T09:48:41Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "milestone_number": null,
    "milestone_title": "sage-4.1.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6568#event-78896"
}
```



---

archive/issue_events_078897.json:
```json
{
    "actor": "https://github.com/aghitza",
    "created_at": "2009-08-19T09:48:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "label": "https://github.com/sagemath/sage/labels/wishlist%20item",
    "label_color": "e81ff9",
    "label_name": "wishlist item",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6568#event-78897"
}
```



---

archive/issue_events_078898.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-08-29T05:40:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6568#event-78898"
}
```



---

archive/issue_events_078899.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-08-29T05:40:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6568#event-78899"
}
```



---

archive/issue_comments_045428.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nREFEREE REPORT:\n\nThe Sphinx docstrings that you added, which are very good, have a formatting problem, namely below there needs to be a newline before each - (i.e., lots of whitespace):\n\n```\n \t1315\t        INPUT: \n \t1316\t        - ``username`` - a string \n \t1317\t        - ``worksheet`` - an instance of Worksheet \n \t1318\t \n \t1319\t        OUTPUT: \n \t1320\t        - a string containing the HTML \n```\nSee this screenshot: http://wstein.org/home/wstein/tmp/jinja1.png which illustrates how the ReST is messed up.  This isn't a big deal, since I don't think this code is even in the reference manual yet...  But it would be good to go through and fix. \n\nAll doctests pass, and *using* the notebook after applying the patches seems to work fine -- I can't find any visible difference. \n\nI give this a positive review.  Proper Sphinxing of docs can go in a future patch, and be done throughout the notebook server code.",
    "created_at": "2009-08-29T05:40:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45428",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:30" align="right">comment:30</div>

REFEREE REPORT:

The Sphinx docstrings that you added, which are very good, have a formatting problem, namely below there needs to be a newline before each - (i.e., lots of whitespace):

```
 	1315	        INPUT: 
 	1316	        - ``username`` - a string 
 	1317	        - ``worksheet`` - an instance of Worksheet 
 	1318	 
 	1319	        OUTPUT: 
 	1320	        - a string containing the HTML 
```
See this screenshot: http://wstein.org/home/wstein/tmp/jinja1.png which illustrates how the ReST is messed up.  This isn't a big deal, since I don't think this code is even in the reference manual yet...  But it would be good to go through and fix. 

All doctests pass, and *using* the notebook after applying the patches seems to work fine -- I can't find any visible difference. 

I give this a positive review.  Proper Sphinxing of docs can go in a future patch, and be done throughout the notebook server code.



---

archive/issue_comments_045429.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nI've created a new ticket for notebook documentation at #6840. The docstrings fixes are there.",
    "created_at": "2009-08-29T07:33:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45429",
    "user": "https://github.com/TimDumol"
}
```

<div id="comment:31" align="right">comment:31</div>

I've created a new ticket for notebook documentation at #6840. The docstrings fixes are there.



---

archive/issue_events_078900.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2009-08-29T07:33:07Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "title_is": "Migrate Notebook to JinjaFixed docstrings added by patch #6568 in `notebook.py` and `worksheet.py`",
    "title_was": "Migrate Notebook to Jinja",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6568#event-78900"
}
```



---

archive/issue_comments_045430.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nIn part, the patch \"v2\" at #5360 is an attempt to include some `server/` docstrings in the reference manual.",
    "created_at": "2009-08-30T10:01:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45430",
    "user": "https://github.com/qed777"
}
```

<div id="comment:32" align="right">comment:32</div>

In part, the patch "v2" at #5360 is an attempt to include some `server/` docstrings in the reference manual.



---

archive/issue_comments_045431.json:
```json
{
    "body": "Reviewer: **William Stein**",
    "created_at": "2009-08-30T11:32:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45431",
    "user": "https://github.com/sagetrac-mvngu"
}
```

Reviewer: **William Stein**



---

archive/issue_events_078901.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2009-08-30T11:32:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6568#event-78901"
}
```



---

archive/issue_events_078902.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2009-08-30T11:32:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6568#event-78902"
}
```



---

archive/issue_comments_045432.json:
```json
{
    "body": "Merged: **Sage 4.1.2.alpha0**",
    "created_at": "2009-08-30T11:32:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45432",
    "user": "https://github.com/sagetrac-mvngu"
}
```

Merged: **Sage 4.1.2.alpha0**



---

archive/issue_comments_045433.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nThe patch `trac_6568-jinja_migration_v2.patch` results in over 20 warnings when building the reference manual:\n\n```\nWARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html:15: (WARNING/2) Block quote ends without a blank line; unexpected unindent.\nWARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html:20: (WARNING/2) Block quote ends without a blank line; unexpected unindent.\nWARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html_beforepublish_window:14: (WARNING/2) Block quote ends without a blank line; unexpected unindent.\nWARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html_beforepublish_window:19: (WARNING/2) Block quote ends without a blank line; unexpected unindent.\nWARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html_debug_window:8: (WARNING/2) Literal block expected; none found.\nWARNING: <autodoc>:0: (ERROR/3) Unexpected indentation.\nWARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.DIR:1: (ERROR/3) Unexpected indentation.\nWARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html_debug_window:15: (WARNING/2) Block quote ends without a blank line; unexpected unindent.\nWARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html_doc:15: (WARNING/2) Block quote ends without a blank line; unexpected unindent.\nWARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html_doc:17: (WARNING/2) Definition list ends without a blank line; unexpected unindent.\nWARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html_download_or_delete_datafile:17: (WARNING/2) Block quote ends without a blank line; unexpected unindent.\nWARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html_download_or_delete_datafile:25: (WARNING/2) Block quote ends without a blank line; unexpected unindent.\nWARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html_plain_text_window:18: (WARNING/2) Block quote ends without a blank line; unexpected unindent.\nWARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html_plain_text_window:24: (WARNING/2) Block quote ends without a blank line; unexpected unindent.\nWARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html_share:16: (WARNING/2) Block quote ends without a blank line; unexpected unindent.\nWARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html_share:24: (WARNING/2) Block quote ends without a blank line; unexpected unindent.\nWARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html_upload_data_window:13: (WARNING/2) Block quote ends without a blank line; unexpected unindent.\nWARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html_upload_data_window:18: (WARNING/2) Block quote ends without a blank line; unexpected unindent.\nWARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html_worksheet_revision_list:16: (WARNING/2) Block quote ends without a blank line; unexpected unindent.\nWARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html_worksheet_revision_list:23: (WARNING/2) Block quote ends without a blank line; unexpected unindent.\nWARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html_worksheet_settings:13: (WARNING/2) Block quote ends without a blank line; unexpected unindent.\nWARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html_worksheet_settings:20: (WARNING/2) Block quote ends without a blank line; unexpected unindent.\nWARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.worksheet_html:16: (WARNING/2) Block quote ends without a blank line; unexpected unindent.\nWARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.worksheet_html:23: (WARNING/2) Block quote ends without a blank line; unexpected unindent.\nWARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/worksheet.py:docstring of sage.server.notebook.worksheet.Worksheet.html_menu:10: (WARNING/2) Block quote ends without a blank line; unexpected unindent.\n```\nWhen I ran the test suite with the patch, I received a timed out error:\n\n```\nsage -t -long devel/sage-main/sage/interfaces/ecm.py\n*** *** Error: TIMED OUT! PROCESS KILLED! *** ***\n*** *** Error: TIMED OUT! *** ***\n*** *** Error: TIMED OUT! *** ***\n\t [1800.1 s]\n```\nThis error has nothing to do with the patch. It might be due to sage.math being too busy or its system resources (probably RAM) nearing capacity. Merged `trac_6568-jinja_migration_v2.patch`.",
    "created_at": "2009-08-30T11:32:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45433",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<div id="comment:33" align="right">comment:33</div>

The patch `trac_6568-jinja_migration_v2.patch` results in over 20 warnings when building the reference manual:

```
WARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html:15: (WARNING/2) Block quote ends without a blank line; unexpected unindent.
WARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html:20: (WARNING/2) Block quote ends without a blank line; unexpected unindent.
WARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html_beforepublish_window:14: (WARNING/2) Block quote ends without a blank line; unexpected unindent.
WARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html_beforepublish_window:19: (WARNING/2) Block quote ends without a blank line; unexpected unindent.
WARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html_debug_window:8: (WARNING/2) Literal block expected; none found.
WARNING: <autodoc>:0: (ERROR/3) Unexpected indentation.
WARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.DIR:1: (ERROR/3) Unexpected indentation.
WARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html_debug_window:15: (WARNING/2) Block quote ends without a blank line; unexpected unindent.
WARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html_doc:15: (WARNING/2) Block quote ends without a blank line; unexpected unindent.
WARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html_doc:17: (WARNING/2) Definition list ends without a blank line; unexpected unindent.
WARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html_download_or_delete_datafile:17: (WARNING/2) Block quote ends without a blank line; unexpected unindent.
WARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html_download_or_delete_datafile:25: (WARNING/2) Block quote ends without a blank line; unexpected unindent.
WARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html_plain_text_window:18: (WARNING/2) Block quote ends without a blank line; unexpected unindent.
WARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html_plain_text_window:24: (WARNING/2) Block quote ends without a blank line; unexpected unindent.
WARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html_share:16: (WARNING/2) Block quote ends without a blank line; unexpected unindent.
WARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html_share:24: (WARNING/2) Block quote ends without a blank line; unexpected unindent.
WARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html_upload_data_window:13: (WARNING/2) Block quote ends without a blank line; unexpected unindent.
WARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html_upload_data_window:18: (WARNING/2) Block quote ends without a blank line; unexpected unindent.
WARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html_worksheet_revision_list:16: (WARNING/2) Block quote ends without a blank line; unexpected unindent.
WARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html_worksheet_revision_list:23: (WARNING/2) Block quote ends without a blank line; unexpected unindent.
WARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html_worksheet_settings:13: (WARNING/2) Block quote ends without a blank line; unexpected unindent.
WARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.html_worksheet_settings:20: (WARNING/2) Block quote ends without a blank line; unexpected unindent.
WARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.worksheet_html:16: (WARNING/2) Block quote ends without a blank line; unexpected unindent.
WARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/notebook.py:docstring of sage.server.notebook.notebook.Notebook.worksheet_html:23: (WARNING/2) Block quote ends without a blank line; unexpected unindent.
WARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/worksheet.py:docstring of sage.server.notebook.worksheet.Worksheet.html_menu:10: (WARNING/2) Block quote ends without a blank line; unexpected unindent.
```
When I ran the test suite with the patch, I received a timed out error:

```
sage -t -long devel/sage-main/sage/interfaces/ecm.py
*** *** Error: TIMED OUT! PROCESS KILLED! *** ***
*** *** Error: TIMED OUT! *** ***
*** *** Error: TIMED OUT! *** ***
	 [1800.1 s]
```
This error has nothing to do with the patch. It might be due to sage.math being too busy or its system resources (probably RAM) nearing capacity. Merged `trac_6568-jinja_migration_v2.patch`.



---

archive/issue_events_078903.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2009-08-30T15:21:48Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "title_is": "Migrate Notebook to Jinja",
    "title_was": "Migrate Notebook to JinjaFixed docstrings added by patch #6568 in `notebook.py` and `worksheet.py`",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6568#event-78903"
}
```



---

archive/issue_events_078904.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2009-08-30T15:21:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6568#event-78904"
}
```



---

archive/issue_events_078905.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2009-08-30T15:21:48Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6568#event-78905"
}
```



---

archive/issue_comments_045434.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@sagetrac-mvngu](#comment:33):\n> The patch `trac_6568-jinja_migration_v2.patch` results in over 20 warnings when building the reference manual:\n\nI think #6840 will take care of these.",
    "created_at": "2009-08-30T18:22:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45434",
    "user": "https://github.com/qed777"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@sagetrac-mvngu](#comment:33):
> The patch `trac_6568-jinja_migration_v2.patch` results in over 20 warnings when building the reference manual:

I think #6840 will take care of these.



---

archive/issue_comments_045435.json:
```json
{
    "body": "Changed reviewer from **William Stein** to **William Stein, Minh Van Nguyen**",
    "created_at": "2009-09-07T11:01:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45435",
    "user": "https://github.com/sagetrac-mvngu"
}
```

Changed reviewer from **William Stein** to **William Stein, Minh Van Nguyen**



---

archive/issue_comments_045436.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nAttachment: **[trac_6568-manifest.patch.gz](https://github.com/sagemath/sage/files/ticket6568/trac_6568-manifest.patch.gz)**\n\nThe patch `trac_6568-manifest.patch` prevents repository corruption. A repository corruption can happen because `trac_6568-jinja_migration_v2.patch` adds two new directories:\n\n1. `sage/server/notebook/templates/notebook/`\n2. `sage/server/notebook/templates/worksheet/`\n\nIf the file `SAGE_ROOT/devel/sage-main/MANIFEST.in` is not patched to handle files under these new directories, those files won't be picked up when making a source release with `sage -sdist`.",
    "created_at": "2009-09-07T11:01:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45436",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<div id="comment:36" align="right">comment:36</div>

Attachment: **[trac_6568-manifest.patch.gz](https://github.com/sagemath/sage/files/ticket6568/trac_6568-manifest.patch.gz)**

The patch `trac_6568-manifest.patch` prevents repository corruption. A repository corruption can happen because `trac_6568-jinja_migration_v2.patch` adds two new directories:

1. `sage/server/notebook/templates/notebook/`
2. `sage/server/notebook/templates/worksheet/`

If the file `SAGE_ROOT/devel/sage-main/MANIFEST.in` is not patched to handle files under these new directories, those files won't be picked up when making a source release with `sage -sdist`.



---

archive/issue_comments_045437.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nThe \"manifest\" patch should fix #6884.  If so, please close that ticket.",
    "created_at": "2009-09-07T11:36:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45437",
    "user": "https://github.com/qed777"
}
```

<div id="comment:37" align="right">comment:37</div>

The "manifest" patch should fix #6884.  If so, please close that ticket.



---

archive/issue_comments_045438.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nMerged patches in this order:\n\n1. `trac_6568-jinja_migration_v2.patch`\n2. `trac_6568-manifest.patch`",
    "created_at": "2009-09-07T16:22:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45438",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<div id="comment:38" align="right">comment:38</div>

Merged patches in this order:

1. `trac_6568-jinja_migration_v2.patch`
2. `trac_6568-manifest.patch`



---

archive/issue_comments_045439.json:
```json
{
    "body": "Changed author from **Tim Joseph Dumol** to **Tim Dumol**",
    "created_at": "2016-07-14T07:36:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6568#issuecomment-45439",
    "user": "https://github.com/fchapoton"
}
```

Changed author from **Tim Joseph Dumol** to **Tim Dumol**
