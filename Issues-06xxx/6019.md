# Issue 6019: [with patch, with positive review] speed up new_subspace by a factor of > 100

archive/issues_006019.json:
```json
{
    "body": "I forgot to disable the automatic Hecke-invariance check when calling the submodule constructor to constructing new subspaces of modular forms spaces. \n\nThat meant that the very time-consuming function `_is_hecke_invariant_free_module` was getting called, which slowed down the computation *ridiculously*.\n\nBefore:\n\n```\nsage: C = CuspForms(12, 8)\nsage: time C.new_submodule()\nCPU times: user 217.98 s, sys: 0.39 s, total: 218.37 s\nWall time: 229.00 s\nModular Forms subspace of dimension 2 of Modular Forms space of dimension 17 for Congruence Subgroup Gamma0(12) ofweight 8 over Rational Field\n```\n\nAfter:\n\n```\nsage: time C.new_submodule()\nCPU times: user 1.55 s, sys: 0.02 s, total: 1.57 s\nWall time: 1.58 s\nModular Forms subspace of dimension 2 of Modular Forms space of dimension 17 for Congruence Subgroup Gamma0(12) ofweight 8 over Rational Field\n```\n\nSo that's a speedup by a factor of 139 in this example. \n\nAssignee: @craigcitro\n\nCC:  @craigcitro\n\nResolution: fixed\n\nAuthor: David Loeffler\n\nReviewer: Craig Citro\n\nMerged: 4.0.alpha0\n\nIssue created by migration from https://trac.sagemath.org/ticket/6019\n\n",
    "closed_at": "2009-05-12T04:55:29Z",
    "created_at": "2009-05-11T10:16:52Z",
    "labels": [
        "component: modular forms",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.0",
    "title": "[with patch, with positive review] speed up new_subspace by a factor of > 100",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/6019",
    "user": "https://github.com/loefflerd"
}
```
I forgot to disable the automatic Hecke-invariance check when calling the submodule constructor to constructing new subspaces of modular forms spaces. 

That meant that the very time-consuming function `_is_hecke_invariant_free_module` was getting called, which slowed down the computation *ridiculously*.

Before:

```
sage: C = CuspForms(12, 8)
sage: time C.new_submodule()
CPU times: user 217.98 s, sys: 0.39 s, total: 218.37 s
Wall time: 229.00 s
Modular Forms subspace of dimension 2 of Modular Forms space of dimension 17 for Congruence Subgroup Gamma0(12) ofweight 8 over Rational Field
```

After:

```
sage: time C.new_submodule()
CPU times: user 1.55 s, sys: 0.02 s, total: 1.57 s
Wall time: 1.58 s
Modular Forms subspace of dimension 2 of Modular Forms space of dimension 17 for Congruence Subgroup Gamma0(12) ofweight 8 over Rational Field
```

So that's a speedup by a factor of 139 in this example. 

Assignee: @craigcitro

CC:  @craigcitro

Resolution: fixed

Author: David Loeffler

Reviewer: Craig Citro

Merged: 4.0.alpha0

Issue created by migration from https://trac.sagemath.org/ticket/6019





---

archive/issue_comments_051768.json:
```json
{
    "body": "Attachment [trac_6019.2.patch](tarball://root/attachments/some-uuid/ticket6019/trac_6019.2.patch) by @loefflerd created at 2009-05-11 10:25:25",
    "created_at": "2009-05-11T10:25:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6019",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6019#issuecomment-51768",
    "user": "https://github.com/loefflerd"
}
```

Attachment [trac_6019.2.patch](tarball://root/attachments/some-uuid/ticket6019/trac_6019.2.patch) by @loefflerd created at 2009-05-11 10:25:25



---

archive/issue_comments_051769.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n-I forgot to disable the automatic Hecke-invariance check, and to use the already-calculated dual free module, when calling the submodule constructor to constructing new subspaces of modular forms spaces. \n+I forgot to disable the automatic Hecke-invariance check when calling the submodule constructor to constructing new subspaces of modular forms spaces. \n \n-That meant that the very time-consuming functions `_is_hecke_invariant_free_module` and `dual_free_module` were getting called, which slowed down the computation *ridiculously*.\n+That meant that the very time-consuming function `_is_hecke_invariant_free_module` was getting called, which slowed down the computation *ridiculously*.\n \n Before:\n \n``````\n",
    "created_at": "2009-05-11T10:26:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6019",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6019#issuecomment-51769",
    "user": "https://github.com/loefflerd"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
-I forgot to disable the automatic Hecke-invariance check, and to use the already-calculated dual free module, when calling the submodule constructor to constructing new subspaces of modular forms spaces. 
+I forgot to disable the automatic Hecke-invariance check when calling the submodule constructor to constructing new subspaces of modular forms spaces. 
 
-That meant that the very time-consuming functions `_is_hecke_invariant_free_module` and `dual_free_module` were getting called, which slowed down the computation *ridiculously*.
+That meant that the very time-consuming function `_is_hecke_invariant_free_module` was getting called, which slowed down the computation *ridiculously*.
 
 Before:
 
``````




---

archive/issue_comments_051770.json:
```json
{
    "body": "<a id='comment:3'></a>\nCraig: I'm ccing you on this as it's a followup to #4357, which you reviewed. It's a one-line change.",
    "created_at": "2009-05-11T18:51:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6019",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6019#issuecomment-51770",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:3'></a>
Craig: I'm ccing you on this as it's a followup to #4357, which you reviewed. It's a one-line change.



---

archive/issue_events_024120.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/6019",
    "rename": {
        "from": "[with patch, needs review] speed up new_subspace by a factor of > 100",
        "to": "[with patch, with positive review] speed up new_subspace by a factor of > 100"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/6019#event-24120"
}
```



---

archive/issue_comments_051771.json:
```json
{
    "body": "<a id='comment:4'></a>\nNice catch. `:)`",
    "created_at": "2009-05-11T18:51:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6019",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6019#issuecomment-51771",
    "user": "https://github.com/craigcitro"
}
```

<a id='comment:4'></a>
Nice catch. `:)`



---

archive/issue_comments_051772.json:
```json
{
    "body": "<a id='comment:5'></a>\nWow, that was quick - thanks!",
    "created_at": "2009-05-11T18:56:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6019",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6019#issuecomment-51772",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:5'></a>
Wow, that was quick - thanks!



---

archive/issue_events_024121.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2009-05-12T04:55:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/6019",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/6019#event-24121"
}
```



---

archive/issue_comments_051773.json:
```json
{
    "body": "<a id='comment:6'></a>\nMerged in Sage 4.0.alpha0.\n\nCheers,\n\nMichael",
    "created_at": "2009-05-12T04:55:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6019",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6019#issuecomment-51773",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:6'></a>
Merged in Sage 4.0.alpha0.

Cheers,

Michael



---

archive/issue_comments_051774.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2009-05-12T04:55:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6019",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6019#issuecomment-51774",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

Resolution: fixed



---

archive/issue_comments_051775.json:
```json
{
    "body": "Changing author from \"\" to \"David Loeffler\"",
    "created_at": "2009-06-07T09:25:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6019",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6019#issuecomment-51775",
    "user": "https://github.com/loefflerd"
}
```

Changing author from "" to "David Loeffler"



---

archive/issue_comments_051776.json:
```json
{
    "body": "Changing merged from \"\" to \"4.0.alpha0\"",
    "created_at": "2009-06-07T09:25:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6019",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6019#issuecomment-51776",
    "user": "https://github.com/loefflerd"
}
```

Changing merged from "" to "4.0.alpha0"



---

archive/issue_comments_051777.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Craig Citro\"",
    "created_at": "2009-06-07T09:25:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6019",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6019#issuecomment-51777",
    "user": "https://github.com/loefflerd"
}
```

Changing reviewer from "" to "Craig Citro"
