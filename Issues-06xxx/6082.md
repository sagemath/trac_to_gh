# Issue 6082: realloc called too often for Integer construction/deconstruction

archive/issues_006082.json:
```json
{
    "assignees": [],
    "body": "When putting objects back into the pool, we realloc the `mpz_t` to a smaller size to be able to reclaim the memory for larger integers. Unfortunately, chopping them to one limb means that they will often need to grow again (even if subsequent arithmetic fits in a limb). \n\nComponent: **basic arithmetic**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/6082_\n\n",
    "closed_at": "2009-05-21T02:08:03Z",
    "created_at": "2009-05-19T06:02:38Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20basic%20arithmetic",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "realloc called too often for Integer construction/deconstruction",
    "type": "issue",
    "updated_at": "2009-05-21T02:08:03Z",
    "url": "https://github.com/sagemath/sage/issues/6082",
    "user": "https://github.com/robertwb"
}
```
When putting objects back into the pool, we realloc the `mpz_t` to a smaller size to be able to reclaim the memory for larger integers. Unfortunately, chopping them to one limb means that they will often need to grow again (even if subsequent arithmetic fits in a limb). 

Component: **basic arithmetic**

_Issue created by migration from https://trac.sagemath.org/ticket/6082_





---

archive/issue_events_072937.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2009-05-19T06:02:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/6082",
    "milestone_number": null,
    "milestone_title": "sage-4.0.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6082#event-72937"
}
```



---

archive/issue_events_072938.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2009-05-19T06:02:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6082",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20basic%20arithmetic",
    "label_color": "0000ff",
    "label_name": "c: basic arithmetic",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6082#event-72938"
}
```



---

archive/issue_events_072939.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2009-05-19T06:02:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6082",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6082#event-72939"
}
```



---

archive/issue_events_072940.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2009-05-19T06:02:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6082",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6082#event-72940"
}
```



---

archive/issue_events_072941.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2009-05-19T06:02:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6082",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6082#event-72941"
}
```



---

archive/issue_comments_039879.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nAttachment: **[6082-integer-speed.patch.gz](https://github.com/sagemath/sage/files/ticket6082/6082-integer-speed.patch.gz)**\n\nNow it only reclaims the memory if more than 10 limbs (80 bytes) are used.",
    "created_at": "2009-05-20T21:12:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6082#issuecomment-39879",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:1" align="right">comment:1</div>

Attachment: **[6082-integer-speed.patch.gz](https://github.com/sagemath/sage/files/ticket6082/6082-integer-speed.patch.gz)**

Now it only reclaims the memory if more than 10 limbs (80 bytes) are used.



---

archive/issue_events_072942.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-05-21T01:18:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6082",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6082#event-72942"
}
```



---

archive/issue_events_072943.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-05-21T02:08:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/6082",
    "milestone_number": null,
    "milestone_title": "sage-4.0.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6082#event-72943"
}
```



---

archive/issue_events_072944.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-05-21T02:08:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/6082",
    "milestone_number": null,
    "milestone_title": "sage-4.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6082#event-72944"
}
```



---

archive/issue_comments_039880.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nMerged in Sage 4.0.rc0.\n\nCheers,\n\nMichael",
    "created_at": "2009-05-21T02:08:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6082#issuecomment-39880",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:3" align="right">comment:3</div>

Merged in Sage 4.0.rc0.

Cheers,

Michael



---

archive/issue_events_072945.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-05-21T02:08:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6082",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6082#event-72945"
}
```



---

archive/issue_events_072946.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-05-21T02:08:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/6082",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6082#event-72946"
}
```
