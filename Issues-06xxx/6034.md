# Issue 6034: update Singular to newest upstream release

archive/issues_006034.json:
```json
{
    "assignees": [
        "https://github.com/malb"
    ],
    "body": "Singular 3.1 has many new features which are pretty exciting for Sage (computation over base *rings*, yay!). So we should upgrade.\n\nCC:  @craigcitro\n\nKeywords: **singular**\n\nComponent: **packages: standard**\n\nAuthor: **Martin Albrecht**\n\nReviewer: **Kiran Kedlaya**\n\nMerged: **4.0.2.alpha0**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/6034_\n\n",
    "closed_at": "2009-06-12T07:43:44Z",
    "created_at": "2009-05-13T03:00:37Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.0.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "update Singular to newest upstream release",
    "type": "issue",
    "updated_at": "2009-06-27T08:29:56Z",
    "url": "https://github.com/sagemath/sage/issues/6034",
    "user": "https://github.com/malb"
}
```
Singular 3.1 has many new features which are pretty exciting for Sage (computation over base *rings*, yay!). So we should upgrade.

CC:  @craigcitro

Keywords: **singular**

Component: **packages: standard**

Author: **Martin Albrecht**

Reviewer: **Kiran Kedlaya**

Merged: **4.0.2.alpha0**

_Issue created by migration from https://trac.sagemath.org/ticket/6034_





---

archive/issue_events_072356.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2009-05-13T03:00:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "milestone_number": null,
    "milestone_title": "sage-4.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6034#event-72356"
}
```



---

archive/issue_events_072357.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2009-05-13T03:00:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6034#event-72357"
}
```



---

archive/issue_events_072358.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2009-05-13T03:00:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6034#event-72358"
}
```



---

archive/issue_events_072359.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2009-05-13T03:00:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6034#event-72359"
}
```



---

archive/issue_events_072360.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2009-05-13T03:00:37Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "subject": "https://github.com/malb",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6034#event-72360"
}
```



---

archive/issue_events_072361.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2009-05-13T03:00:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6034#event-72361"
}
```



---

archive/issue_comments_039499.json:
```json
{
    "body": "fixes doctest fallout",
    "created_at": "2009-05-13T03:00:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6034#issuecomment-39499",
    "user": "https://github.com/malb"
}
```

fixes doctest fallout



---

archive/issue_comments_039500.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nAttachment: **[singular_3_1_0.patch.gz](https://github.com/sagemath/sage/files/ticket6034/singular_3_1_0.patch.gz)**\n\nThe SPKG can be found here:\n\n   http://sage.math.washington.edu/home/malb/spkgs/singular-3-1-0-2-20090512.spkg\n\nIt does not contain the changed LIB location. It basically is a drop-in replacement for the current Singular spkg.",
    "created_at": "2009-05-13T03:02:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6034#issuecomment-39500",
    "user": "https://github.com/malb"
}
```

<div id="comment:1" align="right">comment:1</div>

Attachment: **[singular_3_1_0.patch.gz](https://github.com/sagemath/sage/files/ticket6034/singular_3_1_0.patch.gz)**

The SPKG can be found here:

   http://sage.math.washington.edu/home/malb/spkgs/singular-3-1-0-2-20090512.spkg

It does not contain the changed LIB location. It basically is a drop-in replacement for the current Singular spkg.



---

archive/issue_comments_039501.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nAttachment: **[singular_env.patch.gz](https://github.com/sagemath/sage/files/ticket6034/singular_env.patch.gz)**\n\nI've updated sage-env and the spkg to move the `*.lib` files out of the way to `$SAGE_LOCAL/share/singular`.",
    "created_at": "2009-05-13T03:42:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6034#issuecomment-39501",
    "user": "https://github.com/malb"
}
```

<div id="comment:2" align="right">comment:2</div>

Attachment: **[singular_env.patch.gz](https://github.com/sagemath/sage/files/ticket6034/singular_env.patch.gz)**

I've updated sage-env and the spkg to move the `*.lib` files out of the way to `$SAGE_LOCAL/share/singular`.



---

archive/issue_comments_039502.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nNote that I updated the SPKG at \n\n    http://sage.math.washington.edu/home/malb/spkgs/singular-3-1-0-2-20090512.spkg\n\nto include the fixes for enabling the coefficient rings which are not fields.",
    "created_at": "2009-05-17T01:02:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6034#issuecomment-39502",
    "user": "https://github.com/malb"
}
```

<div id="comment:3" align="right">comment:3</div>

Note that I updated the SPKG at 

    http://sage.math.washington.edu/home/malb/spkgs/singular-3-1-0-2-20090512.spkg

to include the fixes for enabling the coefficient rings which are not fields.



---

archive/issue_comments_039503.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThe attached patch enables the Singular coefficient rings natively. It passes doctests except:\n\n```\nThe following tests failed:\n\n        sage -t  devel/sage/sage/rings/polynomial/toy_d_basis.py # 1 doctests failed\n----------------------------------------------------------------------\nTotal time for all tests: 1049.8 seconds\n```\n\nwhich I reported upstream at \n\n  http://www.singular.uni-kl.de:8002/trac/ticket/137",
    "created_at": "2009-05-17T01:11:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6034#issuecomment-39503",
    "user": "https://github.com/malb"
}
```

<div id="comment:4" align="right">comment:4</div>

The attached patch enables the Singular coefficient rings natively. It passes doctests except:

```
The following tests failed:

        sage -t  devel/sage/sage/rings/polynomial/toy_d_basis.py # 1 doctests failed
----------------------------------------------------------------------
Total time for all tests: 1049.8 seconds
```

which I reported upstream at 

  http://www.singular.uni-kl.de:8002/trac/ticket/137



---

archive/issue_comments_039504.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nIgnore that comment, wrong ticket.",
    "created_at": "2009-05-17T01:13:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6034#issuecomment-39504",
    "user": "https://github.com/malb"
}
```

<div id="comment:5" align="right">comment:5</div>

Ignore that comment, wrong ticket.



---

archive/issue_comments_039505.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThis will be a perfect addition for sage-4.0.1.",
    "created_at": "2009-05-28T07:11:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6034#issuecomment-39505",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:6" align="right">comment:6</div>

This will be a perfect addition for sage-4.0.1.



---

archive/issue_events_072362.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-05-28T07:11:41Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "milestone_number": null,
    "milestone_title": "sage-4.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6034#event-72362"
}
```



---

archive/issue_events_072363.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-05-28T07:11:41Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "milestone_number": null,
    "milestone_title": "sage-4.0.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6034#event-72363"
}
```



---

archive/issue_comments_039506.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nCould you change singular_env.patch so that it knows where to find sage-env (i.e., in (sage directory)/local/bin)?\n\nThanks,\nKiran",
    "created_at": "2009-05-30T22:25:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6034#issuecomment-39506",
    "user": "https://github.com/kedlaya"
}
```

<div id="comment:7" align="right">comment:7</div>

Could you change singular_env.patch so that it knows where to find sage-env (i.e., in (sage directory)/local/bin)?

Thanks,
Kiran



---

archive/issue_comments_039507.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI am not quite sure what you're asking since singular_env.patch is a HG patch which should be applied via \n\n```\ncd $SAGE_LOCAL/bin\nhg import ~/singular_env.patch \n```",
    "created_at": "2009-05-31T13:42:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6034#issuecomment-39507",
    "user": "https://github.com/malb"
}
```

<div id="comment:8" align="right">comment:8</div>

I am not quite sure what you're asking since singular_env.patch is a HG patch which should be applied via 

```
cd $SAGE_LOCAL/bin
hg import ~/singular_env.patch 
```



---

archive/issue_comments_039508.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThat works, yes. I had been trying to run hg from within sage.\n\nWith that, the patches apply against 4.0, the spkg builds, and the patch on #6051 applies and does what is expected (with the one known doctest failure caused by upstream). I didn't find any collateral doctest failures either. Positive review; however, in order to get #6051 to pass doctests, we'll need a new version from upstream and hence a new spkg.",
    "created_at": "2009-06-02T16:37:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6034#issuecomment-39508",
    "user": "https://github.com/kedlaya"
}
```

<div id="comment:9" align="right">comment:9</div>

That works, yes. I had been trying to run hg from within sage.

With that, the patches apply against 4.0, the spkg builds, and the patch on #6051 applies and does what is expected (with the one known doctest failure caused by upstream). I didn't find any collateral doctest failures either. Positive review; however, in order to get #6051 to pass doctests, we'll need a new version from upstream and hence a new spkg.



---

archive/issue_events_072364.json:
```json
{
    "actor": "https://github.com/kedlaya",
    "created_at": "2009-06-02T16:38:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6034#event-72364"
}
```



---

archive/issue_comments_039509.json:
```json
{
    "body": "Author: **Martin Albrecht**",
    "created_at": "2009-06-07T12:06:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6034#issuecomment-39509",
    "user": "https://github.com/malb"
}
```

Author: **Martin Albrecht**



---

archive/issue_comments_039510.json:
```json
{
    "body": "Reviewer: **Kiran Kedlaya**",
    "created_at": "2009-06-07T12:06:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6034#issuecomment-39510",
    "user": "https://github.com/malb"
}
```

Reviewer: **Kiran Kedlaya**



---

archive/issue_events_072365.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2009-06-07T12:06:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6034#event-72365"
}
```



---

archive/issue_events_072366.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2009-06-07T12:06:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6034#event-72366"
}
```



---

archive/issue_events_072367.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2009-06-08T14:20:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6034#event-72367"
}
```



---

archive/issue_events_072368.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2009-06-08T14:20:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6034#event-72368"
}
```



---

archive/issue_comments_039511.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nSorry, but something is wrong.\n\nI get\n\n```\nsage: import os\nsage: os.environ['SINGULARPATH']\n'/home/king/SAGE/devel/sage-4.0/local/share/singular'\nsage: singular.eval('system(\"SingularLib\")')\n'/home/king/SAGE/devel/sage-4.0/local/share/singular:/home/king/SAGE/devel/sage-4.0/local/LIB'\n```\n\nBut the last line is Singular's way of telling where the libs are.",
    "created_at": "2009-06-08T14:20:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6034#issuecomment-39511",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:12" align="right">comment:12</div>

Sorry, but something is wrong.

I get

```
sage: import os
sage: os.environ['SINGULARPATH']
'/home/king/SAGE/devel/sage-4.0/local/share/singular'
sage: singular.eval('system("SingularLib")')
'/home/king/SAGE/devel/sage-4.0/local/share/singular:/home/king/SAGE/devel/sage-4.0/local/LIB'
```

But the last line is Singular's way of telling where the libs are.



---

archive/issue_comments_039512.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nHi Simon,\n\nwhy is the last result wrong? It searches in `/home/king/SAGE/devel/sage-4.0/local/share/singular` first, which looks correct to me. What am I missing?",
    "created_at": "2009-06-08T14:26:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6034#issuecomment-39512",
    "user": "https://github.com/malb"
}
```

<div id="comment:13" align="right">comment:13</div>

Hi Simon,

why is the last result wrong? It searches in `/home/king/SAGE/devel/sage-4.0/local/share/singular` first, which looks correct to me. What am I missing?



---

archive/issue_events_072369.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2009-06-08T14:31:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6034#event-72369"
}
```



---

archive/issue_events_072370.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2009-06-08T14:31:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6034#event-72370"
}
```



---

archive/issue_comments_039513.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@malb](#comment:13):\n> Hi Simon,\n> \n> why is the last result wrong? It searches in `/home/king/SAGE/devel/sage-4.0/local/share/singular` first, which looks correct to me. What am I missing?\n\nDouble sorry. I was missing something. Ithought that ``system(\"SingularLib\")`` gives precisely one location in which Singular is looking for libraries. But, as you point out, it may provide multiple search paths.\n\nOK, then back to Kiran's positive review.",
    "created_at": "2009-06-08T14:31:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6034#issuecomment-39513",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@malb](#comment:13):
> Hi Simon,
> 
> why is the last result wrong? It searches in `/home/king/SAGE/devel/sage-4.0/local/share/singular` first, which looks correct to me. What am I missing?

Double sorry. I was missing something. Ithought that ``system("SingularLib")`` gives precisely one location in which Singular is looking for libraries. But, as you point out, it may provide multiple search paths.

OK, then back to Kiran's positive review.



---

archive/issue_comments_039514.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThis segfaults on startup for me with sage-4.0.1.  I thought the patch at #6051 might help, but it doesn't apply against 4.0.1.  We want to merge this in 4.0.2 so quick movement is appreciated.",
    "created_at": "2009-06-10T05:16:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6034#issuecomment-39514",
    "user": "https://github.com/ncalexan"
}
```

<div id="comment:15" align="right">comment:15</div>

This segfaults on startup for me with sage-4.0.1.  I thought the patch at #6051 might help, but it doesn't apply against 4.0.1.  We want to merge this in 4.0.2 so quick movement is appreciated.



---

archive/issue_comments_039515.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@ncalexan](#comment:15):\n> This segfaults on startup for me with sage-4.0.1.  I thought the patch at #6051 might help, but it doesn't apply against 4.0.1.  We want to merge this in 4.0.2 so quick movement is appreciated.\n\nWhat did you do in order to install the spkg?\n\nYou should do:\n1. Either replace the singular-3-0-4 spkg by the new spkg and re-build Sage *from scratch*\n2. Or do the following:\n     i. ``sage -i singular-3-1-0...`` (so, install it into an existing sage)\n     iii. ``sage -f ntl...`` (so, force a re-installation of the ntl-spkg)\n     iiiii. \n       * Do ``sage -ba``, or \n       * touch all Cython extensions depending on Singular (these are sage.libs.singular.singular, sage.matrix.matrix_mpolynomial_dense, sage.rings.polynomial.multi_polynomial_ideal_libsingular and sage.rings.polynomial.multi_polynomial_libsingular) and do ``sage -b``\n\nThis is how I installed the new spkg.\n\nCheers,\n    Simon",
    "created_at": "2009-06-10T06:10:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6034#issuecomment-39515",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@ncalexan](#comment:15):
> This segfaults on startup for me with sage-4.0.1.  I thought the patch at #6051 might help, but it doesn't apply against 4.0.1.  We want to merge this in 4.0.2 so quick movement is appreciated.

What did you do in order to install the spkg?

You should do:
1. Either replace the singular-3-0-4 spkg by the new spkg and re-build Sage *from scratch*
2. Or do the following:
     i. ``sage -i singular-3-1-0...`` (so, install it into an existing sage)
     iii. ``sage -f ntl...`` (so, force a re-installation of the ntl-spkg)
     iiiii. 
       * Do ``sage -ba``, or 
       * touch all Cython extensions depending on Singular (these are sage.libs.singular.singular, sage.matrix.matrix_mpolynomial_dense, sage.rings.polynomial.multi_polynomial_ideal_libsingular and sage.rings.polynomial.multi_polynomial_libsingular) and do ``sage -b``

This is how I installed the new spkg.

Cheers,
    Simon



---

archive/issue_comments_039516.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\n> This is how I installed the new spkg.\n\nThanks Simon, it now builds and runs and I'll get to testing it tomorrow.",
    "created_at": "2009-06-10T07:48:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6034#issuecomment-39516",
    "user": "https://github.com/ncalexan"
}
```

<div id="comment:17" align="right">comment:17</div>

> This is how I installed the new spkg.

Thanks Simon, it now builds and runs and I'll get to testing it tomorrow.



---

archive/issue_comments_039517.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@ncalexan](#comment:17):\n> > This is how I installed the new spkg.\n\n> \n> Thanks Simon, it now builds and runs and I'll get to testing it tomorrow.\n\nJust for my own reference:\n\n```\ntouch sage/libs/singular/* sage/matrix/matrix_mpolynomial_dense* sage/rings/polynomial/multi_polynomial_ideal_libsingular* sage/rings/polynomial/multi_polynomial_libsingular*\n```",
    "created_at": "2009-06-10T17:35:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6034#issuecomment-39517",
    "user": "https://github.com/ncalexan"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@ncalexan](#comment:17):
> > This is how I installed the new spkg.

> 
> Thanks Simon, it now builds and runs and I'll get to testing it tomorrow.

Just for my own reference:

```
touch sage/libs/singular/* sage/matrix/matrix_mpolynomial_dense* sage/rings/polynomial/multi_polynomial_ideal_libsingular* sage/rings/polynomial/multi_polynomial_libsingular*
```



---

archive/issue_comments_039518.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@ncalexan](#comment:18):\n> Just for my own reference:\n> \n> ```\n> touch sage/libs/singular/* sage/matrix/matrix_mpolynomial_dense* sage/rings/polynomial/multi_polynomial_ideal_libsingular* sage/rings/polynomial/multi_polynomial_libsingular*\n> ```\n\nShould we add something involving these dependencies to `module_list.py`?",
    "created_at": "2009-06-10T17:50:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6034#issuecomment-39518",
    "user": "https://github.com/craigcitro"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@ncalexan](#comment:18):
> Just for my own reference:
> 
> ```
> touch sage/libs/singular/* sage/matrix/matrix_mpolynomial_dense* sage/rings/polynomial/multi_polynomial_ideal_libsingular* sage/rings/polynomial/multi_polynomial_libsingular*
> ```

Should we add something involving these dependencies to `module_list.py`?



---

archive/issue_comments_039519.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@craigcitro](#comment:19):\n> Should we add something involving these dependencies to `module_list.py`?\n\nYes. The right dependencies would be `$SAGE_LOCAL/include/libsingular.h`, strange I thought I did that a while ago.",
    "created_at": "2009-06-10T17:59:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6034#issuecomment-39519",
    "user": "https://github.com/malb"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@craigcitro](#comment:19):
> Should we add something involving these dependencies to `module_list.py`?

Yes. The right dependencies would be `$SAGE_LOCAL/include/libsingular.h`, strange I thought I did that a while ago.



---

archive/issue_comments_039520.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@malb](#comment:20):\n> Replying to [@craigcitro](#comment:19):\n> > Should we add something involving these dependencies to `module_list.py`?\n\n> \n> Yes. The right dependencies would be `$SAGE_LOCAL/include/libsingular.h`, strange I thought I did that a while ago.\n\nAren't these dependencies already in `module_list.py`? Actually this is where I was looking what I had to touch. Or perhaps touching `libsingular.h` would have been enough, who knows...",
    "created_at": "2009-06-11T06:19:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6034#issuecomment-39520",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@malb](#comment:20):
> Replying to [@craigcitro](#comment:19):
> > Should we add something involving these dependencies to `module_list.py`?

> 
> Yes. The right dependencies would be `$SAGE_LOCAL/include/libsingular.h`, strange I thought I did that a while ago.

Aren't these dependencies already in `module_list.py`? Actually this is where I was looking what I had to touch. Or perhaps touching `libsingular.h` would have been enough, who knows...



---

archive/issue_comments_039521.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nIndeed the dependencies are already in, Nick must have forgotten to `sage -b` ?",
    "created_at": "2009-06-11T11:32:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6034#issuecomment-39521",
    "user": "https://github.com/malb"
}
```

<div id="comment:22" align="right">comment:22</div>

Indeed the dependencies are already in, Nick must have forgotten to `sage -b` ?



---

archive/issue_comments_039522.json:
```json
{
    "body": "Merged: **sage-4.0.2.alpha0**",
    "created_at": "2009-06-12T07:43:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6034#issuecomment-39522",
    "user": "https://github.com/ncalexan"
}
```

Merged: **sage-4.0.2.alpha0**



---

archive/issue_events_072371.json:
```json
{
    "actor": "https://github.com/ncalexan",
    "created_at": "2009-06-12T07:43:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6034#event-72371"
}
```



---

archive/issue_events_072372.json:
```json
{
    "actor": "https://github.com/ncalexan",
    "created_at": "2009-06-12T07:43:44Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6034#event-72372"
}
```



---

archive/issue_comments_039523.json:
```json
{
    "body": "Changed merged from **sage-4.0.2.alpha0** to **4.0.2.alpha0**",
    "created_at": "2009-06-27T08:29:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6034",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6034#issuecomment-39523",
    "user": "https://github.com/loefflerd"
}
```

Changed merged from **sage-4.0.2.alpha0** to **4.0.2.alpha0**
