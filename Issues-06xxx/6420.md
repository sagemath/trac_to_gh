# Issue 6420: Maxima integration error with 1/x^3

archive/issues_006420.json:
```json
{
    "assignees": [],
    "body": "\n```\nsage: integrate(1/x^3,x,1,infinity)\nValueError: Integral is divergent.\n```\n\nBut it's NOT!\n\nThe problem comes from Maxima. I could check four versions:\n\n```\nMaxima 5.13.0: it's ok\nMaxima 5.16.3: it gives wrong result, Sage 4.0.2 uses this\nMaxima 5.17.1: it gives wrong result\nMaxima 5.18.1: it's ok\n```\n\nAn example for wrong result:\n\n```\npetya@desktop:~/download/sage/sage-4.0.2-linux-Ubuntu_9.04-i686-Linux/local/bin$ ./maxima\nMaxima 5.16.3 http://maxima.sourceforge.net\nUsing Lisp ECL 9.4.1\nDistributed under the GNU Public License. See the file COPYING.\nDedicated to the memory of William Schelter.\nThe function bug_report() provides bug reporting information.\n(%i1) integrate(1/x^3,x,1,inf);\n\nIntegral is divergent\n -- an error.  To debug this try debugmode(true);\n```\n\nWe would like to teach undergradute students with Sage, and this bug is quite annoying. It would be helpful, if someone could update Maxima in Sage.\n\n\n Thanks,\n  Peter\n\nAssignee: **@aghitza**\n\nKeywords: **maxima integral**\n\nAuthor: **Karl-Dieter Crisman**\n\nReviewer: **Mike Hansen**\n\nMerged: **sage-4.2.alpha0**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/6420_\n\n",
    "closed_at": "2009-10-15T07:07:14Z",
    "created_at": "2009-06-26T07:33:08Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20interfaces",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Maxima integration error with 1/x^3",
    "type": "issue",
    "updated_at": "2009-10-15T07:07:14Z",
    "url": "https://github.com/sagemath/sage/issues/6420",
    "user": "https://github.com/sagetrac-mora"
}
```

```
sage: integrate(1/x^3,x,1,infinity)
ValueError: Integral is divergent.
```

But it's NOT!

The problem comes from Maxima. I could check four versions:

```
Maxima 5.13.0: it's ok
Maxima 5.16.3: it gives wrong result, Sage 4.0.2 uses this
Maxima 5.17.1: it gives wrong result
Maxima 5.18.1: it's ok
```

An example for wrong result:

```
petya@desktop:~/download/sage/sage-4.0.2-linux-Ubuntu_9.04-i686-Linux/local/bin$ ./maxima
Maxima 5.16.3 http://maxima.sourceforge.net
Using Lisp ECL 9.4.1
Distributed under the GNU Public License. See the file COPYING.
Dedicated to the memory of William Schelter.
The function bug_report() provides bug reporting information.
(%i1) integrate(1/x^3,x,1,inf);

Integral is divergent
 -- an error.  To debug this try debugmode(true);
```

We would like to teach undergradute students with Sage, and this bug is quite annoying. It would be helpful, if someone could update Maxima in Sage.


 Thanks,
  Peter

Assignee: **@aghitza**

Keywords: **maxima integral**

Author: **Karl-Dieter Crisman**

Reviewer: **Mike Hansen**

Merged: **sage-4.2.alpha0**

_Issue created by migration from https://trac.sagemath.org/ticket/6420_





---

archive/issue_events_069730.json:
```json
{
    "actor": "https://github.com/sagetrac-mora",
    "created_at": "2009-06-26T07:33:08Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/6420",
    "milestone_number": null,
    "milestone_title": "sage-4.1.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6420#event-69730"
}
```



---

archive/issue_events_069731.json:
```json
{
    "actor": "https://github.com/sagetrac-mora",
    "created_at": "2009-06-26T07:33:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6420",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20interfaces",
    "label_color": "0000ff",
    "label_name": "component: interfaces",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6420#event-69731"
}
```



---

archive/issue_events_069732.json:
```json
{
    "actor": "https://github.com/sagetrac-mora",
    "created_at": "2009-06-26T07:33:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6420",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6420#event-69732"
}
```



---

archive/issue_events_069733.json:
```json
{
    "actor": "https://github.com/sagetrac-mora",
    "created_at": "2009-06-26T07:33:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6420",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6420#event-69733"
}
```



---

archive/issue_events_069734.json:
```json
{
    "actor": "https://github.com/sagetrac-mora",
    "created_at": "2009-06-26T07:33:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6420",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6420#event-69734"
}
```



---

archive/issue_comments_044726.json:
```json
{
    "body": "Changed assignee from **@mwhansen** to **@aghitza**",
    "created_at": "2009-08-24T09:31:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6420#issuecomment-44726",
    "user": "https://github.com/aghitza"
}
```

Changed assignee from **@mwhansen** to **@aghitza**



---

archive/issue_comments_044727.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nThis is fixed by the spkg and patch at #6699.  I will put up a patch with a doctest here when #6699 gets merged.",
    "created_at": "2009-08-24T09:31:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6420#issuecomment-44727",
    "user": "https://github.com/aghitza"
}
```

<a id='comment:1'>Comment 1:</a>
This is fixed by the spkg and patch at #6699.  I will put up a patch with a doctest here when #6699 gets merged.



---

archive/issue_comments_044728.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nA temporary workaround is to use sympy:\n\n```\nsage: integrate(1/x**3,x,1,infinity,algorithm=\"sympy\")\n1/2\nsage: integrate(1/x**10,x,1,infinity,algorithm=\"sympy\")\n1/9\n```",
    "created_at": "2009-09-10T01:27:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6420#issuecomment-44728",
    "user": "https://github.com/johnperry-math"
}
```

<a id='comment:2'>Comment 2:</a>
A temporary workaround is to use sympy:

```
sage: integrate(1/x**3,x,1,infinity,algorithm="sympy")
1/2
sage: integrate(1/x**10,x,1,infinity,algorithm="sympy")
1/9
```



---

archive/issue_comments_044729.json:
```json
{
    "body": "Author: **Karl-Dieter Crisman**",
    "created_at": "2009-09-29T14:50:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6420#issuecomment-44729",
    "user": "https://github.com/kcrisman"
}
```

Author: **Karl-Dieter Crisman**



---

archive/issue_events_069735.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2009-09-29T14:50:27Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/6420",
    "milestone_number": null,
    "milestone_title": "sage-4.1.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6420#event-69735"
}
```



---

archive/issue_events_069736.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2009-09-29T14:50:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/6420",
    "milestone_number": null,
    "milestone_title": "sage-4.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6420#event-69736"
}
```



---

archive/issue_comments_044730.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nPatch is now up.",
    "created_at": "2009-09-29T14:50:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6420#issuecomment-44730",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:3'>Comment 3:</a>
Patch is now up.



---

archive/issue_events_069737.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2009-10-04T00:30:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6420",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6420#event-69737"
}
```



---

archive/issue_events_069738.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2009-10-04T00:30:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6420",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6420#event-69738"
}
```



---

archive/issue_comments_044731.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nAttachment: **[trac_6420-integrate-one-over-cube.patch.gz](https://github.com/sagemath/sage/files/ticket6420/trac_6420-integrate-one-over-cube.patch.gz)**\n\nI updated the patch to remove some excess blank lines and to remove the \".. note::\" which didn't make sense.  Otherwise, your change is good by me.\n\nkcrisman, could you okay these changes and mark it as a positive review?",
    "created_at": "2009-10-05T04:57:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6420#issuecomment-44731",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:5'>Comment 5:</a>
Attachment: **[trac_6420-integrate-one-over-cube.patch.gz](https://github.com/sagemath/sage/files/ticket6420/trac_6420-integrate-one-over-cube.patch.gz)**

I updated the patch to remove some excess blank lines and to remove the ".. note::" which didn't make sense.  Otherwise, your change is good by me.

kcrisman, could you okay these changes and mark it as a positive review?



---

archive/issue_events_069739.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2009-10-05T12:58:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6420",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6420#event-69739"
}
```



---

archive/issue_events_069740.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2009-10-05T12:58:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6420",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6420#event-69740"
}
```



---

archive/issue_comments_044732.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nYup, those are fine.  I should have noticed that, actually, but was just fixing on the item in the ticket.  Strange that the comment was even still in there.\n\nIncidentally, I'm going to post on sage-devel about when to use ::, because just recently I remember a thread where it sounded like some doctests didn't happen if you didn't use it on a separate line (I encountered one recently in an `__init__` method), so it would be good to have that on record and easily searchable.",
    "created_at": "2009-10-05T12:58:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6420#issuecomment-44732",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:6'>Comment 6:</a>
Yup, those are fine.  I should have noticed that, actually, but was just fixing on the item in the ticket.  Strange that the comment was even still in there.

Incidentally, I'm going to post on sage-devel about when to use ::, because just recently I remember a thread where it sounded like some doctests didn't happen if you didn't use it on a separate line (I encountered one recently in an `__init__` method), so it would be good to have that on record and easily searchable.



---

archive/issue_comments_044733.json:
```json
{
    "body": "Reviewer: **Mike Hansen**",
    "created_at": "2009-10-05T12:58:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6420#issuecomment-44733",
    "user": "https://github.com/kcrisman"
}
```

Reviewer: **Mike Hansen**



---

archive/issue_comments_044734.json:
```json
{
    "body": "Merged: **sage-4.2.alpha0**",
    "created_at": "2009-10-15T07:07:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6420#issuecomment-44734",
    "user": "https://github.com/mwhansen"
}
```

Merged: **sage-4.2.alpha0**



---

archive/issue_events_069741.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-10-15T07:07:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6420",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6420#event-69741"
}
```



---

archive/issue_events_069742.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-10-15T07:07:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/6420",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6420#event-69742"
}
```
