# Issue 6741: Python Imaging Library interface

archive/issues_006741.json:
```json
{
    "body": "The attached patch implements several functions providing a simpler interface to the Python Imaging Library. For example, you can sharpen the image of an image on the internet you have the url of and save it to Sage's tmp subdirectory.\n\nApply:\n* [attachment:trac_6741-pil.patch\u200b]\n* [attachment:trac_6741_cleanup1.patch]\n\nAssignee: mabshoff\n\nWork_Issues: doc, font_manager\n\nBranch: u/chapoton/6741\n\nCommit: 3fd7a6efd69426e465a65f200971e073f4a71aaa\n\nIssue created by migration from https://trac.sagemath.org/ticket/6741\n\n",
    "created_at": "2009-08-13T23:15:11Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Python Imaging Library interface",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/6741",
    "user": "https://github.com/wdjoyner"
}
```
The attached patch implements several functions providing a simpler interface to the Python Imaging Library. For example, you can sharpen the image of an image on the internet you have the url of and save it to Sage's tmp subdirectory.

Apply:
* [attachment:trac_6741-pil.patchâ€‹]
* [attachment:trac_6741_cleanup1.patch]

Assignee: mabshoff

Work_Issues: doc, font_manager

Branch: u/chapoton/6741

Commit: 3fd7a6efd69426e465a65f200971e073f4a71aaa

Issue created by migration from https://trac.sagemath.org/ticket/6741





---

archive/issue_comments_055128.json:
```json
{
    "body": "Attachment [trac_6741-pil.patch](tarball://root/attachments/some-uuid/ticket6741/trac_6741-pil.patch) by @wdjoyner created at 2009-08-13 23:20:20\n\nrequires pil-1.1.6, applies to 4.1.1.rc2",
    "created_at": "2009-08-13T23:20:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6741#issuecomment-55128",
    "user": "https://github.com/wdjoyner"
}
```

Attachment [trac_6741-pil.patch](tarball://root/attachments/some-uuid/ticket6741/trac_6741-pil.patch) by @wdjoyner created at 2009-08-13 23:20:20

requires pil-1.1.6, applies to 4.1.1.rc2



---

archive/issue_comments_055129.json:
```json
{
    "body": "Changing component from interfaces to packages.",
    "created_at": "2009-08-18T17:45:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6741#issuecomment-55129",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

Changing component from interfaces to packages.



---

archive/issue_comments_055130.json:
```json
{
    "body": "Changing assignee from @williamstein to mabshoff.",
    "created_at": "2009-08-18T17:45:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6741#issuecomment-55130",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

Changing assignee from @williamstein to mabshoff.



---

archive/issue_comments_055131.json:
```json
{
    "body": "<a id='comment:4'></a>This [sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/caac9691d6fb0160) thread has a discussion about making PIL a standard spkg. The vote for doing so was carried out in that thread.",
    "created_at": "2009-08-18T17:47:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6741#issuecomment-55131",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

<a id='comment:4'></a>This [sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/caac9691d6fb0160) thread has a discussion about making PIL a standard spkg. The vote for doing so was carried out in that thread.



---

archive/issue_comments_055132.json:
```json
{
    "body": "<a id='comment:5'></a>This looks very nice.  However, the doctests write to SAGE_ROOT/tmp, which means that a normal user cannot run doctests on this file.  Isn't there somewhere else that we should write temporary data during a doctest?  Maybe using SAGE_TMP or something like that?",
    "created_at": "2009-09-17T09:55:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6741#issuecomment-55132",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:5'></a>This looks very nice.  However, the doctests write to SAGE_ROOT/tmp, which means that a normal user cannot run doctests on this file.  Isn't there somewhere else that we should write temporary data during a doctest?  Maybe using SAGE_TMP or something like that?



---

archive/issue_comments_055133.json:
```json
{
    "body": "<a id='comment:6'></a>I guess there isn't a SAGE_TMP.  How about a temporary directory under .sage?",
    "created_at": "2009-09-17T09:56:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6741#issuecomment-55133",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:6'></a>I guess there isn't a SAGE_TMP.  How about a temporary directory under .sage?



---

archive/issue_comments_055134.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [comment:6 jason]:\n> I guess there isn't a SAGE_TMP.  How about a temporary directory under .sage?\n\nYes.",
    "created_at": "2009-09-17T10:05:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6741#issuecomment-55134",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

<a id='comment:7'></a>Replying to [comment:6 jason]:
> I guess there isn't a SAGE_TMP.  How about a temporary directory under .sage?

Yes.



---

archive/issue_comments_055135.json:
```json
{
    "body": "<a id='comment:8'></a>Nice work; thanks for doing this!\n\nMarking as \"needs work\" for the following reasons:\n\n* Doctests which rely on internet should be marked \"optional - requires internet\"\n* image_convert should probably let me specify an output file name, or by default write in the current directory so that we can use it easily in the notebook (e.g., we convert something and it magically appears in the cell output).\n* someone should test this on a mac and then remove the note about it not being tested on a mac\n* stylistically, it looks like there is lots of duplicated code that opens files from the internet; maybe this could be refactored into a single function (and then used for image_convert as well)?",
    "created_at": "2009-09-22T15:21:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6741#issuecomment-55135",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:8'></a>Nice work; thanks for doing this!

Marking as "needs work" for the following reasons:

* Doctests which rely on internet should be marked "optional - requires internet"
* image_convert should probably let me specify an output file name, or by default write in the current directory so that we can use it easily in the notebook (e.g., we convert something and it magically appears in the cell output).
* someone should test this on a mac and then remove the note about it not being tested on a mac
* stylistically, it looks like there is lots of duplicated code that opens files from the internet; maybe this could be refactored into a single function (and then used for image_convert as well)?



---

archive/issue_comments_055136.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [comment:8 jason]:\n> Nice work; thanks for doing this!\n> \n> Marking as \"needs work\" for the following reasons:\n> \n\n\nArrgghh ...\nJust saw this now, going through old emails.\n\nI will try to work on these referee comments/suggestions now. It probably needs rebasing anyway.\nSorry for the late reply.",
    "created_at": "2010-01-04T03:52:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6741#issuecomment-55136",
    "user": "https://github.com/wdjoyner"
}
```

<a id='comment:9'></a>Replying to [comment:8 jason]:
> Nice work; thanks for doing this!
> 
> Marking as "needs work" for the following reasons:
> 


Arrgghh ...
Just saw this now, going through old emails.

I will try to work on these referee comments/suggestions now. It probably needs rebasing anyway.
Sorry for the late reply.



---

archive/issue_comments_055137.json:
```json
{
    "body": "<a id='comment:10'></a>Good news: it applies fine and does not need rebasing.\n\nBad news: Now I can't even get the code to work. I've tried on an imac (which requires some extra work to get libjpeg to install) and on an ubuntu machine. Probably I'm missing something obvious, but I don't know what it is.",
    "created_at": "2010-01-08T12:15:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6741#issuecomment-55137",
    "user": "https://github.com/wdjoyner"
}
```

<a id='comment:10'></a>Good news: it applies fine and does not need rebasing.

Bad news: Now I can't even get the code to work. I've tried on an imac (which requires some extra work to get libjpeg to install) and on an ubuntu machine. Probably I'm missing something obvious, but I don't know what it is.



---

archive/issue_events_015898.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/6741",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/6741#event-15898"
}
```



---

archive/issue_comments_055138.json:
```json
{
    "body": "<a id='comment:12'></a>Attachment [trac_6741_cleanup1.patch](tarball://root/attachments/some-uuid/ticket6741/trac_6741_cleanup1.patch) by @fchapoton created at 2013-08-22 20:11:42\n\nok, here is a cleanup patch.\n\nThere is an issue with fontmanager that I do not understand",
    "created_at": "2013-08-22T20:11:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6741#issuecomment-55138",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:12'></a>Attachment [trac_6741_cleanup1.patch](tarball://root/attachments/some-uuid/ticket6741/trac_6741_cleanup1.patch) by @fchapoton created at 2013-08-22 20:11:42

ok, here is a cleanup patch.

There is an issue with fontmanager that I do not understand



---

archive/issue_comments_055139.json:
```json
{
    "body": "<a id='comment:14'></a>Can one mark in some way the tests that depends on the presence of libpeg ?\n\nSomething like # optional libjpeg ?",
    "created_at": "2013-08-31T14:46:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6741#issuecomment-55139",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:14'></a>Can one mark in some way the tests that depends on the presence of libpeg ?

Something like # optional libjpeg ?



---

archive/issue_comments_055140.json:
```json
{
    "body": "<a id='comment:15'></a>New commits:",
    "created_at": "2014-01-08T09:00:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6741#issuecomment-55140",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:15'></a>New commits:



---

archive/issue_events_015899.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/6741",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/6741#event-15899"
}
```



---

archive/issue_events_015900.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/6741",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/6741#event-15900"
}
```



---

archive/issue_events_015901.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/6741",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/6741#event-15901"
}
```



---

archive/issue_events_015902.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/6741",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/6741#event-15902"
}
```



---

archive/issue_events_015903.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/6741",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/6741#event-15903"
}
```



---

archive/issue_events_015904.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/6741",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/6741#event-15904"
}
```



---

archive/issue_comments_055141.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-05-19T12:22:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6741#issuecomment-55141",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_055142.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-07-29T18:31:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6741#issuecomment-55142",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:
