# Issue 6892: change dollar signs to backticks

archive/issues_006892.json:
```json
{
    "assignees": [],
    "body": "In [a discussion on sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/8fa0d854b6928f2b?tvc=2), people thought it was a good idea to allow the use of dollar signs, not just backquotes, to delimit math in Sage docstrings.  The attached patch does this.  It does this by working with the autodoc extension to Sphinx: autodoc reads the docstring, which then gets processed by the new function `process_dollars`, which does various regular expression search-and-replacements.\n\nConsequences of this: if you want to use a literal dollar sign in a docstring, you have to escape it with a  backslash.  If you have some complicated math with lots of nested math/text constructions like \"\\text{blah $x=y$ blah}\", this might screw up.  It will handle one nesting, turning\n\n```\n$f(x) = \\text{zero if $x$ is prime}$\n```\ninto\n\n```\n`f(x) = \\text{zero if $x$ is prime}`\n```\nand leaving \n\n```\n`f(z) = \\text{two if $z$ is an integer}`\n```\nunchanged; these should be processed correctly by both the html and pdf documentation builders.\n\nThe patch also changes some docstrings: either fixing minor misformattings which I noticed while testing this, or fixing things which break (like a docstring with a math environment with a missing closing dollar sign) when dollar signs are converted to backquotes.\n\nSeems to work with Sphinx versions 0.5.1 (currently included in Sage) and 0.6.3 (see #6586).\n\n**Assignee:** @jhpalmieri\n\n**Author:** John Palmieri\n\n**Reviewer:** Mike Hansen\n\n**Merged:** sage-4.2.alpha0\n\nIssue created by migration from https://trac.sagemath.org/ticket/6892\n\n",
    "closed_at": "2009-10-16T04:49:03Z",
    "created_at": "2009-09-04T21:26:11Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20documentation",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "change dollar signs to backticks",
    "type": "issue",
    "updated_at": "2009-10-16T04:49:03Z",
    "url": "https://github.com/sagemath/sage/issues/6892",
    "user": "https://github.com/jhpalmieri"
}
```
In [a discussion on sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/8fa0d854b6928f2b?tvc=2), people thought it was a good idea to allow the use of dollar signs, not just backquotes, to delimit math in Sage docstrings.  The attached patch does this.  It does this by working with the autodoc extension to Sphinx: autodoc reads the docstring, which then gets processed by the new function `process_dollars`, which does various regular expression search-and-replacements.

Consequences of this: if you want to use a literal dollar sign in a docstring, you have to escape it with a  backslash.  If you have some complicated math with lots of nested math/text constructions like "\text{blah $x=y$ blah}", this might screw up.  It will handle one nesting, turning

```
$f(x) = \text{zero if $x$ is prime}$
```
into

```
`f(x) = \text{zero if $x$ is prime}`
```
and leaving 

```
`f(z) = \text{two if $z$ is an integer}`
```
unchanged; these should be processed correctly by both the html and pdf documentation builders.

The patch also changes some docstrings: either fixing minor misformattings which I noticed while testing this, or fixing things which break (like a docstring with a math environment with a missing closing dollar sign) when dollar signs are converted to backquotes.

Seems to work with Sphinx versions 0.5.1 (currently included in Sage) and 0.6.3 (see #6586).

**Assignee:** @jhpalmieri

**Author:** John Palmieri

**Reviewer:** Mike Hansen

**Merged:** sage-4.2.alpha0

Issue created by migration from https://trac.sagemath.org/ticket/6892





---

archive/issue_events_069629.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2009-09-04T21:26:11Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/6892",
    "milestone_number": null,
    "milestone_title": "sage-4.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6892#event-69629"
}
```



---

archive/issue_events_069630.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2009-09-04T21:26:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6892",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20documentation",
    "label_color": "08517b",
    "label_name": "component: documentation",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6892#event-69630"
}
```



---

archive/issue_events_069631.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2009-09-04T21:26:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6892",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6892#event-69631"
}
```



---

archive/issue_events_069632.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2009-09-04T21:26:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6892",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6892#event-69632"
}
```



---

archive/issue_events_069633.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2009-09-04T21:26:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6892",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6892#event-69633"
}
```



---

archive/issue_comments_050618.json:
```json
{
    "body": "**Attachment:** [trac_6892-dollars.patch.gz](https://github.com/sagemath/sage/files/ticket6892/trac_6892-dollars.patch.gz)",
    "created_at": "2009-09-04T21:26:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6892#issuecomment-50618",
    "user": "https://github.com/jhpalmieri"
}
```

**Attachment:** [trac_6892-dollars.patch.gz](https://github.com/sagemath/sage/files/ticket6892/trac_6892-dollars.patch.gz)



---

archive/issue_comments_050619.json:
```json
{
    "body": "minor rebase for 4.1.2.alpha1; tiny changes to conf.py and ambient_g0.py",
    "created_at": "2009-09-16T03:03:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6892#issuecomment-50619",
    "user": "https://github.com/dandrake"
}
```

minor rebase for 4.1.2.alpha1; tiny changes to conf.py and ambient_g0.py



---

archive/issue_comments_050620.json:
```json
{
    "body": "**Attachment:** [trac_6892-dollars-v2.patch.gz](https://github.com/sagemath/sage/files/ticket6892/trac_6892-dollars-v2.patch.gz)\n\n**Attachment:** [trac_6892-dollars-rebased.patch.gz](https://github.com/sagemath/sage/files/ticket6892/trac_6892-dollars-rebased.patch.gz)\n\nrebased against 4.1.2.alpha2, plus a little documentation",
    "created_at": "2009-09-22T03:01:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6892#issuecomment-50620",
    "user": "https://github.com/jhpalmieri"
}
```

**Attachment:** [trac_6892-dollars-v2.patch.gz](https://github.com/sagemath/sage/files/ticket6892/trac_6892-dollars-v2.patch.gz)

**Attachment:** [trac_6892-dollars-rebased.patch.gz](https://github.com/sagemath/sage/files/ticket6892/trac_6892-dollars-rebased.patch.gz)

rebased against 4.1.2.alpha2, plus a little documentation



---

archive/issue_comments_050621.json:
```json
{
    "body": "<a id='comment:1'></a>\nApply only trac_6892-dollars-rebased.patch.  This adds a little documentation in the developer's guide about using dollar signs instead of backticks.",
    "created_at": "2009-09-22T03:01:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6892#issuecomment-50621",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:1'></a>
Apply only trac_6892-dollars-rebased.patch.  This adds a little documentation in the developer's guide about using dollar signs instead of backticks.



---

archive/issue_comments_050622.json:
```json
{
    "body": "**Reviewer:** Mike Hansen",
    "created_at": "2009-10-05T07:35:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6892#issuecomment-50622",
    "user": "https://github.com/mwhansen"
}
```

**Reviewer:** Mike Hansen



---

archive/issue_comments_050623.json:
```json
{
    "body": "<a id='comment:2'></a>\nLooks good to me.",
    "created_at": "2009-10-05T07:35:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6892#issuecomment-50623",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:2'></a>
Looks good to me.



---

archive/issue_events_069634.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-10-16T04:49:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6892",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6892#event-69634"
}
```



---

archive/issue_events_069635.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-10-16T04:49:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/6892",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6892#event-69635"
}
```



---

archive/issue_comments_050624.json:
```json
{
    "body": "**Merged:** sage-4.2.alpha0",
    "created_at": "2009-10-16T04:49:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6892#issuecomment-50624",
    "user": "https://github.com/mwhansen"
}
```

**Merged:** sage-4.2.alpha0
