# Issue 6362: Singular and GCC 4.4

archive/issues_006362.json:
```json
{
    "assignees": [],
    "body": "singular is last package that don't compile with latest GCC 4.4 for me, it's because of use of strchr function, see GCC 4.4 [porting guide](http://gcc.gnu.org/gcc-4.4/porting_to.html) part \"Strict null-terminated sequence utilities\" - there is used\n\nchar* strchr(const char*, int)\n\nthat silently cast-away const, simple explicit cast to char* removes the error during compilation for me so it's trivial to fix. The strchr function in this form is used twice. \n\nI made spkg that's fixed, wasn't creating patches/spkg for Sage for some time so I ask for strict review even if it's trivial fix :) I tried to remember about everything with spkg creation but something could still slip. There is spkg: ~~[http://giniu.ravenlord.ws/singular-3-1-0-2-20090620.spkg](http://giniu.ravenlord.ws/singular-3-1-0-2-20090620.spkg)~~.\n\nUpdate:\n\nspkg merged with Martins version: ~~[http://giniu.ravenlord.ws/singular-3-1-0-4-20090620.spkg](http://giniu.ravenlord.ws/singular-3-1-0-4-20090620.spkg)~~, and the\nfixed one: http://giniu.ravenlord.ws/singular-3-1-0-4-20090703.spkg\n\nCC:  @malb\n\nComponent: **algebra**\n\nAuthor: **Andrzej Giniewicz, Martin Albrecht, Craig Citro**\n\nReviewer: **John Perry, Robert Miller**\n\nMerged: **sage-4.1.rc0**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/6362_\n\n",
    "closed_at": "2009-07-03T18:32:21Z",
    "created_at": "2009-06-20T08:22:16Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20algebra",
        "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Singular and GCC 4.4",
    "type": "issue",
    "updated_at": "2009-07-06T20:11:39Z",
    "url": "https://github.com/sagemath/sage/issues/6362",
    "user": "https://github.com/sagetrac-aginiewicz"
}
```
singular is last package that don't compile with latest GCC 4.4 for me, it's because of use of strchr function, see GCC 4.4 [porting guide](http://gcc.gnu.org/gcc-4.4/porting_to.html) part "Strict null-terminated sequence utilities" - there is used

char* strchr(const char*, int)

that silently cast-away const, simple explicit cast to char* removes the error during compilation for me so it's trivial to fix. The strchr function in this form is used twice. 

I made spkg that's fixed, wasn't creating patches/spkg for Sage for some time so I ask for strict review even if it's trivial fix :) I tried to remember about everything with spkg creation but something could still slip. There is spkg: ~~[http://giniu.ravenlord.ws/singular-3-1-0-2-20090620.spkg](http://giniu.ravenlord.ws/singular-3-1-0-2-20090620.spkg)~~.

Update:

spkg merged with Martins version: ~~[http://giniu.ravenlord.ws/singular-3-1-0-4-20090620.spkg](http://giniu.ravenlord.ws/singular-3-1-0-4-20090620.spkg)~~, and the
fixed one: http://giniu.ravenlord.ws/singular-3-1-0-4-20090703.spkg

CC:  @malb

Component: **algebra**

Author: **Andrzej Giniewicz, Martin Albrecht, Craig Citro**

Reviewer: **John Perry, Robert Miller**

Merged: **sage-4.1.rc0**

_Issue created by migration from https://trac.sagemath.org/ticket/6362_





---

archive/issue_events_076563.json:
```json
{
    "actor": "https://github.com/sagetrac-aginiewicz",
    "created_at": "2009-06-20T08:22:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "milestone_number": null,
    "milestone_title": "sage-4.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6362#event-76563"
}
```



---

archive/issue_events_076564.json:
```json
{
    "actor": "https://github.com/sagetrac-aginiewicz",
    "created_at": "2009-06-20T08:22:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "c: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6362#event-76564"
}
```



---

archive/issue_events_076565.json:
```json
{
    "actor": "https://github.com/sagetrac-aginiewicz",
    "created_at": "2009-06-20T08:22:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6362#event-76565"
}
```



---

archive/issue_events_076566.json:
```json
{
    "actor": "https://github.com/sagetrac-aginiewicz",
    "created_at": "2009-06-20T08:22:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6362#event-76566"
}
```



---

archive/issue_events_076567.json:
```json
{
    "actor": "https://github.com/sagetrac-aginiewicz",
    "created_at": "2009-06-20T08:22:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6362#event-76567"
}
```



---

archive/issue_comments_042554.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI'm adding Martin to the cc here, because I think he's going to be looking at the Singular spkg soon (for #6240).",
    "created_at": "2009-06-20T08:27:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6362#issuecomment-42554",
    "user": "https://github.com/craigcitro"
}
```

<div id="comment:1" align="right">comment:1</div>

I'm adding Martin to the cc here, because I think he's going to be looking at the Singular spkg soon (for #6240).



---

archive/issue_comments_042555.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI sent an email to singular@mathematik.uni-kl.de about this ticket as well.",
    "created_at": "2009-06-20T10:31:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6362#issuecomment-42555",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:2" align="right">comment:2</div>

I sent an email to singular@mathematik.uni-kl.de about this ticket as well.



---

archive/issue_comments_042556.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThe spkg allowed me to compile sage on my machine, and it appears to be working. What would constitute a strict test?",
    "created_at": "2009-06-21T22:21:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6362#issuecomment-42556",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:3" align="right">comment:3</div>

The spkg allowed me to compile sage on my machine, and it appears to be working. What would constitute a strict test?



---

archive/issue_comments_042557.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThere is problem that one cannot provide testcase... i.e. the issue is during compile time, if the compiler allows used syntax, that is casting away const trough strchr function, it still generates code that's safe because in this code the pointer isn't used in any malicious way, so if it compiles - with or without patch - one cannot tell the difference, probably even looking at assembler code. But on other hand, GCC 4.4 don't allow implicit const cast-away trough string manipulation functions (which is good thing in my opinion) so it fails to build without patch.",
    "created_at": "2009-06-21T22:39:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6362#issuecomment-42557",
    "user": "https://github.com/sagetrac-aginiewicz"
}
```

<div id="comment:4" align="right">comment:4</div>

There is problem that one cannot provide testcase... i.e. the issue is during compile time, if the compiler allows used syntax, that is casting away const trough strchr function, it still generates code that's safe because in this code the pointer isn't used in any malicious way, so if it compiles - with or without patch - one cannot tell the difference, probably even looking at assembler code. But on other hand, GCC 4.4 don't allow implicit const cast-away trough string manipulation functions (which is good thing in my opinion) so it fails to build without patch.



---

archive/issue_comments_042558.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI told upstream about this bug and they replied:\n\n```\nThanks for the patch - we agree with it\nand have integrated it into Singular.\n -- Hans Schoenemann\n```\n\nThat's a positive review from the singular project director.",
    "created_at": "2009-06-23T13:04:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6362#issuecomment-42558",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:5" align="right">comment:5</div>

I told upstream about this bug and they replied:

```
Thanks for the patch - we agree with it
and have integrated it into Singular.
 -- Hans Schoenemann
```

That's a positive review from the singular project director.



---

archive/issue_comments_042559.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nHmm... so this is positive review for patch, or we wait for upstream to fix it to not create too many patches?",
    "created_at": "2009-06-25T17:44:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6362#issuecomment-42559",
    "user": "https://github.com/sagetrac-aginiewicz"
}
```

<div id="comment:6" align="right">comment:6</div>

Hmm... so this is positive review for patch, or we wait for upstream to fix it to not create too many patches?



---

archive/issue_comments_042560.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nWe should patch it, but the next Singular SPKG needs a couple of other fixes applied (and updated to 3-1-0-4) this is I guess why it is taking so long.\n\nMy current attempt is here:\n\n  http://sage.math.washington.edu/home/malb/spkgs/singular-3-1-0-4-20090611.spkg\n\nIt needs a fix applied where the ring variables print without a space. Do you want to merge your patch with that SPKG?\n\nMartin",
    "created_at": "2009-06-25T17:57:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6362#issuecomment-42560",
    "user": "https://github.com/malb"
}
```

<div id="comment:7" align="right">comment:7</div>

We should patch it, but the next Singular SPKG needs a couple of other fixes applied (and updated to 3-1-0-4) this is I guess why it is taking so long.

My current attempt is here:

  http://sage.math.washington.edu/home/malb/spkgs/singular-3-1-0-4-20090611.spkg

It needs a fix applied where the ring variables print without a space. Do you want to merge your patch with that SPKG?

Martin



---

archive/issue_comments_042561.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nSure, I will try to merge tomorrow in my local copy",
    "created_at": "2009-06-25T20:14:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6362#issuecomment-42561",
    "user": "https://github.com/sagetrac-aginiewicz"
}
```

<div id="comment:8" align="right">comment:8</div>

Sure, I will try to merge tomorrow in my local copy



---

archive/issue_comments_042562.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nHmm... so fix for #6360 is no longer needed with 3-1-0-4? I ask because I noticed in your spkg fix for it is erased from mercurial history, i.e. the change by Craig from 19'th?",
    "created_at": "2009-06-26T18:16:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6362#issuecomment-42562",
    "user": "https://github.com/sagetrac-aginiewicz"
}
```

<div id="comment:9" align="right">comment:9</div>

Hmm... so fix for #6360 is no longer needed with 3-1-0-4? I ask because I noticed in your spkg fix for it is erased from mercurial history, i.e. the change by Craig from 19'th?



---

archive/issue_comments_042563.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nGood catch. It is still needed I just forgot to apply it!",
    "created_at": "2009-06-26T18:23:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6362#issuecomment-42563",
    "user": "https://github.com/malb"
}
```

<div id="comment:10" align="right">comment:10</div>

Good catch. It is still needed I just forgot to apply it!



---

archive/issue_comments_042564.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nWill you provide new version with this change (rebased on top of #6360?) or should I merge both to that gcc one? Sorry if this should be obvious, long break still have it's effects",
    "created_at": "2009-06-26T20:58:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6362#issuecomment-42564",
    "user": "https://github.com/sagetrac-aginiewicz"
}
```

<div id="comment:11" align="right">comment:11</div>

Will you provide new version with this change (rebased on top of #6360?) or should I merge both to that gcc one? Sorry if this should be obvious, long break still have it's effects



---

archive/issue_comments_042565.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nSorry, I was not very clear. It would be nice if you could re-merge it as I am in the middle of another project. If you can't get around to do it, I'll do it eventually.",
    "created_at": "2009-06-26T23:32:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6362#issuecomment-42565",
    "user": "https://github.com/malb"
}
```

<div id="comment:12" align="right">comment:12</div>

Sorry, I was not very clear. It would be nice if you could re-merge it as I am in the middle of another project. If you can't get around to do it, I'll do it eventually.



---

archive/issue_comments_042566.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nNo problem, I will take care of it then",
    "created_at": "2009-06-27T07:35:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6362#issuecomment-42566",
    "user": "https://github.com/sagetrac-aginiewicz"
}
```

<div id="comment:13" align="right">comment:13</div>

No problem, I will take care of it then



---

archive/issue_comments_042567.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI merged the changes with Martins version (rebased actually) - there is spkg - http://giniu.ravenlord.ws/singular-3-1-0-4-20090620.spkg",
    "created_at": "2009-06-27T08:44:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6362#issuecomment-42567",
    "user": "https://github.com/sagetrac-aginiewicz"
}
```

<div id="comment:14" align="right">comment:14</div>

I merged the changes with Martins version (rebased actually) - there is spkg - http://giniu.ravenlord.ws/singular-3-1-0-4-20090620.spkg



---

archive/issue_comments_042568.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,4 +4,8 @@\n \n that silently cast-away const, simple explicit cast to char* removes the error during compilation for me so it's trivial to fix. The strchr function in this form is used twice. \n \n-I made spkg that's fixed, wasn't creating patches/spkg for Sage for some time so I ask for strict review even if it's trivial fix :) I tried to remember about everything with spkg creation but something could still slip. There is spkg: [http://giniu.ravenlord.ws/singular-3-1-0-2-20090620.spkg](http://giniu.ravenlord.ws/singular-3-1-0-2-20090620.spkg).\n+I made spkg that's fixed, wasn't creating patches/spkg for Sage for some time so I ask for strict review even if it's trivial fix :) I tried to remember about everything with spkg creation but something could still slip. There is spkg: ~~[http://giniu.ravenlord.ws/singular-3-1-0-2-20090620.spkg](http://giniu.ravenlord.ws/singular-3-1-0-2-20090620.spkg)~~.\n+\n+Update:\n+\n+spkg merged with Martins version: http://giniu.ravenlord.ws/singular-3-1-0-4-20090620.spkg\n``````\n",
    "created_at": "2009-06-27T08:44:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6362#issuecomment-42568",
    "user": "https://github.com/sagetrac-aginiewicz"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,4 +4,8 @@
 
 that silently cast-away const, simple explicit cast to char* removes the error during compilation for me so it's trivial to fix. The strchr function in this form is used twice. 
 
-I made spkg that's fixed, wasn't creating patches/spkg for Sage for some time so I ask for strict review even if it's trivial fix :) I tried to remember about everything with spkg creation but something could still slip. There is spkg: [http://giniu.ravenlord.ws/singular-3-1-0-2-20090620.spkg](http://giniu.ravenlord.ws/singular-3-1-0-2-20090620.spkg).
+I made spkg that's fixed, wasn't creating patches/spkg for Sage for some time so I ask for strict review even if it's trivial fix :) I tried to remember about everything with spkg creation but something could still slip. There is spkg: ~~[http://giniu.ravenlord.ws/singular-3-1-0-2-20090620.spkg](http://giniu.ravenlord.ws/singular-3-1-0-2-20090620.spkg)~~.
+
+Update:
+
+spkg merged with Martins version: http://giniu.ravenlord.ws/singular-3-1-0-4-20090620.spkg
``````




---

archive/issue_events_076568.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-07-01T11:08:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6362#event-76568"
}
```



---

archive/issue_events_076569.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-07-01T11:08:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "label": "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p: 1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6362#event-76569"
}
```



---

archive/issue_comments_042569.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nI checked the changes (after some tutoring from was and jhpalmieri) against the default package included with 4.0.2, released 18 Jun and against the source included with the spkg.\n\nIs there an error in line 725 of patches/mpr_complex.cc? The original source file src/kernel/mpr_complex.cc contains\n\n```\n          sprintf(out,\"%s\",currRing->parameter[0]);\n```\nbut the patch contains\n\n```\n          sprintf(out,currRing->parameter[0]);\n```\nWhat happened to the \"%s\"? I thought that was required.\n\nEverything else looks fine.",
    "created_at": "2009-07-03T05:44:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6362#issuecomment-42569",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:16" align="right">comment:16</div>

I checked the changes (after some tutoring from was and jhpalmieri) against the default package included with 4.0.2, released 18 Jun and against the source included with the spkg.

Is there an error in line 725 of patches/mpr_complex.cc? The original source file src/kernel/mpr_complex.cc contains

```
          sprintf(out,"%s",currRing->parameter[0]);
```
but the patch contains

```
          sprintf(out,currRing->parameter[0]);
```
What happened to the "%s"? I thought that was required.

Everything else looks fine.



---

archive/issue_events_076570.json:
```json
{
    "actor": "https://github.com/sagetrac-aginiewicz",
    "created_at": "2009-07-03T12:27:32Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "title_is": "[with spkg, needs 5 minutes of work] Singular and GCC 4.4",
    "title_was": "Singular and GCC 4.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6362#event-76570"
}
```



---

archive/issue_comments_042570.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\n... it must have slipped by, i.e. it was probably change upstream that I didn't noticed when merge of mine and Martins packages. I will take care of it right now.",
    "created_at": "2009-07-03T12:27:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6362#issuecomment-42570",
    "user": "https://github.com/sagetrac-aginiewicz"
}
```

<div id="comment:17" align="right">comment:17</div>

... it must have slipped by, i.e. it was probably change upstream that I didn't noticed when merge of mine and Martins packages. I will take care of it right now.



---

archive/issue_comments_042571.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nOk, fixed it. New spkg is at http://giniu.ravenlord.ws/singular-3-1-0-4-20090703.spkg",
    "created_at": "2009-07-03T13:25:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6362#issuecomment-42571",
    "user": "https://github.com/sagetrac-aginiewicz"
}
```

<div id="comment:18" align="right">comment:18</div>

Ok, fixed it. New spkg is at http://giniu.ravenlord.ws/singular-3-1-0-4-20090703.spkg



---

archive/issue_comments_042572.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,4 +8,4 @@\n \n Update:\n \n-spkg merged with Martins version: http://giniu.ravenlord.ws/singular-3-1-0-4-20090620.spkg\n+spkg merged with Martins version: http://giniu.ravenlord.ws/singular-3-1-0-4-20090703.spkg\n``````\n",
    "created_at": "2009-07-03T13:25:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6362#issuecomment-42572",
    "user": "https://github.com/sagetrac-aginiewicz"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,4 +8,4 @@
 
 Update:
 
-spkg merged with Martins version: http://giniu.ravenlord.ws/singular-3-1-0-4-20090620.spkg
+spkg merged with Martins version: http://giniu.ravenlord.ws/singular-3-1-0-4-20090703.spkg
``````




---

archive/issue_events_076571.json:
```json
{
    "actor": "https://github.com/sagetrac-aginiewicz",
    "created_at": "2009-07-03T13:25:29Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "title_is": "Singular and GCC 4.4",
    "title_was": "[with spkg, needs 5 minutes of work] Singular and GCC 4.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6362#event-76571"
}
```



---

archive/issue_events_076572.json:
```json
{
    "actor": "https://github.com/sagetrac-aginiewicz",
    "created_at": "2009-07-03T13:25:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6362#event-76572"
}
```



---

archive/issue_comments_042573.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,4 +8,4 @@\n \n Update:\n \n-spkg merged with Martins version: http://giniu.ravenlord.ws/singular-3-1-0-4-20090703.spkg\n+spkg merged with Martins version: http://giniu.ravenlord.ws/singular-3-1-0-4-20090620.spkg\n``````\n",
    "created_at": "2009-07-03T15:00:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6362#issuecomment-42573",
    "user": "https://github.com/johnperry-math"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,4 +8,4 @@
 
 Update:
 
-spkg merged with Martins version: http://giniu.ravenlord.ws/singular-3-1-0-4-20090703.spkg
+spkg merged with Martins version: http://giniu.ravenlord.ws/singular-3-1-0-4-20090620.spkg
``````




---

archive/issue_comments_042574.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nLooks good to me.",
    "created_at": "2009-07-03T15:00:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6362#issuecomment-42574",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:19" align="right">comment:19</div>

Looks good to me.



---

archive/issue_events_076573.json:
```json
{
    "actor": "https://github.com/johnperry-math",
    "created_at": "2009-07-03T15:00:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6362#event-76573"
}
```



---

archive/issue_events_076574.json:
```json
{
    "actor": "https://github.com/johnperry-math",
    "created_at": "2009-07-03T15:00:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6362#event-76574"
}
```



---

archive/issue_comments_042575.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nFixed description in ticked to make sure which one is latest, as with Johns review link to spkg got reverted to not latest version.",
    "created_at": "2009-07-03T15:28:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6362#issuecomment-42575",
    "user": "https://github.com/sagetrac-aginiewicz"
}
```

<div id="comment:20" align="right">comment:20</div>

Fixed description in ticked to make sure which one is latest, as with Johns review link to spkg got reverted to not latest version.



---

archive/issue_comments_042576.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,4 +8,5 @@\n \n Update:\n \n-spkg merged with Martins version: http://giniu.ravenlord.ws/singular-3-1-0-4-20090620.spkg\n+spkg merged with Martins version: ~~[http://giniu.ravenlord.ws/singular-3-1-0-4-20090620.spkg](http://giniu.ravenlord.ws/singular-3-1-0-4-20090620.spkg)~~, and the\n+fixed one: http://giniu.ravenlord.ws/singular-3-1-0-4-20090703.spkg\n``````\n",
    "created_at": "2009-07-03T15:28:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6362#issuecomment-42576",
    "user": "https://github.com/sagetrac-aginiewicz"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,4 +8,5 @@
 
 Update:
 
-spkg merged with Martins version: http://giniu.ravenlord.ws/singular-3-1-0-4-20090620.spkg
+spkg merged with Martins version: ~~[http://giniu.ravenlord.ws/singular-3-1-0-4-20090620.spkg](http://giniu.ravenlord.ws/singular-3-1-0-4-20090620.spkg)~~, and the
+fixed one: http://giniu.ravenlord.ws/singular-3-1-0-4-20090703.spkg
``````




---

archive/issue_events_076575.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2009-07-03T16:20:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6362#event-76575"
}
```



---

archive/issue_events_076576.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2009-07-03T16:20:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6362#event-76576"
}
```



---

archive/issue_comments_042577.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nThe spkg causes several doctest failures when built on sage-4.1.alpha3:\n\n```\n        sage -t -long devel/sage/sage/rings/quotient_ring.py # 1 doctests failed\n        sage -t -long devel/sage/sage/rings/quotient_ring_element.py # 1 doctests failed\n        sage -t -long devel/sage/sage/rings/polynomial/term_order.py # 1 doctests failed\n        sage -t -long devel/sage/sage/rings/polynomial/polynomial_singular_interface.py # 6 doctests failed\n        sage -t -long devel/sage/sage/rings/polynomial/pbori.pyx # 1 doctests failed\n        sage -t -long devel/sage/sage/rings/polynomial/multi_polynomial_libsingular.pyx # 11 doctests failed\n        sage -t -long devel/sage/sage/interfaces/singular.py # 10 doctests failed\n```\n\nThese all seem to be just from the way Singular is printing things, e.g.:\n\n```\n**********************************************************************\nFile \"/space/rlm/sage-4.1.alpha3/devel/sage-main/sage/interfaces/singular.py\", line 975:\n    sage: singular.current_ring()\nExpected:\n    //   characteristic : 127\n    //   number of vars : 3\n    //        block   1 : ordering rp\n    //                  : names    x y z\n    //        block   2 : ordering C\nGot:\n    //   characteristic : 127\n    //   number of vars : 3\n    //        block   1 : ordering rp\n    //                  : names    xyz\n    //        block   2 : ordering C\n**********************************************************************\n```\n\nI assume this is nothing major. If someone wants to post a patch, I will gladly finish the review.",
    "created_at": "2009-07-03T16:20:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6362#issuecomment-42577",
    "user": "https://github.com/rlmill"
}
```

<div id="comment:21" align="right">comment:21</div>

The spkg causes several doctest failures when built on sage-4.1.alpha3:

```
        sage -t -long devel/sage/sage/rings/quotient_ring.py # 1 doctests failed
        sage -t -long devel/sage/sage/rings/quotient_ring_element.py # 1 doctests failed
        sage -t -long devel/sage/sage/rings/polynomial/term_order.py # 1 doctests failed
        sage -t -long devel/sage/sage/rings/polynomial/polynomial_singular_interface.py # 6 doctests failed
        sage -t -long devel/sage/sage/rings/polynomial/pbori.pyx # 1 doctests failed
        sage -t -long devel/sage/sage/rings/polynomial/multi_polynomial_libsingular.pyx # 11 doctests failed
        sage -t -long devel/sage/sage/interfaces/singular.py # 10 doctests failed
```

These all seem to be just from the way Singular is printing things, e.g.:

```
**********************************************************************
File "/space/rlm/sage-4.1.alpha3/devel/sage-main/sage/interfaces/singular.py", line 975:
    sage: singular.current_ring()
Expected:
    //   characteristic : 127
    //   number of vars : 3
    //        block   1 : ordering rp
    //                  : names    x y z
    //        block   2 : ordering C
Got:
    //   characteristic : 127
    //   number of vars : 3
    //        block   1 : ordering rp
    //                  : names    xyz
    //        block   2 : ordering C
**********************************************************************
```

I assume this is nothing major. If someone wants to post a patch, I will gladly finish the review.



---

archive/issue_comments_042578.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nHmm... this must be what Martin was talking about with his spkg in [comment 7](https://github.com/sagemath/sage/issues/6362#comment:7) above... will look into it right now",
    "created_at": "2009-07-03T16:37:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6362#issuecomment-42578",
    "user": "https://github.com/sagetrac-aginiewicz"
}
```

<div id="comment:22" align="right">comment:22</div>

Hmm... this must be what Martin was talking about with his spkg in [comment 7](https://github.com/sagemath/sage/issues/6362#comment:7) above... will look into it right now



---

archive/issue_comments_042579.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nOk, I found that upstream changed in kernel/ring.cc:370 the \"Print(\"%s \",r->names[i]);\" into \"PrintS(r->names[i]);\", I reverted the change and now building/testing. Will post fixed spkg just as it finishes",
    "created_at": "2009-07-03T17:01:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6362#issuecomment-42579",
    "user": "https://github.com/sagetrac-aginiewicz"
}
```

<div id="comment:23" align="right">comment:23</div>

Ok, I found that upstream changed in kernel/ring.cc:370 the "Print("%s ",r->names[i]);" into "PrintS(r->names[i]);", I reverted the change and now building/testing. Will post fixed spkg just as it finishes



---

archive/issue_events_076577.json:
```json
{
    "actor": "https://github.com/sagetrac-aginiewicz",
    "created_at": "2009-07-03T17:31:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6362#event-76577"
}
```



---

archive/issue_events_076578.json:
```json
{
    "actor": "https://github.com/sagetrac-aginiewicz",
    "created_at": "2009-07-03T17:31:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6362#event-76578"
}
```



---

archive/issue_comments_042580.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nFixed, thanks for report. I replaced the file at http://giniu.ravenlord.ws/singular-3-1-0-4-20090703.spkg with new version.",
    "created_at": "2009-07-03T17:31:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6362#issuecomment-42580",
    "user": "https://github.com/sagetrac-aginiewicz"
}
```

<div id="comment:24" align="right">comment:24</div>

Fixed, thanks for report. I replaced the file at http://giniu.ravenlord.ws/singular-3-1-0-4-20090703.spkg with new version.



---

archive/issue_comments_042581.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nWouldn't it make more sense to not change things upstream, and just fix the doctests?",
    "created_at": "2009-07-03T17:33:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6362#issuecomment-42581",
    "user": "https://github.com/rlmill"
}
```

<div id="comment:25" align="right">comment:25</div>

Wouldn't it make more sense to not change things upstream, and just fix the doctests?



---

archive/issue_comments_042582.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nI guess the change looks like it wasn't intended, they massively changed Print(\"%s\", ...) (without space after %s) and Print(...) into PrintS(...), printing variable names without spaces or any other means of separation between them doesn't seem like something anyone wants...\n\nalso, what about:\n\n```\nS = singular.ring('real', '(xx,yy)', 'lp')\n```\nvs\n\n```\nR = singular.ring('real', '(x,xyy)', 'lp')\n```\nthat looks same when variables are printed without separation?",
    "created_at": "2009-07-03T17:39:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6362#issuecomment-42582",
    "user": "https://github.com/sagetrac-aginiewicz"
}
```

<div id="comment:26" align="right">comment:26</div>

I guess the change looks like it wasn't intended, they massively changed Print("%s", ...) (without space after %s) and Print(...) into PrintS(...), printing variable names without spaces or any other means of separation between them doesn't seem like something anyone wants...

also, what about:

```
S = singular.ring('real', '(xx,yy)', 'lp')
```
vs

```
R = singular.ring('real', '(x,xyy)', 'lp')
```
that looks same when variables are printed without separation?



---

archive/issue_comments_042583.json:
```json
{
    "body": "Author: **Andrzej Giniewicz, Martin Albrecht, Craig Citro**",
    "created_at": "2009-07-03T18:32:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6362#issuecomment-42583",
    "user": "https://github.com/rlmill"
}
```

Author: **Andrzej Giniewicz, Martin Albrecht, Craig Citro**



---

archive/issue_comments_042584.json:
```json
{
    "body": "Merged: **sage-4.1.rc0**",
    "created_at": "2009-07-03T18:32:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6362#issuecomment-42584",
    "user": "https://github.com/rlmill"
}
```

Merged: **sage-4.1.rc0**



---

archive/issue_events_076579.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2009-07-03T18:32:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6362#event-76579"
}
```



---

archive/issue_events_076580.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2009-07-03T18:32:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6362#event-76580"
}
```



---

archive/issue_events_076581.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2009-07-03T18:32:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6362#event-76581"
}
```



---

archive/issue_comments_042585.json:
```json
{
    "body": "Reviewer: **John Perry, Robert Miller**",
    "created_at": "2009-07-03T18:32:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6362#issuecomment-42585",
    "user": "https://github.com/rlmill"
}
```

Reviewer: **John Perry, Robert Miller**



---

archive/issue_comments_042586.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@sagetrac-aginiewicz](#comment:26):\n> I guess the change looks like it wasn't intended\n\nIndeed, I talked to upstream about it and they consider this a bug (which they fixed in CVS).",
    "created_at": "2009-07-04T13:23:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6362#issuecomment-42586",
    "user": "https://github.com/malb"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@sagetrac-aginiewicz](#comment:26):
> I guess the change looks like it wasn't intended

Indeed, I talked to upstream about it and they consider this a bug (which they fixed in CVS).



---

archive/issue_comments_042587.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nAs contained in Sage-4.1.rc0, singular-3-1-0-4-20090703.spkg does not even build on OS X, neither 10.4 nor 10.5. Changing the line 201 in /src/factory/GNUmakefile.in:\n\n```\nfactoryobj :=   $(factorysrc:%.cc=%.o) $(factorysrc:%.y=%.o)\n```\ninto the following two lines:\n\n```\nfactoryobj :=   $(factorysrc:%.cc=%.o)\nfactoryobj :=   $(factoryobj:%.y=%.o)\n```\nmade the resulting Singular spkg build on OS X 10.4. But after installing it into Sage-4.1.rc0, Sage doesn't even start, it fails with:\n\n```\nImportError: dlopen(/Users/Shared/sage/sage-4.1.rc0/local/lib/python2.6/site-packages/sage/rings/polynomial/multi_polynomial_libsingular.so, 2): Symbol not found: ___eprintf\n  Referenced from: /Users/Shared/sage/sage-4.1.rc0/local/lib//libsingular.dylib\n  Expected in: dynamic lookup\n```\nThis might be due to the fact that I had dropped in the 3.1.0.2 Singular spkg before, so I am re-running the build from the start. (I doubt that it'll help, but let's see.)\n\nFor the record, skipping through the install logs, I spotted another error (this time \"copy'n'paste\") in the Singular 3.1.0.4 build scripts. In /src/libfac/Makefile.in, the two identical lines 157/158 read:\n\n```\n\t-$(RANLIB) ${libdir}/libsingfac_g.a\n\t-$(RANLIB) ${libdir}/libsingfac_g.a\n```\nand it is obvious from the surrounding lines, that the line 158 should end with \"..._p.a\" instead of \"..._g.a\".\n\n@mantepse:\nWould you please report the findings so far upstream?",
    "created_at": "2009-07-06T19:38:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6362#issuecomment-42587",
    "user": "https://github.com/sagetrac-GeorgSWeber"
}
```

<div id="comment:29" align="right">comment:29</div>

As contained in Sage-4.1.rc0, singular-3-1-0-4-20090703.spkg does not even build on OS X, neither 10.4 nor 10.5. Changing the line 201 in /src/factory/GNUmakefile.in:

```
factoryobj :=   $(factorysrc:%.cc=%.o) $(factorysrc:%.y=%.o)
```
into the following two lines:

```
factoryobj :=   $(factorysrc:%.cc=%.o)
factoryobj :=   $(factoryobj:%.y=%.o)
```
made the resulting Singular spkg build on OS X 10.4. But after installing it into Sage-4.1.rc0, Sage doesn't even start, it fails with:

```
ImportError: dlopen(/Users/Shared/sage/sage-4.1.rc0/local/lib/python2.6/site-packages/sage/rings/polynomial/multi_polynomial_libsingular.so, 2): Symbol not found: ___eprintf
  Referenced from: /Users/Shared/sage/sage-4.1.rc0/local/lib//libsingular.dylib
  Expected in: dynamic lookup
```
This might be due to the fact that I had dropped in the 3.1.0.2 Singular spkg before, so I am re-running the build from the start. (I doubt that it'll help, but let's see.)

For the record, skipping through the install logs, I spotted another error (this time "copy'n'paste") in the Singular 3.1.0.4 build scripts. In /src/libfac/Makefile.in, the two identical lines 157/158 read:

```
	-$(RANLIB) ${libdir}/libsingfac_g.a
	-$(RANLIB) ${libdir}/libsingfac_g.a
```
and it is obvious from the surrounding lines, that the line 158 should end with "..._p.a" instead of "..._g.a".

@mantepse:
Would you please report the findings so far upstream?



---

archive/issue_comments_042588.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@sagetrac-GeorgSWeber](#comment:29):\n> As contained in Sage-4.1.rc0, singular-3-1-0-4-20090703.spkg does not even build on OS X, neither 10.4 nor 10.5. Changing the line 201 in /src/factory/GNUmakefile.in:\n> \n> ```\n> factoryobj :=   $(factorysrc:%.cc=%.o) $(factorysrc:%.y=%.o)\n> ```\n> into the following two lines:\n> \n> ```\n> factoryobj :=   $(factorysrc:%.cc=%.o)\n> factoryobj :=   $(factoryobj:%.y=%.o)\n> ```\n> made the resulting Singular spkg build on OS X 10.4. But after installing it into Sage-4.1.rc0, Sage doesn't even start, it fails with:\n> \n> ```\n> ImportError: dlopen(/Users/Shared/sage/sage-4.1.rc0/local/lib/python2.6/site-packages/sage/rings/polynomial/multi_polynomial_libsingular.so, 2): Symbol not found: ___eprintf\n>   Referenced from: /Users/Shared/sage/sage-4.1.rc0/local/lib//libsingular.dylib\n>   Expected in: dynamic lookup\n> ```\n> This might be due to the fact that I had dropped in the 3.1.0.2 Singular spkg before, so I am re-running the build from the start. (I doubt that it'll help, but let's see.)\n> \n> For the record, skipping through the install logs, I spotted another error (this time \"copy'n'paste\") in the Singular 3.1.0.4 build scripts. In /src/libfac/Makefile.in, the two identical lines 157/158 read:\n> \n> ```\n> \t-$(RANLIB) ${libdir}/libsingfac_g.a\n> \t-$(RANLIB) ${libdir}/libsingfac_g.a\n> ```\n> and it is obvious from the surrounding lines, that the line 158 should end with \"..._p.a\" instead of \"..._g.a\".\n> \n> @mantepse:\n> Would you please report the findings so far upstream?\n\nOh, that's something already... but anyway, if I can suggest something, maybe [#6470](https://github.com/sagemath/sage/issues/6470) would be better for continuation of this (closed) ticket? It will be better exposed that way I think",
    "created_at": "2009-07-06T19:50:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6362#issuecomment-42588",
    "user": "https://github.com/sagetrac-aginiewicz"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@sagetrac-GeorgSWeber](#comment:29):
> As contained in Sage-4.1.rc0, singular-3-1-0-4-20090703.spkg does not even build on OS X, neither 10.4 nor 10.5. Changing the line 201 in /src/factory/GNUmakefile.in:
> 
> ```
> factoryobj :=   $(factorysrc:%.cc=%.o) $(factorysrc:%.y=%.o)
> ```
> into the following two lines:
> 
> ```
> factoryobj :=   $(factorysrc:%.cc=%.o)
> factoryobj :=   $(factoryobj:%.y=%.o)
> ```
> made the resulting Singular spkg build on OS X 10.4. But after installing it into Sage-4.1.rc0, Sage doesn't even start, it fails with:
> 
> ```
> ImportError: dlopen(/Users/Shared/sage/sage-4.1.rc0/local/lib/python2.6/site-packages/sage/rings/polynomial/multi_polynomial_libsingular.so, 2): Symbol not found: ___eprintf
>   Referenced from: /Users/Shared/sage/sage-4.1.rc0/local/lib//libsingular.dylib
>   Expected in: dynamic lookup
> ```
> This might be due to the fact that I had dropped in the 3.1.0.2 Singular spkg before, so I am re-running the build from the start. (I doubt that it'll help, but let's see.)
> 
> For the record, skipping through the install logs, I spotted another error (this time "copy'n'paste") in the Singular 3.1.0.4 build scripts. In /src/libfac/Makefile.in, the two identical lines 157/158 read:
> 
> ```
> 	-$(RANLIB) ${libdir}/libsingfac_g.a
> 	-$(RANLIB) ${libdir}/libsingfac_g.a
> ```
> and it is obvious from the surrounding lines, that the line 158 should end with "..._p.a" instead of "..._g.a".
> 
> @mantepse:
> Would you please report the findings so far upstream?

Oh, that's something already... but anyway, if I can suggest something, maybe [#6470](https://github.com/sagemath/sage/issues/6470) would be better for continuation of this (closed) ticket? It will be better exposed that way I think



---

archive/issue_comments_042589.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nYes, let's continue at #6470. Thanks for pointing out to me the new ticket!\n\nCheers,\ngsw",
    "created_at": "2009-07-06T20:11:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6362",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6362#issuecomment-42589",
    "user": "https://github.com/sagetrac-GeorgSWeber"
}
```

<div id="comment:31" align="right">comment:31</div>

Yes, let's continue at #6470. Thanks for pointing out to me the new ticket!

Cheers,
gsw
