# Issue 6369: the sage cleaner should kill all notebook servers if sage that spawned them is killed

archive/issues_006369.json:
```json
{
    "body": "Try this:\n\n1. `sage -notebook foo`\n\n2. Find the pid of the sage -notebook process with `ps ax |grep \"sage -notebook\"`\n\n3. Kill that process with `kill -9 [pid]`\n\n4. The notebook server is still going.  And now the only way to kill it is with `ps ax |grep tracd` and start killing things until you hit the right one.\n\nSince people, especially new sage users, often kill the notebook server by, e.g., clicking kill in a terminal or some other silly means, it would be much better if the sage-cleaner could at least step in and kill the notebook server, so it gets shut down cleanly (saving its state), and doesn't stop the notebook from running in the future (if it is always running, it can't run again), hence confusing users.\n\nTo do all this is probably as simple as calling one little register function in sage.misc.cleaner.\n\nAssignee: boothby\n\nResolution: invalid\n\nIssue created by migration from https://trac.sagemath.org/ticket/6369\n\n",
    "closed_at": "2020-03-29T02:13:09Z",
    "created_at": "2009-06-20T15:34:43Z",
    "labels": [
        "component: notebook",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "the sage cleaner should kill all notebook servers if sage that spawned them is killed",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/6369",
    "user": "https://github.com/williamstein"
}
```
Try this:

1. `sage -notebook foo`

2. Find the pid of the sage -notebook process with `ps ax |grep "sage -notebook"`

3. Kill that process with `kill -9 [pid]`

4. The notebook server is still going.  And now the only way to kill it is with `ps ax |grep tracd` and start killing things until you hit the right one.

Since people, especially new sage users, often kill the notebook server by, e.g., clicking kill in a terminal or some other silly means, it would be much better if the sage-cleaner could at least step in and kill the notebook server, so it gets shut down cleanly (saving its state), and doesn't stop the notebook from running in the future (if it is always running, it can't run again), hence confusing users.

To do all this is probably as simple as calling one little register function in sage.misc.cleaner.

Assignee: boothby

Resolution: invalid

Issue created by migration from https://trac.sagemath.org/ticket/6369





---

archive/issue_comments_050845.json:
```json
{
    "body": "<a id='comment:2'></a>This seems to be fixed now. `kill [pid]` kills the notebook as well. SIG_KILL doesn't seem like it will allow sage-cleaner to kill the notebook since it will be killed immediately. Confirm and close?",
    "created_at": "2010-01-19T07:06:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6369#issuecomment-50845",
    "user": "https://github.com/TimDumol"
}
```

<a id='comment:2'></a>This seems to be fixed now. `kill [pid]` kills the notebook as well. SIG_KILL doesn't seem like it will allow sage-cleaner to kill the notebook since it will be killed immediately. Confirm and close?



---

archive/issue_events_014988.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/6369",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/6369#event-14988"
}
```



---

archive/issue_events_014989.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/6369",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/6369#event-14989"
}
```



---

archive/issue_events_014990.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/6369",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/6369#event-14990"
}
```



---

archive/issue_events_014991.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/6369",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/6369#event-14991"
}
```



---

archive/issue_events_014992.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/6369",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/6369#event-14992"
}
```



---

archive/issue_events_014993.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/6369",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/6369#event-14993"
}
```



---

archive/issue_events_014994.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/6369",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/6369#event-14994"
}
```



---

archive/issue_comments_050846.json:
```json
{
    "body": "<a id='comment:8'></a>This definitely kills the process but also definitely keeps the server going!  (And a number of other processes as well.)",
    "created_at": "2014-12-10T19:21:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6369#issuecomment-50846",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:8'></a>This definitely kills the process but also definitely keeps the server going!  (And a number of other processes as well.)



---

archive/issue_comments_050847.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2020-03-29T02:13:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6369#issuecomment-50847",
    "user": "https://trac.sagemath.org/admin/accounts/users/boothby"
}
```

Resolution: invalid



---

archive/issue_comments_050848.json:
```json
{
    "body": "<a id='comment:9'></a>Closing deprecated notebook tickets",
    "created_at": "2020-03-29T02:13:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6369#issuecomment-50848",
    "user": "https://trac.sagemath.org/admin/accounts/users/boothby"
}
```

<a id='comment:9'></a>Closing deprecated notebook tickets



---

archive/issue_events_014995.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/boothby",
    "created_at": "2020-03-29T02:13:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/6369",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/6369#event-14995"
}
```
