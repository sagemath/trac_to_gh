# Issue 6044: [with patch, positive review] Enhanced reduction modulo ideals of number fields

archive/issues_006044.json:
```json
{
    "body": "1. Modify \"residues\" function so that it returns a canonical set of coset representatives.\n\n2. New \"reduce\" function for number field ideals that returns the canonical reduced representative of a given integral element: I.reduce(f) is an element of the set of representatives returned by I.residues(). \n\n3. Have \"inverse_mod\" working for integral elements of a number field without having to coerce to the ring of integers (using existing  functionality for order elements)\n\n\nPatch based on 3.4.2 to follow soon.\n\nAssignee: somebody\n\nCC:  @JohnCremona\n\nKeywords: number fields, ideals\n\nResolution: fixed\n\nAuthor: Maite Aranes\n\nReviewer: John Cremona, David Loeffler\n\nMerged: 4.0.2.alpha0\n\nIssue created by migration from https://trac.sagemath.org/ticket/6044\n\n",
    "closed_at": "2009-06-13T20:46:05Z",
    "created_at": "2009-05-15T09:24:14Z",
    "labels": [
        "component: number theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.0.2",
    "title": "[with patch, positive review] Enhanced reduction modulo ideals of number fields",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/6044",
    "user": "https://trac.sagemath.org/admin/accounts/users/mtaranes"
}
```
1. Modify "residues" function so that it returns a canonical set of coset representatives.

2. New "reduce" function for number field ideals that returns the canonical reduced representative of a given integral element: I.reduce(f) is an element of the set of representatives returned by I.residues(). 

3. Have "inverse_mod" working for integral elements of a number field without having to coerce to the ring of integers (using existing  functionality for order elements)


Patch based on 3.4.2 to follow soon.

Assignee: somebody

CC:  @JohnCremona

Keywords: number fields, ideals

Resolution: fixed

Author: Maite Aranes

Reviewer: John Cremona, David Loeffler

Merged: 4.0.2.alpha0

Issue created by migration from https://trac.sagemath.org/ticket/6044





---

archive/issue_comments_053170.json:
```json
{
    "body": "<a id='comment:1'></a>This is unlikely to make it into Sage 4.0, so bumping it to 4.0.1.\n\nCheers,\n\nMichael",
    "created_at": "2009-05-15T14:47:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6044#issuecomment-53170",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:1'></a>This is unlikely to make it into Sage 4.0, so bumping it to 4.0.1.

Cheers,

Michael



---

archive/issue_events_014194.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2009-05-15T14:47:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/6044",
    "milestone": "sage-4.0.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/6044#event-14194"
}
```



---

archive/issue_comments_053171.json:
```json
{
    "body": "<a id='comment:2'></a>Replying to [mabshoff](#comment%3A1):\n> This is unlikely to make it into Sage 4.0, so bumping it to 4.0.1.\n> \n> Cheers,\n> \n> Michael\n\nNo problem, though it is likely to have been reviewed within a day or two!",
    "created_at": "2009-05-15T14:52:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6044#issuecomment-53171",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:2'></a>Replying to [mabshoff](#comment%3A1):
> This is unlikely to make it into Sage 4.0, so bumping it to 4.0.1.
> 
> Cheers,
> 
> Michael

No problem, though it is likely to have been reviewed within a day or two!



---

archive/issue_comments_053172.json:
```json
{
    "body": "<a id='comment:3'></a>Attachment [trac_6044.patch](tarball://root/attachments/some-uuid/ticket6044/trac_6044.patch) by mtaranes created at 2009-05-16 09:08:57\n\nHere is the patch, with the new functions, etc, and corrections for the docstrings that were affected by the change in the 'residues' function.",
    "created_at": "2009-05-16T09:08:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6044#issuecomment-53172",
    "user": "https://trac.sagemath.org/admin/accounts/users/mtaranes"
}
```

<a id='comment:3'></a>Attachment [trac_6044.patch](tarball://root/attachments/some-uuid/ticket6044/trac_6044.patch) by mtaranes created at 2009-05-16 09:08:57

Here is the patch, with the new functions, etc, and corrections for the docstrings that were affected by the change in the 'residues' function.



---

archive/issue_comments_053173.json:
```json
{
    "body": "Attachment [trac_6044_review.patch](tarball://root/attachments/some-uuid/ticket6044/trac_6044_review.patch) by @JohnCremona created at 2009-05-20 11:54:23",
    "created_at": "2009-05-20T11:54:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6044#issuecomment-53173",
    "user": "https://github.com/JohnCremona"
}
```

Attachment [trac_6044_review.patch](tarball://root/attachments/some-uuid/ticket6044/trac_6044_review.patch) by @JohnCremona created at 2009-05-20 11:54:23



---

archive/issue_comments_053174.json:
```json
{
    "body": "<a id='comment:4'></a>The patch applies fine to 4.0.alpha0, and all tests in sage/rings/number_field pass.\n\nThere are some small glitches in the docstrings:  in inverse_mod() in the first line, N should be I.  In reduce(), there is a formatting problem which I think would go away if a space is inserted after the second ` in `I`=self, and later on the single backquotes aroung small_residue should be double.  Ans some small indentation issues (which aer oly seen as problematical when docbuild is used).\n\nI fixed these things in the review patch (which also fixes a few minor documentation issues I noticed that are nothing to do with this ticket as such), but someone else should look at this too.",
    "created_at": "2009-05-20T11:55:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6044#issuecomment-53174",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:4'></a>The patch applies fine to 4.0.alpha0, and all tests in sage/rings/number_field pass.

There are some small glitches in the docstrings:  in inverse_mod() in the first line, N should be I.  In reduce(), there is a formatting problem which I think would go away if a space is inserted after the second ` in `I`=self, and later on the single backquotes aroung small_residue should be double.  Ans some small indentation issues (which aer oly seen as problematical when docbuild is used).

I fixed these things in the review patch (which also fixes a few minor documentation issues I noticed that are nothing to do with this ticket as such), but someone else should look at this too.



---

archive/issue_comments_053175.json:
```json
{
    "body": "Rebased to 4.0.1 and folded into one patch",
    "created_at": "2009-06-10T10:49:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6044#issuecomment-53175",
    "user": "https://github.com/loefflerd"
}
```

Rebased to 4.0.1 and folded into one patch



---

archive/issue_comments_053176.json:
```json
{
    "body": "<a id='comment:5'></a>Attachment [trac_6044_rebased_and_folded.patch](tarball://root/attachments/some-uuid/ticket6044/trac_6044_rebased_and_folded.patch) by @loefflerd created at 2009-06-10 11:06:19\n\nGood stuff; it will be much more efficient to use hermite form rather than smith form in residues, besides being more canonical.\n\nI have rebased the patch to 4.0.1, and checked that it commutes with #5842 and #6188. All tests in sage/rings/number_field pass still (on a 32-bit machine), as do those in sage/doc/en/bordeaux_2008 (which have a habit of catching out unwary number theory patch authors). \n\nThis one has been in limbo for three weeks because the trac reports of patches with review / needing review / etc are done using text searches of the summary field, and thus \"with review, needs second opinion\" doesn't get picked up. I guess it would be safer to set it to \"needs review\", but this strikes me as conclusive proof that we need to change the way we use trac -- this is the *fifth* ticket I've spotted today which has been in limbo because of a slightly unusual summary string.",
    "created_at": "2009-06-10T11:06:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6044#issuecomment-53176",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:5'></a>Attachment [trac_6044_rebased_and_folded.patch](tarball://root/attachments/some-uuid/ticket6044/trac_6044_rebased_and_folded.patch) by @loefflerd created at 2009-06-10 11:06:19

Good stuff; it will be much more efficient to use hermite form rather than smith form in residues, besides being more canonical.

I have rebased the patch to 4.0.1, and checked that it commutes with #5842 and #6188. All tests in sage/rings/number_field pass still (on a 32-bit machine), as do those in sage/doc/en/bordeaux_2008 (which have a habit of catching out unwary number theory patch authors). 

This one has been in limbo for three weeks because the trac reports of patches with review / needing review / etc are done using text searches of the summary field, and thus "with review, needs second opinion" doesn't get picked up. I guess it would be safer to set it to "needs review", but this strikes me as conclusive proof that we need to change the way we use trac -- this is the *fifth* ticket I've spotted today which has been in limbo because of a slightly unusual summary string.



---

archive/issue_comments_053177.json:
```json
{
    "body": "<a id='comment:6'></a>Many thanks for spotting this and delivering it out of limbo, especially as you had to rebase it.  I have a habit of forgetting all about my own patches once I have put them up for review (and wish trac had an option to filter out those tickets which I had added a patch to which were still open).\n\nAs for SNF  v. HNF it was just my stupidity in the first place which caused us to use SNF.   HNF is particularly efficient since that's the form pari stores ideals in anyway.",
    "created_at": "2009-06-10T17:30:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6044#issuecomment-53177",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:6'></a>Many thanks for spotting this and delivering it out of limbo, especially as you had to rebase it.  I have a habit of forgetting all about my own patches once I have put them up for review (and wish trac had an option to filter out those tickets which I had added a patch to which were still open).

As for SNF  v. HNF it was just my stupidity in the first place which caused us to use SNF.   HNF is particularly efficient since that's the form pari stores ideals in anyway.



---

archive/issue_comments_053178.json:
```json
{
    "body": "Changing merged from \"\" to \"alpha0\"",
    "created_at": "2009-06-13T20:46:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6044#issuecomment-53178",
    "user": "https://github.com/ncalexan"
}
```

Changing merged from "" to "alpha0"



---

archive/issue_comments_053179.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2009-06-13T20:46:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6044#issuecomment-53179",
    "user": "https://github.com/ncalexan"
}
```

Resolution: fixed



---

archive/issue_comments_053180.json:
```json
{
    "body": "Changing author from \"\" to \"Maite Aranes\"",
    "created_at": "2009-06-13T20:46:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6044#issuecomment-53180",
    "user": "https://github.com/ncalexan"
}
```

Changing author from "" to "Maite Aranes"



---

archive/issue_events_014195.json:
```json
{
    "actor": "https://github.com/ncalexan",
    "created_at": "2009-06-13T20:46:05Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/6044",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/6044#event-14195"
}
```



---

archive/issue_comments_053181.json:
```json
{
    "body": "Changing reviewer from \"\" to \"John Cremona, David Loeffler\"",
    "created_at": "2009-06-13T20:46:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6044#issuecomment-53181",
    "user": "https://github.com/ncalexan"
}
```

Changing reviewer from "" to "John Cremona, David Loeffler"



---

archive/issue_comments_053182.json:
```json
{
    "body": "Changing merged from \"alpha0\" to \"4.0.2.alpha0\"",
    "created_at": "2009-06-14T13:52:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6044#issuecomment-53182",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

Changing merged from "alpha0" to "4.0.2.alpha0"
