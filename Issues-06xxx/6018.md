# Issue 6018: Confusing behaviour with Dirichlet characters

archive/issues_006018.json:
```json
{
    "assignees": [
        "https://github.com/craigcitro"
    ],
    "body": "Funny things happen if you have two Dirichlet groups with the same modulus and the same base ring, but different roots of unity. This can happen if you use base_extend:\n\n```\nsage: G = DirichletGroup(10, QQ).base_extend(CyclotomicField(4))\nsage: H = DirichletGroup(10, CyclotomicField(4))\n```\n\nNow G and H look pretty similar:\n\n```\nsage: G\nGroup of Dirichlet characters of modulus 10 over Cyclotomic Field of order 4 and degree 2\nsage: H\nGroup of Dirichlet characters of modulus 10 over Cyclotomic Field of order 4 and degree 2\n```\n\nBut they don't compare as equal and the generators of H don't live in G:\n\n```\nsage: G == H\nFalse\nsage: H.0 in G\nFalse\n```\n\nHere G only actually contains those characters which factor through its original base ring, namely QQ. This is probably going to be a bit mystifying for the end-user.\n\nSimilar phenomena can make it next to impossible to do arithmetic with characters obtained by base extension, which somehow are second-class citizens:\n\n```\nsage: K5 = CyclotomicField(5); K3 = CyclotomicField(3); K30 = CyclotomicField(30)\nsage: (DirichletGroup(31, K5).0).base_extend(K30) * (DirichletGroup(31, K3).0).base_extend(K30)\nTypeError: unsupported operand parent(s) for '*': \n'Group of Dirichlet characters of modulus 31 over Cyclotomic Field of order 30 and degree 8' and \n'Group of Dirichlet characters of modulus 31 over Cyclotomic Field of order 30 and degree 8'\n```\n\nThis is a particularly mystifying error for the uninitiated, since it's asserting that it can't find a common parent, but the string representations of the parents it already has are identical.\n\nThere are a couple of solutions:\n\n- Change base_extend for Dirichlet groups to pick a maximal order root of unity in the new base ring, rather than just base-extending the root of unity it already has. This is nice and transparent, but it could be slow in some cases, and it prevents us constructing Dirichlet characters with values in rings where the unit group isn't cyclic or we can't compute a generator (e.g. we'd lose the ability to base extend elements of `DirichletGroup(N, ZZ)` to `DirichletGroup(N, Integers(15))`).\n\n- Change the `_repr_` method for Dirichlet groups so it explicitly prints the root of unity involved. I don't like this idea much.\n\n- Some combination of the above two, with a special class for Dirichlet groups over domains where a unique root of unity of maximal order dividing `euler_phi(N)` doesn't exist or can't be calculated. This might be fiddly to write and maintain.\n\n- Make `zeta` optional (implemented in the current branch); see [comment:18](#comment:18) for details\n\nDepends on #18540\n\nKeywords: **Dirichlet characters, days71**\n\nBranch/Commit: **[3b51d5d](https://github.com/sagemath/sagetrac-mirror/commit/3b51d5d1df89e46e310e0bbc985c73ae06e01bad)**\n\nReviewer: **Aly Deines**\n\nAuthor: **David Loeffler, Peter Bruin**\n\nComponent: **modular forms**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/6018_\n\n",
    "closed_at": "2016-03-27T07:44:21Z",
    "created_at": "2009-05-11T09:18:29Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20modular%20forms",
        "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Confusing behaviour with Dirichlet characters",
    "type": "issue",
    "updated_at": "2016-03-27T07:44:21Z",
    "url": "https://github.com/sagemath/sage/issues/6018",
    "user": "https://github.com/loefflerd"
}
```
Funny things happen if you have two Dirichlet groups with the same modulus and the same base ring, but different roots of unity. This can happen if you use base_extend:

```
sage: G = DirichletGroup(10, QQ).base_extend(CyclotomicField(4))
sage: H = DirichletGroup(10, CyclotomicField(4))
```

Now G and H look pretty similar:

```
sage: G
Group of Dirichlet characters of modulus 10 over Cyclotomic Field of order 4 and degree 2
sage: H
Group of Dirichlet characters of modulus 10 over Cyclotomic Field of order 4 and degree 2
```

But they don't compare as equal and the generators of H don't live in G:

```
sage: G == H
False
sage: H.0 in G
False
```

Here G only actually contains those characters which factor through its original base ring, namely QQ. This is probably going to be a bit mystifying for the end-user.

Similar phenomena can make it next to impossible to do arithmetic with characters obtained by base extension, which somehow are second-class citizens:

```
sage: K5 = CyclotomicField(5); K3 = CyclotomicField(3); K30 = CyclotomicField(30)
sage: (DirichletGroup(31, K5).0).base_extend(K30) * (DirichletGroup(31, K3).0).base_extend(K30)
TypeError: unsupported operand parent(s) for '*': 
'Group of Dirichlet characters of modulus 31 over Cyclotomic Field of order 30 and degree 8' and 
'Group of Dirichlet characters of modulus 31 over Cyclotomic Field of order 30 and degree 8'
```

This is a particularly mystifying error for the uninitiated, since it's asserting that it can't find a common parent, but the string representations of the parents it already has are identical.

There are a couple of solutions:

- Change base_extend for Dirichlet groups to pick a maximal order root of unity in the new base ring, rather than just base-extending the root of unity it already has. This is nice and transparent, but it could be slow in some cases, and it prevents us constructing Dirichlet characters with values in rings where the unit group isn't cyclic or we can't compute a generator (e.g. we'd lose the ability to base extend elements of `DirichletGroup(N, ZZ)` to `DirichletGroup(N, Integers(15))`).

- Change the `_repr_` method for Dirichlet groups so it explicitly prints the root of unity involved. I don't like this idea much.

- Some combination of the above two, with a special class for Dirichlet groups over domains where a unique root of unity of maximal order dividing `euler_phi(N)` doesn't exist or can't be calculated. This might be fiddly to write and maintain.

- Make `zeta` optional (implemented in the current branch); see [comment:18](#comment:18) for details

Depends on #18540

Keywords: **Dirichlet characters, days71**

Branch/Commit: **[3b51d5d](https://github.com/sagemath/sagetrac-mirror/commit/3b51d5d1df89e46e310e0bbc985c73ae06e01bad)**

Reviewer: **Aly Deines**

Author: **David Loeffler, Peter Bruin**

Component: **modular forms**

_Issue created by migration from https://trac.sagemath.org/ticket/6018_





---

archive/issue_events_072122.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2009-05-11T09:18:29Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6018#event-72122"
}
```



---

archive/issue_events_072123.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2009-05-11T09:18:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20modular%20forms",
    "label_color": "0000ff",
    "label_name": "c: modular forms",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6018#event-72123"
}
```



---

archive/issue_events_072124.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2009-05-11T09:18:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6018#event-72124"
}
```



---

archive/issue_events_072125.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2009-05-11T09:18:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6018#event-72125"
}
```



---

archive/issue_events_072126.json:
```json
{
    "actor": "https://github.com/craigcitro",
    "created_at": "2009-05-11T09:18:29Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "subject": "https://github.com/loefflerd",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6018#event-72126"
}
```



---

archive/issue_comments_039333.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nDavid, I like your analysis of the situation a lot.  I'm going to do what you suggest first.  Regarding performance issues, I think if the user really is worried about that in some case, they can be explicit about the relevant spaces and zeta's.",
    "created_at": "2010-01-19T02:55:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39333",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:1" align="right">comment:1</div>

David, I like your analysis of the situation a lot.  I'm going to do what you suggest first.  Regarding performance issues, I think if the user really is worried about that in some case, they can be explicit about the relevant spaces and zeta's.



---

archive/issue_comments_039334.json:
```json
{
    "body": "Attachment: **[trac_6018.patch.gz](https://github.com/sagemath/sage/files/ticket6018/trac_6018.patch.gz)**",
    "created_at": "2010-01-19T03:56:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39334",
    "user": "https://github.com/williamstein"
}
```

Attachment: **[trac_6018.patch.gz](https://github.com/sagemath/sage/files/ticket6018/trac_6018.patch.gz)**



---

archive/issue_events_072127.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-01-19T03:56:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6018#event-72127"
}
```



---

archive/issue_comments_039335.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThis looks like a nice clean fix -- my only worry would be that a few subtle choices cause mayhem with some random modular symbols code. William, did you run doctests on the `modular/` directory? \n\nAlso, one potentially silly comment: your fix assumes that the constructor for `DirichletGroup` always chooses a maximal order and an appropriate zeta if one isn't given. While I can't imagine us ever changing that constructor to do anything different, should we either (1) explicitly choose the maximal order or (2) check and/or document this in some way? I think it's unlikely, but should it ever come up, a comment near that line of code pointing someone in the right direction could be a huge help ...",
    "created_at": "2010-01-19T05:29:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39335",
    "user": "https://github.com/craigcitro"
}
```

<div id="comment:3" align="right">comment:3</div>

This looks like a nice clean fix -- my only worry would be that a few subtle choices cause mayhem with some random modular symbols code. William, did you run doctests on the `modular/` directory? 

Also, one potentially silly comment: your fix assumes that the constructor for `DirichletGroup` always chooses a maximal order and an appropriate zeta if one isn't given. While I can't imagine us ever changing that constructor to do anything different, should we either (1) explicitly choose the maximal order or (2) check and/or document this in some way? I think it's unlikely, but should it ever come up, a comment near that line of code pointing someone in the right direction could be a huge help ...



---

archive/issue_comments_039336.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI am running sage -testall on this patch at the moment. \n\nThe key question, I think, is what we want to happen in the following situation:\n\n```\nsage: f = DirichletGroup(17, ZZ).0\nsage: f.base_extend(Integers(15))\n```\nThis worked under the old approach, because the parent of the base-extended thing was the Dirichlet group of modulus 17 and `zeta = ZZ(15)(-1)`, of order 2. But I suspect that with this patch it will fail now, with an error message about not being able to compute roots of unity mod 15.\n\nI suggest a further modification which makes the constructor raise a more intelligent error message if the root of unity isn't specified and the base ring is one where we can't do factorisation. If the tests pass I will write such a patch, and give William's patch a positive review conditional on that.",
    "created_at": "2010-01-20T18:17:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39336",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:4" align="right">comment:4</div>

I am running sage -testall on this patch at the moment. 

The key question, I think, is what we want to happen in the following situation:

```
sage: f = DirichletGroup(17, ZZ).0
sage: f.base_extend(Integers(15))
```
This worked under the old approach, because the parent of the base-extended thing was the Dirichlet group of modulus 17 and `zeta = ZZ(15)(-1)`, of order 2. But I suspect that with this patch it will fail now, with an error message about not being able to compute roots of unity mod 15.

I suggest a further modification which makes the constructor raise a more intelligent error message if the root of unity isn't specified and the base ring is one where we can't do factorisation. If the tests pass I will write such a patch, and give William's patch a positive review conditional on that.



---

archive/issue_comments_039337.json:
```json
{
    "body": "Attachment: **[trac_6018-2.patch.gz](https://github.com/sagemath/sage/files/ticket6018/trac_6018-2.patch.gz)**\n\napply over previous patch",
    "created_at": "2010-01-20T19:21:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39337",
    "user": "https://github.com/loefflerd"
}
```

Attachment: **[trac_6018-2.patch.gz](https://github.com/sagemath/sage/files/ticket6018/trac_6018-2.patch.gz)**

apply over previous patch



---

archive/issue_comments_039338.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nAs promised, here is a second patch. This takes a compromise approach where base_extend tries to calculate a maximal order root of unity in the new base ring if it's an integral domain, but otherwise uses the base-extension. I've added a couple of doctests, including one to illustrate the perils of the `zeta_order` argument.\n\nIf someone else can approve the new patch I think we're sorted.",
    "created_at": "2010-01-20T19:23:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39338",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:5" align="right">comment:5</div>

As promised, here is a second patch. This takes a compromise approach where base_extend tries to calculate a maximal order root of unity in the new base ring if it's an integral domain, but otherwise uses the base-extension. I've added a couple of doctests, including one to illustrate the perils of the `zeta_order` argument.

If someone else can approve the new patch I think we're sorted.



---

archive/issue_comments_039339.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThis looks good -- I just have two questions:\n\n* In the last example, you show that weirdness ensues when the provided `zeta` doesn't have order `zeta_order`. Couldn't we (optionally, with a `check=...` parameter) check this? Having it on by default definitely seems like it'd stop users from shooting themselves in the foot.\n\n* Is it possible for the call to `base_ring(zeta)` to raise an exception? If so, do we want to catch that and provide a more direct error message, or just let it go?",
    "created_at": "2010-01-20T19:32:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39339",
    "user": "https://github.com/craigcitro"
}
```

<div id="comment:6" align="right">comment:6</div>

This looks good -- I just have two questions:

* In the last example, you show that weirdness ensues when the provided `zeta` doesn't have order `zeta_order`. Couldn't we (optionally, with a `check=...` parameter) check this? Having it on by default definitely seems like it'd stop users from shooting themselves in the foot.

* Is it possible for the call to `base_ring(zeta)` to raise an exception? If so, do we want to catch that and provide a more direct error message, or just let it go?



---

archive/issue_comments_039340.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThe docs state several times that you don't actually need to supply zeta_order, so nobody's going to use the option in the first place unless they've got a pretty good reason to do so. I'd rather not make the code still more complicated! (Would it actually cause that much harm to get rid of the zeta_order argument entirely?)\n\nIf base_ring(zeta) raises an exception, the error message will say something like \"Unable to coerce foo into bar\", and it should be reasonably clear what the problem is. With these patches, the constructor will almost always be getting called without specifying zeta and zeta_order anyway.\n\nDavid",
    "created_at": "2010-01-20T21:47:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39340",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:7" align="right">comment:7</div>

The docs state several times that you don't actually need to supply zeta_order, so nobody's going to use the option in the first place unless they've got a pretty good reason to do so. I'd rather not make the code still more complicated! (Would it actually cause that much harm to get rid of the zeta_order argument entirely?)

If base_ring(zeta) raises an exception, the error message will say something like "Unable to coerce foo into bar", and it should be reasonably clear what the problem is. With these patches, the constructor will almost always be getting called without specifying zeta and zeta_order anyway.

David



---

archive/issue_comments_039341.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI'm a big fan of just removing the `zeta_order` argument -- looking at the code, there's no real reason to specify it, and it'll clean up a few statements in the constructor.",
    "created_at": "2010-01-20T22:05:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39341",
    "user": "https://github.com/craigcitro"
}
```

<div id="comment:8" align="right">comment:8</div>

I'm a big fan of just removing the `zeta_order` argument -- looking at the code, there's no real reason to specify it, and it'll clean up a few statements in the constructor.



---

archive/issue_comments_039342.json:
```json
{
    "body": "Attachment: **[trac_6018-3.patch.gz](https://github.com/sagemath/sage/files/ticket6018/trac_6018-3.patch.gz)**",
    "created_at": "2010-01-20T22:22:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39342",
    "user": "https://github.com/loefflerd"
}
```

Attachment: **[trac_6018-3.patch.gz](https://github.com/sagemath/sage/files/ticket6018/trac_6018-3.patch.gz)**



---

archive/issue_comments_039343.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nHere's a third patch that kills zeta_order. All doctests in modular/ pass, I'm running a full test cycle now.",
    "created_at": "2010-01-20T22:23:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39343",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:9" align="right">comment:9</div>

Here's a third patch that kills zeta_order. All doctests in modular/ pass, I'm running a full test cycle now.



---

archive/issue_events_072128.json:
```json
{
    "actor": "https://github.com/craigcitro",
    "created_at": "2010-01-20T22:51:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6018#event-72128"
}
```



---

archive/issue_events_072129.json:
```json
{
    "actor": "https://github.com/craigcitro",
    "created_at": "2010-01-20T22:51:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6018#event-72129"
}
```



---

archive/issue_comments_039344.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nTwo thumbs up! Apply all three.",
    "created_at": "2010-01-20T22:51:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39344",
    "user": "https://github.com/craigcitro"
}
```

<div id="comment:10" align="right">comment:10</div>

Two thumbs up! Apply all three.



---

archive/issue_comments_039345.json:
```json
{
    "body": "apply only this patch",
    "created_at": "2010-01-20T23:17:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39345",
    "user": "https://github.com/loefflerd"
}
```

apply only this patch



---

archive/issue_comments_039346.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nAttachment: **[trac_6018_folded.patch.gz](https://github.com/sagemath/sage/files/ticket6018/trac_6018_folded.patch.gz)**\n\nHey, why, wait, what happens if you create a zeta such that zeta.multiplicative_order() doesn't work?!\n\n```\nsage: a = CDF(CyclotomicField(5).0)\nsage: G = DirichletGroup(11, base_ring=a.parent(), zeta=a, zeta_order=5)\nsage: G\nGroup of Dirichlet characters of modulus 11 over Complex Double Field\nsage: G.0\n[0.309016994375 + 0.951056516295*I]\nsage: G.0(2)\n0.309016994375 + 0.951056516295*I\n```\n\nPlease revert getting rid of zeta_order and make that part of another ticket, keeping in mind that you can't exactly do that, since it is important.  The above doctest should be put in that ticket since this problem wouldn't have happened if I had included the above test.",
    "created_at": "2010-01-20T23:57:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39346",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:11" align="right">comment:11</div>

Attachment: **[trac_6018_folded.patch.gz](https://github.com/sagemath/sage/files/ticket6018/trac_6018_folded.patch.gz)**

Hey, why, wait, what happens if you create a zeta such that zeta.multiplicative_order() doesn't work?!

```
sage: a = CDF(CyclotomicField(5).0)
sage: G = DirichletGroup(11, base_ring=a.parent(), zeta=a, zeta_order=5)
sage: G
Group of Dirichlet characters of modulus 11 over Complex Double Field
sage: G.0
[0.309016994375 + 0.951056516295*I]
sage: G.0(2)
0.309016994375 + 0.951056516295*I
```

Please revert getting rid of zeta_order and make that part of another ticket, keeping in mind that you can't exactly do that, since it is important.  The above doctest should be put in that ticket since this problem wouldn't have happened if I had included the above test.



---

archive/issue_events_072130.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-01-20T23:57:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6018#event-72130"
}
```



---

archive/issue_events_072131.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-01-20T23:57:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6018#event-72131"
}
```



---

archive/issue_comments_039347.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nOK, so would you be happy with applying just the first two patches? \n\nDavid",
    "created_at": "2010-01-21T09:22:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39347",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:12" align="right">comment:12</div>

OK, so would you be happy with applying just the first two patches? 

David



---

archive/issue_comments_039348.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nOn reflection, the issue is surprisingly subtle.\n\nConsider taking a Dirichlet group with values in the integers of a cyclotomic field K, and base_extending to: (1) the complex double field; (2) the residue field of a prime of K.\n\nIn case (1), your example shows that we can't expect the constructor of the new group to calculate the order of a given zeta. But case (2) shows that the order of the base-extended zeta might not be the same as the order of the original zeta, and one can easily get nonsense if one assumes this.\n\nCase (1) is actually OK if we don't pass zeta as an argument at all, because we can factor polynomials in CDF. This is more or less what applying Craig's patch and mine will give: zeta_order is still available as an argument, but it's not used by the base extension code, which relies on the base ring supporting *either* polynomial factoring or `multiplicative_order`.",
    "created_at": "2010-01-21T09:39:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39348",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:13" align="right">comment:13</div>

On reflection, the issue is surprisingly subtle.

Consider taking a Dirichlet group with values in the integers of a cyclotomic field K, and base_extending to: (1) the complex double field; (2) the residue field of a prime of K.

In case (1), your example shows that we can't expect the constructor of the new group to calculate the order of a given zeta. But case (2) shows that the order of the base-extended zeta might not be the same as the order of the original zeta, and one can easily get nonsense if one assumes this.

Case (1) is actually OK if we don't pass zeta as an argument at all, because we can factor polynomials in CDF. This is more or less what applying Craig's patch and mine will give: zeta_order is still available as an argument, but it's not used by the base extension code, which relies on the base ring supporting *either* polynomial factoring or `multiplicative_order`.



---

archive/issue_events_072132.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6018#event-72132"
}
```



---

archive/issue_events_072133.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6018#event-72133"
}
```



---

archive/issue_events_072134.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6018#event-72134"
}
```



---

archive/issue_events_072135.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6018#event-72135"
}
```



---

archive/issue_events_072136.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6018#event-72136"
}
```



---

archive/issue_events_072137.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6018#event-72137"
}
```



---

archive/issue_events_072138.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6018#event-72138"
}
```



---

archive/issue_events_072139.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6018#event-72139"
}
```



---

archive/issue_comments_039349.json:
```json
{
    "body": "Author: **David Loeffler, Peter Bruin**",
    "created_at": "2015-06-05T12:24:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39349",
    "user": "https://github.com/pjbruin"
}
```

Author: **David Loeffler, Peter Bruin**



---

archive/issue_comments_039350.json:
```json
{
    "body": "Dependencies: **#18540**",
    "created_at": "2015-06-05T12:24:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39350",
    "user": "https://github.com/pjbruin"
}
```

Dependencies: **#18540**



---

archive/issue_comments_039351.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nHere is a branch implementing a solution which is somewhat like the third option in the ticket description.  The idea is to introduce two different variants of `DirichletGroup`:\n- `DirichletGroup(N, base_ring)`, corresponding to the group Hom((**Z**/*N***Z**)<sup>*</sup>, *R*<sup>*</sup>);\n- `DirichletGroup(N, base_ring, zeta[, zeta_order])` corresponding to the group Hom((**Z**/*N***Z**)<sup>*</sup>, \u3008\u03b6\u3009).\nIf *R* is a domain, we also allow the user to only specify `zeta_order`, in which case the `DirichletGroup` factory tries to compute a suitable `zeta`.\n\nThe difference between the two variants is visible from the string representation:\n\n```\nsage: R.<x> = PolynomialRing(QQ)\nsage: K.<a> = NumberField(x^4 + 1)\nsage: DirichletGroup(5, K)\nGroup of Dirichlet characters of modulus 5 over Number Field in a with defining polynomial x^4 + 1\nsage: DirichletGroup(5, K, a)\nGroup of Dirichlet characters of modulus 5 over Number Field in a with defining polynomial x^4 + 1 with values in the group of order 8 generated by a\n```\n\nBecause it is no longer mandatory to have a distinguished `zeta`, Dirichlet characters are by default specified by their values instead of a vector of integers modulo the order of `zeta`.  For efficiency reasons, this vector is still used whenever a `zeta` is known (whether it has been specified as in the second syntax above or has been computed at a later stage).\n\nBesides solving the problems in the ticket description, this ticket greatly speeds up constructing Dirichlet groups over number fields.  This is because `zeta` is only computed when needed, and hence factoring cyclotomic polynomials is avoided.  This factoring will still happen when one asks for things like generators or a list of all elements.\n\nDavid: part of the branch (including some doctests) is based on your patches; I hope you don't mind me adding you as an author.",
    "created_at": "2015-06-05T12:24:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39351",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:18" align="right">comment:18</div>

Here is a branch implementing a solution which is somewhat like the third option in the ticket description.  The idea is to introduce two different variants of `DirichletGroup`:
- `DirichletGroup(N, base_ring)`, corresponding to the group Hom((**Z**/*N***Z**)<sup>*</sup>, *R*<sup>*</sup>);
- `DirichletGroup(N, base_ring, zeta[, zeta_order])` corresponding to the group Hom((**Z**/*N***Z**)<sup>*</sup>, 〈ζ〉).
If *R* is a domain, we also allow the user to only specify `zeta_order`, in which case the `DirichletGroup` factory tries to compute a suitable `zeta`.

The difference between the two variants is visible from the string representation:

```
sage: R.<x> = PolynomialRing(QQ)
sage: K.<a> = NumberField(x^4 + 1)
sage: DirichletGroup(5, K)
Group of Dirichlet characters of modulus 5 over Number Field in a with defining polynomial x^4 + 1
sage: DirichletGroup(5, K, a)
Group of Dirichlet characters of modulus 5 over Number Field in a with defining polynomial x^4 + 1 with values in the group of order 8 generated by a
```

Because it is no longer mandatory to have a distinguished `zeta`, Dirichlet characters are by default specified by their values instead of a vector of integers modulo the order of `zeta`.  For efficiency reasons, this vector is still used whenever a `zeta` is known (whether it has been specified as in the second syntax above or has been computed at a later stage).

Besides solving the problems in the ticket description, this ticket greatly speeds up constructing Dirichlet groups over number fields.  This is because `zeta` is only computed when needed, and hence factoring cyclotomic polynomials is avoided.  This factoring will still happen when one asks for things like generators or a list of all elements.

David: part of the branch (including some doctests) is based on your patches; I hope you don't mind me adding you as an author.



---

archive/issue_comments_039352.json:
```json
{
    "body": "Branch: **[u/pbruin/6018-DirichletGroup_zeta](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/6018-DirichletGroup_zeta)**",
    "created_at": "2015-06-05T12:24:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39352",
    "user": "https://github.com/pjbruin"
}
```

Branch: **[u/pbruin/6018-DirichletGroup_zeta](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/6018-DirichletGroup_zeta)**



---

archive/issue_comments_039353.json:
```json
{
    "body": "Commit: **[b03524d](https://github.com/sagemath/sagetrac-mirror/commit/b03524d51a87612922108e137132f7d55ef13646)**",
    "created_at": "2015-06-05T12:24:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39353",
    "user": "https://github.com/pjbruin"
}
```

Commit: **[b03524d](https://github.com/sagemath/sagetrac-mirror/commit/b03524d51a87612922108e137132f7d55ef13646)**



---

archive/issue_events_072140.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-06-05T12:45:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6018#event-72140"
}
```



---

archive/issue_events_072141.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-06-05T12:45:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6018#event-72141"
}
```



---

archive/issue_comments_039354.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -37,7 +37,7 @@\n \n This is a particularly mystifying error for the uninitiated, since it's asserting that it can't find a common parent, but the string representations of the parents it already has are identical.\n \n-I can see a couple of solutions:\n+There are a couple of solutions:\n \n - Change base_extend for Dirichlet groups to pick a maximal order root of unity in the new base ring, rather than just base-extending the root of unity it already has. This is nice and transparent, but it could be slow in some cases, and it prevents us constructing Dirichlet characters with values in rings where the unit group isn't cyclic or we can't compute a generator (e.g. we'd lose the ability to base extend elements of `DirichletGroup(N, ZZ)` to `DirichletGroup(N, Integers(15))`).\n \n@@ -45,4 +45,4 @@\n \n - Some combination of the above two, with a special class for Dirichlet groups over domains where a unique root of unity of maximal order dividing `euler_phi(N)` doesn't exist or can't be calculated. This might be fiddly to write and maintain.\n \n-\n+- Make `zeta` optional (implemented in the current branch); see [comment:18](#comment:18) for details\n``````\n",
    "created_at": "2015-06-05T12:45:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39354",
    "user": "https://github.com/pjbruin"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -37,7 +37,7 @@
 
 This is a particularly mystifying error for the uninitiated, since it's asserting that it can't find a common parent, but the string representations of the parents it already has are identical.
 
-I can see a couple of solutions:
+There are a couple of solutions:
 
 - Change base_extend for Dirichlet groups to pick a maximal order root of unity in the new base ring, rather than just base-extending the root of unity it already has. This is nice and transparent, but it could be slow in some cases, and it prevents us constructing Dirichlet characters with values in rings where the unit group isn't cyclic or we can't compute a generator (e.g. we'd lose the ability to base extend elements of `DirichletGroup(N, ZZ)` to `DirichletGroup(N, Integers(15))`).
 
@@ -45,4 +45,4 @@
 
 - Some combination of the above two, with a special class for Dirichlet groups over domains where a unique root of unity of maximal order dividing `euler_phi(N)` doesn't exist or can't be calculated. This might be fiddly to write and maintain.
 
-
+- Make `zeta` optional (implemented in the current branch); see [comment:18](#comment:18) for details
``````




---

archive/issue_comments_039355.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f81b0e808b716df3d4ee0e6e18ba85ec7c4eba0a\">f81b0e8</a></td><td><code>Trac 6018: fix doctests</code></td></tr></table>\n",
    "created_at": "2015-06-05T14:14:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39355",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f81b0e808b716df3d4ee0e6e18ba85ec7c4eba0a">f81b0e8</a></td><td><code>Trac 6018: fix doctests</code></td></tr></table>




---

archive/issue_comments_039356.json:
```json
{
    "body": "Changed commit from **[b03524d](https://github.com/sagemath/sagetrac-mirror/commit/b03524d51a87612922108e137132f7d55ef13646)** to **[f81b0e8](https://github.com/sagemath/sagetrac-mirror/commit/f81b0e808b716df3d4ee0e6e18ba85ec7c4eba0a)**",
    "created_at": "2015-06-05T14:14:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39356",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b03524d](https://github.com/sagemath/sagetrac-mirror/commit/b03524d51a87612922108e137132f7d55ef13646)** to **[f81b0e8](https://github.com/sagemath/sagetrac-mirror/commit/f81b0e808b716df3d4ee0e6e18ba85ec7c4eba0a)**



---

archive/issue_comments_039357.json:
```json
{
    "body": "Changed commit from **[f81b0e8](https://github.com/sagemath/sagetrac-mirror/commit/f81b0e808b716df3d4ee0e6e18ba85ec7c4eba0a)** to **[0fa9dd5](https://github.com/sagemath/sagetrac-mirror/commit/0fa9dd593cc81144b8abb3f7b9da9a431318d0a9)**",
    "created_at": "2015-06-22T19:10:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39357",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f81b0e8](https://github.com/sagemath/sagetrac-mirror/commit/f81b0e808b716df3d4ee0e6e18ba85ec7c4eba0a)** to **[0fa9dd5](https://github.com/sagemath/sagetrac-mirror/commit/0fa9dd593cc81144b8abb3f7b9da9a431318d0a9)**



---

archive/issue_comments_039358.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a2a89bb893a95c3ecd4c2731dee45e190464881\">3a2a89b</a></td><td><code>Trac 18540: reviewer comments</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0fa9dd593cc81144b8abb3f7b9da9a431318d0a9\">0fa9dd5</a></td><td><code>Merge branch 'ticket/18540-DirichletGroup_Parent' into ticket/6018-DirichletGroup_zeta</code></td></tr></table>\n",
    "created_at": "2015-06-22T19:10:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39358",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a2a89bb893a95c3ecd4c2731dee45e190464881">3a2a89b</a></td><td><code>Trac 18540: reviewer comments</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0fa9dd593cc81144b8abb3f7b9da9a431318d0a9">0fa9dd5</a></td><td><code>Merge branch 'ticket/18540-DirichletGroup_Parent' into ticket/6018-DirichletGroup_zeta</code></td></tr></table>




---

archive/issue_comments_039359.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d0bb0e4bc7c13e5b6b8a4c6d188b65b6d501eb2c\">d0bb0e4</a></td><td><code>Merge branch 'develop' into ticket/6018-DirichletGroup_zeta</code></td></tr></table>\n",
    "created_at": "2015-07-16T08:21:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39359",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d0bb0e4bc7c13e5b6b8a4c6d188b65b6d501eb2c">d0bb0e4</a></td><td><code>Merge branch 'develop' into ticket/6018-DirichletGroup_zeta</code></td></tr></table>




---

archive/issue_comments_039360.json:
```json
{
    "body": "Changed commit from **[0fa9dd5](https://github.com/sagemath/sagetrac-mirror/commit/0fa9dd593cc81144b8abb3f7b9da9a431318d0a9)** to **[d0bb0e4](https://github.com/sagemath/sagetrac-mirror/commit/d0bb0e4bc7c13e5b6b8a4c6d188b65b6d501eb2c)**",
    "created_at": "2015-07-16T08:21:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39360",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0fa9dd5](https://github.com/sagemath/sagetrac-mirror/commit/0fa9dd593cc81144b8abb3f7b9da9a431318d0a9)** to **[d0bb0e4](https://github.com/sagemath/sagetrac-mirror/commit/d0bb0e4bc7c13e5b6b8a4c6d188b65b6d501eb2c)**



---

archive/issue_comments_039361.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThis is just a detail, but instead of\n\n```\nGroup of Dirichlet characters of modulus 5 over Number Field in a with defining polynomial x^4 + 1 with values in the group of order 8 generated by a\n```\nI would prefer\n\n```\nGroup of Dirichlet characters of modulus 5 with values in the group of order 8 generated by a over Number Field in a with defining polynomial x^4 + 1\n```",
    "created_at": "2015-07-17T20:01:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39361",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:23" align="right">comment:23</div>

This is just a detail, but instead of

```
Group of Dirichlet characters of modulus 5 over Number Field in a with defining polynomial x^4 + 1 with values in the group of order 8 generated by a
```
I would prefer

```
Group of Dirichlet characters of modulus 5 with values in the group of order 8 generated by a over Number Field in a with defining polynomial x^4 + 1
```



---

archive/issue_comments_039362.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@pjbruin](#comment:18):\n> Besides solving the problems in the ticket description, this ticket greatly speeds up constructing Dirichlet groups over number fields.\n\nI assume that this is the main motivation for making `zeta` optional, right? I am not really convinced though that this extra complexity is needed...\n\nIt is true that `zeta()` for number fields is slow, but that can easily be improved (#18917).",
    "created_at": "2015-07-17T20:11:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39362",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@pjbruin](#comment:18):
> Besides solving the problems in the ticket description, this ticket greatly speeds up constructing Dirichlet groups over number fields.

I assume that this is the main motivation for making `zeta` optional, right? I am not really convinced though that this extra complexity is needed...

It is true that `zeta()` for number fields is slow, but that can easily be improved (#18917).



---

archive/issue_comments_039363.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@jdemeyer](#comment:24):\n> Replying to [@pjbruin](#comment:18):\n> > Besides solving the problems in the ticket description, this ticket greatly speeds up constructing Dirichlet groups over number fields.\n\n> \n> I assume that this is the main motivation for making `zeta` optional, right? I am not really convinced though that this extra complexity is needed...\n\nThis is not really true; it also makes more sense conceptually if one does not have to make a choice of root of unity.  I think the problems related to base extension do deserve to be solved and are at least as important as the speed-up.\n> It is true that `zeta()` for number fields is slow, but that can easily be improved (#18917).\n\nIt would be great if it could, but when making a speed improvement to `zeta()` in #15486, I found out that it was necessary to avoid calling PARI's `nfinit()`, because it was too slow for the number fields involved.  This unfortunately precludes using PARI's `nfrootsof1()`...",
    "created_at": "2015-07-18T10:45:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39363",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@jdemeyer](#comment:24):
> Replying to [@pjbruin](#comment:18):
> > Besides solving the problems in the ticket description, this ticket greatly speeds up constructing Dirichlet groups over number fields.

> 
> I assume that this is the main motivation for making `zeta` optional, right? I am not really convinced though that this extra complexity is needed...

This is not really true; it also makes more sense conceptually if one does not have to make a choice of root of unity.  I think the problems related to base extension do deserve to be solved and are at least as important as the speed-up.
> It is true that `zeta()` for number fields is slow, but that can easily be improved (#18917).

It would be great if it could, but when making a speed improvement to `zeta()` in #15486, I found out that it was necessary to avoid calling PARI's `nfinit()`, because it was too slow for the number fields involved.  This unfortunately precludes using PARI's `nfrootsof1()`...



---

archive/issue_comments_039364.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1431319a94f2c5d221e9018d3e6b150e5548fb5a\">1431319</a></td><td><code>Trac 6018: improve repr() of Dirichlet groups</code></td></tr></table>\n",
    "created_at": "2015-07-20T16:47:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39364",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1431319a94f2c5d221e9018d3e6b150e5548fb5a">1431319</a></td><td><code>Trac 6018: improve repr() of Dirichlet groups</code></td></tr></table>




---

archive/issue_comments_039365.json:
```json
{
    "body": "Changed commit from **[d0bb0e4](https://github.com/sagemath/sagetrac-mirror/commit/d0bb0e4bc7c13e5b6b8a4c6d188b65b6d501eb2c)** to **[1431319](https://github.com/sagemath/sagetrac-mirror/commit/1431319a94f2c5d221e9018d3e6b150e5548fb5a)**",
    "created_at": "2015-07-20T16:47:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39365",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d0bb0e4](https://github.com/sagemath/sagetrac-mirror/commit/d0bb0e4bc7c13e5b6b8a4c6d188b65b6d501eb2c)** to **[1431319](https://github.com/sagemath/sagetrac-mirror/commit/1431319a94f2c5d221e9018d3e6b150e5548fb5a)**



---

archive/issue_comments_039366.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@jdemeyer](#comment:23):\n> This is just a detail, but instead of\n> \n> ```\n> Group of Dirichlet characters of modulus 5 over Number Field in a with defining polynomial x^4 + 1 with values in the group of order 8 generated by a\n> ```\n> I would prefer\n> \n> ```\n> Group of Dirichlet characters of modulus 5 with values in the group of order 8 generated by a over Number Field in a with defining polynomial x^4 + 1\n> ```\n\nI took the opportunity to make a more general improvement to the wording; the format is now\n\n```\nGroup of Dirichlet characters modulo N with values in [the group of order M generated by Z in ]R",
    "created_at": "2015-07-20T16:51:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39366",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@jdemeyer](#comment:23):
> This is just a detail, but instead of
> 
> ```
> Group of Dirichlet characters of modulus 5 over Number Field in a with defining polynomial x^4 + 1 with values in the group of order 8 generated by a
> ```
> I would prefer
> 
> ```
> Group of Dirichlet characters of modulus 5 with values in the group of order 8 generated by a over Number Field in a with defining polynomial x^4 + 1
> ```

I took the opportunity to make a more general improvement to the wording; the format is now

```
Group of Dirichlet characters modulo N with values in [the group of order M generated by Z in ]R



---

archive/issue_comments_039367.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/36dcdc3f41690cc74fd3cae39e869bd898605228\">36dcdc3</a></td><td><code>Merge branch 'develop' into ticket/6018-DirichletGroup_zeta</code></td></tr></table>\n",
    "created_at": "2016-01-22T00:09:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39367",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/36dcdc3f41690cc74fd3cae39e869bd898605228">36dcdc3</a></td><td><code>Merge branch 'develop' into ticket/6018-DirichletGroup_zeta</code></td></tr></table>




---

archive/issue_comments_039368.json:
```json
{
    "body": "Changed commit from **[1431319](https://github.com/sagemath/sagetrac-mirror/commit/1431319a94f2c5d221e9018d3e6b150e5548fb5a)** to **[36dcdc3](https://github.com/sagemath/sagetrac-mirror/commit/36dcdc3f41690cc74fd3cae39e869bd898605228)**",
    "created_at": "2016-01-22T00:09:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39368",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1431319](https://github.com/sagemath/sagetrac-mirror/commit/1431319a94f2c5d221e9018d3e6b150e5548fb5a)** to **[36dcdc3](https://github.com/sagemath/sagetrac-mirror/commit/36dcdc3f41690cc74fd3cae39e869bd898605228)**



---

archive/issue_comments_039369.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/08052f9be7cffccc5f9795bc78153cb2bee58eaf\">08052f9</a></td><td><code>Trac 6018: replace arith.gcd() and arith.lcm() by gcd() and lcm()</code></td></tr></table>\n",
    "created_at": "2016-01-22T08:13:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39369",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/08052f9be7cffccc5f9795bc78153cb2bee58eaf">08052f9</a></td><td><code>Trac 6018: replace arith.gcd() and arith.lcm() by gcd() and lcm()</code></td></tr></table>




---

archive/issue_comments_039370.json:
```json
{
    "body": "Changed commit from **[36dcdc3](https://github.com/sagemath/sagetrac-mirror/commit/36dcdc3f41690cc74fd3cae39e869bd898605228)** to **[08052f9](https://github.com/sagemath/sagetrac-mirror/commit/08052f9be7cffccc5f9795bc78153cb2bee58eaf)**",
    "created_at": "2016-01-22T08:13:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39370",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[36dcdc3](https://github.com/sagemath/sagetrac-mirror/commit/36dcdc3f41690cc74fd3cae39e869bd898605228)** to **[08052f9](https://github.com/sagemath/sagetrac-mirror/commit/08052f9be7cffccc5f9795bc78153cb2bee58eaf)**



---

archive/issue_comments_039371.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cbc5d7fac5807c2ce284ce722231f9fe8c37f90d\">cbc5d7f</a></td><td><code>Trac 6018: fix doctest failures</code></td></tr></table>\n",
    "created_at": "2016-01-22T14:55:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39371",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cbc5d7fac5807c2ce284ce722231f9fe8c37f90d">cbc5d7f</a></td><td><code>Trac 6018: fix doctest failures</code></td></tr></table>




---

archive/issue_comments_039372.json:
```json
{
    "body": "Changed commit from **[08052f9](https://github.com/sagemath/sagetrac-mirror/commit/08052f9be7cffccc5f9795bc78153cb2bee58eaf)** to **[cbc5d7f](https://github.com/sagemath/sagetrac-mirror/commit/cbc5d7fac5807c2ce284ce722231f9fe8c37f90d)**",
    "created_at": "2016-01-22T14:55:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39372",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[08052f9](https://github.com/sagemath/sagetrac-mirror/commit/08052f9be7cffccc5f9795bc78153cb2bee58eaf)** to **[cbc5d7f](https://github.com/sagemath/sagetrac-mirror/commit/cbc5d7fac5807c2ce284ce722231f9fe8c37f90d)**



---

archive/issue_comments_039373.json:
```json
{
    "body": "<div id=\"comment:31\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b51d5d1df89e46e310e0bbc985c73ae06e01bad\">3b51d5d</a></td><td><code>Merge branch 'develop' into ticket/6018-DirichletGroup_zeta</code></td></tr></table>\n",
    "created_at": "2016-02-25T23:07:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39373",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:31"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b51d5d1df89e46e310e0bbc985c73ae06e01bad">3b51d5d</a></td><td><code>Merge branch 'develop' into ticket/6018-DirichletGroup_zeta</code></td></tr></table>




---

archive/issue_comments_039374.json:
```json
{
    "body": "Changed commit from **[cbc5d7f](https://github.com/sagemath/sagetrac-mirror/commit/cbc5d7fac5807c2ce284ce722231f9fe8c37f90d)** to **[3b51d5d](https://github.com/sagemath/sagetrac-mirror/commit/3b51d5d1df89e46e310e0bbc985c73ae06e01bad)**",
    "created_at": "2016-02-25T23:07:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39374",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[cbc5d7f](https://github.com/sagemath/sagetrac-mirror/commit/cbc5d7fac5807c2ce284ce722231f9fe8c37f90d)** to **[3b51d5d](https://github.com/sagemath/sagetrac-mirror/commit/3b51d5d1df89e46e310e0bbc985c73ae06e01bad)**



---

archive/issue_events_072142.json:
```json
{
    "actor": "https://github.com/adeines",
    "created_at": "2016-03-25T00:21:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6018#event-72142"
}
```



---

archive/issue_events_072143.json:
```json
{
    "actor": "https://github.com/adeines",
    "created_at": "2016-03-25T00:21:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6018#event-72143"
}
```



---

archive/issue_comments_039375.json:
```json
{
    "body": "Reviewer: **Aly Deines**",
    "created_at": "2016-03-25T00:21:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39375",
    "user": "https://github.com/adeines"
}
```

Reviewer: **Aly Deines**



---

archive/issue_comments_039376.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nLooks good to me.",
    "created_at": "2016-03-25T00:21:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39376",
    "user": "https://github.com/adeines"
}
```

<div id="comment:32" align="right">comment:32</div>

Looks good to me.



---

archive/issue_comments_039377.json:
```json
{
    "body": "Changed keywords from **Dirichlet characters** to **Dirichlet characters, days71**",
    "created_at": "2016-03-25T00:21:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39377",
    "user": "https://github.com/adeines"
}
```

Changed keywords from **Dirichlet characters** to **Dirichlet characters, days71**



---

archive/issue_events_072144.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-03-25T17:34:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6018#event-72144"
}
```



---

archive/issue_events_072145.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-03-25T17:34:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6018#event-72145"
}
```



---

archive/issue_comments_039378.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nDoctests fail",
    "created_at": "2016-03-25T17:34:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39378",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:33" align="right">comment:33</div>

Doctests fail



---

archive/issue_comments_039379.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nhttp://build.sagedev.org/release/builders/%20%20slow%20AIMS%20%20%28Debian%207%2032%20bit%29%20incremental/builds/439/steps/shell_4/logs/stdio",
    "created_at": "2016-03-25T17:36:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39379",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:34" align="right">comment:34</div>

http://build.sagedev.org/release/builders/%20%20slow%20AIMS%20%20%28Debian%207%2032%20bit%29%20incremental/builds/439/steps/shell_4/logs/stdio



---

archive/issue_comments_039380.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@vbraun](#comment:34):\n> http://build.sagedev.org/release/builders/%20%20slow%20AIMS%20%20%28Debian%207%2032%20bit%29%20incremental/builds/439/steps/shell_4/logs/stdio\n\nFrom the failing doctest in `cachefunc.pyx`, it seems that #15692 is also merged in that branch; I suspect the failure is actually due to that ticket (cf. [#15692 comment:48](https://github.com/sagemath/sage/issues/15692#comment:48)).",
    "created_at": "2016-03-26T09:12:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39380",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@vbraun](#comment:34):
> http://build.sagedev.org/release/builders/%20%20slow%20AIMS%20%20%28Debian%207%2032%20bit%29%20incremental/builds/439/steps/shell_4/logs/stdio

From the failing doctest in `cachefunc.pyx`, it seems that #15692 is also merged in that branch; I suspect the failure is actually due to that ticket (cf. [#15692 comment:48](https://github.com/sagemath/sage/issues/15692#comment:48)).



---

archive/issue_events_072146.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2016-03-26T09:12:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6018#event-72146"
}
```



---

archive/issue_events_072147.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2016-03-26T09:12:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6018#event-72147"
}
```



---

archive/issue_events_072148.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-03-27T07:44:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6018#event-72148"
}
```



---

archive/issue_events_072149.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "e88cb55c72ca26d71c9ba09b4a261501912075c6",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-03-27T07:44:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6018#event-72149"
}
```



---

archive/issue_comments_039381.json:
```json
{
    "body": "Changed branch from **[u/pbruin/6018-DirichletGroup_zeta](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/6018-DirichletGroup_zeta)** to **[3b51d5d](https://github.com/sagemath/sagetrac-mirror/commit/3b51d5d1df89e46e310e0bbc985c73ae06e01bad)**",
    "created_at": "2016-03-27T07:44:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6018",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6018#issuecomment-39381",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/pbruin/6018-DirichletGroup_zeta](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/6018-DirichletGroup_zeta)** to **[3b51d5d](https://github.com/sagemath/sagetrac-mirror/commit/3b51d5d1df89e46e310e0bbc985c73ae06e01bad)**
