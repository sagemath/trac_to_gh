# Issue 6162: [with patch, positive review] plot_histogram improvments

archive/issues_006162.json:
```json
{
    "body": "Since R's histogram plotting is not working for me, I added some functionality to dft.py's plot_histogram method for IndexedSequences.\nHope this is useful to others.\n\nAssignee: @williamstein\n\nCC:  @cswiercz\n\nKeywords: plot histogram\n\nResolution: fixed\n\nAuthor: David Joyner\n\nReviewer: Chris Swierczewski\n\nMerged: sage-4.1.alpha2\n\nIssue created by migration from https://trac.sagemath.org/ticket/6162\n\n",
    "closed_at": "2009-06-26T17:42:07Z",
    "created_at": "2009-05-30T22:16:10Z",
    "labels": [
        "component: graphics",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.1",
    "title": "[with patch, positive review] plot_histogram improvments",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/6162",
    "user": "https://github.com/wdjoyner"
}
```
Since R's histogram plotting is not working for me, I added some functionality to dft.py's plot_histogram method for IndexedSequences.
Hope this is useful to others.

Assignee: @williamstein

CC:  @cswiercz

Keywords: plot histogram

Resolution: fixed

Author: David Joyner

Reviewer: Chris Swierczewski

Merged: sage-4.1.alpha2

Issue created by migration from https://trac.sagemath.org/ticket/6162





---

archive/issue_comments_054501.json:
```json
{
    "body": "Attachment [trac_6162-histogram.patch](tarball://root/attachments/some-uuid/ticket6162/trac_6162-histogram.patch) by @wdjoyner created at 2009-05-30 22:20:45\n\nbased on 4.0.rc1",
    "created_at": "2009-05-30T22:20:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6162#issuecomment-54501",
    "user": "https://github.com/wdjoyner"
}
```

Attachment [trac_6162-histogram.patch](tarball://root/attachments/some-uuid/ticket6162/trac_6162-histogram.patch) by @wdjoyner created at 2009-05-30 22:20:45

based on 4.0.rc1



---

archive/issue_comments_054502.json:
```json
{
    "body": "<a id='comment:1'></a>This passes sage -testall on an amd64 ubuntu 9.04 machine.",
    "created_at": "2009-05-31T01:42:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6162#issuecomment-54502",
    "user": "https://github.com/wdjoyner"
}
```

<a id='comment:1'></a>This passes sage -testall on an amd64 ubuntu 9.04 machine.



---

archive/issue_comments_054503.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,5 @@\n Since R's histogram plotting is not working for me, I added some functionality to dft.py's plot_histogram method for IndexedSequences.\n-Hope this is useful to other.\n-\n-Assignee: tbd\n+Hope this is useful to others.\n \n Summary: plot_histogram improvments\n \n``````\n",
    "created_at": "2009-05-31T01:43:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6162#issuecomment-54503",
    "user": "https://github.com/wdjoyner"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,5 @@
 Since R's histogram plotting is not working for me, I added some functionality to dft.py's plot_histogram method for IndexedSequences.
-Hope this is useful to other.
-
-Assignee: tbd
+Hope this is useful to others.
 
 Summary: plot_histogram improvments
 
``````




---

archive/issue_comments_054504.json:
```json
{
    "body": "Changing component from algebra to graphics.",
    "created_at": "2009-06-01T03:03:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6162#issuecomment-54504",
    "user": "https://github.com/wdjoyner"
}
```

Changing component from algebra to graphics.



---

archive/issue_comments_054505.json:
```json
{
    "body": "Changing assignee from tbd to @williamstein.",
    "created_at": "2009-06-01T03:03:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6162#issuecomment-54505",
    "user": "https://github.com/wdjoyner"
}
```

Changing assignee from tbd to @williamstein.



---

archive/issue_comments_054506.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2009-06-01T03:03:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6162#issuecomment-54506",
    "user": "https://github.com/wdjoyner"
}
```

Changing priority from major to minor.



---

archive/issue_comments_054507.json:
```json
{
    "body": "<a id='comment:4'></a>Original patch was not great; this one is more configurable, fixes a bug in the plot command, and fixes some of the zillion typos throughout.\n\nwdj, ispell-comments-and-strings in emacs is your friend.  That and flyspell-mode.",
    "created_at": "2009-06-15T19:06:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6162#issuecomment-54507",
    "user": "https://github.com/ncalexan"
}
```

<a id='comment:4'></a>Original patch was not great; this one is more configurable, fixes a bug in the plot command, and fixes some of the zillion typos throughout.

wdj, ispell-comments-and-strings in emacs is your friend.  That and flyspell-mode.



---

archive/issue_events_014487.json:
```json
{
    "actor": "https://github.com/ncalexan",
    "created_at": "2009-06-15T19:06:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/6162",
    "milestone": "sage-4.0.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/6162#event-14487"
}
```



---

archive/issue_comments_054508.json:
```json
{
    "body": "Changing keywords from \"\" to \"plot histogram\".",
    "created_at": "2009-06-15T19:06:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6162#issuecomment-54508",
    "user": "https://github.com/ncalexan"
}
```

Changing keywords from "" to "plot histogram".



---

archive/issue_comments_054509.json:
```json
{
    "body": "Changing author from \"\" to \"Nick Alexander\"",
    "created_at": "2009-06-15T19:06:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6162#issuecomment-54509",
    "user": "https://github.com/ncalexan"
}
```

Changing author from "" to "Nick Alexander"



---

archive/issue_comments_054510.json:
```json
{
    "body": "<a id='comment:5'></a>Attachment [trac_6162-plotting.patch](tarball://root/attachments/some-uuid/ticket6162/trac_6162-plotting.patch) by @wdjoyner created at 2009-06-15 20:35:28\n\nThanks Nick!\n\nShould I review your patches or does someone other than the 2 of us review both patches?",
    "created_at": "2009-06-15T20:35:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6162#issuecomment-54510",
    "user": "https://github.com/wdjoyner"
}
```

<a id='comment:5'></a>Attachment [trac_6162-plotting.patch](tarball://root/attachments/some-uuid/ticket6162/trac_6162-plotting.patch) by @wdjoyner created at 2009-06-15 20:35:28

Thanks Nick!

Should I review your patches or does someone other than the 2 of us review both patches?



---

archive/issue_comments_054511.json:
```json
{
    "body": "Changing reviewer from \"\" to \"cswiercz\"",
    "created_at": "2009-06-23T16:05:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6162#issuecomment-54511",
    "user": "https://github.com/cswiercz"
}
```

Changing reviewer from "" to "cswiercz"



---

archive/issue_comments_054512.json:
```json
{
    "body": "<a id='comment:7'></a>Nick,\n\nI have very bad luck with your patches. :( Is `trac_6162-plotting.patch` also based on 4.0.rc1? I tried applying it to 4.0.2 after successfully applying `trac_6162-histogram.patch` and I received the following error:\n\n```\nsage: hg_sage.apply(\"trac_6162-plotting.patch\")\ncd \"/home/cswiercz/sage/devel/sage\" && hg status\ncd \"/home/cswiercz/sage/devel/sage\" && hg status\ncd \"/home/cswiercz/sage/devel/sage\" && hg import   \"/home/cswiercz/trac_6162-plotting.patch\"\napplying /home/cswiercz/trac_6162-plotting.patch\npatching file sage/gsl/dft.py\nHunk #2 FAILED at 52\nHunk #3 FAILED at 156\n2 out of 4 hunks FAILED -- saving rejects to file sage/gsl/dft.py.rej\nabort: patch failed to apply\n```\n\nThis was done on a local sage.math install. I wonder if there were changes to `sage/gsl/dft.py` between the two versions...\n\nI don't have a 4.0.rc1 install anywhere so I'll have to get that up and running in order to review.",
    "created_at": "2009-06-23T16:21:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6162#issuecomment-54512",
    "user": "https://github.com/cswiercz"
}
```

<a id='comment:7'></a>Nick,

I have very bad luck with your patches. :( Is `trac_6162-plotting.patch` also based on 4.0.rc1? I tried applying it to 4.0.2 after successfully applying `trac_6162-histogram.patch` and I received the following error:

```
sage: hg_sage.apply("trac_6162-plotting.patch")
cd "/home/cswiercz/sage/devel/sage" && hg status
cd "/home/cswiercz/sage/devel/sage" && hg status
cd "/home/cswiercz/sage/devel/sage" && hg import   "/home/cswiercz/trac_6162-plotting.patch"
applying /home/cswiercz/trac_6162-plotting.patch
patching file sage/gsl/dft.py
Hunk #2 FAILED at 52
Hunk #3 FAILED at 156
2 out of 4 hunks FAILED -- saving rejects to file sage/gsl/dft.py.rej
abort: patch failed to apply
```

This was done on a local sage.math install. I wonder if there were changes to `sage/gsl/dft.py` between the two versions...

I don't have a 4.0.rc1 install anywhere so I'll have to get that up and running in order to review.



---

archive/issue_comments_054513.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:7 cswiercz]:\n> Nick,\n> \n> I have very bad luck with your patches. :( Is `trac_6162-plotting.patch` also based on 4.0.rc1? I tried applying it to 4.0.2 after successfully applying `trac_6162-histogram.patch` and I received the following error:\n\n\nSorry, I wasn't clear.  Apply *only* `-histogram.patch`.",
    "created_at": "2009-06-23T16:37:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6162#issuecomment-54513",
    "user": "https://github.com/ncalexan"
}
```

<a id='comment:8'></a>Replying to [comment:7 cswiercz]:
> Nick,
> 
> I have very bad luck with your patches. :( Is `trac_6162-plotting.patch` also based on 4.0.rc1? I tried applying it to 4.0.2 after successfully applying `trac_6162-histogram.patch` and I received the following error:


Sorry, I wasn't clear.  Apply *only* `-histogram.patch`.



---

archive/issue_comments_054514.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [comment:8 ncalexan]:\n> Sorry, I wasn't clear.  Apply *only* `-histogram.patch`.\n\n\nPerhaps I don't understand the difference between a histogram of a set of values and a histogram of an _indexed_ set of values but it seems to me that the following should output the familiar \"bell-shaped\" distribution:\n\n```\nsage: J = [ZZ(n) for n in range(10^3)]\nsage: A = [RR(gauss(0,1)) for n in range(10^3)]\nsage: s = IndexedSequence(A,J)\nsage: P = s.plot_histogram()\n```\n\nHowever, this looks pretty much the same as\n\n```\nsage: Q = s.plot()\n```\n\nAlso, the following is closer to the bell curve but it still doesn't capture what's going on: (swapping the `IndexedSequence` inputs)\n\n```\nsage: t = IndexedSequence(J,A)\nsage: R = t.plot_histogram()\n```\n\nI'm just wondering if I'm missing something.\n\nFinally, `finance.timeseries.TimeSeries` has a `plot_histogram` method that seems to work pretty well. Maybe you can use it somehow? Anyway, those are just my thoughts. Again, if I'm missing something I'll be happy to take another look.",
    "created_at": "2009-06-23T20:19:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6162#issuecomment-54514",
    "user": "https://github.com/cswiercz"
}
```

<a id='comment:9'></a>Replying to [comment:8 ncalexan]:
> Sorry, I wasn't clear.  Apply *only* `-histogram.patch`.


Perhaps I don't understand the difference between a histogram of a set of values and a histogram of an _indexed_ set of values but it seems to me that the following should output the familiar "bell-shaped" distribution:

```
sage: J = [ZZ(n) for n in range(10^3)]
sage: A = [RR(gauss(0,1)) for n in range(10^3)]
sage: s = IndexedSequence(A,J)
sage: P = s.plot_histogram()
```

However, this looks pretty much the same as

```
sage: Q = s.plot()
```

Also, the following is closer to the bell curve but it still doesn't capture what's going on: (swapping the `IndexedSequence` inputs)

```
sage: t = IndexedSequence(J,A)
sage: R = t.plot_histogram()
```

I'm just wondering if I'm missing something.

Finally, `finance.timeseries.TimeSeries` has a `plot_histogram` method that seems to work pretty well. Maybe you can use it somehow? Anyway, those are just my thoughts. Again, if I'm missing something I'll be happy to take another look.



---

archive/issue_comments_054515.json:
```json
{
    "body": "<a id='comment:10'></a>I don't know why you expect your example to look like a bell curve.\nIn any case, there are too many points for plot_histogram to work with your example. Try\n\n```\nsage: J = [ZZ(n) for n in range(10)]\nsage: A = [RR(gauss(0,1)) for n in range(10)]\nsage: s = IndexedSequence(A,J)\nsage: P = s.plot_histogram()\nsage: show(P)\n```\nRegarding your suggestion to use , I get:\n\n```\nsage: import finance.timeseries.TimeSeries\n---------------------------------------------------------------------------\nImportError                               Traceback (most recent call last)\n\n....\n```\nCan you be more specific?",
    "created_at": "2009-06-23T20:45:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6162#issuecomment-54515",
    "user": "https://github.com/wdjoyner"
}
```

<a id='comment:10'></a>I don't know why you expect your example to look like a bell curve.
In any case, there are too many points for plot_histogram to work with your example. Try

```
sage: J = [ZZ(n) for n in range(10)]
sage: A = [RR(gauss(0,1)) for n in range(10)]
sage: s = IndexedSequence(A,J)
sage: P = s.plot_histogram()
sage: show(P)
```
Regarding your suggestion to use , I get:

```
sage: import finance.timeseries.TimeSeries
---------------------------------------------------------------------------
ImportError                               Traceback (most recent call last)

....
```
Can you be more specific?



---

archive/issue_comments_054516.json:
```json
{
    "body": "<a id='comment:11'></a>Now I see what you meant.\n\nI think you meant to compare the following plots:\n\n```\nsage: J = [ZZ(n) for n in range(10)]\nsage: A = [RR(gauss(0,1)) for n in range(10)]\nsage: s = IndexedSequence(A,J)\nsage: s.plot_histogram()\nsage: t = finance.TimeSeries(A); t\n[0.6636, 0.7983, -0.1451, 0.0838, -0.4355, -0.5719, 0.2572, 1.2802, -1.2696, -0.0642]\nsage: t.plot_histogram()\n```\nIf so, you can see that they are completely different. I don't see how to use the `sage/finance/time_series.pyx`\nfor this purpose.",
    "created_at": "2009-06-24T08:24:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6162#issuecomment-54516",
    "user": "https://github.com/wdjoyner"
}
```

<a id='comment:11'></a>Now I see what you meant.

I think you meant to compare the following plots:

```
sage: J = [ZZ(n) for n in range(10)]
sage: A = [RR(gauss(0,1)) for n in range(10)]
sage: s = IndexedSequence(A,J)
sage: s.plot_histogram()
sage: t = finance.TimeSeries(A); t
[0.6636, 0.7983, -0.1451, 0.0838, -0.4355, -0.5719, 0.2572, 1.2802, -1.2696, -0.0642]
sage: t.plot_histogram()
```
If so, you can see that they are completely different. I don't see how to use the `sage/finance/time_series.pyx`
for this purpose.



---

archive/issue_comments_054517.json:
```json
{
    "body": "<a id='comment:12'></a>Using your example, I'm just curious is there's any difference between the following two plots: (aside from the default red indexing below each bar in the plot)\n\n```\nsage: J = [ZZ(n) for n in range(10)]\nsage: A = [RR(gauss(0,1)) for n in range(10)]\nsage: s = IndexedSequence(A,J)\nsage: s.plot_histogram()\nsage: bar_chart(s.list())\n```\n\nThe only difference I can see is bar placement. (The indexing set easily allows you to place the bars in `IndexedSequence().plot_histogram()` wherever you like.) I'm sure that there's a lot of application for kind of plot with an indexed set.\n\nI tested the functionality of your code and, from my observations, it works great! Therefore, I give it a positive review. I just wanted a little bit of clarification on what kind of information the `plot_histogram()` method was actually presenting.\n\nSorry if my questions caused too much of a problem.",
    "created_at": "2009-06-24T17:32:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6162#issuecomment-54517",
    "user": "https://github.com/cswiercz"
}
```

<a id='comment:12'></a>Using your example, I'm just curious is there's any difference between the following two plots: (aside from the default red indexing below each bar in the plot)

```
sage: J = [ZZ(n) for n in range(10)]
sage: A = [RR(gauss(0,1)) for n in range(10)]
sage: s = IndexedSequence(A,J)
sage: s.plot_histogram()
sage: bar_chart(s.list())
```

The only difference I can see is bar placement. (The indexing set easily allows you to place the bars in `IndexedSequence().plot_histogram()` wherever you like.) I'm sure that there's a lot of application for kind of plot with an indexed set.

I tested the functionality of your code and, from my observations, it works great! Therefore, I give it a positive review. I just wanted a little bit of clarification on what kind of information the `plot_histogram()` method was actually presenting.

Sorry if my questions caused too much of a problem.



---

archive/issue_comments_054518.json:
```json
{
    "body": "<a id='comment:13'></a>Thanks for the link to {{{bar_chart}}. It is similar, except that plot_histogram has an option which allows you to vary the thickness of the bars. \n\nThese \"improvements\" to the `plot_histogram` function are used to present a histogram of the aggregate totals in a course, especially for a multiple-choice machine-graded exam. Boring but the specific format was required for what I was trying to do.",
    "created_at": "2009-06-24T23:39:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6162#issuecomment-54518",
    "user": "https://github.com/wdjoyner"
}
```

<a id='comment:13'></a>Thanks for the link to {{{bar_chart}}. It is similar, except that plot_histogram has an option which allows you to vary the thickness of the bars. 

These "improvements" to the `plot_histogram` function are used to present a histogram of the aggregate totals in a course, especially for a multiple-choice machine-graded exam. Boring but the specific format was required for what I was trying to do.



---

archive/issue_comments_054519.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-4.1.alpha2\"",
    "created_at": "2009-06-26T17:42:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6162#issuecomment-54519",
    "user": "https://trac.sagemath.org/admin/accounts/users/boothby"
}
```

Changing merged from "" to "sage-4.1.alpha2"



---

archive/issue_comments_054520.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2009-06-26T17:42:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6162#issuecomment-54520",
    "user": "https://trac.sagemath.org/admin/accounts/users/boothby"
}
```

Resolution: fixed



---

archive/issue_events_014488.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/boothby",
    "created_at": "2009-06-26T17:42:07Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/6162",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/6162#event-14488"
}
```



---

archive/issue_comments_054521.json:
```json
{
    "body": "Changing reviewer from \"cswiercz\" to \"Chris Swierczewski\"",
    "created_at": "2009-06-26T19:56:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6162#issuecomment-54521",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

Changing reviewer from "cswiercz" to "Chris Swierczewski"



---

archive/issue_comments_054522.json:
```json
{
    "body": "Changing author from \"Nick Alexander\" to \"David Joyner\"",
    "created_at": "2009-07-12T04:09:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6162#issuecomment-54522",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

Changing author from "Nick Alexander" to "David Joyner"



---

archive/issue_comments_054523.json:
```json
{
    "body": "<a id='comment:16'></a>Merged `trac_6162-histogram.patch` in sage-4.1.alpha2. That is David Joyner's patch, and it is now changeset 12600:c169b5109084.",
    "created_at": "2009-07-12T04:09:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6162#issuecomment-54523",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

<a id='comment:16'></a>Merged `trac_6162-histogram.patch` in sage-4.1.alpha2. That is David Joyner's patch, and it is now changeset 12600:c169b5109084.
