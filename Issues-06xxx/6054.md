# Issue 6054: [with patch, positive review] fix display2d with ecl on OSX

archive/issues_006054.json:
```json
{
    "body": "```\n * ecl causes about two bugs and a half on OSX and probably some other\nsystems. __repr__ seems to cause sync issues, there is some problem\nwith numerical noise and the list of Maxima commands seems to have\ndifferent orderings on different platforms. All this can be fixed with\ntoo many problems. The doctests affected:\n\n32 bit OSX 10.5/Intel:\n\n       sage -t -long \"devel/sage/doc/en/constructions/calculus.rst\"\n       sage -t -long \"devel/sage/doc/en/constructions/\npolynomials.rst\"\n       sage -t -long \"devel/sage/doc/en/tutorial/introduction.rst\"\n       sage -t -long \"devel/sage/doc/en/tutorial/tour_algebra.rst\"\n       sage -t -long \"devel/sage/doc/fr/tutorial/introduction.rst\"\n       sage -t -long \"devel/sage/doc/fr/tutorial/tour_algebra.rst\"\n       sage -t -long \"devel/sage/sage/calculus/calculus.py\"\n       sage -t -long \"devel/sage/sage/calculus/equations.py\"\n       sage -t -long \"devel/sage/sage/calculus/functional.py\"\n       sage -t -long \"devel/sage/sage/calculus/test_sympy.py\"\n       sage -t -long \"devel/sage/sage/calculus/tests.py\"\n       sage -t -long \"devel/sage/sage/calculus/wester.py\"\n       sage -t -long \"devel/sage/sage/interfaces/maxima.py\"\n       sage -t -long \"devel/sage/sage/schemes/elliptic_curves/\nell_generic.py\"\n       sage -t -long \"devel/sage/sage/symbolic/expression.pyx\"\n\nnoise/blankline of \"print $FOO\" type\n\n64 bit OSX 10.5/Intel\n\n       sage -t -long \"devel/sage/doc/en/constructions/calculus.rst\"\n       sage -t -long \"devel/sage/doc/en/constructions/\npolynomials.rst\"\n       sage -t -long \"devel/sage/doc/en/tutorial/introduction.rst\"\n       sage -t -long \"devel/sage/doc/en/tutorial/tour_algebra.rst\"\n       sage -t -long \"devel/sage/doc/fr/tutorial/introduction.rst\"\n       sage -t -long \"devel/sage/doc/fr/tutorial/tour_algebra.rst\"\n       sage -t -long \"devel/sage/sage/calculus/calculus.py\"\n       sage -t -long \"devel/sage/sage/calculus/equations.py\"\n       sage -t -long \"devel/sage/sage/calculus/functional.py\"\n       sage -t -long \"devel/sage/sage/calculus/test_sympy.py\"\n       sage -t -long \"devel/sage/sage/calculus/tests.py\"\n       sage -t -long \"devel/sage/sage/calculus/wester.py\"\n       sage -t -long \"devel/sage/sage/interfaces/maxima.py\"\n       sage -t -long \"devel/sage/sage/schemes/elliptic_curves/\nell_generic.py\"\n       sage -t -long \"devel/sage/sage/symbolic/expression.pyx\"\n```\n\nAssignee: mabshoff\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/6054\n\n",
    "closed_at": "2009-05-18T13:17:08Z",
    "created_at": "2009-05-17T06:05:05Z",
    "labels": [
        "component: doctest coverage",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.0",
    "title": "[with patch, positive review] fix display2d with ecl on OSX",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/6054",
    "user": "https://github.com/mwhansen"
}
```
```
 * ecl causes about two bugs and a half on OSX and probably some other
systems. __repr__ seems to cause sync issues, there is some problem
with numerical noise and the list of Maxima commands seems to have
different orderings on different platforms. All this can be fixed with
too many problems. The doctests affected:

32 bit OSX 10.5/Intel:

       sage -t -long "devel/sage/doc/en/constructions/calculus.rst"
       sage -t -long "devel/sage/doc/en/constructions/
polynomials.rst"
       sage -t -long "devel/sage/doc/en/tutorial/introduction.rst"
       sage -t -long "devel/sage/doc/en/tutorial/tour_algebra.rst"
       sage -t -long "devel/sage/doc/fr/tutorial/introduction.rst"
       sage -t -long "devel/sage/doc/fr/tutorial/tour_algebra.rst"
       sage -t -long "devel/sage/sage/calculus/calculus.py"
       sage -t -long "devel/sage/sage/calculus/equations.py"
       sage -t -long "devel/sage/sage/calculus/functional.py"
       sage -t -long "devel/sage/sage/calculus/test_sympy.py"
       sage -t -long "devel/sage/sage/calculus/tests.py"
       sage -t -long "devel/sage/sage/calculus/wester.py"
       sage -t -long "devel/sage/sage/interfaces/maxima.py"
       sage -t -long "devel/sage/sage/schemes/elliptic_curves/
ell_generic.py"
       sage -t -long "devel/sage/sage/symbolic/expression.pyx"

noise/blankline of "print $FOO" type

64 bit OSX 10.5/Intel

       sage -t -long "devel/sage/doc/en/constructions/calculus.rst"
       sage -t -long "devel/sage/doc/en/constructions/
polynomials.rst"
       sage -t -long "devel/sage/doc/en/tutorial/introduction.rst"
       sage -t -long "devel/sage/doc/en/tutorial/tour_algebra.rst"
       sage -t -long "devel/sage/doc/fr/tutorial/introduction.rst"
       sage -t -long "devel/sage/doc/fr/tutorial/tour_algebra.rst"
       sage -t -long "devel/sage/sage/calculus/calculus.py"
       sage -t -long "devel/sage/sage/calculus/equations.py"
       sage -t -long "devel/sage/sage/calculus/functional.py"
       sage -t -long "devel/sage/sage/calculus/test_sympy.py"
       sage -t -long "devel/sage/sage/calculus/tests.py"
       sage -t -long "devel/sage/sage/calculus/wester.py"
       sage -t -long "devel/sage/sage/interfaces/maxima.py"
       sage -t -long "devel/sage/sage/schemes/elliptic_curves/
ell_generic.py"
       sage -t -long "devel/sage/sage/symbolic/expression.pyx"
```

Assignee: mabshoff

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/6054





---

archive/issue_comments_053284.json:
```json
{
    "body": "<a id='comment:1'></a>Attachment [maxima_display2d.patch](tarball://root/attachments/some-uuid/ticket6054/maxima_display2d.patch) by mabshoff created at 2009-05-18 12:44:08\n\nThanks. Great patch. But the semicolon removal in the patch\n\n```\n--- a/sage/interfaces/maxima.py Fri May 15 18:39:25 2009 -0700\n+++ b/sage/interfaces/maxima.py Sat May 16 23:30:51 2009 -0700\n@@ -755,7 +755,7 @@\n         if self._expect is None: return\n         r = randrange(2147483647)\n         s = marker + str(r+1)\n-        cmd = ''';sconcat(\"%s\",(%s+1));\\n'''%(marker,r)\n+        cmd = '''sconcat(\"%s\",(%s+1));\\n'''%(marker,r)\n         self._sendstr(cmd)\n         try:\n             self._expect_expr(timeout=0.5)\n```\ncauses sync issues on sage.math, so I am taking it out.\n\nCheers,\n\nMichael",
    "created_at": "2009-05-18T12:44:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6054#issuecomment-53284",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:1'></a>Attachment [maxima_display2d.patch](tarball://root/attachments/some-uuid/ticket6054/maxima_display2d.patch) by mabshoff created at 2009-05-18 12:44:08

Thanks. Great patch. But the semicolon removal in the patch

```
--- a/sage/interfaces/maxima.py Fri May 15 18:39:25 2009 -0700
+++ b/sage/interfaces/maxima.py Sat May 16 23:30:51 2009 -0700
@@ -755,7 +755,7 @@
         if self._expect is None: return
         r = randrange(2147483647)
         s = marker + str(r+1)
-        cmd = ''';sconcat("%s",(%s+1));\n'''%(marker,r)
+        cmd = '''sconcat("%s",(%s+1));\n'''%(marker,r)
         self._sendstr(cmd)
         try:
             self._expect_expr(timeout=0.5)
```
causes sync issues on sage.math, so I am taking it out.

Cheers,

Michael



---

archive/issue_comments_053285.json:
```json
{
    "body": "<a id='comment:2'></a>Attachment [trac_6054_maxima_display2d.patch](tarball://root/attachments/some-uuid/ticket6054/trac_6054_maxima_display2d.patch) by mabshoff created at 2009-05-18 13:16:54\n\nThe patch I just posted replaces Mike's patch and also fixes the failure in \n\n```\ndevel/sage/doc/en/constructions/calculus.rst\n```\nthat Mike did point out he forgot to change when he cut the patch. I committed in Mike's name obviously ;)\n\nCheers,\n\nMichael",
    "created_at": "2009-05-18T13:16:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6054#issuecomment-53285",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:2'></a>Attachment [trac_6054_maxima_display2d.patch](tarball://root/attachments/some-uuid/ticket6054/trac_6054_maxima_display2d.patch) by mabshoff created at 2009-05-18 13:16:54

The patch I just posted replaces Mike's patch and also fixes the failure in 

```
devel/sage/doc/en/constructions/calculus.rst
```
that Mike did point out he forgot to change when he cut the patch. I committed in Mike's name obviously ;)

Cheers,

Michael



---

archive/issue_events_014211.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2009-05-18T13:17:08Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/6054",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/6054#event-14211"
}
```



---

archive/issue_comments_053286.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2009-05-18T13:17:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6054#issuecomment-53286",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

Resolution: fixed



---

archive/issue_comments_053287.json:
```json
{
    "body": "<a id='comment:3'></a>Merged in Sage 4.0.rc0.\n\nCheers,\n\nMichael",
    "created_at": "2009-05-18T13:17:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6054",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6054#issuecomment-53287",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:3'></a>Merged in Sage 4.0.rc0.

Cheers,

Michael
