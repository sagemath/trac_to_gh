# Issue 6781: Library access to ecl

archive/issues_006781.json:
```json
{
    "assignees": [],
    "body": "ecl can be run \"embedded\" and has a fairly clean C interface, which should be tightly wrappable in cython.\nThere are good macros provided for accessing ecl objects, and many of the atomic values should be fairly easily mappable to/from sage or python native datatypes. Hence, data communication on binary level with the ecl library should be doable, and would be a stepping stone towards a binary interface with maxima.\n\nISSUES:\n\n1. I quote from Section 5.2 of the ECL reference manual:\n\nThe collector will not scan the data sectors. If you embed ECL in another program, or link libraries with ECL, you will have to notify ECL which variables point to lisp objects.\n\nSOLUTION: Boehm does look on the stack for pointers, so the only objects in danger are on the heap, outside of Boehm's control. The easiest solution is to place pointers somewhere in a list or a vector inside lisp's control (in some global variable).\n\n2. Maxima currently gets built as a stand-alone executable. We need Maxima loaded, but not running.\n\nSOLUTION: It is possible to extract the right kind of image.\n a) remove the last line from  init-cl.lisp, since this starts\n    maxima's read-eval-print loop\n b) start ecl and run:\n    (require 'asdf)\n    (load \"maxima-build.lisp\")\n    (asdf:make-build :maxima :type :fasl)\n c) this produces a file \"maxima.fasb\" that can be loaded into ecl\n    after (require 'asdf)\n\n3. ecl installs a signal and error handler that wreaks havoc with\nthe sage environment. It should be possible to turn the error handler / debugger off via common lisp. The signal handler needs to be handled separately\n\n4. after ecl has run in sage, exit triggers a segfault.\n\n---\n\nAll issues have been resolved and ecllib.patch should apply cleanly\nto add Ecl library support. The Ecl package has already been updated\ndue to other reasons (at least in 4.1.2) to a version that supports\nthe necessary options.\n\nAssignee: **@nbruin**\n\nCC:  @burcin\n\nKeywords: **ecl, library**\n\nAuthor: **Nils Bruin**\n\nReviewer: **Burcin Erocal, Karl-Dieter Crisman, Nils Bruin**\n\nMerged: **sage-4.4.alpha0**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/6781_\n\n",
    "closed_at": "2010-04-16T17:15:19Z",
    "created_at": "2009-08-20T20:00:57Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20interfaces",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Library access to ecl",
    "type": "issue",
    "updated_at": "2010-04-16T17:15:19Z",
    "url": "https://github.com/sagemath/sage/issues/6781",
    "user": "https://github.com/nbruin"
}
```
ecl can be run "embedded" and has a fairly clean C interface, which should be tightly wrappable in cython.
There are good macros provided for accessing ecl objects, and many of the atomic values should be fairly easily mappable to/from sage or python native datatypes. Hence, data communication on binary level with the ecl library should be doable, and would be a stepping stone towards a binary interface with maxima.

ISSUES:

1. I quote from Section 5.2 of the ECL reference manual:

The collector will not scan the data sectors. If you embed ECL in another program, or link libraries with ECL, you will have to notify ECL which variables point to lisp objects.

SOLUTION: Boehm does look on the stack for pointers, so the only objects in danger are on the heap, outside of Boehm's control. The easiest solution is to place pointers somewhere in a list or a vector inside lisp's control (in some global variable).

2. Maxima currently gets built as a stand-alone executable. We need Maxima loaded, but not running.

SOLUTION: It is possible to extract the right kind of image.
 a) remove the last line from  init-cl.lisp, since this starts
    maxima's read-eval-print loop
 b) start ecl and run:
    (require 'asdf)
    (load "maxima-build.lisp")
    (asdf:make-build :maxima :type :fasl)
 c) this produces a file "maxima.fasb" that can be loaded into ecl
    after (require 'asdf)

3. ecl installs a signal and error handler that wreaks havoc with
the sage environment. It should be possible to turn the error handler / debugger off via common lisp. The signal handler needs to be handled separately

4. after ecl has run in sage, exit triggers a segfault.

---

All issues have been resolved and ecllib.patch should apply cleanly
to add Ecl library support. The Ecl package has already been updated
due to other reasons (at least in 4.1.2) to a version that supports
the necessary options.

Assignee: **@nbruin**

CC:  @burcin

Keywords: **ecl, library**

Author: **Nils Bruin**

Reviewer: **Burcin Erocal, Karl-Dieter Crisman, Nils Bruin**

Merged: **sage-4.4.alpha0**

_Issue created by migration from https://trac.sagemath.org/ticket/6781_





---

archive/issue_events_074322.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2009-08-20T20:00:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "component: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6781#event-74322"
}
```



---

archive/issue_events_074323.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2009-08-20T20:00:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6781#event-74323"
}
```



---

archive/issue_events_074324.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2009-08-20T20:00:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6781#event-74324"
}
```



---

archive/issue_events_074325.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2009-08-20T20:00:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "label": "https://github.com/sagemath/sage/labels/feature",
    "label_color": "008080",
    "label_name": "feature",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6781#event-74325"
}
```



---

archive/issue_comments_049452.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,6 +7,21 @@\n \n The collector will not scan the data sectors. If you embed ECL in another program, or link libraries with ECL, you will have to notify ECL which variables point to lisp objects.\n \n-So, cython wrapper objects that keep track of an object under ECL memory management will have to do something, but the manual doesn't say what.\n+SOLUTION: Boehm does look on the stack for pointers, so the only objects in danger are on the heap, outside of Boehm's control. The easiest solution is to place pointers somewhere in a list or a vector inside lisp's control (in some global variable).\n \n-2. Maxima currently gets built as a stand-alone executable. Somewhere in the build process, there must exist a lisp-environment that has Maxima built but not running. In order to communicate with maxima as a library (via ECL's API), one would have to get such an image. It does look like Maxima just store its state in LISP's global state, so just calling maxima routines from LISP should work.\n+2. Maxima currently gets built as a stand-alone executable. We need Maxima loaded, but not running.\n+\n+SOLUTION: It is possible to extract the right kind of image.\n+ a) remove the last line from  init-cl.lisp, since this starts\n+    maxima's read-eval-print loop\n+ b) start ecl and run:\n+    (require 'asdf)\n+    (load \"maxima-build.lisp\")\n+    (asdf:make-build :maxima :type :fasl)\n+ c) this produces a file \"maxima.fasb\" that can be loaded into ecl\n+    after (require 'asdf)\n+\n+3. ecl installs a signal and error handler that wreaks havoc with\n+the sage environment. It should be possible to turn the error handler / debugger off via common lisp. The signal handler needs to be handled separately\n+\n+4. after ecl has run in sage, exit triggers a segfault.\n``````\n",
    "created_at": "2009-08-22T00:03:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49452",
    "user": "https://github.com/nbruin"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,6 +7,21 @@
 
 The collector will not scan the data sectors. If you embed ECL in another program, or link libraries with ECL, you will have to notify ECL which variables point to lisp objects.
 
-So, cython wrapper objects that keep track of an object under ECL memory management will have to do something, but the manual doesn't say what.
+SOLUTION: Boehm does look on the stack for pointers, so the only objects in danger are on the heap, outside of Boehm's control. The easiest solution is to place pointers somewhere in a list or a vector inside lisp's control (in some global variable).
 
-2. Maxima currently gets built as a stand-alone executable. Somewhere in the build process, there must exist a lisp-environment that has Maxima built but not running. In order to communicate with maxima as a library (via ECL's API), one would have to get such an image. It does look like Maxima just store its state in LISP's global state, so just calling maxima routines from LISP should work.
+2. Maxima currently gets built as a stand-alone executable. We need Maxima loaded, but not running.
+
+SOLUTION: It is possible to extract the right kind of image.
+ a) remove the last line from  init-cl.lisp, since this starts
+    maxima's read-eval-print loop
+ b) start ecl and run:
+    (require 'asdf)
+    (load "maxima-build.lisp")
+    (asdf:make-build :maxima :type :fasl)
+ c) this produces a file "maxima.fasb" that can be loaded into ecl
+    after (require 'asdf)
+
+3. ecl installs a signal and error handler that wreaks havoc with
+the sage environment. It should be possible to turn the error handler / debugger off via common lisp. The signal handler needs to be handled separately
+
+4. after ecl has run in sage, exit triggers a segfault.
``````




---

archive/issue_comments_049453.json:
```json
{
    "body": "Attachment: **[ecllib.2.patch.gz](https://github.com/sagemath/sage/files/ticket6781/ecllib.2.patch.gz)**\n\nPatch to allow library access to ecl",
    "created_at": "2009-08-22T00:04:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49453",
    "user": "https://github.com/nbruin"
}
```

Attachment: **[ecllib.2.patch.gz](https://github.com/sagemath/sage/files/ticket6781/ecllib.2.patch.gz)**

Patch to allow library access to ecl



---

archive/issue_comments_049454.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nthe new patch (which should apply cleanly against 4.1.1) provides enough interface to communicate with ecl via strings.\nas proof of concept, there is also a routine to parse CONSes into python lists. Assuming there is an appropriate Maxima image, this interface can already be used to communicate with Maxima. Example session:\n\n```\nsage: from sage.libs.ecl import *\nsage: init_ecl()\nsage: \nsage: ecl_eval(\"(require 'asdf)\");\n;;; Loading #P\"/usr/local/sage/4.1.1/local/lib/ecl-9.4.1/asdf.fas\"\n;;; Loading #P\"/usr/local/sage/4.1.1/local/lib/ecl-9.4.1/cmp.fas\"\n;;; Loading #P\"/usr/local/sage/4.1.1/local/lib/ecl-9.4.1/sysfun.lsp\"\nsage: ecl_eval('(load \"%s\")'%(SAGE_ROOT+\"/local/lib/maxima/maxima.fasb\"))\n;;; Loading \"/usr/local/sage/4.1.1/local/lib/maxima/maxima.fasb\"\n<ECL: #P\"/usr/local/sage/4.1.1/local/lib/maxima/maxima.fasb\" >\nsage: ecl_eval('(in-package :maxima)')\n<ECL: #<\"MAXIMA\" package> >\nsage: \nsage: #There is a maxima macro to ease expression parsing\nsage: string_to_object(\"#$x^2$\")\n<ECL: (MEVAL* '((MEXPT) $X 2)) >\nsage: \nsage: #we can also execute maxima routines\nsage: L=ecl_eval('($integrate #$x^2$ #$x$)')\nsage: L\n<ECL: ((MTIMES SIMP) ((RAT SIMP) 1 3) ((MEXPT SIMP) $X 3)) >\nsage: #rudimentary parsing of ECL constructs into python\nsage: L.python()\n\n[[<ECL: MTIMES >, [<ECL: SIMP >, <ECL: NIL >]],\n [[[<ECL: RAT >, [<ECL: SIMP >, <ECL: NIL >]],\n   [<ECL: 1 >, [<ECL: 3 >, <ECL: NIL >]]],\n  [[[<ECL: MEXPT >, [<ECL: SIMP >, <ECL: NIL >]],\n    [<ECL: $X >, [<ECL: 3 >, <ECL: NIL >]]],\n   <ECL: NIL >]]]\n```",
    "created_at": "2009-08-22T00:09:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49454",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:2" align="right">Comment 2</div>

the new patch (which should apply cleanly against 4.1.1) provides enough interface to communicate with ecl via strings.
as proof of concept, there is also a routine to parse CONSes into python lists. Assuming there is an appropriate Maxima image, this interface can already be used to communicate with Maxima. Example session:

```
sage: from sage.libs.ecl import *
sage: init_ecl()
sage: 
sage: ecl_eval("(require 'asdf)");
;;; Loading #P"/usr/local/sage/4.1.1/local/lib/ecl-9.4.1/asdf.fas"
;;; Loading #P"/usr/local/sage/4.1.1/local/lib/ecl-9.4.1/cmp.fas"
;;; Loading #P"/usr/local/sage/4.1.1/local/lib/ecl-9.4.1/sysfun.lsp"
sage: ecl_eval('(load "%s")'%(SAGE_ROOT+"/local/lib/maxima/maxima.fasb"))
;;; Loading "/usr/local/sage/4.1.1/local/lib/maxima/maxima.fasb"
<ECL: #P"/usr/local/sage/4.1.1/local/lib/maxima/maxima.fasb" >
sage: ecl_eval('(in-package :maxima)')
<ECL: #<"MAXIMA" package> >
sage: 
sage: #There is a maxima macro to ease expression parsing
sage: string_to_object("#$x^2$")
<ECL: (MEVAL* '((MEXPT) $X 2)) >
sage: 
sage: #we can also execute maxima routines
sage: L=ecl_eval('($integrate #$x^2$ #$x$)')
sage: L
<ECL: ((MTIMES SIMP) ((RAT SIMP) 1 3) ((MEXPT SIMP) $X 3)) >
sage: #rudimentary parsing of ECL constructs into python
sage: L.python()

[[<ECL: MTIMES >, [<ECL: SIMP >, <ECL: NIL >]],
 [[[<ECL: RAT >, [<ECL: SIMP >, <ECL: NIL >]],
   [<ECL: 1 >, [<ECL: 3 >, <ECL: NIL >]]],
  [[[<ECL: MEXPT >, [<ECL: SIMP >, <ECL: NIL >]],
    [<ECL: $X >, [<ECL: 3 >, <ECL: NIL >]]],
   <ECL: NIL >]]]
```



---

archive/issue_comments_049455.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nWith the new maxima package, the building of maxima.fasb is even easier. The following lines can be appended to spkg-install in \"maxima-5.19.1.p0.spkg\" (for now available from http://sage.math.washington.edu/home/ghitza/maxima-5.19.1.p0.spkg):\n\n```\ncd src/src\necl -eval \"(require 'asdf)\" -eval '(load \"maxima-build.lisp\")' -eval  '(asdf:make-build :maxima :type :fasl)' -eval \"(quit)\"\ncp maxima.fasb $SAGE_LOCAL/lib/maxima\ncd ../..\n```\nWe should probably try to catch errors a little better, although the hard part of the building has already happened at this point. It might also be nice to build maxima as a \".fas\", which seems to be the more usual format for ecl. We could even just place it in ecl's library then and avoid pathnames altogether.\n\nFurthermore, ecl's cvs version seems to build cleanly in sage too (modulo instabilities inherent to cvs versions). In principle all obstacles have been solved:\n- we can simply remove ECL's signal handlers after boot. As long as sage's signal handlers return when they are supposed to, we should be fine with that.\n- the new rewrites of ecl's bignums allow for an option to prevent ecl from assigning memory management functions to gmp (with very little effect. It only means that some bignum registers will live outside of ecl's normal heap) The memory manager turned out to be the source of the segfault on closing and would have led to segfaults in many extensive computations.",
    "created_at": "2009-09-01T00:20:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49455",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:3" align="right">Comment 3</div>

With the new maxima package, the building of maxima.fasb is even easier. The following lines can be appended to spkg-install in "maxima-5.19.1.p0.spkg" (for now available from http://sage.math.washington.edu/home/ghitza/maxima-5.19.1.p0.spkg):

```
cd src/src
ecl -eval "(require 'asdf)" -eval '(load "maxima-build.lisp")' -eval  '(asdf:make-build :maxima :type :fasl)' -eval "(quit)"
cp maxima.fasb $SAGE_LOCAL/lib/maxima
cd ../..
```
We should probably try to catch errors a little better, although the hard part of the building has already happened at this point. It might also be nice to build maxima as a ".fas", which seems to be the more usual format for ecl. We could even just place it in ecl's library then and avoid pathnames altogether.

Furthermore, ecl's cvs version seems to build cleanly in sage too (modulo instabilities inherent to cvs versions). In principle all obstacles have been solved:
- we can simply remove ECL's signal handlers after boot. As long as sage's signal handlers return when they are supposed to, we should be fine with that.
- the new rewrites of ecl's bignums allow for an option to prevent ecl from assigning memory management functions to gmp (with very little effect. It only means that some bignum registers will live outside of ecl's normal heap) The memory manager turned out to be the source of the segfault on closing and would have led to segfaults in many extensive computations.



---

archive/issue_comments_049456.json:
```json
{
    "body": "As Juanjo suggested on:\n\nhttp://sourceforge.net/mailarchive/message.php?msg_name=c159f9ab0809140803h1cfc3473p17a7b7afb82a4e71%40mail.gmail.com\n\nwe can do a good error-catch by using CL's equivalent of try...except:\n\n```\n(defun my-safe-eval (form)\n    (handler-case\n        (values (eval form))\n        (serious-condition (c) (return-from my-safe-eval (values nil (princ-to-string c))))))\n```\nwe lose any multiple return values, but detecting if an error occurred is cheap via NVALUES. VALUES(1) will be a nice string\ndescribing the error (princ seems to turn the condition object into the most informative string)\n\nFurthermore, it seems that renaming a \".fasb\" to \".fas\" is all that is needed to make the file respond to the usual\n\"require\". If we furthermore symbolically link <ECL-LIBRARY>/maxima.fas to maxima.fasb then loading maxima is really as easy as\n(require 'maxima).\n\nTo find out the pathname of the current ecl library, do \n\n```\necl -eval \"(princ (SI:GET-LIBRARY-PATHNAME))\" -eval \"(quit)\"\n```",
    "created_at": "2009-09-15T01:12:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49456",
    "user": "https://github.com/nbruin"
}
```

As Juanjo suggested on:

http://sourceforge.net/mailarchive/message.php?msg_name=c159f9ab0809140803h1cfc3473p17a7b7afb82a4e71%40mail.gmail.com

we can do a good error-catch by using CL's equivalent of try...except:

```
(defun my-safe-eval (form)
    (handler-case
        (values (eval form))
        (serious-condition (c) (return-from my-safe-eval (values nil (princ-to-string c))))))
```
we lose any multiple return values, but detecting if an error occurred is cheap via NVALUES. VALUES(1) will be a nice string
describing the error (princ seems to turn the condition object into the most informative string)

Furthermore, it seems that renaming a ".fasb" to ".fas" is all that is needed to make the file respond to the usual
"require". If we furthermore symbolically link <ECL-LIBRARY>/maxima.fas to maxima.fasb then loading maxima is really as easy as
(require 'maxima).

To find out the pathname of the current ecl library, do 

```
ecl -eval "(princ (SI:GET-LIBRARY-PATHNAME))" -eval "(quit)"
```



---

archive/issue_comments_049457.json:
```json
{
    "body": "Assignee: **@nbruin**",
    "created_at": "2009-10-26T04:37:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49457",
    "user": "https://github.com/nbruin"
}
```

Assignee: **@nbruin**



---

archive/issue_events_074326.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2009-10-26T04:37:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6781#event-74326"
}
```



---

archive/issue_events_074327.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2009-10-26T04:40:08Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "milestone_number": null,
    "milestone_title": "sage-4.2.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6781#event-74327"
}
```



---

archive/issue_events_074328.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2009-10-26T04:40:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "label": "https://github.com/sagemath/sage/labels/feature",
    "label_color": "008080",
    "label_name": "feature",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6781#event-74328"
}
```



---

archive/issue_comments_049458.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -25,3 +25,10 @@\n the sage environment. It should be possible to turn the error handler / debugger off via common lisp. The signal handler needs to be handled separately\n \n 4. after ecl has run in sage, exit triggers a segfault.\n+\n+---\n+\n+All issues have been resolved and ecllib.patch should apply cleanly\n+to add Ecl library support. The Ecl package has already been updated\n+due to other reasons (at least in 4.1.2) to a version that supports\n+the necessary options.\n``````\n",
    "created_at": "2009-10-26T04:40:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49458",
    "user": "https://github.com/nbruin"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -25,3 +25,10 @@
 the sage environment. It should be possible to turn the error handler / debugger off via common lisp. The signal handler needs to be handled separately
 
 4. after ecl has run in sage, exit triggers a segfault.
+
+---
+
+All issues have been resolved and ecllib.patch should apply cleanly
+to add Ecl library support. The Ecl package has already been updated
+due to other reasons (at least in 4.1.2) to a version that supports
+the necessary options.
``````




---

archive/issue_events_074329.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2009-10-26T04:40:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "component: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6781#event-74329"
}
```



---

archive/issue_events_074330.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2009-10-26T04:40:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6781#event-74330"
}
```



---

archive/issue_events_074331.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2009-11-02T15:44:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6781#event-74331"
}
```



---

archive/issue_events_074332.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2009-11-02T15:44:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6781#event-74332"
}
```



---

archive/issue_comments_049459.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nSo far, this looks good.  For some reason I am having trouble with #7287 working properly, and it's possible this is to blame, but this patch on its own seems ok.  I can't give it a positive review, because I do not know enough about Lisp to competently judge it, but various tests I got from random Lisp websites for things not in the doctests also gave correct answers, which is good!\n\nA couple of very minor things:  I notice a few functions in the 800s which aren't separated by a blank line, which makes it harder to read.  There is also a typo in init_ecl - it should be \"Do not\", not \"No not\".  I also occasionally get output like this:\n\n```\nsage: ecl_eval(\"(command object)\");\noutputsage:\n```\nas opposed to \n\n```\nsage: ecl_eval(\"(command object)\");\noutput\nsage:\n```\nI can't determine very well when this happens, though it seems to occur fairly reliably after various print commands, like \n\n```\nsage: ecl_eval(\"(print 3)\") ;\n\n3 sage: \n```\nNote that if I don't use the ;, since it returns the ECL object, I don't have the problem then:\n\n```\nsage: ecl_eval(\"(print 3)\")\n\n3 <ECL: 3>\nsage: \n```\n\nSo I'm putting this to \"needs work\" because of these very minor issues, but really it seems good and we just need someone who knows something about Lisp to review it!  Looks nice.",
    "created_at": "2009-11-02T15:44:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49459",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:8" align="right">Comment 8</div>

So far, this looks good.  For some reason I am having trouble with #7287 working properly, and it's possible this is to blame, but this patch on its own seems ok.  I can't give it a positive review, because I do not know enough about Lisp to competently judge it, but various tests I got from random Lisp websites for things not in the doctests also gave correct answers, which is good!

A couple of very minor things:  I notice a few functions in the 800s which aren't separated by a blank line, which makes it harder to read.  There is also a typo in init_ecl - it should be "Do not", not "No not".  I also occasionally get output like this:

```
sage: ecl_eval("(command object)");
outputsage:
```
as opposed to 

```
sage: ecl_eval("(command object)");
output
sage:
```
I can't determine very well when this happens, though it seems to occur fairly reliably after various print commands, like 

```
sage: ecl_eval("(print 3)") ;

3 sage: 
```
Note that if I don't use the ;, since it returns the ECL object, I don't have the problem then:

```
sage: ecl_eval("(print 3)")

3 <ECL: 3>
sage: 
```

So I'm putting this to "needs work" because of these very minor issues, but really it seems good and we just need someone who knows something about Lisp to review it!  Looks nice.



---

archive/issue_comments_049460.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nReplying to [@kcrisman](#comment%3A8):\n> \n> ```\n> sage: ecl_eval(\"(command object)\");\n> outputsage:\n> ```\n> as opposed to \n> \n> ```\n> sage: ecl_eval(\"(command object)\");\n> output\n> ```\n\n\n```\nsage: os.system(\"echo hi\");\nhi\nsage: os.system(\"echo -n hi\");\nhisage: \n```\nI think most common lisp print routines do NOT include a trailing newline, so I think the above behaviour is expected. ecl_eval and friends should not send anything to STDOUT by themselves.\n\nThanks for spotting the typos.\n\nI'm changing back to needs_review to invite a more lisp-savvy reviewer.",
    "created_at": "2009-11-02T18:29:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49460",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:9" align="right">Comment 9</div>

Replying to [@kcrisman](#comment%3A8):
> 
> ```
> sage: ecl_eval("(command object)");
> outputsage:
> ```
> as opposed to 
> 
> ```
> sage: ecl_eval("(command object)");
> output
> ```


```
sage: os.system("echo hi");
hi
sage: os.system("echo -n hi");
hisage: 
```
I think most common lisp print routines do NOT include a trailing newline, so I think the above behaviour is expected. ecl_eval and friends should not send anything to STDOUT by themselves.

Thanks for spotting the typos.

I'm changing back to needs_review to invite a more lisp-savvy reviewer.



---

archive/issue_comments_049461.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nIs it possible to do this?\n\nERROR: Please define a s == loads(dumps(s)) doctest.\n\nNow, I get \n\n```\nsage: dumps(x)\n---------------------------------------------------------------------------\nPicklingError                             Traceback (most recent call last)\n<snip>\nPicklingError: Can't pickle <type 'ecl.EclObject'>: import of module ecl failed\n```\nso maybe it isn't possible to do this, but I thought I'd point it out anyway in case it's trivial to fix this and I just don't realize it.",
    "created_at": "2009-11-04T15:14:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49461",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:10" align="right">Comment 10</div>

Is it possible to do this?

ERROR: Please define a s == loads(dumps(s)) doctest.

Now, I get 

```
sage: dumps(x)
---------------------------------------------------------------------------
PicklingError                             Traceback (most recent call last)
<snip>
PicklingError: Can't pickle <type 'ecl.EclObject'>: import of module ecl failed
```
so maybe it isn't possible to do this, but I thought I'd point it out anyway in case it's trivial to fix this and I just don't realize it.



---

archive/issue_events_074333.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2009-11-04T15:14:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6781#event-74333"
}
```



---

archive/issue_events_074334.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2009-11-04T15:14:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6781#event-74334"
}
```



---

archive/issue_comments_049462.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nReplying to [@kcrisman](#comment%3A10):\n> Is it possible to do this?\n> \n> ERROR: Please define a s == loads(dumps(s)) doctest.\n\nI noticed that sage doctesting routines prefer to have a test like that. My first reaction is \"can't be done\". Common Lisp's general approach to saving state is just that: Dump a memory image, so CL is not going to be much help for implementing a workable solution.\n\nI am sure that for many particular ECL structures, one can come up with a reasonable pickling procedure. How do other interfaces solve that (pari, magma, maxima/pexpect, maple)?\n\nFor our intended use of the ECL interface, we do not need pickling. A symbolic expression would get translated to Maxima, processed and translated back into SR. So LISP expressions would not persist beyond short timespans.",
    "created_at": "2009-11-05T16:27:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49462",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:12" align="right">Comment 12</div>

Replying to [@kcrisman](#comment%3A10):
> Is it possible to do this?
> 
> ERROR: Please define a s == loads(dumps(s)) doctest.

I noticed that sage doctesting routines prefer to have a test like that. My first reaction is "can't be done". Common Lisp's general approach to saving state is just that: Dump a memory image, so CL is not going to be much help for implementing a workable solution.

I am sure that for many particular ECL structures, one can come up with a reasonable pickling procedure. How do other interfaces solve that (pari, magma, maxima/pexpect, maple)?

For our intended use of the ECL interface, we do not need pickling. A symbolic expression would get translated to Maxima, processed and translated back into SR. So LISP expressions would not persist beyond short timespans.



---

archive/issue_comments_049463.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\n> I noticed that sage doctesting routines prefer to have a test like that.\n>  My first reaction is \"can't be done\". \n\nYes it can.    If s == loads(dumps(s)) will be false for any element, or raise an error, put a discussion of that fact in a docstring and put in a doctest like this:\n\n```\nsage: s == loads(dumps(s))\nboom or False\n```\nThere's no reason to hide that this doesn't work from users.\n\n> How do other interfaces solve that (pari, magma, maxima/pexpect, maple)\n\nmagma can't.  pari has the amazing property that for any pretty much any x in pari we have eval(str(x)) == x (with pari notation).    I think the same is true in maxima for symbolic expressions.\n\nThis code is new, so is going to be held to a higher standard before being included than code from 2005.",
    "created_at": "2009-11-06T05:56:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49463",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:13" align="right">Comment 13</div>

> I noticed that sage doctesting routines prefer to have a test like that.
>  My first reaction is "can't be done". 

Yes it can.    If s == loads(dumps(s)) will be false for any element, or raise an error, put a discussion of that fact in a docstring and put in a doctest like this:

```
sage: s == loads(dumps(s))
boom or False
```
There's no reason to hide that this doesn't work from users.

> How do other interfaces solve that (pari, magma, maxima/pexpect, maple)

magma can't.  pari has the amazing property that for any pretty much any x in pari we have eval(str(x)) == x (with pari notation).    I think the same is true in maxima for symbolic expressions.

This code is new, so is going to be held to a higher standard before being included than code from 2005.



---

archive/issue_comments_049464.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nYes, pickling is so nice to have that it makes sense to mention explicitly when it doesn't work. ECL does not support serialization natively, so there is nothing to interface with on that end. There are independent serialization libraries for CL that claim to work with ECL. I do not know their quality.\n\nThere is CL-STORE:\n\nhttp://common-lisp.net/project/cl-store/\n\ncurrent version 0.8.10\n\nwhich even claims to be able to serialize CLOS object instances. I am not advocating including an extra lisp library at this point, but if someone at some point really want lisp serialization, that would be a place to start looking.\n\nI am updating the attached patch ecllib.patch with:\n- extra newlines between some defs\n- fixed typo\n- `__reduce__` method raising a NotImplementedError and a docstring.",
    "created_at": "2009-11-07T04:26:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49464",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:14" align="right">Comment 14</div>

Yes, pickling is so nice to have that it makes sense to mention explicitly when it doesn't work. ECL does not support serialization natively, so there is nothing to interface with on that end. There are independent serialization libraries for CL that claim to work with ECL. I do not know their quality.

There is CL-STORE:

http://common-lisp.net/project/cl-store/

current version 0.8.10

which even claims to be able to serialize CLOS object instances. I am not advocating including an extra lisp library at this point, but if someone at some point really want lisp serialization, that would be a place to start looking.

I am updating the attached patch ecllib.patch with:
- extra newlines between some defs
- fixed typo
- `__reduce__` method raising a NotImplementedError and a docstring.



---

archive/issue_comments_049465.json:
```json
{
    "body": "Author: **Nils Bruin**",
    "created_at": "2009-11-10T22:36:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49465",
    "user": "https://github.com/kcrisman"
}
```

Author: **Nils Bruin**



---

archive/issue_comments_049466.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nIn case there was question - this reviewer still thinks it looks good, still waiting on a Lisp expert to review it.  Problem is, does the Sage team have any of those other than the author?",
    "created_at": "2009-11-10T22:36:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49466",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:15" align="right">Comment 15</div>

In case there was question - this reviewer still thinks it looks good, still waiting on a Lisp expert to review it.  Problem is, does the Sage team have any of those other than the author?



---

archive/issue_comments_049467.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nDoes this still work with the newest Maxima?  We don't have an spkg yet, but hopefully will soon - [http://groups.google.com/group/sage-devel/browse_thread/thread/bbd2c801032392f7](http://groups.google.com/group/sage-devel/browse_thread/thread/bbd2c801032392f7)",
    "created_at": "2009-12-21T02:06:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49467",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:17" align="right">Comment 17</div>

Does this still work with the newest Maxima?  We don't have an spkg yet, but hopefully will soon - [http://groups.google.com/group/sage-devel/browse_thread/thread/bbd2c801032392f7](http://groups.google.com/group/sage-devel/browse_thread/thread/bbd2c801032392f7)



---

archive/issue_comments_049468.json:
```json
{
    "body": "Attachment: **[ecllib.patch.gz](https://github.com/sagemath/sage/files/ticket6781/ecllib.patch.gz)**\n\nRebased against 4.3, with str -> bytes changes",
    "created_at": "2010-01-16T09:01:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49468",
    "user": "https://github.com/nbruin"
}
```

Attachment: **[ecllib.patch.gz](https://github.com/sagemath/sage/files/ticket6781/ecllib.patch.gz)**

Rebased against 4.3, with str -> bytes changes



---

archive/issue_comments_049469.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nUpdated the patch to apply against 4.3. Cython started to complain about not being able to translate str -> C types anymore and recommended using \"bytes\" instead. That change has been propagated seemingly without adverse side-effects. Patch seems to work fine in 4.3 now.",
    "created_at": "2010-01-16T09:03:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49469",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:18" align="right">Comment 18</div>

Updated the patch to apply against 4.3. Cython started to complain about not being able to translate str -> C types anymore and recommended using "bytes" instead. That change has been propagated seemingly without adverse side-effects. Patch seems to work fine in 4.3 now.



---

archive/issue_comments_049470.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nHi Nils,\n\nSorry for not looking at this before. I just read the patch and it looks really good. I'd like to try to get this in the next release if possible, to prepare for #7377 proper.\n\nA few quick comments after reading the patch (didn't apply or build yet, maybe over the weekend):\n* The module name you declare on line 431 of `module_list.py` should be sage.libs.ecl.ecl.\n* We would normally put the declarations imported from a header file in a `decl.pxd` in `sage/libs/ecl/`. I suggest renaming the current `ecl.pxd` to `decl.pxd`, and using `from sage.libs.ecl.decl cimport ...` in `ecl.pyx` to import the declarations you need. Then `ecl.pxd` can be used to declare the Cython methods/classes from `ecl.pyx` which should be available for imports from other modules.\n* In `ecl.pyx`, I'm not sure if you need both of these lines\n\n```\ncimport sage.rings.integer \nfrom sage.rings.integer cimport Integer\n```\n* line 280 in `ecl.pyx` should be `elif pyobj is None:`. Testing with `is` is much faster than a comparison.\n* Including a TODO list at the beginning could be helpful. For example you can note that optimizing conversion of gmp integers and rationals needs work. My editor highlights \"TODO\" so you can also just put that as a part of the comment in the `python_to_ecl()` function.\n* In `ecl.pyx`, line 653 - 664 are redundant.\n* The doctests for `car()`, `cdr()`, `caar()`, etc. are very instructive, but they are all the same. If anything goes wrong we'll get the same error from all the functions, not knowing where to look. Since this is not going to be exposed much to the users, I suggest putting the instructive example somewhere along the top of the file, and including a test only for the corresponding function in the docstring.\n* It's more pythonic to use `is_character()`, `is_null()`, `is_list()`, etc. instead of `characterp()`, `nullp()`, `listp()`, ...\n* You can replace line 996-997 of `ecl.pyx` with the following:\n\n```\ncdef EclObject obj = <EclObject>PY_NEW(EclObject)\n```\n This will avoid the python class initialization overhead and make things slightly faster.\n\n\nThanks a lot for your work.",
    "created_at": "2010-02-04T11:42:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49470",
    "user": "https://github.com/burcin"
}
```

<div id="comment:19" align="right">Comment 19</div>

Hi Nils,

Sorry for not looking at this before. I just read the patch and it looks really good. I'd like to try to get this in the next release if possible, to prepare for #7377 proper.

A few quick comments after reading the patch (didn't apply or build yet, maybe over the weekend):
* The module name you declare on line 431 of `module_list.py` should be sage.libs.ecl.ecl.
* We would normally put the declarations imported from a header file in a `decl.pxd` in `sage/libs/ecl/`. I suggest renaming the current `ecl.pxd` to `decl.pxd`, and using `from sage.libs.ecl.decl cimport ...` in `ecl.pyx` to import the declarations you need. Then `ecl.pxd` can be used to declare the Cython methods/classes from `ecl.pyx` which should be available for imports from other modules.
* In `ecl.pyx`, I'm not sure if you need both of these lines

```
cimport sage.rings.integer 
from sage.rings.integer cimport Integer
```
* line 280 in `ecl.pyx` should be `elif pyobj is None:`. Testing with `is` is much faster than a comparison.
* Including a TODO list at the beginning could be helpful. For example you can note that optimizing conversion of gmp integers and rationals needs work. My editor highlights "TODO" so you can also just put that as a part of the comment in the `python_to_ecl()` function.
* In `ecl.pyx`, line 653 - 664 are redundant.
* The doctests for `car()`, `cdr()`, `caar()`, etc. are very instructive, but they are all the same. If anything goes wrong we'll get the same error from all the functions, not knowing where to look. Since this is not going to be exposed much to the users, I suggest putting the instructive example somewhere along the top of the file, and including a test only for the corresponding function in the docstring.
* It's more pythonic to use `is_character()`, `is_null()`, `is_list()`, etc. instead of `characterp()`, `nullp()`, `listp()`, ...
* You can replace line 996-997 of `ecl.pyx` with the following:

```
cdef EclObject obj = <EclObject>PY_NEW(EclObject)
```
 This will avoid the python class initialization overhead and make things slightly faster.


Thanks a lot for your work.



---

archive/issue_comments_049471.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nThanks for your feedback! It'll be nice to get this in.\n\n> * The module name you declare on line 431 of `module_list.py` should be sage.libs.ecl.ecl.\n\nAre you sure? the current thing seems to work too and I like not typing the extra ecl.\n\n> * We would normally put the declarations imported from a header file in a `decl.pxd` in `sage/libs/ecl/`. I suggest renaming the current `ecl.pxd` to `decl.pxd`, and using `from sage.libs.ecl.decl cimport ...` in `ecl.pyx` to import the declarations you need. Then `ecl.pxd` can be used to declare the Cython methods/classes from `ecl.pyx` which should be available for imports from other modules.\n\nSure. However, I just picked and chose from the ecl headers, and I orthogonalized some of the names. Wouldn't moving those to decl.pxd raise the false impression that the declarations there are a literal translation of ecl.h ?\n\n>    * In `ecl.pyx`, I'm not sure if you need both of these lines\n> \n> ```\n> cimport sage.rings.integer \n> from sage.rings.integer cimport Integer\n> ```\n\nI guess we can try without, but I think I put it in because it didn't work without.\n\n> * line 280 in `ecl.pyx` should be `elif pyobj is None:`. Testing with `is` is much faster than a comparison.\n\nGood one!\n> * Including a TODO list at the beginning could be helpful. For example you can note that optimizing conversion of gmp integers and rationals needs work. My editor highlights \"TODO\" so you can also just put that as a part of the comment in the `python_to_ecl()` function.\n\nYou have a good editor. Mine doesn't do that.\n\n> * In `ecl.pyx`, line 653 - 664 are redundant.\n\nBut they don't hurt performance either do they? I like them for documentation purposes, so that I know the codes that go into a rich_cmp\n\n> * The doctests for `car()`, `cdr()`, `caar()`, etc. are very instructive, but they are all the same. If anything goes wrong we'll get the same error from all the functions, not knowing where to look. Since this is not going to be exposed much to the users, I suggest putting the instructive example somewhere along the top of the file, and including a test only for the corresponding function in the docstring.\n\nDo you think any time spent on tuning those tests is well-spent? They're really just there because they need some test. If they fail, nothing in ecl will work.\n\n> * It's more pythonic to use `is_character()`, `is_null()`, `is_list()`, etc. instead of `characterp()`, `nullp()`, `listp()`, ...\n\nbut characters not being strings is not very pythonic either. We're interfacing with a different language, so I think it makes sense to depart from python's naming conventions. Also, CL routines are standard and well-documented. If we use those names, we get a well-defined interface without thinking. If we start changing function names for wrappers, we need to start thinking and may screw up.\n\n> * You can replace line 996-997 of `ecl.pyx` with the following:\n> \n> ```\n> cdef EclObject obj = <EclObject>PY_NEW(EclObject)\n> ```\n\nGreat!\n\nI'll see if I can update the patch once you've had some run time with it and commented on its functionality.",
    "created_at": "2010-02-08T07:43:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49471",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:20" align="right">Comment 20</div>

Thanks for your feedback! It'll be nice to get this in.

> * The module name you declare on line 431 of `module_list.py` should be sage.libs.ecl.ecl.

Are you sure? the current thing seems to work too and I like not typing the extra ecl.

> * We would normally put the declarations imported from a header file in a `decl.pxd` in `sage/libs/ecl/`. I suggest renaming the current `ecl.pxd` to `decl.pxd`, and using `from sage.libs.ecl.decl cimport ...` in `ecl.pyx` to import the declarations you need. Then `ecl.pxd` can be used to declare the Cython methods/classes from `ecl.pyx` which should be available for imports from other modules.

Sure. However, I just picked and chose from the ecl headers, and I orthogonalized some of the names. Wouldn't moving those to decl.pxd raise the false impression that the declarations there are a literal translation of ecl.h ?

>    * In `ecl.pyx`, I'm not sure if you need both of these lines
> 
> ```
> cimport sage.rings.integer 
> from sage.rings.integer cimport Integer
> ```

I guess we can try without, but I think I put it in because it didn't work without.

> * line 280 in `ecl.pyx` should be `elif pyobj is None:`. Testing with `is` is much faster than a comparison.

Good one!
> * Including a TODO list at the beginning could be helpful. For example you can note that optimizing conversion of gmp integers and rationals needs work. My editor highlights "TODO" so you can also just put that as a part of the comment in the `python_to_ecl()` function.

You have a good editor. Mine doesn't do that.

> * In `ecl.pyx`, line 653 - 664 are redundant.

But they don't hurt performance either do they? I like them for documentation purposes, so that I know the codes that go into a rich_cmp

> * The doctests for `car()`, `cdr()`, `caar()`, etc. are very instructive, but they are all the same. If anything goes wrong we'll get the same error from all the functions, not knowing where to look. Since this is not going to be exposed much to the users, I suggest putting the instructive example somewhere along the top of the file, and including a test only for the corresponding function in the docstring.

Do you think any time spent on tuning those tests is well-spent? They're really just there because they need some test. If they fail, nothing in ecl will work.

> * It's more pythonic to use `is_character()`, `is_null()`, `is_list()`, etc. instead of `characterp()`, `nullp()`, `listp()`, ...

but characters not being strings is not very pythonic either. We're interfacing with a different language, so I think it makes sense to depart from python's naming conventions. Also, CL routines are standard and well-documented. If we use those names, we get a well-defined interface without thinking. If we start changing function names for wrappers, we need to start thinking and may screw up.

> * You can replace line 996-997 of `ecl.pyx` with the following:
> 
> ```
> cdef EclObject obj = <EclObject>PY_NEW(EclObject)
> ```

Great!

I'll see if I can update the patch once you've had some run time with it and commented on its functionality.



---

archive/issue_comments_049472.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nHas this been checked on Solaris? There's general information about building on Solaris at\n\n http://wiki.sagemath.org/solaris\n\nInformation specifically for 't2' at\n\n http://wiki.sagemath.org/devel/Building-Sage-on-the-T5240-t2\n\nBoth the source (4.3.0.1 is the latest to build on Solaris) and a binary which will run on any SPARC can be found at http://www.sagemath.org/download-source.html\n\nDave",
    "created_at": "2010-02-22T00:03:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49472",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:21" align="right">Comment 21</div>

Has this been checked on Solaris? There's general information about building on Solaris at

 http://wiki.sagemath.org/solaris

Information specifically for 't2' at

 http://wiki.sagemath.org/devel/Building-Sage-on-the-T5240-t2

Both the source (4.3.0.1 is the latest to build on Solaris) and a binary which will run on any SPARC can be found at http://www.sagemath.org/download-source.html

Dave



---

archive/issue_events_074335.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-02-22T00:03:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6781#event-74335"
}
```



---

archive/issue_events_074336.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-02-22T00:03:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6781#event-74336"
}
```



---

archive/issue_comments_049473.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nReplying to [@nbruin](#comment%3A20):\n> Thanks for your feedback! It'll be nice to get this in.\n\nI'm sorry I took so long to respond. At least I managed to test your patch(es, with #7377) in the meanwhile. \n\nI'm generally happy with how they look / work and I'd like to get them merged as soon as possible (I know I'm the main cause of delays). Feel free to change this ticket to positive review once the minor issues below are resolved.\n\n> > * The module name you declare on line 431 of `module_list.py` should be sage.libs.ecl.ecl.\n\n> \n> Are you sure? the current thing seems to work too and I like not typing the extra ecl.\n\nThe convention is to make the module name correspond to the file name. If you think a single file will be enough, then you can just remove the directory `ecl` and put the `ecl.p*` files under `sage/libs/` directly. I'm afraid I have to insist on one of these options.\n\n> > * We would normally put the declarations imported from a header file in a `decl.pxd` in `sage/libs/ecl/`. I suggest renaming the current `ecl.pxd` to `decl.pxd`, and using `from sage.libs.ecl.decl cimport ...` in `ecl.pyx` to import the declarations you need. Then `ecl.pxd` can be used to declare the Cython methods/classes from `ecl.pyx` which should be available for imports from other modules.\n\n> \n> Sure. However, I just picked and chose from the ecl headers, and I orthogonalized some of the names. Wouldn't moving those to decl.pxd raise the false impression that the declarations there are a literal translation of ecl.h ?\n\nIt's common to change the types or the function names a little. This is a minor issue though, I just think the code will be easier to maintain that way. \n\n> > * In `ecl.pyx`, I'm not sure if you need both of these lines\n> > \n> > ```\n> > cimport sage.rings.integer \n> > from sage.rings.integer cimport Integer\n> > ```\n\n> \n> I guess we can try without, but I think I put it in because it didn't work without.\n\nOK.\n\n> > * line 280 in `ecl.pyx` should be `elif pyobj is None:`. Testing with `is` is much faster than a comparison.\n\n> \n> Good one!\n> > * Including a TODO list at the beginning could be helpful. For example you can note that optimizing conversion of gmp integers and rationals needs work. My editor highlights \"TODO\" so you can also just put that as a part of the comment in the `python_to_ecl()` function.\n\n> \n> You have a good editor. Mine doesn't do that.\n\nI just use `vim`. :)\n> \n> > * In `ecl.pyx`, line 653 - 664 are redundant.\n\n> \n> But they don't hurt performance either do they? I like them for documentation purposes, so that I know the codes that go into a rich_cmp\n\nWhy don't you just put them in comments? Looking at the code, especially if you're scrolling up, it's not immediately clear that those lines are never used. If they are only for information, they should be comments.\n\n> > * The doctests for `car()`, `cdr()`, `caar()`, etc. are very instructive, but they are all the same. If anything goes wrong we'll get the same error from all the functions, not knowing where to look. Since this is not going to be exposed much to the users, I suggest putting the instructive example somewhere along the top of the file, and including a test only for the corresponding function in the docstring.\n\n> \n> Do you think any time spent on tuning those tests is well-spent? They're really just there because they need some test. If they fail, nothing in ecl will work.\n\nOK.\n\n> > * It's more pythonic to use `is_character()`, `is_null()`, `is_list()`, etc. instead of `characterp()`, `nullp()`, `listp()`, ...\n\n> \n> but characters not being strings is not very pythonic either. We're interfacing with a different language, so I think it makes sense to depart from python's naming conventions. Also, CL routines are standard and well-documented. If we use those names, we get a well-defined interface without thinking. If we start changing function names for wrappers, we need to start thinking and may screw up.\n\nOK.\n \n> > * You can replace line 996-997 of `ecl.pyx` with the following:\n> > \n> > ```\n> > cdef EclObject obj = <EclObject>PY_NEW(EclObject)\n> > ```\n\n> \n> Great!\n\nI see that you used `EclObject.__new__()` in your last patch attached to #7377. How does that compare with using `PY_NEW()` in terms of performance?\n\nAFAICT, some of the changes I suggest above are available in the last patch attached to #7377. Can you submit a patch with only that changes above to this ticket? Then we can get this ticket merged without waiting to solve the problems with the other one. If you don't have time, I can also make a patch with these changes (hopefully in reasonable time).\n\nMany thanks for this interface again!\n\nBTW, I don't see why this needs to be tested on Solaris. (In any case, expecting every developer to test their patches on solaris is unreasonable, IMHO.)",
    "created_at": "2010-02-25T13:03:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49473",
    "user": "https://github.com/burcin"
}
```

<div id="comment:22" align="right">Comment 22</div>

Replying to [@nbruin](#comment%3A20):
> Thanks for your feedback! It'll be nice to get this in.

I'm sorry I took so long to respond. At least I managed to test your patch(es, with #7377) in the meanwhile. 

I'm generally happy with how they look / work and I'd like to get them merged as soon as possible (I know I'm the main cause of delays). Feel free to change this ticket to positive review once the minor issues below are resolved.

> > * The module name you declare on line 431 of `module_list.py` should be sage.libs.ecl.ecl.

> 
> Are you sure? the current thing seems to work too and I like not typing the extra ecl.

The convention is to make the module name correspond to the file name. If you think a single file will be enough, then you can just remove the directory `ecl` and put the `ecl.p*` files under `sage/libs/` directly. I'm afraid I have to insist on one of these options.

> > * We would normally put the declarations imported from a header file in a `decl.pxd` in `sage/libs/ecl/`. I suggest renaming the current `ecl.pxd` to `decl.pxd`, and using `from sage.libs.ecl.decl cimport ...` in `ecl.pyx` to import the declarations you need. Then `ecl.pxd` can be used to declare the Cython methods/classes from `ecl.pyx` which should be available for imports from other modules.

> 
> Sure. However, I just picked and chose from the ecl headers, and I orthogonalized some of the names. Wouldn't moving those to decl.pxd raise the false impression that the declarations there are a literal translation of ecl.h ?

It's common to change the types or the function names a little. This is a minor issue though, I just think the code will be easier to maintain that way. 

> > * In `ecl.pyx`, I'm not sure if you need both of these lines
> > 
> > ```
> > cimport sage.rings.integer 
> > from sage.rings.integer cimport Integer
> > ```

> 
> I guess we can try without, but I think I put it in because it didn't work without.

OK.

> > * line 280 in `ecl.pyx` should be `elif pyobj is None:`. Testing with `is` is much faster than a comparison.

> 
> Good one!
> > * Including a TODO list at the beginning could be helpful. For example you can note that optimizing conversion of gmp integers and rationals needs work. My editor highlights "TODO" so you can also just put that as a part of the comment in the `python_to_ecl()` function.

> 
> You have a good editor. Mine doesn't do that.

I just use `vim`. :)
> 
> > * In `ecl.pyx`, line 653 - 664 are redundant.

> 
> But they don't hurt performance either do they? I like them for documentation purposes, so that I know the codes that go into a rich_cmp

Why don't you just put them in comments? Looking at the code, especially if you're scrolling up, it's not immediately clear that those lines are never used. If they are only for information, they should be comments.

> > * The doctests for `car()`, `cdr()`, `caar()`, etc. are very instructive, but they are all the same. If anything goes wrong we'll get the same error from all the functions, not knowing where to look. Since this is not going to be exposed much to the users, I suggest putting the instructive example somewhere along the top of the file, and including a test only for the corresponding function in the docstring.

> 
> Do you think any time spent on tuning those tests is well-spent? They're really just there because they need some test. If they fail, nothing in ecl will work.

OK.

> > * It's more pythonic to use `is_character()`, `is_null()`, `is_list()`, etc. instead of `characterp()`, `nullp()`, `listp()`, ...

> 
> but characters not being strings is not very pythonic either. We're interfacing with a different language, so I think it makes sense to depart from python's naming conventions. Also, CL routines are standard and well-documented. If we use those names, we get a well-defined interface without thinking. If we start changing function names for wrappers, we need to start thinking and may screw up.

OK.
 
> > * You can replace line 996-997 of `ecl.pyx` with the following:
> > 
> > ```
> > cdef EclObject obj = <EclObject>PY_NEW(EclObject)
> > ```

> 
> Great!

I see that you used `EclObject.__new__()` in your last patch attached to #7377. How does that compare with using `PY_NEW()` in terms of performance?

AFAICT, some of the changes I suggest above are available in the last patch attached to #7377. Can you submit a patch with only that changes above to this ticket? Then we can get this ticket merged without waiting to solve the problems with the other one. If you don't have time, I can also make a patch with these changes (hopefully in reasonable time).

Many thanks for this interface again!

BTW, I don't see why this needs to be tested on Solaris. (In any case, expecting every developer to test their patches on solaris is unreasonable, IMHO.)



---

archive/issue_events_074337.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2010-02-25T13:03:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6781#event-74337"
}
```



---

archive/issue_events_074338.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2010-02-25T13:03:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6781#event-74338"
}
```



---

archive/issue_comments_049474.json:
```json
{
    "body": "Reviewer: **Burcin Erocal, Karl-Dieter Crisman**",
    "created_at": "2010-02-25T13:03:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49474",
    "user": "https://github.com/burcin"
}
```

Reviewer: **Burcin Erocal, Karl-Dieter Crisman**



---

archive/issue_comments_049475.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nReplying to [@burcin](#comment%3A22):\nMany thanks for this interface again!\n> \n> BTW, I don't see why this needs to be tested on Solaris. (In any case, expecting every developer to test their patches on solaris is unreasonable, IMHO.)\n\nThat might be your opinion, but I suggest you take that up with William. \n\nQuoting from the Sage developer's guide. \n\nhttp://www.sagemath.org/doc/developer/inclusion.html\n\n*Some Sage developers are willing to help you port to OS X, Solaris and Windows. But this is no guarantee and you or your project are expected to do the heavy lifting and also support those ports upstream if there is no Sage developer who is willing to share the burden.*\n\nFrom the Sage installation guide \n\nhttp://www.sagemath.org/doc/installation/source.html\n\n*We do plan to fully support Solaris - it\u2019s a very important platform. Work is ongoing.*\n\nWilliam has taken hardware (specifically 't2') from Sun for Sage development, as well as an OpenSolaris machine from elsewhere. He also sent me an email on the 16th December 2009, underlying the importance of getting Sage working on Solaris\n\n```\nDavid,\n\n(1) I couldn't get anywhere building Sage on x86 Solaris on skynet (fulvia).  Can you?  This was pretty annoying to the people that bought us fulvia.\n\n(2) Sun wants to know if we have a Sage available yet for t2.  See below.\n\nI really need to shift into the mode of actually providing something that *works* on Solaris, despite hickups, rather than just polishing foundations...\n```\n\nAs such, I do not believe it is unreasonable that the packages are tested on Solaris. If Solaris is important, and the current version of this package works on Solaris, a failure to work on Solaris would be a reason for the changes not to be incorporated. \n\nDave",
    "created_at": "2010-02-25T13:37:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49475",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:23" align="right">Comment 23</div>

Replying to [@burcin](#comment%3A22):
Many thanks for this interface again!
> 
> BTW, I don't see why this needs to be tested on Solaris. (In any case, expecting every developer to test their patches on solaris is unreasonable, IMHO.)

That might be your opinion, but I suggest you take that up with William. 

Quoting from the Sage developer's guide. 

http://www.sagemath.org/doc/developer/inclusion.html

*Some Sage developers are willing to help you port to OS X, Solaris and Windows. But this is no guarantee and you or your project are expected to do the heavy lifting and also support those ports upstream if there is no Sage developer who is willing to share the burden.*

From the Sage installation guide 

http://www.sagemath.org/doc/installation/source.html

*We do plan to fully support Solaris - it’s a very important platform. Work is ongoing.*

William has taken hardware (specifically 't2') from Sun for Sage development, as well as an OpenSolaris machine from elsewhere. He also sent me an email on the 16th December 2009, underlying the importance of getting Sage working on Solaris

```
David,

(1) I couldn't get anywhere building Sage on x86 Solaris on skynet (fulvia).  Can you?  This was pretty annoying to the people that bought us fulvia.

(2) Sun wants to know if we have a Sage available yet for t2.  See below.

I really need to shift into the mode of actually providing something that *works* on Solaris, despite hickups, rather than just polishing foundations...
```

As such, I do not believe it is unreasonable that the packages are tested on Solaris. If Solaris is important, and the current version of this package works on Solaris, a failure to work on Solaris would be a reason for the changes not to be incorporated. 

Dave



---

archive/issue_comments_049476.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nI realise the library access is not currently in Sage (I was confusing it with another ticket) but the rest of the comments apply. Given Solaris is considered **very important platform** things need to work there.",
    "created_at": "2010-02-25T13:50:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49476",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:24" align="right">Comment 24</div>

I realise the library access is not currently in Sage (I was confusing it with another ticket) but the rest of the comments apply. Given Solaris is considered **very important platform** things need to work there.



---

archive/issue_comments_049477.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A23):\n> Replying to [@burcin](#comment%3A22):\n> > \n> > BTW, I don't see why this needs to be tested on Solaris. (In any case, expecting every developer to test their patches on solaris is unreasonable, IMHO.)\n\n> \n> That might be your opinion, but I suggest you take that up with William. \n> \n> Quoting from the Sage developer's guide. \n> \n> http://www.sagemath.org/doc/developer/inclusion.html\n> \n> *Some Sage developers are willing to help you port to OS X, Solaris and Windows. But this is no guarantee and you or your project are expected to do the heavy lifting and also support those ports upstream if there is no Sage developer who is willing to share the burden.*\n\n<snip>\n\nThis ticket is not talking about including a new package in Sage.\n\n\n> As such, I do not believe it is unreasonable that the packages are tested on Solaris. If Solaris is important, and the current version of this package works on Solaris, a failure to work on Solaris would be a reason for the changes not to be incorporated. \n\nAgain, there is no new package associated to this ticket. It just contains a single patch to be applied to the Sage library. The package was merged with #7287.\n\nI maintain my position that requiring every single patch submitted to Sage be tested on Solaris is unreasonable (unless this process is automated somehow).",
    "created_at": "2010-02-25T13:57:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49477",
    "user": "https://github.com/burcin"
}
```

<div id="comment:25" align="right">Comment 25</div>

Replying to [@sagetrac-drkirkby](#comment%3A23):
> Replying to [@burcin](#comment%3A22):
> > 
> > BTW, I don't see why this needs to be tested on Solaris. (In any case, expecting every developer to test their patches on solaris is unreasonable, IMHO.)

> 
> That might be your opinion, but I suggest you take that up with William. 
> 
> Quoting from the Sage developer's guide. 
> 
> http://www.sagemath.org/doc/developer/inclusion.html
> 
> *Some Sage developers are willing to help you port to OS X, Solaris and Windows. But this is no guarantee and you or your project are expected to do the heavy lifting and also support those ports upstream if there is no Sage developer who is willing to share the burden.*

<snip>

This ticket is not talking about including a new package in Sage.


> As such, I do not believe it is unreasonable that the packages are tested on Solaris. If Solaris is important, and the current version of this package works on Solaris, a failure to work on Solaris would be a reason for the changes not to be incorporated. 

Again, there is no new package associated to this ticket. It just contains a single patch to be applied to the Sage library. The package was merged with #7287.

I maintain my position that requiring every single patch submitted to Sage be tested on Solaris is unreasonable (unless this process is automated somehow).



---

archive/issue_comments_049478.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nI find it hard to believe it could be much simpler to test a package on Solaris using the instructions at \n\nhttp://wiki.sagemath.org/devel/Building-Sage-on-the-T5240-t2\n\nwhich require the user to \n\n* Add 3 lines to the bottom of their $HOME/.profile \n* Extract the file http://boxen.math.washington.edu/sage/solaris/sage-4.3.0.1.tar\n* incorporate their changes. \n* Log into 't2'\n* Type 'make' \n\nIs that hard or unreasonable, given the notes in the developers guide, installation guide and the contents of the email I just posted from William? \n\nLooking at the patches, I doubt this will have any Solaris specific issues, but it would be appreciated very much if someone could check it. The patches are quite old, so there should be no issues with the fact the current version for Solaris is a month or two old. \n\nI believe the issues which caused the library to fail to build recently have probably been resolved, so soon the latest version of Sage should build OK. \n\nMicheal was paid full-time to work on the Solaris port, though I realise he did do other things too. I know for a fact he was actually appointed to do the Solaris port. He has been the only full-time paid employee for the Sage project. \n\nGiven the hardware costs and Micheal's salary, it is probably not unreasonable to estimate around $100,000 has been spent on the Solaris port. \n\nDave",
    "created_at": "2010-02-25T14:40:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49478",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:26" align="right">Comment 26</div>

I find it hard to believe it could be much simpler to test a package on Solaris using the instructions at 

http://wiki.sagemath.org/devel/Building-Sage-on-the-T5240-t2

which require the user to 

* Add 3 lines to the bottom of their $HOME/.profile 
* Extract the file http://boxen.math.washington.edu/sage/solaris/sage-4.3.0.1.tar
* incorporate their changes. 
* Log into 't2'
* Type 'make' 

Is that hard or unreasonable, given the notes in the developers guide, installation guide and the contents of the email I just posted from William? 

Looking at the patches, I doubt this will have any Solaris specific issues, but it would be appreciated very much if someone could check it. The patches are quite old, so there should be no issues with the fact the current version for Solaris is a month or two old. 

I believe the issues which caused the library to fail to build recently have probably been resolved, so soon the latest version of Sage should build OK. 

Micheal was paid full-time to work on the Solaris port, though I realise he did do other things too. I know for a fact he was actually appointed to do the Solaris port. He has been the only full-time paid employee for the Sage project. 

Given the hardware costs and Micheal's salary, it is probably not unreasonable to estimate around $100,000 has been spent on the Solaris port. 

Dave



---

archive/issue_comments_049479.json:
```json
{
    "body": "apply after `ecllib.patch`",
    "created_at": "2010-04-02T23:34:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49479",
    "user": "https://github.com/burcin"
}
```

apply after `ecllib.patch`



---

archive/issue_comments_049480.json:
```json
{
    "body": "Changed keywords from **** to **ecl, library**",
    "created_at": "2010-04-02T23:38:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49480",
    "user": "https://github.com/burcin"
}
```

Changed keywords from **** to **ecl, library**



---

archive/issue_events_074339.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2010-04-02T23:38:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6781#event-74339"
}
```



---

archive/issue_events_074340.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2010-04-02T23:38:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6781#event-74340"
}
```



---

archive/issue_events_074341.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2010-04-02T23:38:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6781#event-74341"
}
```



---

archive/issue_events_074342.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2010-04-02T23:38:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20interfaces",
    "label_color": "0000ff",
    "label_name": "component: interfaces",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6781#event-74342"
}
```



---

archive/issue_comments_049481.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nAttachment: **[trac_6781-review.patch.gz](https://github.com/sagemath/sage/files/ticket6781/trac_6781-review.patch.gz)**\n\n[attachment: trac_6781-review.patch](https://github.com/sagemath/sage/files/ticket6781/trac_6781-review.patch.gz) contains some minor changes also mentioned in [comment:22](#comment%3A22). I give a positive review to [attachment: ecllib.patch,](https://github.com/sagemath/sage/files/ticket6781/00d3e9e678095f87eaa270c540396e00.gz) if someone can review my changes this will be good to go.\n\nThe patches to be applied are:\n* [attachment: ecllib.patch](https://github.com/sagemath/sage/files/ticket6781/ecllib.patch.gz)\n* [attachment: trac_6781-review.patch](https://github.com/sagemath/sage/files/ticket6781/trac_6781-review.patch.gz)",
    "created_at": "2010-04-02T23:38:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49481",
    "user": "https://github.com/burcin"
}
```

<div id="comment:27" align="right">Comment 27</div>

Attachment: **[trac_6781-review.patch.gz](https://github.com/sagemath/sage/files/ticket6781/trac_6781-review.patch.gz)**

[attachment: trac_6781-review.patch](https://github.com/sagemath/sage/files/ticket6781/trac_6781-review.patch.gz) contains some minor changes also mentioned in [comment:22](#comment%3A22). I give a positive review to [attachment: ecllib.patch,](https://github.com/sagemath/sage/files/ticket6781/00d3e9e678095f87eaa270c540396e00.gz) if someone can review my changes this will be good to go.

The patches to be applied are:
* [attachment: ecllib.patch](https://github.com/sagemath/sage/files/ticket6781/ecllib.patch.gz)
* [attachment: trac_6781-review.patch](https://github.com/sagemath/sage/files/ticket6781/trac_6781-review.patch.gz)



---

archive/issue_comments_049482.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nThat all looks great. However, I think the PY_NEW call should really be\n\n```\ncdef EclObject obj = EclObject.__new__(EclObject)\n```\nAccording to\nhttp://wiki.cython.org/FAQ#CanCythoncreateobjectsorapplyoperatorstolocallycreatedobjectsaspureCcode.3F\nit seems that PY_NEW was a hack that was only required prior to Cython 0.12\n\nA lot of the includes are not necessary either for the code to seemingly work properly. Wouldn't it be better to leave them out?\n\nI am probably not allowed to give the patch a positive review, but I can confirm that the original reviewer requested those changes to be made and they look fine to me (the author of the original enhancement).\n\nThanks for trying to unstall the inclusion of this patch!",
    "created_at": "2010-04-12T00:33:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49482",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:28" align="right">Comment 28</div>

That all looks great. However, I think the PY_NEW call should really be

```
cdef EclObject obj = EclObject.__new__(EclObject)
```
According to
http://wiki.cython.org/FAQ#CanCythoncreateobjectsorapplyoperatorstolocallycreatedobjectsaspureCcode.3F
it seems that PY_NEW was a hack that was only required prior to Cython 0.12

A lot of the includes are not necessary either for the code to seemingly work properly. Wouldn't it be better to leave them out?

I am probably not allowed to give the patch a positive review, but I can confirm that the original reviewer requested those changes to be made and they look fine to me (the author of the original enhancement).

Thanks for trying to unstall the inclusion of this patch!



---

archive/issue_comments_049483.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nAttachment: **[trac_6781-review.take2.patch.gz](https://github.com/sagemath/sage/files/ticket6781/trac_6781-review.take2.patch.gz)**\n\nReplying to [@nbruin](#comment%3A28):\n> That all looks great. However, I think the PY_NEW call should really be\n\n\n ```\n cdef EclObject obj = EclObject.__new__(EclObject)\n ```\n> According to\n> http://wiki.cython.org/FAQ#CanCythoncreateobjectsorapplyoperatorstolocallycreatedobjectsaspureCcode.3F\n> it seems that PY_NEW was a hack that was only required prior to Cython 0.12\n\nThanks for pointing this out. I didn't know the new convention.\n\n> A lot of the includes are not necessary either for the code to seemingly work properly. Wouldn't it be better to leave them out?\n\nThe includes weren't necessary at all after getting rid of the `PY_NEW` call. \n\nI uploaded a new patch [attachment: trac_6781-review.take2.patch](https://github.com/sagemath/sage/files/ticket6781/trac_6781-review.take2.patch.gz) addressing these comments. The new patch replaces [attachment: trac_6781-review.patch.](https://github.com/sagemath/sage/files/ticket6781/trac_6781-review.patch..gz)\n\n> I am probably not allowed to give the patch a positive review, but I can confirm that the original reviewer requested those changes to be made and they look fine to me (the author of the original enhancement).\n\nYou can change the ticket to positive review. I reviewed your patch and gave a positive review, if you're ok with my additional changes and think that they deserve a positive review, then the whole ticket is good to go. \n\n> Thanks for trying to unstall the inclusion of this patch!\n\nI want to get the rest of the interface (#7377) merged ASAP as well. Unfortunately we had a setback with #8645. I hope the latter gets resolved soon so we can proceed.\n\n\nBased on Nils' comments above, I am changing this to a positive review.\n\nThe patches to be applied are:\n* [attachment: ecllib.patch](https://github.com/sagemath/sage/files/ticket6781/ecllib.patch.gz)\n* [attachment: trac_6781-review.take2.patch](https://github.com/sagemath/sage/files/ticket6781/trac_6781-review.take2.patch.gz)",
    "created_at": "2010-04-12T08:55:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49483",
    "user": "https://github.com/burcin"
}
```

<div id="comment:29" align="right">Comment 29</div>

Attachment: **[trac_6781-review.take2.patch.gz](https://github.com/sagemath/sage/files/ticket6781/trac_6781-review.take2.patch.gz)**

Replying to [@nbruin](#comment%3A28):
> That all looks great. However, I think the PY_NEW call should really be


 ```
 cdef EclObject obj = EclObject.__new__(EclObject)
 ```
> According to
> http://wiki.cython.org/FAQ#CanCythoncreateobjectsorapplyoperatorstolocallycreatedobjectsaspureCcode.3F
> it seems that PY_NEW was a hack that was only required prior to Cython 0.12

Thanks for pointing this out. I didn't know the new convention.

> A lot of the includes are not necessary either for the code to seemingly work properly. Wouldn't it be better to leave them out?

The includes weren't necessary at all after getting rid of the `PY_NEW` call. 

I uploaded a new patch [attachment: trac_6781-review.take2.patch](https://github.com/sagemath/sage/files/ticket6781/trac_6781-review.take2.patch.gz) addressing these comments. The new patch replaces [attachment: trac_6781-review.patch.](https://github.com/sagemath/sage/files/ticket6781/trac_6781-review.patch..gz)

> I am probably not allowed to give the patch a positive review, but I can confirm that the original reviewer requested those changes to be made and they look fine to me (the author of the original enhancement).

You can change the ticket to positive review. I reviewed your patch and gave a positive review, if you're ok with my additional changes and think that they deserve a positive review, then the whole ticket is good to go. 

> Thanks for trying to unstall the inclusion of this patch!

I want to get the rest of the interface (#7377) merged ASAP as well. Unfortunately we had a setback with #8645. I hope the latter gets resolved soon so we can proceed.


Based on Nils' comments above, I am changing this to a positive review.

The patches to be applied are:
* [attachment: ecllib.patch](https://github.com/sagemath/sage/files/ticket6781/ecllib.patch.gz)
* [attachment: trac_6781-review.take2.patch](https://github.com/sagemath/sage/files/ticket6781/trac_6781-review.take2.patch.gz)



---

archive/issue_events_074343.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2010-04-12T08:55:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6781#event-74343"
}
```



---

archive/issue_events_074344.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2010-04-12T08:55:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6781#event-74344"
}
```



---

archive/issue_comments_049484.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nAwesome! I'm very sorry I haven't been able to work on this (or Sage) at all the last several months. Great work, and thanks.",
    "created_at": "2010-04-12T12:56:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49484",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:30" align="right">Comment 30</div>

Awesome! I'm very sorry I haven't been able to work on this (or Sage) at all the last several months. Great work, and thanks.



---

archive/issue_comments_049485.json:
```json
{
    "body": "Changed author from **Nils Bruin** to **Nils Bruin, Burcin Erocal**",
    "created_at": "2010-04-12T12:56:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49485",
    "user": "https://github.com/kcrisman"
}
```

Changed author from **Nils Bruin** to **Nils Bruin, Burcin Erocal**



---

archive/issue_comments_049486.json:
```json
{
    "body": "Changed reviewer from **Burcin Erocal, Karl-Dieter Crisman** to **Burcin Erocal, Karl-Dieter Crisman, Nils Bruin**",
    "created_at": "2010-04-12T12:56:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49486",
    "user": "https://github.com/kcrisman"
}
```

Changed reviewer from **Burcin Erocal, Karl-Dieter Crisman** to **Burcin Erocal, Karl-Dieter Crisman, Nils Bruin**



---

archive/issue_comments_049487.json:
```json
{
    "body": "Changed author from **Nils Bruin, Burcin Erocal** to **Nils Bruin**",
    "created_at": "2010-04-12T22:58:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49487",
    "user": "https://github.com/burcin"
}
```

Changed author from **Nils Bruin, Burcin Erocal** to **Nils Bruin**



---

archive/issue_comments_049488.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nThe author credit for this ticket belongs entirely to Nils. I just made minor changes as a reviewer.",
    "created_at": "2010-04-12T22:58:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49488",
    "user": "https://github.com/burcin"
}
```

<div id="comment:31" align="right">Comment 31</div>

The author credit for this ticket belongs entirely to Nils. I just made minor changes as a reviewer.



---

archive/issue_events_074345.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-04-15T20:05:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6781#event-74345"
}
```



---

archive/issue_events_074346.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-04-15T20:05:44Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6781#event-74346"
}
```



---

archive/issue_comments_049489.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nMerged in 4.4.alpha0:\n\n- ecllib.patch\n- trac_6781-review.take2.patch",
    "created_at": "2010-04-15T20:05:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49489",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:32" align="right">Comment 32</div>

Merged in 4.4.alpha0:

- ecllib.patch
- trac_6781-review.take2.patch



---

archive/issue_comments_049490.json:
```json
{
    "body": "Merged: **sage-4.4.alpha0**",
    "created_at": "2010-04-15T20:05:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49490",
    "user": "https://github.com/jhpalmieri"
}
```

Merged: **sage-4.4.alpha0**



---

archive/issue_events_074347.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-04-16T02:47:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6781#event-74347"
}
```



---

archive/issue_comments_049491.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nIf I understand this correctly, it requires ecl to be built before Sage.  Is that right?  If so, the file SAGE_ROOT/spkg/standard/deps needs to be changed.  Please review my changes.",
    "created_at": "2010-04-16T02:47:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49491",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:33" align="right">Comment 33</div>

If I understand this correctly, it requires ecl to be built before Sage.  Is that right?  If so, the file SAGE_ROOT/spkg/standard/deps needs to be changed.  Please review my changes.



---

archive/issue_comments_049492.json:
```json
{
    "body": "new version of SAGE_ROOT/spkg/standard/deps",
    "created_at": "2010-04-16T02:49:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49492",
    "user": "https://github.com/jhpalmieri"
}
```

new version of SAGE_ROOT/spkg/standard/deps



---

archive/issue_comments_049493.json:
```json
{
    "body": "Attachment: **[deps.gz](https://github.com/sagemath/sage/files/ticket6781/deps.gz)**\n\nAttachment: **[deps.diff.gz](https://github.com/sagemath/sage/files/ticket6781/deps.diff.gz)**\n\ndiff for the file \"deps\"",
    "created_at": "2010-04-16T02:49:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49493",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment: **[deps.gz](https://github.com/sagemath/sage/files/ticket6781/deps.gz)**

Attachment: **[deps.diff.gz](https://github.com/sagemath/sage/files/ticket6781/deps.diff.gz)**

diff for the file "deps"



---

archive/issue_events_074348.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-04-16T02:51:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6781#event-74348"
}
```



---

archive/issue_events_074349.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-04-16T02:51:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6781#event-74349"
}
```



---

archive/issue_events_074350.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-04-16T02:51:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6781#event-74350"
}
```



---

archive/issue_events_074351.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-04-16T02:51:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6781#event-74351"
}
```



---

archive/issue_events_074352.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-04-16T02:51:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6781#event-74352"
}
```



---

archive/issue_comments_049494.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">Comment 38</div>\n\n(Okay, I think this has the right label now.)",
    "created_at": "2010-04-16T02:51:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49494",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:38" align="right">Comment 38</div>

(Okay, I think this has the right label now.)



---

archive/issue_events_074353.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2010-04-16T10:38:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6781#event-74353"
}
```



---

archive/issue_events_074354.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2010-04-16T10:38:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6781#event-74354"
}
```



---

archive/issue_comments_049495.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nIt didn't occur to me that we need to update the dependencies, sorry for the trouble.\n\nI'm not sure what it takes to review the `deps` file. The proposed change definitely makes sense, but I don't think I can test it easily. I'm giving a positive review nevertheless.",
    "created_at": "2010-04-16T10:38:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49495",
    "user": "https://github.com/burcin"
}
```

<div id="comment:39" align="right">Comment 39</div>

It didn't occur to me that we need to update the dependencies, sorry for the trouble.

I'm not sure what it takes to review the `deps` file. The proposed change definitely makes sense, but I don't think I can test it easily. I'm giving a positive review nevertheless.



---

archive/issue_events_074355.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-04-16T17:15:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6781#event-74355"
}
```



---

archive/issue_events_074356.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-04-16T17:15:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6781#event-74356"
}
```



---

archive/issue_comments_049496.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nMerged new version of \"deps\" into 4.4.alpha0.",
    "created_at": "2010-04-16T17:15:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6781",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6781#issuecomment-49496",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:40" align="right">Comment 40</div>

Merged new version of "deps" into 4.4.alpha0.
