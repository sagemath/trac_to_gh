# Issue 6253: Constant functions

archive/issues_006253.json:
```json
{
    "body": "This trivial patch adds basic support for constant functions\n\nSuch a function could be written as lambda x: constant, but that's not picklable. Besides, this should eventually be cythoned for speed.\n\nPrerequisite for #4326.\n\nAssignee: @nthiery\n\nCC:  sage-combinat @mwhansen @jasongrout\n\nKeywords: constant functions\n\nResolution: fixed\n\nAuthor: Nicolas M. Thi\u00e9ry\n\nReviewer: Florent Hivert, Minh Van Nguyen\n\nMerged: Sage 4.1.2.alpha0\n\nIssue created by migration from https://trac.sagemath.org/ticket/6253\n\n",
    "closed_at": "2009-08-23T09:52:52Z",
    "created_at": "2009-06-09T22:08:39Z",
    "labels": [
        "component: misc"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.1.2",
    "title": "Constant functions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/6253",
    "user": "https://github.com/nthiery"
}
```
This trivial patch adds basic support for constant functions

Such a function could be written as lambda x: constant, but that's not picklable. Besides, this should eventually be cythoned for speed.

Prerequisite for #4326.

Assignee: @nthiery

CC:  sage-combinat @mwhansen @jasongrout

Keywords: constant functions

Resolution: fixed

Author: Nicolas M. Thiéry

Reviewer: Florent Hivert, Minh Van Nguyen

Merged: Sage 4.1.2.alpha0

Issue created by migration from https://trac.sagemath.org/ticket/6253





---

archive/issue_comments_061210.json:
```json
{
    "body": "<a id='comment:1'></a>\nOh, I forgot to mention: let me know if this readily exists somewhere and I missed it.",
    "created_at": "2009-06-09T22:13:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6253#issuecomment-61210",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:1'></a>
Oh, I forgot to mention: let me know if this readily exists somewhere and I missed it.



---

archive/issue_comments_061211.json:
```json
{
    "body": "<a id='comment:2'></a>\nHow is this intended to be used?  What are your typical constants? Are there instances where you'd want a non-constant function to be used in the same place?",
    "created_at": "2009-06-09T22:26:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6253#issuecomment-61211",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:2'></a>
How is this intended to be used?  What are your typical constants? Are there instances where you'd want a non-constant function to be used in the same place?



---

archive/issue_comments_061212.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,3 +2,4 @@\n \n Such a function could be written as lambda x: constant, but that's not picklable. Besides, this should eventually be cythoned for speed.\n \n+Prerequisite for #4326.\n``````\n",
    "created_at": "2009-06-10T07:10:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6253#issuecomment-61212",
    "user": "https://github.com/nthiery"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,3 +2,4 @@
 
 Such a function could be written as lambda x: constant, but that's not picklable. Besides, this should eventually be cythoned for speed.
 
+Prerequisite for #4326.
``````




---

archive/issue_comments_061213.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [mhansen](#comment%3A2):\n> How is this intended to be used?  \n\n\nOne of my use case looks like:\n\ndef my_objects(<some parameters>, predicate = ConstantFunction(True)):\n    \"\"\"\n    Returns all the objects blah blah blah (as an EnumeratedSet)\n    Optionally, a predicate can be specified to select only those objects satisfying the predicate\n\nAnother one looks like:\n\ndef generating_series(..., weight = ConstantFunction(1)):\n    ...\n\n> What are your typical constants? \n\n\nSo far, True, 1, Integer(1)\n\nBtw: with UniqueRepresentation, the two first yield the same constant function with the current implementation, thanks to this horror:\n\n    sage: { 1: 'a', True: 'b' }\n    {1: 'b'}\n\nFixed patch in a couple minutes.\n\n> Are there instances where you'd want a non-constant function to be used in the same place? \n\n\nYes. Actually, that's the case in all the situations I encountered so far",
    "created_at": "2009-06-10T07:10:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6253#issuecomment-61213",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:4'></a>
Replying to [mhansen](#comment%3A2):
> How is this intended to be used?  


One of my use case looks like:

def my_objects(<some parameters>, predicate = ConstantFunction(True)):
    """
    Returns all the objects blah blah blah (as an EnumeratedSet)
    Optionally, a predicate can be specified to select only those objects satisfying the predicate

Another one looks like:

def generating_series(..., weight = ConstantFunction(1)):
    ...

> What are your typical constants? 


So far, True, 1, Integer(1)

Btw: with UniqueRepresentation, the two first yield the same constant function with the current implementation, thanks to this horror:

    sage: { 1: 'a', True: 'b' }
    {1: 'b'}

Fixed patch in a couple minutes.

> Are there instances where you'd want a non-constant function to be used in the same place? 


Yes. Actually, that's the case in all the situations I encountered so far



---

archive/issue_comments_061214.json:
```json
{
    "body": "Changing status from new to assigned.",
    "created_at": "2009-06-10T07:10:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6253#issuecomment-61214",
    "user": "https://github.com/nthiery"
}
```

Changing status from new to assigned.



---

archive/issue_comments_061215.json:
```json
{
    "body": "Attachment [trac_6253-constant_function-nt.patch](tarball://root/attachments/some-uuid/ticket6253/trac_6253-constant_function-nt.patch) by @nthiery created at 2009-07-26 23:07:12",
    "created_at": "2009-07-26T23:07:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6253#issuecomment-61215",
    "user": "https://github.com/nthiery"
}
```

Attachment [trac_6253-constant_function-nt.patch](tarball://root/attachments/some-uuid/ticket6253/trac_6253-constant_function-nt.patch) by @nthiery created at 2009-07-26 23:07:12



---

archive/issue_comments_061216.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Florent Hivert\"",
    "created_at": "2009-07-26T23:09:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6253#issuecomment-61216",
    "user": "https://github.com/nthiery"
}
```

Changing reviewer from "" to "Florent Hivert"



---

archive/issue_comments_061217.json:
```json
{
    "body": "<a id='comment:5'></a>\nThe updated patch removes two unused imports spotted by Florent. Apply only this one.",
    "created_at": "2009-07-26T23:09:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6253#issuecomment-61217",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:5'></a>
The updated patch removes two unused imports spotted by Florent. Apply only this one.



---

archive/issue_comments_061218.json:
```json
{
    "body": "Changing author from \"nthiery\" to \"Nicolas M. Thi\u00e9ry\"",
    "created_at": "2009-07-26T23:09:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6253#issuecomment-61218",
    "user": "https://github.com/nthiery"
}
```

Changing author from "nthiery" to "Nicolas M. Thiéry"



---

archive/issue_comments_061219.json:
```json
{
    "body": "<a id='comment:6'></a>\nThe patch looks good ! Positive review !\n\nFlorent",
    "created_at": "2009-07-26T23:12:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6253#issuecomment-61219",
    "user": "https://github.com/hivert"
}
```

<a id='comment:6'></a>
The patch looks good ! Positive review !

Florent



---

archive/issue_comments_061220.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2009-07-26T23:12:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6253#issuecomment-61220",
    "user": "https://github.com/hivert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_061221.json:
```json
{
    "body": "reviewer patch",
    "created_at": "2009-08-23T01:50:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6253#issuecomment-61221",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

reviewer patch



---

archive/issue_comments_061222.json:
```json
{
    "body": "<a id='comment:7'></a>\nAttachment [trac_6253-reviewer.patch](tarball://root/attachments/some-uuid/ticket6253/trac_6253-reviewer.patch) by mvngu created at 2009-08-23 01:54:36\n\nThis is great stuff! So let's put it in the reference manual. The reviewer patch `trac_6253-reviewer.patch` adds the module `sage/misc/constant_function.py` to the reference manual. It also fixes some typos so that the reference manual builds without any warnings. If people are happy with my changes, then patches should be merged in this order:\n\n1. `trac_6253-constant_function-nt.patch`\n2. `trac_6253-reviewer.patch`",
    "created_at": "2009-08-23T01:54:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6253#issuecomment-61222",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

<a id='comment:7'></a>
Attachment [trac_6253-reviewer.patch](tarball://root/attachments/some-uuid/ticket6253/trac_6253-reviewer.patch) by mvngu created at 2009-08-23 01:54:36

This is great stuff! So let's put it in the reference manual. The reviewer patch `trac_6253-reviewer.patch` adds the module `sage/misc/constant_function.py` to the reference manual. It also fixes some typos so that the reference manual builds without any warnings. If people are happy with my changes, then patches should be merged in this order:

1. `trac_6253-constant_function-nt.patch`
2. `trac_6253-reviewer.patch`



---

archive/issue_comments_061223.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2009-08-23T01:58:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6253#issuecomment-61223",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_061224.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [mvngu](#comment%3A7):\n> This is great stuff! So let's put it in the reference manual. The reviewer patch `trac_6253-reviewer.patch` adds the module `sage/misc/constant_function.py` to the reference manual. It also fixes some typos so that the reference manual builds without any warnings. If people are happy with my changes, then patches should be merged in this order:\n> \n> 1. `trac_6253-constant_function-nt.patch`\n> 2. `trac_6253-reviewer.patch`\n\n\nThanks Minh! (again)\n\nPositive review on your reviewer patch.",
    "created_at": "2009-08-23T08:34:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6253#issuecomment-61224",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:9'></a>
Replying to [mvngu](#comment%3A7):
> This is great stuff! So let's put it in the reference manual. The reviewer patch `trac_6253-reviewer.patch` adds the module `sage/misc/constant_function.py` to the reference manual. It also fixes some typos so that the reference manual builds without any warnings. If people are happy with my changes, then patches should be merged in this order:
> 
> 1. `trac_6253-constant_function-nt.patch`
> 2. `trac_6253-reviewer.patch`


Thanks Minh! (again)

Positive review on your reviewer patch.



---

archive/issue_comments_061225.json:
```json
{
    "body": "Changing merged from \"\" to \"Sage 4.1.2.alpha0\"",
    "created_at": "2009-08-23T09:52:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6253#issuecomment-61225",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

Changing merged from "" to "Sage 4.1.2.alpha0"



---

archive/issue_comments_061226.json:
```json
{
    "body": "<a id='comment:10'></a>\nMerged patches in this order:\n\n1. `trac_6253-constant_function-nt.patch`\n2. `trac_6253-reviewer.patch`",
    "created_at": "2009-08-23T09:52:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6253#issuecomment-61226",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

<a id='comment:10'></a>
Merged patches in this order:

1. `trac_6253-constant_function-nt.patch`
2. `trac_6253-reviewer.patch`



---

archive/issue_comments_061227.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2009-08-23T09:52:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6253#issuecomment-61227",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_018867.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mvngu",
    "created_at": "2009-08-23T09:52:52Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/6253",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/6253#event-18867"
}
```



---

archive/issue_comments_061228.json:
```json
{
    "body": "Changing reviewer from \"Florent Hivert\" to \"Florent Hivert, Minh Van Nguyen\"",
    "created_at": "2009-08-23T09:52:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6253#issuecomment-61228",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

Changing reviewer from "Florent Hivert" to "Florent Hivert, Minh Van Nguyen"



---

archive/issue_comments_061229.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2009-08-23T09:52:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6253#issuecomment-61229",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

Resolution: fixed
