# Issue 6840: Fix documentation for Sage Notebook

archive/issues_006840.json:
```json
{
    "assignees": [],
    "body": "Change documentation of the notebook to a uniform format and complete notebook doctest/documentation coverage.\n\n* Some docstrings are improperly formatted.\n* The formatting of docstrings is inconsistent, e.g.:\n\nSome have:\n\n```\nOutput: footype\n\nDescription\n```\n\nWhile others have:\n\n```\nOutput:\n\n- footype -- description\n```\n\netc.\n\nAssignee: **@sagetrac-boothby**\n\nKeywords: **notebook documentation**\n\nAuthor: **Tim Dumol, Mitesh Patel**\n\nReviewer: **Minh Van Nguyen, Mitesh Patel**\n\nMerged: **Sage 4.1.2.alpha0**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/6840_\n\n",
    "closed_at": "2009-09-01T06:12:17Z",
    "created_at": "2009-08-29T07:30:36Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20notebook",
        "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.1.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Fix documentation for Sage Notebook",
    "type": "issue",
    "updated_at": "2009-09-01T06:12:17Z",
    "url": "https://github.com/sagemath/sage/issues/6840",
    "user": "https://github.com/TimDumol"
}
```
Change documentation of the notebook to a uniform format and complete notebook doctest/documentation coverage.

* Some docstrings are improperly formatted.
* The formatting of docstrings is inconsistent, e.g.:

Some have:

```
Output: footype

Description
```

While others have:

```
Output:

- footype -- description
```

etc.

Assignee: **@sagetrac-boothby**

Keywords: **notebook documentation**

Author: **Tim Dumol, Mitesh Patel**

Reviewer: **Minh Van Nguyen, Mitesh Patel**

Merged: **Sage 4.1.2.alpha0**

_Issue created by migration from https://trac.sagemath.org/ticket/6840_





---

archive/issue_events_075060.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2009-08-29T07:30:36Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "milestone_number": null,
    "milestone_title": "sage-4.1.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6840#event-75060"
}
```



---

archive/issue_events_075061.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2009-08-29T07:30:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20notebook",
    "label_color": "000080",
    "label_name": "component: notebook",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6840#event-75061"
}
```



---

archive/issue_events_075062.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2009-08-29T07:30:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "label": "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6840#event-75062"
}
```



---

archive/issue_events_075063.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2009-08-29T07:30:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6840#event-75063"
}
```



---

archive/issue_comments_050027.json:
```json
{
    "body": "Fixes docstrings added by patch #6568 in `notebook.py` and `worksheet.py`. Depends on #6568",
    "created_at": "2009-08-29T07:31:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6840#issuecomment-50027",
    "user": "https://github.com/TimDumol"
}
```

Fixes docstrings added by patch #6568 in `notebook.py` and `worksheet.py`. Depends on #6568



---

archive/issue_comments_050028.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nAttachment: **[trac_6840-notebook-documentation.patch.gz](https://github.com/sagemath/sage/files/ticket6840/trac_6840-notebook-documentation.patch.gz)**\n\nI think there is some \"overlap\" here with version 2 of the patch at #5360.  But that patch makes only a few changes to `notebook.py`.  To avoid merge conflicts, should I put them in a separate patch or bring them here?",
    "created_at": "2009-08-30T10:16:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6840#issuecomment-50028",
    "user": "https://github.com/qed777"
}
```

<div id="comment:1" align="right">Comment 1</div>

Attachment: **[trac_6840-notebook-documentation.patch.gz](https://github.com/sagemath/sage/files/ticket6840/trac_6840-notebook-documentation.patch.gz)**

I think there is some "overlap" here with version 2 of the patch at #5360.  But that patch makes only a few changes to `notebook.py`.  To avoid merge conflicts, should I put them in a separate patch or bring them here?



---

archive/issue_comments_050029.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nIf you don't mind, I merged the changes from #5360 to save you the trouble.",
    "created_at": "2009-08-30T16:54:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6840#issuecomment-50029",
    "user": "https://github.com/TimDumol"
}
```

<div id="comment:2" align="right">Comment 2</div>

If you don't mind, I merged the changes from #5360 to save you the trouble.



---

archive/issue_comments_050030.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nThanks!  #5360 is now marked for closure.",
    "created_at": "2009-08-30T18:09:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6840#issuecomment-50030",
    "user": "https://github.com/qed777"
}
```

<div id="comment:3" align="right">Comment 3</div>

Thanks!  #5360 is now marked for closure.



---

archive/issue_comments_050031.json:
```json
{
    "body": "Merged changes from #5360. Apply only this file.",
    "created_at": "2009-08-30T18:11:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6840#issuecomment-50031",
    "user": "https://github.com/TimDumol"
}
```

Merged changes from #5360. Apply only this file.



---

archive/issue_comments_050032.json:
```json
{
    "body": "Attachment: **[trac_6840-notebook-documentation-v2.patch.gz](https://github.com/sagemath/sage/files/ticket6840/trac_6840-notebook-documentation-v2.patch.gz)**\n\nOBSOLETE.",
    "created_at": "2009-08-30T18:13:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6840#issuecomment-50032",
    "user": "https://github.com/TimDumol"
}
```

Attachment: **[trac_6840-notebook-documentation-v2.patch.gz](https://github.com/sagemath/sage/files/ticket6840/trac_6840-notebook-documentation-v2.patch.gz)**

OBSOLETE.



---

archive/issue_comments_050033.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nAttachment: **[trac_6840-notebook-documentation.v2.patch.gz](https://github.com/sagemath/sage/files/ticket6840/trac_6840-notebook-documentation.v2.patch.gz)**\n\nI think the patch somehow got doubled in size during the merger.",
    "created_at": "2009-08-30T18:18:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6840#issuecomment-50033",
    "user": "https://github.com/qed777"
}
```

<div id="comment:4" align="right">Comment 4</div>

Attachment: **[trac_6840-notebook-documentation.v2.patch.gz](https://github.com/sagemath/sage/files/ticket6840/trac_6840-notebook-documentation.v2.patch.gz)**

I think the patch somehow got doubled in size during the merger.



---

archive/issue_comments_050034.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nYes, it got messed up the first times around, but it seems to be the right size: `trac_6840-notebook-documentation-v2.patch  (112.6 KB)`.",
    "created_at": "2009-08-30T19:31:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6840#issuecomment-50034",
    "user": "https://github.com/TimDumol"
}
```

<div id="comment:5" align="right">Comment 5</div>

Yes, it got messed up the first times around, but it seems to be the right size: `trac_6840-notebook-documentation-v2.patch  (112.6 KB)`.



---

archive/issue_comments_050035.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nVersion 3 adds *lots* of small changes to `introspect.py`, `misc.py`, `docHTMLProcessor.py`, `interact.py`, `notebook.py`, `template.py`, and `support.py`.  \n\nTopics: missing docstrings, directives, blank lines, bullet points, headings; other inconsistencies; Sphinx warnings; etc.  The doctests pass, apart the known problem with randomly ordered tests in `worksheet.py`.\n\nI apologize for stepping on any toes.  There may still be other problems, besides those I just introduced.  Prepping `server/` for the reference manual is tedious, but the docstrings do appear to render somewhat more nicely now, especially those in `interact.py`.\n\nPlease feel free to make more changes.  Or we can just put this up for review and fix the remaining quirks as we find them.",
    "created_at": "2009-08-31T02:52:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6840#issuecomment-50035",
    "user": "https://github.com/qed777"
}
```

<div id="comment:6" align="right">Comment 6</div>

Version 3 adds *lots* of small changes to `introspect.py`, `misc.py`, `docHTMLProcessor.py`, `interact.py`, `notebook.py`, `template.py`, and `support.py`.  

Topics: missing docstrings, directives, blank lines, bullet points, headings; other inconsistencies; Sphinx warnings; etc.  The doctests pass, apart the known problem with randomly ordered tests in `worksheet.py`.

I apologize for stepping on any toes.  There may still be other problems, besides those I just introduced.  Prepping `server/` for the reference manual is tedious, but the docstrings do appear to render somewhat more nicely now, especially those in `interact.py`.

Please feel free to make more changes.  Or we can just put this up for review and fix the remaining quirks as we find them.



---

archive/issue_comments_050036.json:
```json
{
    "body": "Attachment: **[trac_6840-notebook-documentation-v3.patch.gz](https://github.com/sagemath/sage/files/ticket6840/trac_6840-notebook-documentation-v3.patch.gz)**\n\nVersion 3.  Apply only this patch.",
    "created_at": "2009-08-31T03:08:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6840#issuecomment-50036",
    "user": "https://github.com/qed777"
}
```

Attachment: **[trac_6840-notebook-documentation-v3.patch.gz](https://github.com/sagemath/sage/files/ticket6840/trac_6840-notebook-documentation-v3.patch.gz)**

Version 3.  Apply only this patch.



---

archive/issue_comments_050037.json:
```json
{
    "body": "Attachment: **[trac_6840-notebook-documentation-v4.patch.gz](https://github.com/sagemath/sage/files/ticket6840/trac_6840-notebook-documentation-v4.patch.gz)**\n\nVersion 4. Brought up `cell.py` coverage to almost 100%, except for 2 functions.",
    "created_at": "2009-08-31T10:15:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6840#issuecomment-50037",
    "user": "https://github.com/TimDumol"
}
```

Attachment: **[trac_6840-notebook-documentation-v4.patch.gz](https://github.com/sagemath/sage/files/ticket6840/trac_6840-notebook-documentation-v4.patch.gz)**

Version 4. Brought up `cell.py` coverage to almost 100%, except for 2 functions.



---

archive/issue_events_075064.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2009-08-31T10:18:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6840#event-75064"
}
```



---

archive/issue_comments_050038.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nVersion 4 adds docstrings and doctests for `cell.py` except for 2 functions: one of which is a hack (`doc_html`), and the other I have no idea how to test (`stop_interacting`).\n\nI'll put this up for review, and we can work on the rest of the documentation another time (unless you want to add some more now?).",
    "created_at": "2009-08-31T10:18:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6840#issuecomment-50038",
    "user": "https://github.com/TimDumol"
}
```

<div id="comment:7" align="right">Comment 7</div>

Version 4 adds docstrings and doctests for `cell.py` except for 2 functions: one of which is a hack (`doc_html`), and the other I have no idea how to test (`stop_interacting`).

I'll put this up for review, and we can work on the rest of the documentation another time (unless you want to add some more now?).



---

archive/issue_events_075065.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2009-08-31T12:52:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6840#event-75065"
}
```



---

archive/issue_events_075066.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2009-08-31T12:52:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6840#event-75066"
}
```



---

archive/issue_comments_050039.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nThe patch `trac_6840-notebook-documentation-v4.patch` applies OK against 4.1.1, but with one fuzz:\n\n```\n[mvngu@sage sage-main]$ hg qimport https://github.com/sagemath/sage/files/ticket6840/trac_6840-notebook-documentation-v4.patch.gz && hg qpush\nadding trac_6840-notebook-documentation-v4.patch to series file\napplying trac_6840-notebook-documentation-v4.patch\npatching file sage/server/notebook/config.py\nHunk #1 succeeded at 1 with fuzz 1 (offset -1 lines).\nNow at: trac_6840-notebook-documentation-v4.patch\n```\nBuilding the reference manual results in about 10 warnings:\n\n```\nWARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/cell.py:docstring of sage.server.notebook.cell.Cell.html:8: (WARNING/2) Inline literal start-string without end-string.\nWARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/cell.py:docstring of sage.server.notebook.cell.Cell.html_out:6: (WARNING/2) Bullet list ends without a blank line; unexpected unindent.\nWARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/cell.py:docstring of sage.server.notebook.cell.Cell.is_interacting:8: (WARNING/2) Block quote ends without a blank line; unexpected unindent.\nWARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/cell.py:docstring of sage.server.notebook.cell.Cell.output_text:10: (WARNING/2) Bullet list ends without a blank line; unexpected unindent.\nWARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/cell.py:docstring of sage.server.notebook.cell.Cell.parse_html:15: (WARNING/2) Block quote ends without a blank line; unexpected unindent.\nWARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/cell.py:docstring of sage.server.notebook.cell.ComputeCell.html:8: (WARNING/2) Inline literal start-string without end-string.\nWARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/cell.py:docstring of sage.server.notebook.cell.ComputeCell.html_out:6: (WARNING/2) Bullet list ends without a blank line; unexpected unindent.\nWARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/cell.py:docstring of sage.server.notebook.cell.ComputeCell.is_interacting:8: (WARNING/2) Block quote ends without a blank line; unexpected unindent.\nWARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/cell.py:docstring of sage.server.notebook.cell.ComputeCell.output_text:10: (WARNING/2) Bullet list ends without a blank line; unexpected unindent.\nWARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/cell.py:docstring of sage.server.notebook.cell.ComputeCell.parse_html:15: (WARNING/2) Block quote ends without a blank line; unexpected unindent.\n```\nThe test suite reports one doctest failure:\n\n```\nsage -t -long devel/sage-main/sage/server/notebook/cell.py\n**********************************************************************\nFile \"/scratch/mvngu/release/sage-4.1.1/devel/sage-main/sage/server/notebook/cell.py\", line 1598:\n    sage: C.introspect_html()\nExpected:\n    '<div class=\"docstring\">\\n    \\n  <p><span class=\"math\">foobar</span></p>\\n\\n\\n</div>'\nGot:\n    '<div class=\"docstring\">\\n    \\n  \\n  <p><span class=\"math\">foobar</span></p>\\n\\n\\n</div>'\n**********************************************************************\n1 items had failures:\n   1 of  13 in __main__.example_71\n***Test Failed*** 1 failures.\nFor whitespace errors, see the file /scratch/mvngu/release/sage-4.1.1/tmp/.doctest_cell.py\n\t [26.4 s]\n```\nI'm marking this as \"needs work\", since at least the doctest failure must be resolved. The warnings from building the reference manual can be addressed via another ticket. However, it would be nice if both of these issues could be fixed here.",
    "created_at": "2009-08-31T12:52:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6840#issuecomment-50039",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<div id="comment:8" align="right">Comment 8</div>

The patch `trac_6840-notebook-documentation-v4.patch` applies OK against 4.1.1, but with one fuzz:

```
[mvngu@sage sage-main]$ hg qimport https://github.com/sagemath/sage/files/ticket6840/trac_6840-notebook-documentation-v4.patch.gz && hg qpush
adding trac_6840-notebook-documentation-v4.patch to series file
applying trac_6840-notebook-documentation-v4.patch
patching file sage/server/notebook/config.py
Hunk #1 succeeded at 1 with fuzz 1 (offset -1 lines).
Now at: trac_6840-notebook-documentation-v4.patch
```
Building the reference manual results in about 10 warnings:

```
WARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/cell.py:docstring of sage.server.notebook.cell.Cell.html:8: (WARNING/2) Inline literal start-string without end-string.
WARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/cell.py:docstring of sage.server.notebook.cell.Cell.html_out:6: (WARNING/2) Bullet list ends without a blank line; unexpected unindent.
WARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/cell.py:docstring of sage.server.notebook.cell.Cell.is_interacting:8: (WARNING/2) Block quote ends without a blank line; unexpected unindent.
WARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/cell.py:docstring of sage.server.notebook.cell.Cell.output_text:10: (WARNING/2) Bullet list ends without a blank line; unexpected unindent.
WARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/cell.py:docstring of sage.server.notebook.cell.Cell.parse_html:15: (WARNING/2) Block quote ends without a blank line; unexpected unindent.
WARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/cell.py:docstring of sage.server.notebook.cell.ComputeCell.html:8: (WARNING/2) Inline literal start-string without end-string.
WARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/cell.py:docstring of sage.server.notebook.cell.ComputeCell.html_out:6: (WARNING/2) Bullet list ends without a blank line; unexpected unindent.
WARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/cell.py:docstring of sage.server.notebook.cell.ComputeCell.is_interacting:8: (WARNING/2) Block quote ends without a blank line; unexpected unindent.
WARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/cell.py:docstring of sage.server.notebook.cell.ComputeCell.output_text:10: (WARNING/2) Bullet list ends without a blank line; unexpected unindent.
WARNING: /scratch/mvngu/release/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/cell.py:docstring of sage.server.notebook.cell.ComputeCell.parse_html:15: (WARNING/2) Block quote ends without a blank line; unexpected unindent.
```
The test suite reports one doctest failure:

```
sage -t -long devel/sage-main/sage/server/notebook/cell.py
**********************************************************************
File "/scratch/mvngu/release/sage-4.1.1/devel/sage-main/sage/server/notebook/cell.py", line 1598:
    sage: C.introspect_html()
Expected:
    '<div class="docstring">\n    \n  <p><span class="math">foobar</span></p>\n\n\n</div>'
Got:
    '<div class="docstring">\n    \n  \n  <p><span class="math">foobar</span></p>\n\n\n</div>'
**********************************************************************
1 items had failures:
   1 of  13 in __main__.example_71
***Test Failed*** 1 failures.
For whitespace errors, see the file /scratch/mvngu/release/sage-4.1.1/tmp/.doctest_cell.py
	 [26.4 s]
```
I'm marking this as "needs work", since at least the doctest failure must be resolved. The warnings from building the reference manual can be addressed via another ticket. However, it would be nice if both of these issues could be fixed here.



---

archive/issue_comments_050040.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nI've fixed the warnings and the doctest failure.",
    "created_at": "2009-08-31T14:32:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6840#issuecomment-50040",
    "user": "https://github.com/TimDumol"
}
```

<div id="comment:9" align="right">Comment 9</div>

I've fixed the warnings and the doctest failure.



---

archive/issue_events_075067.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2009-08-31T14:32:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6840#event-75067"
}
```



---

archive/issue_events_075068.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2009-08-31T14:32:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6840#event-75068"
}
```



---

archive/issue_comments_050041.json:
```json
{
    "body": "Fixed documentation warnings and doctest failure. Apply this patch only.",
    "created_at": "2009-08-31T14:43:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6840#issuecomment-50041",
    "user": "https://github.com/TimDumol"
}
```

Fixed documentation warnings and doctest failure. Apply this patch only.



---

archive/issue_comments_050042.json:
```json
{
    "body": "Attachment: **[trac_6840-notebook-documentation-v5.patch.gz](https://github.com/sagemath/sage/files/ticket6840/trac_6840-notebook-documentation-v5.patch.gz)**\n\nMiscellaneous tiny changes (see comment). Apply only this patch.",
    "created_at": "2009-08-31T20:43:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6840#issuecomment-50042",
    "user": "https://github.com/qed777"
}
```

Attachment: **[trac_6840-notebook-documentation-v5.patch.gz](https://github.com/sagemath/sage/files/ticket6840/trac_6840-notebook-documentation-v5.patch.gz)**

Miscellaneous tiny changes (see comment). Apply only this patch.



---

archive/issue_comments_050043.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nAttachment: **[trac_6840-notebook-documentation-v6.patch.gz](https://github.com/sagemath/sage/files/ticket6840/trac_6840-notebook-documentation-v6.patch.gz)**\n\nv6 changes:\n\n* Fixed `INPUT::` in `template.py`.\n* Removed the space immediately after `:meth:` in two places in `cell.py`.\n* Removed `config.py` from `notebook.rst`, since there's no significant documentation yet on notebook key bindings.\n\nThat's impressive coverage for `cell.py`!  It seems that `Cell.stop_interacting()` isn't even called in the Sage library.",
    "created_at": "2009-08-31T20:54:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6840#issuecomment-50043",
    "user": "https://github.com/qed777"
}
```

<div id="comment:10" align="right">Comment 10</div>

Attachment: **[trac_6840-notebook-documentation-v6.patch.gz](https://github.com/sagemath/sage/files/ticket6840/trac_6840-notebook-documentation-v6.patch.gz)**

v6 changes:

* Fixed `INPUT::` in `template.py`.
* Removed the space immediately after `:meth:` in two places in `cell.py`.
* Removed `config.py` from `notebook.rst`, since there's no significant documentation yet on notebook key bindings.

That's impressive coverage for `cell.py`!  It seems that `Cell.stop_interacting()` isn't even called in the Sage library.



---

archive/issue_comments_050044.json:
```json
{
    "body": "Author: **Tim Dumol, Mitesh Patel**",
    "created_at": "2009-08-31T20:54:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6840#issuecomment-50044",
    "user": "https://github.com/qed777"
}
```

Author: **Tim Dumol, Mitesh Patel**



---

archive/issue_comments_050045.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nOne way to placate Sphinx about the unused source file `doc/en/reference/sage/server/notebook/config.rst`:  Delete `doc/output/*/en/reference/` and rebuild from scratch.",
    "created_at": "2009-08-31T21:04:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6840#issuecomment-50045",
    "user": "https://github.com/qed777"
}
```

<div id="comment:11" align="right">Comment 11</div>

One way to placate Sphinx about the unused source file `doc/en/reference/sage/server/notebook/config.rst`:  Delete `doc/output/*/en/reference/` and rebuild from scratch.



---

archive/issue_comments_050046.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nThe patch `trac_6840-notebook-documentation-v6.patch` applies OK, but with fuzz:\n\n```\n[mvngu@sage sage-main]$ hg qimport https://github.com/sagemath/sage/files/ticket6840/trac_6840-notebook-documentation-v6.patch.gz && hg qpush\nadding trac_6840-notebook-documentation-v6.patch to series file\napplying trac_6840-notebook-documentation-v6.patch\npatching file sage/server/notebook/config.py\nHunk #1 succeeded at 1 with fuzz 1 (offset -1 lines).\nNow at: trac_6840-notebook-documentation-v6.patch\n```\nDon't worry too much about the fuzz. I have attached a reviewer patch that fixes typos introduced by the previous patch. If you're OK with that reviewer patch, then the ticket gets a positive review and patches should be merged in this order:\n\n1. `trac_6840-notebook-documentation-v6.patch`\n2. `trac_6840-reviewer.patch`",
    "created_at": "2009-09-01T04:20:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6840#issuecomment-50046",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<div id="comment:12" align="right">Comment 12</div>

The patch `trac_6840-notebook-documentation-v6.patch` applies OK, but with fuzz:

```
[mvngu@sage sage-main]$ hg qimport https://github.com/sagemath/sage/files/ticket6840/trac_6840-notebook-documentation-v6.patch.gz && hg qpush
adding trac_6840-notebook-documentation-v6.patch to series file
applying trac_6840-notebook-documentation-v6.patch
patching file sage/server/notebook/config.py
Hunk #1 succeeded at 1 with fuzz 1 (offset -1 lines).
Now at: trac_6840-notebook-documentation-v6.patch
```
Don't worry too much about the fuzz. I have attached a reviewer patch that fixes typos introduced by the previous patch. If you're OK with that reviewer patch, then the ticket gets a positive review and patches should be merged in this order:

1. `trac_6840-notebook-documentation-v6.patch`
2. `trac_6840-reviewer.patch`



---

archive/issue_comments_050047.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nThanks very much for fixing the typos, including `AttributeErrro`.\n\nIs it alright if we treat the \"PLANNING\" section near the top of `interact.py` as \"internal\" documentation, at least for now?  I haven't checked that it's current and Sphinx complains copiously about it.  Either way, just let me know, and I'll attach v2 of the reviewer patch, since I found at least one more minor change to make (`2D` to `2-D`).\n\nBy the way, is there a reST alternative to double back-quotes that puts the enclosed text in a fixed-width font but does not change its background color?",
    "created_at": "2009-09-01T05:16:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6840#issuecomment-50047",
    "user": "https://github.com/qed777"
}
```

<div id="comment:13" align="right">Comment 13</div>

Thanks very much for fixing the typos, including `AttributeErrro`.

Is it alright if we treat the "PLANNING" section near the top of `interact.py` as "internal" documentation, at least for now?  I haven't checked that it's current and Sphinx complains copiously about it.  Either way, just let me know, and I'll attach v2 of the reviewer patch, since I found at least one more minor change to make (`2D` to `2-D`).

By the way, is there a reST alternative to double back-quotes that puts the enclosed text in a fixed-width font but does not change its background color?



---

archive/issue_comments_050048.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nWhile I'm here I should ask whether we should put both side-effects, including possible exceptions, *and* return values in `OUTPUT` sections.  Mostly, I've mentioned just the return values in `OUTPUT`.  On occasion, I've noted significant effects in the blurb at the top of a docstring.",
    "created_at": "2009-09-01T05:25:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6840#issuecomment-50048",
    "user": "https://github.com/qed777"
}
```

<div id="comment:14" align="right">Comment 14</div>

While I'm here I should ask whether we should put both side-effects, including possible exceptions, *and* return values in `OUTPUT` sections.  Mostly, I've mentioned just the return values in `OUTPUT`.  On occasion, I've noted significant effects in the blurb at the top of a docstring.



---

archive/issue_comments_050049.json:
```json
{
    "body": "Attachment: **[trac_6840-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket6840/trac_6840-reviewer.patch.gz)**\n\napply on top of previous patch",
    "created_at": "2009-09-01T05:35:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6840#issuecomment-50049",
    "user": "https://github.com/sagetrac-mvngu"
}
```

Attachment: **[trac_6840-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket6840/trac_6840-reviewer.patch.gz)**

apply on top of previous patch



---

archive/issue_comments_050050.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nReplying to [@qed777](#comment%3A13):\n> Is it alright if we treat the \"PLANNING\" section near the top of `interact.py` as \"internal\" documentation, at least for now?  I haven't checked that it's current and Sphinx complains copiously about it.\n\nNew reviewer patch attached. Please use that one. That should get rid of the complaints by Sphinx.\n\n\n\n>  Either way, just let me know, and I'll attach v2 of the reviewer patch, since I found at least one more minor change to make (`2D` to `2-D`).\n\nThe updated reviewer patch also addresses this issue.\n\n\n\n\n> By the way, is there a reST alternative to double back-quotes that puts the enclosed text in a fixed-width font but does not change its background color?\n\nI don't know.\n\n\n\nReplying to [@qed777](#comment%3A14):\n> While I'm here I should ask whether we should put both side-effects, including possible exceptions, *and* return values in `OUTPUT` sections.  Mostly, I've mentioned just the return values in `OUTPUT`.  On occasion, I've noted significant effects in the blurb at the top of a docstring.\n\nThat's a good idea. Document what works and what doesn't. I usually have a \"TESTS:\" section for a method/function/class where I document exceptions that could be raised when using that method/function/class.",
    "created_at": "2009-09-01T05:42:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6840#issuecomment-50050",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<div id="comment:15" align="right">Comment 15</div>

Replying to [@qed777](#comment%3A13):
> Is it alright if we treat the "PLANNING" section near the top of `interact.py` as "internal" documentation, at least for now?  I haven't checked that it's current and Sphinx complains copiously about it.

New reviewer patch attached. Please use that one. That should get rid of the complaints by Sphinx.



>  Either way, just let me know, and I'll attach v2 of the reviewer patch, since I found at least one more minor change to make (`2D` to `2-D`).

The updated reviewer patch also addresses this issue.




> By the way, is there a reST alternative to double back-quotes that puts the enclosed text in a fixed-width font but does not change its background color?

I don't know.



Replying to [@qed777](#comment%3A14):
> While I'm here I should ask whether we should put both side-effects, including possible exceptions, *and* return values in `OUTPUT` sections.  Mostly, I've mentioned just the return values in `OUTPUT`.  On occasion, I've noted significant effects in the blurb at the top of a docstring.

That's a good idea. Document what works and what doesn't. I usually have a "TESTS:" section for a method/function/class where I document exceptions that could be raised when using that method/function/class.



---

archive/issue_events_075069.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2009-09-01T06:05:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6840#event-75069"
}
```



---

archive/issue_events_075070.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2009-09-01T06:05:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6840#event-75070"
}
```



---

archive/issue_comments_050051.json:
```json
{
    "body": "Reviewer: **Minh Van Nguyen, Mitesh Patel**",
    "created_at": "2009-09-01T06:05:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6840#issuecomment-50051",
    "user": "https://github.com/qed777"
}
```

Reviewer: **Minh Van Nguyen, Mitesh Patel**



---

archive/issue_comments_050052.json:
```json
{
    "body": "Changed author from **Tim Dumol, Mitesh Patel** to **Tim Dumol, Minh Van Nguyen, Mitesh Patel**",
    "created_at": "2009-09-01T06:05:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6840#issuecomment-50052",
    "user": "https://github.com/qed777"
}
```

Changed author from **Tim Dumol, Mitesh Patel** to **Tim Dumol, Minh Van Nguyen, Mitesh Patel**



---

archive/issue_comments_050053.json:
```json
{
    "body": "Merged: **Sage 4.1.2.alpha0**",
    "created_at": "2009-09-01T06:12:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6840#issuecomment-50053",
    "user": "https://github.com/sagetrac-mvngu"
}
```

Merged: **Sage 4.1.2.alpha0**



---

archive/issue_events_075071.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2009-09-01T06:12:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6840#event-75071"
}
```



---

archive/issue_events_075072.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2009-09-01T06:12:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6840#event-75072"
}
```



---

archive/issue_comments_050054.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nMerged patches in this order:\n\n1. `trac_6840-notebook-documentation-v6.patch`\n2. `trac_6840-reviewer.patch`\n\nI take reviewer credit, but not authorship credit :-)",
    "created_at": "2009-09-01T06:12:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6840#issuecomment-50054",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<div id="comment:17" align="right">Comment 17</div>

Merged patches in this order:

1. `trac_6840-notebook-documentation-v6.patch`
2. `trac_6840-reviewer.patch`

I take reviewer credit, but not authorship credit :-)



---

archive/issue_comments_050055.json:
```json
{
    "body": "Changed author from **Tim Dumol, Minh Van Nguyen, Mitesh Patel** to **Tim Dumol, Mitesh Patel**",
    "created_at": "2009-09-01T06:12:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6840",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6840#issuecomment-50055",
    "user": "https://github.com/sagetrac-mvngu"
}
```

Changed author from **Tim Dumol, Minh Van Nguyen, Mitesh Patel** to **Tim Dumol, Mitesh Patel**
