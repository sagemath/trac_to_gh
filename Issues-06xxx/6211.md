# Issue 6211: [with patch, positive review] typesetting exp sometimes broken

archive/issues_006211.json:
```json
{
    "body": "Typesetting e.g. e^sqrt(kappa) doesn't currently work.  \n\nCC:  @mwhansen\n\nResolution: fixed\n\nAuthor: Burcin Erocal\n\nReviewer: Nick Alexander\n\nMerged: 4.0.2.alpha0\n\nIssue created by migration from https://trac.sagemath.org/ticket/6211\n\n",
    "closed_at": "2009-06-14T21:41:01Z",
    "created_at": "2009-06-04T20:06:11Z",
    "labels": [
        "component: symbolics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.0.2",
    "title": "[with patch, positive review] typesetting exp sometimes broken",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/6211",
    "user": "https://github.com/burcin"
}
```
Typesetting e.g. e^sqrt(kappa) doesn't currently work.  

CC:  @mwhansen

Resolution: fixed

Author: Burcin Erocal

Reviewer: Nick Alexander

Merged: 4.0.2.alpha0

Issue created by migration from https://trac.sagemath.org/ticket/6211





---

archive/issue_comments_050977.json:
```json
{
    "body": "<a id='comment:1'></a>Latex typesetting of sub expressions also seem to be broken. This is probably caused by pynac not passing on the printing context when it calls the print function on the subexpression, though I haven't looked at any code yet.\n\nHere is an example:\n\n```\nsage: var('kappa')\nkappa\nsage: x = sqrt(kappa)\nsage: latex(x)\n\\sqrt{\\kappa}\nsage: F = exp(x)\nsage: F\ne^sqrt(kappa)\nsage: latex(F)\ne^{sqrt(kappa)}\n```",
    "created_at": "2009-06-10T08:46:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6211#issuecomment-50977",
    "user": "https://github.com/burcin"
}
```

<a id='comment:1'></a>Latex typesetting of sub expressions also seem to be broken. This is probably caused by pynac not passing on the printing context when it calls the print function on the subexpression, though I haven't looked at any code yet.

Here is an example:

```
sage: var('kappa')
kappa
sage: x = sqrt(kappa)
sage: latex(x)
\sqrt{\kappa}
sage: F = exp(x)
sage: F
e^sqrt(kappa)
sage: latex(F)
e^{sqrt(kappa)}
```



---

archive/issue_comments_050978.json:
```json
{
    "body": "<a id='comment:2'></a>Burcin: It seems the problem of sub-expression not getting typeset properly\nis specific to exp function. I could get it working by adding the\n_latex_composition method to class Function_exp (sage.functions.log) as\n\n```\n    def _latex_composition(self, x):\n        from sage.misc.latex import latex\n        return \"e^{%s}\"%(latex(x))\n```\n\nNote: My sage copy has patch #5711 applied on it.",
    "created_at": "2009-06-13T11:54:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6211#issuecomment-50978",
    "user": "https://github.com/golam-m-hossain"
}
```

<a id='comment:2'></a>Burcin: It seems the problem of sub-expression not getting typeset properly
is specific to exp function. I could get it working by adding the
_latex_composition method to class Function_exp (sage.functions.log) as

```
    def _latex_composition(self, x):
        from sage.misc.latex import latex
        return "e^{%s}"%(latex(x))
```

Note: My sage copy has patch #5711 applied on it.



---

archive/issue_comments_050979.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,21 +1,4 @@\n-Reported by Ricardo on sage-support:\n-\n-```\n-I had installed sage 3.4.1 in my Ubuntu machine, and every time I did\n-something like:\n-\n-f=function(\"f\",x)\n-integrate(f,x,0,1)\n-\n-in a notebook, sage showed me the equation using an integral symbol. I\n-just installed sage 4.0, and when I do the same, I get:\n-\n-integrate(f(x), x, 0, 1)\n-\n-\n-no matter if I check the Typeset Box. It happens also with\n-derivatives.\n-```\n+Typesetting e.g. e^sqrt(kappa) doesn't currently work.  \n \n Comment: 1\n \n``````\n",
    "created_at": "2009-06-13T23:57:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6211#issuecomment-50979",
    "user": "https://github.com/kcrisman"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,21 +1,4 @@
-Reported by Ricardo on sage-support:
-
-```
-I had installed sage 3.4.1 in my Ubuntu machine, and every time I did
-something like:
-
-f=function("f",x)
-integrate(f,x,0,1)
-
-in a notebook, sage showed me the equation using an integral symbol. I
-just installed sage 4.0, and when I do the same, I get:
-
-integrate(f(x), x, 0, 1)
-
-
-no matter if I check the Typeset Box. It happens also with
-derivatives.
-```
+Typesetting e.g. e^sqrt(kappa) doesn't currently work.  
 
 Comment: 1
 
``````




---

archive/issue_comments_050980.json:
```json
{
    "body": "<a id='comment:3'></a>This was about typesetting integrals, but since a description of exp not typesetting properly was added to this and #5711 is now largely about the typesetting of integrals etc., it seemed wise to change the description and summary.  The commentary above seems pretty useful!",
    "created_at": "2009-06-13T23:57:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6211#issuecomment-50980",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:3'></a>This was about typesetting integrals, but since a description of exp not typesetting properly was added to this and #5711 is now largely about the typesetting of integrals etc., it seemed wise to change the description and summary.  The commentary above seems pretty useful!



---

archive/issue_comments_050981.json:
```json
{
    "body": "Attachment [trac_6211-exp_latex.patch](tarball://root/attachments/some-uuid/ticket6211/trac_6211-exp_latex.patch) by @burcin created at 2009-06-14 21:36:57",
    "created_at": "2009-06-14T21:36:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6211#issuecomment-50981",
    "user": "https://github.com/burcin"
}
```

Attachment [trac_6211-exp_latex.patch](tarball://root/attachments/some-uuid/ticket6211/trac_6211-exp_latex.patch) by @burcin created at 2009-06-14 21:36:57



---

archive/issue_comments_050982.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2009-06-14T21:41:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6211#issuecomment-50982",
    "user": "https://github.com/ncalexan"
}
```

Resolution: fixed



---

archive/issue_comments_050983.json:
```json
{
    "body": "<a id='comment:4'></a>Fine by me.",
    "created_at": "2009-06-14T21:41:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6211#issuecomment-50983",
    "user": "https://github.com/ncalexan"
}
```

<a id='comment:4'></a>Fine by me.



---

archive/issue_events_014566.json:
```json
{
    "actor": "https://github.com/ncalexan",
    "created_at": "2009-06-14T21:41:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/6211",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/6211#event-14566"
}
```
