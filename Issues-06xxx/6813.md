# Issue 6813: The whole world in a graph

archive/issues_006813.json:
```json
{
    "body": "see http://groups.google.com/group/sage-devel/browse_thread/thread/25e57b8421c0ae9c/5ed13d13bc41b370#5ed13d13bc41b370\n\nThis patch adds a function WorldMap to graph_generators.py, which lets the user load the graph in which vertices are countries and links denote a shared boundary between two of them. The data I used to build this comes from The Cia Factbook ( mentionned in the docstring )\n\nTo use it, you need to apply the patch, but also to move the file graph_world.sobj to SAGE_ROOT/data/graphs/\n\nThank you for your help ! :-)\n\nAssignee: @rlmill\n\nResolution: fixed\n\nAuthor: Nathann Cohen\n\nReviewer: Adam Webb\n\nMerged: sage-4.3.alpha1\n\nIssue created by migration from https://trac.sagemath.org/ticket/6813\n\n",
    "closed_at": "2009-11-29T04:50:40Z",
    "created_at": "2009-08-23T08:43:18Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.3",
    "title": "The whole world in a graph",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/6813",
    "user": "https://github.com/nathanncohen"
}
```
see http://groups.google.com/group/sage-devel/browse_thread/thread/25e57b8421c0ae9c/5ed13d13bc41b370#5ed13d13bc41b370

This patch adds a function WorldMap to graph_generators.py, which lets the user load the graph in which vertices are countries and links denote a shared boundary between two of them. The data I used to build this comes from The Cia Factbook ( mentionned in the docstring )

To use it, you need to apply the patch, but also to move the file graph_world.sobj to SAGE_ROOT/data/graphs/

Thank you for your help ! :-)

Assignee: @rlmill

Resolution: fixed

Author: Nathann Cohen

Reviewer: Adam Webb

Merged: sage-4.3.alpha1

Issue created by migration from https://trac.sagemath.org/ticket/6813





---

archive/issue_comments_070296.json:
```json
{
    "body": "Attachment [graph_world.sobj](tarball://root/attachments/some-uuid/ticket6813/graph_world.sobj) by @nathanncohen created at 2009-08-23 08:44:25",
    "created_at": "2009-08-23T08:44:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6813#issuecomment-70296",
    "user": "https://github.com/nathanncohen"
}
```

Attachment [graph_world.sobj](tarball://root/attachments/some-uuid/ticket6813/graph_world.sobj) by @nathanncohen created at 2009-08-23 08:44:25



---

archive/issue_comments_070297.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2009-09-22T16:13:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6813#issuecomment-70297",
    "user": "https://github.com/jasongrout"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_070298.json:
```json
{
    "body": "<a id='comment:1'></a>\nAttachment [worldmap.patch](tarball://root/attachments/some-uuid/ticket6813/worldmap.patch) by @jasongrout created at 2009-09-22 16:13:35\n\nI get errors.  At the bottom, I copy the md5 digest to check my download:\n\n```\nsage: g=graphs.WorldMap() \n---------------------------------------------------------------------------\nUnpicklingError                           Traceback (most recent call last)\n\n/home/jason/.sage/temp/littleone/13542/_home_jason__sage_init_sage_0.py in <module>()\n\n/home/jason/sage/local/lib/python2.6/site-packages/sage/graphs/graph_generators.pyc in WorldMap(self)\n   2985         from sage.structure.sage_object import load\n   2986         from sage.misc.misc import SAGE_DATA\n-> 2987         return load(SAGE_DATA+\"graphs/graph_world.sobj\")\n   2988 \n   2989 ################################################################################\n\n/home/jason/sage/local/lib/python2.6/site-packages/sage/structure/sage_object.so in sage.structure.sage_object.load (sage/structure/sage_object.c:7173)()\n\n/home/jason/sage/local/lib/python2.6/site-packages/sage/structure/sage_object.so in sage.structure.sage_object.loads (sage/structure/sage_object.c:8769)()\n\nUnpicklingError: invalid load key, '<'.\nsage: load sage.misc.misc.SAGE_DATA + 'graphs/graph_world.sobj'\n---------------------------------------------------------------------------\nUnpicklingError                           Traceback (most recent call last)\n\n/home/jason/.sage/temp/littleone/13542/_home_jason__sage_init_sage_0.py in <module>()\n\n/home/jason/sage/local/lib/python2.6/site-packages/sage/structure/sage_object.so in sage.structure.sage_object.load (sage/structure/sage_object.c:7173)()\n\n/home/jason/sage/local/lib/python2.6/site-packages/sage/structure/sage_object.so in sage.structure.sage_object.loads (sage/structure/sage_object.c:8769)()\n\nUnpicklingError: invalid load key, '<'.\nsage: os.listdir(sage.misc.misc.SAGE_DATA + 'graphs/')\n['graph_world.sobj', 'graphs.db']\nsage: import md5 \nsage: md5.md5(sage.misc.misc.SAGE_DATA + 'graphs/graph_world.sobj').hexdigest()\n'0ae838b9de40596827c6e674b733f489'\n```",
    "created_at": "2009-09-22T16:13:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6813#issuecomment-70298",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:1'></a>
Attachment [worldmap.patch](tarball://root/attachments/some-uuid/ticket6813/worldmap.patch) by @jasongrout created at 2009-09-22 16:13:35

I get errors.  At the bottom, I copy the md5 digest to check my download:

```
sage: g=graphs.WorldMap() 
---------------------------------------------------------------------------
UnpicklingError                           Traceback (most recent call last)

/home/jason/.sage/temp/littleone/13542/_home_jason__sage_init_sage_0.py in <module>()

/home/jason/sage/local/lib/python2.6/site-packages/sage/graphs/graph_generators.pyc in WorldMap(self)
   2985         from sage.structure.sage_object import load
   2986         from sage.misc.misc import SAGE_DATA
-> 2987         return load(SAGE_DATA+"graphs/graph_world.sobj")
   2988 
   2989 ################################################################################

/home/jason/sage/local/lib/python2.6/site-packages/sage/structure/sage_object.so in sage.structure.sage_object.load (sage/structure/sage_object.c:7173)()

/home/jason/sage/local/lib/python2.6/site-packages/sage/structure/sage_object.so in sage.structure.sage_object.loads (sage/structure/sage_object.c:8769)()

UnpicklingError: invalid load key, '<'.
sage: load sage.misc.misc.SAGE_DATA + 'graphs/graph_world.sobj'
---------------------------------------------------------------------------
UnpicklingError                           Traceback (most recent call last)

/home/jason/.sage/temp/littleone/13542/_home_jason__sage_init_sage_0.py in <module>()

/home/jason/sage/local/lib/python2.6/site-packages/sage/structure/sage_object.so in sage.structure.sage_object.load (sage/structure/sage_object.c:7173)()

/home/jason/sage/local/lib/python2.6/site-packages/sage/structure/sage_object.so in sage.structure.sage_object.loads (sage/structure/sage_object.c:8769)()

UnpicklingError: invalid load key, '<'.
sage: os.listdir(sage.misc.misc.SAGE_DATA + 'graphs/')
['graph_world.sobj', 'graphs.db']
sage: import md5 
sage: md5.md5(sage.misc.misc.SAGE_DATA + 'graphs/graph_world.sobj').hexdigest()
'0ae838b9de40596827c6e674b733f489'
```



---

archive/issue_comments_070299.json:
```json
{
    "body": "<a id='comment:2'></a>\nthat was with 4.1.2.alpha2",
    "created_at": "2009-09-22T16:14:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6813#issuecomment-70299",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:2'></a>
that was with 4.1.2.alpha2



---

archive/issue_comments_070300.json:
```json
{
    "body": "<a id='comment:3'></a>\nI get a totally different checksum..... Good job noticing it !!!\n\nI just retried to load the graph with a version of the file graph_world downloaded from the TRAC server and it worked for me. My checksum is the following :\n\n```\nsage: sage: g=graphs.WorldMap() \nsage: g\nGraph on 251 vertices\nsage: import md5 \nsage: sage: md5.md5(sage.misc.misc.SAGE_DATA + 'graphs/graph_world.sobj').hexdigest()\n'805fdf0227e964c41f3892c6979f62dc'\n```\n\nAs I suspect it may come from some weird encoding, here is a .rar version of the file : http://www-sop.inria.fr/members/Nathann.Cohen/world.rar\n\nI also copied the file on sagemath in the directory as ~/ncohen/graph_world.sobj\n\nOn my machine \n\n```\n~$ md5sum  /usr/local/sage/data/graphs/graph_world.sobj\n438bc195a9486caebeb47442ff8b8d8c  /usr/local/sage/data/graphs/graph_world.sobj\n```\nOn sagemath \n\n```\nncohen@sage:~$ md5sum graph_world.sobj \n438bc195a9486caebeb47442ff8b8d8c  graph_world.sobj\n```\n\nCould you check if this version works, and if the checksum is correct ? Thank you !!!\n\nNathann",
    "created_at": "2009-09-26T15:36:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6813#issuecomment-70300",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:3'></a>
I get a totally different checksum..... Good job noticing it !!!

I just retried to load the graph with a version of the file graph_world downloaded from the TRAC server and it worked for me. My checksum is the following :

```
sage: sage: g=graphs.WorldMap() 
sage: g
Graph on 251 vertices
sage: import md5 
sage: sage: md5.md5(sage.misc.misc.SAGE_DATA + 'graphs/graph_world.sobj').hexdigest()
'805fdf0227e964c41f3892c6979f62dc'
```

As I suspect it may come from some weird encoding, here is a .rar version of the file : http://www-sop.inria.fr/members/Nathann.Cohen/world.rar

I also copied the file on sagemath in the directory as ~/ncohen/graph_world.sobj

On my machine 

```
~$ md5sum  /usr/local/sage/data/graphs/graph_world.sobj
438bc195a9486caebeb47442ff8b8d8c  /usr/local/sage/data/graphs/graph_world.sobj
```
On sagemath 

```
ncohen@sage:~$ md5sum graph_world.sobj 
438bc195a9486caebeb47442ff8b8d8c  graph_world.sobj
```

Could you check if this version works, and if the checksum is correct ? Thank you !!!

Nathann



---

archive/issue_comments_070301.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2009-09-26T15:36:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6813#issuecomment-70301",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_070302.json:
```json
{
    "body": "<a id='comment:4'></a>\nI get the same checksum as you do. \n\n```\n$ md5sum data/graphs/graph_world.sobj\n438bc195a9486caebeb47442ff8b8d8c  data/graphs/graph_world.sobj\n```\nI was unable to apply the patch to sage-4.1.2.rc0. I guess a rebase is needed. Once I had the patch applied there were some warnings when I tried to do sage -docbuild. I made some changes to fix that. Specifically, I changed the reference so that it was similar to other ones on the same page. I hope that it is still fine. Otherwise, if you are happy with my small changes than I would give it a positive review.\n\nAdam",
    "created_at": "2009-10-10T11:47:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6813#issuecomment-70302",
    "user": "https://github.com/maxthemouse"
}
```

<a id='comment:4'></a>
I get the same checksum as you do. 

```
$ md5sum data/graphs/graph_world.sobj
438bc195a9486caebeb47442ff8b8d8c  data/graphs/graph_world.sobj
```
I was unable to apply the patch to sage-4.1.2.rc0. I guess a rebase is needed. Once I had the patch applied there were some warnings when I tried to do sage -docbuild. I made some changes to fix that. Specifically, I changed the reference so that it was similar to other ones on the same page. I hope that it is still fine. Otherwise, if you are happy with my small changes than I would give it a positive review.

Adam



---

archive/issue_comments_070303.json:
```json
{
    "body": "applies to sage-4.1.2.rc0",
    "created_at": "2009-10-10T11:59:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6813#issuecomment-70303",
    "user": "https://github.com/maxthemouse"
}
```

applies to sage-4.1.2.rc0



---

archive/issue_comments_070304.json:
```json
{
    "body": "Reviewer: Adam Webb",
    "created_at": "2009-10-10T12:00:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6813#issuecomment-70304",
    "user": "https://github.com/maxthemouse"
}
```

Reviewer: Adam Webb



---

archive/issue_comments_070305.json:
```json
{
    "body": "<a id='comment:5'></a>\nAttachment [6813-worldmap.patch](tarball://root/attachments/some-uuid/ticket6813/6813-worldmap.patch) by @maxthemouse created at 2009-10-10 12:00:04",
    "created_at": "2009-10-10T12:00:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6813#issuecomment-70305",
    "user": "https://github.com/maxthemouse"
}
```

<a id='comment:5'></a>
Attachment [6813-worldmap.patch](tarball://root/attachments/some-uuid/ticket6813/6813-worldmap.patch) by @maxthemouse created at 2009-10-10 12:00:04



---

archive/issue_comments_070306.json:
```json
{
    "body": "<a id='comment:6'></a>\nThese changes are perfect for me ! Thank for your help :-)",
    "created_at": "2009-10-10T12:02:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6813#issuecomment-70306",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:6'></a>
These changes are perfect for me ! Thank for your help :-)



---

archive/issue_comments_070307.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2009-10-10T13:22:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6813#issuecomment-70307",
    "user": "https://github.com/maxthemouse"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_070308.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2009-10-10T13:22:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6813#issuecomment-70308",
    "user": "https://github.com/maxthemouse"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_070309.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2009-11-29T04:50:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6813#issuecomment-70309",
    "user": "https://github.com/mwhansen"
}
```

Resolution: fixed



---

archive/issue_comments_070310.json:
```json
{
    "body": "Merged: sage-4.3.alpha1",
    "created_at": "2009-11-29T04:50:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6813#issuecomment-70310",
    "user": "https://github.com/mwhansen"
}
```

Merged: sage-4.3.alpha1



---

archive/issue_events_020546.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-11-29T04:50:40Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/6813",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/6813#event-20546"
}
```



---

archive/issue_comments_070311.json:
```json
{
    "body": "Author: Nathann Cohen",
    "created_at": "2009-11-29T04:50:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6813#issuecomment-70311",
    "user": "https://github.com/mwhansen"
}
```

Author: Nathann Cohen



---

archive/issue_comments_070312.json:
```json
{
    "body": "Upstream: N/A",
    "created_at": "2009-11-29T04:50:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6813#issuecomment-70312",
    "user": "https://github.com/mwhansen"
}
```

Upstream: N/A



---

archive/issue_comments_070313.json:
```json
{
    "body": "<a id='comment:9'></a>\nI had to add the .sobj file to the graphs-20070722 spkg.",
    "created_at": "2009-12-06T08:57:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/6813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/6813#issuecomment-70313",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:9'></a>
I had to add the .sobj file to the graphs-20070722 spkg.
