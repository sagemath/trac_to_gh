# Issue 6820: Easy command-line access to HTML documentation and docstrings

archive/issues_006820.json:
```json
{
    "assignees": [],
    "body": "The attached patch introduces the command `browse_sage_doc`.  It lets you do the following from either the command-line or the notebook:\n\n```\nbrowse_sage_doc.tutorial()   # open the tutorial in a browser window\nbrowse_sage_doc.reference()\nbrowse_sage_doc.developer()\nbrowse_sage_doc.constructions()\n```\nand also\n\n```\nbrowse_sage_doc(identity_matrix)\n```\nopens up the docstring for `identity_matrix` in a browser window.  It doesn't look very pretty, but it's legible.  You can also do\n\n```\nbrowse_sage_doc(identity_matrix, output='rst')\n```\nto output (as a string) the reST version of the docstring, and\n\n```\nbrowse_sage_doc(identity_matrix, view=False)\n```\nto output (as a string) the html version of the docstring.\n\nNew: following cremona's suggestion, this also adds the following top-level commands:\n\n```\ntutorial()\nreference()\nmanual()  # synonym for \"reference\"\ndeveloper()\nconstructions()\n```\nThese open the corresponding document.  The new command `python_help` does what the old command `help` did.  The new command help does the following: with an argument, it acts like the old help -- that is, it calls `python_help(arg)`.  With no argument, it prints this message:\n\n```\nWelcome to Sage %s!  To view the Sage tutorial in your web browser,\ntype 'tutorial()', and to view the (very detailed) Sage reference\nmanual, type 'manual()'.  For help on any Sage function, for example\n'matrix_plot', type 'matrix_plot?' to see a help message, type\n'help(matrix_plot)' to see a very similar message, type\n'browse_sage_doc(matrix_plot)' to view a message in a web browser, and\ntype 'matrix_plot??' to look at the function's source code.\n\nTo enter Python's interactive online help utility, type 'python_help()'.\nTo get help on a Python function, module or package, type 'help(MODULE)' or\n'python_help(MODULE)'.\n```\n(with the \"%s\" in the first line replaced by the version number).\n\nCC:  @qed777\n\nKeywords: **documentation**\n\nAuthor: **John Palmieri, Mitesh Patel**\n\nReviewer: **Mitesh Patel, John Cremona, John Palmieri**\n\nMerged: **sage-4.3.1.alpha0**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/6820_\n\n",
    "closed_at": "2010-01-03T22:03:51Z",
    "created_at": "2009-08-24T20:05:18Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20documentation",
        "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.3.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Easy command-line access to HTML documentation and docstrings",
    "type": "issue",
    "updated_at": "2010-01-03T22:03:51Z",
    "url": "https://github.com/sagemath/sage/issues/6820",
    "user": "https://github.com/jhpalmieri"
}
```
The attached patch introduces the command `browse_sage_doc`.  It lets you do the following from either the command-line or the notebook:

```
browse_sage_doc.tutorial()   # open the tutorial in a browser window
browse_sage_doc.reference()
browse_sage_doc.developer()
browse_sage_doc.constructions()
```
and also

```
browse_sage_doc(identity_matrix)
```
opens up the docstring for `identity_matrix` in a browser window.  It doesn't look very pretty, but it's legible.  You can also do

```
browse_sage_doc(identity_matrix, output='rst')
```
to output (as a string) the reST version of the docstring, and

```
browse_sage_doc(identity_matrix, view=False)
```
to output (as a string) the html version of the docstring.

New: following cremona's suggestion, this also adds the following top-level commands:

```
tutorial()
reference()
manual()  # synonym for "reference"
developer()
constructions()
```
These open the corresponding document.  The new command `python_help` does what the old command `help` did.  The new command help does the following: with an argument, it acts like the old help -- that is, it calls `python_help(arg)`.  With no argument, it prints this message:

```
Welcome to Sage %s!  To view the Sage tutorial in your web browser,
type 'tutorial()', and to view the (very detailed) Sage reference
manual, type 'manual()'.  For help on any Sage function, for example
'matrix_plot', type 'matrix_plot?' to see a help message, type
'help(matrix_plot)' to see a very similar message, type
'browse_sage_doc(matrix_plot)' to view a message in a web browser, and
type 'matrix_plot??' to look at the function's source code.

To enter Python's interactive online help utility, type 'python_help()'.
To get help on a Python function, module or package, type 'help(MODULE)' or
'python_help(MODULE)'.
```
(with the "%s" in the first line replaced by the version number).

CC:  @qed777

Keywords: **documentation**

Author: **John Palmieri, Mitesh Patel**

Reviewer: **Mitesh Patel, John Cremona, John Palmieri**

Merged: **sage-4.3.1.alpha0**

_Issue created by migration from https://trac.sagemath.org/ticket/6820_





---

archive/issue_events_074830.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2009-08-24T20:05:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "milestone_number": null,
    "milestone_title": "sage-4.3.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6820#event-74830"
}
```



---

archive/issue_events_074831.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2009-08-24T20:05:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20documentation",
    "label_color": "0075ca",
    "label_name": "component: documentation",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6820#event-74831"
}
```



---

archive/issue_events_074832.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2009-08-24T20:05:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "label": "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6820#event-74832"
}
```



---

archive/issue_events_074833.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2009-08-24T20:05:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6820#event-74833"
}
```



---

archive/issue_events_074834.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2009-08-24T20:05:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6820#event-74834"
}
```



---

archive/issue_events_074835.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2009-08-24T20:05:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6820#event-74835"
}
```



---

archive/issue_comments_049814.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -14,7 +14,7 @@\n opens up the docstring for `identity_matrix` in a browser window.  It doesn't look very pretty, but it's legible.  You can also do\n \n ```\n-browse_sage_doc(identity_matrix, output='rst)\n+browse_sage_doc(identity_matrix, output='rst')\n ```\n to output (as a string) the reST version of the docstring, and\n \n``````\n",
    "created_at": "2009-08-24T20:09:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6820#issuecomment-49814",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -14,7 +14,7 @@
 opens up the docstring for `identity_matrix` in a browser window.  It doesn't look very pretty, but it's legible.  You can also do
 
 ```
-browse_sage_doc(identity_matrix, output='rst)
+browse_sage_doc(identity_matrix, output='rst')
 ```
 to output (as a string) the reST version of the docstring, and
 
``````




---

archive/issue_comments_049815.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nSphinx 0.5.1 throws a strange exception in `Cell.set_introspect_html()`.  I set `verbose=True` and replaced `sphinx_app.build(None, [rst_name])` with\n\n```\n                try:\n                    sphinx_app.build(None, [rst_name])\n                except Exception as exc:\n                    print exc\n```\nFollowing `sage -br`:\n\n```\nsage: browse_sage_doc(identity_matrix)\nIntrospection cache:  /home/.sage/sage_notebook/doc\nSphinx v0.5.1, building html\nbuilding [html]: 1 source files given on command line\nupdating environment: 1 added, 0 changed, 0 removed\nreading sources... 72cbd366010a4030c528d1f807be048b \npickling environment... done\nchecking consistency... done\npreparing documents... done\nwriting output... 72cbd366010a4030c528d1f807be048b [Errno 2] No such file or directory: '../../../sage/local/lib/python2.6/site-packages/docutils/writers/html4css1/html4css1.css'\nBuilt: /home/.sage/sage_notebook/doc/72cbd366010a4030c528d1f807be048b.html\n---------------------------------------------------------------------------\nIOError                                   Traceback (most recent call last)\n\n/home/.sage/temp/chopin/25868/_home__sage_init_sage_0.py in <module>()\n\n/home/apps/sage/local/lib/python2.6/site-packages/sage/misc/sagedoc.pyc in __call__(self, obj, output, view)\n    842             from sage.server.notebook.cell import Cell\n    843             cell = Cell(0, '0', '0', None)\n--> 844             cell.set_introspect_html(s)\n    845             html = cell._Cell__introspect_html\n    846             if view:\n\n/home/apps/sage/local/lib/python2.6/site-packages/sage/server/notebook/cell.pyc in set_introspect_html(self, html, completing, verbose)\n   1590             finally:\n   1591                 # Contents should be flushed on close().\n-> 1592                 fd_html = open(html_name, 'r')\n   1593                 new_html = fd_html.read()\n   1594                 fd_html.close()\n\nIOError: [Errno 2] No such file or directory: '/home/.sage/sage_notebook/doc/72cbd366010a4030c528d1f807be048b.html'\nsage: \n```\nThe lock file remains in the doc cache directory.  This may be peculiar to my current setup, but I can't investigate further right now.\n\nAlso, by default `set_introspect_html()` tries to delete the reST file.\n\nShould we delete leftover .lock files on startup?",
    "created_at": "2009-08-25T00:14:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6820#issuecomment-49815",
    "user": "https://github.com/qed777"
}
```

<div id="comment:2" align="right">Comment 2</div>

Sphinx 0.5.1 throws a strange exception in `Cell.set_introspect_html()`.  I set `verbose=True` and replaced `sphinx_app.build(None, [rst_name])` with

```
                try:
                    sphinx_app.build(None, [rst_name])
                except Exception as exc:
                    print exc
```
Following `sage -br`:

```
sage: browse_sage_doc(identity_matrix)
Introspection cache:  /home/.sage/sage_notebook/doc
Sphinx v0.5.1, building html
building [html]: 1 source files given on command line
updating environment: 1 added, 0 changed, 0 removed
reading sources... 72cbd366010a4030c528d1f807be048b 
pickling environment... done
checking consistency... done
preparing documents... done
writing output... 72cbd366010a4030c528d1f807be048b [Errno 2] No such file or directory: '../../../sage/local/lib/python2.6/site-packages/docutils/writers/html4css1/html4css1.css'
Built: /home/.sage/sage_notebook/doc/72cbd366010a4030c528d1f807be048b.html
---------------------------------------------------------------------------
IOError                                   Traceback (most recent call last)

/home/.sage/temp/chopin/25868/_home__sage_init_sage_0.py in <module>()

/home/apps/sage/local/lib/python2.6/site-packages/sage/misc/sagedoc.pyc in __call__(self, obj, output, view)
    842             from sage.server.notebook.cell import Cell
    843             cell = Cell(0, '0', '0', None)
--> 844             cell.set_introspect_html(s)
    845             html = cell._Cell__introspect_html
    846             if view:

/home/apps/sage/local/lib/python2.6/site-packages/sage/server/notebook/cell.pyc in set_introspect_html(self, html, completing, verbose)
   1590             finally:
   1591                 # Contents should be flushed on close().
-> 1592                 fd_html = open(html_name, 'r')
   1593                 new_html = fd_html.read()
   1594                 fd_html.close()

IOError: [Errno 2] No such file or directory: '/home/.sage/sage_notebook/doc/72cbd366010a4030c528d1f807be048b.html'
sage: 
```
The lock file remains in the doc cache directory.  This may be peculiar to my current setup, but I can't investigate further right now.

Also, by default `set_introspect_html()` tries to delete the reST file.

Should we delete leftover .lock files on startup?



---

archive/issue_comments_049816.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nOn my Mac, I have the same problem with Sphinx 0.5.1, but not with Sphinx 0.6.2.  On an ubuntu box, it works with both 0.5.1 and 0.6.2.",
    "created_at": "2009-08-25T02:19:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6820#issuecomment-49816",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:3" align="right">Comment 3</div>

On my Mac, I have the same problem with Sphinx 0.5.1, but not with Sphinx 0.6.2.  On an ubuntu box, it works with both 0.5.1 and 0.6.2.



---

archive/issue_comments_049817.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nI think this is a great facility.  Just being able to pop up the 4 main docs so easily is worth including this!\n\nWhen I tried  browse_sage_doc(identity_matrix) and the like, I found that the first time I did it I got that error:\n\n```\nsage: browse_sage_doc(identity_matrix)\n---------------------------------------------------------------------------\nIOError                                   Traceback (most recent call last)\n\n/home/john/.sage/temp/ubuntu/12456/_home_john__sage_init_sage_0.py in <module>()\n\n/home/john/sage-4.1.1/local/lib/python2.6/site-packages/sage/misc/sagedoc.pyc in __call__(self, obj, output, view)\n    842             from sage.server.notebook.cell import Cell\n    843             cell = Cell(0, '0', '0', None)\n--> 844             cell.set_introspect_html(s)\n    845             html = cell._Cell__introspect_html\n    846             if view:\n\n/home/john/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/cell.pyc in set_introspect_html(self, html, completing, verbose)\n   1587             finally:\n   1588                 # Contents should be flushed on close().\n-> 1589                 fd_html = open(html_name, 'r')\n   1590                 new_html = fd_html.read()\n   1591                 fd_html.close()\n\nIOError: [Errno 2] No such file or directory: '/home/john/.sage/sage_notebook/doc/009e7e626d87d8b9c5ce659c5b01cdb7.html'\n```\nbut the second time it worked fine.  Same again with browse_sage_doc(EllipticCurve).\n\nI'm not sure how useful the output='rst' or the view=False options are though.",
    "created_at": "2009-09-02T20:35:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6820#issuecomment-49817",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:4" align="right">Comment 4</div>

I think this is a great facility.  Just being able to pop up the 4 main docs so easily is worth including this!

When I tried  browse_sage_doc(identity_matrix) and the like, I found that the first time I did it I got that error:

```
sage: browse_sage_doc(identity_matrix)
---------------------------------------------------------------------------
IOError                                   Traceback (most recent call last)

/home/john/.sage/temp/ubuntu/12456/_home_john__sage_init_sage_0.py in <module>()

/home/john/sage-4.1.1/local/lib/python2.6/site-packages/sage/misc/sagedoc.pyc in __call__(self, obj, output, view)
    842             from sage.server.notebook.cell import Cell
    843             cell = Cell(0, '0', '0', None)
--> 844             cell.set_introspect_html(s)
    845             html = cell._Cell__introspect_html
    846             if view:

/home/john/sage-4.1.1/local/lib/python2.6/site-packages/sage/server/notebook/cell.pyc in set_introspect_html(self, html, completing, verbose)
   1587             finally:
   1588                 # Contents should be flushed on close().
-> 1589                 fd_html = open(html_name, 'r')
   1590                 new_html = fd_html.read()
   1591                 fd_html.close()

IOError: [Errno 2] No such file or directory: '/home/john/.sage/sage_notebook/doc/009e7e626d87d8b9c5ce659c5b01cdb7.html'
```
but the second time it worked fine.  Same again with browse_sage_doc(EllipticCurve).

I'm not sure how useful the output='rst' or the view=False options are though.



---

archive/issue_comments_049818.json:
```json
{
    "body": "Changed keywords from none to **documentation**",
    "created_at": "2009-09-02T20:35:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6820#issuecomment-49818",
    "user": "https://github.com/JohnCremona"
}
```

Changed keywords from none to **documentation**



---

archive/issue_comments_049819.json:
```json
{
    "body": "Reviewer: **mpatel, cremona**",
    "created_at": "2009-09-02T20:35:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6820#issuecomment-49819",
    "user": "https://github.com/JohnCremona"
}
```

Reviewer: **mpatel, cremona**



---

archive/issue_comments_049820.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nReplying to [@JohnCremona](#comment%3A4):\n> I think this is a great facility.  Just being able to pop up the 4 main docs so easily is worth including this!\n> \n> When I tried  browse_sage_doc(identity_matrix) and the like, I found that the first time I did it I got that error:\n\nOn some platforms, this seems to depend on using Sphinx 0.6.2 instead of the version installed with Sage, 0.5.1.  Can you try the spkg at #6586 to see if that helps?  (Use the one listed in [the most recent comment](https://github.com/sagemath/sage/issues/6586#comment:33).)\n\n> I'm not sure how useful the output='rst' or the view=False options are though. \n\nMe neither, but this was in response to [a discussion on sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/fb5f4b2affb89edc/a5d0cdd440aa83fb?tvc=2&q=6820#), in which the ability to see raw rst or raw html was viewed as potentially useful.",
    "created_at": "2009-09-02T21:31:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6820#issuecomment-49820",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:5" align="right">Comment 5</div>

Replying to [@JohnCremona](#comment%3A4):
> I think this is a great facility.  Just being able to pop up the 4 main docs so easily is worth including this!
> 
> When I tried  browse_sage_doc(identity_matrix) and the like, I found that the first time I did it I got that error:

On some platforms, this seems to depend on using Sphinx 0.6.2 instead of the version installed with Sage, 0.5.1.  Can you try the spkg at #6586 to see if that helps?  (Use the one listed in [the most recent comment](https://github.com/sagemath/sage/issues/6586#comment:33).)

> I'm not sure how useful the output='rst' or the view=False options are though. 

Me neither, but this was in response to [a discussion on sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/fb5f4b2affb89edc/a5d0cdd440aa83fb?tvc=2&q=6820#), in which the ability to see raw rst or raw html was viewed as potentially useful.



---

archive/issue_comments_049821.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nWhat if we moved the Sphinx-ify code to another or its own module?  This might make it easier to develop and use in multiple contexts.\n\nI'm willing to do this, though not immediately.",
    "created_at": "2009-09-05T23:42:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6820#issuecomment-49821",
    "user": "https://github.com/qed777"
}
```

<div id="comment:6" align="right">Comment 6</div>

What if we moved the Sphinx-ify code to another or its own module?  This might make it easier to develop and use in multiple contexts.

I'm willing to do this, though not immediately.



---

archive/issue_comments_049822.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nReplying to [@qed777](#comment%3A6):\n> What if we moved the Sphinx-ify code to another or its own module?  This might make it easier to develop and use in multiple contexts.\n\nThat sounds good.  This ticket can be accepted as is (if people are happy with it), then the code can be reorganized later.",
    "created_at": "2009-09-06T02:12:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6820#issuecomment-49822",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:7" align="right">Comment 7</div>

Replying to [@qed777](#comment%3A6):
> What if we moved the Sphinx-ify code to another or its own module?  This might make it easier to develop and use in multiple contexts.

That sounds good.  This ticket can be accepted as is (if people are happy with it), then the code can be reorganized later.



---

archive/issue_comments_049823.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nI tried this again after installing the new sphinx from #6586, and the problem I reported earlier has gone away.\n\nSo I'm giving this s positive review (noting that it should depend on #6586).\n\nJust one thought -- new users might not think of typing \"browse_sage_doc\", so it might be helpful to include top-level commands tutorial(), manual() [for the reference manual], at least.  Currently help() starts up the python help system which is not so useful in sage, and I would even suggest considering over-writing that with s basic sage help (which would probably just output a brief suggestion to try manual() or tutorial()).",
    "created_at": "2009-09-06T19:25:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6820#issuecomment-49823",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:8" align="right">Comment 8</div>

I tried this again after installing the new sphinx from #6586, and the problem I reported earlier has gone away.

So I'm giving this s positive review (noting that it should depend on #6586).

Just one thought -- new users might not think of typing "browse_sage_doc", so it might be helpful to include top-level commands tutorial(), manual() [for the reference manual], at least.  Currently help() starts up the python help system which is not so useful in sage, and I would even suggest considering over-writing that with s basic sage help (which would probably just output a brief suggestion to try manual() or tutorial()).



---

archive/issue_comments_049824.json:
```json
{
    "body": "depends on #6586",
    "created_at": "2009-09-06T19:36:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6820#issuecomment-49824",
    "user": "https://github.com/jhpalmieri"
}
```

depends on #6586



---

archive/issue_comments_049825.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nAttachment: **[trac_6820-browsedocs.patch.gz](https://github.com/sagemath/sage/files/ticket6820/trac_6820-browsedocs.patch.gz)**\n\n(I re-attached the same patch so I could add the comment about it depending on #6586.)",
    "created_at": "2009-09-06T19:36:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6820#issuecomment-49825",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:9" align="right">Comment 9</div>

Attachment: **[trac_6820-browsedocs.patch.gz](https://github.com/sagemath/sage/files/ticket6820/trac_6820-browsedocs.patch.gz)**

(I re-attached the same patch so I could add the comment about it depending on #6586.)



---

archive/issue_comments_049826.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nReplying to [@jhpalmieri](#comment%3A7):\n> Replying to [@qed777](#comment%3A6):\n> > What if we moved the Sphinx-ify code to another or its own module?  This might make it easier to develop and use in multiple contexts.\n\n> That sounds good.  This ticket can be accepted as is (if people are happy with it), then the code can be reorganized later.\n\nSee #7000.  I may wait until notebook separation is almost complete.  Currently, Sphinx is a prerequisite for [sagenb-0.1.8.tar.gz](http://sage.math.washington.edu/home/wstein/patches/sagenb/sagenb-0.1.8.tar.gz).",
    "created_at": "2009-09-25T12:46:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6820#issuecomment-49826",
    "user": "https://github.com/qed777"
}
```

<div id="comment:10" align="right">Comment 10</div>

Replying to [@jhpalmieri](#comment%3A7):
> Replying to [@qed777](#comment%3A6):
> > What if we moved the Sphinx-ify code to another or its own module?  This might make it easier to develop and use in multiple contexts.

> That sounds good.  This ticket can be accepted as is (if people are happy with it), then the code can be reorganized later.

See #7000.  I may wait until notebook separation is almost complete.  Currently, Sphinx is a prerequisite for [sagenb-0.1.8.tar.gz](http://sage.math.washington.edu/home/wstein/patches/sagenb/sagenb-0.1.8.tar.gz).



---

archive/issue_events_074836.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2009-10-26T23:25:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6820#event-74836"
}
```



---

archive/issue_events_074837.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2009-10-26T23:25:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6820#event-74837"
}
```



---

archive/issue_comments_049827.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nHere's a new patch.  This uses \"sphinxify\" from sagenb, which is good.\n\nFollowing cremona's suggestion above, it also adds top level commands: tutorial, manual, developer, constructions, each of which opens up the named document in a web browser.  Furthermore, it redefines \"help\" so that it prints a short help message:\n\n```\nWelcome to Sage 4.2!  To view the Sage tutorial in your web browser,\ntype 'tutorial()', and to view the (very detailed) Sage reference manual,\ntype 'manual()'.  For help on any function, for example 'matrix_plot', type\n'matrix_plot?' to see display a help message, type 'browse_sage_doc(matrix_plot)'\nto view the same message in a web browser, and type 'matrix_plot??' to look\nat the function's source code.\n\nTo use Python's online help utility, type 'python_help()'.\n```\nAs you can see from this message, the old function \"help\" is now called \"python_help\".",
    "created_at": "2009-10-26T23:25:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6820#issuecomment-49827",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:11" align="right">Comment 11</div>

Here's a new patch.  This uses "sphinxify" from sagenb, which is good.

Following cremona's suggestion above, it also adds top level commands: tutorial, manual, developer, constructions, each of which opens up the named document in a web browser.  Furthermore, it redefines "help" so that it prints a short help message:

```
Welcome to Sage 4.2!  To view the Sage tutorial in your web browser,
type 'tutorial()', and to view the (very detailed) Sage reference manual,
type 'manual()'.  For help on any function, for example 'matrix_plot', type
'matrix_plot?' to see display a help message, type 'browse_sage_doc(matrix_plot)'
to view the same message in a web browser, and type 'matrix_plot??' to look
at the function's source code.

To use Python's online help utility, type 'python_help()'.
```
As you can see from this message, the old function "help" is now called "python_help".



---

archive/issue_events_074838.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2009-10-26T23:25:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6820#event-74838"
}
```



---

archive/issue_events_074839.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2009-10-26T23:25:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6820#event-74839"
}
```



---

archive/issue_comments_049828.json:
```json
{
    "body": "Attachment: **[trac_6820-browsedocs-v2.patch.gz](https://github.com/sagemath/sage/files/ticket6820/trac_6820-browsedocs-v2.patch.gz)**\n\napply only this patch",
    "created_at": "2009-10-27T01:24:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6820#issuecomment-49828",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment: **[trac_6820-browsedocs-v2.patch.gz](https://github.com/sagemath/sage/files/ticket6820/trac_6820-browsedocs-v2.patch.gz)**

apply only this patch



---

archive/issue_comments_049829.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -21,5 +21,30 @@\n ```\n browse_sage_doc(identity_matrix, view=False)\n ```\n-to output (as a string) the html version of the docstring\n+to output (as a string) the html version of the docstring.\n \n+New: following cremona's suggestion, this also adds the following top-level commands:\n+\n+```\n+tutorial()\n+reference()\n+manual()  # synonym for \"reference\"\n+developer()\n+constructions()\n+```\n+These open the corresponding document.  The new command `python_help` does what the old command `help` did.  The new command help does the following: with an argument, it acts like the old help -- that is, it calls `python_help(arg)`.  With no argument, it prints this message:\n+\n+```\n+Welcome to Sage %s!  To view the Sage tutorial in your web browser,\n+type 'tutorial()', and to view the (very detailed) Sage reference\n+manual, type 'manual()'.  For help on any Sage function, for example\n+'matrix_plot', type 'matrix_plot?' to see a help message, type\n+'help(matrix_plot)' to see a very similar message, type\n+'browse_sage_doc(matrix_plot)' to view a message in a web browser, and\n+type 'matrix_plot??' to look at the function's source code.\n+\n+To enter Python's interactive online help utility, type 'python_help()'.\n+To get help on a Python function, module or package, type 'help(MODULE)' or\n+'python_help(MODULE)'.\n+```\n+(with the \"%s\" in the first line replaced by the version number).\n``````\n",
    "created_at": "2009-10-27T02:38:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6820#issuecomment-49829",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -21,5 +21,30 @@
 ```
 browse_sage_doc(identity_matrix, view=False)
 ```
-to output (as a string) the html version of the docstring
+to output (as a string) the html version of the docstring.
 
+New: following cremona's suggestion, this also adds the following top-level commands:
+
+```
+tutorial()
+reference()
+manual()  # synonym for "reference"
+developer()
+constructions()
+```
+These open the corresponding document.  The new command `python_help` does what the old command `help` did.  The new command help does the following: with an argument, it acts like the old help -- that is, it calls `python_help(arg)`.  With no argument, it prints this message:
+
+```
+Welcome to Sage %s!  To view the Sage tutorial in your web browser,
+type 'tutorial()', and to view the (very detailed) Sage reference
+manual, type 'manual()'.  For help on any Sage function, for example
+'matrix_plot', type 'matrix_plot?' to see a help message, type
+'help(matrix_plot)' to see a very similar message, type
+'browse_sage_doc(matrix_plot)' to view a message in a web browser, and
+type 'matrix_plot??' to look at the function's source code.
+
+To enter Python's interactive online help utility, type 'python_help()'.
+To get help on a Python function, module or package, type 'help(MODULE)' or
+'python_help(MODULE)'.
+```
+(with the "%s" in the first line replaced by the version number).
``````




---

archive/issue_comments_049830.json:
```json
{
    "body": "Attachment: **[trac_6820-browsedocs-v3.patch.gz](https://github.com/sagemath/sage/files/ticket6820/trac_6820-browsedocs-v3.patch.gz)**\n\nUse Sphinx stylesheets and jsMath for docstrings.  Apply only this patch.",
    "created_at": "2009-10-27T09:38:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6820#issuecomment-49830",
    "user": "https://github.com/qed777"
}
```

Attachment: **[trac_6820-browsedocs-v3.patch.gz](https://github.com/sagemath/sage/files/ticket6820/trac_6820-browsedocs-v3.patch.gz)**

Use Sphinx stylesheets and jsMath for docstrings.  Apply only this patch.



---

archive/issue_comments_049831.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nVersion 3:\n\n* Uses Sphinx's stylesheet and jsMath to format individual docstrings nicely.  Try `browse_sage_doc(identity_matrix)`.\n* *May* require upgrading [jsMath to version 3.6c](http://www.math.union.edu/~dpvc/jsMath/changes.html), because of Firefox's 3.5's same-origin policy for local files.\n* Guesses the `obj`'s name.  See [this](http://www.daniweb.com/forums/thread229813.html), [this](http://pythonic.pocoo.org/2009/5/30/finding-objects-names), and/or [this](http://bytes.com/topic/python/answers/19521-gathering-variable-names-within-function).\n\nProblems:\n\n* Math does **not** render properly because backslashes are stripped, somewhere.\n* It may be better to use a HTML template instead of an inline triple-quoted string.",
    "created_at": "2009-10-27T09:54:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6820#issuecomment-49831",
    "user": "https://github.com/qed777"
}
```

<div id="comment:15" align="right">Comment 15</div>

Version 3:

* Uses Sphinx's stylesheet and jsMath to format individual docstrings nicely.  Try `browse_sage_doc(identity_matrix)`.
* *May* require upgrading [jsMath to version 3.6c](http://www.math.union.edu/~dpvc/jsMath/changes.html), because of Firefox's 3.5's same-origin policy for local files.
* Guesses the `obj`'s name.  See [this](http://www.daniweb.com/forums/thread229813.html), [this](http://pythonic.pocoo.org/2009/5/30/finding-objects-names), and/or [this](http://bytes.com/topic/python/answers/19521-gathering-variable-names-within-function).

Problems:

* Math does **not** render properly because backslashes are stripped, somewhere.
* It may be better to use a HTML template instead of an inline triple-quoted string.



---

archive/issue_comments_049832.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nOkay, this patch doesn't accidentally strip the backslashes anymore.  This depends on #6673, and indeed, it doesn't seem to work on Firefox.",
    "created_at": "2009-10-27T22:46:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6820#issuecomment-49832",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:16" align="right">Comment 16</div>

Okay, this patch doesn't accidentally strip the backslashes anymore.  This depends on #6673, and indeed, it doesn't seem to work on Firefox.



---

archive/issue_comments_049833.json:
```json
{
    "body": "Attachment: **[trac_6820-browsedocs-v4.patch.gz](https://github.com/sagemath/sage/files/ticket6820/trac_6820-browsedocs-v4.patch.gz)**\n\ndepends on #6673.  apply only this patch.",
    "created_at": "2009-10-27T22:46:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6820#issuecomment-49833",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment: **[trac_6820-browsedocs-v4.patch.gz](https://github.com/sagemath/sage/files/ticket6820/trac_6820-browsedocs-v4.patch.gz)**

depends on #6673.  apply only this patch.



---

archive/issue_comments_049834.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nThanks very much for restoring the backslashes --- I didn't think of `EMBEDDED_MODE`.  I'll try to take a closer look at the jsMath problem.  If necessaary, there's #7322.",
    "created_at": "2009-10-28T19:54:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6820#issuecomment-49834",
    "user": "https://github.com/qed777"
}
```

<div id="comment:17" align="right">Comment 17</div>

Thanks very much for restoring the backslashes --- I didn't think of `EMBEDDED_MODE`.  I'll try to take a closer look at the jsMath problem.  If necessaary, there's #7322.



---

archive/issue_comments_049835.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nThe patch at #7322 upgrades SageNB to jsMath 3.6c.  Please be sure to run\n\n```sh\nsage -docbuild website html -j -S -aE\n```\nbefore checking that Firefox 3.5.x now typesets `browse_sage_doc(Zmod)`.",
    "created_at": "2009-10-29T07:38:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6820#issuecomment-49835",
    "user": "https://github.com/qed777"
}
```

<div id="comment:18" align="right">Comment 18</div>

The patch at #7322 upgrades SageNB to jsMath 3.6c.  Please be sure to run

```sh
sage -docbuild website html -j -S -aE
```
before checking that Firefox 3.5.x now typesets `browse_sage_doc(Zmod)`.



---

archive/issue_comments_049836.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nShould we add a `browse_sage_src()` for parity with the SageNB's `??`.",
    "created_at": "2009-10-29T07:42:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6820#issuecomment-49836",
    "user": "https://github.com/qed777"
}
```

<div id="comment:19" align="right">Comment 19</div>

Should we add a `browse_sage_src()` for parity with the SageNB's `??`.



---

archive/issue_comments_049837.json:
```json
{
    "body": "Changed reviewer from **mpatel, cremona** to **mpatel, cremona, jhpalmieri**",
    "created_at": "2009-10-29T20:13:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6820#issuecomment-49837",
    "user": "https://github.com/jhpalmieri"
}
```

Changed reviewer from **mpatel, cremona** to **mpatel, cremona, jhpalmieri**



---

archive/issue_comments_049838.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\n> The patch at #7322 upgrades SageNB to jsMath 3.6c. Please be sure to run\n> \n> sage -docbuild website html -j -S -aE\n\n>\n> before checking that Firefox 3.5.x now typesets browse_sage_doc(Zmod).\n\nIt works!  (At least on my Mac running OS X 10.5.)\n\n> Should we add a `browse_sage_src()` for parity with the SageNB's `??`.\n\nNot on this ticket.\n\nI'm happy with this.  I'm giving mpatel's contributions a positive review, so if someone can give my contributions a positive review, the patch can be merged.",
    "created_at": "2009-10-29T20:13:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6820#issuecomment-49838",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:20" align="right">Comment 20</div>

> The patch at #7322 upgrades SageNB to jsMath 3.6c. Please be sure to run
> 
> sage -docbuild website html -j -S -aE

>
> before checking that Firefox 3.5.x now typesets browse_sage_doc(Zmod).

It works!  (At least on my Mac running OS X 10.5.)

> Should we add a `browse_sage_src()` for parity with the SageNB's `??`.

Not on this ticket.

I'm happy with this.  I'm giving mpatel's contributions a positive review, so if someone can give my contributions a positive review, the patch can be merged.



---

archive/issue_comments_049839.json:
```json
{
    "body": "Changed author from **John Palmieri** to **John Palmieri, Mitesh Patel**",
    "created_at": "2009-10-29T20:13:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6820#issuecomment-49839",
    "user": "https://github.com/jhpalmieri"
}
```

Changed author from **John Palmieri** to **John Palmieri, Mitesh Patel**



---

archive/issue_events_074840.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2009-10-29T21:04:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6820#event-74840"
}
```



---

archive/issue_events_074841.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2009-10-29T21:04:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6820#event-74841"
}
```



---

archive/issue_events_074842.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2009-12-28T12:39:39Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "title_is": "Easy command-line access to HTML documentation and docstrings",
    "title_was": "browse sage docs",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6820#event-74842"
}
```



---

archive/issue_comments_049840.json:
```json
{
    "body": "Merged: **sage-4.3.1.alpha0**",
    "created_at": "2010-01-03T22:03:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6820#issuecomment-49840",
    "user": "https://github.com/mwhansen"
}
```

Merged: **sage-4.3.1.alpha0**



---

archive/issue_events_074843.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2010-01-03T22:03:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6820#event-74843"
}
```



---

archive/issue_events_074844.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2010-01-03T22:03:51Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6820#event-74844"
}
```



---

archive/issue_comments_049841.json:
```json
{
    "body": "Changed reviewer from **mpatel, cremona, jhpalmieri** to **Mitesh Patel, John Cremona, John Palmieri**",
    "created_at": "2010-01-03T22:03:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6820#issuecomment-49841",
    "user": "https://github.com/mwhansen"
}
```

Changed reviewer from **mpatel, cremona, jhpalmieri** to **Mitesh Patel, John Cremona, John Palmieri**
