# Issue 6447: Add a <canvas> renderer for 3D plotting

archive/issues_006447.json:
```json
{
    "assignees": [
        "https://github.com/williamstein"
    ],
    "body": "This feature would add another backend to 3D plotting, in addition to Jmol and Tachyon, that would render the plot using the new HTML5 <canvas> element, which supports drawing arbitrary shapes to a section of a web page.\n\nThe idea was initially suggested in [this thread](http://groups.google.com/group/sage-devel/browse_thread/thread/9e0ca32eb97d5757/d47d88b28d292512) on sage-devel.\n\nAlthough JavaScript is significantly slower than Java, a canvas backend is feasible and might provide a nice, compatible, alternative.\n\nCC:  @saliola @wdjoyner\n\nComponent: **graphics**\n\nAuthor: **Bill Cauchois**\n\nReviewer: **David Joyner, William Stein**\n\nMerged: **Sage 4.1.2.alpha0**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/6447_\n\n",
    "closed_at": "2009-08-30T07:26:00Z",
    "created_at": "2009-06-29T18:43:12Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graphics",
        "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.1.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Add a <canvas> renderer for 3D plotting",
    "type": "issue",
    "updated_at": "2009-08-30T07:26:00Z",
    "url": "https://github.com/sagemath/sage/issues/6447",
    "user": "https://github.com/sagetrac-wcauchois"
}
```
This feature would add another backend to 3D plotting, in addition to Jmol and Tachyon, that would render the plot using the new HTML5 <canvas> element, which supports drawing arbitrary shapes to a section of a web page.

The idea was initially suggested in [this thread](http://groups.google.com/group/sage-devel/browse_thread/thread/9e0ca32eb97d5757/d47d88b28d292512) on sage-devel.

Although JavaScript is significantly slower than Java, a canvas backend is feasible and might provide a nice, compatible, alternative.

CC:  @saliola @wdjoyner

Component: **graphics**

Author: **Bill Cauchois**

Reviewer: **David Joyner, William Stein**

Merged: **Sage 4.1.2.alpha0**

_Issue created by migration from https://trac.sagemath.org/ticket/6447_





---

archive/issue_events_077129.json:
```json
{
    "actor": "https://github.com/sagetrac-wcauchois",
    "created_at": "2009-06-29T18:43:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graphics",
    "label_color": "0000ff",
    "label_name": "c: graphics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6447#event-77129"
}
```



---

archive/issue_events_077130.json:
```json
{
    "actor": "https://github.com/sagetrac-wcauchois",
    "created_at": "2009-06-29T18:43:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6447#event-77130"
}
```



---

archive/issue_events_077131.json:
```json
{
    "actor": "https://github.com/sagetrac-wcauchois",
    "created_at": "2009-06-29T18:43:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6447#event-77131"
}
```



---

archive/issue_events_077132.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-06-29T18:43:12Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "subject": "https://github.com/sagetrac-wcauchois",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6447#event-77132"
}
```



---

archive/issue_comments_043491.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThe attached patch implements the feature as described, although it currently only renders in wireframe.\n\nTry it out for yourself:\n\n```\nx, y = var('x y')\nplot3d(sin(pi*(x^2+y^2))/2,(x,-1,1),(y,-1,1), viewer='canvas3d', plot_points=(20, 20))\n```\n\nA couple of issues need to be addressed:\n\n* Doctests. As well as documentation to make this feature visible to an end-user.\n* Solid polygons. Here we run into problems like depth-testing and shading. I'm sure there are JavaScript libraries available for 3D rendering using canvas. Could we plug one of these in?\n* I am somewhat unsatisfied with the mechanism for rotating the model. Currently, the X and Y position of the mouse are used to rotate the model about the Y and X axes. But this can result in unexpected rotations, due to the inadequacy of Euler angles (wherein one rotation configuration can be represented in multiple ways). I'm aware of a better method for user interaction with a 3D viewer called [Arcball](http://rainwarrior.thenoos.net/dragon/arcball.html), but that looks too complicated to do in JavaScript.",
    "created_at": "2009-06-29T18:55:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6447#issuecomment-43491",
    "user": "https://github.com/sagetrac-wcauchois"
}
```

<div id="comment:1" align="right">comment:1</div>

The attached patch implements the feature as described, although it currently only renders in wireframe.

Try it out for yourself:

```
x, y = var('x y')
plot3d(sin(pi*(x^2+y^2))/2,(x,-1,1),(y,-1,1), viewer='canvas3d', plot_points=(20, 20))
```

A couple of issues need to be addressed:

* Doctests. As well as documentation to make this feature visible to an end-user.
* Solid polygons. Here we run into problems like depth-testing and shading. I'm sure there are JavaScript libraries available for 3D rendering using canvas. Could we plug one of these in?
* I am somewhat unsatisfied with the mechanism for rotating the model. Currently, the X and Y position of the mouse are used to rotate the model about the Y and X axes. But this can result in unexpected rotations, due to the inadequacy of Euler angles (wherein one rotation configuration can be represented in multiple ways). I'm aware of a better method for user interaction with a 3D viewer called [Arcball](http://rainwarrior.thenoos.net/dragon/arcball.html), but that looks too complicated to do in JavaScript.



---

archive/issue_events_077133.json:
```json
{
    "actor": "https://github.com/sagetrac-wcauchois",
    "created_at": "2009-06-29T18:55:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6447#event-77133"
}
```



---

archive/issue_comments_043492.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThis is cool!\n\nNote that it works with parametric_plot3d as well.\n\nThe rotations do seem kind of jerky, as you pointed out, at least on a macbook running 10.4.11 and inside camino. Still, thanks for working on this - I think this will be *very* useful at some point.",
    "created_at": "2009-06-29T20:50:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6447#issuecomment-43492",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:2" align="right">comment:2</div>

This is cool!

Note that it works with parametric_plot3d as well.

The rotations do seem kind of jerky, as you pointed out, at least on a macbook running 10.4.11 and inside camino. Still, thanks for working on this - I think this will be *very* useful at some point.



---

archive/issue_comments_043493.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI second wdj's \"this is cool\"!\n\nI don't know about JS libraries for solid polygons, but I used LiveGraphics3D (which made Java applets out of Mathematica code) for a long time, and it used a pretty naive algorithm for determining which polygon was in front, and some things just looked bad. I suspect that getting a good algorithm for doing that sort of thing well is difficult...but would be awesome to have!",
    "created_at": "2009-06-29T23:50:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6447#issuecomment-43493",
    "user": "https://github.com/dandrake"
}
```

<div id="comment:3" align="right">comment:3</div>

I second wdj's "this is cool"!

I don't know about JS libraries for solid polygons, but I used LiveGraphics3D (which made Java applets out of Mathematica code) for a long time, and it used a pretty naive algorithm for determining which polygon was in front, and some things just looked bad. I suspect that getting a good algorithm for doing that sort of thing well is difficult...but would be awesome to have!



---

archive/issue_comments_043494.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nVery cool!",
    "created_at": "2009-06-30T02:25:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6447#issuecomment-43494",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:4" align="right">comment:4</div>

Very cool!



---

archive/issue_comments_043495.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nVery nice!  Worked very smoothly for me.",
    "created_at": "2009-06-30T06:37:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6447#issuecomment-43495",
    "user": "https://github.com/rbeezer"
}
```

<div id="comment:5" align="right">comment:5</div>

Very nice!  Worked very smoothly for me.



---

archive/issue_comments_043496.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nComments:\n\n(1) I don't think you should worry too much about wireframe versus solid polygons yet.   This is javascript/canvas, after all.  I think it would be much better to focus on rendering a wider range of objects, e.g., make it so \n\n```\nicosahedron(color='red', viewer='canvas3d') + sphere(viewer='canvas3d')\n```\nworks. \n\n(2) I notice that you're \"I'm sure there are JavaScript? libraries available for 3D rendering using canvas. Could we plug one of these in?\"  I tried googling for some of those words, and the first thing that pops up is:\n   http://www.nihilogic.dk/labs/canvas3dtexture_0.2/\nIf you turn off the texture in that link and render some of the models (select from the list on the right), you'll see that indeed you are right, there are now 3d canvas javascript libraries. \n\nWilliam",
    "created_at": "2009-06-30T13:32:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6447#issuecomment-43496",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:6" align="right">comment:6</div>

Comments:

(1) I don't think you should worry too much about wireframe versus solid polygons yet.   This is javascript/canvas, after all.  I think it would be much better to focus on rendering a wider range of objects, e.g., make it so 

```
icosahedron(color='red', viewer='canvas3d') + sphere(viewer='canvas3d')
```
works. 

(2) I notice that you're "I'm sure there are JavaScript? libraries available for 3D rendering using canvas. Could we plug one of these in?"  I tried googling for some of those words, and the first thing that pops up is:
   http://www.nihilogic.dk/labs/canvas3dtexture_0.2/
If you turn off the texture in that link and render some of the models (select from the list on the right), you'll see that indeed you are right, there are now 3d canvas javascript libraries. 

William



---

archive/issue_events_077134.json:
```json
{
    "actor": "https://github.com/sagetrac-wcauchois",
    "created_at": "2009-07-15T02:29:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6447#event-77134"
}
```



---

archive/issue_events_077135.json:
```json
{
    "actor": "https://github.com/sagetrac-wcauchois",
    "created_at": "2009-07-15T02:29:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6447#event-77135"
}
```



---

archive/issue_comments_043497.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI added much smoother trackball rotation, and fixed several bugs. Now could anyone take a look at this?",
    "created_at": "2009-07-15T02:29:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6447#issuecomment-43497",
    "user": "https://github.com/sagetrac-wcauchois"
}
```

<div id="comment:8" align="right">comment:8</div>

I added much smoother trackball rotation, and fixed several bugs. Now could anyone take a look at this?



---

archive/issue_comments_043498.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThe patch applies cleanly to sage-4.1 and is working very well (FF3, Ubuntu 8.10, amd64). So from me it gets a positive review.\n\nCan people with different systems/browsers give this a try?",
    "created_at": "2009-07-15T07:45:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6447#issuecomment-43498",
    "user": "https://github.com/saliola"
}
```

<div id="comment:9" align="right">comment:9</div>

The patch applies cleanly to sage-4.1 and is working very well (FF3, Ubuntu 8.10, amd64). So from me it gets a positive review.

Can people with different systems/browsers give this a try?



---

archive/issue_comments_043499.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nYes, the patch applied fine but then I got this (amd64, ubuntu 9.04):\n\n```\nwdj@hera:~/sagefiles/sage-4.1.rc0$ ./sage -t  \"devel/sage/sage/plot/plot3d/implicit_plot3d.py\"\nsage -t  \"devel/sage/sage/plot/plot3d/implicit_plot3d.py\"\n*** *** Error: TIMED OUT! PROCESS KILLED! *** ***\n*** *** Error: TIMED OUT! *** ***\n*** *** Error: TIMED OUT! *** ***\n         [360.1 s]\nexit code: 1024\n\n----------------------------------------------------------------------\nThe following tests failed:\n\n\n        sage -t  \"devel/sage/sage/plot/plot3d/implicit_plot3d.py\"\n```\nIt seems related but I'm not sure.",
    "created_at": "2009-07-15T19:15:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6447#issuecomment-43499",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:10" align="right">comment:10</div>

Yes, the patch applied fine but then I got this (amd64, ubuntu 9.04):

```
wdj@hera:~/sagefiles/sage-4.1.rc0$ ./sage -t  "devel/sage/sage/plot/plot3d/implicit_plot3d.py"
sage -t  "devel/sage/sage/plot/plot3d/implicit_plot3d.py"
*** *** Error: TIMED OUT! PROCESS KILLED! *** ***
*** *** Error: TIMED OUT! *** ***
*** *** Error: TIMED OUT! *** ***
         [360.1 s]
exit code: 1024

----------------------------------------------------------------------
The following tests failed:


        sage -t  "devel/sage/sage/plot/plot3d/implicit_plot3d.py"
```
It seems related but I'm not sure.



---

archive/issue_comments_043500.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nSame thing on an intel macbook running 10.4.11. I'm inclined to label this \"needs work\" but am not sure what the problem is.",
    "created_at": "2009-07-15T19:54:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6447#issuecomment-43500",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:11" align="right">comment:11</div>

Same thing on an intel macbook running 10.4.11. I'm inclined to label this "needs work" but am not sure what the problem is.



---

archive/issue_comments_043501.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@wdjoyner](#comment:10):\n\nIt can't seem to finish the test on line 45 of implicit_plot3d.py. Its an issue that only shows up during doctesting mode. I've been looking into this, and I think I can have a patch to fix it by later tonight. Thanks for catching this!",
    "created_at": "2009-07-15T21:23:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6447#issuecomment-43501",
    "user": "https://github.com/sagetrac-wcauchois"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@wdjoyner](#comment:10):

It can't seem to finish the test on line 45 of implicit_plot3d.py. Its an issue that only shows up during doctesting mode. I've been looking into this, and I think I can have a patch to fix it by later tonight. Thanks for catching this!



---

archive/issue_events_077136.json:
```json
{
    "actor": "https://github.com/sagetrac-wcauchois",
    "created_at": "2009-07-15T21:23:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6447#event-77136"
}
```



---

archive/issue_events_077137.json:
```json
{
    "actor": "https://github.com/sagetrac-wcauchois",
    "created_at": "2009-07-15T21:23:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6447#event-77137"
}
```



---

archive/issue_comments_043502.json:
```json
{
    "body": "based on sage 4.1",
    "created_at": "2009-07-16T02:26:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6447#issuecomment-43502",
    "user": "https://github.com/sagetrac-wcauchois"
}
```

based on sage 4.1



---

archive/issue_comments_043503.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nAttachment: **[trac_6447-canvas3d.patch.gz](https://github.com/sagemath/sage/files/ticket6447/trac_6447-canvas3d.patch.gz)**",
    "created_at": "2009-07-16T02:26:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6447#issuecomment-43503",
    "user": "https://github.com/sagetrac-wcauchois"
}
```

<div id="comment:13" align="right">comment:13</div>

Attachment: **[trac_6447-canvas3d.patch.gz](https://github.com/sagemath/sage/files/ticket6447/trac_6447-canvas3d.patch.gz)**



---

archive/issue_events_077138.json:
```json
{
    "actor": "https://github.com/sagetrac-wcauchois",
    "created_at": "2009-07-16T02:26:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6447#event-77138"
}
```



---

archive/issue_events_077139.json:
```json
{
    "actor": "https://github.com/sagetrac-wcauchois",
    "created_at": "2009-07-16T02:26:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6447#event-77139"
}
```



---

archive/issue_comments_043504.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nWith the new patch, the doctests pass for me on a x86_64 machine running 2.6.23-gentoo-r6.",
    "created_at": "2009-07-16T11:17:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6447#issuecomment-43504",
    "user": "https://github.com/saliola"
}
```

<div id="comment:14" align="right">comment:14</div>

With the new patch, the doctests pass for me on a x86_64 machine running 2.6.23-gentoo-r6.



---

archive/issue_comments_043505.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nSame here, on an amd64 ubuntu 9.04 machine. Applies fine and passes sage -testall.\n\nI would give this a positive review but I am unsure of the requirements for examples in the docstrings for plotting functions. If this did not return a plot but a number (say) then it would be necessary to have an example illustrating the new method. (There are example docstrings but none that return a plot.) Does anyone know what the standard is here?",
    "created_at": "2009-07-16T14:11:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6447#issuecomment-43505",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:15" align="right">comment:15</div>

Same here, on an amd64 ubuntu 9.04 machine. Applies fine and passes sage -testall.

I would give this a positive review but I am unsure of the requirements for examples in the docstrings for plotting functions. If this did not return a plot but a number (say) then it would be necessary to have an example illustrating the new method. (There are example docstrings but none that return a plot.) Does anyone know what the standard is here?



---

archive/issue_comments_043506.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@wdjoyner](#comment:15):\n> Same here, on an amd64 ubuntu 9.04 machine. Applies fine and passes sage -testall.\n> \n> I would give this a positive review but I am unsure of the requirements for examples in the docstrings for plotting functions. If this did not return a plot but a number (say) then it would be necessary to have an example illustrating the new method. (There are example docstrings but none that return a plot.) Does anyone know what the standard is here?\n\nI can add an example to the documentation for show(), but other than that I can't think of any place where more documentation would be appropriate.",
    "created_at": "2009-07-16T17:42:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6447#issuecomment-43506",
    "user": "https://github.com/sagetrac-wcauchois"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@wdjoyner](#comment:15):
> Same here, on an amd64 ubuntu 9.04 machine. Applies fine and passes sage -testall.
> 
> I would give this a positive review but I am unsure of the requirements for examples in the docstrings for plotting functions. If this did not return a plot but a number (say) then it would be necessary to have an example illustrating the new method. (There are example docstrings but none that return a plot.) Does anyone know what the standard is here?

I can add an example to the documentation for show(), but other than that I can't think of any place where more documentation would be appropriate.



---

archive/issue_comments_043507.json:
```json
{
    "body": "Attachment: **[trac_6447-newexample.patch.gz](https://github.com/sagemath/sage/files/ticket6447/trac_6447-newexample.patch.gz)**\n\nAttachment: **[trac_6447~all.patch.gz](https://github.com/sagemath/sage/files/ticket6447/571ebb29219839cfd6deeb19e8c03847.gz)**\n\napply only this patch to sage 4.1",
    "created_at": "2009-07-16T18:05:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6447#issuecomment-43507",
    "user": "https://github.com/sagetrac-wcauchois"
}
```

Attachment: **[trac_6447-newexample.patch.gz](https://github.com/sagemath/sage/files/ticket6447/trac_6447-newexample.patch.gz)**

Attachment: **[trac_6447~all.patch.gz](https://github.com/sagemath/sage/files/ticket6447/571ebb29219839cfd6deeb19e8c03847.gz)**

apply only this patch to sage 4.1



---

archive/issue_comments_043508.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nOk, just did it.\n\nI also had to reorder the elements of the set in a doctest for texture_set(). I have found that unrelated changes to the codebase can cause the elements to assume a different order than what is expected. Obviously order doesn't matter with sets, but the doctesting system counts it as a failure. I think a more permanent solution could be achieved by defining a better `__hash__` for Texture_class, since from my experiments that is how the internal element order is determined. For now, though, I've been modifying the offending doctest by hand.",
    "created_at": "2009-07-16T18:22:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6447#issuecomment-43508",
    "user": "https://github.com/sagetrac-wcauchois"
}
```

<div id="comment:17" align="right">comment:17</div>

Ok, just did it.

I also had to reorder the elements of the set in a doctest for texture_set(). I have found that unrelated changes to the codebase can cause the elements to assume a different order than what is expected. Obviously order doesn't matter with sets, but the doctesting system counts it as a failure. I think a more permanent solution could be achieved by defining a better `__hash__` for Texture_class, since from my experiments that is how the internal element order is determined. For now, though, I've been modifying the offending doctest by hand.



---

archive/issue_comments_043509.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI wonder how #6307 will affect this ticket. I think moving the canvas3d lib into a separate JS file would be great. Does that mean we should rebase this patch on sage-4.1.1-alpha0?",
    "created_at": "2009-07-16T21:16:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6447#issuecomment-43509",
    "user": "https://github.com/sagetrac-wcauchois"
}
```

<div id="comment:18" align="right">comment:18</div>

I wonder how #6307 will affect this ticket. I think moving the canvas3d lib into a separate JS file would be great. Does that mean we should rebase this patch on sage-4.1.1-alpha0?



---

archive/issue_comments_043510.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nDamn. I think I screwed up on applying the doctest somehow because I got a boatload of failures. \nCan you rebase and then tell me where to access sage-4.1.1-alpha0?",
    "created_at": "2009-07-16T21:32:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6447#issuecomment-43510",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:19" align="right">comment:19</div>

Damn. I think I screwed up on applying the doctest somehow because I got a boatload of failures. 
Can you rebase and then tell me where to access sage-4.1.1-alpha0?



---

archive/issue_events_077140.json:
```json
{
    "actor": "https://github.com/sagetrac-wcauchois",
    "created_at": "2009-07-17T16:53:42Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "title_is": "[needs rebase] Add a <canvas> renderer for 3D plotting",
    "title_was": "Add a <canvas> renderer for 3D plotting",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6447#event-77140"
}
```



---

archive/issue_comments_043511.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nI don't know anything about sage-4.1.1.alpha0, except that #6307 was merged into it yesterday. I'm going to mark this [needs rebase] until I can find a development version of Sage with the changes from #6307 and move the canvas3d lib into a separate JS file. And then we can get this into Sage!",
    "created_at": "2009-07-17T16:53:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6447#issuecomment-43511",
    "user": "https://github.com/sagetrac-wcauchois"
}
```

<div id="comment:20" align="right">comment:20</div>

I don't know anything about sage-4.1.1.alpha0, except that #6307 was merged into it yesterday. I'm going to mark this [needs rebase] until I can find a development version of Sage with the changes from #6307 and move the canvas3d lib into a separate JS file. And then we can get this into Sage!



---

archive/issue_comments_043512.json:
```json
{
    "body": "based on sage 4.1.1.alpha1",
    "created_at": "2009-07-28T16:06:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6447#issuecomment-43512",
    "user": "https://github.com/sagetrac-wcauchois"
}
```

based on sage 4.1.1.alpha1



---

archive/issue_comments_043513.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nAttachment: **[trac_6447~rebase.patch.gz](https://github.com/sagemath/sage/files/ticket6447/4d38271e6cca570a1df0be4d55e14960.gz)**\n\nI attached a self-contained patch where I've moved the JavaScript code into a separate file, in keeping with the changes made in #6307. Its based on Sage 4.1.1.alpha1. Can someone re-review this?",
    "created_at": "2009-07-28T16:11:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6447#issuecomment-43513",
    "user": "https://github.com/sagetrac-wcauchois"
}
```

<div id="comment:21" align="right">comment:21</div>

Attachment: **[trac_6447~rebase.patch.gz](https://github.com/sagemath/sage/files/ticket6447/4d38271e6cca570a1df0be4d55e14960.gz)**

I attached a self-contained patch where I've moved the JavaScript code into a separate file, in keeping with the changes made in #6307. Its based on Sage 4.1.1.alpha1. Can someone re-review this?



---

archive/issue_events_077141.json:
```json
{
    "actor": "https://github.com/sagetrac-wcauchois",
    "created_at": "2009-07-28T16:11:36Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "title_is": "Add a <canvas> renderer for 3D plotting",
    "title_was": "[needs rebase] Add a <canvas> renderer for 3D plotting",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6447#event-77141"
}
```



---

archive/issue_comments_043514.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nThis applies fine to 4.1.1.a1 and pases sage -testall (amd64, ubuntu 9.04) except for the already reported failures at \n\n```\n\n        sage -t  \"devel/sage/sage/misc/abstract_method.py\"\n        sage -t  \"devel/sage/sage/misc/lazy_attribute.py\"\n```\n\nAgain, a positive test from me.",
    "created_at": "2009-07-28T22:31:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6447#issuecomment-43514",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:22" align="right">comment:22</div>

This applies fine to 4.1.1.a1 and pases sage -testall (amd64, ubuntu 9.04) except for the already reported failures at 

```

        sage -t  "devel/sage/sage/misc/abstract_method.py"
        sage -t  "devel/sage/sage/misc/lazy_attribute.py"
```

Again, a positive test from me.



---

archive/issue_comments_043515.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nQuick questions:\n* Should the default view angle for the new viewer match that for tachyon and jmol?\n* Is it possible to enable axes?",
    "created_at": "2009-08-07T01:41:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6447#issuecomment-43515",
    "user": "https://github.com/qed777"
}
```

<div id="comment:23" align="right">comment:23</div>

Quick questions:
* Should the default view angle for the new viewer match that for tachyon and jmol?
* Is it possible to enable axes?



---

archive/issue_comments_043516.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@qed777](#comment:23):\n> Quick questions:\n> * Should the default view angle for the new viewer match that for tachyon and jmol?\n\nThat's a good idea. I found a tuple called \"orientation\" in Graphics3d.export_jmol, so I think I can copy the values from that.\n\n> * Is it possible to enable axes?\n\nAxes are not currently implemented, although they can be. I think all that's necessary is to add support for arrow3d.",
    "created_at": "2009-08-12T00:10:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6447#issuecomment-43516",
    "user": "https://github.com/sagetrac-wcauchois"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@qed777](#comment:23):
> Quick questions:
> * Should the default view angle for the new viewer match that for tachyon and jmol?

That's a good idea. I found a tuple called "orientation" in Graphics3d.export_jmol, so I think I can copy the values from that.

> * Is it possible to enable axes?

Axes are not currently implemented, although they can be. I think all that's necessary is to add support for arrow3d.



---

archive/issue_comments_043517.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nI think that axes are, perhaps, more important, since they give a sense of scale of a plot's \"landscape.\"\n\nBut I'm happy to defer to D. Joyner on reviewing this ticket. \n\nAnother question, possibly very naive:  Would it be less taxing on the browser to use \"quads\" instead of triangles as mesh elements, at least in some circumstances?",
    "created_at": "2009-08-17T06:57:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6447#issuecomment-43517",
    "user": "https://github.com/qed777"
}
```

<div id="comment:25" align="right">comment:25</div>

I think that axes are, perhaps, more important, since they give a sense of scale of a plot's "landscape."

But I'm happy to defer to D. Joyner on reviewing this ticket. 

Another question, possibly very naive:  Would it be less taxing on the browser to use "quads" instead of triangles as mesh elements, at least in some circumstances?



---

archive/issue_comments_043518.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@qed777](#comment:25):\n> I think that axes are, perhaps, more important, since they give a sense of scale of a plot's \"landscape.\"\n> \n> But I'm happy to defer to D. Joyner on reviewing this ticket. \n> \n> Another question, possibly very naive:  Would it be less taxing on the browser to use \"quads\" instead of triangles as mesh elements, at least in some circumstances?  \n\n\nWhen I gave this my positive review, I'm not saying that this patch is in it's final form. I'm sure that there are lots of improvements possible. But as a patch implementing an important new idea, it is excellent I think. The problem with me changing \"neds\" to \"positive\" is that I do not know javascript. William Stein said he would look this code over. But if someone else wants to (eg, mpatel) then I'm sure William won't mind:-)",
    "created_at": "2009-08-17T10:11:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6447#issuecomment-43518",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@qed777](#comment:25):
> I think that axes are, perhaps, more important, since they give a sense of scale of a plot's "landscape."
> 
> But I'm happy to defer to D. Joyner on reviewing this ticket. 
> 
> Another question, possibly very naive:  Would it be less taxing on the browser to use "quads" instead of triangles as mesh elements, at least in some circumstances?  


When I gave this my positive review, I'm not saying that this patch is in it's final form. I'm sure that there are lots of improvements possible. But as a patch implementing an important new idea, it is excellent I think. The problem with me changing "neds" to "positive" is that I do not know javascript. William Stein said he would look this code over. But if someone else wants to (eg, mpatel) then I'm sure William won't mind:-)



---

archive/issue_events_077142.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-08-29T05:57:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "milestone_number": null,
    "milestone_title": "sage-4.1.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6447#event-77142"
}
```



---

archive/issue_events_077143.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-08-29T05:57:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6447#event-77143"
}
```



---

archive/issue_events_077144.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-08-29T05:57:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6447#event-77144"
}
```



---

archive/issue_comments_043519.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nwdj -- this looks good to me.  It doesn't have axes and \"everything\", but neither does tachyon.  But it provides new and *very* valuable functionality.",
    "created_at": "2009-08-29T05:58:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6447#issuecomment-43519",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:28" align="right">comment:28</div>

wdj -- this looks good to me.  It doesn't have axes and "everything", but neither does tachyon.  But it provides new and *very* valuable functionality.



---

archive/issue_comments_043520.json:
```json
{
    "body": "Reviewer: **David Joyner, William Stein**",
    "created_at": "2009-08-30T07:26:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6447#issuecomment-43520",
    "user": "https://github.com/sagetrac-mvngu"
}
```

Reviewer: **David Joyner, William Stein**



---

archive/issue_events_077145.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2009-08-30T07:26:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6447#event-77145"
}
```



---

archive/issue_events_077146.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2009-08-30T07:26:00Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/6447#event-77146"
}
```



---

archive/issue_comments_043521.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nMerged `trac_6447~rebase.patch`.",
    "created_at": "2009-08-30T07:26:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6447#issuecomment-43521",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<div id="comment:29" align="right">comment:29</div>

Merged `trac_6447~rebase.patch`.



---

archive/issue_comments_043522.json:
```json
{
    "body": "Author: **Bill Cauchois**",
    "created_at": "2009-08-30T07:26:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6447#issuecomment-43522",
    "user": "https://github.com/sagetrac-mvngu"
}
```

Author: **Bill Cauchois**



---

archive/issue_comments_043523.json:
```json
{
    "body": "Merged: **Sage 4.1.2.alpha0**",
    "created_at": "2009-08-30T07:26:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/6447",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/6447#issuecomment-43523",
    "user": "https://github.com/sagetrac-mvngu"
}
```

Merged: **Sage 4.1.2.alpha0**
