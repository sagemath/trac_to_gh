# Issue 31974: Test ticket: Upgrade FLINT to 2.8.0

archive/issues_031974.json:
```json
{
    "body": "CC:  slelievre\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/32211\n\n",
    "created_at": "2021-07-16T16:44:51Z",
    "labels": [
        "packages: standard",
        "major",
        "enhancement"
    ],
    "title": "Test ticket: Upgrade FLINT to 2.8.0",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31974",
    "user": "mkoeppe"
}
```
CC:  slelievre



Issue created by migration from https://trac.sagemath.org/ticket/32211





---

archive/issue_comments_456855.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-07-16T17:20:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31974#issuecomment-456855",
    "user": "mkoeppe"
}
```

New commits:



---

archive/issue_comments_456856.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-16T20:51:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31974#issuecomment-456856",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_456857.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-17T04:58:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31974#issuecomment-456857",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_456858.json:
```json
{
    "body": "After switching to the `cmake` build system:\n\nFailure on `ubuntu-trusty-standard` (where Sage rejects system `ntl`), likely because FLINT accepts system NTL:\n\n```\n-- Detecting CXX compile features - done\n-- Found GMP: /usr/include/x86_64-linux-gnu (Required is at least version \"6.0.0\") \n-- Found MPFR: /usr/include (Required is at least version \"1.0.0\") \n-- Found NTL: /usr/lib/libntl.so  \n-- Found PythonInterp: /usr/bin/python (found version \"2.7.6\") \n-- Found CBLAS: /usr/include  \n...\nlib/libflint.so.16.1.0: undefined reference to `_ntl_gscompare(_ntl_gbigint_body*, long)'\nlib/libflint.so.16.1.0: undefined reference to `_ntl_gmod(_ntl_gbigint_body*, _ntl_gbigint_body*, _ntl_gbigint_body**)'\nlib/libflint.so.16.1.0: undefined reference to `_ntl_gfree(_ntl_gbigint_body*)'\nlib/libflint.so.16.1.0: undefined reference to `_ntl_gsetlength(_ntl_gbigint_body**, long)'\nlib/libflint.so.16.1.0: undefined reference to `mpfr_rootn_ui'\nlib/libflint.so.16.1.0: undefined reference to `NTL::TerminalError(char const*)'\ncollect2: error: ld returned 1 exit status\nmake[5]: *** [bin/test-t-umul_ppmm] Error 1\n```\n\n(`ubuntu-trusty-minimal`, i.e., without installation of system `ntl`, is OK)\n\n\n\nLikewise `ubuntu-xenial`, `debian-jessie`, `debian-stretch`, etc.",
    "created_at": "2021-07-17T20:56:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31974#issuecomment-456858",
    "user": "mkoeppe"
}
```

After switching to the `cmake` build system:

Failure on `ubuntu-trusty-standard` (where Sage rejects system `ntl`), likely because FLINT accepts system NTL:

```
-- Detecting CXX compile features - done
-- Found GMP: /usr/include/x86_64-linux-gnu (Required is at least version "6.0.0") 
-- Found MPFR: /usr/include (Required is at least version "1.0.0") 
-- Found NTL: /usr/lib/libntl.so  
-- Found PythonInterp: /usr/bin/python (found version "2.7.6") 
-- Found CBLAS: /usr/include  
...
lib/libflint.so.16.1.0: undefined reference to `_ntl_gscompare(_ntl_gbigint_body*, long)'
lib/libflint.so.16.1.0: undefined reference to `_ntl_gmod(_ntl_gbigint_body*, _ntl_gbigint_body*, _ntl_gbigint_body**)'
lib/libflint.so.16.1.0: undefined reference to `_ntl_gfree(_ntl_gbigint_body*)'
lib/libflint.so.16.1.0: undefined reference to `_ntl_gsetlength(_ntl_gbigint_body**, long)'
lib/libflint.so.16.1.0: undefined reference to `mpfr_rootn_ui'
lib/libflint.so.16.1.0: undefined reference to `NTL::TerminalError(char const*)'
collect2: error: ld returned 1 exit status
make[5]: *** [bin/test-t-umul_ppmm] Error 1
```

(`ubuntu-trusty-minimal`, i.e., without installation of system `ntl`, is OK)



Likewise `ubuntu-xenial`, `debian-jessie`, `debian-stretch`, etc.



---

archive/issue_comments_456859.json:
```json
{
    "body": "Flint 2.8.3 is out, please update.",
    "created_at": "2021-11-03T14:15:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31974#issuecomment-456859",
    "user": "dimpase"
}
```

Flint 2.8.3 is out, please update.



---

archive/issue_comments_456860.json:
```json
{
    "body": "Changing keywords from \"\" to \"upgrade, arb, flint\".",
    "created_at": "2021-11-12T17:15:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31974#issuecomment-456860",
    "user": "slelievre"
}
```

Changing keywords from "" to "upgrade, arb, flint".



---

archive/issue_comments_456861.json:
```json
{
    "body": "Replying to [comment:6 mkoeppe]:\n> After switching to the `cmake` build system:\n> \n> Failure on `ubuntu-trusty-standard` (where Sage rejects system `ntl`), likely because FLINT accepts system NTL:\n> {{{\n> -- Detecting CXX compile features - done\n> -- Found GMP: /usr/include/x86_64-linux-gnu (Required is at least version \"6.0.0\") \n> -- Found MPFR: /usr/include (Required is at least version \"1.0.0\") \n> -- Found NTL: /usr/lib/libntl.so  \n> -- Found PythonInterp: /usr/bin/python (found version \"2.7.6\") \n> -- Found CBLAS: /usr/include  \n> ...\n> lib/libflint.so.16.1.0: undefined reference to `_ntl_gscompare(_ntl_gbigint_body*, long)'\n> lib/libflint.so.16.1.0: undefined reference to `_ntl_gmod(_ntl_gbigint_body*, _ntl_gbigint_body*, _ntl_gbigint_body**)'\n> lib/libflint.so.16.1.0: undefined reference to `_ntl_gfree(_ntl_gbigint_body*)'\n> lib/libflint.so.16.1.0: undefined reference to `_ntl_gsetlength(_ntl_gbigint_body**, long)'\n> lib/libflint.so.16.1.0: undefined reference to `mpfr_rootn_ui'\n> lib/libflint.so.16.1.0: undefined reference to `NTL::TerminalError(char const*)'\n> collect2: error: ld returned 1 exit status\n> make[5]: *** [bin/test-t-umul_ppmm] Error 1\n> }}}\n> (`ubuntu-trusty-minimal`, i.e., without installation of system `ntl`, is OK)\n> \n> \n> \n> Likewise `ubuntu-xenial`, `debian-jessie`, `debian-stretch`, etc.\n> \n\nAccording to `CMake/FindNTL.cmake` it accepts hints, namely by setting `$ENV{NTLDIR}`. It seems the same holds for the other packages.",
    "created_at": "2021-11-18T08:49:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31974#issuecomment-456861",
    "user": "@kliem"
}
```

Replying to [comment:6 mkoeppe]:
> After switching to the `cmake` build system:
> 
> Failure on `ubuntu-trusty-standard` (where Sage rejects system `ntl`), likely because FLINT accepts system NTL:
> {{{
> -- Detecting CXX compile features - done
> -- Found GMP: /usr/include/x86_64-linux-gnu (Required is at least version "6.0.0") 
> -- Found MPFR: /usr/include (Required is at least version "1.0.0") 
> -- Found NTL: /usr/lib/libntl.so  
> -- Found PythonInterp: /usr/bin/python (found version "2.7.6") 
> -- Found CBLAS: /usr/include  
> ...
> lib/libflint.so.16.1.0: undefined reference to `_ntl_gscompare(_ntl_gbigint_body*, long)'
> lib/libflint.so.16.1.0: undefined reference to `_ntl_gmod(_ntl_gbigint_body*, _ntl_gbigint_body*, _ntl_gbigint_body**)'
> lib/libflint.so.16.1.0: undefined reference to `_ntl_gfree(_ntl_gbigint_body*)'
> lib/libflint.so.16.1.0: undefined reference to `_ntl_gsetlength(_ntl_gbigint_body**, long)'
> lib/libflint.so.16.1.0: undefined reference to `mpfr_rootn_ui'
> lib/libflint.so.16.1.0: undefined reference to `NTL::TerminalError(char const*)'
> collect2: error: ld returned 1 exit status
> make[5]: *** [bin/test-t-umul_ppmm] Error 1
> }}}
> (`ubuntu-trusty-minimal`, i.e., without installation of system `ntl`, is OK)
> 
> 
> 
> Likewise `ubuntu-xenial`, `debian-jessie`, `debian-stretch`, etc.
> 

According to `CMake/FindNTL.cmake` it accepts hints, namely by setting `$ENV{NTLDIR}`. It seems the same holds for the other packages.



---

archive/issue_comments_456862.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-11-18T09:22:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31974#issuecomment-456862",
    "user": "@kliem"
}
```

New commits:



---

archive/issue_comments_456863.json:
```json
{
    "body": "What are these \"unreleased changes in Singular\"?",
    "created_at": "2021-11-18T09:39:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31974#issuecomment-456863",
    "user": "dimpase"
}
```

What are these "unreleased changes in Singular"?



---

archive/issue_comments_456864.json:
```json
{
    "body": "Either these should be a Singular patch, or this should be removed in the ticket description.",
    "created_at": "2021-11-18T09:40:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31974#issuecomment-456864",
    "user": "dimpase"
}
```

Either these should be a Singular patch, or this should be removed in the ticket description.



---

archive/issue_comments_456865.json:
```json
{
    "body": "Works locally for me, however I had to distclean.",
    "created_at": "2021-11-18T17:42:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31974#issuecomment-456865",
    "user": "@kliem"
}
```

Works locally for me, however I had to distclean.



---

archive/issue_comments_456866.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-18T20:26:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31974#issuecomment-456866",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_456867.json:
```json
{
    "body": "Are we upgrading arb here, too?",
    "created_at": "2021-11-19T10:01:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31974#issuecomment-456867",
    "user": "dimpase"
}
```

Are we upgrading arb here, too?



---

archive/issue_comments_456868.json:
```json
{
    "body": "Replying to [comment:21 dimpase]:\n> Either these should be a Singular patch, or this should be removed in the ticket description.\n\nThey have just tagged `Release-4-2-1p2`. \"update for using FLINT 2.8.x\" is a News item there, I don't know the details. We should probably do this update",
    "created_at": "2021-11-19T18:19:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31974#issuecomment-456868",
    "user": "mkoeppe"
}
```

Replying to [comment:21 dimpase]:
> Either these should be a Singular patch, or this should be removed in the ticket description.

They have just tagged `Release-4-2-1p2`. "update for using FLINT 2.8.x" is a News item there, I don't know the details. We should probably do this update



---

archive/issue_comments_456869.json:
```json
{
    "body": "I've opened #32907 for the Singular upgrade",
    "created_at": "2021-11-19T18:41:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31974#issuecomment-456869",
    "user": "mkoeppe"
}
```

I've opened #32907 for the Singular upgrade



---

archive/issue_comments_456870.json:
```json
{
    "body": "Looks like we need to push the minimal version of NTL required, I'm not sure what is needed here:\n\n\n```\n   [flint-2.8.4]   lib/libflint.so.16.1.4: undefined reference to `_ntl_gscompare(_ntl_gbigint_body*, long)'\n  [flint-2.8.4]   lib/libflint.so.16.1.4: undefined reference to `_ntl_gmod(_ntl_gbigint_body*, _ntl_gbigint_body*, _ntl_gbigint_body**)'\n  [flint-2.8.4]   lib/libflint.so.16.1.4: undefined reference to `_ntl_gfree(_ntl_gbigint_body*)'\n  [flint-2.8.4]   lib/libflint.so.16.1.4: undefined reference to `_ntl_gsetlength(_ntl_gbigint_body**, long)'\n  [flint-2.8.4]   lib/libflint.so.16.1.4: undefined reference to `mpfr_rootn_ui'\n  [flint-2.8.4]   lib/libflint.so.16.1.4: undefined reference to `NTL::TerminalError(char const*)'\n```\n\n\nAnd similar other failures.\n\nCentos complains about:\n\n\n```\n   [flint-2.8.4]   make[5]: *** [CMakeFiles/fq_nmod_poly_factor-test-t-iterated_frobenius_preinv.dir/build.make:103: bin/fq_nmod_poly_factor-test-t-iterated_frobenius_preinv] Error 1\n  [flint-2.8.4]   make[5]: Target 'CMakeFiles/fq_nmod_poly_factor-test-t-iterated_frobenius_preinv.dir/build' not remade because of errors.\n  [flint-2.8.4]   make[4]: *** [CMakeFiles/Makefile2:63248: CMakeFiles/fq_nmod_poly_factor-test-t-iterated_frobenius_preinv.dir/all] Error 2\n  [flint-2.8.4]   lib/libflint.so.16.1.4: undefined reference to `mpfr_rootn_ui'\n  [flint-2.8.4]   collect2: error: ld returned 1 exit status\n  [flint-2.8.4]   make[5]: *** [CMakeFiles/fq_poly-test-t-powmod_fmpz_binexp_preinv.dir/build.make:103: bin/fq_poly-test-t-powmod_fmpz_binexp_preinv] Error 1\n  [flint-2.8.4]   make[5]: Target 'CMakeFiles/fq_poly-test-t-powmod_fmpz_binexp_preinv.dir/build' not remade because of errors.\n  [flint-2.8.4]   make[4]: *** [CMakeFiles/Makefile2:63221: CMakeFiles/fq_poly-test-t-powmod_fmpz_binexp_preinv.dir/all] Error 2\n  [flint-2.8.4]   lib/libflint.so.16.1.4: undefined reference to `mpfr_rootn_ui'\n```\n\n\nApparently centos has an old version of mpfr.",
    "created_at": "2021-11-19T22:15:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31974#issuecomment-456870",
    "user": "@kliem"
}
```

Looks like we need to push the minimal version of NTL required, I'm not sure what is needed here:


```
   [flint-2.8.4]   lib/libflint.so.16.1.4: undefined reference to `_ntl_gscompare(_ntl_gbigint_body*, long)'
  [flint-2.8.4]   lib/libflint.so.16.1.4: undefined reference to `_ntl_gmod(_ntl_gbigint_body*, _ntl_gbigint_body*, _ntl_gbigint_body**)'
  [flint-2.8.4]   lib/libflint.so.16.1.4: undefined reference to `_ntl_gfree(_ntl_gbigint_body*)'
  [flint-2.8.4]   lib/libflint.so.16.1.4: undefined reference to `_ntl_gsetlength(_ntl_gbigint_body**, long)'
  [flint-2.8.4]   lib/libflint.so.16.1.4: undefined reference to `mpfr_rootn_ui'
  [flint-2.8.4]   lib/libflint.so.16.1.4: undefined reference to `NTL::TerminalError(char const*)'
```


And similar other failures.

Centos complains about:


```
   [flint-2.8.4]   make[5]: *** [CMakeFiles/fq_nmod_poly_factor-test-t-iterated_frobenius_preinv.dir/build.make:103: bin/fq_nmod_poly_factor-test-t-iterated_frobenius_preinv] Error 1
  [flint-2.8.4]   make[5]: Target 'CMakeFiles/fq_nmod_poly_factor-test-t-iterated_frobenius_preinv.dir/build' not remade because of errors.
  [flint-2.8.4]   make[4]: *** [CMakeFiles/Makefile2:63248: CMakeFiles/fq_nmod_poly_factor-test-t-iterated_frobenius_preinv.dir/all] Error 2
  [flint-2.8.4]   lib/libflint.so.16.1.4: undefined reference to `mpfr_rootn_ui'
  [flint-2.8.4]   collect2: error: ld returned 1 exit status
  [flint-2.8.4]   make[5]: *** [CMakeFiles/fq_poly-test-t-powmod_fmpz_binexp_preinv.dir/build.make:103: bin/fq_poly-test-t-powmod_fmpz_binexp_preinv] Error 1
  [flint-2.8.4]   make[5]: Target 'CMakeFiles/fq_poly-test-t-powmod_fmpz_binexp_preinv.dir/build' not remade because of errors.
  [flint-2.8.4]   make[4]: *** [CMakeFiles/Makefile2:63221: CMakeFiles/fq_poly-test-t-powmod_fmpz_binexp_preinv.dir/all] Error 2
  [flint-2.8.4]   lib/libflint.so.16.1.4: undefined reference to `mpfr_rootn_ui'
```


Apparently centos has an old version of mpfr.



---

archive/issue_comments_456871.json:
```json
{
    "body": "Replying to [comment:18 gh-kliem]:\n> Replying to [comment:6 mkoeppe]:\n> > After switching to the `cmake` build system:\n> > \n> > Failure on `ubuntu-trusty-standard` (where Sage rejects system `ntl`), likely because FLINT accepts system NTL:\n> > {{{\n> > -- Detecting CXX compile features - done\n> > -- Found GMP: /usr/include/x86_64-linux-gnu (Required is at least version \"6.0.0\") \n> > -- Found MPFR: /usr/include (Required is at least version \"1.0.0\") \n> > -- Found NTL: /usr/lib/libntl.so  \n> > -- Found PythonInterp: /usr/bin/python (found version \"2.7.6\") \n> > -- Found CBLAS: /usr/include  \n> > ...\n> > lib/libflint.so.16.1.0: undefined reference to `_ntl_gscompare(_ntl_gbigint_body*, long)'\n> > lib/libflint.so.16.1.0: undefined reference to `_ntl_gmod(_ntl_gbigint_body*, _ntl_gbigint_body*, _ntl_gbigint_body**)'\n> > lib/libflint.so.16.1.0: undefined reference to `_ntl_gfree(_ntl_gbigint_body*)'\n> > lib/libflint.so.16.1.0: undefined reference to `_ntl_gsetlength(_ntl_gbigint_body**, long)'\n> > lib/libflint.so.16.1.0: undefined reference to `mpfr_rootn_ui'\n> > lib/libflint.so.16.1.0: undefined reference to `NTL::TerminalError(char const*)'\n> > collect2: error: ld returned 1 exit status\n> > make[5]: *** [bin/test-t-umul_ppmm] Error 1\n> > }}}\n> > (`ubuntu-trusty-minimal`, i.e., without installation of system `ntl`, is OK)\n> > \n> > \n> > \n> > Likewise `ubuntu-xenial`, `debian-jessie`, `debian-stretch`, etc.\n> > \n> \n> According to `CMake/FindNTL.cmake` it accepts hints, namely by setting `$ENV{NTLDIR}`. It seems the same holds for the other packages.\n\nOk, I really don't know how this works with cmake.\n\nE.g. with mpfr flint does:\n\n\n```\nfind_path(MPFR_INCLUDE_DIRS NAMES mpfr.h PATHS $ENV{GMPDIR} $ENV{MPFRDIR} ${INCLUDE_INSTALL_DIR})    \n```\n",
    "created_at": "2021-11-19T22:36:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31974#issuecomment-456871",
    "user": "@kliem"
}
```

Replying to [comment:18 gh-kliem]:
> Replying to [comment:6 mkoeppe]:
> > After switching to the `cmake` build system:
> > 
> > Failure on `ubuntu-trusty-standard` (where Sage rejects system `ntl`), likely because FLINT accepts system NTL:
> > {{{
> > -- Detecting CXX compile features - done
> > -- Found GMP: /usr/include/x86_64-linux-gnu (Required is at least version "6.0.0") 
> > -- Found MPFR: /usr/include (Required is at least version "1.0.0") 
> > -- Found NTL: /usr/lib/libntl.so  
> > -- Found PythonInterp: /usr/bin/python (found version "2.7.6") 
> > -- Found CBLAS: /usr/include  
> > ...
> > lib/libflint.so.16.1.0: undefined reference to `_ntl_gscompare(_ntl_gbigint_body*, long)'
> > lib/libflint.so.16.1.0: undefined reference to `_ntl_gmod(_ntl_gbigint_body*, _ntl_gbigint_body*, _ntl_gbigint_body**)'
> > lib/libflint.so.16.1.0: undefined reference to `_ntl_gfree(_ntl_gbigint_body*)'
> > lib/libflint.so.16.1.0: undefined reference to `_ntl_gsetlength(_ntl_gbigint_body**, long)'
> > lib/libflint.so.16.1.0: undefined reference to `mpfr_rootn_ui'
> > lib/libflint.so.16.1.0: undefined reference to `NTL::TerminalError(char const*)'
> > collect2: error: ld returned 1 exit status
> > make[5]: *** [bin/test-t-umul_ppmm] Error 1
> > }}}
> > (`ubuntu-trusty-minimal`, i.e., without installation of system `ntl`, is OK)
> > 
> > 
> > 
> > Likewise `ubuntu-xenial`, `debian-jessie`, `debian-stretch`, etc.
> > 
> 
> According to `CMake/FindNTL.cmake` it accepts hints, namely by setting `$ENV{NTLDIR}`. It seems the same holds for the other packages.

Ok, I really don't know how this works with cmake.

E.g. with mpfr flint does:


```
find_path(MPFR_INCLUDE_DIRS NAMES mpfr.h PATHS $ENV{GMPDIR} $ENV{MPFRDIR} ${INCLUDE_INSTALL_DIR})    
```




---

archive/issue_comments_456872.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-20T14:43:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31974#issuecomment-456872",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_456873.json:
```json
{
    "body": "Somehow `make build` after upgrading or downgrading flint doesn't work:\n\n\n```\n  File \"sage/rings/polynomial/polynomial_element.pyx\", line 67, in init sage.rings.polynomial.polynomial_element (build/cythonized/sage/rings/polynomial/polynomial_element.c:107015)\n  File \"/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/rings/polynomial/polynomial_ring.py\", line 154, in <module>\n    import sage.rings.polynomial.polynomial_element_generic as polynomial_element_generic\n  File \"/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/rings/polynomial/polynomial_element_generic.py\", line 1556, in <module>\n    from sage.rings.polynomial.polynomial_rational_flint import Polynomial_rational_flint\nImportError: libflint.so.16: cannot open shared object file: No such file or directory\n```\n\n\nRunning `make build-clean` helped.",
    "created_at": "2021-11-29T08:05:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31974#issuecomment-456873",
    "user": "@kliem"
}
```

Somehow `make build` after upgrading or downgrading flint doesn't work:


```
  File "sage/rings/polynomial/polynomial_element.pyx", line 67, in init sage.rings.polynomial.polynomial_element (build/cythonized/sage/rings/polynomial/polynomial_element.c:107015)
  File "/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/rings/polynomial/polynomial_ring.py", line 154, in <module>
    import sage.rings.polynomial.polynomial_element_generic as polynomial_element_generic
  File "/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/rings/polynomial/polynomial_element_generic.py", line 1556, in <module>
    from sage.rings.polynomial.polynomial_rational_flint import Polynomial_rational_flint
ImportError: libflint.so.16: cannot open shared object file: No such file or directory
```


Running `make build-clean` helped.



---

archive/issue_comments_456874.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2022-02-01T00:29:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31974#issuecomment-456874",
    "user": "mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_comments_456875.json:
```json
{
    "body": "Needs rebasing.",
    "created_at": "2022-02-01T07:08:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31974#issuecomment-456875",
    "user": "fbissey"
}
```

Needs rebasing.



---

archive/issue_comments_456876.json:
```json
{
    "body": "Take the opportunity to upgrade to Arb 2.22.1?",
    "created_at": "2022-02-01T08:31:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31974#issuecomment-456876",
    "user": "slelievre"
}
```

Take the opportunity to upgrade to Arb 2.22.1?



---

archive/issue_comments_456877.json:
```json
{
    "body": "Yes, that's probably a good idea",
    "created_at": "2022-02-01T09:03:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31974#issuecomment-456877",
    "user": "mkoeppe"
}
```

Yes, that's probably a good idea



---

archive/issue_comments_456878.json:
```json
{
    "body": "New commits:",
    "created_at": "2022-02-03T00:07:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31974#issuecomment-456878",
    "user": "mkoeppe"
}
```

New commits:



---

archive/issue_comments_456879.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-02-03T00:07:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31974#issuecomment-456879",
    "user": "mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_456880.json:
```json
{
    "body": "I see doctest errors (numerical noise) in e.g. here\n\n```\nFile \"src/sage/rings/real_arb.pyx\", line 3509, in sage.rings.real_arb.RealBall.erf\nFailed example:\n    RBF(1/2).erf()\nExpected:\n    [0.520499877813047 +/- 6.10e-16]\nGot:\n    [0.520499877813047 +/- 5.93e-16]\n```\n\n(this is on Debian 11,x86_64)",
    "created_at": "2022-02-04T01:16:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31974#issuecomment-456880",
    "user": "dimpase"
}
```

I see doctest errors (numerical noise) in e.g. here

```
File "src/sage/rings/real_arb.pyx", line 3509, in sage.rings.real_arb.RealBall.erf
Failed example:
    RBF(1/2).erf()
Expected:
    [0.520499877813047 +/- 6.10e-16]
Got:
    [0.520499877813047 +/- 5.93e-16]
```

(this is on Debian 11,x86_64)



---

archive/issue_comments_456881.json:
```json
{
    "body": "#33189 is needed here, so that comment:43 no longer applies.",
    "created_at": "2022-02-04T16:14:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31974#issuecomment-456881",
    "user": "dimpase"
}
```

#33189 is needed here, so that comment:43 no longer applies.



---

archive/issue_comments_456882.json:
```json
{
    "body": "lgtm",
    "created_at": "2022-02-04T16:53:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31974#issuecomment-456882",
    "user": "dimpase"
}
```

lgtm



---

archive/issue_comments_456883.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-02-04T16:53:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31974#issuecomment-456883",
    "user": "dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_456884.json:
```json
{
    "body": "Thanks.",
    "created_at": "2022-02-04T17:48:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31974#issuecomment-456884",
    "user": "mkoeppe"
}
```

Thanks.



---

archive/issue_comments_456885.json:
```json
{
    "body": "See https://github.com/vbraun/sage/runs/5086538238",
    "created_at": "2022-02-07T15:35:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31974#issuecomment-456885",
    "user": "vbraun"
}
```

See https://github.com/vbraun/sage/runs/5086538238



---

archive/issue_comments_456886.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2022-02-07T15:35:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31974#issuecomment-456886",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_456887.json:
```json
{
    "body": "Volker, you did not merge the dependency, #33189, that's why you got errors, e.g. here:\nhttps://github.com/vbraun/sage/blob/7b26bb58475d9bc707bc9ed7d2a63351f2f4686c/src/sage/rings/real_arb.pyx#L3509\n\nIt should be \n\n```\nsage: RBF(1/2).erf() # abs tol 1e-16\n```\n\nand not\n\n```\nsage: RBF(1/2).erf()\n```\n\nas in the branch you're testing.",
    "created_at": "2022-02-07T15:58:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31974#issuecomment-456887",
    "user": "dimpase"
}
```

Volker, you did not merge the dependency, #33189, that's why you got errors, e.g. here:
https://github.com/vbraun/sage/blob/7b26bb58475d9bc707bc9ed7d2a63351f2f4686c/src/sage/rings/real_arb.pyx#L3509

It should be 

```
sage: RBF(1/2).erf() # abs tol 1e-16
```

and not

```
sage: RBF(1/2).erf()
```

as in the branch you're testing.



---

archive/issue_comments_456888.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2022-02-07T15:58:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31974#issuecomment-456888",
    "user": "dimpase"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_456889.json:
```json
{
    "body": "When I added #33189 and set this to positive review, #33189 was already marked as merged,so I don't really understand how it was tested without it in the end.",
    "created_at": "2022-02-07T16:13:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31974#issuecomment-456889",
    "user": "dimpase"
}
```

When I added #33189 and set this to positive review, #33189 was already marked as merged,so I don't really understand how it was tested without it in the end.



---

archive/issue_comments_456890.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-02-12T22:07:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31974#issuecomment-456890",
    "user": "vbraun"
}
```

Resolution: fixed
