# Issue 20421: Error building numpy

Issue created by migration from https://trac.sagemath.org/ticket/20658

Original creator: mmarco

Original creation time: 2016-05-23 13:10:38

CC:  vbraun

Keywords: numpy

Trying to compile Sage-7.2 in a mageia box, i get the following error when compiling the numpy package.


```
running install_clib
copying build/temp.linux-x86_64-2.7/libnpymath.a -> build/bdist.linux-x86_64/egg/numpy/core/lib
creating build/bdist.linux-x86_64/egg/EGG-INFO
installing scripts to build/bdist.linux-x86_64/egg/EGG-INFO/scripts
running install_scripts
running build_scripts
creating build/scripts.linux-x86_64-2.7
Creating build/scripts.linux-x86_64-2.7/f2py
  adding 'build/scripts.linux-x86_64-2.7/f2py' to scripts
changing mode of build/scripts.linux-x86_64-2.7/f2py from 664 to 775
creating build/bdist.linux-x86_64/egg/EGG-INFO/scripts
copying build/scripts.linux-x86_64-2.7/f2py -> build/bdist.linux-x86_64/egg/EGG-INFO/scripts
changing mode of build/bdist.linux-x86_64/egg/EGG-INFO/scripts/f2py to 775
copying numpy.egg-info/PKG-INFO -> build/bdist.linux-x86_64/egg/EGG-INFO
copying numpy.egg-info/SOURCES.txt -> build/bdist.linux-x86_64/egg/EGG-INFO
copying numpy.egg-info/dependency_links.txt -> build/bdist.linux-x86_64/egg/EGG-INFO
copying numpy.egg-info/top_level.txt -> build/bdist.linux-x86_64/egg/EGG-INFO
writing build/bdist.linux-x86_64/egg/EGG-INFO/native_libs.txt
zip_safe flag not set; analyzing archive contents...
creating dist
creating 'dist/numpy-1.11.0-py2.7-linux-x86_64.egg' and adding 'build/bdist.linux-x86_64/egg' to it
removing 'build/bdist.linux-x86_64/egg' (and everything under it)
Processing numpy-1.11.0-py2.7-linux-x86_64.egg
Removing /home/sage/sage-7.2/local/lib/python2.7/site-packages/numpy-1.11.0-py2.7-linux-x86_64.egg
Copying numpy-1.11.0-py2.7-linux-x86_64.egg to /home/sage/sage-7.2/local/lib/python2.7/site-packages
numpy 1.11.0 is already the active version in easy-install.pth
Installing f2py script to /home/sage/sage-7.2/local/bin

Installed /home/sage/sage-7.2/local/lib/python2.7/site-packages/numpy-1.11.0-py2.7-linux-x86_64.egg
Processing dependencies for numpy==1.11.0
Finished processing dependencies for numpy==1.11.0
running config_fc
unifing config_fc, config, build_clib, build_ext, build commands --fcompiler options
Traceback (most recent call last):
  File "<stdin>", line 4, in <module>
OSError: [Errno 20] Not a directory: '/home/sage/sage-7.2/local/lib/python2.7/site-packages/numpy-1.11.0-py2.7-linux-x86_64.egg/numpy/core/include'

real    3m43.216s
user    3m26.420s
sys     0m10.000s
************************************************************************
Error installing package numpy-1.11.0
************************************************************************
Please email sage-devel (http://groups.google.com/group/sage-devel)
explaining the problem and including the relevant part of the log file
  /home/sage/sage-7.2/logs/pkgs/numpy-1.11.0.log
Describe your computer, operating system, etc.
If you want to try to fix the problem yourself, *don't* just cd to
/home/sage/sage-7.2/local/var/tmp/sage/build/numpy-1.11.0 and type 'make' or whatever is appropriate.
Instead, the following commands setup all environment variables
correctly and load a subshell for you to debug the error:
  (cd '/home/sage/sage-7.2/local/var/tmp/sage/build/numpy-1.11.0' && '/home/sage/sage-7.2/sage' --sh)
When you are done debugging, you can type "exit" to leave the subshell.
************************************************************************
make[2]: *** [/home/sage/sage-7.2/local/var/lib/sage/installed/numpy-1.11.0] Error 1
make[2]: se sale del directorio `/home/sage/sage-7.2/build/make'
make[1]: *** [all] Error 2
make[1]: se sale del directorio `/home/sage/sage-7.2/build/make'

real    3m45.330s
user    3m27.920s
sys     0m10.520s
***************************************************************
Error building Sage.

The following package(s) may have failed to build (not necessarily
during this run of 'make all'):

* package: numpy-1.11.0
  log file: /home/sage/sage-7.2/logs/pkgs/numpy-1.11.0.log
  build directory: /home/sage/sage-7.2/local/var/tmp/sage/build/numpy-1.11.0

The build directory may contain configuration files and other potentially
helpful information. WARNING: if you now run 'make' again, the build
directory will, by default, be deleted. Set the environment variable
SAGE_KEEP_BUILT_SPKGS to 'yes' to prevent this.

```



---

Comment by vbraun created at 2016-05-23 22:42:54

Does the patch work for you?
----
New commits:


---

Comment by vbraun created at 2016-05-23 22:42:54

Changing status from new to needs_review.


---

Comment by mmarco created at 2016-06-30 08:32:22

Yes, it worked


---

Comment by mmarco created at 2016-06-30 08:32:22

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-07-01 16:57:12

Resolution: fixed
