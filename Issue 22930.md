# Issue 22930: Coercions between Function Fields

Issue created by migration from Trac.

Original creator: saraedum

Original creation time: 2017-06-07 21:06:51

Keywords: sd86.5

The following are desired features.

Coercions between base fields should induce coercions on function fields:

```
sage: K.<x> = FunctionField(QQ)
sage: L.<x> = FunctionField(GaussianIntegers().fraction_field())
sage: L.has_coerce_map_from(K)
True
```


Also in towers:

```
sage: K.<x> = FunctionField(QQ)
sage: R.<y> = K[]
sage: L.<y> = K.extension(y^3 + 1)
sage: K.<x> = FunctionField(GaussianIntegers().fraction_field())
sage: R.<y> = K[]
sage: M.<y> = K.extension(y^3 + 1)
sage: M.has_coerce_map_from(L)
True
```


And when the base ring coerces into the extension:

```
sage: K.<x> = FunctionField(QQ)
sage: R.<I> = K[]
sage: L.<I> = K.extension(I^2 + 1)
sage: M.<x> = FunctionField(GaussianIntegers().fraction_field())
sage: M.has_coerce_map_from(L) # not tested, base_morphism is not implemented
True
```



---

Comment by roed created at 2017-06-08 01:32:43

Changing status from new to needs_review.


---

Comment by roed created at 2017-06-08 01:32:43

New commits:


---

Comment by saraedum created at 2017-06-08 22:31:14

Positive review. But one doctest fails because an `is_injective` is not implemented. I think that we should just disable the doctest because the failing doctest is not in the scope of this. (We discussed several ways of fixing this. The best would probably be to change the `DefaultConvertMap` to be a `DefaultCoerceMap` [does not exist yet] which is in the category of domain and codomain and would therefore by magically be injective.)
----
New commits:


---

Comment by saraedum created at 2017-06-08 22:31:28

Changing status from needs_review to needs_work.


---

Comment by roed created at 2017-06-09 01:02:35

Changing status from needs_work to needs_review.


---

Comment by roed created at 2017-06-09 01:02:35

I disabled the doctest.  See #23184 for a followup which should allow the doctest to be re-enabled.
----
New commits:


---

Comment by saraedum created at 2017-06-09 01:15:11

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-06-10 14:49:14

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2017-06-10 14:49:14

Documentation doesn't build


---

Comment by vbraun created at 2017-06-10 14:56:21

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2017-06-10 14:56:21

Was #23152...


---

Comment by vbraun created at 2017-06-11 14:33:01


```
sage -t --long --warn-long 69.1 src/sage/categories/rings.py
**********************************************************************
File "src/sage/categories/rings.py", line 97, in sage.categories.rings.Rings.MorphismMethods.is_injective
Failed example:
    f = K.hom([codomain(1)]); f
Exception raised:
    Traceback (most recent call last):
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 509, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 872, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.categories.rings.Rings.MorphismMethods.is_injective[8]>", line 1, in <module>
        f = K.hom([codomain(Integer(1))]); f
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/rings/function_field/function_field.py", line 1935, in hom
        raise ValueError("You must specify a morphism on the base field")
    ValueError: You must specify a morphism on the base field
**********************************************************************
File "src/sage/categories/rings.py", line 102, in sage.categories.rings.Rings.MorphismMethods.is_injective
Failed example:
    f.is_injective()
Expected:
    False
Got:
    True
**********************************************************************
```



---

Comment by vbraun created at 2017-06-11 14:33:01

Changing status from positive_review to needs_work.


---

Comment by git created at 2017-06-12 01:39:08

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by saraedum created at 2017-06-12 01:39:57

Changing status from needs_work to positive_review.


---

Comment by saraedum created at 2017-06-12 01:39:57

tests pass; david agreed to this fix.


---

Comment by vbraun created at 2017-06-13 06:51:35

Resolution: fixed
