# Issue 13670: Allow automorphism of groups to work on the original vertex set

archive/issues_013670.json:
```json
{
    "body": "Assignee: jason, ncohen, rlm\n\nCC:  rbeezer ncohen dcoudert benjaminfjones\n\nThe current implementation of the automorphism group of a graph always relabels the graph in question to use the vertex set $1,2,...,$ and then returns the automorphism group based on this labelling and potentially a translation for the labelling as well.\n\nNeedless to say that this is time consuming, confusing and also prone to bugs since if one uses integers as labels (starting at 0 for example) the relabelling might go unnoticed. \n\nAs it appears from [this](https://groups.google.com/forum/?fromgroups=#!topic/sage-devel/wLtbNpeYrok) sage-devel post  it is now possible to use arbitrary domains for permutation groups.\n\nHence, it would be nice to integrate this change into the automorphism_group function as well.\n\nIssue created by migration from https://trac.sagemath.org/ticket/13874\n\n",
    "created_at": "2012-12-28T11:03:06Z",
    "labels": [
        "graph theory",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Allow automorphism of groups to work on the original vertex set",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13670",
    "user": "azi"
}
```
Assignee: jason, ncohen, rlm

CC:  rbeezer ncohen dcoudert benjaminfjones

The current implementation of the automorphism group of a graph always relabels the graph in question to use the vertex set $1,2,...,$ and then returns the automorphism group based on this labelling and potentially a translation for the labelling as well.

Needless to say that this is time consuming, confusing and also prone to bugs since if one uses integers as labels (starting at 0 for example) the relabelling might go unnoticed. 

As it appears from [this](https://groups.google.com/forum/?fromgroups=#!topic/sage-devel/wLtbNpeYrok) sage-devel post  it is now possible to use arbitrary domains for permutation groups.

Hence, it would be nice to integrate this change into the automorphism_group function as well.

Issue created by migration from https://trac.sagemath.org/ticket/13874





---

archive/issue_comments_169396.json:
```json
{
    "body": "I posted this to the mailing list, but it's relevant here too:\n\nUntil we have proper support for this, you can do:\n\n\n```\nsage: g=Graph({'a': 'b', 'b': 'c'})\nsage: p,q=g.automorphism_group(translation=True)\nsage: pp=PermutationGroup(gap_group=p._gap_(), domain=sorted(q, key=q.get))\n\nsage: pp\nPermutation Group with generators [('c','a')]\n```\n\n(this also helps you see how to implement it...)\n\nUnfortunately, there is a bug in the stabilizer method when the permutation group has a custom domain, which is now fixed at #13893, which now needs review.\n\na workaround for the stabilizer bug is:\n\n\n```\nsage: pp.subgroup(gap_group=gap.Stabilizer(pp, pp._domain_to_gap['b']))\nSubgroup of (Permutation Group with generators [('c','a')]) generated by [('c','a')] \n```\n",
    "created_at": "2012-12-31T15:40:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13670",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13670#issuecomment-169396",
    "user": "jason"
}
```

I posted this to the mailing list, but it's relevant here too:

Until we have proper support for this, you can do:


```
sage: g=Graph({'a': 'b', 'b': 'c'})
sage: p,q=g.automorphism_group(translation=True)
sage: pp=PermutationGroup(gap_group=p._gap_(), domain=sorted(q, key=q.get))

sage: pp
Permutation Group with generators [('c','a')]
```

(this also helps you see how to implement it...)

Unfortunately, there is a bug in the stabilizer method when the permutation group has a custom domain, which is now fixed at #13893, which now needs review.

a workaround for the stabilizer bug is:


```
sage: pp.subgroup(gap_group=gap.Stabilizer(pp, pp._domain_to_gap['b']))
Subgroup of (Permutation Group with generators [('c','a')]) generated by [('c','a')] 
```

