# Issue 13670: Allow automorphism of groups to work on the original vertex set

archive/issues_013670.json:
```json
{
    "body": "Assignee: jason, ncohen, rlm\n\nCC:  @rbeezer @nathanncohen @dcoudert @benjaminfjones\n\nThe current implementation of the automorphism group of a graph always relabels the graph in question to use the vertex set $1,2,...,$ and then returns the automorphism group based on this labelling and potentially a translation for the labelling as well.\n\nNeedless to say that this is time consuming, confusing and also prone to bugs since if one uses integers as labels (starting at 0 for example) the relabelling might go unnoticed. \n\nAs it appears from [this](https://groups.google.com/forum/?fromgroups=#!topic/sage-devel/wLtbNpeYrok) sage-devel post  it is now possible to use arbitrary domains for permutation groups.\n\nHence, it would be nice to integrate this change into the automorphism_group function as well.\n\nIssue created by migration from https://trac.sagemath.org/ticket/13874\n\n",
    "created_at": "2012-12-28T11:03:06Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Allow automorphism of groups to work on the original vertex set",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13670",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```
Assignee: jason, ncohen, rlm

CC:  @rbeezer @nathanncohen @dcoudert @benjaminfjones

The current implementation of the automorphism group of a graph always relabels the graph in question to use the vertex set $1,2,...,$ and then returns the automorphism group based on this labelling and potentially a translation for the labelling as well.

Needless to say that this is time consuming, confusing and also prone to bugs since if one uses integers as labels (starting at 0 for example) the relabelling might go unnoticed. 

As it appears from [this](https://groups.google.com/forum/?fromgroups=#!topic/sage-devel/wLtbNpeYrok) sage-devel post  it is now possible to use arbitrary domains for permutation groups.

Hence, it would be nice to integrate this change into the automorphism_group function as well.

Issue created by migration from https://trac.sagemath.org/ticket/13874





---

archive/issue_comments_169148.json:
```json
{
    "body": "I posted this to the mailing list, but it's relevant here too:\n\nUntil we have proper support for this, you can do:\n\n```\nsage: g=Graph({'a': 'b', 'b': 'c'})\nsage: p,q=g.automorphism_group(translation=True)\nsage: pp=PermutationGroup(gap_group=p._gap_(), domain=sorted(q, key=q.get))\n\nsage: pp\nPermutation Group with generators [('c','a')]\n```\n(this also helps you see how to implement it...)\n\nUnfortunately, there is a bug in the stabilizer method when the permutation group has a custom domain, which is now fixed at #13893, which now needs review.\n\na workaround for the stabilizer bug is:\n\n```\nsage: pp.subgroup(gap_group=gap.Stabilizer(pp, pp._domain_to_gap['b']))\nSubgroup of (Permutation Group with generators [('c','a')]) generated by [('c','a')] \n```",
    "created_at": "2012-12-31T15:40:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13670",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13670#issuecomment-169148",
    "user": "https://github.com/jasongrout"
}
```

I posted this to the mailing list, but it's relevant here too:

Until we have proper support for this, you can do:

```
sage: g=Graph({'a': 'b', 'b': 'c'})
sage: p,q=g.automorphism_group(translation=True)
sage: pp=PermutationGroup(gap_group=p._gap_(), domain=sorted(q, key=q.get))

sage: pp
Permutation Group with generators [('c','a')]
```
(this also helps you see how to implement it...)

Unfortunately, there is a bug in the stabilizer method when the permutation group has a custom domain, which is now fixed at #13893, which now needs review.

a workaround for the stabilizer bug is:

```
sage: pp.subgroup(gap_group=gap.Stabilizer(pp, pp._domain_to_gap['b']))
Subgroup of (Permutation Group with generators [('c','a')]) generated by [('c','a')] 
```



---

archive/issue_events_038927.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13670",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13670#event-38927"
}
```



---

archive/issue_events_038928.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13670",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13670#event-38928"
}
```



---

archive/issue_events_038929.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13670",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13670#event-38929"
}
```



---

archive/issue_events_038930.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13670",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13670#event-38930"
}
```



---

archive/issue_events_038931.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13670",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13670#event-38931"
}
```



---

archive/issue_events_038932.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13670",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13670#event-38932"
}
```



---

archive/issue_events_038933.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13670",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13670#event-38933"
}
```
