# Issue 10420: Wrong docs of _lmul_ and _rmul_ in the polynomial module

Issue created by migration from https://trac.sagemath.org/ticket/10473

Original creator: klee

Original creation time: 2010-12-14 07:21:20

Assignee: AlexGhitza


```

>> sage: s=1/2*x;parent(s)
>> sage: s._rmul_?
>> ...
>> Definition:     s._rmul_(self, right)
>> Docstring:
>>      File: sage/rings/polynomial/polynomial_rational_flint.pyx
>> (starting at
>>      line 933)

>>         Returns self * right, where right is a rational number. 

```

This is reversed. 


r*s means that s is on the right side, hence, s._rmul_(r), while s is on the left side in s*r, hence, s._lmul_(r). 

the _rmul_ docs should be:

s._rmul_(self, left)

and say it returns left*self, where left is a rational number. 


---

Comment by klee created at 2010-12-14 07:27:27

The patch fixes an instance of the error in the file sage/rings/polynomial/polynomial_rational_flint.pyx. There may be the same error in other files.


---

Comment by klee created at 2010-12-14 07:34:19

Changing status from new to needs_review.


---

Comment by klee created at 2010-12-14 07:34:19

Changing type from PLEASE CHANGE to defect.


---

Comment by spancratz created at 2011-01-08 07:01:46

Thank you for noticing this!  Of course, the code behaves correctly in both cases right now, because the operation is commutative, but I agree the documentation needs to be changed.

This patch seems to be doing exactly the right thing, however, it does not apply cleanly to 4.6.1.rc0.  Is there any chance you might be able to change this?  (In that case, I am happy to run tests etc and give it a positive review.)

Many thanks!
Sebastian


---

Comment by spancratz created at 2011-01-08 07:01:46

Changing status from needs_review to needs_work.


---

Attachment

The patch rebased to Sage 4.6.1.rc0


---

Comment by klee created at 2011-01-08 20:21:25

Changing status from needs_work to needs_review.


---

Comment by spancratz created at 2011-01-08 23:05:39

Thank you for the quick reply.

Unfortunately, the patch still does not apply cleanly to 4.6.1.rc0.  It's the second hunk of the patch that fails, i.e., the following


```
--- polynomial_rational_flint.pyx
+++ polynomial_rational_flint.pyx
@@ -923,14 +923,14 @@
         """
         cdef Polynomial_rational_flint res = self._new()
         cdef bint do_sig = _do_sig(self.__poly)
-
+
         if do_sig: _sig_on
         fmpq_poly_scalar_mul_mpq(res.__poly, self.__poly, \
-                                 (<Rational> right).value)
+                                 (<Rational> left).value)
         if do_sig: _sig_off
         return res

-    cpdef ModuleElement _rmul_(self, RingElement right):
+    cpdef ModuleElement _lmul_(self, RingElement right):
         r"""
         Returns self * right, where right is a rational number.
```


I am not quite sure why this is;  perhaps you accidentally did not upload the updated patch?

Feel free to try again (and I'll check and review it).  Alternatively, I am also happy to fix this myself;  let me know what you prefer.

Best wishes,
Sebastian


---

Attachment

Updated version for 4.6.1.rc0


---

Comment by aly.deines created at 2011-01-14 01:17:59

Looks good!


---

Comment by aly.deines created at 2011-01-14 01:17:59

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2011-01-18 14:00:46

The patch lacks a commit message, probably because you used `hg diff` instead of the proper `hg export tip`.  Please add a commit message (which should contain the ticket number on the first line).


---

Comment by jdemeyer created at 2011-01-18 14:00:46

Changing status from positive_review to needs_work.


---

Attachment


---

Comment by klee created at 2011-01-21 14:14:35

The patch rebased for the latest release 4.6.1


---

Comment by klee created at 2011-01-21 14:14:35

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2011-01-22 20:16:57

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2011-01-25 08:15:55

Resolution: fixed
