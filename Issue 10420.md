# Issue 10420: Wrong docs of _lmul_ and _rmul_ in the polynomial module

archive/issues_010420.json:
```json
{
    "body": "Assignee: AlexGhitza\n\n\n```\n\n>> sage: s=1/2*x;parent(s)\n>> sage: s._rmul_?\n>> ...\n>> Definition:     s._rmul_(self, right)\n>> Docstring:\n>>      File: sage/rings/polynomial/polynomial_rational_flint.pyx\n>> (starting at\n>>      line 933)\n\n>>         Returns self * right, where right is a rational number. \n\n```\n\nThis is reversed. \n\n\nr*s means that s is on the right side, hence, s._rmul_(r), while s is on the left side in s*r, hence, s._lmul_(r). \n\nthe _rmul_ docs should be:\n\ns._rmul_(self, left)\n\nand say it returns left*self, where left is a rational number. \n\nIssue created by migration from https://trac.sagemath.org/ticket/10473\n\n",
    "created_at": "2010-12-14T07:21:20Z",
    "labels": [
        "basic arithmetic",
        "trivial"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.6.2",
    "title": "Wrong docs of _lmul_ and _rmul_ in the polynomial module",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10420",
    "user": "klee"
}
```
Assignee: AlexGhitza


```

>> sage: s=1/2*x;parent(s)
>> sage: s._rmul_?
>> ...
>> Definition:     s._rmul_(self, right)
>> Docstring:
>>      File: sage/rings/polynomial/polynomial_rational_flint.pyx
>> (starting at
>>      line 933)

>>         Returns self * right, where right is a rational number. 

```

This is reversed. 


r*s means that s is on the right side, hence, s._rmul_(r), while s is on the left side in s*r, hence, s._lmul_(r). 

the _rmul_ docs should be:

s._rmul_(self, left)

and say it returns left*self, where left is a rational number. 

Issue created by migration from https://trac.sagemath.org/ticket/10473





---

archive/issue_comments_107273.json:
```json
{
    "body": "The patch fixes an instance of the error in the file sage/rings/polynomial/polynomial_rational_flint.pyx. There may be the same error in other files.",
    "created_at": "2010-12-14T07:27:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10420#issuecomment-107273",
    "user": "klee"
}
```

The patch fixes an instance of the error in the file sage/rings/polynomial/polynomial_rational_flint.pyx. There may be the same error in other files.



---

archive/issue_comments_107274.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2010-12-14T07:34:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10420#issuecomment-107274",
    "user": "klee"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_107275.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2010-12-14T07:34:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10420#issuecomment-107275",
    "user": "klee"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_107276.json:
```json
{
    "body": "Thank you for noticing this!  Of course, the code behaves correctly in both cases right now, because the operation is commutative, but I agree the documentation needs to be changed.\n\nThis patch seems to be doing exactly the right thing, however, it does not apply cleanly to 4.6.1.rc0.  Is there any chance you might be able to change this?  (In that case, I am happy to run tests etc and give it a positive review.)\n\nMany thanks!\nSebastian",
    "created_at": "2011-01-08T07:01:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10420#issuecomment-107276",
    "user": "spancratz"
}
```

Thank you for noticing this!  Of course, the code behaves correctly in both cases right now, because the operation is commutative, but I agree the documentation needs to be changed.

This patch seems to be doing exactly the right thing, however, it does not apply cleanly to 4.6.1.rc0.  Is there any chance you might be able to change this?  (In that case, I am happy to run tests etc and give it a positive review.)

Many thanks!
Sebastian



---

archive/issue_comments_107277.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-01-08T07:01:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10420#issuecomment-107277",
    "user": "spancratz"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_107278.json:
```json
{
    "body": "Attachment [trac_10473.patch](tarball://root/attachments/some-uuid/ticket10473/trac_10473.patch) by klee created at 2011-01-08 20:21:25\n\nThe patch rebased to Sage 4.6.1.rc0",
    "created_at": "2011-01-08T20:21:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10420#issuecomment-107278",
    "user": "klee"
}
```

Attachment [trac_10473.patch](tarball://root/attachments/some-uuid/ticket10473/trac_10473.patch) by klee created at 2011-01-08 20:21:25

The patch rebased to Sage 4.6.1.rc0



---

archive/issue_comments_107279.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-01-08T20:21:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10420#issuecomment-107279",
    "user": "klee"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_107280.json:
```json
{
    "body": "Thank you for the quick reply.\n\nUnfortunately, the patch still does not apply cleanly to 4.6.1.rc0.  It's the second hunk of the patch that fails, i.e., the following\n\n\n```\n--- polynomial_rational_flint.pyx\n+++ polynomial_rational_flint.pyx\n@@ -923,14 +923,14 @@\n         \"\"\"\n         cdef Polynomial_rational_flint res = self._new()\n         cdef bint do_sig = _do_sig(self.__poly)\n-\n+\n         if do_sig: _sig_on\n         fmpq_poly_scalar_mul_mpq(res.__poly, self.__poly, \\\n-                                 (<Rational> right).value)\n+                                 (<Rational> left).value)\n         if do_sig: _sig_off\n         return res\n\n-    cpdef ModuleElement _rmul_(self, RingElement right):\n+    cpdef ModuleElement _lmul_(self, RingElement right):\n         r\"\"\"\n         Returns self * right, where right is a rational number.\n```\n\n\nI am not quite sure why this is;  perhaps you accidentally did not upload the updated patch?\n\nFeel free to try again (and I'll check and review it).  Alternatively, I am also happy to fix this myself;  let me know what you prefer.\n\nBest wishes,\nSebastian",
    "created_at": "2011-01-08T23:05:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10420#issuecomment-107280",
    "user": "spancratz"
}
```

Thank you for the quick reply.

Unfortunately, the patch still does not apply cleanly to 4.6.1.rc0.  It's the second hunk of the patch that fails, i.e., the following


```
--- polynomial_rational_flint.pyx
+++ polynomial_rational_flint.pyx
@@ -923,14 +923,14 @@
         """
         cdef Polynomial_rational_flint res = self._new()
         cdef bint do_sig = _do_sig(self.__poly)
-
+
         if do_sig: _sig_on
         fmpq_poly_scalar_mul_mpq(res.__poly, self.__poly, \
-                                 (<Rational> right).value)
+                                 (<Rational> left).value)
         if do_sig: _sig_off
         return res

-    cpdef ModuleElement _rmul_(self, RingElement right):
+    cpdef ModuleElement _lmul_(self, RingElement right):
         r"""
         Returns self * right, where right is a rational number.
```


I am not quite sure why this is;  perhaps you accidentally did not upload the updated patch?

Feel free to try again (and I'll check and review it).  Alternatively, I am also happy to fix this myself;  let me know what you prefer.

Best wishes,
Sebastian



---

archive/issue_comments_107281.json:
```json
{
    "body": "Attachment [trac-10473.patch](tarball://root/attachments/some-uuid/ticket10473/trac-10473.patch) by spancratz created at 2011-01-14 00:08:21\n\nUpdated version for 4.6.1.rc0",
    "created_at": "2011-01-14T00:08:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10420#issuecomment-107281",
    "user": "spancratz"
}
```

Attachment [trac-10473.patch](tarball://root/attachments/some-uuid/ticket10473/trac-10473.patch) by spancratz created at 2011-01-14 00:08:21

Updated version for 4.6.1.rc0



---

archive/issue_comments_107282.json:
```json
{
    "body": "Looks good!",
    "created_at": "2011-01-14T01:17:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10420#issuecomment-107282",
    "user": "aly.deines"
}
```

Looks good!



---

archive/issue_comments_107283.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-01-14T01:17:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10420#issuecomment-107283",
    "user": "aly.deines"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_107284.json:
```json
{
    "body": "The patch lacks a commit message, probably because you used `hg diff` instead of the proper `hg export tip`.  Please add a commit message (which should contain the ticket number on the first line).",
    "created_at": "2011-01-18T14:00:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10420#issuecomment-107284",
    "user": "jdemeyer"
}
```

The patch lacks a commit message, probably because you used `hg diff` instead of the proper `hg export tip`.  Please add a commit message (which should contain the ticket number on the first line).



---

archive/issue_comments_107285.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2011-01-18T14:00:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10420#issuecomment-107285",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_107286.json:
```json
{
    "body": "Attachment [trac_10473_rebased.patch](tarball://root/attachments/some-uuid/ticket10473/trac_10473_rebased.patch) by klee created at 2011-01-21 14:11:45",
    "created_at": "2011-01-21T14:11:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10420#issuecomment-107286",
    "user": "klee"
}
```

Attachment [trac_10473_rebased.patch](tarball://root/attachments/some-uuid/ticket10473/trac_10473_rebased.patch) by klee created at 2011-01-21 14:11:45



---

archive/issue_comments_107287.json:
```json
{
    "body": "The patch rebased for the latest release 4.6.1",
    "created_at": "2011-01-21T14:14:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10420#issuecomment-107287",
    "user": "klee"
}
```

The patch rebased for the latest release 4.6.1



---

archive/issue_comments_107288.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-01-21T14:14:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10420#issuecomment-107288",
    "user": "klee"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_107289.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-01-22T20:16:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10420#issuecomment-107289",
    "user": "jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_107290.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-01-25T08:15:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10420#issuecomment-107290",
    "user": "jdemeyer"
}
```

Resolution: fixed
