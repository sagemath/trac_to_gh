# Issue 20683: Changes to Unknown class

archive/issues_020683.json:
```json
{
    "body": "CC:  slelievre tmonteil vdelecroix\n\nKeywords: days78\n\nThe `Unknown` class currently evaluates to `False` when converted to a boolean. This also leads to wrong results when using the logical operators, as explained in `unknown.py`.\n\nThis ticket makes evaluating the truth value of `Unknown` with `__nonzero__` an error, meaning that logical operations must be done only with the bitwise operators. It also adapts the `UnknownClass` to add support for an `Undecidable` object, which is similar to `Unknown` but intended specifically for cases when an answer is known to be formally undecidable. This is useful for #17700.\n\nIssue created by migration from https://trac.sagemath.org/ticket/20920\n\n",
    "created_at": "2016-07-02T00:08:44Z",
    "labels": [
        "misc",
        "major",
        "PLEASE CHANGE"
    ],
    "title": "Changes to Unknown class",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20683",
    "user": "eviatarbach"
}
```
CC:  slelievre tmonteil vdelecroix

Keywords: days78

The `Unknown` class currently evaluates to `False` when converted to a boolean. This also leads to wrong results when using the logical operators, as explained in `unknown.py`.

This ticket makes evaluating the truth value of `Unknown` with `__nonzero__` an error, meaning that logical operations must be done only with the bitwise operators. It also adapts the `UnknownClass` to add support for an `Undecidable` object, which is similar to `Unknown` but intended specifically for cases when an answer is known to be formally undecidable. This is useful for #17700.

Issue created by migration from https://trac.sagemath.org/ticket/20920





---

archive/issue_comments_285743.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-07-02T00:12:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20683#issuecomment-285743",
    "user": "eviatarbach"
}
```

New commits:



---

archive/issue_comments_285744.json:
```json
{
    "body": "Adding a preliminary patch. Some tests fail in `orthogonal_arrays.py` and `difference_family.py` due to #20919.\n\nI changed many instances of code like:\n\n\n```\nif orthogonal_array(k, n, existence=True):\n...\n```\n\n\nto\n\n\n```\nif orthogonal_array(k, n, existence=True) == True:\n...\n```\n\n\nsince the former fails with the new `Unknown` implementation.",
    "created_at": "2016-07-02T00:17:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20683#issuecomment-285744",
    "user": "eviatarbach"
}
```

Adding a preliminary patch. Some tests fail in `orthogonal_arrays.py` and `difference_family.py` due to #20919.

I changed many instances of code like:


```
if orthogonal_array(k, n, existence=True):
...
```


to


```
if orthogonal_array(k, n, existence=True) == True:
...
```


since the former fails with the new `Unknown` implementation.



---

archive/issue_comments_285745.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2016-07-02T00:17:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20683#issuecomment-285745",
    "user": "eviatarbach"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_285746.json:
```json
{
    "body": "What is the point of an `Undecidable` class? To my mind this is completely useless.\n\n- either you have an algorithm that works sometimes (because the problem is undecidable). If an instance of this algorithm fails, then you should raise an error or possibly returns `Unknown`.\n- or you have no algorithm for a given problem and it makes no sense to write an empty Python function for that.",
    "created_at": "2016-07-02T09:09:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20683#issuecomment-285746",
    "user": "vdelecroix"
}
```

What is the point of an `Undecidable` class? To my mind this is completely useless.

- either you have an algorithm that works sometimes (because the problem is undecidable). If an instance of this algorithm fails, then you should raise an error or possibly returns `Unknown`.
- or you have no algorithm for a given problem and it makes no sense to write an empty Python function for that.



---

archive/issue_comments_285747.json:
```json
{
    "body": "`Undeciable` indicates that there is a stronger statement being made, e.g., trying to determine if two finitely presented groups are isomorphic, whereas `Unknown` simply says the algorithm (currently) cannot determine a solution.\n\nSuggestion for the implementation, did you consider using `misc.fast_methods.Singleton`, and having two classes (with a common base class). (More of a technical note, you cannot inherit `Singleton` in the base class, just the \"final\" class.)",
    "created_at": "2016-07-02T15:30:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20683#issuecomment-285747",
    "user": "tscrim"
}
```

`Undeciable` indicates that there is a stronger statement being made, e.g., trying to determine if two finitely presented groups are isomorphic, whereas `Unknown` simply says the algorithm (currently) cannot determine a solution.

Suggestion for the implementation, did you consider using `misc.fast_methods.Singleton`, and having two classes (with a common base class). (More of a technical note, you cannot inherit `Singleton` in the base class, just the "final" class.)



---

archive/issue_comments_285748.json:
```json
{
    "body": "Hi Travis,\n\nReplying to [comment:5 tscrim]:\n> `Undeciable` indicates that there is a stronger statement being made, e.g., trying to determine if two finitely presented groups are isomorphic, whereas `Unknown` simply says the algorithm (currently) cannot determine a solution.\n\nLet me try to make clearer my point. When you ask the question `are_isomorphic(G1, G2)` this has an answer: either `True` or `False`. As you said, despite the 1001 heuristics implemented, it might be that the algorithm you have does not have anything relevant to say. However, returning `Undecidable` is a complete nonsense. The problem `are_isomorphic` (**without parameters**) is undecidable but the instance `are_isomorphic(G1, G2)` is always decidable.",
    "created_at": "2016-07-02T17:06:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20683#issuecomment-285748",
    "user": "vdelecroix"
}
```

Hi Travis,

Replying to [comment:5 tscrim]:
> `Undeciable` indicates that there is a stronger statement being made, e.g., trying to determine if two finitely presented groups are isomorphic, whereas `Unknown` simply says the algorithm (currently) cannot determine a solution.

Let me try to make clearer my point. When you ask the question `are_isomorphic(G1, G2)` this has an answer: either `True` or `False`. As you said, despite the 1001 heuristics implemented, it might be that the algorithm you have does not have anything relevant to say. However, returning `Undecidable` is a complete nonsense. The problem `are_isomorphic` (**without parameters**) is undecidable but the instance `are_isomorphic(G1, G2)` is always decidable.



---

archive/issue_comments_285749.json:
```json
{
    "body": "Replying to [comment:6 vdelecroix]:\n> Replying to [comment:5 tscrim]:\n> > `Undeciable` indicates that there is a stronger statement being made, e.g., trying to determine if two finitely presented groups are isomorphic, whereas `Unknown` simply says the algorithm (currently) cannot determine a solution.\n> \n> Let me try to make clearer my point. When you ask the question `are_isomorphic(G1, G2)` this has an answer: either `True` or `False`. As you said, despite the 1001 heuristics implemented, it might be that the algorithm you have does not have anything relevant to say. However, returning `Undecidable` is a complete nonsense. The problem `are_isomorphic` (**without parameters**) is undecidable but the instance `are_isomorphic(G1, G2)` is always decidable.\n\nMy understanding is that the isomorphism problem (determining if `G1` and `G2` are isomorphic) for finitely-presented groups is undecidable. At least for the word problem (if two reduced expressions represent the same element) in a finitely-presented group, it is undecidable: https://en.wikipedia.org/wiki/Word_problem_for_groups. Heuristics in this case are usually checks to show things are not equal, e.g., checking if some of invariant is different.\n\nHowever, this is different than the case when we don't know if something is undeciable, in that there might exist some algorithm which we don't yet know of. These are often more closely tied with constructions of objects, like constructing strongly regular graphs (I believe). So I feel that having an `Undeciable` allows us to carry more information to the user that they are trying to do something that is impossible.",
    "created_at": "2016-07-02T19:55:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20683#issuecomment-285749",
    "user": "tscrim"
}
```

Replying to [comment:6 vdelecroix]:
> Replying to [comment:5 tscrim]:
> > `Undeciable` indicates that there is a stronger statement being made, e.g., trying to determine if two finitely presented groups are isomorphic, whereas `Unknown` simply says the algorithm (currently) cannot determine a solution.
> 
> Let me try to make clearer my point. When you ask the question `are_isomorphic(G1, G2)` this has an answer: either `True` or `False`. As you said, despite the 1001 heuristics implemented, it might be that the algorithm you have does not have anything relevant to say. However, returning `Undecidable` is a complete nonsense. The problem `are_isomorphic` (**without parameters**) is undecidable but the instance `are_isomorphic(G1, G2)` is always decidable.

My understanding is that the isomorphism problem (determining if `G1` and `G2` are isomorphic) for finitely-presented groups is undecidable. At least for the word problem (if two reduced expressions represent the same element) in a finitely-presented group, it is undecidable: https://en.wikipedia.org/wiki/Word_problem_for_groups. Heuristics in this case are usually checks to show things are not equal, e.g., checking if some of invariant is different.

However, this is different than the case when we don't know if something is undeciable, in that there might exist some algorithm which we don't yet know of. These are often more closely tied with constructions of objects, like constructing strongly regular graphs (I believe). So I feel that having an `Undeciable` allows us to carry more information to the user that they are trying to do something that is impossible.



---

archive/issue_comments_285750.json:
```json
{
    "body": "Ah yes, I see vdelecroix's point.\n\nIt does seem that it would not be too useful to let the user know that the general problem is undecidable given an instance of it that the algorithm is not able to solve. If we made use of [Richardson's theorem](https://en.wikipedia.org/wiki/Richardson%27s_theorem), for example, to return `Undecidable` for testing equality for a certain class of symbolic expressions, we could confuse the user into believing a certain problem was \"impossible\" even when a trivial heuristic solution exists.\n\nPerhaps information on undecidability of a problem should be left to documentation?",
    "created_at": "2016-07-02T21:58:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20683#issuecomment-285750",
    "user": "eviatarbach"
}
```

Ah yes, I see vdelecroix's point.

It does seem that it would not be too useful to let the user know that the general problem is undecidable given an instance of it that the algorithm is not able to solve. If we made use of [Richardson's theorem](https://en.wikipedia.org/wiki/Richardson%27s_theorem), for example, to return `Undecidable` for testing equality for a certain class of symbolic expressions, we could confuse the user into believing a certain problem was "impossible" even when a trivial heuristic solution exists.

Perhaps information on undecidability of a problem should be left to documentation?



---

archive/issue_comments_285751.json:
```json
{
    "body": "Oh, and good idea on using the `Singleton` class, I didn't know about it.",
    "created_at": "2016-07-02T22:03:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20683#issuecomment-285751",
    "user": "eviatarbach"
}
```

Oh, and good idea on using the `Singleton` class, I didn't know about it.



---

archive/issue_comments_285752.json:
```json
{
    "body": "Replying to [comment:8 eviatarbach]:\n> Ah yes, I see vdelecroix's point.\n> \n> It does seem that it would not be too useful to let the user know that the general problem is undecidable given an instance of it that the algorithm is not able to solve. If we made use of [Richardson's theorem](https://en.wikipedia.org/wiki/Richardson%27s_theorem), for example, to return `Undecidable` for testing equality for a certain class of symbolic expressions, we could confuse the user into believing a certain problem was \"impossible\" even when a trivial heuristic solution exists.\n> \n> Perhaps information on undecidability of a problem should be left to documentation?\n\nHaving this in the documentation looks like a good idea to me!",
    "created_at": "2016-07-03T11:03:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20683#issuecomment-285752",
    "user": "vdelecroix"
}
```

Replying to [comment:8 eviatarbach]:
> Ah yes, I see vdelecroix's point.
> 
> It does seem that it would not be too useful to let the user know that the general problem is undecidable given an instance of it that the algorithm is not able to solve. If we made use of [Richardson's theorem](https://en.wikipedia.org/wiki/Richardson%27s_theorem), for example, to return `Undecidable` for testing equality for a certain class of symbolic expressions, we could confuse the user into believing a certain problem was "impossible" even when a trivial heuristic solution exists.
> 
> Perhaps information on undecidability of a problem should be left to documentation?

Having this in the documentation looks like a good idea to me!



---

archive/issue_comments_285753.json:
```json
{
    "body": "Works for me too.",
    "created_at": "2016-07-03T15:20:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20683#issuecomment-285753",
    "user": "tscrim"
}
```

Works for me too.
