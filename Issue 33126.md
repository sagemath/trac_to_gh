# Issue 33126: (Too) long doctest in sage/matrix/matrix_integer_dense.pyx

Issue created by migration from https://trac.sagemath.org/ticket/33363

Original creator: mjo

Original creation time: 2022-02-17 02:56:16

This test,


```
sage: m = random_matrix(ZZ, 100, 100, x=-1000, y=1000, density=.1)  
sage: m.parent()                                                    
Full MatrixSpace of 100 by 100 dense matrices over Integer Ring     
sage: H, U = m.hermite_form(algorithm="flint", transformation=True)  # long time
```


usually finishes immediately, often takes a few minutes, and rarely (if you're unlucky) takes ~25 minutes. Unless the `100` is imporant, we should probably decrease the size of this example down to, say, `10`.


---

Comment by mjo created at 2022-02-26 13:24:59

I thought this was due to bad luck with the density, but that's not the case, even with `density=1` this test usually completes quickly.


---

Comment by mjo created at 2022-02-26 13:25:29

New commits:


---

Comment by mjo created at 2022-02-26 13:25:29

Changing status from new to needs_review.


---

Comment by mjo created at 2022-02-26 15:01:19

Follow-up in #33418 if someone wants to investigate one of the slow examples.


---

Comment by tscrim created at 2022-02-27 00:44:08

I am good with lowering the dimension as I don't see any reason it needs to be relatively high (I always get a full rank matrix). However, I think we should keep the density fairly low as I suspect this test is meant to cover the more sparse matrices.


---

Comment by git created at 2022-02-27 12:34:19

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2022-02-27 12:35:16

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mjo created at 2022-02-27 12:36:38

Thanks, the change in density was unintentional. I tried it while testing but thought I put it back to 0.1.


---

Comment by tscrim created at 2022-02-28 04:01:40

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2022-02-28 04:01:40

Thank you.


---

Comment by vbraun created at 2022-03-01 21:31:33

Resolution: fixed
