# Issue 20365: MixedIntegerLinearProgram.gen() does not do anything useful

Issue created by migration from https://trac.sagemath.org/ticket/20602

Original creator: mkoeppe

Original creation time: 2016-05-13 07:51:53

CC:  nbruin dimpase vdelecroix jdemeyer chapoton novoselt

Keywords: lp

As observed in the comments in #20461:


```
sage: mip = MixedIntegerLinearProgram(solver='GLPK')
sage: mip.gen(0)           ### Names a variable, but does not create it in the backend
x_0
sage: mip.number_of_variables()
0
sage: mip[0]                  ### This now creates a variable. It prints the same as the result of gen(0), but is different.
x_0
sage: mip.get_values(mip.gen(0))
[...]
TypeError: Not a MIPVariable: x_0
sage: mip.is_real(mip.gen(0))
[...]
KeyError: x_0
sage: mip.is_real(mip[0])
True
```



---

Comment by mkoeppe created at 2016-06-27 01:41:17

New commits:


---

Comment by mkoeppe created at 2016-06-27 01:41:17

Changing status from new to needs_review.


---

Comment by novoselt created at 2016-06-27 02:45:40

If the old methods were indeed always broken and could not be used for anything useful, I say - just delete (or fix) them instead of deprecating...


---

Comment by mkoeppe created at 2016-06-27 04:34:11

It's possible that there's some user code around that uses these methods as part of a workaround for the many bugs that had to be fixed in `MixedIntegerLinearProgram` (see #20302 for a list). That's why I wanted to go the deprecation route with these methods.


---

Comment by chapoton created at 2016-06-27 15:36:21

doc does not build + failing doctests, see patchbot report

```
OSError: [numerical] docstring of sage.numerical.mip:115:
WARNING: Inline interpreted text or phrase reference start-string
without end-string.
```



---

Comment by git created at 2016-06-27 20:58:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2016-06-28 06:02:57

Still 2 failing doctests


---

Comment by git created at 2016-07-07 10:30:32

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mkoeppe created at 2016-07-07 10:33:41

I've changed the doctests to no longer use the deprecated methods.
While doing this, I noticed that `LinearTensor` had some doctests that were copied from `LinearFunction` and were not testing the methods; and one of the methods needed fixing; done.


---

Comment by mkoeppe created at 2016-07-11 20:28:20

ready for review.


---

Comment by dimpase created at 2016-07-11 21:16:03

patchbots report nonsense; errors in a line that does not exist in the file `src/sage/coding/guava.py`. How can this happen, I have no clue.


---

Comment by chapoton created at 2016-07-12 06:15:45

Replying to [comment:13 dimpase]:
> patchbots report nonsense; errors in a line that does not exist in the file `src/sage/coding/guava.py`. How can this happen, I have no clue.

The patchbot report was for 7.3.b6, and there was a real issue with guava, which has since
been solved. I am launching my own bot on the ticket, but this bot has its own fake failures for the moment (solved in the next beta).


---

Comment by chapoton created at 2016-07-13 18:57:43

patchbot is green (the 4 failures are not related to this ticket)


---

Comment by dimpase created at 2016-07-15 12:03:50

OK, looks good.


---

Comment by dimpase created at 2016-07-15 12:03:50

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2016-07-15 12:28:37

Replying to [comment:17 mkoeppe]:

oh, right...


---

Comment by vbraun created at 2016-07-16 20:06:42

Resolution: fixed
