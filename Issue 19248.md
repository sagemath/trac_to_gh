# Issue 19248: Legible legends

Issue created by migration from https://trac.sagemath.org/ticket/19485

Original creator: mjo

Original creation time: 2015-10-27 13:08:41

Keywords: beginner

The default "legend options" are empty, but this defaults everywhere to a gray legend with black text. This is difficult to read, especially when the result is printed (journal, thesis, etc.) or projected (as in a presentation).

Black-on-white is much better, and a drop shadow helps the legend stand out without affecting the text within.



---

Attachment

Example legend (current defaults)


---

Comment by mjo created at 2015-10-27 13:11:13

New commits:


---

Comment by mjo created at 2015-10-27 13:11:13

Changing status from new to needs_review.


---

Attachment

Example legend (new defaults)


---

Comment by kcrisman created at 2015-10-27 13:52:34

I don't really care _that_ much, but I do think that the drop-shadow maybe shouldn't be a default.  At least according to a lot of design stuff I read at some point about the equivalent CSS thing in web pages.  Do you think a much lighter gray would work better?  Maybe the white might not distinguish enough between the stuff and the legend (sort of a random box).

But _really_ I think that the matplotlib defaults might be the wisest to check, or see what competitor X does for some value(s) of X.  Then it's not so much bikeshedding as seeing what standard (if not to say best, since it might not be best!) practice is.  I'd be reluctant to change it without at least a few people who use this fairly regularly saying changing the default is a good idea - otherwise you can just change YOUR defaults, if I recall correctly.

(Thanks for including the pics, by the way.)


---

Comment by mjo created at 2015-10-27 14:16:10

Replying to [comment:2 kcrisman]:
> I don't really care _that_ much, but I do think that the drop-shadow maybe shouldn't be a default.

It feels a little weird "enabling" something by default, but what it came down to for me is that it just looks better with the drop shadow than without. I realized that I was thinking about making it look worse just so a bit could be turned off.


> At least according to a lot of design stuff I read at some point about the equivalent CSS thing in web pages.

Creating drop shadows with CSS was a nightmare for other reasons. The standard way didn't work, and each browser had its own "beta" implementation (none of which agreed), and as usual, nothing worked in MSIE.

I do understand that adding bling bling should be done with care, but hopefully people agree that the drop shadow is unobtrusive and creates a nice contrast.


> Do you think a much lighter gray would work better?  Maybe the white might not distinguish enough between the stuff and the legend (sort of a random box).

Yeah, that's why I enabled the drop shadow by default. Anything darker than white makes the text harder to read, and "light gray" prints terribly.


> otherwise you can just change YOUR defaults, if I recall correctly.

It's really hard! But that argument works against me if somebody really likes the gray. This was the best I could come up with:


```
plot_impl = sage.plot.plot._plot

def mjo_plot(*args, **kwargs):
    """
    Replacement for the default plot function.

     - If there's a legend, set the background color to 'white' and
       give it a drop shadow.

    """
    default_legend_opts = { 'back_color': 'white',
                            'shadow': True }

    p = plot_impl(*args, **kwargs)
    p.set_legend_options(**default_legend_opts)

    return p

sage.plot.plot._plot = mjo_plot
```


You need to do the same for `list_plot` and all of the graphics primitives, too.


---

Comment by kcrisman created at 2015-10-27 14:21:20

Oh, interesting; I figured that `sage.plot.plot.DEFAULT_OPTIONS` or some such dictionary would be a sufficient incantation in a `init.sage` file.  That certainly is a problem, in that event.


---

Comment by jmantysalo created at 2015-10-29 18:49:33

I like this suggestion. It seems better than current default.


---

Comment by jmantysalo created at 2015-11-07 14:23:39

Passed tests, and the code seems to have no errors.


---

Comment by jmantysalo created at 2015-11-07 14:23:56

Changing status from needs_review to positive_review.


---

Comment by kcrisman created at 2015-11-08 01:46:21

Changing status from positive_review to needs_info.


---

Comment by kcrisman created at 2015-11-08 01:46:21

I would suggest at least putting how to get the previous behavior back for those who would want it.


---

Comment by mjo created at 2015-11-08 02:19:02

Replying to [comment:8 kcrisman]:
> I would suggest at least putting how to get the previous behavior back for those who would want it.

Put it where?

The old settings were equivalent to,


```
sage: p = plot(sin(x), legend_label='$\sin(x)$')
sage: p.set_legend_options(back_color=(0.9,0.9,0.9), shadow=False) # option 1
sage: p.show(legend_options={'back_color': (0.9,0.9,0.9), 'shadow': False}) # option 2
```


but there's no easy way to change the behavior wholesale. In comment:3 I showed how I was able to do it for `plot`, but you would also have to do it for `list_plot`, `line`, `circle`, etc.


---

Comment by kcrisman created at 2015-11-08 02:32:56

I think that is pretty good as an example to put in the main plot documentation and the show documentation, something like "if you want a white background without shadow, do this..."


---

Comment by git created at 2015-11-08 19:18:52

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mjo created at 2015-11-08 19:20:26

Changing status from needs_info to needs_review.


---

Comment by mjo created at 2015-11-08 19:20:26

Do you think that's sufficient?

I would like it if this were easier to change globally, but given that it isn't, I do think this new style is an improvement.


---

Comment by jmantysalo created at 2015-11-08 19:43:35

Very minor thing, but I would like more "Prior to Sage version 6.10 - -" instead of trac number.


---

Comment by mjo created at 2015-11-08 21:41:31

Replying to [comment:13 jmantysalo]:
> Very minor thing, but I would like more "Prior to Sage version 6.10 - -" instead of trac number.

Can you get Volker to promise to merge it for 6.10? =)


---

Comment by jmantysalo created at 2015-11-09 05:27:44

Replying to [comment:14 mjo]:
> Replying to [comment:13 jmantysalo]:
> > Very minor thing, but I would like more "Prior to Sage version 6.10 - -" instead of trac number.
> 
> Can you get Volker to promise to merge it for 6.10? =)

At least we have plenty of time for that, as we are now at beta 3.

As the patch: For me this could be positive_review, but let kcrisman to say if the documentation is good enought.


---

Comment by kcrisman created at 2015-11-09 17:49:45

I'm fine with it.  Don't complain if people find the new behavior too vexing :)


---

Comment by jmantysalo created at 2015-11-09 18:52:24

Changing status from needs_review to positive_review.


---

Comment by jmantysalo created at 2015-11-09 18:52:24

Replying to [comment:16 kcrisman]:
> I'm fine with it.  Don't complain if people find the new behavior too vexing :)

So let's mark this as positive review.


---

Comment by vbraun created at 2015-11-10 14:00:30

Resolution: fixed
