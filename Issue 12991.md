# Issue 12991: E.minimal_model() crashes with large coefficients.

Issue created by migration from https://trac.sagemath.org/ticket/13163

Original creator: weigandt

Original creation time: 2012-06-25 18:04:12

Assignee: cremona

Keywords: minimal model

This code


```
E=EllipticCurve([4382696457564794691603442338788106497, 28, 3992, 16777216, 298])
E.minimal_model()
```


Spits out this error:


```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "_sage_input_23.py", line 10, in <module>
    exec compile(u'open("___code___.py","w").write("# -*- coding: utf-8 -*-\\n" + _support_.preparse_worksheet_cell(base64.b64decode("RT1FbGxpcHRpY0N1cnZlKFs0MzgyNjk2NDU3NTY0Nzk0NjkxNjAzNDQyMzM4Nzg4MTA2NDk3LCAyOCwgMzk5MiwgMTY3NzcyMTYsIDI5OF0pCkUubWluaW1hbF9tb2RlbCgp"),globals())+"\\n"); execfile(os.path.abspath("___code___.py"))
  File "", line 1, in <module>
    
  File "/tmp/tmpQWTtgb/___code___.py", line 4, in <module>
    exec compile(u'E.minimal_model()
  File "", line 1, in <module>
    
  File "/sagenb/sage_install/sage-5.0-boxen-x86_64-Linux/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 2552, in minimal_model
    F = self.pari_mincurve()
  File "/sagenb/sage_install/sage-5.0-boxen-x86_64-Linux/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 713, in pari_mincurve
    e = self.pari_curve(prec)
  File "/sagenb/sage_install/sage-5.0-boxen-x86_64-Linux/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 664, in pari_curve
    self._pari_curve[prec] = pari(list(self.a_invariants())).ellinit(precision=prec)
  File "gen.pyx", line 10416, in sage.libs.pari.gen._pari_trap (sage/libs/pari/gen.c:49843)
sage.libs.pari.gen.PariError: precision too low (10)
```


It looks like the precision needs to be increased when such a large curve is fed to PARI's minimal model algorithm.


---

Comment by jdemeyer created at 2014-01-09 21:27:48

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2014-01-09 21:27:48

New commits:


---

Comment by cremona created at 2014-01-11 16:01:30

I think I might have been the person who first implemented the variable precision for pari curve construction, and did not do a perfect job.  This looks pretty good to me.


---

Comment by cremona created at 2014-01-11 16:01:30

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-01-16 05:10:55

Resolution: fixed
