# Issue 17313: sorted variables in multivariate polynomial ring wrong order

archive/issues_017313.json:
```json
{
    "body": "We have\n\n```\nsage: R.<a,b> = QQ[]\nsage: sorted([a,b])\n[b, a]\n```\n\nwhich looks weird to me and is not what one would expect.\n\nThis is also inconsistent with\n\n```\nsage: var('a, b')\n(a, b)\nsage: sorted([a,b])\n[a, b]\n```\n\n(but in this case the ordering seems always to be alphabetically.)\n\nHowever, in the multivariate polynomial ring this ordering depends on the definition:\n\n```\nsage: R.<b,a> = QQ[]\nsage: sorted([a,b])\n[a, b]\n```\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/17550\n\n",
    "created_at": "2014-12-26T12:43:45Z",
    "labels": [
        "component: algebra",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "sorted variables in multivariate polynomial ring wrong order",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17313",
    "user": "https://github.com/dkrenn"
}
```
We have

```
sage: R.<a,b> = QQ[]
sage: sorted([a,b])
[b, a]
```

which looks weird to me and is not what one would expect.

This is also inconsistent with

```
sage: var('a, b')
(a, b)
sage: sorted([a,b])
[a, b]
```

(but in this case the ordering seems always to be alphabetically.)

However, in the multivariate polynomial ring this ordering depends on the definition:

```
sage: R.<b,a> = QQ[]
sage: sorted([a,b])
[a, b]
```



Issue created by migration from https://trac.sagemath.org/ticket/17550





---

archive/issue_comments_230326.json:
```json
{
    "body": "Still there in 6.6",
    "created_at": "2015-04-16T21:22:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17313",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17313#issuecomment-230326",
    "user": "https://github.com/dkrenn"
}
```

Still there in 6.6



---

archive/issue_comments_230327.json:
```json
{
    "body": "Polynomial rings have a monomial order which should affect how monomials (and hence terms) compare:\n\n```\nsage: A.<a,b>=PolynomialRing(Rationals(),order=\"lex\")\nsage: sorted([a^i*b^j for i in [0..2] for j in [0..2]])\n[1, b, b^2, a, a*b, a*b^2, a^2, a^2*b, a^2*b^2]\nsage: A.<a,b>=PolynomialRing(Rationals(),order=\"deglex\")\nsage: sorted([a^i*b^j for i in [0..2] for j in [0..2]])\n[1, b, a, b^2, a*b, a^2, a*b^2, a^2*b, a^2*b^2]\nsage: A.<a,b>=PolynomialRing(Rationals(),order=\"degrevlex\")\nsage: sorted([a^i*b^j for i in [0..2] for j in [0..2]])\n[1, b, a, b^2, a*b, a^2, a*b^2, a^2*b, a^2*b^2]\n```\n",
    "created_at": "2015-04-16T21:34:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17313",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17313#issuecomment-230327",
    "user": "https://github.com/nbruin"
}
```

Polynomial rings have a monomial order which should affect how monomials (and hence terms) compare:

```
sage: A.<a,b>=PolynomialRing(Rationals(),order="lex")
sage: sorted([a^i*b^j for i in [0..2] for j in [0..2]])
[1, b, b^2, a, a*b, a*b^2, a^2, a^2*b, a^2*b^2]
sage: A.<a,b>=PolynomialRing(Rationals(),order="deglex")
sage: sorted([a^i*b^j for i in [0..2] for j in [0..2]])
[1, b, a, b^2, a*b, a^2, a*b^2, a^2*b, a^2*b^2]
sage: A.<a,b>=PolynomialRing(Rationals(),order="degrevlex")
sage: sorted([a^i*b^j for i in [0..2] for j in [0..2]])
[1, b, a, b^2, a*b, a^2, a*b^2, a^2*b, a^2*b^2]
```




---

archive/issue_events_050401.json:
```json
{
    "actor": "https://github.com/lftabera",
    "created_at": "2015-06-05T07:12:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17313",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17313#event-50401"
}
```



---

archive/issue_comments_230328.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-06-05T07:12:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17313",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17313#issuecomment-230328",
    "user": "https://github.com/lftabera"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_230329.json:
```json
{
    "body": "By default sage uses 'degrevlex' for term orders. This is somehow standard in multivariate polynomial rings. I would not change this default. If you want a>b I suggest you to use 'deglex' term order instead.\n\nI propose to resolve the ticket as wontfix.",
    "created_at": "2015-06-05T07:12:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17313",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17313#issuecomment-230329",
    "user": "https://github.com/lftabera"
}
```

By default sage uses 'degrevlex' for term orders. This is somehow standard in multivariate polynomial rings. I would not change this default. If you want a>b I suggest you to use 'deglex' term order instead.

I propose to resolve the ticket as wontfix.



---

archive/issue_comments_230330.json:
```json
{
    "body": "Replying to [comment:3 lftabera]:\n> By default sage uses 'degrevlex' for term orders. This is somehow standard in multivariate polynomial rings. I would not change this default. If you want a>b I suggest you to use 'deglex' term order instead.\n> \n> I propose to resolve the ticket as wontfix.\n\nI agree with you that this is related to the term orders. Yet, the order on the variables themselves doesn't change between \"degrevlex\" and \"deglex\". This is due to the fact that there are two distinct changes between these two orders.",
    "created_at": "2015-06-05T14:03:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17313",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17313#issuecomment-230330",
    "user": "https://github.com/bgrenet"
}
```

Replying to [comment:3 lftabera]:
> By default sage uses 'degrevlex' for term orders. This is somehow standard in multivariate polynomial rings. I would not change this default. If you want a>b I suggest you to use 'deglex' term order instead.
> 
> I propose to resolve the ticket as wontfix.

I agree with you that this is related to the term orders. Yet, the order on the variables themselves doesn't change between "degrevlex" and "deglex". This is due to the fact that there are two distinct changes between these two orders.



---

archive/issue_comments_230331.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-06-05T14:03:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17313",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17313#issuecomment-230331",
    "user": "https://github.com/bgrenet"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_230332.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2015-06-06T14:24:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17313",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17313#issuecomment-230332",
    "user": "https://github.com/dkrenn"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_230333.json:
```json
{
    "body": "Replying to [comment:2 nbruin]:\n> Polynomial rings have a monomial order which should affect how monomials (and hence terms) compare:\n> {{{\n> sage: A.<a,b>=PolynomialRing(Rationals(),order=\"lex\")\n> sage: sorted([a<sup>i*b</sup>j for i in [0..2] for j in [0..2]])\n> [1, b, b^2, a, a*b, a*b^2, a^2, a^2*b, a<sup>2*b</sup>2]\n> sage: A.<a,b>=PolynomialRing(Rationals(),order=\"deglex\")\n> sage: sorted([a<sup>i*b</sup>j for i in [0..2] for j in [0..2]])\n> [1, b, a, b^2, a*b, a^2, a*b^2, a^2*b, a<sup>2*b</sup>2]\n> sage: A.<a,b>=PolynomialRing(Rationals(),order=\"degrevlex\")\n> sage: sorted([a<sup>i*b</sup>j for i in [0..2] for j in [0..2]])\n> [1, b, a, b^2, a*b, a^2, a*b^2, a^2*b, a<sup>2*b</sup>2]\n> }}}\n\nI understand that the original posted \"problem\" is not one, since we use \"degrevlex\", but using \"lex\" or \"deglex\" the output of the lines above should definitely start with `[1, a, ...]`.",
    "created_at": "2015-06-06T14:24:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17313",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17313#issuecomment-230333",
    "user": "https://github.com/dkrenn"
}
```

Replying to [comment:2 nbruin]:
> Polynomial rings have a monomial order which should affect how monomials (and hence terms) compare:
> {{{
> sage: A.<a,b>=PolynomialRing(Rationals(),order="lex")
> sage: sorted([a<sup>i*b</sup>j for i in [0..2] for j in [0..2]])
> [1, b, b^2, a, a*b, a*b^2, a^2, a^2*b, a<sup>2*b</sup>2]
> sage: A.<a,b>=PolynomialRing(Rationals(),order="deglex")
> sage: sorted([a<sup>i*b</sup>j for i in [0..2] for j in [0..2]])
> [1, b, a, b^2, a*b, a^2, a*b^2, a^2*b, a<sup>2*b</sup>2]
> sage: A.<a,b>=PolynomialRing(Rationals(),order="degrevlex")
> sage: sorted([a<sup>i*b</sup>j for i in [0..2] for j in [0..2]])
> [1, b, a, b^2, a*b, a^2, a*b^2, a^2*b, a<sup>2*b</sup>2]
> }}}

I understand that the original posted "problem" is not one, since we use "degrevlex", but using "lex" or "deglex" the output of the lines above should definitely start with `[1, a, ...]`.



---

archive/issue_comments_230334.json:
```json
{
    "body": "Replying to [comment:3 lftabera]:\n> By default sage uses 'degrevlex' for term orders. This is somehow standard in multivariate polynomial rings. I would not change this default. If you want a>b I suggest you to use 'deglex' term order instead.\n\nUnderstood.\n\n> I propose to resolve the ticket as wontfix.\n\nTo get something out of it, e should at least mention this in the docstrings more explicitly.",
    "created_at": "2015-06-06T14:25:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17313",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17313#issuecomment-230334",
    "user": "https://github.com/dkrenn"
}
```

Replying to [comment:3 lftabera]:
> By default sage uses 'degrevlex' for term orders. This is somehow standard in multivariate polynomial rings. I would not change this default. If you want a>b I suggest you to use 'deglex' term order instead.

Understood.

> I propose to resolve the ticket as wontfix.

To get something out of it, e should at least mention this in the docstrings more explicitly.



---

archive/issue_comments_230335.json:
```json
{
    "body": "Replying to [comment:4 bruno]:\n> [...] Yet, the order on the variables themselves doesn't change between \"degrevlex\" and \"deglex\". This is due to the fact that there are two distinct changes between these two orders.\n\nWhat do you mean by this? This should (IMHO) change...",
    "created_at": "2015-06-06T14:26:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17313",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17313#issuecomment-230335",
    "user": "https://github.com/dkrenn"
}
```

Replying to [comment:4 bruno]:
> [...] Yet, the order on the variables themselves doesn't change between "degrevlex" and "deglex". This is due to the fact that there are two distinct changes between these two orders.

What do you mean by this? This should (IMHO) change...



---

archive/issue_comments_230336.json:
```json
{
    "body": "Replying to [comment:7 dkrenn]:\n> Replying to [comment:4 bruno]:\n> > [...] Yet, the order on the variables themselves doesn't change between \"degrevlex\" and \"deglex\". This is due to the fact that there are two distinct changes between these two orders.\n> \n> What do you mean by this? This should (IMHO) change...\n\nThis is described in the reference manual http://doc.sagemath.org/html/en/reference/polynomial_rings/sage/rings/polynomial/term_order.html. The \"two changes\" I mentioned are the fact that in \"degrevlex\" one considers the ***last** variable whose exponent is **larger*** while in \"deglex\" one considers the ***first** variable whose exponent is **smaller***. Thus, if you have as first variable `a` and second variable `b`, the comparison between the two monomials `a` and `b` is:\n* degrevlex: `a > b` since both monomials have degree `1` and `b` is the last variable whose exponent is smaller in the monomial `a` (0) than in the monomial `b` (1);\n* deglex: `a > b` since both monomials have degree `1` and `a` is the first variable whose exponent is larger in the monomial `a` (1) than in the monomial `b` (0).\n\nNote that, unless I make a mistake, all orders defined in SageMath satisfy `a > b`. \n\nI do not understand what you mean by \"This should change\". The way the orders are defined in SageMath seems consistent with the literature and the other softwares.",
    "created_at": "2015-06-08T09:15:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17313",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17313#issuecomment-230336",
    "user": "https://github.com/bgrenet"
}
```

Replying to [comment:7 dkrenn]:
> Replying to [comment:4 bruno]:
> > [...] Yet, the order on the variables themselves doesn't change between "degrevlex" and "deglex". This is due to the fact that there are two distinct changes between these two orders.
> 
> What do you mean by this? This should (IMHO) change...

This is described in the reference manual http://doc.sagemath.org/html/en/reference/polynomial_rings/sage/rings/polynomial/term_order.html. The "two changes" I mentioned are the fact that in "degrevlex" one considers the ***last** variable whose exponent is **larger*** while in "deglex" one considers the ***first** variable whose exponent is **smaller***. Thus, if you have as first variable `a` and second variable `b`, the comparison between the two monomials `a` and `b` is:
* degrevlex: `a > b` since both monomials have degree `1` and `b` is the last variable whose exponent is smaller in the monomial `a` (0) than in the monomial `b` (1);
* deglex: `a > b` since both monomials have degree `1` and `a` is the first variable whose exponent is larger in the monomial `a` (1) than in the monomial `b` (0).

Note that, unless I make a mistake, all orders defined in SageMath satisfy `a > b`. 

I do not understand what you mean by "This should change". The way the orders are defined in SageMath seems consistent with the literature and the other softwares.



---

archive/issue_comments_230337.json:
```json
{
    "body": "Changing status from needs_info to positive_review.",
    "created_at": "2017-07-25T06:30:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17313",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17313#issuecomment-230337",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_info to positive_review.



---

archive/issue_comments_230338.json:
```json
{
    "body": "Let us close this as invalid.",
    "created_at": "2017-07-25T06:30:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17313",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17313#issuecomment-230338",
    "user": "https://github.com/fchapoton"
}
```

Let us close this as invalid.



---

archive/issue_events_050402.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-12T08:23:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17313",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17313#event-50402"
}
```



---

archive/issue_comments_230339.json:
```json
{
    "body": "Resolution: wontfix",
    "created_at": "2017-12-12T08:23:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17313",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17313#issuecomment-230339",
    "user": "https://github.com/embray"
}
```

Resolution: wontfix
