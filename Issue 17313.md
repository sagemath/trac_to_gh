# Issue 17313: sorted variables in multivariate polynomial ring wrong order

Issue created by migration from https://trac.sagemath.org/ticket/17550

Original creator: dkrenn

Original creation time: 2014-12-26 12:43:45

We have

```
sage: R.<a,b> = QQ[]
sage: sorted([a,b])
[b, a]
```

which looks weird to me and is not what one would expect.

This is also inconsistent with

```
sage: var('a, b')
(a, b)
sage: sorted([a,b])
[a, b]
```

(but in this case the ordering seems always to be alphabetically.)

However, in the multivariate polynomial ring this ordering depends on the definition:

```
sage: R.<b,a> = QQ[]
sage: sorted([a,b])
[a, b]
```




---

Comment by dkrenn created at 2015-04-16 21:22:20

Still there in 6.6


---

Comment by nbruin created at 2015-04-16 21:34:01

Polynomial rings have a monomial order which should affect how monomials (and hence terms) compare:

```
sage: A.<a,b>=PolynomialRing(Rationals(),order="lex")
sage: sorted([a^i*b^j for i in [0..2] for j in [0..2]])
[1, b, b^2, a, a*b, a*b^2, a^2, a^2*b, a^2*b^2]
sage: A.<a,b>=PolynomialRing(Rationals(),order="deglex")
sage: sorted([a^i*b^j for i in [0..2] for j in [0..2]])
[1, b, a, b^2, a*b, a^2, a*b^2, a^2*b, a^2*b^2]
sage: A.<a,b>=PolynomialRing(Rationals(),order="degrevlex")
sage: sorted([a^i*b^j for i in [0..2] for j in [0..2]])
[1, b, a, b^2, a*b, a^2, a*b^2, a^2*b, a^2*b^2]
```



---

Comment by lftabera created at 2015-06-05 07:12:14

Changing status from new to needs_review.


---

Comment by lftabera created at 2015-06-05 07:12:14

By default sage uses 'degrevlex' for term orders. This is somehow standard in multivariate polynomial rings. I would not change this default. If you want a>b I suggest you to use 'deglex' term order instead.

I propose to resolve the ticket as wontfix.


---

Comment by bruno created at 2015-06-05 14:03:14

Replying to [comment:3 lftabera]:
> By default sage uses 'degrevlex' for term orders. This is somehow standard in multivariate polynomial rings. I would not change this default. If you want a>b I suggest you to use 'deglex' term order instead.
> 
> I propose to resolve the ticket as wontfix.

I agree with you that this is related to the term orders. Yet, the order on the variables themselves doesn't change between "degrevlex" and "deglex". This is due to the fact that there are two distinct changes between these two orders.


---

Comment by bruno created at 2015-06-05 14:03:14

Changing status from needs_review to positive_review.


---

Comment by dkrenn created at 2015-06-06 14:24:23

Changing status from positive_review to needs_info.


---

Comment by dkrenn created at 2015-06-06 14:24:23

Replying to [comment:2 nbruin]:
> Polynomial rings have a monomial order which should affect how monomials (and hence terms) compare:
> {{{
> sage: A.<a,b>=PolynomialRing(Rationals(),order="lex")
> sage: sorted([a<sup>i*b</sup>j for i in [0..2] for j in [0..2]])
> [1, b, b^2, a, a*b, a*b^2, a^2, a^2*b, a<sup>2*b</sup>2]
> sage: A.<a,b>=PolynomialRing(Rationals(),order="deglex")
> sage: sorted([a<sup>i*b</sup>j for i in [0..2] for j in [0..2]])
> [1, b, a, b^2, a*b, a^2, a*b^2, a^2*b, a<sup>2*b</sup>2]
> sage: A.<a,b>=PolynomialRing(Rationals(),order="degrevlex")
> sage: sorted([a<sup>i*b</sup>j for i in [0..2] for j in [0..2]])
> [1, b, a, b^2, a*b, a^2, a*b^2, a^2*b, a<sup>2*b</sup>2]
> }}}

I understand that the original posted "problem" is not one, since we use "degrevlex", but using "lex" or "deglex" the output of the lines above should definitely start with `[1, a, ...]`.


---

Comment by dkrenn created at 2015-06-06 14:25:37

Replying to [comment:3 lftabera]:
> By default sage uses 'degrevlex' for term orders. This is somehow standard in multivariate polynomial rings. I would not change this default. If you want a>b I suggest you to use 'deglex' term order instead.

Understood.

> I propose to resolve the ticket as wontfix.

To get something out of it, e should at least mention this in the docstrings more explicitly.


---

Comment by dkrenn created at 2015-06-06 14:26:46

Replying to [comment:4 bruno]:
> [...] Yet, the order on the variables themselves doesn't change between "degrevlex" and "deglex". This is due to the fact that there are two distinct changes between these two orders.

What do you mean by this? This should (IMHO) change...


---

Comment by bruno created at 2015-06-08 09:15:07

Replying to [comment:7 dkrenn]:
> Replying to [comment:4 bruno]:
> > [...] Yet, the order on the variables themselves doesn't change between "degrevlex" and "deglex". This is due to the fact that there are two distinct changes between these two orders.
> 
> What do you mean by this? This should (IMHO) change...

This is described in the reference manual http://doc.sagemath.org/html/en/reference/polynomial_rings/sage/rings/polynomial/term_order.html. The "two changes" I mentioned are the fact that in "degrevlex" one considers the _**last** variable whose exponent is **larger**_ while in "deglex" one considers the _**first** variable whose exponent is **smaller**_. Thus, if you have as first variable `a` and second variable `b`, the comparison between the two monomials `a` and `b` is:
    * degrevlex: `a > b` since both monomials have degree `1` and `b` is the last variable whose exponent is smaller in the monomial `a` (0) than in the monomial `b` (1);
    * deglex: `a > b` since both monomials have degree `1` and `a` is the first variable whose exponent is larger in the monomial `a` (1) than in the monomial `b` (0).

Note that, unless I make a mistake, all orders defined in SageMath satisfy `a > b`. 

I do not understand what you mean by "This should change". The way the orders are defined in SageMath seems consistent with the literature and the other softwares.


---

Comment by chapoton created at 2017-07-25 06:30:45

Changing status from needs_info to positive_review.


---

Comment by chapoton created at 2017-07-25 06:30:45

Let us close this as invalid.


---

Comment by embray created at 2017-12-12 08:23:33

Resolution: wontfix
