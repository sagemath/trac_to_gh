# Issue 10957: move notebook to flask/wsgi-based notebook

archive/issues_010957.json:
```json
{
    "body": "Assignee: jason, mpatel, was\n\nCC:  ddrake jason kcrisman mhansen rkirov timdumol iandrus strogdon\n\nThis ticket tracks the progress to move the notebook to a flask/wsgi-based notebook.\n\nRelevant threads: http://groups.google.com/group/sage-devel/browse_thread/thread/87fc4246686bc4c0\n\nRelevant code repository: https://code.google.com/r/rkirov-flask/\n\nRelevant tickets: \n* #11078 (needed to get Jmol working)\n\nIssue created by migration from https://trac.sagemath.org/ticket/11080\n\n",
    "created_at": "2011-03-29T14:09:21Z",
    "labels": [
        "notebook",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.2",
    "title": "move notebook to flask/wsgi-based notebook",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10957",
    "user": "jason"
}
```
Assignee: jason, mpatel, was

CC:  ddrake jason kcrisman mhansen rkirov timdumol iandrus strogdon

This ticket tracks the progress to move the notebook to a flask/wsgi-based notebook.

Relevant threads: http://groups.google.com/group/sage-devel/browse_thread/thread/87fc4246686bc4c0

Relevant code repository: https://code.google.com/r/rkirov-flask/

Relevant tickets: 
* #11078 (needed to get Jmol working)

Issue created by migration from https://trac.sagemath.org/ticket/11080





---

archive/issue_comments_118030.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd31\".",
    "created_at": "2011-06-16T15:58:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118030",
    "user": "gutow"
}
```

Changing keywords from "" to "sd31".



---

archive/issue_comments_118031.json:
```json
{
    "body": "removed\u00a0#11078\u00a0from list as the fix is included in the 11503 command line patch.",
    "created_at": "2011-08-03T21:13:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118031",
    "user": "gutow"
}
```

removed #11078 from list as the fix is included in the 11503 command line patch.



---

archive/issue_comments_118032.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-12-17T19:49:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118032",
    "user": "jason"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_118033.json:
```json
{
    "body": "(for future reference, after this is merged, jmol is a high priority.  These two tickets deal with these changes:\n\n* #11496 (update jmol script in local/bin to reflect move of jmol directory to local)\n* #11503 (updated spkg and paths for move of jmol directory)\n* #9238 (for reference -original Jmol enhancement ticket but heavily laden with pre-flask notebook stuff)\n\nAgain, this is only FYI and for further reference.",
    "created_at": "2011-12-17T20:32:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118033",
    "user": "jason"
}
```

(for future reference, after this is merged, jmol is a high priority.  These two tickets deal with these changes:

* #11496 (update jmol script in local/bin to reflect move of jmol directory to local)
* #11503 (updated spkg and paths for move of jmol directory)
* #9238 (for reference -original Jmol enhancement ticket but heavily laden with pre-flask notebook stuff)

Again, this is only FYI and for further reference.



---

archive/issue_comments_118034.json:
```json
{
    "body": "I get the following error when I try to apply the spkg dependencies patch.  Everything else seems to work.  I'm still checking functionality...\n\n```\napplying /home/jonathan/.sage/temp/VB_Ubuntu_11/26614/tmp_0.patch\nunable to find 'spkg/install' for patching\n1 out of 1 hunks FAILED -- saving rejects to file spkg/install.rej\nunable to find 'spkg/standard/deps' for patching\n4 out of 4 hunks FAILED -- saving rejects to file spkg/standard/deps.rej\nspkg/install: No such file or directory\nspkg/standard/deps: No such file or directory\nabort: patch failed to apply\n```\n",
    "created_at": "2011-12-18T17:43:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118034",
    "user": "gutow"
}
```

I get the following error when I try to apply the spkg dependencies patch.  Everything else seems to work.  I'm still checking functionality...

```
applying /home/jonathan/.sage/temp/VB_Ubuntu_11/26614/tmp_0.patch
unable to find 'spkg/install' for patching
1 out of 1 hunks FAILED -- saving rejects to file spkg/install.rej
unable to find 'spkg/standard/deps' for patching
4 out of 4 hunks FAILED -- saving rejects to file spkg/standard/deps.rej
spkg/install: No such file or directory
spkg/standard/deps: No such file or directory
abort: patch failed to apply
```




---

archive/issue_comments_118035.json:
```json
{
    "body": "With 4.8.alpha4, what is described here does not work.  I redid everything.  The .spkgs seem to install without error.  The patch for this ticket does not work and the notebook fails to launch with the error:\n\n```\n/home/jonathan/Documents/sage-4.8.alpha4/<ipython console> in <module>()\n\n/home/jonathan/Documents/sage-4.8.alpha4/devel/sagenb/sagenb/notebook/notebook_object.py in __call__(self, *args, **kwds)\n    202     \"\"\"\n    203     def __call__(self, *args, **kwds):\n--> 204         return self.notebook(*args, **kwds)\n    205 \n    206     notebook = run_notebook.notebook_twisted\n\n/home/jonathan/Documents/sage-4.8.alpha4/devel/sagenb/sagenb/notebook/run_notebook.py in notebook_twisted(self, directory, port, interface, address, port_tries, secure, reset, require_login, accounts, openid, server_pool, ulimit, timeout, open_viewer, sagetex_path, start_path, fork, quiet, subnets)\n    442     if open_viewer:\n    443         \"Open viewer automatically isn't fully implemented.  You have to manually open your web browser to the above URL.\"\n--> 444     return run(port)\n    445 \n    446 def get_admin_passwd():\n\n/home/jonathan/Documents/sage-4.8.alpha4/devel/sagenb/sagenb/notebook/run_notebook.py in run(port)\n    427         os.chdir(cwd)\n    428         if e == 256:\n--> 429             raise socket.error\n    430 \n    431         return True\n\n```\n",
    "created_at": "2011-12-18T17:51:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118035",
    "user": "gutow"
}
```

With 4.8.alpha4, what is described here does not work.  I redid everything.  The .spkgs seem to install without error.  The patch for this ticket does not work and the notebook fails to launch with the error:

```
/home/jonathan/Documents/sage-4.8.alpha4/<ipython console> in <module>()

/home/jonathan/Documents/sage-4.8.alpha4/devel/sagenb/sagenb/notebook/notebook_object.py in __call__(self, *args, **kwds)
    202     """
    203     def __call__(self, *args, **kwds):
--> 204         return self.notebook(*args, **kwds)
    205 
    206     notebook = run_notebook.notebook_twisted

/home/jonathan/Documents/sage-4.8.alpha4/devel/sagenb/sagenb/notebook/run_notebook.py in notebook_twisted(self, directory, port, interface, address, port_tries, secure, reset, require_login, accounts, openid, server_pool, ulimit, timeout, open_viewer, sagetex_path, start_path, fork, quiet, subnets)
    442     if open_viewer:
    443         "Open viewer automatically isn't fully implemented.  You have to manually open your web browser to the above URL."
--> 444     return run(port)
    445 
    446 def get_admin_passwd():

/home/jonathan/Documents/sage-4.8.alpha4/devel/sagenb/sagenb/notebook/run_notebook.py in run(port)
    427         os.chdir(cwd)
    428         if e == 256:
--> 429             raise socket.error
    430 
    431         return True

```




---

archive/issue_comments_118036.json:
```json
{
    "body": "It's possible that the SAGE_ROOT patch needs to be rebased to 4.8.alpha4.  Let me check.  Thanks for the test",
    "created_at": "2011-12-19T16:47:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118036",
    "user": "jason"
}
```

It's possible that the SAGE_ROOT patch needs to be rebased to 4.8.alpha4.  Let me check.  Thanks for the test



---

archive/issue_comments_118037.json:
```json
{
    "body": "Jonathan,\n\nI think the problem is that you didn't apply the patch here to the SAGE_ROOT repository.  I've updated the instructions above with explicit commands.",
    "created_at": "2011-12-19T18:46:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118037",
    "user": "jason"
}
```

Jonathan,

I think the problem is that you didn't apply the patch here to the SAGE_ROOT repository.  I've updated the instructions above with explicit commands.



---

archive/issue_comments_118038.json:
```json
{
    "body": "I'm checking now into the error you posted in your second.  It appears that there is indeed a problem with the sagenb spkg not overwriting the old notebook.",
    "created_at": "2011-12-19T18:50:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118038",
    "user": "jason"
}
```

I'm checking now into the error you posted in your second.  It appears that there is indeed a problem with the sagenb spkg not overwriting the old notebook.



---

archive/issue_comments_118039.json:
```json
{
    "body": "For future reference, here are the instructions if we had a sagenb_dependencies spkg.  DON'T USE THESE--use the instructions in the description of the ticket.\n\n\n```\ncd $SAGE_ROOT\n./sage -hg qimport http://trac.sagemath.org/sage_trac/raw-attachment/ticket/11080/trac-11080-sagenb_dependencies-spkg.patch\n./sage -hg qpush\n./sage -f http://sage.math.washington.edu/home/jason/sagenb_dependencies-20111216.spkg\n./sage -f http://sage.math.washington.edu/home/jason/twisted-11.0.0.spkg\n./sage -f http://sage.math.washington.edu/home/jason/sagenb-0.9.0.spkg\ncd devel/sage\n../../sage -hg qimport http://trac.sagemath.org/sage_trac/raw-attachment/ticket/11078/trac_11078.patch\n../../sage -hg qpush\ncd ../../\n./sage -br\n```\n",
    "created_at": "2011-12-19T21:43:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118039",
    "user": "jason"
}
```

For future reference, here are the instructions if we had a sagenb_dependencies spkg.  DON'T USE THESE--use the instructions in the description of the ticket.


```
cd $SAGE_ROOT
./sage -hg qimport http://trac.sagemath.org/sage_trac/raw-attachment/ticket/11080/trac-11080-sagenb_dependencies-spkg.patch
./sage -hg qpush
./sage -f http://sage.math.washington.edu/home/jason/sagenb_dependencies-20111216.spkg
./sage -f http://sage.math.washington.edu/home/jason/twisted-11.0.0.spkg
./sage -f http://sage.math.washington.edu/home/jason/sagenb-0.9.0.spkg
cd devel/sage
../../sage -hg qimport http://trac.sagemath.org/sage_trac/raw-attachment/ticket/11078/trac_11078.patch
../../sage -hg qpush
cd ../../
./sage -br
```




---

archive/issue_comments_118040.json:
```json
{
    "body": "OK, with the changed instructions and this explicit instruction set, I get a running sage-4.8.alpha4.  The notebook launches and everything I tried other than 3-D plotting worked in the notebook.  3-D plotting does not work because Jmol seems to be gone.  Is #11503 supposed to be included as well? That would install the new Jmol in the $SAGE_ROOT/local/shared directory rather than in the sagenb/data directory.  I note that there is no sagenb/data/jmol directory in the notebook created by this ticket, while there is in the old 4.8.alpha4 notebook.\n\nI think it's almost there.\nJonathan \nReplying to [comment:19 jason]:\n> For future reference, here are the instructions if we had a sagenb_dependencies spkg.  DON'T USE THESE--use the instructions in the description of the ticket.\n> \n> {{{\n> cd $SAGE_ROOT\n> ./sage -hg qimport http://trac.sagemath.org/sage_trac/raw-attachment/ticket/11080/trac-11080-sagenb_dependencies-spkg.patch\n> ./sage -hg qpush\n> ./sage -f http://sage.math.washington.edu/home/jason/sagenb_dependencies-20111216.spkg\n> ./sage -f http://sage.math.washington.edu/home/jason/twisted-11.0.0.spkg\n> ./sage -f http://sage.math.washington.edu/home/jason/sagenb-0.9.0.spkg\n> cd devel/sage\n> ../../sage -hg qimport http://trac.sagemath.org/sage_trac/raw-attachment/ticket/11078/trac_11078.patch\n> ../../sage -hg qpush\n> cd ../../\n> ./sage -br\n> }}}",
    "created_at": "2011-12-20T02:07:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118040",
    "user": "gutow"
}
```

OK, with the changed instructions and this explicit instruction set, I get a running sage-4.8.alpha4.  The notebook launches and everything I tried other than 3-D plotting worked in the notebook.  3-D plotting does not work because Jmol seems to be gone.  Is #11503 supposed to be included as well? That would install the new Jmol in the $SAGE_ROOT/local/shared directory rather than in the sagenb/data directory.  I note that there is no sagenb/data/jmol directory in the notebook created by this ticket, while there is in the old 4.8.alpha4 notebook.

I think it's almost there.
Jonathan 
Replying to [comment:19 jason]:
> For future reference, here are the instructions if we had a sagenb_dependencies spkg.  DON'T USE THESE--use the instructions in the description of the ticket.
> 
> {{{
> cd $SAGE_ROOT
> ./sage -hg qimport http://trac.sagemath.org/sage_trac/raw-attachment/ticket/11080/trac-11080-sagenb_dependencies-spkg.patch
> ./sage -hg qpush
> ./sage -f http://sage.math.washington.edu/home/jason/sagenb_dependencies-20111216.spkg
> ./sage -f http://sage.math.washington.edu/home/jason/twisted-11.0.0.spkg
> ./sage -f http://sage.math.washington.edu/home/jason/sagenb-0.9.0.spkg
> cd devel/sage
> ../../sage -hg qimport http://trac.sagemath.org/sage_trac/raw-attachment/ticket/11078/trac_11078.patch
> ../../sage -hg qpush
> cd ../../
> ./sage -br
> }}}



---

archive/issue_comments_118041.json:
```json
{
    "body": "Jonathan: the problem was that my spkg-making sagenb install had a symbolic link to jmol, rather than the actual directory, and the symbolic link was not followed when making the spkg.\n\nI've updated the 0.9.0 spkg (tagged as 0.9.0.rc2 in the repository google code).  Can you try again?  I just tried installing in a clean 4.8.alpha4, and 3d plots worked fine.\n\nThanks, Jason",
    "created_at": "2011-12-20T16:32:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118041",
    "user": "jason"
}
```

Jonathan: the problem was that my spkg-making sagenb install had a symbolic link to jmol, rather than the actual directory, and the symbolic link was not followed when making the spkg.

I've updated the 0.9.0 spkg (tagged as 0.9.0.rc2 in the repository google code).  Can you try again?  I just tried installing in a clean 4.8.alpha4, and 3d plots worked fine.

Thanks, Jason



---

archive/issue_comments_118042.json:
```json
{
    "body": "Jason: \u00a0I think everything is OK. \u00a0It all seemed to work on my Ubuntu Linux distro. \u00a0I would vote for a positive review, if we can get one other person to verify. \u00a0Comment...anybody using Chrome on Linux, OpenJDK/IceTea\u00a0don't play very well with Chrome and this old version of Jmol.",
    "created_at": "2011-12-21T00:48:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118042",
    "user": "gutow"
}
```

Jason:  I think everything is OK.  It all seemed to work on my Ubuntu Linux distro.  I would vote for a positive review, if we can get one other person to verify.  Comment...anybody using Chrome on Linux, OpenJDK/IceTea don't play very well with Chrome and this old version of Jmol.



---

archive/issue_comments_118043.json:
```json
{
    "body": "Thanks!  Jmol is certainly a top priority, along with mathjax, after we get this merged into sage.  Lucky for us, most of the work has already been done, so hopefully it's just rebasing the patches that are already there.",
    "created_at": "2011-12-21T01:29:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118043",
    "user": "jason"
}
```

Thanks!  Jmol is certainly a top priority, along with mathjax, after we get this merged into sage.  Lucky for us, most of the work has already been done, so hopefully it's just rebasing the patches that are already there.



---

archive/issue_comments_118044.json:
```json
{
    "body": "Deleting the dependency spkg instructions, since we aren't going that route.",
    "created_at": "2011-12-21T01:45:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118044",
    "user": "jason"
}
```

Deleting the dependency spkg instructions, since we aren't going that route.



---

archive/issue_comments_118045.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2011-12-21T03:03:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118045",
    "user": "dimpase"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_118046.json:
```json
{
    "body": "I checked that all this appears to work on MacOSX 10.6 just fine, including Jmol and text fields with LaTeX.\n\nI do not like that this build does not incorporate the [sass update](http://code.google.com/r/timdumol-flask-sagenb/source/detail?r=e06b3a6bfa47b2b0cf1c85fb43e25b61478ca7e2) by Tim Dumol in Sept. 2011\nWithout it, hacking the CSS stuff won't be possible on some platforms, at least not on MacOSX 10.6.\n\nIs it possible to merge this, and the related [readme update](http://code.google.com/r/timdumol-flask-sagenb/source/detail?r=3fdcf40d679311a3cf7a00fd2323175e509b39af), into the sagenb spkg?",
    "created_at": "2011-12-21T03:03:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118046",
    "user": "dimpase"
}
```

I checked that all this appears to work on MacOSX 10.6 just fine, including Jmol and text fields with LaTeX.

I do not like that this build does not incorporate the [sass update](http://code.google.com/r/timdumol-flask-sagenb/source/detail?r=e06b3a6bfa47b2b0cf1c85fb43e25b61478ca7e2) by Tim Dumol in Sept. 2011
Without it, hacking the CSS stuff won't be possible on some platforms, at least not on MacOSX 10.6.

Is it possible to merge this, and the related [readme update](http://code.google.com/r/timdumol-flask-sagenb/source/detail?r=3fdcf40d679311a3cf7a00fd2323175e509b39af), into the sagenb spkg?



---

archive/issue_comments_118047.json:
```json
{
    "body": "It should be easy to incorporate that.  Let me try.  I don't think I edited anything in those directories.",
    "created_at": "2011-12-21T03:09:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118047",
    "user": "jason"
}
```

It should be easy to incorporate that.  Let me try.  I don't think I edited anything in those directories.



---

archive/issue_comments_118048.json:
```json
{
    "body": "I've incorporated the sass patches, but there are some very small changes in the css, which worries me.  How much have these patches been tested?",
    "created_at": "2011-12-21T04:28:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118048",
    "user": "jason"
}
```

I've incorporated the sass patches, but there are some very small changes in the css, which worries me.  How much have these patches been tested?



---

archive/issue_comments_118049.json:
```json
{
    "body": "Replying to [comment:28 jason]:\n> I've incorporated the sass patches, but there are some very small changes in the css, which worries me.  How much have these patches been tested?\n\nThese are changes in the  generated CSS files.\nThe only changes in main.css are in the comments; these certainly can be ignored.\n\nThere are few other changes in the other css, called test_report.css.\n(I don't even know if this file is used at all, is it?)\nBut these changes are indeed very, very minor, like a different way to encode the colour, or a change of a constant from 2.0em to 2em. I worked a bit with these modified CSS files, no issues noted. IMHO it is totally safe to update.\n\n I cc this to Tim Dumol, just in case.",
    "created_at": "2011-12-21T04:51:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118049",
    "user": "dimpase"
}
```

Replying to [comment:28 jason]:
> I've incorporated the sass patches, but there are some very small changes in the css, which worries me.  How much have these patches been tested?

These are changes in the  generated CSS files.
The only changes in main.css are in the comments; these certainly can be ignored.

There are few other changes in the other css, called test_report.css.
(I don't even know if this file is used at all, is it?)
But these changes are indeed very, very minor, like a different way to encode the colour, or a change of a constant from 2.0em to 2em. I worked a bit with these modified CSS files, no issues noted. IMHO it is totally safe to update.

 I cc this to Tim Dumol, just in case.



---

archive/issue_comments_118050.json:
```json
{
    "body": "The changes made were all automated, via the `sass-convert` tool made by the developers of SASS/SCSS themselves, with the exception of the moving of the Accounts page scss to a separate partial, which was a cut-paste into a new file; thus, there shouldn't be any regressions.",
    "created_at": "2011-12-21T05:00:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118050",
    "user": "timdumol"
}
```

The changes made were all automated, via the `sass-convert` tool made by the developers of SASS/SCSS themselves, with the exception of the moving of the Accounts page scss to a separate partial, which was a cut-paste into a new file; thus, there shouldn't be any regressions.



---

archive/issue_comments_118051.json:
```json
{
    "body": "For example, line 614 of ../../../../sass/src/jquery-plugins/_ui.achtung.scss now generates this line in main.css:\n\n\n```\n.achtung .ui-icon.achtung-close-button { overflow: hidden; float: right; position: relative; top: -8px; right: -8px; cursor: pointer; background-image: url(/javascript/jqueryui/css/sage/images/ui-icons_cccccc_256x240.png); }\n```\n\n\nHowever, that background image URL doesn't exist (but the old background image URL does exist).",
    "created_at": "2011-12-21T05:23:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118051",
    "user": "jason"
}
```

For example, line 614 of ../../../../sass/src/jquery-plugins/_ui.achtung.scss now generates this line in main.css:


```
.achtung .ui-icon.achtung-close-button { overflow: hidden; float: right; position: relative; top: -8px; right: -8px; cursor: pointer; background-image: url(/javascript/jqueryui/css/sage/images/ui-icons_cccccc_256x240.png); }
```


However, that background image URL doesn't exist (but the old background image URL does exist).



---

archive/issue_comments_118052.json:
```json
{
    "body": "Replying to [comment:31 jason]:\n> For example, line 614 of ../../../../sass/src/jquery-plugins/_ui.achtung.scss now generates this line in main.css:\n> \n> {{{\n> .achtung .ui-icon.achtung-close-button { overflow: hidden; float: right; position: relative; top: -8px; right: -8px; cursor: pointer; background-image: url(/javascript/jqueryui/css/sage/images/ui-icons_cccccc_256x240.png); }\n> }}}\n> \n> However, that background image URL doesn't exist (but the old background image URL does exist).\n\nSorry about that. From what I can tell, I must have used another copy of Achtung to update the Achtung CSS, which was configured to another jQuery UI theme. I'll push a fix in a minute.",
    "created_at": "2011-12-21T05:51:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118052",
    "user": "timdumol"
}
```

Replying to [comment:31 jason]:
> For example, line 614 of ../../../../sass/src/jquery-plugins/_ui.achtung.scss now generates this line in main.css:
> 
> {{{
> .achtung .ui-icon.achtung-close-button { overflow: hidden; float: right; position: relative; top: -8px; right: -8px; cursor: pointer; background-image: url(/javascript/jqueryui/css/sage/images/ui-icons_cccccc_256x240.png); }
> }}}
> 
> However, that background image URL doesn't exist (but the old background image URL does exist).

Sorry about that. From what I can tell, I must have used another copy of Achtung to update the Achtung CSS, which was configured to another jQuery UI theme. I'll push a fix in a minute.



---

archive/issue_comments_118053.json:
```json
{
    "body": "Replying to [comment:31 jason]:\n> For example, line 614 of ../../../../sass/src/jquery-plugins/_ui.achtung.scss now generates this line in main.css:\n> \n> {{{\n> .achtung .ui-icon.achtung-close-button { overflow: hidden; float: right; position: relative; top: -8px; right: -8px; cursor: pointer; background-image: url(/javascript/jqueryui/css/sage/images/ui-icons_cccccc_256x240.png); }\n> }}}\n> \n> However, that background image URL doesn't exist (but the old background image URL does exist).\n\nmy fault that I didn't notice these on the diff. I just looked again, and this, and one more, images at the very bottom had changed filenames. The rest are completely innocent changes (comments,  #d vs #D, \"...\" vs '...').",
    "created_at": "2011-12-21T06:03:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118053",
    "user": "dimpase"
}
```

Replying to [comment:31 jason]:
> For example, line 614 of ../../../../sass/src/jquery-plugins/_ui.achtung.scss now generates this line in main.css:
> 
> {{{
> .achtung .ui-icon.achtung-close-button { overflow: hidden; float: right; position: relative; top: -8px; right: -8px; cursor: pointer; background-image: url(/javascript/jqueryui/css/sage/images/ui-icons_cccccc_256x240.png); }
> }}}
> 
> However, that background image URL doesn't exist (but the old background image URL does exist).

my fault that I didn't notice these on the diff. I just looked again, and this, and one more, images at the very bottom had changed filenames. The rest are completely innocent changes (comments,  #d vs #D, "..." vs '...').



---

archive/issue_comments_118054.json:
```json
{
    "body": "I think I just fixed it: https://github.com/sagemath/sagenb/commit/624dddb228bf3ebfdc02e161d2a5646b8c32a31f",
    "created_at": "2011-12-21T06:04:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118054",
    "user": "jason"
}
```

I think I just fixed it: https://github.com/sagemath/sagenb/commit/624dddb228bf3ebfdc02e161d2a5646b8c32a31f



---

archive/issue_comments_118055.json:
```json
{
    "body": "Replying to [comment:34 jason]:\n> I think I just fixed it: https://github.com/sagemath/sagenb/commit/624dddb228bf3ebfdc02e161d2a5646b8c32a31f\n\nYep, that should do the trick. Once again, sorry.",
    "created_at": "2011-12-21T06:05:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118055",
    "user": "timdumol"
}
```

Replying to [comment:34 jason]:
> I think I just fixed it: https://github.com/sagemath/sagenb/commit/624dddb228bf3ebfdc02e161d2a5646b8c32a31f

Yep, that should do the trick. Once again, sorry.



---

archive/issue_comments_118056.json:
```json
{
    "body": "No problem.  Things have certainly slipped by me often enough.  Okay, positive review to these patches from me too.",
    "created_at": "2011-12-21T06:10:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118056",
    "user": "jason"
}
```

No problem.  Things have certainly slipped by me often enough.  Okay, positive review to these patches from me too.



---

archive/issue_comments_118057.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2011-12-21T06:10:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118057",
    "user": "jason"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_118058.json:
```json
{
    "body": "Replying to [comment:37 jason]:\n\nOK, with these changes in the spkg, all good to go!",
    "created_at": "2011-12-21T06:32:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118058",
    "user": "dimpase"
}
```

Replying to [comment:37 jason]:

OK, with these changes in the spkg, all good to go!



---

archive/issue_comments_118059.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-12-21T06:32:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118059",
    "user": "dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_118060.json:
```json
{
    "body": "I've updated the spkg.  Can someone confirm that it still installs and has these last changes?  I also added a few changes to deal with using hg-git to mirror a git repository.\n\nI'm setting this back to needs-review so someone can give it one final +1, after all has been said and done.",
    "created_at": "2011-12-21T07:24:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118060",
    "user": "jason"
}
```

I've updated the spkg.  Can someone confirm that it still installs and has these last changes?  I also added a few changes to deal with using hg-git to mirror a git repository.

I'm setting this back to needs-review so someone can give it one final +1, after all has been said and done.



---

archive/issue_comments_118061.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2011-12-21T07:24:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118061",
    "user": "jason"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_118062.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-12-21T07:24:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118062",
    "user": "jason"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_118063.json:
```json
{
    "body": "Replying to [comment:40 jason]:\n\nthe updated sagenb-0.9.0 installs and works on MacOSX 10.6. And the sass changes are there. I do not know how to test the CSS properly, though, i.e. when these Achtung images come into play, but perhaps it's a good day and I should give it a positive review, still.",
    "created_at": "2011-12-21T09:16:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118063",
    "user": "dimpase"
}
```

Replying to [comment:40 jason]:

the updated sagenb-0.9.0 installs and works on MacOSX 10.6. And the sass changes are there. I do not know how to test the CSS properly, though, i.e. when these Achtung images come into play, but perhaps it's a good day and I should give it a positive review, still.



---

archive/issue_comments_118064.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-12-21T09:16:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118064",
    "user": "dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_118065.json:
```json
{
    "body": "I'm curious: what is the plan for 5.0?  Can I guess: finish 4.8, then merge this and the python update in 5.0alpha0?",
    "created_at": "2011-12-21T14:27:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118065",
    "user": "jason"
}
```

I'm curious: what is the plan for 5.0?  Can I guess: finish 4.8, then merge this and the python update in 5.0alpha0?



---

archive/issue_comments_118066.json:
```json
{
    "body": "Replying to [comment:44 jason]:\n> I'm curious: what is the plan for 5.0?  Can I guess: finish 4.8, then merge this and the python update in 5.0alpha0?\n\nEssentially yes.  But the dependencies of this ticket and also Python (#9958) still need review.",
    "created_at": "2011-12-21T14:47:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118066",
    "user": "jdemeyer"
}
```

Replying to [comment:44 jason]:
> I'm curious: what is the plan for 5.0?  Can I guess: finish 4.8, then merge this and the python update in 5.0alpha0?

Essentially yes.  But the dependencies of this ticket and also Python (#9958) still need review.



---

archive/issue_comments_118067.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2011-12-23T12:22:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118067",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_118068.json:
```json
{
    "body": "`SPKG.txt` and `spkg-install` should be under Mercurial control.",
    "created_at": "2011-12-23T12:22:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118068",
    "user": "jdemeyer"
}
```

`SPKG.txt` and `spkg-install` should be under Mercurial control.



---

archive/issue_comments_118069.json:
```json
{
    "body": "Please double-check that following tickets really have been merged in the new sagenb:\n* #10052\n* #10860\n* #11106\n* #11121\n* #11732\n* #11343\n* #10620\n* #10642",
    "created_at": "2011-12-23T12:31:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118069",
    "user": "jdemeyer"
}
```

Please double-check that following tickets really have been merged in the new sagenb:
* #10052
* #10860
* #11106
* #11121
* #11732
* #11343
* #10620
* #10642



---

archive/issue_comments_118070.json:
```json
{
    "body": "SPKG.txt and spkg-install *are* under version control, in the original sagenb repository.  The problem is that we then custom-make an spkg and copy those files into the spkg directory.  In other words, they are under version control in the src/sagenb/ directory.\n\nI'm not quite sure how to handle this case.  Since the spkg is created fresh every time make spkg is called, a repository for the SPKG.txt and spkg-install files at the top level makes no sense---they would always be just the initial commits.\n\nIdeas?",
    "created_at": "2011-12-23T13:41:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118070",
    "user": "jason"
}
```

SPKG.txt and spkg-install *are* under version control, in the original sagenb repository.  The problem is that we then custom-make an spkg and copy those files into the spkg directory.  In other words, they are under version control in the src/sagenb/ directory.

I'm not quite sure how to handle this case.  Since the spkg is created fresh every time make spkg is called, a repository for the SPKG.txt and spkg-install files at the top level makes no sense---they would always be just the initial commits.

Ideas?



---

archive/issue_comments_118071.json:
```json
{
    "body": "Thanks for the list of tickets to double-check.",
    "created_at": "2011-12-23T13:41:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118071",
    "user": "jason"
}
```

Thanks for the list of tickets to double-check.



---

archive/issue_comments_118072.json:
```json
{
    "body": "Replying to [comment:48 jason]:\n> SPKG.txt and spkg-install *are* under version control, in the original sagenb repository.  The problem is that we then custom-make an spkg and copy those files into the spkg directory.  In other words, they are under version control in the src/sagenb/ directory.\n> \n> I'm not quite sure how to handle this case.  Since the spkg is created fresh every time make spkg is called, a repository for the SPKG.txt and spkg-install files at the top level makes no sense---they would always be just the initial commits.\n\nI would say, never mind for now.",
    "created_at": "2011-12-23T14:11:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118072",
    "user": "jdemeyer"
}
```

Replying to [comment:48 jason]:
> SPKG.txt and spkg-install *are* under version control, in the original sagenb repository.  The problem is that we then custom-make an spkg and copy those files into the spkg directory.  In other words, they are under version control in the src/sagenb/ directory.
> 
> I'm not quite sure how to handle this case.  Since the spkg is created fresh every time make spkg is called, a repository for the SPKG.txt and spkg-install files at the top level makes no sense---they would always be just the initial commits.

I would say, never mind for now.



---

archive/issue_comments_118073.json:
```json
{
    "body": "Replying to [comment:47 jdemeyer]:\n> Please double-check that following tickets really have been merged in the new sagenb:\n>  * #10052\n>  * #10860\n>  * #11106\n>  * #11121\n>  * #11732\n>  * #11343\n>  * #10620\n>  * #10642\n\n#11732 needs rebasing. #10052 and #11106 are already merged. I'm not sure what do with #11343 given the existence of #11470. I've submitted pull requests [on github](https://github.com/sagemath/sagenb/issues/6) to get the remaining four tickets into the flask notebook (awaiting review).",
    "created_at": "2011-12-26T06:00:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118073",
    "user": "kini"
}
```

Replying to [comment:47 jdemeyer]:
> Please double-check that following tickets really have been merged in the new sagenb:
>  * #10052
>  * #10860
>  * #11106
>  * #11121
>  * #11732
>  * #11343
>  * #10620
>  * #10642

#11732 needs rebasing. #10052 and #11106 are already merged. I'm not sure what do with #11343 given the existence of #11470. I've submitted pull requests [on github](https://github.com/sagemath/sagenb/issues/6) to get the remaining four tickets into the flask notebook (awaiting review).



---

archive/issue_comments_118074.json:
```json
{
    "body": "I've updated the spkg above to include commits up through https://github.com/sagemath/sagenb/commit/6b06baed92d1ab0657c3f2af2c153a5958eae8e4",
    "created_at": "2011-12-30T20:12:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118074",
    "user": "jason"
}
```

I've updated the spkg above to include commits up through https://github.com/sagemath/sagenb/commit/6b06baed92d1ab0657c3f2af2c153a5958eae8e4



---

archive/issue_comments_118075.json:
```json
{
    "body": "Replying to [comment:52 kini]:\n> #11732 needs rebasing. #10052 and #11106 are already merged. I'm not sure what do with #11343 given the existence of #11470. I've submitted pull requests [on github](https://github.com/sagemath/sagenb/issues/6) to get the remaining four tickets into the flask notebook (awaiting review).\n\nUpdate: Only #11732 remains, everything else is merged. Thanks again, Jeroen, for the list.",
    "created_at": "2011-12-31T16:25:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118075",
    "user": "kini"
}
```

Replying to [comment:52 kini]:
> #11732 needs rebasing. #10052 and #11106 are already merged. I'm not sure what do with #11343 given the existence of #11470. I've submitted pull requests [on github](https://github.com/sagemath/sagenb/issues/6) to get the remaining four tickets into the flask notebook (awaiting review).

Update: Only #11732 remains, everything else is merged. Thanks again, Jeroen, for the list.



---

archive/issue_comments_118076.json:
```json
{
    "body": "`@`kini: The tinymce pull request isn't merged yet (but is awaiting review! :) https://github.com/sagemath/sagenb/pull/11",
    "created_at": "2011-12-31T17:18:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118076",
    "user": "jason"
}
```

`@`kini: The tinymce pull request isn't merged yet (but is awaiting review! :) https://github.com/sagemath/sagenb/pull/11



---

archive/issue_comments_118077.json:
```json
{
    "body": "Okay, the tinymce pull request is now merged.",
    "created_at": "2011-12-31T18:41:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118077",
    "user": "jason"
}
```

Okay, the tinymce pull request is now merged.



---

archive/issue_comments_118078.json:
```json
{
    "body": "REFEREE REMARKS 1:\n\n* The spkg is not in the proper format.  However, this is complicated to fix, and will be fixed in a *future* ticket: #12268\n\n* `notebook(secure=True)` is currently totally broken, due to the twisted spkg not supporting our tls extension, since I guess the patch didn't get applied.  This needs to get fixed.\n\n* All doctests pass.\n \n* Rado has done some work on trying to get Selenium testing to work (the main issue just being installing everything on the same computer!).   The Selenium tests need to get run (and any issues fixed) before we make the release. \n\n* Jason has simplified and streamlined the notebook developer instructions in response to discussions with Rado and I.",
    "created_at": "2012-01-06T05:20:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118078",
    "user": "was"
}
```

REFEREE REMARKS 1:

* The spkg is not in the proper format.  However, this is complicated to fix, and will be fixed in a *future* ticket: #12268

* `notebook(secure=True)` is currently totally broken, due to the twisted spkg not supporting our tls extension, since I guess the patch didn't get applied.  This needs to get fixed.

* All doctests pass.
 
* Rado has done some work on trying to get Selenium testing to work (the main issue just being installing everything on the same computer!).   The Selenium tests need to get run (and any issues fixed) before we make the release. 

* Jason has simplified and streamlined the notebook developer instructions in response to discussions with Rado and I.



---

archive/issue_comments_118079.json:
```json
{
    "body": "(Also, let's not forget to fix up and review #11409, though a not dependency for this!.)",
    "created_at": "2012-01-06T05:33:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118079",
    "user": "was"
}
```

(Also, let's not forget to fix up and review #11409, though a not dependency for this!.)



---

archive/issue_comments_118080.json:
```json
{
    "body": "To summarize, what *needs* to be done to finish this ticket completely is: \n   \n* tls (secure=True) support for Twisted\n   \n* Selenium\n \n* Ensure that sagenb built fresh as *part of* a clean new Sage sdist works, and in particular that the jmol command line program works, e.g, `sage: sphere()` pops up jmol.  We are worried that it won't work since we don't see how that script ever gets copied to local/bin/.",
    "created_at": "2012-01-06T05:42:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118080",
    "user": "was"
}
```

To summarize, what *needs* to be done to finish this ticket completely is: 
   
* tls (secure=True) support for Twisted
   
* Selenium
 
* Ensure that sagenb built fresh as *part of* a clean new Sage sdist works, and in particular that the jmol command line program works, e.g, `sage: sphere()` pops up jmol.  We are worried that it won't work since we don't see how that script ever gets copied to local/bin/.



---

archive/issue_comments_118081.json:
```json
{
    "body": "Replying to [comment:59 was]:\n\n>    \n>    * tls (secure=True) support for Twisted\nyou mention a patch that didn't get applied to twisted. Any more details on this patch?\n\nDima",
    "created_at": "2012-01-06T05:47:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118081",
    "user": "dimpase"
}
```

Replying to [comment:59 was]:

>    
>    * tls (secure=True) support for Twisted
you mention a patch that didn't get applied to twisted. Any more details on this patch?

Dima



---

archive/issue_comments_118082.json:
```json
{
    "body": "Replying to [comment:60 dimpase]:\n> Replying to [comment:59 was]:\n> \n> >    \n> >    * tls (secure=True) support for Twisted\n> you mention a patch that didn't get applied to twisted. Any more details on this patch?\n> \nupon reading the thread here started by jason-sage (we know this guy, don't we)\nhttp://twistedmatrix.com/pipermail/twisted-python/2010-October/022989.html\nthey basically say that one needs to do\n\n```\n\"ssl:443:sslmethod=TLSv1_METHOD\"\n```\n\nsomewhere in the configs.\n\n\n\n> Dima",
    "created_at": "2012-01-06T05:59:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118082",
    "user": "dimpase"
}
```

Replying to [comment:60 dimpase]:
> Replying to [comment:59 was]:
> 
> >    
> >    * tls (secure=True) support for Twisted
> you mention a patch that didn't get applied to twisted. Any more details on this patch?
> 
upon reading the thread here started by jason-sage (we know this guy, don't we)
http://twistedmatrix.com/pipermail/twisted-python/2010-October/022989.html
they basically say that one needs to do

```
"ssl:443:sslmethod=TLSv1_METHOD"
```

somewhere in the configs.



> Dima



---

archive/issue_comments_118083.json:
```json
{
    "body": "I uploaded a new spkg with pyOpenSSL included, as well as a small fix for selenium tests from Rado.",
    "created_at": "2012-01-09T19:53:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118083",
    "user": "jason"
}
```

I uploaded a new spkg with pyOpenSSL included, as well as a small fix for selenium tests from Rado.



---

archive/issue_comments_118084.json:
```json
{
    "body": "Changing priority from major to blocker.",
    "created_at": "2012-01-09T20:15:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118084",
    "user": "jdemeyer"
}
```

Changing priority from major to blocker.



---

archive/issue_comments_118085.json:
```json
{
    "body": "Pushed sagenb patch to github: https://github.com/sagemath/sagenb/commit/e930db178c468c488f86465cbc51c3ef4df83b70\n\nThis takes care of the blocker problem of not being able to use secure=True for HTTPS (SSL) Flask-based Sage Notebook server.  It strips out all reference to GnuTLS and relies on PyOpenSSL.\n\nFor a few more details, GnuTLS support in Twisted was going to be pretty hard to get, and maintaining a sage-specific patch not a great proposition.  William also suggested that GnuTLS support be removed.",
    "created_at": "2012-01-10T01:23:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118085",
    "user": "ijstokes"
}
```

Pushed sagenb patch to github: https://github.com/sagemath/sagenb/commit/e930db178c468c488f86465cbc51c3ef4df83b70

This takes care of the blocker problem of not being able to use secure=True for HTTPS (SSL) Flask-based Sage Notebook server.  It strips out all reference to GnuTLS and relies on PyOpenSSL.

For a few more details, GnuTLS support in Twisted was going to be pretty hard to get, and maintaining a sage-specific patch not a great proposition.  William also suggested that GnuTLS support be removed.



---

archive/issue_comments_118086.json:
```json
{
    "body": "Changing keywords from \"sd31\" to \"sd31, sd35.5\".",
    "created_at": "2012-01-10T01:23:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118086",
    "user": "ijstokes"
}
```

Changing keywords from "sd31" to "sd31, sd35.5".



---

archive/issue_comments_118087.json:
```json
{
    "body": "(#11732 still needs rebasing)",
    "created_at": "2012-01-10T02:20:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118087",
    "user": "kini"
}
```

(#11732 still needs rebasing)



---

archive/issue_comments_118088.json:
```json
{
    "body": "Changing keywords from \"sd31, sd35.5\" to \"sd31 sd35.5\".",
    "created_at": "2012-01-10T15:24:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118088",
    "user": "jason"
}
```

Changing keywords from "sd31, sd35.5" to "sd31 sd35.5".



---

archive/issue_comments_118089.json:
```json
{
    "body": "I updated the spkg to rc6, which is this commit: https://github.com/sagemath/sagenb/commit/84d442d5ac83f9484c12071e36dd98b3b896ea91\n\nI think we've addressed William's points above:\n\n* SSL: We now don't need GnuTLS, but instead require that the user has openSSL installed to use secure=True as well as openID (I think this is adequately noted in the README.rst).\n\n* Selenium: we incorporated the patch from Rado which fixes some selenium tests.  Rado: is there anything else we need to do on that?\n\n* jmol is now correctly copied over on a fresh sagenb install.",
    "created_at": "2012-01-11T05:09:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118089",
    "user": "jason"
}
```

I updated the spkg to rc6, which is this commit: https://github.com/sagemath/sagenb/commit/84d442d5ac83f9484c12071e36dd98b3b896ea91

I think we've addressed William's points above:

* SSL: We now don't need GnuTLS, but instead require that the user has openSSL installed to use secure=True as well as openID (I think this is adequately noted in the README.rst).

* Selenium: we incorporated the patch from Rado which fixes some selenium tests.  Rado: is there anything else we need to do on that?

* jmol is now correctly copied over on a fresh sagenb install.



---

archive/issue_comments_118090.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-01-11T05:09:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118090",
    "user": "jason"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_118091.json:
```json
{
    "body": "What's the status of #11732?",
    "created_at": "2012-01-16T20:42:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118091",
    "user": "jdemeyer"
}
```

What's the status of #11732?



---

archive/issue_comments_118092.json:
```json
{
    "body": "It was merged into the flask notebook at https://github.com/sagemath/sagenb/commit/235358d5a643948525ce80e1f0fd8406e31ced72",
    "created_at": "2012-01-16T20:46:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118092",
    "user": "jason"
}
```

It was merged into the flask notebook at https://github.com/sagemath/sagenb/commit/235358d5a643948525ce80e1f0fd8406e31ced72



---

archive/issue_comments_118093.json:
```json
{
    "body": "Okay, great!",
    "created_at": "2012-01-16T20:51:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118093",
    "user": "jdemeyer"
}
```

Okay, great!



---

archive/issue_comments_118094.json:
```json
{
    "body": "I'm asking the dumb question.  Suppose someone has an old notebook server or old worksheets on a local installation.  This will behave correctly without any user intervention, correct?  I'm pretty sure this is true, since sagenb.org was switched without much complaint along these lines, but just wanted to ask one last time :)",
    "created_at": "2012-01-16T21:09:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118094",
    "user": "kcrisman"
}
```

I'm asking the dumb question.  Suppose someone has an old notebook server or old worksheets on a local installation.  This will behave correctly without any user intervention, correct?  I'm pretty sure this is true, since sagenb.org was switched without much complaint along these lines, but just wanted to ask one last time :)



---

archive/issue_comments_118095.json:
```json
{
    "body": "Yes, it should work without any user intervention.  I will be testing this by upgrading the MAA server soon, when things settle down here.",
    "created_at": "2012-01-16T21:16:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118095",
    "user": "jason"
}
```

Yes, it should work without any user intervention.  I will be testing this by upgrading the MAA server soon, when things settle down here.



---

archive/issue_comments_118096.json:
```json
{
    "body": "Added #11503 as a dependency, since it has positive review and the necessary patch has been merged into sagenb master.",
    "created_at": "2012-01-17T03:00:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118096",
    "user": "jason"
}
```

Added #11503 as a dependency, since it has positive review and the necessary patch has been merged into sagenb master.



---

archive/issue_comments_118097.json:
```json
{
    "body": "#11503 was set back to \"needs work\", but as it is almost there, I'll still leave the change in sagenb master.",
    "created_at": "2012-01-17T03:31:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118097",
    "user": "jason"
}
```

#11503 was set back to "needs work", but as it is almost there, I'll still leave the change in sagenb master.



---

archive/issue_comments_118098.json:
```json
{
    "body": "I've updated the instructions and the sagenb spkg to include the most recent fixes and changes for the new jmol spkg and the twisted dependency.  The sagenb spkg also includes the published jmol fix at https://github.com/sagemath/sagenb/pull/26",
    "created_at": "2012-01-17T16:03:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118098",
    "user": "jason"
}
```

I've updated the instructions and the sagenb spkg to include the most recent fixes and changes for the new jmol spkg and the twisted dependency.  The sagenb spkg also includes the published jmol fix at https://github.com/sagemath/sagenb/pull/26



---

archive/issue_comments_118099.json:
```json
{
    "body": "The sagenb spkg should be installed before the jmol spkg.",
    "created_at": "2012-01-17T17:37:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118099",
    "user": "jason"
}
```

The sagenb spkg should be installed before the jmol spkg.



---

archive/issue_comments_118100.json:
```json
{
    "body": "The new flask-sagenb will likely require changes to the **Mac App** `data/extcode/sage/ext/mac-app` also.  It seems to have port 8000 hardcoded in a few places.",
    "created_at": "2012-01-19T10:33:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118100",
    "user": "jdemeyer"
}
```

The new flask-sagenb will likely require changes to the **Mac App** `data/extcode/sage/ext/mac-app` also.  It seems to have port 8000 hardcoded in a few places.



---

archive/issue_comments_118101.json:
```json
{
    "body": "Replying to [comment:79 jdemeyer]:\n> The new flask-sagenb will likely require changes to the **Mac App** `data/extcode/sage/ext/mac-app` also.  It seems to have port 8000 hardcoded in a few places.\n\nI only know of one place, namely in `loading-page.html` (grep gives some false positives).  I have been meaning to improve that page for a long time and just created #12327 to that end.  Regardless, the link on that page is non-essential and so there is no reason IMHO to delay the review of this ticket.",
    "created_at": "2012-01-19T15:38:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118101",
    "user": "iandrus"
}
```

Replying to [comment:79 jdemeyer]:
> The new flask-sagenb will likely require changes to the **Mac App** `data/extcode/sage/ext/mac-app` also.  It seems to have port 8000 hardcoded in a few places.

I only know of one place, namely in `loading-page.html` (grep gives some false positives).  I have been meaning to improve that page for a long time and just created #12327 to that end.  Regardless, the link on that page is non-essential and so there is no reason IMHO to delay the review of this ticket.



---

archive/issue_comments_118102.json:
```json
{
    "body": "Added the new #11503 command line patch.",
    "created_at": "2012-01-19T18:16:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118102",
    "user": "jason"
}
```

Added the new #11503 command line patch.



---

archive/issue_comments_118103.json:
```json
{
    "body": "Replying to [comment:79 jdemeyer]:\n> The new flask-sagenb will likely require changes to the **Mac App** `data/extcode/sage/ext/mac-app` also.  It seems to have port 8000 hardcoded in a few places.\n\nWhat is more likely to need changes is the script `sage-is-running-on-port.sh` which uses the contents of `~/.sage/sage_notebook.sagenb/twistd.pid` and `~/.sage/sage_notebook.sagenb/twistedconf.tac` to return the port the server is running on.",
    "created_at": "2012-01-20T11:52:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118103",
    "user": "iandrus"
}
```

Replying to [comment:79 jdemeyer]:
> The new flask-sagenb will likely require changes to the **Mac App** `data/extcode/sage/ext/mac-app` also.  It seems to have port 8000 hardcoded in a few places.

What is more likely to need changes is the script `sage-is-running-on-port.sh` which uses the contents of `~/.sage/sage_notebook.sagenb/twistd.pid` and `~/.sage/sage_notebook.sagenb/twistedconf.tac` to return the port the server is running on.



---

archive/issue_comments_118104.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-01-20T12:46:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118104",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_118105.json:
```json
{
    "body": "I get Sphinx warnings/errors when building the documentation:\n\n```\ndochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta2/devel/sagenb/sagenb/notebook/cell.py:docstring of sagenb.notebook.cell.Cell:4: WARNING: Block quote ends without a blank line; unexpected unindent.\ndochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta2/devel/sagenb/sagenb/notebook/interact.py:docstring of sagenb.notebook.interact.slider_generic.values:11: WARNING: Literal block expected; none found.\ndochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta2/devel/sage/doc/en/reference/sagenb/notebook/twist.rst:7: WARNING: autodoc can't import/find module 'sagenb.notebook.twist', it reported error: \"No module named twist\", please check your spelling and sys.path\ndochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta2/devel/sage/doc/en/reference/sagenb/simple/twist.rst:7: WARNING: autodoc can't import/find module 'sagenb.simple.twist', it reported error: \"No module named web2\", please check your spelling and sys.path\ndochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta2/devel/sagenb/sagenb/notebook/cell.py:docstring of sagenb.notebook.cell.Cell:14: ERROR: Unexpected indentation.\n```\n",
    "created_at": "2012-01-20T12:46:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118105",
    "user": "jdemeyer"
}
```

I get Sphinx warnings/errors when building the documentation:

```
dochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta2/devel/sagenb/sagenb/notebook/cell.py:docstring of sagenb.notebook.cell.Cell:4: WARNING: Block quote ends without a blank line; unexpected unindent.
dochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta2/devel/sagenb/sagenb/notebook/interact.py:docstring of sagenb.notebook.interact.slider_generic.values:11: WARNING: Literal block expected; none found.
dochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta2/devel/sage/doc/en/reference/sagenb/notebook/twist.rst:7: WARNING: autodoc can't import/find module 'sagenb.notebook.twist', it reported error: "No module named twist", please check your spelling and sys.path
dochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta2/devel/sage/doc/en/reference/sagenb/simple/twist.rst:7: WARNING: autodoc can't import/find module 'sagenb.simple.twist', it reported error: "No module named web2", please check your spelling and sys.path
dochtml.log:/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta2/devel/sagenb/sagenb/notebook/cell.py:docstring of sagenb.notebook.cell.Cell:14: ERROR: Unexpected indentation.
```




---

archive/issue_comments_118106.json:
```json
{
    "body": "Jason has already posted this to sage-devel, but a one character fix for the two problems in cell.py:\n\n```diff\ndiff --git a/sagenb/notebook/cell.py b/sagenb/notebook/cell.py\n--- a/sagenb/notebook/cell.py\n+++ b/sagenb/notebook/cell.py\n@@ -1161,7 +1161,7 @@ class Cell(Cell_generic):\n         return u'`id=%s|\\n%s\\n`' % (self.id(), s)\n \n     def next_compute_id(self):\n-        \"\"\"\n+        r\"\"\"\n         Returns the ID of the next compute cell in this compute cell's\n         worksheet object.  If this cell is *not* in the worksheet, it\n         returns the ID of the worksheet's *first* compute cell.  If\n```\n",
    "created_at": "2012-01-21T20:34:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118106",
    "user": "jhpalmieri"
}
```

Jason has already posted this to sage-devel, but a one character fix for the two problems in cell.py:

```diff
diff --git a/sagenb/notebook/cell.py b/sagenb/notebook/cell.py
--- a/sagenb/notebook/cell.py
+++ b/sagenb/notebook/cell.py
@@ -1161,7 +1161,7 @@ class Cell(Cell_generic):
         return u'`id=%s|\n%s\n`' % (self.id(), s)
 
     def next_compute_id(self):
-        """
+        r"""
         Returns the ID of the next compute cell in this compute cell's
         worksheet object.  If this cell is *not* in the worksheet, it
         returns the ID of the worksheet's *first* compute cell.  If
```




---

archive/issue_comments_118107.json:
```json
{
    "body": "Attachment [trac-11080-notebook-docs.patch](tarball://root/attachments/some-uuid/ticket11080/trac-11080-notebook-docs.patch) by jason created at 2012-01-21 21:30:18",
    "created_at": "2012-01-21T21:30:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118107",
    "user": "jason"
}
```

Attachment [trac-11080-notebook-docs.patch](tarball://root/attachments/some-uuid/ticket11080/trac-11080-notebook-docs.patch) by jason created at 2012-01-21 21:30:18



---

archive/issue_comments_118108.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-01-21T22:44:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118108",
    "user": "jason"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_118109.json:
```json
{
    "body": "I updated the sagenb spkg to include up through commit b4cd1d20fa617008e8f12d9da684a508bafa7891, which resolves the doc building issues.",
    "created_at": "2012-01-21T22:44:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118109",
    "user": "jason"
}
```

I updated the sagenb spkg to include up through commit b4cd1d20fa617008e8f12d9da684a508bafa7891, which resolves the doc building issues.



---

archive/issue_comments_118110.json:
```json
{
    "body": "Replying to [comment:84 iandrus]:\n> Replying to [comment:79 jdemeyer]:\n> > The new flask-sagenb will likely require changes to the **Mac App** `data/extcode/sage/ext/mac-app` also.  It seems to have port 8000 hardcoded in a few places.\n> \n> What is more likely to need changes is the script `sage-is-running-on-port.sh` which uses the contents of `~/.sage/sage_notebook.sagenb/twistd.pid` and `~/.sage/sage_notebook.sagenb/twistedconf.tac` to return the port the server is running on.\n\nI tried this with the new notebook server and it seems to work fine.",
    "created_at": "2012-01-27T12:05:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118110",
    "user": "iandrus"
}
```

Replying to [comment:84 iandrus]:
> Replying to [comment:79 jdemeyer]:
> > The new flask-sagenb will likely require changes to the **Mac App** `data/extcode/sage/ext/mac-app` also.  It seems to have port 8000 hardcoded in a few places.
> 
> What is more likely to need changes is the script `sage-is-running-on-port.sh` which uses the contents of `~/.sage/sage_notebook.sagenb/twistd.pid` and `~/.sage/sage_notebook.sagenb/twistedconf.tac` to return the port the server is running on.

I tried this with the new notebook server and it seems to work fine.



---

archive/issue_comments_118111.json:
```json
{
    "body": "Applying this to sage-4.8, I ran into one major problem. And I suggest some other minor changes:\n\n1. There is a leftover file `apply-hg.py` that comes up when running `hg status`:\n\n```\n...ons/sage-4.8/devel/sagenb> hg status\n*** failed to import extension hggit: No module named hggit\n! util/apply-hg.py\n```\n\n\n2. It is not possible to login as user or admin. The notebook returns with a \"Wrong password\" message. I tried to look at user_manager to see if the problem is there but it isn't there. It's only from the web interface that the problem arises. There are two aspects of this: i) I can login with the password of a new user once I create a new user and use the randomly generated password given by Sage. ii) As soon as I change the randomly generated password to my own password using the web interface, I am unable to log in anymore.\n\n3. Using user_manager.py, I can see that the passwords are correctly retrieved and verified. So, I am unsure where exactly the problem is. Here is an excerpt:\n\n```\nsage: nb = Notebook('/home/punarbasu/tmp/a.sagenb') \nsage: um = nb.user_manager()\nsage: um.valid_login_names()             \n['admin', u'test']\nsage: um.check_password('admin', 'admin')          \nTrue\nsage: um.check_password('test', 'test')  \nTrue\nsage: \n```\n\n\n4. [Minor change] In `devel/sagenb/sagenb/notebook/run_notebook.py` the following two changes should be made:\n\n```diff\ndiff --git a/sagenb/notebook/run_notebook.py b/sagenb/notebook/run_notebook.py\n--- a/sagenb/notebook/run_notebook.py\n+++ b/sagenb/notebook/run_notebook.py\n@@ -438,14 +438,14 @@\n     print \"Please choose a new password for the Sage Notebook 'admin' user.\"\n     print \"Do _not_ choose a stupid password, since anybody who could guess your password\"\n     print \"and connect to your machine could access or delete your files.\"\n-    print \"NOTE: Only the md5 hash of the password you type is stored by Sage.\"\n+    print \"NOTE: Only the sha256 hash of the password you type is stored by Sage.\"\n     print \"You can change your password by typing notebook(reset=True).\"\n     print \"\\n\" * 2\n     while True:\n         passwd = getpass.getpass(\"Enter new password: \")\n         from sagenb.misc.misc import min_password_length\n         if len(passwd) < min_password_length:\n-            print \"That password is way too short. Enter a password with at least 6 characters.\"\n+            print \"That password is way too short. Enter a password with at least %d characters.\"%min_password_length\n             continue\n         passwd2 = getpass.getpass(\"Retype new password: \")\n         if passwd != passwd2:\n```\n",
    "created_at": "2012-02-07T07:26:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118111",
    "user": "ppurka"
}
```

Applying this to sage-4.8, I ran into one major problem. And I suggest some other minor changes:

1. There is a leftover file `apply-hg.py` that comes up when running `hg status`:

```
...ons/sage-4.8/devel/sagenb> hg status
*** failed to import extension hggit: No module named hggit
! util/apply-hg.py
```


2. It is not possible to login as user or admin. The notebook returns with a "Wrong password" message. I tried to look at user_manager to see if the problem is there but it isn't there. It's only from the web interface that the problem arises. There are two aspects of this: i) I can login with the password of a new user once I create a new user and use the randomly generated password given by Sage. ii) As soon as I change the randomly generated password to my own password using the web interface, I am unable to log in anymore.

3. Using user_manager.py, I can see that the passwords are correctly retrieved and verified. So, I am unsure where exactly the problem is. Here is an excerpt:

```
sage: nb = Notebook('/home/punarbasu/tmp/a.sagenb') 
sage: um = nb.user_manager()
sage: um.valid_login_names()             
['admin', u'test']
sage: um.check_password('admin', 'admin')          
True
sage: um.check_password('test', 'test')  
True
sage: 
```


4. [Minor change] In `devel/sagenb/sagenb/notebook/run_notebook.py` the following two changes should be made:

```diff
diff --git a/sagenb/notebook/run_notebook.py b/sagenb/notebook/run_notebook.py
--- a/sagenb/notebook/run_notebook.py
+++ b/sagenb/notebook/run_notebook.py
@@ -438,14 +438,14 @@
     print "Please choose a new password for the Sage Notebook 'admin' user."
     print "Do _not_ choose a stupid password, since anybody who could guess your password"
     print "and connect to your machine could access or delete your files."
-    print "NOTE: Only the md5 hash of the password you type is stored by Sage."
+    print "NOTE: Only the sha256 hash of the password you type is stored by Sage."
     print "You can change your password by typing notebook(reset=True)."
     print "\n" * 2
     while True:
         passwd = getpass.getpass("Enter new password: ")
         from sagenb.misc.misc import min_password_length
         if len(passwd) < min_password_length:
-            print "That password is way too short. Enter a password with at least 6 characters."
+            print "That password is way too short. Enter a password with at least %d characters."%min_password_length
             continue
         passwd2 = getpass.getpass("Retype new password: ")
         if passwd != passwd2:
```




---

archive/issue_comments_118112.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-02-07T07:26:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118112",
    "user": "ppurka"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_118113.json:
```json
{
    "body": "Changing status from needs_work to needs_info.",
    "created_at": "2012-02-07T08:22:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118113",
    "user": "jason"
}
```

Changing status from needs_work to needs_info.



---

archive/issue_comments_118114.json:
```json
{
    "body": "I fixed (4) in commit https://github.com/sagemath/sagenb/commit/3b24bf8f85f4850eae194b1249179d9c638150b9\n\n(1) This will be fixed in the next version of the spkg.\n\n(2)-(3): I couldn't replicate this.  Can you give a precise sequence of steps to replicate this?  Here's what I did to test it: \n\n1. Log in as admin\n2. Create a new user under the Settings | Manage Users\n3. Log out and then log in as the new user\n4. Change the user's password\n5. Log in again with the new password\n\nEverything seemed to work fine.",
    "created_at": "2012-02-07T08:22:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118114",
    "user": "jason"
}
```

I fixed (4) in commit https://github.com/sagemath/sagenb/commit/3b24bf8f85f4850eae194b1249179d9c638150b9

(1) This will be fixed in the next version of the spkg.

(2)-(3): I couldn't replicate this.  Can you give a precise sequence of steps to replicate this?  Here's what I did to test it: 

1. Log in as admin
2. Create a new user under the Settings | Manage Users
3. Log out and then log in as the new user
4. Change the user's password
5. Log in again with the new password

Everything seemed to work fine.



---

archive/issue_comments_118115.json:
```json
{
    "body": "Replying to [comment:94 jason]:\n> I fixed (4) in commit https://github.com/sagemath/sagenb/commit/3b24bf8f85f4850eae194b1249179d9c638150b9\n> \n> (1) This will be fixed in the next version of the spkg.\n> \n> (2)-(3): I couldn't replicate this.  Can you give a precise sequence of steps to replicate this?  Here's what I did to test it: \n> \n>  1. Log in as admin\n>  1. Create a new user under the Settings | Manage Users\n>  1. Log out and then log in as the new user\n>  1. Change the user's password\n>  1. Log in again with the new password\n> \n> Everything seemed to work fine.\n\nI guess it's about upgrading from an existing flask nb installation, from some time ago, and on Sage 4.7.2.",
    "created_at": "2012-02-07T08:33:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118115",
    "user": "dimpase"
}
```

Replying to [comment:94 jason]:
> I fixed (4) in commit https://github.com/sagemath/sagenb/commit/3b24bf8f85f4850eae194b1249179d9c638150b9
> 
> (1) This will be fixed in the next version of the spkg.
> 
> (2)-(3): I couldn't replicate this.  Can you give a precise sequence of steps to replicate this?  Here's what I did to test it: 
> 
>  1. Log in as admin
>  1. Create a new user under the Settings | Manage Users
>  1. Log out and then log in as the new user
>  1. Change the user's password
>  1. Log in again with the new password
> 
> Everything seemed to work fine.

I guess it's about upgrading from an existing flask nb installation, from some time ago, and on Sage 4.7.2.



---

archive/issue_comments_118116.json:
```json
{
    "body": "So does that mean it's a problem, or not?",
    "created_at": "2012-02-07T08:42:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118116",
    "user": "jason"
}
```

So does that mean it's a problem, or not?



---

archive/issue_comments_118117.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2012-02-07T08:46:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118117",
    "user": "jason"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_118118.json:
```json
{
    "body": "I upgraded the sagenb spkg to take care of issues (1) and (4) above.",
    "created_at": "2012-02-07T08:46:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118118",
    "user": "jason"
}
```

I upgraded the sagenb spkg to take care of issues (1) and (4) above.



---

archive/issue_comments_118119.json:
```json
{
    "body": "Replying to [comment:96 jason]:\n> So does that mean it's a problem, or not?\n\nI mean that ppurka reports on his attempt of upgrading from an existing flask nb installation, from some time ago, that used to be running  Sage 4.7.2. Might be nontrivial to reproduce...",
    "created_at": "2012-02-07T08:51:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118119",
    "user": "dimpase"
}
```

Replying to [comment:96 jason]:
> So does that mean it's a problem, or not?

I mean that ppurka reports on his attempt of upgrading from an existing flask nb installation, from some time ago, that used to be running  Sage 4.7.2. Might be nontrivial to reproduce...



---

archive/issue_comments_118120.json:
```json
{
    "body": "Upgrading is certainly something which should be tested.  The current policy in Sage is that source upgrades from sage-4.5 (released July 2010) or later should work.  This isn't a very official policy and can be changed to a later Sage version if needed.  But certainly upgrading from the pretty recent sage-4.7.2 should work.\n\nBackwards-compatibility is even more important for the saved worksheets in `DOT_SAGE`.  The older worksheets you can support, the better.",
    "created_at": "2012-02-07T09:03:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118120",
    "user": "jdemeyer"
}
```

Upgrading is certainly something which should be tested.  The current policy in Sage is that source upgrades from sage-4.5 (released July 2010) or later should work.  This isn't a very official policy and can be changed to a later Sage version if needed.  But certainly upgrading from the pretty recent sage-4.7.2 should work.

Backwards-compatibility is even more important for the saved worksheets in `DOT_SAGE`.  The older worksheets you can support, the better.



---

archive/issue_comments_118121.json:
```json
{
    "body": "Oh no no! This is on a **fresh** sagenb directory! Do the following (tried on sage-4.8):\n\n```\nsage -n directory=new.sagenb\n# Give admin password\n# In web interface logout and try to log back in\n# You will get error\n# Restart sage using above command\n# In web interface, createa  new user and then logout and login with the random password of new user\n# It works. Now, go to settings of new user and change the password and logout\n# Try to login as the new user with new password. It doesn't work.\n```\n",
    "created_at": "2012-02-07T09:39:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118121",
    "user": "ppurka"
}
```

Oh no no! This is on a **fresh** sagenb directory! Do the following (tried on sage-4.8):

```
sage -n directory=new.sagenb
# Give admin password
# In web interface logout and try to log back in
# You will get error
# Restart sage using above command
# In web interface, createa  new user and then logout and login with the random password of new user
# It works. Now, go to settings of new user and change the password and logout
# Try to login as the new user with new password. It doesn't work.
```




---

archive/issue_comments_118122.json:
```json
{
    "body": "I explicitly tried each of those steps, and things worked flawlessly.  I'm trying this on a 5.0 beta (which is where the notebook should be tested).  I wonder if that makes a difference (it shouldn't, but who knows?).\n\nJust to make sure: did you explicitly do each of the steps in the description of this ticket?\n\nAlso, is there any error message printed out for you in the terminal?",
    "created_at": "2012-02-07T13:29:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118122",
    "user": "jason"
}
```

I explicitly tried each of those steps, and things worked flawlessly.  I'm trying this on a 5.0 beta (which is where the notebook should be tested).  I wonder if that makes a difference (it shouldn't, but who knows?).

Just to make sure: did you explicitly do each of the steps in the description of this ticket?

Also, is there any error message printed out for you in the terminal?



---

archive/issue_comments_118123.json:
```json
{
    "body": "Replying to [comment:101 jason]:\n> I explicitly tried each of those steps, and things worked flawlessly.  I'm trying this on a 5.0 beta (which is where the notebook should be tested).  I wonder if that makes a difference (it shouldn't, but who knows?).\n> \n\nI believe the only difference is coming from this. I tried this on 4.8, where it doesn't work. I haven't tried on 5.0.\n\n> Just to make sure: did you explicitly do each of the steps in the description of this ticket?\n\nYes. Just copy pasted the whole thing.\n\n> \n> Also, is there any error message printed out for you in the terminal?\n\nNo error messages are output to the terminal. I can consistently reproduce this on two Linux systems. One is an Ubuntu-11.10 and the other is a Gentoo system. Both 64bits. Logins clearly also doesn't work on existing sagenb directories (but that will probably fix itself if this gets fixed for new sagenb directories).",
    "created_at": "2012-02-07T13:43:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118123",
    "user": "ppurka"
}
```

Replying to [comment:101 jason]:
> I explicitly tried each of those steps, and things worked flawlessly.  I'm trying this on a 5.0 beta (which is where the notebook should be tested).  I wonder if that makes a difference (it shouldn't, but who knows?).
> 

I believe the only difference is coming from this. I tried this on 4.8, where it doesn't work. I haven't tried on 5.0.

> Just to make sure: did you explicitly do each of the steps in the description of this ticket?

Yes. Just copy pasted the whole thing.

> 
> Also, is there any error message printed out for you in the terminal?

No error messages are output to the terminal. I can consistently reproduce this on two Linux systems. One is an Ubuntu-11.10 and the other is a Gentoo system. Both 64bits. Logins clearly also doesn't work on existing sagenb directories (but that will probably fix itself if this gets fixed for new sagenb directories).



---

archive/issue_comments_118124.json:
```json
{
    "body": "Ok. I get the exact same behavior on a sage-5.0-beta2. Passwords don't work for admin and for user if user changes the random password. But the passwords work when tested in command line a.k.a. [comment 93, no. 3](http://trac.sagemath.org/sage_trac/ticket/11080#comment:93). All on a fresh sagenb directory. Can anyone else confirm this behavior?",
    "created_at": "2012-02-09T11:45:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118124",
    "user": "ppurka"
}
```

Ok. I get the exact same behavior on a sage-5.0-beta2. Passwords don't work for admin and for user if user changes the random password. But the passwords work when tested in command line a.k.a. [comment 93, no. 3](http://trac.sagemath.org/sage_trac/ticket/11080#comment:93). All on a fresh sagenb directory. Can anyone else confirm this behavior?



---

archive/issue_comments_118125.json:
```json
{
    "body": "Replying to [comment:103 ppurka]:\n> Ok. I get the exact same behavior on a sage-5.0-beta2. Passwords don't work for admin and for user if user changes the random password. But the passwords work when tested in command line a.k.a. [comment 93, no. 3](http://trac.sagemath.org/sage_trac/ticket/11080#comment:93). All on a fresh sagenb directory. Can anyone else confirm this behavior?\n\nIs it browser-specific?",
    "created_at": "2012-02-09T11:48:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118125",
    "user": "dimpase"
}
```

Replying to [comment:103 ppurka]:
> Ok. I get the exact same behavior on a sage-5.0-beta2. Passwords don't work for admin and for user if user changes the random password. But the passwords work when tested in command line a.k.a. [comment 93, no. 3](http://trac.sagemath.org/sage_trac/ticket/11080#comment:93). All on a fresh sagenb directory. Can anyone else confirm this behavior?

Is it browser-specific?



---

archive/issue_comments_118126.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2012-02-09T11:48:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118126",
    "user": "dimpase"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_118127.json:
```json
{
    "body": "No. It's not. I get same behavior on firefox-10 and opera-11.61.",
    "created_at": "2012-02-09T11:55:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118127",
    "user": "ppurka"
}
```

No. It's not. I get same behavior on firefox-10 and opera-11.61.



---

archive/issue_comments_118128.json:
```json
{
    "body": "Why is #12327 a dependency here?  If I try to apply the patch from that ticket to 5.0 beta2 after applying everything described above, I get an error stating that the $SAGE_ROOT/ext directory is missing...otherwise so far so good...",
    "created_at": "2012-02-10T04:51:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118128",
    "user": "gutow"
}
```

Why is #12327 a dependency here?  If I try to apply the patch from that ticket to 5.0 beta2 after applying everything described above, I get an error stating that the $SAGE_ROOT/ext directory is missing...otherwise so far so good...



---

archive/issue_comments_118129.json:
```json
{
    "body": "Arrrgh...after rebuild (./sage -b). The notebook launches with an error\n\n```\n\nImportError                               Traceback (most recent call last)\n\n/home/jonathan/.sage/<ipython console> in <module>()\n\n/home/jonathan/Documents/sage-5.0.beta2/devel/sagenb-main/sagenb/notebook/notebook_object.pyc in __call__(self, *args, **kwds)\n    215     \"\"\"\n    216     def __call__(self, *args, **kwds):\n--> 217         return self.notebook(*args, **kwds)\n    218 \n    219     notebook = run_notebook.notebook_twisted\n\n/home/jonathan/Documents/sage-5.0.beta2/devel/sagenb-main/sagenb/notebook/run_notebook.pyc in notebook_twisted(self, directory, port, interface, address, port_tries, secure, reset, accounts, require_login, server_pool, ulimit, timeout, open_viewer, sagetex_path, start_path, fork, quiet, subnets)\n    200         print '*' * 70\n    201 \n--> 202     nb = notebook.load_notebook(directory)\n    203 \n    204     directory = nb._dir\n\n/home/jonathan/Documents/sage-5.0.beta2/devel/sagenb-main/sagenb/notebook/notebook.pyc in load_notebook(dir, interface, port, secure)\n   1807     # mainly to avoid circular references, etc.  This also means\n   1808     # only one notebook can actually be used at any point.\n-> 1809     import sagenb.notebook.twist\n   1810     sagenb.notebook.twist.notebook = nb\n   1811 \n\n/home/jonathan/Documents/sage-5.0.beta2/devel/sagenb-main/sagenb/notebook/twist.py in <module>()\n     40 \n     41 from twisted.python import log\n---> 42 from twisted.web2 import server, http, resource, channel\n     43 from twisted.web2 import static, http_headers, responsecode\n     44 from twisted.web2.filter import gzip\n\nImportError: No module named web2\n```\n\nDid I miss something or is there a new problem?",
    "created_at": "2012-02-10T05:03:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118129",
    "user": "gutow"
}
```

Arrrgh...after rebuild (./sage -b). The notebook launches with an error

```

ImportError                               Traceback (most recent call last)

/home/jonathan/.sage/<ipython console> in <module>()

/home/jonathan/Documents/sage-5.0.beta2/devel/sagenb-main/sagenb/notebook/notebook_object.pyc in __call__(self, *args, **kwds)
    215     """
    216     def __call__(self, *args, **kwds):
--> 217         return self.notebook(*args, **kwds)
    218 
    219     notebook = run_notebook.notebook_twisted

/home/jonathan/Documents/sage-5.0.beta2/devel/sagenb-main/sagenb/notebook/run_notebook.pyc in notebook_twisted(self, directory, port, interface, address, port_tries, secure, reset, accounts, require_login, server_pool, ulimit, timeout, open_viewer, sagetex_path, start_path, fork, quiet, subnets)
    200         print '*' * 70
    201 
--> 202     nb = notebook.load_notebook(directory)
    203 
    204     directory = nb._dir

/home/jonathan/Documents/sage-5.0.beta2/devel/sagenb-main/sagenb/notebook/notebook.pyc in load_notebook(dir, interface, port, secure)
   1807     # mainly to avoid circular references, etc.  This also means
   1808     # only one notebook can actually be used at any point.
-> 1809     import sagenb.notebook.twist
   1810     sagenb.notebook.twist.notebook = nb
   1811 

/home/jonathan/Documents/sage-5.0.beta2/devel/sagenb-main/sagenb/notebook/twist.py in <module>()
     40 
     41 from twisted.python import log
---> 42 from twisted.web2 import server, http, resource, channel
     43 from twisted.web2 import static, http_headers, responsecode
     44 from twisted.web2.filter import gzip

ImportError: No module named web2
```

Did I miss something or is there a new problem?



---

archive/issue_comments_118130.json:
```json
{
    "body": "> ImportError: No module named web2\n> }}}\n> Did I miss something or is there a new problem?\n\nI bet you did, as there is no web2 in the new twisted (version 11).",
    "created_at": "2012-02-10T05:10:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118130",
    "user": "dimpase"
}
```

> ImportError: No module named web2
> }}}
> Did I miss something or is there a new problem?

I bet you did, as there is no web2 in the new twisted (version 11).



---

archive/issue_comments_118131.json:
```json
{
    "body": "And there is no twist.py in the new notebook...  Are you *sure* that you installed the sagenb spkg above?  Does devel/sagenb-main/flask_version exist?\n\nYou may need to do `sage -f` instead of `sage -i` when you install the spkgs above so they overwrite old versions of the same spkg.",
    "created_at": "2012-02-10T13:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118131",
    "user": "jason"
}
```

And there is no twist.py in the new notebook...  Are you *sure* that you installed the sagenb spkg above?  Does devel/sagenb-main/flask_version exist?

You may need to do `sage -f` instead of `sage -i` when you install the spkgs above so they overwrite old versions of the same spkg.



---

archive/issue_comments_118132.json:
```json
{
    "body": "Yep...the sagenb spkg install failed on a missing header for ssl. Somehow I missed the error message. I have the ssl binaries but not the header files on my systems.  I guess ssl.h be part of the package or they need to be listed as prerequisite for the sagenb spkg.  I'm running on the same Ubuntu 11.04 that I successfully installed this on through 4.8.\n\nHere's the relevant part of the log file.\n\n```\nProcessing pyOpenSSL-0.13.tar.gz\nRunning pyOpenSSL-0.13/setup.py -q bdist_egg --dist-dir /tmp/easy_install-pWFAnl/pyOpenSSL-0.13/egg-dist-tmp-4xiQaN\nwarning: no previously-included files matching '*.pyc' found anywhere in distribution\nIn file included from OpenSSL/crypto/crypto.h:30:0,\n                 from OpenSSL/crypto/crypto.c:16:\nOpenSSL/crypto/x509.h:17:25: fatal error: openssl/ssl.h: No such file or directory\ncompilation terminated.\nerror: Setup script exited with error: command 'gcc' failed with exit status 1\nError installing pyOpenSSL-0.13.tar.gz.\n```\n",
    "created_at": "2012-02-11T01:20:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118132",
    "user": "gutow"
}
```

Yep...the sagenb spkg install failed on a missing header for ssl. Somehow I missed the error message. I have the ssl binaries but not the header files on my systems.  I guess ssl.h be part of the package or they need to be listed as prerequisite for the sagenb spkg.  I'm running on the same Ubuntu 11.04 that I successfully installed this on through 4.8.

Here's the relevant part of the log file.

```
Processing pyOpenSSL-0.13.tar.gz
Running pyOpenSSL-0.13/setup.py -q bdist_egg --dist-dir /tmp/easy_install-pWFAnl/pyOpenSSL-0.13/egg-dist-tmp-4xiQaN
warning: no previously-included files matching '*.pyc' found anywhere in distribution
In file included from OpenSSL/crypto/crypto.h:30:0,
                 from OpenSSL/crypto/crypto.c:16:
OpenSSL/crypto/x509.h:17:25: fatal error: openssl/ssl.h: No such file or directory
compilation terminated.
error: Setup script exited with error: command 'gcc' failed with exit status 1
Error installing pyOpenSSL-0.13.tar.gz.
```




---

archive/issue_comments_118133.json:
```json
{
    "body": "sagenb spkg requires openssl and openssl-dev.  After adding openssl-dev to my system the spkg installs fine.  If I missed this dependency sorry.  If not it needs to be clear somewhere.",
    "created_at": "2012-02-11T01:39:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118133",
    "user": "gutow"
}
```

sagenb spkg requires openssl and openssl-dev.  After adding openssl-dev to my system the spkg installs fine.  If I missed this dependency sorry.  If not it needs to be clear somewhere.



---

archive/issue_comments_118134.json:
```json
{
    "body": "Should we put an explicit check for that file into the spkg-install?  If so, what should that check look like?  We should also clearly list this somewhere.",
    "created_at": "2012-02-11T04:50:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118134",
    "user": "jason"
}
```

Should we put an explicit check for that file into the spkg-install?  If so, what should that check look like?  We should also clearly list this somewhere.



---

archive/issue_comments_118135.json:
```json
{
    "body": "Replying to [comment:101 jason]:\n> I explicitly tried each of those steps, and things worked flawlessly.  I'm trying this on a 5.0 beta (which is where the notebook should be tested).  I wonder if that makes a difference (it shouldn't, but who knows?).\n> \n> Just to make sure: did you explicitly do each of the steps in the description of this ticket?\n> \n> Also, is there any error message printed out for you in the terminal?\n\nThanks to kini we have the answer to this. It seems the error is triggered only when the password length is less than 6 characters. This means that the min password length of 6 is hard-coded in some file. The new git revisions of the nb which has set the variable `min_password_length` to 6 effectively masks the problem without fixing it.",
    "created_at": "2012-02-13T10:05:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118135",
    "user": "ppurka"
}
```

Replying to [comment:101 jason]:
> I explicitly tried each of those steps, and things worked flawlessly.  I'm trying this on a 5.0 beta (which is where the notebook should be tested).  I wonder if that makes a difference (it shouldn't, but who knows?).
> 
> Just to make sure: did you explicitly do each of the steps in the description of this ticket?
> 
> Also, is there any error message printed out for you in the terminal?

Thanks to kini we have the answer to this. It seems the error is triggered only when the password length is less than 6 characters. This means that the min password length of 6 is hard-coded in some file. The new git revisions of the nb which has set the variable `min_password_length` to 6 effectively masks the problem without fixing it.



---

archive/issue_comments_118136.json:
```json
{
    "body": "I have a question about the following chunk of code\n\n\n```\ntry: \n    # simplejson is faster, so try to import it first\n    import simplejson as json\nexcept ImportError: \n    import json\n```\n\nin sagenb/notebook/misc.py. It would seem that Sage is not shipped with simplejson. In testing the flask notebook on sage-on-gentoo the sagenb/notebook/misc.py test is the only failing notebook test because simplejson, which is pulled in by werkzeug as a runtime dependency, is found. The failure, roughly, is\n\n\n```\nsage -t -long  -force_lib /storage/strogdon/gentoo/usr/lib/python2.7/site-packages/sagenb/notebook/misc.py\n**********************************************************************\nFile \"/storage/strogdon/gentoo/usr/lib/python2.7/site-packages/sagenb/notebook/misc.py\", line 221:\n    sage: print encode_response(d, separators = (', ', ': '), indent = 4)\nException raised:\n    Traceback (most recent call last):\n...\n      File \"element.pyx\", line 1305, in sage.structure.element.RingElement.__add__ (sage/structure/element.c:11569)\n      File \"coerce.pyx\", line 797, in sage.structure.coerce.CoercionModel_cache_maps.bin_op (sage/structure/coerce.c:7467)\n    TypeError: unsupported operand parent(s) for '+': '<type 'str'>' and 'Integer Ring'\n**********************************************************************\n```\n\nIf I remove the conditional the test passes. So, the question is, is the conditional reference to simplejson needed? Of course, the s-o-g flask notebook can always be patched.",
    "created_at": "2012-02-13T22:50:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118136",
    "user": "strogdon"
}
```

I have a question about the following chunk of code


```
try: 
    # simplejson is faster, so try to import it first
    import simplejson as json
except ImportError: 
    import json
```

in sagenb/notebook/misc.py. It would seem that Sage is not shipped with simplejson. In testing the flask notebook on sage-on-gentoo the sagenb/notebook/misc.py test is the only failing notebook test because simplejson, which is pulled in by werkzeug as a runtime dependency, is found. The failure, roughly, is


```
sage -t -long  -force_lib /storage/strogdon/gentoo/usr/lib/python2.7/site-packages/sagenb/notebook/misc.py
**********************************************************************
File "/storage/strogdon/gentoo/usr/lib/python2.7/site-packages/sagenb/notebook/misc.py", line 221:
    sage: print encode_response(d, separators = (', ', ': '), indent = 4)
Exception raised:
    Traceback (most recent call last):
...
      File "element.pyx", line 1305, in sage.structure.element.RingElement.__add__ (sage/structure/element.c:11569)
      File "coerce.pyx", line 797, in sage.structure.coerce.CoercionModel_cache_maps.bin_op (sage/structure/coerce.c:7467)
    TypeError: unsupported operand parent(s) for '+': '<type 'str'>' and 'Integer Ring'
**********************************************************************
```

If I remove the conditional the test passes. So, the question is, is the conditional reference to simplejson needed? Of course, the s-o-g flask notebook can always be patched.



---

archive/issue_comments_118137.json:
```json
{
    "body": "Patching the sage-on-gentoo flask notebook is not the solution. Test failures should not occur no matter what python modules, or indeed other programs, the user has installed into Sage's directory.\n\nBut there's actually a new failure, on 5.0.beta4:\n\n\n```\nsage -t  misc/sageinspect.py\n**********************************************************************\nFile \"/home/fs/src/sagenb/sagenb/misc/sageinspect.py\", line 653:\n    sage: sage_getargspec(Poset)\nExpected:\n    (['data', 'element_labels', 'cover_relations'], None, None, (None, None, False))\nGot:\n    (['data', 'element_labels', 'cover_relations', 'category', 'facade', 'key'], None, None, (None, None, False, None, None, None))\n**********************************************************************\n1 items had failures:\n   1 of   7 in __main__.example_16\n***Test Failed*** 1 failures.\n```\n\n\nI presume this is caused by #10998.",
    "created_at": "2012-02-24T14:39:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118137",
    "user": "kini"
}
```

Patching the sage-on-gentoo flask notebook is not the solution. Test failures should not occur no matter what python modules, or indeed other programs, the user has installed into Sage's directory.

But there's actually a new failure, on 5.0.beta4:


```
sage -t  misc/sageinspect.py
**********************************************************************
File "/home/fs/src/sagenb/sagenb/misc/sageinspect.py", line 653:
    sage: sage_getargspec(Poset)
Expected:
    (['data', 'element_labels', 'cover_relations'], None, None, (None, None, False))
Got:
    (['data', 'element_labels', 'cover_relations', 'category', 'facade', 'key'], None, None, (None, None, False, None, None, None))
**********************************************************************
1 items had failures:
   1 of   7 in __main__.example_16
***Test Failed*** 1 failures.
```


I presume this is caused by #10998.



---

archive/issue_comments_118138.json:
```json
{
    "body": "(Why the heck is sageinspect in sagenb anyway...)",
    "created_at": "2012-02-24T14:40:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118138",
    "user": "kini"
}
```

(Why the heck is sageinspect in sagenb anyway...)



---

archive/issue_comments_118139.json:
```json
{
    "body": "I submitted a pull request to update the failing doctest. Looking at the simple_json one now...",
    "created_at": "2012-02-24T14:50:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118139",
    "user": "kini"
}
```

I submitted a pull request to update the failing doctest. Looking at the simple_json one now...



---

archive/issue_comments_118140.json:
```json
{
    "body": "The problem is as follows. In the json module, we have\n\n\n```\nIf ``indent`` is a non-negative integer, then JSON array elements and\nobject members will be pretty-printed with that indent level. An indent\nlevel of 0 will only insert newlines. ``None`` is the most compact\nrepresentation.\n```\n\n\nOn the other hand, in the simple_json module, we have\n\n\n```\nIf ``indent`` is a string, then JSON array elements and object members\nwill be pretty-printed with a newline followed by that string repeated\nfor each level of nesting. ``None`` (the default) selects the most compact\nrepresentation without any newlines. For backwards compatibility with\nversions of simplejson earlier than 2.1.0, an integer is also accepted\nand is converted to a string with that many spaces.\n```\n\n\nSage integers do not trigger the following lines in simple_json (simplejson/encoder.py:173):\n\n\n```python\n        if isinstance(indent, (int, long)):\n            indent = ' ' * indent\n        self.indent = indent\n```\n\n\nUnfortunately it doesn't seem like the json module supports this new string form of the indent argument, which is why it works with our code - it just does `' ' * indent` without caring that it's a Sage integer. Apparently the json module is just an old version of the simplejson module which is bundled with Python, so it will get the new string-based indent parameter eventually, but for now we'll either have to require an up-to-date simplejson for the new notebook, or remember/detect which of the two modules we imported and call the function accordingly.",
    "created_at": "2012-02-24T15:35:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118140",
    "user": "kini"
}
```

The problem is as follows. In the json module, we have


```
If ``indent`` is a non-negative integer, then JSON array elements and
object members will be pretty-printed with that indent level. An indent
level of 0 will only insert newlines. ``None`` is the most compact
representation.
```


On the other hand, in the simple_json module, we have


```
If ``indent`` is a string, then JSON array elements and object members
will be pretty-printed with a newline followed by that string repeated
for each level of nesting. ``None`` (the default) selects the most compact
representation without any newlines. For backwards compatibility with
versions of simplejson earlier than 2.1.0, an integer is also accepted
and is converted to a string with that many spaces.
```


Sage integers do not trigger the following lines in simple_json (simplejson/encoder.py:173):


```python
        if isinstance(indent, (int, long)):
            indent = ' ' * indent
        self.indent = indent
```


Unfortunately it doesn't seem like the json module supports this new string form of the indent argument, which is why it works with our code - it just does `' ' * indent` without caring that it's a Sage integer. Apparently the json module is just an old version of the simplejson module which is bundled with Python, so it will get the new string-based indent parameter eventually, but for now we'll either have to require an up-to-date simplejson for the new notebook, or remember/detect which of the two modules we imported and call the function accordingly.



---

archive/issue_comments_118141.json:
```json
{
    "body": "FWIW I made a pull request on simplejson addressing this: https://github.com/simplejson/simplejson/pull/29",
    "created_at": "2012-02-24T16:34:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118141",
    "user": "kini"
}
```

FWIW I made a pull request on simplejson addressing this: https://github.com/simplejson/simplejson/pull/29



---

archive/issue_comments_118142.json:
```json
{
    "body": "The pull request has been merged into simplejson, so the test will no longer fail once the next version of simplejson is released.",
    "created_at": "2012-02-27T20:39:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118142",
    "user": "kini"
}
```

The pull request has been merged into simplejson, so the test will no longer fail once the next version of simplejson is released.



---

archive/issue_comments_118143.json:
```json
{
    "body": "The new version of simplejson has been released. strogdon, if you upgrade simplejson to 2.3.3 the test failure should be gone :)",
    "created_at": "2012-02-29T00:17:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118143",
    "user": "kini"
}
```

The new version of simplejson has been released. strogdon, if you upgrade simplejson to 2.3.3 the test failure should be gone :)



---

archive/issue_comments_118144.json:
```json
{
    "body": "Replying to [comment:121 kini]:\n\n> The new version of simplejson has been released. strogdon, if you upgrade simplejson to 2.3.3 the test failure should be gone :)\n\nGood deal. I just upgraded to 2.3.3 and the test passes. Thanks.",
    "created_at": "2012-02-29T00:42:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118144",
    "user": "strogdon"
}
```

Replying to [comment:121 kini]:

> The new version of simplejson has been released. strogdon, if you upgrade simplejson to 2.3.3 the test failure should be gone :)

Good deal. I just upgraded to 2.3.3 and the test passes. Thanks.



---

archive/issue_comments_118145.json:
```json
{
    "body": "It's not clear from this ticket which of the twisted patches from #11874 should be applied. I believe it should be [trac-11874-remove-twisted.3.patch](http://trac.sagemath.org/sage_trac/raw-attachment/ticket/11874/trac-11874-remove-twisted.3.patch) . At least that one as well as the indicated jmol-spkg patch apply on top of 5.0.beta6 and I'm able to proceed to the \"sage -br\" step to get the new notebook working.",
    "created_at": "2012-03-05T04:27:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118145",
    "user": "strogdon"
}
```

It's not clear from this ticket which of the twisted patches from #11874 should be applied. I believe it should be [trac-11874-remove-twisted.3.patch](http://trac.sagemath.org/sage_trac/raw-attachment/ticket/11874/trac-11874-remove-twisted.3.patch) . At least that one as well as the indicated jmol-spkg patch apply on top of 5.0.beta6 and I'm able to proceed to the "sage -br" step to get the new notebook working.



---

archive/issue_comments_118146.json:
```json
{
    "body": "Replying to [comment:123 strogdon]:\n> It's not clear from this ticket which of the twisted patches from #11874 should be applied.\nConsidering that ticket `needs_work`, the \"correct\" patch for #11874 still needs to be written.",
    "created_at": "2012-03-05T07:55:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118146",
    "user": "jdemeyer"
}
```

Replying to [comment:123 strogdon]:
> It's not clear from this ticket which of the twisted patches from #11874 should be applied.
Considering that ticket `needs_work`, the "correct" patch for #11874 still needs to be written.



---

archive/issue_comments_118147.json:
```json
{
    "body": "Current status:\n\n#11874 needs to be fixed and reviewed.  There is a failing doctest, but I think the failing doctest may be resolved by using the sage.misc.fpickle module (I'm not sure, though)\n\n#12229 needs review (and possibly a fix for the git_links)\n\n#11503 needs review (and looks like it is ready to go...)\n\nMerge pull request https://github.com/sagemath/sagenb/pull/40",
    "created_at": "2012-03-10T13:55:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118147",
    "user": "jason"
}
```

Current status:

#11874 needs to be fixed and reviewed.  There is a failing doctest, but I think the failing doctest may be resolved by using the sage.misc.fpickle module (I'm not sure, though)

#12229 needs review (and possibly a fix for the git_links)

#11503 needs review (and looks like it is ready to go...)

Merge pull request https://github.com/sagemath/sagenb/pull/40



---

archive/issue_comments_118148.json:
```json
{
    "body": "Please check out [http://trac.sagemath.org/sage_trac/ticket/11874#comment:44](http://trac.sagemath.org/sage_trac/ticket/11874#comment:44)\n\nIt appears that when we build Python 2.7.2 we automatically pull the latest Twisted (currently version 12) from the net and install it into SAGE_LOCAL. \n\nWe definitely, definitely do NOT want TWO twisted frameworks installed!!!",
    "created_at": "2012-03-11T04:01:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118148",
    "user": "dimpase"
}
```

Please check out [http://trac.sagemath.org/sage_trac/ticket/11874#comment:44](http://trac.sagemath.org/sage_trac/ticket/11874#comment:44)

It appears that when we build Python 2.7.2 we automatically pull the latest Twisted (currently version 12) from the net and install it into SAGE_LOCAL. 

We definitely, definitely do NOT want TWO twisted frameworks installed!!!



---

archive/issue_comments_118149.json:
```json
{
    "body": "Change urls to boxen instead of sage.math since sage.math is down.",
    "created_at": "2012-03-15T18:29:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118149",
    "user": "jason"
}
```

Change urls to boxen instead of sage.math since sage.math is down.



---

archive/issue_comments_118150.json:
```json
{
    "body": "Replying to [comment:126 dimpase]:\n> Please check out [http://trac.sagemath.org/sage_trac/ticket/11874#comment:44](http://trac.sagemath.org/sage_trac/ticket/11874#comment:44)\n> \n> It appears that when we build Python 2.7.2 we automatically pull the latest Twisted (currently version 12) from the net and install it into SAGE_LOCAL. \n \nPlease ignore this comment. It was somehow due to my confusion when I recently looked at #11874. \n\nPlease also note that #11874 needs review now.",
    "created_at": "2012-03-17T03:06:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118150",
    "user": "dimpase"
}
```

Replying to [comment:126 dimpase]:
> Please check out [http://trac.sagemath.org/sage_trac/ticket/11874#comment:44](http://trac.sagemath.org/sage_trac/ticket/11874#comment:44)
> 
> It appears that when we build Python 2.7.2 we automatically pull the latest Twisted (currently version 12) from the net and install it into SAGE_LOCAL. 
 
Please ignore this comment. It was somehow due to my confusion when I recently looked at #11874. 

Please also note that #11874 needs review now.



---

archive/issue_comments_118151.json:
```json
{
    "body": "running Explicit instructions from the ticket description gives one Twisted 12, not (as intended) Twisted 11.1.\nThis needs to be fixed: please see http://trac.sagemath.org/sage_trac/ticket/11874#comment:62",
    "created_at": "2012-03-17T05:36:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118151",
    "user": "dimpase"
}
```

running Explicit instructions from the ticket description gives one Twisted 12, not (as intended) Twisted 11.1.
This needs to be fixed: please see http://trac.sagemath.org/sage_trac/ticket/11874#comment:62



---

archive/issue_comments_118152.json:
```json
{
    "body": "There is a doctest error:\n\n```\nsage -t  -force_lib devel/sagenb-main/sagenb/misc/sageinspect.py\n**********************************************************************\nFile \"/padic/scratch/jdemeyer/merger/sage-5.0.notebook/devel/sagenb-main/sagenb/misc/sageinspect.py\", line 653:\n    sage: sage_getargspec(Poset)\nExpected:\n    (['data', 'element_labels', 'cover_relations'], None, None, (None, None, False))\nGot:\n    (['data', 'element_labels', 'cover_relations', 'category', 'facade', 'key'], None, None, (None, None, False, None, None, None))\n**********************************************************************\n```\n",
    "created_at": "2012-03-17T12:56:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118152",
    "user": "jdemeyer"
}
```

There is a doctest error:

```
sage -t  -force_lib devel/sagenb-main/sagenb/misc/sageinspect.py
**********************************************************************
File "/padic/scratch/jdemeyer/merger/sage-5.0.notebook/devel/sagenb-main/sagenb/misc/sageinspect.py", line 653:
    sage: sage_getargspec(Poset)
Expected:
    (['data', 'element_labels', 'cover_relations'], None, None, (None, None, False))
Got:
    (['data', 'element_labels', 'cover_relations', 'category', 'facade', 'key'], None, None, (None, None, False, None, None, None))
**********************************************************************
```




---

archive/issue_comments_118153.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2012-03-17T12:56:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118153",
    "user": "jdemeyer"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_118154.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-03-17T12:56:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118154",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_118155.json:
```json
{
    "body": "Replying to [comment:131 jdemeyer]:\nas mentioned [here](http://trac.sagemath.org/sage_trac/ticket/11874#comment:61)\none just needs to update the spkg using  [this Git commit](https://github.com/sagemath/sagenb/commit/a6e1f2103880434b5f48c41d7c157cfdae9cc110)",
    "created_at": "2012-03-17T13:24:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118155",
    "user": "dimpase"
}
```

Replying to [comment:131 jdemeyer]:
as mentioned [here](http://trac.sagemath.org/sage_trac/ticket/11874#comment:61)
one just needs to update the spkg using  [this Git commit](https://github.com/sagemath/sagenb/commit/a6e1f2103880434b5f48c41d7c157cfdae9cc110)



---

archive/issue_comments_118156.json:
```json
{
    "body": "Well, you need to update the spkg to the current master branch, which happens to contain that commit in its ancestry, and thus contains the code change. (Commits are not something you apply individually like patches.)",
    "created_at": "2012-03-17T21:38:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118156",
    "user": "kini"
}
```

Well, you need to update the spkg to the current master branch, which happens to contain that commit in its ancestry, and thus contains the code change. (Commits are not something you apply individually like patches.)



---

archive/issue_comments_118157.json:
```json
{
    "body": "Here's a new spkg which should pass doctests: http://boxen.math.washington.edu/home/keshav/files/sagenb-0.9.0.spkg\n\nAre there any other work issues?",
    "created_at": "2012-03-18T00:28:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118157",
    "user": "kini"
}
```

Here's a new spkg which should pass doctests: http://boxen.math.washington.edu/home/keshav/files/sagenb-0.9.0.spkg

Are there any other work issues?



---

archive/issue_comments_118158.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-03-18T00:28:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118158",
    "user": "kini"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_118159.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-03-18T00:39:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118159",
    "user": "kini"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_118160.json:
```json
{
    "body": "Hmm, there is something weird when I install the spkg and run `sage -t $SAGE_ROOT/devel/sagenb-main`: 1) README.rst is getting doctested, which throws up a password prompt; 2) there's a tab character in flask_version/base.py .\n\nWhy were these not showing up in earlier doctests? They're not new problems, as far as I can tell.",
    "created_at": "2012-03-18T00:39:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118160",
    "user": "kini"
}
```

Hmm, there is something weird when I install the spkg and run `sage -t $SAGE_ROOT/devel/sagenb-main`: 1) README.rst is getting doctested, which throws up a password prompt; 2) there's a tab character in flask_version/base.py .

Why were these not showing up in earlier doctests? They're not new problems, as far as I can tell.



---

archive/issue_comments_118161.json:
```json
{
    "body": "OK, uploaded a new SPKG to the same URL. Now it definitely does pass all its doctests.",
    "created_at": "2012-03-18T00:58:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118161",
    "user": "kini"
}
```

OK, uploaded a new SPKG to the same URL. Now it definitely does pass all its doctests.



---

archive/issue_comments_118162.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-03-18T00:58:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118162",
    "user": "kini"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_118163.json:
```json
{
    "body": "Just curious, the new spkg probably has Twisted 12.0, right?  Will people at #11874 complain that Twisted was updated in the spkg?",
    "created_at": "2012-03-18T02:09:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118163",
    "user": "jason"
}
```

Just curious, the new spkg probably has Twisted 12.0, right?  Will people at #11874 complain that Twisted was updated in the spkg?



---

archive/issue_comments_118164.json:
```json
{
    "body": "Yes, it contains Twisted 12. Yes, they might complain... feel free to create your own spkg with Twisted 11 instead - I might have messed something up anyway :)",
    "created_at": "2012-03-18T02:28:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118164",
    "user": "kini"
}
```

Yes, it contains Twisted 12. Yes, they might complain... feel free to create your own spkg with Twisted 11 instead - I might have messed something up anyway :)



---

archive/issue_comments_118165.json:
```json
{
    "body": "I won't have very much time this week to work on this, so I'm happy letting you make an spkg.",
    "created_at": "2012-03-18T02:43:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118165",
    "user": "jason"
}
```

I won't have very much time this week to work on this, so I'm happy letting you make an spkg.



---

archive/issue_comments_118166.json:
```json
{
    "body": "Replying to [comment:138 kini]:\n> Yes, it contains Twisted 12. Yes, they might complain... feel free to create your own spkg with Twisted 11 instead - I might have messed something up anyway :)\n\nNo complaints from me. \nActually, with the old sagenb 0.9.0 (ie with Twisted 11), when I replaced sagenb spkg in Sage 5.0.beta8  with 0.9.0, and then followed the procedure on #11874, I got Sage built with Twisted 11.1, instead of Twisted 12. So Twisted 12 was sneaking in as it was getting installed before the installation of the old sagenb 0.9.0.",
    "created_at": "2012-03-18T04:14:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118166",
    "user": "dimpase"
}
```

Replying to [comment:138 kini]:
> Yes, it contains Twisted 12. Yes, they might complain... feel free to create your own spkg with Twisted 11 instead - I might have messed something up anyway :)

No complaints from me. 
Actually, with the old sagenb 0.9.0 (ie with Twisted 11), when I replaced sagenb spkg in Sage 5.0.beta8  with 0.9.0, and then followed the procedure on #11874, I got Sage built with Twisted 11.1, instead of Twisted 12. So Twisted 12 was sneaking in as it was getting installed before the installation of the old sagenb 0.9.0.



---

archive/issue_comments_118167.json:
```json
{
    "body": "Replying to [comment:139 jason]:\n> I won't have very much time this week to work on this, so I'm happy letting you make an spkg.\n\nOK, just checking that I did everything right... first I cloned the git repo to another git repo (to just get master and no other commits), then used hg-git to pull that clone into a newly-initialized hg repo. Then I ran ./spkg-dist to create the spkg. Did I do anything wrong?",
    "created_at": "2012-03-18T17:55:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118167",
    "user": "kini"
}
```

Replying to [comment:139 jason]:
> I won't have very much time this week to work on this, so I'm happy letting you make an spkg.

OK, just checking that I did everything right... first I cloned the git repo to another git repo (to just get master and no other commits), then used hg-git to pull that clone into a newly-initialized hg repo. Then I ran ./spkg-dist to create the spkg. Did I do anything wrong?



---

archive/issue_comments_118168.json:
```json
{
    "body": "I again get\n\n```\nsage -t  -force_lib devel/sagenb-main/sagenb/misc/sageinspect.py\n**********************************************************************\nFile \"/scratch/jdemeyer/merger/sage-5.0.notebook/devel/sagenb-main/sagenb/misc/sageinspect.py\", line 653:\n    sage: sage_getargspec(Poset)\nExpected:\n    (['data', 'element_labels', 'cover_relations'], None, None, (None, None, False))\nGot:\n    (['data', 'element_labels', 'cover_relations', 'category', 'facade', 'key'], None, None, (None, None, False, None, None, None))\n**********************************************************************\n```\n",
    "created_at": "2012-03-20T07:41:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118168",
    "user": "jdemeyer"
}
```

I again get

```
sage -t  -force_lib devel/sagenb-main/sagenb/misc/sageinspect.py
**********************************************************************
File "/scratch/jdemeyer/merger/sage-5.0.notebook/devel/sagenb-main/sagenb/misc/sageinspect.py", line 653:
    sage: sage_getargspec(Poset)
Expected:
    (['data', 'element_labels', 'cover_relations'], None, None, (None, None, False))
Got:
    (['data', 'element_labels', 'cover_relations', 'category', 'facade', 'key'], None, None, (None, None, False, None, None, None))
**********************************************************************
```




---

archive/issue_comments_118169.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-03-20T07:41:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118169",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_118170.json:
```json
{
    "body": "Update instructions to reflect another patch on #11874 (I didn't test the instructions, though!)",
    "created_at": "2012-03-30T06:22:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118170",
    "user": "jason"
}
```

Update instructions to reflect another patch on #11874 (I didn't test the instructions, though!)



---

archive/issue_comments_118171.json:
```json
{
    "body": "Update to new jmol patch for `SAGE_ROOT`.\n----\nAlso, after applying the changes from #11874, #11503 and this ticket, the doctest of `devel/sagenb-main/sagenb` passes. \n\nAfter these changes however, there is a problem with typesetting maths and I get this notice on evaluation of **every** cell, whether it is plot or maths.\n\n`Error typesetting mathematics.`\n\nAnd sure enough, something as simple as `view(2+2)` shows the latex code instead of the maths. jsmath is loaded and the button is present on the right hand corner.\n\nUPDATE: I have same problem with sagenb from github with mathjax instead of jsmath. Seems like something is broken in sage and not sagenb.",
    "created_at": "2012-04-02T12:16:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118171",
    "user": "ppurka"
}
```

Update to new jmol patch for `SAGE_ROOT`.
----
Also, after applying the changes from #11874, #11503 and this ticket, the doctest of `devel/sagenb-main/sagenb` passes. 

After these changes however, there is a problem with typesetting maths and I get this notice on evaluation of **every** cell, whether it is plot or maths.

`Error typesetting mathematics.`

And sure enough, something as simple as `view(2+2)` shows the latex code instead of the maths. jsmath is loaded and the button is present on the right hand corner.

UPDATE: I have same problem with sagenb from github with mathjax instead of jsmath. Seems like something is broken in sage and not sagenb.



---

archive/issue_comments_118172.json:
```json
{
    "body": "We would like to release sage-5.0 reasonably soon, and it's too late to get this still in sage-5.0.",
    "created_at": "2012-04-08T08:38:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118172",
    "user": "jdemeyer"
}
```

We would like to release sage-5.0 reasonably soon, and it's too late to get this still in sage-5.0.



---

archive/issue_comments_118173.json:
```json
{
    "body": "Jeroen: Either the version you installed was from the URL in the ticket description (the one Jason uploaded a while ago) and not the SPKG I posted in a comment recently, or I screwed up making my SPKG and mistakenly packaged an old version of the sagenb code. So to cover both possibilities, I changed the link in the ticket description to point to the SPKG I'm hosting, and I also repacked the SPKG and reuploaded it. It passes doctests on my machine. Can you try it again?",
    "created_at": "2012-04-08T18:40:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118173",
    "user": "kini"
}
```

Jeroen: Either the version you installed was from the URL in the ticket description (the one Jason uploaded a while ago) and not the SPKG I posted in a comment recently, or I screwed up making my SPKG and mistakenly packaged an old version of the sagenb code. So to cover both possibilities, I changed the link in the ticket description to point to the SPKG I'm hosting, and I also repacked the SPKG and reuploaded it. It passes doctests on my machine. Can you try it again?



---

archive/issue_comments_118174.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-04-08T18:40:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118174",
    "user": "kini"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_118175.json:
```json
{
    "body": "Replying to [comment:146 kini]:\n> Jeroen: Either the version you installed was from the URL in the ticket description (the one Jason uploaded a while ago)\n**of course** the version I installed was from the URL in the ticket description.  I'm not going to read 146 comments to find out the URL of the spkg to test.",
    "created_at": "2012-04-08T18:48:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118175",
    "user": "jdemeyer"
}
```

Replying to [comment:146 kini]:
> Jeroen: Either the version you installed was from the URL in the ticket description (the one Jason uploaded a while ago)
**of course** the version I installed was from the URL in the ticket description.  I'm not going to read 146 comments to find out the URL of the spkg to test.



---

archive/issue_comments_118176.json:
```json
{
    "body": "Right, sorry about that. From your statement that you \"again\" saw the doctest errors, I assumed that at some point you had *not* seen the errors, which would have meant that you had installed my SPKG at some point. But I guess you just meant that you were continuing to see the doctest errors. My mistake :)",
    "created_at": "2012-04-08T18:51:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118176",
    "user": "kini"
}
```

Right, sorry about that. From your statement that you "again" saw the doctest errors, I assumed that at some point you had *not* seen the errors, which would have meant that you had installed my SPKG at some point. But I guess you just meant that you were continuing to see the doctest errors. My mistake :)



---

archive/issue_comments_118177.json:
```json
{
    "body": "Replying to [comment:148 kini]:\n> Right, sorry about that. From your statement that you \"again\" saw the doctest errors, I assumed that at some point you had *not* seen the errors, which would have meant that you had installed my SPKG at some point.\nMaybe I had installed your SPKG at some point, then later forgot about your SPKG and installed Jason's SPKG again.  I don't remember...",
    "created_at": "2012-04-08T18:53:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118177",
    "user": "jdemeyer"
}
```

Replying to [comment:148 kini]:
> Right, sorry about that. From your statement that you "again" saw the doctest errors, I assumed that at some point you had *not* seen the errors, which would have meant that you had installed my SPKG at some point.
Maybe I had installed your SPKG at some point, then later forgot about your SPKG and installed Jason's SPKG again.  I don't remember...



---

archive/issue_comments_118178.json:
```json
{
    "body": "Fair enough - anyway it's my fault for not putting the correct info in the ticket description.",
    "created_at": "2012-04-08T19:04:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118178",
    "user": "kini"
}
```

Fair enough - anyway it's my fault for not putting the correct info in the ticket description.



---

archive/issue_comments_118179.json:
```json
{
    "body": "update jmol spkg to match #11503",
    "created_at": "2012-04-08T22:09:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118179",
    "user": "gutow"
}
```

update jmol spkg to match #11503



---

archive/issue_comments_118180.json:
```json
{
    "body": "Replying to [comment:145 jdemeyer]:\n> We would like to release sage-5.0 reasonably soon, and it's too late to get this still in sage-5.0.\n\nI agree with this decision.",
    "created_at": "2012-04-09T03:29:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118180",
    "user": "was"
}
```

Replying to [comment:145 jdemeyer]:
> We would like to release sage-5.0 reasonably soon, and it's too late to get this still in sage-5.0.

I agree with this decision.



---

archive/issue_comments_118181.json:
```json
{
    "body": "Replying to [comment:152 was]:\n> Replying to [comment:145 jdemeyer]:\n> > We would like to release sage-5.0 reasonably soon, and it's too late to get this still in sage-5.0.\n> \n> I agree with this decision.\n\nSame here. I had to put the proverbial rallying flag down due to work, but no one has really picked it back up again and finished the job.  I'll be able to work on this more in a few weeks after our classes get out, if someone else hasn't started pushing it again by then.",
    "created_at": "2012-04-09T11:41:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118181",
    "user": "jason"
}
```

Replying to [comment:152 was]:
> Replying to [comment:145 jdemeyer]:
> > We would like to release sage-5.0 reasonably soon, and it's too late to get this still in sage-5.0.
> 
> I agree with this decision.

Same here. I had to put the proverbial rallying flag down due to work, but no one has really picked it back up again and finished the job.  I'll be able to work on this more in a few weeks after our classes get out, if someone else hasn't started pushing it again by then.



---

archive/issue_comments_118182.json:
```json
{
    "body": "What exactly remains to be done, other than the minor hiccup on #11503?",
    "created_at": "2012-04-09T13:02:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118182",
    "user": "kini"
}
```

What exactly remains to be done, other than the minor hiccup on #11503?



---

archive/issue_comments_118183.json:
```json
{
    "body": "What I would do to answer that question is go through each ticket dependency and see if it is positive-reviewed.  If not, then that ticket needs to be done :).  I don't think there is much left to be done.",
    "created_at": "2012-04-09T13:18:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118183",
    "user": "jason"
}
```

What I would do to answer that question is go through each ticket dependency and see if it is positive-reviewed.  If not, then that ticket needs to be done :).  I don't think there is much left to be done.



---

archive/issue_comments_118184.json:
```json
{
    "body": "Replying to [comment:155 jason]:\n> What I would do to answer that question is go through each ticket dependency and see if it is positive-reviewed.  If not, then that ticket needs to be done :).  I don't think there is much left to be done.\n\nI think one should provide a recipe for preparing a sage distribution with all these patches applied to be built from scratch, rather than patching an already built distribution. (Assuming one has hg (or a previous version of Sage) installed system-wide).\nThat is, most of these patches are to be applied to sage-??? spkg.\n\nIt makes more sense this way, as the changes are so extensive that it's time-consuming, and more error-prone, I think, to apply these to an already built installation of Sage.",
    "created_at": "2012-04-10T02:12:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118184",
    "user": "dimpase"
}
```

Replying to [comment:155 jason]:
> What I would do to answer that question is go through each ticket dependency and see if it is positive-reviewed.  If not, then that ticket needs to be done :).  I don't think there is much left to be done.

I think one should provide a recipe for preparing a sage distribution with all these patches applied to be built from scratch, rather than patching an already built distribution. (Assuming one has hg (or a previous version of Sage) installed system-wide).
That is, most of these patches are to be applied to sage-??? spkg.

It makes more sense this way, as the changes are so extensive that it's time-consuming, and more error-prone, I think, to apply these to an already built installation of Sage.



---

archive/issue_comments_118185.json:
```json
{
    "body": "Replying to [comment:157 dimpase]:\n> I think one should provide a recipe for preparing a sage distribution with all these patches applied to be built from scratch, rather than patching an already built distribution. (Assuming one has hg (or a previous version of Sage) installed system-wide).\n> That is, most of these patches are to be applied to sage-??? spkg.\n\nI have made [http://boxen.math.washington.edu/home/release/sage-5.0.notebook/sage-5.0.notebook.tar](http://boxen.math.washington.edu/home/release/sage-5.0.notebook/sage-5.0.notebook.tar) to test this ticket and its dependencies.",
    "created_at": "2012-04-11T06:56:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118185",
    "user": "jdemeyer"
}
```

Replying to [comment:157 dimpase]:
> I think one should provide a recipe for preparing a sage distribution with all these patches applied to be built from scratch, rather than patching an already built distribution. (Assuming one has hg (or a previous version of Sage) installed system-wide).
> That is, most of these patches are to be applied to sage-??? spkg.

I have made [http://boxen.math.washington.edu/home/release/sage-5.0.notebook/sage-5.0.notebook.tar](http://boxen.math.washington.edu/home/release/sage-5.0.notebook/sage-5.0.notebook.tar) to test this ticket and its dependencies.



---

archive/issue_comments_118186.json:
```json
{
    "body": "This fails to install on OS X 10.4 PPC:\n\n```\nProcessing pyOpenSSL-0.13.tar.gz\nRunning pyOpenSSL-0.13/setup.py -q bdist_egg --dist-dir /tmp/easy_install-h8pJu5/pyOpenSSL-0.13/egg-dist-tmp-Awaj3a\nwarning: no previously-included files matching '*.pyc' found anywhere in distribution\nOpenSSL/ssl/connection.c: In function 'ssl_Connection_set_context':\nOpenSSL/ssl/connection.c:289:5: warning: implicit declaration of function 'SSL_set_SSL_CTX' [-Wimplicit-function-declaration]\nOpenSSL/ssl/connection.c: In function 'ssl_Connection_get_servername':\nOpenSSL/ssl/connection.c:313:16: error: 'TLSEXT_NAMETYPE_host_name' undeclared (first use in this function)\nOpenSSL/ssl/connection.c:313:16: note: each undeclared identifier is reported only once for each function it appears in\nOpenSSL/ssl/connection.c:320:5: warning: implicit declaration of function 'SSL_get_servername' [-Wimplicit-function-declaration]\nOpenSSL/ssl/connection.c:320:10: warning: assignment makes pointer from integer without a cast [enabled by default]\nOpenSSL/ssl/connection.c: In function 'ssl_Connection_set_tlsext_host_name':\nOpenSSL/ssl/connection.c:346:5: warning: implicit declaration of function 'SSL_set_tlsext_host_name' [-Wimplicit-function-declaration]\nerror: Setup script exited with error: command 'gcc' failed with exit status 1\nError installing pyOpenSSL-0.13.tar.gz.\n```\n",
    "created_at": "2012-04-11T06:56:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118186",
    "user": "jdemeyer"
}
```

This fails to install on OS X 10.4 PPC:

```
Processing pyOpenSSL-0.13.tar.gz
Running pyOpenSSL-0.13/setup.py -q bdist_egg --dist-dir /tmp/easy_install-h8pJu5/pyOpenSSL-0.13/egg-dist-tmp-Awaj3a
warning: no previously-included files matching '*.pyc' found anywhere in distribution
OpenSSL/ssl/connection.c: In function 'ssl_Connection_set_context':
OpenSSL/ssl/connection.c:289:5: warning: implicit declaration of function 'SSL_set_SSL_CTX' [-Wimplicit-function-declaration]
OpenSSL/ssl/connection.c: In function 'ssl_Connection_get_servername':
OpenSSL/ssl/connection.c:313:16: error: 'TLSEXT_NAMETYPE_host_name' undeclared (first use in this function)
OpenSSL/ssl/connection.c:313:16: note: each undeclared identifier is reported only once for each function it appears in
OpenSSL/ssl/connection.c:320:5: warning: implicit declaration of function 'SSL_get_servername' [-Wimplicit-function-declaration]
OpenSSL/ssl/connection.c:320:10: warning: assignment makes pointer from integer without a cast [enabled by default]
OpenSSL/ssl/connection.c: In function 'ssl_Connection_set_tlsext_host_name':
OpenSSL/ssl/connection.c:346:5: warning: implicit declaration of function 'SSL_set_tlsext_host_name' [-Wimplicit-function-declaration]
error: Setup script exited with error: command 'gcc' failed with exit status 1
Error installing pyOpenSSL-0.13.tar.gz.
```




---

archive/issue_comments_118187.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-04-11T06:56:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118187",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_118188.json:
```json
{
    "body": "This also fails to install on the Skynet machine silius (SUSE ES 11 SP1 ppc64):\n\n```\nProcessing pyOpenSSL-0.13.tar.gz\nRunning pyOpenSSL-0.13/setup.py -q bdist_egg --dist-dir /tmp/easy_install-_3ma5D/pyOpenSSL-0.13/egg-dist-tmp-efVFsy\nwarning: no previously-included files matching '*.pyc' found anywhere in distribution\nIn file included from OpenSSL/crypto/crypto.h:30:0,\n                 from OpenSSL/crypto/crypto.c:16:\nOpenSSL/crypto/x509.h:17:25: fatal error: openssl/ssl.h: No such file or directory\ncompilation terminated.\nerror: Setup script exited with error: command 'gcc' failed with exit status 1\nError installing pyOpenSSL-0.13.tar.gz.\n```\n",
    "created_at": "2012-04-11T06:59:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118188",
    "user": "jdemeyer"
}
```

This also fails to install on the Skynet machine silius (SUSE ES 11 SP1 ppc64):

```
Processing pyOpenSSL-0.13.tar.gz
Running pyOpenSSL-0.13/setup.py -q bdist_egg --dist-dir /tmp/easy_install-_3ma5D/pyOpenSSL-0.13/egg-dist-tmp-efVFsy
warning: no previously-included files matching '*.pyc' found anywhere in distribution
In file included from OpenSSL/crypto/crypto.h:30:0,
                 from OpenSSL/crypto/crypto.c:16:
OpenSSL/crypto/x509.h:17:25: fatal error: openssl/ssl.h: No such file or directory
compilation terminated.
error: Setup script exited with error: command 'gcc' failed with exit status 1
Error installing pyOpenSSL-0.13.tar.gz.
```




---

archive/issue_comments_118189.json:
```json
{
    "body": "According to http://stackoverflow.com/questions/7340784/easy-install-pyopenssl-error we should be able to fix this by requiring pyOpenSSL 0.12 or lower.\n\nEdit: er, I meant the problem on OS X - dunno about this silius one.",
    "created_at": "2012-04-11T07:01:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118189",
    "user": "kini"
}
```

According to http://stackoverflow.com/questions/7340784/easy-install-pyopenssl-error we should be able to fix this by requiring pyOpenSSL 0.12 or lower.

Edit: er, I meant the problem on OS X - dunno about this silius one.



---

archive/issue_comments_118190.json:
```json
{
    "body": "What's the situation with OpenSSL support anyway?  I believe it was decided *not* to require OpenSSL as dependency?  But there have been many discussions about this, I might have lost track.",
    "created_at": "2012-04-11T07:04:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118190",
    "user": "jdemeyer"
}
```

What's the situation with OpenSSL support anyway?  I believe it was decided *not* to require OpenSSL as dependency?  But there have been many discussions about this, I might have lost track.



---

archive/issue_comments_118191.json:
```json
{
    "body": "Also on the Skynet machine cleo (RHEL 5.3 ia64):\n\n```\nProcessing pyOpenSSL-0.13.tar.gz\nRunning pyOpenSSL-0.13/setup.py -q bdist_egg --dist-dir /tmp/easy_install-PQFiHf/pyOpenSSL-0.13/egg-dist-tmp-XsFtPR\nwarning: no previously-included files matching '*.pyc' found anywhere in distribution\nOpenSSL/ssl/connection.c: In function ssl_Connection_set_context:\nOpenSSL/ssl/connection.c:289:5: warning: implicit declaration of function SSL_set_SSL_CTX [-Wimplicit-function-declaration]\nOpenSSL/ssl/connection.c: In function ssl_Connection_get_servername:\nOpenSSL/ssl/connection.c:313:16: error: TLSEXT_NAMETYPE_host_name undeclared (first use in this function)\nOpenSSL/ssl/connection.c:313:16: note: each undeclared identifier is reported only once for each function it appears in\nOpenSSL/ssl/connection.c:320:5: warning: implicit declaration of function SSL_get_servername [-Wimplicit-function-declaration]\nOpenSSL/ssl/connection.c:320:10: warning: assignment makes pointer from integer without a cast [enabled by default]\nOpenSSL/ssl/connection.c: In function ssl_Connection_set_tlsext_host_name:\nOpenSSL/ssl/connection.c:346:5: warning: implicit declaration of function SSL_set_tlsext_host_name [-Wimplicit-function-declaration]\nerror: Setup script exited with error: command 'gcc' failed with exit status 1\nError installing pyOpenSSL-0.13.tar.gz.\n```\n",
    "created_at": "2012-04-11T12:04:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118191",
    "user": "jdemeyer"
}
```

Also on the Skynet machine cleo (RHEL 5.3 ia64):

```
Processing pyOpenSSL-0.13.tar.gz
Running pyOpenSSL-0.13/setup.py -q bdist_egg --dist-dir /tmp/easy_install-PQFiHf/pyOpenSSL-0.13/egg-dist-tmp-XsFtPR
warning: no previously-included files matching '*.pyc' found anywhere in distribution
OpenSSL/ssl/connection.c: In function ssl_Connection_set_context:
OpenSSL/ssl/connection.c:289:5: warning: implicit declaration of function SSL_set_SSL_CTX [-Wimplicit-function-declaration]
OpenSSL/ssl/connection.c: In function ssl_Connection_get_servername:
OpenSSL/ssl/connection.c:313:16: error: TLSEXT_NAMETYPE_host_name undeclared (first use in this function)
OpenSSL/ssl/connection.c:313:16: note: each undeclared identifier is reported only once for each function it appears in
OpenSSL/ssl/connection.c:320:5: warning: implicit declaration of function SSL_get_servername [-Wimplicit-function-declaration]
OpenSSL/ssl/connection.c:320:10: warning: assignment makes pointer from integer without a cast [enabled by default]
OpenSSL/ssl/connection.c: In function ssl_Connection_set_tlsext_host_name:
OpenSSL/ssl/connection.c:346:5: warning: implicit declaration of function SSL_set_tlsext_host_name [-Wimplicit-function-declaration]
error: Setup script exited with error: command 'gcc' failed with exit status 1
Error installing pyOpenSSL-0.13.tar.gz.
```




---

archive/issue_comments_118192.json:
```json
{
    "body": "On the Skynet machine iras (SUSE ES10 ia64):\n\n```\nProcessing pyOpenSSL-0.13.tar.gz\nRunning pyOpenSSL-0.13/setup.py -q bdist_egg --dist-dir /tmp/easy_install-9gn9yE/pyOpenSSL-0.13/egg-dist-tmp-4CCNMQ\nwarning: no previously-included files matching '*.pyc' found anywhere in distribution\nIn file included from OpenSSL/crypto/crypto.h:30:0,\n                 from OpenSSL/crypto/crypto.c:16:\nOpenSSL/crypto/x509.h:17:25: fatal error: openssl/ssl.h: No such file or directory\ncompilation terminated.\nerror: Setup script exited with error: command 'gcc' failed with exit status 1\nError installing pyOpenSSL-0.13.tar.gz.\n```\n",
    "created_at": "2012-04-11T17:41:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118192",
    "user": "jdemeyer"
}
```

On the Skynet machine iras (SUSE ES10 ia64):

```
Processing pyOpenSSL-0.13.tar.gz
Running pyOpenSSL-0.13/setup.py -q bdist_egg --dist-dir /tmp/easy_install-9gn9yE/pyOpenSSL-0.13/egg-dist-tmp-4CCNMQ
warning: no previously-included files matching '*.pyc' found anywhere in distribution
In file included from OpenSSL/crypto/crypto.h:30:0,
                 from OpenSSL/crypto/crypto.c:16:
OpenSSL/crypto/x509.h:17:25: fatal error: openssl/ssl.h: No such file or directory
compilation terminated.
error: Setup script exited with error: command 'gcc' failed with exit status 1
Error installing pyOpenSSL-0.13.tar.gz.
```




---

archive/issue_comments_118193.json:
```json
{
    "body": "On UGA rosemary (RHEL 5.6 x86_64):\n\n```\nProcessing pyOpenSSL-0.13.tar.gz\nRunning pyOpenSSL-0.13/setup.py -q bdist_egg --dist-dir /tmp/easy_install-urCg6W/pyOpenSSL-0.13/egg-dist-tmp-fw0DPw\nwarning: no previously-included files matching '*.pyc' found anywhere in distribution\nOpenSSL/ssl/connection.c: In function \u2018ssl_Connection_set_context\u2019:\nOpenSSL/ssl/connection.c:289:5: warning: implicit declaration of function \u2018SSL_set_SSL_CTX\u2019 [-Wimplicit-function-declaration]\nOpenSSL/ssl/connection.c: In function \u2018ssl_Connection_get_servername\u2019:\nOpenSSL/ssl/connection.c:313:16: error: \u2018TLSEXT_NAMETYPE_host_name\u2019 undeclared (first use in this function)\nOpenSSL/ssl/connection.c:313:16: note: each undeclared identifier is reported only once for each function it appears in\nOpenSSL/ssl/connection.c:320:5: warning: implicit declaration of function \u2018SSL_get_servername\u2019 [-Wimplicit-function-declaration]\nOpenSSL/ssl/connection.c:320:10: warning: assignment makes pointer from integer without a cast [enabled by default]\nOpenSSL/ssl/connection.c: In function \u2018ssl_Connection_set_tlsext_host_name\u2019:\nOpenSSL/ssl/connection.c:346:5: warning: implicit declaration of function \u2018SSL_set_tlsext_host_name\u2019 [-Wimplicit-function-declaration]\nerror: Setup script exited with error: command 'gcc' failed with exit status 1\nError installing pyOpenSSL-0.13.tar.gz.\n```\n",
    "created_at": "2012-04-11T17:43:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118193",
    "user": "jdemeyer"
}
```

On UGA rosemary (RHEL 5.6 x86_64):

```
Processing pyOpenSSL-0.13.tar.gz
Running pyOpenSSL-0.13/setup.py -q bdist_egg --dist-dir /tmp/easy_install-urCg6W/pyOpenSSL-0.13/egg-dist-tmp-fw0DPw
warning: no previously-included files matching '*.pyc' found anywhere in distribution
OpenSSL/ssl/connection.c: In function ‘ssl_Connection_set_context’:
OpenSSL/ssl/connection.c:289:5: warning: implicit declaration of function ‘SSL_set_SSL_CTX’ [-Wimplicit-function-declaration]
OpenSSL/ssl/connection.c: In function ‘ssl_Connection_get_servername’:
OpenSSL/ssl/connection.c:313:16: error: ‘TLSEXT_NAMETYPE_host_name’ undeclared (first use in this function)
OpenSSL/ssl/connection.c:313:16: note: each undeclared identifier is reported only once for each function it appears in
OpenSSL/ssl/connection.c:320:5: warning: implicit declaration of function ‘SSL_get_servername’ [-Wimplicit-function-declaration]
OpenSSL/ssl/connection.c:320:10: warning: assignment makes pointer from integer without a cast [enabled by default]
OpenSSL/ssl/connection.c: In function ‘ssl_Connection_set_tlsext_host_name’:
OpenSSL/ssl/connection.c:346:5: warning: implicit declaration of function ‘SSL_set_tlsext_host_name’ [-Wimplicit-function-declaration]
error: Setup script exited with error: command 'gcc' failed with exit status 1
Error installing pyOpenSSL-0.13.tar.gz.
```




---

archive/issue_comments_118194.json:
```json
{
    "body": "Replying to [comment:162 jdemeyer]:\n> What's the situation with OpenSSL support anyway?  I believe it was decided *not* to require OpenSSL as dependency?  But there have been many discussions about this, I might have lost track.\n\nSee\nhttps://groups.google.com/d/msg/sage-devel/iwrF8_kGLzM/32HIts7EPKQJ\n\nso we'll require openssl, but we need to sort out the versions issue, requiring pyOpenSSL 0.12 or lower, as Keshav suggests.",
    "created_at": "2012-04-14T05:38:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118194",
    "user": "dimpase"
}
```

Replying to [comment:162 jdemeyer]:
> What's the situation with OpenSSL support anyway?  I believe it was decided *not* to require OpenSSL as dependency?  But there have been many discussions about this, I might have lost track.

See
https://groups.google.com/d/msg/sage-devel/iwrF8_kGLzM/32HIts7EPKQJ

so we'll require openssl, but we need to sort out the versions issue, requiring pyOpenSSL 0.12 or lower, as Keshav suggests.



---

archive/issue_comments_118195.json:
```json
{
    "body": "New SPKG with pyOpenSSL 0.12 uploaded. All tests pass on sage.math. Jeroen, can you test it on the buildbots again? It seems like all the errors you reported are coming from pyOpenSSL so I hope downgrading it will solve them...",
    "created_at": "2012-04-15T11:52:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118195",
    "user": "kini"
}
```

New SPKG with pyOpenSSL 0.12 uploaded. All tests pass on sage.math. Jeroen, can you test it on the buildbots again? It seems like all the errors you reported are coming from pyOpenSSL so I hope downgrading it will solve them...



---

archive/issue_comments_118196.json:
```json
{
    "body": "Sorry, I guess I should mark this needs_review again.",
    "created_at": "2012-04-15T16:57:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118196",
    "user": "kini"
}
```

Sorry, I guess I should mark this needs_review again.



---

archive/issue_comments_118197.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-04-15T16:57:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118197",
    "user": "kini"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_118198.json:
```json
{
    "body": "I tried to follow the instructions, but the patch from #11874 fails to apply. Interesting that it was possible to create a testing release, then...",
    "created_at": "2012-04-15T19:01:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118198",
    "user": "SimonKing"
}
```

I tried to follow the instructions, but the patch from #11874 fails to apply. Interesting that it was possible to create a testing release, then...



---

archive/issue_comments_118199.json:
```json
{
    "body": "Huh, really? For me, the only dependency that didn't apply was #12327. #11874 worked fine for me.",
    "created_at": "2012-04-15T19:07:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118199",
    "user": "kini"
}
```

Huh, really? For me, the only dependency that didn't apply was #12327. #11874 worked fine for me.



---

archive/issue_comments_118200.json:
```json
{
    "body": "I think I start to understand. It does not apply with sage-5.0.prealpha0. But in sage-5.0.beta13, the files look totally different.\n\nSo, I may (at some point) try again with the latest beta.",
    "created_at": "2012-04-15T19:15:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118200",
    "user": "SimonKing"
}
```

I think I start to understand. It does not apply with sage-5.0.prealpha0. But in sage-5.0.beta13, the files look totally different.

So, I may (at some point) try again with the latest beta.



---

archive/issue_comments_118201.json:
```json
{
    "body": "The instructions did not tell that one is supposed to start with the latest beta version. Starting with 5.0.prealpha0, things fail to apply.",
    "created_at": "2012-04-15T19:18:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118201",
    "user": "SimonKing"
}
```

The instructions did not tell that one is supposed to start with the latest beta version. Starting with 5.0.prealpha0, things fail to apply.



---

archive/issue_comments_118202.json:
```json
{
    "body": "Replying to [comment:173 SimonKing]:\n> The instructions did not tell that one is supposed to start with the latest beta version. Starting with 5.0.prealpha0, things fail to apply.\nAren't the milestone setting to 5.1 and the fact that it was only marked as \"needs review\" a day or so ago  indications that one has to use a very recent beta?",
    "created_at": "2012-04-16T03:48:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118202",
    "user": "dimpase"
}
```

Replying to [comment:173 SimonKing]:
> The instructions did not tell that one is supposed to start with the latest beta version. Starting with 5.0.prealpha0, things fail to apply.
Aren't the milestone setting to 5.1 and the fact that it was only marked as "needs review" a day or so ago  indications that one has to use a very recent beta?



---

archive/issue_comments_118203.json:
```json
{
    "body": "According to Jeroen's official policy, all tickets are required to have instructions that apply to the latest beta at all times. So this really should not be surprising... regardless of how recently this was marked as \"needs review\" or the milestone setting.",
    "created_at": "2012-04-16T04:49:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118203",
    "user": "kini"
}
```

According to Jeroen's official policy, all tickets are required to have instructions that apply to the latest beta at all times. So this really should not be surprising... regardless of how recently this was marked as "needs review" or the milestone setting.



---

archive/issue_comments_118204.json:
```json
{
    "body": "I think the \"dependencies\" field is even more important than the explicit instructions.  The dependencies are an easy way to see that a ticket with positive_review cannot be merged because it depends on tickets which don't have positive_review.",
    "created_at": "2012-04-16T08:03:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118204",
    "user": "jdemeyer"
}
```

I think the "dependencies" field is even more important than the explicit instructions.  The dependencies are an easy way to see that a ticket with positive_review cannot be merged because it depends on tickets which don't have positive_review.



---

archive/issue_comments_118205.json:
```json
{
    "body": "Installation on Skynet silius (SUSE ES 11 SP1 ppc64) still fails, presumably because OpenSSL isn't installed:\n\n```\nProcessing pyOpenSSL-0.12.tar.gz\nRunning pyOpenSSL-0.12/setup.py -q bdist_egg --dist-dir /tmp/easy_install-cWTpWy/pyOpenSSL-0.12/egg-dist-tmp-iS5i6u\nwarning: no files found matching 'COPYING'\nwarning: no previously-included files matching '*.pyc' found anywhere in distribution\nIn file included from OpenSSL/crypto/crypto.h:17:0,\n                 from OpenSSL/crypto/crypto.c:16:\nOpenSSL/crypto/x509.h:17:25: fatal error: openssl/ssl.h: No such file or directory\ncompilation terminated.\nerror: Setup script exited with error: command 'gcc' failed with exit status 1\nError installing pyOpenSSL-0.12.tar.gz.\n```\n\n\nI'm going to try to install OpenSSL and try again.",
    "created_at": "2012-04-16T08:16:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118205",
    "user": "jdemeyer"
}
```

Installation on Skynet silius (SUSE ES 11 SP1 ppc64) still fails, presumably because OpenSSL isn't installed:

```
Processing pyOpenSSL-0.12.tar.gz
Running pyOpenSSL-0.12/setup.py -q bdist_egg --dist-dir /tmp/easy_install-cWTpWy/pyOpenSSL-0.12/egg-dist-tmp-iS5i6u
warning: no files found matching 'COPYING'
warning: no previously-included files matching '*.pyc' found anywhere in distribution
In file included from OpenSSL/crypto/crypto.h:17:0,
                 from OpenSSL/crypto/crypto.c:16:
OpenSSL/crypto/x509.h:17:25: fatal error: openssl/ssl.h: No such file or directory
compilation terminated.
error: Setup script exited with error: command 'gcc' failed with exit status 1
Error installing pyOpenSSL-0.12.tar.gz.
```


I'm going to try to install OpenSSL and try again.



---

archive/issue_comments_118206.json:
```json
{
    "body": "Replying to [comment:177 jdemeyer]:\n> Error installing pyOpenSSL-0.12.tar.gz.\n\nWhen trying to build sage-5.1.notebook, I get a similar error with\n\n```\nking@mpc622:~$ uname -a\nLinux mpc622 2.6.34.linuxpool #0 SMP PREEMPT Wed May 19 16:32:19 CEST 2010 x86_64 GNU/Linux\nking@mpc622:~$ cat /etc/issue\nDebian GNU/Linux 6.0 \\n \\l\n\nking@mpc622:~$ cat /proc/cpuinfo \nprocessor\t: 0\nvendor_id\t: GenuineIntel\ncpu family\t: 6\nmodel\t\t: 37\nmodel name\t: Intel(R) Core(TM) i3 CPU         530  @ 2.93GHz\nstepping\t: 2\ncpu MHz\t\t: 1197.000\ncache size\t: 4096 KB\nphysical id\t: 0\nsiblings\t: 4\ncore id\t\t: 0\ncpu cores\t: 2\napicid\t\t: 0\ninitial apicid\t: 0\nfpu\t\t: yes\nfpu_exception\t: yes\ncpuid level\t: 11\nwp\t\t: yes\nflags\t\t: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts rep_good xtopology nonstop_tsc aperfmperf pni dtes64 monitor ds_cpl vmx est tm2 ssse3 cx16 xtpr pdcm sse4_1 sse4_2 popcnt lahf_lm arat tpr_shadow vnmi flexpriority ept vpid\nbogomips\t: 5852.75\nclflush size\t: 64\ncache_alignment\t: 64\naddress sizes\t: 36 bits physical, 48 bits virtual\npower management:\n\nprocessor\t: 1\nvendor_id\t: GenuineIntel\ncpu family\t: 6\nmodel\t\t: 37\nmodel name\t: Intel(R) Core(TM) i3 CPU         530  @ 2.93GHz\nstepping\t: 2\ncpu MHz\t\t: 1197.000\ncache size\t: 4096 KB\nphysical id\t: 0\nsiblings\t: 4\ncore id\t\t: 0\ncpu cores\t: 2\napicid\t\t: 1\ninitial apicid\t: 1\nfpu\t\t: yes\nfpu_exception\t: yes\ncpuid level\t: 11\nwp\t\t: yes\nflags\t\t: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts rep_good xtopology nonstop_tsc aperfmperf pni dtes64 monitor ds_cpl vmx est tm2 ssse3 cx16 xtpr pdcm sse4_1 sse4_2 popcnt lahf_lm arat tpr_shadow vnmi flexpriority ept vpid\nbogomips\t: 5851.87\nclflush size\t: 64\ncache_alignment\t: 64\naddress sizes\t: 36 bits physical, 48 bits virtual\npower management:\n\nprocessor\t: 2\nvendor_id\t: GenuineIntel\ncpu family\t: 6\nmodel\t\t: 37\nmodel name\t: Intel(R) Core(TM) i3 CPU         530  @ 2.93GHz\nstepping\t: 2\ncpu MHz\t\t: 1197.000\ncache size\t: 4096 KB\nphysical id\t: 0\nsiblings\t: 4\ncore id\t\t: 2\ncpu cores\t: 2\napicid\t\t: 4\ninitial apicid\t: 4\nfpu\t\t: yes\nfpu_exception\t: yes\ncpuid level\t: 11\nwp\t\t: yes\nflags\t\t: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts rep_good xtopology nonstop_tsc aperfmperf pni dtes64 monitor ds_cpl vmx est tm2 ssse3 cx16 xtpr pdcm sse4_1 sse4_2 popcnt lahf_lm arat tpr_shadow vnmi flexpriority ept vpid\nbogomips\t: 5851.87\nclflush size\t: 64\ncache_alignment\t: 64\naddress sizes\t: 36 bits physical, 48 bits virtual\npower management:\n\nprocessor\t: 3\nvendor_id\t: GenuineIntel\ncpu family\t: 6\nmodel\t\t: 37\nmodel name\t: Intel(R) Core(TM) i3 CPU         530  @ 2.93GHz\nstepping\t: 2\ncpu MHz\t\t: 1197.000\ncache size\t: 4096 KB\nphysical id\t: 0\nsiblings\t: 4\ncore id\t\t: 2\ncpu cores\t: 2\napicid\t\t: 5\ninitial apicid\t: 5\nfpu\t\t: yes\nfpu_exception\t: yes\ncpuid level\t: 11\nwp\t\t: yes\nflags\t\t: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts rep_good xtopology nonstop_tsc aperfmperf pni dtes64 monitor ds_cpl vmx est tm2 ssse3 cx16 xtpr pdcm sse4_1 sse4_2 popcnt lahf_lm arat tpr_shadow vnmi flexpriority ept vpid\nbogomips\t: 5851.86\nclflush size\t: 64\ncache_alignment\t: 64\naddress sizes\t: 36 bits physical, 48 bits virtual\npower management:\n\n```\n\nI have posted the [install log](http://boxen.math.washington.edu/home/SimonKing/SAGE/install_logs/new_notebook.log).",
    "created_at": "2012-04-16T14:15:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118206",
    "user": "SimonKing"
}
```

Replying to [comment:177 jdemeyer]:
> Error installing pyOpenSSL-0.12.tar.gz.

When trying to build sage-5.1.notebook, I get a similar error with

```
king@mpc622:~$ uname -a
Linux mpc622 2.6.34.linuxpool #0 SMP PREEMPT Wed May 19 16:32:19 CEST 2010 x86_64 GNU/Linux
king@mpc622:~$ cat /etc/issue
Debian GNU/Linux 6.0 \n \l

king@mpc622:~$ cat /proc/cpuinfo 
processor	: 0
vendor_id	: GenuineIntel
cpu family	: 6
model		: 37
model name	: Intel(R) Core(TM) i3 CPU         530  @ 2.93GHz
stepping	: 2
cpu MHz		: 1197.000
cache size	: 4096 KB
physical id	: 0
siblings	: 4
core id		: 0
cpu cores	: 2
apicid		: 0
initial apicid	: 0
fpu		: yes
fpu_exception	: yes
cpuid level	: 11
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts rep_good xtopology nonstop_tsc aperfmperf pni dtes64 monitor ds_cpl vmx est tm2 ssse3 cx16 xtpr pdcm sse4_1 sse4_2 popcnt lahf_lm arat tpr_shadow vnmi flexpriority ept vpid
bogomips	: 5852.75
clflush size	: 64
cache_alignment	: 64
address sizes	: 36 bits physical, 48 bits virtual
power management:

processor	: 1
vendor_id	: GenuineIntel
cpu family	: 6
model		: 37
model name	: Intel(R) Core(TM) i3 CPU         530  @ 2.93GHz
stepping	: 2
cpu MHz		: 1197.000
cache size	: 4096 KB
physical id	: 0
siblings	: 4
core id		: 0
cpu cores	: 2
apicid		: 1
initial apicid	: 1
fpu		: yes
fpu_exception	: yes
cpuid level	: 11
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts rep_good xtopology nonstop_tsc aperfmperf pni dtes64 monitor ds_cpl vmx est tm2 ssse3 cx16 xtpr pdcm sse4_1 sse4_2 popcnt lahf_lm arat tpr_shadow vnmi flexpriority ept vpid
bogomips	: 5851.87
clflush size	: 64
cache_alignment	: 64
address sizes	: 36 bits physical, 48 bits virtual
power management:

processor	: 2
vendor_id	: GenuineIntel
cpu family	: 6
model		: 37
model name	: Intel(R) Core(TM) i3 CPU         530  @ 2.93GHz
stepping	: 2
cpu MHz		: 1197.000
cache size	: 4096 KB
physical id	: 0
siblings	: 4
core id		: 2
cpu cores	: 2
apicid		: 4
initial apicid	: 4
fpu		: yes
fpu_exception	: yes
cpuid level	: 11
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts rep_good xtopology nonstop_tsc aperfmperf pni dtes64 monitor ds_cpl vmx est tm2 ssse3 cx16 xtpr pdcm sse4_1 sse4_2 popcnt lahf_lm arat tpr_shadow vnmi flexpriority ept vpid
bogomips	: 5851.87
clflush size	: 64
cache_alignment	: 64
address sizes	: 36 bits physical, 48 bits virtual
power management:

processor	: 3
vendor_id	: GenuineIntel
cpu family	: 6
model		: 37
model name	: Intel(R) Core(TM) i3 CPU         530  @ 2.93GHz
stepping	: 2
cpu MHz		: 1197.000
cache size	: 4096 KB
physical id	: 0
siblings	: 4
core id		: 2
cpu cores	: 2
apicid		: 5
initial apicid	: 5
fpu		: yes
fpu_exception	: yes
cpuid level	: 11
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts rep_good xtopology nonstop_tsc aperfmperf pni dtes64 monitor ds_cpl vmx est tm2 ssse3 cx16 xtpr pdcm sse4_1 sse4_2 popcnt lahf_lm arat tpr_shadow vnmi flexpriority ept vpid
bogomips	: 5851.86
clflush size	: 64
cache_alignment	: 64
address sizes	: 36 bits physical, 48 bits virtual
power management:

```

I have posted the [install log](http://boxen.math.washington.edu/home/SimonKing/SAGE/install_logs/new_notebook.log).



---

archive/issue_comments_118207.json:
```json
{
    "body": "Replying to [comment:178 SimonKing]:\n> Replying to [comment:177 jdemeyer]:\n> > Error installing pyOpenSSL-0.12.tar.gz.\n> \n> When trying to build sage-5.1.notebook, I get a similar error with\n\nit looks as if you don't have openssl installed.",
    "created_at": "2012-04-16T14:25:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118207",
    "user": "dimpase"
}
```

Replying to [comment:178 SimonKing]:
> Replying to [comment:177 jdemeyer]:
> > Error installing pyOpenSSL-0.12.tar.gz.
> 
> When trying to build sage-5.1.notebook, I get a similar error with

it looks as if you don't have openssl installed.



---

archive/issue_comments_118208.json:
```json
{
    "body": "Replying to [comment:179 dimpase]:\n> Replying to [comment:178 SimonKing]:\n> > Replying to [comment:177 jdemeyer]:\n> > > Error installing pyOpenSSL-0.12.tar.gz.\n> > \n> > When trying to build sage-5.1.notebook, I get a similar error with\n> \n> it looks as if you don't have openssl installed.\n\nHow can I install it when I am not root? Is there an openssl spkg that I could install instead?",
    "created_at": "2012-04-16T14:29:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118208",
    "user": "SimonKing"
}
```

Replying to [comment:179 dimpase]:
> Replying to [comment:178 SimonKing]:
> > Replying to [comment:177 jdemeyer]:
> > > Error installing pyOpenSSL-0.12.tar.gz.
> > 
> > When trying to build sage-5.1.notebook, I get a similar error with
> 
> it looks as if you don't have openssl installed.

How can I install it when I am not root? Is there an openssl spkg that I could install instead?



---

archive/issue_comments_118209.json:
```json
{
    "body": "Apparently there *is* an openssl spkg, I am installing it now.\n\nThe installation starts with many warnings.\n\nQuestion: Shouldn't openssl be a standard spkg, since it is a dependency for the new notebook?",
    "created_at": "2012-04-16T14:31:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118209",
    "user": "SimonKing"
}
```

Apparently there *is* an openssl spkg, I am installing it now.

The installation starts with many warnings.

Question: Shouldn't openssl be a standard spkg, since it is a dependency for the new notebook?



---

archive/issue_comments_118210.json:
```json
{
    "body": "I manually installed the optional openssl spkg and typed \"make\" again. Bug installation of sagenb-0.9.0.spkg did still not work. I have updated the [install log](http://boxen.math.washington.edu/home/SimonKing/SAGE/install_logs/new_notebook.log).",
    "created_at": "2012-04-16T14:35:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118210",
    "user": "SimonKing"
}
```

I manually installed the optional openssl spkg and typed "make" again. Bug installation of sagenb-0.9.0.spkg did still not work. I have updated the [install log](http://boxen.math.washington.edu/home/SimonKing/SAGE/install_logs/new_notebook.log).



---

archive/issue_comments_118211.json:
```json
{
    "body": "we can't distribute OpenSSL with Sage since it is not GPL-compatible.",
    "created_at": "2012-04-16T14:39:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118211",
    "user": "jason"
}
```

we can't distribute OpenSSL with Sage since it is not GPL-compatible.



---

archive/issue_comments_118212.json:
```json
{
    "body": "Replying to [comment:183 jason]:\n> we can't distribute OpenSSL with Sage since it is not GPL-compatible.\nI presume one can have an optional package.\nDoes anyone test the scenario Simon is talking about?\nI don't think it's easy to find a system without openssl installed in the usual way...",
    "created_at": "2012-04-16T14:41:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118212",
    "user": "dimpase"
}
```

Replying to [comment:183 jason]:
> we can't distribute OpenSSL with Sage since it is not GPL-compatible.
I presume one can have an optional package.
Does anyone test the scenario Simon is talking about?
I don't think it's easy to find a system without openssl installed in the usual way...



---

archive/issue_comments_118213.json:
```json
{
    "body": "By the way: I just found that openssl *is* installed on the machine in question!\n\n```\nking@mpc622:~$ which openssl\n/usr/bin/openssl\n```\n\n\nAnd note that installing the optional openssl spkg did not help. In other words, I doubt that the installation failure of sage-5.1.notebook comes from a lack of openssl.",
    "created_at": "2012-04-16T14:46:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118213",
    "user": "SimonKing"
}
```

By the way: I just found that openssl *is* installed on the machine in question!

```
king@mpc622:~$ which openssl
/usr/bin/openssl
```


And note that installing the optional openssl spkg did not help. In other words, I doubt that the installation failure of sage-5.1.notebook comes from a lack of openssl.



---

archive/issue_comments_118214.json:
```json
{
    "body": "You need libSSL development headers. On Ubuntu this is called libssl-dev, not openssl. This is a new systemwide dependency for Sage (see https://groups.google.com/d/msg/sage-devel/iwrF8_kGLzM/32HIts7EPKQJ ) and should be noted in the Sage docs - I'll upload a patch to do just this.",
    "created_at": "2012-04-16T14:52:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118214",
    "user": "kini"
}
```

You need libSSL development headers. On Ubuntu this is called libssl-dev, not openssl. This is a new systemwide dependency for Sage (see https://groups.google.com/d/msg/sage-devel/iwrF8_kGLzM/32HIts7EPKQJ ) and should be noted in the Sage docs - I'll upload a patch to do just this.



---

archive/issue_comments_118215.json:
```json
{
    "body": "Er, sorry, I meant on Debian, not Ubuntu. Marking as needs work until I have that patch uploaded...",
    "created_at": "2012-04-16T14:56:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118215",
    "user": "kini"
}
```

Er, sorry, I meant on Debian, not Ubuntu. Marking as needs work until I have that patch uploaded...



---

archive/issue_comments_118216.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-04-16T14:56:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118216",
    "user": "kini"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_118217.json:
```json
{
    "body": "Replying to [comment:186 kini]:\n> You need libSSL development headers.\n\nOK. Is there a libSSL spkg? If not, then I will not be able to build Sage any more on the machine in my office.",
    "created_at": "2012-04-16T15:31:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118217",
    "user": "SimonKing"
}
```

Replying to [comment:186 kini]:
> You need libSSL development headers.

OK. Is there a libSSL spkg? If not, then I will not be able to build Sage any more on the machine in my office.



---

archive/issue_comments_118218.json:
```json
{
    "body": "I now tried the pyopenssl spkg, but this hasn't helped either...",
    "created_at": "2012-04-16T15:34:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118218",
    "user": "SimonKing"
}
```

I now tried the pyopenssl spkg, but this hasn't helped either...



---

archive/issue_comments_118219.json:
```json
{
    "body": "Replying to [comment:188 SimonKing]:\n> Replying to [comment:186 kini]:\n> > You need libSSL development headers.\n> \n> OK. Is there a libSSL spkg? If not, then I will not be able to build Sage any more on the machine in my office.\nWhy? I imagine building openssl from source is not such a big deal.\n\nAs well, why can't you ask your sysadmin to install openssl headers?",
    "created_at": "2012-04-16T15:37:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118219",
    "user": "dimpase"
}
```

Replying to [comment:188 SimonKing]:
> Replying to [comment:186 kini]:
> > You need libSSL development headers.
> 
> OK. Is there a libSSL spkg? If not, then I will not be able to build Sage any more on the machine in my office.
Why? I imagine building openssl from source is not such a big deal.

As well, why can't you ask your sysadmin to install openssl headers?



---

archive/issue_comments_118220.json:
```json
{
    "body": "Replying to [comment:190 dimpase]:\n> Why? I imagine building openssl from source is not such a big deal.\n\nDoes the optional openssl spkg contain the necessary sources? Then the openssl spkg should be modified such that the development headers are installed.\n\nThen, I think it would be helpful if the installation script of sagenb-0.9.0.spkg would check for the presence of the headers, and would print a clear message, if there are missing. Such as:\n\n```\n   ****************************************************************\n   ** The libSSL development headers are missing. For licensing  **\n   ** reasons, we can not distribute it in Sage by default. But  **\n   ** you can install the missing headers with an optional Sage  **\n   ** package, by doing                                          **\n   **     ./sage -i openssl                                      **\n   ** in the Sage root directory.                                **\n   ****************************************************************\n```\n\n \n> As well, why can't you ask your sysadmin to install openssl headers?\n\nI think that introducing yet another nontrivial dependency for Sage is a bad idea.",
    "created_at": "2012-04-16T15:47:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118220",
    "user": "SimonKing"
}
```

Replying to [comment:190 dimpase]:
> Why? I imagine building openssl from source is not such a big deal.

Does the optional openssl spkg contain the necessary sources? Then the openssl spkg should be modified such that the development headers are installed.

Then, I think it would be helpful if the installation script of sagenb-0.9.0.spkg would check for the presence of the headers, and would print a clear message, if there are missing. Such as:

```
   ****************************************************************
   ** The libSSL development headers are missing. For licensing  **
   ** reasons, we can not distribute it in Sage by default. But  **
   ** you can install the missing headers with an optional Sage  **
   ** package, by doing                                          **
   **     ./sage -i openssl                                      **
   ** in the Sage root directory.                                **
   ****************************************************************
```

 
> As well, why can't you ask your sysadmin to install openssl headers?

I think that introducing yet another nontrivial dependency for Sage is a bad idea.



---

archive/issue_comments_118221.json:
```json
{
    "body": "Replying to [comment:191 SimonKing]:\n\n> > As well, why can't you ask your sysadmin to install openssl headers?\n> \n> I think that introducing yet another nontrivial dependency for Sage is a bad idea.\nI think this is a **trivial** dependency. Every modern Linux distro has openssl, and OSX's Xcode comes with openssl preinstalled. I don't see a need to jump hoops just in order to overcome a non-problem.",
    "created_at": "2012-04-16T15:51:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118221",
    "user": "dimpase"
}
```

Replying to [comment:191 SimonKing]:

> > As well, why can't you ask your sysadmin to install openssl headers?
> 
> I think that introducing yet another nontrivial dependency for Sage is a bad idea.
I think this is a **trivial** dependency. Every modern Linux distro has openssl, and OSX's Xcode comes with openssl preinstalled. I don't see a need to jump hoops just in order to overcome a non-problem.



---

archive/issue_comments_118222.json:
```json
{
    "body": "Replying to [comment:192 dimpase]:\n>> > I think that introducing yet another nontrivial dependency for Sage is a bad idea.\n> I think this is a **trivial** dependency. Every modern Linux distro has openssl, ...\n\nSure. My computer has openssl as well. But it has not the *development* headers.\n\nMeanwhile, I have\n\n```\nking@mpc622:/mnt/local/king/SAGE/experiment/notebook/sage-5.1.notebook$ ls local/include/openssl/\naes.h          conf_api.h     ec.h           mdc2.h         pqueue.h       ssl.h\nasn1.h         conf.h         engine.h       modes.h        rand.h         stack.h\nasn1_mac.h     crypto.h       e_os2.h        objects.h      rc2.h          symhacks.h\nasn1t.h        des.h          err.h          obj_mac.h      rc4.h          tls1.h\nbio.h          des_old.h      evp.h          ocsp.h         ripemd.h       ts.h\nblowfish.h     dh.h           hmac.h         opensslconf.h  rsa.h          txt_db.h\nbn.h           dsa.h          idea.h         opensslv.h     safestack.h    ui_compat.h\nbuffer.h       dso.h          krb5_asn.h     ossl_typ.h     seed.h         ui.h\ncamellia.h     dtls1.h        kssl.h         pem2.h         sha.h          whrlpool.h\ncast.h         ebcdic.h       lhash.h        pem.h          ssl23.h        x509.h\ncms.h          ecdh.h         md4.h          pkcs12.h       ssl2.h         x509v3.h\ncomp.h         ecdsa.h        md5.h          pkcs7.h        ssl3.h         x509_vfy.h\n```\n\nThese are many headers, and they come from the openssl spkg. But apparently the development headers are still not there.\n\nIn other words, since about two hours I try to find out where I could get the development headers from, without being root. So, it is indeed a nontrivial dependency.",
    "created_at": "2012-04-16T16:01:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118222",
    "user": "SimonKing"
}
```

Replying to [comment:192 dimpase]:
>> > I think that introducing yet another nontrivial dependency for Sage is a bad idea.
> I think this is a **trivial** dependency. Every modern Linux distro has openssl, ...

Sure. My computer has openssl as well. But it has not the *development* headers.

Meanwhile, I have

```
king@mpc622:/mnt/local/king/SAGE/experiment/notebook/sage-5.1.notebook$ ls local/include/openssl/
aes.h          conf_api.h     ec.h           mdc2.h         pqueue.h       ssl.h
asn1.h         conf.h         engine.h       modes.h        rand.h         stack.h
asn1_mac.h     crypto.h       e_os2.h        objects.h      rc2.h          symhacks.h
asn1t.h        des.h          err.h          obj_mac.h      rc4.h          tls1.h
bio.h          des_old.h      evp.h          ocsp.h         ripemd.h       ts.h
blowfish.h     dh.h           hmac.h         opensslconf.h  rsa.h          txt_db.h
bn.h           dsa.h          idea.h         opensslv.h     safestack.h    ui_compat.h
buffer.h       dso.h          krb5_asn.h     ossl_typ.h     seed.h         ui.h
camellia.h     dtls1.h        kssl.h         pem2.h         sha.h          whrlpool.h
cast.h         ebcdic.h       lhash.h        pem.h          ssl23.h        x509.h
cms.h          ecdh.h         md4.h          pkcs12.h       ssl2.h         x509v3.h
comp.h         ecdsa.h        md5.h          pkcs7.h        ssl3.h         x509_vfy.h
```

These are many headers, and they come from the openssl spkg. But apparently the development headers are still not there.

In other words, since about two hours I try to find out where I could get the development headers from, without being root. So, it is indeed a nontrivial dependency.



---

archive/issue_comments_118223.json:
```json
{
    "body": "Replying to [comment:193 SimonKing]:\n> Replying to [comment:192 dimpase]:\n> >> > I think that introducing yet another nontrivial dependency for Sage is a bad idea.\n> > I think this is a **trivial** dependency. Every modern Linux distro has openssl, ...\n> \n> Sure. My computer has openssl as well. But it has not the *development* headers.\n> \nOK, so openssl headers need to be listed as a dependency for building Sage from source.\nIt is trivial in the sense that installing these headers is trivial (for a root).\nWhile I understand that sysadmins might be slow, or picky (at the place I did my PhD at, the sysadmin only replied to emails which had \"BEER\" mentioned in the subject---I'm not kidding!), I cannot imagine this being hard to overcome...\n\n> These are many headers, and they come from the openssl spkg. But apparently the development headers are still not there.\n> \n> In other words, since about two hours I try to find out where I could get the development headers from, without being root. So, it is indeed a nontrivial dependency. \n\nLooks like a bug in openssl spkg (or in whatever place that need to compile openssl-related stuff).",
    "created_at": "2012-04-16T16:18:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118223",
    "user": "dimpase"
}
```

Replying to [comment:193 SimonKing]:
> Replying to [comment:192 dimpase]:
> >> > I think that introducing yet another nontrivial dependency for Sage is a bad idea.
> > I think this is a **trivial** dependency. Every modern Linux distro has openssl, ...
> 
> Sure. My computer has openssl as well. But it has not the *development* headers.
> 
OK, so openssl headers need to be listed as a dependency for building Sage from source.
It is trivial in the sense that installing these headers is trivial (for a root).
While I understand that sysadmins might be slow, or picky (at the place I did my PhD at, the sysadmin only replied to emails which had "BEER" mentioned in the subject---I'm not kidding!), I cannot imagine this being hard to overcome...

> These are many headers, and they come from the openssl spkg. But apparently the development headers are still not there.
> 
> In other words, since about two hours I try to find out where I could get the development headers from, without being root. So, it is indeed a nontrivial dependency. 

Looks like a bug in openssl spkg (or in whatever place that need to compile openssl-related stuff).



---

archive/issue_comments_118224.json:
```json
{
    "body": "No, those are the development headers... it looks like you have some case sensitivity problem or something:\n\n\n```\nIn file included from OpenSSL/crypto/crypto.h:17,\n                 from OpenSSL/crypto/crypto.c:16:\nOpenSSL/crypto/x509.h:17:25: error: openssl/ssl.h: Datei oder Verzeichnis nicht gefunden\n```\n\n\nMaybe the pyOpenSSL installer is picking up your systemwide openssl headers, which are in some funkily capitalized directory, rather than the ones which the ssl spkg seems to have installed into your sage directory?",
    "created_at": "2012-04-16T16:21:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118224",
    "user": "kini"
}
```

No, those are the development headers... it looks like you have some case sensitivity problem or something:


```
In file included from OpenSSL/crypto/crypto.h:17,
                 from OpenSSL/crypto/crypto.c:16:
OpenSSL/crypto/x509.h:17:25: error: openssl/ssl.h: Datei oder Verzeichnis nicht gefunden
```


Maybe the pyOpenSSL installer is picking up your systemwide openssl headers, which are in some funkily capitalized directory, rather than the ones which the ssl spkg seems to have installed into your sage directory?



---

archive/issue_comments_118225.json:
```json
{
    "body": "Oh, sorry, I'm stupid - those are filenames inside the pyOpenSSL package, I guess.",
    "created_at": "2012-04-16T16:22:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118225",
    "user": "kini"
}
```

Oh, sorry, I'm stupid - those are filenames inside the pyOpenSSL package, I guess.



---

archive/issue_comments_118226.json:
```json
{
    "body": "If these are the development headers, then it seems that the sagenb spkg is looking for them in the wrong place. Is SAGE_ROOT/local/include part of the include path, when sagenb is installed?",
    "created_at": "2012-04-16T16:27:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118226",
    "user": "SimonKing"
}
```

If these are the development headers, then it seems that the sagenb spkg is looking for them in the wrong place. Is SAGE_ROOT/local/include part of the include path, when sagenb is installed?



---

archive/issue_comments_118227.json:
```json
{
    "body": "Or more precisely: The sagenb spkg contains a file pyOpenSSL-0.12.tar.gz, and the error message indicates that the problem lies in installing that sub-package.",
    "created_at": "2012-04-16T16:30:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118227",
    "user": "SimonKing"
}
```

Or more precisely: The sagenb spkg contains a file pyOpenSSL-0.12.tar.gz, and the error message indicates that the problem lies in installing that sub-package.



---

archive/issue_comments_118228.json:
```json
{
    "body": "OK, so the following text appears in the pyOpenSSL INSTALL file:\n\n\n```\nIf your OpenSSL header files aren't in /usr/include, you may need to supply\nthe -I flag to let the setup script know where to look. The same goes for the\nlibraries of course, use the -L flag. Note that build won't accept these\nflags, so you have to run first build_ext and then build! Example:\n\n  $ python setup.py build_ext -I/usr/local/ssl/include -L/usr/local/ssl/lib\n  $ python setup.py build\n```\n\n\nSo that's why pyOpenSSL isn't seeing the dev headers that are installed by the OpenSSL package. That means we should make a separate pyOpenSSL SPKG and micromanage the build process as described above. (Judging by comments above, I guess one already exists, and so it just needs to be modified.)\n\nBy the way, can we really distribute OpenSSL as an optional SPKG? Doesn't that count as distributing it with Sage? Sure, it's not shipped literally *with* Sage... well, I don't know.",
    "created_at": "2012-04-16T16:32:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118228",
    "user": "kini"
}
```

OK, so the following text appears in the pyOpenSSL INSTALL file:


```
If your OpenSSL header files aren't in /usr/include, you may need to supply
the -I flag to let the setup script know where to look. The same goes for the
libraries of course, use the -L flag. Note that build won't accept these
flags, so you have to run first build_ext and then build! Example:

  $ python setup.py build_ext -I/usr/local/ssl/include -L/usr/local/ssl/lib
  $ python setup.py build
```


So that's why pyOpenSSL isn't seeing the dev headers that are installed by the OpenSSL package. That means we should make a separate pyOpenSSL SPKG and micromanage the build process as described above. (Judging by comments above, I guess one already exists, and so it just needs to be modified.)

By the way, can we really distribute OpenSSL as an optional SPKG? Doesn't that count as distributing it with Sage? Sure, it's not shipped literally *with* Sage... well, I don't know.



---

archive/issue_comments_118229.json:
```json
{
    "body": "Um, OK... the pyOpenSSL SPKG already does this. So I guess the problem is that sagenb saw there was a newer version of pyOpenSSL sitting right there and decided to install it even though you already had 0.8 installed. I'll upgrade the pyOpenSSL SPKG to 0.12 and then everything should hopefully work...",
    "created_at": "2012-04-16T16:35:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118229",
    "user": "kini"
}
```

Um, OK... the pyOpenSSL SPKG already does this. So I guess the problem is that sagenb saw there was a newer version of pyOpenSSL sitting right there and decided to install it even though you already had 0.8 installed. I'll upgrade the pyOpenSSL SPKG to 0.12 and then everything should hopefully work...



---

archive/issue_comments_118230.json:
```json
{
    "body": "Hi Keshav,\n\nI was just about to point to the same text.\n\nI don't know about licensing, but I think I was told that an optional spkg is fine for non-GPL packages.\n\nI see in spkg-install that the `pyOpenSSL` package is installed via `easy_install --allow-hosts=None pyOpenSSL-0.12.tar.gz`. Isn't there a way to tell easy_install what include directory to use?",
    "created_at": "2012-04-16T16:37:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118230",
    "user": "SimonKing"
}
```

Hi Keshav,

I was just about to point to the same text.

I don't know about licensing, but I think I was told that an optional spkg is fine for non-GPL packages.

I see in spkg-install that the `pyOpenSSL` package is installed via `easy_install --allow-hosts=None pyOpenSSL-0.12.tar.gz`. Isn't there a way to tell easy_install what include directory to use?



---

archive/issue_comments_118231.json:
```json
{
    "body": "Replying to [comment:199 kini]:\n> By the way, can we really distribute OpenSSL as an optional SPKG? Doesn't that count as distributing it with Sage? Sure, it's not shipped literally *with* Sage... well, I don't know.\n\nsome optional packages have licenses which are incompatible with GPL, so this should not be a problem, if \u00fcberhaupt we can distribute openssl...",
    "created_at": "2012-04-16T16:38:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118231",
    "user": "dimpase"
}
```

Replying to [comment:199 kini]:
> By the way, can we really distribute OpenSSL as an optional SPKG? Doesn't that count as distributing it with Sage? Sure, it's not shipped literally *with* Sage... well, I don't know.

some optional packages have licenses which are incompatible with GPL, so this should not be a problem, if überhaupt we can distribute openssl...



---

archive/issue_comments_118232.json:
```json
{
    "body": "Replying to [comment:201 SimonKing]:\n> I see in spkg-install that the `pyOpenSSL` package ...\n\nI mean \"spkg-install in the sagenb spkg\", and `pyOpenSSL` should rather be named a sub-package of sagenb.",
    "created_at": "2012-04-16T16:39:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118232",
    "user": "SimonKing"
}
```

Replying to [comment:201 SimonKing]:
> I see in spkg-install that the `pyOpenSSL` package ...

I mean "spkg-install in the sagenb spkg", and `pyOpenSSL` should rather be named a sub-package of sagenb.



---

archive/issue_comments_118233.json:
```json
{
    "body": "Right, I get what you meant, Simon. It doesn't seem like easy_install has the functionality you mentioned, unfortunately. Not that surprising since most Python packages don't have a C component anyway...",
    "created_at": "2012-04-16T16:41:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118233",
    "user": "kini"
}
```

Right, I get what you meant, Simon. It doesn't seem like easy_install has the functionality you mentioned, unfortunately. Not that surprising since most Python packages don't have a C component anyway...



---

archive/issue_comments_118234.json:
```json
{
    "body": "By the way: `pyOpenSSL` has the APL2 licence. Is that compatible with GPL?\n\nIt is distributed as sub-package of a standard spkg (namely the sagenb spkg) - so there is a potential violation of GPL, isn't it?",
    "created_at": "2012-04-16T16:42:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118234",
    "user": "SimonKing"
}
```

By the way: `pyOpenSSL` has the APL2 licence. Is that compatible with GPL?

It is distributed as sub-package of a standard spkg (namely the sagenb spkg) - so there is a potential violation of GPL, isn't it?



---

archive/issue_comments_118235.json:
```json
{
    "body": "Replying to [comment:205 SimonKing]:\n> By the way: `pyOpenSSL` has the APL2 licence. Is that compatible with GPL?\n\nGoogle told me: \"The Free Software Foundation considers the Apache License, Version 2.0 to be a free software license, compatible with version 3 of the GPL.\" At least one good news...",
    "created_at": "2012-04-16T16:44:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118235",
    "user": "SimonKing"
}
```

Replying to [comment:205 SimonKing]:
> By the way: `pyOpenSSL` has the APL2 licence. Is that compatible with GPL?

Google told me: "The Free Software Foundation considers the Apache License, Version 2.0 to be a free software license, compatible with version 3 of the GPL." At least one good news...



---

archive/issue_comments_118236.json:
```json
{
    "body": "Replying to [comment:204 kini]:\n> Right, I get what you meant, Simon. It doesn't seem like easy_install has the functionality you mentioned, unfortunately. Not that surprising since most Python packages don't have a C component anyway...\n\none would modify package's setup.py to accomplish this, looking for custom header locations. E.g. look at the one of cvxopt.",
    "created_at": "2012-04-16T16:47:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118236",
    "user": "dimpase"
}
```

Replying to [comment:204 kini]:
> Right, I get what you meant, Simon. It doesn't seem like easy_install has the functionality you mentioned, unfortunately. Not that surprising since most Python packages don't have a C component anyway...

one would modify package's setup.py to accomplish this, looking for custom header locations. E.g. look at the one of cvxopt.



---

archive/issue_comments_118237.json:
```json
{
    "body": "Supplying command line arguments to setup.py, as Simon and I discussed earlier, is less intrusive than modifying setup.py .\n\nI am making a new pyOpenSSL SPKG.",
    "created_at": "2012-04-16T16:50:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118237",
    "user": "kini"
}
```

Supplying command line arguments to setup.py, as Simon and I discussed earlier, is less intrusive than modifying setup.py .

I am making a new pyOpenSSL SPKG.



---

archive/issue_comments_118238.json:
```json
{
    "body": "At [stackoverflow](http://stackoverflow.com/questions/4753127/python-easy-install-specify-directory-housing-required-files), the variables `C_INCLUDE_PATH` and `CPLUS_INCLUDE_PATH` are mentioned as an option to make easy_install understand the location of headers.\n\nWorth a try, I'd say!\n\nAnd why should there be a new pyOpenSSL spkg? I think one should instead modify spkg-install in the sagenb spkg (using C_INCLUDE_PATH), so that the pyOpenSSL sub-package (which is different from the pyOpenSSL spkg) is correctly installed.",
    "created_at": "2012-04-16T16:52:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118238",
    "user": "SimonKing"
}
```

At [stackoverflow](http://stackoverflow.com/questions/4753127/python-easy-install-specify-directory-housing-required-files), the variables `C_INCLUDE_PATH` and `CPLUS_INCLUDE_PATH` are mentioned as an option to make easy_install understand the location of headers.

Worth a try, I'd say!

And why should there be a new pyOpenSSL spkg? I think one should instead modify spkg-install in the sagenb spkg (using C_INCLUDE_PATH), so that the pyOpenSSL sub-package (which is different from the pyOpenSSL spkg) is correctly installed.



---

archive/issue_comments_118239.json:
```json
{
    "body": "YESSS!\n\nI added \n\n```\nexport C_INCLUDE_PATH=\"$SAGE_ROOT\"/local/include\n```\n\nto sagenb's spkg-install script, and that seems to have solved the problem!!\n\nI guess that what one really wants is to add `\"$SAGE_ROOT\"/local/include` to an already existing include path. But I guess you know better than I how that can be done in a script...",
    "created_at": "2012-04-16T16:57:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118239",
    "user": "SimonKing"
}
```

YESSS!

I added 

```
export C_INCLUDE_PATH="$SAGE_ROOT"/local/include
```

to sagenb's spkg-install script, and that seems to have solved the problem!!

I guess that what one really wants is to add `"$SAGE_ROOT"/local/include` to an already existing include path. But I guess you know better than I how that can be done in a script...



---

archive/issue_comments_118240.json:
```json
{
    "body": "Remove assignee jason, mpatel, was.",
    "created_at": "2012-04-16T16:57:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118240",
    "user": "SimonKing"
}
```

Remove assignee jason, mpatel, was.



---

archive/issue_comments_118241.json:
```json
{
    "body": "My suggestions:\n\n* Add `\"$SAGE_ROOT\"/local/include` to C_INCLUDE_PATH, in the sagenb spkg-install\n* If installation of the notebook fails, inform the user about the optional openssl package.",
    "created_at": "2012-04-16T16:59:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118241",
    "user": "SimonKing"
}
```

My suggestions:

* Add `"$SAGE_ROOT"/local/include` to C_INCLUDE_PATH, in the sagenb spkg-install
* If installation of the notebook fails, inform the user about the optional openssl package.



---

archive/issue_comments_118242.json:
```json
{
    "body": "I would like to use systemwide headers if at all possible. Otherwise we are basically requiring people to install the OpenSSL SPKG, which means that we must make the OpenSSL SPKG standard, which is not possible. I don't see a way to use $SAGE_LOCAL/include as a *fallback only*, other than just putting \n\n\n```sh\nif [ ! -d /usr/include/openssl ]; then\n    python setup.py build_ext -I\"$SAGE_LOCAL\"/include -L\"$SAGE_LOCAL\"/lib\nelse\n    python setup.py build_ext\nfi\n```\n\n\nin an spkg-install script somewhere. That's why I elected to do so in the pyOpenSSL SPKG. I could as well do so in the sagenb SPKG, but that would involve unpacking the pyOpenSSL tarball that's there and messing around with it instead of using easy_install. This way we can make the pyOpenSSL SPKG standard and make the OpenSSL SPKG optional, and still tell people we prefer them to install OpenSSL dev headers systemwide.",
    "created_at": "2012-04-16T17:11:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118242",
    "user": "kini"
}
```

I would like to use systemwide headers if at all possible. Otherwise we are basically requiring people to install the OpenSSL SPKG, which means that we must make the OpenSSL SPKG standard, which is not possible. I don't see a way to use $SAGE_LOCAL/include as a *fallback only*, other than just putting 


```sh
if [ ! -d /usr/include/openssl ]; then
    python setup.py build_ext -I"$SAGE_LOCAL"/include -L"$SAGE_LOCAL"/lib
else
    python setup.py build_ext
fi
```


in an spkg-install script somewhere. That's why I elected to do so in the pyOpenSSL SPKG. I could as well do so in the sagenb SPKG, but that would involve unpacking the pyOpenSSL tarball that's there and messing around with it instead of using easy_install. This way we can make the pyOpenSSL SPKG standard and make the OpenSSL SPKG optional, and still tell people we prefer them to install OpenSSL dev headers systemwide.



---

archive/issue_comments_118243.json:
```json
{
    "body": "Wait, I misunderstood. I guess I could just put\n\n\n```sh\nif [ ! -d /usr/include/openssl ]; then\n    export C_INCLUDE_PATH=\"$SAGE_ROOT\"/local/include\nfi\neasy_install --allow-hosts=None pyOpenSSL-0.12.tar.gz\n```\n\n\ninto sagenb's spkg_install, haha.",
    "created_at": "2012-04-16T17:16:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118243",
    "user": "kini"
}
```

Wait, I misunderstood. I guess I could just put


```sh
if [ ! -d /usr/include/openssl ]; then
    export C_INCLUDE_PATH="$SAGE_ROOT"/local/include
fi
easy_install --allow-hosts=None pyOpenSSL-0.12.tar.gz
```


into sagenb's spkg_install, haha.



---

archive/issue_comments_118244.json:
```json
{
    "body": "Replying to [comment:213 kini]:\n> Wait, I misunderstood. I guess I could just put\n> \n> {{{\n> if [ ! -d /usr/include/openssl ]; then\n>     export C_INCLUDE_PATH=\"$SAGE_ROOT\"/local/include\n> fi\n> easy_install --allow-hosts=None pyOpenSSL-0.12.tar.gz\n> }}}\n> \n> into sagenb's spkg_install, haha.\n\nExactly. I did not intend to suggest to restrict search for headers to `$SAGE_ROOT/local/include`, but merely to *add* it to the default include path.",
    "created_at": "2012-04-16T17:27:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118244",
    "user": "SimonKing"
}
```

Replying to [comment:213 kini]:
> Wait, I misunderstood. I guess I could just put
> 
> {{{
> if [ ! -d /usr/include/openssl ]; then
>     export C_INCLUDE_PATH="$SAGE_ROOT"/local/include
> fi
> easy_install --allow-hosts=None pyOpenSSL-0.12.tar.gz
> }}}
> 
> into sagenb's spkg_install, haha.

Exactly. I did not intend to suggest to restrict search for headers to `$SAGE_ROOT/local/include`, but merely to *add* it to the default include path.



---

archive/issue_comments_118245.json:
```json
{
    "body": "It looks like C_INCLUDE_PATH has a priority lower than command line options to gcc but higher than the default directories. So if someone has installed the OpenSSL SPKG, its headers will take priority over the system's. Is this still OK? (I guess so...)",
    "created_at": "2012-04-16T17:33:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118245",
    "user": "kini"
}
```

It looks like C_INCLUDE_PATH has a priority lower than command line options to gcc but higher than the default directories. So if someone has installed the OpenSSL SPKG, its headers will take priority over the system's. Is this still OK? (I guess so...)



---

archive/issue_comments_118246.json:
```json
{
    "body": "I think that's what we want, right?  What if their system has an old (or newer) version of openssl?  If they install the openssl spkg, we should use that.\n\nAs for a test, can't we just try to install pyOpenSSL with the C_INCLUDE_PATH set?  If we have openssl installed as an spkg, it'll pick up that.  (I think) it will fall through to the system headers if they aren't present in Sage.  If there is an error in installing pyopenssl, then print a big warning message about installing the optional openssl spkg.",
    "created_at": "2012-04-16T17:35:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118246",
    "user": "jason"
}
```

I think that's what we want, right?  What if their system has an old (or newer) version of openssl?  If they install the openssl spkg, we should use that.

As for a test, can't we just try to install pyOpenSSL with the C_INCLUDE_PATH set?  If we have openssl installed as an spkg, it'll pick up that.  (I think) it will fall through to the system headers if they aren't present in Sage.  If there is an error in installing pyopenssl, then print a big warning message about installing the optional openssl spkg.



---

archive/issue_comments_118247.json:
```json
{
    "body": "Replying to [comment:215 kini]:\n> It looks like C_INCLUDE_PATH has a priority lower than command line options to gcc but higher than the default directories. So if someone has installed the OpenSSL SPKG, its headers will take priority over the system's. Is this still OK? (I guess so...)\n\nIt's not only headers, but the runtime, too. One doesn't want to compile with headers for a wrong runtime!",
    "created_at": "2012-04-16T17:36:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118247",
    "user": "dimpase"
}
```

Replying to [comment:215 kini]:
> It looks like C_INCLUDE_PATH has a priority lower than command line options to gcc but higher than the default directories. So if someone has installed the OpenSSL SPKG, its headers will take priority over the system's. Is this still OK? (I guess so...)

It's not only headers, but the runtime, too. One doesn't want to compile with headers for a wrong runtime!



---

archive/issue_comments_118248.json:
```json
{
    "body": "Replying to [comment:217 dimpase]:\n> Replying to [comment:215 kini]:\n> > It looks like C_INCLUDE_PATH has a priority lower than command line options to gcc but higher than the default directories. So if someone has installed the OpenSSL SPKG, its headers will take priority over the system's. Is this still OK? (I guess so...)\n> \n> It's not only headers, but the runtime, too. One doesn't want to compile with headers for a wrong runtime!\n\nCan you elaborate? We need to set LIBRARY_PATH to $SAGE_LOCAL/lib as well, is that what you mean?",
    "created_at": "2012-04-16T17:40:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118248",
    "user": "kini"
}
```

Replying to [comment:217 dimpase]:
> Replying to [comment:215 kini]:
> > It looks like C_INCLUDE_PATH has a priority lower than command line options to gcc but higher than the default directories. So if someone has installed the OpenSSL SPKG, its headers will take priority over the system's. Is this still OK? (I guess so...)
> 
> It's not only headers, but the runtime, too. One doesn't want to compile with headers for a wrong runtime!

Can you elaborate? We need to set LIBRARY_PATH to $SAGE_LOCAL/lib as well, is that what you mean?



---

archive/issue_comments_118249.json:
```json
{
    "body": "If it is indeed true that setting C_INCLUDE_PATH gives priority to the given path, but uses the default patch as fallback, then I think setting C_INCLUDE_PATH for *all* sub-packages (not just for pyOpenSSL - in fact I added the C_INCLUDE_PATH already to the second line of the spkg-install script) would be a valid solution.\n\nAnd concerning warning message: Is it really a good solution to try to install pyOpenSSL and look whether it fails? Should one not rather start by searching for the headers, and immediately raise the warning (and stop installation) if they are missing, without the attempt to install any sub-package?",
    "created_at": "2012-04-16T17:42:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118249",
    "user": "SimonKing"
}
```

If it is indeed true that setting C_INCLUDE_PATH gives priority to the given path, but uses the default patch as fallback, then I think setting C_INCLUDE_PATH for *all* sub-packages (not just for pyOpenSSL - in fact I added the C_INCLUDE_PATH already to the second line of the spkg-install script) would be a valid solution.

And concerning warning message: Is it really a good solution to try to install pyOpenSSL and look whether it fails? Should one not rather start by searching for the headers, and immediately raise the warning (and stop installation) if they are missing, without the attempt to install any sub-package?



---

archive/issue_comments_118250.json:
```json
{
    "body": "Replying to [comment:219 SimonKing]:\n\n\n> And concerning warning message: Is it really a good solution to try to install pyOpenSSL and look whether it fails? Should one not rather start by searching for the headers, and immediately raise the warning (and stop installation) if they are missing, without the attempt to install any sub-package?\n\nWhat if someone has openssl installed in a non-standard place?  Looking for openssl in one specific place seems brittle to me.",
    "created_at": "2012-04-16T17:45:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118250",
    "user": "jason"
}
```

Replying to [comment:219 SimonKing]:


> And concerning warning message: Is it really a good solution to try to install pyOpenSSL and look whether it fails? Should one not rather start by searching for the headers, and immediately raise the warning (and stop installation) if they are missing, without the attempt to install any sub-package?

What if someone has openssl installed in a non-standard place?  Looking for openssl in one specific place seems brittle to me.



---

archive/issue_comments_118251.json:
```json
{
    "body": "Replying to [comment:220 jason]:\n> What if someone has openssl installed in a non-standard place?  Looking for openssl in one specific place seems brittle to me.\n\nIf someone has openssl in a non-standard place, then pyOpenSSL will only pick it up if an appropriate environment variable or setup option is used. Ideally, we would respect that variable/option. This is what I meant by *adding* `$SAGE_ROOT/local/include` - adding is not replacing.",
    "created_at": "2012-04-16T17:50:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118251",
    "user": "SimonKing"
}
```

Replying to [comment:220 jason]:
> What if someone has openssl installed in a non-standard place?  Looking for openssl in one specific place seems brittle to me.

If someone has openssl in a non-standard place, then pyOpenSSL will only pick it up if an appropriate environment variable or setup option is used. Ideally, we would respect that variable/option. This is what I meant by *adding* `$SAGE_ROOT/local/include` - adding is not replacing.



---

archive/issue_comments_118252.json:
```json
{
    "body": "Simon: I think Jason was objecting to your suggestion to check for headers first and fail out if they were not found. We'd have to search in every possible place GCC might search, and that seems like too much trouble to engineer - why not just let GCC try to find the headers, I guess is what Jason is saying.",
    "created_at": "2012-04-16T17:53:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118252",
    "user": "kini"
}
```

Simon: I think Jason was objecting to your suggestion to check for headers first and fail out if they were not found. We'd have to search in every possible place GCC might search, and that seems like too much trouble to engineer - why not just let GCC try to find the headers, I guess is what Jason is saying.



---

archive/issue_comments_118253.json:
```json
{
    "body": "Kini: that's what I was thinking.  The problem I had was the -d test for a specific header directory to determine whether we'd even try installing pyopenssl.",
    "created_at": "2012-04-16T17:57:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118253",
    "user": "jason"
}
```

Kini: that's what I was thinking.  The problem I had was the -d test for a specific header directory to determine whether we'd even try installing pyopenssl.



---

archive/issue_comments_118254.json:
```json
{
    "body": "If the attempt to build it takes not too much time, then it is ok to simply wait if installation of pyOpenSSL works or not.\n\nBy the way, meanwhile building sage-5.1.notebook has finished. I can not do make test, but that's a problem fixed elsewhere (#12568, I think).\n\nWhat I did to build it boils down to the following:\n\n* Patch sagenb's spkg-install by adding `export C_INCLUDE_PATH=\"$SAGE_ROOT\"/local/include` as the second line. *Note that the sagenb spkg has plenty of uncommitted changes* - that needs to be fixed before release. Also note that my fix may be too simplistic. It is just a proof of concept.\n* make, and wait until it fails\n* ./sage -i openssl\n* make\n\nNow I am adding the patch from #12568 and try make test.",
    "created_at": "2012-04-16T19:02:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118254",
    "user": "SimonKing"
}
```

If the attempt to build it takes not too much time, then it is ok to simply wait if installation of pyOpenSSL works or not.

By the way, meanwhile building sage-5.1.notebook has finished. I can not do make test, but that's a problem fixed elsewhere (#12568, I think).

What I did to build it boils down to the following:

* Patch sagenb's spkg-install by adding `export C_INCLUDE_PATH="$SAGE_ROOT"/local/include` as the second line. *Note that the sagenb spkg has plenty of uncommitted changes* - that needs to be fixed before release. Also note that my fix may be too simplistic. It is just a proof of concept.
* make, and wait until it fails
* ./sage -i openssl
* make

Now I am adding the patch from #12568 and try make test.



---

archive/issue_comments_118255.json:
```json
{
    "body": "Testing whether openssl exists and raising an error message if not is better done in `prereq`, not in `sagenb`.",
    "created_at": "2012-04-16T19:54:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118255",
    "user": "jdemeyer"
}
```

Testing whether openssl exists and raising an error message if not is better done in `prereq`, not in `sagenb`.



---

archive/issue_comments_118256.json:
```json
{
    "body": "Jeroen: I think we have agreed not to do such a check, and instead just try to build.\n\nSimon: Note that the sagenb spkg doesn't even have a repository ;) Since the SPKG is generated by version-controlled code in the actual sagenb git repository, I guess someone decided that having a repository in the SPKG was not necessary...\n\nBy the way I think we should use CPATH instead of C_INCLUDE_PATH. Apparently this will allow the extra paths provided to apply to C++ and Objective-C files as well as C files. Could come in handy in the future.",
    "created_at": "2012-04-16T20:00:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118256",
    "user": "kini"
}
```

Jeroen: I think we have agreed not to do such a check, and instead just try to build.

Simon: Note that the sagenb spkg doesn't even have a repository ;) Since the SPKG is generated by version-controlled code in the actual sagenb git repository, I guess someone decided that having a repository in the SPKG was not necessary...

By the way I think we should use CPATH instead of C_INCLUDE_PATH. Apparently this will allow the extra paths provided to apply to C++ and Objective-C files as well as C files. Could come in handy in the future.



---

archive/issue_comments_118257.json:
```json
{
    "body": "Replying to [comment:226 kini]:\n> Jeroen: I think we have agreed not to do such a check, and instead just try to build.\nWhy that?  I much prefer to see a nice error message like Simon suggested instead of a cryptic `gcc` error.  Also, I much prefer to see it immediatly (in `prereq`) instead of after hours of building.  The point of `prereq` is precisely to check dependencies of Sage.",
    "created_at": "2012-04-16T20:04:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118257",
    "user": "jdemeyer"
}
```

Replying to [comment:226 kini]:
> Jeroen: I think we have agreed not to do such a check, and instead just try to build.
Why that?  I much prefer to see a nice error message like Simon suggested instead of a cryptic `gcc` error.  Also, I much prefer to see it immediatly (in `prereq`) instead of after hours of building.  The point of `prereq` is precisely to check dependencies of Sage.



---

archive/issue_comments_118258.json:
```json
{
    "body": "Because as Jason said we don't know where to look for SSL headers. It could be frustrating to the user if Sage refuses to build just because our code is too stupid to find the user's SSL headers, even though GCC would be able to find them. Since we are not assuming that OpenSSL headers are going to be in the Sage directory, we should wash our hands of trying to find them outside the Sage directory, where there be monsters! :)",
    "created_at": "2012-04-16T20:08:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118258",
    "user": "kini"
}
```

Because as Jason said we don't know where to look for SSL headers. It could be frustrating to the user if Sage refuses to build just because our code is too stupid to find the user's SSL headers, even though GCC would be able to find them. Since we are not assuming that OpenSSL headers are going to be in the Sage directory, we should wash our hands of trying to find them outside the Sage directory, where there be monsters! :)



---

archive/issue_comments_118259.json:
```json
{
    "body": "Our other dependencies are all command line utilities if I'm not mistaken so a quick `command -v` is sufficient to find them, but that is not true for include dirs... right? Well I guess we could just write a simple C file that tries to link in openssl and attempt to compile it as our \"check for SSL\" in `prereq`...",
    "created_at": "2012-04-16T20:09:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118259",
    "user": "kini"
}
```

Our other dependencies are all command line utilities if I'm not mistaken so a quick `command -v` is sufficient to find them, but that is not true for include dirs... right? Well I guess we could just write a simple C file that tries to link in openssl and attempt to compile it as our "check for SSL" in `prereq`...



---

archive/issue_comments_118260.json:
```json
{
    "body": "These kind of checks is precisely why `autoconf` was invented...",
    "created_at": "2012-04-16T20:11:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118260",
    "user": "jdemeyer"
}
```

These kind of checks is precisely why `autoconf` was invented...



---

archive/issue_comments_118261.json:
```json
{
    "body": "FWIW: All tests pass!",
    "created_at": "2012-04-16T20:34:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118261",
    "user": "SimonKing"
}
```

FWIW: All tests pass!



---

archive/issue_comments_118262.json:
```json
{
    "body": "Jeroen: Well, sadly I don't know how to use autoconf :( And apparently, according to people on sage-devel, you cannot just muddle your way through writing autoconf...\n\nAnyway, new SPKG is up. Diff at http://git.io/mM8qnQ . Simon, if you could test this SPKG it would be great. (A complete test would I guess involve putting this SPKG into a freshly extracted copy of the testing release Jeroen made, i.e. replacing the sagenb-0.9.0.spkg that is already there, and then running `make` and `make ptestlong`.) Good night for now, it's almost dawn here :) I'll work on editing the installation manual tomorrow. Er, today...",
    "created_at": "2012-04-16T20:38:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118262",
    "user": "kini"
}
```

Jeroen: Well, sadly I don't know how to use autoconf :( And apparently, according to people on sage-devel, you cannot just muddle your way through writing autoconf...

Anyway, new SPKG is up. Diff at http://git.io/mM8qnQ . Simon, if you could test this SPKG it would be great. (A complete test would I guess involve putting this SPKG into a freshly extracted copy of the testing release Jeroen made, i.e. replacing the sagenb-0.9.0.spkg that is already there, and then running `make` and `make ptestlong`.) Good night for now, it's almost dawn here :) I'll work on editing the installation manual tomorrow. Er, today...



---

archive/issue_comments_118263.json:
```json
{
    "body": "Replying to [comment:232 kini]:\n> Jeroen: Well, sadly I don't know how to use autoconf :(\nI don't mind doing that.  However, I'd rather wait until the whole openSSL thing in the Notebook has been settled.",
    "created_at": "2012-04-16T21:17:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118263",
    "user": "jdemeyer"
}
```

Replying to [comment:232 kini]:
> Jeroen: Well, sadly I don't know how to use autoconf :(
I don't mind doing that.  However, I'd rather wait until the whole openSSL thing in the Notebook has been settled.



---

archive/issue_comments_118264.json:
```json
{
    "body": "IIRC, this check for a package can be done with pkgconfig. Something like\n\n```\nif pkg-config openssl; then\n    :\nelse\n    echo >&2 \"Get some ssl!\"\n    exit 1\nfi\n```\n",
    "created_at": "2012-04-16T22:53:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118264",
    "user": "ppurka"
}
```

IIRC, this check for a package can be done with pkgconfig. Something like

```
if pkg-config openssl; then
    :
else
    echo >&2 "Get some ssl!"
    exit 1
fi
```




---

archive/issue_comments_118265.json:
```json
{
    "body": "pkgconfig isn't installed by default on OSX, but the openssl headers are.  So wouldn't the above test return a false result on stock OSX?",
    "created_at": "2012-04-17T04:08:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118265",
    "user": "jason"
}
```

pkgconfig isn't installed by default on OSX, but the openssl headers are.  So wouldn't the above test return a false result on stock OSX?



---

archive/issue_comments_118266.json:
```json
{
    "body": "Replying to [comment:235 jason]:\n> pkgconfig isn't installed by default on OSX, but the openssl headers are.  So wouldn't the above test return a false result on stock OSX?\n\nIf pkgconfig is nonstandard on OSX, I think we can not use it. In addition: Would pkgconfig openssl just detect openssl (which is installed on my machine), or would it detect the headers (which are not installed on my machine, by default)?",
    "created_at": "2012-04-17T04:19:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118266",
    "user": "SimonKing"
}
```

Replying to [comment:235 jason]:
> pkgconfig isn't installed by default on OSX, but the openssl headers are.  So wouldn't the above test return a false result on stock OSX?

If pkgconfig is nonstandard on OSX, I think we can not use it. In addition: Would pkgconfig openssl just detect openssl (which is installed on my machine), or would it detect the headers (which are not installed on my machine, by default)?



---

archive/issue_comments_118267.json:
```json
{
    "body": "I just tested: pkg-config does not work in the way we need it. Namely, I did `pkg-config openssl` in the sage shell of sage-5.1.notebook. Apparently openssl is installed (namely, the headers are in $SAGE_ROOT/local/include), but `pkg-config openssl` returns nothing.",
    "created_at": "2012-04-17T04:22:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118267",
    "user": "SimonKing"
}
```

I just tested: pkg-config does not work in the way we need it. Namely, I did `pkg-config openssl` in the sage shell of sage-5.1.notebook. Apparently openssl is installed (namely, the headers are in $SAGE_ROOT/local/include), but `pkg-config openssl` returns nothing.



---

archive/issue_comments_118268.json:
```json
{
    "body": "Replying to [comment:230 jdemeyer]:\n> These kind of checks is precisely why `autoconf` was invented...\nindeed. And I am also very much for this check being moved to prereq.",
    "created_at": "2012-04-17T04:29:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118268",
    "user": "dimpase"
}
```

Replying to [comment:230 jdemeyer]:
> These kind of checks is precisely why `autoconf` was invented...
indeed. And I am also very much for this check being moved to prereq.



---

archive/issue_comments_118269.json:
```json
{
    "body": "Simon, you need to use pkg-config correctly.  It returns an exit code, it doesn't print out something, IIRC.  Do `pkg-config --help` to see the options.",
    "created_at": "2012-04-17T04:33:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118269",
    "user": "jason"
}
```

Simon, you need to use pkg-config correctly.  It returns an exit code, it doesn't print out something, IIRC.  Do `pkg-config --help` to see the options.



---

archive/issue_comments_118270.json:
```json
{
    "body": "+1 to using autoconf, if someone knows how to write the necessary test.  How would we then get the result when doing the sagenb spkg?  We apparently want the sagenb to work without openssl too.",
    "created_at": "2012-04-17T04:34:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118270",
    "user": "jason"
}
```

+1 to using autoconf, if someone knows how to write the necessary test.  How would we then get the result when doing the sagenb spkg?  We apparently want the sagenb to work without openssl too.



---

archive/issue_comments_118271.json:
```json
{
    "body": "Replying to [comment:237 SimonKing]:\n> I just tested: pkg-config does not work in the way we need it. Namely, I did `pkg-config openssl` in the sage shell of sage-5.1.notebook. Apparently openssl is installed (namely, the headers are in $SAGE_ROOT/local/include), but `pkg-config openssl` returns nothing.\n\npkg-config will return nothing unless you ask it to print out.\n\nAnd I am surprised that it is not present in OSX. According to its [homepage](http://www.freedesktop.org/wiki/Software/pkg-config/) it runs on all *nix systems.",
    "created_at": "2012-04-17T04:40:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118271",
    "user": "ppurka"
}
```

Replying to [comment:237 SimonKing]:
> I just tested: pkg-config does not work in the way we need it. Namely, I did `pkg-config openssl` in the sage shell of sage-5.1.notebook. Apparently openssl is installed (namely, the headers are in $SAGE_ROOT/local/include), but `pkg-config openssl` returns nothing.

pkg-config will return nothing unless you ask it to print out.

And I am surprised that it is not present in OSX. According to its [homepage](http://www.freedesktop.org/wiki/Software/pkg-config/) it runs on all *nix systems.



---

archive/issue_comments_118272.json:
```json
{
    "body": "It runs just fine on OSX.  It is one of the first things I install.  It just doesn't come standard.",
    "created_at": "2012-04-17T04:43:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118272",
    "user": "jason"
}
```

It runs just fine on OSX.  It is one of the first things I install.  It just doesn't come standard.



---

archive/issue_comments_118273.json:
```json
{
    "body": "Replying to [comment:240 jason]:\n> We apparently want the sagenb to work without openssl too.\n\nEr, we do? Then why is pyOpenSSL a dependency?",
    "created_at": "2012-04-17T04:52:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118273",
    "user": "kini"
}
```

Replying to [comment:240 jason]:
> We apparently want the sagenb to work without openssl too.

Er, we do? Then why is pyOpenSSL a dependency?



---

archive/issue_comments_118274.json:
```json
{
    "body": "Replying to [comment:243 kini]:\n> Replying to [comment:240 jason]:\n> > We apparently want the sagenb to work without openssl too.\n> \n> Er, we do? Then why is pyOpenSSL a dependency?\n\nNo, I don't think we really need an openssl-less sagenb. Given the triviality of openssl installation, if needed, this looks like a makework project, to strip this functionality out of sagenb.",
    "created_at": "2012-04-17T04:55:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118274",
    "user": "dimpase"
}
```

Replying to [comment:243 kini]:
> Replying to [comment:240 jason]:
> > We apparently want the sagenb to work without openssl too.
> 
> Er, we do? Then why is pyOpenSSL a dependency?

No, I don't think we really need an openssl-less sagenb. Given the triviality of openssl installation, if needed, this looks like a makework project, to strip this functionality out of sagenb.



---

archive/issue_comments_118275.json:
```json
{
    "body": "The dev headers, unlike OpenSSL itself, are *not* usually installed, in binary Linux distributions. If requiring OpenSSL headers for sagenb results in a majority of Sage users installing the optional OpenSSL SPKG, then calling it \"optional\" starts to become a bit indefensible... so I can see why allowing sagenb to function without OpenSSL is attractive. After all, we only use it for basically openid and HTTPS connections, am I right?",
    "created_at": "2012-04-17T06:06:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118275",
    "user": "kini"
}
```

The dev headers, unlike OpenSSL itself, are *not* usually installed, in binary Linux distributions. If requiring OpenSSL headers for sagenb results in a majority of Sage users installing the optional OpenSSL SPKG, then calling it "optional" starts to become a bit indefensible... so I can see why allowing sagenb to function without OpenSSL is attractive. After all, we only use it for basically openid and HTTPS connections, am I right?



---

archive/issue_comments_118276.json:
```json
{
    "body": "If it is only for openid and https then it does make sense to have it as an optional package. Most people who download Sage, will be downloading for personal use. The few who are running servers, will have to install the extra package. This can be documented in an \"upgrade guide for sagenb\" perhaps.",
    "created_at": "2012-04-17T06:10:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118276",
    "user": "ppurka"
}
```

If it is only for openid and https then it does make sense to have it as an optional package. Most people who download Sage, will be downloading for personal use. The few who are running servers, will have to install the extra package. This can be documented in an "upgrade guide for sagenb" perhaps.



---

archive/issue_comments_118277.json:
```json
{
    "body": "Above, I had claimed that pkg-config did not recognise the headers installed by the optional openssl spkg. I stand corrected, since inside a sage shell I get\n\n```\n(sage-sh) king@mpc622:sage-5.1.notebook$ pkg-config --cflags openssl\n-I/mnt/local/king/SAGE/experiment/notebook/sage-5.1.notebook/local/include  \n```\n\n\nSo, testing for the presence of openssl using pkg-config *during configuration* (i.e., before starting the installation) makes sense.\n\nIf it is true that sagenb would - in principle - also work without openssl, I agree with ppurka that we could easily avoid openssl to become de-facto standard:\n\n* Make sure that sagenb spkg installs and the notebook basically works, even if openssl is not installed. Of course, the notebook will then lack some features.\n* If one tries to use the openid and https features, then a runtime error should be raised, with a clear error message along the lines\n {{{\nInstall openssl with development headers. If they are not available for\nyour operating system, you could install the optional openssl Sage package.\nThis is possible, e.g., with the command\n   install_package(\"openssl\")\nduring a Sage session.\nThen, re-install the Sage notebook package, e.g., by\n   install_package(\"sagenb\", forced=True)\nduring a Sage session.\n }}}\n\nWould that be enough, actually? Or would a recompilation of Sage be needed after re-installation of sagenb?",
    "created_at": "2012-04-17T06:29:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118277",
    "user": "SimonKing"
}
```

Above, I had claimed that pkg-config did not recognise the headers installed by the optional openssl spkg. I stand corrected, since inside a sage shell I get

```
(sage-sh) king@mpc622:sage-5.1.notebook$ pkg-config --cflags openssl
-I/mnt/local/king/SAGE/experiment/notebook/sage-5.1.notebook/local/include  
```


So, testing for the presence of openssl using pkg-config *during configuration* (i.e., before starting the installation) makes sense.

If it is true that sagenb would - in principle - also work without openssl, I agree with ppurka that we could easily avoid openssl to become de-facto standard:

* Make sure that sagenb spkg installs and the notebook basically works, even if openssl is not installed. Of course, the notebook will then lack some features.
* If one tries to use the openid and https features, then a runtime error should be raised, with a clear error message along the lines
 {{{
Install openssl with development headers. If they are not available for
your operating system, you could install the optional openssl Sage package.
This is possible, e.g., with the command
   install_package("openssl")
during a Sage session.
Then, re-install the Sage notebook package, e.g., by
   install_package("sagenb", forced=True)
during a Sage session.
 }}}

Would that be enough, actually? Or would a recompilation of Sage be needed after re-installation of sagenb?



---

archive/issue_comments_118278.json:
```json
{
    "body": "Replying to [comment:245 kini]:\n> The dev headers, unlike OpenSSL itself, are *not* usually installed, in binary Linux distributions. If requiring OpenSSL headers for sagenb results in a majority of Sage users installing the optional OpenSSL SPKG, then calling it \"optional\" starts to become a bit indefensible... so I can see why allowing sagenb to function without OpenSSL is attractive. After all, we only use it for basically openid and HTTPS connections, am I right?\n\na Linux binary distro doesn't come with gcc and make either, you'd have to install it. Nothing prevents you from installing openssh-dev at this moment, too.\n\nThe only real advantage of openssl-less sagenb is inclreased modularity... But, could we postpond this to the next milestone, please?",
    "created_at": "2012-04-17T08:25:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118278",
    "user": "dimpase"
}
```

Replying to [comment:245 kini]:
> The dev headers, unlike OpenSSL itself, are *not* usually installed, in binary Linux distributions. If requiring OpenSSL headers for sagenb results in a majority of Sage users installing the optional OpenSSL SPKG, then calling it "optional" starts to become a bit indefensible... so I can see why allowing sagenb to function without OpenSSL is attractive. After all, we only use it for basically openid and HTTPS connections, am I right?

a Linux binary distro doesn't come with gcc and make either, you'd have to install it. Nothing prevents you from installing openssh-dev at this moment, too.

The only real advantage of openssl-less sagenb is inclreased modularity... But, could we postpond this to the next milestone, please?



---

archive/issue_comments_118279.json:
```json
{
    "body": "Wow, really? ... It seems you are correct, Ubuntu 12.04 doesn't come with gcc preinstalled! Well then I agree that we should just encourage it as a dependency and provide an SPKG as well.",
    "created_at": "2012-04-17T08:35:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118279",
    "user": "kini"
}
```

Wow, really? ... It seems you are correct, Ubuntu 12.04 doesn't come with gcc preinstalled! Well then I agree that we should just encourage it as a dependency and provide an SPKG as well.



---

archive/issue_comments_118280.json:
```json
{
    "body": "FWIW, make test passes again. What I did:\n\n* Open the tar ball, cd sage-5.1.notebook; replace the existing sagenb spkg with the new one posted here.\n* make; wait until it fails.\n* ./sage -i openssl\n* make\n* make test\n\nCan someone else test whether the new spkg is able to pick up a system wide libssl-dev?",
    "created_at": "2012-04-17T09:09:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118280",
    "user": "SimonKing"
}
```

FWIW, make test passes again. What I did:

* Open the tar ball, cd sage-5.1.notebook; replace the existing sagenb spkg with the new one posted here.
* make; wait until it fails.
* ./sage -i openssl
* make
* make test

Can someone else test whether the new spkg is able to pick up a system wide libssl-dev?



---

archive/issue_comments_118281.json:
```json
{
    "body": "For the record: The problem reported at #11913 is *not* fixed by the new notebook. But I think, since the new notebook is probably close to being used, that #11913 should start with the new notebook.",
    "created_at": "2012-04-17T09:13:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118281",
    "user": "SimonKing"
}
```

For the record: The problem reported at #11913 is *not* fixed by the new notebook. But I think, since the new notebook is probably close to being used, that #11913 should start with the new notebook.



---

archive/issue_comments_118282.json:
```json
{
    "body": "And another criticism: When starting the notebook, I see\n\n```\nsage: notebook()\nThe notebook files are stored in: sage_notebook.sagenb\nUpgrading model version to version 1\nDone upgrading to model version 1\n**************************************************\n*                                                *\n* Open your web browser to http://localhost:8080 *\n*                                                *\n**************************************************\n2012-04-17 11:08:31+0200 [-] Log opened.\n2012-04-17 11:08:31+0200 [-] twistd 12.0.0 (/mnt/local/king/SAGE/experiment/notebook/sage-5.1.notebook/local/bin/python 2.7.2) starting up.\n2012-04-17 11:08:31+0200 [-] reactor class: twisted.internet.pollreactor.PollReactor.\n2012-04-17 11:08:31+0200 [-] QuietSite starting on 8080\n2012-04-17 11:08:31+0200 [-] Starting factory <__builtin__.QuietSite instance at 0x3da77e8>\n```\n\nIt is not mentioned that one is supposed to type Ctrl-c in order to return to Sage's command line version.\n\nI think there was a recent thread on sage-support (or sage-devel?)  started by a user who was confused about that point.\n\nWilliam stated that there used to be a clearer instruction when starting the notebook. Hence, I believe that this ticket is a good occasion to make the notebook instructions clearer.",
    "created_at": "2012-04-17T09:23:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118282",
    "user": "SimonKing"
}
```

And another criticism: When starting the notebook, I see

```
sage: notebook()
The notebook files are stored in: sage_notebook.sagenb
Upgrading model version to version 1
Done upgrading to model version 1
**************************************************
*                                                *
* Open your web browser to http://localhost:8080 *
*                                                *
**************************************************
2012-04-17 11:08:31+0200 [-] Log opened.
2012-04-17 11:08:31+0200 [-] twistd 12.0.0 (/mnt/local/king/SAGE/experiment/notebook/sage-5.1.notebook/local/bin/python 2.7.2) starting up.
2012-04-17 11:08:31+0200 [-] reactor class: twisted.internet.pollreactor.PollReactor.
2012-04-17 11:08:31+0200 [-] QuietSite starting on 8080
2012-04-17 11:08:31+0200 [-] Starting factory <__builtin__.QuietSite instance at 0x3da77e8>
```

It is not mentioned that one is supposed to type Ctrl-c in order to return to Sage's command line version.

I think there was a recent thread on sage-support (or sage-devel?)  started by a user who was confused about that point.

William stated that there used to be a clearer instruction when starting the notebook. Hence, I believe that this ticket is a good occasion to make the notebook instructions clearer.



---

archive/issue_comments_118283.json:
```json
{
    "body": "Replying to [comment:252 SimonKing]:\n> I believe that this ticket is a good occasion to make the notebook instructions clearer.\nI completely disagree with this.  Fix it, certainly.  But not on this ticket.",
    "created_at": "2012-04-17T09:43:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118283",
    "user": "jdemeyer"
}
```

Replying to [comment:252 SimonKing]:
> I believe that this ticket is a good occasion to make the notebook instructions clearer.
I completely disagree with this.  Fix it, certainly.  But not on this ticket.



---

archive/issue_comments_118284.json:
```json
{
    "body": "On Skynet iras (SUSE ES10 ia64), I built OpenSSL in my `$HOME` directory (so not in Sage) and I get the following weird error:\n\n```\nProcessing pyOpenSSL-0.12.tar.gz\nRunning pyOpenSSL-0.12/setup.py -q bdist_egg --dist-dir /tmp/easy_install-GTqwq9/pyOpenSSL-0.12/egg-dist-tmp-yGKR4i\nwarning: no files found matching 'COPYING'\nwarning: no previously-included files matching '*.pyc' found anywhere in distribution\n/usr/bin/ld: /home/buildbot/local/iras/lib/libcrypto.a(obj_dat.o): @gprel relocation against dynamic symbol obj_cleanup_defer\n/usr/bin/ld: /home/buildbot/local/iras/lib/libcrypto.a(obj_dat.o): @gprel relocation against dynamic symbol obj_cleanup_defer\n/usr/bin/ld: final link failed: Nonrepresentable section on output\ncollect2: ld returned 1 exit status\nerror: Setup script exited with error: command 'gcc' failed with exit status 1\nError installing pyOpenSSL-0.12.tar.gz.\n```\n",
    "created_at": "2012-04-17T09:59:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118284",
    "user": "jdemeyer"
}
```

On Skynet iras (SUSE ES10 ia64), I built OpenSSL in my `$HOME` directory (so not in Sage) and I get the following weird error:

```
Processing pyOpenSSL-0.12.tar.gz
Running pyOpenSSL-0.12/setup.py -q bdist_egg --dist-dir /tmp/easy_install-GTqwq9/pyOpenSSL-0.12/egg-dist-tmp-yGKR4i
warning: no files found matching 'COPYING'
warning: no previously-included files matching '*.pyc' found anywhere in distribution
/usr/bin/ld: /home/buildbot/local/iras/lib/libcrypto.a(obj_dat.o): @gprel relocation against dynamic symbol obj_cleanup_defer
/usr/bin/ld: /home/buildbot/local/iras/lib/libcrypto.a(obj_dat.o): @gprel relocation against dynamic symbol obj_cleanup_defer
/usr/bin/ld: final link failed: Nonrepresentable section on output
collect2: ld returned 1 exit status
error: Setup script exited with error: command 'gcc' failed with exit status 1
Error installing pyOpenSSL-0.12.tar.gz.
```




---

archive/issue_comments_118285.json:
```json
{
    "body": "Installing the optional `openSSL` spkg did work on `iras`.",
    "created_at": "2012-04-17T10:33:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118285",
    "user": "jdemeyer"
}
```

Installing the optional `openSSL` spkg did work on `iras`.



---

archive/issue_comments_118286.json:
```json
{
    "body": "That is a strange error indeed.\n\nSimon: I agree with Jeroen - that can be taken care of later. There are actually several things people are doing with sagenb that will not make it into 0.9.0 (the version of sagenb we are gearing up to release, as soon as this ticket has positive review). They will go into the following release of sagenb. This includes stuff like the switch from jsmath to mathjax, Ivan Andrus's code to allow opening .sws files from the command line, some LDAP implementation stuff which people are still hashing out, and a Russian translation that someone on github kindly made for us. See https://github.com/sagemath/sagenb/pulls for some stuff that people are working on but hasn't been accepted yet because we're still making 0.9.0. You can make your own edit of the startup message and add it to this list, if you wish :) Here is the relevant code: https://github.com/sagemath/sagenb/blob/master/sagenb/misc/misc.py#L26\n\n(Of course, we should technically have a separate branch for feature freezes such as this, but we'll get around to that later.)",
    "created_at": "2012-04-17T11:19:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118286",
    "user": "kini"
}
```

That is a strange error indeed.

Simon: I agree with Jeroen - that can be taken care of later. There are actually several things people are doing with sagenb that will not make it into 0.9.0 (the version of sagenb we are gearing up to release, as soon as this ticket has positive review). They will go into the following release of sagenb. This includes stuff like the switch from jsmath to mathjax, Ivan Andrus's code to allow opening .sws files from the command line, some LDAP implementation stuff which people are still hashing out, and a Russian translation that someone on github kindly made for us. See https://github.com/sagemath/sagenb/pulls for some stuff that people are working on but hasn't been accepted yet because we're still making 0.9.0. You can make your own edit of the startup message and add it to this list, if you wish :) Here is the relevant code: https://github.com/sagemath/sagenb/blob/master/sagenb/misc/misc.py#L26

(Of course, we should technically have a separate branch for feature freezes such as this, but we'll get around to that later.)



---

archive/issue_comments_118287.json:
```json
{
    "body": "One small thing still to be fixed in sagenb is to merge the patch from #12677 (I reported this at [http://code.google.com/p/sagenb/issues/detail?id=91](http://code.google.com/p/sagenb/issues/detail?id=91) before being told that Google Code isn't used anymore).",
    "created_at": "2012-04-17T11:41:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118287",
    "user": "jdemeyer"
}
```

One small thing still to be fixed in sagenb is to merge the patch from #12677 (I reported this at [http://code.google.com/p/sagenb/issues/detail?id=91](http://code.google.com/p/sagenb/issues/detail?id=91) before being told that Google Code isn't used anymore).



---

archive/issue_comments_118288.json:
```json
{
    "body": "Done. Building and uploading new SPKG now...",
    "created_at": "2012-04-17T12:13:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118288",
    "user": "kini"
}
```

Done. Building and uploading new SPKG now...



---

archive/issue_comments_118289.json:
```json
{
    "body": "The new SPKG is up. The commit I added is [here](https://github.com/sagemath/sagenb/commit/6b5557981330bd991a7ac1a3745e5afd44d318f7).",
    "created_at": "2012-04-17T13:00:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118289",
    "user": "kini"
}
```

The new SPKG is up. The commit I added is [here](https://github.com/sagemath/sagenb/commit/6b5557981330bd991a7ac1a3745e5afd44d318f7).



---

archive/issue_comments_118290.json:
```json
{
    "body": "So what are we going to do about SSL? It seems to me that since one cannot run `sage -i openssl` from a freshly unpacked tarball, we basically need to require SSL to be installed systemwide. Or we can expect the user to run `make`, wait for it to fail (!), then run `sage -i openssl` (hopefully by this time the machinery for `sage -i` is in place), and then run `make` again. Should I add a note to this effect to the \"install from source\" docs page?",
    "created_at": "2012-04-26T07:35:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118290",
    "user": "kini"
}
```

So what are we going to do about SSL? It seems to me that since one cannot run `sage -i openssl` from a freshly unpacked tarball, we basically need to require SSL to be installed systemwide. Or we can expect the user to run `make`, wait for it to fail (!), then run `sage -i openssl` (hopefully by this time the machinery for `sage -i` is in place), and then run `make` again. Should I add a note to this effect to the "install from source" docs page?



---

archive/issue_comments_118291.json:
```json
{
    "body": "Replying to [comment:260 kini]:\n> hopefully by this time the machinery for `sage -i` is in place\nIf you make SageNB depend on sage_scripts, this is guaranteed.",
    "created_at": "2012-04-26T22:00:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118291",
    "user": "jdemeyer"
}
```

Replying to [comment:260 kini]:
> hopefully by this time the machinery for `sage -i` is in place
If you make SageNB depend on sage_scripts, this is guaranteed.



---

archive/issue_comments_118292.json:
```json
{
    "body": "Surely `sage -i` must be installed by the time the sagenb SPKG fails, because the sagenb SPKG installation itself would have been started via `sage -i`. No?",
    "created_at": "2012-04-26T22:36:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118292",
    "user": "kini"
}
```

Surely `sage -i` must be installed by the time the sagenb SPKG fails, because the sagenb SPKG installation itself would have been started via `sage -i`. No?



---

archive/issue_comments_118293.json:
```json
{
    "body": "Replying to [comment:262 kini]:\n> Surely `sage -i` must be installed by the time the sagenb SPKG fails, because the sagenb SPKG installation itself would have been started via `sage -i`. No?\nNo.  The spkg installation could be started by `make`.  Moreover, the part of `sage -i openssl` which wouldn't work is the *downloading* part, not the *installation* part.",
    "created_at": "2012-04-26T22:38:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118293",
    "user": "jdemeyer"
}
```

Replying to [comment:262 kini]:
> Surely `sage -i` must be installed by the time the sagenb SPKG fails, because the sagenb SPKG installation itself would have been started via `sage -i`. No?
No.  The spkg installation could be started by `make`.  Moreover, the part of `sage -i openssl` which wouldn't work is the *downloading* part, not the *installation* part.



---

archive/issue_comments_118294.json:
```json
{
    "body": "OK, I see.",
    "created_at": "2012-04-26T23:05:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118294",
    "user": "kini"
}
```

OK, I see.



---

archive/issue_comments_118295.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-05-02T11:42:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118295",
    "user": "kini"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_118296.json:
```json
{
    "body": "I've uploaded a patch which causes the \"install from source code\" docs to mention OpenSSL as a requirement. Generally the whole page needs a cleanup though - see #11237. Marking as needs review again since I don't think there were any other issues (?).",
    "created_at": "2012-05-02T11:43:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118296",
    "user": "kini"
}
```

I've uploaded a patch which causes the "install from source code" docs to mention OpenSSL as a requirement. Generally the whole page needs a cleanup though - see #11237. Marking as needs review again since I don't think there were any other issues (?).



---

archive/issue_comments_118297.json:
```json
{
    "body": "Updated the SPKG due to merging [a bugfix](https://github.com/sagemath/sagenb/pull/40) from Jason.",
    "created_at": "2012-05-04T06:07:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118297",
    "user": "kini"
}
```

Updated the SPKG due to merging [a bugfix](https://github.com/sagemath/sagenb/pull/40) from Jason.



---

archive/issue_comments_118298.json:
```json
{
    "body": "Don't the OpenSSL libraries need to be installed, no matter what?  And the dev headers installed if you are compiling from source.  Are the libraries mentioned as prerequisites somewhere for running the notebook?",
    "created_at": "2012-05-04T09:16:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118298",
    "user": "jason"
}
```

Don't the OpenSSL libraries need to be installed, no matter what?  And the dev headers installed if you are compiling from source.  Are the libraries mentioned as prerequisites somewhere for running the notebook?



---

archive/issue_comments_118299.json:
```json
{
    "body": "Yup, that's what the latest patch does - mentions OpenSSL as a requirement for build Sage from source. I should probably also put that in the ticket description for testers/reviewers though.",
    "created_at": "2012-05-04T09:21:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118299",
    "user": "kini"
}
```

Yup, that's what the latest patch does - mentions OpenSSL as a requirement for build Sage from source. I should probably also put that in the ticket description for testers/reviewers though.



---

archive/issue_comments_118300.json:
```json
{
    "body": "My point is that OpenSSL libraries are needed for *running* the notebook, are they not?  If so, are they listed somewhere as runtime dependencies?",
    "created_at": "2012-05-04T09:26:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118300",
    "user": "jason"
}
```

My point is that OpenSSL libraries are needed for *running* the notebook, are they not?  If so, are they listed somewhere as runtime dependencies?



---

archive/issue_comments_118301.json:
```json
{
    "body": "Oh, very good point. No, they are not.",
    "created_at": "2012-05-04T09:41:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118301",
    "user": "kini"
}
```

Oh, very good point. No, they are not.



---

archive/issue_comments_118302.json:
```json
{
    "body": "They are not required?  Or they are not listed as runtime dependencies?",
    "created_at": "2012-05-04T09:43:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118302",
    "user": "jason"
}
```

They are not required?  Or they are not listed as runtime dependencies?



---

archive/issue_comments_118303.json:
```json
{
    "body": "They are not listed as runtime dependencies. Though I suppose it might be possible that they are not required either - and I think I'd rather not remove OpenSSL from my system to check this... :P I'll expand the latest patch to also mention this as a runtime dependency, if that's OK with you.",
    "created_at": "2012-05-04T09:53:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118303",
    "user": "kini"
}
```

They are not listed as runtime dependencies. Though I suppose it might be possible that they are not required either - and I think I'd rather not remove OpenSSL from my system to check this... :P I'll expand the latest patch to also mention this as a runtime dependency, if that's OK with you.



---

archive/issue_comments_118304.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-05-04T10:01:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118304",
    "user": "kini"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_118305.json:
```json
{
    "body": "New patch is up.",
    "created_at": "2012-05-04T10:17:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118305",
    "user": "kini"
}
```

New patch is up.



---

archive/issue_comments_118306.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-05-04T10:17:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118306",
    "user": "kini"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_118307.json:
```json
{
    "body": "I don't see any problems with the set of patches and spkgs in this ticket at present.\n\nI checked jmol on the command line and on the notebook and checked some other stuff (plot, interacts, math, etc), and they all work. I would give it positive review except that I haven't faced any openssl problems (in any of the earlier iterations of the patches).",
    "created_at": "2012-05-05T17:25:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118307",
    "user": "ppurka"
}
```

I don't see any problems with the set of patches and spkgs in this ticket at present.

I checked jmol on the command line and on the notebook and checked some other stuff (plot, interacts, math, etc), and they all work. I would give it positive review except that I haven't faced any openssl problems (in any of the earlier iterations of the patches).



---

archive/issue_comments_118308.json:
```json
{
    "body": "I've got a systems I can set up without OpenSSL to test. \u00a0However, I won't be able to do it until I finish with exams and grading (roughly May 12). \u00a0If we still need this part reviewed at that time, someone should remind me and I will do it.\n\nReplying to [comment:276 ppurka]:\n\n> I don't see any problems with the set of patches and spkgs in this ticket at present. I checked jmol on the command line and on the notebook and checked some other stuff (plot, interacts, math, etc), and they all work. I would give it positive review except that I haven't faced any openssl problems (in any of the earlier iterations of the patches).",
    "created_at": "2012-05-05T19:28:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118308",
    "user": "gutow"
}
```

I've got a systems I can set up without OpenSSL to test.  However, I won't be able to do it until I finish with exams and grading (roughly May 12).  If we still need this part reviewed at that time, someone should remind me and I will do it.

Replying to [comment:276 ppurka]:

> I don't see any problems with the set of patches and spkgs in this ticket at present. I checked jmol on the command line and on the notebook and checked some other stuff (plot, interacts, math, etc), and they all work. I would give it positive review except that I haven't faced any openssl problems (in any of the earlier iterations of the patches).



---

archive/issue_comments_118309.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-05-07T14:51:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118309",
    "user": "kini"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_118310.json:
```json
{
    "body": "apply to $SAGE_ROOT/devel/sage (on top of #12899)",
    "created_at": "2012-05-07T15:37:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118310",
    "user": "kini"
}
```

apply to $SAGE_ROOT/devel/sage (on top of #12899)



---

archive/issue_comments_118311.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-05-07T15:39:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118311",
    "user": "kini"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_118312.json:
```json
{
    "body": "Attachment [trac_11080-openssl-in-installation-docs.patch](tarball://root/attachments/some-uuid/ticket11080/trac_11080-openssl-in-installation-docs.patch) by kini created at 2012-05-07 15:39:38\n\nRebased patch up.",
    "created_at": "2012-05-07T15:39:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118312",
    "user": "kini"
}
```

Attachment [trac_11080-openssl-in-installation-docs.patch](tarball://root/attachments/some-uuid/ticket11080/trac_11080-openssl-in-installation-docs.patch) by kini created at 2012-05-07 15:39:38

Rebased patch up.



---

archive/issue_comments_118313.json:
```json
{
    "body": "Attachment [top-original-bottom-with11080.png](tarball://root/attachments/some-uuid/ticket11080/top-original-bottom-with11080.png) by ppurka created at 2012-05-11 06:03:45\n\nOriginal on top, with this ticket on bottom",
    "created_at": "2012-05-11T06:03:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118313",
    "user": "ppurka"
}
```

Attachment [top-original-bottom-with11080.png](tarball://root/attachments/some-uuid/ticket11080/top-original-bottom-with11080.png) by ppurka created at 2012-05-11 06:03:45

Original on top, with this ticket on bottom



---

archive/issue_comments_118314.json:
```json
{
    "body": "Installed it with openssl dev headers missing in Ubuntu-12.04, 64bits. The instructions provided are good.\n\nEverything working good except for a slight glitch in live documentation - tested interacts, jsmath, plots, jmol (both in command line and in notebook).\n\nIn the live documentation, the original output does not contain newlines. See [attachment:top-original-bottom-with11080.png this screenshot].",
    "created_at": "2012-05-11T06:04:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118314",
    "user": "ppurka"
}
```

Installed it with openssl dev headers missing in Ubuntu-12.04, 64bits. The instructions provided are good.

Everything working good except for a slight glitch in live documentation - tested interacts, jsmath, plots, jmol (both in command line and in notebook).

In the live documentation, the original output does not contain newlines. See [attachment:top-original-bottom-with11080.png this screenshot].



---

archive/issue_comments_118315.json:
```json
{
    "body": "Edited the instructions since #12899 was merged in 5.0.rc1",
    "created_at": "2012-05-11T11:34:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118315",
    "user": "kini"
}
```

Edited the instructions since #12899 was merged in 5.0.rc1



---

archive/issue_comments_118316.json:
```json
{
    "body": "Update to refer to the new patch with fixed git links in #12229",
    "created_at": "2012-05-16T06:54:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118316",
    "user": "ppurka"
}
```

Update to refer to the new patch with fixed git links in #12229



---

archive/issue_comments_118317.json:
```json
{
    "body": "Replying to [comment:280 ppurka]:\n> Installed it with openssl dev headers missing in Ubuntu-12.04, 64bits. The instructions provided are good.\n> \n> Everything working good except for a slight glitch in live documentation - tested interacts, jsmath, plots, jmol (both in command line and in notebook).\n> \n> In the live documentation, the original output does not contain newlines. See [attachment:top-original-bottom-with11080.png this screenshot].\n\nThis must be browser/OS-specific, as I can't reproduce this MacOSX.",
    "created_at": "2012-05-25T14:17:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118317",
    "user": "dimpase"
}
```

Replying to [comment:280 ppurka]:
> Installed it with openssl dev headers missing in Ubuntu-12.04, 64bits. The instructions provided are good.
> 
> Everything working good except for a slight glitch in live documentation - tested interacts, jsmath, plots, jmol (both in command line and in notebook).
> 
> In the live documentation, the original output does not contain newlines. See [attachment:top-original-bottom-with11080.png this screenshot].

This must be browser/OS-specific, as I can't reproduce this MacOSX.



---

archive/issue_comments_118318.json:
```json
{
    "body": "`@`kini, when did you last update the spkg?  The other day I fixed some serious scaling bugs that have been around for years (see the latest commits).  In the process, I eliminated the need for twisted.  We can merge this reviewed version in and then immediately follow up with a new version, or we can try to cram yet a few more commits in.  What do you think?",
    "created_at": "2012-05-25T17:23:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118318",
    "user": "jason"
}
```

`@`kini, when did you last update the spkg?  The other day I fixed some serious scaling bugs that have been around for years (see the latest commits).  In the process, I eliminated the need for twisted.  We can merge this reviewed version in and then immediately follow up with a new version, or we can try to cram yet a few more commits in.  What do you think?



---

archive/issue_comments_118319.json:
```json
{
    "body": "Replying to [comment:283 dimpase]:\n> Replying to [comment:280 ppurka]:\n> > Installed it with openssl dev headers missing in Ubuntu-12.04, 64bits. The instructions provided are good.\n> > \n> > Everything working good except for a slight glitch in live documentation - tested interacts, jsmath, plots, jmol (both in command line and in notebook).\n> > \n> > In the live documentation, the original output does not contain newlines. See [attachment:top-original-bottom-with11080.png this screenshot].\n> \n> This must be browser/OS-specific, as I can't reproduce this MacOSX.\n\nI had tried it on both opera and firefox on Gentoo Linux. If it is not reproducible, then it's even better. We can finally close this ticket. :)",
    "created_at": "2012-05-25T17:47:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118319",
    "user": "ppurka"
}
```

Replying to [comment:283 dimpase]:
> Replying to [comment:280 ppurka]:
> > Installed it with openssl dev headers missing in Ubuntu-12.04, 64bits. The instructions provided are good.
> > 
> > Everything working good except for a slight glitch in live documentation - tested interacts, jsmath, plots, jmol (both in command line and in notebook).
> > 
> > In the live documentation, the original output does not contain newlines. See [attachment:top-original-bottom-with11080.png this screenshot].
> 
> This must be browser/OS-specific, as I can't reproduce this MacOSX.

I had tried it on both opera and firefox on Gentoo Linux. If it is not reproducible, then it's even better. We can finally close this ticket. :)



---

archive/issue_comments_118320.json:
```json
{
    "body": "Replying to [comment:284 jason]:\n> `@`kini, when did you last update the spkg?  The other day I fixed some serious scaling bugs that have been around for years (see the latest commits).  In the process, I eliminated the need for twisted.  We can merge this reviewed version in and then immediately follow up with a new version, or we can try to cram yet a few more commits in.  What do you think?\n\nI think it would be better to merge this ticket at the earliest. It has come to a stage (after so many months!) where it is finally satisfactory.\n\nThe scalability problems can be addressed in a later ticket since the problems are evident only when there are thousands of accounts. From an end-user point of view, the speedup won't be very evident. So, mathjax + uwsgi can be the target of the next big nb ticket.",
    "created_at": "2012-05-25T17:52:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118320",
    "user": "ppurka"
}
```

Replying to [comment:284 jason]:
> `@`kini, when did you last update the spkg?  The other day I fixed some serious scaling bugs that have been around for years (see the latest commits).  In the process, I eliminated the need for twisted.  We can merge this reviewed version in and then immediately follow up with a new version, or we can try to cram yet a few more commits in.  What do you think?

I think it would be better to merge this ticket at the earliest. It has come to a stage (after so many months!) where it is finally satisfactory.

The scalability problems can be addressed in a later ticket since the problems are evident only when there are thousands of accounts. From an end-user point of view, the speedup won't be very evident. So, mathjax + uwsgi can be the target of the next big nb ticket.



---

archive/issue_comments_118321.json:
```json
{
    "body": "That sounds good.  I wonder if we'll reach 300 comments before this ticket is merged...",
    "created_at": "2012-05-25T17:57:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118321",
    "user": "jason"
}
```

That sounds good.  I wonder if we'll reach 300 comments before this ticket is merged...



---

archive/issue_comments_118322.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-05-25T19:17:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118322",
    "user": "dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_118323.json:
```json
{
    "body": "Replying to [comment:284 jason]:\n> `@`kini, when did you last update the spkg?  The other day I fixed some serious scaling bugs that have been around for years (see the latest commits).  In the process, I eliminated the need for twisted.  We can merge this reviewed version in and then immediately follow up with a new version, or we can try to cram yet a few more commits in.  What do you think?\n\n\n```\nboxen:/home/keshav/files$ ls -l sagenb-0.9.0.spkg \n-rw-r--r-- 1 keshav keshav 26699829 2012-05-03 23:13 sagenb-0.9.0.spkg\n```\n\n\nAnyway, IMHO it's time to close this ticket. I hereby give it a positive review...",
    "created_at": "2012-05-25T19:17:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118323",
    "user": "dimpase"
}
```

Replying to [comment:284 jason]:
> `@`kini, when did you last update the spkg?  The other day I fixed some serious scaling bugs that have been around for years (see the latest commits).  In the process, I eliminated the need for twisted.  We can merge this reviewed version in and then immediately follow up with a new version, or we can try to cram yet a few more commits in.  What do you think?


```
boxen:/home/keshav/files$ ls -l sagenb-0.9.0.spkg 
-rw-r--r-- 1 keshav keshav 26699829 2012-05-03 23:13 sagenb-0.9.0.spkg
```


Anyway, IMHO it's time to close this ticket. I hereby give it a positive review...



---

archive/issue_comments_118324.json:
```json
{
    "body": "After looking at #12229 fairly carefully, I believe that it should remain a blocker for whatever Sage release the new notebook goes in, but not for this actual ticket.  The instructions are so generic and even currently inaccurate, that it would be counterproductive to keep that from allowing people to *test* this ticket in an early beta of some Sage version.\n\nI know you all know I wouldn't say this lightly ;-) so as long as nobody has a problem with #12229 having that new status\n* Blocker for ... Sage 5.2, I think Jeroen was estimating?\n* No longer a prereq for this ticket being merged\nthen let's get this in.",
    "created_at": "2012-06-01T17:49:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118324",
    "user": "kcrisman"
}
```

After looking at #12229 fairly carefully, I believe that it should remain a blocker for whatever Sage release the new notebook goes in, but not for this actual ticket.  The instructions are so generic and even currently inaccurate, that it would be counterproductive to keep that from allowing people to *test* this ticket in an early beta of some Sage version.

I know you all know I wouldn't say this lightly ;-) so as long as nobody has a problem with #12229 having that new status
* Blocker for ... Sage 5.2, I think Jeroen was estimating?
* No longer a prereq for this ticket being merged
then let's get this in.



---

archive/issue_comments_118325.json:
```json
{
    "body": "Replying to [ticket:11080 jason]:\n> When we have finalized things, we'll make a finished spkg that has the appropriate tags in the revision history, no unnecessary revision branches, etc.\nMaybe now would be the time to do precisely this?",
    "created_at": "2012-06-15T08:47:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118325",
    "user": "jdemeyer"
}
```

Replying to [ticket:11080 jason]:
> When we have finalized things, we'll make a finished spkg that has the appropriate tags in the revision history, no unnecessary revision branches, etc.
Maybe now would be the time to do precisely this?



---

archive/issue_comments_118326.json:
```json
{
    "body": "The `sagenb`'s SPKG.txt should list OpenSSL as dependency.",
    "created_at": "2012-06-15T08:49:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118326",
    "user": "jdemeyer"
}
```

The `sagenb`'s SPKG.txt should list OpenSSL as dependency.



---

archive/issue_comments_118327.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-06-15T08:49:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118327",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_118328.json:
```json
{
    "body": "Replying to [comment:290 kcrisman]:\n> After looking at #12229 fairly carefully, I believe that it should remain a blocker for whatever Sage release the new notebook goes in, but not for this actual ticket.\nThis has a high probability of leading to the situation where #11080 gets merged but nobody looks after #12229. Then sage-5.2 (or whichever version) cannot be released. Whenever there is a group of tickets which must be released together (even if they don't strictly depend on eachother), I prefer to wait until all of them have positive review.",
    "created_at": "2012-06-15T09:00:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118328",
    "user": "jdemeyer"
}
```

Replying to [comment:290 kcrisman]:
> After looking at #12229 fairly carefully, I believe that it should remain a blocker for whatever Sage release the new notebook goes in, but not for this actual ticket.
This has a high probability of leading to the situation where #11080 gets merged but nobody looks after #12229. Then sage-5.2 (or whichever version) cannot be released. Whenever there is a group of tickets which must be released together (even if they don't strictly depend on eachother), I prefer to wait until all of them have positive review.



---

archive/issue_comments_118329.json:
```json
{
    "body": "> > After looking at #12229 fairly carefully, I believe that it should remain a blocker for whatever Sage release the new notebook goes in, but not for this actual ticket.\n> This has a high probability of leading to the situation where #11080 gets merged but nobody looks after #12229. Then sage-5.2 (or whichever version) cannot be released. Whenever there is a group of tickets which must be released together (even if they don't strictly depend on eachother), I prefer to wait until all of them have positive review.\n\nIn this case, because #12229 does not need that much additional work, and because we would like people to TEST the new notebook at an early stage a lot (which #12229 is totally unnecessary for), I disagree.\n\nIn any case, most of what ails #12229 is for nb.sagemath.org to be updated slightly so we can change some references there, and I've already sent Harald two emails with specific changes (which hopefully he'll get back to me on soon).  So I think it would be penny-wise and pound-foolish to wait for #12229.  Also, having this ticket in will put more motivation behind the people at #12229 to get it done :)",
    "created_at": "2012-06-15T12:37:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118329",
    "user": "kcrisman"
}
```

> > After looking at #12229 fairly carefully, I believe that it should remain a blocker for whatever Sage release the new notebook goes in, but not for this actual ticket.
> This has a high probability of leading to the situation where #11080 gets merged but nobody looks after #12229. Then sage-5.2 (or whichever version) cannot be released. Whenever there is a group of tickets which must be released together (even if they don't strictly depend on eachother), I prefer to wait until all of them have positive review.

In this case, because #12229 does not need that much additional work, and because we would like people to TEST the new notebook at an early stage a lot (which #12229 is totally unnecessary for), I disagree.

In any case, most of what ails #12229 is for nb.sagemath.org to be updated slightly so we can change some references there, and I've already sent Harald two emails with specific changes (which hopefully he'll get back to me on soon).  So I think it would be penny-wise and pound-foolish to wait for #12229.  Also, having this ticket in will put more motivation behind the people at #12229 to get it done :)



---

archive/issue_comments_118330.json:
```json
{
    "body": "Replying to [comment:293 jdemeyer]:\n> Replying to [ticket:11080 jason]:\n> > When we have finalized things, we'll make a finished spkg that has the appropriate tags in the revision history, no unnecessary revision branches, etc.\n> Maybe now would be the time to do precisely this?\n\nI've done all of that stuff already except tagging the release. Stand by...",
    "created_at": "2012-06-15T19:11:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118330",
    "user": "kini"
}
```

Replying to [comment:293 jdemeyer]:
> Replying to [ticket:11080 jason]:
> > When we have finalized things, we'll make a finished spkg that has the appropriate tags in the revision history, no unnecessary revision branches, etc.
> Maybe now would be the time to do precisely this?

I've done all of that stuff already except tagging the release. Stand by...



---

archive/issue_comments_118331.json:
```json
{
    "body": "John Palmieri, who is sitting next to me at sage days 41, suggests that we just not package a repository with sagenb at all. What do you think? After all, sagenb is considered an upstream package at this point, and we don't package repositories for those. Plus it's using a revision control system that isn't included with sage anyway (yet). Also, due to various decisions by people over the lifetime of the repository, the repository is really large - 14 MB at maximum compression, at the current master. So removing it would slim down the sage source and binary distributions by a non-negligible amount. The docs added at #12229 already give instructions on how to clone the repository from github anyway. So why do we need to ship a repo?",
    "created_at": "2012-06-15T22:38:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118331",
    "user": "kini"
}
```

John Palmieri, who is sitting next to me at sage days 41, suggests that we just not package a repository with sagenb at all. What do you think? After all, sagenb is considered an upstream package at this point, and we don't package repositories for those. Plus it's using a revision control system that isn't included with sage anyway (yet). Also, due to various decisions by people over the lifetime of the repository, the repository is really large - 14 MB at maximum compression, at the current master. So removing it would slim down the sage source and binary distributions by a non-negligible amount. The docs added at #12229 already give instructions on how to clone the repository from github anyway. So why do we need to ship a repo?



---

archive/issue_comments_118332.json:
```json
{
    "body": "Please, let's just get this positively reviewed.  Also, I'm not really interested in touching #12229 again, which we would have to do if you removed the hg repo this time around.  \"Slimming down\" sounds fine after Jeroen has definitively put this in 5.2.",
    "created_at": "2012-06-16T02:53:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118332",
    "user": "kcrisman"
}
```

Please, let's just get this positively reviewed.  Also, I'm not really interested in touching #12229 again, which we would have to do if you removed the hg repo this time around.  "Slimming down" sounds fine after Jeroen has definitively put this in 5.2.



---

archive/issue_comments_118333.json:
```json
{
    "body": "I was really suggesting this \"slimming\" for the followup ticket, #13121, not for this one.",
    "created_at": "2012-06-16T04:06:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118333",
    "user": "jhpalmieri"
}
```

I was really suggesting this "slimming" for the followup ticket, #13121, not for this one.



---

archive/issue_comments_118334.json:
```json
{
    "body": "Sure, that's fine.",
    "created_at": "2012-06-16T04:13:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118334",
    "user": "kini"
}
```

Sure, that's fine.



---

archive/issue_comments_118335.json:
```json
{
    "body": "New SPKG is up at the same URL.",
    "created_at": "2012-06-16T06:50:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118335",
    "user": "kini"
}
```

New SPKG is up at the same URL.



---

archive/issue_comments_118336.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-06-16T07:21:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118336",
    "user": "kini"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_118337.json:
```json
{
    "body": "Replying to [comment:294 jdemeyer]:\n> The `sagenb`'s SPKG.txt should list OpenSSL as dependency.\n\nIt doesn't look like this has been addressed.",
    "created_at": "2012-06-16T23:16:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118337",
    "user": "jhpalmieri"
}
```

Replying to [comment:294 jdemeyer]:
> The `sagenb`'s SPKG.txt should list OpenSSL as dependency.

It doesn't look like this has been addressed.



---

archive/issue_comments_118338.json:
```json
{
    "body": "By the way, as far as openssl goes, it probably shouldn't be a dependency, since openssl (at least our current spkg) doesn't seem to build on OS X Lion. So the role of openssl should be spelled out in SPKG.txt: under what circumstances do you need to install it?",
    "created_at": "2012-06-17T03:09:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118338",
    "user": "jhpalmieri"
}
```

By the way, as far as openssl goes, it probably shouldn't be a dependency, since openssl (at least our current spkg) doesn't seem to build on OS X Lion. So the role of openssl should be spelled out in SPKG.txt: under what circumstances do you need to install it?



---

archive/issue_comments_118339.json:
```json
{
    "body": "Replying to [comment:306 jhpalmieri]:\n> By the way, as far as openssl goes, it probably shouldn't be a dependency, since openssl (at least our current spkg) doesn't seem to build on OS X Lion.\nIsn't OpenSSL part of the OS X operating system?\n\n> So the role of openssl should be spelled out in SPKG.txt: under what circumstances do you need to install it?\nIf and only if it is not already supplied on the system.",
    "created_at": "2012-06-17T17:58:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118339",
    "user": "jdemeyer"
}
```

Replying to [comment:306 jhpalmieri]:
> By the way, as far as openssl goes, it probably shouldn't be a dependency, since openssl (at least our current spkg) doesn't seem to build on OS X Lion.
Isn't OpenSSL part of the OS X operating system?

> So the role of openssl should be spelled out in SPKG.txt: under what circumstances do you need to install it?
If and only if it is not already supplied on the system.



---

archive/issue_comments_118340.json:
```json
{
    "body": "Replying to [comment:307 jdemeyer]:\n> Replying to [comment:306 jhpalmieri]:\n> > By the way, as far as openssl goes, it probably shouldn't be a dependency, since openssl (at least our current spkg) doesn't seem to build on OS X Lion.\n> Isn't OpenSSL part of the OS X operating system?\n\nI guess it is, but [perhaps not for much longer](http://ludovicrousseau.blogspot.com/2011/08/mac-os-x-lion-and-openssl.html).\n\n> > So the role of openssl should be spelled out in SPKG.txt: under what circumstances do you need to install it?\n> If and only if it is not already supplied on the system.\n\nOkay, sounds good, but this needs to be in SPKG.txt, in clear enough terms so someone like me reading it knows not to try to install the optional openssl spkg on OS X, rather than trying `sage -i openssl` and then worrying when it doesn't build.",
    "created_at": "2012-06-17T19:39:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118340",
    "user": "jhpalmieri"
}
```

Replying to [comment:307 jdemeyer]:
> Replying to [comment:306 jhpalmieri]:
> > By the way, as far as openssl goes, it probably shouldn't be a dependency, since openssl (at least our current spkg) doesn't seem to build on OS X Lion.
> Isn't OpenSSL part of the OS X operating system?

I guess it is, but [perhaps not for much longer](http://ludovicrousseau.blogspot.com/2011/08/mac-os-x-lion-and-openssl.html).

> > So the role of openssl should be spelled out in SPKG.txt: under what circumstances do you need to install it?
> If and only if it is not already supplied on the system.

Okay, sounds good, but this needs to be in SPKG.txt, in clear enough terms so someone like me reading it knows not to try to install the optional openssl spkg on OS X, rather than trying `sage -i openssl` and then worrying when it doesn't build.



---

archive/issue_comments_118341.json:
```json
{
    "body": "Are there any issues left other than the openssl stuff?  I've been running this for almost a year on the server I use with my students and have had good luck with it (it is at least as good as the standard notebook).  Additionally, I've developed #12299 on top of #11080, so have looked at some fraction of the code in #11080.  I'm willing to give it a positive review once the openssl stuff is settled.",
    "created_at": "2012-06-17T21:39:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118341",
    "user": "gutow"
}
```

Are there any issues left other than the openssl stuff?  I've been running this for almost a year on the server I use with my students and have had good luck with it (it is at least as good as the standard notebook).  Additionally, I've developed #12299 on top of #11080, so have looked at some fraction of the code in #11080.  I'm willing to give it a positive review once the openssl stuff is settled.



---

archive/issue_comments_118342.json:
```json
{
    "body": "For me, all that is needed for positive review is to document in `SPKG.txt` the fact that this depends on OpenSSL.",
    "created_at": "2012-06-18T07:48:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118342",
    "user": "jdemeyer"
}
```

For me, all that is needed for positive review is to document in `SPKG.txt` the fact that this depends on OpenSSL.



---

archive/issue_comments_118343.json:
```json
{
    "body": "Jeroen: the SPKG.txt file here is extremely out of date and there is a lot more wrong with it than the fact that the OpenSSL dependency is not mentioned. I have more or less completely rewritten the SPKG.txt at [github #63](http://github.com/sagemath/sagenb/pull/63), which I hope will go into #13121 (in fact the new SPKG.txt is in the preliminary 0.9.1 SPKG I have put up on that ticket). More importantly, the OpenSSL dependency is already explained in the installation docs (by [attachment:trac_11080-openssl-in-installation-docs.patch]). Is it really necessary to edit this old version of SPKG.txt when OpenSSL is already stated as a dependency of Sage as a whole?\n\nJohn makes a good point, though - it should be made clear that installing OpenSSL is unnecessary if OpenSSL is already on your system. The current patch to the installation docs could be updated to say that more explicitly.",
    "created_at": "2012-06-18T15:20:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118343",
    "user": "kini"
}
```

Jeroen: the SPKG.txt file here is extremely out of date and there is a lot more wrong with it than the fact that the OpenSSL dependency is not mentioned. I have more or less completely rewritten the SPKG.txt at [github #63](http://github.com/sagemath/sagenb/pull/63), which I hope will go into #13121 (in fact the new SPKG.txt is in the preliminary 0.9.1 SPKG I have put up on that ticket). More importantly, the OpenSSL dependency is already explained in the installation docs (by [attachment:trac_11080-openssl-in-installation-docs.patch]). Is it really necessary to edit this old version of SPKG.txt when OpenSSL is already stated as a dependency of Sage as a whole?

John makes a good point, though - it should be made clear that installing OpenSSL is unnecessary if OpenSSL is already on your system. The current patch to the installation docs could be updated to say that more explicitly.



---

archive/issue_comments_118344.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-06-18T15:40:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118344",
    "user": "jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_118345.json:
```json
{
    "body": "Replying to [comment:311 kini]:\n> Jeroen: the SPKG.txt file here is extremely out of date and there is a lot more wrong with it than the fact that the OpenSSL dependency is not mentioned. I have more or less completely rewritten the SPKG.txt at [github #63](http://github.com/sagemath/sagenb/pull/63), which I hope will go into #13121 (in fact the new SPKG.txt is in the preliminary 0.9.1 SPKG I have put up on that ticket). More importantly, the OpenSSL dependency is already explained in the installation docs (by [attachment:trac_11080-openssl-in-installation-docs.patch]). Is it really necessary to edit this old version of SPKG.txt when OpenSSL is already stated as a dependency of Sage as a whole?\n\nOkay, that's good for me.",
    "created_at": "2012-06-18T15:40:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118345",
    "user": "jdemeyer"
}
```

Replying to [comment:311 kini]:
> Jeroen: the SPKG.txt file here is extremely out of date and there is a lot more wrong with it than the fact that the OpenSSL dependency is not mentioned. I have more or less completely rewritten the SPKG.txt at [github #63](http://github.com/sagemath/sagenb/pull/63), which I hope will go into #13121 (in fact the new SPKG.txt is in the preliminary 0.9.1 SPKG I have put up on that ticket). More importantly, the OpenSSL dependency is already explained in the installation docs (by [attachment:trac_11080-openssl-in-installation-docs.patch]). Is it really necessary to edit this old version of SPKG.txt when OpenSSL is already stated as a dependency of Sage as a whole?

Okay, that's good for me.



---

archive/issue_comments_118346.json:
```json
{
    "body": "Hi everybody,\n\nI just post this comment to tell you that my machine (core 2 duo with Ubuntu 12.04 32 bits installation) asked to install uuid-dev package when installing sagecell-0.9.0.spkg After the good apt-get install, it works now fine with the 5.0\n\n```\n...\nchecking for sem_init in -lrt... yes\nchecking for uuid_generate in -luuid... no\nconfigure: error: cannot link with -luuid, install uuid-dev.\nError configuring zeromq.\n```\n\nThe Sage Cell Server works now fine on my machine. On the same machine, I didn't manage to install the sage-5.2.alpha0 which didn't compiled.\n\nThanks for this nice work. As all this go too far for my computer skills, i can just test your work but no more...",
    "created_at": "2012-06-18T19:43:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118346",
    "user": "nborie"
}
```

Hi everybody,

I just post this comment to tell you that my machine (core 2 duo with Ubuntu 12.04 32 bits installation) asked to install uuid-dev package when installing sagecell-0.9.0.spkg After the good apt-get install, it works now fine with the 5.0

```
...
checking for sem_init in -lrt... yes
checking for uuid_generate in -luuid... no
configure: error: cannot link with -luuid, install uuid-dev.
Error configuring zeromq.
```

The Sage Cell Server works now fine on my machine. On the same machine, I didn't manage to install the sage-5.2.alpha0 which didn't compiled.

Thanks for this nice work. As all this go too far for my computer skills, i can just test your work but no more...



---

archive/issue_comments_118347.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-06-19T16:18:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118347",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_118348.json:
```json
{
    "body": "Unfortunately, this fails on hawk (OpenSolaris 06/2009 i86pc):\n\n```\n****************************************************\nHost system:\nSunOS hawk 5.11 snv_134 i86pc i386 i86pc\n****************************************************\nC compiler: gcc\nC compiler version:\nUsing built-in specs.\nTarget: i386-pc-solaris2.11\nConfigured with: ../gcc-4.4-20100112/configure --with-as=/usr/local/binutils-2.20/bin/as --with-ld=/usr/ccs/bin/ld --with-gmp=/usr/local --with-mpfr=/usr/local\nThread model: posix\ngcc version 4.4.3 20100112 (prerelease) (GCC) \n****************************************************\nProcessing Twisted-12.1.0.tar.bz2\nRunning Twisted-12.1.0/setup.py -q bdist_egg --dist-dir /tmp/easy_install-hCklWr/Twisted-12.1.0/egg-dist-tmp-5538SU\nconftest.c:1:23: error: sys/epoll.h: No such file or directory\ntwisted/python/sendmsg.c: In function \u2018sendmsg_sendmsg\u2019:\ntwisted/python/sendmsg.c:198: error: \u2018struct msghdr\u2019 has no member named \u2018msg_control\u2019\ntwisted/python/sendmsg.c:199: error: \u2018struct msghdr\u2019 has no member named \u2018msg_controllen\u2019\ntwisted/python/sendmsg.c:201: error: \u2018struct msghdr\u2019 has no member named \u2018msg_flags\u2019\ntwisted/python/sendmsg.c:243: warning: implicit declaration of function \u2018CMSG_SPACE\u2019\ntwisted/python/sendmsg.c:268: error: \u2018struct msghdr\u2019 has no member named \u2018msg_control\u2019\ntwisted/python/sendmsg.c:269: error: \u2018struct msghdr\u2019 has no member named \u2018msg_control\u2019\ntwisted/python/sendmsg.c:274: error: \u2018struct msghdr\u2019 has no member named \u2018msg_control\u2019\ntwisted/python/sendmsg.c:276: error: \u2018struct msghdr\u2019 has no member named \u2018msg_controllen\u2019\ntwisted/python/sendmsg.c:285: warning: implicit declaration of function \u2018CMSG_FIRSTHDR\u2019\ntwisted/python/sendmsg.c:285: warning: initialization makes pointer from integer without a cast\ntwisted/python/sendmsg.c:306: warning: implicit declaration of function \u2018CMSG_LEN\u2019\ntwisted/python/sendmsg.c:316: warning: implicit declaration of function \u2018CMSG_DATA\u2019\ntwisted/python/sendmsg.c:316: warning: assignment makes pointer from integer without a cast\ntwisted/python/sendmsg.c:322: warning: implicit declaration of function \u2018CMSG_NXTHDR\u2019\ntwisted/python/sendmsg.c:322: warning: assignment makes pointer from integer without a cast\ntwisted/python/sendmsg.c:351: error: \u2018struct msghdr\u2019 has no member named \u2018msg_control\u2019\ntwisted/python/sendmsg.c:352: error: \u2018struct msghdr\u2019 has no member named \u2018msg_control\u2019\ntwisted/python/sendmsg.c:353: error: \u2018struct msghdr\u2019 has no member named \u2018msg_control\u2019\ntwisted/python/sendmsg.c: In function \u2018sendmsg_recvmsg\u2019:\ntwisted/python/sendmsg.c:414: error: \u2018struct msghdr\u2019 has no member named \u2018msg_control\u2019\ntwisted/python/sendmsg.c:416: error: \u2018struct msghdr\u2019 has no member named \u2018msg_controllen\u2019\ntwisted/python/sendmsg.c:429: warning: assignment makes pointer from integer without a cast\ntwisted/python/sendmsg.c:432: warning: assignment makes pointer from integer without a cast\ntwisted/python/sendmsg.c:477: error: \u2018struct msghdr\u2019 has no member named \u2018msg_flags\u2019\nerror: Setup script exited with error: command 'gcc' failed with exit status 1\nError installing Twisted-12.1.0.tar.bz2.\n```\n\n\nI seem to recall that Twisted-11 did work, but I'm not sure.",
    "created_at": "2012-06-19T16:18:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118348",
    "user": "jdemeyer"
}
```

Unfortunately, this fails on hawk (OpenSolaris 06/2009 i86pc):

```
****************************************************
Host system:
SunOS hawk 5.11 snv_134 i86pc i386 i86pc
****************************************************
C compiler: gcc
C compiler version:
Using built-in specs.
Target: i386-pc-solaris2.11
Configured with: ../gcc-4.4-20100112/configure --with-as=/usr/local/binutils-2.20/bin/as --with-ld=/usr/ccs/bin/ld --with-gmp=/usr/local --with-mpfr=/usr/local
Thread model: posix
gcc version 4.4.3 20100112 (prerelease) (GCC) 
****************************************************
Processing Twisted-12.1.0.tar.bz2
Running Twisted-12.1.0/setup.py -q bdist_egg --dist-dir /tmp/easy_install-hCklWr/Twisted-12.1.0/egg-dist-tmp-5538SU
conftest.c:1:23: error: sys/epoll.h: No such file or directory
twisted/python/sendmsg.c: In function ‘sendmsg_sendmsg’:
twisted/python/sendmsg.c:198: error: ‘struct msghdr’ has no member named ‘msg_control’
twisted/python/sendmsg.c:199: error: ‘struct msghdr’ has no member named ‘msg_controllen’
twisted/python/sendmsg.c:201: error: ‘struct msghdr’ has no member named ‘msg_flags’
twisted/python/sendmsg.c:243: warning: implicit declaration of function ‘CMSG_SPACE’
twisted/python/sendmsg.c:268: error: ‘struct msghdr’ has no member named ‘msg_control’
twisted/python/sendmsg.c:269: error: ‘struct msghdr’ has no member named ‘msg_control’
twisted/python/sendmsg.c:274: error: ‘struct msghdr’ has no member named ‘msg_control’
twisted/python/sendmsg.c:276: error: ‘struct msghdr’ has no member named ‘msg_controllen’
twisted/python/sendmsg.c:285: warning: implicit declaration of function ‘CMSG_FIRSTHDR’
twisted/python/sendmsg.c:285: warning: initialization makes pointer from integer without a cast
twisted/python/sendmsg.c:306: warning: implicit declaration of function ‘CMSG_LEN’
twisted/python/sendmsg.c:316: warning: implicit declaration of function ‘CMSG_DATA’
twisted/python/sendmsg.c:316: warning: assignment makes pointer from integer without a cast
twisted/python/sendmsg.c:322: warning: implicit declaration of function ‘CMSG_NXTHDR’
twisted/python/sendmsg.c:322: warning: assignment makes pointer from integer without a cast
twisted/python/sendmsg.c:351: error: ‘struct msghdr’ has no member named ‘msg_control’
twisted/python/sendmsg.c:352: error: ‘struct msghdr’ has no member named ‘msg_control’
twisted/python/sendmsg.c:353: error: ‘struct msghdr’ has no member named ‘msg_control’
twisted/python/sendmsg.c: In function ‘sendmsg_recvmsg’:
twisted/python/sendmsg.c:414: error: ‘struct msghdr’ has no member named ‘msg_control’
twisted/python/sendmsg.c:416: error: ‘struct msghdr’ has no member named ‘msg_controllen’
twisted/python/sendmsg.c:429: warning: assignment makes pointer from integer without a cast
twisted/python/sendmsg.c:432: warning: assignment makes pointer from integer without a cast
twisted/python/sendmsg.c:477: error: ‘struct msghdr’ has no member named ‘msg_flags’
error: Setup script exited with error: command 'gcc' failed with exit status 1
Error installing Twisted-12.1.0.tar.bz2.
```


I seem to recall that Twisted-11 did work, but I'm not sure.



---

archive/issue_comments_118349.json:
```json
{
    "body": "The file twisted/topfiles/setup.py has this entry in the variable `extensions`:\n\n```\n    Extension(\"twisted.python._epoll\",\n              [\"twisted/python/_epoll.c\"],\n              condition=lambda builder: (_isCPython and _hasEpoll(builder) and\n                                         sys.version_info[:2] < (2, 6))),\n```\n\nThe function `_hasEpoll` (defined in twisted/python/dist.py) should return False if epoll is not present, for example on Solaris, so I don't understand what's going on. (The other parts of the code seem to have fall-backs if epoll is not present.) Anyway, maybe we should try patching this file to remove this extension, when on Solaris or OpenSolaris. I can't log in to hawk right now, so I can't see if this would help.",
    "created_at": "2012-06-19T17:37:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118349",
    "user": "jhpalmieri"
}
```

The file twisted/topfiles/setup.py has this entry in the variable `extensions`:

```
    Extension("twisted.python._epoll",
              ["twisted/python/_epoll.c"],
              condition=lambda builder: (_isCPython and _hasEpoll(builder) and
                                         sys.version_info[:2] < (2, 6))),
```

The function `_hasEpoll` (defined in twisted/python/dist.py) should return False if epoll is not present, for example on Solaris, so I don't understand what's going on. (The other parts of the code seem to have fall-backs if epoll is not present.) Anyway, maybe we should try patching this file to remove this extension, when on Solaris or OpenSolaris. I can't log in to hawk right now, so I can't see if this would help.



---

archive/issue_comments_118350.json:
```json
{
    "body": "I'm not actually sure the error is related to `epoll`.  The real errors refer to `struct msghdr` which should exist on OpenSolaris.\n\n> I can't log in to hawk right now, so I can't see if this would help.\nMe neither, I emailed David Kirkby about this.",
    "created_at": "2012-06-19T18:26:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118350",
    "user": "jdemeyer"
}
```

I'm not actually sure the error is related to `epoll`.  The real errors refer to `struct msghdr` which should exist on OpenSolaris.

> I can't log in to hawk right now, so I can't see if this would help.
Me neither, I emailed David Kirkby about this.



---

archive/issue_comments_118351.json:
```json
{
    "body": "Replying to [comment:313 nborie]:\n> Hi everybody,\n> \n> I just post this comment to tell you that my machine (core 2 duo with Ubuntu 12.04 32 bits installation) asked to install uuid-dev package when installing sagecell-0.9.0.spkg After the good apt-get install, it works now fine with the 5.0\n> {{{\n> ...\n> checking for sem_init in -lrt... yes\n> checking for uuid_generate in -luuid... no\n> configure: error: cannot link with -luuid, install uuid-dev.\n> Error configuring zeromq.\n> }}}\n> The Sage Cell Server works now fine on my machine. On the same machine, I didn't manage to install the sage-5.2.alpha0 which didn't compiled.\n> \n> Thanks for this nice work. As all this go too far for my computer skills, i can just test your work but no more...\n\nThanks, but you should probably post this on the sage-devel mailing list, or maybe on the issue tracker for the sage cell server [here](http://github.com/sagemath/sagecell/issues/). This ticket is for the Sage *notebook*, not the cell server. And in particular it's for version 0.9.0 of sagenb.",
    "created_at": "2012-06-20T07:00:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118351",
    "user": "kini"
}
```

Replying to [comment:313 nborie]:
> Hi everybody,
> 
> I just post this comment to tell you that my machine (core 2 duo with Ubuntu 12.04 32 bits installation) asked to install uuid-dev package when installing sagecell-0.9.0.spkg After the good apt-get install, it works now fine with the 5.0
> {{{
> ...
> checking for sem_init in -lrt... yes
> checking for uuid_generate in -luuid... no
> configure: error: cannot link with -luuid, install uuid-dev.
> Error configuring zeromq.
> }}}
> The Sage Cell Server works now fine on my machine. On the same machine, I didn't manage to install the sage-5.2.alpha0 which didn't compiled.
> 
> Thanks for this nice work. As all this go too far for my computer skills, i can just test your work but no more...

Thanks, but you should probably post this on the sage-devel mailing list, or maybe on the issue tracker for the sage cell server [here](http://github.com/sagemath/sagecell/issues/). This ticket is for the Sage *notebook*, not the cell server. And in particular it's for version 0.9.0 of sagenb.



---

archive/issue_comments_118352.json:
```json
{
    "body": "Added OpenSSL fix (#13126) as dependency, as the old OpenSSL spkg doesn't build on all supported systems.",
    "created_at": "2012-06-20T07:56:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118352",
    "user": "jdemeyer"
}
```

Added OpenSSL fix (#13126) as dependency, as the old OpenSSL spkg doesn't build on all supported systems.



---

archive/issue_comments_118353.json:
```json
{
    "body": "On `hawk`, adding the compiler flag `-D_XOPEN_SOURCE=500` fixes the problem.  Any objections to adding this unconditionally on all architectures?",
    "created_at": "2012-06-20T08:10:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118353",
    "user": "jdemeyer"
}
```

On `hawk`, adding the compiler flag `-D_XOPEN_SOURCE=500` fixes the problem.  Any objections to adding this unconditionally on all architectures?



---

archive/issue_comments_118354.json:
```json
{
    "body": "Replying to [comment:312 jdemeyer]:\n> Replying to [comment:311 kini]:\n> > Jeroen: the SPKG.txt file here is extremely out of date and there is a lot more wrong with it than the fact that the OpenSSL dependency is not mentioned. I have more or less completely rewritten the SPKG.txt at [github #63](http://github.com/sagemath/sagenb/pull/63), which I hope will go into #13121 (in fact the new SPKG.txt is in the preliminary 0.9.1 SPKG I have put up on that ticket). More importantly, the OpenSSL dependency is already explained in the installation docs (by [attachment:trac_11080-openssl-in-installation-docs.patch]). Is it really necessary to edit this old version of SPKG.txt when OpenSSL is already stated as a dependency of Sage as a whole?\n> \n> Okay, that's good for me.\n\nThough I'd caution - see [this ask.sage.math.org post](http://ask.sagemath.org/question/1432/code-for-hash-md5-was-not-found-after-fresh-sage).  It's not necessarily all about the notebook, but apparently people using Linux often have this problem.  Do we say that this is a dependency for Sage?  If this isn't relevant, my apologies.",
    "created_at": "2012-06-20T19:48:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118354",
    "user": "kcrisman"
}
```

Replying to [comment:312 jdemeyer]:
> Replying to [comment:311 kini]:
> > Jeroen: the SPKG.txt file here is extremely out of date and there is a lot more wrong with it than the fact that the OpenSSL dependency is not mentioned. I have more or less completely rewritten the SPKG.txt at [github #63](http://github.com/sagemath/sagenb/pull/63), which I hope will go into #13121 (in fact the new SPKG.txt is in the preliminary 0.9.1 SPKG I have put up on that ticket). More importantly, the OpenSSL dependency is already explained in the installation docs (by [attachment:trac_11080-openssl-in-installation-docs.patch]). Is it really necessary to edit this old version of SPKG.txt when OpenSSL is already stated as a dependency of Sage as a whole?
> 
> Okay, that's good for me.

Though I'd caution - see [this ask.sage.math.org post](http://ask.sagemath.org/question/1432/code-for-hash-md5-was-not-found-after-fresh-sage).  It's not necessarily all about the notebook, but apparently people using Linux often have this problem.  Do we say that this is a dependency for Sage?  If this isn't relevant, my apologies.



---

archive/issue_comments_118355.json:
```json
{
    "body": "That's a problem with Python 2.6 which is fixed in 2.7 if I'm not mistaken - in Sage terms, that means that 4.x will consistently have that problem on newer distros (especially !Debian/Ubuntu it seems) unless the user has purposely installed an older-than-default version of OpenSSL systemwide.",
    "created_at": "2012-06-20T19:55:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118355",
    "user": "kini"
}
```

That's a problem with Python 2.6 which is fixed in 2.7 if I'm not mistaken - in Sage terms, that means that 4.x will consistently have that problem on newer distros (especially !Debian/Ubuntu it seems) unless the user has purposely installed an older-than-default version of OpenSSL systemwide.



---

archive/issue_comments_118356.json:
```json
{
    "body": "Replying to [comment:321 kini]:\n> That's a problem with Python 2.6 which is fixed in 2.7 if I'm not mistaken - in Sage terms, that means that 4.x will consistently have that problem on newer distros (especially !Debian/Ubuntu it seems) unless the user has purposely installed an older-than-default version of OpenSSL systemwide.\nHmm, but these all refer to 5.0 and 5.0.1. \n\nAnyway, it may have nothing to do with the notebook and something to do with us needing to have better-documented prereqs.  On the other hand, most of those seem to have been using Sage for 10.04 on newer Ubuntu, maybe that's the problem.  Sorry if this was noise, it just seemed possibly related because one of the posts was about the notebook.",
    "created_at": "2012-06-20T20:09:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118356",
    "user": "kcrisman"
}
```

Replying to [comment:321 kini]:
> That's a problem with Python 2.6 which is fixed in 2.7 if I'm not mistaken - in Sage terms, that means that 4.x will consistently have that problem on newer distros (especially !Debian/Ubuntu it seems) unless the user has purposely installed an older-than-default version of OpenSSL systemwide.
Hmm, but these all refer to 5.0 and 5.0.1. 

Anyway, it may have nothing to do with the notebook and something to do with us needing to have better-documented prereqs.  On the other hand, most of those seem to have been using Sage for 10.04 on newer Ubuntu, maybe that's the problem.  Sorry if this was noise, it just seemed possibly related because one of the posts was about the notebook.



---

archive/issue_comments_118357.json:
```json
{
    "body": "Replying to [comment:319 jdemeyer]:\n> On `hawk`, adding the compiler flag `-D_XOPEN_SOURCE=500` fixes the problem.  Any objections to adding this unconditionally on all architectures?\n\nDo you mean something like this?\n\n```diff\n--- spkg-install.orig\t2012-06-15 23:34:55.000000000 -0700\n+++ spkg-install\t2012-06-21 10:36:33.000000000 -0700\n@@ -12,7 +12,7 @@\n [ -z \"$LIBRARY_PATH\" ] || LIBRARY_PATH=\"$LIBRARY_PATH\":\n export CPATH=\"$CPATH\"\"$SAGE_LOCAL\"/include\n export LIBRARY_PATH=\"$LIBRARY_PATH\"\"$SAGE_LOCAL\"/lib\n-\n+export CFLAGS=\"$CFLAGS -D_XOPEN_SOURCE=500\"\n \n easy_install --allow-hosts=None Twisted-12.1.0.tar.bz2\n if [ $? -ne 0 ]; then\n```\n\nThis seems to allow compilation on hawk and on mark, and compilation still works on OS X Lion and sage.math.",
    "created_at": "2012-06-21T17:48:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118357",
    "user": "jhpalmieri"
}
```

Replying to [comment:319 jdemeyer]:
> On `hawk`, adding the compiler flag `-D_XOPEN_SOURCE=500` fixes the problem.  Any objections to adding this unconditionally on all architectures?

Do you mean something like this?

```diff
--- spkg-install.orig	2012-06-15 23:34:55.000000000 -0700
+++ spkg-install	2012-06-21 10:36:33.000000000 -0700
@@ -12,7 +12,7 @@
 [ -z "$LIBRARY_PATH" ] || LIBRARY_PATH="$LIBRARY_PATH":
 export CPATH="$CPATH""$SAGE_LOCAL"/include
 export LIBRARY_PATH="$LIBRARY_PATH""$SAGE_LOCAL"/lib
-
+export CFLAGS="$CFLAGS -D_XOPEN_SOURCE=500"
 
 easy_install --allow-hosts=None Twisted-12.1.0.tar.bz2
 if [ $? -ne 0 ]; then
```

This seems to allow compilation on hawk and on mark, and compilation still works on OS X Lion and sage.math.



---

archive/issue_comments_118358.json:
```json
{
    "body": "Normally such things *should* be added to `$CPPFLAGS`, not `$CFLAGS`.",
    "created_at": "2012-06-21T17:59:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118358",
    "user": "jdemeyer"
}
```

Normally such things *should* be added to `$CPPFLAGS`, not `$CFLAGS`.



---

archive/issue_comments_118359.json:
```json
{
    "body": "I propose using the [spkg here](http://sage.math.washington.edu/home/palmieri/SPKG/sagenb-0.9.0.p0.spkg), which is identical to Keshav's except for this change:\n\n```diff\n--- sagenb-0.9.0/spkg-install\t2012-06-15 23:34:55.000000000 -0700\n+++ sagenb-0.9.0.p0/spkg-install\t2012-06-21 12:35:28.000000000 -0700\n@@ -12,7 +12,8 @@\n [ -z \"$LIBRARY_PATH\" ] || LIBRARY_PATH=\"$LIBRARY_PATH\":\n export CPATH=\"$CPATH\"\"$SAGE_LOCAL\"/include\n export LIBRARY_PATH=\"$LIBRARY_PATH\"\"$SAGE_LOCAL\"/lib\n-\n+# Fix a build error on (Open)Solaris:\n+export CPPFLAGS=\"$CPPFLAGS -D_XOPEN_SOURCE=500\"\n \n easy_install --allow-hosts=None Twisted-12.1.0.tar.bz2\n if [ $? -ne 0 ]; then\n```\n\n(It's a little frustrating that spkg-install is not under revision control, but this is fixed in #13121.) I think this should be easy to review positively, since the only problem in the earlier spkg was its failure to build on (Open)Solaris. Then we can move on to #13121, which we should try to get into Sage 5.2 as well.\n\nI have not changed the link in the ticket description to point to this new spkg, but if this sounds like a good approach, please go ahead and do that.",
    "created_at": "2012-06-21T19:49:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118359",
    "user": "jhpalmieri"
}
```

I propose using the [spkg here](http://sage.math.washington.edu/home/palmieri/SPKG/sagenb-0.9.0.p0.spkg), which is identical to Keshav's except for this change:

```diff
--- sagenb-0.9.0/spkg-install	2012-06-15 23:34:55.000000000 -0700
+++ sagenb-0.9.0.p0/spkg-install	2012-06-21 12:35:28.000000000 -0700
@@ -12,7 +12,8 @@
 [ -z "$LIBRARY_PATH" ] || LIBRARY_PATH="$LIBRARY_PATH":
 export CPATH="$CPATH""$SAGE_LOCAL"/include
 export LIBRARY_PATH="$LIBRARY_PATH""$SAGE_LOCAL"/lib
-
+# Fix a build error on (Open)Solaris:
+export CPPFLAGS="$CPPFLAGS -D_XOPEN_SOURCE=500"
 
 easy_install --allow-hosts=None Twisted-12.1.0.tar.bz2
 if [ $? -ne 0 ]; then
```

(It's a little frustrating that spkg-install is not under revision control, but this is fixed in #13121.) I think this should be easy to review positively, since the only problem in the earlier spkg was its failure to build on (Open)Solaris. Then we can move on to #13121, which we should try to get into Sage 5.2 as well.

I have not changed the link in the ticket description to point to this new spkg, but if this sounds like a good approach, please go ahead and do that.



---

archive/issue_comments_118360.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-06-21T19:49:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118360",
    "user": "jhpalmieri"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_118361.json:
```json
{
    "body": "Sounds good to me, except I'd call it 0.9.0, not 0.9.0.p0. Since no 0.9.0 has gone up on the Sage mirrors yet, there's no need for a patch version yet - and a patch version should technically have changes to SPKG.txt too, but as I said before, I want to avoid changing SPKG.txt since it's already been rewritten for #13121.\n\nSo I've put your SPKG at the URL in the ticket description, renaming it `sagenb-0.9.0.spkg` and renaming the directory inside it to `sagenb-0.9.0`.",
    "created_at": "2012-06-22T06:51:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118361",
    "user": "kini"
}
```

Sounds good to me, except I'd call it 0.9.0, not 0.9.0.p0. Since no 0.9.0 has gone up on the Sage mirrors yet, there's no need for a patch version yet - and a patch version should technically have changes to SPKG.txt too, but as I said before, I want to avoid changing SPKG.txt since it's already been rewritten for #13121.

So I've put your SPKG at the URL in the ticket description, renaming it `sagenb-0.9.0.spkg` and renaming the directory inside it to `sagenb-0.9.0`.



---

archive/issue_comments_118362.json:
```json
{
    "body": "It's fine to incorporate my change and still call it 0.9.0; while my change was still pending, I just wanted to distinguish mine from the one you posted earlier.\n\nJeroen: positive review now?",
    "created_at": "2012-06-22T14:32:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118362",
    "user": "jhpalmieri"
}
```

It's fine to incorporate my change and still call it 0.9.0; while my change was still pending, I just wanted to distinguish mine from the one you posted earlier.

Jeroen: positive review now?



---

archive/issue_comments_118363.json:
```json
{
    "body": "Since jdemeyer said:\n> On hawk, adding the compiler flag -D_XOPEN_SOURCE=500 fixes the problem. \n> Normally such things should be added to $CPPFLAGS, not $CFLAGS.\nso the two changes are from him, and jhpalmieri said: \n> This seems to allow compilation on hawk and on mark, and compilation still works on OS X Lion and sage.math.\nso the review of that is from him, I don't quite understand why that isn't enough for positive review.  I assume that the CPPFLAGS version was also actually tested, correct?\n\nThe current version of the spkg has this in it, so this sounds good enough.\n\nOf course there is this in the SPKG.txt, and presumably other misleading stuff.  Does it matter?\n\n```\n## Changelog\n     \n * For an accurate log of changes, run \"hg log\" in src/sagenb.\n```\n   \n\n> I wonder if we'll reach 300 comments before this ticket is merged...\nI guess so, Jason :)",
    "created_at": "2012-06-27T15:30:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118363",
    "user": "kcrisman"
}
```

Since jdemeyer said:
> On hawk, adding the compiler flag -D_XOPEN_SOURCE=500 fixes the problem. 
> Normally such things should be added to $CPPFLAGS, not $CFLAGS.
so the two changes are from him, and jhpalmieri said: 
> This seems to allow compilation on hawk and on mark, and compilation still works on OS X Lion and sage.math.
so the review of that is from him, I don't quite understand why that isn't enough for positive review.  I assume that the CPPFLAGS version was also actually tested, correct?

The current version of the spkg has this in it, so this sounds good enough.

Of course there is this in the SPKG.txt, and presumably other misleading stuff.  Does it matter?

```
## Changelog
     
 * For an accurate log of changes, run "hg log" in src/sagenb.
```
   

> I wonder if we'll reach 300 comments before this ticket is merged...
I guess so, Jason :)



---

archive/issue_comments_118364.json:
```json
{
    "body": "Note that the OpenSSL spkg at #13126 still needs review.",
    "created_at": "2012-06-27T15:35:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118364",
    "user": "jdemeyer"
}
```

Note that the OpenSSL spkg at #13126 still needs review.



---

archive/issue_comments_118365.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-06-27T15:35:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118365",
    "user": "jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_118366.json:
```json
{
    "body": "kcrisman: the line from SPKG.txt which you quoted remains true for the SPKG on this ticket, which does contain a mercurial repository.",
    "created_at": "2012-06-27T17:44:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118366",
    "user": "kini"
}
```

kcrisman: the line from SPKG.txt which you quoted remains true for the SPKG on this ticket, which does contain a mercurial repository.



---

archive/issue_comments_118367.json:
```json
{
    "body": "> kcrisman: the line from SPKG which you quoted remains true for the SPKG on this ticket, which does contain a mercurial repository.\nI misread it.  The line I quote indeed is correct, but there is no top-level hg repository, unlike every other (well, every other recently updated) spkg.\n\n```\n$ cd Downloads/sagenb-0.9.0/\n$ hg st\nabort: There is no Mercurial repository here (.hg not found)!\n$ ls -a\n.\t\t..\t\tSPKG.txt\tspkg-install\tsrc\n\n```\n\nI see, these things are actually under revision control in src/sagenb as well.  Sorry for the noise.  Great work, all.",
    "created_at": "2012-06-27T17:58:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118367",
    "user": "kcrisman"
}
```

> kcrisman: the line from SPKG which you quoted remains true for the SPKG on this ticket, which does contain a mercurial repository.
I misread it.  The line I quote indeed is correct, but there is no top-level hg repository, unlike every other (well, every other recently updated) spkg.

```
$ cd Downloads/sagenb-0.9.0/
$ hg st
abort: There is no Mercurial repository here (.hg not found)!
$ ls -a
.		..		SPKG.txt	spkg-install	src

```

I see, these things are actually under revision control in src/sagenb as well.  Sorry for the noise.  Great work, all.



---

archive/issue_comments_118368.json:
```json
{
    "body": "Attachment [trac_11080-scripts-hgignore-dulwich.patch](tarball://root/attachments/some-uuid/ticket11080/trac_11080-scripts-hgignore-dulwich.patch) by jdemeyer created at 2012-06-29 11:48:40\n\napply to $SAGE_LOCAL/bin",
    "created_at": "2012-06-29T11:48:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118368",
    "user": "jdemeyer"
}
```

Attachment [trac_11080-scripts-hgignore-dulwich.patch](tarball://root/attachments/some-uuid/ticket11080/trac_11080-scripts-hgignore-dulwich.patch) by jdemeyer created at 2012-06-29 11:48:40

apply to $SAGE_LOCAL/bin



---

archive/issue_comments_118369.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-07-02T15:21:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118369",
    "user": "jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_118370.json:
```json
{
    "body": "...and there was much rejoicing.",
    "created_at": "2012-07-02T18:59:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118370",
    "user": "ddrake"
}
```

...and there was much rejoicing.



---

archive/issue_comments_118371.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2012-07-23T06:50:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118371",
    "user": "jdemeyer"
}
```

Changing status from closed to new.



---

archive/issue_comments_118372.json:
```json
{
    "body": "Unmerging this from sage-5.2 due to the serious security issue at #13270.",
    "created_at": "2012-07-23T06:50:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118372",
    "user": "jdemeyer"
}
```

Unmerging this from sage-5.2 due to the serious security issue at #13270.



---

archive/issue_comments_118373.json:
```json
{
    "body": "Resolution changed from fixed to ",
    "created_at": "2012-07-23T06:50:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118373",
    "user": "jdemeyer"
}
```

Resolution changed from fixed to 



---

archive/issue_comments_118374.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-07-23T06:51:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118374",
    "user": "jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_118375.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-07-23T06:53:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118375",
    "user": "jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_118376.json:
```json
{
    "body": "Can you confirm if the [attachment:trac_11080-user_registration.patch patch above] does the job? Then we don't need to prolong the release of 5.2. You can apply it to devel/sagenb by the following command\n\n```\n....beta1.11080/devel/sagenb\u00bb patch --dry-run -p1 -i /path/to/trac_11080-user_registration.patch\npatching file sagenb/notebook/run_notebook.py\n....beta1.11080/devel/sagenb\u00bb patch -p1 -i /path/to/trac_11080-user_registration.patch\npatching file sagenb/notebook/run_notebook.py\n```\n\nIf the first command returns success, then proceed with the second command.\n\nEDIT: Taken from `git diff 0.9.0 0.10.1` in the sagenb directory. I haven't checked exactly which commit introduced this change.",
    "created_at": "2012-07-23T07:56:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118376",
    "user": "ppurka"
}
```

Can you confirm if the [attachment:trac_11080-user_registration.patch patch above] does the job? Then we don't need to prolong the release of 5.2. You can apply it to devel/sagenb by the following command

```
....beta1.11080/devel/sagenb» patch --dry-run -p1 -i /path/to/trac_11080-user_registration.patch
patching file sagenb/notebook/run_notebook.py
....beta1.11080/devel/sagenb» patch -p1 -i /path/to/trac_11080-user_registration.patch
patching file sagenb/notebook/run_notebook.py
```

If the first command returns success, then proceed with the second command.

EDIT: Taken from `git diff 0.9.0 0.10.1` in the sagenb directory. I haven't checked exactly which commit introduced this change.



---

archive/issue_comments_118377.json:
```json
{
    "body": "Attachment [trac_11080-user_registration.patch](tarball://root/attachments/some-uuid/ticket11080/trac_11080-user_registration.patch) by ppurka created at 2012-07-23 08:22:30\n\n(temporary fix) apply to devel/sagenb",
    "created_at": "2012-07-23T08:22:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118377",
    "user": "ppurka"
}
```

Attachment [trac_11080-user_registration.patch](tarball://root/attachments/some-uuid/ticket11080/trac_11080-user_registration.patch) by ppurka created at 2012-07-23 08:22:30

(temporary fix) apply to devel/sagenb



---

archive/issue_comments_118378.json:
```json
{
    "body": "Hmm.. the above was not complete. Typing `<url>/register` would still go to the registration. The new patch disables user registration. (Again, also taken from the git diff).",
    "created_at": "2012-07-23T08:23:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118378",
    "user": "ppurka"
}
```

Hmm.. the above was not complete. Typing `<url>/register` would still go to the registration. The new patch disables user registration. (Again, also taken from the git diff).



---

archive/issue_comments_118379.json:
```json
{
    "body": "Replying to [comment:337 ppurka]:\n> Can you confirm if the [attachment:trac_11080-user_registration.patch patch above] does the job? Then we don't need to prolong the release of 5.2. You can apply it to devel/sagenb by the following command\n> {{{\n> ....beta1.11080/devel/sagenb\u00bb patch --dry-run -p1 -i /path/to/trac_11080-user_registration.patch\n> patching file sagenb/notebook/run_notebook.py\n> ....beta1.11080/devel/sagenb\u00bb patch -p1 -i /path/to/trac_11080-user_registration.patch\n> patching file sagenb/notebook/run_notebook.py\n> }}}\n> If the first command returns success, then proceed with the second command.\n\n\nyes, it fixes it. I was actually pondering the same place [here](http://trac.sagemath.org/sage_trac/ticket/13270#comment:12):",
    "created_at": "2012-07-23T08:26:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118379",
    "user": "dimpase"
}
```

Replying to [comment:337 ppurka]:
> Can you confirm if the [attachment:trac_11080-user_registration.patch patch above] does the job? Then we don't need to prolong the release of 5.2. You can apply it to devel/sagenb by the following command
> {{{
> ....beta1.11080/devel/sagenb» patch --dry-run -p1 -i /path/to/trac_11080-user_registration.patch
> patching file sagenb/notebook/run_notebook.py
> ....beta1.11080/devel/sagenb» patch -p1 -i /path/to/trac_11080-user_registration.patch
> patching file sagenb/notebook/run_notebook.py
> }}}
> If the first command returns success, then proceed with the second command.


yes, it fixes it. I was actually pondering the same place [here](http://trac.sagemath.org/sage_trac/ticket/13270#comment:12):



---

archive/issue_comments_118380.json:
```json
{
    "body": "Manage Users is an admin feature.  It should *always* work, regardless of the accounts option. Normal users should NOT have the Manage Users page.",
    "created_at": "2012-07-23T10:18:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118380",
    "user": "jason"
}
```

Manage Users is an admin feature.  It should *always* work, regardless of the accounts option. Normal users should NOT have the Manage Users page.



---

archive/issue_comments_118381.json:
```json
{
    "body": "Replying to [comment:341 jason]:\n> Manage Users is an admin feature.  It should *always* work, regardless of the accounts option. Normal users should NOT have the Manage Users page.\n\noh, OK. I'll test this again more carefully, under different users.",
    "created_at": "2012-07-23T10:23:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118381",
    "user": "dimpase"
}
```

Replying to [comment:341 jason]:
> Manage Users is an admin feature.  It should *always* work, regardless of the accounts option. Normal users should NOT have the Manage Users page.

oh, OK. I'll test this again more carefully, under different users.



---

archive/issue_comments_118382.json:
```json
{
    "body": "Replying to [comment:342 dimpase]:\n> Replying to [comment:341 jason]:\n> > Manage Users is an admin feature.  It should *always* work, regardless of the accounts option. Normal users should NOT have the Manage Users page.\n> \n> oh, OK. I'll test this again more carefully, under different users.\n\nYES, the patch works. Let's beg Jeroen to remerge the stuff...",
    "created_at": "2012-07-23T10:32:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118382",
    "user": "dimpase"
}
```

Replying to [comment:342 dimpase]:
> Replying to [comment:341 jason]:
> > Manage Users is an admin feature.  It should *always* work, regardless of the accounts option. Normal users should NOT have the Manage Users page.
> 
> oh, OK. I'll test this again more carefully, under different users.

YES, the patch works. Let's beg Jeroen to remerge the stuff...



---

archive/issue_comments_118383.json:
```json
{
    "body": "Thanks for confirming. I have the patch in a [new branch branch0.9 at github](https://github.com/ppurka/sagenb/tree/branch0.9) that is created from 0.9.0.\n\n`@`kini: I sent you a [pull request](https://github.com/sagemath/sagenb/pull/88). But if you apply it, then apply to a separate branch, created from 0.9.0.",
    "created_at": "2012-07-23T11:22:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118383",
    "user": "ppurka"
}
```

Thanks for confirming. I have the patch in a [new branch branch0.9 at github](https://github.com/ppurka/sagenb/tree/branch0.9) that is created from 0.9.0.

`@`kini: I sent you a [pull request](https://github.com/sagemath/sagenb/pull/88). But if you apply it, then apply to a separate branch, created from 0.9.0.



---

archive/issue_comments_118384.json:
```json
{
    "body": "Please discuss #13270 on that ticket, not here.",
    "created_at": "2012-07-23T11:28:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118384",
    "user": "jdemeyer"
}
```

Please discuss #13270 on that ticket, not here.



---

archive/issue_comments_118385.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-07-25T06:40:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10957#issuecomment-118385",
    "user": "jdemeyer"
}
```

Resolution: fixed
