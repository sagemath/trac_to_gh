# Issue 11328: Problem with accumulating 3D plots over a parameter

Issue created by migration from https://trac.sagemath.org/ticket/11500

Original creator: travis

Original creation time: 2011-06-16 05:38:06

Assignee: jason, mpatel, was

CC:  kcrisman

Keywords: plot3d

When creating several layers that interpolate between two surfaces, only one layer is output when accumulating the layers via a loop.  No problem if the layers are explicitly coded.

In the looped version, it appears that the plot3d commands are only executed at show() time and therefore only use the final value of the loop parameter.  All of the layers are created on top of each other at that final parameter value.

Example worksheet is attached.


---

Attachment


---

Comment by kcrisman created at 2011-06-16 05:48:41

John, try to copy a minimal example with code so that people don't have to upload it to look at this ticket :)  Thanks for getting the spelling right :)


---

Comment by jason created at 2011-06-16 06:25:01

I don't think there is any guarantee that the function is actually executed when the plot3d command is called, is there?  You are exposing this because the lambda function does not create a new scope.  If instead you use a def function instead of a lambda function, things should work fine.

I agree that it is confusing.  I'm trying to decide if it is "wrong".

I've published this worksheet here: http://sagenb.org/home/pub/2823/


---

Comment by jason created at 2011-06-16 07:34:02

Okay, after thinking about it and discussing this with KDC, I think the current behavior is wrong. I agree with kcrisman that the plot3d command should "freeze" the variables by creating a closure (or a fast_callable object) when it stores the function.


---

Comment by kcrisman created at 2012-07-16 17:52:02

Changing assignee from jason, mpatel, was to jason, was.


---

Comment by kcrisman created at 2012-07-16 17:52:02

Changing component from notebook to graphics.
