# Issue 16488: Implement a general monoid_generators for groups

archive/issues_016488.json:
```json
{
    "body": "Assignee: @tscrim\n\nCC:  @nathanncohen @nthiery\n\nAs discussed on #16718, not all groups have a `monoid_generators` method but we can define them by taking the generators as a group and their inverses.\n\nIssue created by migration from https://trac.sagemath.org/ticket/16725\n\n",
    "created_at": "2014-07-28T17:24:47Z",
    "labels": [
        "component: group theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Implement a general monoid_generators for groups",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16488",
    "user": "https://github.com/tscrim"
}
```
Assignee: @tscrim

CC:  @nathanncohen @nthiery

As discussed on #16718, not all groups have a `monoid_generators` method but we can define them by taking the generators as a group and their inverses.

Issue created by migration from https://trac.sagemath.org/ticket/16725





---

archive/issue_comments_216576.json:
```json
{
    "body": "Aaaaaaand would it make sense to use `monoid_generators` when there is no `group_generators` too ? `:-PPPPPP`",
    "created_at": "2014-07-28T18:43:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16488#issuecomment-216576",
    "user": "https://github.com/nathanncohen"
}
```

Aaaaaaand would it make sense to use `monoid_generators` when there is no `group_generators` too ? `:-PPPPPP`



---

archive/issue_comments_216577.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-08-01T21:37:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16488#issuecomment-216577",
    "user": "https://github.com/tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_216578.json:
```json
{
    "body": "I set that as a fallback since most (all?) groups have a `gens` method or a custom `group_generators`.\n\n---\nNew commits:",
    "created_at": "2014-08-01T21:37:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16488#issuecomment-216578",
    "user": "https://github.com/tscrim"
}
```

I set that as a fallback since most (all?) groups have a `gens` method or a custom `group_generators`.

---
New commits:



---

archive/issue_comments_216579.json:
```json
{
    "body": "Hello Travis !\n\nHmmmm... `group_generators` calls `monoid_generators` and conversely. Isn't that an infinite loop, for some instance that I cannot create ? `:-P`\n\nAlso, if a group has no `group_generators` method nor `monoid_generators` method then `MyGroup.group_generators()` will result in an `AttributeError` saying that `monoid_generators` does not exist, which feels a bit weird `:-/`\n\nNathann",
    "created_at": "2014-08-01T22:02:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16488#issuecomment-216579",
    "user": "https://github.com/nathanncohen"
}
```

Hello Travis !

Hmmmm... `group_generators` calls `monoid_generators` and conversely. Isn't that an infinite loop, for some instance that I cannot create ? `:-P`

Also, if a group has no `group_generators` method nor `monoid_generators` method then `MyGroup.group_generators()` will result in an `AttributeError` saying that `monoid_generators` does not exist, which feels a bit weird `:-/`

Nathann



---

archive/issue_comments_216580.json:
```json
{
    "body": "Replying to [comment:4 ncohen]:\n> Hmmmm... `group_generators` calls `monoid_generators` and conversely. Isn't that an infinite loop, for some instance that I cannot create ? `:-P`\n\n\nUnfortunately we don't currently have a way to break out of such not-implemented generic infinite loops (there's another example with descents in Weyl groups #15456).\n\n> Also, if a group has no `group_generators` method nor `monoid_generators` method then `MyGroup.group_generators()` will result in an `AttributeError` saying that `monoid_generators` does not exist, which feels a bit weird `:-/`\n\n\nWith this, that situation will never occur since we've defined a generic `group_generators` and `monoid_generators` in the `Groups` category, so every group gets it.",
    "created_at": "2014-08-01T22:39:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16488#issuecomment-216580",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:4 ncohen]:
> Hmmmm... `group_generators` calls `monoid_generators` and conversely. Isn't that an infinite loop, for some instance that I cannot create ? `:-P`


Unfortunately we don't currently have a way to break out of such not-implemented generic infinite loops (there's another example with descents in Weyl groups #15456).

> Also, if a group has no `group_generators` method nor `monoid_generators` method then `MyGroup.group_generators()` will result in an `AttributeError` saying that `monoid_generators` does not exist, which feels a bit weird `:-/`


With this, that situation will never occur since we've defined a generic `group_generators` and `monoid_generators` in the `Groups` category, so every group gets it.



---

archive/issue_comments_216581.json:
```json
{
    "body": "Helloooooooooooo !!!\n\n> Unfortunately we don't currently have a way to break out of such not-implemented generic infinite loops (there's another example with descents in Weyl groups #15456).\n\n\nBut don't you enter this infinite loop as soon as a group has no `.gens()` ?\n\n```\nsage: G=groups.presentation.Cyclic(10)\nsage: G=G.cartesian_product(G)\nsage: G.gens()\nAttributeError: 'CartesianProduct_with_category' object has no attribute 'gens'\nsage: G.group_generators()\n<loop>\n```\n\n> > Also, if a group has no `group_generators` method nor `monoid_generators` method then `MyGroup.group_generators()` will result in an `AttributeError` saying that `monoid_generators` does not exist, which feels a bit weird `:-/`\n\n> \n> With this, that situation will never occur since we've defined a generic `group_generators` and `monoid_generators` in the `Groups` category, so every group gets it.\n\n\nAhhahahah. Right, sorry.\n\nNathann",
    "created_at": "2014-08-02T08:07:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16488#issuecomment-216581",
    "user": "https://github.com/nathanncohen"
}
```

Helloooooooooooo !!!

> Unfortunately we don't currently have a way to break out of such not-implemented generic infinite loops (there's another example with descents in Weyl groups #15456).


But don't you enter this infinite loop as soon as a group has no `.gens()` ?

```
sage: G=groups.presentation.Cyclic(10)
sage: G=G.cartesian_product(G)
sage: G.gens()
AttributeError: 'CartesianProduct_with_category' object has no attribute 'gens'
sage: G.group_generators()
<loop>
```

> > Also, if a group has no `group_generators` method nor `monoid_generators` method then `MyGroup.group_generators()` will result in an `AttributeError` saying that `monoid_generators` does not exist, which feels a bit weird `:-/`

> 
> With this, that situation will never occur since we've defined a generic `group_generators` and `monoid_generators` in the `Groups` category, so every group gets it.


Ahhahahah. Right, sorry.

Nathann



---

archive/issue_comments_216582.json:
```json
{
    "body": "Replying to [comment:6 ncohen]:\n> But don't you enter this infinite loop as soon as a group has no `.gens()` ?\n> \n> \n> ```\n> sage: G=groups.presentation.Cyclic(10)\n> sage: G=G.cartesian_product(G)\n> sage: G.gens()\n> AttributeError: 'CartesianProduct_with_category' object has no attribute 'gens'\n> sage: G.group_generators()\n> <loop>\n> ```\n\n\nRight (unless the user implements a custom `group_generators()`, which is the current recommendation). (Side note, this exact error shouldn't happen with #16718.) The other option would be to not have `group_generators` call `monoid_generators`. I think the infinite loop is the lesser of two evils (at least until we have the framework for semi-abstract methods like this).",
    "created_at": "2014-08-02T16:02:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16488#issuecomment-216582",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:6 ncohen]:
> But don't you enter this infinite loop as soon as a group has no `.gens()` ?
> 
> 
> ```
> sage: G=groups.presentation.Cyclic(10)
> sage: G=G.cartesian_product(G)
> sage: G.gens()
> AttributeError: 'CartesianProduct_with_category' object has no attribute 'gens'
> sage: G.group_generators()
> <loop>
> ```


Right (unless the user implements a custom `group_generators()`, which is the current recommendation). (Side note, this exact error shouldn't happen with #16718.) The other option would be to not have `group_generators` call `monoid_generators`. I think the infinite loop is the lesser of two evils (at least until we have the framework for semi-abstract methods like this).



---

archive/issue_comments_216583.json:
```json
{
    "body": "Yoooooo !\n\n> Right (unless the user implements a custom `group_generators()`, which is the current recommendation). (Side note, this exact error shouldn't happen with #16718.)\n\n\nRight right. I just don't know much about groups in Sage, and it was the only way I knew to produce the bug `:-)`\n\n> The other option would be to not have `group_generators` call `monoid_generators`. I think the infinite loop is the lesser of two evils (at least until we have the framework for semi-abstract methods like this).\n\n\nHmmmm... And what would you think of not having `group_generators` call `monoid_generators`, and have `group_generators` raise an exception if `gens()` is not defined ? Something like that ?\n\n`AttributeError: No generators are available for this group. Please implement a .group_generators() method`\n\nIt would tell the user what he needs to do in order to make everything work ?...\n\nBy the way I do not really understand what this `.gens()` exactly is. The code seems to assume that `.gens()` returns group generators, but in this case does the monoid code assume that `.gens()` returns monoid generators too ?\n\n`gens()` should be the one calling `group_generators`, not the other way around `:-/`\n\nNathann",
    "created_at": "2014-08-02T16:12:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16488#issuecomment-216583",
    "user": "https://github.com/nathanncohen"
}
```

Yoooooo !

> Right (unless the user implements a custom `group_generators()`, which is the current recommendation). (Side note, this exact error shouldn't happen with #16718.)


Right right. I just don't know much about groups in Sage, and it was the only way I knew to produce the bug `:-)`

> The other option would be to not have `group_generators` call `monoid_generators`. I think the infinite loop is the lesser of two evils (at least until we have the framework for semi-abstract methods like this).


Hmmmm... And what would you think of not having `group_generators` call `monoid_generators`, and have `group_generators` raise an exception if `gens()` is not defined ? Something like that ?

`AttributeError: No generators are available for this group. Please implement a .group_generators() method`

It would tell the user what he needs to do in order to make everything work ?...

By the way I do not really understand what this `.gens()` exactly is. The code seems to assume that `.gens()` returns group generators, but in this case does the monoid code assume that `.gens()` returns monoid generators too ?

`gens()` should be the one calling `group_generators`, not the other way around `:-/`

Nathann



---

archive/issue_comments_216584.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-02T17:26:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16488#issuecomment-216584",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_216585.json:
```json
{
    "body": "Replying to [comment:8 ncohen]:\n> Hmmmm... And what would you think of not having `group_generators` call `monoid_generators`, and have `group_generators` raise an exception if `gens()` is not defined ? Something like that ?\n> \n> `AttributeError: No generators are available for this group. Please implement a .group_generators() method`\n\n\nThat's okay with me (although I've made it return a `NotImplementedError`).\n\n> By the way I do not really understand what this `.gens()` exactly is. The code seems to assume that `.gens()` returns group generators, but in this case does the monoid code assume that `.gens()` returns monoid generators too ?\n\n\n`gens` is suppose to return a set of generators for this type of object. However this causes some problems if the generating set becomes smaller in a subcategory: #15381\n\n> `gens()` should be the one calling `group_generators`, not the other way around `:-/`\n\n\nI agree, but this comes from old code in Sage and I don't have the time and desire to go through and make the necessary changes.",
    "created_at": "2014-08-02T17:28:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16488#issuecomment-216585",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:8 ncohen]:
> Hmmmm... And what would you think of not having `group_generators` call `monoid_generators`, and have `group_generators` raise an exception if `gens()` is not defined ? Something like that ?
> 
> `AttributeError: No generators are available for this group. Please implement a .group_generators() method`


That's okay with me (although I've made it return a `NotImplementedError`).

> By the way I do not really understand what this `.gens()` exactly is. The code seems to assume that `.gens()` returns group generators, but in this case does the monoid code assume that `.gens()` returns monoid generators too ?


`gens` is suppose to return a set of generators for this type of object. However this causes some problems if the generating set becomes smaller in a subcategory: #15381

> `gens()` should be the one calling `group_generators`, not the other way around `:-/`


I agree, but this comes from old code in Sage and I don't have the time and desire to go through and make the necessary changes.



---

archive/issue_comments_216586.json:
```json
{
    "body": "Helloooooooooo !!\n\nThanks for your update !\n\n> That's okay with me (although I've made it return a `NotImplementedError`).\n\n\nOKay ! Is there any technical reason why you prefered to not mention the name of the function ? Do you believe that this message is sufficient for group users to know what must be done ?\n\n> `gens` is suppose to return a set of generators for this type of object. However this causes some problems if the generating set becomes smaller in a subcategory: #15381\n\n\nI see. That's a rather unfortunate design choice.\n\n> I agree, but this comes from old code in Sage and I don't have the time and desire to go through and make the necessary changes.\n\n\nOkay. It also helps me understand what you are fighting with when you write code like that.\n\nHey. Now that I think of it, it is another reason to raise an exception saying explicitly that `group_generators` should be implemented. Not let them get away re-defining `gens()`.\n\nNathann",
    "created_at": "2014-08-02T17:37:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16488#issuecomment-216586",
    "user": "https://github.com/nathanncohen"
}
```

Helloooooooooo !!

Thanks for your update !

> That's okay with me (although I've made it return a `NotImplementedError`).


OKay ! Is there any technical reason why you prefered to not mention the name of the function ? Do you believe that this message is sufficient for group users to know what must be done ?

> `gens` is suppose to return a set of generators for this type of object. However this causes some problems if the generating set becomes smaller in a subcategory: #15381


I see. That's a rather unfortunate design choice.

> I agree, but this comes from old code in Sage and I don't have the time and desire to go through and make the necessary changes.


Okay. It also helps me understand what you are fighting with when you write code like that.

Hey. Now that I think of it, it is another reason to raise an exception saying explicitly that `group_generators` should be implemented. Not let them get away re-defining `gens()`.

Nathann



---

archive/issue_comments_216587.json:
```json
{
    "body": "Replying to [comment:11 ncohen]:\n> Helloooooooooo !!\n> \n> Thanks for your update !\n> \n> > That's okay with me (although I've made it return a `NotImplementedError`).\n\n> \n> OKay ! Is there any technical reason why you prefered to not mention the name of the function ? Do you believe that this message is sufficient for group users to know what must be done ?\n\n\nSince it is raised by `group_generators`, I think it is sufficient.\n\n> Okay. It also helps me understand what you are fighting with when you write code like that.\n> \n> Hey. Now that I think of it, it is another reason to raise an exception saying explicitly that `group_generators` should be implemented. Not let them get away re-defining `gens()`.\n\n\nI don't hold a strong opinion on the error message; I just prefer them to be shorter and simple. If you want to expand on the error message, feel free to do so and you can set a positive review on my behalf.",
    "created_at": "2014-08-02T17:46:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16488#issuecomment-216587",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:11 ncohen]:
> Helloooooooooo !!
> 
> Thanks for your update !
> 
> > That's okay with me (although I've made it return a `NotImplementedError`).

> 
> OKay ! Is there any technical reason why you prefered to not mention the name of the function ? Do you believe that this message is sufficient for group users to know what must be done ?


Since it is raised by `group_generators`, I think it is sufficient.

> Okay. It also helps me understand what you are fighting with when you write code like that.
> 
> Hey. Now that I think of it, it is another reason to raise an exception saying explicitly that `group_generators` should be implemented. Not let them get away re-defining `gens()`.


I don't hold a strong opinion on the error message; I just prefer them to be shorter and simple. If you want to expand on the error message, feel free to do so and you can set a positive review on my behalf.



---

archive/issue_comments_216588.json:
```json
{
    "body": "Yo !\n\n> I don't hold a strong opinion on the error message; I just prefer them to be shorter and simple. If you want to expand on the error message, feel free to do so and you can set a positive review on my behalf.\n\n\nCommit coming in a couple of minutes.\n\nNathann",
    "created_at": "2014-08-02T17:48:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16488#issuecomment-216588",
    "user": "https://github.com/nathanncohen"
}
```

Yo !

> I don't hold a strong opinion on the error message; I just prefer them to be shorter and simple. If you want to expand on the error message, feel free to do so and you can set a positive review on my behalf.


Commit coming in a couple of minutes.

Nathann



---

archive/issue_comments_216589.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-08-02T17:56:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16488#issuecomment-216589",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_216590.json:
```json
{
    "body": "> Commit coming in a couple of minutes.\n\n\nHMmmm... I just looked at the code again, and you are right: it is better as it is.\n\nPositive review ! Thanks for your patch !\n\nNathann",
    "created_at": "2014-08-02T17:56:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16488#issuecomment-216590",
    "user": "https://github.com/nathanncohen"
}
```

> Commit coming in a couple of minutes.


HMmmm... I just looked at the code again, and you are right: it is better as it is.

Positive review ! Thanks for your patch !

Nathann



---

archive/issue_comments_216591.json:
```json
{
    "body": "That's 2 tickets you've reviewed with categories, pretty soon you might actually be writing some. `:P`\n\nThanks for doing the review.",
    "created_at": "2014-08-02T19:22:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16488#issuecomment-216591",
    "user": "https://github.com/tscrim"
}
```

That's 2 tickets you've reviewed with categories, pretty soon you might actually be writing some. `:P`

Thanks for doing the review.



---

archive/issue_comments_216592.json:
```json
{
    "body": "> That's 2 tickets you've reviewed with categories, pretty soon you might actually be writing some. `:P`\n\n\nAlready did in #16269 `:-P`\n\nMy problem with categories is that I totally, deeply, wholeheartedly hate them. To me, categories are on-the-fly class inheritance, written in a non-compiled and non-typed language. It's like a disaster before the very first line is written. It can *ONLY* be slow, broken, and disappointing.\n\nIf the language were compiled and typed, well.. It may work. But that is not the case, and in the end most of the computations are spent on the category infrastructure rather than on what the user wants.\n\nI had the problem recently because of very slow addition in the product of additive groups: it was solved by using the group product Sage object to obtain the addition law in the group, which is then translated to a matrix, then all the work is done with the matrix itself. Thank you categories !\n\n> Thanks for doing the review.\n\n\nMy pleasure. Add me in Cc when you have tickets like that, that are somehow local and understandable. But as I do not know much about categories in general, I do not feel secure touching anything that might have a global impact `^^;`\n\nNathann",
    "created_at": "2014-08-02T20:51:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16488#issuecomment-216592",
    "user": "https://github.com/nathanncohen"
}
```

> That's 2 tickets you've reviewed with categories, pretty soon you might actually be writing some. `:P`


Already did in #16269 `:-P`

My problem with categories is that I totally, deeply, wholeheartedly hate them. To me, categories are on-the-fly class inheritance, written in a non-compiled and non-typed language. It's like a disaster before the very first line is written. It can *ONLY* be slow, broken, and disappointing.

If the language were compiled and typed, well.. It may work. But that is not the case, and in the end most of the computations are spent on the category infrastructure rather than on what the user wants.

I had the problem recently because of very slow addition in the product of additive groups: it was solved by using the group product Sage object to obtain the addition law in the group, which is then translated to a matrix, then all the work is done with the matrix itself. Thank you categories !

> Thanks for doing the review.


My pleasure. Add me in Cc when you have tickets like that, that are somehow local and understandable. But as I do not know much about categories in general, I do not feel secure touching anything that might have a global impact `^^;`

Nathann



---

archive/issue_events_049000.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/16488",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16488#event-49000"
}
```



---

archive/issue_events_049001.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-08-11T15:01:26Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16488",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16488#event-49001"
}
```



---

archive/issue_comments_216593.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-08-11T15:01:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16488#issuecomment-216593",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
