# Issue 17484: variable shadowing: major design flaw in Singular

Issue created by migration from Trac.

Original creator: jakobkroeker

Original creation time: 2015-02-03 15:07:15

CC:  jdemeyer

Keywords: Singular


Singular has an issue of overlapping namespaces
where variable conflicts will lead to bugs without warnings:

```
//Singular code:
ring rng = 0, p ,dp;
poly p = p^2 - p - 1;  // **boom**
p;  // (   p = -1,  wrong !  )
```



In combination with hardcoded variable names or unreflected usage of
'execute' in Singular's library code this may lead to wrong results as shown in 

http://www.singular.uni-kl.de:8002/trac/ticket/677.
See also: 
the discussion at http://www.singular.uni-kl.de/forum/viewtopic.php?f=10&t=2482

Main upstream ticket:
http://www.singular.uni-kl.de:8002/trac/ticket/684


Trying to translate the example from http://www.singular.uni-kl.de:8002/trac/ticket/677 to sage
I hit another bug (#17720)






---

Comment by jakobkroeker created at 2015-02-03 15:08:20

`@`William
I'm taking you out from Cc, just wanted that you notice this issue


---

Comment by jakobkroeker created at 2015-02-03 15:22:06

translated example from  www.singular.uni-kl.de:8002/trac/ticket/677 :

```
sage: K0=QQ
sage: R0.<p>=K0[]
sage: K.<p>=QQ.extension(p^2-p-1)
sage: R1.<w,x,y,z>=K[]
sage: I = R1.ideal((-12*p-6)*w^5+(16*p+8)*w^3*x^2+(-4*p-2)*w*x^4+(16*p+8)*w^3*y^2+(-8*p-4)*w*x^2*y^2+(-4*p-2)*w*y^4+(16*p+8)*w^3*z^2+(-8*p-4)*w*x^2*z^2+(-8*p-4)*w*y^2*z^2+(-4*p-2)*w*z^4,(8*p+4)*w^4*x+(-8*p-4)*w^2*x^3+(-8*p-4)*w^2*x*y^2+(-48*p-32)*x^3*y^2+(8*p+8)*x*y^4+(-8*p-4)*w^2*x*z^2+(16*p+16)*x^3*z^2+(64*p+32)*x*y^2*z^2+(-24*p-16)*x*z^4,(8*p+4)*w^4*y+(-8*p-4)*w^2*x^2*y+(-24*p-16)*x^4*y+(-8*p-4)*w^2*y^3+(16*p+16)*x^2*y^3+(-8*p-4)*w^2*y*z^2+(64*p+32)*x^2*y*z^2+(-48*p-32)*y^3*z^2+(8*p+8)*y*z^4,(8*p+4)*w^4*z+(-8*p-4)*w^2*x^2*z+(8*p+8)*x^4*z+(-8*p-4)*w^2*y^2*z+(64*p+32)*x^2*y^2*z+(-24*p-16)*y^4*z+(-8*p-4)*w^2*z^3+(-48*p-32)*x^2*z^3+(16*p+16)*y^2*z^3)
sage: L = I.primary_decomposition("gtz") 
sage: IJ = I
sage: for J in L:
....:      IJ = IJ.intersection(J)
....:     
sage: IJ == I
False

```



---

Comment by @DaveWitteMorris created at 2021-01-29 03:11:37

Changing status from new to needs_review.


---

Comment by @DaveWitteMorris created at 2021-01-29 03:11:37

Changing priority from major to minor.


---

Comment by @DaveWitteMorris created at 2021-01-29 03:11:37

This example now returns `True`, as it apparently should. But it takes a long time (about a minute) and this was an upstream issue, so I don't think a doctest is worth the trouble. Let's close this old ticket as "works for me".


---

Comment by slelievre created at 2021-08-19 22:20:23

Changing status from needs_review to positive_review.


---

Comment by slelievre created at 2021-08-19 22:20:23

Ok.


---

Comment by mkoeppe created at 2021-08-26 02:08:43

Resolution: invalid
