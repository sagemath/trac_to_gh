# Issue 22353: singular/surf error

archive/issues_022353.json:
```json
{
    "body": "the following example which was working with Sage 5.9 (cf Figure 9.1 page 193 of http://sagebook.gforge.inria.fr/) is no longer working with Sage 7.5.1:\n\n```\n  sage: R.<x,y,z> = QQ[]\n  sage: J = R.ideal(x^2 * y * z - 18,\n  ....:             x * y^3 * z - 24,\n  ....:             x * y * z^4 - 6)\n  sage: opts = {'axes':True, 'gridlines':True, 'frame':False,\n  ....:    'aspect_ratio':1, 'axes_pad':0, 'fontsize':8,\n  ....:    'xmin':-1.3, 'xmax':1.3, 'ymin':-1.3, 'ymax':1.3}\n  sage: (ideal(J.0).plot() + ideal(J.1).plot()).show(**opts)\n```\n\nWith Sage 7.5.1 I get:\n\n```\nTypeError: Singular error:\nClose window to exit from `singularsurf`.\n   ? calling `surf` failed\n (The shell returned the error code 32512.\n   ? leaving surf.lib::plot\n```\n\nThis is critical for the translation in german and in english of the book.\n\nIssue created by migration from https://trac.sagemath.org/ticket/22590\n\n",
    "created_at": "2017-03-13T11:46:14Z",
    "labels": [
        "graphics",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.6",
    "title": "singular/surf error",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22353",
    "user": "@zimmermann6"
}
```
the following example which was working with Sage 5.9 (cf Figure 9.1 page 193 of http://sagebook.gforge.inria.fr/) is no longer working with Sage 7.5.1:

```
  sage: R.<x,y,z> = QQ[]
  sage: J = R.ideal(x^2 * y * z - 18,
  ....:             x * y^3 * z - 24,
  ....:             x * y * z^4 - 6)
  sage: opts = {'axes':True, 'gridlines':True, 'frame':False,
  ....:    'aspect_ratio':1, 'axes_pad':0, 'fontsize':8,
  ....:    'xmin':-1.3, 'xmax':1.3, 'ymin':-1.3, 'ymax':1.3}
  sage: (ideal(J.0).plot() + ideal(J.1).plot()).show(**opts)
```

With Sage 7.5.1 I get:

```
TypeError: Singular error:
Close window to exit from `singularsurf`.
   ? calling `surf` failed
 (The shell returned the error code 32512.
   ? leaving surf.lib::plot
```

This is critical for the translation in german and in english of the book.

Issue created by migration from https://trac.sagemath.org/ticket/22590





---

archive/issue_comments_310795.json:
```json
{
    "body": "Obvious question: do you have `surf` installed on your system?",
    "created_at": "2017-03-13T14:34:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22353#issuecomment-310795",
    "user": "@jdemeyer"
}
```

Obvious question: do you have `surf` installed on your system?



---

archive/issue_comments_310796.json:
```json
{
    "body": "> Obvious question: do you have surf installed on your system?\n\nit seems no. I thought Sage was self-content...\n\nPaul",
    "created_at": "2017-03-13T14:57:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22353#issuecomment-310796",
    "user": "@zimmermann6"
}
```

> Obvious question: do you have surf installed on your system?

it seems no. I thought Sage was self-content...

Paul



---

archive/issue_comments_310797.json:
```json
{
    "body": "now with surf installed, the last command opens a new window where it is written:\n\n```\nroot_finder=d_chain_bisection;epsilon=0.0000000001;iterations=20000;\nwidth=500; height=500; set_size; do_background=yes; background_red=255; background_green=255; background_blue=255;\nrot_x=0.14; rot_y=-0.3;\nsurface=\nx^2*y*z-18\n;\ndraw_surface;\ncolor_file_format = jpg;\nfilename = \"/tmp/surf.jpg\";\nsave_color_image;\n```\n\nCan you reproduce this? Is it really the expected behaviour?\n\nPaul",
    "created_at": "2017-03-13T15:15:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22353#issuecomment-310797",
    "user": "@zimmermann6"
}
```

now with surf installed, the last command opens a new window where it is written:

```
root_finder=d_chain_bisection;epsilon=0.0000000001;iterations=20000;
width=500; height=500; set_size; do_background=yes; background_red=255; background_green=255; background_blue=255;
rot_x=0.14; rot_y=-0.3;
surface=
x^2*y*z-18
;
draw_surface;
color_file_format = jpg;
filename = "/tmp/surf.jpg";
save_color_image;
```

Can you reproduce this? Is it really the expected behaviour?

Paul



---

archive/issue_comments_310798.json:
```json
{
    "body": "Replying to [comment:2 zimmerma]:\n> > Obvious question: do you have surf installed on your system?\n> \n> it seems no. I thought Sage was self-content...\n\nWell, I never realized that Sage required `surf` for plotting ideals.\n\nThe doc of `plot?` is funny by the way:\n\n```\n        If you somehow manage to install surf, perhaps you can use\n        this function to implicitly plot the real zero locus of this\n        ideal (if principal).\n```\n",
    "created_at": "2017-03-13T15:36:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22353#issuecomment-310798",
    "user": "@jdemeyer"
}
```

Replying to [comment:2 zimmerma]:
> > Obvious question: do you have surf installed on your system?
> 
> it seems no. I thought Sage was self-content...

Well, I never realized that Sage required `surf` for plotting ideals.

The doc of `plot?` is funny by the way:

```
        If you somehow manage to install surf, perhaps you can use
        this function to implicitly plot the real zero locus of this
        ideal (if principal).
```




---

archive/issue_comments_310799.json:
```json
{
    "body": "If you type (with J the ideal in the description):\n\n```\nJ0=ideal(J.0)\nJ0.plot?\n```\n\nthen you get a more specific help:\n\n```\nSignature:      J0.plot(*args, **kwds)\nDocstring:     \n   Plot the real zero locus of this principal ideal.\n\n   INPUT:\n\n   * \"self\" - a principal ideal in 2 variables\n\n   * \"algorithm\" - set this to 'surf' if you want 'surf' to\n\n        plot the ideal (default: None)\n\n   * \"*args\" - optional tuples \"(variable, minimum, maximum)\"\n\n        for plotting dimensions\n\n   * \"**kwds\" - optional keyword arguments passed on to\n\n        \"implicit_plot\"\n```\n\nbut none of `algorithm=None` and `algorithm='surf'` do work.",
    "created_at": "2017-03-13T15:51:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22353#issuecomment-310799",
    "user": "@zimmermann6"
}
```

If you type (with J the ideal in the description):

```
J0=ideal(J.0)
J0.plot?
```

then you get a more specific help:

```
Signature:      J0.plot(*args, **kwds)
Docstring:     
   Plot the real zero locus of this principal ideal.

   INPUT:

   * "self" - a principal ideal in 2 variables

   * "algorithm" - set this to 'surf' if you want 'surf' to

        plot the ideal (default: None)

   * "*args" - optional tuples "(variable, minimum, maximum)"

        for plotting dimensions

   * "**kwds" - optional keyword arguments passed on to

        "implicit_plot"
```

but none of `algorithm=None` and `algorithm='surf'` do work.



---

archive/issue_comments_310800.json:
```json
{
    "body": "sorry I retract part of what I said in the description: the example in the book differs.\nHowever the failure is still there. If plot is not able to deal with 3D ideals, I believe the error message should be improved.",
    "created_at": "2017-03-13T15:59:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22353#issuecomment-310800",
    "user": "@zimmermann6"
}
```

sorry I retract part of what I said in the description: the example in the book differs.
However the failure is still there. If plot is not able to deal with 3D ideals, I believe the error message should be improved.
