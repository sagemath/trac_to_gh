# Issue 5965: Check /dev/pts and /dev/shm requirement on Linux

archive/issues_005965.json:
```json
{
    "assignees": [
        "https://github.com/tornaria"
    ],
    "body": "<div id=\"comment:0\"></div>\n\nSage requires both pseudoterminals (for pexpect) and shared memory (for pyprocessing semaphores). On modern linux, those are implemented via special filesystem mounts:\n- `/dev/pts` for pseudoterminals (of type `devpts`)\n- `/dev/shm` for shared memory (of type `tmpfs`)\nA normal system has those mounts active. However, running sage in a chroot fails in weird ways if we neglect to mount those inside the chroot:\n- the first one makes pexpect interfaces to fail, e.g.:\n\n```\nsage: gap(2)\nA workspace appears to have been corrupted... automatically rebuilding (this is harmless).\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n\n/home/tornaria/.sage/temp/arf/10828/_home_tornaria__sage_init_sage_0.py in <module>()\n\n/opt/sage-3.4.1-x86_64-Linux/local/lib/python2.5/site-packages/sage/interfaces/expect.pyc in __call__(self, x, name)\n   1002             return cls(self, x, name=name)\n   1003         try:\n-> 1004             return self._coerce_from_special_method(x)\n   1005         except TypeError:\n   1006             raise\n\n/opt/sage-3.4.1-x86_64-Linux/local/lib/python2.5/site-packages/sage/interfaces/expect.pyc in _coerce_from_special_method(self, x)\n   1026             s = '_gp_'\n   1027         try:\n-> 1028             return (x.__getattribute__(s))(self)\n   1029         except AttributeError:\n   1030             return self(x._interface_init_())\n\n/opt/sage-3.4.1-x86_64-Linux/local/lib/python2.5/site-packages/sage/structure/sage_object.so in sage.structure.sage_object.SageObject._gap_ (sage/structure/sage_object.c:3370)()\n\n/opt/sage-3.4.1-x86_64-Linux/local/lib/python2.5/site-packages/sage/structure/sage_object.so in sage.structure.sage_object.SageObject._interface_ (sage/structure/sage_object.c:3018)()\n\n/opt/sage-3.4.1-x86_64-Linux/local/lib/python2.5/site-packages/sage/interfaces/expect.pyc in __call__(self, x, name)\n   1000             return x\n   1001         if isinstance(x, basestring):\n-> 1002             return cls(self, x, name=name)\n   1003         try:\n   1004             return self._coerce_from_special_method(x)\n\n/opt/sage-3.4.1-x86_64-Linux/local/lib/python2.5/site-packages/sage/interfaces/expect.pyc in __init__(self, parent, value, is_name, name)\n   1375             except (TypeError, KeyboardInterrupt, RuntimeError, ValueError), x:\n   1376                 self._session_number = -1\n-> 1377                 raise TypeError, x\n   1378         self._session_number = parent._session_number\n   1379 \n\nTypeError: Unable to start gap because the command 'gap -r -b -p -T -o 9999G /opt/sage-3.4.1-x86_64-Linux/data//extcode/gap/sage.g' failed.\n```\n- the second one makes pyprocessing to fail, which can be reproduced by:\n\n```\nsage: import processing, processing.synchronize                      \nsage: processing._processing.SemLock(processing.synchronize.BOUNDED_SEMAPHORE, 1)                           \n---------------------------------------------------------------------------\nOSError                                   Traceback (most recent call last)\n\n/home/tornaria/.sage/temp/arf/10892/_home_tornaria__sage_init_sage_0.py in <module>()\n\nOSError: [Errno 38] Function not implemented\n```\nBoth failures are detected by doctests. The first one all over the place, and the second one by doctests in `sage/parallel/multiprocessing.py` and `sage/parallel/decorate.py`.\n\nCC:  @williamstein @jdemeyer @jhpalmieri @mkoeppe @dimpase @orlitzky\n\nComponent: **build: configure**\n\nKeywords: **GAP PExpect cannot start server pty pseudo ttys shared memory mount chroot**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/5965_\n\n",
    "closed_at": "2021-04-01T06:40:48Z",
    "created_at": "2009-05-02T23:41:40Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20build%3A%20configure",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Check /dev/pts and /dev/shm requirement on Linux",
    "type": "issue",
    "updated_at": "2022-01-22T08:36:58Z",
    "url": "https://github.com/sagemath/sage/issues/5965",
    "user": "https://github.com/tornaria"
}
```
<div id="comment:0"></div>

Sage requires both pseudoterminals (for pexpect) and shared memory (for pyprocessing semaphores). On modern linux, those are implemented via special filesystem mounts:
- `/dev/pts` for pseudoterminals (of type `devpts`)
- `/dev/shm` for shared memory (of type `tmpfs`)
A normal system has those mounts active. However, running sage in a chroot fails in weird ways if we neglect to mount those inside the chroot:
- the first one makes pexpect interfaces to fail, e.g.:

```
sage: gap(2)
A workspace appears to have been corrupted... automatically rebuilding (this is harmless).
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)

/home/tornaria/.sage/temp/arf/10828/_home_tornaria__sage_init_sage_0.py in <module>()

/opt/sage-3.4.1-x86_64-Linux/local/lib/python2.5/site-packages/sage/interfaces/expect.pyc in __call__(self, x, name)
   1002             return cls(self, x, name=name)
   1003         try:
-> 1004             return self._coerce_from_special_method(x)
   1005         except TypeError:
   1006             raise

/opt/sage-3.4.1-x86_64-Linux/local/lib/python2.5/site-packages/sage/interfaces/expect.pyc in _coerce_from_special_method(self, x)
   1026             s = '_gp_'
   1027         try:
-> 1028             return (x.__getattribute__(s))(self)
   1029         except AttributeError:
   1030             return self(x._interface_init_())

/opt/sage-3.4.1-x86_64-Linux/local/lib/python2.5/site-packages/sage/structure/sage_object.so in sage.structure.sage_object.SageObject._gap_ (sage/structure/sage_object.c:3370)()

/opt/sage-3.4.1-x86_64-Linux/local/lib/python2.5/site-packages/sage/structure/sage_object.so in sage.structure.sage_object.SageObject._interface_ (sage/structure/sage_object.c:3018)()

/opt/sage-3.4.1-x86_64-Linux/local/lib/python2.5/site-packages/sage/interfaces/expect.pyc in __call__(self, x, name)
   1000             return x
   1001         if isinstance(x, basestring):
-> 1002             return cls(self, x, name=name)
   1003         try:
   1004             return self._coerce_from_special_method(x)

/opt/sage-3.4.1-x86_64-Linux/local/lib/python2.5/site-packages/sage/interfaces/expect.pyc in __init__(self, parent, value, is_name, name)
   1375             except (TypeError, KeyboardInterrupt, RuntimeError, ValueError), x:
   1376                 self._session_number = -1
-> 1377                 raise TypeError, x
   1378         self._session_number = parent._session_number
   1379 

TypeError: Unable to start gap because the command 'gap -r -b -p -T -o 9999G /opt/sage-3.4.1-x86_64-Linux/data//extcode/gap/sage.g' failed.
```
- the second one makes pyprocessing to fail, which can be reproduced by:

```
sage: import processing, processing.synchronize                      
sage: processing._processing.SemLock(processing.synchronize.BOUNDED_SEMAPHORE, 1)                           
---------------------------------------------------------------------------
OSError                                   Traceback (most recent call last)

/home/tornaria/.sage/temp/arf/10892/_home_tornaria__sage_init_sage_0.py in <module>()

OSError: [Errno 38] Function not implemented
```
Both failures are detected by doctests. The first one all over the place, and the second one by doctests in `sage/parallel/multiprocessing.py` and `sage/parallel/decorate.py`.

CC:  @williamstein @jdemeyer @jhpalmieri @mkoeppe @dimpase @orlitzky

Component: **build: configure**

Keywords: **GAP PExpect cannot start server pty pseudo ttys shared memory mount chroot**

_Issue created by migration from https://trac.sagemath.org/ticket/5965_





---

archive/issue_events_070765.json:
```json
{
    "actor": "https://github.com/tornaria",
    "created_at": "2009-05-02T23:41:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20distribution",
    "label_color": "0000b0",
    "label_name": "c: distribution",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70765"
}
```



---

archive/issue_events_070766.json:
```json
{
    "actor": "https://github.com/tornaria",
    "created_at": "2009-05-02T23:41:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70766"
}
```



---

archive/issue_events_070767.json:
```json
{
    "actor": "https://github.com/tornaria",
    "created_at": "2009-05-02T23:41:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70767"
}
```



---

archive/issue_events_070768.json:
```json
{
    "actor": "https://github.com/tornaria",
    "created_at": "2009-05-02T23:41:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70768"
}
```



---

archive/issue_events_070769.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-05-02T23:41:40Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "subject": "https://github.com/tornaria",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70769"
}
```



---

archive/issue_comments_038661.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nActually, it may make more sense to just check that pseudoterminals and shared memory work (say, from python), and in case of failure on linux suggest the user to check `/dev/pts` and/or `/dev/shm`.",
    "created_at": "2009-05-05T03:07:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5965#issuecomment-38661",
    "user": "https://github.com/tornaria"
}
```

<div id="comment:1" align="right">comment:1</div>

Actually, it may make more sense to just check that pseudoterminals and shared memory work (say, from python), and in case of failure on linux suggest the user to check `/dev/pts` and/or `/dev/shm`.



---

archive/issue_comments_038662.json:
```json
{
    "body": "Attachment: **[sage-check.py.gz](https://github.com/sagemath/sage/files/ticket5965/sage-check.py.gz)**\n\nThis simple python script checks availability of pseudoterminals and shared memory.",
    "created_at": "2009-05-05T03:25:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5965#issuecomment-38662",
    "user": "https://github.com/tornaria"
}
```

Attachment: **[sage-check.py.gz](https://github.com/sagemath/sage/files/ticket5965/sage-check.py.gz)**

This simple python script checks availability of pseudoterminals and shared memory.



---

archive/issue_comments_038663.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThe python script I attached does the job, except the error messages need to be written (say, inform the user that /dev/pts is possibly missing, etc). Also, this needs to be placed in a proper place in the sage startup scripts or somewhere...",
    "created_at": "2009-05-05T03:27:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5965#issuecomment-38663",
    "user": "https://github.com/tornaria"
}
```

<div id="comment:2" align="right">comment:2</div>

The python script I attached does the job, except the error messages need to be written (say, inform the user that /dev/pts is possibly missing, etc). Also, this needs to be placed in a proper place in the sage startup scripts or somewhere...



---

archive/issue_events_070770.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-05-05T03:27:15Z",
    "event": "unassigned",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "subject": "https://github.com/tornaria",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70770"
}
```



---

archive/issue_events_070771.json:
```json
{
    "actor": "https://github.com/tornaria",
    "created_at": "2009-05-05T03:27:15Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "subject": "https://github.com/tornaria",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70771"
}
```



---

archive/issue_events_070772.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-05-05T03:31:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "milestone_number": null,
    "milestone_title": "sage-4.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70772"
}
```



---

archive/issue_events_070773.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-05-05T03:31:42Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "title_is": "Check /dev/pts and /dev/shm requirement on linux",
    "title_was": "Check {{{/dev/pts}}} and {{{/dev/shm}}} requirement on linux",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70773"
}
```



---

archive/issue_events_070774.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-05-05T03:31:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70774"
}
```



---

archive/issue_events_070775.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-05-05T03:31:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70775"
}
```



---

archive/issue_comments_038664.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI will look at this later. I think this is a much more elegant solution than what was initially proposed.\n\nCheers,\n\nMichael",
    "created_at": "2009-05-05T03:31:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5965#issuecomment-38664",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:4" align="right">comment:4</div>

I will look at this later. I think this is a much more elegant solution than what was initially proposed.

Cheers,

Michael



---

archive/issue_events_070776.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-05-15T14:35:26Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "milestone_number": null,
    "milestone_title": "sage-4.0.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70776"
}
```



---

archive/issue_events_070777.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-05-15T14:35:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "milestone_number": null,
    "milestone_title": "sage-4.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70777"
}
```



---

archive/issue_comments_038665.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nA hard to figure out when reported, yet simple fix. 4.0 it is.\n\nCheers,\n\nMichael",
    "created_at": "2009-05-15T14:35:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5965#issuecomment-38665",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:5" align="right">comment:5</div>

A hard to figure out when reported, yet simple fix. 4.0 it is.

Cheers,

Michael



---

archive/issue_events_070778.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-05-28T07:10:43Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "milestone_number": null,
    "milestone_title": "sage-4.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70778"
}
```



---

archive/issue_events_070779.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-05-28T07:10:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "milestone_number": null,
    "milestone_title": "sage-4.0.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70779"
}
```



---

archive/issue_comments_038666.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nWhere does this go?",
    "created_at": "2009-05-28T07:10:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5965#issuecomment-38666",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:6" align="right">comment:6</div>

Where does this go?



---

archive/issue_comments_038667.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@williamstein](#comment%3A6):\n> Where does this go?\n\nWherever the check for, e.g. sage-flags.txt is done, i.e. at startup. The idea is to make sure that those two features are available, because they are actually required by Sage, and if they are missing the error messages tend to be very confusing (see the description for a taste).\n\nNote that this actually happens at least when one does a quick chroot and doesn't mount either /dev/pts and /dev/shm.\n\nJust to record the relative importance of the two: pseudottys are absolutely required for sage (pexpect), while shared memory seems to be only used through pyprocessing, i.e. maybe only dsage needs it.",
    "created_at": "2009-05-28T12:22:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5965#issuecomment-38667",
    "user": "https://github.com/tornaria"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@williamstein](#comment%3A6):
> Where does this go?

Wherever the check for, e.g. sage-flags.txt is done, i.e. at startup. The idea is to make sure that those two features are available, because they are actually required by Sage, and if they are missing the error messages tend to be very confusing (see the description for a taste).

Note that this actually happens at least when one does a quick chroot and doesn't mount either /dev/pts and /dev/shm.

Just to record the relative importance of the two: pseudottys are absolutely required for sage (pexpect), while shared memory seems to be only used through pyprocessing, i.e. maybe only dsage needs it.



---

archive/issue_comments_038668.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI think this looks good. I've added a patch above that calls this script from the sage startup, as Gonzalo suggested. So I guess I'm positively reviewing Gonzalo's code, but maybe someone should rubber-stamp the code I added that calls it.\n\nHowever, it just occurred to me that we're switching to python 2.6 in the next release -- and that means we need to switch to `multiprocessing` instead of `processing`. I just read the documentation for `multiprocessing` online, and I believe that checking that semaphores are available will be even easier -- according to the first warning on this page:\n  http://docs.python.org/library/multiprocessing.html#introduction\nall we need to do is `import multiprocessing.synchronize`, and it'll fail if not. \n\nSo as soon as an alpha is out with the new python spkg in place, I'll go ahead and update this patch -- it should probably wait to be merged until then, but people are welcome to try it out now and offer other comments.",
    "created_at": "2009-06-21T07:41:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5965#issuecomment-38668",
    "user": "https://github.com/craigcitro"
}
```

<div id="comment:8" align="right">comment:8</div>

I think this looks good. I've added a patch above that calls this script from the sage startup, as Gonzalo suggested. So I guess I'm positively reviewing Gonzalo's code, but maybe someone should rubber-stamp the code I added that calls it.

However, it just occurred to me that we're switching to python 2.6 in the next release -- and that means we need to switch to `multiprocessing` instead of `processing`. I just read the documentation for `multiprocessing` online, and I believe that checking that semaphores are available will be even easier -- according to the first warning on this page:
  http://docs.python.org/library/multiprocessing.html#introduction
all we need to do is `import multiprocessing.synchronize`, and it'll fail if not. 

So as soon as an alpha is out with the new python spkg in place, I'll go ahead and update this patch -- it should probably wait to be merged until then, but people are welcome to try it out now and offer other comments.



---

archive/issue_events_070780.json:
```json
{
    "actor": "https://github.com/craigcitro",
    "created_at": "2009-06-21T07:41:37Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "milestone_number": null,
    "milestone_title": "sage-4.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70780"
}
```



---

archive/issue_comments_038669.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI don't know how the milestone got unset. Oops.",
    "created_at": "2009-06-21T07:42:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5965#issuecomment-38669",
    "user": "https://github.com/craigcitro"
}
```

<div id="comment:9" align="right">comment:9</div>

I don't know how the milestone got unset. Oops.



---

archive/issue_events_070781.json:
```json
{
    "actor": "https://github.com/craigcitro",
    "created_at": "2009-06-21T07:42:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "milestone_number": null,
    "milestone_title": "sage-4.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70781"
}
```



---

archive/issue_comments_038670.json:
```json
{
    "body": "Author: **Gonzalo Tornaria**",
    "created_at": "2009-06-21T07:42:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5965#issuecomment-38670",
    "user": "https://github.com/craigcitro"
}
```

Author: **Gonzalo Tornaria**



---

archive/issue_events_070782.json:
```json
{
    "actor": "https://github.com/boothby",
    "created_at": "2009-07-15T22:10:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70782"
}
```



---

archive/issue_events_070783.json:
```json
{
    "actor": "https://github.com/boothby",
    "created_at": "2009-07-15T22:10:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70783"
}
```



---

archive/issue_comments_038671.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nThis looks incomplete to me, I'm moving it to \"needs work\".",
    "created_at": "2009-07-15T22:10:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5965#issuecomment-38671",
    "user": "https://github.com/boothby"
}
```

<div id="comment:10" align="right">comment:10</div>

This looks incomplete to me, I'm moving it to "needs work".



---

archive/issue_events_070784.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-07-29T17:30:58Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "title_is": "Check /dev/pts and /dev/shm requirement on Linux",
    "title_was": "Check /dev/pts and /dev/shm requirement on linux",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70784"
}
```



---

archive/issue_comments_038672.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nTwo years later, I've attached an updated Python script. :)\n\nNote that meanwhile also `sage -b` (i.e., `devel/sage/setup.py`) uses semaphores (because it builds the Sage library in parallel by default), which means now Sage also **won't build** without them.\n\nAt least for binary distributions, we should add some check (perhaps calling the attached script) to some start-up script, but please **not** `sage-env` (since that's used by a lot of scripts that simply don't need such a check).",
    "created_at": "2011-07-29T17:30:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5965#issuecomment-38672",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:11" align="right">comment:11</div>

Two years later, I've attached an updated Python script. :)

Note that meanwhile also `sage -b` (i.e., `devel/sage/setup.py`) uses semaphores (because it builds the Sage library in parallel by default), which means now Sage also **won't build** without them.

At least for binary distributions, we should add some check (perhaps calling the attached script) to some start-up script, but please **not** `sage-env` (since that's used by a lot of scripts that simply don't need such a check).



---

archive/issue_events_070785.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-07-29T17:30:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70785"
}
```



---

archive/issue_events_070786.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-07-29T17:30:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70786"
}
```



---

archive/issue_comments_038673.json:
```json
{
    "body": "Updated script to work with newer Python, also advises to mount the respective devices on Linux.",
    "created_at": "2011-07-29T17:53:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5965#issuecomment-38673",
    "user": "https://github.com/nexttime"
}
```

Updated script to work with newer Python, also advises to mount the respective devices on Linux.



---

archive/issue_comments_038674.json:
```json
{
    "body": "Changed keywords from none to **GAP PExpect cannot start server pty pseudo ttys shared memory mount chroot**",
    "created_at": "2011-08-29T01:31:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5965#issuecomment-38674",
    "user": "https://github.com/nexttime"
}
```

Changed keywords from none to **GAP PExpect cannot start server pty pseudo ttys shared memory mount chroot**



---

archive/issue_comments_038675.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nAttachment: **[sage-check-ptys-semaphore.py.gz](https://github.com/sagemath/sage/files/ticket5965/sage-check-ptys-semaphore.py.gz)**\n\nRaising the priority to \"critical\" since this issue came up multiple times recently, especially in server setups (which usually use a chroot environment or virtualization), and also minimal Linux installations.\n\nPeople are rather unlikely to immediately relate the failure in starting GAP to pseudo ttys or device mounts.\n\nAlternatively, we could catch / check for the pty error in the code that creates PExpect interfaces, e.g. in `sage/interfaces/gap.py` (around line 903), in order to give a more appropriate error message.",
    "created_at": "2011-08-29T01:31:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5965#issuecomment-38675",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:12" align="right">comment:12</div>

Attachment: **[sage-check-ptys-semaphore.py.gz](https://github.com/sagemath/sage/files/ticket5965/sage-check-ptys-semaphore.py.gz)**

Raising the priority to "critical" since this issue came up multiple times recently, especially in server setups (which usually use a chroot environment or virtualization), and also minimal Linux installations.

People are rather unlikely to immediately relate the failure in starting GAP to pseudo ttys or device mounts.

Alternatively, we could catch / check for the pty error in the code that creates PExpect interfaces, e.g. in `sage/interfaces/gap.py` (around line 903), in order to give a more appropriate error message.



---

archive/issue_events_070787.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-08-29T01:31:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70787"
}
```



---

archive/issue_events_070788.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-08-29T01:31:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
    "label_color": "ff7700",
    "label_name": "p: critical / 2",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70788"
}
```



---

archive/issue_comments_038676.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nLikewise, we could add a check for `/dev/shm` to `devel/sage/setup.py`, since building the Sage library doesn't involve starting up Sage, and I wouldn't put such checks into places where they would unnecessarily get run continually or frequently (even when there's no need for e.g. `/dev/pts` at that point, like during the build), as I said earlier.",
    "created_at": "2011-08-29T01:45:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5965#issuecomment-38676",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:13" align="right">comment:13</div>

Likewise, we could add a check for `/dev/shm` to `devel/sage/setup.py`, since building the Sage library doesn't involve starting up Sage, and I wouldn't put such checks into places where they would unnecessarily get run continually or frequently (even when there's no need for e.g. `/dev/pts` at that point, like during the build), as I said earlier.



---

archive/issue_comments_038677.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nping",
    "created_at": "2012-03-22T22:57:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5965#issuecomment-38677",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:14" align="right">comment:14</div>

ping



---

archive/issue_comments_038678.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nI don't really understand the issues here to do anything with this ticket in its current state. If there were a patch to actually apply somewhere, that would at least be a start.",
    "created_at": "2012-03-23T00:18:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5965#issuecomment-38678",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:16" align="right">comment:16</div>

I don't really understand the issues here to do anything with this ticket in its current state. If there were a patch to actually apply somewhere, that would at least be a start.



---

archive/issue_events_070789.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:34:36Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70789"
}
```



---

archive/issue_events_070790.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:34:36Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70790"
}
```



---

archive/issue_events_070791.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70791"
}
```



---

archive/issue_events_070792.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70792"
}
```



---

archive/issue_events_070793.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:19:32Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70793"
}
```



---

archive/issue_events_070794.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:19:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70794"
}
```



---

archive/issue_events_070795.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70795"
}
```



---

archive/issue_events_070796.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70796"
}
```



---

archive/issue_comments_038679.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nCould you please run this script somewhere in the beginning of the build process? I also tried to build sage in a chroot where /dev/shm was not user-writable for some reason and got a not very helpful \"Permission denied\". This script would have given me a much better error message.",
    "created_at": "2015-03-05T21:58:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5965#issuecomment-38679",
    "user": "https://github.com/tobihan"
}
```

<div id="comment:21" align="right">comment:21</div>

Could you please run this script somewhere in the beginning of the build process? I also tried to build sage in a chroot where /dev/shm was not user-writable for some reason and got a not very helpful "Permission denied". This script would have given me a much better error message.



---

archive/issue_events_070797.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-04-11T09:53:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20distribution",
    "label_color": "0000b0",
    "label_name": "c: distribution",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70797"
}
```



---

archive/issue_events_070798.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-04-11T09:53:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build%3A%20configure",
    "label_color": "0000b0",
    "label_name": "c: build: configure",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70798"
}
```



---

archive/issue_comments_038680.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nIs this still necessary? If so, it's pretty easy to hack into the `./configure` script:\n\n```patch\ndiff --git a/configure.ac b/configure.ac\nindex 78cc95febc..35763c77ac 100644\n--- a/configure.ac\n+++ b/configure.ac\n@@ -150,7 +150,21 @@ The Sage community would also appreciate any patches you s$\n\n # The following are all supported platforms.\n *-*-freebsd*);;\n-*-*-linux*);;\n+*-*-linux*)\n+# We need /dev/pts and /dev/shm mounted on Linux, see Trac 5965.\n+if ! test -d /dev/pts; then\n+AC_MSG_ERROR([[\n+A filesystem of type devpts must be mounted at /dev/pts on Linux.\n+See the pts(4) man page.\n+]])\n+fi\n+if ! test -d /dev/shm; then\n+AC_MSG_ERROR([[\n+A filesystem of type tmpfs must be mounted at /dev/shm on Linux.\n+See the shm_overview(7) man page.\n+]])\n+fi\n+;;\n *-*-darwin*);;\n *-*-solaris*);;\n *-*-cygwin*);;\n```",
    "created_at": "2020-08-31T02:17:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5965#issuecomment-38680",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:23" align="right">comment:23</div>

Is this still necessary? If so, it's pretty easy to hack into the `./configure` script:

```patch
diff --git a/configure.ac b/configure.ac
index 78cc95febc..35763c77ac 100644
--- a/configure.ac
+++ b/configure.ac
@@ -150,7 +150,21 @@ The Sage community would also appreciate any patches you s$

 # The following are all supported platforms.
 *-*-freebsd*);;
-*-*-linux*);;
+*-*-linux*)
+# We need /dev/pts and /dev/shm mounted on Linux, see Trac 5965.
+if ! test -d /dev/pts; then
+AC_MSG_ERROR([[
+A filesystem of type devpts must be mounted at /dev/pts on Linux.
+See the pts(4) man page.
+]])
+fi
+if ! test -d /dev/shm; then
+AC_MSG_ERROR([[
+A filesystem of type tmpfs must be mounted at /dev/shm on Linux.
+See the shm_overview(7) man page.
+]])
+fi
+;;
 *-*-darwin*);;
 *-*-solaris*);;
 *-*-cygwin*);;
```



---

archive/issue_comments_038681.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nwe can add this (and perhaps even a test that /dev/shm is user-writeable (cf [comment:21](#comment%3A21)), no harm, even though perhaps nowadays there are no weird environments left where these things are broken.",
    "created_at": "2020-08-31T10:46:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5965#issuecomment-38681",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:24" align="right">comment:24</div>

we can add this (and perhaps even a test that /dev/shm is user-writeable (cf [comment:21](#comment%3A21)), no harm, even though perhaps nowadays there are no weird environments left where these things are broken.



---

archive/issue_comments_038682.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@dimpase](#comment%3A24):\n> nowadays there are no weird environments left where these things are broken.\n\nThey were accidentally left out of a chroot in the original report. Catching them at `./configure` just saves a lot of time, since otherwise you go through the whole build and get an incomprehensible test failure a few hours later.\n\nMy main question is, do these things still depend on `/dev/pts` and `/dev/shm` at all? A lot can change in 11 years. And if it's pexpect/pyprocessing that are trying to use them, then it might make more sense to send this check upstream.",
    "created_at": "2020-08-31T11:41:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5965#issuecomment-38682",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@dimpase](#comment%3A24):
> nowadays there are no weird environments left where these things are broken.

They were accidentally left out of a chroot in the original report. Catching them at `./configure` just saves a lot of time, since otherwise you go through the whole build and get an incomprehensible test failure a few hours later.

My main question is, do these things still depend on `/dev/pts` and `/dev/shm` at all? A lot can change in 11 years. And if it's pexpect/pyprocessing that are trying to use them, then it might make more sense to send this check upstream.



---

archive/issue_comments_038683.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nby the way https://github.com/pexpect/pexpect/releases/tag/4.8.0 - our's is 4.6, more than 2 years old.",
    "created_at": "2020-08-31T12:24:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5965#issuecomment-38683",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:26" align="right">comment:26</div>

by the way https://github.com/pexpect/pexpect/releases/tag/4.8.0 - our's is 4.6, more than 2 years old.



---

archive/issue_events_070799.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-03T02:54:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
    "label_color": "ff7700",
    "label_name": "p: critical / 2",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70799"
}
```



---

archive/issue_events_070800.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-03T02:54:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70800"
}
```



---

archive/issue_comments_038684.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@orlitzky](#comment%3A25):\n> My main question is, do these things still depend on `/dev/pts` and `/dev/shm` at all? A lot can change in 11 years. \n\nI think it's a tale from ancient linux times. If it is ever reported again, we know what to do.",
    "created_at": "2020-09-03T02:54:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5965#issuecomment-38684",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@orlitzky](#comment%3A25):
> My main question is, do these things still depend on `/dev/pts` and `/dev/shm` at all? A lot can change in 11 years. 

I think it's a tale from ancient linux times. If it is ever reported again, we know what to do.



---

archive/issue_events_070801.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-02-23T02:26:39Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70801"
}
```



---

archive/issue_comments_038685.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nLet's just close this. The ten-year-old crash log for a collection of packages that no longer exist isn't benefiting anyone. If a user ever reports this problem on a modern system, we can easily fix it now.",
    "created_at": "2021-02-23T02:26:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5965#issuecomment-38685",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:28" align="right">comment:28</div>

Let's just close this. The ten-year-old crash log for a collection of packages that no longer exist isn't benefiting anyone. If a user ever reports this problem on a modern system, we can easily fix it now.



---

archive/issue_events_070802.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-02-23T02:26:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70802"
}
```



---

archive/issue_events_070803.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-02-23T02:26:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70803"
}
```



---

archive/issue_events_070804.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-02-26T19:47:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70804"
}
```



---

archive/issue_events_070805.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-02-26T19:47:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70805"
}
```



---

archive/issue_comments_038686.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nYes, I agree.",
    "created_at": "2021-02-26T19:47:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5965#issuecomment-38686",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:29" align="right">comment:29</div>

Yes, I agree.



---

archive/issue_events_070806.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-04-01T06:40:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70806"
}
```



---

archive/issue_events_070807.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-04-01T06:40:48Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5965#event-70807"
}
```



---

archive/issue_comments_038687.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@dimpase](#comment%3A26):\n> by the way https://github.com/pexpect/pexpect/releases/tag/4.8.0 - ours is 4.6, more than 2 years old.\n\nTicket #29240, merged in Sage 9.2.beta11 (released 2020-09-02),\nupgraded to pexpect 4.8.0.",
    "created_at": "2021-04-01T07:54:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5965#issuecomment-38687",
    "user": "https://github.com/slel"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@dimpase](#comment%3A26):
> by the way https://github.com/pexpect/pexpect/releases/tag/4.8.0 - ours is 4.6, more than 2 years old.

Ticket #29240, merged in Sage 9.2.beta11 (released 2020-09-02),
upgraded to pexpect 4.8.0.



---

archive/issue_comments_038688.json:
```json
{
    "body": "Changed author from **Gonzalo Tornaria** to none",
    "created_at": "2022-01-22T08:36:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5965#issuecomment-38688",
    "user": "https://github.com/slel"
}
```

Changed author from **Gonzalo Tornaria** to none
