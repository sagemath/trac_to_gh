# Issue 5816: doctesting -- make it possible run doctests in order from file, in random order, and in random seeded order

archive/issues_005816.json:
```json
{
    "assignees": [],
    "body": "\n\nAssignee: **mabshoff**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/5816_\n\n",
    "closed_at": "2009-04-19T02:08:31Z",
    "created_at": "2009-04-18T21:41:48Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/doctest%20coverage",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-3.4.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "doctesting -- make it possible run doctests in order from file, in random order, and in random seeded order",
    "type": "issue",
    "updated_at": "2009-04-19T02:08:31Z",
    "url": "https://github.com/sagemath/sage/issues/5816",
    "user": "https://github.com/williamstein"
}
```


Assignee: **mabshoff**

_Issue created by migration from https://trac.sagemath.org/ticket/5816_





---

archive/issue_events_060615.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-04-18T21:41:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5816",
    "milestone_number": null,
    "milestone_title": "sage-3.4.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5816#event-60615"
}
```



---

archive/issue_events_060616.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-04-18T21:41:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5816",
    "label": "https://github.com/sagemath/sage/labels/doctest%20coverage",
    "label_color": "696969",
    "label_name": "doctest coverage",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5816#event-60616"
}
```



---

archive/issue_events_060617.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-04-18T21:41:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5816",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5816#event-60617"
}
```



---

archive/issue_events_060618.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-04-18T21:41:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5816",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5816#event-60618"
}
```



---

archive/issue_events_060619.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-04-18T21:41:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5816",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5816#event-60619"
}
```



---

archive/issue_comments_038505.json:
```json
{
    "body": "Attachment: **[trac_scripts-5816.patch.gz](https://github.com/sagemath/sage/files/ticket5816/trac_scripts-5816.patch.gz)**",
    "created_at": "2009-04-18T23:12:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5816#issuecomment-38505",
    "user": "https://github.com/williamstein"
}
```

Attachment: **[trac_scripts-5816.patch.gz](https://github.com/sagemath/sage/files/ticket5816/trac_scripts-5816.patch.gz)**



---

archive/issue_comments_038506.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nThe following tests fail after applying this patch and running the test suite on rc3:\n\n```\nsage -t -long devel/sage/sage/quadratic_forms/quadratic_form.py\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/quadratic_forms/quadratic_form.py\", line 1304:\n    sage: Q1.level_ideal()\nExpected:\n    Principal ideal (1) of Rational Field\nGot:\n    doctest:1252: UserWarning: Warning -- The level of a quadratic form over a field is always 1.  Do you really want to do this?!?\n    Principal ideal (1) of Rational Field\n**********************************************************************\n1 items had failures:\n   1 of   8 in __main__.example_0351962372\n***Test Failed*** 1 failures.\n\n\n\n\nMOST EVERYTHING IN:\nsage -t -long devel/sage/sage/misc/latex.py\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/misc/latex.py\", line 62:\n    sage: latex([1,2,3])\nExpected:\n \n\n\n\n\n\n\n\n\nsage -t -long devel/sage/sage/libs/pari/gen.pyx\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/libs/pari/gen.pyx\", line 8575:\n    sage: pari._primelimit()\nExpected:\n    500519\nGot:\n    500000\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/libs/pari/gen.pyx\", line 7013:\n    sage: pari('[a,b,c; d,e,f; g,h,i]').matadjoint()\nExpected:\n    [(i*e - h*f), (-i*b + h*c), (f*b - e*c); (-i*d + g*f), i*a - g*c, -f*a + d*c; (h*d - g*e), -h*a + g*b, e*a - d*b]\nGot:\n    [e*i - h*f, -b*i + h*c, (f*b - e*c); -d*i + g*f, a*i - g*c, (-f*a + d*c); (h*d - g*e), (-h*a + g*b), (e*a - d*b)]\n**********************************************************************\n2 items had failures:\n   1 of   5 in __main__.example_0786952607\n   1 of   4 in __main__.example_2085375216\n***Test Failed*** 2 failures.\nFor whitespace errors, see the file /scratch/wstein/build/sage-3.4.1.rc3/tmp/.doctest_gen.py\n         [3.4 s]\n\n\n\n\n\n\n\n\nSEVERAL THINGS:\nsage -t -long devel/sage/sage/libs/symmetrica/schur.pxi\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/libs/symmetrica/schur.pxi\", line 369:\n    sage: symmetrica.compute_schur_with_alphabet_det(2,2)\nException raised:\n    Traceback (most recent call last):\n      File \"/scratch/wstein/build/sage-3.4.1.rc3/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/scratch/wstein/build/sage-3.4.1.rc3/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/scratch/wstein/build/sage-3.4.1.rc3/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_0960543897[2]>\", line 1, in <module>\n        symmetrica.compute_schur_with_alphabet_det(Integer(2),Integer(2))###line 369:\n    sage: symmetrica.compute_schur_with_alphabet_det(2,2)\n      File \"schur.pxi\", line 382, in sage.libs.symmetrica.symmetrica.compute_schur_with_alphabet_det_symmetrica (sage/libs/symmetrica/symme\ntrica.c:17919)        if isinstance(part, (int, Integer)):\n    TypeError: isinstance() arg 2 must be a class, type, or tuple of classes and types\n\n\n\n\n\n\n\n\n\nsage -t -long devel/sage/sage/rings/real_rqdf.pyx\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/rings/real_rqdf.pyx\", line 531:\n    sage: w= RQDF('1.34435343435344446376457677898097745635222')\nExpected nothing\nGot:\n    doctest:1172: DeprecationWarning: RQDF is deprecated; use RealField(212) instead.\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/rings/real_rqdf.pyx\", line 4:\n    : RQDF(1)\nExpected:\n    doctest:...: DeprecationWarning: RQDF is deprecated; use RealField(212) instead.\n    1.000000000000000000000000000000000000000000000000000000000000000\nGot:\n    1.000000000000000000000000000000000000000000000000000000000000000\n**********************************************************************\n2 items had failures:\n   1 of   6 in __main__.example_0123338167\n   1 of  12 in __main__.example_0497399660\n***Test Failed*** 2 failures.\n\n\n\n\n\n\n\n\n\n\n\n\nsage -t -long devel/sage/sage/libs/fplll/fplll.pyx\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/libs/fplll/fplll.pyx\", line 761:\n    sage: A = gen_ntrulike2(5,10,12); A\nExpected:\n    [ 12   0   0   0   0   0   0   0   0   0]\n    [  0  12   0   0   0   0   0   0   0   0]\n    [  0   0  12   0   0   0   0   0   0   0]\n    [  0   0   0  12   0   0   0   0   0   0]\n    [  0   0   0   0  12   0   0   0   0   0]\n\nand a few more...\n\n\n\n\n\n\n\n\n\nsage -t -long devel/sage/sage/rings/number_field/class_group.py\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/rings/number_field/class_group.py\", line 107:\n    sage: C.gen(0)\nExpected:\n    Fractional ideal class (130, 1/2*a + 137/2)\nGot:\n    Fractional ideal class (41, a - 10)\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/rings/number_field/class_group.py\", line 109:\n    sage: C.gen(1)\nExpected:\n    Fractional ideal class (7, a)\nGot:\n    Fractional ideal class (17, a)\n**********************************************************************\n\n\n\n\n\n\n\n\n\n\n\n\n\nsage -t -long devel/sage/sage/structure/proof/proof.py\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/structure/proof/proof.py\", line 109:\n    sage: proof.number_field()\nExpected:\n    True\nGot:\n    False\n**********************************************************************\n1 items had failures:\n   1 of   7 in __main__.example_3571288829\n***Test Failed*** 1 failures.\n\n\n\n\n\n\n\n\n         [1.4 s]\nsage -t -long devel/sage/sage/combinat/crystals/crystals.py\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/combinat/crystals/crystals.py\", line 80:\n    sage: Tab.plot()\nExpected nothing\nGot:\n    Graphics object consisting of 52 graphics primitives\n**********************************************************************\n1 items had failures:\n   1 of  12 in __main__.example_3764993440\n***Test Failed*** 1 failures.\n\n\n\n\n\n\n\n\n\n\n\nsage -t -long devel/sage/sage/combinat/words/word.py\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/combinat/words/word.py\", line 119:\n    sage: w\nExpected:\n    word: 2,1,3,12\nGot:\n    word: 2-1-3-12\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/combinat/words/word.py\", line 837:\n    sage: Words(range(1000))([0,1,10,101]).__str__()\nExpected:\n    'word: 0,1,10,101'\nGot:\n    'word: 0-1-10-101'\n**********************************************************************\n2 items had failures:\n   1 of  10 in __main__.example_0401337461\n   1 of   5 in __main__.example_2333993738\n***Test Failed*** 2 failures.\n\n\n\n\n\n\n\n\n\n\n\n\n\nsage -t -long devel/sage/sage/combinat/sf/sfa.py\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/combinat/sf/sfa.py\", line 65:\n    sage: m(a)\nExpected:\n    3*m[1, 1, 1, 1] + 2*m[2, 1, 1] + m[2, 2] + m[3, 1]\nGot:\n    3*m[1, 1, 1, 1] + m[2, 2] + 2*m[2, 1, 1] + m[3, 1]\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/combinat/sf/sfa.py\", line 94:\n    sage: m.get_print_style()\nExpected:\n    'lex'\nGot:\n    'maximal_part'\n**********************************************************************\n1 items had failures:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nsage -t -long devel/sage/sage/plot/plot3d/texture.py\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/plot/plot3d/texture.py\", line 69:\n    sage: t.mtl_str()\nExpected:\n    'newmtl texture2\\nKa 0.2 0.2 0.5\\nKd 0.4 0.4 1.0\\nKs 0.0 0.0 0.0\\nillum 1\\nNs 1\\nd 0.600000000000000'\nGot:\n    'newmtl texture13\\nKa 0.2 0.2 0.5\\nKd 0.4 0.4 1.0\\nKs 0.0 0.0 0.0\\nillum 1\\nNs 1\\nd 0.600000000000000'\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/plot/plot3d/texture.py\", line 71:\n    sage: t.tachyon_str()\nExpected:\n    'Texdef texture2\\n  Ambient 0.333333333333 Diffuse 0.666666666667 Specular 0.0 Opacity 0.600000000000000\\n   Color 0.4 0.4 1.0\\n   TexF\nunc 0'\nGot:\n    'Texdef texture13\\n  Ambient 0.333333333333 Diffuse 0.666666666667 Specular 0.0 Opacity 0.600000000000000\\n   Color 0.4 0.4 1.0\\n   Tex\nFunc 0'\n**********************************************************************\n1 items had failures:\n   2 of  10 in __main__\n\n\n\n\n\n\n\n\n\n\nsage -t -long devel/sage/sage/calculus/equations.py\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/calculus/equations.py\", line 895:\n    sage: bool( x^2 > x )\nExpected:\n    False\nGot:\n    True\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/calculus/equations.py\", line 1391:\n    sage: assumptions()\nExpected:\n    [x > 0, y > 0, z == 1]\nGot:\n    [x > 2, c != 0, x > 0, y > 0, z == 1]\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/calculus/equations.py\", line 1394:\n    sage: assumptions()\nExpected:\n    [y > 0]\nGot:\n    [x > 2, c != 0, y > 0]\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/calculus/equations.py\", line 1397:\n    sage: assumptions()\nExpected:\n    [y > 0, y is even]\nGot:\n    [x > 2, c != 0, y > 0, y is even]\n**********************************************************************\n2 items had failures:\n   1 of  13 in __main__.example_0570214236\n   3 of  13 in __main__.example_0930958418\n\n\n\n\n\n\n\n\n\n\n\n\n\nage -t -long devel/sage/sage/interfaces/singular.py\nException exceptions.RuntimeError: RuntimeError('Singular error:\\n   ? `sage48` is not defined\\n   ? error occurred in STDIN line 24: `sage48 == sage48;`',) in 'sage.structure.parent_old._unregister_pair' ignored\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/interfaces/singular.py\", line 1051:\n    sage: singular.option()\nExpected:\n    //options: redefine loadLib usage prompt\nGot:\n    //options: intStrategy redefine loadLib usage prompt\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/interfaces/singular.py\", line 1053:\n    sage: singular.option('get')\nExpected:\n    0,\n    10321\nGot:\n    67108864,\n    10321\n[[tons more problems!]]\n\n\n\n\n\n\n\n\n\n\n\n\n\nage -t -long devel/sage/sage/interfaces/maxima.py\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/interfaces/maxima.py\", line 275:\n    sage: maxima(\"laplace(diff(x(t),t),t,s)\")\nExpected:\n    s*?%laplace(x(t),t,s)-x(0)\nGot:\n    s*'laplace(x(t),t,s)-x(0)\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/interfaces/maxima.py\", line 280:\n    sage: maxima(\"laplace(diff(x(t),t,2),t,s)\")\nExpected:\n    -?%at('diff(x(t),t,1),t=0)+s^2*?%laplace(x(t),t,s)-x(0)*s\nGot:\n    -'at('diff(x(t),t,1),t=0)+s^2*'laplace(x(t),t,s)-x(0)*s\n[[many other problems]]\n\n\n\n\n\n\n\n\n\n\nsage -t -long devel/sage/sage/calculus/calculus.py\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/calculus/calculus.py\", line 8081:\n    sage: latex(gamma(x+1))\nExpected:\n    \\Gamma \\left( x + 1 \\right)\nGot:\n    \\Gamma \\left( \\mathrm{x} + 1 \\right)\n**********************************************************************\n1 items had failures:\n   1 of   4 in __main__.example_1540991106\n\n\n\n\n\n\n\n\n\n\n\n\nsage -t -long devel/sage/sage/server/notebook/worksheet.py\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/server/notebook/worksheet.py\", line 147:\n    sage: sage.server.notebook.worksheet._a_sage\nExpected nothing\nGot:\n    Sage\n**********************************************************************\n1 items had failures:\n   1 of   5 in __main__.example_3589583854\n***Test Failed*** 1 failures.\n\n\n\n\n\n\n\n\n\nThe following tests failed:\n\n        sage -t -long devel/sage/sage/quadratic_forms/random_quadraticform.py # File not found\n        sage -t -long devel/sage/sage/quadratic_forms/quadratic_form.py # 1 doctests failed\n        sage -t -long devel/sage/sage/misc/random_testing.py # File not found\n        sage -t -long devel/sage/sage/misc/randstate.pyx # File not found\n        sage -t -long devel/sage/sage/misc/latex.py # 3 doctests failed\n        sage -t -long devel/sage/sage/libs/pari/gen.pyx # 2 doctests failed\n        sage -t -long devel/sage/sage/libs/symmetrica/schur.pxi # 5 doctests failed\n        sage -t -long devel/sage/sage/rings/real_rqdf.pyx # 2 doctests failed\n        sage -t -long devel/sage/sage/libs/fplll/fplll.pyx # 5 doctests failed\n        sage -t -long devel/sage/sage/rings/number_field/class_group.py # 2 doctests failed\n        sage -t -long devel/sage/sage/structure/proof/proof.py # 1 doctests failed\n        sage -t -long devel/sage/sage/combinat/crystals/crystals.py # 1 doctests failed\n        sage -t -long devel/sage/sage/combinat/words/word.py # 2 doctests failed\n        sage -t -long devel/sage/sage/combinat/sf/sfa.py # 2 doctests failed\n        sage -t -long devel/sage/sage/probability/random_variable.py # File not found\n        sage -t -long devel/sage/sage/plot/plot3d/texture.py # 2 doctests failed\n        sage -t -long devel/sage/sage/calculus/equations.py # 4 doctests failed\n        sage -t -long devel/sage/sage/interfaces/singular.py # 5 doctests failed\n        sage -t -long devel/sage/sage/interfaces/maxima.py # 5 doctests failed\n        sage -t -long devel/sage/sage/calculus/calculus.py # 1 doctests failed\n        sage -t -long devel/sage/sage/ext/random.pxi # File not found\n        sage -t -long devel/sage/sage/server/notebook/worksheet.py # 1 doctests failed\n----------------------------------------------------------------------\n\n```",
    "created_at": "2009-04-18T23:32:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5816#issuecomment-38506",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:1'>Comment 1:</a>
The following tests fail after applying this patch and running the test suite on rc3:

```
sage -t -long devel/sage/sage/quadratic_forms/quadratic_form.py
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/quadratic_forms/quadratic_form.py", line 1304:
    sage: Q1.level_ideal()
Expected:
    Principal ideal (1) of Rational Field
Got:
    doctest:1252: UserWarning: Warning -- The level of a quadratic form over a field is always 1.  Do you really want to do this?!?
    Principal ideal (1) of Rational Field
**********************************************************************
1 items had failures:
   1 of   8 in __main__.example_0351962372
***Test Failed*** 1 failures.




MOST EVERYTHING IN:
sage -t -long devel/sage/sage/misc/latex.py
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/misc/latex.py", line 62:
    sage: latex([1,2,3])
Expected:
 








sage -t -long devel/sage/sage/libs/pari/gen.pyx
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/libs/pari/gen.pyx", line 8575:
    sage: pari._primelimit()
Expected:
    500519
Got:
    500000
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/libs/pari/gen.pyx", line 7013:
    sage: pari('[a,b,c; d,e,f; g,h,i]').matadjoint()
Expected:
    [(i*e - h*f), (-i*b + h*c), (f*b - e*c); (-i*d + g*f), i*a - g*c, -f*a + d*c; (h*d - g*e), -h*a + g*b, e*a - d*b]
Got:
    [e*i - h*f, -b*i + h*c, (f*b - e*c); -d*i + g*f, a*i - g*c, (-f*a + d*c); (h*d - g*e), (-h*a + g*b), (e*a - d*b)]
**********************************************************************
2 items had failures:
   1 of   5 in __main__.example_0786952607
   1 of   4 in __main__.example_2085375216
***Test Failed*** 2 failures.
For whitespace errors, see the file /scratch/wstein/build/sage-3.4.1.rc3/tmp/.doctest_gen.py
         [3.4 s]








SEVERAL THINGS:
sage -t -long devel/sage/sage/libs/symmetrica/schur.pxi
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/libs/symmetrica/schur.pxi", line 369:
    sage: symmetrica.compute_schur_with_alphabet_det(2,2)
Exception raised:
    Traceback (most recent call last):
      File "/scratch/wstein/build/sage-3.4.1.rc3/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/scratch/wstein/build/sage-3.4.1.rc3/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/scratch/wstein/build/sage-3.4.1.rc3/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_0960543897[2]>", line 1, in <module>
        symmetrica.compute_schur_with_alphabet_det(Integer(2),Integer(2))###line 369:
    sage: symmetrica.compute_schur_with_alphabet_det(2,2)
      File "schur.pxi", line 382, in sage.libs.symmetrica.symmetrica.compute_schur_with_alphabet_det_symmetrica (sage/libs/symmetrica/symme
trica.c:17919)        if isinstance(part, (int, Integer)):
    TypeError: isinstance() arg 2 must be a class, type, or tuple of classes and types









sage -t -long devel/sage/sage/rings/real_rqdf.pyx
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/rings/real_rqdf.pyx", line 531:
    sage: w= RQDF('1.34435343435344446376457677898097745635222')
Expected nothing
Got:
    doctest:1172: DeprecationWarning: RQDF is deprecated; use RealField(212) instead.
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/rings/real_rqdf.pyx", line 4:
    : RQDF(1)
Expected:
    doctest:...: DeprecationWarning: RQDF is deprecated; use RealField(212) instead.
    1.000000000000000000000000000000000000000000000000000000000000000
Got:
    1.000000000000000000000000000000000000000000000000000000000000000
**********************************************************************
2 items had failures:
   1 of   6 in __main__.example_0123338167
   1 of  12 in __main__.example_0497399660
***Test Failed*** 2 failures.












sage -t -long devel/sage/sage/libs/fplll/fplll.pyx
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/libs/fplll/fplll.pyx", line 761:
    sage: A = gen_ntrulike2(5,10,12); A
Expected:
    [ 12   0   0   0   0   0   0   0   0   0]
    [  0  12   0   0   0   0   0   0   0   0]
    [  0   0  12   0   0   0   0   0   0   0]
    [  0   0   0  12   0   0   0   0   0   0]
    [  0   0   0   0  12   0   0   0   0   0]

and a few more...









sage -t -long devel/sage/sage/rings/number_field/class_group.py
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/rings/number_field/class_group.py", line 107:
    sage: C.gen(0)
Expected:
    Fractional ideal class (130, 1/2*a + 137/2)
Got:
    Fractional ideal class (41, a - 10)
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/rings/number_field/class_group.py", line 109:
    sage: C.gen(1)
Expected:
    Fractional ideal class (7, a)
Got:
    Fractional ideal class (17, a)
**********************************************************************













sage -t -long devel/sage/sage/structure/proof/proof.py
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/structure/proof/proof.py", line 109:
    sage: proof.number_field()
Expected:
    True
Got:
    False
**********************************************************************
1 items had failures:
   1 of   7 in __main__.example_3571288829
***Test Failed*** 1 failures.








         [1.4 s]
sage -t -long devel/sage/sage/combinat/crystals/crystals.py
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/combinat/crystals/crystals.py", line 80:
    sage: Tab.plot()
Expected nothing
Got:
    Graphics object consisting of 52 graphics primitives
**********************************************************************
1 items had failures:
   1 of  12 in __main__.example_3764993440
***Test Failed*** 1 failures.











sage -t -long devel/sage/sage/combinat/words/word.py
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/combinat/words/word.py", line 119:
    sage: w
Expected:
    word: 2,1,3,12
Got:
    word: 2-1-3-12
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/combinat/words/word.py", line 837:
    sage: Words(range(1000))([0,1,10,101]).__str__()
Expected:
    'word: 0,1,10,101'
Got:
    'word: 0-1-10-101'
**********************************************************************
2 items had failures:
   1 of  10 in __main__.example_0401337461
   1 of   5 in __main__.example_2333993738
***Test Failed*** 2 failures.













sage -t -long devel/sage/sage/combinat/sf/sfa.py
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/combinat/sf/sfa.py", line 65:
    sage: m(a)
Expected:
    3*m[1, 1, 1, 1] + 2*m[2, 1, 1] + m[2, 2] + m[3, 1]
Got:
    3*m[1, 1, 1, 1] + m[2, 2] + 2*m[2, 1, 1] + m[3, 1]
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/combinat/sf/sfa.py", line 94:
    sage: m.get_print_style()
Expected:
    'lex'
Got:
    'maximal_part'
**********************************************************************
1 items had failures:















sage -t -long devel/sage/sage/plot/plot3d/texture.py
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/plot/plot3d/texture.py", line 69:
    sage: t.mtl_str()
Expected:
    'newmtl texture2\nKa 0.2 0.2 0.5\nKd 0.4 0.4 1.0\nKs 0.0 0.0 0.0\nillum 1\nNs 1\nd 0.600000000000000'
Got:
    'newmtl texture13\nKa 0.2 0.2 0.5\nKd 0.4 0.4 1.0\nKs 0.0 0.0 0.0\nillum 1\nNs 1\nd 0.600000000000000'
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/plot/plot3d/texture.py", line 71:
    sage: t.tachyon_str()
Expected:
    'Texdef texture2\n  Ambient 0.333333333333 Diffuse 0.666666666667 Specular 0.0 Opacity 0.600000000000000\n   Color 0.4 0.4 1.0\n   TexF
unc 0'
Got:
    'Texdef texture13\n  Ambient 0.333333333333 Diffuse 0.666666666667 Specular 0.0 Opacity 0.600000000000000\n   Color 0.4 0.4 1.0\n   Tex
Func 0'
**********************************************************************
1 items had failures:
   2 of  10 in __main__










sage -t -long devel/sage/sage/calculus/equations.py
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/calculus/equations.py", line 895:
    sage: bool( x^2 > x )
Expected:
    False
Got:
    True
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/calculus/equations.py", line 1391:
    sage: assumptions()
Expected:
    [x > 0, y > 0, z == 1]
Got:
    [x > 2, c != 0, x > 0, y > 0, z == 1]
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/calculus/equations.py", line 1394:
    sage: assumptions()
Expected:
    [y > 0]
Got:
    [x > 2, c != 0, y > 0]
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/calculus/equations.py", line 1397:
    sage: assumptions()
Expected:
    [y > 0, y is even]
Got:
    [x > 2, c != 0, y > 0, y is even]
**********************************************************************
2 items had failures:
   1 of  13 in __main__.example_0570214236
   3 of  13 in __main__.example_0930958418













age -t -long devel/sage/sage/interfaces/singular.py
Exception exceptions.RuntimeError: RuntimeError('Singular error:\n   ? `sage48` is not defined\n   ? error occurred in STDIN line 24: `sage48 == sage48;`',) in 'sage.structure.parent_old._unregister_pair' ignored
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/interfaces/singular.py", line 1051:
    sage: singular.option()
Expected:
    //options: redefine loadLib usage prompt
Got:
    //options: intStrategy redefine loadLib usage prompt
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/interfaces/singular.py", line 1053:
    sage: singular.option('get')
Expected:
    0,
    10321
Got:
    67108864,
    10321
[[tons more problems!]]













age -t -long devel/sage/sage/interfaces/maxima.py
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/interfaces/maxima.py", line 275:
    sage: maxima("laplace(diff(x(t),t),t,s)")
Expected:
    s*?%laplace(x(t),t,s)-x(0)
Got:
    s*'laplace(x(t),t,s)-x(0)
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/interfaces/maxima.py", line 280:
    sage: maxima("laplace(diff(x(t),t,2),t,s)")
Expected:
    -?%at('diff(x(t),t,1),t=0)+s^2*?%laplace(x(t),t,s)-x(0)*s
Got:
    -'at('diff(x(t),t,1),t=0)+s^2*'laplace(x(t),t,s)-x(0)*s
[[many other problems]]










sage -t -long devel/sage/sage/calculus/calculus.py
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/calculus/calculus.py", line 8081:
    sage: latex(gamma(x+1))
Expected:
    \Gamma \left( x + 1 \right)
Got:
    \Gamma \left( \mathrm{x} + 1 \right)
**********************************************************************
1 items had failures:
   1 of   4 in __main__.example_1540991106












sage -t -long devel/sage/sage/server/notebook/worksheet.py
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/server/notebook/worksheet.py", line 147:
    sage: sage.server.notebook.worksheet._a_sage
Expected nothing
Got:
    Sage
**********************************************************************
1 items had failures:
   1 of   5 in __main__.example_3589583854
***Test Failed*** 1 failures.









The following tests failed:

        sage -t -long devel/sage/sage/quadratic_forms/random_quadraticform.py # File not found
        sage -t -long devel/sage/sage/quadratic_forms/quadratic_form.py # 1 doctests failed
        sage -t -long devel/sage/sage/misc/random_testing.py # File not found
        sage -t -long devel/sage/sage/misc/randstate.pyx # File not found
        sage -t -long devel/sage/sage/misc/latex.py # 3 doctests failed
        sage -t -long devel/sage/sage/libs/pari/gen.pyx # 2 doctests failed
        sage -t -long devel/sage/sage/libs/symmetrica/schur.pxi # 5 doctests failed
        sage -t -long devel/sage/sage/rings/real_rqdf.pyx # 2 doctests failed
        sage -t -long devel/sage/sage/libs/fplll/fplll.pyx # 5 doctests failed
        sage -t -long devel/sage/sage/rings/number_field/class_group.py # 2 doctests failed
        sage -t -long devel/sage/sage/structure/proof/proof.py # 1 doctests failed
        sage -t -long devel/sage/sage/combinat/crystals/crystals.py # 1 doctests failed
        sage -t -long devel/sage/sage/combinat/words/word.py # 2 doctests failed
        sage -t -long devel/sage/sage/combinat/sf/sfa.py # 2 doctests failed
        sage -t -long devel/sage/sage/probability/random_variable.py # File not found
        sage -t -long devel/sage/sage/plot/plot3d/texture.py # 2 doctests failed
        sage -t -long devel/sage/sage/calculus/equations.py # 4 doctests failed
        sage -t -long devel/sage/sage/interfaces/singular.py # 5 doctests failed
        sage -t -long devel/sage/sage/interfaces/maxima.py # 5 doctests failed
        sage -t -long devel/sage/sage/calculus/calculus.py # 1 doctests failed
        sage -t -long devel/sage/sage/ext/random.pxi # File not found
        sage -t -long devel/sage/sage/server/notebook/worksheet.py # 1 doctests failed
----------------------------------------------------------------------

```



---

archive/issue_comments_038507.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nWith -rand=1 we get the following failures, that are slightly different than the above\n\n```\n\n\nIt's very interesting to run on the full rc3 tree with a fixed random seed.   I think this\nreveals *numerous* errors and subtle problems:\n\n./sage -tp 20 -long -rand=1 devel/sage/sage/ > testlong-rand1.log&\n\nThis already turns up the following *interesting* problems:\n\nsage -t -long -rand=1 devel/sage/sage/modular/modform/space.py\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/modular/modform/space.py\", line 763:\n    sage: M.q_expansion_basis()\nExpected:\n    [\n    q - 2*q^2 - q^3 + 2*q^4 + q^5 + O(q^6),\n    1 + 12/5*q + 36/5*q^2 + 48/5*q^3 + 84/5*q^4 + 72/5*q^5 + O(q^6)\n    ]\nGot:\n    [\n    q - 2*q^2 - q^3 + 2*q^4 + q^5 + 2*q^6 - 2*q^7 - 2*q^9 - 2*q^10 + q^11 - 2*q^12 + 4*q^13 + O(q^14),\n    1 + 12/5*q + 36/5*q^2 + 48/5*q^3 + 84/5*q^4 + 72/5*q^5 + 144/5*q^6 + 96/5*q^7 + 36*q^8 + 156/5*q^9 + 216/5*q^10 + 12/5*q^11 + 336/5*q^12 + 168/5*q^13 + O(q^14)\n    ]\n**********************************************************************\n1 items had failures:\n   1 of   5 in __main__.example_3297184748\n\n\n\n\nsage -t -long -rand=1 devel/sage/sage/misc/latex.py\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/misc/latex.py\", line 62:\n    sage: latex([1,2,3])\nExpected:\n    \\left[1,\n[[everything breaks as you know]]\n\n\n\n\n\nsage -t -long -rand=1 devel/sage/sage/libs/pari/gen.pyx\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/libs/pari/gen.pyx\", line 8280:\n    sage: a = pari('1.2'); a, a.type(), a.precision()\nExpected:\n    (1.20000000000000, 't_REAL', 3)\nGot:\n    (1.20000000000000, 't_REAL', 4)\n**********************************************************************\n1 items had failures:\n   1 of  18 in __main__.example_0036674092\n\n\n\n\n\n\nsage -t -long -rand=1 devel/sage/sage/misc/randstate.pyx\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/misc/randstate.pyx\", line 59:\n    : rtest()\nExpected:\n    (207, 0.505364206568040, 4*x^2 + 1/2, (1,2)(4,5), [ 0, 0, 1, 0, 1 ], 2137873234, 27695, 0.19982565117278328)\nGot:\n    (207, 0.505364206568040, 4*x^2 + 1/2, (2,3)(4,5), [ 0, 0, 1, 0, 1 ], 2137873234, 27695, 0.19982565117278328)\n**********************************************************************\n1 items had failures:\n   1 of  62 in __main__.example_0299976341\n***Test Failed*** 1 failures.\n\n\n\n\n\n\nThe following might be related to https://github.com/sagemath/sage/issues/5789\n\nsage -t -long -rand=1 devel/sage/sage/rings/real_rqdf.pyx\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/rings/real_rqdf.pyx\", line 1116:\n    sage: RQDF(-1)._complex_double_(CDF)\nExpected:\n    -1.0\nGot:\n    doctest:1172: DeprecationWarning: RQDF is deprecated; use RealField(212) instead.\n    -1.0\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/rings/real_rqdf.pyx\", line 4:\n    : RQDF(1)\nExpected:\n    doctest:...: DeprecationWarning: RQDF is deprecated; use RealField(212) instead.\n    1.000000000000000000000000000000000000000000000000000000000000000\nGot:\n    1.000000000000000000000000000000000000000000000000000000000000000\n**********************************************************************\n2 items had failures:\n   1 of   4 in __main__.example_0007003101\n   1 of  12 in __main__.example_0299976341\n\n\n\n\n\n\n\nsage -t -long -rand=1 devel/sage/sage/libs/fplll/fplll.pyx\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/libs/fplll/fplll.pyx\", line 715:\n    sage: A = gen_ntrulike(5,10,12); A\nExpected:\n    [  1   0   0   0   0 320 351 920 714  66]\n    [  0   1   0   0   0 351 920 714  66 320]\n    [  0   0   1   0   0 920 714  66 320 351]\n    [  0   0   0   1   0 714  66 320 351 920]\n    [  0   0   0   0   1  66 320 351 920 714]\n    [  0   0   0   0   0  12   0   0   0   0]\n    [  0   0   0   0   0   0  12   0   0   0]\n    [  0   0   0   0   0   0   0  12   0   0]\n    [  0   0   0   0   0   0   0   0  12   0]\n    [  0   0   0   0   0   0   0   0   0  12]\nGot:\n    [  1   0   0   0   0 116 331 303 963 456]\n    [  0   1   0   0   0 331 303 963 456 116]\n    [  0   0   1   0   0 303 963 456 116 331]\n    [  0   0   0   1   0 963 456 116 331 303]\n    [  0   0   0   0   1 456 116 331 303 963]\n    [  0   0   0   0   0  12   0   0   0   0]\n    [  0   0   0   0   0   0  12   0   0   0]\n    [  0   0   0   0   0   0   0  12   0   0]\n    [  0   0   0   0   0   0   0   0  12   0]\n    [  0   0   0   0   0   0   0   0   0  12]\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/libs/fplll/fplll.pyx\", line 656:\n    sage: A = gen_uniform(10,10,12); A\n\n[[tons more problems]]\n\n\n\n\n\n\n\n\nage -t -long -rand=1 devel/sage/sage/rings/polynomial/polynomial_modn_dense_ntl.pyx\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/rings/polynomial/polynomial_modn_dense_ntl.pyx\", line 379:\n    sage: f.small_roots()\nExpected:\n    [4]\nGot:\n    verbose 2 (<module>) epsilon = 0\n    verbose 2 (<module>) m = 3\n    verbose 2 (<module>) t = 0\n    verbose 2 (<module>) X = 4\n    verbose 1 (<module>) LLL of 9x12 matrix (algorithm fpLLL:wrapper)\n    verbose 1 (<module>) LLL finished (time = 0.0)\n    [4]\n**********************************************************************\n1 items had failures:\n   1 of   7 in __main__.example_0208607704\n\n\n\n\n\n\n\n\n\n\nsage -t -long -rand=1 devel/sage/sage/rings/polynomial/polynomial_element.pyx\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/rings/polynomial/polynomial_element.pyx\", line 3991:\n    sage: p.roots(ring=RR, algorithm='numpy')\nExpected:\n    Traceback (most recent call last):\n    ...\n    ValueError: array must not contain infs or NaNs\nGot:\n    Traceback (most recent call last):\n      File \"/scratch/wstein/build/sage-3.4.1.rc3/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/scratch/wstein/build/sage-3.4.1.rc3/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/scratch/wstein/build/sage-3.4.1.rc3/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_0061063177[118]>\", line 1, in <module>\n        p.roots(ring=RR, algorithm='numpy')###line 3991:\n    sage: p.roots(ring=RR, algorithm='numpy')\n      File \"polynomial_element.pyx\", line 4235, in sage.rings.polynomial.polynomial_element.Polynomial.roots (sage/rings/polynomial/polynomial_element.c:34787)\n        return self.change_ring(L).roots(multiplicities=multiplicities, algorithm=algorithm)\n      File \"polynomial_element.pyx\", line 4156, in sage.rings.polynomial.polynomial_element.Polynomial.roots (sage/rings/polynomial/polynomial_element.c:33064)\n        raise\n      File \"polynomial_element.pyx\", line 4146, in sage.rings.polynomial.polynomial_element.roots (sage/rings/polynomial/polynomial_element.c:32862)\n        ext_rts1 = numpy.roots(numpy_array)\n      File \"/home/wstein/build/sage-3.4.1.rc3/local/lib/python2.5/site-packages/numpy/lib/polynomial.py\", line 180, in roots\n        roots = _eigvals(A)\n      File \"/home/wstein/build/sage-3.4.1.rc3/local/lib/python2.5/site-packages/numpy/lib/polynomial.py\", line 35, in _eigvals\n        return eigvals(arg)\n      File \"/home/wstein/build/sage-3.4.1.rc3/local/lib/python2.5/site-packages/numpy/linalg/linalg.py\", line 597, in eigvals\n        _assertFinite(a)\n      File \"/home/wstein/build/sage-3.4.1.rc3/local/lib/python2.5/site-packages/numpy/linalg/linalg.py\", line 125, in _assertFinite\n        raise LinAlgError, \"Array must not contain infs or NaNs\"\n    LinAlgError: Array must not contain infs or NaNs\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/rings/polynomial/polynomial_element.pyx\", line 4002:\n    sage: p.roots(ring=RR)\nExpected:\n    [(0.000000000000000, 1)]\nGot:\n    [(-0.000000000000000, 1)]\n\n\n\n\n\n\n\n\n\n\n\nsage -t -long -rand=1 devel/sage/sage/combinat/sloane_functions.py\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/combinat/sloane_functions.py\", line 7203:\n    sage: initial = len(sloane.A001358._b)\nException raised:\n    Traceback (most recent call last):\n      File \"/scratch/wstein/build/sage-3.4.1.rc3/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/scratch/wstein/build/sage-3.4.1.rc3/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/scratch/wstein/build/sage-3.4.1.rc3/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_0246131326[2]>\", line 1, in <module>\n        initial = len(sloane.A001358._b)###line 7203:\n    sage: initial = len(sloane.A001358._b)\n    AttributeError: 'A001358' object has no attribute '_b'\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/combinat/sloane_functions.py\", line 7205:\n    sage: len(sloane.A001358._b) - initial > 0\nException raised:\n    Traceback (most recent call last):\n      File \"/scratch/wstein/build/sage-3.4.1.rc3/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/scratch/wstein/build/sage-3.4.1.rc3/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/scratch/wstein/build/sage-3.4.1.rc3/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_0246131326[4]>\", line 1, in <module>\n        len(sloane.A001358._b) - initial > Integer(0)###line 7205:\n    sage: len(sloane.A001358._b) - initial > 0\n    NameError: name 'initial' is not defined\n**********************************************************************\n1 items had failures:\n\n\n\n\n\n\nsage -t -long -rand=1 devel/sage/sage/combinat/words/word.py\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/combinat/words/word.py\", line 119:\n    sage: w\nExpected:\n    word: 2,1,3,12\nGot:\n    word: 2-1-3-12\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/combinat/words/word.py\", line 837:\n    sage: Words(range(1000))([0,1,10,101]).__str__()\nExpected:\n    'word: 0,1,10,101'\nGot:\n    'word: 0-1-10-101'\n**********************************************************************\n2 items had failures:\n   1 of  10 in __main__.example_1192818567\n   1 of   5 in __main__.example_1949818771\n***Test Failed*** 2 failures.\n\n\n\n\n\n\n\nsage -t -long -rand=1 devel/sage/sage/calculus/equations.py\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/calculus/equations.py\", line 895:\n    sage: bool( x^2 > x )\nExpected:\n    False\nGot:\n    True\n**********************************************************************\n1 items had failures:\n   1 of  13 in __main__.example_3038663466\n***Test Failed*** 1 failures.\n\n\n\n\n\n\n\n\nsage -t -long -rand=1 devel/sage/sage/interfaces/r.py\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/interfaces/r.py\", line 1071:\n    sage: t = a.trait_names()\nExpected nothing\nGot:\n    <BLANKLINE>\n    Building R command completion list (this takes\n    a few seconds only the first time you do it).\n    To force rebuild later, delete /scratch/wstein/sage//r_commandlist.sobj.\n**********************************************************************\n1 items had failures:\n   1 of   5 in __main__.example_1346836858\n\n\n\n\n\n\n\nsage -t -long -rand=1 devel/sage/sage/interfaces/singular.py**********************************************************************File \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/interfaces/singular.py\", line 988:    sage: singular.trait_names()Expected:    ['headStand',     ...     'stdfglm']Got:    ['pause', 'writelist', 'tab', 'split', 'showrecursive', 'show', 'rMacaulay', 'pmat', 'lprint', 'allprint', 'newtonDiag', 'subrInterred', 'id2mod', 'mod2id', 'denominator', 'numerator', 'content', 'lcm', 'rad_con', 'normalize', 'mindeg1', 'mindeg', 'maxdeg1', 'maxdeg', 'maxcoef', 'is_zero', 'freerank', 'kat_var', 'katsura', 'cyclic', 'substitute', 'hilbPoly', 'select1', 'select', 'sat', 'nselect', 'elim1', 'elim', 'blowup0', 'triangMH', 'triangM', 'triangLfak', 'triangL', 'absFactorize', 'newZero_decom\n\n[[tons of other issues due to bad doctests]]\n\n\n\n\n\n\n\nsage -t -long -rand=1 devel/sage/sage/interfaces/maxima.py\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/interfaces/maxima.py\", line 1872:\n    sage: f.diff('x')\nExpected:\n    34*y*'diff(y,x,1)+2*x\nGot:\n    2*x\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/interfaces/maxima.py\", line 1602:\n    sage: f = maxima('1/(x-1)^3'); f\nExpected:\n    1/(x-1)^3\nGot:\n    1\nAnd *NUMEROUS* other issues!!\n\n\n\n\n\n\n\n\n\n\nsage -t -long -rand=1 devel/sage/sage/combinat/partition.py\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/combinat/partition.py\", line 2372:\n    sage: RestrictedPartitions(5,[3,2,1]).__repr__()\nExpected:\n    doctest:...: DeprecationWarning: RestrictedPartitions is deprecated; use Partitions with the parts_in keyword instead.\n    'Partitions of 5 restricted to the values [1, 2, 3] '\nGot:\n    doctest:1: DeprecationWarning: RestrictedPartitions is deprecated; use Partitions with the parts_in keyword instead.\n    doctest:2324: DeprecationWarning: RestrictedPartitions_nsk is deprecated; use Partitions with the parts_in keyword instead.\n    'Partitions of 5 restricted to the values [1, 2, 3] '\n\n[[and more]]\n\n\n\n\n\nsage -t -long -rand=1 devel/sage/sage/calculus/calculus.py\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/calculus/calculus.py\", line 8211:\n    sage: latex(factorial(x))\nException raised:\n    Traceback (most recent call last):\n      File \"/scratch/wstein/build/sage-3.4.1.rc3/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/scratch/wstein/build/sage-3.4.1.rc3/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/scratch/wstein/build/sage-3.4.1.rc3/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_2333006911[2]>\", line 1, in <module>\n        latex(factorial(x))###line 8211:\n    sage: latex(factorial(x))\n      File \"/scratch/wstein/build/sage-3.4.1.rc3/local/lib/python2.5/site-packages/sage/calculus/calculus.py\", line 8249, in __call__\n        return factorial(n, **kwds)\n      File \"/scratch/wstein/build/sage-3.4.1.rc3/local/lib/python2.5/site-packages/sage/rings/arith.py\", line 328, in factorial\n        raise ValueError, \"factorial -- must be nonnegative\"\n    ValueError: factorial -- must be nonnegative\n\n(not much more)\n\n\n\n\n\n\n\nsage -t -long -rand=1 devel/sage/sage/server/notebook/worksheet.py\n**********************************************************************\nFile \"/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/server/notebook/worksheet.py\", line 147:\n    sage: sage.server.notebook.worksheet._a_sage\nExpected nothing\nGot:\n    Sage\n**********************************************************************\n1 items had failures:\n   1 of   5 in __main__.example_3577862625\n\n\n\n\n\n\nThe following tests failed:\n\n        sage -t -long -rand=1 devel/sage/sage/modular/modform/space.py # 1 doctests failed\n        sage -t -long -rand=1 devel/sage/sage/misc/session.pyx # 1 doctests failed\n        sage -t -long -rand=1 devel/sage/sage/misc/latex.py # 17 doctests failed\n        sage -t -long -rand=1 devel/sage/sage/libs/pari/gen.pyx # 1 doctests failed\n        sage -t -long -rand=1 devel/sage/sage/misc/randstate.pyx # 1 doctests failed\n        sage -t -long -rand=1 devel/sage/sage/rings/real_rqdf.pyx # 2 doctests failed\n        sage -t -long -rand=1 devel/sage/sage/libs/fplll/fplll.pyx # 5 doctests failed\n        sage -t -long -rand=1 devel/sage/sage/rings/polynomial/polynomial_modn_dense_ntl.pyx # 1 doctests failed\n        sage -t -long -rand=1 devel/sage/sage/rings/polynomial/polynomial_element.pyx # 2 doctests failed\n        sage -t -long -rand=1 devel/sage/sage/combinat/sloane_functions.py # 2 doctests failed\n        sage -t -long -rand=1 devel/sage/sage/combinat/words/word.py # 2 doctests failed\n        sage -t -long -rand=1 devel/sage/sage/calculus/equations.py # 1 doctests failed\n        sage -t -long -rand=1 devel/sage/sage/interfaces/r.py # 1 doctests failed\n        sage -t -long -rand=1 devel/sage/sage/interfaces/singular.py # 6 doctests failed\n        sage -t -long -rand=1 devel/sage/sage/interfaces/maxima.py # 14 doctests failed\n        sage -t -long -rand=1 devel/sage/sage/combinat/partition.py # 2 doctests failed\n        sage -t -long -rand=1 devel/sage/sage/calculus/calculus.py # 5 doctests failed\n        sage -t -long -rand=1 devel/sage/sage/server/notebook/worksheet.py # 1 doctests failed\n----------------------------------------------------------------------\n\n\n\n\n```",
    "created_at": "2009-04-18T23:33:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5816#issuecomment-38507",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:2'>Comment 2:</a>
With -rand=1 we get the following failures, that are slightly different than the above

```


It's very interesting to run on the full rc3 tree with a fixed random seed.   I think this
reveals *numerous* errors and subtle problems:

./sage -tp 20 -long -rand=1 devel/sage/sage/ > testlong-rand1.log&

This already turns up the following *interesting* problems:

sage -t -long -rand=1 devel/sage/sage/modular/modform/space.py
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/modular/modform/space.py", line 763:
    sage: M.q_expansion_basis()
Expected:
    [
    q - 2*q^2 - q^3 + 2*q^4 + q^5 + O(q^6),
    1 + 12/5*q + 36/5*q^2 + 48/5*q^3 + 84/5*q^4 + 72/5*q^5 + O(q^6)
    ]
Got:
    [
    q - 2*q^2 - q^3 + 2*q^4 + q^5 + 2*q^6 - 2*q^7 - 2*q^9 - 2*q^10 + q^11 - 2*q^12 + 4*q^13 + O(q^14),
    1 + 12/5*q + 36/5*q^2 + 48/5*q^3 + 84/5*q^4 + 72/5*q^5 + 144/5*q^6 + 96/5*q^7 + 36*q^8 + 156/5*q^9 + 216/5*q^10 + 12/5*q^11 + 336/5*q^12 + 168/5*q^13 + O(q^14)
    ]
**********************************************************************
1 items had failures:
   1 of   5 in __main__.example_3297184748




sage -t -long -rand=1 devel/sage/sage/misc/latex.py
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/misc/latex.py", line 62:
    sage: latex([1,2,3])
Expected:
    \left[1,
[[everything breaks as you know]]





sage -t -long -rand=1 devel/sage/sage/libs/pari/gen.pyx
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/libs/pari/gen.pyx", line 8280:
    sage: a = pari('1.2'); a, a.type(), a.precision()
Expected:
    (1.20000000000000, 't_REAL', 3)
Got:
    (1.20000000000000, 't_REAL', 4)
**********************************************************************
1 items had failures:
   1 of  18 in __main__.example_0036674092






sage -t -long -rand=1 devel/sage/sage/misc/randstate.pyx
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/misc/randstate.pyx", line 59:
    : rtest()
Expected:
    (207, 0.505364206568040, 4*x^2 + 1/2, (1,2)(4,5), [ 0, 0, 1, 0, 1 ], 2137873234, 27695, 0.19982565117278328)
Got:
    (207, 0.505364206568040, 4*x^2 + 1/2, (2,3)(4,5), [ 0, 0, 1, 0, 1 ], 2137873234, 27695, 0.19982565117278328)
**********************************************************************
1 items had failures:
   1 of  62 in __main__.example_0299976341
***Test Failed*** 1 failures.






The following might be related to https://github.com/sagemath/sage/issues/5789

sage -t -long -rand=1 devel/sage/sage/rings/real_rqdf.pyx
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/rings/real_rqdf.pyx", line 1116:
    sage: RQDF(-1)._complex_double_(CDF)
Expected:
    -1.0
Got:
    doctest:1172: DeprecationWarning: RQDF is deprecated; use RealField(212) instead.
    -1.0
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/rings/real_rqdf.pyx", line 4:
    : RQDF(1)
Expected:
    doctest:...: DeprecationWarning: RQDF is deprecated; use RealField(212) instead.
    1.000000000000000000000000000000000000000000000000000000000000000
Got:
    1.000000000000000000000000000000000000000000000000000000000000000
**********************************************************************
2 items had failures:
   1 of   4 in __main__.example_0007003101
   1 of  12 in __main__.example_0299976341







sage -t -long -rand=1 devel/sage/sage/libs/fplll/fplll.pyx
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/libs/fplll/fplll.pyx", line 715:
    sage: A = gen_ntrulike(5,10,12); A
Expected:
    [  1   0   0   0   0 320 351 920 714  66]
    [  0   1   0   0   0 351 920 714  66 320]
    [  0   0   1   0   0 920 714  66 320 351]
    [  0   0   0   1   0 714  66 320 351 920]
    [  0   0   0   0   1  66 320 351 920 714]
    [  0   0   0   0   0  12   0   0   0   0]
    [  0   0   0   0   0   0  12   0   0   0]
    [  0   0   0   0   0   0   0  12   0   0]
    [  0   0   0   0   0   0   0   0  12   0]
    [  0   0   0   0   0   0   0   0   0  12]
Got:
    [  1   0   0   0   0 116 331 303 963 456]
    [  0   1   0   0   0 331 303 963 456 116]
    [  0   0   1   0   0 303 963 456 116 331]
    [  0   0   0   1   0 963 456 116 331 303]
    [  0   0   0   0   1 456 116 331 303 963]
    [  0   0   0   0   0  12   0   0   0   0]
    [  0   0   0   0   0   0  12   0   0   0]
    [  0   0   0   0   0   0   0  12   0   0]
    [  0   0   0   0   0   0   0   0  12   0]
    [  0   0   0   0   0   0   0   0   0  12]
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/libs/fplll/fplll.pyx", line 656:
    sage: A = gen_uniform(10,10,12); A

[[tons more problems]]








age -t -long -rand=1 devel/sage/sage/rings/polynomial/polynomial_modn_dense_ntl.pyx
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/rings/polynomial/polynomial_modn_dense_ntl.pyx", line 379:
    sage: f.small_roots()
Expected:
    [4]
Got:
    verbose 2 (<module>) epsilon = 0
    verbose 2 (<module>) m = 3
    verbose 2 (<module>) t = 0
    verbose 2 (<module>) X = 4
    verbose 1 (<module>) LLL of 9x12 matrix (algorithm fpLLL:wrapper)
    verbose 1 (<module>) LLL finished (time = 0.0)
    [4]
**********************************************************************
1 items had failures:
   1 of   7 in __main__.example_0208607704










sage -t -long -rand=1 devel/sage/sage/rings/polynomial/polynomial_element.pyx
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/rings/polynomial/polynomial_element.pyx", line 3991:
    sage: p.roots(ring=RR, algorithm='numpy')
Expected:
    Traceback (most recent call last):
    ...
    ValueError: array must not contain infs or NaNs
Got:
    Traceback (most recent call last):
      File "/scratch/wstein/build/sage-3.4.1.rc3/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/scratch/wstein/build/sage-3.4.1.rc3/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/scratch/wstein/build/sage-3.4.1.rc3/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_0061063177[118]>", line 1, in <module>
        p.roots(ring=RR, algorithm='numpy')###line 3991:
    sage: p.roots(ring=RR, algorithm='numpy')
      File "polynomial_element.pyx", line 4235, in sage.rings.polynomial.polynomial_element.Polynomial.roots (sage/rings/polynomial/polynomial_element.c:34787)
        return self.change_ring(L).roots(multiplicities=multiplicities, algorithm=algorithm)
      File "polynomial_element.pyx", line 4156, in sage.rings.polynomial.polynomial_element.Polynomial.roots (sage/rings/polynomial/polynomial_element.c:33064)
        raise
      File "polynomial_element.pyx", line 4146, in sage.rings.polynomial.polynomial_element.roots (sage/rings/polynomial/polynomial_element.c:32862)
        ext_rts1 = numpy.roots(numpy_array)
      File "/home/wstein/build/sage-3.4.1.rc3/local/lib/python2.5/site-packages/numpy/lib/polynomial.py", line 180, in roots
        roots = _eigvals(A)
      File "/home/wstein/build/sage-3.4.1.rc3/local/lib/python2.5/site-packages/numpy/lib/polynomial.py", line 35, in _eigvals
        return eigvals(arg)
      File "/home/wstein/build/sage-3.4.1.rc3/local/lib/python2.5/site-packages/numpy/linalg/linalg.py", line 597, in eigvals
        _assertFinite(a)
      File "/home/wstein/build/sage-3.4.1.rc3/local/lib/python2.5/site-packages/numpy/linalg/linalg.py", line 125, in _assertFinite
        raise LinAlgError, "Array must not contain infs or NaNs"
    LinAlgError: Array must not contain infs or NaNs
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/rings/polynomial/polynomial_element.pyx", line 4002:
    sage: p.roots(ring=RR)
Expected:
    [(0.000000000000000, 1)]
Got:
    [(-0.000000000000000, 1)]











sage -t -long -rand=1 devel/sage/sage/combinat/sloane_functions.py
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/combinat/sloane_functions.py", line 7203:
    sage: initial = len(sloane.A001358._b)
Exception raised:
    Traceback (most recent call last):
      File "/scratch/wstein/build/sage-3.4.1.rc3/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/scratch/wstein/build/sage-3.4.1.rc3/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/scratch/wstein/build/sage-3.4.1.rc3/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_0246131326[2]>", line 1, in <module>
        initial = len(sloane.A001358._b)###line 7203:
    sage: initial = len(sloane.A001358._b)
    AttributeError: 'A001358' object has no attribute '_b'
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/combinat/sloane_functions.py", line 7205:
    sage: len(sloane.A001358._b) - initial > 0
Exception raised:
    Traceback (most recent call last):
      File "/scratch/wstein/build/sage-3.4.1.rc3/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/scratch/wstein/build/sage-3.4.1.rc3/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/scratch/wstein/build/sage-3.4.1.rc3/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_0246131326[4]>", line 1, in <module>
        len(sloane.A001358._b) - initial > Integer(0)###line 7205:
    sage: len(sloane.A001358._b) - initial > 0
    NameError: name 'initial' is not defined
**********************************************************************
1 items had failures:






sage -t -long -rand=1 devel/sage/sage/combinat/words/word.py
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/combinat/words/word.py", line 119:
    sage: w
Expected:
    word: 2,1,3,12
Got:
    word: 2-1-3-12
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/combinat/words/word.py", line 837:
    sage: Words(range(1000))([0,1,10,101]).__str__()
Expected:
    'word: 0,1,10,101'
Got:
    'word: 0-1-10-101'
**********************************************************************
2 items had failures:
   1 of  10 in __main__.example_1192818567
   1 of   5 in __main__.example_1949818771
***Test Failed*** 2 failures.







sage -t -long -rand=1 devel/sage/sage/calculus/equations.py
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/calculus/equations.py", line 895:
    sage: bool( x^2 > x )
Expected:
    False
Got:
    True
**********************************************************************
1 items had failures:
   1 of  13 in __main__.example_3038663466
***Test Failed*** 1 failures.








sage -t -long -rand=1 devel/sage/sage/interfaces/r.py
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/interfaces/r.py", line 1071:
    sage: t = a.trait_names()
Expected nothing
Got:
    <BLANKLINE>
    Building R command completion list (this takes
    a few seconds only the first time you do it).
    To force rebuild later, delete /scratch/wstein/sage//r_commandlist.sobj.
**********************************************************************
1 items had failures:
   1 of   5 in __main__.example_1346836858







sage -t -long -rand=1 devel/sage/sage/interfaces/singular.py**********************************************************************File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/interfaces/singular.py", line 988:    sage: singular.trait_names()Expected:    ['headStand',     ...     'stdfglm']Got:    ['pause', 'writelist', 'tab', 'split', 'showrecursive', 'show', 'rMacaulay', 'pmat', 'lprint', 'allprint', 'newtonDiag', 'subrInterred', 'id2mod', 'mod2id', 'denominator', 'numerator', 'content', 'lcm', 'rad_con', 'normalize', 'mindeg1', 'mindeg', 'maxdeg1', 'maxdeg', 'maxcoef', 'is_zero', 'freerank', 'kat_var', 'katsura', 'cyclic', 'substitute', 'hilbPoly', 'select1', 'select', 'sat', 'nselect', 'elim1', 'elim', 'blowup0', 'triangMH', 'triangM', 'triangLfak', 'triangL', 'absFactorize', 'newZero_decom

[[tons of other issues due to bad doctests]]







sage -t -long -rand=1 devel/sage/sage/interfaces/maxima.py
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/interfaces/maxima.py", line 1872:
    sage: f.diff('x')
Expected:
    34*y*'diff(y,x,1)+2*x
Got:
    2*x
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/interfaces/maxima.py", line 1602:
    sage: f = maxima('1/(x-1)^3'); f
Expected:
    1/(x-1)^3
Got:
    1
And *NUMEROUS* other issues!!










sage -t -long -rand=1 devel/sage/sage/combinat/partition.py
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/combinat/partition.py", line 2372:
    sage: RestrictedPartitions(5,[3,2,1]).__repr__()
Expected:
    doctest:...: DeprecationWarning: RestrictedPartitions is deprecated; use Partitions with the parts_in keyword instead.
    'Partitions of 5 restricted to the values [1, 2, 3] '
Got:
    doctest:1: DeprecationWarning: RestrictedPartitions is deprecated; use Partitions with the parts_in keyword instead.
    doctest:2324: DeprecationWarning: RestrictedPartitions_nsk is deprecated; use Partitions with the parts_in keyword instead.
    'Partitions of 5 restricted to the values [1, 2, 3] '

[[and more]]





sage -t -long -rand=1 devel/sage/sage/calculus/calculus.py
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/calculus/calculus.py", line 8211:
    sage: latex(factorial(x))
Exception raised:
    Traceback (most recent call last):
      File "/scratch/wstein/build/sage-3.4.1.rc3/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/scratch/wstein/build/sage-3.4.1.rc3/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/scratch/wstein/build/sage-3.4.1.rc3/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_2333006911[2]>", line 1, in <module>
        latex(factorial(x))###line 8211:
    sage: latex(factorial(x))
      File "/scratch/wstein/build/sage-3.4.1.rc3/local/lib/python2.5/site-packages/sage/calculus/calculus.py", line 8249, in __call__
        return factorial(n, **kwds)
      File "/scratch/wstein/build/sage-3.4.1.rc3/local/lib/python2.5/site-packages/sage/rings/arith.py", line 328, in factorial
        raise ValueError, "factorial -- must be nonnegative"
    ValueError: factorial -- must be nonnegative

(not much more)







sage -t -long -rand=1 devel/sage/sage/server/notebook/worksheet.py
**********************************************************************
File "/scratch/wstein/build/sage-3.4.1.rc3/devel/sage-main/sage/server/notebook/worksheet.py", line 147:
    sage: sage.server.notebook.worksheet._a_sage
Expected nothing
Got:
    Sage
**********************************************************************
1 items had failures:
   1 of   5 in __main__.example_3577862625






The following tests failed:

        sage -t -long -rand=1 devel/sage/sage/modular/modform/space.py # 1 doctests failed
        sage -t -long -rand=1 devel/sage/sage/misc/session.pyx # 1 doctests failed
        sage -t -long -rand=1 devel/sage/sage/misc/latex.py # 17 doctests failed
        sage -t -long -rand=1 devel/sage/sage/libs/pari/gen.pyx # 1 doctests failed
        sage -t -long -rand=1 devel/sage/sage/misc/randstate.pyx # 1 doctests failed
        sage -t -long -rand=1 devel/sage/sage/rings/real_rqdf.pyx # 2 doctests failed
        sage -t -long -rand=1 devel/sage/sage/libs/fplll/fplll.pyx # 5 doctests failed
        sage -t -long -rand=1 devel/sage/sage/rings/polynomial/polynomial_modn_dense_ntl.pyx # 1 doctests failed
        sage -t -long -rand=1 devel/sage/sage/rings/polynomial/polynomial_element.pyx # 2 doctests failed
        sage -t -long -rand=1 devel/sage/sage/combinat/sloane_functions.py # 2 doctests failed
        sage -t -long -rand=1 devel/sage/sage/combinat/words/word.py # 2 doctests failed
        sage -t -long -rand=1 devel/sage/sage/calculus/equations.py # 1 doctests failed
        sage -t -long -rand=1 devel/sage/sage/interfaces/r.py # 1 doctests failed
        sage -t -long -rand=1 devel/sage/sage/interfaces/singular.py # 6 doctests failed
        sage -t -long -rand=1 devel/sage/sage/interfaces/maxima.py # 14 doctests failed
        sage -t -long -rand=1 devel/sage/sage/combinat/partition.py # 2 doctests failed
        sage -t -long -rand=1 devel/sage/sage/calculus/calculus.py # 5 doctests failed
        sage -t -long -rand=1 devel/sage/sage/server/notebook/worksheet.py # 1 doctests failed
----------------------------------------------------------------------




```



---

archive/issue_comments_038508.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nGreat work!  I like the ability to do this optionally, and of course with a reproducible seed.  Motivating discussion at http://groups.google.com/group/sage-devel/browse_thread/thread/320845a4c9b9c75f",
    "created_at": "2009-04-18T23:52:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5816#issuecomment-38508",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:3'>Comment 3:</a>
Great work!  I like the ability to do this optionally, and of course with a reproducible seed.  Motivating discussion at http://groups.google.com/group/sage-devel/browse_thread/thread/320845a4c9b9c75f



---

archive/issue_comments_038509.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nReplying to [@rbeezer](#comment%3A3):\n> Great work!  I like the ability to do this optionally, and of course with a reproducible seed.  \n\nHi Rob, this sounds like a positive review. Is it one? In that case you should change the summary.\n\nCheers,\n\nMichael",
    "created_at": "2009-04-18T23:59:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5816#issuecomment-38509",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:4'>Comment 4:</a>
Replying to [@rbeezer](#comment%3A3):
> Great work!  I like the ability to do this optionally, and of course with a reproducible seed.  

Hi Rob, this sounds like a positive review. Is it one? In that case you should change the summary.

Cheers,

Michael



---

archive/issue_comments_038510.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nI like the patch, except for one major and one minor issue:\n\nMajor: I can't positively review a patch where doctests fail after the patch is applied. I'm not sure what's the right thing to do here; I'm going to post on sage-devel.\n\nMinor: I don't like the name of the command-line argument (I would guess that \"-rand\" would set the random seed for each doctest, or something). How about -randorder instead?",
    "created_at": "2009-04-19T00:02:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5816#issuecomment-38510",
    "user": "https://github.com/sagetrac-cwitty"
}
```

<a id='comment:5'>Comment 5:</a>
I like the patch, except for one major and one minor issue:

Major: I can't positively review a patch where doctests fail after the patch is applied. I'm not sure what's the right thing to do here; I'm going to post on sage-devel.

Minor: I don't like the name of the command-line argument (I would guess that "-rand" would set the random seed for each doctest, or something). How about -randorder instead?



---

archive/issue_events_060620.json:
```json
{
    "actor": "https://github.com/sagetrac-cwitty",
    "created_at": "2009-04-19T00:02:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5816",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5816#event-60620"
}
```



---

archive/issue_comments_038511.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nWell, given the above I am bumping it to 3.4.2. There are bugs in doctests being exposed here, but short of a patch that fixes all those issues I don't think delaying 3.4.1 for this patch will be worth it.\n\nCheers,\n\nMichael",
    "created_at": "2009-04-19T00:08:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5816#issuecomment-38511",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:6'>Comment 6:</a>
Well, given the above I am bumping it to 3.4.2. There are bugs in doctests being exposed here, but short of a patch that fixes all those issues I don't think delaying 3.4.1 for this patch will be worth it.

Cheers,

Michael



---

archive/issue_events_060621.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-04-19T00:08:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5816",
    "milestone_number": null,
    "milestone_title": "sage-3.4.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5816#event-60621"
}
```



---

archive/issue_events_060622.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-04-19T00:08:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5816",
    "milestone_number": null,
    "milestone_title": "sage-3.4.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5816#event-60622"
}
```



---

archive/issue_comments_038512.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nReplying to [mabshoff](#comment%3A4):\n> Hi Rob, this sounds like a positive review. Is it one? In that case you should change the summary.\n\nHi Michael,\n\nI wanted to wait for someone like Carl to weigh in, so I didn't mean my comments to be a positive review (just enthusiasm!).  I meant to restrict my comments to functionality, and not the code itself.  ;-)  I'm glad William did this so quickly, but I think I agree with your decision not to hold up releases for it.\n\nRob",
    "created_at": "2009-04-19T00:11:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5816#issuecomment-38512",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:7'>Comment 7:</a>
Replying to [mabshoff](#comment%3A4):
> Hi Rob, this sounds like a positive review. Is it one? In that case you should change the summary.

Hi Michael,

I wanted to wait for someone like Carl to weigh in, so I didn't mean my comments to be a positive review (just enthusiasm!).  I meant to restrict my comments to functionality, and not the code itself.  ;-)  I'm glad William did this so quickly, but I think I agree with your decision not to hold up releases for it.

Rob



---

archive/issue_comments_038513.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nReplying to [cwitty](#comment%3A5):\n> I like the patch, except for one major and one minor issue:\n> \n> Major: I can't positively review a patch where doctests fail after the patch is applied. I'm not sure what's the right thing to do here; I'm going to post on sage-devel.\n> \n\nYep, that's a bit of an issue.  I will make it run with no changes (\"traditional mode\") if one doesn't pass the -randorder option. \n\n> Minor: I don't like the name of the command-line argument (I would guess that \"-rand\" would set the random seed for each doctest, or something). How about -randorder instead?\n\nI like randorder better too.  I'll make a patch to change it to that.",
    "created_at": "2009-04-19T00:16:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5816#issuecomment-38513",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:8'>Comment 8:</a>
Replying to [cwitty](#comment%3A5):
> I like the patch, except for one major and one minor issue:
> 
> Major: I can't positively review a patch where doctests fail after the patch is applied. I'm not sure what's the right thing to do here; I'm going to post on sage-devel.
> 

Yep, that's a bit of an issue.  I will make it run with no changes ("traditional mode") if one doesn't pass the -randorder option. 

> Minor: I don't like the name of the command-line argument (I would guess that "-rand" would set the random seed for each doctest, or something). How about -randorder instead?

I like randorder better too.  I'll make a patch to change it to that.



---

archive/issue_comments_038514.json:
```json
{
    "body": "Attachment: **[trac_scripts-5816-part2.patch.gz](https://github.com/sagemath/sage/files/ticket5816/trac_scripts-5816-part2.patch.gz)**\n\nthis fixes a bug (before it always ran in random order), changes to -randorder, and makes it so not giving the option uses the \"traditional\" order.",
    "created_at": "2009-04-19T00:17:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5816#issuecomment-38514",
    "user": "https://github.com/williamstein"
}
```

Attachment: **[trac_scripts-5816-part2.patch.gz](https://github.com/sagemath/sage/files/ticket5816/trac_scripts-5816-part2.patch.gz)**

this fixes a bug (before it always ran in random order), changes to -randorder, and makes it so not giving the option uses the "traditional" order.



---

archive/issue_events_060623.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-04-19T00:19:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5816",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5816#event-60623"
}
```



---

archive/issue_events_060624.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-04-19T00:19:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5816",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5816#event-60624"
}
```



---

archive/issue_events_060625.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-04-19T00:19:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5816",
    "milestone_number": null,
    "milestone_title": "sage-3.4.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5816#event-60625"
}
```



---

archive/issue_events_060626.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-04-19T00:19:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5816",
    "milestone_number": null,
    "milestone_title": "sage-3.4.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5816#event-60626"
}
```



---

archive/issue_comments_038515.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nWith this patch applied we have\n\n```\n./sage -tp 30 devel/sage/sage/ \n...\n----------------------------------------------------------------------\nAll tests passed!\nTimings have been updated.\nTotal time for all tests: 181.0 seconds\n```\n\non sage.math with sage-3.4.1.rc3.",
    "created_at": "2009-04-19T00:21:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5816#issuecomment-38515",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:10'>Comment 10:</a>
With this patch applied we have

```
./sage -tp 30 devel/sage/sage/ 
...
----------------------------------------------------------------------
All tests passed!
Timings have been updated.
Total time for all tests: 181.0 seconds
```

on sage.math with sage-3.4.1.rc3.



---

archive/issue_comments_038516.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nReplying to [@williamstein](#comment%3A8):\n> I will make it run with no changes (\"traditional mode\") if one doesn't pass the -randorder option. \n\nI think that is a great approach (which I just advocated for on sage-devel).",
    "created_at": "2009-04-19T00:24:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5816#issuecomment-38516",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:11'>Comment 11:</a>
Replying to [@williamstein](#comment%3A8):
> I will make it run with no changes ("traditional mode") if one doesn't pass the -randorder option. 

I think that is a great approach (which I just advocated for on sage-devel).



---

archive/issue_comments_038517.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nCode looks good, doctests pass without randorder, doctests fail unpredictably with randorder, doctests fail repeatably with randorder=N... it's all good :)\n\nPositive review.  Apply both patches (to the scripts repository).",
    "created_at": "2009-04-19T01:59:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5816#issuecomment-38517",
    "user": "https://github.com/sagetrac-cwitty"
}
```

<a id='comment:12'>Comment 12:</a>
Code looks good, doctests pass without randorder, doctests fail unpredictably with randorder, doctests fail repeatably with randorder=N... it's all good :)

Positive review.  Apply both patches (to the scripts repository).



---

archive/issue_events_060627.json:
```json
{
    "actor": "https://github.com/sagetrac-cwitty",
    "created_at": "2009-04-19T01:59:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5816",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5816#event-60627"
}
```



---

archive/issue_events_060628.json:
```json
{
    "actor": "https://github.com/sagetrac-cwitty",
    "created_at": "2009-04-19T01:59:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5816",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5816#event-60628"
}
```



---

archive/issue_comments_038518.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nMerged both patches in Sage 3.4.1.rc4.\n\nCheers,\n\nMichael",
    "created_at": "2009-04-19T02:08:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5816#issuecomment-38518",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:13'>Comment 13:</a>
Merged both patches in Sage 3.4.1.rc4.

Cheers,

Michael



---

archive/issue_events_060629.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-04-19T02:08:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5816",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5816#event-60629"
}
```



---

archive/issue_events_060630.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-04-19T02:08:31Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/5816",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5816#event-60630"
}
```
