# Issue 5854: Include Michael Stoll's ratpoints in Sage

archive/issues_005854.json:
```json
{
    "assignees": [
        "https://github.com/williamstein"
    ],
    "body": "The spkg is located here:\n\nhttp://sage.math.washington.edu/home/rlmill/ratpoints-2.1.2.spkg\n\nVote for standard inclusion is here:\n\nhttp://groups.google.com/group/sage-devel/browse_thread/thread/caab63b6dac361c4\n\nCC:  @JohnCremona\n\nComponent: **number theory**\n\nAuthor: **Robert Miller, Michael Stoll**\n\nReviewer: **John Cremona**\n\nMerged: **sage-4.1.rc0**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/5854_\n\n",
    "closed_at": "2009-07-02T22:00:28Z",
    "created_at": "2009-04-22T15:17:52Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20number%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Include Michael Stoll's ratpoints in Sage",
    "type": "issue",
    "updated_at": "2009-07-02T22:00:28Z",
    "url": "https://github.com/sagemath/sage/issues/5854",
    "user": "https://github.com/rlmill"
}
```
The spkg is located here:

http://sage.math.washington.edu/home/rlmill/ratpoints-2.1.2.spkg

Vote for standard inclusion is here:

http://groups.google.com/group/sage-devel/browse_thread/thread/caab63b6dac361c4

CC:  @JohnCremona

Component: **number theory**

Author: **Robert Miller, Michael Stoll**

Reviewer: **John Cremona**

Merged: **sage-4.1.rc0**

_Issue created by migration from https://trac.sagemath.org/ticket/5854_





---

archive/issue_events_069890.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2009-04-22T15:17:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "milestone_number": null,
    "milestone_title": "sage-4.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5854#event-69890"
}
```



---

archive/issue_events_069891.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2009-04-22T15:17:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20number%20theory",
    "label_color": "0000ff",
    "label_name": "c: number theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5854#event-69891"
}
```



---

archive/issue_events_069892.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2009-04-22T15:17:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5854#event-69892"
}
```



---

archive/issue_events_069893.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2009-04-22T15:17:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5854#event-69893"
}
```



---

archive/issue_events_069894.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-04-22T15:17:52Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "subject": "https://github.com/rlmill",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5854#event-69894"
}
```



---

archive/issue_events_069895.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2009-04-22T15:17:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5854#event-69895"
}
```



---

archive/issue_comments_037688.json:
```json
{
    "body": "Attachment: **[trac_5854-ratpoints.patch.gz](https://github.com/sagemath/sage/files/ticket5854/trac_5854-ratpoints.patch.gz)**",
    "created_at": "2009-04-22T15:18:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5854#issuecomment-37688",
    "user": "https://github.com/rlmill"
}
```

Attachment: **[trac_5854-ratpoints.patch.gz](https://github.com/sagemath/sage/files/ticket5854/trac_5854-ratpoints.patch.gz)**



---

archive/issue_comments_037689.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThis spkg needs a formal vote and some more widespread testing. I am also curious about the MSVC build, but we can try that in person.\n\nCheers,\n\nMichael",
    "created_at": "2009-04-22T18:49:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5854#issuecomment-37689",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:1" align="right">comment:1</div>

This spkg needs a formal vote and some more widespread testing. I am also curious about the MSVC build, but we can try that in person.

Cheers,

Michael



---

archive/issue_comments_037690.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nAnother thing: Why is the dependency on the header commented out?:\n\n```\n \t386\t    Extension('sage.libs.ratpoints', \n \t387\t              sources = [\"sage/libs/ratpoints.pyx\"], \n \t388\t              #depends = [SAGE_ROOT + 'local/include/ratpoints.h'], \n \t389\t              libraries = [\"ratpoints\", \"gmp\"]),\n```\nAnd another question: What is the long term plan here with eclib? Will it use ratpoints in the future?\n\nCheers,\n\nMichael",
    "created_at": "2009-04-22T18:52:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5854#issuecomment-37690",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:2" align="right">comment:2</div>

Another thing: Why is the dependency on the header commented out?:

```
 	386	    Extension('sage.libs.ratpoints', 
 	387	              sources = ["sage/libs/ratpoints.pyx"], 
 	388	              #depends = [SAGE_ROOT + 'local/include/ratpoints.h'], 
 	389	              libraries = ["ratpoints", "gmp"]),
```
And another question: What is the long term plan here with eclib? Will it use ratpoints in the future?

Cheers,

Michael



---

archive/issue_comments_037691.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nAnd while I am at it:\n\n* SPKG.txt is missing the license section. Since the code is GPL V2+ again now it would be nice to mention\n* src is under version control - any reason to do that in the spkg since this should be clean upstream? Given the size I don't mind too much, but it is unusual.  \n* there is one PDF in src that isn't in the repo - in case we want src under hg you should put that PDF in .hgignore.\n\nCheers,\n\nMichael",
    "created_at": "2009-04-22T19:16:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5854#issuecomment-37691",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:3" align="right">comment:3</div>

And while I am at it:

* SPKG.txt is missing the license section. Since the code is GPL V2+ again now it would be nice to mention
* src is under version control - any reason to do that in the spkg since this should be clean upstream? Given the size I don't mind too much, but it is unusual.  
* there is one PDF in src that isn't in the repo - in case we want src under hg you should put that PDF in .hgignore.

Cheers,

Michael



---

archive/issue_comments_037692.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\n* SPKG.txt was based directly on the one for eclib, so anything wrong with this one will be wrong with that one too.\n  * `src` was under version control originally because I found a bug and fixed it, but Michael Stoll has merged that fix upstream. I suppose there's no reason now.\n  * The depends line is commented out to demonstrate that it is automatically picked up somewhere, and thus not needed...",
    "created_at": "2009-04-22T20:46:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5854#issuecomment-37692",
    "user": "https://github.com/rlmill"
}
```

<div id="comment:4" align="right">comment:4</div>

* SPKG.txt was based directly on the one for eclib, so anything wrong with this one will be wrong with that one too.
  * `src` was under version control originally because I found a bug and fixed it, but Michael Stoll has merged that fix upstream. I suppose there's no reason now.
  * The depends line is commented out to demonstrate that it is automatically picked up somewhere, and thus not needed...



---

archive/issue_comments_037693.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@rlmill](#comment:4):\n> * SPKG.txt was based directly on the one for eclib, so anything wrong with this one will be wrong with that one too.\n\nYes, that needs to be fixed, too.\n\n> * `src` was under version control originally because I found a bug and fixed it, but Michael Stoll has merged that fix upstream. I suppose there's no reason now.\n\nGood. Can you post an SPKG that has a clean .hg and .hgignore, i.e. just get rid of the old .hg and check the relevant bits back in again.\n\n>    * The depends line is commented out to demonstrate that it is automatically picked up somewhere, and thus not needed...\n\nHmmm, does rebuilding the spkg lead to \"sage -b\" rebuilding the extension? That does surprise me and I would be curious what this triggers.\n\nCheers,\n\nMichael",
    "created_at": "2009-04-22T21:47:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5854#issuecomment-37693",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@rlmill](#comment:4):
> * SPKG.txt was based directly on the one for eclib, so anything wrong with this one will be wrong with that one too.

Yes, that needs to be fixed, too.

> * `src` was under version control originally because I found a bug and fixed it, but Michael Stoll has merged that fix upstream. I suppose there's no reason now.

Good. Can you post an SPKG that has a clean .hg and .hgignore, i.e. just get rid of the old .hg and check the relevant bits back in again.

>    * The depends line is commented out to demonstrate that it is automatically picked up somewhere, and thus not needed...

Hmmm, does rebuilding the spkg lead to "sage -b" rebuilding the extension? That does surprise me and I would be curious what this triggers.

Cheers,

Michael



---

archive/issue_comments_037694.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nSince this ticket is relevant to eclib (I believe in sage-nt John mentioned that he had looked into using ratpoints from eclib again and that the current library interface worked, but my collection is a little hazy here) I am CCing him to keep him uptodate on this development. Once ratpoints is in Sage I consider it desirable to use the library from eclib unless there is some unforeseen technical reason not to do it.\n\nCheers,\n\nMichael",
    "created_at": "2009-04-22T21:50:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5854#issuecomment-37694",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:6" align="right">comment:6</div>

Since this ticket is relevant to eclib (I believe in sage-nt John mentioned that he had looked into using ratpoints from eclib again and that the current library interface worked, but my collection is a little hazy here) I am CCing him to keep him uptodate on this development. Once ratpoints is in Sage I consider it desirable to use the library from eclib unless there is some unforeseen technical reason not to do it.

Cheers,

Michael



---

archive/issue_comments_037695.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@sagetrac-mabshoff](#comment:6):\n> Since this ticket is relevant to eclib (I believe in sage-nt John mentioned that he had looked into using ratpoints from eclib again and that the current library interface worked, but my collection is a little hazy here) I am CCing him to keep him uptodate on this development. Once ratpoints is in Sage I consider it desirable to use the library from eclib unless there is some unforeseen technical reason not to do it.\n> \n> Cheers,\n> \n> Michael\n\nThanks.  It is not quite as easy as that, and one part of eclib will need to be rewritten to use this library, but it has all the ingredients which I needs so that is possible and would only take a day or too.  That would also mean that *either* I put in a compiler switch to eclib Makefiles to tell it to use ratpoints instead of its own code, *or* I rely on ratpoints for ever, which gives people who download mwrank by itself will have something else they need to install first (as well as NTL and pari).",
    "created_at": "2009-04-23T08:27:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5854#issuecomment-37695",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@sagetrac-mabshoff](#comment:6):
> Since this ticket is relevant to eclib (I believe in sage-nt John mentioned that he had looked into using ratpoints from eclib again and that the current library interface worked, but my collection is a little hazy here) I am CCing him to keep him uptodate on this development. Once ratpoints is in Sage I consider it desirable to use the library from eclib unless there is some unforeseen technical reason not to do it.
> 
> Cheers,
> 
> Michael

Thanks.  It is not quite as easy as that, and one part of eclib will need to be rewritten to use this library, but it has all the ingredients which I needs so that is possible and would only take a day or too.  That would also mean that *either* I put in a compiler switch to eclib Makefiles to tell it to use ratpoints instead of its own code, *or* I rely on ratpoints for ever, which gives people who download mwrank by itself will have something else they need to install first (as well as NTL and pari).



---

archive/issue_comments_037696.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nWhat is the correct procedure for testing this.  Is it: (1) install the spkg using \"sage -f\" (2) apply the patch to a clone and do \"sage -b\" (3) do a \"sage -t\" on sage/libs/ratpoints.pyx (and try the functions in there at will) ?",
    "created_at": "2009-04-29T11:46:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5854#issuecomment-37696",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:8" align="right">comment:8</div>

What is the correct procedure for testing this.  Is it: (1) install the spkg using "sage -f" (2) apply the patch to a clone and do "sage -b" (3) do a "sage -t" on sage/libs/ratpoints.pyx (and try the functions in there at will) ?



---

archive/issue_comments_037697.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@JohnCremona](#comment:8):\n\nMostly:\n\n> (and try the functions in there at will) ?\n\nSomeone should run a valgrind session to check my code and Michael Stoll's code both for leaks. I'll try to get to this today or tomorrow.",
    "created_at": "2009-04-29T14:53:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5854#issuecomment-37697",
    "user": "https://github.com/rlmill"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@JohnCremona](#comment:8):

Mostly:

> (and try the functions in there at will) ?

Someone should run a valgrind session to check my code and Michael Stoll's code both for leaks. I'll try to get to this today or tomorrow.



---

archive/issue_comments_037698.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nPartial review:  I ran valgrind on ratpoints's own test function and it does reasonably well:\n\n```\nmasgaj@host-56-150%valgrind ./rptest > rptest.out\n==4873== Memcheck, a memory error detector.\n==4873== Copyright (C) 2002-2007, and GNU GPL'd, by Julian Seward et al.\n==4873== Using LibVEX rev 1804, a library for dynamic binary translation.\n==4873== Copyright (C) 2004-2007, and GNU GPL'd, by OpenWorks LLP.\n==4873== Using valgrind-3.3.0, a dynamic binary instrumentation framework.\n==4873== Copyright (C) 2000-2007, and GNU GPL'd, by Julian Seward et al.\n==4873== For more details, rerun with: -v\n==4873==\n==4873==\n==4873== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 5 from 1)\n==4873== malloc/free: in use at exit: 11,204 bytes in 44 blocks.\n==4873== malloc/free: 91,051 allocs, 91,007 frees, 2,895,144 bytes allocated.\n==4873== For counts of detected errors, rerun with: -v\n==4873== searching for pointers to 44 not-freed blocks.\n==4873== checked 128,328 bytes.\n==4873==\n==4873== LEAK SUMMARY:\n==4873==    definitely lost: 11,176 bytes in 37 blocks.\n==4873==      possibly lost: 0 bytes in 0 blocks.\n==4873==    still reachable: 28 bytes in 7 blocks.\n==4873==         suppressed: 0 bytes in 0 blocks.\n==4873== Rerun with --leak-check=full to see details of leaked memory.\n```\n\nPerhaps Michael (A) can say whether the leak is significant?  If so we could ask Michael (S) to fix it.",
    "created_at": "2009-04-29T15:54:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5854#issuecomment-37698",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:10" align="right">comment:10</div>

Partial review:  I ran valgrind on ratpoints's own test function and it does reasonably well:

```
masgaj@host-56-150%valgrind ./rptest > rptest.out
==4873== Memcheck, a memory error detector.
==4873== Copyright (C) 2002-2007, and GNU GPL'd, by Julian Seward et al.
==4873== Using LibVEX rev 1804, a library for dynamic binary translation.
==4873== Copyright (C) 2004-2007, and GNU GPL'd, by OpenWorks LLP.
==4873== Using valgrind-3.3.0, a dynamic binary instrumentation framework.
==4873== Copyright (C) 2000-2007, and GNU GPL'd, by Julian Seward et al.
==4873== For more details, rerun with: -v
==4873==
==4873==
==4873== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 5 from 1)
==4873== malloc/free: in use at exit: 11,204 bytes in 44 blocks.
==4873== malloc/free: 91,051 allocs, 91,007 frees, 2,895,144 bytes allocated.
==4873== For counts of detected errors, rerun with: -v
==4873== searching for pointers to 44 not-freed blocks.
==4873== checked 128,328 bytes.
==4873==
==4873== LEAK SUMMARY:
==4873==    definitely lost: 11,176 bytes in 37 blocks.
==4873==      possibly lost: 0 bytes in 0 blocks.
==4873==    still reachable: 28 bytes in 7 blocks.
==4873==         suppressed: 0 bytes in 0 blocks.
==4873== Rerun with --leak-check=full to see details of leaked memory.
```

Perhaps Michael (A) can say whether the leak is significant?  If so we could ask Michael (S) to fix it.



---

archive/issue_comments_037699.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nJohn,\n\nSince you've been using Michael Stoll's test suite, do you think you could make an `spkg-check` for this spkg which runs these?",
    "created_at": "2009-04-29T15:59:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5854#issuecomment-37699",
    "user": "https://github.com/rlmill"
}
```

<div id="comment:11" align="right">comment:11</div>

John,

Since you've been using Michael Stoll's test suite, do you think you could make an `spkg-check` for this spkg which runs these?



---

archive/issue_comments_037700.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nPS - Any leaks in \"definitely lost\" is never good...\n\nCan you attach/link to the full valgrind logs?",
    "created_at": "2009-04-29T16:02:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5854#issuecomment-37700",
    "user": "https://github.com/rlmill"
}
```

<div id="comment:12" align="right">comment:12</div>

PS - Any leaks in "definitely lost" is never good...

Can you attach/link to the full valgrind logs?



---

archive/issue_comments_037701.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@rlmill](#comment:12):\n> PS - Any leaks in \"definitely lost\" is never good...\n> \n> Can you attach/link to the full valgrind logs?\n\nI will if you tell me what flags to put on the valgrind command line....",
    "created_at": "2009-04-29T16:15:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5854#issuecomment-37701",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@rlmill](#comment:12):
> PS - Any leaks in "definitely lost" is never good...
> 
> Can you attach/link to the full valgrind logs?

I will if you tell me what flags to put on the valgrind command line....



---

archive/issue_comments_037702.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nBuild works on Sage-3.4.2, but not on Sage-4.0.alpha0. Build log is attached.",
    "created_at": "2009-05-21T15:52:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5854#issuecomment-37702",
    "user": "https://github.com/rlmill"
}
```

<div id="comment:14" align="right">comment:14</div>

Build works on Sage-3.4.2, but not on Sage-4.0.alpha0. Build log is attached.



---

archive/issue_comments_037703.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThe build issues seem resolved in Sage-4.0.rc0.",
    "created_at": "2009-05-22T05:55:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5854#issuecomment-37703",
    "user": "https://github.com/rlmill"
}
```

<div id="comment:15" align="right">comment:15</div>

The build issues seem resolved in Sage-4.0.rc0.



---

archive/issue_comments_037704.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,4 +4,6 @@\n \n (The final version for review was created 22 April 2009-- there were previous versions by the same file name, but this one can be identified as the one possessing an SPKG.txt file.)\n \n+Vote for standard inclusion is here:\n \n+http://groups.google.com/group/sage-devel/browse_thread/thread/caab63b6dac361c4\n``````\n",
    "created_at": "2009-05-22T07:09:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5854#issuecomment-37704",
    "user": "https://github.com/rlmill"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,4 +4,6 @@
 
 (The final version for review was created 22 April 2009-- there were previous versions by the same file name, but this one can be identified as the one possessing an SPKG.txt file.)
 
+Vote for standard inclusion is here:
 
+http://groups.google.com/group/sage-devel/browse_thread/thread/caab63b6dac361c4
``````




---

archive/issue_events_069896.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2009-06-19T20:24:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5854#event-69896"
}
```



---

archive/issue_comments_037705.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nI checked that the spkg installs fine on 4.0.2 and the patch applies and tests pass.\n\nThere were some other issues raised by mabshoff, but as I am not an expert on spkgs I do not know if these are enough to stop the ticket from being merged.  So I am giving it a positive review.",
    "created_at": "2009-06-19T20:24:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5854#issuecomment-37705",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:17" align="right">comment:17</div>

I checked that the spkg installs fine on 4.0.2 and the patch applies and tests pass.

There were some other issues raised by mabshoff, but as I am not an expert on spkgs I do not know if these are enough to stop the ticket from being merged.  So I am giving it a positive review.



---

archive/issue_comments_037706.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nWait, there are still memory leaks in 2.1.1. I will update the spkg to 2.1.2 (which fixes the leaks we found at Dagstuhl) in the next few days, once I get some time to do so.",
    "created_at": "2009-06-19T21:34:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5854#issuecomment-37706",
    "user": "https://github.com/rlmill"
}
```

<div id="comment:18" align="right">comment:18</div>

Wait, there are still memory leaks in 2.1.1. I will update the spkg to 2.1.2 (which fixes the leaks we found at Dagstuhl) in the next few days, once I get some time to do so.



---

archive/issue_events_069897.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2009-06-19T21:34:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5854#event-69897"
}
```



---

archive/issue_events_069898.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2009-06-19T21:34:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5854#event-69898"
}
```



---

archive/issue_comments_037707.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nLatest version is at:\n\nhttp://sage.math.washington.edu/home/rlmill/ratpoints-2.1.2.spkg\n\nIt also addresses the issues raised by mabshoff.\n\nJohn-- Can you sign off on this?",
    "created_at": "2009-06-19T23:20:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5854#issuecomment-37707",
    "user": "https://github.com/rlmill"
}
```

<div id="comment:19" align="right">comment:19</div>

Latest version is at:

http://sage.math.washington.edu/home/rlmill/ratpoints-2.1.2.spkg

It also addresses the issues raised by mabshoff.

John-- Can you sign off on this?



---

archive/issue_comments_037708.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,6 @@\n The spkg is located here:\n \n-http://sage.math.washington.edu/home/rlmill/ratpoints-2.1.1.spkg\n-\n-(The final version for review was created 22 April 2009-- there were previous versions by the same file name, but this one can be identified as the one possessing an SPKG.txt file.)\n+http://sage.math.washington.edu/home/rlmill/ratpoints-2.1.2.spkg\n \n Vote for standard inclusion is here:\n \n``````\n",
    "created_at": "2009-06-19T23:20:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5854#issuecomment-37708",
    "user": "https://github.com/rlmill"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,6 @@
 The spkg is located here:
 
-http://sage.math.washington.edu/home/rlmill/ratpoints-2.1.1.spkg
-
-(The final version for review was created 22 April 2009-- there were previous versions by the same file name, but this one can be identified as the one possessing an SPKG.txt file.)
+http://sage.math.washington.edu/home/rlmill/ratpoints-2.1.2.spkg
 
 Vote for standard inclusion is here:
 
``````




---

archive/issue_events_069899.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2009-06-19T23:20:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5854#event-69899"
}
```



---

archive/issue_events_069900.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2009-06-19T23:20:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5854#event-69900"
}
```



---

archive/issue_comments_037709.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nNew spkg built fine for me, and the patch passed tests.",
    "created_at": "2009-06-20T08:57:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5854#issuecomment-37709",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:20" align="right">comment:20</div>

New spkg built fine for me, and the patch passed tests.



---

archive/issue_events_069901.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2009-06-20T08:57:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5854#event-69901"
}
```



---

archive/issue_events_069902.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2009-06-20T08:57:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5854#event-69902"
}
```



---

archive/issue_comments_037710.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nI have been using this for real as I try to fix #6381, since this should make it very much faster to find integral points in an interval.  But for that we need to expose the parameter b_high to the sage function ratpoints().  So I am adding to the patch to allow this.",
    "created_at": "2009-06-22T14:10:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5854#issuecomment-37710",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:21" align="right">comment:21</div>

I have been using this for real as I try to fix #6381, since this should make it very much faster to find integral points in an interval.  But for that we need to expose the parameter b_high to the sage function ratpoints().  So I am adding to the patch to allow this.



---

archive/issue_events_069903.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2009-07-02T22:00:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5854#event-69903"
}
```



---

archive/issue_events_069904.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2009-07-02T22:00:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5854#event-69904"
}
```



---

archive/issue_comments_037711.json:
```json
{
    "body": "Reviewer: **John Cremona**",
    "created_at": "2009-07-02T22:00:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5854#issuecomment-37711",
    "user": "https://github.com/rlmill"
}
```

Reviewer: **John Cremona**



---

archive/issue_comments_037712.json:
```json
{
    "body": "Author: **Robert Miller, Michael Stoll**",
    "created_at": "2009-07-02T22:00:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5854#issuecomment-37712",
    "user": "https://github.com/rlmill"
}
```

Author: **Robert Miller, Michael Stoll**



---

archive/issue_comments_037713.json:
```json
{
    "body": "Merged: **sage-4.1.rc0**",
    "created_at": "2009-07-02T22:00:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5854#issuecomment-37713",
    "user": "https://github.com/rlmill"
}
```

Merged: **sage-4.1.rc0**
