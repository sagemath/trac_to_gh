# Issue 5146: implement MPolynomial_ideal.variety() for GF(p) with p > than what Singular supports

archive/issues_005146.json:
```json
{
    "body": "\n```\nR.<x,y> = PolynomialRing(GF(2147483659),order='lex')\nI=ideal([x^3-2*y^2,3*x+y^4])\nsage: I.variety()\n...\n   ? `2147483659` greater than 2147483647(max. integer representation)\n   ? error occurred in STDIN line 172: `ring sage86=2147483659,(x, y),lp;`\n   ? expected ring-expression. type 'help ring;'\n```\n\n**Assignee:** @malb\n\n**CC:**  @johnperry-math\n\nIssue created by migration from https://trac.sagemath.org/ticket/5146\n\n",
    "closed_at": "2009-03-26T00:08:41Z",
    "created_at": "2009-01-31T18:06:25Z",
    "labels": [
        "component: commutative algebra",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-3.4.1",
    "title": "implement MPolynomial_ideal.variety() for GF(p) with p > than what Singular supports",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/5146",
    "user": "https://github.com/malb"
}
```

```
R.<x,y> = PolynomialRing(GF(2147483659),order='lex')
I=ideal([x^3-2*y^2,3*x+y^4])
sage: I.variety()
...
   ? `2147483659` greater than 2147483647(max. integer representation)
   ? error occurred in STDIN line 172: `ring sage86=2147483659,(x, y),lp;`
   ? expected ring-expression. type 'help ring;'
```

**Assignee:** @malb

**CC:**  @johnperry-math

Issue created by migration from https://trac.sagemath.org/ticket/5146





---

archive/issue_events_015081.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/5146",
    "rename": {
        "from": "implement MPolynomial_ideal.varierty() for GF(p) with p > than what Singular supports",
        "to": "implement MPolynomial_ideal.variety() for GF(p) with p > than what Singular supports"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5146#event-15081"
}
```



---

archive/issue_events_015082.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2009-02-06T23:00:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/5146",
    "milestone": "sage-3.4.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5146#event-15082"
}
```



---

archive/issue_comments_041976.json:
```json
{
    "body": "<a id='comment:2'></a>\n3.4 is for ReST tickets only.\n\nCheers,\n\nMichael",
    "created_at": "2009-02-06T23:00:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5146#issuecomment-41976",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:2'></a>
3.4 is for ReST tickets only.

Cheers,

Michael



---

archive/issue_comments_041977.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2009-02-21T08:19:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5146#issuecomment-41977",
    "user": "https://github.com/johnperry-math"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_041978.json:
```json
{
    "body": "<a id='comment:3'></a>\nImplementing Lazard's algorithm to solve this required a few subalgorithms as well. Rather than clutter `multi_polynomial_ideal.py`, I appended the functions to `toy_buchberger.py`. That seemed a natural location, since this is a toy implementation, and computing the variety of a zero-dimensional ideal is not an unnatural follow-up to Buchberger's algorithm. That said, if someone prefers that this be placed in `multi_polynomial_ideal.py`, or even in a new file, I can work with that.\n\nThe implementation provided is (unsurprisingly) unoptimized more or less, not even requiring a lexicographic ordering. On the upside, you don't need a lexicographic ordering. Check out the doctest on `triangular_factorization`.\n\nI added doctests for all the new functions in `toy_buchberger.py`, and a new doctest which tests for the system listed above. The patch uploaded passes all the doctests, at least on my machine.",
    "created_at": "2009-02-21T08:19:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5146#issuecomment-41978",
    "user": "https://github.com/johnperry-math"
}
```

<a id='comment:3'></a>
Implementing Lazard's algorithm to solve this required a few subalgorithms as well. Rather than clutter `multi_polynomial_ideal.py`, I appended the functions to `toy_buchberger.py`. That seemed a natural location, since this is a toy implementation, and computing the variety of a zero-dimensional ideal is not an unnatural follow-up to Buchberger's algorithm. That said, if someone prefers that this be placed in `multi_polynomial_ideal.py`, or even in a new file, I can work with that.

The implementation provided is (unsurprisingly) unoptimized more or less, not even requiring a lexicographic ordering. On the upside, you don't need a lexicographic ordering. Check out the doctest on `triangular_factorization`.

I added doctests for all the new functions in `toy_buchberger.py`, and a new doctest which tests for the system listed above. The patch uploaded passes all the doctests, at least on my machine.



---

archive/issue_comments_041979.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [john_perry](#comment%3A3):\n\nHi John,\n\n> Implementing Lazard's algorithm to solve this required a few subalgorithms as well. Rather than clutter `multi_polynomial_ideal.py`, I appended the functions to `toy_buchberger.py`. That seemed a natural location, since this is a toy implementation, and computing the variety of a zero-dimensional ideal is not an unnatural follow-up to Buchberger's algorithm. That said, if someone prefers that this be placed in `multi_polynomial_ideal.py`, or even in a new file, I can work with that.\n\n\nI would suggest to place it in its own file, but maybe Martin should pipe in there, too.\n\nCheers,\n\nMichael",
    "created_at": "2009-02-21T08:21:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5146#issuecomment-41979",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:4'></a>
Replying to [john_perry](#comment%3A3):

Hi John,

> Implementing Lazard's algorithm to solve this required a few subalgorithms as well. Rather than clutter `multi_polynomial_ideal.py`, I appended the functions to `toy_buchberger.py`. That seemed a natural location, since this is a toy implementation, and computing the variety of a zero-dimensional ideal is not an unnatural follow-up to Buchberger's algorithm. That said, if someone prefers that this be placed in `multi_polynomial_ideal.py`, or even in a new file, I can work with that.


I would suggest to place it in its own file, but maybe Martin should pipe in there, too.

Cheers,

Michael



---

archive/attachments_005785.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "variety_patch.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5146/variety_patch.patch",
    "created_at": "2009-02-25T03:18:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5146",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/johnperry-math"
}
```



---

archive/issue_comments_041980.json:
```json
{
    "body": "<a id='comment:5'></a>\nNew version of the patch:\n* Separated functions related to triangularization into a new file, `toy_variety.py`\n\n* Completely rewrote two subalgorithms that check for and express linear dependence between polynomials. Lazard did not specify the details, and I implemented the previous versions in a manner that in no way could be described as intelligent. (Ironically, I'm scheduled to teach introductory linear algebra this summer.) The present version uses basic linear algebra to answer these questions.\n\n* Removed some doctests on the same two functions, because they are now nested. If there is a way to doctest nested functions, let me know, and I'll restore the doctests.",
    "created_at": "2009-02-25T03:18:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5146#issuecomment-41980",
    "user": "https://github.com/johnperry-math"
}
```

<a id='comment:5'></a>
New version of the patch:
* Separated functions related to triangularization into a new file, `toy_variety.py`

* Completely rewrote two subalgorithms that check for and express linear dependence between polynomials. Lazard did not specify the details, and I implemented the previous versions in a manner that in no way could be described as intelligent. (Ironically, I'm scheduled to teach introductory linear algebra this summer.) The present version uses basic linear algebra to answer these questions.

* Removed some doctests on the same two functions, because they are now nested. If there is a way to doctest nested functions, let me know, and I'll restore the doctests.



---

archive/issue_comments_041981.json:
```json
{
    "body": "rebased to 3.4",
    "created_at": "2009-03-16T12:06:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5146#issuecomment-41981",
    "user": "https://github.com/malb"
}
```

rebased to 3.4



---

archive/issue_events_015083.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/5146",
    "rename": {
        "from": "implement MPolynomial_ideal.variety() for GF(p) with p > than what Singular supports",
        "to": "[needs some work] implement MPolynomial_ideal.variety() for GF(p) with p > than what Singular supports"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5146#event-15083"
}
```



---

archive/attachments_005786.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "variety_patch.2.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5146/variety_patch.2.patch",
    "created_at": "2009-03-16T12:08:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5146",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/malb"
}
```



---

archive/issue_comments_041982.json:
```json
{
    "body": "<a id='comment:6'></a>\nI rebased the attached patch against 3.4 and changed the docstrings to the new ReST format. I think actually that the nested functions shouldn't be nested and should get proper examples/doctests. \n\n(Btw. there is a `coefficient_matrix()` function in `mq.MPolynomialSystem` but that is the material of another ticket)",
    "created_at": "2009-03-16T12:08:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5146#issuecomment-41982",
    "user": "https://github.com/malb"
}
```

<a id='comment:6'></a>
I rebased the attached patch against 3.4 and changed the docstrings to the new ReST format. I think actually that the nested functions shouldn't be nested and should get proper examples/doctests. 

(Btw. there is a `coefficient_matrix()` function in `mq.MPolynomialSystem` but that is the material of another ticket)



---

archive/issue_comments_041983.json:
```json
{
    "body": "<a id='comment:7'></a>\nalso: I'm sorry to have let bitrot this patch for so long, I know the ball was in my corner.",
    "created_at": "2009-03-16T12:09:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5146#issuecomment-41983",
    "user": "https://github.com/malb"
}
```

<a id='comment:7'></a>
also: I'm sorry to have let bitrot this patch for so long, I know the ball was in my corner.



---

archive/attachments_005787.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "variety_patch.3.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5146/variety_patch.3.patch",
    "created_at": "2009-03-18T00:12:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5146",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/johnperry-math"
}
```



---

archive/issue_comments_041984.json:
```json
{
    "body": "Updated with some of Martin's comments",
    "created_at": "2009-03-18T00:12:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5146#issuecomment-41984",
    "user": "https://github.com/johnperry-math"
}
```

Updated with some of Martin's comments



---

archive/issue_events_015084.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/5146",
    "rename": {
        "from": "[needs some work] implement MPolynomial_ideal.variety() for GF(p) with p > than what Singular supports",
        "to": "implement MPolynomial_ideal.variety() for GF(p) with p > than what Singular supports"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5146#event-15084"
}
```



---

archive/issue_comments_041985.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2009-03-18T00:16:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5146#issuecomment-41985",
    "user": "https://github.com/johnperry-math"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_041986.json:
```json
{
    "body": "<a id='comment:8'></a>\nI made the changes Martin recommended: namely, de-nesting the nested functions and adding doctests.\n\nOne reason the functions were nested is that I was using certain assumptions. I thought that made life easier but in retrospect it doesn't. This allowed me to simplify the functions.\n\nIn addition the documentation follows the format Martin was using (ReST?). I'm still using my own coefficient_matrix() but I reckon that can be adjusted if desired.",
    "created_at": "2009-03-18T00:16:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5146#issuecomment-41986",
    "user": "https://github.com/johnperry-math"
}
```

<a id='comment:8'></a>
I made the changes Martin recommended: namely, de-nesting the nested functions and adding doctests.

One reason the functions were nested is that I was using certain assumptions. I thought that made life easier but in retrospect it doesn't. This allowed me to simplify the functions.

In addition the documentation follows the format Martin was using (ReST?). I'm still using my own coefficient_matrix() but I reckon that can be adjusted if desired.



---

archive/issue_comments_041987.json:
```json
{
    "body": "<a id='comment:9'></a>\nJohn, I guess you don't run 3.4 because your new patch does break the same stuff I fixed for the first patch. I'll fix it again.",
    "created_at": "2009-03-20T14:08:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5146#issuecomment-41987",
    "user": "https://github.com/malb"
}
```

<a id='comment:9'></a>
John, I guess you don't run 3.4 because your new patch does break the same stuff I fixed for the first patch. I'll fix it again.



---

archive/attachments_005788.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "toy_variety.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5146/toy_variety.patch",
    "created_at": "2009-03-20T14:16:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5146",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/malb"
}
```



---

archive/issue_comments_041988.json:
```json
{
    "body": "",
    "created_at": "2009-03-20T14:16:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5146#issuecomment-41988",
    "user": "https://github.com/malb"
}
```





---

archive/issue_comments_041989.json:
```json
{
    "body": "<a id='comment:10'></a>\nIf John agrees to my changes, the patch has a positive review. John, note that the indentation in the docs has meaning and we can't just remove it.",
    "created_at": "2009-03-20T14:17:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5146#issuecomment-41989",
    "user": "https://github.com/malb"
}
```

<a id='comment:10'></a>
If John agrees to my changes, the patch has a positive review. John, note that the indentation in the docs has meaning and we can't just remove it.



---

archive/issue_comments_041990.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2009-03-25T17:39:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5146#issuecomment-41990",
    "user": "https://github.com/johnperry-math"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_041991.json:
```json
{
    "body": "<a id='comment:11'></a>\nAll doctests passed on my setup.",
    "created_at": "2009-03-25T17:39:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5146#issuecomment-41991",
    "user": "https://github.com/johnperry-math"
}
```

<a id='comment:11'></a>
All doctests passed on my setup.



---

archive/issue_events_015085.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2009-03-26T00:08:41Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/5146",
    "milestone": "sage-3.4.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5146#event-15085"
}
```



---

archive/issue_events_015086.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2009-03-26T00:08:41Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/5146",
    "milestone": "sage-3.4.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5146#event-15086"
}
```



---

archive/issue_comments_041992.json:
```json
{
    "body": "<a id='comment:12'></a>\nMerged toy_variety.patch in Sage 3.4.1.alpha0.\n\nCheers,\n\nMichael",
    "created_at": "2009-03-26T00:08:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5146#issuecomment-41992",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:12'></a>
Merged toy_variety.patch in Sage 3.4.1.alpha0.

Cheers,

Michael



---

archive/issue_events_015087.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2009-03-26T00:08:41Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/5146",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5146#event-15087"
}
```
