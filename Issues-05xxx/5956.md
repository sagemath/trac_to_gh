# Issue 5956: image dimensions for show() are in inches

archive/issues_005956.json:
```json
{
    "body": "As discussed at this [sage-devel thread](http://groups.google.com/group/sage-devel/browse_thread/thread/c411254b7bc0bb97), the optional argument `figsize` of the command `show()` needs to clearly state that the units of the image are in inches. As of Sage 3.4.1, the docstring for `show()` says:\n\n```\n- ``figsize``- [width, height] (same for square aspect)\n```\nwhich can be interpreted to mean that one can do something like `figsize=[w,h]`. But something like the following produces a segmentation fault:\n\n```\n[mvngu@sage ~]$ sage\n----------------------------------------------------------------------\n----------------------------------------------------------------------\nsage: q = var(\"q\")\nsage: f(q) = (q^4 - q^2 + 1) * (q^4 + q^3 + q^2 + q + 1) * (q^4 - q^3 \\\n+ q^2 - q + 1) * (q^6 + q^5 + q^4 + q^3 + q^2 + q + 1) * (q^6 - q^5 + \\\nq^4 - q^3 + q^2 - q + 1) * (q^(20) - q^(18) - q^(14) - q^(12) + q^(10) \\\n- q^8 - q^6 - q^2 + 1)\nsage: g(q) = q^8 * (q^4 + q^2 + 1)^2 * (q^4 + 1)^5\nsage: p = complex_plot(f/g, (-2,2), (-2,2))\nsage: p.show(figsize=[256,256])\n```\nwhile the following results in a `ValueError`:\n| Sage Version 3.4.1, Release Date: 2009-04-21                       |\n| Type notebook() for the GUI, and license() for information.        |\n```\n----------------------------------------------------------------------\n----------------------------------------------------------------------\nsage: q = var(\"q\")\nsage: f(q) = (q^4 - q^2 + 1) * (q^4 + q^3 + q^2 + q + 1) * (q^4 - q^3 \\\n+ q^2 - q + 1) * (q^6 + q^5 + q^4 + q^3 + q^2 + q + 1) * (q^6 - q^5 + \\\nq^4 - q^3 + q^2 - q + 1) * (q^(20) - q^(18) - q^(14) - q^(12) + q^(10) \\\n- q^8 - q^6 - q^2 + 1)\nsage: g(q) = q^8 * (q^4 + q^2 + 1)^2 * (q^4 + 1)^5\nsage: p = complex_plot(f/g, (-2,2), (-2,2))\nsage: p.show(figsize=[500,500])\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n...\nValueError: width and height must each be below 32768\n```\nEssentially, the documentation for `show()` needs to be updated, especially the optional arguments, to clearly explain the units of measurement of the width and height of the image size. Also, it would be a good idea to specify how one can pass in values for those dimensions. For example, can one do this `figsize=[124,124]`?\n\nAssignee: @williamstein\n\nCC:  @kcrisman\n\nKeywords: image dimensions, figsize, beginner\n\nUpstream: None of the above - read trac for reasoning.\n\nReviewer: Karl-Dieter Crisman, Punarbasu Purkayastha, Jeroen Demeyer\n\nAuthor: Emily Chen, Punarbasu Purkayastha, Karl-Dieter Crisman\n\nBranch: 4c5b581fb521519cdd353bc40445b4f7b4589862\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/5956\n\n",
    "closed_at": "2014-11-17T13:17:56Z",
    "created_at": "2009-05-01T07:17:25Z",
    "labels": [
        "component: graphics",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "image dimensions for show() are in inches",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/5956",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```
As discussed at this [sage-devel thread](http://groups.google.com/group/sage-devel/browse_thread/thread/c411254b7bc0bb97), the optional argument `figsize` of the command `show()` needs to clearly state that the units of the image are in inches. As of Sage 3.4.1, the docstring for `show()` says:

```
- ``figsize``- [width, height] (same for square aspect)
```
which can be interpreted to mean that one can do something like `figsize=[w,h]`. But something like the following produces a segmentation fault:

```
[mvngu@sage ~]$ sage
----------------------------------------------------------------------
----------------------------------------------------------------------
sage: q = var("q")
sage: f(q) = (q^4 - q^2 + 1) * (q^4 + q^3 + q^2 + q + 1) * (q^4 - q^3 \
+ q^2 - q + 1) * (q^6 + q^5 + q^4 + q^3 + q^2 + q + 1) * (q^6 - q^5 + \
q^4 - q^3 + q^2 - q + 1) * (q^(20) - q^(18) - q^(14) - q^(12) + q^(10) \
- q^8 - q^6 - q^2 + 1)
sage: g(q) = q^8 * (q^4 + q^2 + 1)^2 * (q^4 + 1)^5
sage: p = complex_plot(f/g, (-2,2), (-2,2))
sage: p.show(figsize=[256,256])
```
while the following results in a `ValueError`:
| Sage Version 3.4.1, Release Date: 2009-04-21                       |
| Type notebook() for the GUI, and license() for information.        |
```
----------------------------------------------------------------------
----------------------------------------------------------------------
sage: q = var("q")
sage: f(q) = (q^4 - q^2 + 1) * (q^4 + q^3 + q^2 + q + 1) * (q^4 - q^3 \
+ q^2 - q + 1) * (q^6 + q^5 + q^4 + q^3 + q^2 + q + 1) * (q^6 - q^5 + \
q^4 - q^3 + q^2 - q + 1) * (q^(20) - q^(18) - q^(14) - q^(12) + q^(10) \
- q^8 - q^6 - q^2 + 1)
sage: g(q) = q^8 * (q^4 + q^2 + 1)^2 * (q^4 + 1)^5
sage: p = complex_plot(f/g, (-2,2), (-2,2))
sage: p.show(figsize=[500,500])
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
...
ValueError: width and height must each be below 32768
```
Essentially, the documentation for `show()` needs to be updated, especially the optional arguments, to clearly explain the units of measurement of the width and height of the image size. Also, it would be a good idea to specify how one can pass in values for those dimensions. For example, can one do this `figsize=[124,124]`?

Assignee: @williamstein

CC:  @kcrisman

Keywords: image dimensions, figsize, beginner

Upstream: None of the above - read trac for reasoning.

Reviewer: Karl-Dieter Crisman, Punarbasu Purkayastha, Jeroen Demeyer

Author: Emily Chen, Punarbasu Purkayastha, Karl-Dieter Crisman

Branch: 4c5b581fb521519cdd353bc40445b4f7b4589862

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/5956





---

archive/issue_comments_048378.json:
```json
{
    "body": "Changing keywords from \"image dimensions, figsize\" to \"image dimensions, figsize, beginner\".",
    "created_at": "2010-05-26T15:32:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48378",
    "user": "https://github.com/jasongrout"
}
```

Changing keywords from "image dimensions, figsize" to "image dimensions, figsize, beginner".



---

archive/issue_comments_048379.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-11-03T21:42:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48379",
    "user": "https://trac.sagemath.org/admin/accounts/users/emchennyc"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_048380.json:
```json
{
    "body": "<a id='comment:3'></a>Made a doc update after reading this thread:  https://groups.google.com/forum/?fromgroups=#!topic/sage-devel/xBElS3vAu5c\n\nDo you think any more info should be included in the changes?",
    "created_at": "2012-11-03T21:42:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48380",
    "user": "https://trac.sagemath.org/admin/accounts/users/emchennyc"
}
```

<a id='comment:3'></a>Made a doc update after reading this thread:  https://groups.google.com/forum/?fromgroups=#!topic/sage-devel/xBElS3vAu5c

Do you think any more info should be included in the changes?



---

archive/issue_comments_048381.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-11-04T01:57:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48381",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_048382.json:
```json
{
    "body": "<a id='comment:5'></a>This would be a good start.  \n\nWhat's the reference for the dpi, just out of curiosity?  (I assume it's right in the Sage or mpl source.)  Also, telling us the maximum possible would be helpful, given the errors - especially since the one above is confusing since the `32768` is in \"dots\", not inches.  Presumably if one reset the default dpi...\n\n```\nsage: P.show(figsize=[1,327],dpi=100)\nsage: P.show(figsize=[1,328],dpi=100)\n<ValueError>\nsage: P.show(figsize=[1,328],dpi=80)\n```\nSo this should be very, very clear, in order to resolve this ticket.\n\nAdditionally, you'll want to add a doctest to verify that some things don't go boom, and that the error is correctly raised, etc.  Maybe even a `# not tested` line with the segfault.\n\nFinally, we may also want to report the segfault upstream with a \"pure\" matplotlib example, if you can concoct one.\n\nBut all that said, thanks very much for looking at this - this is just part of the normal review process, good start.",
    "created_at": "2012-11-04T01:57:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48382",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:5'></a>This would be a good start.  

What's the reference for the dpi, just out of curiosity?  (I assume it's right in the Sage or mpl source.)  Also, telling us the maximum possible would be helpful, given the errors - especially since the one above is confusing since the `32768` is in "dots", not inches.  Presumably if one reset the default dpi...

```
sage: P.show(figsize=[1,327],dpi=100)
sage: P.show(figsize=[1,328],dpi=100)
<ValueError>
sage: P.show(figsize=[1,328],dpi=80)
```
So this should be very, very clear, in order to resolve this ticket.

Additionally, you'll want to add a doctest to verify that some things don't go boom, and that the error is correctly raised, etc.  Maybe even a `# not tested` line with the segfault.

Finally, we may also want to report the segfault upstream with a "pure" matplotlib example, if you can concoct one.

But all that said, thanks very much for looking at this - this is just part of the normal review process, good start.



---

archive/issue_comments_048383.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-11-10T18:49:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48383",
    "user": "https://trac.sagemath.org/admin/accounts/users/emchennyc"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_048384.json:
```json
{
    "body": "<a id='comment:6'></a>Thank you for the pointers. In matplotlib/rcsetup.py the default figure properties start at line 508. \nline 509 # figure size in inches: width by height 'figure.figsize'    : [ [8.0,6.0], validate_nseq_float(2)]\nline 523 'savefig.dpi'         : [100, validate_float],   # DPI\n\nI submitted a new patch to include what I think you mean by a doctest. I wasn't sure what you meant about including '# not tested line with the segfault'. Should I include an example with the segfault in the docstring?\n\nStrangely enough, I did not raise any errors when I tried a 'pure' matplotlib example...\n\n```\nfrom matplotlib import pyplot as plt\nf=plt.figure(figsize=[28,10],dpi=100)\nf.show()\n```\n\n\nWould someone kindly review  and let me know what else should be included in the doctest? I appreciate your patience with this, as I am (obviously) new and hoping to learn. Thank you!",
    "created_at": "2012-11-10T18:49:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48384",
    "user": "https://trac.sagemath.org/admin/accounts/users/emchennyc"
}
```

<a id='comment:6'></a>Thank you for the pointers. In matplotlib/rcsetup.py the default figure properties start at line 508. 
line 509 # figure size in inches: width by height 'figure.figsize'    : [ [8.0,6.0], validate_nseq_float(2)]
line 523 'savefig.dpi'         : [100, validate_float],   # DPI

I submitted a new patch to include what I think you mean by a doctest. I wasn't sure what you meant about including '# not tested line with the segfault'. Should I include an example with the segfault in the docstring?

Strangely enough, I did not raise any errors when I tried a 'pure' matplotlib example...

```
from matplotlib import pyplot as plt
f=plt.figure(figsize=[28,10],dpi=100)
f.show()
```


Would someone kindly review  and let me know what else should be included in the doctest? I appreciate your patience with this, as I am (obviously) new and hoping to learn. Thank you!



---

archive/issue_comments_048385.json:
```json
{
    "body": "<a id='comment:7'></a>This ticket is awesome! Brought my laptop to a crawl! :)\n\n`@`emchennyc: I might come back to this ticket if kcrisman doesn't. For now, it seems that matplotlib (even the latest 1.2.0 release) does not handle the parameters `[256,256]` properly. It tries to allocate memory and then fails, resulting in a segfault.\n\nWhat kcrisman asks is a doctest like this (under a `TEST:` section; look at how these sections are written in other functions or other files):\n\n```\nTEST:\n\nThe following plot segfaults sage and should not be doctested.::\n\n    sage: plot(x).show(figsize=[256,256]) # not tested\n\n```\n\nIf you do happen to run this command, be very careful. I suggest you set a ulimit before you start sage. If you have, say 3G, of memory/RAM, then set ulimit to 2G and only then start sage. If you have even less memory then you will need to set even lower ulimit, but sage won't run properly below 1G.\n\n```\n$ ulimit -v 2000000\n$ sage\nsage: plot(x).show(figsize=[256,256]) # boom, segv!!\n```\n\nThat said, I would like you to set some defaults in your editor. Currently, your patch contains a mixture of tabs and spaces. I suggest you change the settings in your editor to not insert tabs, and instead insert 4 spaces every time you press a tab key.",
    "created_at": "2012-11-16T10:05:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48385",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:7'></a>This ticket is awesome! Brought my laptop to a crawl! :)

`@`emchennyc: I might come back to this ticket if kcrisman doesn't. For now, it seems that matplotlib (even the latest 1.2.0 release) does not handle the parameters `[256,256]` properly. It tries to allocate memory and then fails, resulting in a segfault.

What kcrisman asks is a doctest like this (under a `TEST:` section; look at how these sections are written in other functions or other files):

```
TEST:

The following plot segfaults sage and should not be doctested.::

    sage: plot(x).show(figsize=[256,256]) # not tested

```

If you do happen to run this command, be very careful. I suggest you set a ulimit before you start sage. If you have, say 3G, of memory/RAM, then set ulimit to 2G and only then start sage. If you have even less memory then you will need to set even lower ulimit, but sage won't run properly below 1G.

```
$ ulimit -v 2000000
$ sage
sage: plot(x).show(figsize=[256,256]) # boom, segv!!
```

That said, I would like you to set some defaults in your editor. Currently, your patch contains a mixture of tabs and spaces. I suggest you change the settings in your editor to not insert tabs, and instead insert 4 spaces every time you press a tab key.



---

archive/issue_comments_048386.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-01-03T20:16:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48386",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_048387.json:
```json
{
    "body": "<a id='comment:8'></a>Needs work due to the issues raise by ppurka, but getting close!",
    "created_at": "2013-01-03T20:16:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48387",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:8'></a>Needs work due to the issues raise by ppurka, but getting close!



---

archive/issue_comments_048388.json:
```json
{
    "body": "<a id='comment:9'></a>`@`ppurka Thank you for the feedback! The tests I included in the attached patch pass when I run:\n./sage -t -verbose 'devel/sage-5956/sage/plot/graphics.py'\n\nThen, I\n- ran ./sage -docbuild reference html\n- navigated to SAGEROOT/devel/branch/doc/output/html/en/reference\n- opened plotting.html in a browser\n- visited the doc page for Graphics objects\nbut did not see the documentation that I added. Did I miss a step?\n\nAlso, here is a matplotlib example which I believe this bug is related to. Please correct me if I'm wrong and feel free to advise if I should use this example to report as a matplotlib issue: http://pastebin.com/raw.php?i=5Arg52e2",
    "created_at": "2013-01-05T13:40:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48388",
    "user": "https://trac.sagemath.org/admin/accounts/users/emchennyc"
}
```

<a id='comment:9'></a>`@`ppurka Thank you for the feedback! The tests I included in the attached patch pass when I run:
./sage -t -verbose 'devel/sage-5956/sage/plot/graphics.py'

Then, I
- ran ./sage -docbuild reference html
- navigated to SAGEROOT/devel/branch/doc/output/html/en/reference
- opened plotting.html in a browser
- visited the doc page for Graphics objects
but did not see the documentation that I added. Did I miss a step?

Also, here is a matplotlib example which I believe this bug is related to. Please correct me if I'm wrong and feel free to advise if I should use this example to report as a matplotlib issue: http://pastebin.com/raw.php?i=5Arg52e2



---

archive/issue_comments_048389.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [comment:9 emchennyc]:\n> `@`ppurka Thank you for the feedback! The tests I included in the attached patch pass when I run:\n> ./sage -t -verbose 'devel/sage-5956/sage/plot/graphics.py'\n> \n> Then, I\n\n\nYou have to do ./sage -b first.  The tests run on the copy of the code in the devel/sage directory, but the docs build off the ones in the build directory which that command does.\n\n> - ran ./sage -docbuild reference html\n> - navigated to SAGEROOT/devel/branch/doc/output/html/en/reference\n> - opened plotting.html in a browser\n> - visited the doc page for Graphics objects\n> but did not see the documentation that I added. Did I miss a step?\n> \n> Also, here is a matplotlib example which I believe this bug is related to. Please correct me if I'm wrong and feel free to advise if I should use this example to report as a matplotlib issue: http://pastebin.com/raw.php?i=5Arg52e2",
    "created_at": "2013-01-05T13:54:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48389",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:10'></a>Replying to [comment:9 emchennyc]:
> `@`ppurka Thank you for the feedback! The tests I included in the attached patch pass when I run:
> ./sage -t -verbose 'devel/sage-5956/sage/plot/graphics.py'
> 
> Then, I


You have to do ./sage -b first.  The tests run on the copy of the code in the devel/sage directory, but the docs build off the ones in the build directory which that command does.

> - ran ./sage -docbuild reference html
> - navigated to SAGEROOT/devel/branch/doc/output/html/en/reference
> - opened plotting.html in a browser
> - visited the doc page for Graphics objects
> but did not see the documentation that I added. Did I miss a step?
> 
> Also, here is a matplotlib example which I believe this bug is related to. Please correct me if I'm wrong and feel free to advise if I should use this example to report as a matplotlib issue: http://pastebin.com/raw.php?i=5Arg52e2



---

archive/issue_comments_048390.json:
```json
{
    "body": "<a id='comment:11'></a>Thanks for the update. There is one more thing that I overlooked earlier. The documentation should mention that the number `32768` is in dots per inch. Maybe the text of `ValueError` should also end in **32768 dots per inch**.\n\n```\nsage: e.show(figsize=[328,10],dpi=100)\nValueError: width and height must each be below 32768 dots per inch.\n```\nI think the following modification to the `figsize` documentation is warranted.\n\n```\n- ``figsize`` - (default: [8.0,6.0]) [width, height] inches. The maximum value\n  of each of the width and the height can be 327 inches, at the default ``dpi``\n  of 100 dpi, which is just shy of the maximum allowed value of 32768 dots\n  per inch.\n```\nThen, the test should have the following description:\n\n```\n        The figsize width and height parameters must be less than 328 inches each,\n        corresponding to the maximum allowed dpi of 32768.::\n```\nThis will make the number 32768 more clear to anyone who is curious what that number means in the `ValueError`.\n\nI am unable to replicate your matplotlib example. A figure doesn't seem to have a `show()` attribute. However, the following example successfully crashes matplotlib.\n\n```\n~\u00bb ulimit -v 2000000\n~\u00bb sage -ipython\nPython 2.7.3 (default, Dec 30 2012, 21:34:30)\nType \"copyright\", \"credits\" or \"license\" for more information.\n\nIPython 0.10.2 -- An enhanced Interactive Python.\n?         -> Introduction and overview of IPython's features.\n%quickref -> Quick reference.\nhelp      -> Python's own help system.\nobject?   -> Details about 'object'. ?object also works, ?? prints more.\n\nIn [1]: from matplotlib import pyplot\n\nIn [2]: pyplot.figure(figsize=[232,232])\nOut[2]: <matplotlib.figure.Figure object at 0x12ba950>\n\nIn [3]: pyplot.savefig('/tmp/a.png')\n...\nRuntimeError: Could not allocate memory for image\n```",
    "created_at": "2013-01-05T14:25:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48390",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:11'></a>Thanks for the update. There is one more thing that I overlooked earlier. The documentation should mention that the number `32768` is in dots per inch. Maybe the text of `ValueError` should also end in **32768 dots per inch**.

```
sage: e.show(figsize=[328,10],dpi=100)
ValueError: width and height must each be below 32768 dots per inch.
```
I think the following modification to the `figsize` documentation is warranted.

```
- ``figsize`` - (default: [8.0,6.0]) [width, height] inches. The maximum value
  of each of the width and the height can be 327 inches, at the default ``dpi``
  of 100 dpi, which is just shy of the maximum allowed value of 32768 dots
  per inch.
```
Then, the test should have the following description:

```
        The figsize width and height parameters must be less than 328 inches each,
        corresponding to the maximum allowed dpi of 32768.::
```
This will make the number 32768 more clear to anyone who is curious what that number means in the `ValueError`.

I am unable to replicate your matplotlib example. A figure doesn't seem to have a `show()` attribute. However, the following example successfully crashes matplotlib.

```
~» ulimit -v 2000000
~» sage -ipython
Python 2.7.3 (default, Dec 30 2012, 21:34:30)
Type "copyright", "credits" or "license" for more information.

IPython 0.10.2 -- An enhanced Interactive Python.
?         -> Introduction and overview of IPython's features.
%quickref -> Quick reference.
help      -> Python's own help system.
object?   -> Details about 'object'. ?object also works, ?? prints more.

In [1]: from matplotlib import pyplot

In [2]: pyplot.figure(figsize=[232,232])
Out[2]: <matplotlib.figure.Figure object at 0x12ba950>

In [3]: pyplot.savefig('/tmp/a.png')
...
RuntimeError: Could not allocate memory for image
```



---

archive/issue_comments_048391.json:
```json
{
    "body": "Attachment [trac_5956_figsize_units.patch](tarball://root/attachments/some-uuid/ticket5956/trac_5956_figsize_units.patch) by emchennyc created at 2013-01-05 14:43:56",
    "created_at": "2013-01-05T14:43:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48391",
    "user": "https://trac.sagemath.org/admin/accounts/users/emchennyc"
}
```

Attachment [trac_5956_figsize_units.patch](tarball://root/attachments/some-uuid/ticket5956/trac_5956_figsize_units.patch) by emchennyc created at 2013-01-05 14:43:56



---

archive/issue_comments_048392.json:
```json
{
    "body": "Attachment [trac_5956_figsize_units.1.patch](tarball://root/attachments/some-uuid/ticket5956/trac_5956_figsize_units.1.patch) by @ppurka created at 2013-02-02 08:42:37\n\napply only this",
    "created_at": "2013-02-02T08:42:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48392",
    "user": "https://github.com/ppurka"
}
```

Attachment [trac_5956_figsize_units.1.patch](tarball://root/attachments/some-uuid/ticket5956/trac_5956_figsize_units.1.patch) by @ppurka created at 2013-02-02 08:42:37

apply only this



---

archive/issue_comments_048393.json:
```json
{
    "body": "Attachment [only_for_review.patch](tarball://root/attachments/some-uuid/ticket5956/only_for_review.patch) by @ppurka created at 2013-02-02 08:43:03\n\nnot to be merged. only for review.",
    "created_at": "2013-02-02T08:43:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48393",
    "user": "https://github.com/ppurka"
}
```

Attachment [only_for_review.patch](tarball://root/attachments/some-uuid/ticket5956/only_for_review.patch) by @ppurka created at 2013-02-02 08:43:03

not to be merged. only for review.



---

archive/issue_comments_048394.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-02-02T08:46:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48394",
    "user": "https://github.com/ppurka"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_048395.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -38,8 +38,11 @@\n ValueError: width and height must each be below 32768\n ```\n Essentially, the documentation for `show()` needs to be updated, especially the optional arguments, to clearly explain the units of measurement of the width and height of the image size. Also, it would be a good idea to specify how one can pass in values for those dimensions. For example, can one do this `figsize=[124,124]`?\n+| Sage Version 3.4.1, Release Date: 2009-04-21                       |\n+| Type notebook() for the GUI, and license() for information.        |\n+---\n \n-Keywords: image dimensions, figsize\n+Apply only [attachment:trac_5956_figsize_units.1.patch] to devel/sage.\n \n Comment: 1\n \n```\n",
    "created_at": "2013-02-02T08:46:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48395",
    "user": "https://github.com/ppurka"
}
```

Description changed:
```diff
--- 
+++ 
@@ -38,8 +38,11 @@
 ValueError: width and height must each be below 32768
 ```
 Essentially, the documentation for `show()` needs to be updated, especially the optional arguments, to clearly explain the units of measurement of the width and height of the image size. Also, it would be a good idea to specify how one can pass in values for those dimensions. For example, can one do this `figsize=[124,124]`?
+| Sage Version 3.4.1, Release Date: 2009-04-21                       |
+| Type notebook() for the GUI, and license() for information.        |
+---
 
-Keywords: image dimensions, figsize
+Apply only [attachment:trac_5956_figsize_units.1.patch] to devel/sage.
 
 Comment: 1
 
```




---

archive/issue_comments_048396.json:
```json
{
    "body": "<a id='comment:12'></a>Updated the patch to sage-5.7beta0 and introduced some other changes.\n\nThe patch [attachment:only_for_review.patch] contains the changes I made after rebasing the patch to 5.7beta0. In particular, I have introduced the changes I suggested in my comments, and have fixed failing doctests due to the use/redefining of `e` in the earlier patch.\n\nThe changes needs review.\n\nPatchbot apply trac_5956_figsize_units.1.patch",
    "created_at": "2013-02-02T08:46:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48396",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:12'></a>Updated the patch to sage-5.7beta0 and introduced some other changes.

The patch [attachment:only_for_review.patch] contains the changes I made after rebasing the patch to 5.7beta0. In particular, I have introduced the changes I suggested in my comments, and have fixed failing doctests due to the use/redefining of `e` in the earlier patch.

The changes needs review.

Patchbot apply trac_5956_figsize_units.1.patch



---

archive/issue_comments_048397.json:
```json
{
    "body": "<a id='comment:14'></a>This hit me today in class!  At least, I think so - `figsize=[5,5]` shouldn't necessarily yield this, but it was the same message.  I thought it was in, but high priority now.\n\nAlso, I think that #12592 is a dup.",
    "created_at": "2013-03-22T21:08:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48397",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:14'></a>This hit me today in class!  At least, I think so - `figsize=[5,5]` shouldn't necessarily yield this, but it was the same message.  I thought it was in, but high priority now.

Also, I think that #12592 is a dup.



---

archive/issue_comments_048398.json:
```json
{
    "body": "<a id='comment:15'></a>Oh, I figured out my (very stupid) problem - I used `figsize=[-5,5]`, which is of course absurd.  Still, probably wouldn't hurt to put in a check for absurd values... such typos are \"all too easy\".",
    "created_at": "2013-03-22T21:14:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48398",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:15'></a>Oh, I figured out my (very stupid) problem - I used `figsize=[-5,5]`, which is of course absurd.  Still, probably wouldn't hurt to put in a check for absurd values... such typos are "all too easy".



---

archive/issue_comments_048399.json:
```json
{
    "body": "<a id='comment:16'></a>Needs a bit of work.  The limit is in pixels (dots), not dots per inch.  `2^15` dots per inch would be impressive indeed.  Notice also that [apparently this could be raised](http://matplotlib.1069221.n5.nabble.com/the-32768-pixel-limit-tt30382.html#none) if one really wanted to.\n\nI'll add a reviewer patch momentarily.",
    "created_at": "2013-03-23T01:37:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48399",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:16'></a>Needs a bit of work.  The limit is in pixels (dots), not dots per inch.  `2^15` dots per inch would be impressive indeed.  Notice also that [apparently this could be raised](http://matplotlib.1069221.n5.nabble.com/the-32768-pixel-limit-tt30382.html#none) if one really wanted to.

I'll add a reviewer patch momentarily.



---

archive/issue_comments_048400.json:
```json
{
    "body": "<a id='comment:17'></a>Attachment [trac_5956-reviewer.patch](tarball://root/attachments/some-uuid/ticket5956/trac_5956-reviewer.patch) by @kcrisman created at 2013-03-23 02:24:38\n\nI think this needs some review, since I add some assertions and so forth.   I hope this clarifies things more, though, and adds doc in the main plot page where it is probably needed.\n\nppurka, if you are an author too, feel free to add yourself.  Positive review to everything before my patch.\n\nPatchbot: apply trac_5956_figsize_units.1.patch and trac_5956-reviewer.patch to devel/sage.",
    "created_at": "2013-03-23T02:24:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48400",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:17'></a>Attachment [trac_5956-reviewer.patch](tarball://root/attachments/some-uuid/ticket5956/trac_5956-reviewer.patch) by @kcrisman created at 2013-03-23 02:24:38

I think this needs some review, since I add some assertions and so forth.   I hope this clarifies things more, though, and adds doc in the main plot page where it is probably needed.

ppurka, if you are an author too, feel free to add yourself.  Positive review to everything before my patch.

Patchbot: apply trac_5956_figsize_units.1.patch and trac_5956-reviewer.patch to devel/sage.



---

archive/issue_comments_048401.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,48 @@\n+As discussed at this [sage-devel thread](http://groups.google.com/group/sage-devel/browse_thread/thread/c411254b7bc0bb97), the optional argument `figsize` of the command `show()` needs to clearly state that the units of the image are in inches. As of Sage 3.4.1, the docstring for `show()` says:\n \n+```\n+- ``figsize``- [width, height] (same for square aspect)\n+```\n+which can be interpreted to mean that one can do something like `figsize=[w,h]`. But something like the following produces a segmentation fault:\n+\n+```\n+[mvngu@sage ~]$ sage\n+----------------------------------------------------------------------\n+----------------------------------------------------------------------\n+sage: q = var(\"q\")\n+sage: f(q) = (q^4 - q^2 + 1) * (q^4 + q^3 + q^2 + q + 1) * (q^4 - q^3 \\\n++ q^2 - q + 1) * (q^6 + q^5 + q^4 + q^3 + q^2 + q + 1) * (q^6 - q^5 + \\\n+q^4 - q^3 + q^2 - q + 1) * (q^(20) - q^(18) - q^(14) - q^(12) + q^(10) \\\n+- q^8 - q^6 - q^2 + 1)\n+sage: g(q) = q^8 * (q^4 + q^2 + 1)^2 * (q^4 + 1)^5\n+sage: p = complex_plot(f/g, (-2,2), (-2,2))\n+sage: p.show(figsize=[256,256])\n+```\n+while the following results in a `ValueError`:\n+| Sage Version 3.4.1, Release Date: 2009-04-21                       |\n+| Type notebook() for the GUI, and license() for information.        |\n+```\n+----------------------------------------------------------------------\n+----------------------------------------------------------------------\n+sage: q = var(\"q\")\n+sage: f(q) = (q^4 - q^2 + 1) * (q^4 + q^3 + q^2 + q + 1) * (q^4 - q^3 \\\n++ q^2 - q + 1) * (q^6 + q^5 + q^4 + q^3 + q^2 + q + 1) * (q^6 - q^5 + \\\n+q^4 - q^3 + q^2 - q + 1) * (q^(20) - q^(18) - q^(14) - q^(12) + q^(10) \\\n+- q^8 - q^6 - q^2 + 1)\n+sage: g(q) = q^8 * (q^4 + q^2 + 1)^2 * (q^4 + 1)^5\n+sage: p = complex_plot(f/g, (-2,2), (-2,2))\n+sage: p.show(figsize=[500,500])\n+---------------------------------------------------------------------------\n+ValueError                                Traceback (most recent call last)\n+...\n+ValueError: width and height must each be below 32768\n+```\n+Essentially, the documentation for `show()` needs to be updated, especially the optional arguments, to clearly explain the units of measurement of the width and height of the image size. Also, it would be a good idea to specify how one can pass in values for those dimensions. For example, can one do this `figsize=[124,124]`?\n+| Sage Version 3.4.1, Release Date: 2009-04-21                       |\n+| Type notebook() for the GUI, and license() for information.        |\n+---\n+\n+Apply [attachment:trac_5956_figsize_units.1.patch] and [attachment:trac_5956-reviewer.patch] to devel/sage.\n \n Comment: 1\n \n```\n",
    "created_at": "2013-03-23T02:24:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48401",
    "user": "https://github.com/kcrisman"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,48 @@
+As discussed at this [sage-devel thread](http://groups.google.com/group/sage-devel/browse_thread/thread/c411254b7bc0bb97), the optional argument `figsize` of the command `show()` needs to clearly state that the units of the image are in inches. As of Sage 3.4.1, the docstring for `show()` says:
 
+```
+- ``figsize``- [width, height] (same for square aspect)
+```
+which can be interpreted to mean that one can do something like `figsize=[w,h]`. But something like the following produces a segmentation fault:
+
+```
+[mvngu@sage ~]$ sage
+----------------------------------------------------------------------
+----------------------------------------------------------------------
+sage: q = var("q")
+sage: f(q) = (q^4 - q^2 + 1) * (q^4 + q^3 + q^2 + q + 1) * (q^4 - q^3 \
++ q^2 - q + 1) * (q^6 + q^5 + q^4 + q^3 + q^2 + q + 1) * (q^6 - q^5 + \
+q^4 - q^3 + q^2 - q + 1) * (q^(20) - q^(18) - q^(14) - q^(12) + q^(10) \
+- q^8 - q^6 - q^2 + 1)
+sage: g(q) = q^8 * (q^4 + q^2 + 1)^2 * (q^4 + 1)^5
+sage: p = complex_plot(f/g, (-2,2), (-2,2))
+sage: p.show(figsize=[256,256])
+```
+while the following results in a `ValueError`:
+| Sage Version 3.4.1, Release Date: 2009-04-21                       |
+| Type notebook() for the GUI, and license() for information.        |
+```
+----------------------------------------------------------------------
+----------------------------------------------------------------------
+sage: q = var("q")
+sage: f(q) = (q^4 - q^2 + 1) * (q^4 + q^3 + q^2 + q + 1) * (q^4 - q^3 \
++ q^2 - q + 1) * (q^6 + q^5 + q^4 + q^3 + q^2 + q + 1) * (q^6 - q^5 + \
+q^4 - q^3 + q^2 - q + 1) * (q^(20) - q^(18) - q^(14) - q^(12) + q^(10) \
+- q^8 - q^6 - q^2 + 1)
+sage: g(q) = q^8 * (q^4 + q^2 + 1)^2 * (q^4 + 1)^5
+sage: p = complex_plot(f/g, (-2,2), (-2,2))
+sage: p.show(figsize=[500,500])
+---------------------------------------------------------------------------
+ValueError                                Traceback (most recent call last)
+...
+ValueError: width and height must each be below 32768
+```
+Essentially, the documentation for `show()` needs to be updated, especially the optional arguments, to clearly explain the units of measurement of the width and height of the image size. Also, it would be a good idea to specify how one can pass in values for those dimensions. For example, can one do this `figsize=[124,124]`?
+| Sage Version 3.4.1, Release Date: 2009-04-21                       |
+| Type notebook() for the GUI, and license() for information.        |
+---
+
+Apply [attachment:trac_5956_figsize_units.1.patch] and [attachment:trac_5956-reviewer.patch] to devel/sage.
 
 Comment: 1
 
```




---

archive/issue_comments_048402.json:
```json
{
    "body": "<a id='comment:18'></a>Replying to [comment:17 kcrisman]:\n> I think this needs some review, since I add some assertions and so forth.   I hope this clarifies things more, though, and adds doc in the main plot page where it is probably needed.\n\n\nThanks. Looks good to me.\n\n> ppurka, if you are an author too, feel free to add yourself.  Positive review to everything before my patch.\n\n\nI did change some doctests.",
    "created_at": "2013-03-23T07:09:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48402",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:18'></a>Replying to [comment:17 kcrisman]:
> I think this needs some review, since I add some assertions and so forth.   I hope this clarifies things more, though, and adds doc in the main plot page where it is probably needed.


Thanks. Looks good to me.

> ppurka, if you are an author too, feel free to add yourself.  Positive review to everything before my patch.


I did change some doctests.



---

archive/issue_comments_048403.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-03-23T07:09:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48403",
    "user": "https://github.com/ppurka"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_048404.json:
```json
{
    "body": "<a id='comment:19'></a>Use `ValueError` for bad user input, not `AssertionError`. If there is any way to produce an `AssertionError` using public functions, that is by definition a bug.\n\nAssertions are meant to check internal consistency inside algorithms. They express \"I *know* this condition is true\", not \"I want to *check* that this condition is true\".",
    "created_at": "2013-03-23T10:32:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48404",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:19'></a>Use `ValueError` for bad user input, not `AssertionError`. If there is any way to produce an `AssertionError` using public functions, that is by definition a bug.

Assertions are meant to check internal consistency inside algorithms. They express "I *know* this condition is true", not "I want to *check* that this condition is true".



---

archive/issue_comments_048405.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-03-23T10:32:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48405",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_048406.json:
```json
{
    "body": "<a id='comment:20'></a>> Assertions are meant to check internal consistency inside algorithms. They express \"I *know* this condition is true\", not \"I want to *check* that this condition is true\".\n\nOkay, fair enough.  The problem is that now I have to go remember how to check that something is a numeric type as well - which is better in the long run, but which is tricky with all the zillions of numeric input types Sage has... does something like `isnumeric` work?  It sounds familiar.",
    "created_at": "2013-03-23T12:42:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48406",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:20'></a>> Assertions are meant to check internal consistency inside algorithms. They express "I *know* this condition is true", not "I want to *check* that this condition is true".

Okay, fair enough.  The problem is that now I have to go remember how to check that something is a numeric type as well - which is better in the long run, but which is tricky with all the zillions of numeric input types Sage has... does something like `isnumeric` work?  It sounds familiar.



---

archive/issue_comments_048407.json:
```json
{
    "body": "<a id='comment:21'></a>Replying to [comment:20 kcrisman]:\n> > Assertions are meant to check internal consistency inside algorithms. They express \"I *know* this condition is true\", not \"I want to *check* that this condition is true\".\n\n> Okay, fair enough.  The problem is that now I have to go remember how to check that something is a numeric type as well\n\nJust convert, for example\n\n```\nx = float(x)\n```",
    "created_at": "2013-03-23T12:47:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48407",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:21'></a>Replying to [comment:20 kcrisman]:
> > Assertions are meant to check internal consistency inside algorithms. They express "I *know* this condition is true", not "I want to *check* that this condition is true".

> Okay, fair enough.  The problem is that now I have to go remember how to check that something is a numeric type as well

Just convert, for example

```
x = float(x)
```



---

archive/issue_comments_048408.json:
```json
{
    "body": "<a id='comment:22'></a>Why should we go around checking for numeric types? This is not a \"critical\" application that should ensure sane inputs for all kinds of inputs. If the user sends in garbage, they will eventually get garbage out from at least matplotlib, if not earlier in the process.",
    "created_at": "2013-03-23T13:14:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48408",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:22'></a>Why should we go around checking for numeric types? This is not a "critical" application that should ensure sane inputs for all kinds of inputs. If the user sends in garbage, they will eventually get garbage out from at least matplotlib, if not earlier in the process.



---

archive/issue_comments_048409.json:
```json
{
    "body": "<a id='comment:23'></a>It's not critical in that sense, but it's the kind of thing where I figure we might as well make sure that any error message sent makes sense.  The current error\n\n```\nValueError: width and height must each be below 32768\n```\ndoesn't refer to `figsize` and at least made me totally miss that I had somehow smuggled a minus sign in there, since I was frantically trying to make the image smaller and wondering why five was too big :-)  I figure if it can happen to an experienced Sage user \"on the spot\", it will definitely happen to a new user.  Jeroen's comment seems quite reasonable especially as everything matplotlib is going to end up a float anyway, if I recall correctly.\n\nI'll try to get this all packaged up in the next day or two.",
    "created_at": "2013-03-26T03:01:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48409",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:23'></a>It's not critical in that sense, but it's the kind of thing where I figure we might as well make sure that any error message sent makes sense.  The current error

```
ValueError: width and height must each be below 32768
```
doesn't refer to `figsize` and at least made me totally miss that I had somehow smuggled a minus sign in there, since I was frantically trying to make the image smaller and wondering why five was too big :-)  I figure if it can happen to an experienced Sage user "on the spot", it will definitely happen to a new user.  Jeroen's comment seems quite reasonable especially as everything matplotlib is going to end up a float anyway, if I recall correctly.

I'll try to get this all packaged up in the next day or two.



---

archive/issue_events_013962.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5956#event-13962"
}
```



---

archive/issue_comments_048410.json:
```json
{
    "body": "<a id='comment:26'></a>Added a git version of the patch. This is based on 6.1.beta5.",
    "created_at": "2014-01-19T14:31:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48410",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:26'></a>Added a git version of the patch. This is based on 6.1.beta5.



---

archive/issue_events_013963.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5956#event-13963"
}
```



---

archive/issue_events_013964.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5956#event-13964"
}
```



---

archive/issue_events_013965.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5956#event-13965"
}
```



---

archive/issue_events_013966.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5956#event-13966"
}
```



---

archive/issue_events_013967.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5956#event-13967"
}
```



---

archive/issue_events_013968.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5956#event-13968"
}
```



---

archive/issue_comments_048411.json:
```json
{
    "body": "<a id='comment:30'></a>> I'll try to get this all packaged up in the next day or two.\n\nNext day or two, next year or two...\n> Added a git version of the patch. This is based on 6.1.beta5.\n\nAmazingly, apparently still applies.\n\nBut we still haven't taken care of Jeroen's comment.  So I will try to do that now.\n\n---\nNew commits:",
    "created_at": "2014-11-07T19:24:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48411",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:30'></a>> I'll try to get this all packaged up in the next day or two.

Next day or two, next year or two...
> Added a git version of the patch. This is based on 6.1.beta5.

Amazingly, apparently still applies.

But we still haven't taken care of Jeroen's comment.  So I will try to do that now.

---
New commits:



---

archive/issue_comments_048412.json:
```json
{
    "body": "<a id='comment:31'></a>Okay, the last commit only needs review.\n\n---\nNew commits:",
    "created_at": "2014-11-07T19:39:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48412",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:31'></a>Okay, the last commit only needs review.

---
New commits:



---

archive/issue_comments_048413.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-11-07T19:39:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48413",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_048414.json:
```json
{
    "body": "<a id='comment:32'></a>Replying to [comment:22 ppurka]:\n> Why should we go around checking for numeric types? This is not a \"critical\" application that should ensure sane inputs for all kinds of inputs. If the user sends in garbage, they will eventually get garbage out from at least matplotlib, if not earlier in the process.\n\n\nWell, it could be that the user will send some Sage numeric type, which matplotlib might treat like garbage. A conversion like\n\n```\nx = float(x)   # assuming that it's a float that you need\n```\nwill solve both problems: it will raise a `TypeError` when true garbage is given but it should work for all Sage numeric types.",
    "created_at": "2014-11-08T11:08:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48414",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:32'></a>Replying to [comment:22 ppurka]:
> Why should we go around checking for numeric types? This is not a "critical" application that should ensure sane inputs for all kinds of inputs. If the user sends in garbage, they will eventually get garbage out from at least matplotlib, if not earlier in the process.


Well, it could be that the user will send some Sage numeric type, which matplotlib might treat like garbage. A conversion like

```
x = float(x)   # assuming that it's a float that you need
```
will solve both problems: it will raise a `TypeError` when true garbage is given but it should work for all Sage numeric types.



---

archive/issue_comments_048415.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,43 @@\n+As discussed at this [sage-devel thread](http://groups.google.com/group/sage-devel/browse_thread/thread/c411254b7bc0bb97), the optional argument `figsize` of the command `show()` needs to clearly state that the units of the image are in inches. As of Sage 3.4.1, the docstring for `show()` says:\n \n+```\n+- ``figsize``- [width, height] (same for square aspect)\n+```\n+which can be interpreted to mean that one can do something like `figsize=[w,h]`. But something like the following produces a segmentation fault:\n+\n+```\n+[mvngu@sage ~]$ sage\n+----------------------------------------------------------------------\n+----------------------------------------------------------------------\n+sage: q = var(\"q\")\n+sage: f(q) = (q^4 - q^2 + 1) * (q^4 + q^3 + q^2 + q + 1) * (q^4 - q^3 \\\n++ q^2 - q + 1) * (q^6 + q^5 + q^4 + q^3 + q^2 + q + 1) * (q^6 - q^5 + \\\n+q^4 - q^3 + q^2 - q + 1) * (q^(20) - q^(18) - q^(14) - q^(12) + q^(10) \\\n+- q^8 - q^6 - q^2 + 1)\n+sage: g(q) = q^8 * (q^4 + q^2 + 1)^2 * (q^4 + 1)^5\n+sage: p = complex_plot(f/g, (-2,2), (-2,2))\n+sage: p.show(figsize=[256,256])\n+```\n+while the following results in a `ValueError`:\n+| Sage Version 3.4.1, Release Date: 2009-04-21                       |\n+| Type notebook() for the GUI, and license() for information.        |\n+```\n+----------------------------------------------------------------------\n+----------------------------------------------------------------------\n+sage: q = var(\"q\")\n+sage: f(q) = (q^4 - q^2 + 1) * (q^4 + q^3 + q^2 + q + 1) * (q^4 - q^3 \\\n++ q^2 - q + 1) * (q^6 + q^5 + q^4 + q^3 + q^2 + q + 1) * (q^6 - q^5 + \\\n+q^4 - q^3 + q^2 - q + 1) * (q^(20) - q^(18) - q^(14) - q^(12) + q^(10) \\\n+- q^8 - q^6 - q^2 + 1)\n+sage: g(q) = q^8 * (q^4 + q^2 + 1)^2 * (q^4 + 1)^5\n+sage: p = complex_plot(f/g, (-2,2), (-2,2))\n+sage: p.show(figsize=[500,500])\n+---------------------------------------------------------------------------\n+ValueError                                Traceback (most recent call last)\n+...\n+ValueError: width and height must each be below 32768\n+```\n+Essentially, the documentation for `show()` needs to be updated, especially the optional arguments, to clearly explain the units of measurement of the width and height of the image size. Also, it would be a good idea to specify how one can pass in values for those dimensions. For example, can one do this `figsize=[124,124]`?\n \n Comment: 1\n \n```\n",
    "created_at": "2014-11-08T11:09:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48415",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,43 @@
+As discussed at this [sage-devel thread](http://groups.google.com/group/sage-devel/browse_thread/thread/c411254b7bc0bb97), the optional argument `figsize` of the command `show()` needs to clearly state that the units of the image are in inches. As of Sage 3.4.1, the docstring for `show()` says:
 
+```
+- ``figsize``- [width, height] (same for square aspect)
+```
+which can be interpreted to mean that one can do something like `figsize=[w,h]`. But something like the following produces a segmentation fault:
+
+```
+[mvngu@sage ~]$ sage
+----------------------------------------------------------------------
+----------------------------------------------------------------------
+sage: q = var("q")
+sage: f(q) = (q^4 - q^2 + 1) * (q^4 + q^3 + q^2 + q + 1) * (q^4 - q^3 \
++ q^2 - q + 1) * (q^6 + q^5 + q^4 + q^3 + q^2 + q + 1) * (q^6 - q^5 + \
+q^4 - q^3 + q^2 - q + 1) * (q^(20) - q^(18) - q^(14) - q^(12) + q^(10) \
+- q^8 - q^6 - q^2 + 1)
+sage: g(q) = q^8 * (q^4 + q^2 + 1)^2 * (q^4 + 1)^5
+sage: p = complex_plot(f/g, (-2,2), (-2,2))
+sage: p.show(figsize=[256,256])
+```
+while the following results in a `ValueError`:
+| Sage Version 3.4.1, Release Date: 2009-04-21                       |
+| Type notebook() for the GUI, and license() for information.        |
+```
+----------------------------------------------------------------------
+----------------------------------------------------------------------
+sage: q = var("q")
+sage: f(q) = (q^4 - q^2 + 1) * (q^4 + q^3 + q^2 + q + 1) * (q^4 - q^3 \
++ q^2 - q + 1) * (q^6 + q^5 + q^4 + q^3 + q^2 + q + 1) * (q^6 - q^5 + \
+q^4 - q^3 + q^2 - q + 1) * (q^(20) - q^(18) - q^(14) - q^(12) + q^(10) \
+- q^8 - q^6 - q^2 + 1)
+sage: g(q) = q^8 * (q^4 + q^2 + 1)^2 * (q^4 + 1)^5
+sage: p = complex_plot(f/g, (-2,2), (-2,2))
+sage: p.show(figsize=[500,500])
+---------------------------------------------------------------------------
+ValueError                                Traceback (most recent call last)
+...
+ValueError: width and height must each be below 32768
+```
+Essentially, the documentation for `show()` needs to be updated, especially the optional arguments, to clearly explain the units of measurement of the width and height of the image size. Also, it would be a good idea to specify how one can pass in values for those dimensions. For example, can one do this `figsize=[124,124]`?
 
 Comment: 1
 
```




---

archive/issue_comments_048416.json:
```json
{
    "body": "<a id='comment:34'></a>A minor point, but I wouldn't write segfaulting examples. Imagine the user tries those \"examples\" without reading the surrounding text...",
    "created_at": "2014-11-08T11:13:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48416",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:34'></a>A minor point, but I wouldn't write segfaulting examples. Imagine the user tries those "examples" without reading the surrounding text...



---

archive/issue_comments_048417.json:
```json
{
    "body": "<a id='comment:35'></a>Replying to [comment:34 jdemeyer]:\n> A minor point, but I wouldn't write segfaulting examples. Imagine the user tries those \"examples\" without reading the surrounding text...\n\nHow about we prepend the segfaulting line with a comment? Like this:\n\n```\nsage: #p.show(figsize=[232,232],dpi=100) # not tested\n```\nSo, anyone who blindly copy pastes will get nothing out of it. And has to make two mistakes to make it segfault. I think the reason this example is there is to make the user aware that unreasonable parameters will result in an uncomfortable end.",
    "created_at": "2014-11-09T14:37:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48417",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:35'></a>Replying to [comment:34 jdemeyer]:
> A minor point, but I wouldn't write segfaulting examples. Imagine the user tries those "examples" without reading the surrounding text...

How about we prepend the segfaulting line with a comment? Like this:

```
sage: #p.show(figsize=[232,232],dpi=100) # not tested
```
So, anyone who blindly copy pastes will get nothing out of it. And has to make two mistakes to make it segfault. I think the reason this example is there is to make the user aware that unreasonable parameters will result in an uncomfortable end.



---

archive/issue_comments_048418.json:
```json
{
    "body": "<a id='comment:36'></a>That sounds very reasonable.\n\nJeroen, are you saying that my latest commit needs something added like the `float` business?",
    "created_at": "2014-11-10T13:15:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48418",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:36'></a>That sounds very reasonable.

Jeroen, are you saying that my latest commit needs something added like the `float` business?



---

archive/issue_comments_048419.json:
```json
{
    "body": "<a id='comment:37'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-11-13T19:02:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48419",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:37'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_048420.json:
```json
{
    "body": "<a id='comment:38'></a>Okay, I think this is ready for review.  The `float` stuff is actually unnecessary but it can't hurt, since we definitely only want things that can be floats in there.\n\n---\nNew commits:",
    "created_at": "2014-11-13T19:03:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48420",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:38'></a>Okay, I think this is ready for review.  The `float` stuff is actually unnecessary but it can't hurt, since we definitely only want things that can be floats in there.

---
New commits:



---

archive/issue_comments_048421.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-11-13T20:09:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48421",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_048422.json:
```json
{
    "body": "<a id='comment:39'></a>Is there a check that `len(figsize) == 2`?\n\nI would change the logic of those branches to\n\n```\nif figure is None:\n    # add a good comment here\n    ...\nelif isinstance(figsize, (list, tuple)):\n    # figsize should be two positive numbers\n    if len(figsize) != 2:\n        raise ValueError('...')\n    ...\nelse:\n    # figsize should be a single positive number\n    figsize = float(figsize) # to pass to mpl\n    if figsize <= 0:\n        raise ValueError(\"figsize should be positive, not {0}\".format(figsize))\n    ...\n```\n\nAnd add a doctest for some non-float `figsize` argument like\n\n```\nsage: var('x')\nsage: ...figsize=x...\n```",
    "created_at": "2014-11-13T20:09:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48422",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:39'></a>Is there a check that `len(figsize) == 2`?

I would change the logic of those branches to

```
if figure is None:
    # add a good comment here
    ...
elif isinstance(figsize, (list, tuple)):
    # figsize should be two positive numbers
    if len(figsize) != 2:
        raise ValueError('...')
    ...
else:
    # figsize should be a single positive number
    figsize = float(figsize) # to pass to mpl
    if figsize <= 0:
        raise ValueError("figsize should be positive, not {0}".format(figsize))
    ...
```

And add a doctest for some non-float `figsize` argument like

```
sage: var('x')
sage: ...figsize=x...
```



---

archive/issue_comments_048423.json:
```json
{
    "body": "<a id='comment:40'></a>The `Unhandled SIGSEGV:` message isn't the current message (which is shorter).",
    "created_at": "2014-11-13T20:10:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48423",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:40'></a>The `Unhandled SIGSEGV:` message isn't the current message (which is shorter).



---

archive/issue_comments_048424.json:
```json
{
    "body": "<a id='comment:41'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-11-13T21:21:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48424",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:41'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_048425.json:
```json
{
    "body": "<a id='comment:42'></a>Okay, that's what I can do today.  If you really want the code reorganized that badly it will have to fall to you, I'm afraid.  But everything else should be taken care of.",
    "created_at": "2014-11-13T21:22:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48425",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:42'></a>Okay, that's what I can do today.  If you really want the code reorganized that badly it will have to fall to you, I'm afraid.  But everything else should be taken care of.



---

archive/issue_comments_048426.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-11-13T21:22:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48426",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_048427.json:
```json
{
    "body": "<a id='comment:43'></a>I think you have addressed Jeroen's concerns.",
    "created_at": "2014-11-16T08:40:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48427",
    "user": "https://github.com/ppurka"
}
```

<a id='comment:43'></a>I think you have addressed Jeroen's concerns.



---

archive/issue_comments_048428.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-11-16T08:40:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48428",
    "user": "https://github.com/ppurka"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_013969.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-11-17T13:17:56Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5956#event-13969"
}
```



---

archive/issue_comments_048429.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-11-17T13:17:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48429",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_048430.json:
```json
{
    "body": "<a id='comment:45'></a>Followup #17057.",
    "created_at": "2014-11-20T21:51:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5956#issuecomment-48430",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:45'></a>Followup #17057.
