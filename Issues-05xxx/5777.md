# Issue 5777: [with package and patches] update to pynac 0.1.6

archive/issues_005777.json:
```json
{
    "body": "There is a new version of pynac with the following changes:\n\n* Change printing of pi (Pi -> pi)\n* Delay evaluation of special functions until .evalf() is called\n* Add precision parameter to .evalf()\n\nI am opening a new ticket, since the patches require separate review.\n\nThe package is here:\n\nhttp://sage.math.washington.edu/home/burcin/pynac/pynac-0.1.5.spkg\n\nAttached patches need to be applied to Sage, they depend on #5753.\n\nI got an infinite loop trying to convert to `ComplexField` in the second patch, hence the additions to sage/rings/complex_field.py. Robert, am I doing something wrong here?\n\n**Assignee:** @mwhansen\n\n**CC:**  wstein @mwhansen @ncalexan @robertwb\n\nIssue created by migration from https://trac.sagemath.org/ticket/5777\n\n",
    "closed_at": "2009-05-20T23:44:31Z",
    "created_at": "2009-04-13T16:07:10Z",
    "labels": [
        "component: symbolics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.0",
    "title": "[with package and patches] update to pynac 0.1.6",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/5777",
    "user": "https://github.com/burcin"
}
```
There is a new version of pynac with the following changes:

* Change printing of pi (Pi -> pi)
* Delay evaluation of special functions until .evalf() is called
* Add precision parameter to .evalf()

I am opening a new ticket, since the patches require separate review.

The package is here:

http://sage.math.washington.edu/home/burcin/pynac/pynac-0.1.5.spkg

Attached patches need to be applied to Sage, they depend on #5753.

I got an infinite loop trying to convert to `ComplexField` in the second patch, hence the additions to sage/rings/complex_field.py. Robert, am I doing something wrong here?

**Assignee:** @mwhansen

**CC:**  wstein @mwhansen @ncalexan @robertwb

Issue created by migration from https://trac.sagemath.org/ticket/5777





---

archive/issue_comments_038853.json:
```json
{
    "body": "fix doctests for printing changes",
    "created_at": "2009-04-13T16:07:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5777#issuecomment-38853",
    "user": "https://github.com/burcin"
}
```

fix doctests for printing changes



---

archive/attachments_006626.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_5777-02-precision.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5777/trac_5777-02-precision.patch",
    "created_at": "2009-04-24T14:20:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5777",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/burcin"
}
```



---

archive/issue_comments_038854.json:
```json
{
    "body": "allow setting precision for numerical approximation",
    "created_at": "2009-04-24T14:20:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5777#issuecomment-38854",
    "user": "https://github.com/burcin"
}
```

allow setting precision for numerical approximation



---

archive/issue_comments_038855.json:
```json
{
    "body": "<a id='comment:1'></a>\nRebased attachment:trac_5777-02-precision.patch for 3.4.1.",
    "created_at": "2009-04-24T14:21:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5777#issuecomment-38855",
    "user": "https://github.com/burcin"
}
```

<a id='comment:1'></a>
Rebased attachment:trac_5777-02-precision.patch for 3.4.1.



---

archive/issue_comments_038856.json:
```json
{
    "body": "add doctests for exceptions raised during hashing",
    "created_at": "2009-05-05T23:12:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5777#issuecomment-38856",
    "user": "https://github.com/burcin"
}
```

add doctests for exceptions raised during hashing



---

archive/attachments_006627.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_5777-11-hash_doctests.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5777/trac_5777-11-hash_doctests.patch",
    "created_at": "2009-05-05T23:12:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5777",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/burcin"
}
```



---

archive/issue_comments_038857.json:
```json
{
    "body": "support pickling pynac expressions",
    "created_at": "2009-05-05T23:12:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5777#issuecomment-38857",
    "user": "https://github.com/burcin"
}
```

support pickling pynac expressions



---

archive/attachments_006628.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_5777-13-pickle_sfunction.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5777/trac_5777-13-pickle_sfunction.patch",
    "created_at": "2009-05-05T23:13:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5777",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/burcin"
}
```



---

archive/issue_comments_038858.json:
```json
{
    "body": "support pickling symbolic functions",
    "created_at": "2009-05-05T23:13:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5777#issuecomment-38858",
    "user": "https://github.com/burcin"
}
```

support pickling symbolic functions



---

archive/issue_comments_038859.json:
```json
{
    "body": "doctests for the changes in behavior of exp",
    "created_at": "2009-05-05T23:13:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5777#issuecomment-38859",
    "user": "https://github.com/burcin"
}
```

doctests for the changes in behavior of exp



---

archive/attachments_006629.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_5777-14-exp.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5777/trac_5777-14-exp.patch",
    "created_at": "2009-05-05T23:19:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5777",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/burcin"
}
```



---

archive/issue_comments_038860.json:
```json
{
    "body": "<a id='comment:2'></a>\nI put a preliminary version of the new pynac package here:\n\nhttp://sage.math.washington.edu/home/burcin/pynac/pynac-0.1.6.spkg\n\nI haven't actually committed the version information to the pynac repository yet. I plan to wait until this gets reviewed, and see if there are any last minute changes needed.\n\nThe newly uploaded patches:\n\n* attachment:trac_5777-11-hash_doctests.patch\n* attachment:trac_5777-12-pickle_expression.patch\n* attachment:trac_5777-13-pickle_sfunction.patch\n* attachment:trac_5777-14-exp.patch\n\ncorrespond to the changes in the new package.\n\nThe changes in pynac are:\n* Fix error handling in Number_T::hash().\n* Add support for archiving numeric and function objects.\n* Fix comparison bug in mul.\n* Fix gcc warnings about conversion of strings to char*.\n* Change exp to not prints exponents of 1.\n* Add power method to exp so that `(e<sup>x)</sup>y -> e^(x*y)`.\n\nNote that this fixes #5944, which I consider a blocker.",
    "created_at": "2009-05-05T23:19:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5777#issuecomment-38860",
    "user": "https://github.com/burcin"
}
```

<a id='comment:2'></a>
I put a preliminary version of the new pynac package here:

http://sage.math.washington.edu/home/burcin/pynac/pynac-0.1.6.spkg

I haven't actually committed the version information to the pynac repository yet. I plan to wait until this gets reviewed, and see if there are any last minute changes needed.

The newly uploaded patches:

* attachment:trac_5777-11-hash_doctests.patch
* attachment:trac_5777-12-pickle_expression.patch
* attachment:trac_5777-13-pickle_sfunction.patch
* attachment:trac_5777-14-exp.patch

correspond to the changes in the new package.

The changes in pynac are:
* Fix error handling in Number_T::hash().
* Add support for archiving numeric and function objects.
* Fix comparison bug in mul.
* Fix gcc warnings about conversion of strings to char*.
* Change exp to not prints exponents of 1.
* Add power method to exp so that `(e<sup>x)</sup>y -> e^(x*y)`.

Note that this fixes #5944, which I consider a blocker.



---

archive/issue_events_037655.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2009-05-05T23:19:57Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/5777",
    "rename": {
        "from": "[with package and patches] update to pynac 0.1.5",
        "to": "[with package and patches] update to pynac 0.1.6"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5777#event-37655"
}
```



---

archive/issue_events_037656.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2009-05-05T23:19:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5777",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5777#event-37656"
}
```



---

archive/issue_comments_038861.json:
```json
{
    "body": "**Changing assignee** from @burcin to @mwhansen.",
    "created_at": "2009-05-19T01:48:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5777#issuecomment-38861",
    "user": "https://github.com/mwhansen"
}
```

**Changing assignee** from @burcin to @mwhansen.



---

archive/issue_events_037657.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-05-19T01:48:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5777",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5777#event-37657"
}
```



---

archive/issue_comments_038862.json:
```json
{
    "body": "<a id='comment:3'></a>\nI have all of Burcin's changes that apply to 4.0.rc0 in symbolics_final1.patch.  These work with the pynac-0.1.6.spkg.\n\nThese get a positive review from me.  I've based the new symbolics changes on these.",
    "created_at": "2009-05-19T01:48:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5777#issuecomment-38862",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:3'></a>
I have all of Burcin's changes that apply to 4.0.rc0 in symbolics_final1.patch.  These work with the pynac-0.1.6.spkg.

These get a positive review from me.  I've based the new symbolics changes on these.



---

archive/issue_events_037658.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-05-19T01:48:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5777",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5777#event-37658"
}
```



---

archive/issue_events_037659.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2009-05-20T23:44:31Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/5777",
    "milestone": "sage-4.0.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5777#event-37659"
}
```



---

archive/issue_events_037660.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2009-05-20T23:44:31Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/5777",
    "milestone": "sage-4.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5777#event-37660"
}
```



---

archive/attachments_006630.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "symbolics_final1.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5777/symbolics_final1.patch",
    "created_at": "2009-05-20T23:44:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5777",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```



---

archive/issue_comments_038863.json:
```json
{
    "body": "<a id='comment:4'></a>\nMerged in Sage 4.0.rc0.\n\nCheers,\n\nMichael",
    "created_at": "2009-05-20T23:44:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5777",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5777#issuecomment-38863",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:4'></a>
Merged in Sage 4.0.rc0.

Cheers,

Michael



---

archive/issue_events_037661.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2009-05-20T23:44:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5777",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5777#event-37661"
}
```



---

archive/issue_events_037662.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2009-05-20T23:44:31Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/5777",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5777#event-37662"
}
```
