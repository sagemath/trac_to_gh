# Issue 5048: congruence subgroups are not integrated into the coercion model

archive/issues_005048.json:
```json
{
    "body": "\n```\nsage: Gamma0(10).1 * Gamma0(5).2\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n\n/home/ncalexan/.sage/temp/sage.math.washington.edu/4030/_home_ncalexan__sage_init_sage_0.py in <module>()\n----> 1 \n      2 \n      3 \n      4 \n      5 \n\n/scratch/nca/sage-3.3.alpha0-sage.math-only-x86_64-Linux/local/lib/python2.5/site-packages/sage/structure/element.so in sage.structure.element.MonoidElement.__mul__ (sage/structure/element.c:7375)()\n    849 \n    850 \n--> 851 \n    852 \n    853 \n\nTypeError: unsupported operand parent(s) for '*': 'Congruence Subgroup Gamma0(10)' and 'Congruence Subgroup Gamma0(5)'\n```\nApply \n* [attachment:trac_5048-rebased_for_11422.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-rebased_for_11422.patch)\n\n**Assignee:** @craigcitro\n\n**CC:**  GeorgSWeber\n\n**Keywords:** congruence subgroup coercion, sd35\n\n**Author:** David Loeffler\n\n**Reviewer:** Johan Bosman, Georg S. Weber\n\n**Merged:** sage-5.0.beta0\n\nIssue created by migration from https://trac.sagemath.org/ticket/5048\n\n",
    "closed_at": "2012-01-15T21:55:36Z",
    "created_at": "2009-01-21T08:00:00Z",
    "labels": [
        "component: modular forms",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.0",
    "title": "congruence subgroups are not integrated into the coercion model",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/5048",
    "user": "https://github.com/ncalexan"
}
```

```
sage: Gamma0(10).1 * Gamma0(5).2
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)

/home/ncalexan/.sage/temp/sage.math.washington.edu/4030/_home_ncalexan__sage_init_sage_0.py in <module>()
----> 1 
      2 
      3 
      4 
      5 

/scratch/nca/sage-3.3.alpha0-sage.math-only-x86_64-Linux/local/lib/python2.5/site-packages/sage/structure/element.so in sage.structure.element.MonoidElement.__mul__ (sage/structure/element.c:7375)()
    849 
    850 
--> 851 
    852 
    853 

TypeError: unsupported operand parent(s) for '*': 'Congruence Subgroup Gamma0(10)' and 'Congruence Subgroup Gamma0(5)'
```
Apply 
* [attachment:trac_5048-rebased_for_11422.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-rebased_for_11422.patch)

**Assignee:** @craigcitro

**CC:**  GeorgSWeber

**Keywords:** congruence subgroup coercion, sd35

**Author:** David Loeffler

**Reviewer:** Johan Bosman, Georg S. Weber

**Merged:** sage-5.0.beta0

Issue created by migration from https://trac.sagemath.org/ticket/5048





---

archive/issue_events_030909.json:
```json
{
    "actor": "https://github.com/aghitza",
    "created_at": "2009-01-23T07:07:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "label": "bug",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5048#event-30909"
}
```



---

archive/issue_events_030910.json:
```json
{
    "actor": "https://github.com/aghitza",
    "created_at": "2009-01-23T07:07:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "label": "enhancement",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5048#event-30910"
}
```



---

archive/issue_comments_031839.json:
```json
{
    "body": "**Changing assignee** from @williamstein to @craigcitro.",
    "created_at": "2009-07-21T08:22:29Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5048#issuecomment-31839",
    "user": "https://github.com/loefflerd"
}
```

**Changing assignee** from @williamstein to @craigcitro.



---

archive/issue_events_030911.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2009-07-21T08:22:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "label": "component: number theory",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5048#event-30911"
}
```



---

archive/issue_events_030912.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2009-07-21T08:22:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "label": "component: modular forms",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5048#event-30912"
}
```



---

archive/attachments_005869.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_5048-sl2z_coercion.patch",
    "asset_url": "tarball://root/attachments/ticket5048/trac_5048-sl2z_coercion.patch",
    "created_at": "2010-12-09T20:51:47Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket5048/trac_5048-sl2z_coercion.patch",
    "user": "https://github.com/loefflerd"
}
```



---

archive/issue_comments_031840.json:
```json
{
    "body": "**Attachment:** [trac_5048-sl2z_coercion.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-sl2z_coercion.patch)\n\npatch against 4.6.1.alpha3",
    "created_at": "2010-12-09T20:51:47Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5048#issuecomment-31840",
    "user": "https://github.com/loefflerd"
}
```

**Attachment:** [trac_5048-sl2z_coercion.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-sl2z_coercion.patch)

patch against 4.6.1.alpha3



---

archive/issue_comments_031841.json:
```json
{
    "body": "**Author:** David Loeffler",
    "created_at": "2010-12-09T20:56:48Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5048#issuecomment-31841",
    "user": "https://github.com/loefflerd"
}
```

**Author:** David Loeffler



---

archive/issue_events_030913.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2010-12-09T20:56:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5048#event-30913"
}
```



---

archive/issue_comments_031842.json:
```json
{
    "body": "<a id='comment:3'></a>\nHere's a patch. I thought the simplest solution was to arrange that the parent of all congruence subgroup elements was always the (globally unique) SL2Z object, i.e. to make the various subgroup classes \"facade parents\" (like the prime integers example in the category docs).",
    "created_at": "2010-12-09T20:56:48Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5048#issuecomment-31842",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:3'></a>
Here's a patch. I thought the simplest solution was to arrange that the parent of all congruence subgroup elements was always the (globally unique) SL2Z object, i.e. to make the various subgroup classes "facade parents" (like the prime integers example in the category docs).



---

archive/attachments_005870.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_5048-sl2z_coercion-rebased_for_10452.patch",
    "asset_url": "tarball://root/attachments/ticket5048/trac_5048-sl2z_coercion-rebased_for_10452.patch",
    "created_at": "2010-12-09T21:06:36Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket5048/trac_5048-sl2z_coercion-rebased_for_10452.patch",
    "user": "https://github.com/loefflerd"
}
```



---

archive/issue_comments_031843.json:
```json
{
    "body": "**Attachment:** [trac_5048-sl2z_coercion-rebased_for_10452.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-sl2z_coercion-rebased_for_10452.patch)\n\nVersion that will apply happily after #10452",
    "created_at": "2010-12-09T21:06:36Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5048#issuecomment-31843",
    "user": "https://github.com/loefflerd"
}
```

**Attachment:** [trac_5048-sl2z_coercion-rebased_for_10452.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-sl2z_coercion-rebased_for_10452.patch)

Version that will apply happily after #10452



---

archive/issue_comments_031844.json:
```json
{
    "body": "<a id='comment:4'></a>\nI just realised that the patch I just uploaded conflicts, in a rather trivial way, with the patch at #10452. The second patch will apply on top of the patch at #10452. The two patches are identical other than one line of diff context.",
    "created_at": "2010-12-09T21:11:33Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5048#issuecomment-31844",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:4'></a>
I just realised that the patch I just uploaded conflicts, in a rather trivial way, with the patch at #10452. The second patch will apply on top of the patch at #10452. The two patches are identical other than one line of diff context.



---

archive/issue_comments_031845.json:
```json
{
    "body": "<a id='comment:5'></a>\nOh dear, it looks like the trac buildbot is trying to apply both patches at once, hence the red light! But it seems to have done one successful run with only the first patch installed.",
    "created_at": "2010-12-11T16:16:33Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5048#issuecomment-31845",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:5'></a>
Oh dear, it looks like the trac buildbot is trying to apply both patches at once, hence the red light! But it seems to have done one successful run with only the first patch installed.



---

archive/issue_comments_031846.json:
```json
{
    "body": "<a id='comment:6'></a>\nApply trac_5048-sl2z_coercion-rebased_for_10452.patch\nDepends on #10452",
    "created_at": "2010-12-31T14:51:26Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5048#issuecomment-31846",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:6'></a>
Apply trac_5048-sl2z_coercion-rebased_for_10452.patch
Depends on #10452



---

archive/issue_events_030914.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2011-01-25T15:40:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "label": "minor",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5048#event-30914"
}
```



---

archive/issue_comments_031847.json:
```json
{
    "body": "version rebased to 4.7.1.alpha4 + #11422",
    "created_at": "2011-07-15T15:27:59Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5048#issuecomment-31847",
    "user": "https://github.com/loefflerd"
}
```

version rebased to 4.7.1.alpha4 + #11422



---

archive/attachments_005871.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_5048-rebased_for_11422.patch",
    "asset_url": "tarball://root/attachments/ticket5048/trac_5048-rebased_for_11422.patch",
    "created_at": "2011-07-15T15:29:44Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket5048/trac_5048-rebased_for_11422.patch",
    "user": "https://github.com/loefflerd"
}
```



---

archive/issue_comments_031848.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Attachment:** [trac_5048-rebased_for_11422.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-rebased_for_11422.patch)\n\nI've uploaded a version that is rebased to apply happily over the positively-reviewed patch #11422. This is intended to form part of a series #10335 - #11422 - #11598 - this ticket - #10453 -\n #11601; but the patch itself is **independent** of #11598 and of the tickets later in the series.",
    "created_at": "2011-07-15T15:29:44Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5048#issuecomment-31848",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:8'></a>
**Attachment:** [trac_5048-rebased_for_11422.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-rebased_for_11422.patch)

I've uploaded a version that is rebased to apply happily over the positively-reviewed patch #11422. This is intended to form part of a series #10335 - #11422 - #11598 - this ticket - #10453 -
 #11601; but the patch itself is **independent** of #11598 and of the tickets later in the series.



---

archive/issue_comments_031849.json:
```json
{
    "body": "<a id='comment:9'></a>\nI'm raising the priority of this to \"major\" since it is a prerequisite for the (much more significant) patch #11601.",
    "created_at": "2011-07-17T10:14:34Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5048#issuecomment-31849",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:9'></a>
I'm raising the priority of this to "major" since it is a prerequisite for the (much more significant) patch #11601.



---

archive/issue_events_030915.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2011-07-17T10:14:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "label": "minor",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5048#event-30915"
}
```



---

archive/issue_comments_031850.json:
```json
{
    "body": "<a id='comment:11'></a>\nHmmm,\nis there a quick and easy explanation for the change in the last line of the patch (file \"sage/modular/modform/constructor.py\")?\n\n- 87\t \t         <class 'sage.modular.arithgroup.congroup_gamma0.Gamma0_class'>, \n\n+ 87\t         <class 'sage.modular.arithgroup.congroup_gamma0.Gamma0_class_with_category'>, \n\n\nI mean, this might be necessary, but due to the rest of this patch or due to some earlier patch??",
    "created_at": "2011-08-10T18:21:00Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5048#issuecomment-31850",
    "user": "https://trac.sagemath.org/admin/accounts/users/GeorgSWeber"
}
```

<a id='comment:11'></a>
Hmmm,
is there a quick and easy explanation for the change in the last line of the patch (file "sage/modular/modform/constructor.py")?

- 87	 	         <class 'sage.modular.arithgroup.congroup_gamma0.Gamma0_class'>, 

+ 87	         <class 'sage.modular.arithgroup.congroup_gamma0.Gamma0_class_with_category'>, 


I mean, this might be necessary, but due to the rest of this patch or due to some earlier patch??



---

archive/issue_comments_031851.json:
```json
{
    "body": "<a id='comment:12'></a>\nIt is necessary because the arithmetic subgroup init routine now calls ` Group.__init__ `, which was not previously the case. The group init routine subsequently calls various other init routines that link arithmetic subgroups into Sage's category framework, with all of its baroque subtleties involving dynamic classes etc.",
    "created_at": "2011-08-22T08:15:54Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5048#issuecomment-31851",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:12'></a>
It is necessary because the arithmetic subgroup init routine now calls ` Group.__init__ `, which was not previously the case. The group init routine subsequently calls various other init routines that link arithmetic subgroups into Sage's category framework, with all of its baroque subtleties involving dynamic classes etc.



---

archive/issue_comments_031852.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -20,3 +20,9 @@\n \n TypeError: unsupported operand parent(s) for '*': 'Congruence Subgroup Gamma0(10)' and 'Congruence Subgroup Gamma0(5)'\n ```\n+Apply *either*\n+\n+* [attachment: trac_5048-sl2z_coercion-rebased_for_10452.patch] (which should apply cleanly to any recent Sage version -- current is 4.7.2.alpha2 as I write this)\n+* or the patches at #10335 and #11422, together with [attachment: trac_5048-rebased_for_11422.patch].\n+\n+(There is no difference in functionality either way, it's just that the original patch won't apply because some context lines changed.)\n``````\n",
    "created_at": "2011-09-19T12:10:01Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5048#issuecomment-31852",
    "user": "https://github.com/loefflerd"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -20,3 +20,9 @@
 
 TypeError: unsupported operand parent(s) for '*': 'Congruence Subgroup Gamma0(10)' and 'Congruence Subgroup Gamma0(5)'
 ```
+Apply *either*
+
+* [attachment: trac_5048-sl2z_coercion-rebased_for_10452.patch] (which should apply cleanly to any recent Sage version -- current is 4.7.2.alpha2 as I write this)
+* or the patches at #10335 and #11422, together with [attachment: trac_5048-rebased_for_11422.patch].
+
+(There is no difference in functionality either way, it's just that the original patch won't apply because some context lines changed.)
``````




---

archive/issue_comments_031853.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -22,7 +22,7 @@\n ```\n Apply *either*\n \n-* [attachment: trac_5048-sl2z_coercion-rebased_for_10452.patch] (which should apply cleanly to any recent Sage version -- current is 4.7.2.alpha2 as I write this)\n-* or the patches at #10335 and #11422, together with [attachment: trac_5048-rebased_for_11422.patch].\n+* [attachment:trac_5048-sl2z_coercion-rebased_for_10452.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-sl2z_coercion-rebased_for_10452.patch) (which should apply cleanly to any recent Sage version -- current is 4.7.2.alpha2 as I write this)\n+* or the patches at #10335 and #11422, together with [attachment:trac_5048-rebased_for_11422.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-rebased_for_11422.patch).\n \n (There is no difference in functionality either way, it's just that the original patch won't apply because some context lines changed.)\n``````\n",
    "created_at": "2011-09-19T12:17:39Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5048#issuecomment-31853",
    "user": "https://github.com/loefflerd"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -22,7 +22,7 @@
 ```
 Apply *either*
 
-* [attachment: trac_5048-sl2z_coercion-rebased_for_10452.patch] (which should apply cleanly to any recent Sage version -- current is 4.7.2.alpha2 as I write this)
-* or the patches at #10335 and #11422, together with [attachment: trac_5048-rebased_for_11422.patch].
+* [attachment:trac_5048-sl2z_coercion-rebased_for_10452.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-sl2z_coercion-rebased_for_10452.patch) (which should apply cleanly to any recent Sage version -- current is 4.7.2.alpha2 as I write this)
+* or the patches at #10335 and #11422, together with [attachment:trac_5048-rebased_for_11422.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-rebased_for_11422.patch).
 
 (There is no difference in functionality either way, it's just that the original patch won't apply because some context lines changed.)
``````




---

archive/issue_comments_031854.json:
```json
{
    "body": "<a id='comment:14'></a>\nGeorg: did you get any chance to look at this again? Since #11422 is still waiting around, I've clarified the description to point out that both the pre-#11422 and post-#11422 patches exist and are equally valid.",
    "created_at": "2011-09-19T12:17:39Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5048#issuecomment-31854",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:14'></a>
Georg: did you get any chance to look at this again? Since #11422 is still waiting around, I've clarified the description to point out that both the pre-#11422 and post-#11422 patches exist and are equally valid.



---

archive/issue_comments_031855.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -22,7 +22,7 @@\n ```\n Apply *either*\n \n-* [attachment:trac_5048-sl2z_coercion-rebased_for_10452.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-sl2z_coercion-rebased_for_10452.patch) (which should apply cleanly to any recent Sage version -- current is 4.7.2.alpha2 as I write this)\n-* or the patches at #10335 and #11422, together with [attachment:trac_5048-rebased_for_11422.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-rebased_for_11422.patch).\n+* [attachment:trac_5048-sl2z_coercion-rebased_for_10452.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-sl2z_coercion-rebased_for_10452.patch) if using Sage 4.7.2.alpha2 or earlier,\n+* [attachment:trac_5048-rebased_for_11422.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-rebased_for_11422.patch) if using Sage 4.7.2.alpha3 or later.\n \n (There is no difference in functionality either way, it's just that the original patch won't apply because some context lines changed.)\n``````\n",
    "created_at": "2011-10-06T15:51:21Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5048#issuecomment-31855",
    "user": "https://github.com/loefflerd"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -22,7 +22,7 @@
 ```
 Apply *either*
 
-* [attachment:trac_5048-sl2z_coercion-rebased_for_10452.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-sl2z_coercion-rebased_for_10452.patch) (which should apply cleanly to any recent Sage version -- current is 4.7.2.alpha2 as I write this)
-* or the patches at #10335 and #11422, together with [attachment:trac_5048-rebased_for_11422.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-rebased_for_11422.patch).
+* [attachment:trac_5048-sl2z_coercion-rebased_for_10452.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-sl2z_coercion-rebased_for_10452.patch) if using Sage 4.7.2.alpha2 or earlier,
+* [attachment:trac_5048-rebased_for_11422.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-rebased_for_11422.patch) if using Sage 4.7.2.alpha3 or later.
 
 (There is no difference in functionality either way, it's just that the original patch won't apply because some context lines changed.)
``````




---

archive/issue_events_030916.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/johanbosman",
    "created_at": "2011-12-17T15:55:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5048#event-30916"
}
```



---

archive/issue_events_030917.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/johanbosman",
    "created_at": "2011-12-17T15:55:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5048#event-30917"
}
```



---

archive/issue_comments_031856.json:
```json
{
    "body": "<a id='comment:16'></a>\nThe patch still applies to 4.8.alpha4, the code looks sound, and all tests in sage.modular pass.",
    "created_at": "2011-12-17T15:55:09Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5048#issuecomment-31856",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

<a id='comment:16'></a>
The patch still applies to 4.8.alpha4, the code looks sound, and all tests in sage.modular pass.



---

archive/issue_comments_031857.json:
```json
{
    "body": "**Reviewer:** Johan Bosman",
    "created_at": "2011-12-17T15:55:09Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5048#issuecomment-31857",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

**Reviewer:** Johan Bosman



---

archive/issue_comments_031858.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -20,9 +20,5 @@\n \n TypeError: unsupported operand parent(s) for '*': 'Congruence Subgroup Gamma0(10)' and 'Congruence Subgroup Gamma0(5)'\n ```\n-Apply *either*\n-\n-* [attachment:trac_5048-sl2z_coercion-rebased_for_10452.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-sl2z_coercion-rebased_for_10452.patch) if using Sage 4.7.2.alpha2 or earlier,\n-* [attachment:trac_5048-rebased_for_11422.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-rebased_for_11422.patch) if using Sage 4.7.2.alpha3 or later.\n-\n-(There is no difference in functionality either way, it's just that the original patch won't apply because some context lines changed.)\n+Apply \n+* [attachment:trac_5048-rebased_for_11422.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-rebased_for_11422.patch)\n``````\n",
    "created_at": "2011-12-17T15:55:09Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5048#issuecomment-31858",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -20,9 +20,5 @@
 
 TypeError: unsupported operand parent(s) for '*': 'Congruence Subgroup Gamma0(10)' and 'Congruence Subgroup Gamma0(5)'
 ```
-Apply *either*
-
-* [attachment:trac_5048-sl2z_coercion-rebased_for_10452.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-sl2z_coercion-rebased_for_10452.patch) if using Sage 4.7.2.alpha2 or earlier,
-* [attachment:trac_5048-rebased_for_11422.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-rebased_for_11422.patch) if using Sage 4.7.2.alpha3 or later.
-
-(There is no difference in functionality either way, it's just that the original patch won't apply because some context lines changed.)
+Apply 
+* [attachment:trac_5048-rebased_for_11422.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-rebased_for_11422.patch)
``````




---

archive/issue_comments_031859.json:
```json
{
    "body": "<a id='comment:17'></a>\nHi Johan,\nthanks for looking at this one (I guess you're on SD 35 --- if so, I do envy you)!!\n\nI dimly remember that this patch introduced a function with a missing doctest in \"sage/modular/arithgroup/congroup_sl2z.py\":\n\n \t96\t    def __call__(self, x, check=True): \n \t97\t        r\"\"\" \n \t98\t        Create an element of self from x. If check=True (the default), check \n \t99\t        that x really defines a 2x2 integer matrix of det 1. \n \t100\t        \"\"\" \n \t101\t        return ArithmeticSubgroupElement(self, x, check=check) \n \t102\t \n\n\nI'm sorry I never got round to poke David about that (otherwise, the changes were OK for me) --- could you please have second look and check that independently (\"sage --coverage ...modular/arithgroups/\" or the like should show it)?\n\nThanks a lot in advance!\n\n\nCheers,\nGeorg",
    "created_at": "2011-12-17T20:51:57Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5048#issuecomment-31859",
    "user": "https://trac.sagemath.org/admin/accounts/users/GeorgSWeber"
}
```

<a id='comment:17'></a>
Hi Johan,
thanks for looking at this one (I guess you're on SD 35 --- if so, I do envy you)!!

I dimly remember that this patch introduced a function with a missing doctest in "sage/modular/arithgroup/congroup_sl2z.py":

 	96	    def __call__(self, x, check=True): 
 	97	        r""" 
 	98	        Create an element of self from x. If check=True (the default), check 
 	99	        that x really defines a 2x2 integer matrix of det 1. 
 	100	        """ 
 	101	        return ArithmeticSubgroupElement(self, x, check=check) 
 	102	 


I'm sorry I never got round to poke David about that (otherwise, the changes were OK for me) --- could you please have second look and check that independently ("sage --coverage ...modular/arithgroups/" or the like should show it)?

Thanks a lot in advance!


Cheers,
Georg



---

archive/issue_comments_031860.json:
```json
{
    "body": "<a id='comment:18'></a>\nGood catch, Georg! I will upload a patch shortly with the missing doctest, bringing doctest coverage in sage/modular back up to 100%. Georg, Johan: would either of you mind taking a quick look at the new patch?",
    "created_at": "2011-12-17T22:34:13Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5048#issuecomment-31860",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:18'></a>
Good catch, Georg! I will upload a patch shortly with the missing doctest, bringing doctest coverage in sage/modular back up to 100%. Georg, Johan: would either of you mind taking a quick look at the new patch?



---

archive/issue_events_030918.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2011-12-17T22:34:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5048#event-30918"
}
```



---

archive/issue_events_030919.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2011-12-17T22:34:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5048#event-30919"
}
```



---

archive/issue_comments_031861.json:
```json
{
    "body": "apply over previous patch",
    "created_at": "2011-12-17T22:34:38Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5048#issuecomment-31861",
    "user": "https://github.com/loefflerd"
}
```

apply over previous patch



---

archive/issue_comments_031862.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -22,3 +22,4 @@\n ```\n Apply \n * [attachment:trac_5048-rebased_for_11422.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-rebased_for_11422.patch)\n+* [attachment:trac_5048-missingdoctest.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-missingdoctest.patch)\n``````\n",
    "created_at": "2011-12-17T22:35:40Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5048#issuecomment-31862",
    "user": "https://github.com/loefflerd"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -22,3 +22,4 @@
 ```
 Apply 
 * [attachment:trac_5048-rebased_for_11422.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-rebased_for_11422.patch)
+* [attachment:trac_5048-missingdoctest.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-missingdoctest.patch)
``````




---

archive/issue_comments_031863.json:
```json
{
    "body": "**Changing reviewer** from \"Johan Bosman\" to \"Johan Bosman, Georg S. Weber\".",
    "created_at": "2011-12-17T22:35:40Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5048#issuecomment-31863",
    "user": "https://github.com/loefflerd"
}
```

**Changing reviewer** from "Johan Bosman" to "Johan Bosman, Georg S. Weber".



---

archive/issue_events_030920.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2011-12-17T22:35:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5048#event-30920"
}
```



---

archive/issue_events_030921.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2011-12-17T22:35:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5048#event-30921"
}
```



---

archive/attachments_005872.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_5048-missingdoctest.patch",
    "asset_url": "tarball://root/attachments/ticket5048/trac_5048-missingdoctest.patch",
    "created_at": "2011-12-17T22:35:40Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket5048/trac_5048-missingdoctest.patch",
    "user": "https://github.com/loefflerd"
}
```



---

archive/issue_comments_031864.json:
```json
{
    "body": "<a id='comment:19'></a>\n**Attachment:** [trac_5048-missingdoctest.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-missingdoctest.patch)",
    "created_at": "2011-12-17T22:35:40Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5048#issuecomment-31864",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:19'></a>
**Attachment:** [trac_5048-missingdoctest.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-missingdoctest.patch)



---

archive/attachments_005873.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_5048-missingdoctest.2.patch",
    "asset_url": "tarball://root/attachments/ticket5048/trac_5048-missingdoctest.2.patch",
    "created_at": "2011-12-17T22:39:29Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket5048/trac_5048-missingdoctest.2.patch",
    "user": "https://github.com/loefflerd"
}
```



---

archive/issue_comments_031865.json:
```json
{
    "body": "**Attachment:** [trac_5048-missingdoctest.2.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-missingdoctest.2.patch)\n\nNOT NEEDED! See comments",
    "created_at": "2011-12-17T22:39:29Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5048#issuecomment-31865",
    "user": "https://github.com/loefflerd"
}
```

**Attachment:** [trac_5048-missingdoctest.2.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-missingdoctest.2.patch)

NOT NEEDED! See comments



---

archive/issue_events_030922.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2011-12-17T22:43:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5048#event-30922"
}
```



---

archive/issue_events_030923.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2011-12-17T22:43:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5048#event-30923"
}
```



---

archive/issue_comments_031866.json:
```json
{
    "body": "<a id='comment:20'></a>\nHang on a minute.\n\nIt is true that there is a doctest missing for this call method, but the missing doctest gets added in the next patch in the series (#11601). So I think we can ignore it here, since #11601 has a positive review; and I can safely reinstate Johan's positive review. \n\nSo: **ignore** the patch(es) I just uploaded -- it is not needed. I tried to obliterate the first patch by uploading a new blank patch on top of it, but made a hash of that. Perhaps it's time I went to bed.",
    "created_at": "2011-12-17T22:43:17Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5048#issuecomment-31866",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:20'></a>
Hang on a minute.

It is true that there is a doctest missing for this call method, but the missing doctest gets added in the next patch in the series (#11601). So I think we can ignore it here, since #11601 has a positive review; and I can safely reinstate Johan's positive review. 

So: **ignore** the patch(es) I just uploaded -- it is not needed. I tried to obliterate the first patch by uploading a new blank patch on top of it, but made a hash of that. Perhaps it's time I went to bed.



---

archive/issue_comments_031867.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -22,4 +22,3 @@\n ```\n Apply \n * [attachment:trac_5048-rebased_for_11422.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-rebased_for_11422.patch)\n-* [attachment:trac_5048-missingdoctest.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-missingdoctest.patch)\n``````\n",
    "created_at": "2011-12-17T22:43:17Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5048#issuecomment-31867",
    "user": "https://github.com/loefflerd"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -22,4 +22,3 @@
 ```
 Apply 
 * [attachment:trac_5048-rebased_for_11422.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-rebased_for_11422.patch)
-* [attachment:trac_5048-missingdoctest.patch](https://github.com/sagemath/sage/files/ticket5048/trac_5048-missingdoctest.patch)
``````




---

archive/issue_comments_031868.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [davidloeffler](#comment%3A20):\n> Hang on a minute.\n> \n> It is true that there is a doctest missing for this call method, but the missing doctest gets added in the next patch in the series (#11601). So I think we can ignore it here, since #11601 has a positive review; and I can safely reinstate Johan's positive review. \n> \n> So: **ignore** the patch(es) I just uploaded -- it is not needed. I tried to obliterate the first patch by uploading a new blank patch on top of it, but made a hash of that. Perhaps it's time I went to bed.\n\nIndeed.  I was about to mention the same thing, but your comment crossed mine. :).",
    "created_at": "2011-12-17T22:51:36Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5048#issuecomment-31868",
    "user": "https://trac.sagemath.org/admin/accounts/users/johanbosman"
}
```

<a id='comment:21'></a>
Replying to [davidloeffler](#comment%3A20):
> Hang on a minute.
> 
> It is true that there is a doctest missing for this call method, but the missing doctest gets added in the next patch in the series (#11601). So I think we can ignore it here, since #11601 has a positive review; and I can safely reinstate Johan's positive review. 
> 
> So: **ignore** the patch(es) I just uploaded -- it is not needed. I tried to obliterate the first patch by uploading a new blank patch on top of it, but made a hash of that. Perhaps it's time I went to bed.

Indeed.  I was about to mention the same thing, but your comment crossed mine. :).



---

archive/issue_comments_031869.json:
```json
{
    "body": "**Changing keywords** from \"congruence subgroup coercion\" to \"congruence subgroup coercion, sd35\".",
    "created_at": "2011-12-21T15:26:48Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5048#issuecomment-31869",
    "user": "https://github.com/saraedum"
}
```

**Changing keywords** from "congruence subgroup coercion" to "congruence subgroup coercion, sd35".



---

archive/issue_events_030924.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-22T16:39:26Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "milestone": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5048#event-30924"
}
```



---

archive/issue_events_030925.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-22T16:39:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "milestone": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5048#event-30925"
}
```



---

archive/issue_events_030926.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-15T21:55:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5048#event-30926"
}
```



---

archive/issue_events_030927.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-15T21:55:36Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5048#event-30927"
}
```



---

archive/issue_comments_031870.json:
```json
{
    "body": "**Merged:** sage-5.0.beta0",
    "created_at": "2012-01-15T21:55:36Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5048#issuecomment-31870",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.0.beta0



---

archive/issue_comments_031871.json:
```json
{
    "body": "<a id='comment:25'></a>\nApply trac_5048-rebased_for_11422.patch\n\n(for the patchbot, so it can understand the prerequisites for #11709)",
    "created_at": "2012-03-10T14:17:07Z",
    "issue": "https://github.com/sagemath/sage/issues/5048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5048#issuecomment-31871",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:25'></a>
Apply trac_5048-rebased_for_11422.patch

(for the patchbot, so it can understand the prerequisites for #11709)
