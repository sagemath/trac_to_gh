# Issue 5566: Symmetric Groebner bases and Infinitely Generated Polynomial Rings

archive/issues_005566.json:
```json
{
    "body": "*Attachments*\nPlease only use the attachment 'SymmetricIdeals.patch' and disregard the other attachments (I don't know how to delete them. It should apply to `sage-3.4.1.rc2`.\n\n**Symmetric Ideals** were introduced by [Aschenbrenner and Hillar](http://de.arxiv.org/abs/math/0411514/), meaning \"ideals in polynomial rings with countably many variables that are set-wise invariant under all variable permutations\"; it was shown that they are finitely generated. \n\nLater on, Aschenbrenner and Hillar also presented a [Buchberger algorithm](http://de.arxiv.org/abs/0801.4439/) for Symmetric Ideals. \n\nMy aim is to implement this into Sage. The patch provides classes for the Polynomial Rings with countably many variables, their elements and their ideals. The methods implement basic polynomial arithmetic, the permutation action, the *Symmetric Cancellation Order* (a notion that is central in the work of Aschenbrenner and Hillar), symmetric reduction, and the computation of Gr\u00f6bner bases.\n\nHere are some examples showing the main features\n\n```\nsage: X.<x,y> = InfinitePolynomialRing(QQ)\n```\n\nNow, x and y are generators of X, meaning that we have two infinite sequences of variables, one obtained by `x[n]` and the other by `y[m]` for integers m, n.\n\nWe can do polynomial arithmetic in X, and we can create ideals in the usual way:\n\n```\nsage: I=X*(x[1]^2+y[2]^2,x[1]*x[2]*y[3]+x[1]*y[4])\n```\n\nNow, we can compute a Gr\u00f6bner basis; the default monomial order is lexicographic (see below).\n\n```\nsage: J=I.groebner_basis()\nsage: J\n[x1^4 + x1^3, x2*x1^2 - x1^3, x2^2 - x1^2, y1*x1^3 + y1*x1^2, y1*x2 + y1*x1^2, y1^2 + x1^2, y2*x1 + y1*x1^2]\n```\n\nWe can do ideal membership test by computing normal forms (symmetric reduction):\n\n```\nsage: I.reduce(J)\nSymmetric Ideal (0, 0) of Infinite polynomial ring in x, y over Rational Field\n```\n\nNote that J is not point-wise symmetric. E.g., we have\n\n```\nsage: P=Permutation([1, 4, 3, 2])\nsage: J[2]\nx2^2 - x1^2\nsage: J[2]^P\nx4^2 - x1^2\nsage: J.__contains__(J[2]^P)\nFalse\n```\n\nBut it is set-wise symmetric, e.g.:\n\n```\nsage: [[(p^P).reduce(J) for p in J] for P in Permutations(4)]\n\n[[0, 0, 0, 0, 0, 0, 0],\n [0, 0, 0, 0, 0, 0, 0],\n [0, 0, 0, 0, 0, 0, 0],\n [0, 0, 0, 0, 0, 0, 0],\n [0, 0, 0, 0, 0, 0, 0],\n [0, 0, 0, 0, 0, 0, 0],\n [0, 0, 0, 0, 0, 0, 0],\n [0, 0, 0, 0, 0, 0, 0],\n [0, 0, 0, 0, 0, 0, 0],\n [0, 0, 0, 0, 0, 0, 0],\n [0, 0, 0, 0, 0, 0, 0],\n [0, 0, 0, 0, 0, 0, 0],\n [0, 0, 0, 0, 0, 0, 0],\n [0, 0, 0, 0, 0, 0, 0],\n [0, 0, 0, 0, 0, 0, 0],\n [0, 0, 0, 0, 0, 0, 0],\n [0, 0, 0, 0, 0, 0, 0],\n [0, 0, 0, 0, 0, 0, 0],\n [0, 0, 0, 0, 0, 0, 0],\n [0, 0, 0, 0, 0, 0, 0],\n [0, 0, 0, 0, 0, 0, 0],\n [0, 0, 0, 0, 0, 0, 0],\n [0, 0, 0, 0, 0, 0, 0],\n [0, 0, 0, 0, 0, 0, 0]]\n```\n\nAs usual, it is a special feature of Gr\u00f6bner bases that they produce unique normal forms. I is not a Gr\u00f6bner basis, and thus ideal membership test wouldn't work:\n\n```\nsage: [p.reduce(I) for p in J]\n\n[x1^4 + x1^3,\n x2*x1^2 - x1^3,\n x2^2 - x1^2,\n y1*x1^3 + y1*x1^2,\n y1*x2 + y1*x1^2,\n y1^2 + x1^2,\n y2*x1 + y1*x1^2]\n```\n\nNote that various monomial orders are supported: lex (default), deglex, and degrevlex. \n\nAschenbrenner and Hillar obtained their results using lexicographic order, and it is not entirely clear whether the Buchberger algorithm would terminate in the other orders, too. But here, it does. As usual, the Gr\u00f6bner basis depends on the ordering:\n\n```\nsage: Y.<x,y> = InfinitePolynomialRing(QQ,order='degrevlex')\nsage: I2=Y*(x[1]^2+y[2]^2,x[1]*x[2]*y[3]+x[1]*y[4])\nsage: J2=I2.groebner_basis()\nsage: J2\n[y3*x1 - y2*x1, x2^2 - x1^2, y1*x2 - y2*x1, y1^2 + x1^2, x2*x1^2 - x1^3, y1*x1^2 + y2*x1, y2*x1^2 + y2*x1, y2*x2*x1 + y2*x1, y2*y1*x1 + x1^3, x1^4 + x1^3]\n```\n\nNote that we assume an automatic (name-preserving) conversion between X and Y. Hence, we can do the following and see that J is no *degrevlex* Gr\u00f6bner basis:\n\n```\nsage: [p.reduce(J) for p in J2]\n[y3*x1 - y2*x1,\n 0,\n 0,\n 0,\n 0,\n 0,\n y2*x1^2 + y2*x1,\n y2*x2*x1 + y2*x1,\n y2*y1*x1 + x1^3,\n 0]\n```\n\nIn any order, we insist to have `X.gen(i)[m]<X.gen(j)[n]` if and only if i<j or (i==j and m<n).\n\nI overloaded the `__pow__` and `__mul__` methods for Symmetric Ideals, since the default methods do not give the correct result: We must have \n\n```\nsage: (X*(x[1]))^2 == X*(x[1]^2,x[1]*x[2])\nTrue\n```\n\n\n**Assignee:** @simon-king-jena\n\n**CC:**  @mwhansen @malb\n\n**Keywords:** Symmetric Ideal\n\nIssue created by migration from https://trac.sagemath.org/ticket/5566\n\n",
    "closed_at": "2009-05-15T07:37:51Z",
    "created_at": "2009-03-19T15:25:02Z",
    "labels": [
        "component: commutative algebra",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.0",
    "title": "Symmetric Groebner bases and Infinitely Generated Polynomial Rings",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/5566",
    "user": "https://github.com/simon-king-jena"
}
```
*Attachments*
Please only use the attachment 'SymmetricIdeals.patch' and disregard the other attachments (I don't know how to delete them. It should apply to `sage-3.4.1.rc2`.

**Symmetric Ideals** were introduced by [Aschenbrenner and Hillar](http://de.arxiv.org/abs/math/0411514/), meaning "ideals in polynomial rings with countably many variables that are set-wise invariant under all variable permutations"; it was shown that they are finitely generated. 

Later on, Aschenbrenner and Hillar also presented a [Buchberger algorithm](http://de.arxiv.org/abs/0801.4439/) for Symmetric Ideals. 

My aim is to implement this into Sage. The patch provides classes for the Polynomial Rings with countably many variables, their elements and their ideals. The methods implement basic polynomial arithmetic, the permutation action, the *Symmetric Cancellation Order* (a notion that is central in the work of Aschenbrenner and Hillar), symmetric reduction, and the computation of Gröbner bases.

Here are some examples showing the main features

```
sage: X.<x,y> = InfinitePolynomialRing(QQ)
```

Now, x and y are generators of X, meaning that we have two infinite sequences of variables, one obtained by `x[n]` and the other by `y[m]` for integers m, n.

We can do polynomial arithmetic in X, and we can create ideals in the usual way:

```
sage: I=X*(x[1]^2+y[2]^2,x[1]*x[2]*y[3]+x[1]*y[4])
```

Now, we can compute a Gröbner basis; the default monomial order is lexicographic (see below).

```
sage: J=I.groebner_basis()
sage: J
[x1^4 + x1^3, x2*x1^2 - x1^3, x2^2 - x1^2, y1*x1^3 + y1*x1^2, y1*x2 + y1*x1^2, y1^2 + x1^2, y2*x1 + y1*x1^2]
```

We can do ideal membership test by computing normal forms (symmetric reduction):

```
sage: I.reduce(J)
Symmetric Ideal (0, 0) of Infinite polynomial ring in x, y over Rational Field
```

Note that J is not point-wise symmetric. E.g., we have

```
sage: P=Permutation([1, 4, 3, 2])
sage: J[2]
x2^2 - x1^2
sage: J[2]^P
x4^2 - x1^2
sage: J.__contains__(J[2]^P)
False
```

But it is set-wise symmetric, e.g.:

```
sage: [[(p^P).reduce(J) for p in J] for P in Permutations(4)]

[[0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0]]
```

As usual, it is a special feature of Gröbner bases that they produce unique normal forms. I is not a Gröbner basis, and thus ideal membership test wouldn't work:

```
sage: [p.reduce(I) for p in J]

[x1^4 + x1^3,
 x2*x1^2 - x1^3,
 x2^2 - x1^2,
 y1*x1^3 + y1*x1^2,
 y1*x2 + y1*x1^2,
 y1^2 + x1^2,
 y2*x1 + y1*x1^2]
```

Note that various monomial orders are supported: lex (default), deglex, and degrevlex. 

Aschenbrenner and Hillar obtained their results using lexicographic order, and it is not entirely clear whether the Buchberger algorithm would terminate in the other orders, too. But here, it does. As usual, the Gröbner basis depends on the ordering:

```
sage: Y.<x,y> = InfinitePolynomialRing(QQ,order='degrevlex')
sage: I2=Y*(x[1]^2+y[2]^2,x[1]*x[2]*y[3]+x[1]*y[4])
sage: J2=I2.groebner_basis()
sage: J2
[y3*x1 - y2*x1, x2^2 - x1^2, y1*x2 - y2*x1, y1^2 + x1^2, x2*x1^2 - x1^3, y1*x1^2 + y2*x1, y2*x1^2 + y2*x1, y2*x2*x1 + y2*x1, y2*y1*x1 + x1^3, x1^4 + x1^3]
```

Note that we assume an automatic (name-preserving) conversion between X and Y. Hence, we can do the following and see that J is no *degrevlex* Gröbner basis:

```
sage: [p.reduce(J) for p in J2]
[y3*x1 - y2*x1,
 0,
 0,
 0,
 0,
 0,
 y2*x1^2 + y2*x1,
 y2*x2*x1 + y2*x1,
 y2*y1*x1 + x1^3,
 0]
```

In any order, we insist to have `X.gen(i)[m]<X.gen(j)[n]` if and only if i<j or (i==j and m<n).

I overloaded the `__pow__` and `__mul__` methods for Symmetric Ideals, since the default methods do not give the correct result: We must have 

```
sage: (X*(x[1]))^2 == X*(x[1]^2,x[1]*x[2])
True
```


**Assignee:** @simon-king-jena

**CC:**  @mwhansen @malb

**Keywords:** Symmetric Ideal

Issue created by migration from https://trac.sagemath.org/ticket/5566





---

archive/issue_comments_036238.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"Symmetric Ideal\".",
    "created_at": "2009-03-20T19:51:16Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36238",
    "user": "https://github.com/simon-king-jena"
}
```

**Changing keywords** from "" to "Symmetric Ideal".



---

archive/issue_comments_036239.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -90,7 +90,7 @@\n \n In any order, we insist to have `X.gen(i)[m]<X.gen(j)[n]` if and only if i<j or (i==j and m<n).\n \n-Probably the doc tests should be improved, and I think it would also be nice to overload the `__pow__` and `__mul__` methods for Symmetric Ideals, since the default methods do not give the correct result: We should have `(X*(x[1]))^2 == X*(x[1]^2,x[1]*x[2])`.\n-Also, it may be that there should be no coercion between X and Y in the above situation.\n+I overloaded the `__pow__` and `__mul__` methods for Symmetric Ideals, since the default methods do not give the correct result: We must have \n \n-Therefore I am uncertain whether it is 'needs review' or 'needs work'. I think I leave it as 'with patch'...\n+`(X*(x[1]))^2 == X*(x[1]^2,x[1]*x[2])`\n+\n``````\n",
    "created_at": "2009-03-20T19:51:16Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36239",
    "user": "https://github.com/simon-king-jena"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -90,7 +90,7 @@
 
 In any order, we insist to have `X.gen(i)[m]<X.gen(j)[n]` if and only if i<j or (i==j and m<n).
 
-Probably the doc tests should be improved, and I think it would also be nice to overload the `__pow__` and `__mul__` methods for Symmetric Ideals, since the default methods do not give the correct result: We should have `(X*(x[1]))^2 == X*(x[1]^2,x[1]*x[2])`.
-Also, it may be that there should be no coercion between X and Y in the above situation.
+I overloaded the `__pow__` and `__mul__` methods for Symmetric Ideals, since the default methods do not give the correct result: We must have 
 
-Therefore I am uncertain whether it is 'needs review' or 'needs work'. I think I leave it as 'with patch'...
+`(X*(x[1]))^2 == X*(x[1]^2,x[1]*x[2])`
+
``````




---

archive/issue_comments_036240.json:
```json
{
    "body": "<a id='comment:3'></a>\nI think that now the patch is ready for review. Please have a look at the ReST formatting of the doc strings, as this is my first exposition to ReST.",
    "created_at": "2009-03-20T20:02:44Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36240",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:3'></a>
I think that now the patch is ready for review. Please have a look at the ReST formatting of the doc strings, as this is my first exposition to ReST.



---

archive/issue_events_035219.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2009-03-20T20:02:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35219"
}
```



---

archive/issue_comments_036241.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-This ticket is related with [#5453], but the patch should apply to a clean `sage-3.4`.\n+This ticket is related with #5453, but the patch should apply to a clean `sage-3.4`.\n \n **Symmetric Ideals** were introduced by [Aschenbrenner and Hillar](http://de.arxiv.org/abs/math/0502078/), meaning \"ideals in polynomial rings with countably many variables that are set-wise invariant under all variable permutations\"; it was shown that they are finitely generated. \n \n``````\n",
    "created_at": "2009-03-21T07:20:33Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36241",
    "user": "https://github.com/simon-king-jena"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-This ticket is related with [#5453], but the patch should apply to a clean `sage-3.4`.
+This ticket is related with #5453, but the patch should apply to a clean `sage-3.4`.
 
 **Symmetric Ideals** were introduced by [Aschenbrenner and Hillar](http://de.arxiv.org/abs/math/0502078/), meaning "ideals in polynomial rings with countably many variables that are set-wise invariant under all variable permutations"; it was shown that they are finitely generated. 
 
``````




---

archive/issue_comments_036242.json:
```json
{
    "body": "<a id='comment:4'></a>\nSorry, please disregard the second attachment (SymmetricIdeals2.patch). It was a mistake.",
    "created_at": "2009-03-21T07:20:33Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36242",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:4'></a>
Sorry, please disregard the second attachment (SymmetricIdeals2.patch). It was a mistake.



---

archive/issue_comments_036243.json:
```json
{
    "body": "<a id='comment:5'></a>\nI think that my patch is already useful for computing symmetric Gr\u00f6bner bases. However, I think I need to work on one corner case: Variable shift zero.\n\nOne problem is: The argument of a permutation must be positive. Hence,\n\n```\nsage: X.<x> = SymmetricPolynomialRing(QQ)\nsage: P=Permutation([2,1])\nsage: x[0]^P\nTraceback (most recent call last):\n...\nTypeError: i (= 0) must be between 1 and 2\n```\n\nSince I want to have a permutation action, it follows that I must disallow variable shift zero. This is what I tried in the patch SymmetricIdeals2.patch, which yields an error when calling x[0].\n\nHowever, with the second patch, one still has \n\n```\nsage: X.<x> = SymmetricPolynomialRing(QQ)\nsage: R=PolynomialRing(ZZ,['x0'])\nsage: X('x0')\nx0\nsage: X(R('x0'))\nx0\n```\n\nI see two ways to proceed:\n1. Allow x[0], but make it *inert* against permutations, i.e., x[0]**P==x[0] for any permutation P. This also means that (x[1]).reduce([x[0]]) is x[1], not 0.\n2. Strictly forbid x[0]. Then the coercion would be slightly slower, due to additional tests.\n\nI prefer option 1, but if you care you may try to convince me of 2.",
    "created_at": "2009-03-21T08:44:10Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36243",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:5'></a>
I think that my patch is already useful for computing symmetric Gröbner bases. However, I think I need to work on one corner case: Variable shift zero.

One problem is: The argument of a permutation must be positive. Hence,

```
sage: X.<x> = SymmetricPolynomialRing(QQ)
sage: P=Permutation([2,1])
sage: x[0]^P
Traceback (most recent call last):
...
TypeError: i (= 0) must be between 1 and 2
```

Since I want to have a permutation action, it follows that I must disallow variable shift zero. This is what I tried in the patch SymmetricIdeals2.patch, which yields an error when calling x[0].

However, with the second patch, one still has 

```
sage: X.<x> = SymmetricPolynomialRing(QQ)
sage: R=PolynomialRing(ZZ,['x0'])
sage: X('x0')
x0
sage: X(R('x0'))
x0
```

I see two ways to proceed:
1. Allow x[0], but make it *inert* against permutations, i.e., x[0]**P==x[0] for any permutation P. This also means that (x[1]).reduce([x[0]]) is x[1], not 0.
2. Strictly forbid x[0]. Then the coercion would be slightly slower, due to additional tests.

I prefer option 1, but if you care you may try to convince me of 2.



---

archive/issue_events_035220.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2009-03-21T08:44:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35220"
}
```



---

archive/issue_events_035221.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2009-03-21T08:44:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35221"
}
```



---

archive/issue_events_035222.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2009-03-27T10:14:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35222"
}
```



---

archive/issue_events_035223.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2009-03-27T10:14:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35223"
}
```



---

archive/issue_comments_036244.json:
```json
{
    "body": "<a id='comment:6'></a>\nI think that now my implementation is in a shape that allows for applications. In fact, i already computed a Symmetric Groebner Basis that should provide a topological invariant for knots and links.\n\nAs i announced above, i made variables of index zero *inert* against permutations / permutation group elements. So, we have\n\n```\nsage: X.<x,y> = SymmetricPolynomialRing(QQ)\nsage: P = SymmetricGroup(5).random_element()\nsage: x[0]^P\nx0\n```\n\nCompared with my first implementation, reduction is now a lot faster. This is since i now use the usual libsingular-reduction as much as possible. \n\nAnother trick is that i try to find a compromise between the requirement of small parents versus the feature of having a common parent for all underlying finite polynomials: While computing with symmetric ideals, in some cases a common parent is found for the underlying polynomials of all generators of the ideal.\n\nExample: if we start with an ideal \n\n```\nsage: I = X*(x[1]*y[1],x[50]*y[1000])\n```\nthen we will have\n\n```\nsage: [p._p.parent() for p in I.gens()] # start with different rings\n\n[Multivariate Polynomial Ring in x1, y1 over Rational Field,\n Multivariate Polynomial Ring in x50, y1000 over Rational Field]\nsage: J=I.groebner_basis()\nsage: J\nIdeal (x1*y1, x50*y1000, x51*y1) of Symmetric polynomial ring in y, x over Rational Field\nsage: [p._p.parent() for p in J.gens()] # end with common rings\n\n[Multivariate Polynomial Ring in x51, x50, x1, y1000, y1 over Rational Field,\n Multivariate Polynomial Ring in x51, x50, x1, y1000, y1 over Rational Field,\n Multivariate Polynomial Ring in x51, x50, x1, y1000, y1 over Rational Field]\n```\n\nIn that way, we make arithmetic fast (<= common ring) and slim at the same time.",
    "created_at": "2009-03-27T10:14:17Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36244",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:6'></a>
I think that now my implementation is in a shape that allows for applications. In fact, i already computed a Symmetric Groebner Basis that should provide a topological invariant for knots and links.

As i announced above, i made variables of index zero *inert* against permutations / permutation group elements. So, we have

```
sage: X.<x,y> = SymmetricPolynomialRing(QQ)
sage: P = SymmetricGroup(5).random_element()
sage: x[0]^P
x0
```

Compared with my first implementation, reduction is now a lot faster. This is since i now use the usual libsingular-reduction as much as possible. 

Another trick is that i try to find a compromise between the requirement of small parents versus the feature of having a common parent for all underlying finite polynomials: While computing with symmetric ideals, in some cases a common parent is found for the underlying polynomials of all generators of the ideal.

Example: if we start with an ideal 

```
sage: I = X*(x[1]*y[1],x[50]*y[1000])
```
then we will have

```
sage: [p._p.parent() for p in I.gens()] # start with different rings

[Multivariate Polynomial Ring in x1, y1 over Rational Field,
 Multivariate Polynomial Ring in x50, y1000 over Rational Field]
sage: J=I.groebner_basis()
sage: J
Ideal (x1*y1, x50*y1000, x51*y1) of Symmetric polynomial ring in y, x over Rational Field
sage: [p._p.parent() for p in J.gens()] # end with common rings

[Multivariate Polynomial Ring in x51, x50, x1, y1000, y1 over Rational Field,
 Multivariate Polynomial Ring in x51, x50, x1, y1000, y1 over Rational Field,
 Multivariate Polynomial Ring in x51, x50, x1, y1000, y1 over Rational Field]
```

In that way, we make arithmetic fast (<= common ring) and slim at the same time.



---

archive/issue_events_035224.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2009-03-27T16:34:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35224"
}
```



---

archive/issue_events_035225.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2009-03-27T16:34:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35225"
}
```



---

archive/issue_comments_036245.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [SimonKing](#comment%3A6):\n> Example: if we start with an ideal \n> \n> ```\n> sage: I = X*(x[1]*y[1],x[50]*y[1000])\n> sage: J=I.groebner_basis()\n> sage: J\n> Ideal (x1*y1, x50*y1000, x51*y1) of Symmetric polynomial ring in y, x over Rational Field\n> ```\n\n\nARRGH! This result is complete nonsense. I need to find out what happened. Needs work. Sorry",
    "created_at": "2009-03-27T16:34:43Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36245",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:7'></a>
Replying to [SimonKing](#comment%3A6):
> Example: if we start with an ideal 
> 
> ```
> sage: I = X*(x[1]*y[1],x[50]*y[1000])
> sage: J=I.groebner_basis()
> sage: J
> Ideal (x1*y1, x50*y1000, x51*y1) of Symmetric polynomial ring in y, x over Rational Field
> ```


ARRGH! This result is complete nonsense. I need to find out what happened. Needs work. Sorry



---

archive/issue_events_035226.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2009-03-27T19:14:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35226"
}
```



---

archive/issue_events_035227.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2009-03-27T19:14:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35227"
}
```



---

archive/issue_comments_036246.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [SimonKing](#comment%3A7):\n> Replying to [SimonKing](#comment%3A6):\n> > Example: if we start with an ideal \n> > \n> > ```\n> > sage: I = X*(x[1]*y[1],x[50]*y[1000])\n> > sage: J=I.groebner_basis()\n> > sage: J\n> > Ideal (x1*y1, x50*y1000, x51*y1) of Symmetric polynomial ring in y, x over Rational Field\n> > ```\n\n> \n> ARRGH! This result is complete nonsense. I need to find out what happened. Needs work. Sorry\n\n\nGot it! The new version of ``SymmetricIdeals.patch`` should still apply to sage-3.4 (tell me if I messed it up), and fixes the bug.\n\nLet N be the maximal variable index occuring in the generators of a symmetric ideal I. According to Aschenbrenner, one has to apply all elements of Sym(N) to the generators, form all S-polynomials, interreduce, then apply Sym(N+1), and so on, until it stabilizes.\n\nSym(N) can be rather huge, so i tried to be clever: Apply the *generators* of Sym(N) to the generators of J, interreduce, and repeat until it stabilizes; i thought this is the same as applying *all* elements of Sym(N), but i was mistaken.\n\nNow i proceed more carefully. I introduced a method 'squeezed', that makes the variable indices as small as possible, without to change the ideal. So, the N above is decreased. Next i apply *all* elements of Sym(N) to the generators of `I.squeezed()`. Compute the S-polynomials and interreduce (which i do using libsingular's groebner method). \n\nThe result takes care of symmetry out to level N. In order to make it symmetric out to N+1, it then suffices to apply coset representatives of Sym(N+1)/Sym(N), namely (1,N+1), (2,N+1), ..., (N,N+1). The rest is, again, computation of S-polynomials and interreduction, and iteration. \n\nDo you agree that this is a correct improvement of the algorithm of Aschenbrenner and Hillar?\n\nAnyway. \nThe critical example from above is now\n\n```\nsage: X.<x,y> = SymmetricPolynomialRing(QQ)\nsage: I = X*(x[1]*y[1],x[50]*y[1000])\nsage: [p._p.parent() for p in I.gens()] # start with different rings\n\n[Multivariate Polynomial Ring in y1, x1 over Rational Field,\n Multivariate Polynomial Ring in y1000, x50 over Rational Field]\nsage: sage: J=I.groebner_basis()\nsage: sage: J\nIdeal (y1*x1, y1*x2, y2*x1) of Symmetric polynomial ring in x, y over Rational Field\nsage: sage: [p._p.parent() for p in J.gens()] # end with common rings\n\n[Multivariate Polynomial Ring in y2, y1, x2, x1 over Rational Field,\n Multivariate Polynomial Ring in y2, y1, x2, x1 over Rational Field,\n Multivariate Polynomial Ring in y2, y1, x2, x1 over Rational Field]\n```\n\nAnd this is indeed the symmetric Groebner basis.",
    "created_at": "2009-03-27T19:14:33Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36246",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:8'></a>
Replying to [SimonKing](#comment%3A7):
> Replying to [SimonKing](#comment%3A6):
> > Example: if we start with an ideal 
> > 
> > ```
> > sage: I = X*(x[1]*y[1],x[50]*y[1000])
> > sage: J=I.groebner_basis()
> > sage: J
> > Ideal (x1*y1, x50*y1000, x51*y1) of Symmetric polynomial ring in y, x over Rational Field
> > ```

> 
> ARRGH! This result is complete nonsense. I need to find out what happened. Needs work. Sorry


Got it! The new version of ``SymmetricIdeals.patch`` should still apply to sage-3.4 (tell me if I messed it up), and fixes the bug.

Let N be the maximal variable index occuring in the generators of a symmetric ideal I. According to Aschenbrenner, one has to apply all elements of Sym(N) to the generators, form all S-polynomials, interreduce, then apply Sym(N+1), and so on, until it stabilizes.

Sym(N) can be rather huge, so i tried to be clever: Apply the *generators* of Sym(N) to the generators of J, interreduce, and repeat until it stabilizes; i thought this is the same as applying *all* elements of Sym(N), but i was mistaken.

Now i proceed more carefully. I introduced a method 'squeezed', that makes the variable indices as small as possible, without to change the ideal. So, the N above is decreased. Next i apply *all* elements of Sym(N) to the generators of `I.squeezed()`. Compute the S-polynomials and interreduce (which i do using libsingular's groebner method). 

The result takes care of symmetry out to level N. In order to make it symmetric out to N+1, it then suffices to apply coset representatives of Sym(N+1)/Sym(N), namely (1,N+1), (2,N+1), ..., (N,N+1). The rest is, again, computation of S-polynomials and interreduction, and iteration. 

Do you agree that this is a correct improvement of the algorithm of Aschenbrenner and Hillar?

Anyway. 
The critical example from above is now

```
sage: X.<x,y> = SymmetricPolynomialRing(QQ)
sage: I = X*(x[1]*y[1],x[50]*y[1000])
sage: [p._p.parent() for p in I.gens()] # start with different rings

[Multivariate Polynomial Ring in y1, x1 over Rational Field,
 Multivariate Polynomial Ring in y1000, x50 over Rational Field]
sage: sage: J=I.groebner_basis()
sage: sage: J
Ideal (y1*x1, y1*x2, y2*x1) of Symmetric polynomial ring in x, y over Rational Field
sage: sage: [p._p.parent() for p in J.gens()] # end with common rings

[Multivariate Polynomial Ring in y2, y1, x2, x1 over Rational Field,
 Multivariate Polynomial Ring in y2, y1, x2, x1 over Rational Field,
 Multivariate Polynomial Ring in y2, y1, x2, x1 over Rational Field]
```

And this is indeed the symmetric Groebner basis.



---

archive/issue_comments_036247.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -25,7 +25,7 @@\n ```\n sage: J=I.groebner_basis()\n sage: J\n-Ideal (x1^4 + x1^3, x2*x1^2 - x1^3, x2^2 - x1^2, y1*x1^3 + y1*x1^2, y1*x2 + y1*x1^2, y1^2 + x1^2, y2*x1 + y1*x1^2) of Symmetric polynomial ring in x, y over Rational Field\n+Ideal (x1^5 + x1^4, x2*x1^2 + x1^4, x2^2 - x1^2, y1*x1^3 + y1*x1^2, y1*x2 + y1*x1^2, y1^2 + x1^2, y2*x1 + y1*x1^2) of Symmetric polynomial ring in x, y over Rational Field\n ```\n \n We can do ideal membership test by computing normal forms (symmetric reduction):\n@@ -60,8 +60,8 @@\n ```\n sage: [p.reduce(I) for p in G]\n \n-[x1^4 + x1^3,\n- x2*x1^2 - x1^3,\n+[x1^5 + x1^4,\n+ x2*x1^2 + x1^4,\n  x2^2 - x1^2,\n  y1*x1^3 + y1*x1^2,\n  y1*x2 + y1*x1^2,\n@@ -85,7 +85,7 @@\n \n ```\n sage: J.reduce(J2)\n-Ideal (0, 0, 0, y2*x1 + y1*x1^2, y2*x1 + y1*x1^2, 0, y2*x1 + y1*x1^2) of Symmetric polynomial ring in x, y over Rational Field\n+Ideal (0, 0, 0, y1*x1^3 + y1*x1^2, y1*x2 + y1*x1^2, 0, y2*x1 + y1*x1^2) of Symmetric polynomial ring in x, y over Rational Field\n ```\n \n In any order, we insist to have `X.gen(i)[m]<X.gen(j)[n]` if and only if i<j or (i==j and m<n).\n``````\n",
    "created_at": "2009-03-28T10:12:44Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36247",
    "user": "https://github.com/simon-king-jena"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -25,7 +25,7 @@
 ```
 sage: J=I.groebner_basis()
 sage: J
-Ideal (x1^4 + x1^3, x2*x1^2 - x1^3, x2^2 - x1^2, y1*x1^3 + y1*x1^2, y1*x2 + y1*x1^2, y1^2 + x1^2, y2*x1 + y1*x1^2) of Symmetric polynomial ring in x, y over Rational Field
+Ideal (x1^5 + x1^4, x2*x1^2 + x1^4, x2^2 - x1^2, y1*x1^3 + y1*x1^2, y1*x2 + y1*x1^2, y1^2 + x1^2, y2*x1 + y1*x1^2) of Symmetric polynomial ring in x, y over Rational Field
 ```
 
 We can do ideal membership test by computing normal forms (symmetric reduction):
@@ -60,8 +60,8 @@
 ```
 sage: [p.reduce(I) for p in G]
 
-[x1^4 + x1^3,
- x2*x1^2 - x1^3,
+[x1^5 + x1^4,
+ x2*x1^2 + x1^4,
  x2^2 - x1^2,
  y1*x1^3 + y1*x1^2,
  y1*x2 + y1*x1^2,
@@ -85,7 +85,7 @@
 
 ```
 sage: J.reduce(J2)
-Ideal (0, 0, 0, y2*x1 + y1*x1^2, y2*x1 + y1*x1^2, 0, y2*x1 + y1*x1^2) of Symmetric polynomial ring in x, y over Rational Field
+Ideal (0, 0, 0, y1*x1^3 + y1*x1^2, y1*x2 + y1*x1^2, 0, y2*x1 + y1*x1^2) of Symmetric polynomial ring in x, y over Rational Field
 ```
 
 In any order, we insist to have `X.gen(i)[m]<X.gen(j)[n]` if and only if i<j or (i==j and m<n).
``````




---

archive/issue_comments_036248.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n This ticket is related with #5453, but the patch should apply to a clean `sage-3.4`.\n \n-**Symmetric Ideals** were introduced by [Aschenbrenner and Hillar](http://de.arxiv.org/abs/math/0502078/), meaning \"ideals in polynomial rings with countably many variables that are set-wise invariant under all variable permutations\"; it was shown that they are finitely generated. \n+**Symmetric Ideals** were introduced by [Aschenbrenner and Hillar](http://de.arxiv.org/abs/math/0411514/), meaning \"ideals in polynomial rings with countably many variables that are set-wise invariant under all variable permutations\"; it was shown that they are finitely generated. \n \n Later on, Aschenbrenner and Hillar also presented a [Buchberger algorithm](http://de.arxiv.org/abs/0801.4439/) for Symmetric Ideals. \n \n``````\n",
    "created_at": "2009-03-28T22:28:16Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36248",
    "user": "https://github.com/simon-king-jena"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 This ticket is related with #5453, but the patch should apply to a clean `sage-3.4`.
 
-**Symmetric Ideals** were introduced by [Aschenbrenner and Hillar](http://de.arxiv.org/abs/math/0502078/), meaning "ideals in polynomial rings with countably many variables that are set-wise invariant under all variable permutations"; it was shown that they are finitely generated. 
+**Symmetric Ideals** were introduced by [Aschenbrenner and Hillar](http://de.arxiv.org/abs/math/0411514/), meaning "ideals in polynomial rings with countably many variables that are set-wise invariant under all variable permutations"; it was shown that they are finitely generated. 
 
 Later on, Aschenbrenner and Hillar also presented a [Buchberger algorithm](http://de.arxiv.org/abs/0801.4439/) for Symmetric Ideals. 
 
``````




---

archive/issue_comments_036249.json:
```json
{
    "body": "<a id='comment:11'></a>\nHerewith i try to unify the dense and the sparse approach towards infinite polynomial rings of ticket #5453. Also, when computing symmetric Groebner bases, i strictly do as suggested by Aschenbrenner and Hillar, without the attempt to be clever.\n\nHere i repeat the main examples from above, with the new syntax, and partially with corrected results:\n\n```\nsage: X.<x,y> = InfinitePolynomialRing(QQ)\nsage: I=X*(x[1]^2+y[2]^2,x[1]*x[2]*y[3]+x[1]*y[4])\nsage: J=I.groebner_basis(); J\nSymmetric Ideal (x1^4 + x1^3, x2*x1^2 - x1^3, x2^2 - x1^2, y1*x1^3 + y1*x1^2, y1*x2 + y1*x1^2, y1^2 + x1^2, y2*x1 + y1*x1^2) of Infinite polynomial ring in x, y over Rational Field\nsage: I.reduce(J)\nSymmetric Ideal (0, 0) of Infinite polynomial ring in x, y over Rational Field\n```\n\nNote that indeed the result is a symmetric Gr\u00f6bner basis (which was not the case in the original example that i gave):\n\n```\nsage: for P in Permutations(4):\n....:     print [(p^P).reduce(J) for p in J.gens()]\n....:\n[0, 0, 0, 0, 0, 0, 0]\n[0, 0, 0, 0, 0, 0, 0]\n[0, 0, 0, 0, 0, 0, 0]\n[0, 0, 0, 0, 0, 0, 0]\n[0, 0, 0, 0, 0, 0, 0]\n[0, 0, 0, 0, 0, 0, 0]\n[0, 0, 0, 0, 0, 0, 0]\n[0, 0, 0, 0, 0, 0, 0]\n[0, 0, 0, 0, 0, 0, 0]\n[0, 0, 0, 0, 0, 0, 0]\n[0, 0, 0, 0, 0, 0, 0]\n[0, 0, 0, 0, 0, 0, 0]\n[0, 0, 0, 0, 0, 0, 0]\n[0, 0, 0, 0, 0, 0, 0]\n[0, 0, 0, 0, 0, 0, 0]\n[0, 0, 0, 0, 0, 0, 0]\n[0, 0, 0, 0, 0, 0, 0]\n[0, 0, 0, 0, 0, 0, 0]\n[0, 0, 0, 0, 0, 0, 0]\n[0, 0, 0, 0, 0, 0, 0]\n[0, 0, 0, 0, 0, 0, 0]\n[0, 0, 0, 0, 0, 0, 0]\n[0, 0, 0, 0, 0, 0, 0]\n[0, 0, 0, 0, 0, 0, 0]\n```\n\nThe same example in 'deglex' or 'degrevlex' works, too, but it takes longer.\n\nNote that the implementation is now *dense*:\n\n```\nsage: x[7]; X.polynomial_ring()\nsage: x[7]; X.polynomial_ring()\nx7\nMultivariate Polynomial Ring in y7, y6, y5, y4, y3, y2, y1, y0, x7, x6, x5, x4, x3, x2, x1, x0 over Rational Field\n```\n\nI just stumbled over another error: When trying to compute this example in the sparse implementation, it fails, since at some place a univariate polynomial occurs, which has no reduce method. \n\nIt really sucks that uni- and multivariate polynomials have a different interface!\n\nContinuing with the examples:\nIf high variable indices occur, the dense implementation is not good. But the following works in the sparse implementation.\n\n```\nsage: X.<x,y> = InfinitePolynomialRing(QQ,implementation='sparse')\nsage: P = SymmetricGroup(5).random_element()\nsage: x[0]^P\nx0\nsage: I = X*(x[1]*y[1],x[50]*y[1000])\nsage: [p._p.parent() for p in I.gens()]\n[Multivariate Polynomial Ring in y1, x1 over Rational Field,\n Multivariate Polynomial Ring in y1000, x50 over Rational Field]\nsage: J=I.groebner_basis(); J\nSymmetric Ideal (y1*x1, y1*x2, y2*x1) of Infinite polynomial ring in x, y over Rational Field\nsage: [p._p.parent() for p in J.gens()]\n[Multivariate Polynomial Ring in y1, x1 over Rational Field,\n Multivariate Polynomial Ring in y1, x2 over Rational Field,\n Multivariate Polynomial Ring in y2, x1 over Rational Field]\n```\n\nOK. \n\nSummary: It is a common interface for both implementations, but i need to work on the reduce method.",
    "created_at": "2009-03-30T11:45:04Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36249",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:11'></a>
Herewith i try to unify the dense and the sparse approach towards infinite polynomial rings of ticket #5453. Also, when computing symmetric Groebner bases, i strictly do as suggested by Aschenbrenner and Hillar, without the attempt to be clever.

Here i repeat the main examples from above, with the new syntax, and partially with corrected results:

```
sage: X.<x,y> = InfinitePolynomialRing(QQ)
sage: I=X*(x[1]^2+y[2]^2,x[1]*x[2]*y[3]+x[1]*y[4])
sage: J=I.groebner_basis(); J
Symmetric Ideal (x1^4 + x1^3, x2*x1^2 - x1^3, x2^2 - x1^2, y1*x1^3 + y1*x1^2, y1*x2 + y1*x1^2, y1^2 + x1^2, y2*x1 + y1*x1^2) of Infinite polynomial ring in x, y over Rational Field
sage: I.reduce(J)
Symmetric Ideal (0, 0) of Infinite polynomial ring in x, y over Rational Field
```

Note that indeed the result is a symmetric Gröbner basis (which was not the case in the original example that i gave):

```
sage: for P in Permutations(4):
....:     print [(p^P).reduce(J) for p in J.gens()]
....:
[0, 0, 0, 0, 0, 0, 0]
[0, 0, 0, 0, 0, 0, 0]
[0, 0, 0, 0, 0, 0, 0]
[0, 0, 0, 0, 0, 0, 0]
[0, 0, 0, 0, 0, 0, 0]
[0, 0, 0, 0, 0, 0, 0]
[0, 0, 0, 0, 0, 0, 0]
[0, 0, 0, 0, 0, 0, 0]
[0, 0, 0, 0, 0, 0, 0]
[0, 0, 0, 0, 0, 0, 0]
[0, 0, 0, 0, 0, 0, 0]
[0, 0, 0, 0, 0, 0, 0]
[0, 0, 0, 0, 0, 0, 0]
[0, 0, 0, 0, 0, 0, 0]
[0, 0, 0, 0, 0, 0, 0]
[0, 0, 0, 0, 0, 0, 0]
[0, 0, 0, 0, 0, 0, 0]
[0, 0, 0, 0, 0, 0, 0]
[0, 0, 0, 0, 0, 0, 0]
[0, 0, 0, 0, 0, 0, 0]
[0, 0, 0, 0, 0, 0, 0]
[0, 0, 0, 0, 0, 0, 0]
[0, 0, 0, 0, 0, 0, 0]
[0, 0, 0, 0, 0, 0, 0]
```

The same example in 'deglex' or 'degrevlex' works, too, but it takes longer.

Note that the implementation is now *dense*:

```
sage: x[7]; X.polynomial_ring()
sage: x[7]; X.polynomial_ring()
x7
Multivariate Polynomial Ring in y7, y6, y5, y4, y3, y2, y1, y0, x7, x6, x5, x4, x3, x2, x1, x0 over Rational Field
```

I just stumbled over another error: When trying to compute this example in the sparse implementation, it fails, since at some place a univariate polynomial occurs, which has no reduce method. 

It really sucks that uni- and multivariate polynomials have a different interface!

Continuing with the examples:
If high variable indices occur, the dense implementation is not good. But the following works in the sparse implementation.

```
sage: X.<x,y> = InfinitePolynomialRing(QQ,implementation='sparse')
sage: P = SymmetricGroup(5).random_element()
sage: x[0]^P
x0
sage: I = X*(x[1]*y[1],x[50]*y[1000])
sage: [p._p.parent() for p in I.gens()]
[Multivariate Polynomial Ring in y1, x1 over Rational Field,
 Multivariate Polynomial Ring in y1000, x50 over Rational Field]
sage: J=I.groebner_basis(); J
Symmetric Ideal (y1*x1, y1*x2, y2*x1) of Infinite polynomial ring in x, y over Rational Field
sage: [p._p.parent() for p in J.gens()]
[Multivariate Polynomial Ring in y1, x1 over Rational Field,
 Multivariate Polynomial Ring in y1, x2 over Rational Field,
 Multivariate Polynomial Ring in y2, x1 over Rational Field]
```

OK. 

Summary: It is a common interface for both implementations, but i need to work on the reduce method.



---

archive/issue_events_035228.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2009-03-30T11:45:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35228"
}
```



---

archive/issue_events_035229.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2009-03-30T11:45:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35229"
}
```



---

archive/issue_comments_036250.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -5,6 +5,8 @@\n Later on, Aschenbrenner and Hillar also presented a [Buchberger algorithm](http://de.arxiv.org/abs/0801.4439/) for Symmetric Ideals. \n \n My aim is to implement this into Sage. The patch provides classes for the Symmetric Polynomial Rings, their elements and their ideals. The methods implement basic polynomial arithmetic, the permutation action, the *Symmetric Cancellation Order* (a notion that is central in the work of Aschenbrenner and Hillar), symmetric reduction, and the computation of Gr\u00f6bner bases.\n+\n+Note\n \n Here are some examples showing the main features\n \n``````\n",
    "created_at": "2009-03-30T11:45:04Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36250",
    "user": "https://github.com/simon-king-jena"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -5,6 +5,8 @@
 Later on, Aschenbrenner and Hillar also presented a [Buchberger algorithm](http://de.arxiv.org/abs/0801.4439/) for Symmetric Ideals. 
 
 My aim is to implement this into Sage. The patch provides classes for the Symmetric Polynomial Rings, their elements and their ideals. The methods implement basic polynomial arithmetic, the permutation action, the *Symmetric Cancellation Order* (a notion that is central in the work of Aschenbrenner and Hillar), symmetric reduction, and the computation of Gröbner bases.
+
+Note
 
 Here are some examples showing the main features
 
``````




---

archive/issue_comments_036251.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [SimonKing](#comment%3A11):\n...\n> sage: X.<x,y> = InfinitePolynomialRing(QQ)\n> sage: I=X*(x[1]<sup>2+y[2]</sup>2,x[1]*x[2]*y[3]+x[1]*y[4])\n> sage: J=I.groebner_basis(); J\n> Symmetric Ideal (x1^4 + x1^3, x2*x1^2 - x1^3, x2^2 - x1^2, y1*x1^3 + y1*x1^2, y1*x2 + y1*x1^2, y1^2 + x1^2, y2*x1 + y1*x1^2) of Infinite polynomial ring in x, y over Rational Field\n\n...\n> I just stumbled over another error: When trying to compute this example in the sparse implementation, it fails, since at some place a univariate polynomial occurs, which has no reduce method. \n\n\nIt is fixed in reduce_bugfix.patch. Now, we have in the sparse implementation:\n\n```\nsage: X.<x,y> = InfinitePolynomialRing(QQ,implementation='sparse')\nsage: I=X*(x[1]^2+y[2]^2,x[1]*x[2]*y[3]+x[1]*y[4])\nsage: J=I.groebner_basis(); J\nSymmetric Ideal (x1^4 + x1^3, x2*x1^2 - x1^3, x2^2 - x1^2, y1*x1^3 + y1*x1^2, y1*x2 + y1*x1^2, y1^2 + x1^2, y2*x1 + y1*x1^2) of Infinite polynomial ring in x, y over Rational Field\n```\nwhich coincides with the result in the dense implementation.\n\nSo, hope it is ready for review...",
    "created_at": "2009-03-30T12:06:50Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36251",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:12'></a>
Replying to [SimonKing](#comment%3A11):
...
> sage: X.<x,y> = InfinitePolynomialRing(QQ)
> sage: I=X*(x[1]<sup>2+y[2]</sup>2,x[1]*x[2]*y[3]+x[1]*y[4])
> sage: J=I.groebner_basis(); J
> Symmetric Ideal (x1^4 + x1^3, x2*x1^2 - x1^3, x2^2 - x1^2, y1*x1^3 + y1*x1^2, y1*x2 + y1*x1^2, y1^2 + x1^2, y2*x1 + y1*x1^2) of Infinite polynomial ring in x, y over Rational Field

...
> I just stumbled over another error: When trying to compute this example in the sparse implementation, it fails, since at some place a univariate polynomial occurs, which has no reduce method. 


It is fixed in reduce_bugfix.patch. Now, we have in the sparse implementation:

```
sage: X.<x,y> = InfinitePolynomialRing(QQ,implementation='sparse')
sage: I=X*(x[1]^2+y[2]^2,x[1]*x[2]*y[3]+x[1]*y[4])
sage: J=I.groebner_basis(); J
Symmetric Ideal (x1^4 + x1^3, x2*x1^2 - x1^3, x2^2 - x1^2, y1*x1^3 + y1*x1^2, y1*x2 + y1*x1^2, y1^2 + x1^2, y2*x1 + y1*x1^2) of Infinite polynomial ring in x, y over Rational Field
```
which coincides with the result in the dense implementation.

So, hope it is ready for review...



---

archive/issue_comments_036252.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -5,8 +5,6 @@\n Later on, Aschenbrenner and Hillar also presented a [Buchberger algorithm](http://de.arxiv.org/abs/0801.4439/) for Symmetric Ideals. \n \n My aim is to implement this into Sage. The patch provides classes for the Symmetric Polynomial Rings, their elements and their ideals. The methods implement basic polynomial arithmetic, the permutation action, the *Symmetric Cancellation Order* (a notion that is central in the work of Aschenbrenner and Hillar), symmetric reduction, and the computation of Gr\u00f6bner bases.\n-\n-Note\n \n Here are some examples showing the main features\n \n``````\n",
    "created_at": "2009-03-30T12:06:50Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36252",
    "user": "https://github.com/simon-king-jena"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -5,8 +5,6 @@
 Later on, Aschenbrenner and Hillar also presented a [Buchberger algorithm](http://de.arxiv.org/abs/0801.4439/) for Symmetric Ideals. 
 
 My aim is to implement this into Sage. The patch provides classes for the Symmetric Polynomial Rings, their elements and their ideals. The methods implement basic polynomial arithmetic, the permutation action, the *Symmetric Cancellation Order* (a notion that is central in the work of Aschenbrenner and Hillar), symmetric reduction, and the computation of Gröbner bases.
-
-Note
 
 Here are some examples showing the main features
 
``````




---

archive/issue_events_035230.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2009-03-30T12:07:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35230"
}
```



---

archive/issue_events_035231.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2009-03-30T12:07:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35231"
}
```



---

archive/issue_comments_036253.json:
```json
{
    "body": "<a id='comment:14'></a>\nHi Simon, quick question: Why does `groebner_basis()` return an ideal instead of a `Sequence`? Sage's default is to return a `Sequence`.",
    "created_at": "2009-04-12T09:45:59Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36253",
    "user": "https://github.com/malb"
}
```

<a id='comment:14'></a>
Hi Simon, quick question: Why does `groebner_basis()` return an ideal instead of a `Sequence`? Sage's default is to return a `Sequence`.



---

archive/issue_comments_036254.json:
```json
{
    "body": "<a id='comment:15'></a>\nHi Martin,\n\nReplying to [malb](#comment%3A14):\n> Hi Simon, quick question: Why does `groebner_basis()` return an ideal instead of a `Sequence`? Sage's default is to return a `Sequence`.\n\n\nVery easy answer: I was not aware that it is the default.\n\nIn the last two weeks I tried various improvements (performance-wise). Currently I am more or less in vacancy. If I'll be back at work, my plan is to change groebner so that it returns `Sequence`s, to update the doc tests, and to post the most recent version perhaps end of next week. And I will also not forget to create a ticket about `GroebnerStrategy` for libsingular.",
    "created_at": "2009-04-12T14:24:07Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36254",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:15'></a>
Hi Martin,

Replying to [malb](#comment%3A14):
> Hi Simon, quick question: Why does `groebner_basis()` return an ideal instead of a `Sequence`? Sage's default is to return a `Sequence`.


Very easy answer: I was not aware that it is the default.

In the last two weeks I tried various improvements (performance-wise). Currently I am more or less in vacancy. If I'll be back at work, my plan is to change groebner so that it returns `Sequence`s, to update the doc tests, and to post the most recent version perhaps end of next week. And I will also not forget to create a ticket about `GroebnerStrategy` for libsingular.



---

archive/issue_events_035232.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2009-04-14T22:21:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35232"
}
```



---

archive/issue_events_035233.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2009-04-14T22:21:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35233"
}
```



---

archive/issue_comments_036255.json:
```json
{
    "body": "<a id='comment:16'></a>\nI forgot to change the tag for this ticket (needs work). \n\nRecently I was improving the performance of reduction, by adding some Cython module that provides a Reduction Strategy class for symmetric ideals. In applications, this seems to work very well. After updating the doc tests, I will post the new patch bomb, probably end of this week.",
    "created_at": "2009-04-14T22:21:36Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36255",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:16'></a>
I forgot to change the tag for this ticket (needs work). 

Recently I was improving the performance of reduction, by adding some Cython module that provides a Reduction Strategy class for symmetric ideals. In applications, this seems to work very well. After updating the doc tests, I will post the new patch bomb, probably end of this week.



---

archive/issue_events_035234.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2009-04-16T14:31:40Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "rename": {
        "from": "Groebner bases of Symmetric Ideals",
        "to": "Symmetric Groebner bases and Infinitely Generated Polynomial Rings"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35234"
}
```



---

archive/issue_events_035235.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2009-04-16T14:31:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35235"
}
```



---

archive/issue_events_035236.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2009-04-16T14:31:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35236"
}
```



---

archive/issue_comments_036256.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,15 +1,16 @@\n-This ticket is related with #5453, but the patch should apply to a clean `sage-3.4`.\n+*Attachments*\n+Please only use the attachment 'SymmetricIdeals.patch' and disregard the other attachments (I don't know how to delete them. It should apply to `sage-3.4.1.rc2`.\n \n **Symmetric Ideals** were introduced by [Aschenbrenner and Hillar](http://de.arxiv.org/abs/math/0411514/), meaning \"ideals in polynomial rings with countably many variables that are set-wise invariant under all variable permutations\"; it was shown that they are finitely generated. \n \n Later on, Aschenbrenner and Hillar also presented a [Buchberger algorithm](http://de.arxiv.org/abs/0801.4439/) for Symmetric Ideals. \n \n-My aim is to implement this into Sage. The patch provides classes for the Symmetric Polynomial Rings, their elements and their ideals. The methods implement basic polynomial arithmetic, the permutation action, the *Symmetric Cancellation Order* (a notion that is central in the work of Aschenbrenner and Hillar), symmetric reduction, and the computation of Gr\u00f6bner bases.\n+My aim is to implement this into Sage. The patch provides classes for the Polynomial Rings with countably many variables, their elements and their ideals. The methods implement basic polynomial arithmetic, the permutation action, the *Symmetric Cancellation Order* (a notion that is central in the work of Aschenbrenner and Hillar), symmetric reduction, and the computation of Gr\u00f6bner bases.\n \n Here are some examples showing the main features\n \n ```\n-sage: X.<x,y> = SymmetricPolynomialRing(QQ)\n+sage: X.<x,y> = InfinitePolynomialRing(QQ)\n ```\n \n Now, x and y are generators of X, meaning that we have two infinite sequences of variables, one obtained by `x[n]` and the other by `y[m]` for integers m, n.\n@@ -25,43 +26,66 @@\n ```\n sage: J=I.groebner_basis()\n sage: J\n-Ideal (x1^5 + x1^4, x2*x1^2 + x1^4, x2^2 - x1^2, y1*x1^3 + y1*x1^2, y1*x2 + y1*x1^2, y1^2 + x1^2, y2*x1 + y1*x1^2) of Symmetric polynomial ring in x, y over Rational Field\n+[x1^4 + x1^3, x2*x1^2 - x1^3, x2^2 - x1^2, y1*x1^3 + y1*x1^2, y1*x2 + y1*x1^2, y1^2 + x1^2, y2*x1 + y1*x1^2]\n ```\n \n We can do ideal membership test by computing normal forms (symmetric reduction):\n \n ```\n sage: I.reduce(J)\n-Ideal (0, 0) of Symmetric polynomial ring in x, y over Rational Field\n+Symmetric Ideal (0, 0) of Infinite polynomial ring in x, y over Rational Field\n ```\n \n Note that J is not point-wise symmetric. E.g., we have\n \n ```\n-sage: G=J.gens()\n sage: P=Permutation([1, 4, 3, 2])\n-sage: G[2]\n+sage: J[2]\n x2^2 - x1^2\n-sage: G[2]^P\n+sage: J[2]^P\n x4^2 - x1^2\n-sage: G.__contains__(G[2]^P)\n+sage: J.__contains__(J[2]^P)\n False\n ```\n \n But it is set-wise symmetric, e.g.:\n \n ```\n-sage: [(p^P).reduce(J) for p in G]\n-[0, 0, 0, 0, 0, 0, 0]\n+sage: [[(p^P).reduce(J) for p in J] for P in Permutations(4)]\n+\n+[[0, 0, 0, 0, 0, 0, 0],\n+ [0, 0, 0, 0, 0, 0, 0],\n+ [0, 0, 0, 0, 0, 0, 0],\n+ [0, 0, 0, 0, 0, 0, 0],\n+ [0, 0, 0, 0, 0, 0, 0],\n+ [0, 0, 0, 0, 0, 0, 0],\n+ [0, 0, 0, 0, 0, 0, 0],\n+ [0, 0, 0, 0, 0, 0, 0],\n+ [0, 0, 0, 0, 0, 0, 0],\n+ [0, 0, 0, 0, 0, 0, 0],\n+ [0, 0, 0, 0, 0, 0, 0],\n+ [0, 0, 0, 0, 0, 0, 0],\n+ [0, 0, 0, 0, 0, 0, 0],\n+ [0, 0, 0, 0, 0, 0, 0],\n+ [0, 0, 0, 0, 0, 0, 0],\n+ [0, 0, 0, 0, 0, 0, 0],\n+ [0, 0, 0, 0, 0, 0, 0],\n+ [0, 0, 0, 0, 0, 0, 0],\n+ [0, 0, 0, 0, 0, 0, 0],\n+ [0, 0, 0, 0, 0, 0, 0],\n+ [0, 0, 0, 0, 0, 0, 0],\n+ [0, 0, 0, 0, 0, 0, 0],\n+ [0, 0, 0, 0, 0, 0, 0],\n+ [0, 0, 0, 0, 0, 0, 0]]\n ```\n \n As usual, it is a special feature of Gr\u00f6bner bases that they produce unique normal forms. I is not a Gr\u00f6bner basis, and thus ideal membership test wouldn't work:\n \n ```\n-sage: [p.reduce(I) for p in G]\n+sage: [p.reduce(I) for p in J]\n \n-[x1^5 + x1^4,\n- x2*x1^2 + x1^4,\n+[x1^4 + x1^3,\n+ x2*x1^2 - x1^3,\n  x2^2 - x1^2,\n  y1*x1^3 + y1*x1^2,\n  y1*x2 + y1*x1^2,\n@@ -71,26 +95,38 @@\n \n Note that various monomial orders are supported: lex (default), deglex, and degrevlex. \n \n-Note that Aschenbrenner and Hillar restrict their attention to the lexicographic order, and it is not entirely clear whether the Buchberger algorithm would terminate in the other orders, too. But here, it does. As usual, the Gr\u00f6bner basis depends on the ordering:\n+Aschenbrenner and Hillar obtained their results using lexicographic order, and it is not entirely clear whether the Buchberger algorithm would terminate in the other orders, too. But here, it does. As usual, the Gr\u00f6bner basis depends on the ordering:\n \n ```\n-sage: Y.<x,y> = SymmetricPolynomialRing(QQ,order='degrevlex')\n+sage: Y.<x,y> = InfinitePolynomialRing(QQ,order='degrevlex')\n sage: I2=Y*(x[1]^2+y[2]^2,x[1]*x[2]*y[3]+x[1]*y[4])\n sage: J2=I2.groebner_basis()\n sage: J2\n-Ideal (y3*x1 - y2*x1, x2^2 - x1^2, y1*x2 - y2*x1, y1^2 + x1^2, x2*x1^2 - x1^3, y1*x1^2 + y2*x1, y2*x1^2 + y2*x1, y2*x2*x1 + y2*x1, y2*y1*x1 + x1^3, x1^4 + x1^3) of Symmetric polynomial ring in x, y over Rational Field\n+[y3*x1 - y2*x1, x2^2 - x1^2, y1*x2 - y2*x1, y1^2 + x1^2, x2*x1^2 - x1^3, y1*x1^2 + y2*x1, y2*x1^2 + y2*x1, y2*x2*x1 + y2*x1, y2*y1*x1 + x1^3, x1^4 + x1^3]\n ```\n \n-Note that we assume an automatic (name-preserving) conversion between X and Y. Hence, we can do the following and see that J2 is not a *lexicographic* Gr\u00f6bner basis:\n+Note that we assume an automatic (name-preserving) conversion between X and Y. Hence, we can do the following and see that J is no *degrevlex* Gr\u00f6bner basis:\n \n ```\n-sage: J.reduce(J2)\n-Ideal (0, 0, 0, y1*x1^3 + y1*x1^2, y1*x2 + y1*x1^2, 0, y2*x1 + y1*x1^2) of Symmetric polynomial ring in x, y over Rational Field\n+sage: [p.reduce(J) for p in J2]\n+[y3*x1 - y2*x1,\n+ 0,\n+ 0,\n+ 0,\n+ 0,\n+ 0,\n+ y2*x1^2 + y2*x1,\n+ y2*x2*x1 + y2*x1,\n+ y2*y1*x1 + x1^3,\n+ 0]\n ```\n \n In any order, we insist to have `X.gen(i)[m]<X.gen(j)[n]` if and only if i<j or (i==j and m<n).\n \n I overloaded the `__pow__` and `__mul__` methods for Symmetric Ideals, since the default methods do not give the correct result: We must have \n \n-`(X*(x[1]))^2 == X*(x[1]^2,x[1]*x[2])`\n+```\n+sage: (X*(x[1]))^2 == X*(x[1]^2,x[1]*x[2])\n+True\n+```\n \n``````\n",
    "created_at": "2009-04-16T14:31:40Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36256",
    "user": "https://github.com/simon-king-jena"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,15 +1,16 @@
-This ticket is related with #5453, but the patch should apply to a clean `sage-3.4`.
+*Attachments*
+Please only use the attachment 'SymmetricIdeals.patch' and disregard the other attachments (I don't know how to delete them. It should apply to `sage-3.4.1.rc2`.
 
 **Symmetric Ideals** were introduced by [Aschenbrenner and Hillar](http://de.arxiv.org/abs/math/0411514/), meaning "ideals in polynomial rings with countably many variables that are set-wise invariant under all variable permutations"; it was shown that they are finitely generated. 
 
 Later on, Aschenbrenner and Hillar also presented a [Buchberger algorithm](http://de.arxiv.org/abs/0801.4439/) for Symmetric Ideals. 
 
-My aim is to implement this into Sage. The patch provides classes for the Symmetric Polynomial Rings, their elements and their ideals. The methods implement basic polynomial arithmetic, the permutation action, the *Symmetric Cancellation Order* (a notion that is central in the work of Aschenbrenner and Hillar), symmetric reduction, and the computation of Gröbner bases.
+My aim is to implement this into Sage. The patch provides classes for the Polynomial Rings with countably many variables, their elements and their ideals. The methods implement basic polynomial arithmetic, the permutation action, the *Symmetric Cancellation Order* (a notion that is central in the work of Aschenbrenner and Hillar), symmetric reduction, and the computation of Gröbner bases.
 
 Here are some examples showing the main features
 
 ```
-sage: X.<x,y> = SymmetricPolynomialRing(QQ)
+sage: X.<x,y> = InfinitePolynomialRing(QQ)
 ```
 
 Now, x and y are generators of X, meaning that we have two infinite sequences of variables, one obtained by `x[n]` and the other by `y[m]` for integers m, n.
@@ -25,43 +26,66 @@
 ```
 sage: J=I.groebner_basis()
 sage: J
-Ideal (x1^5 + x1^4, x2*x1^2 + x1^4, x2^2 - x1^2, y1*x1^3 + y1*x1^2, y1*x2 + y1*x1^2, y1^2 + x1^2, y2*x1 + y1*x1^2) of Symmetric polynomial ring in x, y over Rational Field
+[x1^4 + x1^3, x2*x1^2 - x1^3, x2^2 - x1^2, y1*x1^3 + y1*x1^2, y1*x2 + y1*x1^2, y1^2 + x1^2, y2*x1 + y1*x1^2]
 ```
 
 We can do ideal membership test by computing normal forms (symmetric reduction):
 
 ```
 sage: I.reduce(J)
-Ideal (0, 0) of Symmetric polynomial ring in x, y over Rational Field
+Symmetric Ideal (0, 0) of Infinite polynomial ring in x, y over Rational Field
 ```
 
 Note that J is not point-wise symmetric. E.g., we have
 
 ```
-sage: G=J.gens()
 sage: P=Permutation([1, 4, 3, 2])
-sage: G[2]
+sage: J[2]
 x2^2 - x1^2
-sage: G[2]^P
+sage: J[2]^P
 x4^2 - x1^2
-sage: G.__contains__(G[2]^P)
+sage: J.__contains__(J[2]^P)
 False
 ```
 
 But it is set-wise symmetric, e.g.:
 
 ```
-sage: [(p^P).reduce(J) for p in G]
-[0, 0, 0, 0, 0, 0, 0]
+sage: [[(p^P).reduce(J) for p in J] for P in Permutations(4)]
+
+[[0, 0, 0, 0, 0, 0, 0],
+ [0, 0, 0, 0, 0, 0, 0],
+ [0, 0, 0, 0, 0, 0, 0],
+ [0, 0, 0, 0, 0, 0, 0],
+ [0, 0, 0, 0, 0, 0, 0],
+ [0, 0, 0, 0, 0, 0, 0],
+ [0, 0, 0, 0, 0, 0, 0],
+ [0, 0, 0, 0, 0, 0, 0],
+ [0, 0, 0, 0, 0, 0, 0],
+ [0, 0, 0, 0, 0, 0, 0],
+ [0, 0, 0, 0, 0, 0, 0],
+ [0, 0, 0, 0, 0, 0, 0],
+ [0, 0, 0, 0, 0, 0, 0],
+ [0, 0, 0, 0, 0, 0, 0],
+ [0, 0, 0, 0, 0, 0, 0],
+ [0, 0, 0, 0, 0, 0, 0],
+ [0, 0, 0, 0, 0, 0, 0],
+ [0, 0, 0, 0, 0, 0, 0],
+ [0, 0, 0, 0, 0, 0, 0],
+ [0, 0, 0, 0, 0, 0, 0],
+ [0, 0, 0, 0, 0, 0, 0],
+ [0, 0, 0, 0, 0, 0, 0],
+ [0, 0, 0, 0, 0, 0, 0],
+ [0, 0, 0, 0, 0, 0, 0]]
 ```
 
 As usual, it is a special feature of Gröbner bases that they produce unique normal forms. I is not a Gröbner basis, and thus ideal membership test wouldn't work:
 
 ```
-sage: [p.reduce(I) for p in G]
+sage: [p.reduce(I) for p in J]
 
-[x1^5 + x1^4,
- x2*x1^2 + x1^4,
+[x1^4 + x1^3,
+ x2*x1^2 - x1^3,
  x2^2 - x1^2,
  y1*x1^3 + y1*x1^2,
  y1*x2 + y1*x1^2,
@@ -71,26 +95,38 @@
 
 Note that various monomial orders are supported: lex (default), deglex, and degrevlex. 
 
-Note that Aschenbrenner and Hillar restrict their attention to the lexicographic order, and it is not entirely clear whether the Buchberger algorithm would terminate in the other orders, too. But here, it does. As usual, the Gröbner basis depends on the ordering:
+Aschenbrenner and Hillar obtained their results using lexicographic order, and it is not entirely clear whether the Buchberger algorithm would terminate in the other orders, too. But here, it does. As usual, the Gröbner basis depends on the ordering:
 
 ```
-sage: Y.<x,y> = SymmetricPolynomialRing(QQ,order='degrevlex')
+sage: Y.<x,y> = InfinitePolynomialRing(QQ,order='degrevlex')
 sage: I2=Y*(x[1]^2+y[2]^2,x[1]*x[2]*y[3]+x[1]*y[4])
 sage: J2=I2.groebner_basis()
 sage: J2
-Ideal (y3*x1 - y2*x1, x2^2 - x1^2, y1*x2 - y2*x1, y1^2 + x1^2, x2*x1^2 - x1^3, y1*x1^2 + y2*x1, y2*x1^2 + y2*x1, y2*x2*x1 + y2*x1, y2*y1*x1 + x1^3, x1^4 + x1^3) of Symmetric polynomial ring in x, y over Rational Field
+[y3*x1 - y2*x1, x2^2 - x1^2, y1*x2 - y2*x1, y1^2 + x1^2, x2*x1^2 - x1^3, y1*x1^2 + y2*x1, y2*x1^2 + y2*x1, y2*x2*x1 + y2*x1, y2*y1*x1 + x1^3, x1^4 + x1^3]
 ```
 
-Note that we assume an automatic (name-preserving) conversion between X and Y. Hence, we can do the following and see that J2 is not a *lexicographic* Gröbner basis:
+Note that we assume an automatic (name-preserving) conversion between X and Y. Hence, we can do the following and see that J is no *degrevlex* Gröbner basis:
 
 ```
-sage: J.reduce(J2)
-Ideal (0, 0, 0, y1*x1^3 + y1*x1^2, y1*x2 + y1*x1^2, 0, y2*x1 + y1*x1^2) of Symmetric polynomial ring in x, y over Rational Field
+sage: [p.reduce(J) for p in J2]
+[y3*x1 - y2*x1,
+ 0,
+ 0,
+ 0,
+ 0,
+ 0,
+ y2*x1^2 + y2*x1,
+ y2*x2*x1 + y2*x1,
+ y2*y1*x1 + x1^3,
+ 0]
 ```
 
 In any order, we insist to have `X.gen(i)[m]<X.gen(j)[n]` if and only if i<j or (i==j and m<n).
 
 I overloaded the `__pow__` and `__mul__` methods for Symmetric Ideals, since the default methods do not give the correct result: We must have 
 
-`(X*(x[1]))^2 == X*(x[1]^2,x[1]*x[2])`
+```
+sage: (X*(x[1]))^2 == X*(x[1]^2,x[1]*x[2])
+True
+```
 
``````




---

archive/issue_comments_036257.json:
```json
{
    "body": "<a id='comment:18'></a>\nHi Simon,\n* I've deleted the redundant attachments, (you need special rights to do that)\n* Can you confirm that Mike is happy with the infinite polynomial ring interface?\n* btw. you can simply write (`foo in bar` instead of `bar.__contains__(foo)`.",
    "created_at": "2009-04-16T14:39:37Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36257",
    "user": "https://github.com/malb"
}
```

<a id='comment:18'></a>
Hi Simon,
* I've deleted the redundant attachments, (you need special rights to do that)
* Can you confirm that Mike is happy with the infinite polynomial ring interface?
* btw. you can simply write (`foo in bar` instead of `bar.__contains__(foo)`.



---

archive/issue_comments_036258.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [malb](#comment%3A18):\n> Hi Simon,\n> * I've deleted the redundant attachments, (you need special rights to do that)\n\n\nWhy hasn't the owner all rights for his/her tickets?\n\n>  * Can you confirm that Mike is happy with the infinite polynomial ring interface?\n \nI can only hope (I haven't heard of Mike for a long time).\n\nAt least I would expect that he likes it, because it is his original terminology ('InfinitePolynomialRing', not 'SymmetricPolynomialRing')... \n\nBtw., I would insist on the name 'SymmetricIdeal' and 'SymmetricReduction' since this is the terminology of Aschenbrenner and Hillar.\n\n>  * btw. you can simply write (`foo in bar` instead of `bar.__contains__(foo)`.\n \nOk, but I think I wouldn't rewrite the code for that reason...",
    "created_at": "2009-04-16T14:48:31Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36258",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:19'></a>
Replying to [malb](#comment%3A18):
> Hi Simon,
> * I've deleted the redundant attachments, (you need special rights to do that)


Why hasn't the owner all rights for his/her tickets?

>  * Can you confirm that Mike is happy with the infinite polynomial ring interface?
 
I can only hope (I haven't heard of Mike for a long time).

At least I would expect that he likes it, because it is his original terminology ('InfinitePolynomialRing', not 'SymmetricPolynomialRing')... 

Btw., I would insist on the name 'SymmetricIdeal' and 'SymmetricReduction' since this is the terminology of Aschenbrenner and Hillar.

>  * btw. you can simply write (`foo in bar` instead of `bar.__contains__(foo)`.
 
Ok, but I think I wouldn't rewrite the code for that reason...



---

archive/issue_comments_036259.json:
```json
{
    "body": "<a id='comment:20'></a>\nSince many things changed, here is an account of what the patch provides:\n* Two implementations of polynomial rings over fields with countably many generators, indexed by natural numbers:\n  - A sparse implementation, that allows for working with very high variable indices\n  - A dense implementation, that is much faster provided the variable indices are not too big.\n* Elements of these infinite polynomial rings, with usual arithmetic and with a permutation action on the variables.\n* Symmetric Ideals, which are ideals that, in addition, are invariant under variable permutation.\n* Gr\u00f6bner stuff:\n  - A symmetric version of polynomial reduction, based on the Cython class 'SymmetricReductionStrategy' that tries to perform the reduction in an efficient way (idea: keep intermediate results small).\n  - Symmetric Interreduction\n  - Computation of Symmetric Gr\u00f6bner bases, which is at least possible for lexicographic term order, according to Aschenbrenner and Hillar.\n\n**__Disclaimer__**\n\nI am afraid that again I tried to be clever in implementing the symmetric Gr\u00f6bner basis computation. The following is my justification:\n\nThe underlying idea of any Gr\u00f6bner basis computation (symmetric or straight) is:\n* Perform certain operations that may yield new leading monomials.\n* Continue to perform these operations until it stabilizes.\n\nIn the case of symmetric ideals, these operations are (according to Aschenbrenner and Hillar):\n1. S-polynomials\n2. The action of Sym(N), the full symmetric group, where N is some number that will increase until it stabilizes.\n\nI replace Sym(N) by the elementary transpositions (i,j) for i,j<=N. I think this works, for the following reason:\n* Let m, n be monomials, m<n, and let P in Sym(N) be a permutation so that `m<sup>P>n</sup>P`.\n* The action of P does not change the polynomial degree. Hence, in all of our term orders (lex, deglex, degrevlex), \"`m<n but m<sup>P>n</sup>P`\" can only occur if P changes the lexicographic order of m and n.\n* If it changes the lexicographic order then we find indices i, j so that \n  - the exponents of x_k in m and n coincide, for all k<i\n  - the exponent of x_i in m is smaller than the exponent of x_j in m\n  - P(j)=i.\n* Hence, the elementary transposition (i,j) would change the order of m and n as well.\n\nIn other words, if there is a permutation that turns a non-leading monomial into a leading monomial, then there is an elementary transposition that does the job as well.\n\nI am sorry to do mathematics here. With that trick, I can do serious examples (20000 polynomials out to variables index 10), which would be impossible when studying *all* permutations.",
    "created_at": "2009-04-16T15:16:20Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36259",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:20'></a>
Since many things changed, here is an account of what the patch provides:
* Two implementations of polynomial rings over fields with countably many generators, indexed by natural numbers:
  - A sparse implementation, that allows for working with very high variable indices
  - A dense implementation, that is much faster provided the variable indices are not too big.
* Elements of these infinite polynomial rings, with usual arithmetic and with a permutation action on the variables.
* Symmetric Ideals, which are ideals that, in addition, are invariant under variable permutation.
* Gröbner stuff:
  - A symmetric version of polynomial reduction, based on the Cython class 'SymmetricReductionStrategy' that tries to perform the reduction in an efficient way (idea: keep intermediate results small).
  - Symmetric Interreduction
  - Computation of Symmetric Gröbner bases, which is at least possible for lexicographic term order, according to Aschenbrenner and Hillar.

**__Disclaimer__**

I am afraid that again I tried to be clever in implementing the symmetric Gröbner basis computation. The following is my justification:

The underlying idea of any Gröbner basis computation (symmetric or straight) is:
* Perform certain operations that may yield new leading monomials.
* Continue to perform these operations until it stabilizes.

In the case of symmetric ideals, these operations are (according to Aschenbrenner and Hillar):
1. S-polynomials
2. The action of Sym(N), the full symmetric group, where N is some number that will increase until it stabilizes.

I replace Sym(N) by the elementary transpositions (i,j) for i,j<=N. I think this works, for the following reason:
* Let m, n be monomials, m<n, and let P in Sym(N) be a permutation so that `m<sup>P>n</sup>P`.
* The action of P does not change the polynomial degree. Hence, in all of our term orders (lex, deglex, degrevlex), "`m<n but m<sup>P>n</sup>P`" can only occur if P changes the lexicographic order of m and n.
* If it changes the lexicographic order then we find indices i, j so that 
  - the exponents of x_k in m and n coincide, for all k<i
  - the exponent of x_i in m is smaller than the exponent of x_j in m
  - P(j)=i.
* Hence, the elementary transposition (i,j) would change the order of m and n as well.

In other words, if there is a permutation that turns a non-leading monomial into a leading monomial, then there is an elementary transposition that does the job as well.

I am sorry to do mathematics here. With that trick, I can do serious examples (20000 polynomials out to variables index 10), which would be impossible when studying *all* permutations.



---

archive/issue_comments_036260.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [SimonKing](#comment%3A19):\n> Why hasn't the owner all rights for his/her tickets?\n\n\nI don't know, I didn't design trac. I guess our workflow is unusal.\n \n> >  * btw. you can simply write (`foo in bar` instead of `bar.__contains__(foo)`.\n \n> Ok, but I think I wouldn't rewrite the code for that reason...\n\nIt was only a suggestion.",
    "created_at": "2009-04-16T15:59:51Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36260",
    "user": "https://github.com/malb"
}
```

<a id='comment:21'></a>
Replying to [SimonKing](#comment%3A19):
> Why hasn't the owner all rights for his/her tickets?


I don't know, I didn't design trac. I guess our workflow is unusal.
 
> >  * btw. you can simply write (`foo in bar` instead of `bar.__contains__(foo)`.
 
> Ok, but I think I wouldn't rewrite the code for that reason...

It was only a suggestion.



---

archive/issue_comments_036261.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [malb](#comment%3A21):\n> Replying to [SimonKing](#comment%3A19):\n> > Why hasn't the owner all rights for his/her tickets?\n\n> \n> I don't know, I didn't design trac. I guess our workflow is unusal.\n\n\nThe permission model does not allow it since it isn't that fine grained.\n\nCheers,\n\nMichael",
    "created_at": "2009-04-16T21:16:58Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36261",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:22'></a>
Replying to [malb](#comment%3A21):
> Replying to [SimonKing](#comment%3A19):
> > Why hasn't the owner all rights for his/her tickets?

> 
> I don't know, I didn't design trac. I guess our workflow is unusal.


The permission model does not allow it since it isn't that fine grained.

Cheers,

Michael



---

archive/issue_comments_036262.json:
```json
{
    "body": "<a id='comment:23'></a>\n**Review**\n* this patch should go in soon, because it is quite big already\n* please document the parameters for {{{InfinitePolynomial.__init__}}\n* note that `__foo__` functions are not included in the docs, so I guess the `__init__` docs should be class level docs.\n* please don't use `__repr__` and friends in doctests but use examples that are natural Python and mark them `#indirect doctest`\n* please fill in the 32-bit hash doctest values\n* why do you ask coercion questions in `_add_` and friends, at this point coercion should be done. What am I missing?\n* most of the code is beautifully documented! Well done.\n* you should add an `AUTHORS` block and add your name to each file\n* the `INPUT` syntax is that each entry starts with a `-` not a `*`\n* at the risk of being obnoxious: the Python convention is to use `add_generator` over `AddGenerator`\n* I cannot vouche for the mathematics but it all seems very sound. \n* Did you generate and check the docs?",
    "created_at": "2009-04-17T12:02:27Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36262",
    "user": "https://github.com/malb"
}
```

<a id='comment:23'></a>
**Review**
* this patch should go in soon, because it is quite big already
* please document the parameters for {{{InfinitePolynomial.__init__}}
* note that `__foo__` functions are not included in the docs, so I guess the `__init__` docs should be class level docs.
* please don't use `__repr__` and friends in doctests but use examples that are natural Python and mark them `#indirect doctest`
* please fill in the 32-bit hash doctest values
* why do you ask coercion questions in `_add_` and friends, at this point coercion should be done. What am I missing?
* most of the code is beautifully documented! Well done.
* you should add an `AUTHORS` block and add your name to each file
* the `INPUT` syntax is that each entry starts with a `-` not a `*`
* at the risk of being obnoxious: the Python convention is to use `add_generator` over `AddGenerator`
* I cannot vouche for the mathematics but it all seems very sound. 
* Did you generate and check the docs?



---

archive/issue_events_035237.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2009-04-17T12:02:27Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "rename": {
        "from": "Symmetric Groebner bases and Infinitely Generated Polynomial Rings",
        "to": "[needs some work] Symmetric Groebner bases and Infinitely Generated Polynomial Rings"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35237"
}
```



---

archive/issue_comments_036263.json:
```json
{
    "body": "<a id='comment:24'></a>\nHi Simon,\n\nthe missing 32 bit has values are\n\n```\nsage -t -long \"devel/sage/sage/rings/polynomial/infinite_polynomial_element.py\"\n**********************************************************************\nFile \"/Users/mabshoff/sage-3.4.1.rc3/devel/sage/sage/rings/polynomial/infinite_polynomial_element.py\", line 133:\n    sage: hash(a)\n                      \nExpected nothing\nGot:\n    233743571\n**********************************************************************\nFile \"/Users/mabshoff/sage-3.4.1.rc3/devel/sage/sage/rings/polynomial/infinite_polynomial_element.py\", line 136:\n    sage: hash(a._p)\n                      \nExpected nothing\nGot:\n    233743571\n**********************************************************************\n```\n\nCheers,\n\nMichael",
    "created_at": "2009-04-17T12:31:16Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36263",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:24'></a>
Hi Simon,

the missing 32 bit has values are

```
sage -t -long "devel/sage/sage/rings/polynomial/infinite_polynomial_element.py"
**********************************************************************
File "/Users/mabshoff/sage-3.4.1.rc3/devel/sage/sage/rings/polynomial/infinite_polynomial_element.py", line 133:
    sage: hash(a)
                      
Expected nothing
Got:
    233743571
**********************************************************************
File "/Users/mabshoff/sage-3.4.1.rc3/devel/sage/sage/rings/polynomial/infinite_polynomial_element.py", line 136:
    sage: hash(a._p)
                      
Expected nothing
Got:
    233743571
**********************************************************************
```

Cheers,

Michael



---

archive/issue_comments_036264.json:
```json
{
    "body": "<a id='comment:25'></a>\nOne last thing: You used _P in your code and `_[A-Z` are reserved numerical constants on some BSDs as well as Solaris. The way your code is written does not trigger any compilation failures (I tested on Solaris 10), but I would generally discourage the use. One prominent example where this caused endless problems was the PolyBoRi interface where Burcin and I rewrote large parts of the variable names because of it.\n\nCheers,\n\nMichael",
    "created_at": "2009-04-17T12:40:29Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36264",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:25'></a>
One last thing: You used _P in your code and `_[A-Z` are reserved numerical constants on some BSDs as well as Solaris. The way your code is written does not trigger any compilation failures (I tested on Solaris 10), but I would generally discourage the use. One prominent example where this caused endless problems was the PolyBoRi interface where Burcin and I rewrote large parts of the variable names because of it.

Cheers,

Michael



---

archive/issue_comments_036265.json:
```json
{
    "body": "<a id='comment:26'></a>\nHi Martin,\n\nReplying to [malb](#comment%3A23):\n>  * please don't use `__repr__` and friends in doctests but use examples that are natural Python and mark them `#indirect doctest`\n\n\nCould you elaborate? I don't understand what that means.\n\n>  * why do you ask coercion questions in `_add_` and friends, at this point coercion should be done. What am I missing?\n\n\nYou mean `hasattr(self.parent(),'_P')`? This is since I have a dense and a sparse implementation of infinite polynomial rings, but I only have a *single* class of infinite polynomials, in order to avoid code duplication. So, I have to check whether the parent of an infinite polynomial is dense or sparse.\n\nBut now, as you mention it: The dense ring class inherits from the sparse ring class; perhaps there should also be dense and a sparse element class, with separate `_add_`?\n\n>  * most of the code is beautifully documented! Well done.\n\n\nThank you!\n\n>  * you should add an `AUTHORS` block and add your name to each file\n\n\nSo, the copyright information is not enough?\n\nConncerning copyright: Although most of the code is original, I would like to include mhanson in the copyright, because his code was the starting point for me, and his 'dense' approach towards infinite polynomial rings is now the standard implementation (since it is faster). Is it ok to name him, although he did not explicitly state that he agrees with being named?\n\n>  * at the risk of being obnoxious: the Python convention is to use `add_generator` over `AddGenerator`\n\n\nOk, will change it. Note, however, that `addGenerator` without underscore  is the name of the corresponding method in polybory's `GroebnerStrategy`.\n\nAt this occasion: Would you prefer the method name 'symmetric_cancellation_order' over 'sco'?\n\n>  * Did you generate and check the docs?\n\n\nI checked the doc tests, but I don't know how to generate the docs.\n\nBest regards,\n   Simon",
    "created_at": "2009-04-17T21:30:43Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36265",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:26'></a>
Hi Martin,

Replying to [malb](#comment%3A23):
>  * please don't use `__repr__` and friends in doctests but use examples that are natural Python and mark them `#indirect doctest`


Could you elaborate? I don't understand what that means.

>  * why do you ask coercion questions in `_add_` and friends, at this point coercion should be done. What am I missing?


You mean `hasattr(self.parent(),'_P')`? This is since I have a dense and a sparse implementation of infinite polynomial rings, but I only have a *single* class of infinite polynomials, in order to avoid code duplication. So, I have to check whether the parent of an infinite polynomial is dense or sparse.

But now, as you mention it: The dense ring class inherits from the sparse ring class; perhaps there should also be dense and a sparse element class, with separate `_add_`?

>  * most of the code is beautifully documented! Well done.


Thank you!

>  * you should add an `AUTHORS` block and add your name to each file


So, the copyright information is not enough?

Conncerning copyright: Although most of the code is original, I would like to include mhanson in the copyright, because his code was the starting point for me, and his 'dense' approach towards infinite polynomial rings is now the standard implementation (since it is faster). Is it ok to name him, although he did not explicitly state that he agrees with being named?

>  * at the risk of being obnoxious: the Python convention is to use `add_generator` over `AddGenerator`


Ok, will change it. Note, however, that `addGenerator` without underscore  is the name of the corresponding method in polybory's `GroebnerStrategy`.

At this occasion: Would you prefer the method name 'symmetric_cancellation_order' over 'sco'?

>  * Did you generate and check the docs?


I checked the doc tests, but I don't know how to generate the docs.

Best regards,
   Simon



---

archive/issue_comments_036266.json:
```json
{
    "body": "<a id='comment:27'></a>\nReplying to [mabshoff](#comment%3A25):\n> One last thing: You used _P in your code and `_[A-Z` are reserved numerical constants on some BSDs as well as Solaris. \n\n\nO my goodness!\n\n> The way your code is written does not trigger any compilation failures (I tested on Solaris 10), but I would generally discourage the use. \n\n\nThe `_P` is one detail that I took from Mike's code. But you say *compilation* failures -- so wouldn't this problem only be relevant for cython, not python?\n\nAnyway. In `symmetric_reduction.pyx` I have `_R` as an attribute name of a cdef'd class. Perhaps I better channge it.\n\nCheers,\n   Simon",
    "created_at": "2009-04-17T21:37:22Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36266",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:27'></a>
Replying to [mabshoff](#comment%3A25):
> One last thing: You used _P in your code and `_[A-Z` are reserved numerical constants on some BSDs as well as Solaris. 


O my goodness!

> The way your code is written does not trigger any compilation failures (I tested on Solaris 10), but I would generally discourage the use. 


The `_P` is one detail that I took from Mike's code. But you say *compilation* failures -- so wouldn't this problem only be relevant for cython, not python?

Anyway. In `symmetric_reduction.pyx` I have `_R` as an attribute name of a cdef'd class. Perhaps I better channge it.

Cheers,
   Simon



---

archive/issue_comments_036267.json:
```json
{
    "body": "<a id='comment:28'></a>\nReplying to [mabshoff](#comment%3A24):\n> Hi Simon,\n> \n> the missing 32 bit has values are\n\n...\n>     233743571\n\n\nThank you!",
    "created_at": "2009-04-17T21:38:43Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36267",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:28'></a>
Replying to [mabshoff](#comment%3A24):
> Hi Simon,
> 
> the missing 32 bit has values are

...
>     233743571


Thank you!



---

archive/issue_comments_036268.json:
```json
{
    "body": "<a id='comment:29'></a>\nReplying to [SimonKing](#comment%3A26):\n> Replying to [malb](#comment%3A23):\n> >  * please don't use `__repr__` and friends in doctests but use examples that are natural Python and mark them `#indirect doctest`\n \n> \n> Could you elaborate? I don't understand what that means.\n\n\nYou have lines like `foo.__repr__()` in your `EXAMPLES`. It should be `str(foo)` instead, i.e. double underscore functions shouldn't be called directly (but indirectly by Python).\n \n> >  * why do you ask coercion questions in `_add_` and friends, at this point coercion should be done. What am I missing?\n \n> \n> You mean `hasattr(self.parent(),'_P')`? This is since I have a dense and a sparse implementation of infinite polynomial rings, but I only have a *single* class of infinite polynomials, in order to avoid code duplication. So, I have to check whether the parent of an infinite polynomial is dense or sparse.\n> \n> But now, as you mention it: The dense ring class inherits from the sparse ring class; perhaps there should also be dense and a sparse element class, with separate `_add_`?\n\n\nIt probably would be cleaner and faster.\n\n> >  * you should add an `AUTHORS` block and add your name to each file\n \n> \n> So, the copyright information is not enough?\n\n\nIt is \"enough\" for legal purposes but someone reading the docs won't see your name which would be a shame.\n \n> Conncerning copyright: Although most of the code is original, I would like to include mhanson in the copyright, because his code was the starting point for me, and his 'dense' approach towards infinite polynomial rings is now the standard implementation (since it is faster). Is it ok to name him, although he did not explicitly state that he agrees with being named?\n\n\nThat is probably alright.\n\n> >  * at the risk of being obnoxious: the Python convention is to use `add_generator` over `AddGenerator`\n \n> \n> Ok, will change it. Note, however, that `addGenerator` without underscore  is the name of the corresponding method in polybory's `GroebnerStrategy`.\n\n\nNote that they changed that in PolyBoRi 0.6 to be consistent with Python's convention.\n\n> At this occasion: Would you prefer the method name 'symmetric_cancellation_order' over 'sco'?\n\n\nIf `sco` is not the word used in papers, I'd prefer `symmetric_cancelation_order`. I have no hard feelings either way though.\n\n> >  * Did you generate and check the docs?\n \n> \n> I checked the doc tests, but I don't know how to generate the docs.\n\n\nrun `sage -docbuild  reference html` and check for warnings + inspect the result.",
    "created_at": "2009-04-19T13:58:42Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36268",
    "user": "https://github.com/malb"
}
```

<a id='comment:29'></a>
Replying to [SimonKing](#comment%3A26):
> Replying to [malb](#comment%3A23):
> >  * please don't use `__repr__` and friends in doctests but use examples that are natural Python and mark them `#indirect doctest`
 
> 
> Could you elaborate? I don't understand what that means.


You have lines like `foo.__repr__()` in your `EXAMPLES`. It should be `str(foo)` instead, i.e. double underscore functions shouldn't be called directly (but indirectly by Python).
 
> >  * why do you ask coercion questions in `_add_` and friends, at this point coercion should be done. What am I missing?
 
> 
> You mean `hasattr(self.parent(),'_P')`? This is since I have a dense and a sparse implementation of infinite polynomial rings, but I only have a *single* class of infinite polynomials, in order to avoid code duplication. So, I have to check whether the parent of an infinite polynomial is dense or sparse.
> 
> But now, as you mention it: The dense ring class inherits from the sparse ring class; perhaps there should also be dense and a sparse element class, with separate `_add_`?


It probably would be cleaner and faster.

> >  * you should add an `AUTHORS` block and add your name to each file
 
> 
> So, the copyright information is not enough?


It is "enough" for legal purposes but someone reading the docs won't see your name which would be a shame.
 
> Conncerning copyright: Although most of the code is original, I would like to include mhanson in the copyright, because his code was the starting point for me, and his 'dense' approach towards infinite polynomial rings is now the standard implementation (since it is faster). Is it ok to name him, although he did not explicitly state that he agrees with being named?


That is probably alright.

> >  * at the risk of being obnoxious: the Python convention is to use `add_generator` over `AddGenerator`
 
> 
> Ok, will change it. Note, however, that `addGenerator` without underscore  is the name of the corresponding method in polybory's `GroebnerStrategy`.


Note that they changed that in PolyBoRi 0.6 to be consistent with Python's convention.

> At this occasion: Would you prefer the method name 'symmetric_cancellation_order' over 'sco'?


If `sco` is not the word used in papers, I'd prefer `symmetric_cancelation_order`. I have no hard feelings either way though.

> >  * Did you generate and check the docs?
 
> 
> I checked the doc tests, but I don't know how to generate the docs.


run `sage -docbuild  reference html` and check for warnings + inspect the result.



---

archive/issue_comments_036269.json:
```json
{
    "body": "<a id='comment:30'></a>\nHi Martin,\n\nReplying to [malb](#comment%3A29):\n> Replying to [SimonKing](#comment%3A26):\n\n...\n> > But now, as you mention it: The dense ring class inherits from the sparse ring class; perhaps there should also be dense and a sparse element class, with separate `_add_`?\n\n> \n> It probably would be cleaner and faster.\n\n\nOK, I'll try and do it (which needs more time). I guess, as for the rings, the dense class should inherit from the sparse class, and overload the arithmetic methods.\n\n> > At this occasion: Would you prefer the method name 'symmetric_cancellation_order' over 'sco'?\n\n> \n> If `sco` is not the word used in papers, I'd prefer `symmetric_cancelation_order`. I have no hard feelings either way though.\n\n\nOK, my impression is that *explicit* names are preferred.\n\n> > I checked the doc tests, but I don't know how to generate the docs.\n\n> \n> run `sage -docbuild  reference html` and check for warnings + inspect the result.\n\n\nThank you. It complains:\n* WARNING: Missing title for sage.rings.polynomial.infinite_polynomial_element\n* reST markup error: /home/king/SAGE/devel/sage-3.2.3/local/lib/python2.5/site-packages/sage/rings/polynomial/symmetric_ideal.py:docstring of sage.rings.polynomial.symmetric_ideal.SymmetricIdeal:4: (SEVERE/4) Unexpected section title.\n\n  THEORY:\n\n  -------\n\nSo, how can I add a title? And what's wrong with the section title?",
    "created_at": "2009-04-21T08:20:15Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36269",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:30'></a>
Hi Martin,

Replying to [malb](#comment%3A29):
> Replying to [SimonKing](#comment%3A26):

...
> > But now, as you mention it: The dense ring class inherits from the sparse ring class; perhaps there should also be dense and a sparse element class, with separate `_add_`?

> 
> It probably would be cleaner and faster.


OK, I'll try and do it (which needs more time). I guess, as for the rings, the dense class should inherit from the sparse class, and overload the arithmetic methods.

> > At this occasion: Would you prefer the method name 'symmetric_cancellation_order' over 'sco'?

> 
> If `sco` is not the word used in papers, I'd prefer `symmetric_cancelation_order`. I have no hard feelings either way though.


OK, my impression is that *explicit* names are preferred.

> > I checked the doc tests, but I don't know how to generate the docs.

> 
> run `sage -docbuild  reference html` and check for warnings + inspect the result.


Thank you. It complains:
* WARNING: Missing title for sage.rings.polynomial.infinite_polynomial_element
* reST markup error: /home/king/SAGE/devel/sage-3.2.3/local/lib/python2.5/site-packages/sage/rings/polynomial/symmetric_ideal.py:docstring of sage.rings.polynomial.symmetric_ideal.SymmetricIdeal:4: (SEVERE/4) Unexpected section title.

  THEORY:

  -------

So, how can I add a title? And what's wrong with the section title?



---

archive/issue_comments_036270.json:
```json
{
    "body": "<a id='comment:31'></a>\nPlease keep the review tags in a standard way so the right reports pick up ticket.\n\nCheers,\n\nMichael",
    "created_at": "2009-04-21T08:22:20Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36270",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:31'></a>
Please keep the review tags in a standard way so the right reports pick up ticket.

Cheers,

Michael



---

archive/issue_events_035238.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2009-04-21T08:22:20Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "rename": {
        "from": "[needs some work] Symmetric Groebner bases and Infinitely Generated Polynomial Rings",
        "to": "Symmetric Groebner bases and Infinitely Generated Polynomial Rings"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35238"
}
```



---

archive/issue_events_035239.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2009-04-21T08:22:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35239"
}
```



---

archive/issue_events_035240.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2009-04-21T08:22:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35240"
}
```



---

archive/issue_comments_036271.json:
```json
{
    "body": "<a id='comment:32'></a>\nReplying to [SimonKing](#comment%3A30):\n> Thank you. It complains:\n> * WARNING: Missing title for sage.rings.polynomial.infinite_polynomial_element\n> * reST markup error: /home/king/SAGE/devel/sage-3.2.3/local/lib/python2.5/site-packages/sage/rings/polynomial/symmetric_ideal.py:docstring of sage.rings.polynomial.symmetric_ideal.SymmetricIdeal:4: (SEVERE/4) Unexpected section title.\n\n\n>    THEORY:\n\n\n>    ---\n\n> \n> So, how can I add a title? And what's wrong with the section title?\n\n\nYou'd add a docstring to the beginning of the file and its first line would be the title.\n\nI think the `Theory` block needs a different underline, these encode section level in ReST IIRC.",
    "created_at": "2009-04-21T09:11:16Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36271",
    "user": "https://github.com/malb"
}
```

<a id='comment:32'></a>
Replying to [SimonKing](#comment%3A30):
> Thank you. It complains:
> * WARNING: Missing title for sage.rings.polynomial.infinite_polynomial_element
> * reST markup error: /home/king/SAGE/devel/sage-3.2.3/local/lib/python2.5/site-packages/sage/rings/polynomial/symmetric_ideal.py:docstring of sage.rings.polynomial.symmetric_ideal.SymmetricIdeal:4: (SEVERE/4) Unexpected section title.


>    THEORY:


>    ---

> 
> So, how can I add a title? And what's wrong with the section title?


You'd add a docstring to the beginning of the file and its first line would be the title.

I think the `Theory` block needs a different underline, these encode section level in ReST IIRC.



---

archive/issue_comments_036272.json:
```json
{
    "body": "<a id='comment:33'></a>\nThe new patch (still self-contained) should apply to sage-3.4.1.rc3\n\nLet me address your comments:\n\n* I built the documentation, and it looks OK to me.\n\n* Now, I have separate dense and sparse implementations for `InfinitePolynomial`s.\n\n* I changed `sco` into `symmetric_cancellation_order` and `AddGenerator` into `add_generator`.\n\n**__New Feature__**\n* I added a `__getattr__` method to `InfinitePolynomial`s that forwards to the underlying finite polynomials. Consequence: Any attribute of the underlying finite polynomial is directly available to the Infinite Polynomial, unless that method is overwritten. In that way, I automatically have latex typeset for the Infinite Polynomials.\n* A propos latex: I also added latex methods for Infinite Polynomial Rings and Symmetric Ideals. \n\nLatex looks like this:\n\n```\nsage: X.<x,y> = InfinitePolynomialRing(QQ)\nsage: latex(x)\nx_{\\ast}\n```\nI think this makes sense. After all, `x` generates a series of variables, indexed by natural numbers, and in this situation it is common to use a star as index. Similarly:\n\n```\nsage: latex(X)\n\\mathbf{Q}[x_{\\ast}, y_{\\ast}]\nsage: latex(x[2]*y[0]+3*x[4]+1)\ny_{0} x_{2} + 3 x_{4} + 1\nsage: latex(X*(x[1]*y[2]))\n\\left(y_{2} x_{1}\\right)\\mathbf{Q}[x_{\\ast}, y_{\\ast}][\\mathfrak{S}_{\\infty}]\n```\nPerhaps the last line requires some explanation. \n1. G=S_infinity shall denote the symmetric group over the natural numbers. I hope this is understandable.\n2. R=Q[x_*,y_*] is the infinite polynomial ring.\n3. R[G] is the group ring of G with coefficients in R.\n4. A symmetric ideal is nothing but a R[G] module. Since G acts from the right, we thus have the above notation.\n\nRather huge patch, sorry...",
    "created_at": "2009-04-22T15:26:36Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36272",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:33'></a>
The new patch (still self-contained) should apply to sage-3.4.1.rc3

Let me address your comments:

* I built the documentation, and it looks OK to me.

* Now, I have separate dense and sparse implementations for `InfinitePolynomial`s.

* I changed `sco` into `symmetric_cancellation_order` and `AddGenerator` into `add_generator`.

**__New Feature__**
* I added a `__getattr__` method to `InfinitePolynomial`s that forwards to the underlying finite polynomials. Consequence: Any attribute of the underlying finite polynomial is directly available to the Infinite Polynomial, unless that method is overwritten. In that way, I automatically have latex typeset for the Infinite Polynomials.
* A propos latex: I also added latex methods for Infinite Polynomial Rings and Symmetric Ideals. 

Latex looks like this:

```
sage: X.<x,y> = InfinitePolynomialRing(QQ)
sage: latex(x)
x_{\ast}
```
I think this makes sense. After all, `x` generates a series of variables, indexed by natural numbers, and in this situation it is common to use a star as index. Similarly:

```
sage: latex(X)
\mathbf{Q}[x_{\ast}, y_{\ast}]
sage: latex(x[2]*y[0]+3*x[4]+1)
y_{0} x_{2} + 3 x_{4} + 1
sage: latex(X*(x[1]*y[2]))
\left(y_{2} x_{1}\right)\mathbf{Q}[x_{\ast}, y_{\ast}][\mathfrak{S}_{\infty}]
```
Perhaps the last line requires some explanation. 
1. G=S_infinity shall denote the symmetric group over the natural numbers. I hope this is understandable.
2. R=Q[x_*,y_*] is the infinite polynomial ring.
3. R[G] is the group ring of G with coefficients in R.
4. A symmetric ideal is nothing but a R[G] module. Since G acts from the right, we thus have the above notation.

Rather huge patch, sorry...



---

archive/issue_events_035241.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2009-04-22T15:26:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35241"
}
```



---

archive/issue_events_035242.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2009-04-22T15:26:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35242"
}
```



---

archive/issue_comments_036273.json:
```json
{
    "body": "<a id='comment:34'></a>\nSimon, IIRC you addressed all the issues I raised, right? I guess, the patch needs some final re-reading by e.g. me and then it should go in ASAP. It is a patch bomb already.",
    "created_at": "2009-04-22T22:11:05Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36273",
    "user": "https://github.com/malb"
}
```

<a id='comment:34'></a>
Simon, IIRC you addressed all the issues I raised, right? I guess, the patch needs some final re-reading by e.g. me and then it should go in ASAP. It is a patch bomb already.



---

archive/issue_comments_036274.json:
```json
{
    "body": "<a id='comment:35'></a>\nFirst, some general questions:\n\n1. Should previous versions of a patch be preserved, or is it better to overwrite the old patch with the new version? \n2. Should there only be *one* patch, or should there be one starter patch, and all other patches only define the change with respect to the previous patch (hence, one has to apply a sequence of one big and perhaps 10 small patches)?\n\nAnyway. This time I created a new patch `SymmetricIdeals.2.patch`, that should be applied first (e.g., to sage-3.4.1.rc3). After that, please apply `SymmetricIdealsCorrection.patch`, that corrects some doc tests.\n\nChanges with respect to previous versions:\n- Major improvement of the documentation. I did `sage -docbuild reference html`, and it looks good in the browser.\n- Now any class has a `X==loads(dumps(X))` doc test. In particular, the Cython class `SymmetricReductionStrategy` is provided with pickling.\n- The performance is further improved: With `prune`, I found that a considerable amount of time was spent with `deepcopy`. Since I know that the object to be copied is a dict whose values are lists of integers, it is cheaper to do the copy manually. I am surprised that it makes such a big difference!\n\nAfter applying `SymmetricIdealsCorrection.patch`, the doc tests of my files pass for me.\n\nOne question to the referee: As mentioned in a comment above, I try to be clever, i.e., in `SymmetricIdeal.symmetrisation()` I only apply elementary transpositions rather than the full symmetric group. I believe it works, but it is a difference to what Aschenbrenner and Hillar suggested. Shall I point it out in the documentation?\n\nBest regards,\n     Simon",
    "created_at": "2009-04-27T09:18:51Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36274",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:35'></a>
First, some general questions:

1. Should previous versions of a patch be preserved, or is it better to overwrite the old patch with the new version? 
2. Should there only be *one* patch, or should there be one starter patch, and all other patches only define the change with respect to the previous patch (hence, one has to apply a sequence of one big and perhaps 10 small patches)?

Anyway. This time I created a new patch `SymmetricIdeals.2.patch`, that should be applied first (e.g., to sage-3.4.1.rc3). After that, please apply `SymmetricIdealsCorrection.patch`, that corrects some doc tests.

Changes with respect to previous versions:
- Major improvement of the documentation. I did `sage -docbuild reference html`, and it looks good in the browser.
- Now any class has a `X==loads(dumps(X))` doc test. In particular, the Cython class `SymmetricReductionStrategy` is provided with pickling.
- The performance is further improved: With `prune`, I found that a considerable amount of time was spent with `deepcopy`. Since I know that the object to be copied is a dict whose values are lists of integers, it is cheaper to do the copy manually. I am surprised that it makes such a big difference!

After applying `SymmetricIdealsCorrection.patch`, the doc tests of my files pass for me.

One question to the referee: As mentioned in a comment above, I try to be clever, i.e., in `SymmetricIdeal.symmetrisation()` I only apply elementary transpositions rather than the full symmetric group. I believe it works, but it is a difference to what Aschenbrenner and Hillar suggested. Shall I point it out in the documentation?

Best regards,
     Simon



---

archive/issue_comments_036275.json:
```json
{
    "body": "<a id='comment:36'></a>\nReplying to [SimonKing](#comment%3A35):\n> First, some general questions:\n> \n> 1. Should previous versions of a patch be preserved, or is it better to overwrite the old patch with the new version? \n\n\nI don't think we established a good practice here yet. But it is certainly easier for the release manager if there is only one patch or a clear description what to apply when.\n\n>  2. Should there only be *one* patch, or should there be one starter patch, and all other patches only define the change with respect to the previous patch (hence, one has to apply a sequence of one big and perhaps 10 small patches)?\n\n\nIt depends. I would say: This ticket should be closed soon. The patch is way too big already. So in this case new patches (in different tickets) should be created.\n\n> Anyway. This time I created a new patch `SymmetricIdeals.2.patch`, that should be applied first (e.g., to sage-3.4.1.rc3). After that, please apply `SymmetricIdealsCorrection.patch`, that corrects some doc tests.\n> \n> Changes with respect to previous versions:\n> - Major improvement of the documentation. I did `sage -docbuild reference html`, and it looks good in the browser.\n> - Now any class has a `X==loads(dumps(X))` doc test. In particular, the Cython class `SymmetricReductionStrategy` is provided with pickling.\n> - The performance is further improved: With `prune`, I found that a considerable amount of time was spent with `deepcopy`. Since I know that the object to be copied is a dict whose values are lists of integers, it is cheaper to do the copy manually. I am surprised that it makes such a big difference!\n> \n> After applying `SymmetricIdealsCorrection.patch`, the doc tests of my files pass for me.\n> \n> One question to the referee: As mentioned in a comment above, I try to be clever, i.e., in `SymmetricIdeal.symmetrisation()` I only apply elementary transpositions rather than the full symmetric group. I believe it works, but it is a difference to what Aschenbrenner and Hillar suggested. Shall I point it out in the documentation\n\n\nYes, that should be pointed out clearly.\n\nLet me know what the 'final' version of your patch is and then I'll review it.",
    "created_at": "2009-04-27T09:54:53Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36275",
    "user": "https://github.com/malb"
}
```

<a id='comment:36'></a>
Replying to [SimonKing](#comment%3A35):
> First, some general questions:
> 
> 1. Should previous versions of a patch be preserved, or is it better to overwrite the old patch with the new version? 


I don't think we established a good practice here yet. But it is certainly easier for the release manager if there is only one patch or a clear description what to apply when.

>  2. Should there only be *one* patch, or should there be one starter patch, and all other patches only define the change with respect to the previous patch (hence, one has to apply a sequence of one big and perhaps 10 small patches)?


It depends. I would say: This ticket should be closed soon. The patch is way too big already. So in this case new patches (in different tickets) should be created.

> Anyway. This time I created a new patch `SymmetricIdeals.2.patch`, that should be applied first (e.g., to sage-3.4.1.rc3). After that, please apply `SymmetricIdealsCorrection.patch`, that corrects some doc tests.
> 
> Changes with respect to previous versions:
> - Major improvement of the documentation. I did `sage -docbuild reference html`, and it looks good in the browser.
> - Now any class has a `X==loads(dumps(X))` doc test. In particular, the Cython class `SymmetricReductionStrategy` is provided with pickling.
> - The performance is further improved: With `prune`, I found that a considerable amount of time was spent with `deepcopy`. Since I know that the object to be copied is a dict whose values are lists of integers, it is cheaper to do the copy manually. I am surprised that it makes such a big difference!
> 
> After applying `SymmetricIdealsCorrection.patch`, the doc tests of my files pass for me.
> 
> One question to the referee: As mentioned in a comment above, I try to be clever, i.e., in `SymmetricIdeal.symmetrisation()` I only apply elementary transpositions rather than the full symmetric group. I believe it works, but it is a difference to what Aschenbrenner and Hillar suggested. Shall I point it out in the documentation


Yes, that should be pointed out clearly.

Let me know what the 'final' version of your patch is and then I'll review it.



---

archive/issue_comments_036276.json:
```json
{
    "body": "<a id='comment:37'></a>\nReplying to [malb](#comment%3A36):\n> Replying to [SimonKing](#comment%3A35):\n> > First, some general questions:\n> > \n> > 1. Should previous versions of a patch be preserved, or is it better to overwrite the old patch with the new version? \n\n> \n> I don't think we established a good practice here yet. But it is certainly easier for the release manager if there is only one patch or a clear description what to apply when.\n\n\nYes, especially if it is all work by one person (maybe integrating someone else's patch) one patch is best. \n\n> >  2. Should there only be *one* patch, or should there be one starter patch, and all other patches only define the change with respect to the previous patch (hence, one has to apply a sequence of one big and perhaps 10 small patches)?\n  \n> \n> It depends. I would say: This ticket should be closed soon. The patch is way too big already. So in this case new patches (in different tickets) should be created.\n\n\nI agree with Martin that this ticket and its patches is already large enough. Followup patches are the way to go. Just imagine someone reading this ticket from top to bottom - I don't think any additional work should be done here.\n\nIn the end it is also important to make clear which patches to apply in which order and who gets credit for authorship.\n\nCheers,\n\nMichael",
    "created_at": "2009-04-27T10:00:39Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36276",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:37'></a>
Replying to [malb](#comment%3A36):
> Replying to [SimonKing](#comment%3A35):
> > First, some general questions:
> > 
> > 1. Should previous versions of a patch be preserved, or is it better to overwrite the old patch with the new version? 

> 
> I don't think we established a good practice here yet. But it is certainly easier for the release manager if there is only one patch or a clear description what to apply when.


Yes, especially if it is all work by one person (maybe integrating someone else's patch) one patch is best. 

> >  2. Should there only be *one* patch, or should there be one starter patch, and all other patches only define the change with respect to the previous patch (hence, one has to apply a sequence of one big and perhaps 10 small patches)?
  
> 
> It depends. I would say: This ticket should be closed soon. The patch is way too big already. So in this case new patches (in different tickets) should be created.


I agree with Martin that this ticket and its patches is already large enough. Followup patches are the way to go. Just imagine someone reading this ticket from top to bottom - I don't think any additional work should be done here.

In the end it is also important to make clear which patches to apply in which order and who gets credit for authorship.

Cheers,

Michael



---

archive/issue_comments_036277.json:
```json
{
    "body": "Final version (currently...) of Infinite Polynomial Rings and Symmetric Gr\u00f6bner Bases",
    "created_at": "2009-04-27T11:04:16Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36277",
    "user": "https://github.com/simon-king-jena"
}
```

Final version (currently...) of Infinite Polynomial Rings and Symmetric Gröbner Bases



---

archive/attachments_006556.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "SymmetricIdealsFinal.patch",
    "asset_url": "tarball://root/attachments/ticket5566/SymmetricIdealsFinal.patch",
    "created_at": "2009-04-27T11:13:39Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket5566/SymmetricIdealsFinal.patch",
    "user": "https://github.com/simon-king-jena"
}
```



---

archive/issue_comments_036278.json:
```json
{
    "body": "<a id='comment:38'></a>\n**Attachment:** [SymmetricIdealsFinal.patch](https://github.com/sagemath/sage/files/ticket5566/SymmetricIdealsFinal.patch)\n\nDear Martin and Michael,\n\nReplying to [malb](#comment%3A36):\n> Replying to [SimonKing](#comment%3A35):\n> > First, some general questions:\n> > \n> > 1. Should previous versions of a patch be preserved, or is it better to overwrite the old patch with the new version? \n\n> \n> I don't think we established a good practice here yet. But it is certainly easier for the release manager if there is only one patch or a clear description what to apply when.\n\n\nOK, so I produced a stand-alone patch `SymmetricIdealsFinal.patch` relative to sage-3.4.1.rc3 that I consider final (see below).\n\n\n> > One question to the referee: As mentioned in a comment above, I try to be clever, i.e., in `SymmetricIdeal.symmetrisation()` I only apply elementary transpositions rather than the full symmetric group. I believe it works, but it is a difference to what Aschenbrenner and Hillar suggested. Shall I point it out in the documentation\n\n> \n> Yes, that should be pointed out clearly.\n\n\nOK, I did so in the documentation of `SymmetricIdeal.symmetrisation()` and `SymmetricIdeal.groebner_basis()`: I give no evidence *why* I believe that my algorithm is correct, but I state in what respect it differs from the work of Aschenbrenner and Hillar.\n\nMoreover, I made it optional to chose the *original* algorithm of Aschenbrenner and Hillar -- if some users don't trust me.\n \n> Let me know what the 'final' version of your patch is and then I'll review it.\n\n\nI think this version is final, in the following sense:\n- doc tests pass\n- I am already doing serious computations with that version, and it seems to work well\n- I looked intensely at the html documentation, and I found it alright.\n\nCheers,\n    Simon",
    "created_at": "2009-04-27T11:13:39Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36278",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:38'></a>
**Attachment:** [SymmetricIdealsFinal.patch](https://github.com/sagemath/sage/files/ticket5566/SymmetricIdealsFinal.patch)

Dear Martin and Michael,

Replying to [malb](#comment%3A36):
> Replying to [SimonKing](#comment%3A35):
> > First, some general questions:
> > 
> > 1. Should previous versions of a patch be preserved, or is it better to overwrite the old patch with the new version? 

> 
> I don't think we established a good practice here yet. But it is certainly easier for the release manager if there is only one patch or a clear description what to apply when.


OK, so I produced a stand-alone patch `SymmetricIdealsFinal.patch` relative to sage-3.4.1.rc3 that I consider final (see below).


> > One question to the referee: As mentioned in a comment above, I try to be clever, i.e., in `SymmetricIdeal.symmetrisation()` I only apply elementary transpositions rather than the full symmetric group. I believe it works, but it is a difference to what Aschenbrenner and Hillar suggested. Shall I point it out in the documentation

> 
> Yes, that should be pointed out clearly.


OK, I did so in the documentation of `SymmetricIdeal.symmetrisation()` and `SymmetricIdeal.groebner_basis()`: I give no evidence *why* I believe that my algorithm is correct, but I state in what respect it differs from the work of Aschenbrenner and Hillar.

Moreover, I made it optional to chose the *original* algorithm of Aschenbrenner and Hillar -- if some users don't trust me.
 
> Let me know what the 'final' version of your patch is and then I'll review it.


I think this version is final, in the following sense:
- doc tests pass
- I am already doing serious computations with that version, and it seems to work well
- I looked intensely at the html documentation, and I found it alright.

Cheers,
    Simon



---

archive/issue_comments_036279.json:
```json
{
    "body": "<a id='comment:39'></a>\nDoctests fail:\n\n```\nfrom sage.rings.polynomial.symmetric_reduction import SymmetricReductionStrategy\nImportError: No module named symmetric_reduction\n```\n\nMaybe you didn't add the module to `module_list.py`?",
    "created_at": "2009-04-27T13:21:02Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36279",
    "user": "https://github.com/malb"
}
```

<a id='comment:39'></a>
Doctests fail:

```
from sage.rings.polynomial.symmetric_reduction import SymmetricReductionStrategy
ImportError: No module named symmetric_reduction
```

Maybe you didn't add the module to `module_list.py`?



---

archive/issue_comments_036280.json:
```json
{
    "body": "To be applied after SymmetricIdealsFinal.patch",
    "created_at": "2009-04-27T14:28:32Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36280",
    "user": "https://github.com/simon-king-jena"
}
```

To be applied after SymmetricIdealsFinal.patch



---

archive/attachments_006557.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "SymmetricIdealsForgotten.patch",
    "asset_url": "tarball://root/attachments/ticket5566/SymmetricIdealsForgotten.patch",
    "created_at": "2009-04-27T14:30:15Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket5566/SymmetricIdealsForgotten.patch",
    "user": "https://github.com/simon-king-jena"
}
```



---

archive/issue_comments_036281.json:
```json
{
    "body": "<a id='comment:40'></a>\n**Attachment:** [SymmetricIdealsForgotten.patch](https://github.com/sagemath/sage/files/ticket5566/SymmetricIdealsForgotten.patch)\n\nReplying to [malb](#comment%3A39):\n> Doctests fail:\n> \n> ```\n> from sage.rings.polynomial.symmetric_reduction import SymmetricReductionStrategy\n> ImportError: No module named symmetric_reduction\n> ```\n> \n> Maybe you didn't add the module to `module_list.py`?\n\n\nYes. So, `SymmetricIdealsFinal.patch` is not the final word. Please also apply `SymmetricIdealsForgotten.patch`.\n\nAnd I think it worked for me since I had built the extension in a different branch, so, it was somehow present.\n\nSorry,\n    Simon",
    "created_at": "2009-04-27T14:30:15Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36281",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:40'></a>
**Attachment:** [SymmetricIdealsForgotten.patch](https://github.com/sagemath/sage/files/ticket5566/SymmetricIdealsForgotten.patch)

Replying to [malb](#comment%3A39):
> Doctests fail:
> 
> ```
> from sage.rings.polynomial.symmetric_reduction import SymmetricReductionStrategy
> ImportError: No module named symmetric_reduction
> ```
> 
> Maybe you didn't add the module to `module_list.py`?


Yes. So, `SymmetricIdealsFinal.patch` is not the final word. Please also apply `SymmetricIdealsForgotten.patch`.

And I think it worked for me since I had built the extension in a different branch, so, it was somehow present.

Sorry,
    Simon



---

archive/issue_comments_036282.json:
```json
{
    "body": "<a id='comment:41'></a>\nIt seems all my concerns were addressed, doctests pass, positive review",
    "created_at": "2009-04-27T14:43:01Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36282",
    "user": "https://github.com/malb"
}
```

<a id='comment:41'></a>
It seems all my concerns were addressed, doctests pass, positive review



---

archive/issue_events_035243.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2009-04-27T14:43:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35243"
}
```



---

archive/issue_events_035244.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2009-04-27T14:43:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35244"
}
```



---

archive/issue_events_035245.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2009-04-29T10:06:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35245"
}
```



---

archive/issue_events_035246.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2009-04-29T10:06:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35246"
}
```



---

archive/issue_comments_036283.json:
```json
{
    "body": "<a id='comment:42'></a>\nDear Martin,\n\nI am very sorry, but I found one bug. Since the ticket is not yet closed, I allowed myself to add yet another patch.\n\nThe bug was:\n\n```\nsage: X.<x,y>=InfinitePolynomialRing(QQ)\nsage: p=x[2]-x[1]\nsage: q=x[1]-x[2]\nsage: p.reduce([q])\n0\nsage: q.reduce([p])\n-x2 + x1\n```\n\nReason: In `SymmetricReductionStrategy.[tail]reduce()`, I compared polynomials rather than leading monomials: I was not aware that `-x<x`. This is now fixed\n\nAt this occasion, there also is an enhancement: It is now possible to use fraction fields as base ring. In the previous version, this was impossible, since the duck typing in `_coerce_map_from_` was not appropriate, and since in `_div_` I have to work around the bug that I reported at #5917.\n\nNow, one can do:\n\n```\nsage: F = FractionField(PolynomialRing(QQ,['a','b']))\nsage: X.<x,y>=InfinitePolynomialRing(F)\nsage: I=(F('a')*x[1]*y[2]+F('b')*x[2])*X\nsage: G=I.groebner_basis()\nsage: G\n[y1*x2 + b/a*x1, y2*x1 + b/a*x2]\nsage: for p in Permutations(4):\n....:     print [(x^p).reduce(G) for x in G]\n....:\n[0, 0]\n[0, 0]\n[0, 0]\n[0, 0]\n[0, 0]\n[0, 0]\n[0, 0]\n[0, 0]\n[0, 0]\n[0, 0]\n[0, 0]\n[0, 0]\n[0, 0]\n[0, 0]\n[0, 0]\n[0, 0]\n[0, 0]\n[0, 0]\n[0, 0]\n[0, 0]\n[0, 0]\n[0, 0]\n[0, 0]\n[0, 0]\n```\n\n**__How to apply the patches__**\n1. `SymmetricIdealsFinal`\n2. `SymmetricIdealsForgotten`\n3. `SymmetricIdealsBugfix`",
    "created_at": "2009-04-29T10:06:03Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36283",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:42'></a>
Dear Martin,

I am very sorry, but I found one bug. Since the ticket is not yet closed, I allowed myself to add yet another patch.

The bug was:

```
sage: X.<x,y>=InfinitePolynomialRing(QQ)
sage: p=x[2]-x[1]
sage: q=x[1]-x[2]
sage: p.reduce([q])
0
sage: q.reduce([p])
-x2 + x1
```

Reason: In `SymmetricReductionStrategy.[tail]reduce()`, I compared polynomials rather than leading monomials: I was not aware that `-x<x`. This is now fixed

At this occasion, there also is an enhancement: It is now possible to use fraction fields as base ring. In the previous version, this was impossible, since the duck typing in `_coerce_map_from_` was not appropriate, and since in `_div_` I have to work around the bug that I reported at #5917.

Now, one can do:

```
sage: F = FractionField(PolynomialRing(QQ,['a','b']))
sage: X.<x,y>=InfinitePolynomialRing(F)
sage: I=(F('a')*x[1]*y[2]+F('b')*x[2])*X
sage: G=I.groebner_basis()
sage: G
[y1*x2 + b/a*x1, y2*x1 + b/a*x2]
sage: for p in Permutations(4):
....:     print [(x^p).reduce(G) for x in G]
....:
[0, 0]
[0, 0]
[0, 0]
[0, 0]
[0, 0]
[0, 0]
[0, 0]
[0, 0]
[0, 0]
[0, 0]
[0, 0]
[0, 0]
[0, 0]
[0, 0]
[0, 0]
[0, 0]
[0, 0]
[0, 0]
[0, 0]
[0, 0]
[0, 0]
[0, 0]
[0, 0]
[0, 0]
```

**__How to apply the patches__**
1. `SymmetricIdealsFinal`
2. `SymmetricIdealsForgotten`
3. `SymmetricIdealsBugfix`



---

archive/attachments_006558.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "SymmetricIdealsBugfix.patch",
    "asset_url": "tarball://root/attachments/ticket5566/SymmetricIdealsBugfix.patch",
    "created_at": "2009-05-12T00:31:25Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket5566/SymmetricIdealsBugfix.patch",
    "user": "https://github.com/malb"
}
```



---

archive/issue_comments_036284.json:
```json
{
    "body": "<a id='comment:43'></a>\n**Attachment:** [SymmetricIdealsBugfix.patch](https://github.com/sagemath/sage/files/ticket5566/SymmetricIdealsBugfix.patch)\n\nI've fixed a few doctest failures in `symmetric_ideal.py` and `infinite_polynomial_ring.py`. Simon, there is still a doctest failure on sage.math with 3.4.2 in `symmetric_ideal.py`. It is the protocol output of the calculation which is somehow different now. Please fix it, then we can merge this big patch.",
    "created_at": "2009-05-12T00:31:25Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36284",
    "user": "https://github.com/malb"
}
```

<a id='comment:43'></a>
**Attachment:** [SymmetricIdealsBugfix.patch](https://github.com/sagemath/sage/files/ticket5566/SymmetricIdealsBugfix.patch)

I've fixed a few doctest failures in `symmetric_ideal.py` and `infinite_polynomial_ring.py`. Simon, there is still a doctest failure on sage.math with 3.4.2 in `symmetric_ideal.py`. It is the protocol output of the calculation which is somehow different now. Please fix it, then we can merge this big patch.



---

archive/issue_events_035247.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2009-05-12T00:31:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35247"
}
```



---

archive/issue_events_035248.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2009-05-12T00:31:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35248"
}
```



---

archive/issue_comments_036285.json:
```json
{
    "body": "<a id='comment:44'></a>\nReplying to [malb](#comment%3A43):\n> I've fixed a few doctest failures in `symmetric_ideal.py` and `infinite_polynomial_ring.py`. Simon, there is still a doctest failure on sage.math with 3.4.2 in `symmetric_ideal.py`. It is the protocol output of the calculation which is somehow different now. Please fix it, then we can merge this big patch.\n\n\nThis is very interesting, because I do not get any doctest failure for `infinite_polynomial_ring.py` with sage-3.4.2 on my computer. I'll try and see what happens on sage.math.",
    "created_at": "2009-05-15T06:22:26Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36285",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:44'></a>
Replying to [malb](#comment%3A43):
> I've fixed a few doctest failures in `symmetric_ideal.py` and `infinite_polynomial_ring.py`. Simon, there is still a doctest failure on sage.math with 3.4.2 in `symmetric_ideal.py`. It is the protocol output of the calculation which is somehow different now. Please fix it, then we can merge this big patch.


This is very interesting, because I do not get any doctest failure for `infinite_polynomial_ring.py` with sage-3.4.2 on my computer. I'll try and see what happens on sage.math.



---

archive/issue_comments_036286.json:
```json
{
    "body": "One trivial doc test fix",
    "created_at": "2009-05-15T06:52:32Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36286",
    "user": "https://github.com/simon-king-jena"
}
```

One trivial doc test fix



---

archive/issue_events_035249.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2009-05-15T06:57:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35249"
}
```



---

archive/issue_events_035250.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2009-05-15T06:57:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35250"
}
```



---

archive/attachments_006559.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "SymmetricIdealsLastWords.patch",
    "asset_url": "tarball://root/attachments/ticket5566/SymmetricIdealsLastWords.patch",
    "created_at": "2009-05-15T06:57:49Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket5566/SymmetricIdealsLastWords.patch",
    "user": "https://github.com/simon-king-jena"
}
```



---

archive/issue_comments_036287.json:
```json
{
    "body": "<a id='comment:45'></a>\n**Attachment:** [SymmetricIdealsLastWords.patch](https://github.com/sagemath/sage/files/ticket5566/SymmetricIdealsLastWords.patch)\n\nHi Martin, hi Michael,\n\nit turned out that the doc test failure was not in `infinite_polynomial_ring.py` but in `symmetric_ideal.py`. The fix is trivial, it is just insertion of one ':'.\n\nAfter applying all four patches in order, all doc test for infinite polynomial rings and symmetric ideals pass both on sage.math and at home:\n\n```\nSimonKing@sage:~/SAGE/sage-3.4.2/devel/sage-symmdevel/sage/rings/polynomial$ ~/SAGE/sage-3.4.2/sage -t -optional -long symmetric_ideal.py\nsage -t -optional -long \"devel/sage-symmdevel/sage/rings/polynomial/symmetric_ideal.py\"\n         [12.4 s]\n\n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 12.4 seconds\nSimonKing@sage:~/SAGE/sage-3.4.2/devel/sage-symmdevel/sage/rings/polynomial$ ~/SAGE/sage-3.4.2/sage -t -optional -long symmetric_reduction.pyx\nsage -t -optional -long \"devel/sage-symmdevel/sage/rings/polynomial/symmetric_reduction.pyx\"\n         [4.3 s]\n\n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 4.3 seconds\nSimonKing@sage:~/SAGE/sage-3.4.2/devel/sage-symmdevel/sage/rings/polynomial$ ~/SAGE/sage-3.4.2/sage -t -optional -long infinite_polynomial_element.py\nsage -t -optional -long \"devel/sage-symmdevel/sage/rings/polynomial/infinite_polynomial_element.py\"\n         [6.0 s]\n\n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 6.0 seconds\nSimonKing@sage:~/SAGE/sage-3.4.2/devel/sage-symmdevel/sage/rings/polynomial$ ~/SAGE/sage-3.4.2/sage -t -optional -long infinite_polynomial_ring.py\nsage -t -optional -long \"devel/sage-symmdevel/sage/rings/polynomial/infinite_polynomial_ring.py\"\n         [2.6 s]\n\n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 2.6 seconds\n```\n\nI tag the ticket as [needs review], but I hope that Martin's comment can be taken as a positive review already...\n\nCheers,\n    Simon",
    "created_at": "2009-05-15T06:57:49Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36287",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:45'></a>
**Attachment:** [SymmetricIdealsLastWords.patch](https://github.com/sagemath/sage/files/ticket5566/SymmetricIdealsLastWords.patch)

Hi Martin, hi Michael,

it turned out that the doc test failure was not in `infinite_polynomial_ring.py` but in `symmetric_ideal.py`. The fix is trivial, it is just insertion of one ':'.

After applying all four patches in order, all doc test for infinite polynomial rings and symmetric ideals pass both on sage.math and at home:

```
SimonKing@sage:~/SAGE/sage-3.4.2/devel/sage-symmdevel/sage/rings/polynomial$ ~/SAGE/sage-3.4.2/sage -t -optional -long symmetric_ideal.py
sage -t -optional -long "devel/sage-symmdevel/sage/rings/polynomial/symmetric_ideal.py"
         [12.4 s]

----------------------------------------------------------------------
All tests passed!
Total time for all tests: 12.4 seconds
SimonKing@sage:~/SAGE/sage-3.4.2/devel/sage-symmdevel/sage/rings/polynomial$ ~/SAGE/sage-3.4.2/sage -t -optional -long symmetric_reduction.pyx
sage -t -optional -long "devel/sage-symmdevel/sage/rings/polynomial/symmetric_reduction.pyx"
         [4.3 s]

----------------------------------------------------------------------
All tests passed!
Total time for all tests: 4.3 seconds
SimonKing@sage:~/SAGE/sage-3.4.2/devel/sage-symmdevel/sage/rings/polynomial$ ~/SAGE/sage-3.4.2/sage -t -optional -long infinite_polynomial_element.py
sage -t -optional -long "devel/sage-symmdevel/sage/rings/polynomial/infinite_polynomial_element.py"
         [6.0 s]

----------------------------------------------------------------------
All tests passed!
Total time for all tests: 6.0 seconds
SimonKing@sage:~/SAGE/sage-3.4.2/devel/sage-symmdevel/sage/rings/polynomial$ ~/SAGE/sage-3.4.2/sage -t -optional -long infinite_polynomial_ring.py
sage -t -optional -long "devel/sage-symmdevel/sage/rings/polynomial/infinite_polynomial_ring.py"
         [2.6 s]

----------------------------------------------------------------------
All tests passed!
Total time for all tests: 2.6 seconds
```

I tag the ticket as [needs review], but I hope that Martin's comment can be taken as a positive review already...

Cheers,
    Simon



---

archive/issue_comments_036288.json:
```json
{
    "body": "<a id='comment:46'></a>\nLast patch fixes the problem seen by malb, so by extension positive review.\n\nWhat is the credit situation? I.e. did Mike Hansen write some of this?\n\nCheers,\n\nMichael",
    "created_at": "2009-05-15T07:35:46Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36288",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:46'></a>
Last patch fixes the problem seen by malb, so by extension positive review.

What is the credit situation? I.e. did Mike Hansen write some of this?

Cheers,

Michael



---

archive/issue_events_035251.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2009-05-15T07:35:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35251"
}
```



---

archive/issue_events_035252.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2009-05-15T07:35:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35252"
}
```



---

archive/issue_events_035253.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2009-05-15T07:35:46Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "milestone": "sage-4.0.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35253"
}
```



---

archive/issue_events_035254.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2009-05-15T07:35:46Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "milestone": "sage-4.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35254"
}
```



---

archive/issue_events_035255.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2009-05-15T07:37:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35255"
}
```



---

archive/issue_events_035256.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2009-05-15T07:37:51Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5566#event-35256"
}
```



---

archive/issue_comments_036289.json:
```json
{
    "body": "<a id='comment:47'></a>\nMerged all four patches in Sage 4.0.alpha0.\n\nCheers,\n\nMichael",
    "created_at": "2009-05-15T07:37:51Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36289",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:47'></a>
Merged all four patches in Sage 4.0.alpha0.

Cheers,

Michael



---

archive/issue_comments_036290.json:
```json
{
    "body": "<a id='comment:48'></a>\nReplying to [mabshoff](#comment%3A46):\n> What is the credit situation? I.e. did Mike Hansen write some of this?\n\n\nI credited Mike Hansen both in `infinite_polynomial_ring.py` and in `infinite_polynomial_element.py`, since the *dense* implementations are based on the code that he posted at #5453.\n\nRecall the history of these patches: \n* At sage-devel, I sometimes expressed my interest in having Aschenbrenner's and Hillar's algorithms in Sage. \n* Mike Hanse opened #5453, but his main interest seemed to be working with the polynomials rather than with symmetric ideals. \n* First, I contributed to #5453 by providing an alternative (sparse) implementation to Mike Hansen's approach. \n* But when I realised that the purpose of the ticket was different from my own intent, I opened #5566 and implemented Symmetric Gr\u00f6bner Bases, using Mike Hansen's *dense* approach as default implementation and my *sparse* approach as another option for the user. \n* Unfortunately, since then, I didn't hear a single word of Mike Hansen.\n\n__Conclusion__\n1. Mike Hansen deserves to be credited, since I started with his code.\n2. He is credited\n3. `symmetric_ideal.py` and `symmetric_reduction.pyx` is my own code, hence, only one author.\n4. Merging these patches should also result in closing #5453.\n\nCheers,\n    Simon",
    "created_at": "2009-05-15T07:56:28Z",
    "issue": "https://github.com/sagemath/sage/issues/5566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5566#issuecomment-36290",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:48'></a>
Replying to [mabshoff](#comment%3A46):
> What is the credit situation? I.e. did Mike Hansen write some of this?


I credited Mike Hansen both in `infinite_polynomial_ring.py` and in `infinite_polynomial_element.py`, since the *dense* implementations are based on the code that he posted at #5453.

Recall the history of these patches: 
* At sage-devel, I sometimes expressed my interest in having Aschenbrenner's and Hillar's algorithms in Sage. 
* Mike Hanse opened #5453, but his main interest seemed to be working with the polynomials rather than with symmetric ideals. 
* First, I contributed to #5453 by providing an alternative (sparse) implementation to Mike Hansen's approach. 
* But when I realised that the purpose of the ticket was different from my own intent, I opened #5566 and implemented Symmetric Gröbner Bases, using Mike Hansen's *dense* approach as default implementation and my *sparse* approach as another option for the user. 
* Unfortunately, since then, I didn't hear a single word of Mike Hansen.

__Conclusion__
1. Mike Hansen deserves to be credited, since I started with his code.
2. He is credited
3. `symmetric_ideal.py` and `symmetric_reduction.pyx` is my own code, hence, only one author.
4. Merging these patches should also result in closing #5453.

Cheers,
    Simon
