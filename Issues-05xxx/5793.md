# Issue 5793: New algorithm for Max Clique in Graph class using Cython

archive/issues_005793.json:
```json
{
    "body": "This depends on #6355.\n\n**Assignee:** @rlmill\n\n**CC:**  @rlmill\n\n**Author:** Nathann Cohen\n\n**Reviewer:** Robert Miller, Minh Van Nguyen\n\n**Merged:** Sage 4.1.1.rc1\n\nIssue created by migration from https://trac.sagemath.org/ticket/5793\n\n",
    "closed_at": "2009-07-31T23:32:09Z",
    "created_at": "2009-04-16T01:00:04Z",
    "labels": [
        "component: graph theory",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.1.1",
    "title": "New algorithm for Max Clique in Graph class using Cython",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/5793",
    "user": "https://github.com/nathanncohen"
}
```
This depends on #6355.

**Assignee:** @rlmill

**CC:**  @rlmill

**Author:** Nathann Cohen

**Reviewer:** Robert Miller, Minh Van Nguyen

**Merged:** Sage 4.1.1.rc1

Issue created by migration from https://trac.sagemath.org/ticket/5793





---

archive/issue_comments_049297.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2009-04-16T05:47:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49297",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_049298.json:
```json
{
    "body": "<a id='comment:1'></a>\nHi,\n\nthe patch as is will not go into Sage since you are putting the sources for cliquer-1.2 into the Sage library tree where they do not belong. \n\nI have not looked at the cython interface, but my guess would be that we need to change cliquer-1.2 to create a library. Please split the cython interface work (the code you wrote minus the cliquer-1.2 source code) and the cliquer-1.2.spkg work. The Cython code should remain here while spkg should go to #5669.\n\nCheers,\n\nMichael",
    "created_at": "2009-04-16T05:47:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49298",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:1'></a>
Hi,

the patch as is will not go into Sage since you are putting the sources for cliquer-1.2 into the Sage library tree where they do not belong. 

I have not looked at the cython interface, but my guess would be that we need to change cliquer-1.2 to create a library. Please split the cython interface work (the code you wrote minus the cliquer-1.2 source code) and the cliquer-1.2.spkg work. The Cython code should remain here while spkg should go to #5669.

Cheers,

Michael



---

archive/issue_events_017115.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2009-04-16T05:47:05Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "milestone": "sage-3.4.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5793#event-17115"
}
```



---

archive/issue_comments_049299.json:
```json
{
    "body": "<a id='comment:2'></a>\nA new patch using the SPKG you can find at :\nhttp://trac.sagemath.org/sage_trac/ticket/6355",
    "created_at": "2009-06-18T13:07:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49299",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:2'></a>
A new patch using the SPKG you can find at :
http://trac.sagemath.org/sage_trac/ticket/6355



---

archive/issue_events_017116.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2009-06-22T22:35:04Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5793#event-17116"
}
```



---

archive/issue_events_017117.json:
```json
{
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "label": "duplicate",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5793#event-17117"
}
```



---

archive/issue_comments_049300.json:
```json
{
    "body": "<a id='comment:4'></a>\nDuplication of #6355.",
    "created_at": "2009-06-22T22:35:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49300",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:4'></a>
Duplication of #6355.



---

archive/issue_comments_049301.json:
```json
{
    "body": "<a id='comment:5'></a>\nTo get this going again, here are some specific suggestions for patch 12427.patch and the associated spkg:\n\n* copy the header files to somewhere in $SAGE_LOCAL/include (maybe $SAGE_LOCAL/include/cliquer/*.h\n\n* Make a cliquer.pxd file that declares the necessary functions and structs from the header files.  Make sure that you are only doing cdef externs from the header files, not the .c files like the patch is currently doing.  Don't include the path; just do  `cdef extern from \"cliquer/graph.h\":` since the header is in the include path.  This cliquer.pxd file can go into sage/graphs.\n\n* Make a cliquer.pyx in sage/graphs that contains the definitions of max_clique, all_max_clique, and clique_number.  Document and add doctests to these functions.\n\n* Delete the lines\n\n```\nfrom sage.graphs.graph import Graph \n#from distutils.core import setup \n#from distutils.extension import Extension \nfrom Cython.Distutils import build_ext \n```\n\n* In module_list.py, add a `libraries = ['cliquer']` option (see the surrounding declarations for examples of this).\n\n* Compile the cliquer sources into a shared library, named libcliquer.so, using the instructions in the HowTo William posted.  Place this shared library into $SAGE_LOCAL/lib.\n\n* In the graphs.py, I don't think you need to do `from sage.graphs.cliquer import clique_number`.  Since the module will be in that directory, I think it would be sufficient to do `from cliquer import clique_number`.",
    "created_at": "2009-07-01T05:40:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49301",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:5'></a>
To get this going again, here are some specific suggestions for patch 12427.patch and the associated spkg:

* copy the header files to somewhere in $SAGE_LOCAL/include (maybe $SAGE_LOCAL/include/cliquer/*.h

* Make a cliquer.pxd file that declares the necessary functions and structs from the header files.  Make sure that you are only doing cdef externs from the header files, not the .c files like the patch is currently doing.  Don't include the path; just do  `cdef extern from "cliquer/graph.h":` since the header is in the include path.  This cliquer.pxd file can go into sage/graphs.

* Make a cliquer.pyx in sage/graphs that contains the definitions of max_clique, all_max_clique, and clique_number.  Document and add doctests to these functions.

* Delete the lines

```
from sage.graphs.graph import Graph 
#from distutils.core import setup 
#from distutils.extension import Extension 
from Cython.Distutils import build_ext 
```

* In module_list.py, add a `libraries = ['cliquer']` option (see the surrounding declarations for examples of this).

* Compile the cliquer sources into a shared library, named libcliquer.so, using the instructions in the HowTo William posted.  Place this shared library into $SAGE_LOCAL/lib.

* In the graphs.py, I don't think you need to do `from sage.graphs.cliquer import clique_number`.  Since the module will be in that directory, I think it would be sufficient to do `from cliquer import clique_number`.



---

archive/issue_comments_049302.json:
```json
{
    "body": "**Changing status** from closed to reopened.",
    "created_at": "2009-07-01T05:45:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49302",
    "user": "https://github.com/jasongrout"
}
```

**Changing status** from closed to reopened.



---

archive/issue_comments_049303.json:
```json
{
    "body": "<a id='comment:6'></a>\nrlm: this ticket has what looks like the most current patch, whereas #6355 does not have a patch.  I'm reopening this ticket so that the \"active\" patch is not closed (but I am not opposed to moving this patch to #6355 to consolidate things!).  I feel a bit silly commenting on a patch here when the ticket is closed, but the patch clearly has not been moved/merged/etc.",
    "created_at": "2009-07-01T05:45:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49303",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:6'></a>
rlm: this ticket has what looks like the most current patch, whereas #6355 does not have a patch.  I'm reopening this ticket so that the "active" patch is not closed (but I am not opposed to moving this patch to #6355 to consolidate things!).  I feel a bit silly commenting on a patch here when the ticket is closed, but the patch clearly has not been moved/merged/etc.



---

archive/issue_events_017118.json:
```json
{
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "label": "duplicate",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5793#event-17118"
}
```



---

archive/issue_comments_049304.json:
```json
{
    "body": "<a id='comment:7'></a>\nSuggestions 1 and 6 in my comment above apply to the spkg, not the patch.",
    "created_at": "2009-07-01T05:50:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49304",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:7'></a>
Suggestions 1 and 6 in my comment above apply to the spkg, not the patch.



---

archive/issue_comments_049305.json:
```json
{
    "body": "<a id='comment:8'></a>\nWhence the \"../../../../local/lib/cliquer-1.2/cliquer.h\" if there's no spkg. Also, I belive local/include is in the include path, so no need to have this long path. (And include files belong in local/include, not local/lib.) I would probably drop the 1.2 suffix so we don't have to update the link paths every time the version gets bumped.",
    "created_at": "2009-07-01T06:01:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49305",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:8'></a>
Whence the "../../../../local/lib/cliquer-1.2/cliquer.h" if there's no spkg. Also, I belive local/include is in the include path, so no need to have this long path. (And include files belong in local/include, not local/lib.) I would probably drop the 1.2 suffix so we don't have to update the link paths every time the version gets bumped.



---

archive/issue_comments_049306.json:
```json
{
    "body": "<a id='comment:9'></a>\nthat's what I meant by point 2 (just do `cdef extern from \"cliquer/graph.h\"`) and point 1 (put the headers in $SAGE_LOCAL/include/cliquer/*.h)",
    "created_at": "2009-07-01T06:47:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49306",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:9'></a>
that's what I meant by point 2 (just do `cdef extern from "cliquer/graph.h"`) and point 1 (put the headers in $SAGE_LOCAL/include/cliquer/*.h)



---

archive/issue_comments_049307.json:
```json
{
    "body": "<a id='comment:10'></a>\nHere is a new patch ( number 12428 ) using a shared library !!! I hope you will appreciate it as it took me some time to figure out the inner behavior of Sage ;-)\n\nThe new spkg is available on http://trac.sagemath.org/sage_trac/ticket/6355\n\nNathann",
    "created_at": "2009-07-07T13:14:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49307",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:10'></a>
Here is a new patch ( number 12428 ) using a shared library !!! I hope you will appreciate it as it took me some time to figure out the inner behavior of Sage ;-)

The new spkg is available on http://trac.sagemath.org/sage_trac/ticket/6355

Nathann



---

archive/issue_comments_049308.json:
```json
{
    "body": "<a id='comment:11'></a>\nMy version is working, but I am a bit lost with all the patches... How can I produce a patch containing all the modifications I made since the begining ( since I cloned the original branch, actually ) ?\n\nThanks !!!",
    "created_at": "2009-07-17T19:01:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49308",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:11'></a>
My version is working, but I am a bit lost with all the patches... How can I produce a patch containing all the modifications I made since the begining ( since I cloned the original branch, actually ) ?

Thanks !!!



---

archive/issue_comments_049309.json:
```json
{
    "body": "<a id='comment:12'></a>\nOne option is to clone the branch using `hg_sage.clone`, but to give it the revision number corresponding to the last patch not part of your changes (the base). Then you can copy the affected files over, and it is as if you have done all the work, but you have not checked anything in.",
    "created_at": "2009-07-17T19:05:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49309",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:12'></a>
One option is to clone the branch using `hg_sage.clone`, but to give it the revision number corresponding to the last patch not part of your changes (the base). Then you can copy the affected files over, and it is as if you have done all the work, but you have not checked anything in.



---

archive/issue_comments_049310.json:
```json
{
    "body": "<a id='comment:13'></a>\nNew patch \"cliquer.patch\" containing all the modifications for cliquer since the beginning. And with the good directory's name ;-)",
    "created_at": "2009-07-17T19:26:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49310",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:13'></a>
New patch "cliquer.patch" containing all the modifications for cliquer since the beginning. And with the good directory's name ;-)



---

archive/attachments_006659.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "cliquer.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5793/cliquer.patch",
    "created_at": "2009-07-17T19:26:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/nathanncohen"
}
```



---

archive/issue_comments_049311.json:
```json
{
    "body": "Cliquer, from the beginning to the end, with the good directory's name !",
    "created_at": "2009-07-17T19:26:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49311",
    "user": "https://github.com/nathanncohen"
}
```

Cliquer, from the beginning to the end, with the good directory's name !



---

archive/issue_comments_049312.json:
```json
{
    "body": "<a id='comment:14'></a>\nNathann,\n\nI have deleted the previous patches to avoid confusion.\n\nWhen addressing the following issues, please post another patch to be applied on top of the first (this makes review easier).\n\n1. `algorithm=='networkx'` is never tested, and if it were, it would fail, due to the `cliques` parameter\n\n2. Why are you using `cliquer.pxi` instead of `cliquer.pxd`? If it were `pxd` instead, then other Cython files could `cimport` the same data types.\n\n3. It should go:\n\n```\nif algorithm=='networkx':\n    ...\nelif algorithm=='cliquer':\n    ...\nelse:\n    raise NotImplementedError(\"Only 'networkx' and 'cliquer' are supported.\")\n```\nAlso you need to change one instance of `'Cliquer'` to `'cliquer'`.\n\n4. In maximum_cliques, \"vertex set\" should be \"vertex sets\"",
    "created_at": "2009-07-18T17:48:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49312",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:14'></a>
Nathann,

I have deleted the previous patches to avoid confusion.

When addressing the following issues, please post another patch to be applied on top of the first (this makes review easier).

1. `algorithm=='networkx'` is never tested, and if it were, it would fail, due to the `cliques` parameter

2. Why are you using `cliquer.pxi` instead of `cliquer.pxd`? If it were `pxd` instead, then other Cython files could `cimport` the same data types.

3. It should go:

```
if algorithm=='networkx':
    ...
elif algorithm=='cliquer':
    ...
else:
    raise NotImplementedError("Only 'networkx' and 'cliquer' are supported.")
```
Also you need to change one instance of `'Cliquer'` to `'cliquer'`.

4. In maximum_cliques, "vertex set" should be "vertex sets"



---

archive/issue_comments_049313.json:
```json
{
    "body": "<a id='comment:15'></a>\nI hope all is fixed now... Though I just renamed cliquer.pxi to cliquer.pxd without really understanding the difference ^^;\n\nBy the way, I am not really sure this possibility to change the algorithm used to compute the cliquer number is that useful... Just take a look at this :\n\nsage: g=graphs.RandomGNP(100,.5)\nsage: time g.clique_number(algorithm=\"networkx\")\nCPU times: user 2.49 s, sys: 0.00 s, total: 2.49 s\nWall time: 2.49 s\n9\nsage: time g.clique_number()\nCPU times: user 0.01 s, sys: 0.00 s, total: 0.01 s\nWall time: 0.01 s\n9\nsage: g=graphs.RandomGNP(150,.5)\nsage: time g.clique_number(algorithm=\"networkx\")\nCPU times: user 18.45 s, sys: 0.04 s, total: 18.49 s\nWall time: 18.49 s\n10\nsage: time g.clique_number()\nCPU times: user 0.03 s, sys: 0.00 s, total: 0.03 s\nWall time: 0.03 s\n10\nsage: g=graphs.RandomGNP(200,.5)\nsage: time g.clique_number(algorithm=\"networkx\")\nCPU times: user 82.33 s, sys: 0.18 s, total: 82.52 s\nWall time: 82.54 s\n11\nsage: time g.clique_number()\nCPU times: user 0.07 s, sys: 0.00 s, total: 0.07 s\nWall time: 0.07 s\n11\n\nAnyway, from the practical point of view, it works now ;-)\n\nNathann",
    "created_at": "2009-07-19T19:24:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49313",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:15'></a>
I hope all is fixed now... Though I just renamed cliquer.pxi to cliquer.pxd without really understanding the difference ^^;

By the way, I am not really sure this possibility to change the algorithm used to compute the cliquer number is that useful... Just take a look at this :

sage: g=graphs.RandomGNP(100,.5)
sage: time g.clique_number(algorithm="networkx")
CPU times: user 2.49 s, sys: 0.00 s, total: 2.49 s
Wall time: 2.49 s
9
sage: time g.clique_number()
CPU times: user 0.01 s, sys: 0.00 s, total: 0.01 s
Wall time: 0.01 s
9
sage: g=graphs.RandomGNP(150,.5)
sage: time g.clique_number(algorithm="networkx")
CPU times: user 18.45 s, sys: 0.04 s, total: 18.49 s
Wall time: 18.49 s
10
sage: time g.clique_number()
CPU times: user 0.03 s, sys: 0.00 s, total: 0.03 s
Wall time: 0.03 s
10
sage: g=graphs.RandomGNP(200,.5)
sage: time g.clique_number(algorithm="networkx")
CPU times: user 82.33 s, sys: 0.18 s, total: 82.52 s
Wall time: 82.54 s
11
sage: time g.clique_number()
CPU times: user 0.07 s, sys: 0.00 s, total: 0.07 s
Wall time: 0.07 s
11

Anyway, from the practical point of view, it works now ;-)

Nathann



---

archive/issue_comments_049314.json:
```json
{
    "body": "Second patch",
    "created_at": "2009-07-19T19:28:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49314",
    "user": "https://github.com/nathanncohen"
}
```

Second patch



---

archive/attachments_006660.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "cliquer-2.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5793/cliquer-2.patch",
    "created_at": "2009-07-20T11:24:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/nathanncohen"
}
```



---

archive/issue_comments_049315.json:
```json
{
    "body": "<a id='comment:16'></a>\n",
    "created_at": "2009-07-20T11:24:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49315",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:16'></a>




---

archive/issue_comments_049316.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2009-07-20T11:24:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49316",
    "user": "https://github.com/nathanncohen"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_049317.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2009-07-20T15:17:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49317",
    "user": "https://github.com/rlmill"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_049318.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [ncohen](#comment%3A15):\n> By the way, I am not really sure this possibility to change the algorithm used to compute the cliquer number is that useful...\n\n\nThere are plenty of reasons to have two different implementations, and one I can think of right off the top of my head is to compare results for correctness.\n\n1. You have removed the input \"cliques,\" which is used by NetworkX. You need to put this back in, and mention that it is ignored unless the algorithm is \"networkx.\"\n\n2. The `include '../ext/cliquer.pxd'` line at the beginning of cliquer.pyx is not necessary. \"include\" is a plain text include, and `pxd` files are forward declarations, which get automatically included by Cython as long as the other part of the filename is the same.\n\n3. One thing I should have mentioned last round: the three functions introduced in cliquer.pyx need to be documented, including some nontrivial doctests.\n\nAfter all this is done, we should be very close to finished!",
    "created_at": "2009-07-20T15:17:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49318",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:17'></a>
Replying to [ncohen](#comment%3A15):
> By the way, I am not really sure this possibility to change the algorithm used to compute the cliquer number is that useful...


There are plenty of reasons to have two different implementations, and one I can think of right off the top of my head is to compare results for correctness.

1. You have removed the input "cliques," which is used by NetworkX. You need to put this back in, and mention that it is ignored unless the algorithm is "networkx."

2. The `include '../ext/cliquer.pxd'` line at the beginning of cliquer.pyx is not necessary. "include" is a plain text include, and `pxd` files are forward declarations, which get automatically included by Cython as long as the other part of the filename is the same.

3. One thing I should have mentioned last round: the three functions introduced in cliquer.pyx need to be documented, including some nontrivial doctests.

After all this is done, we should be very close to finished!



---

archive/issue_comments_049319.json:
```json
{
    "body": "<a id='comment:18'></a>\nHmmmmmm.... There is a perhaps-not-so-small problem :\n\nG = Graph({0:[1,2,3], 1:[2], 3:[0,1]})\nG.maximum_clique()\n2\n\nWhen it is obviously 3...\n\nWhat do we do in this situation ? ^^;",
    "created_at": "2009-07-20T18:04:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49319",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:18'></a>
Hmmmmmm.... There is a perhaps-not-so-small problem :

G = Graph({0:[1,2,3], 1:[2], 3:[0,1]})
G.maximum_clique()
2

When it is obviously 3...

What do we do in this situation ? ^^;



---

archive/issue_comments_049320.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [ncohen](#comment%3A18):\n> What do we do in this situation ? ^^;\n\n\nWe debug! I'm looking into this now, but I'm not sure what I'll be able to find out...\n\n4. Another thing is that `cliquer.pxd` needs to be in the same directory as `cliquer.pyx`.",
    "created_at": "2009-07-20T18:20:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49320",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:19'></a>
Replying to [ncohen](#comment%3A18):
> What do we do in this situation ? ^^;


We debug! I'm looking into this now, but I'm not sure what I'll be able to find out...

4. Another thing is that `cliquer.pxd` needs to be in the same directory as `cliquer.pyx`.



---

archive/issue_comments_049321.json:
```json
{
    "body": "<a id='comment:20'></a>\nit does not come from cliquer itself, which is a relief. I ran cliquer on the command lineand on this file :\np edges 4 5\ne 1 2\ne 1 3\ne 1 4\ne 2 3\ne 2 4\n\n~/cliquer-1.2$ ./cl example \nReading graph from example...OK\nSearching for a single maximum weight clique...\n  2/4 (max  2)  0.00 s  (0.00 s/round)\n  3/4 (max  3)  0.00 s  (0.00 s/round)\n  4/4 (max  3)  0.00 s  (0.00 s/round)\nsize=3, weight=3:   1 2 4\n~/cliquer-1.2$",
    "created_at": "2009-07-20T18:23:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49321",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:20'></a>
it does not come from cliquer itself, which is a relief. I ran cliquer on the command lineand on this file :
p edges 4 5
e 1 2
e 1 3
e 1 4
e 2 3
e 2 4

~/cliquer-1.2$ ./cl example 
Reading graph from example...OK
Searching for a single maximum weight clique...
  2/4 (max  2)  0.00 s  (0.00 s/round)
  3/4 (max  3)  0.00 s  (0.00 s/round)
  4/4 (max  3)  0.00 s  (0.00 s/round)
size=3, weight=3:   1 2 4
~/cliquer-1.2$



---

archive/issue_comments_049322.json:
```json
{
    "body": "<a id='comment:21'></a>\nIt works when I replace : \n\nbuf=' e %d %d' %(u,v)\n\nby\n\nbuf=' e %d %d' %(u+1,v+1)\n\nin cliquer.pyx. I thought it may come from the difference between 0....n-1 and 1...n and it seems correct. I am running other tests with NetworkX to check.",
    "created_at": "2009-07-20T18:26:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49322",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:21'></a>
It works when I replace : 

buf=' e %d %d' %(u,v)

by

buf=' e %d %d' %(u+1,v+1)

in cliquer.pyx. I thought it may come from the difference between 0....n-1 and 1...n and it seems correct. I am running other tests with NetworkX to check.



---

archive/attachments_006661.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_5793_debug_only.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5793/trac_5793_debug_only.patch",
    "created_at": "2009-07-20T18:26:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/rlmill"
}
```



---

archive/issue_comments_049323.json:
```json
{
    "body": "DO NOT APPLY!",
    "created_at": "2009-07-20T18:26:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49323",
    "user": "https://github.com/rlmill"
}
```

DO NOT APPLY!



---

archive/issue_comments_049324.json:
```json
{
    "body": "<a id='comment:22'></a>\nIt seems as if Cliquer is subtracting one from each vertex in the input, and so the input needs to have one added to it. To see this, apply `trac_5793_debug_only.patch`, and you get:\n\n```\nsage: G = Graph({0:[1,2,3], 1:[2], 3:[0,1]}); G.maximum_clique()\n(0, 1, None)\n e 0 1\nUnweighted graph has 4 vertices, 0 edges (density 0.00).\n 0 ->\n 1 ->\n 2 ->\n 3 ->\n(0, 2, None)\n e 0 2\nUnweighted graph has 4 vertices, 0 edges (density 0.00).\n 0 ->\n 1 ->\n 2 ->\n 3 ->\n(0, 3, None)\n e 0 3\nUnweighted graph has 4 vertices, 0 edges (density 0.00).\n 0 ->\n 1 ->\n 2 ->\n 3 ->\n(1, 2, None)\n e 1 2\nUnweighted graph has 4 vertices, 1 edges (density 0.17).\n 0 -> 1\n 1 -> 0\n 2 ->\n 3 ->\n(1, 3, None)\n e 1 3\nUnweighted graph has 4 vertices, 2 edges (density 0.33).\n 0 -> 1 2\n 1 -> 0\n 2 -> 0\n 3 ->\n[0, 2]\n```\n\nYou should probably also expose at least this `print_graph` function in the official versions.",
    "created_at": "2009-07-20T18:28:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49324",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:22'></a>
It seems as if Cliquer is subtracting one from each vertex in the input, and so the input needs to have one added to it. To see this, apply `trac_5793_debug_only.patch`, and you get:

```
sage: G = Graph({0:[1,2,3], 1:[2], 3:[0,1]}); G.maximum_clique()
(0, 1, None)
 e 0 1
Unweighted graph has 4 vertices, 0 edges (density 0.00).
 0 ->
 1 ->
 2 ->
 3 ->
(0, 2, None)
 e 0 2
Unweighted graph has 4 vertices, 0 edges (density 0.00).
 0 ->
 1 ->
 2 ->
 3 ->
(0, 3, None)
 e 0 3
Unweighted graph has 4 vertices, 0 edges (density 0.00).
 0 ->
 1 ->
 2 ->
 3 ->
(1, 2, None)
 e 1 2
Unweighted graph has 4 vertices, 1 edges (density 0.17).
 0 -> 1
 1 -> 0
 2 ->
 3 ->
(1, 3, None)
 e 1 3
Unweighted graph has 4 vertices, 2 edges (density 0.33).
 0 -> 1 2
 1 -> 0
 2 -> 0
 3 ->
[0, 2]
```

You should probably also expose at least this `print_graph` function in the official versions.



---

archive/issue_comments_049325.json:
```json
{
    "body": "<a id='comment:23'></a>\nOops, looks like we were duplicating effort! But I'll be online for a while, so this might get positively reviewed today!",
    "created_at": "2009-07-20T18:29:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49325",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:23'></a>
Oops, looks like we were duplicating effort! But I'll be online for a while, so this might get positively reviewed today!



---

archive/issue_comments_049326.json:
```json
{
    "body": "<a id='comment:24'></a>\nNew patch !!",
    "created_at": "2009-07-20T18:39:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49326",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:24'></a>
New patch !!



---

archive/issue_comments_049327.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2009-07-20T18:39:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49327",
    "user": "https://github.com/nathanncohen"
}
```

**Changing status** from needs_work to needs_review.



---

archive/attachments_006662.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "cliquer-3.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5793/cliquer-3.patch",
    "created_at": "2009-07-20T18:39:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/nathanncohen"
}
```



---

archive/issue_comments_049328.json:
```json
{
    "body": "",
    "created_at": "2009-07-20T18:39:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49328",
    "user": "https://github.com/nathanncohen"
}
```





---

archive/issue_comments_049329.json:
```json
{
    "body": "<a id='comment:25'></a>\nOK, I have a few more requests:\n\n1. I think you should expose Cliquer's `graph_print` function in `cliquer.pxd`, so other people see it when they try to play around with the interface.\n\n2. In general, doctests should be indented, so e.g.\n\n```\nEXAMPLES:: \n\nsage: C=graphs.PetersenGraph() \nsage: max_clique(C) \n[7, 9] \n\"\"\" \n```\nshould be\n\n```\nEXAMPLES:: \n\n    sage: C=graphs.PetersenGraph() \n    sage: max_clique(C) \n    [7, 9] \n\n\"\"\" \n```\n\n3. In fact, you should probably check out\n\nhttp://www.sagemath.org/doc/developer/conventions.html\n\nFor example, the following belongs in an `INPUT:` block, and would look much more professional there:\n\n```\nThe parameter 'cliques' is an optional list of cliques that can be input if already computed. \nONLY USED BY NetworkX !!!\n```\n\n4. There are several functions in `graph.py` which compute with cliques, which haven't been exposed to this new interface. For example, `G.cliques()`. It would be nice to take care of those functions now too, so people don't unnecessarily complain about these functions being slow later. They are all in the same part of the file, which starts with `### Cliques`.",
    "created_at": "2009-07-20T18:56:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49329",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:25'></a>
OK, I have a few more requests:

1. I think you should expose Cliquer's `graph_print` function in `cliquer.pxd`, so other people see it when they try to play around with the interface.

2. In general, doctests should be indented, so e.g.

```
EXAMPLES:: 

sage: C=graphs.PetersenGraph() 
sage: max_clique(C) 
[7, 9] 
""" 
```
should be

```
EXAMPLES:: 

    sage: C=graphs.PetersenGraph() 
    sage: max_clique(C) 
    [7, 9] 

""" 
```

3. In fact, you should probably check out

http://www.sagemath.org/doc/developer/conventions.html

For example, the following belongs in an `INPUT:` block, and would look much more professional there:

```
The parameter 'cliques' is an optional list of cliques that can be input if already computed. 
ONLY USED BY NetworkX !!!
```

4. There are several functions in `graph.py` which compute with cliques, which haven't been exposed to this new interface. For example, `G.cliques()`. It would be nice to take care of those functions now too, so people don't unnecessarily complain about these functions being slow later. They are all in the same part of the file, which starts with `### Cliques`.



---

archive/issue_comments_049330.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2009-07-20T18:56:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49330",
    "user": "https://github.com/rlmill"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_049331.json:
```json
{
    "body": "<a id='comment:26'></a>\n5. There is one other thing to be aware of. You are assuming that the vertex set is *always* {0,...,n-1}. In fact, this will cause some trouble:\n\n```\nsage: C = graphs.CubeGraph(4)\nsage: C.maximum_clique()\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n...\nTypeError: cannot concatenate 'str' and 'int' objects\nsage: C.vertices()[0]\n'0000'\n```\n\nHere is the idea to get around this, since this problem has come up many times before:\n\n```\nsage: C = graphs.CubeGraph(4)\nsage: G,d = C.relabel(inplace=False, return_map=True)\nsage: d_inv = {}\nsage: for v in d:\n....:     d_inv[d[v]] = v\n....:     \nsage: C.vertices()\n\n['0000',\n '0001',\n '0010',\n '0011',\n '0100',\n '0101',\n '0110',\n '0111',\n '1000',\n '1001',\n '1010',\n '1011',\n '1100',\n '1101',\n '1110',\n '1111']\nsage: G.vertices()\n[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]\nsage: d\n\n{'0000': 0,\n '0001': 1,\n '0010': 2,\n '0011': 3,\n '0100': 4,\n '0101': 5,\n '0110': 6,\n '0111': 7,\n '1000': 8,\n '1001': 9,\n '1010': 10,\n '1011': 11,\n '1100': 12,\n '1101': 13,\n '1110': 14,\n '1111': 15}\nsage: d_inv\n\n{0: '0000',\n 1: '0001',\n 2: '0010',\n 3: '0011',\n 4: '0100',\n 5: '0101',\n 6: '0110',\n 7: '0111',\n 8: '1000',\n 9: '1001',\n 10: '1010',\n 11: '1011',\n 12: '1100',\n 13: '1101',\n 14: '1110',\n 15: '1111'}\n```",
    "created_at": "2009-07-20T19:21:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49331",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:26'></a>
5. There is one other thing to be aware of. You are assuming that the vertex set is *always* {0,...,n-1}. In fact, this will cause some trouble:

```
sage: C = graphs.CubeGraph(4)
sage: C.maximum_clique()
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
...
TypeError: cannot concatenate 'str' and 'int' objects
sage: C.vertices()[0]
'0000'
```

Here is the idea to get around this, since this problem has come up many times before:

```
sage: C = graphs.CubeGraph(4)
sage: G,d = C.relabel(inplace=False, return_map=True)
sage: d_inv = {}
sage: for v in d:
....:     d_inv[d[v]] = v
....:     
sage: C.vertices()

['0000',
 '0001',
 '0010',
 '0011',
 '0100',
 '0101',
 '0110',
 '0111',
 '1000',
 '1001',
 '1010',
 '1011',
 '1100',
 '1101',
 '1110',
 '1111']
sage: G.vertices()
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]
sage: d

{'0000': 0,
 '0001': 1,
 '0010': 2,
 '0011': 3,
 '0100': 4,
 '0101': 5,
 '0110': 6,
 '0111': 7,
 '1000': 8,
 '1001': 9,
 '1010': 10,
 '1011': 11,
 '1100': 12,
 '1101': 13,
 '1110': 14,
 '1111': 15}
sage: d_inv

{0: '0000',
 1: '0001',
 2: '0010',
 3: '0011',
 4: '0100',
 5: '0101',
 6: '0110',
 7: '0111',
 8: '1000',
 9: '1001',
 10: '1010',
 11: '1011',
 12: '1100',
 13: '1101',
 14: '1110',
 15: '1111'}
```



---

archive/issue_comments_049332.json:
```json
{
    "body": "<a id='comment:27'></a>\nPatch number 4 :\n- Cliquer now deals with graphs with vertex labels not in 0..n-1\n- Some functions of Graph could use cliquer and now can. ( some functions dealing with MAXIMAL cliques instead of MAXIMUM cliques can not use cliquer, though ! )\n- Some documentations have been rearranged\n- Cliquer's graph_print function is added to cliquer.pxd if needed",
    "created_at": "2009-07-21T08:15:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49332",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:27'></a>
Patch number 4 :
- Cliquer now deals with graphs with vertex labels not in 0..n-1
- Some functions of Graph could use cliquer and now can. ( some functions dealing with MAXIMAL cliques instead of MAXIMUM cliques can not use cliquer, though ! )
- Some documentations have been rearranged
- Cliquer's graph_print function is added to cliquer.pxd if needed



---

archive/issue_comments_049333.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2009-07-21T08:15:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49333",
    "user": "https://github.com/nathanncohen"
}
```

**Changing status** from needs_work to needs_review.



---

archive/attachments_006663.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "cliquer-4.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5793/cliquer-4.patch",
    "created_at": "2009-07-21T08:16:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/nathanncohen"
}
```



---

archive/issue_comments_049334.json:
```json
{
    "body": "",
    "created_at": "2009-07-21T08:16:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49334",
    "user": "https://github.com/nathanncohen"
}
```





---

archive/issue_comments_049335.json:
```json
{
    "body": "<a id='comment:28'></a>\nOK, you've done a ton of work on this. There are a few minor details left, but I will take care of them myself, and post a referee patch. This ticket should be ready today.\n\nPS -- A maximum clique is just a clique of maximal size, so those functions are also applicable to Cliquer, but I'll update those myself. :)",
    "created_at": "2009-07-21T14:26:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49335",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:28'></a>
OK, you've done a ton of work on this. There are a few minor details left, but I will take care of them myself, and post a referee patch. This ticket should be ready today.

PS -- A maximum clique is just a clique of maximal size, so those functions are also applicable to Cliquer, but I'll update those myself. :)



---

archive/issue_comments_049336.json:
```json
{
    "body": "<a id='comment:29'></a>\nThank you very much !! ;-)\n\nConcerning the cliques, I agree when you say that a \"A maximum clique is just a clique of maximal size\", but a \"maximal clique\" is a clique such that there is no bigger clique in the graph -- according to the subset inclusion order (all the maximal cliques of a graph need not have the same cardinality) -- and this I what I thought I had read in the descriptions of the others functions.\n\nAnd.... now that this seems to be finished, I only have left to take care of the LP/MIP patch, which seems quite another adventure... ;-) \n\nThanks again !",
    "created_at": "2009-07-21T14:36:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49336",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:29'></a>
Thank you very much !! ;-)

Concerning the cliques, I agree when you say that a "A maximum clique is just a clique of maximal size", but a "maximal clique" is a clique such that there is no bigger clique in the graph -- according to the subset inclusion order (all the maximal cliques of a graph need not have the same cardinality) -- and this I what I thought I had read in the descriptions of the others functions.

And.... now that this seems to be finished, I only have left to take care of the LP/MIP patch, which seems quite another adventure... ;-) 

Thanks again !



---

archive/attachments_006664.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "cliquer-4-rebased-sage.4.1.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5793/cliquer-4-rebased-sage.4.1.patch",
    "created_at": "2009-07-21T17:18:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/rlmill"
}
```



---

archive/issue_comments_049337.json:
```json
{
    "body": "",
    "created_at": "2009-07-21T17:18:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49337",
    "user": "https://github.com/rlmill"
}
```





---

archive/issue_comments_049338.json:
```json
{
    "body": "<a id='comment:30'></a>\nReplying to [ncohen](#comment%3A29):\n> Concerning the cliques, I agree when you say that a \"A maximum clique is just a clique of maximal size\", but a \"maximal clique\" is a clique such that there is no bigger clique in the graph -- according to the subset inclusion order (all the maximal cliques of a graph need not have the same cardinality) -- and this I what I thought I had read in the descriptions of the others functions.\n\n\nI had realized this some time after writing that comment. Please forgive me.",
    "created_at": "2009-07-21T18:04:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49338",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:30'></a>
Replying to [ncohen](#comment%3A29):
> Concerning the cliques, I agree when you say that a "A maximum clique is just a clique of maximal size", but a "maximal clique" is a clique such that there is no bigger clique in the graph -- according to the subset inclusion order (all the maximal cliques of a graph need not have the same cardinality) -- and this I what I thought I had read in the descriptions of the others functions.


I had realized this some time after writing that comment. Please forgive me.



---

archive/issue_comments_049339.json:
```json
{
    "body": "Editing.",
    "created_at": "2009-07-21T18:56:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49339",
    "user": "https://github.com/rlmill"
}
```

Editing.



---

archive/attachments_006665.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_5793-cliquer-flattened.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5793/trac_5793-cliquer-flattened.patch",
    "created_at": "2009-07-21T18:57:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/rlmill"
}
```



---

archive/issue_comments_049340.json:
```json
{
    "body": "Flattened patch based on sage-4.1.",
    "created_at": "2009-07-21T18:57:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49340",
    "user": "https://github.com/rlmill"
}
```

Flattened patch based on sage-4.1.



---

archive/issue_comments_049341.json:
```json
{
    "body": "**Reviewer:** Robert Miller",
    "created_at": "2009-07-21T18:59:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49341",
    "user": "https://github.com/rlmill"
}
```

**Reviewer:** Robert Miller



---

archive/issue_comments_049342.json:
```json
{
    "body": "**Author:** Nathann Cohen",
    "created_at": "2009-07-21T18:59:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49342",
    "user": "https://github.com/rlmill"
}
```

**Author:** Nathann Cohen



---

archive/issue_comments_049343.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2009-07-21T18:59:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49343",
    "user": "https://github.com/rlmill"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_049344.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1 @@\n-After the discussion that has followed the following patch :\n-http://trac.sagemath.org/sage_trac/ticket/5669\n-\n-I began to re-write the same functions using Cython. There is now no need of a spkg package, and I hope it will be faster this way (and prettier) ;-)\n+This depends on #6355.\n``````\n",
    "created_at": "2009-07-21T19:01:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49344",
    "user": "https://github.com/rlmill"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1 @@
-After the discussion that has followed the following patch :
-http://trac.sagemath.org/sage_trac/ticket/5669
-
-I began to re-write the same functions using Cython. There is now no need of a spkg package, and I hope it will be faster this way (and prettier) ;-)
+This depends on #6355.
``````




---

archive/issue_comments_049345.json:
```json
{
    "body": "<a id='comment:33'></a>\nIn the last patch:\n\n1. I made all clique related functions start with `clique_` so that you can do `G.clique<tab>` and see all of them.\n\n2. Added a few doctests here and there\n\n3. Deprecated cliques, since it is ambiguous.",
    "created_at": "2009-07-21T19:03:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49345",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:33'></a>
In the last patch:

1. I made all clique related functions start with `clique_` so that you can do `G.clique<tab>` and see all of them.

2. Added a few doctests here and there

3. Deprecated cliques, since it is ambiguous.



---

archive/issue_comments_049346.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2009-07-23T04:32:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49346",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_049347.json:
```json
{
    "body": "<a id='comment:34'></a>\nWith the SPKG at #6355 and the patch on this ticket, I got the following doctest failures:\n\n```\nsage -t -long devel/sage-main/sage/groups/perm_gps/partn_ref/refinement_graphs.pyx\n**********************************************************************\nFile \"/scratch/mvngu/release/sage-4.1.1.alpha0/devel/sage-main/sage/groups/perm_gps/partn_ref/refinement_graphs.pyx\", line 318:\n    sage: clqs = (HS.complement()).cliques()\nExpected nothing\nGot:\n    doctest:1: DeprecationWarning: The function 'cliques' has been deprecated. Use 'cliques_maximal' or 'cliques_maximum'.\n**********************************************************************\n1 items had failures:\n   1 of  89 in __main__.example_2\n***Test Failed*** 1 failures.\nFor whitespace errors, see the file /scratch/mvngu/release/sage-4.1.1.alpha0/tmp/.doctest_refinement_graphs.py\n\t [231.6 s]\n\n<SNIP>\n\nsage -t -long devel/sage-main/sage/graphs/graph_coloring.py\n**********************************************************************\nFile \"/scratch/mvngu/release/sage-4.1.1.alpha0/devel/sage-main/sage/graphs/graph_coloring.py\", line 208:\n    sage: chromatic_number(G)\nExpected:\n    3\nGot:\n    doctest:224: DeprecationWarning: The function 'cliques' has been deprecated. Use 'cliques_maximal' or 'cliques_maximum'.\n    3\n**********************************************************************\n1 items had failures:\n   1 of   7 in __main__.example_5\n***Test Failed*** 1 failures.\nFor whitespace errors, see the file /scratch/mvngu/release/sage-4.1.1.alpha0/tmp/.doctest_graph_coloring.py\n\t [2.3 s]\n```",
    "created_at": "2009-07-23T04:32:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49347",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

<a id='comment:34'></a>
With the SPKG at #6355 and the patch on this ticket, I got the following doctest failures:

```
sage -t -long devel/sage-main/sage/groups/perm_gps/partn_ref/refinement_graphs.pyx
**********************************************************************
File "/scratch/mvngu/release/sage-4.1.1.alpha0/devel/sage-main/sage/groups/perm_gps/partn_ref/refinement_graphs.pyx", line 318:
    sage: clqs = (HS.complement()).cliques()
Expected nothing
Got:
    doctest:1: DeprecationWarning: The function 'cliques' has been deprecated. Use 'cliques_maximal' or 'cliques_maximum'.
**********************************************************************
1 items had failures:
   1 of  89 in __main__.example_2
***Test Failed*** 1 failures.
For whitespace errors, see the file /scratch/mvngu/release/sage-4.1.1.alpha0/tmp/.doctest_refinement_graphs.py
	 [231.6 s]

<SNIP>

sage -t -long devel/sage-main/sage/graphs/graph_coloring.py
**********************************************************************
File "/scratch/mvngu/release/sage-4.1.1.alpha0/devel/sage-main/sage/graphs/graph_coloring.py", line 208:
    sage: chromatic_number(G)
Expected:
    3
Got:
    doctest:224: DeprecationWarning: The function 'cliques' has been deprecated. Use 'cliques_maximal' or 'cliques_maximum'.
    3
**********************************************************************
1 items had failures:
   1 of   7 in __main__.example_5
***Test Failed*** 1 failures.
For whitespace errors, see the file /scratch/mvngu/release/sage-4.1.1.alpha0/tmp/.doctest_graph_coloring.py
	 [2.3 s]
```



---

archive/issue_comments_049348.json:
```json
{
    "body": "<a id='comment:35'></a>\nNote: making the `refinement_graphs` doctest use Cliquer instead of NetworkX shaves about 21 seconds from the doctest time for the file!",
    "created_at": "2009-07-23T16:55:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49348",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:35'></a>
Note: making the `refinement_graphs` doctest use Cliquer instead of NetworkX shaves about 21 seconds from the doctest time for the file!



---

archive/issue_comments_049349.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2009-07-23T16:55:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49349",
    "user": "https://github.com/rlmill"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_049350.json:
```json
{
    "body": "<a id='comment:36'></a>\nI do not really know how to read patch files, but it seems to me you replaced :\nm = max([len(c) for c in G.cliques()]) \nby\nm = max([len(c) for c in G.cliques_maximum()]) \n\nIf right, I have two remarks :\n- The syntax of max([len(c) for c in G.cliques()])  makes me think that G.cliques() was meant to return the list of the maximAL cliques, and m is then meant to be the clique number of G. The expression max([len(c) for c in G.cliques_maximum()])  is syntaxically correct, thought as cliques_maximum returns only the maxiMUM cliques we may as well return the length of the first one as they all have the same size.\n- In the end, and if I make no mistake, why about just setting m=G.clique_number() ?\n\nI expect it to be way faster than an enumeration of all the cliques ! ;-)",
    "created_at": "2009-07-23T17:31:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49350",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:36'></a>
I do not really know how to read patch files, but it seems to me you replaced :
m = max([len(c) for c in G.cliques()]) 
by
m = max([len(c) for c in G.cliques_maximum()]) 

If right, I have two remarks :
- The syntax of max([len(c) for c in G.cliques()])  makes me think that G.cliques() was meant to return the list of the maximAL cliques, and m is then meant to be the clique number of G. The expression max([len(c) for c in G.cliques_maximum()])  is syntaxically correct, thought as cliques_maximum returns only the maxiMUM cliques we may as well return the length of the first one as they all have the same size.
- In the end, and if I make no mistake, why about just setting m=G.clique_number() ?

I expect it to be way faster than an enumeration of all the cliques ! ;-)



---

archive/issue_comments_049351.json:
```json
{
    "body": "Apply on top of flattened patch",
    "created_at": "2009-07-23T17:37:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49351",
    "user": "https://github.com/rlmill"
}
```

Apply on top of flattened patch



---

archive/attachments_006666.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_5793-part-6.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5793/trac_5793-part-6.patch",
    "created_at": "2009-07-23T17:37:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/rlmill"
}
```



---

archive/issue_comments_049352.json:
```json
{
    "body": "<a id='comment:37'></a>\nNathann,\n\nThanks for spotting that. The patch is updated!",
    "created_at": "2009-07-23T17:37:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49352",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:37'></a>
Nathann,

Thanks for spotting that. The patch is updated!



---

archive/issue_comments_049353.json:
```json
{
    "body": "<a id='comment:38'></a>\nI applied patches in the following order:\n1. the SPKG at #6355\n2. `trac_5793-cliquer-flattened.patch`\n3. `trac_5793-part-6.patch`\nAll doctests passed with Sage 4.1.1.rc0. So positive review.",
    "created_at": "2009-07-31T17:50:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49353",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

<a id='comment:38'></a>
I applied patches in the following order:
1. the SPKG at #6355
2. `trac_5793-cliquer-flattened.patch`
3. `trac_5793-part-6.patch`
All doctests passed with Sage 4.1.1.rc0. So positive review.



---

archive/issue_comments_049354.json:
```json
{
    "body": "**Changing reviewer** from \"Robert Miller\" to \"Robert Miller, Minh Van Nguyen\".",
    "created_at": "2009-07-31T17:50:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49354",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

**Changing reviewer** from "Robert Miller" to "Robert Miller, Minh Van Nguyen".



---

archive/issue_comments_049355.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2009-07-31T17:50:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49355",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_049356.json:
```json
{
    "body": "**Merged:** Sage 4.1.1.rc1",
    "created_at": "2009-07-31T23:32:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5793#issuecomment-49356",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

**Merged:** Sage 4.1.1.rc1



---

archive/issue_events_017119.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mvngu",
    "created_at": "2009-07-31T23:32:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/5793",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5793#event-17119"
}
```
