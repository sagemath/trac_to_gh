# Issue 5098: Pollard rho algorithm for generic discrete logarithm

archive/issues_005098.json:
```json
{
    "assignees": [],
    "body": "First attempt to provide an algorithm using less memory than the \"baby step giant step\" algorithm for generic discrete logarithm.\n\nThis algorithm uses only (small) constant memory.\n\nProposed patch attached, with doctests.\n\nCC:  @JohnCremona\n\nComponent: **algebra**\n\nAuthor: **Yann Laigle-Chapuy**\n\nReviewer: **Martin Raum**\n\nMerged: **sage-4.3.rc1**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/5098_\n\n",
    "closed_at": "2009-12-20T07:23:32Z",
    "created_at": "2009-01-25T15:17:41Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20algebra",
        "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Pollard rho algorithm for generic discrete logarithm",
    "type": "issue",
    "updated_at": "2009-12-20T07:26:13Z",
    "url": "https://github.com/sagemath/sage/issues/5098",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```
First attempt to provide an algorithm using less memory than the "baby step giant step" algorithm for generic discrete logarithm.

This algorithm uses only (small) constant memory.

Proposed patch attached, with doctests.

CC:  @JohnCremona

Component: **algebra**

Author: **Yann Laigle-Chapuy**

Reviewer: **Martin Raum**

Merged: **sage-4.3.rc1**

_Issue created by migration from https://trac.sagemath.org/ticket/5098_





---

archive/issue_events_059291.json:
```json
{
    "actor": "https://github.com/sagetrac-ylchapuy",
    "created_at": "2009-01-25T15:17:41Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "milestone_number": null,
    "milestone_title": "sage-3.4.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59291"
}
```



---

archive/issue_events_059292.json:
```json
{
    "actor": "https://github.com/sagetrac-ylchapuy",
    "created_at": "2009-01-25T15:17:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "c: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59292"
}
```



---

archive/issue_events_059293.json:
```json
{
    "actor": "https://github.com/sagetrac-ylchapuy",
    "created_at": "2009-01-25T15:17:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59293"
}
```



---

archive/issue_events_059294.json:
```json
{
    "actor": "https://github.com/sagetrac-ylchapuy",
    "created_at": "2009-01-25T15:17:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59294"
}
```



---

archive/issue_events_059295.json:
```json
{
    "actor": "https://github.com/sagetrac-ylchapuy",
    "created_at": "2009-01-25T15:17:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59295"
}
```



---

archive/issue_comments_031041.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nDo you know what makes this slower?\n\nI'm not so familiar with this version of Pollard, but this looks well-written.  I'll test it once my build of 3.3.alpha2 has finished.",
    "created_at": "2009-01-25T15:37:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31041",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:1" align="right">comment:1</div>

Do you know what makes this slower?

I'm not so familiar with this version of Pollard, but this looks well-written.  I'll test it once my build of 3.3.alpha2 has finished.



---

archive/issue_comments_031042.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI don't really know what makes it slow. I suspect the use of \"hash\" is costly but I see no other way to partition generically a group in approximately equal size chunks.",
    "created_at": "2009-01-25T16:14:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31042",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:2" align="right">comment:2</div>

I don't really know what makes it slow. I suspect the use of "hash" is costly but I see no other way to partition generically a group in approximately equal size chunks.



---

archive/issue_comments_031043.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nReplying to [@sagetrac-ylchapuy](#comment:2):\n> I don't really know what makes it slow. I suspect the use of \"hash\" is costly but I see no other way to partition generically a group in approximately equal size chunks.\n\nThat is probably right.  It might be worth putting in a comment (or a docstring sentence aimed at future developers) saying that the efficiency of the functions depends on having a fast hash.",
    "created_at": "2009-01-25T17:19:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31043",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:3" align="right">comment:3</div>

Replying to [@sagetrac-ylchapuy](#comment:2):
> I don't really know what makes it slow. I suspect the use of "hash" is costly but I see no other way to partition generically a group in approximately equal size chunks.

That is probably right.  It might be worth putting in a comment (or a docstring sentence aimed at future developers) saying that the efficiency of the functions depends on having a fast hash.



---

archive/issue_comments_031044.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@JohnCremona](#comment:3):\n> Replying to [@sagetrac-ylchapuy](#comment:2):\n> > I don't really know what makes it slow. I suspect the use of \"hash\" is costly but I see no other way to partition generically a group in approximately equal size chunks.\n\n> \n> That is probably right.  It might be worth putting in a comment (or a docstring sentence aimed at future developers) saying that the efficiency of the functions depends on having a fast hash.\n\npatch modified to adress the above comment. The hash function is now a parameter of the pollard_rho function to give future developers an easy way to customize it.",
    "created_at": "2009-01-25T18:58:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31044",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@JohnCremona](#comment:3):
> Replying to [@sagetrac-ylchapuy](#comment:2):
> > I don't really know what makes it slow. I suspect the use of "hash" is costly but I see no other way to partition generically a group in approximately equal size chunks.

> 
> That is probably right.  It might be worth putting in a comment (or a docstring sentence aimed at future developers) saying that the efficiency of the functions depends on having a fast hash.

patch modified to adress the above comment. The hash function is now a parameter of the pollard_rho function to give future developers an easy way to customize it.



---

archive/issue_comments_031045.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI just wrote a review for this but trac refused to save it since another comment has been made in between.  How can it do this!!!!  Luckily I was able to use the \"back\" button to revover what I had written.\n\nReview:\n\n* Patch applied fine to 3.3.alpha2.  Doctests in groups/generic pass.\n\n* In the docstring for pollard_rho() I would move the explanation for the partition_size parameter to a NOTE later, not in the description of the paramater;  and that description should say that the default is 16.\n\n* There should be doctests in discrete_log() showing the use of the algorithm parameter.\n\nI also think that it would be helpful to add to this ticket (and perhaps also in doctests) examples showing how the new algorithm is sometimes preferable!\n\nNone of these is at all serious, and think this additoin is basically very good.",
    "created_at": "2009-01-25T19:07:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31045",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:5" align="right">comment:5</div>

I just wrote a review for this but trac refused to save it since another comment has been made in between.  How can it do this!!!!  Luckily I was able to use the "back" button to revover what I had written.

Review:

* Patch applied fine to 3.3.alpha2.  Doctests in groups/generic pass.

* In the docstring for pollard_rho() I would move the explanation for the partition_size parameter to a NOTE later, not in the description of the paramater;  and that description should say that the default is 16.

* There should be doctests in discrete_log() showing the use of the algorithm parameter.

I also think that it would be helpful to add to this ticket (and perhaps also in doctests) examples showing how the new algorithm is sometimes preferable!

None of these is at all serious, and think this additoin is basically very good.



---

archive/issue_events_059296.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2009-01-25T19:07:36Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "title_is": "[with review] Pollard rho algorithm for generic discrete logarithm",
    "title_was": "Pollard rho algorithm for generic discrete logarithm",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59296"
}
```



---

archive/issue_events_059297.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2009-01-25T19:07:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59297"
}
```



---

archive/issue_events_059298.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2009-01-25T19:07:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59298"
}
```



---

archive/issue_events_059299.json:
```json
{
    "actor": "https://github.com/sagetrac-ylchapuy",
    "created_at": "2009-01-26T08:00:09Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "title_is": "Pollard rho algorithm for generic discrete logarithm",
    "title_was": "[with review] Pollard rho algorithm for generic discrete logarithm",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59299"
}
```



---

archive/issue_events_059300.json:
```json
{
    "actor": "https://github.com/sagetrac-ylchapuy",
    "created_at": "2009-01-26T08:00:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59300"
}
```



---

archive/issue_events_059301.json:
```json
{
    "actor": "https://github.com/sagetrac-ylchapuy",
    "created_at": "2009-01-26T08:00:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59301"
}
```



---

archive/issue_comments_031046.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\na patch is on the way. I also removed to debug printings I forgot and added my authorship. \n\nConcerning comparison, the benefit of Pollard rho algorithm comes only with quite big examples and I don't think it's a good idea for doctests. Here's one example.\n\n```\n----------------------------------------------------------------------\n| Sage Version 3.2.3, Release Date: 2009-01-05                       |\n| Type notebook() for the GUI, and license() for information.        |\n----------------------------------------------------------------------\nLoading Sage library. Current Mercurial branch is: yann\nsage: get_memory_usage()\n113.9765625\nsage: F.<a>=GF(2^118)\nsage: g=F.multiplicative_generator()\nsage: u=g^15726718062461913153073925660344578\nsage: time discrete_log(u,g,algorithm=\"rho\")\nCPU times: user 56.06 s, sys: 0.20 s, total: 56.26 s\nWall time: 56.39 s\n15726718062461913153073925660344578\nsage: get_memory_usage()\n116.03515625\nsage: time discrete_log(u,g,algorithm=\"bsgs\")\nCPU times: user 46.74 s, sys: 0.54 s, total: 47.29 s\nWall time: 47.47 s\n15726718062461913153073925660344578\nsage: get_memory_usage()\n392.89453125\n```\nactually, Pollard rho is not so slow :)",
    "created_at": "2009-01-26T08:00:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31046",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:6" align="right">comment:6</div>

a patch is on the way. I also removed to debug printings I forgot and added my authorship. 

Concerning comparison, the benefit of Pollard rho algorithm comes only with quite big examples and I don't think it's a good idea for doctests. Here's one example.

```
----------------------------------------------------------------------
| Sage Version 3.2.3, Release Date: 2009-01-05                       |
| Type notebook() for the GUI, and license() for information.        |
----------------------------------------------------------------------
Loading Sage library. Current Mercurial branch is: yann
sage: get_memory_usage()
113.9765625
sage: F.<a>=GF(2^118)
sage: g=F.multiplicative_generator()
sage: u=g^15726718062461913153073925660344578
sage: time discrete_log(u,g,algorithm="rho")
CPU times: user 56.06 s, sys: 0.20 s, total: 56.26 s
Wall time: 56.39 s
15726718062461913153073925660344578
sage: get_memory_usage()
116.03515625
sage: time discrete_log(u,g,algorithm="bsgs")
CPU times: user 46.74 s, sys: 0.54 s, total: 47.29 s
Wall time: 47.47 s
15726718062461913153073925660344578
sage: get_memory_usage()
392.89453125
```
actually, Pollard rho is not so slow :)



---

archive/issue_comments_031047.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nargh, sorry, trac-5098-review.2.patch are the same trac-5098-review.patch, only one of them needs to be applied",
    "created_at": "2009-01-26T08:21:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31047",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:7" align="right">comment:7</div>

argh, sorry, trac-5098-review.2.patch are the same trac-5098-review.patch, only one of them needs to be applied



---

archive/issue_comments_031048.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nif someone reviews this patch, he might have a look at #5112 implementing Pollard lambda algorithm",
    "created_at": "2009-01-27T20:54:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31048",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:8" align="right">comment:8</div>

if someone reviews this patch, he might have a look at #5112 implementing Pollard lambda algorithm



---

archive/issue_events_059302.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2009-01-28T20:47:40Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "title_is": "[with review, a little more work] Pollard rho algorithm for generic discrete logarithm",
    "title_was": "Pollard rho algorithm for generic discrete logarithm",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59302"
}
```



---

archive/issue_comments_031049.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI am having trouble applying the new patch.  I have a 3.3.alpha2 build, so #5088 is already merged.  I apply trac-5098.patch ok.  Then I apply trac-5098-review.patch but get several hunks failing.\n\nThis might just be me being stupid, so it would be good if someone else tried.\n\nWhile I am here though, you did not quite understand my third point in the original review:  I did not mean that a new doctest should illustrate the greater efficiency (or not) of the new algorithm, but it should at least illustrate how to use the new parameter.  e.g. take one of the existing examples and compute it bothe ways and check that they are equal:\n\n```\n        sage: F.<a>=GF(2^63)\n        sage: g=F.gen()\n        sage: u=g**123456789\n        sage: discrete_log(u,g,algorithm='bsgs') == discrete_log(u,g,algorithm='rho')\n        True\n```",
    "created_at": "2009-01-28T20:47:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31049",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:9" align="right">comment:9</div>

I am having trouble applying the new patch.  I have a 3.3.alpha2 build, so #5088 is already merged.  I apply trac-5098.patch ok.  Then I apply trac-5098-review.patch but get several hunks failing.

This might just be me being stupid, so it would be good if someone else tried.

While I am here though, you did not quite understand my third point in the original review:  I did not mean that a new doctest should illustrate the greater efficiency (or not) of the new algorithm, but it should at least illustrate how to use the new parameter.  e.g. take one of the existing examples and compute it bothe ways and check that they are equal:

```
        sage: F.<a>=GF(2^63)
        sage: g=F.gen()
        sage: u=g**123456789
        sage: discrete_log(u,g,algorithm='bsgs') == discrete_log(u,g,algorithm='rho')
        True
```



---

archive/issue_events_059303.json:
```json
{
    "actor": "https://github.com/sagetrac-ylchapuy",
    "created_at": "2009-01-29T11:40:31Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "title_is": "Pollard rho algorithm for generic discrete logarithm",
    "title_was": "[with review, a little more work] Pollard rho algorithm for generic discrete logarithm",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59303"
}
```



---

archive/issue_comments_031050.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nbrand new standalone patch, based on a fresh alpha2 build.\nI hope everything is ok this time :)",
    "created_at": "2009-01-29T11:40:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31050",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:10" align="right">comment:10</div>

brand new standalone patch, based on a fresh alpha2 build.
I hope everything is ok this time :)



---

archive/issue_events_059304.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2009-02-01T15:15:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59304"
}
```



---

archive/issue_events_059305.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2009-02-01T15:15:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59305"
}
```



---

archive/issue_comments_031051.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nAttachment: **[trac-5098-alpha2based.patch.gz](https://github.com/sagemath/sage/files/ticket5098/trac-5098-alpha2based.patch.gz)**\n\nThanks -- I am quite happy now, and give this a positive review!  Now I will go and look at the lambda patch too.",
    "created_at": "2009-02-01T15:15:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31051",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:11" align="right">comment:11</div>

Attachment: **[trac-5098-alpha2based.patch.gz](https://github.com/sagemath/sage/files/ticket5098/trac-5098-alpha2based.patch.gz)**

Thanks -- I am quite happy now, and give this a positive review!  Now I will go and look at the lambda patch too.



---

archive/issue_events_059306.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-02-02T02:18:24Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "title_is": "[needs doctest fix] Pollard rho algorithm for generic discrete logarithm",
    "title_was": "Pollard rho algorithm for generic discrete logarithm",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59306"
}
```



---

archive/issue_comments_031052.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nThe latest patch causes the following doctest failure: From\n\n```\nFile \"/scratch/mabshoff/sage-3.3.alpha4/devel/sage/sage/rings/integer_mod.pyx\", line 444:\n   sage: sage.groups.generic.discrete_log(a,b)\nExpected:\n   Traceback (most recent call last):\n   ...\n   ZeroDivisionError: Inverse does not exist.\n```\nwe get to\n\n```\nArithmeticError: multiplicative order of 4 not defined since it is not a unit modulo 100\n```\n\nWilliam doesn't like either one, but he is about to comment himself.\n\nCheers,\n\nMichael",
    "created_at": "2009-02-02T02:18:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31052",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:12" align="right">comment:12</div>

The latest patch causes the following doctest failure: From

```
File "/scratch/mabshoff/sage-3.3.alpha4/devel/sage/sage/rings/integer_mod.pyx", line 444:
   sage: sage.groups.generic.discrete_log(a,b)
Expected:
   Traceback (most recent call last):
   ...
   ZeroDivisionError: Inverse does not exist.
```
we get to

```
ArithmeticError: multiplicative order of 4 not defined since it is not a unit modulo 100
```

William doesn't like either one, but he is about to comment himself.

Cheers,

Michael



---

archive/issue_comments_031053.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\n\n```\n William:  Hmm.\nBetter would be a statement that the discrete log doesn't exist.\nOr that it might but the algorithm implemented can't tell.\nI don't like either error.\n me:  Well, I will comment on the ticket and then you can comment there on the record.\n William:  The log does exist.\nso it would be much better to get a NotImplementedError when things go wrong.\n```\n\nCheers,\n\nMichael",
    "created_at": "2009-02-02T02:54:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31053",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:13" align="right">comment:13</div>


```
 William:  Hmm.
Better would be a statement that the discrete log doesn't exist.
Or that it might but the algorithm implemented can't tell.
I don't like either error.
 me:  Well, I will comment on the ticket and then you can comment there on the record.
 William:  The log does exist.
so it would be much better to get a NotImplementedError when things go wrong.
```

Cheers,

Michael



---

archive/issue_comments_031054.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nHi guys,\n\nthis ticket and #5112 is being held up by the above doctesting issues. The patches should go into 3.3 and rc0 will drop in roughly 48 hours, so there is time to sort this out. We could do two things:\n\n* change the doctest to \"fix\" the problem for now and open a followup ticket to deal with the problem William pointed out. Since the situation doesn't seem to get worst that seems acceptable\n* fix the problem William pointed out :)\n\nThoughts?\n\nCheers,\n\nMichael",
    "created_at": "2009-02-08T10:21:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31054",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:14" align="right">comment:14</div>

Hi guys,

this ticket and #5112 is being held up by the above doctesting issues. The patches should go into 3.3 and rc0 will drop in roughly 48 hours, so there is time to sort this out. We could do two things:

* change the doctest to "fix" the problem for now and open a followup ticket to deal with the problem William pointed out. Since the situation doesn't seem to get worst that seems acceptable
* fix the problem William pointed out :)

Thoughts?

Cheers,

Michael



---

archive/issue_comments_031055.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nI don't have time to look into this and hope that ylchapuy will.  I don't actually think it is the Pollard rho code at fault since by default generic discrete log still uses bsgs, so it is more likely to be the previous (and already merged) improvement to the discrete log which ylchapuy added a week or two ago.\n\nIf I finish all the \"real\" work I must do before tomorrow I'll come back to this but that is not very likely...",
    "created_at": "2009-02-08T10:34:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31055",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:15" align="right">comment:15</div>

I don't have time to look into this and hope that ylchapuy will.  I don't actually think it is the Pollard rho code at fault since by default generic discrete log still uses bsgs, so it is more likely to be the previous (and already merged) improvement to the discrete log which ylchapuy added a week or two ago.

If I finish all the "real" work I must do before tomorrow I'll come back to this but that is not very likely...



---

archive/issue_comments_031056.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nI would suggest to fix the doctest for the moment, and open a ticket for an enhancement.\nFor the moment, we only allow discrete logarithms computations in groups with known order;\nI think it could be possible quite easily to make pollard rho algorithm to work for unknown order too but it needs some work. I definitely have no time today, and no clean install of recent sage to patch the doctest myself ontime...",
    "created_at": "2009-02-09T17:47:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31056",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:16" align="right">comment:16</div>

I would suggest to fix the doctest for the moment, and open a ticket for an enhancement.
For the moment, we only allow discrete logarithms computations in groups with known order;
I think it could be possible quite easily to make pollard rho algorithm to work for unknown order too but it needs some work. I definitely have no time today, and no clean install of recent sage to patch the doctest myself ontime...



---

archive/issue_comments_031057.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nAttachment: **[trac-5098-doctest.patch.gz](https://github.com/sagemath/sage/files/ticket5098/trac-5098-doctest.patch.gz)**\n\nadded a small patch to fix doctest, and return a NotImplementedError explaining the problem which is that we can't get the order of the base (in the example it's not a unit).",
    "created_at": "2009-02-11T10:12:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31057",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:17" align="right">comment:17</div>

Attachment: **[trac-5098-doctest.patch.gz](https://github.com/sagemath/sage/files/ticket5098/trac-5098-doctest.patch.gz)**

added a small patch to fix doctest, and return a NotImplementedError explaining the problem which is that we can't get the order of the base (in the example it's not a unit).



---

archive/issue_events_059307.json:
```json
{
    "actor": "https://github.com/sagetrac-ylchapuy",
    "created_at": "2009-02-11T10:52:47Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "title_is": "Pollard rho algorithm for generic discrete logarithm",
    "title_was": "[needs doctest fix] Pollard rho algorithm for generic discrete logarithm",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59307"
}
```



---

archive/issue_events_059308.json:
```json
{
    "actor": "https://github.com/sagetrac-ylchapuy",
    "created_at": "2009-02-11T10:52:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59308"
}
```



---

archive/issue_events_059309.json:
```json
{
    "actor": "https://github.com/sagetrac-ylchapuy",
    "created_at": "2009-02-11T10:52:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59309"
}
```



---

archive/issue_events_059310.json:
```json
{
    "actor": "https://github.com/sagetrac-ylchapuy",
    "created_at": "2009-02-11T12:27:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "milestone_number": null,
    "milestone_title": "sage-3.4.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59310"
}
```



---

archive/issue_events_059311.json:
```json
{
    "actor": "https://github.com/sagetrac-ylchapuy",
    "created_at": "2009-02-11T12:27:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "milestone_number": null,
    "milestone_title": "sage-3.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59311"
}
```



---

archive/issue_events_059312.json:
```json
{
    "actor": "https://github.com/sagetrac-ylchapuy",
    "created_at": "2009-02-11T12:27:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59312"
}
```



---

archive/issue_events_059313.json:
```json
{
    "actor": "https://github.com/sagetrac-ylchapuy",
    "created_at": "2009-02-11T12:27:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59313"
}
```



---

archive/issue_comments_031058.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nthe last patch only change the behaviour in case the order of the base can't be computed. If all the patches apply cleanly I think it doesn't need another review (correct me if I'm wrong).",
    "created_at": "2009-02-11T12:27:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31058",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:19" align="right">comment:19</div>

the last patch only change the behaviour in case the order of the base can't be computed. If all the patches apply cleanly I think it doesn't need another review (correct me if I'm wrong).



---

archive/issue_events_059314.json:
```json
{
    "actor": "https://github.com/sagetrac-ylchapuy",
    "created_at": "2009-02-13T16:41:46Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "title_is": "[doctest fix needs review] Pollard rho algorithm for generic discrete logarithm",
    "title_was": "Pollard rho algorithm for generic discrete logarithm",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59314"
}
```



---

archive/issue_comments_031059.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nI was intending to review this (again), but there are a lot of patches and I do not know which ones to apply.  All?\n\nRegarding the last doctest issue, the function being tested states in its docstring that the arguments should be units, so surely it would be more sensible to test that and return an error if not, rather than go ahead and call any of the generic discrete log functions (which are placed in sage/GROUPS/generic.py for a reason: they require a group and were written that way, so inverses would exist).  Just because 4 happens to be a power of 2 mod 100 does not mean that I should be forced to apologise for not returning an answer in that case.  I know of no reason anyone might ever have for implementing discrete logs for non-units in a non-integral domain.",
    "created_at": "2009-02-14T14:37:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31059",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:21" align="right">comment:21</div>

I was intending to review this (again), but there are a lot of patches and I do not know which ones to apply.  All?

Regarding the last doctest issue, the function being tested states in its docstring that the arguments should be units, so surely it would be more sensible to test that and return an error if not, rather than go ahead and call any of the generic discrete log functions (which are placed in sage/GROUPS/generic.py for a reason: they require a group and were written that way, so inverses would exist).  Just because 4 happens to be a power of 2 mod 100 does not mean that I should be forced to apologise for not returning an answer in that case.  I know of no reason anyone might ever have for implementing discrete logs for non-units in a non-integral domain.



---

archive/issue_comments_031060.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nFirst: The patches to apply are the last two only; is there a way to remove the other ones?\n\nSecondly: I do agree, discrete logarithm is intended only for groups. The changes in my last patch might still be useful. I test if we can compute the order of the base, because the algorithms we use for now need them. It's probably not a good idea though to treat in the same way a non unit, and an element of a group where order is not implemented...\n\nWhat should I do to make those patches the right way ?",
    "created_at": "2009-02-14T14:53:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31060",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:22" align="right">comment:22</div>

First: The patches to apply are the last two only; is there a way to remove the other ones?

Secondly: I do agree, discrete logarithm is intended only for groups. The changes in my last patch might still be useful. I test if we can compute the order of the base, because the algorithms we use for now need them. It's probably not a good idea though to treat in the same way a non unit, and an element of a group where order is not implemented...

What should I do to make those patches the right way ?



---

archive/issue_comments_031061.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@sagetrac-ylchapuy](#comment:22):\n> First: The patches to apply are the last two only; is there a way to remove the other ones?\n\nRight now only trac admins can delete patches. I will delete all but the two last patches shortly.\n\nSome times it is interesting for credit and historic purposes to keep old patches around, but in this case it should be no problem to delete them.\n\nCheers,\n\nMichael",
    "created_at": "2009-02-14T14:57:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31061",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@sagetrac-ylchapuy](#comment:22):
> First: The patches to apply are the last two only; is there a way to remove the other ones?

Right now only trac admins can delete patches. I will delete all but the two last patches shortly.

Some times it is interesting for credit and historic purposes to keep old patches around, but in this case it should be no problem to delete them.

Cheers,

Michael



---

archive/issue_events_059315.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-02-15T07:48:06Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "title_is": "[doctest fix needs work] Pollard rho algorithm for generic discrete logarithm",
    "title_was": "[doctest fix needs review] Pollard rho algorithm for generic discrete logarithm",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59315"
}
```



---

archive/issue_comments_031062.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nI have some issues with trac-5098-doctest.patch:\n\n1. There should be a doctest that illustrates every single exception that can be raised.  For example this patch adds\n\n```\nraise NotImplementedError, \"The current implementation of Pollard Rho algorithm needs to have (a multiple of) the order of the base\" \n```\non line 543, but there is no doctest that illustrates this.\n\n2. Line 758, The %s\"%base business is bad.  \n\n```\nraise NotImplementedError, \"we currently need to know the order of the base %s\"%(base) }}}\nI used to write a lot of exceptions like this, since for Magma we did that.  But in Magma, they aren't exceptions that can be caught -- any single exception stops the program.  In Sage, exceptions can be caught and occur as part of the normal flow of execution of a program.  Once in 2006 there was a simple calculation David Harvey was doing, and he was very confused because it was taking several minutes to do something trivial.  It turned out this was because in the course of the computation an exception was raised and caught (e.g., because of some coercion model stuff), and the exception was written like the one before -- it was a string that printed the element involved in the coercion, and the str(...) conversion of the element took *minutes*.   That was what dominated the calculation.  As a result I realized that I had completely messed up in using that pattern for implementing exceptions in Sage, and had to go through the whole codebase and rewrite all such exceptions. \n\nJust to hammer this home, consider \n{{{\nsage: a = Mod(16, 100); b = Mod(-4,10^10^7)\nsage: try: w = sage.groups.generic.discrete_log(a,b)\n      except: pass\n[hang forever!]\n}}}\nand if it ever did come back, imagine what that exception would look like!",
    "created_at": "2009-02-15T07:48:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31062",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:24" align="right">comment:24</div>

I have some issues with trac-5098-doctest.patch:

1. There should be a doctest that illustrates every single exception that can be raised.  For example this patch adds

```
raise NotImplementedError, "The current implementation of Pollard Rho algorithm needs to have (a multiple of) the order of the base" 
```
on line 543, but there is no doctest that illustrates this.

2. Line 758, The %s"%base business is bad.  

```
raise NotImplementedError, "we currently need to know the order of the base %s"%(base) }}}
I used to write a lot of exceptions like this, since for Magma we did that.  But in Magma, they aren't exceptions that can be caught -- any single exception stops the program.  In Sage, exceptions can be caught and occur as part of the normal flow of execution of a program.  Once in 2006 there was a simple calculation David Harvey was doing, and he was very confused because it was taking several minutes to do something trivial.  It turned out this was because in the course of the computation an exception was raised and caught (e.g., because of some coercion model stuff), and the exception was written like the one before -- it was a string that printed the element involved in the coercion, and the str(...) conversion of the element took *minutes*.   That was what dominated the calculation.  As a result I realized that I had completely messed up in using that pattern for implementing exceptions in Sage, and had to go through the whole codebase and rewrite all such exceptions. 

Just to hammer this home, consider 
{{{
sage: a = Mod(16, 100); b = Mod(-4,10^10^7)
sage: try: w = sage.groups.generic.discrete_log(a,b)
      except: pass
[hang forever!]
}}}
and if it ever did come back, imagine what that exception would look like!



---

archive/issue_comments_031063.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nHere's some irc chatter about the \"%s\"%base exception business. There are perhaps thousands (?) of instances of this in Sage now.\n\n```\n23:46 < wstein> They can be \"silent killers\" :-)\n23:46 < mabs> wstein: can an opinion on the broken combinat pickles?\n23:47 < mabs> can -> got\n23:48 < wstein> wstein@sage:/space/wstein/sage-3.3.rc0$ ./sage -grep \"raise\" \"%s\" |wc -l\n23:48 < wstein> 6750\n23:48 < mabs> *OUCH*\n23:48 < wstein> It's not always bad.\n23:48 < wstein> wstein@sage:/space/wstein/sage-3.3.rc0$ ./sage -grep \"raise\" \"%s\" |wc -l\n23:48 < wstein> Oops.\n23:49 < wstein> sage: search_src(\"raise\",\"%s\") # also shows them.\n23:49 < wstein> It's only the ones that have elements that could easily be large in the exception that\n23:49 < wstein> are a danger.\n23:49 < wstein> But a quick glance suggests there are probably thousands of these still.\n23:50 < mabs> Yes, I thought the comment was good since I never knew about that problem.\n23:50 < wstein> Especially in the combinat and coding theory code...\n23:50 < mabs> :)\n23:50 < wstein> One can just do search_src(\"raise\",\"%s\")\n23:50 < wstein> look to see which exceptions are funny, and quickly craft examples where\n23:50 < wstein> things seem to hang for stupid reasons instead of raising an exception.\n23:51 < wstein> Where hang = create a base-10 string rep for something in memory, then try to display a bazillion characters to screen.\n```",
    "created_at": "2009-02-15T07:57:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31063",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:25" align="right">comment:25</div>

Here's some irc chatter about the "%s"%base exception business. There are perhaps thousands (?) of instances of this in Sage now.

```
23:46 < wstein> They can be "silent killers" :-)
23:46 < mabs> wstein: can an opinion on the broken combinat pickles?
23:47 < mabs> can -> got
23:48 < wstein> wstein@sage:/space/wstein/sage-3.3.rc0$ ./sage -grep "raise" "%s" |wc -l
23:48 < wstein> 6750
23:48 < mabs> *OUCH*
23:48 < wstein> It's not always bad.
23:48 < wstein> wstein@sage:/space/wstein/sage-3.3.rc0$ ./sage -grep "raise" "%s" |wc -l
23:48 < wstein> Oops.
23:49 < wstein> sage: search_src("raise","%s") # also shows them.
23:49 < wstein> It's only the ones that have elements that could easily be large in the exception that
23:49 < wstein> are a danger.
23:49 < wstein> But a quick glance suggests there are probably thousands of these still.
23:50 < mabs> Yes, I thought the comment was good since I never knew about that problem.
23:50 < wstein> Especially in the combinat and coding theory code...
23:50 < mabs> :)
23:50 < wstein> One can just do search_src("raise","%s")
23:50 < wstein> look to see which exceptions are funny, and quickly craft examples where
23:50 < wstein> things seem to hang for stupid reasons instead of raising an exception.
23:51 < wstein> Where hang = create a base-10 string rep for something in memory, then try to display a bazillion characters to screen.
```



---

archive/issue_comments_031064.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nA comment by cwitty about my suggestion that every exception should be doctested:\n\n```\n00:07 < cwitty> wstein: re your comment on #5098: I've added exceptions to Sage that I have no idea how \n                to doctest.\n00:07 < wstein> cwitty -- for that patch I think they would all be easy.\n00:07 < wstein> I had that in mind.\n00:07 < cwitty> I sort of suspect that hitting them may require working in a number field of degree \n                several billion, but I'm not positive.\n00:07 < wstein> cwitty -- at least you can give a reason for not doctesting the ones you don't test.\n00:08 < wstein> I don't mean for that to be some absolute rule.\n00:08 < wstein> Just a general guideline.\n00:08 < wstein> But you have a good point.\n00:08 < wstein> I'll paste this to the ticket.\n00:09 < wstein> The last thing I wrote in sage was something involving gap.py and the \"This should \n                never happen\" exception.\n00:09 < wstein> That can't be doctested :-)\n00:09 < wstein> So you're right.\n```",
    "created_at": "2009-02-15T08:14:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31064",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:26" align="right">comment:26</div>

A comment by cwitty about my suggestion that every exception should be doctested:

```
00:07 < cwitty> wstein: re your comment on #5098: I've added exceptions to Sage that I have no idea how 
                to doctest.
00:07 < wstein> cwitty -- for that patch I think they would all be easy.
00:07 < wstein> I had that in mind.
00:07 < cwitty> I sort of suspect that hitting them may require working in a number field of degree 
                several billion, but I'm not positive.
00:07 < wstein> cwitty -- at least you can give a reason for not doctesting the ones you don't test.
00:08 < wstein> I don't mean for that to be some absolute rule.
00:08 < wstein> Just a general guideline.
00:08 < wstein> But you have a good point.
00:08 < wstein> I'll paste this to the ticket.
00:09 < wstein> The last thing I wrote in sage was something involving gap.py and the "This should 
                never happen" exception.
00:09 < wstein> That can't be doctested :-)
00:09 < wstein> So you're right.
```



---

archive/issue_comments_031065.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nI am cleaning up the 3.3 milestone. If a patch with positive review is put up to this ticket on time it might make it into 3.3.\n\nCheers,\n\nMichael",
    "created_at": "2009-02-16T05:00:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31065",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:27" align="right">comment:27</div>

I am cleaning up the 3.3 milestone. If a patch with positive review is put up to this ticket on time it might make it into 3.3.

Cheers,

Michael



---

archive/issue_events_059316.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-02-16T05:00:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "milestone_number": null,
    "milestone_title": "sage-3.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59316"
}
```



---

archive/issue_events_059317.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-02-16T05:00:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "milestone_number": null,
    "milestone_title": "sage-3.4.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59317"
}
```



---

archive/issue_comments_031066.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nAny movement on this?\n\nCheers,\n\nMichael",
    "created_at": "2009-03-25T07:38:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31066",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:28" align="right">comment:28</div>

Any movement on this?

Cheers,

Michael



---

archive/issue_events_059318.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-03-25T07:38:38Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "title_is": "Pollard rho algorithm for generic discrete logarithm",
    "title_was": "[doctest fix needs work] Pollard rho algorithm for generic discrete logarithm",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59318"
}
```



---

archive/issue_events_059319.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-03-25T07:38:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59319"
}
```



---

archive/issue_events_059320.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-03-25T07:38:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59320"
}
```



---

archive/issue_comments_031067.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nLet's try another way. \nThe last patch I uploaded is to be applied instead of the previous ones. It only provide a Pollard rho algorithm for discrete log, without plugin it in the existing discrete log. We can address the other problems about non unit elements for example in another ticket.",
    "created_at": "2009-06-30T16:40:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31067",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:29" align="right">comment:29</div>

Let's try another way. 
The last patch I uploaded is to be applied instead of the previous ones. It only provide a Pollard rho algorithm for discrete log, without plugin it in the existing discrete log. We can address the other problems about non unit elements for example in another ticket.



---

archive/issue_comments_031068.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nThis looks ok to me.  It applies fine to 4.1.alpha3 and tests pass.  It might be better to call the function discrete_log_rho instead of pollard_rho_log as that would make it easier to find via tab completion on discrete_*.\n\nThere should also be examples (doctests) to illustrate the use of the parameters partition_size, memory_size, hash_function, check_prime.  For example, one where using a non-default value gives better (i.e. faster) results.  If it is not practical to put those into doctests (for example, if the improvement is only noticeable with very large examples), tehre should still be small examples to illustrate these parameters, with a comment about them being too small to notice, just to show how they are used.\n\nAnd the technical parameters partition_size, memory_size should be listed in the INPUT block rather than in a separate note.\n\nI have left this as \"needs work\" but those things are very small and a positive review is not far away!",
    "created_at": "2009-07-03T14:00:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31068",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:30" align="right">comment:30</div>

This looks ok to me.  It applies fine to 4.1.alpha3 and tests pass.  It might be better to call the function discrete_log_rho instead of pollard_rho_log as that would make it easier to find via tab completion on discrete_*.

There should also be examples (doctests) to illustrate the use of the parameters partition_size, memory_size, hash_function, check_prime.  For example, one where using a non-default value gives better (i.e. faster) results.  If it is not practical to put those into doctests (for example, if the improvement is only noticeable with very large examples), tehre should still be small examples to illustrate these parameters, with a comment about them being too small to notice, just to show how they are used.

And the technical parameters partition_size, memory_size should be listed in the INPUT block rather than in a separate note.

I have left this as "needs work" but those things are very small and a positive review is not far away!



---

archive/issue_events_059321.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2009-07-03T14:00:06Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "title_is": "[with review] Pollard rho algorithm for generic discrete logarithm",
    "title_was": "Pollard rho algorithm for generic discrete logarithm",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59321"
}
```



---

archive/issue_comments_031069.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,9 +1,5 @@\n First attempt to provide an algorithm using less memory than the \"baby step giant step\" algorithm for generic discrete logarithm.\n \n-This algorithm uses only (small) constant memory. It is about 3 times slower than bsgs on the examples I tested.\n-\n-I also added an unused optional argument to bsgs to simplify the call in discrete_log.\n+This algorithm uses only (small) constant memory.\n \n Proposed patch attached, with doctests.\n-\n-(the attached patch needs #5088 to be applied first)\n``````\n",
    "created_at": "2009-09-05T15:30:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31069",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,9 +1,5 @@
 First attempt to provide an algorithm using less memory than the "baby step giant step" algorithm for generic discrete logarithm.
 
-This algorithm uses only (small) constant memory. It is about 3 times slower than bsgs on the examples I tested.
-
-I also added an unused optional argument to bsgs to simplify the call in discrete_log.
+This algorithm uses only (small) constant memory.
 
 Proposed patch attached, with doctests.
-
-(the attached patch needs #5088 to be applied first)
``````




---

archive/issue_events_059322.json:
```json
{
    "actor": "https://github.com/sagetrac-ylchapuy",
    "created_at": "2009-09-05T15:30:04Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "title_is": "Pollard rho algorithm for generic discrete logarithm",
    "title_was": "[with review] Pollard rho algorithm for generic discrete logarithm",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59322"
}
```



---

archive/issue_events_059323.json:
```json
{
    "actor": "https://github.com/sagetrac-ylchapuy",
    "created_at": "2009-09-05T15:30:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59323"
}
```



---

archive/issue_events_059324.json:
```json
{
    "actor": "https://github.com/sagetrac-ylchapuy",
    "created_at": "2009-09-05T15:30:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59324"
}
```



---

archive/issue_comments_031070.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nI renamed the function to \"discrete_log_rho\", removed the unnecessary parameters (partition_size and memory_size don't change that much the behavior), added an example of user set hash function, and forgot to add an exemple for check_prime... I will fix this in 2 minutes!",
    "created_at": "2009-09-05T15:36:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31070",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:32" align="right">comment:32</div>

I renamed the function to "discrete_log_rho", removed the unnecessary parameters (partition_size and memory_size don't change that much the behavior), added an example of user set hash function, and forgot to add an exemple for check_prime... I will fix this in 2 minutes!



---

archive/issue_comments_031071.json:
```json
{
    "body": "Attachment: **[trac_5098_standalone.patch.gz](https://github.com/sagemath/sage/files/ticket5098/trac_5098_standalone.patch.gz)**\n\nbased on sage 4.1.1",
    "created_at": "2009-09-05T15:43:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31071",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

Attachment: **[trac_5098_standalone.patch.gz](https://github.com/sagemath/sage/files/ticket5098/trac_5098_standalone.patch.gz)**

based on sage 4.1.1



---

archive/issue_comments_031072.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nI finally choose to remove the parameter check_prime because the complexity of Pollard Rho algorithm is a lot bigger than primality testing.",
    "created_at": "2009-09-05T15:45:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31072",
    "user": "https://github.com/sagetrac-ylchapuy"
}
```

<div id="comment:33" align="right">comment:33</div>

I finally choose to remove the parameter check_prime because the complexity of Pollard Rho algorithm is a lot bigger than primality testing.



---

archive/issue_events_059325.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2009-12-08T09:06:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59325"
}
```



---

archive/issue_events_059326.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2009-12-08T09:06:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59326"
}
```



---

archive/issue_comments_031073.json:
```json
{
    "body": "Reviewer: **Martin Raum**",
    "created_at": "2009-12-08T09:06:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31073",
    "user": "https://github.com/sagetrac-mraum"
}
```

Reviewer: **Martin Raum**



---

archive/issue_comments_031074.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nThis gets a positive review from me with the small changes in the review patch. All tests pass. For transparency I just added one tiny comment on the fall back and completed the type of a raised error.",
    "created_at": "2009-12-08T09:06:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31074",
    "user": "https://github.com/sagetrac-mraum"
}
```

<div id="comment:35" align="right">comment:35</div>

This gets a positive review from me with the small changes in the review patch. All tests pass. For transparency I just added one tiny comment on the fall back and completed the type of a raised error.



---

archive/issue_comments_031075.json:
```json
{
    "body": "Author: **Yann Laigle-Chapuy**",
    "created_at": "2009-12-08T09:06:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31075",
    "user": "https://github.com/sagetrac-mraum"
}
```

Author: **Yann Laigle-Chapuy**



---

archive/issue_comments_031076.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nAttachment: **[trac-5098-pollard_review.patch.gz](https://github.com/sagemath/sage/files/ticket5098/trac-5098-pollard_review.patch.gz)**",
    "created_at": "2009-12-20T07:23:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31076",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:36" align="right">comment:36</div>

Attachment: **[trac-5098-pollard_review.patch.gz](https://github.com/sagemath/sage/files/ticket5098/trac-5098-pollard_review.patch.gz)**



---

archive/issue_comments_031077.json:
```json
{
    "body": "Merged: **sage-4.3.rc1**",
    "created_at": "2009-12-20T07:23:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5098#issuecomment-31077",
    "user": "https://github.com/mwhansen"
}
```

Merged: **sage-4.3.rc1**



---

archive/issue_events_059327.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-12-20T07:23:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59327"
}
```



---

archive/issue_events_059328.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-12-20T07:23:32Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59328"
}
```



---

archive/issue_events_059329.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-12-20T07:26:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "milestone_number": null,
    "milestone_title": "sage-4.3.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59329"
}
```



---

archive/issue_events_059330.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-12-20T07:26:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5098",
    "milestone_number": null,
    "milestone_title": "sage-4.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5098#event-59330"
}
```
