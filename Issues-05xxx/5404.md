# Issue 5404: deprecate numerical_sqrt

archive/issues_005404.json:
```json
{
    "assignees": [
        "https://github.com/burcin"
    ],
    "body": "Now we have sqrt(a, prec=1000). Also, it doesn't even do what it says. \n\n```\nsage: numerical_sqrt(3)\nsqrt(3)\n```\n\nCC:  @jasongrout\n\nComponent: **calculus**\n\nAuthor: **John Palmieri**\n\nReviewer: **Mike Hansen**\n\nMerged: **4.0.1.rc1**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/5404_\n\n",
    "closed_at": "2009-06-04T19:10:34Z",
    "created_at": "2009-02-28T21:55:42Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20calculus",
        "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.0.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "deprecate numerical_sqrt",
    "type": "issue",
    "updated_at": "2009-06-06T22:35:57Z",
    "url": "https://github.com/sagemath/sage/issues/5404",
    "user": "https://github.com/robertwb"
}
```
Now we have sqrt(a, prec=1000). Also, it doesn't even do what it says. 

```
sage: numerical_sqrt(3)
sqrt(3)
```

CC:  @jasongrout

Component: **calculus**

Author: **John Palmieri**

Reviewer: **Mike Hansen**

Merged: **4.0.1.rc1**

_Issue created by migration from https://trac.sagemath.org/ticket/5404_





---

archive/issue_events_063569.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2009-02-28T21:55:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5404",
    "milestone_number": null,
    "milestone_title": "sage-4.0.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5404#event-63569"
}
```



---

archive/issue_events_063570.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2009-02-28T21:55:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5404",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20calculus",
    "label_color": "0000ff",
    "label_name": "c: calculus",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5404#event-63570"
}
```



---

archive/issue_events_063571.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2009-02-28T21:55:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5404",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5404#event-63571"
}
```



---

archive/issue_events_063572.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2009-02-28T21:55:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5404",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5404#event-63572"
}
```



---

archive/issue_events_063573.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2009-02-28T21:55:42Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/5404",
    "subject": "https://github.com/robertwb",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5404#event-63573"
}
```



---

archive/issue_events_063574.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2009-02-28T22:02:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5404",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5404#event-63574"
}
```



---

archive/issue_events_063575.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2009-02-28T22:02:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5404",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5404#event-63575"
}
```



---

archive/issue_events_063576.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2009-02-28T22:02:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5404",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5404#event-63576"
}
```



---

archive/issue_comments_033473.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nAttachment: **[5404-numerical_sqrt.patch.gz](https://github.com/sagemath/sage/files/ticket5404/5404-numerical_sqrt.patch.gz)**\n\nNot used anywhere in the Sage source.",
    "created_at": "2009-02-28T22:02:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5404#issuecomment-33473",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:1" align="right">comment:1</div>

Attachment: **[5404-numerical_sqrt.patch.gz](https://github.com/sagemath/sage/files/ticket5404/5404-numerical_sqrt.patch.gz)**

Not used anywhere in the Sage source.



---

archive/issue_comments_033474.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nIt would be good to mention the deprecation in the docstring of the function as well.\n\nWe could also change the doctests, which test the wrong function now anyway, to demonstrate using sqrt with the prec parameter.",
    "created_at": "2009-03-01T15:38:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5404#issuecomment-33474",
    "user": "https://github.com/burcin"
}
```

<div id="comment:2" align="right">comment:2</div>

It would be good to mention the deprecation in the docstring of the function as well.

We could also change the doctests, which test the wrong function now anyway, to demonstrate using sqrt with the prec parameter.



---

archive/issue_events_063577.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2009-03-01T15:38:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5404",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5404#event-63577"
}
```



---

archive/issue_events_063578.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2009-03-01T15:38:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5404",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5404#event-63578"
}
```



---

archive/issue_comments_033475.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThe deprecation message doesn't make sense to me:\n\n```\nsage: sqrt(10.1, prec=5)\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n...\nTypeError: sqrt() got an unexpected keyword argument 'prec'\n```\nI think the issue here is that in real_mpfr.pyx, the sqrt method doesn't accept a 'prec' argument. If I do `search_def('sqrt')`, I see lots of sqrt methods without a prec argument.  Perhaps the sqrt function in calculus/calculus.py should check for a `TypeError` in addition to an `AttributeError`?  In any case, we can't give a deprecation message which suggests using code which doesn't work.\n\nWe also need some doctests in the sqrt function in calculus/calculus.py using all of the advertised arguments.",
    "created_at": "2009-05-10T22:30:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5404#issuecomment-33475",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:3" align="right">comment:3</div>

The deprecation message doesn't make sense to me:

```
sage: sqrt(10.1, prec=5)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
...
TypeError: sqrt() got an unexpected keyword argument 'prec'
```
I think the issue here is that in real_mpfr.pyx, the sqrt method doesn't accept a 'prec' argument. If I do `search_def('sqrt')`, I see lots of sqrt methods without a prec argument.  Perhaps the sqrt function in calculus/calculus.py should check for a `TypeError` in addition to an `AttributeError`?  In any case, we can't give a deprecation message which suggests using code which doesn't work.

We also need some doctests in the sqrt function in calculus/calculus.py using all of the advertised arguments.



---

archive/issue_comments_033476.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nSee #6171 for a possible fix to the 'prec' issue.  Maybe with this fix, the patch here is okay?",
    "created_at": "2009-05-31T21:41:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5404#issuecomment-33476",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:5" align="right">comment:5</div>

See #6171 for a possible fix to the 'prec' issue.  Maybe with this fix, the patch here is okay?



---

archive/issue_events_063579.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2009-05-31T23:39:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5404",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5404#event-63579"
}
```



---

archive/issue_events_063580.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2009-05-31T23:39:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5404",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5404#event-63580"
}
```



---

archive/issue_comments_033477.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nOkay, I think with #6171, my main complaint is taken care of.  Here's a new patch; the only difference is the docstring.  The code gets a positive review from me, so if you're happy with my docstring, give the ticket a positive review.\n\nThis depends on #6171, not to apply and to pass doctests, but in the sense that the deprecation message is inaccurate without #6171.",
    "created_at": "2009-05-31T23:39:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5404#issuecomment-33477",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:6" align="right">comment:6</div>

Okay, I think with #6171, my main complaint is taken care of.  Here's a new patch; the only difference is the docstring.  The code gets a positive review from me, so if you're happy with my docstring, give the ticket a positive review.

This depends on #6171, not to apply and to pass doctests, but in the sense that the deprecation message is inaccurate without #6171.



---

archive/issue_comments_033478.json:
```json
{
    "body": "Attachment: **[numerical_sqrt.patch.gz](https://github.com/sagemath/sage/files/ticket5404/numerical_sqrt.patch.gz)**\n\napply only this patch",
    "created_at": "2009-05-31T23:40:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5404#issuecomment-33478",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment: **[numerical_sqrt.patch.gz](https://github.com/sagemath/sage/files/ticket5404/numerical_sqrt.patch.gz)**

apply only this patch



---

archive/issue_events_063581.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-06-04T19:10:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5404",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5404#event-63581"
}
```



---

archive/issue_events_063582.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-06-04T19:10:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5404",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5404#event-63582"
}
```



---

archive/issue_comments_033479.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nLooks good to me.\n\nMerged numerical_sqrt.patch in 4.0.1.rc1.",
    "created_at": "2009-06-04T19:10:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5404#issuecomment-33479",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:7" align="right">comment:7</div>

Looks good to me.

Merged numerical_sqrt.patch in 4.0.1.rc1.



---

archive/issue_events_063583.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-06-04T19:10:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5404",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5404#event-63583"
}
```



---

archive/issue_events_063584.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-06-04T19:10:34Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/5404",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5404#event-63584"
}
```



---

archive/issue_comments_033480.json:
```json
{
    "body": "Merged: **4.0.1.rc1**",
    "created_at": "2009-06-06T22:35:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5404#issuecomment-33480",
    "user": "https://github.com/mwhansen"
}
```

Merged: **4.0.1.rc1**



---

archive/issue_comments_033481.json:
```json
{
    "body": "Reviewer: **Mike Hansen**",
    "created_at": "2009-06-06T22:35:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5404#issuecomment-33481",
    "user": "https://github.com/mwhansen"
}
```

Reviewer: **Mike Hansen**



---

archive/issue_comments_033482.json:
```json
{
    "body": "Author: **John Palmieri**",
    "created_at": "2009-06-06T22:35:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5404#issuecomment-33482",
    "user": "https://github.com/mwhansen"
}
```

Author: **John Palmieri**
