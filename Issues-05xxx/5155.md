# Issue 5155: Fix doctests that want write access to $SAGE_ROOT

archive/issues_005155.json:
```json
{
    "assignees": [],
    "body": "All doctests in Sage should pass when they are run as a user that does not have write access to the Sage install. To do that, run the doctests on a Sage install that isn't owned by the user:\n\n```\n$ ./sage -tp 4 --long devel/sage/doc/common devel/sage/doc/en devel/sage/sage\n```\n\nOn sage-5.4.beta1, this causes:\n\n```\nThe following tests failed:\n\n        sage -t --long devel/sage/sage/interfaces/qepcad.py # 3 doctests failed\n        sage -t --long devel/sage/sage/misc/inline_fortran.py # 3 doctests failed\n        sage -t --long devel/sage/sage/tests/cmdline.py # 2 doctests failed\n```\n\n**Apply**:\n1. [attachment:5155_sage_location.patch](https://github.com/sagemath/sage/files/ticket5155/5155_sage_location.patch) to the scripts repository.\n2. [attachment:5155_root.patch](https://github.com/sagemath/sage/files/ticket5155/5155_root.patch) to the `SAGE_ROOT` repository.\n3. [attachment:5155_sagelib.patch](https://github.com/sagemath/sage/files/ticket5155/5155_sagelib.patch) to the Sage library.\n\nDepends on #13157\n\nDepends on #13397\n\nDepends on #13452\n\nDepends on #13407\n\nDepends on #13459\n\nDepends on #13457\n\nDepends on #13123\n\nDepends on #13887\n\n**Assignee:** @jdemeyer\n\n**CC:**  @lftabera @nexttime\n\n**Reviewer:** Fran\u00e7ois Bissey\n\n**Author:** Mike Hansen, Jeroen Demeyer, John Palmieri\n\n**Merged:** sage-5.7.beta0\n\nIssue created by migration from https://trac.sagemath.org/ticket/5155\n\n",
    "closed_at": "2013-01-21T21:06:24Z",
    "created_at": "2009-02-02T01:25:42Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20scripts",
        "https://github.com/sagemath/sage/labels/critical",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Fix doctests that want write access to $SAGE_ROOT",
    "type": "issue",
    "updated_at": "2013-01-22T19:41:33Z",
    "url": "https://github.com/sagemath/sage/issues/5155",
    "user": "https://github.com/sagetrac-mabshoff"
}
```
All doctests in Sage should pass when they are run as a user that does not have write access to the Sage install. To do that, run the doctests on a Sage install that isn't owned by the user:

```
$ ./sage -tp 4 --long devel/sage/doc/common devel/sage/doc/en devel/sage/sage
```

On sage-5.4.beta1, this causes:

```
The following tests failed:

        sage -t --long devel/sage/sage/interfaces/qepcad.py # 3 doctests failed
        sage -t --long devel/sage/sage/misc/inline_fortran.py # 3 doctests failed
        sage -t --long devel/sage/sage/tests/cmdline.py # 2 doctests failed
```

**Apply**:
1. [attachment:5155_sage_location.patch](https://github.com/sagemath/sage/files/ticket5155/5155_sage_location.patch) to the scripts repository.
2. [attachment:5155_root.patch](https://github.com/sagemath/sage/files/ticket5155/5155_root.patch) to the `SAGE_ROOT` repository.
3. [attachment:5155_sagelib.patch](https://github.com/sagemath/sage/files/ticket5155/5155_sagelib.patch) to the Sage library.

Depends on #13157

Depends on #13397

Depends on #13452

Depends on #13407

Depends on #13459

Depends on #13457

Depends on #13123

Depends on #13887

**Assignee:** @jdemeyer

**CC:**  @lftabera @nexttime

**Reviewer:** Fran√ßois Bissey

**Author:** Mike Hansen, Jeroen Demeyer, John Palmieri

**Merged:** sage-5.7.beta0

Issue created by migration from https://trac.sagemath.org/ticket/5155





---

archive/issue_events_049399.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-02-02T01:25:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "milestone_number": null,
    "milestone_title": "sage-5.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5155#event-49399"
}
```



---

archive/issue_events_049400.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-02-02T01:25:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20doctest%20coverage",
    "label_color": "08517b",
    "label_name": "component: doctest coverage",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5155#event-49400"
}
```



---

archive/issue_events_049401.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-02-02T01:25:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "label": "https://github.com/sagemath/sage/labels/critical",
    "label_color": "ff0000",
    "label_name": "critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5155#event-49401"
}
```



---

archive/issue_events_049402.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-02-02T01:25:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "008080",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5155#event-49402"
}
```



---

archive/issue_comments_032721.json:
```json
{
    "body": "**Author:** Mike Hansen",
    "created_at": "2010-01-19T07:56:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32721",
    "user": "https://github.com/mwhansen"
}
```

**Author:** Mike Hansen



---

archive/issue_events_049403.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2010-01-19T07:56:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5155#event-49403"
}
```



---

archive/issue_comments_032722.json:
```json
{
    "body": "<a id='comment:2'>**Comment 2:**</a>\nBefore applying the patch, I get two doctest failures (with a non-writeable Sage install).  Applying the patch \"trac_5155.patch\" fixes both.  So positive review for that.\n\nThe scripts patch wasn't necessary to get those tests to pass, and it also doesn't apply cleanly to 4.3.1:\n\n```\napplying /Users/palmieri/Downloads/scripts_5155.patch\npatching file sage-doctest\nHunk #1 FAILED at 55\n1 out of 1 hunks FAILED -- saving rejects to file sage-doctest.rej\nunable to find 'sage-dsage-trial' for patching\n1 out of 1 hunks FAILED -- saving rejects to file sage-dsage-trial.rej\npatching file sage-maketest\nHunk #1 succeeded at 1 with fuzz 1 (offset -1 lines).\npatching file sage-test\nHunk #1 FAILED at 40\n1 out of 1 hunks FAILED -- saving rejects to file sage-test.rej\nsage-dsage-trial: No such file or directory\nabort: patch failed to apply\n```\nThe changes there look fine in principle, though.  So once it's rebased, positive review there, too.",
    "created_at": "2010-01-21T21:04:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32722",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:2'>**Comment 2:**</a>
Before applying the patch, I get two doctest failures (with a non-writeable Sage install).  Applying the patch "trac_5155.patch" fixes both.  So positive review for that.

The scripts patch wasn't necessary to get those tests to pass, and it also doesn't apply cleanly to 4.3.1:

```
applying /Users/palmieri/Downloads/scripts_5155.patch
patching file sage-doctest
Hunk #1 FAILED at 55
1 out of 1 hunks FAILED -- saving rejects to file sage-doctest.rej
unable to find 'sage-dsage-trial' for patching
1 out of 1 hunks FAILED -- saving rejects to file sage-dsage-trial.rej
patching file sage-maketest
Hunk #1 succeeded at 1 with fuzz 1 (offset -1 lines).
patching file sage-test
Hunk #1 FAILED at 40
1 out of 1 hunks FAILED -- saving rejects to file sage-test.rej
sage-dsage-trial: No such file or directory
abort: patch failed to apply
```
The changes there look fine in principle, though.  So once it's rebased, positive review there, too.



---

archive/issue_events_049404.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-01-21T21:04:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5155#event-49404"
}
```



---

archive/issue_events_049405.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-01-21T21:04:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5155#event-49405"
}
```



---

archive/issue_comments_032723.json:
```json
{
    "body": "<a id='comment:3'>**Comment 3:**</a>\nSome of the doctest are ok nowadays but there are other new fails. See for example #9965\n\nI can confirm that, with sage 4.5.3 I get the following doctest failures:\n\n        sage -t  -long \"devel/sage/doc/common/builder.py\"\n        sage -t  -long \"devel/sage/sage/interfaces/qepcad.py\"\n        sage -t  -long \"devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py\"\n        sage -t  -long \"devel/sage/sage/modular/hecke/submodule.py\"\n        sage -t  -long \"devel/sage/sage/modular/abvar/abvar.py\"\n        sage -t  -long \"devel/sage/sage/lfunctions/sympow.py\"\n\nAll except quecad are trying to be solved in #9965",
    "created_at": "2010-09-23T11:10:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32723",
    "user": "https://github.com/lftabera"
}
```

<a id='comment:3'>**Comment 3:**</a>
Some of the doctest are ok nowadays but there are other new fails. See for example #9965

I can confirm that, with sage 4.5.3 I get the following doctest failures:

        sage -t  -long "devel/sage/doc/common/builder.py"
        sage -t  -long "devel/sage/sage/interfaces/qepcad.py"
        sage -t  -long "devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py"
        sage -t  -long "devel/sage/sage/modular/hecke/submodule.py"
        sage -t  -long "devel/sage/sage/modular/abvar/abvar.py"
        sage -t  -long "devel/sage/sage/lfunctions/sympow.py"

All except quecad are trying to be solved in #9965



---

archive/issue_comments_032724.json:
```json
{
    "body": "<a id='comment:4'>**Comment 4:**</a>\nqepcad failures\n\n```\nsage -t -long \"devel/sage/sage/interfaces/qepcad.py\"        \n**********************************************************************\nFile \"/opt/SAGE/sage/devel/sage/sage/interfaces/qepcad.py\", line 638:\n    sage: _rewrite_qepcadrc()\nException raised:\n    Traceback (most recent call last):\n      File \"/opt/SAGE/sage/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/opt/SAGE/sage/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/opt/SAGE/sage/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_3[3]>\", line 1, in <module>\n        _rewrite_qepcadrc()###line 638:\n    sage: _rewrite_qepcadrc()\n      File \"/opt/SAGE/sage/local/lib/python/site-packages/sage/interfaces/qepcad.py\", line 660, in _rewrite_qepcadrc\n        open(fn, 'w').write(text)\n    IOError: [Errno 13] Permission denied: '/opt/SAGE/sage/local//default.qepcadrc'\n**********************************************************************\nFile \"/opt/SAGE/sage/devel/sage/sage/interfaces/qepcad.py\", line 689:\n    sage: Qepcad_expect(memcells=100000, logfile=sys.stdout)\nException raised:\n    Traceback (most recent call last):\n      File \"/opt/SAGE/sage/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/opt/SAGE/sage/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/opt/SAGE/sage/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_6[3]>\", line 1, in <module>\n        Qepcad_expect(memcells=Integer(100000), logfile=sys.stdout)###line 689:\n    sage: Qepcad_expect(memcells=100000, logfile=sys.stdout)\n      File \"/opt/SAGE/sage/local/lib/python/site-packages/sage/interfaces/qepcad.py\", line 692, in __init__\n        _rewrite_qepcadrc()\n      File \"/opt/SAGE/sage/local/lib/python/site-packages/sage/interfaces/qepcad.py\", line 660, in _rewrite_qepcadrc\n        open(fn, 'w').write(text)\n    IOError: [Errno 13] Permission denied: '/opt/SAGE/sage/local//default.qepcadrc'\n**********************************************************************\n2 items had failures:\n   1 of   6 in __main__.example_3\n   1 of   4 in __main__.example_6\n***Test Failed*** 2 failures.\nFor whitespace errors, see the file /home/usuario/.sage//tmp/.doctest_qepcad.py\n         [1.9 s]\n```",
    "created_at": "2010-09-23T11:11:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32724",
    "user": "https://github.com/lftabera"
}
```

<a id='comment:4'>**Comment 4:**</a>
qepcad failures

```
sage -t -long "devel/sage/sage/interfaces/qepcad.py"        
**********************************************************************
File "/opt/SAGE/sage/devel/sage/sage/interfaces/qepcad.py", line 638:
    sage: _rewrite_qepcadrc()
Exception raised:
    Traceback (most recent call last):
      File "/opt/SAGE/sage/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/opt/SAGE/sage/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/opt/SAGE/sage/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_3[3]>", line 1, in <module>
        _rewrite_qepcadrc()###line 638:
    sage: _rewrite_qepcadrc()
      File "/opt/SAGE/sage/local/lib/python/site-packages/sage/interfaces/qepcad.py", line 660, in _rewrite_qepcadrc
        open(fn, 'w').write(text)
    IOError: [Errno 13] Permission denied: '/opt/SAGE/sage/local//default.qepcadrc'
**********************************************************************
File "/opt/SAGE/sage/devel/sage/sage/interfaces/qepcad.py", line 689:
    sage: Qepcad_expect(memcells=100000, logfile=sys.stdout)
Exception raised:
    Traceback (most recent call last):
      File "/opt/SAGE/sage/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/opt/SAGE/sage/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/opt/SAGE/sage/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_6[3]>", line 1, in <module>
        Qepcad_expect(memcells=Integer(100000), logfile=sys.stdout)###line 689:
    sage: Qepcad_expect(memcells=100000, logfile=sys.stdout)
      File "/opt/SAGE/sage/local/lib/python/site-packages/sage/interfaces/qepcad.py", line 692, in __init__
        _rewrite_qepcadrc()
      File "/opt/SAGE/sage/local/lib/python/site-packages/sage/interfaces/qepcad.py", line 660, in _rewrite_qepcadrc
        open(fn, 'w').write(text)
    IOError: [Errno 13] Permission denied: '/opt/SAGE/sage/local//default.qepcadrc'
**********************************************************************
2 items had failures:
   1 of   6 in __main__.example_3
   1 of   4 in __main__.example_6
***Test Failed*** 2 failures.
For whitespace errors, see the file /home/usuario/.sage//tmp/.doctest_qepcad.py
         [1.9 s]
```



---

archive/issue_events_049406.json:
```json
{
    "actor": "https://github.com/lftabera",
    "created_at": "2010-09-23T14:40:00Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "rename": {
        "from": "Sage 3.3.a3: fix doctests that want write access to $SAGE_LOCAL",
        "to": "Fix doctests and methods that want write access to $SAGE_LOCAL"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5155#event-49406"
}
```



---

archive/issue_comments_032725.json:
```json
{
    "body": "<a id='comment:5'>**Comment 5:**</a>\nAnother issue, if you compile sage but the very first access of sage is made by a user without write permissions, you get the following error:\n\n---\n| Sage Version 4.5.3, Release Date: 2010-09-04                       |\n| Type notebook() for the GUI, and license() for information.        |\n\n---\nTraceback (most recent call last):\n  File \"/opt/SAGE/sage-4.5.3/local/bin/sage-location\", line 174, in <module>\n    t, R = install_moved()\n  File \"/opt/SAGE/sage-4.5.3/local/bin/sage-location\", line 18, in install_moved\n    write_flags_file()\n  File \"/opt/SAGE/sage-4.5.3/local/bin/sage-location\", line 82, in write_flags_file\n    open(flags_file,'w').write(get_flags_info())\nIOError: [Errno 13] Permission denied: '/opt/SAGE/sage-4.5.3/local/lib/sage-flags.txt'",
    "created_at": "2010-09-23T14:40:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32725",
    "user": "https://github.com/lftabera"
}
```

<a id='comment:5'>**Comment 5:**</a>
Another issue, if you compile sage but the very first access of sage is made by a user without write permissions, you get the following error:

---
| Sage Version 4.5.3, Release Date: 2010-09-04                       |
| Type notebook() for the GUI, and license() for information.        |

---
Traceback (most recent call last):
  File "/opt/SAGE/sage-4.5.3/local/bin/sage-location", line 174, in <module>
    t, R = install_moved()
  File "/opt/SAGE/sage-4.5.3/local/bin/sage-location", line 18, in install_moved
    write_flags_file()
  File "/opt/SAGE/sage-4.5.3/local/bin/sage-location", line 82, in write_flags_file
    open(flags_file,'w').write(get_flags_info())
IOError: [Errno 13] Permission denied: '/opt/SAGE/sage-4.5.3/local/lib/sage-flags.txt'



---

archive/issue_comments_032726.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\nWith Sage 4.7.2.alpha2, I see problems with qepcad and sympow.  I think the qepcad problem should be easy to solve, basically as mhansen did before:\n\n```diff\ndiff --git a/sage/interfaces/qepcad.py b/sage/interfaces/qepcad.py\n--- a/sage/interfaces/qepcad.py\n+++ b/sage/interfaces/qepcad.py\n@@ -636,14 +636,14 @@ def _rewrite_qepcadrc():\n     EXAMPLES:\n         sage: from sage.interfaces.qepcad import _rewrite_qepcadrc\n         sage: _rewrite_qepcadrc()\n-        sage: from sage.misc.misc import SAGE_LOCAL\n-        sage: open('%s/default.qepcadrc'%SAGE_LOCAL).readlines()[-1]\n+        sage: from sage.misc.misc import DOT_SAGE\n+        sage: open('%s/default.qepcadrc'%DOT_SAGE).readlines()[-1]\n         'SINGULAR .../local//bin'\n     \"\"\"\n     global _rewrote_qepcadrc\n     if _rewrote_qepcadrc: return\n \n-    SL = sage.misc.misc.SAGE_LOCAL\n+    SL = sage.misc.misc.DOT_SAGE\n     fn = '%s/default.qepcadrc'%SL\n     text = \\\n \"\"\"# THIS FILE IS AUTOMATICALLY GENERATED -- DO NOT EDIT\n```\nSympow will be harder to deal with, because of how the spkg is written: it tries to write files to SAGE_LOCAL/lib/sympow.  See [https://github.com/sagemath/sage/issues/9703#comment:9](https://github.com/sagemath/sage/issues/9703#comment:9) for a possible fix.\n\nI'm attaching a patch to try to deal with the situation when you run Sage for the very first time as a user without write permissions.\n\nFinally, there may be other issues if you compile Sage but don't run it, and then run doctests as a user without write permissions (the first time doctests get run, they might write some files which don't need to be written later).  These issues should be fixed, too.",
    "created_at": "2011-09-12T23:53:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32726",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:6'>**Comment 6:**</a>
With Sage 4.7.2.alpha2, I see problems with qepcad and sympow.  I think the qepcad problem should be easy to solve, basically as mhansen did before:

```diff
diff --git a/sage/interfaces/qepcad.py b/sage/interfaces/qepcad.py
--- a/sage/interfaces/qepcad.py
+++ b/sage/interfaces/qepcad.py
@@ -636,14 +636,14 @@ def _rewrite_qepcadrc():
     EXAMPLES:
         sage: from sage.interfaces.qepcad import _rewrite_qepcadrc
         sage: _rewrite_qepcadrc()
-        sage: from sage.misc.misc import SAGE_LOCAL
-        sage: open('%s/default.qepcadrc'%SAGE_LOCAL).readlines()[-1]
+        sage: from sage.misc.misc import DOT_SAGE
+        sage: open('%s/default.qepcadrc'%DOT_SAGE).readlines()[-1]
         'SINGULAR .../local//bin'
     """
     global _rewrote_qepcadrc
     if _rewrote_qepcadrc: return
 
-    SL = sage.misc.misc.SAGE_LOCAL
+    SL = sage.misc.misc.DOT_SAGE
     fn = '%s/default.qepcadrc'%SL
     text = \
 """# THIS FILE IS AUTOMATICALLY GENERATED -- DO NOT EDIT
```
Sympow will be harder to deal with, because of how the spkg is written: it tries to write files to SAGE_LOCAL/lib/sympow.  See [https://github.com/sagemath/sage/issues/9703#comment:9](https://github.com/sagemath/sage/issues/9703#comment:9) for a possible fix.

I'm attaching a patch to try to deal with the situation when you run Sage for the very first time as a user without write permissions.

Finally, there may be other issues if you compile Sage but don't run it, and then run doctests as a user without write permissions (the first time doctests get run, they might write some files which don't need to be written later).  These issues should be fixed, too.



---

archive/issue_comments_032727.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\nI'm not sure this patch is a good idea or needed, considering #11926.  If the Sage install was moved, it is probably good to bail out with an error if there is no write access.",
    "created_at": "2011-10-17T12:05:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32727",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'>**Comment 7:**</a>
I'm not sure this patch is a good idea or needed, considering #11926.  If the Sage install was moved, it is probably good to bail out with an error if there is no write access.



---

archive/issue_comments_032728.json:
```json
{
    "body": "**Dependencies:** #11926",
    "created_at": "2011-10-17T12:24:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32728",
    "user": "https://github.com/jdemeyer"
}
```

**Dependencies:** #11926



---

archive/issue_comments_032729.json:
```json
{
    "body": "**Changing assignee** from mabshoff to @jdemeyer.",
    "created_at": "2011-10-17T12:24:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32729",
    "user": "https://github.com/jdemeyer"
}
```

**Changing assignee** from mabshoff to @jdemeyer.



---

archive/issue_comments_032730.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,9 +1,17 @@\n-All doctests in Sage should pass when they are run as a user that does not own the Sage tree. To do that set SAGE_TESTDIR to some place writable, i.e.\n+All doctests in Sage should pass when they are run as a user that does not have write access to the Sage install. To do that, set SAGE_TESTDIR to some place writable, for example\n \n ```\n-export SAGE_TESTDIR=/scratch/mabshoff/tmp\n+export SAGE_TESTDIR=$HOME/tmp\n ```\n-and run the doctests on a Sage install that isn't owned by the user. When doing so the following doctests fail:\n+and run the doctests on a Sage install that isn't owned by the user:\n+\n+```\n+$ ./sage -tp 6 devel/sage/doc/common devel/sage/doc/de devel/sage/doc/en devel/sage/doc/fr devel/sage/doc/ru devel/sage/sage\n+```\n+\n+Here, we assume that the owner of the Sage install has run Sage at least once (or has applied #11926) and has ran some doctest.\n+\n+On sage-4.7.2.alpha4, this causes the following failures:\n \n ```\n \tsage -t -long devel/sage/sage/matrix/matrix2.pyx # 1 doctests failed\n@@ -19,8 +27,4 @@\n \tsage -t -long devel/sage/sage/server/notebook/twist.py # 8 doctests failed\n \tsage -t -long devel/sage/sage/structure/sage_object.pyx # 6 doctests failed\n ```\n-This ticket might need to be split up since it covers a rather large number of doctest failures.\n \n-Cheers,\n-\n-Michael\n``````\n",
    "created_at": "2011-10-17T12:24:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32730",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,9 +1,17 @@
-All doctests in Sage should pass when they are run as a user that does not own the Sage tree. To do that set SAGE_TESTDIR to some place writable, i.e.
+All doctests in Sage should pass when they are run as a user that does not have write access to the Sage install. To do that, set SAGE_TESTDIR to some place writable, for example
 
 ```
-export SAGE_TESTDIR=/scratch/mabshoff/tmp
+export SAGE_TESTDIR=$HOME/tmp
 ```
-and run the doctests on a Sage install that isn't owned by the user. When doing so the following doctests fail:
+and run the doctests on a Sage install that isn't owned by the user:
+
+```
+$ ./sage -tp 6 devel/sage/doc/common devel/sage/doc/de devel/sage/doc/en devel/sage/doc/fr devel/sage/doc/ru devel/sage/sage
+```
+
+Here, we assume that the owner of the Sage install has run Sage at least once (or has applied #11926) and has ran some doctest.
+
+On sage-4.7.2.alpha4, this causes the following failures:
 
 ```
 	sage -t -long devel/sage/sage/matrix/matrix2.pyx # 1 doctests failed
@@ -19,8 +27,4 @@
 	sage -t -long devel/sage/sage/server/notebook/twist.py # 8 doctests failed
 	sage -t -long devel/sage/sage/structure/sage_object.pyx # 6 doctests failed
 ```
-This ticket might need to be split up since it covers a rather large number of doctest failures.
 
-Cheers,
-
-Michael
``````




---

archive/issue_comments_032731.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,25 +6,20 @@\n and run the doctests on a Sage install that isn't owned by the user:\n \n ```\n-$ ./sage -tp 6 devel/sage/doc/common devel/sage/doc/de devel/sage/doc/en devel/sage/doc/fr devel/sage/doc/ru devel/sage/sage\n+$ ./sage -tp 4 -long devel/sage/doc/common devel/sage/doc/de devel/sage/doc/en devel/sage/doc/fr devel/sage/doc/ru devel/sage/sage\n ```\n \n Here, we assume that the owner of the Sage install has run Sage at least once (or has applied #11926) and has ran some doctest.\n \n-On sage-4.7.2.alpha4, this causes the following failures:\n+On sage-4.7.2.alpha4, this causes:\n \n ```\n-\tsage -t -long devel/sage/sage/matrix/matrix2.pyx # 1 doctests failed\n-\tsage -t -long devel/doc/tut/tut.tex # 5 doctests failed\n-\tsage -t -long devel/sage/sage/interfaces/qepcad.py # 2 doctests failed\n-\tsage -t -long devel/sage/sage/plot/plot.py # 6 doctests failed\n-\tsage -t -long devel/sage/sage/databases/database.py # 1 doctests failed\n-\tsage -t -long devel/sage/sage/calculus/calculus.py # 1 doctests failed\n-\tsage -t -long devel/sage/sage/misc/package.py # 1 doctests failed\n-\tsage -t -long devel/sage/sage/gsl/ode.pyx # 4 doctests failed\n-\tsage -t -long devel/sage/sage/server/support.py # 1 doctests failed\n-\tsage -t -long devel/sage/sage/server/notebook/notebook.py # 1 doctests failed\n-\tsage -t -long devel/sage/sage/server/notebook/twist.py # 8 doctests failed\n-\tsage -t -long devel/sage/sage/structure/sage_object.pyx # 6 doctests failed\n+The following tests failed:\n+\n+        sage -t  devel/sage/sage/modular/hecke/submodule.py # 1 doctests failed\n+        sage -t  devel/sage/sage/modular/abvar/abvar.py # 1 doctests failed\n+        sage -t  devel/sage/sage/lfunctions/sympow.py # 10 doctests failed\n+        sage -t  devel/sage/sage/interfaces/qepcad.py # 3 doctests failed\n+        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 16 doctests failed\n ```\n \n``````\n",
    "created_at": "2011-10-17T12:28:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32731",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,25 +6,20 @@
 and run the doctests on a Sage install that isn't owned by the user:
 
 ```
-$ ./sage -tp 6 devel/sage/doc/common devel/sage/doc/de devel/sage/doc/en devel/sage/doc/fr devel/sage/doc/ru devel/sage/sage
+$ ./sage -tp 4 -long devel/sage/doc/common devel/sage/doc/de devel/sage/doc/en devel/sage/doc/fr devel/sage/doc/ru devel/sage/sage
 ```
 
 Here, we assume that the owner of the Sage install has run Sage at least once (or has applied #11926) and has ran some doctest.
 
-On sage-4.7.2.alpha4, this causes the following failures:
+On sage-4.7.2.alpha4, this causes:
 
 ```
-	sage -t -long devel/sage/sage/matrix/matrix2.pyx # 1 doctests failed
-	sage -t -long devel/doc/tut/tut.tex # 5 doctests failed
-	sage -t -long devel/sage/sage/interfaces/qepcad.py # 2 doctests failed
-	sage -t -long devel/sage/sage/plot/plot.py # 6 doctests failed
-	sage -t -long devel/sage/sage/databases/database.py # 1 doctests failed
-	sage -t -long devel/sage/sage/calculus/calculus.py # 1 doctests failed
-	sage -t -long devel/sage/sage/misc/package.py # 1 doctests failed
-	sage -t -long devel/sage/sage/gsl/ode.pyx # 4 doctests failed
-	sage -t -long devel/sage/sage/server/support.py # 1 doctests failed
-	sage -t -long devel/sage/sage/server/notebook/notebook.py # 1 doctests failed
-	sage -t -long devel/sage/sage/server/notebook/twist.py # 8 doctests failed
-	sage -t -long devel/sage/sage/structure/sage_object.pyx # 6 doctests failed
+The following tests failed:
+
+        sage -t  devel/sage/sage/modular/hecke/submodule.py # 1 doctests failed
+        sage -t  devel/sage/sage/modular/abvar/abvar.py # 1 doctests failed
+        sage -t  devel/sage/sage/lfunctions/sympow.py # 10 doctests failed
+        sage -t  devel/sage/sage/interfaces/qepcad.py # 3 doctests failed
+        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 16 doctests failed
 ```
 
``````




---

archive/issue_comments_032732.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -9,7 +9,7 @@\n $ ./sage -tp 4 -long devel/sage/doc/common devel/sage/doc/de devel/sage/doc/en devel/sage/doc/fr devel/sage/doc/ru devel/sage/sage\n ```\n \n-Here, we assume that the owner of the Sage install has run Sage at least once (or has applied #11926) and has ran some doctest.\n+Here, we assume that the owner of the Sage install has run Sage at least once (or has applied #11926).\n \n On sage-4.7.2.alpha4, this causes:\n \n``````\n",
    "created_at": "2011-10-17T12:32:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32732",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -9,7 +9,7 @@
 $ ./sage -tp 4 -long devel/sage/doc/common devel/sage/doc/de devel/sage/doc/en devel/sage/doc/fr devel/sage/doc/ru devel/sage/sage
 ```
 
-Here, we assume that the owner of the Sage install has run Sage at least once (or has applied #11926) and has ran some doctest.
+Here, we assume that the owner of the Sage install has run Sage at least once (or has applied #11926).
 
 On sage-4.7.2.alpha4, this causes:
 
``````




---

archive/issue_comments_032733.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -23,3 +23,6 @@\n         sage -t  devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 16 doctests failed\n ```\n \n+This seems to be because of:\n+1. Installing an rc file for the **experimental package** qepcad (in a very odd location `$SAGE_ROOT/local/default.qepcadrc`)\n+2. Sympow which needs to create datafiles.  This should probably be done in sympow's `spkg-install` instead.\n``````\n",
    "created_at": "2011-10-17T12:43:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32733",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -23,3 +23,6 @@
         sage -t  devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 16 doctests failed
 ```
 
+This seems to be because of:
+1. Installing an rc file for the **experimental package** qepcad (in a very odd location `$SAGE_ROOT/local/default.qepcadrc`)
+2. Sympow which needs to create datafiles.  This should probably be done in sympow's `spkg-install` instead.
``````




---

archive/issue_comments_032734.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -16,11 +16,12 @@\n ```\n The following tests failed:\n \n-        sage -t  devel/sage/sage/modular/hecke/submodule.py # 1 doctests failed\n-        sage -t  devel/sage/sage/modular/abvar/abvar.py # 1 doctests failed\n-        sage -t  devel/sage/sage/lfunctions/sympow.py # 10 doctests failed\n-        sage -t  devel/sage/sage/interfaces/qepcad.py # 3 doctests failed\n-        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 16 doctests failed\n+        sage -t -long devel/sage/sage/modular/hecke/submodule.py # 1 doctests failed\n+        sage -t -long devel/sage/sage/modular/abvar/abvar.py # 1 doctests failed\n+        sage -t -long devel/sage/sage/lfunctions/sympow.py # 13 doctests failed\n+        sage -t -long devel/sage/sage/interfaces/qepcad.py # 3 doctests failed\n+        sage -t -long devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 17 doctests failed\n+\n ```\n \n This seems to be because of:\n``````\n",
    "created_at": "2011-10-17T13:29:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32734",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -16,11 +16,12 @@
 ```
 The following tests failed:
 
-        sage -t  devel/sage/sage/modular/hecke/submodule.py # 1 doctests failed
-        sage -t  devel/sage/sage/modular/abvar/abvar.py # 1 doctests failed
-        sage -t  devel/sage/sage/lfunctions/sympow.py # 10 doctests failed
-        sage -t  devel/sage/sage/interfaces/qepcad.py # 3 doctests failed
-        sage -t  devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 16 doctests failed
+        sage -t -long devel/sage/sage/modular/hecke/submodule.py # 1 doctests failed
+        sage -t -long devel/sage/sage/modular/abvar/abvar.py # 1 doctests failed
+        sage -t -long devel/sage/sage/lfunctions/sympow.py # 13 doctests failed
+        sage -t -long devel/sage/sage/interfaces/qepcad.py # 3 doctests failed
+        sage -t -long devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 17 doctests failed
+
 ```
 
 This seems to be because of:
``````




---

archive/issue_events_049407.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-17T16:09:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20doctest%20coverage",
    "label_color": "08517b",
    "label_name": "component: doctest coverage",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5155#event-49407"
}
```



---

archive/issue_events_049408.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-17T16:09:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20scripts",
    "label_color": "08517b",
    "label_name": "component: scripts",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5155#event-49408"
}
```



---

archive/issue_comments_032735.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -27,3 +27,7 @@\n This seems to be because of:\n 1. Installing an rc file for the **experimental package** qepcad (in a very odd location `$SAGE_ROOT/local/default.qepcadrc`)\n 2. Sympow which needs to create datafiles.  This should probably be done in sympow's `spkg-install` instead.\n+\n+**Apply**:\n+1. [attachment:5155_scripts.patch](https://github.com/sagemath/sage/files/ticket5155/5155_scripts.patch) to the scripts repository.\n+2. [attachment:5155_qepcad.patch](https://github.com/sagemath/sage/files/ticket5155/5155_qepcad.patch) to the Sage library.\n``````\n",
    "created_at": "2011-10-17T16:09:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32735",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -27,3 +27,7 @@
 This seems to be because of:
 1. Installing an rc file for the **experimental package** qepcad (in a very odd location `$SAGE_ROOT/local/default.qepcadrc`)
 2. Sympow which needs to create datafiles.  This should probably be done in sympow's `spkg-install` instead.
+
+**Apply**:
+1. [attachment:5155_scripts.patch](https://github.com/sagemath/sage/files/ticket5155/5155_scripts.patch) to the scripts repository.
+2. [attachment:5155_qepcad.patch](https://github.com/sagemath/sage/files/ticket5155/5155_qepcad.patch) to the Sage library.
``````




---

archive/issue_events_049409.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-17T16:09:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "milestone_number": null,
    "milestone_title": "sage-4.7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5155#event-49409"
}
```



---

archive/issue_events_049410.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-17T16:09:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "milestone_number": null,
    "milestone_title": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5155#event-49410"
}
```



---

archive/issue_comments_032736.json:
```json
{
    "body": "<a id='comment:14'>**Comment 14:**</a>\nA few quick comments:\n\n- you have a typo in line 93, \"eyactly\"\n- on line 583, `# optional - qepcad, note \"algeraic\" [sic]`, this is not the way to format an optional doctest: it will only run if you do \"sage -t -optional-only=qepcad,not,algeraic,sic\" or something like that.\n- same on line 1220\n\nFor the scripts patch:\n\n- why not apply os.path.abspath to SAGE_ROOT?",
    "created_at": "2011-10-17T16:53:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32736",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:14'>**Comment 14:**</a>
A few quick comments:

- you have a typo in line 93, "eyactly"
- on line 583, `# optional - qepcad, note "algeraic" [sic]`, this is not the way to format an optional doctest: it will only run if you do "sage -t -optional-only=qepcad,not,algeraic,sic" or something like that.
- same on line 1220

For the scripts patch:

- why not apply os.path.abspath to SAGE_ROOT?



---

archive/issue_comments_032737.json:
```json
{
    "body": "<a id='comment:15'>**Comment 15:**</a>\nReplying to [@jhpalmieri](#comment%3A14):\n> A few quick comments:\n> \n> - you have a typo in line 93, \"eyactly\"\n\nNo idea how that happened...\n\n> - on line 583, `# optional - qepcad, note \"algeraic\" [sic]`, this is not the way to format an optional doctest: it will only run if you do \"sage -t -optional-only=qepcad,not,algeraic,sic\" or something like that.\n\nVery true, thanks!\n\n> For the scripts patch:\n> \n> - why not apply os.path.abspath to SAGE_ROOT?\n\nBecause `SAGE_ROOT` is already canonicalized by `realpath` at the top of that file:\n\n```\nSAGE_ROOT     = os.path.realpath(os.environ['SAGE_ROOT'])\n```",
    "created_at": "2011-10-17T18:47:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32737",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'>**Comment 15:**</a>
Replying to [@jhpalmieri](#comment%3A14):
> A few quick comments:
> 
> - you have a typo in line 93, "eyactly"

No idea how that happened...

> - on line 583, `# optional - qepcad, note "algeraic" [sic]`, this is not the way to format an optional doctest: it will only run if you do "sage -t -optional-only=qepcad,not,algeraic,sic" or something like that.

Very true, thanks!

> For the scripts patch:
> 
> - why not apply os.path.abspath to SAGE_ROOT?

Because `SAGE_ROOT` is already canonicalized by `realpath` at the top of that file:

```
SAGE_ROOT     = os.path.realpath(os.environ['SAGE_ROOT'])
```



---

archive/issue_comments_032738.json:
```json
{
    "body": "**Changing dependencies** from \"#11926\" to \"#11926, #11933\".",
    "created_at": "2011-10-17T18:54:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32738",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#11926" to "#11926, #11933".



---

archive/issue_comments_032739.json:
```json
{
    "body": "<a id='comment:17'>**Comment 17:**</a>\nMoved the \"clean up\" part of the qepcad patch to #11933.",
    "created_at": "2011-10-17T18:55:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32739",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'>**Comment 17:**</a>
Moved the "clean up" part of the qepcad patch to #11933.



---

archive/issue_comments_032740.json:
```json
{
    "body": "**Changing dependencies** from \"#11926, #11933\" to \"#11920, #11926, #11933\".",
    "created_at": "2011-10-17T19:00:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32740",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#11926, #11933" to "#11920, #11926, #11933".



---

archive/issue_comments_032741.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -26,7 +26,7 @@\n \n This seems to be because of:\n 1. Installing an rc file for the **experimental package** qepcad (in a very odd location `$SAGE_ROOT/local/default.qepcadrc`)\n-2. Sympow which needs to create datafiles.  This should probably be done in sympow's `spkg-install` instead.\n+2. Sympow which needs to create datafiles.  This should probably be done in sympow's `spkg-install` instead.  See #11920.\n \n **Apply**:\n 1. [attachment:5155_scripts.patch](https://github.com/sagemath/sage/files/ticket5155/5155_scripts.patch) to the scripts repository.\n``````\n",
    "created_at": "2011-10-17T19:00:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32741",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -26,7 +26,7 @@
 
 This seems to be because of:
 1. Installing an rc file for the **experimental package** qepcad (in a very odd location `$SAGE_ROOT/local/default.qepcadrc`)
-2. Sympow which needs to create datafiles.  This should probably be done in sympow's `spkg-install` instead.
+2. Sympow which needs to create datafiles.  This should probably be done in sympow's `spkg-install` instead.  See #11920.
 
 **Apply**:
 1. [attachment:5155_scripts.patch](https://github.com/sagemath/sage/files/ticket5155/5155_scripts.patch) to the scripts repository.
``````




---

archive/issue_comments_032742.json:
```json
{
    "body": "<a id='comment:19'>**Comment 19:**</a>\nFor the scripts patch: should there be any error checking when writing to files?  If a sysadmin installs Sage, runs it once (to generate the appropriate files) and then moves it but doesn't run it again, it would be nice if other users got helpful error messages.  One issue is the code\n\n```\n    check_processor_flags()\n    # Note: install_moved() may also run e.g. initialize_pkgconfig_files().\n    if install_moved():\n        print \"The Sage installation tree may have moved\"\n        print \"(from %s to %s).\" % (OLD_SAGE_ROOT, SAGE_ROOT)\n```\nThe problem is that `check_processor_flags` and `install_moved` already try to write to files, so if permissions are bad, the message about the installation tree may not get printed.  I'm attaching a patch to apply on top of yours (basically wraps everything in a try...except block).\n\nAlso, as discussed at #11760, the alternate implementation (commented out) of searching for SAGE_ROOT using regular expressions was slower than the one currently used, so I just deleted the comments altogether.\n\nI'll keep looking at your patch.",
    "created_at": "2011-10-17T21:01:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32742",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:19'>**Comment 19:**</a>
For the scripts patch: should there be any error checking when writing to files?  If a sysadmin installs Sage, runs it once (to generate the appropriate files) and then moves it but doesn't run it again, it would be nice if other users got helpful error messages.  One issue is the code

```
    check_processor_flags()
    # Note: install_moved() may also run e.g. initialize_pkgconfig_files().
    if install_moved():
        print "The Sage installation tree may have moved"
        print "(from %s to %s)." % (OLD_SAGE_ROOT, SAGE_ROOT)
```
The problem is that `check_processor_flags` and `install_moved` already try to write to files, so if permissions are bad, the message about the installation tree may not get printed.  I'm attaching a patch to apply on top of yours (basically wraps everything in a try...except block).

Also, as discussed at #11760, the alternate implementation (commented out) of searching for SAGE_ROOT using regular expressions was slower than the one currently used, so I just deleted the comments altogether.

I'll keep looking at your patch.



---

archive/issue_comments_032743.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -29,5 +29,5 @@\n 2. Sympow which needs to create datafiles.  This should probably be done in sympow's `spkg-install` instead.  See #11920.\n \n **Apply**:\n-1. [attachment:5155_scripts.patch](https://github.com/sagemath/sage/files/ticket5155/5155_scripts.patch) to the scripts repository.\n+1. [[attachment:trac_5155-permissions.patch](https://github.com/sagemath/sage/files/ticket5155/af21863da5d0cbfd2ced81ed3280d4be.patch](https://github.com/sagemath/sage/files/ticket5155/615084222970ec8326e255f0fde34f0c.patch),) to the scripts repository.\n 2. [attachment:5155_qepcad.patch](https://github.com/sagemath/sage/files/ticket5155/5155_qepcad.patch) to the Sage library.\n``````\n",
    "created_at": "2011-10-17T21:01:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32743",
    "user": "https://github.com/jhpalmieri"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -29,5 +29,5 @@
 2. Sympow which needs to create datafiles.  This should probably be done in sympow's `spkg-install` instead.  See #11920.
 
 **Apply**:
-1. [attachment:5155_scripts.patch](https://github.com/sagemath/sage/files/ticket5155/5155_scripts.patch) to the scripts repository.
+1. [[attachment:trac_5155-permissions.patch](https://github.com/sagemath/sage/files/ticket5155/af21863da5d0cbfd2ced81ed3280d4be.patch](https://github.com/sagemath/sage/files/ticket5155/615084222970ec8326e255f0fde34f0c.patch),) to the scripts repository.
 2. [attachment:5155_qepcad.patch](https://github.com/sagemath/sage/files/ticket5155/5155_qepcad.patch) to the Sage library.
``````




---

archive/issue_comments_032744.json:
```json
{
    "body": "<a id='comment:20'>**Comment 20:**</a>\nJohn, you are assuming a failure means that there was a problem was permissions.  We should probably catch `IOError` (and also `OSError` perhaps?) and print the message which came with the exception.",
    "created_at": "2011-10-18T10:26:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32744",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:20'>**Comment 20:**</a>
John, you are assuming a failure means that there was a problem was permissions.  We should probably catch `IOError` (and also `OSError` perhaps?) and print the message which came with the exception.



---

archive/issue_comments_032745.json:
```json
{
    "body": "<a id='comment:21'>**Comment 21:**</a>\nReplying to [@jdemeyer](#comment%3A20):\n> John, you are assuming a failure means that there was a problem was permissions.  We should probably catch `IOError` (and also `OSError` perhaps?) and print the message which came with the exception.\n\nI think that a permissions problem is the most likely issue.  I've modified the patch a bit: if it looks like bad permissions, print a friendly error message.  If it's an `IOError` unrelated to permissions, explicitly raise the error.  If it's some other kind of error, don't catch it at all, so it should get raised, too.  You can test this by changing my patch: change the line\n\n```\nif e.strerror.find('Permission denied') != -1:\n```\nby changing `!=` to `==`, or on the previous line, change `IOError` to `ValueError` or something else irrelevant.  Move sage and make the directory unwriteable; then when you run sage, you should see the raw error message.",
    "created_at": "2011-10-19T02:36:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32745",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:21'>**Comment 21:**</a>
Replying to [@jdemeyer](#comment%3A20):
> John, you are assuming a failure means that there was a problem was permissions.  We should probably catch `IOError` (and also `OSError` perhaps?) and print the message which came with the exception.

I think that a permissions problem is the most likely issue.  I've modified the patch a bit: if it looks like bad permissions, print a friendly error message.  If it's an `IOError` unrelated to permissions, explicitly raise the error.  If it's some other kind of error, don't catch it at all, so it should get raised, too.  You can test this by changing my patch: change the line

```
if e.strerror.find('Permission denied') != -1:
```
by changing `!=` to `==`, or on the previous line, change `IOError` to `ValueError` or something else irrelevant.  Move sage and make the directory unwriteable; then when you run sage, you should see the raw error message.



---

archive/issue_comments_032746.json:
```json
{
    "body": "<a id='comment:22'>**Comment 22:**</a>\nJohn, your patch looks good on first glance.",
    "created_at": "2011-10-19T07:08:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32746",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:22'>**Comment 22:**</a>
John, your patch looks good on first glance.



---

archive/issue_comments_032747.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -26,7 +26,7 @@\n \n This seems to be because of:\n 1. Installing an rc file for the **experimental package** qepcad (in a very odd location `$SAGE_ROOT/local/default.qepcadrc`)\n-2. Sympow which needs to create datafiles.  This should probably be done in sympow's `spkg-install` instead.  See #11920.\n+2. Sympow which needs to create datafiles.  This should probably be done in sympow's `spkg-install` instead.  This is dealt with at #11920.\n \n **Apply**:\n 1. [[attachment:trac_5155-permissions.patch](https://github.com/sagemath/sage/files/ticket5155/af21863da5d0cbfd2ced81ed3280d4be.patch](https://github.com/sagemath/sage/files/ticket5155/615084222970ec8326e255f0fde34f0c.patch),) to the scripts repository.\n``````\n",
    "created_at": "2011-10-19T21:09:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32747",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -26,7 +26,7 @@
 
 This seems to be because of:
 1. Installing an rc file for the **experimental package** qepcad (in a very odd location `$SAGE_ROOT/local/default.qepcadrc`)
-2. Sympow which needs to create datafiles.  This should probably be done in sympow's `spkg-install` instead.  See #11920.
+2. Sympow which needs to create datafiles.  This should probably be done in sympow's `spkg-install` instead.  This is dealt with at #11920.
 
 **Apply**:
 1. [[attachment:trac_5155-permissions.patch](https://github.com/sagemath/sage/files/ticket5155/af21863da5d0cbfd2ced81ed3280d4be.patch](https://github.com/sagemath/sage/files/ticket5155/615084222970ec8326e255f0fde34f0c.patch),) to the scripts repository.
``````




---

archive/issue_comments_032748.json:
```json
{
    "body": "<a id='comment:23'>**Comment 23:**</a>\n#11920 (sympow) needs review.",
    "created_at": "2011-10-19T21:09:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32748",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:23'>**Comment 23:**</a>
#11920 (sympow) needs review.



---

archive/issue_events_049411.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-29T18:33:58Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "rename": {
        "from": "Fix doctests and methods that want write access to $SAGE_LOCAL",
        "to": "Fix doctests that want write access to $SAGE_ROOT"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5155#event-49411"
}
```



---

archive/issue_comments_032749.json:
```json
{
    "body": "<a id='comment:25'>**Comment 25:**</a>\nI plan to come back to this once the dependencies are settled.  Otherwise I would just be rebasing pointlessly.",
    "created_at": "2011-10-30T20:30:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32749",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:25'>**Comment 25:**</a>
I plan to come back to this once the dependencies are settled.  Otherwise I would just be rebasing pointlessly.



---

archive/issue_events_049412.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-11-03T16:14:43Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "milestone_number": null,
    "milestone_title": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5155#event-49412"
}
```



---

archive/issue_comments_032750.json:
```json
{
    "body": "Milestone sage-4.7.3 deleted",
    "created_at": "2011-11-03T16:14:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32750",
    "user": "https://github.com/jdemeyer"
}
```

Milestone sage-4.7.3 deleted



---

archive/issue_comments_032751.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,9 +1,4 @@\n-All doctests in Sage should pass when they are run as a user that does not have write access to the Sage install. To do that, set SAGE_TESTDIR to some place writable, for example\n-\n-```\n-export SAGE_TESTDIR=$HOME/tmp\n-```\n-and run the doctests on a Sage install that isn't owned by the user:\n+All doctests in Sage should pass when they are run as a user that does not have write access to the Sage install. To do that, run the doctests on a Sage install that isn't owned by the user:\n \n ```\n $ ./sage -tp 4 -long devel/sage/doc/common devel/sage/doc/de devel/sage/doc/en devel/sage/doc/fr devel/sage/doc/ru devel/sage/sage\n``````\n",
    "created_at": "2011-12-06T21:32:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32751",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,9 +1,4 @@
-All doctests in Sage should pass when they are run as a user that does not have write access to the Sage install. To do that, set SAGE_TESTDIR to some place writable, for example
-
-```
-export SAGE_TESTDIR=$HOME/tmp
-```
-and run the doctests on a Sage install that isn't owned by the user:
+All doctests in Sage should pass when they are run as a user that does not have write access to the Sage install. To do that, run the doctests on a Sage install that isn't owned by the user:
 
 ```
 $ ./sage -tp 4 -long devel/sage/doc/common devel/sage/doc/de devel/sage/doc/en devel/sage/doc/fr devel/sage/doc/ru devel/sage/sage
``````




---

archive/issue_events_049413.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-06T21:32:31Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "milestone_number": null,
    "milestone_title": "sage-4.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5155#event-49413"
}
```



---

archive/issue_comments_032752.json:
```json
{
    "body": "**Changing dependencies** from \"#11920, #11926, #11933\" to \"#11920, #11926, #11933, #13452\".",
    "created_at": "2012-09-13T12:35:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32752",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#11920, #11926, #11933" to "#11920, #11926, #11933, #13452".



---

archive/issue_comments_032753.json:
```json
{
    "body": "**Changing author** from \"Mike Hansen\" to \"Mike Hansen, Jeroen Demeyer, John Palmieri\".",
    "created_at": "2012-09-13T12:35:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32753",
    "user": "https://github.com/jdemeyer"
}
```

**Changing author** from "Mike Hansen" to "Mike Hansen, Jeroen Demeyer, John Palmieri".



---

archive/issue_comments_032754.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -24,5 +24,6 @@\n 2. Sympow which needs to create datafiles.  This should probably be done in sympow's `spkg-install` instead.  This is dealt with at #11920.\n \n **Apply**:\n-1. [[attachment:trac_5155-permissions.patch](https://github.com/sagemath/sage/files/ticket5155/af21863da5d0cbfd2ced81ed3280d4be.patch](https://github.com/sagemath/sage/files/ticket5155/615084222970ec8326e255f0fde34f0c.patch),) to the scripts repository.\n-2. [attachment:5155_qepcad.patch](https://github.com/sagemath/sage/files/ticket5155/5155_qepcad.patch) to the Sage library.\n+1. [[attachment:trac_5155-permissions.patch](https://github.com/sagemath/sage/files/ticket5155/150b3a1d488eee604470814184ef242d.patch](https://github.com/sagemath/sage/files/ticket5155/3cedb49e428880ee09e4cf9a43873453.patch),) to the scripts repository.\n+2. [attachment:5155_root.patch](https://github.com/sagemath/sage/files/ticket5155/5155_root.patch) to the `SAGE_ROOT` repository.\n+3. [attachment:5155_qepcad.patch](https://github.com/sagemath/sage/files/ticket5155/5155_qepcad.patch) to the Sage library.\n``````\n",
    "created_at": "2012-09-13T12:39:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32754",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -24,5 +24,6 @@
 2. Sympow which needs to create datafiles.  This should probably be done in sympow's `spkg-install` instead.  This is dealt with at #11920.
 
 **Apply**:
-1. [[attachment:trac_5155-permissions.patch](https://github.com/sagemath/sage/files/ticket5155/af21863da5d0cbfd2ced81ed3280d4be.patch](https://github.com/sagemath/sage/files/ticket5155/615084222970ec8326e255f0fde34f0c.patch),) to the scripts repository.
-2. [attachment:5155_qepcad.patch](https://github.com/sagemath/sage/files/ticket5155/5155_qepcad.patch) to the Sage library.
+1. [[attachment:trac_5155-permissions.patch](https://github.com/sagemath/sage/files/ticket5155/150b3a1d488eee604470814184ef242d.patch](https://github.com/sagemath/sage/files/ticket5155/3cedb49e428880ee09e4cf9a43873453.patch),) to the scripts repository.
+2. [attachment:5155_root.patch](https://github.com/sagemath/sage/files/ticket5155/5155_root.patch) to the `SAGE_ROOT` repository.
+3. [attachment:5155_qepcad.patch](https://github.com/sagemath/sage/files/ticket5155/5155_qepcad.patch) to the Sage library.
``````




---

archive/issue_comments_032755.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -24,6 +24,6 @@\n 2. Sympow which needs to create datafiles.  This should probably be done in sympow's `spkg-install` instead.  This is dealt with at #11920.\n \n **Apply**:\n-1. [[attachment:trac_5155-permissions.patch](https://github.com/sagemath/sage/files/ticket5155/150b3a1d488eee604470814184ef242d.patch](https://github.com/sagemath/sage/files/ticket5155/3cedb49e428880ee09e4cf9a43873453.patch),) to the scripts repository.\n+1. [attachment:5155_sage_location.patch](https://github.com/sagemath/sage/files/ticket5155/5155_sage_location.patch) to the scripts repository.\n 2. [attachment:5155_root.patch](https://github.com/sagemath/sage/files/ticket5155/5155_root.patch) to the `SAGE_ROOT` repository.\n 3. [attachment:5155_qepcad.patch](https://github.com/sagemath/sage/files/ticket5155/5155_qepcad.patch) to the Sage library.\n``````\n",
    "created_at": "2012-09-13T13:13:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32755",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -24,6 +24,6 @@
 2. Sympow which needs to create datafiles.  This should probably be done in sympow's `spkg-install` instead.  This is dealt with at #11920.
 
 **Apply**:
-1. [[attachment:trac_5155-permissions.patch](https://github.com/sagemath/sage/files/ticket5155/150b3a1d488eee604470814184ef242d.patch](https://github.com/sagemath/sage/files/ticket5155/3cedb49e428880ee09e4cf9a43873453.patch),) to the scripts repository.
+1. [attachment:5155_sage_location.patch](https://github.com/sagemath/sage/files/ticket5155/5155_sage_location.patch) to the scripts repository.
 2. [attachment:5155_root.patch](https://github.com/sagemath/sage/files/ticket5155/5155_root.patch) to the `SAGE_ROOT` repository.
 3. [attachment:5155_qepcad.patch](https://github.com/sagemath/sage/files/ticket5155/5155_qepcad.patch) to the Sage library.
``````




---

archive/issue_comments_032756.json:
```json
{
    "body": "**Changing dependencies** from \"#11920, #11926, #11933, #13452\" to \"#11920, #11926, #11933, #13397, #13452\".",
    "created_at": "2012-09-13T13:16:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32756",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#11920, #11926, #11933, #13452" to "#11920, #11926, #11933, #13397, #13452".



---

archive/issue_comments_032757.json:
```json
{
    "body": "**Changing dependencies** from \"#11920, #11926, #11933, #13397, #13452\" to \"#11920, #11926, #11933, #13397, #13452, #13459\".",
    "created_at": "2012-09-13T13:52:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32757",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#11920, #11926, #11933, #13397, #13452" to "#11920, #11926, #11933, #13397, #13452, #13459".



---

archive/issue_comments_032758.json:
```json
{
    "body": "**Changing dependencies** from \"#11920, #11926, #11933, #13397, #13452, #13459\" to \"#11920, #11926, #11933, #13397, #13452, #13459, #13457, #13123\".",
    "created_at": "2012-09-13T18:52:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32758",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#11920, #11926, #11933, #13397, #13452, #13459" to "#11920, #11926, #11933, #13397, #13452, #13459, #13457, #13123".



---

archive/issue_comments_032759.json:
```json
{
    "body": "**Changing dependencies** from \"#11920, #11926, #11933, #13397, #13452, #13459, #13457, #13123\" to \"#13157, #13397, #13452, #13459, #13457, #13123\".",
    "created_at": "2012-09-13T20:04:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32759",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#11920, #11926, #11933, #13397, #13452, #13459, #13457, #13123" to "#13157, #13397, #13452, #13459, #13457, #13123".



---

archive/issue_comments_032760.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -26,4 +26,4 @@\n **Apply**:\n 1. [attachment:5155_sage_location.patch](https://github.com/sagemath/sage/files/ticket5155/5155_sage_location.patch) to the scripts repository.\n 2. [attachment:5155_root.patch](https://github.com/sagemath/sage/files/ticket5155/5155_root.patch) to the `SAGE_ROOT` repository.\n-3. [attachment:5155_qepcad.patch](https://github.com/sagemath/sage/files/ticket5155/5155_qepcad.patch) to the Sage library.\n+3. [and [attachment:5155_fortran.patch](https://github.com/sagemath/sage/files/ticket5155/1d79b552318db57f7c5789a7eebc4232.patch](https://github.com/sagemath/sage/files/ticket5155/960bc1b25d4921bf3ddc5fec50796cbf.patch)) to the Sage library.\n``````\n",
    "created_at": "2012-09-13T20:45:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32760",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -26,4 +26,4 @@
 **Apply**:
 1. [attachment:5155_sage_location.patch](https://github.com/sagemath/sage/files/ticket5155/5155_sage_location.patch) to the scripts repository.
 2. [attachment:5155_root.patch](https://github.com/sagemath/sage/files/ticket5155/5155_root.patch) to the `SAGE_ROOT` repository.
-3. [attachment:5155_qepcad.patch](https://github.com/sagemath/sage/files/ticket5155/5155_qepcad.patch) to the Sage library.
+3. [and [attachment:5155_fortran.patch](https://github.com/sagemath/sage/files/ticket5155/1d79b552318db57f7c5789a7eebc4232.patch](https://github.com/sagemath/sage/files/ticket5155/960bc1b25d4921bf3ddc5fec50796cbf.patch)) to the Sage library.
``````




---

archive/issue_comments_032761.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,27 +1,18 @@\n All doctests in Sage should pass when they are run as a user that does not have write access to the Sage install. To do that, run the doctests on a Sage install that isn't owned by the user:\n \n ```\n-$ ./sage -tp 4 -long devel/sage/doc/common devel/sage/doc/de devel/sage/doc/en devel/sage/doc/fr devel/sage/doc/ru devel/sage/sage\n+$ ./sage -tp 4 --long devel/sage/doc/common devel/sage/doc/en devel/sage/sage\n ```\n \n-Here, we assume that the owner of the Sage install has run Sage at least once (or has applied #11926).\n-\n-On sage-4.7.2.alpha4, this causes:\n+On sage-5.4.beta1, this causes:\n \n ```\n The following tests failed:\n \n-        sage -t -long devel/sage/sage/modular/hecke/submodule.py # 1 doctests failed\n-        sage -t -long devel/sage/sage/modular/abvar/abvar.py # 1 doctests failed\n-        sage -t -long devel/sage/sage/lfunctions/sympow.py # 13 doctests failed\n-        sage -t -long devel/sage/sage/interfaces/qepcad.py # 3 doctests failed\n-        sage -t -long devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 17 doctests failed\n-\n+        sage -t --long devel/sage/sage/interfaces/qepcad.py # 3 doctests failed\n+        sage -t --long devel/sage/sage/misc/inline_fortran.py # 3 doctests failed\n+        sage -t --long devel/sage/sage/tests/cmdline.py # 2 doctests failed\n ```\n-\n-This seems to be because of:\n-1. Installing an rc file for the **experimental package** qepcad (in a very odd location `$SAGE_ROOT/local/default.qepcadrc`)\n-2. Sympow which needs to create datafiles.  This should probably be done in sympow's `spkg-install` instead.  This is dealt with at #11920.\n \n **Apply**:\n 1. [attachment:5155_sage_location.patch](https://github.com/sagemath/sage/files/ticket5155/5155_sage_location.patch) to the scripts repository.\n``````\n",
    "created_at": "2012-09-13T20:46:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32761",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,27 +1,18 @@
 All doctests in Sage should pass when they are run as a user that does not have write access to the Sage install. To do that, run the doctests on a Sage install that isn't owned by the user:
 
 ```
-$ ./sage -tp 4 -long devel/sage/doc/common devel/sage/doc/de devel/sage/doc/en devel/sage/doc/fr devel/sage/doc/ru devel/sage/sage
+$ ./sage -tp 4 --long devel/sage/doc/common devel/sage/doc/en devel/sage/sage
 ```
 
-Here, we assume that the owner of the Sage install has run Sage at least once (or has applied #11926).
-
-On sage-4.7.2.alpha4, this causes:
+On sage-5.4.beta1, this causes:
 
 ```
 The following tests failed:
 
-        sage -t -long devel/sage/sage/modular/hecke/submodule.py # 1 doctests failed
-        sage -t -long devel/sage/sage/modular/abvar/abvar.py # 1 doctests failed
-        sage -t -long devel/sage/sage/lfunctions/sympow.py # 13 doctests failed
-        sage -t -long devel/sage/sage/interfaces/qepcad.py # 3 doctests failed
-        sage -t -long devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 17 doctests failed
-
+        sage -t --long devel/sage/sage/interfaces/qepcad.py # 3 doctests failed
+        sage -t --long devel/sage/sage/misc/inline_fortran.py # 3 doctests failed
+        sage -t --long devel/sage/sage/tests/cmdline.py # 2 doctests failed
 ```
-
-This seems to be because of:
-1. Installing an rc file for the **experimental package** qepcad (in a very odd location `$SAGE_ROOT/local/default.qepcadrc`)
-2. Sympow which needs to create datafiles.  This should probably be done in sympow's `spkg-install` instead.  This is dealt with at #11920.
 
 **Apply**:
 1. [attachment:5155_sage_location.patch](https://github.com/sagemath/sage/files/ticket5155/5155_sage_location.patch) to the scripts repository.
``````




---

archive/issue_comments_032762.json:
```json
{
    "body": "**Changing dependencies** from \"#13157, #13397, #13452, #13459, #13457, #13123\" to \"#13157, #13397, #13452, #13407, #13459, #13457, #13123\".",
    "created_at": "2012-09-14T09:42:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32762",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#13157, #13397, #13452, #13459, #13457, #13123" to "#13157, #13397, #13452, #13407, #13459, #13457, #13123".



---

archive/issue_events_049414.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-14T12:24:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5155#event-49414"
}
```



---

archive/issue_events_049415.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-14T12:24:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5155#event-49415"
}
```



---

archive/issue_comments_032763.json:
```json
{
    "body": "<a id='comment:38'>**Comment 38:**</a>\nThis seems to be fixed with these patches, so I'm putting it to *needs_review*.\n\nHowever, this depends on so many other tickets, so it might be good to postpone the review and wait for the other tickets.",
    "created_at": "2012-09-14T12:24:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32763",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:38'>**Comment 38:**</a>
This seems to be fixed with these patches, so I'm putting it to *needs_review*.

However, this depends on so many other tickets, so it might be good to postpone the review and wait for the other tickets.



---

archive/issue_comments_032764.json:
```json
{
    "body": "**Attachment:** [5155_root.patch.gz](https://github.com/sagemath/sage/files/ticket5155/5155_root.patch.gz)\n\n**Attachment:** [5155_sage_location.patch.gz](https://github.com/sagemath/sage/files/ticket5155/5155_sage_location.patch.gz)",
    "created_at": "2012-09-16T18:44:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32764",
    "user": "https://github.com/jdemeyer"
}
```

**Attachment:** [5155_root.patch.gz](https://github.com/sagemath/sage/files/ticket5155/5155_root.patch.gz)

**Attachment:** [5155_sage_location.patch.gz](https://github.com/sagemath/sage/files/ticket5155/5155_sage_location.patch.gz)



---

archive/issue_comments_032765.json:
```json
{
    "body": "<a id='comment:39'>**Comment 39:**</a>\nThe Fortran patch needed to be rebased because of #13579. Apart from that, things look fine.",
    "created_at": "2012-12-19T15:15:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32765",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:39'>**Comment 39:**</a>
The Fortran patch needed to be rebased because of #13579. Apart from that, things look fine.



---

archive/issue_events_049416.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-19T20:47:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5155#event-49416"
}
```



---

archive/issue_events_049417.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-19T20:47:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5155#event-49417"
}
```



---

archive/issue_comments_032766.json:
```json
{
    "body": "<a id='comment:40'>**Comment 40:**</a>\nSome doctest failures...",
    "created_at": "2012-12-19T20:47:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32766",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:40'>**Comment 40:**</a>
Some doctest failures...



---

archive/issue_comments_032767.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -17,4 +17,4 @@\n **Apply**:\n 1. [attachment:5155_sage_location.patch](https://github.com/sagemath/sage/files/ticket5155/5155_sage_location.patch) to the scripts repository.\n 2. [attachment:5155_root.patch](https://github.com/sagemath/sage/files/ticket5155/5155_root.patch) to the `SAGE_ROOT` repository.\n-3. [and [attachment:5155_fortran.patch](https://github.com/sagemath/sage/files/ticket5155/1d79b552318db57f7c5789a7eebc4232.patch](https://github.com/sagemath/sage/files/ticket5155/960bc1b25d4921bf3ddc5fec50796cbf.patch)) to the Sage library.\n+3. [and [attachment:5155_fortran.patch](https://github.com/sagemath/sage/files/ticket5155/e5c183a30f96c48035a1d9c5de232488.patch](https://github.com/sagemath/sage/files/ticket5155/2e4860aba3b777aae7545f8e3312abaa.patch)) to the Sage library.\n``````\n",
    "created_at": "2012-12-19T21:01:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32767",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -17,4 +17,4 @@
 **Apply**:
 1. [attachment:5155_sage_location.patch](https://github.com/sagemath/sage/files/ticket5155/5155_sage_location.patch) to the scripts repository.
 2. [attachment:5155_root.patch](https://github.com/sagemath/sage/files/ticket5155/5155_root.patch) to the `SAGE_ROOT` repository.
-3. [and [attachment:5155_fortran.patch](https://github.com/sagemath/sage/files/ticket5155/1d79b552318db57f7c5789a7eebc4232.patch](https://github.com/sagemath/sage/files/ticket5155/960bc1b25d4921bf3ddc5fec50796cbf.patch)) to the Sage library.
+3. [and [attachment:5155_fortran.patch](https://github.com/sagemath/sage/files/ticket5155/e5c183a30f96c48035a1d9c5de232488.patch](https://github.com/sagemath/sage/files/ticket5155/2e4860aba3b777aae7545f8e3312abaa.patch)) to the Sage library.
``````




---

archive/issue_events_049418.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-19T21:01:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5155#event-49418"
}
```



---

archive/issue_events_049419.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-19T21:01:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5155#event-49419"
}
```



---

archive/issue_comments_032768.json:
```json
{
    "body": "<a id='comment:41'>**Comment 41:**</a>\n**Attachment:** [5155_sagelib.patch.gz](https://github.com/sagemath/sage/files/ticket5155/5155_sagelib.patch.gz)",
    "created_at": "2012-12-19T21:01:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32768",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:41'>**Comment 41:**</a>
**Attachment:** [5155_sagelib.patch.gz](https://github.com/sagemath/sage/files/ticket5155/5155_sagelib.patch.gz)



---

archive/issue_comments_032769.json:
```json
{
    "body": "**Changing dependencies** from \"#13157, #13397, #13452, #13407, #13459, #13457, #13123\" to \"#13157, #13397, #13452, #13407, #13459, #13457, #13123, #13887\".",
    "created_at": "2012-12-30T09:47:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32769",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#13157, #13397, #13452, #13407, #13459, #13457, #13123" to "#13157, #13397, #13452, #13407, #13459, #13457, #13123, #13887".



---

archive/issue_comments_032770.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -17,4 +17,4 @@\n **Apply**:\n 1. [attachment:5155_sage_location.patch](https://github.com/sagemath/sage/files/ticket5155/5155_sage_location.patch) to the scripts repository.\n 2. [attachment:5155_root.patch](https://github.com/sagemath/sage/files/ticket5155/5155_root.patch) to the `SAGE_ROOT` repository.\n-3. [and [attachment:5155_fortran.patch](https://github.com/sagemath/sage/files/ticket5155/e5c183a30f96c48035a1d9c5de232488.patch](https://github.com/sagemath/sage/files/ticket5155/2e4860aba3b777aae7545f8e3312abaa.patch)) to the Sage library.\n+3. [attachment:5155_sagelib.patch](https://github.com/sagemath/sage/files/ticket5155/5155_sagelib.patch) to the Sage library.\n``````\n",
    "created_at": "2012-12-30T09:47:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32770",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -17,4 +17,4 @@
 **Apply**:
 1. [attachment:5155_sage_location.patch](https://github.com/sagemath/sage/files/ticket5155/5155_sage_location.patch) to the scripts repository.
 2. [attachment:5155_root.patch](https://github.com/sagemath/sage/files/ticket5155/5155_root.patch) to the `SAGE_ROOT` repository.
-3. [and [attachment:5155_fortran.patch](https://github.com/sagemath/sage/files/ticket5155/e5c183a30f96c48035a1d9c5de232488.patch](https://github.com/sagemath/sage/files/ticket5155/2e4860aba3b777aae7545f8e3312abaa.patch)) to the Sage library.
+3. [attachment:5155_sagelib.patch](https://github.com/sagemath/sage/files/ticket5155/5155_sagelib.patch) to the Sage library.
``````




---

archive/issue_comments_032771.json:
```json
{
    "body": "<a id='comment:43'>**Comment 43:**</a>\nSAGE_LOCAL is a strange location for default.qepcadrc I suppose it really needs to be changed in the spkg first but SAGE_LOCAL/etc is a better location for this kind of file.",
    "created_at": "2012-12-30T10:21:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32771",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:43'>**Comment 43:**</a>
SAGE_LOCAL is a strange location for default.qepcadrc I suppose it really needs to be changed in the spkg first but SAGE_LOCAL/etc is a better location for this kind of file.



---

archive/issue_events_049420.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2013-01-12T09:39:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5155#event-49420"
}
```



---

archive/issue_events_049421.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2013-01-12T09:39:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5155#event-49421"
}
```



---

archive/issue_comments_032772.json:
```json
{
    "body": "**Reviewer:** Fran\u00e7ois Bissey",
    "created_at": "2013-01-12T09:39:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32772",
    "user": "https://github.com/kiwifb"
}
```

**Reviewer:** Fran√ßois Bissey



---

archive/issue_comments_032773.json:
```json
{
    "body": "<a id='comment:44'>**Comment 44:**</a>\nMy only objection is the location of default.qepcadrc but since it is for an experimental spkg and would require another ticket to change it I am giving this a positive review. Moving the default.qepcadrc location should be the object of a follow up ticket.",
    "created_at": "2013-01-12T09:39:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32773",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:44'>**Comment 44:**</a>
My only objection is the location of default.qepcadrc but since it is for an experimental spkg and would require another ticket to change it I am giving this a positive review. Moving the default.qepcadrc location should be the object of a follow up ticket.



---

archive/issue_comments_032774.json:
```json
{
    "body": "<a id='comment:45'>**Comment 45:**</a>\nReplying to [@kiwifb](#comment%3A44):\n> My only objection is the location of default.qepcadrc\n\nAlso, you shouldn't blame this ticket for that, it has always been like that.\n\nThanks for the review!",
    "created_at": "2013-01-12T13:40:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32774",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:45'>**Comment 45:**</a>
Replying to [@kiwifb](#comment%3A44):
> My only objection is the location of default.qepcadrc

Also, you shouldn't blame this ticket for that, it has always been like that.

Thanks for the review!



---

archive/issue_events_049422.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-12T13:40:39Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "milestone_number": null,
    "milestone_title": "sage-5.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5155#event-49422"
}
```



---

archive/issue_events_049423.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-12T13:40:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "milestone_number": null,
    "milestone_title": "sage-5.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5155#event-49423"
}
```



---

archive/issue_events_049424.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-21T21:06:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5155#event-49424"
}
```



---

archive/issue_events_049425.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-21T21:06:24Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5155#event-49425"
}
```



---

archive/issue_comments_032775.json:
```json
{
    "body": "**Merged:** sage-5.7.beta0",
    "created_at": "2013-01-21T21:06:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32775",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.7.beta0



---

archive/issue_comments_032776.json:
```json
{
    "body": "<a id='comment:47'>**Comment 47:**</a>\nI made a patch for the analogous problem for `$HOME` at #13985.  It would be nice if somebody could review that.",
    "created_at": "2013-01-22T19:41:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5155#issuecomment-32776",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:47'>**Comment 47:**</a>
I made a patch for the analogous problem for `$HOME` at #13985.  It would be nice if somebody could review that.
