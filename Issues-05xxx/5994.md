# Issue 5994: singular.version() has no doctest

archive/issues_005994.json:
```json
{
    "assignees": [
        "https://github.com/williamstein"
    ],
    "body": "Neither `singular.version` nor `singular_version` have doc tests.\n\nCC:  @kedlaya\n\nKeywords: **singular version help.cnf**\n\nBranch/Commit: **[`87c73ac`](https://github.com/sagemath/sagetrac-mirror/commit/87c73ac3a8a19d0779b9f31f21b23b629a0fe82e)**\n\nUpstream: **Completely fixed; Fix reported upstream**\n\nReviewer: **Jeroen Demeyer**\n\nAuthor: **Jori M\u00e4ntysalo**\n\nComponent: **interfaces**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/5994_\n\n",
    "closed_at": "2016-11-02T19:20:02Z",
    "created_at": "2009-05-06T09:46:52Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20interfaces",
        "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "singular.version() has no doctest",
    "type": "issue",
    "updated_at": "2016-11-02T19:20:02Z",
    "url": "https://github.com/sagemath/sage/issues/5994",
    "user": "https://github.com/simon-king-jena"
}
```
Neither `singular.version` nor `singular_version` have doc tests.

CC:  @kedlaya

Keywords: **singular version help.cnf**

Branch/Commit: **[`87c73ac`](https://github.com/sagemath/sagetrac-mirror/commit/87c73ac3a8a19d0779b9f31f21b23b629a0fe82e)**

Upstream: **Completely fixed; Fix reported upstream**

Reviewer: **Jeroen Demeyer**

Author: **Jori MÃ¤ntysalo**

Component: **interfaces**

_Issue created by migration from https://trac.sagemath.org/ticket/5994_





---

archive/issue_events_071244.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2009-05-06T09:46:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5994#event-71244"
}
```



---

archive/issue_events_071245.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2009-05-06T09:46:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20interfaces",
    "label_color": "0000ff",
    "label_name": "c: interfaces",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5994#event-71245"
}
```



---

archive/issue_events_071246.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2009-05-06T09:46:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5994#event-71246"
}
```



---

archive/issue_events_071247.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2009-05-06T09:46:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5994#event-71247"
}
```



---

archive/issue_events_071248.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-05-06T09:46:52Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "subject": "https://github.com/simon-king-jena",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5994#event-71248"
}
```



---

archive/issue_comments_039054.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nRemark:\n\nApparently the problem is on the side of Singular.\n\nIn Singular, freshly started, when you do\n\n```\n> system(\"--version\");\n```\nthere is the error (it says \"? cannot open `help.cnf`\"). \nIf you repeat, no error.\n\nIf people think that my suggestion would break code, I suggest to have a new method `singular.version_number()`.",
    "created_at": "2009-05-06T09:57:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39054",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:1" align="right">comment:1</div>

Remark:

Apparently the problem is on the side of Singular.

In Singular, freshly started, when you do

```
> system("--version");
```
there is the error (it says "? cannot open `help.cnf`"). 
If you repeat, no error.

If people think that my suggestion would break code, I suggest to have a new method `singular.version_number()`.



---

archive/issue_comments_039055.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nReplying to [@simon-king-jena](#comment:1):\n> Apparently the problem is on the side of Singular.\n\nAnd meanwhile it is reported upstream. \n\nI do not know, however, if the problem still occurs with Singular 3-1-0 (I only have a beta version, and this still shows the error).",
    "created_at": "2009-05-06T12:15:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39055",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:2" align="right">comment:2</div>

Replying to [@simon-king-jena](#comment:1):
> Apparently the problem is on the side of Singular.

And meanwhile it is reported upstream. 

I do not know, however, if the problem still occurs with Singular 3-1-0 (I only have a beta version, and this still shows the error).



---

archive/issue_comments_039056.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nReplying to [@simon-king-jena](#comment:2):\n> Replying to [@simon-king-jena](#comment:1):\n> And meanwhile it is reported upstream. \n> \n> I do not know, however, if the problem still occurs with Singular 3-1-0 (I only have a beta version, and this still shows the error).\n\n\"Upstream\" answered, and it seems that the problem is fixed in the official release. \n\nI could verify that on the server in Oberwolfach, the error does not occur in Singular 3-1-0, but it *does* occur in Oberwolfach in Singular 3-0-4 (as being part of Sage). Opinions?\n\nBut there still remains the question if `singular.version()` ought to return a tuple of integers, rather than a lengthy string with all build informations.",
    "created_at": "2009-05-06T12:33:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39056",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:3" align="right">comment:3</div>

Replying to [@simon-king-jena](#comment:2):
> Replying to [@simon-king-jena](#comment:1):
> And meanwhile it is reported upstream. 
> 
> I do not know, however, if the problem still occurs with Singular 3-1-0 (I only have a beta version, and this still shows the error).

"Upstream" answered, and it seems that the problem is fixed in the official release. 

I could verify that on the server in Oberwolfach, the error does not occur in Singular 3-1-0, but it *does* occur in Oberwolfach in Singular 3-0-4 (as being part of Sage). Opinions?

But there still remains the question if `singular.version()` ought to return a tuple of integers, rather than a lengthy string with all build informations.



---

archive/issue_comments_039057.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@simon-king-jena](#comment:3):\n> \n> \"Upstream\" answered, and it seems that the problem is fixed in the official release. \n> \n> I could verify that on the server in Oberwolfach, the error does not occur in Singular 3-1-0, but it *does* occur in Oberwolfach in Singular 3-0-4 (as being part of Sage). Opinions?\n\nWe can probably wait until after Sage Days 15 for this?\n \n> But there still remains the question if `singular.version()` ought to return a tuple of integers, rather than a lengthy string with all build informations.\n\nMy personal preference would be for it to return a tuple of integers, but we could give it an optional argument `with_build_info=True` (or `verbatim=True` or something similar) to make it return the lengthy string.",
    "created_at": "2009-05-06T12:57:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39057",
    "user": "https://github.com/aghitza"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@simon-king-jena](#comment:3):
> 
> "Upstream" answered, and it seems that the problem is fixed in the official release. 
> 
> I could verify that on the server in Oberwolfach, the error does not occur in Singular 3-1-0, but it *does* occur in Oberwolfach in Singular 3-0-4 (as being part of Sage). Opinions?

We can probably wait until after Sage Days 15 for this?
 
> But there still remains the question if `singular.version()` ought to return a tuple of integers, rather than a lengthy string with all build informations.

My personal preference would be for it to return a tuple of integers, but we could give it an optional argument `with_build_info=True` (or `verbatim=True` or something similar) to make it return the lengthy string.



---

archive/issue_comments_039058.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@simon-king-jena](#comment:3):\n> I could verify that on the server in Oberwolfach, the error does not occur in Singular 3-1-0, but it *does* occur in Oberwolfach in Singular 3-0-4 (as being part of Sage). Opinions?\n\nThe \"Opinions?\" bit should be two lines lower. Sorry.\n\nIt turned out that the error occurs in *any* ***Sage-built*** Singular version that I know: Singular 3-0-4 on sage.math, on two of my computers, in Oberwolfach, and Singular 3-1-0-Beta on sage.math and on one of my computers. \n\nIf Singular is not built by Sage, then the error apparently does not occur: With Singular 3-0-3 (very old) on one of my machines, Singular-3-1-0-Beta on my machine (same sources, modulo the usual patches, as the sage-built version!), and Singular-3-1-0 official release in Oberwolfach.\n\nSo, after all, it seems to me that it is all Sage's fault.\n\n\n> But there still remains the question if `singular.version()` ought to return a tuple of integers, rather than a lengthy string with all build informations.\n\nHere is where I want to know some \"Opinions\"...",
    "created_at": "2009-05-06T13:48:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39058",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@simon-king-jena](#comment:3):
> I could verify that on the server in Oberwolfach, the error does not occur in Singular 3-1-0, but it *does* occur in Oberwolfach in Singular 3-0-4 (as being part of Sage). Opinions?

The "Opinions?" bit should be two lines lower. Sorry.

It turned out that the error occurs in *any* ***Sage-built*** Singular version that I know: Singular 3-0-4 on sage.math, on two of my computers, in Oberwolfach, and Singular 3-1-0-Beta on sage.math and on one of my computers. 

If Singular is not built by Sage, then the error apparently does not occur: With Singular 3-0-3 (very old) on one of my machines, Singular-3-1-0-Beta on my machine (same sources, modulo the usual patches, as the sage-built version!), and Singular-3-1-0 official release in Oberwolfach.

So, after all, it seems to me that it is all Sage's fault.


> But there still remains the question if `singular.version()` ought to return a tuple of integers, rather than a lengthy string with all build informations.

Here is where I want to know some "Opinions"...



---

archive/issue_events_071249.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-01-18T13:05:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5994#event-71249"
}
```



---

archive/issue_comments_039059.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThe attached patch fixes the output format for version to be more consistent with the other interfaces, e.g., `gp.version()`.  It also programs around the issue with help files, which is *not* fixed in Singular-3-1-0... and I'm not at all clear *why* it is considered a bug in Singular by the people in the thread above.",
    "created_at": "2010-01-18T13:05:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39059",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:6" align="right">comment:6</div>

The attached patch fixes the output format for version to be more consistent with the other interfaces, e.g., `gp.version()`.  It also programs around the issue with help files, which is *not* fixed in Singular-3-1-0... and I'm not at all clear *why* it is considered a bug in Singular by the people in the thread above.



---

archive/issue_comments_039060.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nAttachment: **[trac_5994.patch.gz](https://github.com/sagemath/sage/files/ticket5994/trac_5994.patch.gz)**\n\nReplying to [@williamstein](#comment:6):\n> It also programs around the issue with help files, which is *not* fixed in Singular-3-1-0... and I'm not at all clear *why* it is considered a bug in Singular by the people in the thread above.  \n\nNote that I originally thought that the issue with help files is a problem of Singular, and clearly a bug: I mean, you ask for the version number and get an error; you ask again, and it works! It had reported it upstream.\n\nBut then the impression came across (see my last post) that it only occurs in Singular if it is built by Sage. In this case, it could be a problem with the patched version in Sage, which might be worth another ticket.\n\nCheers,\nSimon",
    "created_at": "2010-01-18T13:15:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39060",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:7" align="right">comment:7</div>

Attachment: **[trac_5994.patch.gz](https://github.com/sagemath/sage/files/ticket5994/trac_5994.patch.gz)**

Replying to [@williamstein](#comment:6):
> It also programs around the issue with help files, which is *not* fixed in Singular-3-1-0... and I'm not at all clear *why* it is considered a bug in Singular by the people in the thread above.  

Note that I originally thought that the issue with help files is a problem of Singular, and clearly a bug: I mean, you ask for the version number and get an error; you ask again, and it works! It had reported it upstream.

But then the impression came across (see my last post) that it only occurs in Singular if it is built by Sage. In this case, it could be a problem with the patched version in Sage, which might be worth another ticket.

Cheers,
Simon



---

archive/issue_comments_039061.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI think the first time you ask for the version, singular fires up its help system, and reports a bug about it not being properly configured by *us* for such use.  Then it doesn't report that again, since it already did.  I think it is very sensible behavior by Singular.\n\nSo can you review this?",
    "created_at": "2010-01-18T22:28:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39061",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:8" align="right">comment:8</div>

I think the first time you ask for the version, singular fires up its help system, and reports a bug about it not being properly configured by *us* for such use.  Then it doesn't report that again, since it already did.  I think it is very sensible behavior by Singular.

So can you review this?



---

archive/issue_comments_039062.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nFor the record, adding an empty `$SAGE_ROOT/local/share/singular/help.cnf` suppresses the error. There is actually a `help.cnf` file in the singular sources (, but it doesn't seem to get installed. Its contents don't look to be particularly relevant for sage at first glance, though.",
    "created_at": "2010-01-19T04:32:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39062",
    "user": "https://github.com/wjp"
}
```

<div id="comment:9" align="right">comment:9</div>

For the record, adding an empty `$SAGE_ROOT/local/share/singular/help.cnf` suppresses the error. There is actually a `help.cnf` file in the singular sources (, but it doesn't seem to get installed. Its contents don't look to be particularly relevant for sage at first glance, though.



---

archive/issue_comments_039063.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@williamstein](#comment:8):\n> So can you review this?\n\nI'd like to, but the sage-4.3.1.alpha1 that I had built on sage-math seems broken. It used to work, but when I did `./sage -br main`, it failed with \n\n```\nImportError: /usr/lib/libstdc++.so.6: version `GLIBCXX_3.4.11' not found (required by /home/SimonKing/SAGE/sage-4.3.1.alpha1/local/lib/libgmpxx.so.3)\n```\n\nMight `./sage -ba` work?\n\nAnyway, I'd like to see one more doc test, that checks consistency with another way of getting the version number -- just for consistency:\n\n```\nsage: tuple([Integer(c) for c in singular.eval('system(\"version\")')][:3] == singular.version()[0]\nTrue\n```",
    "created_at": "2010-01-19T09:23:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39063",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@williamstein](#comment:8):
> So can you review this?

I'd like to, but the sage-4.3.1.alpha1 that I had built on sage-math seems broken. It used to work, but when I did `./sage -br main`, it failed with 

```
ImportError: /usr/lib/libstdc++.so.6: version `GLIBCXX_3.4.11' not found (required by /home/SimonKing/SAGE/sage-4.3.1.alpha1/local/lib/libgmpxx.so.3)
```

Might `./sage -ba` work?

Anyway, I'd like to see one more doc test, that checks consistency with another way of getting the version number -- just for consistency:

```
sage: tuple([Integer(c) for c in singular.eval('system("version")')][:3] == singular.version()[0]
True
```



---

archive/issue_comments_039064.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@simon-king-jena](#comment:10):\n> ...\n> \n> ```\n> sage: tuple([Integer(c) for c in singular.eval('system(\"version\")')][:3] == singular.version()[0]\n> True\n> ```\n\nOops, apparently I forgot a closing bracket on the left hand side. Anyway, you know what this prospective doc-test is supposed to do...",
    "created_at": "2010-01-19T09:56:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39064",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@simon-king-jena](#comment:10):
> ...
> 
> ```
> sage: tuple([Integer(c) for c in singular.eval('system("version")')][:3] == singular.version()[0]
> True
> ```

Oops, apparently I forgot a closing bracket on the left hand side. Anyway, you know what this prospective doc-test is supposed to do...



---

archive/issue_comments_039065.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@simon-king-jena](#comment:10):\n> \n> Might `./sage -ba` work?\n> \n\nIt did not work. I fear that I have to start from scratch, so that it will take some hours before I will be able to review the patch.",
    "created_at": "2010-01-19T10:20:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39065",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@simon-king-jena](#comment:10):
> 
> Might `./sage -ba` work?
> 

It did not work. I fear that I have to start from scratch, so that it will take some hours before I will be able to review the patch.



---

archive/issue_events_071250.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2010-01-19T15:30:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5994#event-71250"
}
```



---

archive/issue_events_071251.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2010-01-19T15:30:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5994#event-71251"
}
```



---

archive/issue_comments_039066.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nOK, meanwhile I built sage-4.3.1.rc1\n\nThe patch applies cleanly.\n\nHowever, I don't like the doc tests, and I think the return value is wrong.\n\nThe tests check that the first version number is 3. OK, it will eventually change, but not in the near future. \n\nThen they test that the version number is of length 3. Can we rely on it? There used to be two-digit versions. \n\nIn fact, the \"official\" version number seems to be four digits, not three:\n\n```\nsage: singular.eval('system(\"version\")')\n'3104'\n```\n\nHence, the first return value of singular.version() should be (3,1,0,4) not (3,1,0). \nNote that according to the Singular homepage there is a version 3-1-0-6 available, so, the last digit does play a role.\n\nSo, my questions are:\n\n* How important is it to have doc tests that remain valid if the Singular version changes?\n* Do we take the patch level version number of Singular serious?",
    "created_at": "2010-01-19T15:30:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39066",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:13" align="right">comment:13</div>

OK, meanwhile I built sage-4.3.1.rc1

The patch applies cleanly.

However, I don't like the doc tests, and I think the return value is wrong.

The tests check that the first version number is 3. OK, it will eventually change, but not in the near future. 

Then they test that the version number is of length 3. Can we rely on it? There used to be two-digit versions. 

In fact, the "official" version number seems to be four digits, not three:

```
sage: singular.eval('system("version")')
'3104'
```

Hence, the first return value of singular.version() should be (3,1,0,4) not (3,1,0). 
Note that according to the Singular homepage there is a version 3-1-0-6 available, so, the last digit does play a role.

So, my questions are:

* How important is it to have doc tests that remain valid if the Singular version changes?
* Do we take the patch level version number of Singular serious?



---

archive/issue_comments_039067.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@simon-king-jena](#comment:13):\n> > So, my questions are:\n\n> \n> * How important is it to have doc tests that remain valid if the Singular version changes?\n> * Do we take the patch level version number of Singular serious?\n\nIs there an answer, yet?",
    "created_at": "2010-07-05T12:13:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39067",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@simon-king-jena](#comment:13):
> > So, my questions are:

> 
> * How important is it to have doc tests that remain valid if the Singular version changes?
> * Do we take the patch level version number of Singular serious?

Is there an answer, yet?



---

archive/issue_comments_039068.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\n-- bump --\n\nFirst question: Do we want that `singular.version()` works? Currently, it fails when first called.\n\nSecond question: Do we want that (at least by default) it returns a tuple of three or four numbers (three- resp four-digit vesion numbers), or do people like that the output of `singular.version()` (if it is called again after the initial error) returns a lengthy string with full information on the way Singular has been built?",
    "created_at": "2011-05-28T09:27:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39068",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:15" align="right">comment:15</div>

-- bump --

First question: Do we want that `singular.version()` works? Currently, it fails when first called.

Second question: Do we want that (at least by default) it returns a tuple of three or four numbers (three- resp four-digit vesion numbers), or do people like that the output of `singular.version()` (if it is called again after the initial error) returns a lengthy string with full information on the way Singular has been built?



---

archive/issue_comments_039069.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nIt shouldn't hurt to install the `help.cnf` file though, in which case we wouldn't need (and *should* remove) the `try ... except RuntimeError ...` and a second try.",
    "created_at": "2011-08-07T20:02:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39069",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:16" align="right">comment:16</div>

It shouldn't hurt to install the `help.cnf` file though, in which case we wouldn't need (and *should* remove) the `try ... except RuntimeError ...` and a second try.



---

archive/issue_comments_039070.json:
```json
{
    "body": "Changed keywords from **singular version** to **singular version help.cnf**",
    "created_at": "2011-08-07T20:02:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39070",
    "user": "https://github.com/nexttime"
}
```

Changed keywords from **singular version** to **singular version help.cnf**



---

archive/issue_comments_039071.json:
```json
{
    "body": "Author: **William Stein**",
    "created_at": "2011-08-07T20:02:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39071",
    "user": "https://github.com/nexttime"
}
```

Author: **William Stein**



---

archive/issue_comments_039072.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nSince he reported this again on a duplicate, #11519.",
    "created_at": "2011-08-07T20:07:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39072",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:17" align="right">comment:17</div>

Since he reported this again on a duplicate, #11519.



---

archive/issue_events_071252.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5994#event-71252"
}
```



---

archive/issue_events_071253.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5994#event-71253"
}
```



---

archive/issue_events_071254.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5994#event-71254"
}
```



---

archive/issue_events_071255.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5994#event-71255"
}
```



---

archive/issue_events_071256.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5994#event-71256"
}
```



---

archive/issue_events_071257.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5994#event-71257"
}
```



---

archive/issue_events_071258.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5994#event-71258"
}
```



---

archive/issue_events_071259.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5994#event-71259"
}
```



---

archive/issue_comments_039073.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@simon-king-jena](#comment:15):\n \n> Do we want that (at least by default) it returns a tuple of three or four numbers (three- resp four-digit vesion numbers), or do people like that the output of `singular.version()` (if it is called again after the initial error) returns a lengthy string with full information on the way Singular has been built?\n\nAs a default I would suggest output similar to `pari.version()`. But for now at least `kash_version()` and `r_version()` gives slightly different output...\n\nMaybe right way could be to remove them, and have something like `version('kash')` for one package and `version()` for all packages?",
    "created_at": "2015-07-17T06:18:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39073",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@simon-king-jena](#comment:15):
 
> Do we want that (at least by default) it returns a tuple of three or four numbers (three- resp four-digit vesion numbers), or do people like that the output of `singular.version()` (if it is called again after the initial error) returns a lengthy string with full information on the way Singular has been built?

As a default I would suggest output similar to `pari.version()`. But for now at least `kash_version()` and `r_version()` gives slightly different output...

Maybe right way could be to remove them, and have something like `version('kash')` for one package and `version()` for all packages?



---

archive/issue_comments_039074.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nGosh, is that still not fixed? Sorry that I spoiled it by asking questions in [comment:13](#comment:13) that nobody bothers to answer...",
    "created_at": "2015-09-06T14:55:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39074",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:23" align="right">comment:23</div>

Gosh, is that still not fixed? Sorry that I spoiled it by asking questions in [comment:13](#comment:13) that nobody bothers to answer...



---

archive/issue_comments_039075.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nTo repeat my questions:\n\n- How important is it to have doc tests that remain valid if the Singular version changes?\n\nMy answer: We could at least have a test marked random. In that way, we at least make sure that there is no error raised.\n\n- Do we take the patch level version number of Singular serious? Respectively do we really want the current behaviour (singular.version() returns a lengthy string), or would we prefer to have it return a tuple of integers?\n\nMy answer: We have\n\n```\nsage: pari.version()\n[2, 8, 0]\nsage: r.version()\n((3, 2, 1), 'R version 3.2.1 (2015-06-18)')\nsage: gap.version()\n'4.7.8'\nsage: sage0.version()\n'SageMath Version 6.9.beta3, Release Date: 2015-08-21'\n```\nHence, the different interfaces have all kind of different output. Thus, the current behaviour should be fine, but the following output\n\n```\nsage: singular.eval('system(\"version\")')\n'3170'\n```\nwould be equally fine.\n\nMy suggestion is: Use the SHORT version string by default, but provide singular_version and singular.version with an optional \"verbose=False\" argument, that allows to obtain the lengthy version string. And of course fix the error.",
    "created_at": "2015-09-06T15:05:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39075",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:24" align="right">comment:24</div>

To repeat my questions:

- How important is it to have doc tests that remain valid if the Singular version changes?

My answer: We could at least have a test marked random. In that way, we at least make sure that there is no error raised.

- Do we take the patch level version number of Singular serious? Respectively do we really want the current behaviour (singular.version() returns a lengthy string), or would we prefer to have it return a tuple of integers?

My answer: We have

```
sage: pari.version()
[2, 8, 0]
sage: r.version()
((3, 2, 1), 'R version 3.2.1 (2015-06-18)')
sage: gap.version()
'4.7.8'
sage: sage0.version()
'SageMath Version 6.9.beta3, Release Date: 2015-08-21'
```
Hence, the different interfaces have all kind of different output. Thus, the current behaviour should be fine, but the following output

```
sage: singular.eval('system("version")')
'3170'
```
would be equally fine.

My suggestion is: Use the SHORT version string by default, but provide singular_version and singular.version with an optional "verbose=False" argument, that allows to obtain the lengthy version string. And of course fix the error.



---

archive/issue_comments_039076.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@simon-king-jena](#comment:24):\n> To repeat my questions:\n> \n> - How important is it to have doc tests that remain valid if the Singular version changes?\n> \n> My answer: We could at least have a test marked random. In that way, we at least make sure that there is no error raised.\n\n+1\n\n> My suggestion is: Use the SHORT version string by default, but provide singular_version and singular.version with an optional \"verbose=False\" argument, that allows to obtain the lengthy version string. And of course fix the error.\n\nSounds good. Somehow the output of `pari.version()` seems best for me. Maybe this could also be documented in http://doc.sagemath.org/html/en/developer/packaging.html#package-versioning as the recommended way to have `*.version()` commands?",
    "created_at": "2015-09-06T15:24:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39076",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@simon-king-jena](#comment:24):
> To repeat my questions:
> 
> - How important is it to have doc tests that remain valid if the Singular version changes?
> 
> My answer: We could at least have a test marked random. In that way, we at least make sure that there is no error raised.

+1

> My suggestion is: Use the SHORT version string by default, but provide singular_version and singular.version with an optional "verbose=False" argument, that allows to obtain the lengthy version string. And of course fix the error.

Sounds good. Somehow the output of `pari.version()` seems best for me. Maybe this could also be documented in http://doc.sagemath.org/html/en/developer/packaging.html#package-versioning as the recommended way to have `*.version()` commands?



---

archive/issue_comments_039077.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@jm58660](#comment:25):\n> Sounds good. Somehow the output of `pari.version()` seems best for me.\n\nSlight problem: The patching level usually is not indicated by a number but by \"p\" plus a number. So, providing the version as a list of integers is perhaps not what we want. And it is not good, I think, if the default output is a list of integers and the verbose output is a totally different type, namely a string.\n\nFrom that perspective, the r-output is better.\n\n> Maybe this could also be documented in http://doc.sagemath.org/html/en/developer/packaging.html#package-versioning as the recommended way to have `*.version()` commands?\n\nI didn't know about the existence of a `package_version.txt`. I wonder if we could access these data---after all, the package version of singular is \"3.1.7p1.p0\", but the version shown by `singular.eval('system(\"version\")')` is \"3170\". Similarly for r, it should be `3.2.1.p0`, not `(3,2,1)`.\n\nI guess it is time to do a bit bike shedding at sage-devel.",
    "created_at": "2015-09-06T17:54:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39077",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@jm58660](#comment:25):
> Sounds good. Somehow the output of `pari.version()` seems best for me.

Slight problem: The patching level usually is not indicated by a number but by "p" plus a number. So, providing the version as a list of integers is perhaps not what we want. And it is not good, I think, if the default output is a list of integers and the verbose output is a totally different type, namely a string.

From that perspective, the r-output is better.

> Maybe this could also be documented in http://doc.sagemath.org/html/en/developer/packaging.html#package-versioning as the recommended way to have `*.version()` commands?

I didn't know about the existence of a `package_version.txt`. I wonder if we could access these data---after all, the package version of singular is "3.1.7p1.p0", but the version shown by `singular.eval('system("version")')` is "3170". Similarly for r, it should be `3.2.1.p0`, not `(3,2,1)`.

I guess it is time to do a bit bike shedding at sage-devel.



---

archive/issue_comments_039078.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@simon-king-jena](#comment:26):\n \n> Slight problem: The patching level usually is not indicated by a number but by \"p\" plus a number. So, providing the version as a list of integers is perhaps not what we want. And it is not good, I think, if the default output is a list of integers and the verbose output is a totally different type, namely a string.\n> \n> From that perspective, the r-output is better.\n\nTrue.\n\nAs a system admin I should be able to answer fast to questions \"What is the version of ... in our server ...?\". For that it is not so important what is the format. But it gives a little unprofessional feeling if I get `(1,2,3)` from `foo.version()` and `[1,2,3]` from `bar.version()`.",
    "created_at": "2015-09-07T06:40:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39078",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@simon-king-jena](#comment:26):
 
> Slight problem: The patching level usually is not indicated by a number but by "p" plus a number. So, providing the version as a list of integers is perhaps not what we want. And it is not good, I think, if the default output is a list of integers and the verbose output is a totally different type, namely a string.
> 
> From that perspective, the r-output is better.

True.

As a system admin I should be able to answer fast to questions "What is the version of ... in our server ...?". For that it is not so important what is the format. But it gives a little unprofessional feeling if I get `(1,2,3)` from `foo.version()` and `[1,2,3]` from `bar.version()`.



---

archive/issue_comments_039079.json:
```json
{
    "body": "Branch: **[u/SimonKing/singular_version_yielding_error](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/singular_version_yielding_error)**",
    "created_at": "2015-09-10T09:53:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39079",
    "user": "https://github.com/simon-king-jena"
}
```

Branch: **[u/SimonKing/singular_version_yielding_error](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/singular_version_yielding_error)**



---

archive/issue_events_071260.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2015-09-10T09:56:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5994#event-71260"
}
```



---

archive/issue_events_071261.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2015-09-10T09:56:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5994#event-71261"
}
```



---

archive/issue_comments_039080.json:
```json
{
    "body": "Changed author from **William Stein** to **William Stein, Simon King**",
    "created_at": "2015-09-10T09:56:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39080",
    "user": "https://github.com/simon-king-jena"
}
```

Changed author from **William Stein** to **William Stein, Simon King**



---

archive/issue_comments_039081.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nI work around the bug that results in the error, and I think it is best to return both a version tuple on the one hand (so that one can easily test if the version is enough recent) and the complete version information as provided by Singular as a string.\n\nHopefully the reviewers agree...",
    "created_at": "2015-09-10T09:56:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39081",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:29" align="right">comment:29</div>

I work around the bug that results in the error, and I think it is best to return both a version tuple on the one hand (so that one can easily test if the version is enough recent) and the complete version information as provided by Singular as a string.

Hopefully the reviewers agree...



---

archive/issue_comments_039082.json:
```json
{
    "body": "Commit: **[`70f7b1c`](https://github.com/sagemath/sagetrac-mirror/commit/70f7b1c5d206e8627f3d124a28b7083e3a82313a)**",
    "created_at": "2015-09-10T09:56:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39082",
    "user": "https://github.com/simon-king-jena"
}
```

Commit: **[`70f7b1c`](https://github.com/sagemath/sagetrac-mirror/commit/70f7b1c5d206e8627f3d124a28b7083e3a82313a)**



---

archive/issue_comments_039083.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nWhy is it not possible to click on the attached branch an see the changes?",
    "created_at": "2015-09-10T09:57:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39083",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:30" align="right">comment:30</div>

Why is it not possible to click on the attached branch an see the changes?



---

archive/issue_comments_039084.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nArrgh. I forgot to commit before pushing :-/",
    "created_at": "2015-09-10T09:58:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39084",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:31" align="right">comment:31</div>

Arrgh. I forgot to commit before pushing :-/



---

archive/issue_comments_039085.json:
```json
{
    "body": "<div id=\"comment:32\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a2ae8c869553c8aff5404ef2cfcaf95d2f8eac52\"><code>a2ae8c8</code></a></td><td><code>Fix error in singular_version()</code></td></tr></table>\n",
    "created_at": "2015-09-10T09:58:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39085",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a2ae8c869553c8aff5404ef2cfcaf95d2f8eac52"><code>a2ae8c8</code></a></td><td><code>Fix error in singular_version()</code></td></tr></table>




---

archive/issue_comments_039086.json:
```json
{
    "body": "Changed commit from **[`70f7b1c`](https://github.com/sagemath/sagetrac-mirror/commit/70f7b1c5d206e8627f3d124a28b7083e3a82313a)** to **[`a2ae8c8`](https://github.com/sagemath/sagetrac-mirror/commit/a2ae8c869553c8aff5404ef2cfcaf95d2f8eac52)**",
    "created_at": "2015-09-10T09:58:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39086",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`70f7b1c`](https://github.com/sagemath/sagetrac-mirror/commit/70f7b1c5d206e8627f3d124a28b7083e3a82313a)** to **[`a2ae8c8`](https://github.com/sagemath/sagetrac-mirror/commit/a2ae8c869553c8aff5404ef2cfcaf95d2f8eac52)**



---

archive/issue_comments_039087.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nThe error should be reported upstream and the comment in the code should link to this ticket and the upstream report.",
    "created_at": "2015-09-10T10:41:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39087",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:33" align="right">comment:33</div>

The error should be reported upstream and the comment in the code should link to this ticket and the upstream report.



---

archive/issue_events_071262.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-09-10T10:41:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5994#event-71262"
}
```



---

archive/issue_events_071263.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-09-10T10:41:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5994#event-71263"
}
```



---

archive/issue_comments_039088.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nI am not so sure if it requires an uptream report. The error is about a missing file, and according to [comment:9](#comment:9), adding an empty `$SAGE_ROOT/local/share/singular/help.cnf` suppresses the error.",
    "created_at": "2015-09-10T10:54:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39088",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:34" align="right">comment:34</div>

I am not so sure if it requires an uptream report. The error is about a missing file, and according to [comment:9](#comment:9), adding an empty `$SAGE_ROOT/local/share/singular/help.cnf` suppresses the error.



---

archive/issue_comments_039089.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@simon-king-jena](#comment:34):\n> adding an empty `$SAGE_ROOT/local/share/singular/help.cnf` suppresses the error.\n\nThen that should be done instead of wrapping the call in a `try`/`except` block (which is a really ugly \"solution\")",
    "created_at": "2015-09-10T11:35:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39089",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@simon-king-jena](#comment:34):
> adding an empty `$SAGE_ROOT/local/share/singular/help.cnf` suppresses the error.

Then that should be done instead of wrapping the call in a `try`/`except` block (which is a really ugly "solution")



---

archive/issue_comments_039090.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nThere is actually a `help.cnf` installed in\n\n```\n$SAGE_LOCAL/share/singular/LIB/help.cnf\n```\nso I guess it's a bug in Singular that the file is either installed or looked for in the wrong place.\n\nIn any case, copying that file to `$SAGE_LOCAL/share/singular/help.cnf` would be a good solution for this ticket.",
    "created_at": "2015-09-10T11:41:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39090",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:36" align="right">comment:36</div>

There is actually a `help.cnf` installed in

```
$SAGE_LOCAL/share/singular/LIB/help.cnf
```
so I guess it's a bug in Singular that the file is either installed or looked for in the wrong place.

In any case, copying that file to `$SAGE_LOCAL/share/singular/help.cnf` would be a good solution for this ticket.



---

archive/issue_comments_039091.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplying to [@jdemeyer](#comment:36):\n> There is actually a `help.cnf` installed in\n> \n> ```\n> $SAGE_LOCAL/share/singular/LIB/help.cnf\n> ```\n> so I guess it's a bug in Singular that the file is either installed or looked for in the wrong place.\n\nFrom reading [this change log](http://www.singular.uni-kl.de:8002/trac/changeset/46e5030de2b6094068cceec4cd764bad1a65a02c/git), I believe that .../share singular/LIB/ is the correct place.\n\nI'll file a ticket in the singular trac server. But for now, we need a work-around in Sage.",
    "created_at": "2015-09-10T12:08:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39091",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:37" align="right">comment:37</div>

Replying to [@jdemeyer](#comment:36):
> There is actually a `help.cnf` installed in
> 
> ```
> $SAGE_LOCAL/share/singular/LIB/help.cnf
> ```
> so I guess it's a bug in Singular that the file is either installed or looked for in the wrong place.

From reading [this change log](http://www.singular.uni-kl.de:8002/trac/changeset/46e5030de2b6094068cceec4cd764bad1a65a02c/git), I believe that .../share singular/LIB/ is the correct place.

I'll file a ticket in the singular trac server. But for now, we need a work-around in Sage.



---

archive/issue_comments_039092.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nI reported it [upstream](http://www.singular.uni-kl.de:8002/trac/ticket/740).",
    "created_at": "2015-09-10T12:17:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39092",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:38" align="right">comment:38</div>

I reported it [upstream](http://www.singular.uni-kl.de:8002/trac/ticket/740).



---

archive/issue_comments_039093.json:
```json
{
    "body": "Upstream: **Reported upstream. No feedback yet.**",
    "created_at": "2015-09-10T12:17:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39093",
    "user": "https://github.com/simon-king-jena"
}
```

Upstream: **Reported upstream. No feedback yet.**



---

archive/issue_comments_039094.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nI stand corrected! There used to be `$SAGE_LOCAL/share/singular/help.cnf`, but it is gone. The only help.cnf found under $SAGE_ROOT is upstream/src/latest/Singular/LIB/help.cnf.\n\nSo, apparently we don't install it at all!",
    "created_at": "2015-09-10T12:24:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39094",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:39" align="right">comment:39</div>

I stand corrected! There used to be `$SAGE_LOCAL/share/singular/help.cnf`, but it is gone. The only help.cnf found under $SAGE_ROOT is upstream/src/latest/Singular/LIB/help.cnf.

So, apparently we don't install it at all!



---

archive/issue_comments_039095.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nReplying to [@simon-king-jena](#comment:39):\n> So, apparently we don't install it at all!\n\nYou're right, this must have come from some earlier Singular version (note the date):\n\n```\n$ ls -l local/share/singular/LIB/help.cnf\n-rw-r--r-- 1 jdemeyer jdemeyer 3054 Oct 29  2014 local/share/singular/LIB/help.cnf\n```",
    "created_at": "2015-09-10T12:34:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39095",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:40" align="right">comment:40</div>

Replying to [@simon-king-jena](#comment:39):
> So, apparently we don't install it at all!

You're right, this must have come from some earlier Singular version (note the date):

```
$ ls -l local/share/singular/LIB/help.cnf
-rw-r--r-- 1 jdemeyer jdemeyer 3054 Oct 29  2014 local/share/singular/LIB/help.cnf
```



---

archive/issue_comments_039096.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nReplying to [@simon-king-jena](#comment:37):\n> But for now, we need a work-around in Sage.\n\nI suggest you just change `spkg-install` to touch the empty file `$SAGE_SHARE/singular/help.cnf`",
    "created_at": "2015-09-10T12:39:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39096",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:41" align="right">comment:41</div>

Replying to [@simon-king-jena](#comment:37):
> But for now, we need a work-around in Sage.

I suggest you just change `spkg-install` to touch the empty file `$SAGE_SHARE/singular/help.cnf`



---

archive/issue_comments_039097.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nReplying to [@jdemeyer](#comment:41):\n> Replying to [@simon-king-jena](#comment:37):\n> > But for now, we need a work-around in Sage.\n\n> I suggest you just change `spkg-install` to touch the empty file `$SAGE_SHARE/singular/help.cnf`\n\nWhy not modify spkg-install, so that it installs the missing file? Alternatively, we could patch Singular's Makefile (or whatever it is called) so that it installs the missing file. What is the preferred way?\n\nAlso, I'd like to know why Singular's Makefile does not install help.cnf. After all, if I understand correctly, it DOES install all the library files of Singular (which are in the same folder as help.cnf).\n\nHang on. I just notice that the singular spkg apparently screws completely. Or how would you explain that I find the complete UNPACKED singular source tree in SAGE_LOCAL/upstream/ ? Do we need a new Singular package?",
    "created_at": "2015-09-10T12:45:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39097",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:42" align="right">comment:42</div>

Replying to [@jdemeyer](#comment:41):
> Replying to [@simon-king-jena](#comment:37):
> > But for now, we need a work-around in Sage.

> I suggest you just change `spkg-install` to touch the empty file `$SAGE_SHARE/singular/help.cnf`

Why not modify spkg-install, so that it installs the missing file? Alternatively, we could patch Singular's Makefile (or whatever it is called) so that it installs the missing file. What is the preferred way?

Also, I'd like to know why Singular's Makefile does not install help.cnf. After all, if I understand correctly, it DOES install all the library files of Singular (which are in the same folder as help.cnf).

Hang on. I just notice that the singular spkg apparently screws completely. Or how would you explain that I find the complete UNPACKED singular source tree in SAGE_LOCAL/upstream/ ? Do we need a new Singular package?



---

archive/issue_comments_039098.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nUpstream says that help.cnf should indeed be put into the same folder as all the other library files, i.e., local/share/singular/.",
    "created_at": "2015-09-10T12:47:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39098",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:43" align="right">comment:43</div>

Upstream says that help.cnf should indeed be put into the same folder as all the other library files, i.e., local/share/singular/.



---

archive/issue_comments_039099.json:
```json
{
    "body": "Changed upstream from **Reported upstream. No feedback yet.** to **Reported upstream. Developers deny it's a bug.**",
    "created_at": "2015-09-10T12:47:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39099",
    "user": "https://github.com/simon-king-jena"
}
```

Changed upstream from **Reported upstream. No feedback yet.** to **Reported upstream. Developers deny it's a bug.**



---

archive/issue_comments_039100.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nReplying to [@simon-king-jena](#comment:42):\n> Replying to [@jdemeyer](#comment:41):\n> > Replying to [@simon-king-jena](#comment:37):\n> > > But for now, we need a work-around in Sage.\n\n> > I suggest you just change `spkg-install` to touch the empty file `$SAGE_SHARE/singular/help.cnf`\n\n> \n> Why not modify spkg-install, so that it installs the missing file? Alternatively, we could patch Singular's Makefile (or whatever it is called) so that it installs the missing file. What is the preferred way?\n\nI don't really care much.\n\n> Hang on. I just notice that the singular spkg apparently screws completely. Or how would you explain that I find the complete UNPACKED singular source tree in SAGE_LOCAL/upstream/ ?\n\nProbably you once extracted the tarball in `upstream`? It's not the package which does that...",
    "created_at": "2015-09-10T12:47:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39100",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:44" align="right">comment:44</div>

Replying to [@simon-king-jena](#comment:42):
> Replying to [@jdemeyer](#comment:41):
> > Replying to [@simon-king-jena](#comment:37):
> > > But for now, we need a work-around in Sage.

> > I suggest you just change `spkg-install` to touch the empty file `$SAGE_SHARE/singular/help.cnf`

> 
> Why not modify spkg-install, so that it installs the missing file? Alternatively, we could patch Singular's Makefile (or whatever it is called) so that it installs the missing file. What is the preferred way?

I don't really care much.

> Hang on. I just notice that the singular spkg apparently screws completely. Or how would you explain that I find the complete UNPACKED singular source tree in SAGE_LOCAL/upstream/ ?

Probably you once extracted the tarball in `upstream`? It's not the package which does that...



---

archive/issue_comments_039101.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nReplying to [@jdemeyer](#comment:44):\n> > Why not modify spkg-install, so that it installs the missing file? Alternatively, we could patch Singular's Makefile (or whatever it is called) so that it installs the missing file. What is the preferred way?\n\n> I don't really care much.\n\nThen I guess we should do it in spkg-install.\n \n> Probably you once extracted the tarball in `upstream`? It's not the package which does that...\n\nCould be. I just deleted it and did \"sage -f singular\".",
    "created_at": "2015-09-10T13:08:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39101",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:45" align="right">comment:45</div>

Replying to [@jdemeyer](#comment:44):
> > Why not modify spkg-install, so that it installs the missing file? Alternatively, we could patch Singular's Makefile (or whatever it is called) so that it installs the missing file. What is the preferred way?

> I don't really care much.

Then I guess we should do it in spkg-install.
 
> Probably you once extracted the tarball in `upstream`? It's not the package which does that...

Could be. I just deleted it and did "sage -f singular".



---

archive/issue_comments_039102.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nThere's also `#sagemath` on freenode.  Just saying...",
    "created_at": "2015-09-10T13:13:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39102",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:46" align="right">comment:46</div>

There's also `#sagemath` on freenode.  Just saying...



---

archive/issue_comments_039103.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nReplying to [@nexttime](#comment:46):\n> There's also `#sagemath` on freenode.  Just saying...\n\nMeaning what?",
    "created_at": "2015-09-10T15:31:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39103",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:47" align="right">comment:47</div>

Replying to [@nexttime](#comment:46):
> There's also `#sagemath` on freenode.  Just saying...

Meaning what?



---

archive/issue_comments_039104.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nReplying to [@simon-king-jena](#comment:47):\n> Replying to [@nexttime](#comment:46):\n> > There's also `#sagemath` on freenode.  Just saying...\n\n> \n> Meaning what?\n\nOverfull inbox, TeX would have said. ;-)",
    "created_at": "2015-09-10T19:52:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39104",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:48" align="right">comment:48</div>

Replying to [@simon-king-jena](#comment:47):
> Replying to [@nexttime](#comment:46):
> > There's also `#sagemath` on freenode.  Just saying...

> 
> Meaning what?

Overfull inbox, TeX would have said. ;-)



---

archive/issue_comments_039105.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nIt seems the current agreement seems to be to modify spkg-install, so that it copies help.cnf from the singular sources to `$SAGE_SHARE/singular/`. What is the path to the singular sources while spkg-install is executed?",
    "created_at": "2015-09-11T09:34:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39105",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:49" align="right">comment:49</div>

It seems the current agreement seems to be to modify spkg-install, so that it copies help.cnf from the singular sources to `$SAGE_SHARE/singular/`. What is the path to the singular sources while spkg-install is executed?



---

archive/issue_comments_039106.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nReplying to [@simon-king-jena](#comment:49):\n> What is the path to the singular sources while spkg-install is executed?\n\nIt's the current working directory.",
    "created_at": "2015-09-11T09:37:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39106",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:50" align="right">comment:50</div>

Replying to [@simon-king-jena](#comment:49):
> What is the path to the singular sources while spkg-install is executed?

It's the current working directory.



---

archive/issue_comments_039107.json:
```json
{
    "body": "Changed branch from **[u/SimonKing/singular_version_yielding_error](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/singular_version_yielding_error)** to **[u/jmantysalo/singular_version_yielding_error](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/singular_version_yielding_error)**",
    "created_at": "2016-10-24T09:19:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39107",
    "user": "https://github.com/jm58660"
}
```

Changed branch from **[u/SimonKing/singular_version_yielding_error](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/singular_version_yielding_error)** to **[u/jmantysalo/singular_version_yielding_error](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/singular_version_yielding_error)**



---

archive/issue_comments_039108.json:
```json
{
    "body": "Changed commit from **[`a2ae8c8`](https://github.com/sagemath/sagetrac-mirror/commit/a2ae8c869553c8aff5404ef2cfcaf95d2f8eac52)** to **[`87c73ac`](https://github.com/sagemath/sagetrac-mirror/commit/87c73ac3a8a19d0779b9f31f21b23b629a0fe82e)**",
    "created_at": "2016-10-24T09:23:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39108",
    "user": "https://github.com/jm58660"
}
```

Changed commit from **[`a2ae8c8`](https://github.com/sagemath/sagetrac-mirror/commit/a2ae8c869553c8aff5404ef2cfcaf95d2f8eac52)** to **[`87c73ac`](https://github.com/sagemath/sagetrac-mirror/commit/87c73ac3a8a19d0779b9f31f21b23b629a0fe82e)**



---

archive/issue_events_071264.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-10-24T09:23:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5994#event-71264"
}
```



---

archive/issue_events_071265.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-10-24T09:23:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5994#event-71265"
}
```



---

archive/issue_comments_039109.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nError has gone away with Singular 4.\n\nI added doctest.\n\nWhat goes to output format, I think this should be changed in all `*_version()` commands at once. (Assuming somebody would care, which is propably not true.)\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87c73ac3a8a19d0779b9f31f21b23b629a0fe82e\"><code>87c73ac</code></a></td><td><code>Doctest singular_version().</code></td></tr></table>\n",
    "created_at": "2016-10-24T09:23:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39109",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:52" align="right">comment:52</div>

Error has gone away with Singular 4.

I added doctest.

What goes to output format, I think this should be changed in all `*_version()` commands at once. (Assuming somebody would care, which is propably not true.)

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87c73ac3a8a19d0779b9f31f21b23b629a0fe82e"><code>87c73ac</code></a></td><td><code>Doctest singular_version().</code></td></tr></table>




---

archive/issue_comments_039110.json:
```json
{
    "body": "Changed author from **William Stein, Simon King** to **Jori M\u00e4ntysalo**",
    "created_at": "2016-10-24T09:23:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39110",
    "user": "https://github.com/jm58660"
}
```

Changed author from **William Stein, Simon King** to **Jori MÃ¤ntysalo**



---

archive/issue_comments_039111.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,67 +1,6 @@\n First of all, `singular.version()` does not work. When one starts sage and calls it, there is an error:\n \n-```\n-----------------------------------------------------------------------\n-| Sage Version 3.4.1, Release Date: 2009-04-21                       |\n-| Type notebook() for the GUI, and license() for information.        |\n-----------------------------------------------------------------------\n-sage: singular.version()\n-ERROR: An unexpected error occurred while tokenizing input\n-The following traceback may be corrupted or invalid\n-The error message is: ('EOF in multi-line statement', (795, 0))\n-\n----------------------------------------------------------------------------\n-RuntimeError                              Traceback (most recent call last)\n-\n-/home/SimonKing/.sage/temp/sage.math.washington.edu/10897/_home_SimonKing__sage_init_sage_0.py in <module>()\n-\n-/usr/local/sage/local/lib/python2.5/site-packages/sage/interfaces/singular.pyc in version(self)\n-   1012         EXAMPLES:\n-   1013         \"\"\"\n--> 1014         return singular_version()\n-   1015\n-   1016     def _function_class(self):\n-\n-/usr/local/sage/local/lib/python2.5/site-packages/sage/interfaces/singular.pyc in singular_version()\n-   1807     EXAMPLES:\n-   1808     \"\"\"\n--> 1809     return singular.eval('system(\"--version\");')\n-   1810\n-   1811\n-\n-/usr/local/sage/local/lib/python2.5/site-packages/sage/interfaces/singular.pyc in eval(self, x, allow_semicolon, strip, **kwds)\n-    541\n-    542         if s.find(\"error\") != -1 or s.find(\"Segment fault\") != -1:\n---> 543             raise RuntimeError, 'Singular error:\\n%s'%s\n-    544\n-    545         if get_verbose() > 0:\n-\n-RuntimeError: Singular error:\n-   ? cannot open `help.cnf`\n-Singular for x86_64-Linux version 3-0-4 (3044-2009031122)  Mar 11 2009 22:29:08\n-with\n-        factory(@(#) factoryVersion = 3.0.4),libfac(3.0.4,Mar 2008),\n-        GMP(4.2),NTL(5.4.2),static readline,Plural,DBM,\n-        namespaces,dynamic modules,dynamic p_Procs,OM_CHECK=0,OM_TRACK=0,random=1241602325\n-        CC= gcc -O3 -g -fPIC -pipe -DNDEBUG -DOM_NDEBUG -Dx86_64_Linux -DHAVE_CONFIG_H,\n-        CXX= g++ -O3 -g -fPIC -pipe -DNDEBUG -DOM_NDEBUG -Dx86_64_Linux -DHAVE_CONFIG_H (4.2.4 (Ubuntu 4.2.4-1ubuntu3))\n-argv[0]   :     Singular-3-0-4\n-SearchPath:     /usr/local/sage/local/LIB\n-Singular  :     /usr/local/sage/local/bin/Singular-3-0-4\n-BinDir    :     /usr/local/sage/local/bin\n-RootDir   :     /usr/local/sage/local\n-DefaultDir:     /usr/local/sage/local\n-InfoFile  :\n-IdxFile   :\n-HtmlDir   :\n-ManualUrl :     http://www.singular.uni-kl.de/Manual/3-0-4\n-ExDir     :\n-Path      :     /usr/local/sage/local/bin:/usr/local/sage/local/polymake/bin:/usr/local/sage:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games\n-EmacsDir  :\n-Available HelpBrowsers: dummy, emacs,\n-Current HelpBrowser: dummy\n-   ? error occurred in STDIN line 3: `system(\"--version\");`\n-```\n+E: There was an error that is corrected with Singular 4.\n \n Secondly, neither `singular.version` nor `singular_version` have doc tests.\n \n``````\n",
    "created_at": "2016-10-24T09:23:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39111",
    "user": "https://github.com/jm58660"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,67 +1,6 @@
 First of all, `singular.version()` does not work. When one starts sage and calls it, there is an error:
 
-```
-----------------------------------------------------------------------
-| Sage Version 3.4.1, Release Date: 2009-04-21                       |
-| Type notebook() for the GUI, and license() for information.        |
-----------------------------------------------------------------------
-sage: singular.version()
-ERROR: An unexpected error occurred while tokenizing input
-The following traceback may be corrupted or invalid
-The error message is: ('EOF in multi-line statement', (795, 0))
-
----------------------------------------------------------------------------
-RuntimeError                              Traceback (most recent call last)
-
-/home/SimonKing/.sage/temp/sage.math.washington.edu/10897/_home_SimonKing__sage_init_sage_0.py in <module>()
-
-/usr/local/sage/local/lib/python2.5/site-packages/sage/interfaces/singular.pyc in version(self)
-   1012         EXAMPLES:
-   1013         """
--> 1014         return singular_version()
-   1015
-   1016     def _function_class(self):
-
-/usr/local/sage/local/lib/python2.5/site-packages/sage/interfaces/singular.pyc in singular_version()
-   1807     EXAMPLES:
-   1808     """
--> 1809     return singular.eval('system("--version");')
-   1810
-   1811
-
-/usr/local/sage/local/lib/python2.5/site-packages/sage/interfaces/singular.pyc in eval(self, x, allow_semicolon, strip, **kwds)
-    541
-    542         if s.find("error") != -1 or s.find("Segment fault") != -1:
---> 543             raise RuntimeError, 'Singular error:\n%s'%s
-    544
-    545         if get_verbose() > 0:
-
-RuntimeError: Singular error:
-   ? cannot open `help.cnf`
-Singular for x86_64-Linux version 3-0-4 (3044-2009031122)  Mar 11 2009 22:29:08
-with
-        factory(@(#) factoryVersion = 3.0.4),libfac(3.0.4,Mar 2008),
-        GMP(4.2),NTL(5.4.2),static readline,Plural,DBM,
-        namespaces,dynamic modules,dynamic p_Procs,OM_CHECK=0,OM_TRACK=0,random=1241602325
-        CC= gcc -O3 -g -fPIC -pipe -DNDEBUG -DOM_NDEBUG -Dx86_64_Linux -DHAVE_CONFIG_H,
-        CXX= g++ -O3 -g -fPIC -pipe -DNDEBUG -DOM_NDEBUG -Dx86_64_Linux -DHAVE_CONFIG_H (4.2.4 (Ubuntu 4.2.4-1ubuntu3))
-argv[0]   :     Singular-3-0-4
-SearchPath:     /usr/local/sage/local/LIB
-Singular  :     /usr/local/sage/local/bin/Singular-3-0-4
-BinDir    :     /usr/local/sage/local/bin
-RootDir   :     /usr/local/sage/local
-DefaultDir:     /usr/local/sage/local
-InfoFile  :
-IdxFile   :
-HtmlDir   :
-ManualUrl :     http://www.singular.uni-kl.de/Manual/3-0-4
-ExDir     :
-Path      :     /usr/local/sage/local/bin:/usr/local/sage/local/polymake/bin:/usr/local/sage:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games
-EmacsDir  :
-Available HelpBrowsers: dummy, emacs,
-Current HelpBrowser: dummy
-   ? error occurred in STDIN line 3: `system("--version");`
-```
+E: There was an error that is corrected with Singular 4.
 
 Secondly, neither `singular.version` nor `singular_version` have doc tests.
 
``````




---

archive/issue_events_071266.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-10-24T09:23:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5994#event-71266"
}
```



---

archive/issue_events_071267.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-10-24T09:23:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5994#event-71267"
}
```



---

archive/issue_events_071268.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-10-24T09:23:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5994#event-71268"
}
```



---

archive/issue_events_071269.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-10-24T09:23:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5994#event-71269"
}
```



---

archive/issue_comments_039112.json:
```json
{
    "body": "Changed upstream from **Reported upstream. Developers deny it's a bug.** to **Completely fixed; Fix reported upstream**",
    "created_at": "2016-10-24T09:23:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39112",
    "user": "https://github.com/jm58660"
}
```

Changed upstream from **Reported upstream. Developers deny it's a bug.** to **Completely fixed; Fix reported upstream**



---

archive/issue_comments_039113.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,27 +1 @@\n-First of all, `singular.version()` does not work. When one starts sage and calls it, there is an error:\n-\n-E: There was an error that is corrected with Singular 4.\n-\n-Secondly, neither `singular.version` nor `singular_version` have doc tests.\n-\n-Thirdly, if it is called again, it kind of works:\n-\n-```\n-sage: singular.version()\n-'Singular for x86_64-Linux version 3-0-4 (3044-2009031122)  Mar 11 2009 22:29:08\\nwith\\n\\tfactory(@(#) factoryVersion = 3.0.4),libfac(3.0.4,Mar 2008),\\n\\tGMP(4.2),NTL(5.4.2),static readline,Plural,DBM,\\n\\tnamespaces,dynamic modules,dynamic p_Procs,OM_CHECK=0,OM_TRACK=0,random=1241602325\\n\\tCC= gcc -O3 -g -fPIC -pipe -DNDEBUG -DOM_NDEBUG -Dx86_64_Linux -DHAVE_CONFIG_H,\\n\\tCXX= g++ -O3 -g -fPIC -pipe -DNDEBUG -DOM_NDEBUG -Dx86_64_Linux -DHAVE_CONFIG_H (4.2.4 (Ubuntu 4.2.4-1ubuntu3))\\nargv[0]   :\\tSingular-3-0-4\\nSearchPath:\\t/usr/local/sage/local/LIB\\nSingular  :\\t/usr/local/sage/local/bin/Singular-3-0-4\\nBinDir    :\\t/usr/local/sage/local/bin\\nRootDir   :\\t/usr/local/sage/local\\nDefaultDir:\\t/usr/local/sage/local\\nInfoFile  :\\t\\nIdxFile   :\\t\\nHtmlDir   :\\t\\nManualUrl :\\thttp://www.singular.uni-kl.de/Manual/3-0-4\\nExDir     :\\t\\nPath      :\\t/usr/local/sage/local/bin:/usr/local/sage/local/polymake/bin:/usr/local/sage:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games\\nEmacsDir  :\\t\\nAvailable HelpBrowsers: dummy, emacs, \\nCurrent HelpBrowser: dummy '\n-```\n-\n-Finally, I believe that the output of `singular.version` is nasty. If I ask for the version of Singular, I expect to get, say, a tuple of integers, for example:\n-\n-```\n-sage: def my_singular_version():\n-....:     return tuple([Integer(x) for x in singular.eval('system(\"version\")')])\n-....:\n-sage: my_singular_version()\n-(3, 0, 4, 4)\n-```\n-\n-I suggest to remake `singular.version` so that it returns a tuple of integers, rather than a cryptic string.\n-\n-Problem though: Would this break code?\n-\n+Neither `singular.version` nor `singular_version` have doc tests.\n``````\n",
    "created_at": "2016-10-26T17:47:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39113",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,27 +1 @@
-First of all, `singular.version()` does not work. When one starts sage and calls it, there is an error:
-
-E: There was an error that is corrected with Singular 4.
-
-Secondly, neither `singular.version` nor `singular_version` have doc tests.
-
-Thirdly, if it is called again, it kind of works:
-
-```
-sage: singular.version()
-'Singular for x86_64-Linux version 3-0-4 (3044-2009031122)  Mar 11 2009 22:29:08\nwith\n\tfactory(@(#) factoryVersion = 3.0.4),libfac(3.0.4,Mar 2008),\n\tGMP(4.2),NTL(5.4.2),static readline,Plural,DBM,\n\tnamespaces,dynamic modules,dynamic p_Procs,OM_CHECK=0,OM_TRACK=0,random=1241602325\n\tCC= gcc -O3 -g -fPIC -pipe -DNDEBUG -DOM_NDEBUG -Dx86_64_Linux -DHAVE_CONFIG_H,\n\tCXX= g++ -O3 -g -fPIC -pipe -DNDEBUG -DOM_NDEBUG -Dx86_64_Linux -DHAVE_CONFIG_H (4.2.4 (Ubuntu 4.2.4-1ubuntu3))\nargv[0]   :\tSingular-3-0-4\nSearchPath:\t/usr/local/sage/local/LIB\nSingular  :\t/usr/local/sage/local/bin/Singular-3-0-4\nBinDir    :\t/usr/local/sage/local/bin\nRootDir   :\t/usr/local/sage/local\nDefaultDir:\t/usr/local/sage/local\nInfoFile  :\t\nIdxFile   :\t\nHtmlDir   :\t\nManualUrl :\thttp://www.singular.uni-kl.de/Manual/3-0-4\nExDir     :\t\nPath      :\t/usr/local/sage/local/bin:/usr/local/sage/local/polymake/bin:/usr/local/sage:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games\nEmacsDir  :\t\nAvailable HelpBrowsers: dummy, emacs, \nCurrent HelpBrowser: dummy '
-```
-
-Finally, I believe that the output of `singular.version` is nasty. If I ask for the version of Singular, I expect to get, say, a tuple of integers, for example:
-
-```
-sage: def my_singular_version():
-....:     return tuple([Integer(x) for x in singular.eval('system("version")')])
-....:
-sage: my_singular_version()
-(3, 0, 4, 4)
-```
-
-I suggest to remake `singular.version` so that it returns a tuple of integers, rather than a cryptic string.
-
-Problem though: Would this break code?
-
+Neither `singular.version` nor `singular_version` have doc tests.
``````




---

archive/issue_events_071270.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-10-26T17:47:34Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "title_is": "singular.version() has no doctest",
    "title_was": "singular.version() yields an error when first called, has no doctest, and has a strange output imo",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5994#event-71270"
}
```



---

archive/issue_events_071271.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-10-26T17:48:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5994#event-71271"
}
```



---

archive/issue_events_071272.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-10-26T17:48:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5994#event-71272"
}
```



---

archive/issue_comments_039114.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2016-10-26T17:48:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39114",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_events_071273.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-11-02T19:20:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5994#event-71273"
}
```



---

archive/issue_events_071274.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "5918caea031c6b670e4e93b0a71ba120045d617f",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-11-02T19:20:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5994#event-71274"
}
```



---

archive/issue_comments_039115.json:
```json
{
    "body": "Changed branch from **[u/jmantysalo/singular_version_yielding_error](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/singular_version_yielding_error)** to **[`87c73ac`](https://github.com/sagemath/sagetrac-mirror/commit/87c73ac3a8a19d0779b9f31f21b23b629a0fe82e)**",
    "created_at": "2016-11-02T19:20:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5994",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5994#issuecomment-39115",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jmantysalo/singular_version_yielding_error](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/singular_version_yielding_error)** to **[`87c73ac`](https://github.com/sagemath/sagetrac-mirror/commit/87c73ac3a8a19d0779b9f31f21b23b629a0fe82e)**
