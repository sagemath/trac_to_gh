# Issue 5615: [not ready for review] use labels-as-values for fast_callable under gcc

archive/issues_005615.json:
```json
{
    "assignees": [],
    "body": "This patch uses gcc's labels-as-values extension to (theoretically) speed up the instruction dispatch.  Unfortunately, on my 32-bit x86 laptop, it's about the same speed as before the patch (maybe a little slower).  I think this is due to poor instruction scheduling (that gcc can't fix with -fno-strict-aliasing), but trying to move the instructions around by hand makes the problem worse (it adds register pressure, which makes the register allocator do very bad things on 32-bit x86).\n\nDoctests do NOT pass, and the patch is not fully documented. (I believe the patch works; the doctests that fail are looking at fast_callable internals that changed.) \n\nAssignee: **cwitty**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/5615_\n\n",
    "created_at": "2009-03-26T06:55:34Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20basic%20arithmetic",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/wishlist%20item",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "[not ready for review] use labels-as-values for fast_callable under gcc",
    "type": "issue",
    "updated_at": "2009-03-26T06:55:34Z",
    "url": "https://github.com/sagemath/sage/issues/5615",
    "user": "https://github.com/sagetrac-cwitty"
}
```
This patch uses gcc's labels-as-values extension to (theoretically) speed up the instruction dispatch.  Unfortunately, on my 32-bit x86 laptop, it's about the same speed as before the patch (maybe a little slower).  I think this is due to poor instruction scheduling (that gcc can't fix with -fno-strict-aliasing), but trying to move the instructions around by hand makes the problem worse (it adds register pressure, which makes the register allocator do very bad things on 32-bit x86).

Doctests do NOT pass, and the patch is not fully documented. (I believe the patch works; the doctests that fail are looking at fast_callable internals that changed.) 

Assignee: **cwitty**

_Issue created by migration from https://trac.sagemath.org/ticket/5615_





---

archive/issue_events_058202.json:
```json
{
    "actor": "https://github.com/sagetrac-cwitty",
    "created_at": "2009-03-26T06:55:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5615",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20basic%20arithmetic",
    "label_color": "0000ff",
    "label_name": "component: basic arithmetic",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5615#event-58202"
}
```



---

archive/issue_events_058203.json:
```json
{
    "actor": "https://github.com/sagetrac-cwitty",
    "created_at": "2009-03-26T06:55:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5615",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5615#event-58203"
}
```



---

archive/issue_events_058204.json:
```json
{
    "actor": "https://github.com/sagetrac-cwitty",
    "created_at": "2009-03-26T06:55:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5615",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5615#event-58204"
}
```



---

archive/issue_events_058205.json:
```json
{
    "actor": "https://github.com/sagetrac-cwitty",
    "created_at": "2009-03-26T06:55:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5615",
    "label": "https://github.com/sagemath/sage/labels/wishlist%20item",
    "label_color": "e81ff9",
    "label_name": "wishlist item",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5615#event-58205"
}
```



---

archive/issue_events_058206.json:
```json
{
    "actor": "https://github.com/sagetrac-cwitty",
    "created_at": "2009-03-26T06:55:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5615",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5615#event-58206"
}
```



---

archive/issue_comments_036773.json:
```json
{
    "body": "Attachment: **[preliminary-labels-as-values.patch.gz](https://github.com/sagemath/sage/files/ticket5615/preliminary-labels-as-values.patch.gz)**",
    "created_at": "2009-03-26T06:55:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5615",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5615#issuecomment-36773",
    "user": "https://github.com/sagetrac-cwitty"
}
```

Attachment: **[preliminary-labels-as-values.patch.gz](https://github.com/sagemath/sage/files/ticket5615/preliminary-labels-as-values.patch.gz)**
