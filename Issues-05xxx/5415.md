# Issue 5415: problems with multifactorial?

archive/issues_005415.json:
```json
{
    "assignees": [
        "https://github.com/sagetrac-iconjack"
    ],
    "body": "The multifactorial method on integers is different than the one at http://mathworld.wolfram.com/Multifactorial.html and http://www.research.att.com/~njas/sequences/A007661; unless there are multiple competing definitions of multifactorial, this is a bug.\n\n(The references give, for example, (5).multifactorial(3) == 10, whereas Sage currently returns 5.)\n\nThere are further problems: k is assumed to be a C-int. Hence,\n\n```\nsage: a=2^64\nsage: a.multifactorial(a)\n```\ndoesn't work, whereas the appropriate value, a, would be no problem to represent.\n\nHow badly do people need these numbers? for which ranges should the computation be optimized? The current implementation can easily be adjusted to give answers that agree with the definition elsewhere, fairly efficiently, for ranges where k fits easily in a \"long\".\n\nIndeed, the current implementation refuses to compute the multifactorial if n itself doesn't fit in a long. The claim in the current error message, \"This is probably OK, since the answer would have billions of digits.\" is not quite true: if the number of digits is about (n/k) times the number of digits in n, so as long as n/k isn't too large, there isn't really an issue. It may well be that applications of multifactorial never venture in those ranges, though.\n\n\nBranch/Commit: **[`0204235`](https://github.com/sagemath/sagetrac-mirror/commit/020423572f0b240cd857b26fc7b750080ca3ed39)**\n\nStopgaps: **todo**\n\nReviewer: **Vincent Delecroix, Fr\u00e9d\u00e9ric Chapoton**\n\nAuthor: **Jack Kennedy**\n\nComponent: **basic arithmetic**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/5415_\n\n",
    "closed_at": "2017-05-27T23:42:49Z",
    "created_at": "2009-03-01T22:56:37Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20basic%20arithmetic",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "problems with multifactorial?",
    "type": "issue",
    "updated_at": "2017-05-27T23:42:49Z",
    "url": "https://github.com/sagemath/sage/issues/5415",
    "user": "https://github.com/sagetrac-cwitty"
}
```
The multifactorial method on integers is different than the one at http://mathworld.wolfram.com/Multifactorial.html and http://www.research.att.com/~njas/sequences/A007661; unless there are multiple competing definitions of multifactorial, this is a bug.

(The references give, for example, (5).multifactorial(3) == 10, whereas Sage currently returns 5.)

There are further problems: k is assumed to be a C-int. Hence,

```
sage: a=2^64
sage: a.multifactorial(a)
```
doesn't work, whereas the appropriate value, a, would be no problem to represent.

How badly do people need these numbers? for which ranges should the computation be optimized? The current implementation can easily be adjusted to give answers that agree with the definition elsewhere, fairly efficiently, for ranges where k fits easily in a "long".

Indeed, the current implementation refuses to compute the multifactorial if n itself doesn't fit in a long. The claim in the current error message, "This is probably OK, since the answer would have billions of digits." is not quite true: if the number of digits is about (n/k) times the number of digits in n, so as long as n/k isn't too large, there isn't really an issue. It may well be that applications of multifactorial never venture in those ranges, though.


Branch/Commit: **[`0204235`](https://github.com/sagemath/sagetrac-mirror/commit/020423572f0b240cd857b26fc7b750080ca3ed39)**

Stopgaps: **todo**

Reviewer: **Vincent Delecroix, Frédéric Chapoton**

Author: **Jack Kennedy**

Component: **basic arithmetic**

_Issue created by migration from https://trac.sagemath.org/ticket/5415_





---

archive/issue_events_063713.json:
```json
{
    "actor": "https://github.com/sagetrac-cwitty",
    "created_at": "2009-03-01T22:56:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "milestone_number": null,
    "milestone_title": "sage-3.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63713"
}
```



---

archive/issue_events_063714.json:
```json
{
    "actor": "https://github.com/sagetrac-cwitty",
    "created_at": "2009-03-01T22:56:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20basic%20arithmetic",
    "label_color": "0000ff",
    "label_name": "c: basic arithmetic",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63714"
}
```



---

archive/issue_events_063715.json:
```json
{
    "actor": "https://github.com/sagetrac-cwitty",
    "created_at": "2009-03-01T22:56:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63715"
}
```



---

archive/issue_events_063716.json:
```json
{
    "actor": "https://github.com/sagetrac-cwitty",
    "created_at": "2009-03-01T22:56:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63716"
}
```



---

archive/issue_events_063717.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2009-03-01T22:56:37Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "subject": "https://github.com/sagetrac-cwitty",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63717"
}
```



---

archive/issue_events_063718.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-03-02T06:40:37Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "milestone_number": null,
    "milestone_title": "sage-3.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63718"
}
```



---

archive/issue_events_063719.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-03-02T06:40:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "milestone_number": null,
    "milestone_title": "sage-3.4.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63719"
}
```



---

archive/issue_comments_033585.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nBetter luck in Sage 3.4.1.\n\nCheers,\n\nMichael",
    "created_at": "2009-03-02T06:40:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33585",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:1" align="right">comment:1</div>

Better luck in Sage 3.4.1.

Cheers,

Michael



---

archive/issue_comments_033586.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI think the problem is that not enough factors are included.  Actually, there are two problems: in the base case, it should return n, not 1; that is, make this change:\n\n```\n         # base case\n         if 0 < n < k:\n-            return ONE\n+            return n\n```\nAfter making this change, I'm still getting the wrong answers for `a.multifactorial(3)` whenever a is congruent to 2 mod 3 (except for a=2), and for `a.multifactorial(4)` whenever a is congruent to 2 or 3 mod 4 (except for a=2,3).  It seems that not enough factors are used; for example, 10.multifactorial(4) should be 10 x 6 x 2 = 120, but Sage computes it as 10 x 6 = 60.\n\nIf we fix this, we can put in doctests like the following:\n\n```\nsage: L = sloane_sequence(6882)[2]  # optional - internet\nSearching Sloane's online database...\nsage: all([Integer(a).multifactorial(2) == L[a] for a in range(1,20)])    # optional - internet\nTrue\n```",
    "created_at": "2009-07-22T02:12:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33586",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:2" align="right">comment:2</div>

I think the problem is that not enough factors are included.  Actually, there are two problems: in the base case, it should return n, not 1; that is, make this change:

```
         # base case
         if 0 < n < k:
-            return ONE
+            return n
```
After making this change, I'm still getting the wrong answers for `a.multifactorial(3)` whenever a is congruent to 2 mod 3 (except for a=2), and for `a.multifactorial(4)` whenever a is congruent to 2 or 3 mod 4 (except for a=2,3).  It seems that not enough factors are used; for example, 10.multifactorial(4) should be 10 x 6 x 2 = 120, but Sage computes it as 10 x 6 = 60.

If we fix this, we can put in doctests like the following:

```
sage: L = sloane_sequence(6882)[2]  # optional - internet
Searching Sloane's online database...
sage: all([Integer(a).multifactorial(2) == L[a] for a in range(1,20)])    # optional - internet
True
```



---

archive/issue_comments_033587.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nA careful look at Sloane's functions reveals that the base case is indeed =1, according to his definitions.  I'm not sure if this is standard, but Mathworld doesn't seem to talk about those cases carefully.  On the other hand, Wikipedia [http://en.wikipedia.org/wiki/Factorial#Multifactorials](http://en.wikipedia.org/wiki/Factorial#Multifactorials) suggests that this is somewhat standard.",
    "created_at": "2009-09-29T15:34:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33587",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:3" align="right">comment:3</div>

A careful look at Sloane's functions reveals that the base case is indeed =1, according to his definitions.  I'm not sure if this is standard, but Mathworld doesn't seem to talk about those cases carefully.  On the other hand, Wikipedia [http://en.wikipedia.org/wiki/Factorial#Multifactorials](http://en.wikipedia.org/wiki/Factorial#Multifactorials) suggests that this is somewhat standard.



---

archive/issue_comments_033588.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nOr an even more careful look reveals that Sloane starts at n=0 - my bad.  So there is an inconsistency in the definitions.  Sloane's sequences agree with jhpalmieri, while Sage agrees with Wikipedia.\n\nI'm ccing: the author of multifactorial in Sage, who will hopefully weigh in on what definition is okay.",
    "created_at": "2009-09-29T15:45:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33588",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:4" align="right">comment:4</div>

Or an even more careful look reveals that Sloane starts at n=0 - my bad.  So there is an inconsistency in the definitions.  Sloane's sequences agree with jhpalmieri, while Sage agrees with Wikipedia.

I'm ccing: the author of multifactorial in Sage, who will hopefully weigh in on what definition is okay.



---

archive/issue_comments_033589.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI needed the double factorial for something (I can't even remember what now) so I just wrote this. It sounds like there's several competing definitions, but wikipedia is not necessarily the most authoritative. \n\nI would ask on sage-combinat what the \"right\" definition is, they're more likely to know.",
    "created_at": "2009-09-29T18:18:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33589",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:5" align="right">comment:5</div>

I needed the double factorial for something (I can't even remember what now) so I just wrote this. It sounds like there's several competing definitions, but wikipedia is not necessarily the most authoritative. 

I would ask on sage-combinat what the "right" definition is, they're more likely to know.



---

archive/issue_comments_033590.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nCan you do that?  I'm not subscribed to them.  Thanks.",
    "created_at": "2009-09-29T18:59:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33590",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:6" align="right">comment:6</div>

Can you do that?  I'm not subscribed to them.  Thanks.



---

archive/issue_comments_033591.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI would certainly want (5).multifactorial(3) to be 10 and not 5.",
    "created_at": "2009-09-30T05:01:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33591",
    "user": "https://github.com/dandrake"
}
```

<div id="comment:7" align="right">comment:7</div>

I would certainly want (5).multifactorial(3) to be 10 and not 5.



---

archive/issue_comments_033592.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@robertwb](#comment:5):\n> I needed the double factorial for something (I can't even remember what now) so I just wrote this. It sounds like there's several competing definitions, but wikipedia is not necessarily the most authoritative. \n\n(I think it was for making sure gamma(3/2) etc. were correct.)\n> \n> I would ask on sage-combinat what the \"right\" definition is, they're more likely to know. \n\nBut one should definitely document that there isn't a universally agreed-upon definition.\n\nCan you indicate what one would change in integer.pyx?   Changing things that seem right yield horrible allocation errors.",
    "created_at": "2009-09-30T17:18:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33592",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@robertwb](#comment:5):
> I needed the double factorial for something (I can't even remember what now) so I just wrote this. It sounds like there's several competing definitions, but wikipedia is not necessarily the most authoritative. 

(I think it was for making sure gamma(3/2) etc. were correct.)
> 
> I would ask on sage-combinat what the "right" definition is, they're more likely to know. 

But one should definitely document that there isn't a universally agreed-upon definition.

Can you indicate what one would change in integer.pyx?   Changing things that seem right yield horrible allocation errors.



---

archive/issue_events_063720.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63720"
}
```



---

archive/issue_events_063721.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63721"
}
```



---

archive/issue_events_063722.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63722"
}
```



---

archive/issue_events_063723.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63723"
}
```



---

archive/issue_events_063724.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63724"
}
```



---

archive/issue_events_063725.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63725"
}
```



---

archive/issue_events_063726.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63726"
}
```



---

archive/issue_events_063727.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63727"
}
```



---

archive/issue_comments_033593.json:
```json
{
    "body": "Stopgaps: **todo**",
    "created_at": "2015-08-19T23:04:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33593",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

Stopgaps: **todo**



---

archive/issue_comments_033594.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI have tried to redefine multifactorial function.\nPlease review.\nhttps://github.com/sagemath/sage/pull/52",
    "created_at": "2015-11-02T09:08:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33594",
    "user": "https://github.com/sagetrac-prateek-cs14"
}
```

<div id="comment:14" align="right">comment:14</div>

I have tried to redefine multifactorial function.
Please review.
https://github.com/sagemath/sage/pull/52



---

archive/issue_comments_033595.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@sagetrac-prateek-cs14](#comment:14):\n> I have tried to redefine multifactorial function.\n> Please review.\n> https://github.com/sagemath/sage/pull/52\n\nA few notes:\n- Python is notoriously (and if you believe some of Guido's commentary basicaly intentionally so) bad at recursion, so you should avoid it unless your really need it. Here you don't (and the current implementation carefully avoids deep recursion)\n- The current implementation does quite a bit of balancing of factors to ensure good multiplication performance. From what I see on your github branch, you've tacked on a new recursion case to what is called \"reflection\" there, essentially making the main body (everything below it) unreachable. That code looks like it's pretty carefully written. If you want to throw it out you should do so (and not just leave it in there as unreachable code) but then you should back up your proposal with some serious timings that show your code performs better under all circumstances.\n- Whenever you make a change like this you should adjust the documentation as well, ensuring that the new behaviour is reflected in the documentation and is properly tested (probably adding some new tests that differentiate between old and new behaviour.\n- Github presently really only is a mirror of the sage repository. It isn't really used for development. So before a change can be considered for inclusion, your change should be uploaded as a git branch here (using the `git-trac` command, probably).\n\nI suspect that the appropriate change to make is in line 3967:\n\n```diff\n-         for i from 1 <= i <= n//k:\n+         for i from 0 <= i <= n//k:\n```\nbut I didn't check in detail.",
    "created_at": "2015-11-02T16:45:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33595",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@sagetrac-prateek-cs14](#comment:14):
> I have tried to redefine multifactorial function.
> Please review.
> https://github.com/sagemath/sage/pull/52

A few notes:
- Python is notoriously (and if you believe some of Guido's commentary basicaly intentionally so) bad at recursion, so you should avoid it unless your really need it. Here you don't (and the current implementation carefully avoids deep recursion)
- The current implementation does quite a bit of balancing of factors to ensure good multiplication performance. From what I see on your github branch, you've tacked on a new recursion case to what is called "reflection" there, essentially making the main body (everything below it) unreachable. That code looks like it's pretty carefully written. If you want to throw it out you should do so (and not just leave it in there as unreachable code) but then you should back up your proposal with some serious timings that show your code performs better under all circumstances.
- Whenever you make a change like this you should adjust the documentation as well, ensuring that the new behaviour is reflected in the documentation and is properly tested (probably adding some new tests that differentiate between old and new behaviour.
- Github presently really only is a mirror of the sage repository. It isn't really used for development. So before a change can be considered for inclusion, your change should be uploaded as a git branch here (using the `git-trac` command, probably).

I suspect that the appropriate change to make is in line 3967:

```diff
-         for i from 1 <= i <= n//k:
+         for i from 0 <= i <= n//k:
```
but I didn't check in detail.



---

archive/issue_events_063728.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2015-11-02T22:25:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63728"
}
```



---

archive/issue_events_063729.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2015-11-02T22:25:57Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63729"
}
```



---

archive/issue_events_063730.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2015-11-02T22:25:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63730"
}
```



---

archive/issue_comments_033596.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,16 @@\n The multifactorial method on integers is different than the one at http://mathworld.wolfram.com/Multifactorial.html and http://www.research.att.com/~njas/sequences/A007661; unless there are multiple competing definitions of multifactorial, this is a bug.\n \n (The references give, for example, (5).multifactorial(3) == 10, whereas Sage currently returns 5.)\n+\n+There are further problems: k is assumed to be a C-int. Hence,\n+\n+```\n+sage: a=2^64\n+sage: a.multifactorial(a)\n+```\n+doesn't work, whereas the appropriate value, a, would be no problem to represent.\n+\n+How badly do people need these numbers? for which ranges should the computation be optimized? The current implementation can easily be adjusted to give answers that agree with the definition elsewhere, fairly efficiently, for ranges where k fits easily in a \"long\".\n+\n+Indeed, the current implementation refuses to compute the multifactorial if n itself doesn't fit in a long. The claim in the current error message, \"This is probably OK, since the answer would have billions of digits.\" is not quite true: if the number of digits is about (n/k) times the number of digits in n, so as long as n/k isn't too large, there isn't really an issue. It may well be that applications of multifactorial never venture in those ranges, though.\n+\n``````\n",
    "created_at": "2015-11-02T22:25:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33596",
    "user": "https://github.com/nbruin"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,16 @@
 The multifactorial method on integers is different than the one at http://mathworld.wolfram.com/Multifactorial.html and http://www.research.att.com/~njas/sequences/A007661; unless there are multiple competing definitions of multifactorial, this is a bug.
 
 (The references give, for example, (5).multifactorial(3) == 10, whereas Sage currently returns 5.)
+
+There are further problems: k is assumed to be a C-int. Hence,
+
+```
+sage: a=2^64
+sage: a.multifactorial(a)
+```
+doesn't work, whereas the appropriate value, a, would be no problem to represent.
+
+How badly do people need these numbers? for which ranges should the computation be optimized? The current implementation can easily be adjusted to give answers that agree with the definition elsewhere, fairly efficiently, for ranges where k fits easily in a "long".
+
+Indeed, the current implementation refuses to compute the multifactorial if n itself doesn't fit in a long. The claim in the current error message, "This is probably OK, since the answer would have billions of digits." is not quite true: if the number of digits is about (n/k) times the number of digits in n, so as long as n/k isn't too large, there isn't really an issue. It may well be that applications of multifactorial never venture in those ranges, though.
+
``````




---

archive/issue_events_063731.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2015-11-02T22:25:57Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "title_is": "problems with multifactorial?",
    "title_was": "wrong definition of multifactorial?",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63731"
}
```



---

archive/issue_comments_033597.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nThanks nbruin.\nPlease review the changes made.\nhttps://github.com/prateekcs14/sage/commit/2cb944378c97bdad76a053e37d579d492f68d44c",
    "created_at": "2015-11-04T11:02:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33597",
    "user": "https://github.com/sagetrac-prateek-cs14"
}
```

<div id="comment:17" align="right">comment:17</div>

Thanks nbruin.
Please review the changes made.
https://github.com/prateekcs14/sage/commit/2cb944378c97bdad76a053e37d579d492f68d44c



---

archive/issue_comments_033598.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@sagetrac-prateek-cs14](#comment:17):\n> Thanks nbruin.\n> Please review the changes made.\n> https://github.com/prateekcs14/sage/commit/2cb944378c97bdad76a053e37d579d492f68d44c\n\nCurrently, the code is nicely interruptable with CTRL-C if a particularly long computation was being done. Does your code have that property? (you stripped out the `sig_on/sig_off`. On the other hand you revert to using (python?) integers instead of using gmp directly, so perhaps interrupts get enabled in that code)\n\nCurrently, the code is taking efforts to balance the size of the factors it was multiplying. This is a well-known technique to improve performance, because it reduces the number of multiplications where a particularly big number is involved (currently there is a 32/64 bit bug in that code, by the way) You strip that out. Do you have data to confirm this is not a problem?\n\nYou may want to try things like\n\n```\nsage: %timeit 10000001.multifactorial(2)\n1 loops, best of 3: 8.47 s per loop\n```\nand possibly with larger numbers too. You should compare the current implementation with the new one.",
    "created_at": "2015-11-06T16:47:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33598",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@sagetrac-prateek-cs14](#comment:17):
> Thanks nbruin.
> Please review the changes made.
> https://github.com/prateekcs14/sage/commit/2cb944378c97bdad76a053e37d579d492f68d44c

Currently, the code is nicely interruptable with CTRL-C if a particularly long computation was being done. Does your code have that property? (you stripped out the `sig_on/sig_off`. On the other hand you revert to using (python?) integers instead of using gmp directly, so perhaps interrupts get enabled in that code)

Currently, the code is taking efforts to balance the size of the factors it was multiplying. This is a well-known technique to improve performance, because it reduces the number of multiplications where a particularly big number is involved (currently there is a 32/64 bit bug in that code, by the way) You strip that out. Do you have data to confirm this is not a problem?

You may want to try things like

```
sage: %timeit 10000001.multifactorial(2)
1 loops, best of 3: 8.47 s per loop
```
and possibly with larger numbers too. You should compare the current implementation with the new one.



---

archive/issue_comments_033599.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nPlease review the changes made.I increased the sub_products by 1 and set i in k*i+residue from 0.\nhttps://github.com/sagemath/sage/commit/8447058f8bb7f017bdefd7086300c4fc3b46ff21",
    "created_at": "2015-12-05T09:38:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33599",
    "user": "https://github.com/sagetrac-prateek-cs14"
}
```

<div id="comment:19" align="right">comment:19</div>

Please review the changes made.I increased the sub_products by 1 and set i in k*i+residue from 0.
https://github.com/sagemath/sage/commit/8447058f8bb7f017bdefd7086300c4fc3b46ff21



---

archive/issue_comments_033600.json:
```json
{
    "body": "Branch: **[u/nbruin/problems_with_multifactorial_](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/problems_with_multifactorial_)**",
    "created_at": "2015-12-09T22:39:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33600",
    "user": "https://github.com/nbruin"
}
```

Branch: **[u/nbruin/problems_with_multifactorial_](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/problems_with_multifactorial_)**



---

archive/issue_events_063732.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2015-12-10T09:50:49Z",
    "event": "unassigned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "subject": "https://github.com/sagetrac-prateek-cs14",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63732"
}
```



---

archive/issue_events_063733.json:
```json
{
    "actor": "https://github.com/sagetrac-prateek-cs14",
    "created_at": "2015-12-10T09:50:49Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "subject": "https://github.com/sagetrac-prateek-cs14",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63733"
}
```



---

archive/issue_comments_033601.json:
```json
{
    "body": "Commit: **[`098b62d`](https://github.com/sagemath/sagetrac-mirror/commit/098b62d0331feb8a92156695ca16c6ac305f9d73)**",
    "created_at": "2015-12-10T09:50:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33601",
    "user": "https://github.com/sagetrac-prateek-cs14"
}
```

Commit: **[`098b62d`](https://github.com/sagemath/sagetrac-mirror/commit/098b62d0331feb8a92156695ca16c6ac305f9d73)**



---

archive/issue_events_063734.json:
```json
{
    "actor": "https://github.com/sagetrac-prateek-cs14",
    "created_at": "2015-12-10T09:57:28Z",
    "event": "unassigned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "subject": "https://github.com/sagetrac-prateek-cs14",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63734"
}
```



---

archive/issue_comments_033602.json:
```json
{
    "body": "Changed branch from **[u/nbruin/problems_with_multifactorial_](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/problems_with_multifactorial_)** to **[u/prateek.cs14/problems_with_multifactorial_](https://github.com/sagemath/sagetrac-mirror/tree/u/prateek.cs14/problems_with_multifactorial_)**",
    "created_at": "2015-12-10T10:24:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33602",
    "user": "https://github.com/sagetrac-prateek-cs14"
}
```

Changed branch from **[u/nbruin/problems_with_multifactorial_](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/problems_with_multifactorial_)** to **[u/prateek.cs14/problems_with_multifactorial_](https://github.com/sagemath/sagetrac-mirror/tree/u/prateek.cs14/problems_with_multifactorial_)**



---

archive/issue_comments_033603.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4c176a9326c29ed717681f9d9c3dcd1b66a1336f\"><code>4c176a9</code></a></td><td><code>Redefining multifactorial</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/68eb8e801c53facebb83482138937cdb066c1546\"><code>68eb8e8</code></a></td><td><code>Merge branch 'u/prateek.cs14/problems_with_multifactorial_' of git://trac.sagemath.org/sage into my_branch</code></td></tr></table>\n",
    "created_at": "2015-12-12T07:54:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33603",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4c176a9326c29ed717681f9d9c3dcd1b66a1336f"><code>4c176a9</code></a></td><td><code>Redefining multifactorial</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/68eb8e801c53facebb83482138937cdb066c1546"><code>68eb8e8</code></a></td><td><code>Merge branch 'u/prateek.cs14/problems_with_multifactorial_' of git://trac.sagemath.org/sage into my_branch</code></td></tr></table>




---

archive/issue_comments_033604.json:
```json
{
    "body": "Changed commit from **[`098b62d`](https://github.com/sagemath/sagetrac-mirror/commit/098b62d0331feb8a92156695ca16c6ac305f9d73)** to **[`68eb8e8`](https://github.com/sagemath/sagetrac-mirror/commit/68eb8e801c53facebb83482138937cdb066c1546)**",
    "created_at": "2015-12-12T07:54:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33604",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`098b62d`](https://github.com/sagemath/sagetrac-mirror/commit/098b62d0331feb8a92156695ca16c6ac305f9d73)** to **[`68eb8e8`](https://github.com/sagemath/sagetrac-mirror/commit/68eb8e801c53facebb83482138937cdb066c1546)**



---

archive/issue_comments_033605.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nCongratulations on getting a branch attached. Todo list:\n- make sure documentation is changed to reflect new behaviour and include doctests that confirm it\n- clean up your branch: as you can see in the diffs: `52 files changed, 7057 insertions, 5 deletions`. That's due to your \"Merge\" commit.\n\nSince the intended change only touches 4 lines, it's probably easier to start with a fresh copy of current \"develop\", make the edits. and commit that. Then you need no merging at all.",
    "created_at": "2015-12-12T17:16:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33605",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:25" align="right">comment:25</div>

Congratulations on getting a branch attached. Todo list:
- make sure documentation is changed to reflect new behaviour and include doctests that confirm it
- clean up your branch: as you can see in the diffs: `52 files changed, 7057 insertions, 5 deletions`. That's due to your "Merge" commit.

Since the intended change only touches 4 lines, it's probably easier to start with a fresh copy of current "develop", make the edits. and commit that. Then you need no merging at all.



---

archive/issue_events_063735.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2015-12-12T17:16:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63735"
}
```



---

archive/issue_events_063736.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2015-12-12T17:16:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63736"
}
```



---

archive/issue_comments_033606.json:
```json
{
    "body": "Changed commit from **[`68eb8e8`](https://github.com/sagemath/sagetrac-mirror/commit/68eb8e801c53facebb83482138937cdb066c1546)** to **[`173f0ea`](https://github.com/sagemath/sagetrac-mirror/commit/173f0eaf83f3f894bcbd98b381f891c668da2030)**",
    "created_at": "2015-12-15T14:47:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33606",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`68eb8e8`](https://github.com/sagemath/sagetrac-mirror/commit/68eb8e801c53facebb83482138937cdb066c1546)** to **[`173f0ea`](https://github.com/sagemath/sagetrac-mirror/commit/173f0eaf83f3f894bcbd98b381f891c668da2030)**



---

archive/issue_comments_033607.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f94b9cc747be06128f2371f49efef7d8db64e416\"><code>f94b9cc</code></a></td><td><code>Doctest added</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/173f0eaf83f3f894bcbd98b381f891c668da2030\"><code>173f0ea</code></a></td><td><code>Merge branch 'u/prateek.cs14/problems_with_multifactorial_' of git://trac.sagemath.org/sage into try</code></td></tr></table>\n",
    "created_at": "2015-12-15T14:47:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33607",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f94b9cc747be06128f2371f49efef7d8db64e416"><code>f94b9cc</code></a></td><td><code>Doctest added</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/173f0eaf83f3f894bcbd98b381f891c668da2030"><code>173f0ea</code></a></td><td><code>Merge branch 'u/prateek.cs14/problems_with_multifactorial_' of git://trac.sagemath.org/sage into try</code></td></tr></table>




---

archive/issue_comments_033608.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nYour indentation is not really working well in your doctests - follow the developer guide and other code.  (Ask if you need help!)  I also agree with Nils' comments.",
    "created_at": "2015-12-17T03:50:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33608",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:27" align="right">comment:27</div>

Your indentation is not really working well in your doctests - follow the developer guide and other code.  (Ask if you need help!)  I also agree with Nils' comments.



---

archive/issue_comments_033609.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nAlso note that, as was remarked previously, the original behaviour of multifactorial was consistent with the description in its documentation. So, by changing the behaviour but not the documentation you are basically introducing a bug. Ideally you'd include a reference to a literature source to document which convention you are following, along with a description of what the routine in sage does.",
    "created_at": "2015-12-17T05:09:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33609",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:28" align="right">comment:28</div>

Also note that, as was remarked previously, the original behaviour of multifactorial was consistent with the description in its documentation. So, by changing the behaviour but not the documentation you are basically introducing a bug. Ideally you'd include a reference to a literature source to document which convention you are following, along with a description of what the routine in sage does.



---

archive/issue_comments_033610.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nCan I change the definition to \n\" Computes the k-th factorial `n!^{(k)}` of self. For k=1\n  this is the standard factorial, and for k greater than one it is\n  the product of every k-th terms down from self to the smallest possible positive integer. \n  The recursive definition is used to extend this function to the negative integers.\"\nIs this look fine ?",
    "created_at": "2015-12-17T14:29:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33610",
    "user": "https://github.com/sagetrac-prateek-cs14"
}
```

<div id="comment:29" align="right">comment:29</div>

Can I change the definition to 
" Computes the k-th factorial `n!^{(k)}` of self. For k=1
  this is the standard factorial, and for k greater than one it is
  the product of every k-th terms down from self to the smallest possible positive integer. 
  The recursive definition is used to extend this function to the negative integers."
Is this look fine ?



---

archive/issue_comments_033611.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nSome people have complained about using \"self\" in the docstring, and they have a point: in the call\n`10.multifactorial(3)` there is never any mention of \"self\". I think it can be avoided here. Your description in words is pretty good, but requires careful reading to pry out the base cases. That might be difficult for non-native speakers. Perhaps\n\n```\nReturns the k-th multifactorial.\n\nThe k-th multifactorial n, denoted by n!^{(k)}, as implemented in Sage\n is defined by\n\nn!^{(k)} = n for 1 <= n < k and\nn!^{(k)} = n * ( (n-k)^{(k)} for n >= k\n\nThe recursive definition is used to extend this function to the negative\nintegers.\n```\n\nYou'd have to figure out how to ensure that the formulas are rendered acceptably in all output formats of the sage documentation, though.\n\nThat said, your proposal is in the style of the current docstring, so I don't think a positive review would be held back by it.\n\nNote that one of the doctests illustrates the behaviour:\n\n```\n      sage: 23.multifactorial(2)\n      316234143225\n      sage: prod([1..23, step=2])\n      316234143225\n```\nIt would be very instructive if you would change the parameters there to a case that distinguishes between the old and the new behaviour.",
    "created_at": "2015-12-17T18:18:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33611",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:30" align="right">comment:30</div>

Some people have complained about using "self" in the docstring, and they have a point: in the call
`10.multifactorial(3)` there is never any mention of "self". I think it can be avoided here. Your description in words is pretty good, but requires careful reading to pry out the base cases. That might be difficult for non-native speakers. Perhaps

```
Returns the k-th multifactorial.

The k-th multifactorial n, denoted by n!^{(k)}, as implemented in Sage
 is defined by

n!^{(k)} = n for 1 <= n < k and
n!^{(k)} = n * ( (n-k)^{(k)} for n >= k

The recursive definition is used to extend this function to the negative
integers.
```

You'd have to figure out how to ensure that the formulas are rendered acceptably in all output formats of the sage documentation, though.

That said, your proposal is in the style of the current docstring, so I don't think a positive review would be held back by it.

Note that one of the doctests illustrates the behaviour:

```
      sage: 23.multifactorial(2)
      316234143225
      sage: prod([1..23, step=2])
      316234143225
```
It would be very instructive if you would change the parameters there to a case that distinguishes between the old and the new behaviour.



---

archive/issue_comments_033612.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nLooks like this ticket has been abandoned again.",
    "created_at": "2016-01-07T22:35:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33612",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:31" align="right">comment:31</div>

Looks like this ticket has been abandoned again.



---

archive/issue_comments_033613.json:
```json
{
    "body": "Changed commit from **[`173f0ea`](https://github.com/sagemath/sagetrac-mirror/commit/173f0eaf83f3f894bcbd98b381f891c668da2030)** to none",
    "created_at": "2016-08-16T06:46:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33613",
    "user": "https://github.com/sagetrac-iconjack"
}
```

Changed commit from **[`173f0ea`](https://github.com/sagemath/sagetrac-mirror/commit/173f0eaf83f3f894bcbd98b381f891c668da2030)** to none



---

archive/issue_events_063737.json:
```json
{
    "actor": "https://github.com/sagetrac-iconjack",
    "created_at": "2016-08-16T06:46:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63737"
}
```



---

archive/issue_events_063738.json:
```json
{
    "actor": "https://github.com/sagetrac-iconjack",
    "created_at": "2016-08-16T06:46:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63738"
}
```



---

archive/issue_comments_033614.json:
```json
{
    "body": "Changed branch from **[u/prateek.cs14/problems_with_multifactorial_](https://github.com/sagemath/sagetrac-mirror/tree/u/prateek.cs14/problems_with_multifactorial_)** to none",
    "created_at": "2016-08-16T06:46:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33614",
    "user": "https://github.com/sagetrac-iconjack"
}
```

Changed branch from **[u/prateek.cs14/problems_with_multifactorial_](https://github.com/sagemath/sagetrac-mirror/tree/u/prateek.cs14/problems_with_multifactorial_)** to none



---

archive/issue_events_063739.json:
```json
{
    "actor": "https://github.com/sagetrac-iconjack",
    "created_at": "2016-08-16T06:46:47Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "subject": "https://github.com/sagetrac-iconjack",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63739"
}
```



---

archive/issue_comments_033615.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nThe multifactorial implementation is optimized to limit large multiplications by computing e.g.  ((a*b)*(c*d))*((e*f)*(g*h)) instead of (((((((a*b)*c)*d)*e)*f)*g)*h). It's a little tricky, using bit patterns of the index to fold the multiplications, rather than doing it recursively. As others noted, there was an off-by-one error (two actually), which caused 5.factorial(3) to eval to 5 rather than 10.\n\nA different bug was that for example 11.multifactorial(17) was returning 1 instead of 11.\n\nWStein suggested using the already-existing prod function that already implements this balanced multiplication. However, prod is more general, not just integers. The current multifactorial uses GMP's integer functions, and may be faster. \n\nIn the long run, I think that multifactorial, prod, balanced_list_prod, and interator_prod should be refactored, but since this is my first commit, I've decided to simply fix the bugs addressed in this ticket. There's another bug, related to non-integer values being passed in, but I'll make another ticket for that.\n\nAlso added a test case.",
    "created_at": "2016-08-17T01:37:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33615",
    "user": "https://github.com/sagetrac-iconjack"
}
```

<div id="comment:33" align="right">comment:33</div>

The multifactorial implementation is optimized to limit large multiplications by computing e.g.  ((a*b)*(c*d))*((e*f)*(g*h)) instead of (((((((a*b)*c)*d)*e)*f)*g)*h). It's a little tricky, using bit patterns of the index to fold the multiplications, rather than doing it recursively. As others noted, there was an off-by-one error (two actually), which caused 5.factorial(3) to eval to 5 rather than 10.

A different bug was that for example 11.multifactorial(17) was returning 1 instead of 11.

WStein suggested using the already-existing prod function that already implements this balanced multiplication. However, prod is more general, not just integers. The current multifactorial uses GMP's integer functions, and may be faster. 

In the long run, I think that multifactorial, prod, balanced_list_prod, and interator_prod should be refactored, but since this is my first commit, I've decided to simply fix the bugs addressed in this ticket. There's another bug, related to non-integer values being passed in, but I'll make another ticket for that.

Also added a test case.



---

archive/issue_events_063740.json:
```json
{
    "actor": "https://github.com/sagetrac-iconjack",
    "created_at": "2016-08-17T01:37:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63740"
}
```



---

archive/issue_events_063741.json:
```json
{
    "actor": "https://github.com/sagetrac-iconjack",
    "created_at": "2016-08-17T01:37:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63741"
}
```



---

archive/issue_comments_033616.json:
```json
{
    "body": "Branch: **[/u/iconjack/5415-multifactorial](https://github.com/sagemath/sagetrac-mirror/tree//u/iconjack/5415-multifactorial)**",
    "created_at": "2016-08-17T07:53:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33616",
    "user": "https://github.com/sagetrac-iconjack"
}
```

Branch: **[/u/iconjack/5415-multifactorial](https://github.com/sagemath/sagetrac-mirror/tree//u/iconjack/5415-multifactorial)**



---

archive/issue_comments_033617.json:
```json
{
    "body": "Changed branch from **[/u/iconjack/5415-multifactorial](https://github.com/sagemath/sagetrac-mirror/tree//u/iconjack/5415-multifactorial)** to **[u/iconjack/5415-multifactorial](https://github.com/sagemath/sagetrac-mirror/tree/u/iconjack/5415-multifactorial)**",
    "created_at": "2016-08-17T07:54:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33617",
    "user": "https://github.com/sagetrac-iconjack"
}
```

Changed branch from **[/u/iconjack/5415-multifactorial](https://github.com/sagemath/sagetrac-mirror/tree//u/iconjack/5415-multifactorial)** to **[u/iconjack/5415-multifactorial](https://github.com/sagemath/sagetrac-mirror/tree/u/iconjack/5415-multifactorial)**



---

archive/issue_comments_033618.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nIt seems your branch does not exist. Don't you use git-trac as in the documentation?",
    "created_at": "2016-08-17T07:57:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33618",
    "user": "https://github.com/rwst"
}
```

<div id="comment:36" align="right">comment:36</div>

It seems your branch does not exist. Don't you use git-trac as in the documentation?



---

archive/issue_comments_033619.json:
```json
{
    "body": "<div id=\"comment:37\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/502452f75850f2c4f72fb0b25b7a6a84e4e33110\"><code>502452f</code></a></td><td><code>Trac #5415: problems with multifactorial?</code></td></tr></table>\n",
    "created_at": "2016-08-18T03:54:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33619",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:37"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/502452f75850f2c4f72fb0b25b7a6a84e4e33110"><code>502452f</code></a></td><td><code>Trac #5415: problems with multifactorial?</code></td></tr></table>




---

archive/issue_comments_033620.json:
```json
{
    "body": "Commit: **[`502452f`](https://github.com/sagemath/sagetrac-mirror/commit/502452f75850f2c4f72fb0b25b7a6a84e4e33110)**",
    "created_at": "2016-08-18T03:54:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33620",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`502452f`](https://github.com/sagemath/sagetrac-mirror/commit/502452f75850f2c4f72fb0b25b7a6a84e4e33110)**



---

archive/issue_comments_033621.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nDo you know why `residue` is not declared as `cdef int`?",
    "created_at": "2016-09-19T06:06:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33621",
    "user": "https://github.com/videlec"
}
```

<div id="comment:38" align="right">comment:38</div>

Do you know why `residue` is not declared as `cdef int`?



---

archive/issue_comments_033622.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@videlec](#comment:38):\n> Do you know why `residue` is not declared as `cdef int`?\n\nNo, I didn't change that line. I'll change it to cdef int and test but for now I'd like to get this change reviewed and committed.",
    "created_at": "2016-09-20T00:48:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33622",
    "user": "https://github.com/sagetrac-iconjack"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@videlec](#comment:38):
> Do you know why `residue` is not declared as `cdef int`?

No, I didn't change that line. I'll change it to cdef int and test but for now I'd like to get this change reviewed and committed.



---

archive/issue_events_063742.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-09-21T06:14:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63742"
}
```



---

archive/issue_events_063743.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-09-21T06:14:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63743"
}
```



---

archive/issue_comments_033623.json:
```json
{
    "body": "Reviewer: **Vincent Delecroix**",
    "created_at": "2016-09-21T06:14:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33623",
    "user": "https://github.com/videlec"
}
```

Reviewer: **Vincent Delecroix**



---

archive/issue_comments_033624.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nYour changes look good. Two small things\n\n1. add your name in the \"Authors\" field of the ticket\n\n2. Add the following doctest in a `TESTS` block\n\n```\nsage: for a in range(1,20):\n....:     for b in range(1,20):\n....:         assert ZZ(a).multifactorial(b) == prod(x for x in range(a,0,-b))\n```",
    "created_at": "2016-09-21T06:14:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33624",
    "user": "https://github.com/videlec"
}
```

<div id="comment:40" align="right">comment:40</div>

Your changes look good. Two small things

1. add your name in the "Authors" field of the ticket

2. Add the following doctest in a `TESTS` block

```
sage: for a in range(1,20):
....:     for b in range(1,20):
....:         assert ZZ(a).multifactorial(b) == prod(x for x in range(a,0,-b))
```



---

archive/issue_comments_033625.json:
```json
{
    "body": "Author: **Jack Kennedy**",
    "created_at": "2016-09-24T07:37:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33625",
    "user": "https://github.com/sagetrac-iconjack"
}
```

Author: **Jack Kennedy**



---

archive/issue_comments_033626.json:
```json
{
    "body": "Changed commit from **[`502452f`](https://github.com/sagemath/sagetrac-mirror/commit/502452f75850f2c4f72fb0b25b7a6a84e4e33110)** to **[`0204235`](https://github.com/sagemath/sagetrac-mirror/commit/020423572f0b240cd857b26fc7b750080ca3ed39)**",
    "created_at": "2017-05-24T20:19:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33626",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[`502452f`](https://github.com/sagemath/sagetrac-mirror/commit/502452f75850f2c4f72fb0b25b7a6a84e4e33110)** to **[`0204235`](https://github.com/sagemath/sagetrac-mirror/commit/020423572f0b240cd857b26fc7b750080ca3ed39)**



---

archive/issue_events_063744.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-05-24T20:19:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63744"
}
```



---

archive/issue_events_063745.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-05-24T20:19:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63745"
}
```



---

archive/issue_comments_033627.json:
```json
{
    "body": "Changed branch from **[u/iconjack/5415-multifactorial](https://github.com/sagemath/sagetrac-mirror/tree/u/iconjack/5415-multifactorial)** to **[public/5415](https://github.com/sagemath/sagetrac-mirror/tree/public/5415)**",
    "created_at": "2017-05-24T20:19:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33627",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[u/iconjack/5415-multifactorial](https://github.com/sagemath/sagetrac-mirror/tree/u/iconjack/5415-multifactorial)** to **[public/5415](https://github.com/sagemath/sagetrac-mirror/tree/public/5415)**



---

archive/issue_comments_033628.json:
```json
{
    "body": "<div id=\"comment:42\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/04ceaeab9c8e169876f860212904a423242aca78\"><code>04ceaea</code></a></td><td><code>Merge branch 'u/iconjack/5415-multifactorial' in 8.0.b7</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/020423572f0b240cd857b26fc7b750080ca3ed39\"><code>0204235</code></a></td><td><code>trac 5415 added doctest</code></td></tr></table>\n",
    "created_at": "2017-05-24T20:19:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33628",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:42"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/04ceaeab9c8e169876f860212904a423242aca78"><code>04ceaea</code></a></td><td><code>Merge branch 'u/iconjack/5415-multifactorial' in 8.0.b7</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/020423572f0b240cd857b26fc7b750080ca3ed39"><code>0204235</code></a></td><td><code>trac 5415 added doctest</code></td></tr></table>




---

archive/issue_events_063746.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-05-25T08:58:35Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63746"
}
```



---

archive/issue_events_063747.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-05-25T08:58:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63747"
}
```



---

archive/issue_comments_033629.json:
```json
{
    "body": "Changed reviewer from **Vincent Delecroix** to **Vincent Delecroix, Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2017-05-26T06:19:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33629",
    "user": "https://github.com/fchapoton"
}
```

Changed reviewer from **Vincent Delecroix** to **Vincent Delecroix, Frédéric Chapoton**



---

archive/issue_events_063748.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-05-26T06:19:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63748"
}
```



---

archive/issue_events_063749.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-05-26T06:19:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63749"
}
```



---

archive/issue_comments_033630.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nok, this passes all tests. I am setting to positive.",
    "created_at": "2017-05-26T06:19:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33630",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:44" align="right">comment:44</div>

ok, this passes all tests. I am setting to positive.



---

archive/issue_comments_033631.json:
```json
{
    "body": "Changed branch from **[public/5415](https://github.com/sagemath/sagetrac-mirror/tree/public/5415)** to **[`0204235`](https://github.com/sagemath/sagetrac-mirror/commit/020423572f0b240cd857b26fc7b750080ca3ed39)**",
    "created_at": "2017-05-27T23:42:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-33631",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/5415](https://github.com/sagemath/sagetrac-mirror/tree/public/5415)** to **[`0204235`](https://github.com/sagemath/sagetrac-mirror/commit/020423572f0b240cd857b26fc7b750080ca3ed39)**



---

archive/issue_events_063750.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-27T23:42:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63750"
}
```



---

archive/issue_events_063751.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "584c4d031aaf32b09d4a06693b67b548e81be369",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-05-27T23:42:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-63751"
}
```
