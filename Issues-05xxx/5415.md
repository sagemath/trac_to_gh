# Issue 5415: problems with multifactorial?

archive/issues_005415.json:
```json
{
    "assignees": [],
    "body": "The multifactorial method on integers is different than the one at http://mathworld.wolfram.com/Multifactorial.html and http://www.research.att.com/~njas/sequences/A007661; unless there are multiple competing definitions of multifactorial, this is a bug.\n\n(The references give, for example, (5).multifactorial(3) == 10, whereas Sage currently returns 5.)\n\nThere are further problems: k is assumed to be a C-int. Hence,\n\n```\nsage: a=2^64\nsage: a.multifactorial(a)\n```\ndoesn't work, whereas the appropriate value, a, would be no problem to represent.\n\nHow badly do people need these numbers? for which ranges should the computation be optimized? The current implementation can easily be adjusted to give answers that agree with the definition elsewhere, fairly efficiently, for ranges where k fits easily in a \"long\".\n\nIndeed, the current implementation refuses to compute the multifactorial if n itself doesn't fit in a long. The claim in the current error message, \"This is probably OK, since the answer would have billions of digits.\" is not quite true: if the number of digits is about (n/k) times the number of digits in n, so as long as n/k isn't too large, there isn't really an issue. It may well be that applications of multifactorial never venture in those ranges, though.\n\n\n**Assignee:** iconjack\n\n**Branch/Commit:** [020423572f0b240cd857b26fc7b750080ca3ed39](https://github.com/sagemath/sagetrac-mirror/commit/020423572f0b240cd857b26fc7b750080ca3ed39)\n\n**Stopgaps:** todo\n\n**Reviewer:** Vincent Delecroix, Fr\u00e9d\u00e9ric Chapoton\n\n**Author:** Jack Kennedy\n\nIssue created by migration from https://trac.sagemath.org/ticket/5415\n\n",
    "closed_at": "2017-05-27T23:42:49Z",
    "created_at": "2009-03-01T22:56:37Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20basic%20arithmetic",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "problems with multifactorial?",
    "type": "issue",
    "updated_at": "2017-05-27T23:42:49Z",
    "url": "https://github.com/sagemath/sage/issues/5415",
    "user": "https://github.com/sagetrac-cwitty"
}
```
The multifactorial method on integers is different than the one at http://mathworld.wolfram.com/Multifactorial.html and http://www.research.att.com/~njas/sequences/A007661; unless there are multiple competing definitions of multifactorial, this is a bug.

(The references give, for example, (5).multifactorial(3) == 10, whereas Sage currently returns 5.)

There are further problems: k is assumed to be a C-int. Hence,

```
sage: a=2^64
sage: a.multifactorial(a)
```
doesn't work, whereas the appropriate value, a, would be no problem to represent.

How badly do people need these numbers? for which ranges should the computation be optimized? The current implementation can easily be adjusted to give answers that agree with the definition elsewhere, fairly efficiently, for ranges where k fits easily in a "long".

Indeed, the current implementation refuses to compute the multifactorial if n itself doesn't fit in a long. The claim in the current error message, "This is probably OK, since the answer would have billions of digits." is not quite true: if the number of digits is about (n/k) times the number of digits in n, so as long as n/k isn't too large, there isn't really an issue. It may well be that applications of multifactorial never venture in those ranges, though.


**Assignee:** iconjack

**Branch/Commit:** [020423572f0b240cd857b26fc7b750080ca3ed39](https://github.com/sagemath/sagetrac-mirror/commit/020423572f0b240cd857b26fc7b750080ca3ed39)

**Stopgaps:** todo

**Reviewer:** Vincent Delecroix, Frédéric Chapoton

**Author:** Jack Kennedy

Issue created by migration from https://trac.sagemath.org/ticket/5415





---

archive/issue_events_052411.json:
```json
{
    "actor": "https://github.com/sagetrac-cwitty",
    "created_at": "2009-03-01T22:56:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-52411"
}
```



---

archive/issue_events_052412.json:
```json
{
    "actor": "https://github.com/sagetrac-cwitty",
    "created_at": "2009-03-01T22:56:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20basic%20arithmetic",
    "label_color": "08517b",
    "label_name": "component: basic arithmetic",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-52412"
}
```



---

archive/issue_events_052413.json:
```json
{
    "actor": "https://github.com/sagetrac-cwitty",
    "created_at": "2009-03-01T22:56:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "008080",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-52413"
}
```



---

archive/issue_events_052414.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-03-02T06:40:37Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "milestone_number": null,
    "milestone_title": "sage-3.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-52414"
}
```



---

archive/issue_events_052415.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-03-02T06:40:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "milestone_number": null,
    "milestone_title": "sage-3.4.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-52415"
}
```



---

archive/issue_comments_034838.json:
```json
{
    "body": "<a id='comment:1'>**Comment 1:**</a>\nBetter luck in Sage 3.4.1.\n\nCheers,\n\nMichael",
    "created_at": "2009-03-02T06:40:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34838",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:1'>**Comment 1:**</a>
Better luck in Sage 3.4.1.

Cheers,

Michael



---

archive/issue_comments_034839.json:
```json
{
    "body": "<a id='comment:2'>**Comment 2:**</a>\nI think the problem is that not enough factors are included.  Actually, there are two problems: in the base case, it should return n, not 1; that is, make this change:\n\n```\n         # base case\n         if 0 < n < k:\n-            return ONE\n+            return n\n```\nAfter making this change, I'm still getting the wrong answers for `a.multifactorial(3)` whenever a is congruent to 2 mod 3 (except for a=2), and for `a.multifactorial(4)` whenever a is congruent to 2 or 3 mod 4 (except for a=2,3).  It seems that not enough factors are used; for example, 10.multifactorial(4) should be 10 x 6 x 2 = 120, but Sage computes it as 10 x 6 = 60.\n\nIf we fix this, we can put in doctests like the following:\n\n```\nsage: L = sloane_sequence(6882)[2]  # optional - internet\nSearching Sloane's online database...\nsage: all([Integer(a).multifactorial(2) == L[a] for a in range(1,20)])    # optional - internet\nTrue\n```",
    "created_at": "2009-07-22T02:12:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34839",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:2'>**Comment 2:**</a>
I think the problem is that not enough factors are included.  Actually, there are two problems: in the base case, it should return n, not 1; that is, make this change:

```
         # base case
         if 0 < n < k:
-            return ONE
+            return n
```
After making this change, I'm still getting the wrong answers for `a.multifactorial(3)` whenever a is congruent to 2 mod 3 (except for a=2), and for `a.multifactorial(4)` whenever a is congruent to 2 or 3 mod 4 (except for a=2,3).  It seems that not enough factors are used; for example, 10.multifactorial(4) should be 10 x 6 x 2 = 120, but Sage computes it as 10 x 6 = 60.

If we fix this, we can put in doctests like the following:

```
sage: L = sloane_sequence(6882)[2]  # optional - internet
Searching Sloane's online database...
sage: all([Integer(a).multifactorial(2) == L[a] for a in range(1,20)])    # optional - internet
True
```



---

archive/issue_comments_034840.json:
```json
{
    "body": "<a id='comment:3'>**Comment 3:**</a>\nA careful look at Sloane's functions reveals that the base case is indeed =1, according to his definitions.  I'm not sure if this is standard, but Mathworld doesn't seem to talk about those cases carefully.  On the other hand, Wikipedia [http://en.wikipedia.org/wiki/Factorial#Multifactorials](http://en.wikipedia.org/wiki/Factorial#Multifactorials) suggests that this is somewhat standard.",
    "created_at": "2009-09-29T15:34:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34840",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:3'>**Comment 3:**</a>
A careful look at Sloane's functions reveals that the base case is indeed =1, according to his definitions.  I'm not sure if this is standard, but Mathworld doesn't seem to talk about those cases carefully.  On the other hand, Wikipedia [http://en.wikipedia.org/wiki/Factorial#Multifactorials](http://en.wikipedia.org/wiki/Factorial#Multifactorials) suggests that this is somewhat standard.



---

archive/issue_comments_034841.json:
```json
{
    "body": "<a id='comment:4'>**Comment 4:**</a>\nOr an even more careful look reveals that Sloane starts at n=0 - my bad.  So there is an inconsistency in the definitions.  Sloane's sequences agree with jhpalmieri, while Sage agrees with Wikipedia.\n\nI'm ccing: the author of multifactorial in Sage, who will hopefully weigh in on what definition is okay.",
    "created_at": "2009-09-29T15:45:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34841",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:4'>**Comment 4:**</a>
Or an even more careful look reveals that Sloane starts at n=0 - my bad.  So there is an inconsistency in the definitions.  Sloane's sequences agree with jhpalmieri, while Sage agrees with Wikipedia.

I'm ccing: the author of multifactorial in Sage, who will hopefully weigh in on what definition is okay.



---

archive/issue_comments_034842.json:
```json
{
    "body": "<a id='comment:5'>**Comment 5:**</a>\nI needed the double factorial for something (I can't even remember what now) so I just wrote this. It sounds like there's several competing definitions, but wikipedia is not necessarily the most authoritative. \n\nI would ask on sage-combinat what the \"right\" definition is, they're more likely to know.",
    "created_at": "2009-09-29T18:18:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34842",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:5'>**Comment 5:**</a>
I needed the double factorial for something (I can't even remember what now) so I just wrote this. It sounds like there's several competing definitions, but wikipedia is not necessarily the most authoritative. 

I would ask on sage-combinat what the "right" definition is, they're more likely to know.



---

archive/issue_comments_034843.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\nCan you do that?  I'm not subscribed to them.  Thanks.",
    "created_at": "2009-09-29T18:59:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34843",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:6'>**Comment 6:**</a>
Can you do that?  I'm not subscribed to them.  Thanks.



---

archive/issue_comments_034844.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\nI would certainly want (5).multifactorial(3) to be 10 and not 5.",
    "created_at": "2009-09-30T05:01:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34844",
    "user": "https://github.com/dandrake"
}
```

<a id='comment:7'>**Comment 7:**</a>
I would certainly want (5).multifactorial(3) to be 10 and not 5.



---

archive/issue_comments_034845.json:
```json
{
    "body": "<a id='comment:8'>**Comment 8:**</a>\nReplying to [@robertwb](#comment%3A5):\n> I needed the double factorial for something (I can't even remember what now) so I just wrote this. It sounds like there's several competing definitions, but wikipedia is not necessarily the most authoritative. \n\n(I think it was for making sure gamma(3/2) etc. were correct.)\n> \n> I would ask on sage-combinat what the \"right\" definition is, they're more likely to know. \n\nBut one should definitely document that there isn't a universally agreed-upon definition.\n\nCan you indicate what one would change in integer.pyx?   Changing things that seem right yield horrible allocation errors.",
    "created_at": "2009-09-30T17:18:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34845",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:8'>**Comment 8:**</a>
Replying to [@robertwb](#comment%3A5):
> I needed the double factorial for something (I can't even remember what now) so I just wrote this. It sounds like there's several competing definitions, but wikipedia is not necessarily the most authoritative. 

(I think it was for making sure gamma(3/2) etc. were correct.)
> 
> I would ask on sage-combinat what the "right" definition is, they're more likely to know. 

But one should definitely document that there isn't a universally agreed-upon definition.

Can you indicate what one would change in integer.pyx?   Changing things that seem right yield horrible allocation errors.



---

archive/issue_events_052416.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-52416"
}
```



---

archive/issue_events_052417.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-52417"
}
```



---

archive/issue_events_052418.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-52418"
}
```



---

archive/issue_events_052419.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-52419"
}
```



---

archive/issue_events_052420.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-52420"
}
```



---

archive/issue_events_052421.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-52421"
}
```



---

archive/issue_events_052422.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-52422"
}
```



---

archive/issue_events_052423.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-52423"
}
```



---

archive/issue_comments_034846.json:
```json
{
    "body": "**Stopgaps:** todo",
    "created_at": "2015-08-19T23:04:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34846",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

**Stopgaps:** todo



---

archive/issue_comments_034847.json:
```json
{
    "body": "<a id='comment:14'>**Comment 14:**</a>\nI have tried to redefine multifactorial function.\nPlease review.\nhttps://github.com/sagemath/sage/pull/52",
    "created_at": "2015-11-02T09:08:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34847",
    "user": "https://github.com/sagetrac-prateek-cs14"
}
```

<a id='comment:14'>**Comment 14:**</a>
I have tried to redefine multifactorial function.
Please review.
https://github.com/sagemath/sage/pull/52



---

archive/issue_comments_034848.json:
```json
{
    "body": "<a id='comment:15'>**Comment 15:**</a>\nReplying to [prateek.cs14](#comment%3A14):\n> I have tried to redefine multifactorial function.\n> Please review.\n> https://github.com/sagemath/sage/pull/52\n\nA few notes:\n- Python is notoriously (and if you believe some of Guido's commentary basicaly intentionally so) bad at recursion, so you should avoid it unless your really need it. Here you don't (and the current implementation carefully avoids deep recursion)\n- The current implementation does quite a bit of balancing of factors to ensure good multiplication performance. From what I see on your github branch, you've tacked on a new recursion case to what is called \"reflection\" there, essentially making the main body (everything below it) unreachable. That code looks like it's pretty carefully written. If you want to throw it out you should do so (and not just leave it in there as unreachable code) but then you should back up your proposal with some serious timings that show your code performs better under all circumstances.\n- Whenever you make a change like this you should adjust the documentation as well, ensuring that the new behaviour is reflected in the documentation and is properly tested (probably adding some new tests that differentiate between old and new behaviour.\n- Github presently really only is a mirror of the sage repository. It isn't really used for development. So before a change can be considered for inclusion, your change should be uploaded as a git branch here (using the `git-trac` command, probably).\n\nI suspect that the appropriate change to make is in line 3967:\n\n```diff\n-         for i from 1 <= i <= n//k:\n+         for i from 0 <= i <= n//k:\n```\nbut I didn't check in detail.",
    "created_at": "2015-11-02T16:45:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34848",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:15'>**Comment 15:**</a>
Replying to [prateek.cs14](#comment%3A14):
> I have tried to redefine multifactorial function.
> Please review.
> https://github.com/sagemath/sage/pull/52

A few notes:
- Python is notoriously (and if you believe some of Guido's commentary basicaly intentionally so) bad at recursion, so you should avoid it unless your really need it. Here you don't (and the current implementation carefully avoids deep recursion)
- The current implementation does quite a bit of balancing of factors to ensure good multiplication performance. From what I see on your github branch, you've tacked on a new recursion case to what is called "reflection" there, essentially making the main body (everything below it) unreachable. That code looks like it's pretty carefully written. If you want to throw it out you should do so (and not just leave it in there as unreachable code) but then you should back up your proposal with some serious timings that show your code performs better under all circumstances.
- Whenever you make a change like this you should adjust the documentation as well, ensuring that the new behaviour is reflected in the documentation and is properly tested (probably adding some new tests that differentiate between old and new behaviour.
- Github presently really only is a mirror of the sage repository. It isn't really used for development. So before a change can be considered for inclusion, your change should be uploaded as a git branch here (using the `git-trac` command, probably).

I suspect that the appropriate change to make is in line 3967:

```diff
-         for i from 1 <= i <= n//k:
+         for i from 0 <= i <= n//k:
```
but I didn't check in detail.



---

archive/issue_events_052424.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2015-11-02T22:25:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-52424"
}
```



---

archive/issue_events_052425.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2015-11-02T22:25:57Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-52425"
}
```



---

archive/issue_events_052426.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2015-11-02T22:25:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-52426"
}
```



---

archive/issue_comments_034849.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,16 @@\n The multifactorial method on integers is different than the one at http://mathworld.wolfram.com/Multifactorial.html and http://www.research.att.com/~njas/sequences/A007661; unless there are multiple competing definitions of multifactorial, this is a bug.\n \n (The references give, for example, (5).multifactorial(3) == 10, whereas Sage currently returns 5.)\n+\n+There are further problems: k is assumed to be a C-int. Hence,\n+\n+```\n+sage: a=2^64\n+sage: a.multifactorial(a)\n+```\n+doesn't work, whereas the appropriate value, a, would be no problem to represent.\n+\n+How badly do people need these numbers? for which ranges should the computation be optimized? The current implementation can easily be adjusted to give answers that agree with the definition elsewhere, fairly efficiently, for ranges where k fits easily in a \"long\".\n+\n+Indeed, the current implementation refuses to compute the multifactorial if n itself doesn't fit in a long. The claim in the current error message, \"This is probably OK, since the answer would have billions of digits.\" is not quite true: if the number of digits is about (n/k) times the number of digits in n, so as long as n/k isn't too large, there isn't really an issue. It may well be that applications of multifactorial never venture in those ranges, though.\n+\n``````\n",
    "created_at": "2015-11-02T22:25:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34849",
    "user": "https://github.com/nbruin"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,16 @@
 The multifactorial method on integers is different than the one at http://mathworld.wolfram.com/Multifactorial.html and http://www.research.att.com/~njas/sequences/A007661; unless there are multiple competing definitions of multifactorial, this is a bug.
 
 (The references give, for example, (5).multifactorial(3) == 10, whereas Sage currently returns 5.)
+
+There are further problems: k is assumed to be a C-int. Hence,
+
+```
+sage: a=2^64
+sage: a.multifactorial(a)
+```
+doesn't work, whereas the appropriate value, a, would be no problem to represent.
+
+How badly do people need these numbers? for which ranges should the computation be optimized? The current implementation can easily be adjusted to give answers that agree with the definition elsewhere, fairly efficiently, for ranges where k fits easily in a "long".
+
+Indeed, the current implementation refuses to compute the multifactorial if n itself doesn't fit in a long. The claim in the current error message, "This is probably OK, since the answer would have billions of digits." is not quite true: if the number of digits is about (n/k) times the number of digits in n, so as long as n/k isn't too large, there isn't really an issue. It may well be that applications of multifactorial never venture in those ranges, though.
+
``````




---

archive/issue_events_052427.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2015-11-02T22:25:57Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "rename": {
        "from": "wrong definition of multifactorial?",
        "to": "problems with multifactorial?"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-52427"
}
```



---

archive/issue_comments_034850.json:
```json
{
    "body": "<a id='comment:17'>**Comment 17:**</a>\nThanks nbruin.\nPlease review the changes made.\nhttps://github.com/prateekcs14/sage/commit/2cb944378c97bdad76a053e37d579d492f68d44c",
    "created_at": "2015-11-04T11:02:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34850",
    "user": "https://github.com/sagetrac-prateek-cs14"
}
```

<a id='comment:17'>**Comment 17:**</a>
Thanks nbruin.
Please review the changes made.
https://github.com/prateekcs14/sage/commit/2cb944378c97bdad76a053e37d579d492f68d44c



---

archive/issue_comments_034851.json:
```json
{
    "body": "<a id='comment:18'>**Comment 18:**</a>\nReplying to [prateek.cs14](#comment%3A17):\n> Thanks nbruin.\n> Please review the changes made.\n> https://github.com/prateekcs14/sage/commit/2cb944378c97bdad76a053e37d579d492f68d44c\n\nCurrently, the code is nicely interruptable with CTRL-C if a particularly long computation was being done. Does your code have that property? (you stripped out the `sig_on/sig_off`. On the other hand you revert to using (python?) integers instead of using gmp directly, so perhaps interrupts get enabled in that code)\n\nCurrently, the code is taking efforts to balance the size of the factors it was multiplying. This is a well-known technique to improve performance, because it reduces the number of multiplications where a particularly big number is involved (currently there is a 32/64 bit bug in that code, by the way) You strip that out. Do you have data to confirm this is not a problem?\n\nYou may want to try things like\n\n```\nsage: %timeit 10000001.multifactorial(2)\n1 loops, best of 3: 8.47 s per loop\n```\nand possibly with larger numbers too. You should compare the current implementation with the new one.",
    "created_at": "2015-11-06T16:47:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34851",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:18'>**Comment 18:**</a>
Replying to [prateek.cs14](#comment%3A17):
> Thanks nbruin.
> Please review the changes made.
> https://github.com/prateekcs14/sage/commit/2cb944378c97bdad76a053e37d579d492f68d44c

Currently, the code is nicely interruptable with CTRL-C if a particularly long computation was being done. Does your code have that property? (you stripped out the `sig_on/sig_off`. On the other hand you revert to using (python?) integers instead of using gmp directly, so perhaps interrupts get enabled in that code)

Currently, the code is taking efforts to balance the size of the factors it was multiplying. This is a well-known technique to improve performance, because it reduces the number of multiplications where a particularly big number is involved (currently there is a 32/64 bit bug in that code, by the way) You strip that out. Do you have data to confirm this is not a problem?

You may want to try things like

```
sage: %timeit 10000001.multifactorial(2)
1 loops, best of 3: 8.47 s per loop
```
and possibly with larger numbers too. You should compare the current implementation with the new one.



---

archive/issue_comments_034852.json:
```json
{
    "body": "<a id='comment:19'>**Comment 19:**</a>\nPlease review the changes made.I increased the sub_products by 1 and set i in k*i+residue from 0.\nhttps://github.com/sagemath/sage/commit/8447058f8bb7f017bdefd7086300c4fc3b46ff21",
    "created_at": "2015-12-05T09:38:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34852",
    "user": "https://github.com/sagetrac-prateek-cs14"
}
```

<a id='comment:19'>**Comment 19:**</a>
Please review the changes made.I increased the sub_products by 1 and set i in k*i+residue from 0.
https://github.com/sagemath/sage/commit/8447058f8bb7f017bdefd7086300c4fc3b46ff21



---

archive/issue_comments_034853.json:
```json
{
    "body": "**Branch:** [u/nbruin/problems_with_multifactorial_](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/problems_with_multifactorial_)",
    "created_at": "2015-12-09T22:39:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34853",
    "user": "https://github.com/nbruin"
}
```

**Branch:** [u/nbruin/problems_with_multifactorial_](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/problems_with_multifactorial_)



---

archive/issue_comments_034854.json:
```json
{
    "body": "**Changing assignee** from @robertwb to prateek.cs14.",
    "created_at": "2015-12-10T09:50:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34854",
    "user": "https://github.com/sagetrac-prateek-cs14"
}
```

**Changing assignee** from @robertwb to prateek.cs14.



---

archive/issue_comments_034855.json:
```json
{
    "body": "**Commit:** [098b62d0331feb8a92156695ca16c6ac305f9d73](https://github.com/sagemath/sagetrac-mirror/commit/098b62d0331feb8a92156695ca16c6ac305f9d73)",
    "created_at": "2015-12-10T09:50:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34855",
    "user": "https://github.com/sagetrac-prateek-cs14"
}
```

**Commit:** [098b62d0331feb8a92156695ca16c6ac305f9d73](https://github.com/sagemath/sagetrac-mirror/commit/098b62d0331feb8a92156695ca16c6ac305f9d73)



---

archive/issue_comments_034856.json:
```json
{
    "body": "**Remove assignee** prateek.cs14.",
    "created_at": "2015-12-10T09:57:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34856",
    "user": "https://github.com/sagetrac-prateek-cs14"
}
```

**Remove assignee** prateek.cs14.



---

archive/issue_comments_034857.json:
```json
{
    "body": "**Changing branch** from \"[u/nbruin/problems_with_multifactorial_](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/problems_with_multifactorial_)\" to \"[u/prateek.cs14/problems_with_multifactorial_](https://github.com/sagemath/sagetrac-mirror/tree/u/prateek.cs14/problems_with_multifactorial_)\".",
    "created_at": "2015-12-10T10:24:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34857",
    "user": "https://github.com/sagetrac-prateek-cs14"
}
```

**Changing branch** from "[u/nbruin/problems_with_multifactorial_](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/problems_with_multifactorial_)" to "[u/prateek.cs14/problems_with_multifactorial_](https://github.com/sagemath/sagetrac-mirror/tree/u/prateek.cs14/problems_with_multifactorial_)".



---

archive/issue_comments_034858.json:
```json
{
    "body": "<a id='comment:24'>**Comment 24:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4c176a9326c29ed717681f9d9c3dcd1b66a1336f\">4c176a9</a></td><td><code>Redefining multifactorial</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/68eb8e801c53facebb83482138937cdb066c1546\">68eb8e8</a></td><td><code>Merge branch 'u/prateek.cs14/problems_with_multifactorial_' of git://trac.sagemath.org/sage into my_branch</code></td></tr></table>\n",
    "created_at": "2015-12-12T07:54:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34858",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:24'>**Comment 24:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4c176a9326c29ed717681f9d9c3dcd1b66a1336f">4c176a9</a></td><td><code>Redefining multifactorial</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/68eb8e801c53facebb83482138937cdb066c1546">68eb8e8</a></td><td><code>Merge branch 'u/prateek.cs14/problems_with_multifactorial_' of git://trac.sagemath.org/sage into my_branch</code></td></tr></table>




---

archive/issue_comments_034859.json:
```json
{
    "body": "**Changing commit** from \"[098b62d0331feb8a92156695ca16c6ac305f9d73](https://github.com/sagemath/sagetrac-mirror/commit/098b62d0331feb8a92156695ca16c6ac305f9d73)\" to \"[68eb8e801c53facebb83482138937cdb066c1546](https://github.com/sagemath/sagetrac-mirror/commit/68eb8e801c53facebb83482138937cdb066c1546)\".",
    "created_at": "2015-12-12T07:54:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34859",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[098b62d0331feb8a92156695ca16c6ac305f9d73](https://github.com/sagemath/sagetrac-mirror/commit/098b62d0331feb8a92156695ca16c6ac305f9d73)" to "[68eb8e801c53facebb83482138937cdb066c1546](https://github.com/sagemath/sagetrac-mirror/commit/68eb8e801c53facebb83482138937cdb066c1546)".



---

archive/issue_comments_034860.json:
```json
{
    "body": "<a id='comment:25'>**Comment 25:**</a>\nCongratulations on getting a branch attached. Todo list:\n- make sure documentation is changed to reflect new behaviour and include doctests that confirm it\n- clean up your branch: as you can see in the diffs: `52 files changed, 7057 insertions, 5 deletions`. That's due to your \"Merge\" commit.\n\nSince the intended change only touches 4 lines, it's probably easier to start with a fresh copy of current \"develop\", make the edits. and commit that. Then you need no merging at all.",
    "created_at": "2015-12-12T17:16:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34860",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:25'>**Comment 25:**</a>
Congratulations on getting a branch attached. Todo list:
- make sure documentation is changed to reflect new behaviour and include doctests that confirm it
- clean up your branch: as you can see in the diffs: `52 files changed, 7057 insertions, 5 deletions`. That's due to your "Merge" commit.

Since the intended change only touches 4 lines, it's probably easier to start with a fresh copy of current "develop", make the edits. and commit that. Then you need no merging at all.



---

archive/issue_events_052428.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2015-12-12T17:16:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-52428"
}
```



---

archive/issue_events_052429.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2015-12-12T17:16:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-52429"
}
```



---

archive/issue_comments_034861.json:
```json
{
    "body": "**Changing commit** from \"[68eb8e801c53facebb83482138937cdb066c1546](https://github.com/sagemath/sagetrac-mirror/commit/68eb8e801c53facebb83482138937cdb066c1546)\" to \"[173f0eaf83f3f894bcbd98b381f891c668da2030](https://github.com/sagemath/sagetrac-mirror/commit/173f0eaf83f3f894bcbd98b381f891c668da2030)\".",
    "created_at": "2015-12-15T14:47:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34861",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[68eb8e801c53facebb83482138937cdb066c1546](https://github.com/sagemath/sagetrac-mirror/commit/68eb8e801c53facebb83482138937cdb066c1546)" to "[173f0eaf83f3f894bcbd98b381f891c668da2030](https://github.com/sagemath/sagetrac-mirror/commit/173f0eaf83f3f894bcbd98b381f891c668da2030)".



---

archive/issue_comments_034862.json:
```json
{
    "body": "<a id='comment:26'>**Comment 26:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f94b9cc747be06128f2371f49efef7d8db64e416\">f94b9cc</a></td><td><code>Doctest added</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/173f0eaf83f3f894bcbd98b381f891c668da2030\">173f0ea</a></td><td><code>Merge branch 'u/prateek.cs14/problems_with_multifactorial_' of git://trac.sagemath.org/sage into try</code></td></tr></table>\n",
    "created_at": "2015-12-15T14:47:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34862",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:26'>**Comment 26:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f94b9cc747be06128f2371f49efef7d8db64e416">f94b9cc</a></td><td><code>Doctest added</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/173f0eaf83f3f894bcbd98b381f891c668da2030">173f0ea</a></td><td><code>Merge branch 'u/prateek.cs14/problems_with_multifactorial_' of git://trac.sagemath.org/sage into try</code></td></tr></table>




---

archive/issue_comments_034863.json:
```json
{
    "body": "<a id='comment:27'>**Comment 27:**</a>\nYour indentation is not really working well in your doctests - follow the developer guide and other code.  (Ask if you need help!)  I also agree with Nils' comments.",
    "created_at": "2015-12-17T03:50:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34863",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:27'>**Comment 27:**</a>
Your indentation is not really working well in your doctests - follow the developer guide and other code.  (Ask if you need help!)  I also agree with Nils' comments.



---

archive/issue_comments_034864.json:
```json
{
    "body": "<a id='comment:28'>**Comment 28:**</a>\nAlso note that, as was remarked previously, the original behaviour of multifactorial was consistent with the description in its documentation. So, by changing the behaviour but not the documentation you are basically introducing a bug. Ideally you'd include a reference to a literature source to document which convention you are following, along with a description of what the routine in sage does.",
    "created_at": "2015-12-17T05:09:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34864",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:28'>**Comment 28:**</a>
Also note that, as was remarked previously, the original behaviour of multifactorial was consistent with the description in its documentation. So, by changing the behaviour but not the documentation you are basically introducing a bug. Ideally you'd include a reference to a literature source to document which convention you are following, along with a description of what the routine in sage does.



---

archive/issue_comments_034865.json:
```json
{
    "body": "<a id='comment:29'>**Comment 29:**</a>\nCan I change the definition to \n\" Computes the k-th factorial `n!^{(k)}` of self. For k=1\n  this is the standard factorial, and for k greater than one it is\n  the product of every k-th terms down from self to the smallest possible positive integer. \n  The recursive definition is used to extend this function to the negative integers.\"\nIs this look fine ?",
    "created_at": "2015-12-17T14:29:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34865",
    "user": "https://github.com/sagetrac-prateek-cs14"
}
```

<a id='comment:29'>**Comment 29:**</a>
Can I change the definition to 
" Computes the k-th factorial `n!^{(k)}` of self. For k=1
  this is the standard factorial, and for k greater than one it is
  the product of every k-th terms down from self to the smallest possible positive integer. 
  The recursive definition is used to extend this function to the negative integers."
Is this look fine ?



---

archive/issue_comments_034866.json:
```json
{
    "body": "<a id='comment:30'>**Comment 30:**</a>\nSome people have complained about using \"self\" in the docstring, and they have a point: in the call\n`10.multifactorial(3)` there is never any mention of \"self\". I think it can be avoided here. Your description in words is pretty good, but requires careful reading to pry out the base cases. That might be difficult for non-native speakers. Perhaps\n\n```\nReturns the k-th multifactorial.\n\nThe k-th multifactorial n, denoted by n!^{(k)}, as implemented in Sage\n is defined by\n\nn!^{(k)} = n for 1 <= n < k and\nn!^{(k)} = n * ( (n-k)^{(k)} for n >= k\n\nThe recursive definition is used to extend this function to the negative\nintegers.\n```\n\nYou'd have to figure out how to ensure that the formulas are rendered acceptably in all output formats of the sage documentation, though.\n\nThat said, your proposal is in the style of the current docstring, so I don't think a positive review would be held back by it.\n\nNote that one of the doctests illustrates the behaviour:\n\n```\n      sage: 23.multifactorial(2)\n      316234143225\n      sage: prod([1..23, step=2])\n      316234143225\n```\nIt would be very instructive if you would change the parameters there to a case that distinguishes between the old and the new behaviour.",
    "created_at": "2015-12-17T18:18:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34866",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:30'>**Comment 30:**</a>
Some people have complained about using "self" in the docstring, and they have a point: in the call
`10.multifactorial(3)` there is never any mention of "self". I think it can be avoided here. Your description in words is pretty good, but requires careful reading to pry out the base cases. That might be difficult for non-native speakers. Perhaps

```
Returns the k-th multifactorial.

The k-th multifactorial n, denoted by n!^{(k)}, as implemented in Sage
 is defined by

n!^{(k)} = n for 1 <= n < k and
n!^{(k)} = n * ( (n-k)^{(k)} for n >= k

The recursive definition is used to extend this function to the negative
integers.
```

You'd have to figure out how to ensure that the formulas are rendered acceptably in all output formats of the sage documentation, though.

That said, your proposal is in the style of the current docstring, so I don't think a positive review would be held back by it.

Note that one of the doctests illustrates the behaviour:

```
      sage: 23.multifactorial(2)
      316234143225
      sage: prod([1..23, step=2])
      316234143225
```
It would be very instructive if you would change the parameters there to a case that distinguishes between the old and the new behaviour.



---

archive/issue_comments_034867.json:
```json
{
    "body": "<a id='comment:31'>**Comment 31:**</a>\nLooks like this ticket has been abandoned again.",
    "created_at": "2016-01-07T22:35:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34867",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:31'>**Comment 31:**</a>
Looks like this ticket has been abandoned again.



---

archive/issue_comments_034868.json:
```json
{
    "body": "**Changing commit** from \"[173f0eaf83f3f894bcbd98b381f891c668da2030](https://github.com/sagemath/sagetrac-mirror/commit/173f0eaf83f3f894bcbd98b381f891c668da2030)\" to \"\".",
    "created_at": "2016-08-16T06:46:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34868",
    "user": "https://github.com/sagetrac-iconjack"
}
```

**Changing commit** from "[173f0eaf83f3f894bcbd98b381f891c668da2030](https://github.com/sagemath/sagetrac-mirror/commit/173f0eaf83f3f894bcbd98b381f891c668da2030)" to "".



---

archive/issue_events_052430.json:
```json
{
    "actor": "https://github.com/sagetrac-iconjack",
    "created_at": "2016-08-16T06:46:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-52430"
}
```



---

archive/issue_events_052431.json:
```json
{
    "actor": "https://github.com/sagetrac-iconjack",
    "created_at": "2016-08-16T06:46:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-52431"
}
```



---

archive/issue_comments_034869.json:
```json
{
    "body": "**Changing branch** from \"[u/prateek.cs14/problems_with_multifactorial_](https://github.com/sagemath/sagetrac-mirror/tree/u/prateek.cs14/problems_with_multifactorial_)\" to \"\".",
    "created_at": "2016-08-16T06:46:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34869",
    "user": "https://github.com/sagetrac-iconjack"
}
```

**Changing branch** from "[u/prateek.cs14/problems_with_multifactorial_](https://github.com/sagemath/sagetrac-mirror/tree/u/prateek.cs14/problems_with_multifactorial_)" to "".



---

archive/issue_comments_034870.json:
```json
{
    "body": "**Assignee:** iconjack",
    "created_at": "2016-08-16T06:46:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34870",
    "user": "https://github.com/sagetrac-iconjack"
}
```

**Assignee:** iconjack



---

archive/issue_comments_034871.json:
```json
{
    "body": "<a id='comment:33'>**Comment 33:**</a>\nThe multifactorial implementation is optimized to limit large multiplications by computing e.g.  ((a*b)*(c*d))*((e*f)*(g*h)) instead of (((((((a*b)*c)*d)*e)*f)*g)*h). It's a little tricky, using bit patterns of the index to fold the multiplications, rather than doing it recursively. As others noted, there was an off-by-one error (two actually), which caused 5.factorial(3) to eval to 5 rather than 10.\n\nA different bug was that for example 11.multifactorial(17) was returning 1 instead of 11.\n\nWStein suggested using the already-existing prod function that already implements this balanced multiplication. However, prod is more general, not just integers. The current multifactorial uses GMP's integer functions, and may be faster. \n\nIn the long run, I think that multifactorial, prod, balanced_list_prod, and interator_prod should be refactored, but since this is my first commit, I've decided to simply fix the bugs addressed in this ticket. There's another bug, related to non-integer values being passed in, but I'll make another ticket for that.\n\nAlso added a test case.",
    "created_at": "2016-08-17T01:37:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34871",
    "user": "https://github.com/sagetrac-iconjack"
}
```

<a id='comment:33'>**Comment 33:**</a>
The multifactorial implementation is optimized to limit large multiplications by computing e.g.  ((a*b)*(c*d))*((e*f)*(g*h)) instead of (((((((a*b)*c)*d)*e)*f)*g)*h). It's a little tricky, using bit patterns of the index to fold the multiplications, rather than doing it recursively. As others noted, there was an off-by-one error (two actually), which caused 5.factorial(3) to eval to 5 rather than 10.

A different bug was that for example 11.multifactorial(17) was returning 1 instead of 11.

WStein suggested using the already-existing prod function that already implements this balanced multiplication. However, prod is more general, not just integers. The current multifactorial uses GMP's integer functions, and may be faster. 

In the long run, I think that multifactorial, prod, balanced_list_prod, and interator_prod should be refactored, but since this is my first commit, I've decided to simply fix the bugs addressed in this ticket. There's another bug, related to non-integer values being passed in, but I'll make another ticket for that.

Also added a test case.



---

archive/issue_events_052432.json:
```json
{
    "actor": "https://github.com/sagetrac-iconjack",
    "created_at": "2016-08-17T01:37:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-52432"
}
```



---

archive/issue_events_052433.json:
```json
{
    "actor": "https://github.com/sagetrac-iconjack",
    "created_at": "2016-08-17T01:37:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-52433"
}
```



---

archive/issue_comments_034872.json:
```json
{
    "body": "**Branch:** [/u/iconjack/5415-multifactorial](https://github.com/sagemath/sagetrac-mirror/tree//u/iconjack/5415-multifactorial)",
    "created_at": "2016-08-17T07:53:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34872",
    "user": "https://github.com/sagetrac-iconjack"
}
```

**Branch:** [/u/iconjack/5415-multifactorial](https://github.com/sagemath/sagetrac-mirror/tree//u/iconjack/5415-multifactorial)



---

archive/issue_comments_034873.json:
```json
{
    "body": "**Changing branch** from \"[/u/iconjack/5415-multifactorial](https://github.com/sagemath/sagetrac-mirror/tree//u/iconjack/5415-multifactorial)\" to \"[u/iconjack/5415-multifactorial](https://github.com/sagemath/sagetrac-mirror/tree/u/iconjack/5415-multifactorial)\".",
    "created_at": "2016-08-17T07:54:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34873",
    "user": "https://github.com/sagetrac-iconjack"
}
```

**Changing branch** from "[/u/iconjack/5415-multifactorial](https://github.com/sagemath/sagetrac-mirror/tree//u/iconjack/5415-multifactorial)" to "[u/iconjack/5415-multifactorial](https://github.com/sagemath/sagetrac-mirror/tree/u/iconjack/5415-multifactorial)".



---

archive/issue_comments_034874.json:
```json
{
    "body": "<a id='comment:36'>**Comment 36:**</a>\nIt seems your branch does not exist. Don't you use git-trac as in the documentation?",
    "created_at": "2016-08-17T07:57:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34874",
    "user": "https://github.com/rwst"
}
```

<a id='comment:36'>**Comment 36:**</a>
It seems your branch does not exist. Don't you use git-trac as in the documentation?



---

archive/issue_comments_034875.json:
```json
{
    "body": "<a id='comment:37'>**Comment 37:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/502452f75850f2c4f72fb0b25b7a6a84e4e33110\">502452f</a></td><td><code>Trac #5415: problems with multifactorial?</code></td></tr></table>\n",
    "created_at": "2016-08-18T03:54:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34875",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:37'>**Comment 37:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/502452f75850f2c4f72fb0b25b7a6a84e4e33110">502452f</a></td><td><code>Trac #5415: problems with multifactorial?</code></td></tr></table>




---

archive/issue_comments_034876.json:
```json
{
    "body": "**Commit:** [502452f75850f2c4f72fb0b25b7a6a84e4e33110](https://github.com/sagemath/sagetrac-mirror/commit/502452f75850f2c4f72fb0b25b7a6a84e4e33110)",
    "created_at": "2016-08-18T03:54:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34876",
    "user": "https://github.com/sagetrac-git"
}
```

**Commit:** [502452f75850f2c4f72fb0b25b7a6a84e4e33110](https://github.com/sagemath/sagetrac-mirror/commit/502452f75850f2c4f72fb0b25b7a6a84e4e33110)



---

archive/issue_comments_034877.json:
```json
{
    "body": "<a id='comment:38'>**Comment 38:**</a>\nDo you know why `residue` is not declared as `cdef int`?",
    "created_at": "2016-09-19T06:06:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34877",
    "user": "https://github.com/videlec"
}
```

<a id='comment:38'>**Comment 38:**</a>
Do you know why `residue` is not declared as `cdef int`?



---

archive/issue_comments_034878.json:
```json
{
    "body": "<a id='comment:39'>**Comment 39:**</a>\nReplying to [@videlec](#comment%3A38):\n> Do you know why `residue` is not declared as `cdef int`?\n\nNo, I didn't change that line. I'll change it to cdef int and test but for now I'd like to get this change reviewed and committed.",
    "created_at": "2016-09-20T00:48:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34878",
    "user": "https://github.com/sagetrac-iconjack"
}
```

<a id='comment:39'>**Comment 39:**</a>
Replying to [@videlec](#comment%3A38):
> Do you know why `residue` is not declared as `cdef int`?

No, I didn't change that line. I'll change it to cdef int and test but for now I'd like to get this change reviewed and committed.



---

archive/issue_events_052434.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-09-21T06:14:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-52434"
}
```



---

archive/issue_events_052435.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-09-21T06:14:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-52435"
}
```



---

archive/issue_comments_034879.json:
```json
{
    "body": "**Reviewer:** Vincent Delecroix",
    "created_at": "2016-09-21T06:14:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34879",
    "user": "https://github.com/videlec"
}
```

**Reviewer:** Vincent Delecroix



---

archive/issue_comments_034880.json:
```json
{
    "body": "<a id='comment:40'>**Comment 40:**</a>\nYour changes look good. Two small things\n\n1. add your name in the \"Authors\" field of the ticket\n\n2. Add the following doctest in a `TESTS` block\n\n```\nsage: for a in range(1,20):\n....:     for b in range(1,20):\n....:         assert ZZ(a).multifactorial(b) == prod(x for x in range(a,0,-b))\n```",
    "created_at": "2016-09-21T06:14:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34880",
    "user": "https://github.com/videlec"
}
```

<a id='comment:40'>**Comment 40:**</a>
Your changes look good. Two small things

1. add your name in the "Authors" field of the ticket

2. Add the following doctest in a `TESTS` block

```
sage: for a in range(1,20):
....:     for b in range(1,20):
....:         assert ZZ(a).multifactorial(b) == prod(x for x in range(a,0,-b))
```



---

archive/issue_comments_034881.json:
```json
{
    "body": "**Author:** Jack Kennedy",
    "created_at": "2016-09-24T07:37:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34881",
    "user": "https://github.com/sagetrac-iconjack"
}
```

**Author:** Jack Kennedy



---

archive/issue_comments_034882.json:
```json
{
    "body": "**Changing commit** from \"[502452f75850f2c4f72fb0b25b7a6a84e4e33110](https://github.com/sagemath/sagetrac-mirror/commit/502452f75850f2c4f72fb0b25b7a6a84e4e33110)\" to \"[020423572f0b240cd857b26fc7b750080ca3ed39](https://github.com/sagemath/sagetrac-mirror/commit/020423572f0b240cd857b26fc7b750080ca3ed39)\".",
    "created_at": "2017-05-24T20:19:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34882",
    "user": "https://github.com/fchapoton"
}
```

**Changing commit** from "[502452f75850f2c4f72fb0b25b7a6a84e4e33110](https://github.com/sagemath/sagetrac-mirror/commit/502452f75850f2c4f72fb0b25b7a6a84e4e33110)" to "[020423572f0b240cd857b26fc7b750080ca3ed39](https://github.com/sagemath/sagetrac-mirror/commit/020423572f0b240cd857b26fc7b750080ca3ed39)".



---

archive/issue_events_052436.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-05-24T20:19:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-52436"
}
```



---

archive/issue_events_052437.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-05-24T20:19:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-52437"
}
```



---

archive/issue_comments_034883.json:
```json
{
    "body": "**Changing branch** from \"[u/iconjack/5415-multifactorial](https://github.com/sagemath/sagetrac-mirror/tree/u/iconjack/5415-multifactorial)\" to \"[public/5415](https://github.com/sagemath/sagetrac-mirror/tree/public/5415)\".",
    "created_at": "2017-05-24T20:19:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34883",
    "user": "https://github.com/fchapoton"
}
```

**Changing branch** from "[u/iconjack/5415-multifactorial](https://github.com/sagemath/sagetrac-mirror/tree/u/iconjack/5415-multifactorial)" to "[public/5415](https://github.com/sagemath/sagetrac-mirror/tree/public/5415)".



---

archive/issue_comments_034884.json:
```json
{
    "body": "<a id='comment:42'>**Comment 42:**</a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/04ceaeab9c8e169876f860212904a423242aca78\">04ceaea</a></td><td><code>Merge branch 'u/iconjack/5415-multifactorial' in 8.0.b7</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/020423572f0b240cd857b26fc7b750080ca3ed39\">0204235</a></td><td><code>trac 5415 added doctest</code></td></tr></table>\n",
    "created_at": "2017-05-24T20:19:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34884",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:42'>**Comment 42:**</a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/04ceaeab9c8e169876f860212904a423242aca78">04ceaea</a></td><td><code>Merge branch 'u/iconjack/5415-multifactorial' in 8.0.b7</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/020423572f0b240cd857b26fc7b750080ca3ed39">0204235</a></td><td><code>trac 5415 added doctest</code></td></tr></table>




---

archive/issue_events_052438.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-05-25T08:58:35Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-52438"
}
```



---

archive/issue_events_052439.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-05-25T08:58:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-52439"
}
```



---

archive/issue_comments_034885.json:
```json
{
    "body": "**Changing reviewer** from \"Vincent Delecroix\" to \"Vincent Delecroix, Fr\u00e9d\u00e9ric Chapoton\".",
    "created_at": "2017-05-26T06:19:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34885",
    "user": "https://github.com/fchapoton"
}
```

**Changing reviewer** from "Vincent Delecroix" to "Vincent Delecroix, Frédéric Chapoton".



---

archive/issue_events_052440.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-05-26T06:19:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-52440"
}
```



---

archive/issue_events_052441.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-05-26T06:19:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-52441"
}
```



---

archive/issue_comments_034886.json:
```json
{
    "body": "<a id='comment:44'>**Comment 44:**</a>\nok, this passes all tests. I am setting to positive.",
    "created_at": "2017-05-26T06:19:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34886",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:44'>**Comment 44:**</a>
ok, this passes all tests. I am setting to positive.



---

archive/issue_comments_034887.json:
```json
{
    "body": "**Changing branch** from \"[public/5415](https://github.com/sagemath/sagetrac-mirror/tree/public/5415)\" to \"[020423572f0b240cd857b26fc7b750080ca3ed39](https://github.com/sagemath/sagetrac-mirror/commit/020423572f0b240cd857b26fc7b750080ca3ed39)\".",
    "created_at": "2017-05-27T23:42:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5415#issuecomment-34887",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/5415](https://github.com/sagemath/sagetrac-mirror/tree/public/5415)" to "[020423572f0b240cd857b26fc7b750080ca3ed39](https://github.com/sagemath/sagetrac-mirror/commit/020423572f0b240cd857b26fc7b750080ca3ed39)".



---

archive/issue_events_052442.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-27T23:42:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-52442"
}
```



---

archive/issue_events_052443.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "584c4d031aaf32b09d4a06693b67b548e81be369",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-05-27T23:42:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/5415",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5415#event-52443"
}
```
