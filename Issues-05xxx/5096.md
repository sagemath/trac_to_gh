# Issue 5096: [with patch and spkg] pynac interface enhancements

archive/issues_005096.json:
```json
{
    "body": "\n\n**Assignee:** @burcin\n\n**CC:**  @mwhansen\n\nIssue created by migration from https://trac.sagemath.org/ticket/5096\n\n",
    "closed_at": "2009-02-02T17:20:02Z",
    "created_at": "2009-01-25T08:14:36Z",
    "labels": [
        "component: calculus",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-3.3",
    "title": "[with patch and spkg] pynac interface enhancements",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/5096",
    "user": "https://github.com/williamstein"
}
```


**Assignee:** @burcin

**CC:**  @mwhansen

Issue created by migration from https://trac.sagemath.org/ticket/5096





---

archive/issue_comments_040760.json:
```json
{
    "body": "<a id='comment:1'></a>\nSee http://sage.math.washington.edu/home/burcin/pynac for the new spkg and patches to the core sage library.",
    "created_at": "2009-01-25T08:15:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5096#issuecomment-40760",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:1'></a>
See http://sage.math.washington.edu/home/burcin/pynac for the new spkg and patches to the core sage library.



---

archive/issue_comments_040761.json:
```json
{
    "body": "<a id='comment:2'></a>\nREFEREE REPORT:\n\n* Add a short description at the top docstring for `x.operator?`.\n\n* Make sure the latex docstring actually passes.",
    "created_at": "2009-01-25T08:29:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5096#issuecomment-40761",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:2'></a>
REFEREE REPORT:

* Add a short description at the top docstring for `x.operator?`.

* Make sure the latex docstring actually passes.



---

archive/attachments_005715.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_5096-01_pynac_operator.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5096/trac_5096-01_pynac_operator.patch",
    "created_at": "2009-01-30T13:54:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5096",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/burcin"
}
```



---

archive/issue_comments_040762.json:
```json
{
    "body": "add .operator() method",
    "created_at": "2009-01-30T13:54:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5096#issuecomment-40762",
    "user": "https://github.com/burcin"
}
```

add .operator() method



---

archive/issue_comments_040763.json:
```json
{
    "body": "allow pynac expressions as arguments to binomial and factorial",
    "created_at": "2009-01-30T13:55:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5096#issuecomment-40763",
    "user": "https://github.com/burcin"
}
```

allow pynac expressions as arguments to binomial and factorial



---

archive/attachments_005716.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_5096-03_expression_iterator.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5096/trac_5096-03_expression_iterator.patch",
    "created_at": "2009-01-30T13:56:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5096",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/burcin"
}
```



---

archive/issue_comments_040764.json:
```json
{
    "body": "add iterator and __getitem__ support to expressions",
    "created_at": "2009-01-30T13:56:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5096#issuecomment-40764",
    "user": "https://github.com/burcin"
}
```

add iterator and __getitem__ support to expressions



---

archive/issue_comments_040765.json:
```json
{
    "body": ".subs() now works with multiple arguments",
    "created_at": "2009-01-30T13:56:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5096#issuecomment-40765",
    "user": "https://github.com/burcin"
}
```

.subs() now works with multiple arguments



---

archive/attachments_005717.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_5096-05_print_order.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5096/trac_5096-05_print_order.patch",
    "created_at": "2009-01-30T13:57:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5096",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/burcin"
}
```



---

archive/issue_comments_040766.json:
```json
{
    "body": "fix doctests for printing changes",
    "created_at": "2009-01-30T13:57:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5096#issuecomment-40766",
    "user": "https://github.com/burcin"
}
```

fix doctests for printing changes



---

archive/issue_comments_040767.json:
```json
{
    "body": "add .collect_common_factors() method",
    "created_at": "2009-01-30T13:57:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5096#issuecomment-40767",
    "user": "https://github.com/burcin"
}
```

add .collect_common_factors() method



---

archive/attachments_005718.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_5096-06_collect_common_factors.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5096/trac_5096-06_collect_common_factors.patch",
    "created_at": "2009-01-30T13:58:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5096",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/burcin"
}
```



---

archive/issue_comments_040768.json:
```json
{
    "body": "add latex printing support, fix is_integer method",
    "created_at": "2009-01-30T13:58:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5096#issuecomment-40768",
    "user": "https://github.com/burcin"
}
```

add latex printing support, fix is_integer method



---

archive/attachments_005719.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_5096-08_constants.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5096/trac_5096-08_constants.patch",
    "created_at": "2009-01-30T13:59:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5096",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/burcin"
}
```



---

archive/issue_comments_040769.json:
```json
{
    "body": "correct coercion of symbolic constants",
    "created_at": "2009-01-30T13:59:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5096#issuecomment-40769",
    "user": "https://github.com/burcin"
}
```

correct coercion of symbolic constants



---

archive/issue_comments_040770.json:
```json
{
    "body": "**Changing status** from new to assigned.",
    "created_at": "2009-01-30T14:04:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5096#issuecomment-40770",
    "user": "https://github.com/burcin"
}
```

**Changing status** from new to assigned.



---

archive/issue_comments_040771.json:
```json
{
    "body": "<a id='comment:3'></a>\nA new version of pynac is available here:\n\nhttp://sage.math.washington.edu/home/burcin/pynac/pynac-0.1.2.spkg\n\n\nThe attached patches implement various enhancements to the pynac interface.\n\nThis issue now depends on #5132.",
    "created_at": "2009-01-30T14:04:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5096#issuecomment-40771",
    "user": "https://github.com/burcin"
}
```

<a id='comment:3'></a>
A new version of pynac is available here:

http://sage.math.washington.edu/home/burcin/pynac/pynac-0.1.2.spkg


The attached patches implement various enhancements to the pynac interface.

This issue now depends on #5132.



---

archive/issue_events_015404.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/5096",
    "rename": {
        "from": "implement beautiful printing support for pynac",
        "to": "[with patch and spkg] pynac interface enhancements"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5096#event-15404"
}
```



---

archive/issue_comments_040772.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2009-01-30T14:04:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5096#issuecomment-40772",
    "user": "https://github.com/burcin"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_040773.json:
```json
{
    "body": "<a id='comment:4'></a>\nThe spkg looks good, but someone needs to review Burcin's nine patches to the Sage library :)\n\nCheers,\n\nMichael",
    "created_at": "2009-02-02T06:52:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5096#issuecomment-40773",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:4'></a>
The spkg looks good, but someone needs to review Burcin's nine patches to the Sage library :)

Cheers,

Michael



---

archive/issue_comments_040774.json:
```json
{
    "body": "<a id='comment:5'></a>\nAssuming the patches apply and pass tests, I think these can go in.  All of the changes are pretty straightforward.",
    "created_at": "2009-02-02T07:18:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5096#issuecomment-40774",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:5'></a>
Assuming the patches apply and pass tests, I think these can go in.  All of the changes are pretty straightforward.



---

archive/issue_comments_040775.json:
```json
{
    "body": "<a id='comment:6'></a>\nWith the new spkg and all nine patches applied I am seeing two doctest failures:\n\n```\n\tsage -t -long devel/sage/sage/calculus/calculus.py # 6 doctests failed\n\tsage -t -long devel/sage/sage/modules/free_module_element.pyx # 1 doctests failed\n```\nThey all seem to be of the kind\n\n```\nsage -t -long \"devel/sage/sage/modules/free_module_element.pyx\"\n**********************************************************************\nFile \"/scratch/mabshoff/sage-3.3.alpha4/devel/sage/sage/modules/free_module_element.pyx\", line 1637:\n    sage: g(x=3, y=2)\nException raised:\n    Traceback (most recent call last):\n      File \"/scratch/mabshoff/sage-3.3.alpha4/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/scratch/mabshoff/sage-3.3.alpha4/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/scratch/mabshoff/sage-3.3.alpha4/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_52[11]>\", line 1, in <module>\n        g(x=Integer(3), y=Integer(2))###line 1637:\n    sage: g(x=3, y=2)\n      File \"free_module_element.pyx\", line 1640, in sage.modules.free_module_element.FreeModuleElement_generic_dense.__call__ (sage/modules/free_module_element.c:13259)\n      File \"/scratch/mabshoff/sage-3.3.alpha4/local/lib/python2.5/site-packages/sage/calculus/calculus.py\", line 6044, in __call__\n        raise ValueError, \"Expected %s arguments, got %s\"%(len(myvars),len(args))\n    ValueError: Expected 2 arguments, got 0\n**********************************************************************\n```\n\nCheers,\n\nMichael",
    "created_at": "2009-02-02T07:42:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5096#issuecomment-40775",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:6'></a>
With the new spkg and all nine patches applied I am seeing two doctest failures:

```
	sage -t -long devel/sage/sage/calculus/calculus.py # 6 doctests failed
	sage -t -long devel/sage/sage/modules/free_module_element.pyx # 1 doctests failed
```
They all seem to be of the kind

```
sage -t -long "devel/sage/sage/modules/free_module_element.pyx"
**********************************************************************
File "/scratch/mabshoff/sage-3.3.alpha4/devel/sage/sage/modules/free_module_element.pyx", line 1637:
    sage: g(x=3, y=2)
Exception raised:
    Traceback (most recent call last):
      File "/scratch/mabshoff/sage-3.3.alpha4/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/scratch/mabshoff/sage-3.3.alpha4/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/scratch/mabshoff/sage-3.3.alpha4/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_52[11]>", line 1, in <module>
        g(x=Integer(3), y=Integer(2))###line 1637:
    sage: g(x=3, y=2)
      File "free_module_element.pyx", line 1640, in sage.modules.free_module_element.FreeModuleElement_generic_dense.__call__ (sage/modules/free_module_element.c:13259)
      File "/scratch/mabshoff/sage-3.3.alpha4/local/lib/python2.5/site-packages/sage/calculus/calculus.py", line 6044, in __call__
        raise ValueError, "Expected %s arguments, got %s"%(len(myvars),len(args))
    ValueError: Expected 2 arguments, got 0
**********************************************************************
```

Cheers,

Michael



---

archive/issue_events_015405.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/5096",
    "rename": {
        "from": "[with patch and spkg] pynac interface enhancements",
        "to": "[with patch and spkg, need doctest fixes] pynac interface enhancements"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5096#event-15405"
}
```



---

archive/issue_comments_040776.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2009-02-02T07:42:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5096#issuecomment-40776",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_events_015406.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/5096",
    "rename": {
        "from": "[with patch and spkg, need doctest fixes] pynac interface enhancements",
        "to": "[with patch and spkg] pynac interface enhancements"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5096#event-15406"
}
```



---

archive/issue_comments_040777.json:
```json
{
    "body": "**Changing status** from positive_review to positive_review.",
    "created_at": "2009-02-02T14:25:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5096#issuecomment-40777",
    "user": "https://github.com/burcin"
}
```

**Changing status** from positive_review to positive_review.



---

archive/issue_comments_040778.json:
```json
{
    "body": "<a id='comment:7'></a>\nI uploaded a new version of trac_5096-09_callable_expression.patch which reverts the check for the number of arguments of `CallableSymbolicExpression`s. The doctests pass now.",
    "created_at": "2009-02-02T14:25:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5096#issuecomment-40778",
    "user": "https://github.com/burcin"
}
```

<a id='comment:7'></a>
I uploaded a new version of trac_5096-09_callable_expression.patch which reverts the check for the number of arguments of `CallableSymbolicExpression`s. The doctests pass now.



---

archive/issue_comments_040779.json:
```json
{
    "body": "add .function() method to create `CallableSymbolicExpressions`",
    "created_at": "2009-02-02T16:43:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5096#issuecomment-40779",
    "user": "https://github.com/burcin"
}
```

add .function() method to create `CallableSymbolicExpressions`



---

archive/issue_events_015407.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2009-02-02T17:20:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/5096",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5096#event-15407"
}
```



---

archive/attachments_005720.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_5096-09_callable_expression.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5096/trac_5096-09_callable_expression.patch",
    "created_at": "2009-02-02T17:20:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5096",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```



---

archive/issue_comments_040780.json:
```json
{
    "body": "<a id='comment:8'></a>\nMerged all nine patches as well as the spkg into Sage 3.3.alpha4.\n\nCheers,\n\nMichael",
    "created_at": "2009-02-02T17:20:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5096",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5096#issuecomment-40780",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:8'></a>
Merged all nine patches as well as the spkg into Sage 3.3.alpha4.

Cheers,

Michael
