# Issue 5315: Fix MPIR.spkg build on more OSX MacIntel boxen

archive/issues_005315.json:
```json
{
    "assignees": [],
    "body": "There is a known problem with PIC enabled MPIR code on 32 bit OSX when the CPU is capable of 64 bits. To work around that we delete some files, but there are some left that are used on older Macs:\n\n```\np6/mode1o.asm\np6/dive_1.asm\npentium/hamdist.asm\npentium/mod_1.asm\npentium/popcount.asm\npentium/mode1o.asm\npentium/dive_1.asm\n```\nDeleting them on demand will fix the build. See also the thread at\n\n http://groups.google.com/group/sage-devel/browse_thread/thread/88c084b8cd828ac6\n\nCheers,\n\nMichael\n\n**Assignee:** mabshoff\n\nIssue created by migration from https://trac.sagemath.org/ticket/5315\n\n",
    "closed_at": "2009-02-20T16:30:48Z",
    "created_at": "2009-02-20T05:33:37Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20build",
        "https://github.com/sagemath/sage/labels/critical",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-3.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Fix MPIR.spkg build on more OSX MacIntel boxen",
    "type": "issue",
    "updated_at": "2009-02-20T16:30:48Z",
    "url": "https://github.com/sagemath/sage/issues/5315",
    "user": "https://github.com/sagetrac-mabshoff"
}
```
There is a known problem with PIC enabled MPIR code on 32 bit OSX when the CPU is capable of 64 bits. To work around that we delete some files, but there are some left that are used on older Macs:

```
p6/mode1o.asm
p6/dive_1.asm
pentium/hamdist.asm
pentium/mod_1.asm
pentium/popcount.asm
pentium/mode1o.asm
pentium/dive_1.asm
```
Deleting them on demand will fix the build. See also the thread at

 http://groups.google.com/group/sage-devel/browse_thread/thread/88c084b8cd828ac6

Cheers,

Michael

**Assignee:** mabshoff

Issue created by migration from https://trac.sagemath.org/ticket/5315





---

archive/issue_events_051308.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-02-20T05:33:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5315",
    "milestone_number": null,
    "milestone_title": "sage-3.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5315#event-51308"
}
```



---

archive/issue_events_051309.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-02-20T05:33:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5315",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20build",
    "label_color": "08517b",
    "label_name": "component: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5315#event-51309"
}
```



---

archive/issue_events_051310.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-02-20T05:33:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5315",
    "label": "https://github.com/sagemath/sage/labels/critical",
    "label_color": "ff0000",
    "label_name": "critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5315#event-51310"
}
```



---

archive/issue_events_051311.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-02-20T05:33:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5315",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "008080",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5315#event-51311"
}
```



---

archive/issue_events_051312.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-02-20T06:41:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5315",
    "milestone_number": null,
    "milestone_title": "sage-3.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5315#event-51312"
}
```



---

archive/issue_comments_034031.json:
```json
{
    "body": "<a id='comment:2'></a>\nThe spkg at \n\n http://sage.math.washington.edu/home/mabshoff/SPKG/gmp-mpir-0.9.spkg\n\nought to fix the problem. I have asked the reported of the original issue to test and report back.\n\nCheers,\n\nMichael",
    "created_at": "2009-02-20T13:35:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5315#issuecomment-34031",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:2'></a>
The spkg at 

 http://sage.math.washington.edu/home/mabshoff/SPKG/gmp-mpir-0.9.spkg

ought to fix the problem. I have asked the reported of the original issue to test and report back.

Cheers,

Michael



---

archive/issue_events_051313.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-02-20T14:50:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5315",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5315#event-51313"
}
```



---

archive/issue_events_051314.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-02-20T16:28:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5315",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5315#event-51314"
}
```



---

archive/issue_events_051315.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-02-20T16:28:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5315",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5315#event-51315"
}
```



---

archive/issue_comments_034032.json:
```json
{
    "body": "<a id='comment:4'></a>\nPositive review by proxy from Mark:\n\n```\n> I had a class this morning and have only just started the build.\n> It is running now and I can tell you that it has definitely made it\n> past this specific problem.\n\nOk, this is a positive review from you in my eyes for this problem and\nwe can merge the spkg. I will ask someone else to take another look,\nbut I can assure you I did a very clean checkin :)\n\n>  It should still take a couple of hours\n> to complete.  I'll report back when I've got the finished product.\n\nCool, let me know if anything else blows up for you. I would assume\n3.3.rc3 is out before your build finishes.\n```\n\nCheers,\n\nMichael",
    "created_at": "2009-02-20T16:28:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5315#issuecomment-34032",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:4'></a>
Positive review by proxy from Mark:

```
> I had a class this morning and have only just started the build.
> It is running now and I can tell you that it has definitely made it
> past this specific problem.

Ok, this is a positive review from you in my eyes for this problem and
we can merge the spkg. I will ask someone else to take another look,
but I can assure you I did a very clean checkin :)

>  It should still take a couple of hours
> to complete.  I'll report back when I've got the finished product.

Cool, let me know if anything else blows up for you. I would assume
3.3.rc3 is out before your build finishes.
```

Cheers,

Michael



---

archive/issue_events_051316.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-02-20T16:30:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5315",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5315#event-51316"
}
```



---

archive/issue_events_051317.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-02-20T16:30:48Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/5315",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5315#event-51317"
}
```



---

archive/issue_comments_034033.json:
```json
{
    "body": "<a id='comment:5'></a>\nMerged in Sage 3.3.rc3.\n\nCheers,\n\nMichael",
    "created_at": "2009-02-20T16:30:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5315#issuecomment-34033",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:5'></a>
Merged in Sage 3.3.rc3.

Cheers,

Michael
