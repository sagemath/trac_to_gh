# Issue 5389: Creating a  updated GAP workspace with -tp is racy

archive/issues_005389.json:
```json
{
    "assignees": [],
    "body": "See a comment on #5366. When one does doctest Sage with -tp and GAP has been updated, but Sage not started the creation of the workspace is racy since many processes will try to update it at the same time.\n\nStarting up Sage once at the start of -tp via \"sage -c\" ought to fix the problem.\n\nCheers,\n\nMichael\n\nAssignee: **@sagetrac-mabshoff**\n\nReviewer: **Willem Jan Palenstijn**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/5389_\n\n",
    "closed_at": "2011-01-11T06:14:46Z",
    "created_at": "2009-02-26T23:33:09Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/doctest%20coverage",
        "https://github.com/sagemath/sage/labels/worksforme"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.6.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Creating a  updated GAP workspace with -tp is racy",
    "type": "issue",
    "updated_at": "2011-01-11T06:14:46Z",
    "url": "https://github.com/sagemath/sage/issues/5389",
    "user": "https://github.com/sagetrac-mabshoff"
}
```
See a comment on #5366. When one does doctest Sage with -tp and GAP has been updated, but Sage not started the creation of the workspace is racy since many processes will try to update it at the same time.

Starting up Sage once at the start of -tp via "sage -c" ought to fix the problem.

Cheers,

Michael

Assignee: **@sagetrac-mabshoff**

Reviewer: **Willem Jan Palenstijn**

_Issue created by migration from https://trac.sagemath.org/ticket/5389_





---

archive/issue_events_056779.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-02-26T23:33:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5389",
    "milestone_number": null,
    "milestone_title": "sage-4.6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5389#event-56779"
}
```



---

archive/issue_events_056780.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-02-26T23:33:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5389",
    "label": "https://github.com/sagemath/sage/labels/doctest%20coverage",
    "label_color": "696969",
    "label_name": "doctest coverage",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5389#event-56780"
}
```



---

archive/issue_events_056781.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-02-26T23:33:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5389",
    "label": "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5389#event-56781"
}
```



---

archive/issue_events_056782.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-02-26T23:33:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5389",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5389#event-56782"
}
```



---

archive/issue_events_056783.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-02-26T23:33:22Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/5389",
    "title_is": "Creating a  updated GAP workspace with -tp is racy",
    "title_was": "Creating a  updated workspace with -tp is racy",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5389#event-56783"
}
```



---

archive/issue_comments_034511.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nI believe that since `sage-starts` is now executed at the beginning of parallel testing, this has already been fixed.",
    "created_at": "2011-01-11T01:11:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5389#issuecomment-34511",
    "user": "https://github.com/wjp"
}
```

<div id="comment:2" align="right">Comment 2</div>

I believe that since `sage-starts` is now executed at the beginning of parallel testing, this has already been fixed.



---

archive/issue_comments_034512.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nReplying to [@wjp](#comment%3A2):\n> I believe that since `sage-starts` is now executed at the beginning of parallel testing, this has already been fixed.\n\nI agree.",
    "created_at": "2011-01-11T06:14:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5389#issuecomment-34512",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:3" align="right">Comment 3</div>

Replying to [@wjp](#comment%3A2):
> I believe that since `sage-starts` is now executed at the beginning of parallel testing, this has already been fixed.

I agree.



---

archive/issue_events_056784.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-01-11T06:14:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5389",
    "label": "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5389#event-56784"
}
```



---

archive/issue_events_056785.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-01-11T06:14:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5389",
    "label": "https://github.com/sagemath/sage/labels/worksforme",
    "label_color": "a6a6a6",
    "label_name": "worksforme",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5389#event-56785"
}
```



---

archive/issue_comments_034513.json:
```json
{
    "body": "Reviewer: **Willem Jan Palenstijn**",
    "created_at": "2011-01-11T06:14:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5389#issuecomment-34513",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Willem Jan Palenstijn**



---

archive/issue_events_056786.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-01-11T06:14:46Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/5389",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5389#event-56786"
}
```
