# Issue 5597: Rename coercion action methods

archive/issues_005597.json:
```json
{
    "body": "\n```\nCurrently, if A has an action on B (where B is not an A-module) one  \nimplements either a._l_action_ or b._r_action_. This is because  \nsometimes it makes sense to put the method on the actor (e.g. Galois  \ngroups acting on field elements) and sometimes on the acted on (e.g.  \nmatrices acting on quadratic forms). However, the _x_action_ is hard  \nto remember and doesn't always correspond to right/left actions. This  \nmay be why they're hardly used up to this point.\n\nThe proposal is to make the methods a._act_on_(b, self_on_left) and  \nb._acted_upon_(a, self_on_left). In other words, a*b would try  \n\"a._act_on_(b, True)\" and \"b._acted_upon_(a, False)\". \n```\n\nSee discussion at \n\nhttp://groups.google.com/group/sage-devel/browse_thread/thread/4c6ce1731ace1016\n\nAssignee: @robertwb\n\nCC:  @nthiery georgsweber @craigcitro\n\nKeywords: actions, left actions, right actions\n\nResolution: fixed\n\nAuthor: Robert Bradshaw\n\nReviewer: Nicolas M. Thi\u00e9ry\n\nMerged: sage-4.2.alpha1\n\nIssue created by migration from https://trac.sagemath.org/ticket/5597\n\n",
    "closed_at": "2009-10-21T06:18:48Z",
    "created_at": "2009-03-24T05:09:01Z",
    "labels": [
        "component: coercion"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.2",
    "title": "Rename coercion action methods",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/5597",
    "user": "https://github.com/robertwb"
}
```

```
Currently, if A has an action on B (where B is not an A-module) one  
implements either a._l_action_ or b._r_action_. This is because  
sometimes it makes sense to put the method on the actor (e.g. Galois  
groups acting on field elements) and sometimes on the acted on (e.g.  
matrices acting on quadratic forms). However, the _x_action_ is hard  
to remember and doesn't always correspond to right/left actions. This  
may be why they're hardly used up to this point.

The proposal is to make the methods a._act_on_(b, self_on_left) and  
b._acted_upon_(a, self_on_left). In other words, a*b would try  
"a._act_on_(b, True)" and "b._acted_upon_(a, False)". 
```

See discussion at 

http://groups.google.com/group/sage-devel/browse_thread/thread/4c6ce1731ace1016

Assignee: @robertwb

CC:  @nthiery georgsweber @craigcitro

Keywords: actions, left actions, right actions

Resolution: fixed

Author: Robert Bradshaw

Reviewer: Nicolas M. Thiéry

Merged: sage-4.2.alpha1

Issue created by migration from https://trac.sagemath.org/ticket/5597





---

archive/issue_comments_052314.json:
```json
{
    "body": "Attachment [5597-coerce-actions.patch](tarball://root/attachments/some-uuid/ticket5597/5597-coerce-actions.patch) by @robertwb created at 2009-03-24 05:17:58",
    "created_at": "2009-03-24T05:17:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5597#issuecomment-52314",
    "user": "https://github.com/robertwb"
}
```

Attachment [5597-coerce-actions.patch](tarball://root/attachments/some-uuid/ticket5597/5597-coerce-actions.patch) by @robertwb created at 2009-03-24 05:17:58



---

archive/issue_comments_052315.json:
```json
{
    "body": "<a id='comment:1'></a>\nRename and cleanup actions. Depends on #5596.",
    "created_at": "2009-03-24T05:18:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5597#issuecomment-52315",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:1'></a>
Rename and cleanup actions. Depends on #5596.



---

archive/issue_comments_052316.json:
```json
{
    "body": "<a id='comment:2'></a>\nMinor issue: in element.pyx, both new actions are commented with \"Use this method to implement self acting on x.\" --- probably a copy'n'paste error for \"_acted_upon_\"?!\n\nCheers,\ngsw",
    "created_at": "2009-03-24T21:00:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5597#issuecomment-52316",
    "user": "https://trac.sagemath.org/admin/accounts/users/GeorgSWeber"
}
```

<a id='comment:2'></a>
Minor issue: in element.pyx, both new actions are commented with "Use this method to implement self acting on x." --- probably a copy'n'paste error for "_acted_upon_"?!

Cheers,
gsw



---

archive/issue_comments_052317.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2009-04-12T05:02:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5597#issuecomment-52317",
    "user": "https://github.com/williamstein"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_052318.json:
```json
{
    "body": "<a id='comment:3'></a>\nREFEREE REPORT:\n\nThis patch contains substantial new code that has no doctests.  Please post another patch with full coverage.",
    "created_at": "2009-04-12T05:02:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5597#issuecomment-52318",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:3'></a>
REFEREE REPORT:

This patch contains substantial new code that has no doctests.  Please post another patch with full coverage.



---

archive/issue_comments_052319.json:
```json
{
    "body": "rebased against 4.1.1",
    "created_at": "2009-09-25T08:36:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5597#issuecomment-52319",
    "user": "https://github.com/robertwb"
}
```

rebased against 4.1.1



---

archive/issue_comments_052320.json:
```json
{
    "body": "Attachment [5597-coerce-actions-new.patch](tarball://root/attachments/some-uuid/ticket5597/5597-coerce-actions-new.patch) by @robertwb created at 2009-09-25 08:40:50",
    "created_at": "2009-09-25T08:40:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5597#issuecomment-52320",
    "user": "https://github.com/robertwb"
}
```

Attachment [5597-coerce-actions-new.patch](tarball://root/attachments/some-uuid/ticket5597/5597-coerce-actions-new.patch) by @robertwb created at 2009-09-25 08:40:50



---

archive/issue_comments_052321.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2009-09-25T08:41:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5597#issuecomment-52321",
    "user": "https://github.com/robertwb"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_052322.json:
```json
{
    "body": "<a id='comment:5'></a>\nAttachment [5597-coerce-actions-examples.patch](tarball://root/attachments/some-uuid/ticket5597/5597-coerce-actions-examples.patch) by @robertwb created at 2009-09-25 08:41:36",
    "created_at": "2009-09-25T08:41:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5597#issuecomment-52322",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:5'></a>
Attachment [5597-coerce-actions-examples.patch](tarball://root/attachments/some-uuid/ticket5597/5597-coerce-actions-examples.patch) by @robertwb created at 2009-09-25 08:41:36



---

archive/issue_comments_052323.json:
```json
{
    "body": "Attachment [5597-referee-comments.patch](tarball://root/attachments/some-uuid/ticket5597/5597-referee-comments.patch) by @robertwb created at 2009-09-29 18:27:10",
    "created_at": "2009-09-29T18:27:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5597#issuecomment-52323",
    "user": "https://github.com/robertwb"
}
```

Attachment [5597-referee-comments.patch](tarball://root/attachments/some-uuid/ticket5597/5597-referee-comments.patch) by @robertwb created at 2009-09-29 18:27:10



---

archive/issue_comments_052324.json:
```json
{
    "body": "<a id='comment:6'></a>\nHi Robert,\n\nSorry for hopping so late in the discussion. I am not sure how I understand how left vs right actions are handled.\n\nIn a*b, are you always making the assumption that a is acting on b?\n\nIf I have an algebra B (whose code I don't want to touch), and implement a right B-module A,\nam I supposed to implement:\n\n   a.act_on(b)?\n\nOr will a*b try all of:\n\n   b.act_on(a, False)\n   b.acted_upon(a, False)\n   a.act_on(b, True)\n   a.acted_upon(b, True)",
    "created_at": "2009-10-12T10:51:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5597#issuecomment-52324",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:6'></a>
Hi Robert,

Sorry for hopping so late in the discussion. I am not sure how I understand how left vs right actions are handled.

In a*b, are you always making the assumption that a is acting on b?

If I have an algebra B (whose code I don't want to touch), and implement a right B-module A,
am I supposed to implement:

   a.act_on(b)?

Or will a*b try all of:

   b.act_on(a, False)
   b.acted_upon(a, False)
   a.act_on(b, True)
   a.acted_upon(b, True)



---

archive/issue_comments_052325.json:
```json
{
    "body": "<a id='comment:7'></a>\nYes, it should be trying all 4 of these options.",
    "created_at": "2009-10-13T00:29:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5597#issuecomment-52325",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:7'></a>
Yes, it should be trying all 4 of these options.



---

archive/issue_comments_052326.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [robertwb](#comment%3A7):\n> Yes, it should be trying all 4 of these options. \n\n\nOk. Then I would prefer:\n\na.act_on_left(b)\nb.act_on_right(a)\na.acted_upon_right(b)\nb.acted_upon_left(a)\n\nwhich makes it easier to implement independently the left and right actions on a module, and possibly override just one or the other in a subclass.\n\nThat being said, we can leave things as is. Those modules for which left and right action do not coincide can later implement a.acted_upon(...) by delegating the work to\nacted_upon_left and acted_upon_right.",
    "created_at": "2009-10-14T10:35:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5597#issuecomment-52326",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:8'></a>
Replying to [robertwb](#comment%3A7):
> Yes, it should be trying all 4 of these options. 


Ok. Then I would prefer:

a.act_on_left(b)
b.act_on_right(a)
a.acted_upon_right(b)
b.acted_upon_left(a)

which makes it easier to implement independently the left and right actions on a module, and possibly override just one or the other in a subclass.

That being said, we can leave things as is. Those modules for which left and right action do not coincide can later implement a.acted_upon(...) by delegating the work to
acted_upon_left and acted_upon_right.



---

archive/issue_comments_052327.json:
```json
{
    "body": "<a id='comment:9'></a>\nBut then we're back to the same problem of `s.acted_upon_right(p)` not being obvious whether s or p was the one on the right (though it's a bit better). In any case, this behavior is easy to implement in a superclass. \n\nSo, is this a positive review (pending all doctests passing, which they did last I checked)?",
    "created_at": "2009-10-15T05:44:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5597#issuecomment-52327",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:9'></a>
But then we're back to the same problem of `s.acted_upon_right(p)` not being obvious whether s or p was the one on the right (though it's a bit better). In any case, this behavior is easy to implement in a superclass. 

So, is this a positive review (pending all doctests passing, which they did last I checked)?



---

archive/issue_comments_052328.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Nicolas M. Thi\u00e9ry\"",
    "created_at": "2009-10-15T12:15:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5597#issuecomment-52328",
    "user": "https://github.com/nthiery"
}
```

Changing reviewer from "" to "Nicolas M. Thiéry"



---

archive/issue_comments_052329.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2009-10-15T12:15:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5597#issuecomment-52329",
    "user": "https://github.com/nthiery"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_052330.json:
```json
{
    "body": "Changing author from \"\" to \"Robert Bradshaw\"",
    "created_at": "2009-10-15T12:15:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5597#issuecomment-52330",
    "user": "https://github.com/nthiery"
}
```

Changing author from "" to "Robert Bradshaw"



---

archive/issue_comments_052331.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [robertwb](#comment%3A9):\n> But then we're back to the same problem of `s.acted_upon_right(p)` not being obvious whether s or p was the one on the right (though it's a bit better). \n\n\nIt sounds rather clear to me.\n\n> In any case, this behavior is easy to implement in a superclass. \n\n\nYes.\n\n> So, is this a positive review (pending all doctests passing, which they did last I checked)?\n\n\nYes, I just wanted to discuss the matter first. Also, part of this may become obsolete once I will have a prototype implementation of overloaded operators/functions as in MuPAD, with a declarative interface (the Sage-combinat people need them anyway for other purposes). I'll post here a link to the appropriate ticket when times come.",
    "created_at": "2009-10-15T12:15:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5597#issuecomment-52331",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:10'></a>
Replying to [robertwb](#comment%3A9):
> But then we're back to the same problem of `s.acted_upon_right(p)` not being obvious whether s or p was the one on the right (though it's a bit better). 


It sounds rather clear to me.

> In any case, this behavior is easy to implement in a superclass. 


Yes.

> So, is this a positive review (pending all doctests passing, which they did last I checked)?


Yes, I just wanted to discuss the matter first. Also, part of this may become obsolete once I will have a prototype implementation of overloaded operators/functions as in MuPAD, with a declarative interface (the Sage-combinat people need them anyway for other purposes). I'll post here a link to the appropriate ticket when times come.



---

archive/issue_comments_052332.json:
```json
{
    "body": "Changing keywords from \"\" to \"actions, left actions, right actions\".",
    "created_at": "2009-10-15T12:15:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5597#issuecomment-52332",
    "user": "https://github.com/nthiery"
}
```

Changing keywords from "" to "actions, left actions, right actions".



---

archive/issue_events_017036.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/5597",
    "rename": {
        "from": "rename coercion action methods",
        "to": "Rename coercion action methods"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5597#event-17036"
}
```



---

archive/issue_comments_052333.json:
```json
{
    "body": "Attachment [trac_5597-infinite_polynomial_ring.patch](tarball://root/attachments/some-uuid/ticket5597/trac_5597-infinite_polynomial_ring.patch) by @mwhansen created at 2009-10-21 06:03:57",
    "created_at": "2009-10-21T06:03:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5597#issuecomment-52333",
    "user": "https://github.com/mwhansen"
}
```

Attachment [trac_5597-infinite_polynomial_ring.patch](tarball://root/attachments/some-uuid/ticket5597/trac_5597-infinite_polynomial_ring.patch) by @mwhansen created at 2009-10-21 06:03:57



---

archive/issue_comments_052334.json:
```json
{
    "body": "<a id='comment:12'></a>\nI've attached trac_5597.patch which is all the the relevant patches folded together and then rebased.\n\nI also attached trac_5597-infinite_polynomial_ring.patch which fixes some failures since an_element was returning a \"generator\" and not an actual element.",
    "created_at": "2009-10-21T06:08:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5597#issuecomment-52334",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:12'></a>
I've attached trac_5597.patch which is all the the relevant patches folded together and then rebased.

I also attached trac_5597-infinite_polynomial_ring.patch which fixes some failures since an_element was returning a "generator" and not an actual element.



---

archive/issue_comments_052335.json:
```json
{
    "body": "<a id='comment:13'></a>\nI applied just [attachment:trac_5597-infinite_polynomial_ring.patch] to 4.2.alpha0 and doctested `sage/rings/polynomial/infinite_polynomial_ring.py`.  Positive review for this patch.",
    "created_at": "2009-10-21T06:16:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5597#issuecomment-52335",
    "user": "https://github.com/qed777"
}
```

<a id='comment:13'></a>
I applied just [attachment:trac_5597-infinite_polynomial_ring.patch] to 4.2.alpha0 and doctested `sage/rings/polynomial/infinite_polynomial_ring.py`.  Positive review for this patch.



---

archive/issue_events_017037.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-10-21T06:18:48Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/5597",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5597#event-17037"
}
```



---

archive/issue_comments_052336.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2009-10-21T06:18:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5597#issuecomment-52336",
    "user": "https://github.com/mwhansen"
}
```

Resolution: fixed



---

archive/issue_comments_052337.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-4.2.alpha1\"",
    "created_at": "2009-10-21T06:18:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5597#issuecomment-52337",
    "user": "https://github.com/mwhansen"
}
```

Changing merged from "" to "sage-4.2.alpha1"



---

archive/issue_comments_052338.json:
```json
{
    "body": "<a id='comment:14'></a>\nMerged trac_5597.patch and trac_5597-infinite_polynomial_ring.patch in sage-4.2.alpha1.",
    "created_at": "2009-10-21T06:18:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5597#issuecomment-52338",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:14'></a>
Merged trac_5597.patch and trac_5597-infinite_polynomial_ring.patch in sage-4.2.alpha1.



---

archive/issue_comments_052339.json:
```json
{
    "body": "<a id='comment:15'></a>\nThanks! It's so good to finally see all these coercion and category patches go in.",
    "created_at": "2009-10-21T06:50:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5597#issuecomment-52339",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:15'></a>
Thanks! It's so good to finally see all these coercion and category patches go in.



---

archive/issue_comments_052340.json:
```json
{
    "body": "<a id='comment:16'></a>\nMe too! Thanks for doing them!",
    "created_at": "2009-10-21T06:54:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5597#issuecomment-52340",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:16'></a>
Me too! Thanks for doing them!
