# Issue 5610: LaTeX customization

archive/issues_005610.json:
```json
{
    "assignees": [
        "https://github.com/jhpalmieri"
    ],
    "body": "This patch attempts to implement LaTeX customizations for the following things:\n\n1. matrix and vector delimiters (see #5474 -- this patch moves that code around)\n\n2. the use of plain bold vs. blackboard bold for ZZ, RR, etc.\n\nIt almost succeeds, except that I don't know how to get jsMath to display blackboard bold fonts, so it doesn't work completely in the notebook.  (This is why the ticket is labeled as not being ready for review.)\n\nHere's what it does: from the command line,\n\n```\nsage: latex_customize.use_blackboard_bold(True)\nsage: view(ZZ)\n```\n\nwill pop up a PDF or DVI file with a blackboard bold ZZ.  Similarly, in the notebook,\n\n```\nlatex_customize.use_blackboard_bold(True)\n```\nfollowed by a cell containing\n\n```\n%latex\n$\\ZZ$\n```\nwill show a blackboard bold Z.\n\nFrom either the command line or the notebook,\n\n```\nlatex_customize.set_vector_delimiters(\"\\\\langle\", \"\\\\rangle\")\nlatex_customize.set_matrix_delimiters(\"\\\\{\", \"]\")\n```\nwill change the left and right vector and matrix delimiters as indicated.\n\nThere are also tons of changes in the second patch of the sort \"\\mathbf{Q}\" --> \"\\QQ\".  The idea here is, first, to make the docstrings more readable, and second, to make it easy to change between \\mathbf and \\mathbb.  Note that \"\\QQ\" is defined (via #5555) as the output of the `_latex_` method for QQ which this patch redefines to be \"\\Bold{QQ}\", and setting `use_blackboard_bold` controls the definition of the command \"\\Bold\". \n\nNow, if you want to typeset the reference manual, say, with blackboard bold instead of the default bold, the PDF version is relatively easy: just create the latex version (`sage -docbuild reference latex`) and edit the preamble: change the definition of \\Bold, and run latex.  For the html version, you probably have to edit the definition of \\Bold in sage/misc/latex_macros.py, or add \\renewcommand{\\Bold}... in the right place in sage/doc/conf.py; then run `sage -b`, then build the docs. As you can see, I don't have very good ideas about how to change the reference manuals -- should there be a command-line switch to `sage -docbuild`? -- so please chime in if you think of something.\n\nSee [this thread](http://groups.google.com/group/sage-devel/browse_frm/thread/68cdf05b40303286) on sage-devel for some more discussion, especially about mathbf vs. mathbb.\n\nThis ticket depends on #5359, #5433, and #5568 (all of which will be part of Sage 3.4.1.alpha0), and also on #5555.\n\nEdit: this now depends on #5611 also.\n\n\nComponent: **documentation**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/5610_\n\n",
    "closed_at": "2009-04-24T09:17:18Z",
    "created_at": "2009-03-25T17:56:57Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20documentation",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-3.4.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "LaTeX customization",
    "type": "issue",
    "updated_at": "2009-04-24T09:17:18Z",
    "url": "https://github.com/sagemath/sage/issues/5610",
    "user": "https://github.com/jhpalmieri"
}
```
This patch attempts to implement LaTeX customizations for the following things:

1. matrix and vector delimiters (see #5474 -- this patch moves that code around)

2. the use of plain bold vs. blackboard bold for ZZ, RR, etc.

It almost succeeds, except that I don't know how to get jsMath to display blackboard bold fonts, so it doesn't work completely in the notebook.  (This is why the ticket is labeled as not being ready for review.)

Here's what it does: from the command line,

```
sage: latex_customize.use_blackboard_bold(True)
sage: view(ZZ)
```

will pop up a PDF or DVI file with a blackboard bold ZZ.  Similarly, in the notebook,

```
latex_customize.use_blackboard_bold(True)
```
followed by a cell containing

```
%latex
$\ZZ$
```
will show a blackboard bold Z.

From either the command line or the notebook,

```
latex_customize.set_vector_delimiters("\\langle", "\\rangle")
latex_customize.set_matrix_delimiters("\\{", "]")
```
will change the left and right vector and matrix delimiters as indicated.

There are also tons of changes in the second patch of the sort "\mathbf{Q}" --> "\QQ".  The idea here is, first, to make the docstrings more readable, and second, to make it easy to change between \mathbf and \mathbb.  Note that "\QQ" is defined (via #5555) as the output of the `_latex_` method for QQ which this patch redefines to be "\Bold{QQ}", and setting `use_blackboard_bold` controls the definition of the command "\Bold". 

Now, if you want to typeset the reference manual, say, with blackboard bold instead of the default bold, the PDF version is relatively easy: just create the latex version (`sage -docbuild reference latex`) and edit the preamble: change the definition of \Bold, and run latex.  For the html version, you probably have to edit the definition of \Bold in sage/misc/latex_macros.py, or add \renewcommand{\Bold}... in the right place in sage/doc/conf.py; then run `sage -b`, then build the docs. As you can see, I don't have very good ideas about how to change the reference manuals -- should there be a command-line switch to `sage -docbuild`? -- so please chime in if you think of something.

See [this thread](http://groups.google.com/group/sage-devel/browse_frm/thread/68cdf05b40303286) on sage-devel for some more discussion, especially about mathbf vs. mathbb.

This ticket depends on #5359, #5433, and #5568 (all of which will be part of Sage 3.4.1.alpha0), and also on #5555.

Edit: this now depends on #5611 also.


Component: **documentation**

_Issue created by migration from https://trac.sagemath.org/ticket/5610_





---

archive/issue_events_066489.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2009-03-25T17:56:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "milestone_number": null,
    "milestone_title": "sage-4.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5610#event-66489"
}
```



---

archive/issue_events_066490.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2009-03-25T17:56:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20documentation",
    "label_color": "0075ca",
    "label_name": "c: documentation",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5610#event-66490"
}
```



---

archive/issue_events_066491.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2009-03-25T17:56:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5610#event-66491"
}
```



---

archive/issue_events_066492.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2009-03-25T17:56:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5610#event-66492"
}
```



---

archive/issue_events_066493.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2009-03-25T17:56:57Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "subject": "https://github.com/jhpalmieri",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5610#event-66493"
}
```



---

archive/issue_comments_035426.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI think it looks good, but why \"latex_customize\" rather than just attaching methods to \"latex\"?",
    "created_at": "2009-03-25T18:59:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5610#issuecomment-35426",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:1" align="right">comment:1</div>

I think it looks good, but why "latex_customize" rather than just attaching methods to "latex"?



---

archive/issue_comments_035427.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nReplying to [@robertwb](#comment:1):\n> I think it looks good, but why \"latex_customize\" rather than just attaching methods to \"latex\"? \n\nWell, when I tried to attach some methods to Latex, I got all sorts of weird doctesting errors for latex.py (all of the output for latex_variable_name acted as if EMBEDDED_MODE were True, for example).  I have no idea why, but I fixed it by setting it up like this.",
    "created_at": "2009-03-25T19:14:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5610#issuecomment-35427",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:2" align="right">comment:2</div>

Replying to [@robertwb](#comment:1):
> I think it looks good, but why "latex_customize" rather than just attaching methods to "latex"? 

Well, when I tried to attach some methods to Latex, I got all sorts of weird doctesting errors for latex.py (all of the output for latex_variable_name acted as if EMBEDDED_MODE were True, for example).  I have no idea why, but I fixed it by setting it up like this.



---

archive/issue_comments_035428.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nStrange.",
    "created_at": "2009-03-25T19:41:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5610#issuecomment-35428",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:3" align="right">comment:3</div>

Strange.



---

archive/issue_events_066494.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2009-03-25T21:58:46Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "title_is": "LaTeX customization",
    "title_was": "[not ready for review?] LaTeX customization",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5610#event-66494"
}
```



---

archive/issue_events_066495.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2009-03-25T21:58:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5610#event-66495"
}
```



---

archive/issue_comments_035429.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -42,3 +42,5 @@\n \n This ticket depends on #5359, #5433, and #5568 (all of which will be part of Sage 3.4.1.alpha0), and also on #5555.\n \n+Edit: this now depends on #5611 also.\n+\n``````\n",
    "created_at": "2009-03-25T21:58:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5610#issuecomment-35429",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -42,3 +42,5 @@
 
 This ticket depends on #5359, #5433, and #5568 (all of which will be part of Sage 3.4.1.alpha0), and also on #5555.
 
+Edit: this now depends on #5611 also.
+
``````




---

archive/issue_comments_035430.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI think I have the jsMath thing figured out: we need to install the blackboard bold font in the jsMath directory, so install the spkg at #5611 first.  Then in the notebook try things like:\n\n```\nlatex_customize.use_blackboard_bold(False) # the default setting\nview(ZZ)\n```\nversus\n\n```\nlatex_customize.use_blackboard_bold(True)\nview(ZZ)\n```",
    "created_at": "2009-03-25T21:58:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5610#issuecomment-35430",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:4" align="right">comment:4</div>

I think I have the jsMath thing figured out: we need to install the blackboard bold font in the jsMath directory, so install the spkg at #5611 first.  Then in the notebook try things like:

```
latex_customize.use_blackboard_bold(False) # the default setting
view(ZZ)
```
versus

```
latex_customize.use_blackboard_bold(True)
view(ZZ)
```



---

archive/issue_comments_035431.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\n[Here's a picture.](http://sage.math.washington.edu/home/palmieri/misc/bbold.png)  The last part -- the docstring -- relies on #5653.",
    "created_at": "2009-03-31T22:16:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5610#issuecomment-35431",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:5" align="right">comment:5</div>

[Here's a picture.](http://sage.math.washington.edu/home/palmieri/misc/bbold.png)  The last part -- the docstring -- relies on #5653.



---

archive/issue_comments_035432.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@jhpalmieri](#comment:2):\n> Replying to [@robertwb](#comment:1):\n> > I think it looks good, but why \"latex_customize\" rather than just attaching methods to \"latex\"? \n\n> \n> Well, when I tried to attach some methods to Latex, I got all sorts of weird doctesting errors for latex.py (all of the output for latex_variable_name acted as if EMBEDDED_MODE were True, for example).  I have no idea why, but I fixed it by setting it up like this.\n\nJust to follow up, I think this is the same issue as discussed [in this thread on sage-devel](http://groups.google.com/group/sage-devel/browse_frm/thread/320845a4c9b9c75f).  I would be happy to attach  methods to `latex` if we can get this straightened out.",
    "created_at": "2009-04-12T22:54:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5610#issuecomment-35432",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@jhpalmieri](#comment:2):
> Replying to [@robertwb](#comment:1):
> > I think it looks good, but why "latex_customize" rather than just attaching methods to "latex"? 

> 
> Well, when I tried to attach some methods to Latex, I got all sorts of weird doctesting errors for latex.py (all of the output for latex_variable_name acted as if EMBEDDED_MODE were True, for example).  I have no idea why, but I fixed it by setting it up like this.

Just to follow up, I think this is the same issue as discussed [in this thread on sage-devel](http://groups.google.com/group/sage-devel/browse_frm/thread/320845a4c9b9c75f).  I would be happy to attach  methods to `latex` if we can get this straightened out.



---

archive/issue_comments_035433.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nHere are new versions of the patches.  There are two changes: they are rebased against 3.4.1.rc2, and I managed to fix the weird problem with doctests in latex.  Therefore we now have commands like `latex.set_matrix_delimiters` instead of `latex_customize.set_matrix_delimiters`.",
    "created_at": "2009-04-14T18:49:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5610#issuecomment-35433",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:7" align="right">comment:7</div>

Here are new versions of the patches.  There are two changes: they are rebased against 3.4.1.rc2, and I managed to fix the weird problem with doctests in latex.  Therefore we now have commands like `latex.set_matrix_delimiters` instead of `latex_customize.set_matrix_delimiters`.



---

archive/issue_comments_035434.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nBy the way, in addition the changes noted above, when I was changing all of instances of `\\mathbb{Z`} to `\\ZZ`, etc., I discovered that the docstrings in the file `sage/rings/padics/tutorial.py` were garbled, or were using no-longer-defined macros: they had things like \n\n```\n\\mathbb{Z}p = \\lim_{\\leftarrow n} \\mathbb{Z}pn\n```\nin it.  I believe that this is supposed to be (in the new notation)\n\n```\n\\ZZ_p = \\lim_{\\leftarrow n} \\ZZ/p^{n} \\ZZ\n```\nand I fixed as many of these issues as I saw.",
    "created_at": "2009-04-14T20:17:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5610#issuecomment-35434",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:8" align="right">comment:8</div>

By the way, in addition the changes noted above, when I was changing all of instances of `\mathbb{Z`} to `\ZZ`, etc., I discovered that the docstrings in the file `sage/rings/padics/tutorial.py` were garbled, or were using no-longer-defined macros: they had things like 

```
\mathbb{Z}p = \lim_{\leftarrow n} \mathbb{Z}pn
```
in it.  I believe that this is supposed to be (in the new notation)

```
\ZZ_p = \lim_{\leftarrow n} \ZZ/p^{n} \ZZ
```
and I fixed as many of these issues as I saw.



---

archive/issue_comments_035435.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThis is really cool. I might recommend making the names a bit shorter, e.g. \n\n```\nlatex.blackboard_bold(...)\n```\n\nThis is just to be more similar to the way proof works for setting global settings. Also, \n\n```\nlatex.matrix_delimiters(...)\n```\n\nwhich would return them if no arguments are given.",
    "created_at": "2009-04-15T23:14:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5610#issuecomment-35435",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:9" align="right">comment:9</div>

This is really cool. I might recommend making the names a bit shorter, e.g. 

```
latex.blackboard_bold(...)
```

This is just to be more similar to the way proof works for setting global settings. Also, 

```
latex.matrix_delimiters(...)
```

which would return them if no arguments are given.



---

archive/issue_comments_035436.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@robertwb](#comment:9):\n> This is really cool. I might recommend making the names a bit shorter, e.g. \n\nThat's a good idea.  Here's a new version of the patch doing that.",
    "created_at": "2009-04-16T01:48:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5610#issuecomment-35436",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@robertwb](#comment:9):
> This is really cool. I might recommend making the names a bit shorter, e.g. 

That's a good idea.  Here's a new version of the patch doing that.



---

archive/issue_events_066496.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2009-04-20T03:37:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5610#event-66496"
}
```



---

archive/issue_events_066497.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2009-04-20T03:37:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5610#event-66497"
}
```



---

archive/issue_comments_035437.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nSecond patch (\"-part2\") is mostly minor changes in docstrings, but fails on four files.  I'd suspect this is due to some of the recent work on improving doctests.  So comments below pertain to just applying the first patch and testing from there.\n\nThe new methods for setting matrix and vector delimiters are a very welcome addition, and the options for \"bolding\" rings provide a good example for future options like this.  One should note that work still needs to be done to make this work for all rings, this patch appears to only demonstrate use for ZZ and GF (though I could have missed some).\n\nThe use of an instance of the Latex class, named \"latex\" had me confused for a while, since now `latex.__call__` replaces the functionality of the old `latex()`.  Some commentary highlighting the `latex` instance in the source (at some point - either now, or later) might save others the same confusion.\n\n`sage -docbuild pdf reference` seemed to choke on the doctest for the `list_function` method in `misc/latex.py`.  I'm going to attach the generated TeX below, we'll see how it fares.  I also have a screen shot of the output.  Its pretty jumbled up, and in particular the `\\begin{array`} has a \"b\" that is some non-ASCII character, so I wonder if there is a missing backslash and the  b  is being escaped?\n\nI'm ready to give this a positive review with a rebased part2 patch and if the latex problem on the reference manual goes away.  Maybe the best thing to do is just excise the problematic doctest for now and bring it back in another patch.\n\n```\nEXAMPLES:\n\n\\begin{Verbatim}[commandchars=@\\[\\]]\n@PYGaO[sage: ]@PYGbd[from] @PYGaV[sage.misc.latex] @PYGbd[import] list@_function\n@PYGaO[sage: ]list@_function(@lb[]@PYGaw[1],@PYGaw[2],@PYGaw[3]@rb[])\n@PYGaa['\\left@lb[]1, ]\n\\end{Verbatim}\n\\end{quote}\n\n2, \n3right{]}'\n\\begin{quote}\n\nsage: latex({[}1,2,3{]})  \\# indirect doctest\nleft{[}1,\n2,\n3\n\\end{quote}\n\\end{quote}\n\\begin{description}\n\\item[ight{]}]\nsage: latex({[}Matrix(ZZ,3,range(9)), Matrix(ZZ,3,range(9)){]}) \\# indirect doctest\nleft{[}left(\ufffdegin\\{array\\}\\{rrr\\}\n0 \\& 1 \\& 2 3 \\& 4 \\& 5 6 \\& 7 \\& 8\nend\\{array\\}\n\n\\item[ight),]\n\\textbackslash{}left(\ufffdegin\\{array\\}\\{rrr\\}\n0 \\& 1 \\& 2 3 \\& 4 \\& 5 6 \\& 7 \\& 8\nend\\{array\\}\n\n\\end{description}\n\night)\night{]}\n\\end{funcdesc}\n```",
    "created_at": "2009-04-20T03:37:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5610#issuecomment-35437",
    "user": "https://github.com/rbeezer"
}
```

<div id="comment:11" align="right">comment:11</div>

Second patch ("-part2") is mostly minor changes in docstrings, but fails on four files.  I'd suspect this is due to some of the recent work on improving doctests.  So comments below pertain to just applying the first patch and testing from there.

The new methods for setting matrix and vector delimiters are a very welcome addition, and the options for "bolding" rings provide a good example for future options like this.  One should note that work still needs to be done to make this work for all rings, this patch appears to only demonstrate use for ZZ and GF (though I could have missed some).

The use of an instance of the Latex class, named "latex" had me confused for a while, since now `latex.__call__` replaces the functionality of the old `latex()`.  Some commentary highlighting the `latex` instance in the source (at some point - either now, or later) might save others the same confusion.

`sage -docbuild pdf reference` seemed to choke on the doctest for the `list_function` method in `misc/latex.py`.  I'm going to attach the generated TeX below, we'll see how it fares.  I also have a screen shot of the output.  Its pretty jumbled up, and in particular the `\begin{array`} has a "b" that is some non-ASCII character, so I wonder if there is a missing backslash and the  b  is being escaped?

I'm ready to give this a positive review with a rebased part2 patch and if the latex problem on the reference manual goes away.  Maybe the best thing to do is just excise the problematic doctest for now and bring it back in another patch.

```
EXAMPLES:

\begin{Verbatim}[commandchars=@\[\]]
@PYGaO[sage: ]@PYGbd[from] @PYGaV[sage.misc.latex] @PYGbd[import] list@_function
@PYGaO[sage: ]list@_function(@lb[]@PYGaw[1],@PYGaw[2],@PYGaw[3]@rb[])
@PYGaa['\left@lb[]1, ]
\end{Verbatim}
\end{quote}

2, 
3right{]}'
\begin{quote}

sage: latex({[}1,2,3{]})  \# indirect doctest
left{[}1,
2,
3
\end{quote}
\end{quote}
\begin{description}
\item[ight{]}]
sage: latex({[}Matrix(ZZ,3,range(9)), Matrix(ZZ,3,range(9)){]}) \# indirect doctest
left{[}left(�egin\{array\}\{rrr\}
0 \& 1 \& 2 3 \& 4 \& 5 6 \& 7 \& 8
end\{array\}

\item[ight),]
\textbackslash{}left(�egin\{array\}\{rrr\}
0 \& 1 \& 2 3 \& 4 \& 5 6 \& 7 \& 8
end\{array\}

\end{description}

ight)
ight{]}
\end{funcdesc}
```



---

archive/issue_comments_035438.json:
```json
{
    "body": "Screenshot of garbled list_function() documentation (yellow highlight on \"indirect\" is from my search function)",
    "created_at": "2009-04-20T03:45:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5610#issuecomment-35438",
    "user": "https://github.com/rbeezer"
}
```

Screenshot of garbled list_function() documentation (yellow highlight on "indirect" is from my search function)



---

archive/issue_comments_035439.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nAttachment: **[list-function-pdf.png](https://github.com/sagemath/sage/files/ticket5610/list-function-pdf.png)**\n\nReplying to [@rbeezer](#comment:11):\n>The new methods for setting matrix and vector delimiters are a very welcome addition, and the options for \"bolding\" rings provide a good example for future options like this. One should note that work still needs to be done to make this work for all rings, this patch appears to only demonstrate use for ZZ and GF (though I could have missed some). \n\nThe second patch also changes QQ, RR, and CC.  It leaves `\\mathbb{P`} and `\\mathbb{A`} unchanged.  (The first patch includes only the core of the customization code, and the relevant files happened not to use QQ, RR, or CC.)\n\n> The use of an instance of the Latex class, named \"latex\" had me confused for a while, since now `latex.__call__` replaces the functionality of the old `latex()`.  Some commentary highlighting the `latex` instance in the source (at some point - either now, or later) might save others the same confusion.\n\nDoes this affect end-users, or just developers?  I mean, does `latex(blah)` behave the same as it used to?  I hope so -- that was my intention.  You're right, though, that the syntax from the development end is different, but that seemed like the nicest way to do the customization: as methods (which could be tab-completed) attached to latex.  Do you have suggestions about what sorts of comments to add?\n\n> `sage -docbuild pdf reference` seemed to choke on the doctest for the `list_function` method in `misc/latex.py`.  \n\nI think this is easy to fix: put an \"r\" in front of the triple quotes at the beginning of the docstring.  It was there originally, and then I deleted it (I don't know why) in the new version.\n\nI'll produce a new patch soon with the \"r\", and with part 2 rebased against 3.4.1.rc4.",
    "created_at": "2009-04-20T21:18:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5610#issuecomment-35439",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:12" align="right">comment:12</div>

Attachment: **[list-function-pdf.png](https://github.com/sagemath/sage/files/ticket5610/list-function-pdf.png)**

Replying to [@rbeezer](#comment:11):
>The new methods for setting matrix and vector delimiters are a very welcome addition, and the options for "bolding" rings provide a good example for future options like this. One should note that work still needs to be done to make this work for all rings, this patch appears to only demonstrate use for ZZ and GF (though I could have missed some). 

The second patch also changes QQ, RR, and CC.  It leaves `\mathbb{P`} and `\mathbb{A`} unchanged.  (The first patch includes only the core of the customization code, and the relevant files happened not to use QQ, RR, or CC.)

> The use of an instance of the Latex class, named "latex" had me confused for a while, since now `latex.__call__` replaces the functionality of the old `latex()`.  Some commentary highlighting the `latex` instance in the source (at some point - either now, or later) might save others the same confusion.

Does this affect end-users, or just developers?  I mean, does `latex(blah)` behave the same as it used to?  I hope so -- that was my intention.  You're right, though, that the syntax from the development end is different, but that seemed like the nicest way to do the customization: as methods (which could be tab-completed) attached to latex.  Do you have suggestions about what sorts of comments to add?

> `sage -docbuild pdf reference` seemed to choke on the doctest for the `list_function` method in `misc/latex.py`.  

I think this is easy to fix: put an "r" in front of the triple quotes at the beginning of the docstring.  It was there originally, and then I deleted it (I don't know why) in the new version.

I'll produce a new patch soon with the "r", and with part 2 rebased against 3.4.1.rc4.



---

archive/issue_comments_035440.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@jhpalmieri](#comment:12):\n> The second patch also changes QQ, RR, and CC.  It leaves `\\mathbb{P`} and `\\mathbb{A`} unchanged.  (The first patch includes only the core of the customization code, and the relevant files happened not to use QQ, RR, or CC.)\n\nOK, that explains the split.  ;-) \n\n> Does this affect end-users, or just developers?  I mean, does `latex(blah)` behave the same as it used to?  I hope so -- that was my intention.  \n\nI didn't notice any change from a user's perspective.  And maybe it was just the change that threw me.  I saw `def latex()` going away and it took me a while to figure out how the functionality came back.  I just thought for others reading the code it might help to make the definition of the `latex` instance more prominient with some source code comments.  Right now, it just seems to be slipped in there, when it is fairly important since users will be accessing/changing its contents.  I did like the way you made the change while preserving `latex()`.\n\n\n> I'll produce a new patch soon with the \"r\", and with part 2 rebased against 3.4.1.rc4.\n\nI'll keep an eye out for it so you don't have to rebase yet again.",
    "created_at": "2009-04-21T04:13:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5610#issuecomment-35440",
    "user": "https://github.com/rbeezer"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@jhpalmieri](#comment:12):
> The second patch also changes QQ, RR, and CC.  It leaves `\mathbb{P`} and `\mathbb{A`} unchanged.  (The first patch includes only the core of the customization code, and the relevant files happened not to use QQ, RR, or CC.)

OK, that explains the split.  ;-) 

> Does this affect end-users, or just developers?  I mean, does `latex(blah)` behave the same as it used to?  I hope so -- that was my intention.  

I didn't notice any change from a user's perspective.  And maybe it was just the change that threw me.  I saw `def latex()` going away and it took me a while to figure out how the functionality came back.  I just thought for others reading the code it might help to make the definition of the `latex` instance more prominient with some source code comments.  Right now, it just seems to be slipped in there, when it is fairly important since users will be accessing/changing its contents.  I did like the way you made the change while preserving `latex()`.


> I'll produce a new patch soon with the "r", and with part 2 rebased against 3.4.1.rc4.

I'll keep an eye out for it so you don't have to rebase yet again.



---

archive/issue_comments_035441.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nHere's are two new patches, same subdivision as before, rebased against 3.4.1.rc4.  I also added a comment about `latex()`, as rbeezer suggested: this is in the first patch, right before the line \n\n```\nlatex = Latex()\n```\nin latex.py.",
    "created_at": "2009-04-21T05:41:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5610#issuecomment-35441",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:14" align="right">comment:14</div>

Here's are two new patches, same subdivision as before, rebased against 3.4.1.rc4.  I also added a comment about `latex()`, as rbeezer suggested: this is in the first patch, right before the line 

```
latex = Latex()
```
in latex.py.



---

archive/issue_events_066498.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2009-04-21T05:41:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5610#event-66498"
}
```



---

archive/issue_events_066499.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2009-04-21T05:41:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5610#event-66499"
}
```



---

archive/issue_comments_035442.json:
```json
{
    "body": "Attachment: **[latex-customization.patch.gz](https://github.com/sagemath/sage/files/ticket5610/latex-customization.patch.gz)**\n\napply this one first",
    "created_at": "2009-04-21T05:42:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5610#issuecomment-35442",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment: **[latex-customization.patch.gz](https://github.com/sagemath/sage/files/ticket5610/latex-customization.patch.gz)**

apply this one first



---

archive/issue_comments_035443.json:
```json
{
    "body": "Attachment: **[latex-customization-part2.patch.gz](https://github.com/sagemath/sage/files/ticket5610/latex-customization-part2.patch.gz)**\n\napply this one second (this is the same as latex-customization-part2.2.patch)",
    "created_at": "2009-04-21T05:43:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5610#issuecomment-35443",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment: **[latex-customization-part2.patch.gz](https://github.com/sagemath/sage/files/ticket5610/latex-customization-part2.patch.gz)**

apply this one second (this is the same as latex-customization-part2.2.patch)



---

archive/issue_comments_035444.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nLatest patches work well:  apply cleanly, builds and tests fine, including documentation.  Looks ready to go.  Great addition to the LaTeX-Sage interaction.",
    "created_at": "2009-04-22T05:50:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5610#issuecomment-35444",
    "user": "https://github.com/rbeezer"
}
```

<div id="comment:15" align="right">comment:15</div>

Latest patches work well:  apply cleanly, builds and tests fine, including documentation.  Looks ready to go.  Great addition to the LaTeX-Sage interaction.



---

archive/issue_events_066500.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2009-04-22T05:50:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5610#event-66500"
}
```



---

archive/issue_events_066501.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2009-04-22T05:50:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5610#event-66501"
}
```



---

archive/issue_comments_035445.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nArrrg, the second patch has one reject in matrix1.pyx:\n\n```\npatching file sage/matrix/matrix1.pyx\nHunk #1 FAILED at 191.\n1 out of 1 hunk FAILED -- saving rejects to file sage/matrix/matrix1.pyx.rej\n```\nI will try to fix it. This patch will likely break some other patches, so I am considering applying the untabify patch, too (in case it applies).\n\nCheers,\n\nMichael",
    "created_at": "2009-04-24T08:53:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5610#issuecomment-35445",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:16" align="right">comment:16</div>

Arrrg, the second patch has one reject in matrix1.pyx:

```
patching file sage/matrix/matrix1.pyx
Hunk #1 FAILED at 191.
1 out of 1 hunk FAILED -- saving rejects to file sage/matrix/matrix1.pyx.rej
```
I will try to fix it. This patch will likely break some other patches, so I am considering applying the untabify patch, too (in case it applies).

Cheers,

Michael



---

archive/issue_comments_035446.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nOk, I took out the failing hunk and merged it manually. Since this patch will potentially cause merge issues elsewhere I will push out 3.4.2.alpha0 in the morning after merging some spkg fixes.\n\nCheers,\n\nMichael",
    "created_at": "2009-04-24T09:16:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5610#issuecomment-35446",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:17" align="right">comment:17</div>

Ok, I took out the failing hunk and merged it manually. Since this patch will potentially cause merge issues elsewhere I will push out 3.4.2.alpha0 in the morning after merging some spkg fixes.

Cheers,

Michael



---

archive/issue_events_066502.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-04-24T09:17:18Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "milestone_number": null,
    "milestone_title": "sage-4.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5610#event-66502"
}
```



---

archive/issue_events_066503.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-04-24T09:17:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "milestone_number": null,
    "milestone_title": "sage-3.4.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5610#event-66503"
}
```



---

archive/issue_comments_035447.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nMerged in Sage 3.4.2.alpha0.\n\nCheers,\n\nMichael",
    "created_at": "2009-04-24T09:17:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5610#issuecomment-35447",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:18" align="right">comment:18</div>

Merged in Sage 3.4.2.alpha0.

Cheers,

Michael



---

archive/issue_events_066504.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-04-24T09:17:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5610#event-66504"
}
```



---

archive/issue_events_066505.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-04-24T09:17:18Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/5610",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5610#event-66505"
}
```
