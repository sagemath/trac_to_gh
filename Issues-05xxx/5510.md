# Issue 5510: update M4RI interface

archive/issues_005510.json:
```json
{
    "assignees": [
        "https://github.com/malb"
    ],
    "body": "<div id=\"comment:0\"></div>\n\nThe attached patch(es) update Sage's interface to work with the HG version of M4RI available at: http://bitbucket.org/malb/m4ri/\n\nAlso, a dedicated (faster) `rank()` function was added for dense matrices over GF(2).\n\nCC:  @rhinton\n\nComponent: **linear algebra**\n\nKeywords: **m4ri**\n\nAuthor: **Martin Albrecht**\n\nReviewer: **Jason Grout**\n\nMerged: **4.0.2.alpha0**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/5510_\n\n",
    "closed_at": "2009-06-13T23:25:29Z",
    "created_at": "2009-03-13T15:38:21Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20linear%20algebra",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/c%3A%20linear%20algebra"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.0.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "update M4RI interface",
    "type": "issue",
    "updated_at": "2009-06-13T23:25:29Z",
    "url": "https://github.com/sagemath/sage/issues/5510",
    "user": "https://github.com/malb"
}
```
<div id="comment:0"></div>

The attached patch(es) update Sage's interface to work with the HG version of M4RI available at: http://bitbucket.org/malb/m4ri/

Also, a dedicated (faster) `rank()` function was added for dense matrices over GF(2).

CC:  @rhinton

Component: **linear algebra**

Keywords: **m4ri**

Author: **Martin Albrecht**

Reviewer: **Jason Grout**

Merged: **4.0.2.alpha0**

_Issue created by migration from https://trac.sagemath.org/ticket/5510_





---

archive/issue_events_064558.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2009-03-13T15:38:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5510",
    "milestone_number": null,
    "milestone_title": "sage-4.0.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5510#event-64558"
}
```



---

archive/issue_events_064559.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2009-03-13T15:38:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5510",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20linear%20algebra",
    "label_color": "0000ff",
    "label_name": "c: linear algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5510#event-64559"
}
```



---

archive/issue_events_064560.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2009-03-13T15:38:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5510",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5510#event-64560"
}
```



---

archive/issue_events_064561.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2009-03-13T15:38:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5510",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5510#event-64561"
}
```



---

archive/issue_events_064562.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2009-03-13T15:38:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5510",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20linear%20algebra",
    "label_color": "0000ff",
    "label_name": "c: linear algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5510#event-64562"
}
```



---

archive/issue_events_064563.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2009-03-13T15:38:21Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/5510",
    "subject": "https://github.com/malb",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5510#event-64563"
}
```



---

archive/issue_events_064564.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2009-05-12T01:36:56Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/5510",
    "title_is": "update M4RI interface",
    "title_was": "[not ready for review] update M4RI interface",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5510#event-64564"
}
```



---

archive/issue_events_064565.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2009-05-12T01:36:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5510",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5510#event-64565"
}
```



---

archive/issue_comments_034406.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nAttachment: **[matrix_mod2_new_api_and_rank.patch.gz](https://github.com/sagemath/sage/files/ticket5510/matrix_mod2_new_api_and_rank.patch.gz)**\n\nPatch requires SPKG at:\n\n   http://sage.math.washington.edu/home/malb/spkgs/libm4ri-20090512.spkg\n\nThis update is a requirement for updating PolyBoRi to 0.6.",
    "created_at": "2009-05-12T01:36:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5510#issuecomment-34406",
    "user": "https://github.com/malb"
}
```

<div id="comment:1" align="right">comment:1</div>

Attachment: **[matrix_mod2_new_api_and_rank.patch.gz](https://github.com/sagemath/sage/files/ticket5510/matrix_mod2_new_api_and_rank.patch.gz)**

Patch requires SPKG at:

   http://sage.math.washington.edu/home/malb/spkgs/libm4ri-20090512.spkg

This update is a requirement for updating PolyBoRi to 0.6.



---

archive/issue_events_064566.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2009-05-30T06:35:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5510",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5510#event-64566"
}
```



---

archive/issue_events_064567.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2009-05-30T06:35:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5510",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5510#event-64567"
}
```



---

archive/issue_comments_034407.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThe spkg looks great.  Positive review for that.\n\nThe patch looks good to me as well.  Here are some timings:\n\nBEFORE:\n\n```\nsage: A = random_matrix(GF(2), 1000, 1000) \nsage: timeit('B=A.copy(); B.rank()')\n25 loops, best of 3: 8.42 ms per loop\nsage: timeit('B=A.copy(); B.rank()')\n25 loops, best of 3: 8.39 ms per loop\nsage: A = matrix(GF(2),10, 0) \nsage: timeit('B=A.copy(); B.rank()')\n625 loops, best of 3: 24.5 \u00b5s per loop\nsage: timeit('B=A.copy(); B.rank()')\n625 loops, best of 3: 24.3 \u00b5s per loop\n```\n\nAFTER\n\n```\nsage: A = random_matrix(GF(2), 1000, 1000) \nsage: timeit('B=A.copy(); B.rank()')\n125 loops, best of 3: 6.05 ms per loop\nsage: timeit('B=A.copy(); B.rank()')\n125 loops, best of 3: 6.09 ms per loop\nsage: A = matrix(GF(2),10, 0) \nsage: timeit('B=A.copy(); B.rank()')\n625 loops, best of 3: 38.7 \u00b5s per loop\nsage: timeit('B=A.copy(); B.rank()')\n625 loops, best of 3: 40.1 \u00b5s per loop\n```\n\nNote that the rank of a zero matrix is significantly longer (i.e., twice as long).  Malb, can you comment?\n\nIf malb addresses this performance regression sufficiently, then this is a positive review as far as I'm concerned for both the spkg and the patch.",
    "created_at": "2009-05-30T06:35:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5510#issuecomment-34407",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:2" align="right">comment:2</div>

The spkg looks great.  Positive review for that.

The patch looks good to me as well.  Here are some timings:

BEFORE:

```
sage: A = random_matrix(GF(2), 1000, 1000) 
sage: timeit('B=A.copy(); B.rank()')
25 loops, best of 3: 8.42 ms per loop
sage: timeit('B=A.copy(); B.rank()')
25 loops, best of 3: 8.39 ms per loop
sage: A = matrix(GF(2),10, 0) 
sage: timeit('B=A.copy(); B.rank()')
625 loops, best of 3: 24.5 µs per loop
sage: timeit('B=A.copy(); B.rank()')
625 loops, best of 3: 24.3 µs per loop
```

AFTER

```
sage: A = random_matrix(GF(2), 1000, 1000) 
sage: timeit('B=A.copy(); B.rank()')
125 loops, best of 3: 6.05 ms per loop
sage: timeit('B=A.copy(); B.rank()')
125 loops, best of 3: 6.09 ms per loop
sage: A = matrix(GF(2),10, 0) 
sage: timeit('B=A.copy(); B.rank()')
625 loops, best of 3: 38.7 µs per loop
sage: timeit('B=A.copy(); B.rank()')
625 loops, best of 3: 40.1 µs per loop
```

Note that the rank of a zero matrix is significantly longer (i.e., twice as long).  Malb, can you comment?

If malb addresses this performance regression sufficiently, then this is a positive review as far as I'm concerned for both the spkg and the patch.



---

archive/issue_comments_034408.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nHere is the code that used to be called:\n\n```\n    def rank(self):\n        x = self.fetch('rank')\n        if not x is None: return x\n        if self._nrows == 0 or self._ncols == 0:\n            return 0\n```\n\n\nAnd here is the code that is called now:\n\n```\n    def rank(self):\n        x = self.fetch('rank')\n        if not x is None:\n            return x\n        if self._nrows == 0 or self._ncols == 0:\n            return 0\n```\n\ni.e. they are identical and thus I have no idea to address this performance regression. Maybe the fetch is more expensive from a subclass or something? In any case, I don't think this should hold back the merge of this ticket.",
    "created_at": "2009-05-30T21:25:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5510#issuecomment-34408",
    "user": "https://github.com/malb"
}
```

<div id="comment:3" align="right">comment:3</div>

Here is the code that used to be called:

```
    def rank(self):
        x = self.fetch('rank')
        if not x is None: return x
        if self._nrows == 0 or self._ncols == 0:
            return 0
```


And here is the code that is called now:

```
    def rank(self):
        x = self.fetch('rank')
        if not x is None:
            return x
        if self._nrows == 0 or self._ncols == 0:
            return 0
```

i.e. they are identical and thus I have no idea to address this performance regression. Maybe the fetch is more expensive from a subclass or something? In any case, I don't think this should hold back the merge of this ticket.



---

archive/issue_comments_034409.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nJason, can you comment on my reply?",
    "created_at": "2009-06-07T13:37:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5510#issuecomment-34409",
    "user": "https://github.com/malb"
}
```

<div id="comment:4" align="right">comment:4</div>

Jason, can you comment on my reply?



---

archive/issue_comments_034410.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI thought your patch had a new rank function (at the bottom of the patch).  Isn't that what is called now?",
    "created_at": "2009-06-09T19:04:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5510#issuecomment-34410",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:5" align="right">comment:5</div>

I thought your patch had a new rank function (at the bottom of the patch).  Isn't that what is called now?



---

archive/issue_events_064568.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2009-06-09T19:17:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5510",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5510#event-64568"
}
```



---

archive/issue_events_064569.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2009-06-09T19:17:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5510",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5510#event-64569"
}
```



---

archive/issue_comments_034411.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI re-ran my timings (on a different computer) in 4.0.  Here are the results:\n\nBEFORE:\n\n```\nsage: A = matrix(GF(2),100, 100,0)\nsage: timeit('A.rank(); A._clear_cache()')\n625 loops, best of 3: 47.9 \u00b5s per loop\nsage: A = matrix(GF(2),10, 10,0)\nsage: timeit('A.rank(); A._clear_cache()')\n625 loops, best of 3: 39.9 \u00b5s per loop\nsage: A = matrix(GF(2),100, 100,0)\nsage: timeit('A.rank(); A._clear_cache()')\n625 loops, best of 3: 47.7 \u00b5s per loop\nsage: A = matrix(GF(2),1000, 1000,0)\nsage: timeit('A.rank(); A._clear_cache()')\n625 loops, best of 3: 222 \u00b5s per loop\nsage: A = random_matrix(GF(2), 1000)\nsage: save(A,'m4ri.sobj')\nsage: timeit('A.rank(); A._clear_cache()')\n125 loops, best of 3: 6.85 ms per loop\nsage: A = random_matrix(GF(2), 100)\nsage: save(A,'m4ri2.sobj')\nsage: timeit('A.rank(); A._clear_cache()')\n625 loops, best of 3: 164 \u00b5s per loop\nsage: A = random_matrix(GF(2), 10000)\nsage: save(A,'m4ri3.sobj')\nsage: timeit('A.rank(); A._clear_cache()')\n5 loops, best of 3: 4.24 s per loop\n```\n\nAFTER\n\n```\nsage: A = matrix(GF(2),100, 100,0)\nsage: timeit('A.rank(); A._clear_cache()')\n625 loops, best of 3: 17.9 \u00b5s per loop\nsage: A = matrix(GF(2),10, 10,0)\nsage: timeit('A.rank(); A._clear_cache()')\n625 loops, best of 3: 13.4 \u00b5s per loop\nsage: A = matrix(GF(2),100, 100,0)\nsage: timeit('A.rank(); A._clear_cache()')\n625 loops, best of 3: 18.3 \u00b5s per loop\nsage: A = matrix(GF(2),1000, 1000,0)\nsage: timeit('A.rank(); A._clear_cache()')\n625 loops, best of 3: 205 \u00b5s per loop\nsage: A=load('./m4ri.sobj')\nsage: timeit('A.rank(); A._clear_cache()')\n125 loops, best of 3: 4.72 ms per loop\nsage: A=load('./m4ri2.sobj')\nsage: timeit('A.rank(); A._clear_cache()')\n625 loops, best of 3: 115 \u00b5s per loop\nsage: A=load('./m4ri3.sobj')\nsage: timeit('A.rank(); A._clear_cache()')\n5 loops, best of 3: 2.57 s per loop\n```\n\nThe new code is a clear winner.  I don't know what was happening before, but it seems great now.  Positive review.",
    "created_at": "2009-06-09T19:17:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5510#issuecomment-34411",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:6" align="right">comment:6</div>

I re-ran my timings (on a different computer) in 4.0.  Here are the results:

BEFORE:

```
sage: A = matrix(GF(2),100, 100,0)
sage: timeit('A.rank(); A._clear_cache()')
625 loops, best of 3: 47.9 µs per loop
sage: A = matrix(GF(2),10, 10,0)
sage: timeit('A.rank(); A._clear_cache()')
625 loops, best of 3: 39.9 µs per loop
sage: A = matrix(GF(2),100, 100,0)
sage: timeit('A.rank(); A._clear_cache()')
625 loops, best of 3: 47.7 µs per loop
sage: A = matrix(GF(2),1000, 1000,0)
sage: timeit('A.rank(); A._clear_cache()')
625 loops, best of 3: 222 µs per loop
sage: A = random_matrix(GF(2), 1000)
sage: save(A,'m4ri.sobj')
sage: timeit('A.rank(); A._clear_cache()')
125 loops, best of 3: 6.85 ms per loop
sage: A = random_matrix(GF(2), 100)
sage: save(A,'m4ri2.sobj')
sage: timeit('A.rank(); A._clear_cache()')
625 loops, best of 3: 164 µs per loop
sage: A = random_matrix(GF(2), 10000)
sage: save(A,'m4ri3.sobj')
sage: timeit('A.rank(); A._clear_cache()')
5 loops, best of 3: 4.24 s per loop
```

AFTER

```
sage: A = matrix(GF(2),100, 100,0)
sage: timeit('A.rank(); A._clear_cache()')
625 loops, best of 3: 17.9 µs per loop
sage: A = matrix(GF(2),10, 10,0)
sage: timeit('A.rank(); A._clear_cache()')
625 loops, best of 3: 13.4 µs per loop
sage: A = matrix(GF(2),100, 100,0)
sage: timeit('A.rank(); A._clear_cache()')
625 loops, best of 3: 18.3 µs per loop
sage: A = matrix(GF(2),1000, 1000,0)
sage: timeit('A.rank(); A._clear_cache()')
625 loops, best of 3: 205 µs per loop
sage: A=load('./m4ri.sobj')
sage: timeit('A.rank(); A._clear_cache()')
125 loops, best of 3: 4.72 ms per loop
sage: A=load('./m4ri2.sobj')
sage: timeit('A.rank(); A._clear_cache()')
625 loops, best of 3: 115 µs per loop
sage: A=load('./m4ri3.sobj')
sage: timeit('A.rank(); A._clear_cache()')
5 loops, best of 3: 2.57 s per loop
```

The new code is a clear winner.  I don't know what was happening before, but it seems great now.  Positive review.



---

archive/issue_comments_034412.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nAh, I think I know what was happening before.  I was creating a 10x0 matrix.  The copy was probably swamping the rank function.",
    "created_at": "2009-06-09T19:19:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5510#issuecomment-34412",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:7" align="right">comment:7</div>

Ah, I think I know what was happening before.  I was creating a 10x0 matrix.  The copy was probably swamping the rank function.



---

archive/issue_comments_034413.json:
```json
{
    "body": "Author: **Martin Albrecht**",
    "created_at": "2009-06-09T19:22:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5510#issuecomment-34413",
    "user": "https://github.com/jasongrout"
}
```

Author: **Martin Albrecht**



---

archive/issue_comments_034414.json:
```json
{
    "body": "Reviewer: **Jason Grout**",
    "created_at": "2009-06-09T19:22:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5510#issuecomment-34414",
    "user": "https://github.com/jasongrout"
}
```

Reviewer: **Jason Grout**



---

archive/issue_comments_034415.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nSo, for the tour: calculating the rank of a random 10,000x10,000 GF(2) matrix takes approximately half the time it used to.  Nice!",
    "created_at": "2009-06-09T19:22:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5510#issuecomment-34415",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:8" align="right">comment:8</div>

So, for the tour: calculating the rank of a random 10,000x10,000 GF(2) matrix takes approximately half the time it used to.  Nice!



---

archive/issue_events_064570.json:
```json
{
    "actor": "https://github.com/ncalexan",
    "created_at": "2009-06-13T22:07:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5510",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5510#event-64570"
}
```



---

archive/issue_events_064571.json:
```json
{
    "actor": "https://github.com/ncalexan",
    "created_at": "2009-06-13T22:07:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5510",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5510#event-64571"
}
```



---

archive/issue_comments_034416.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThe dependencies are definitely not correct.  Even after 'touch sage/matrix/*' I can't compile it.\n\n```\nsage/rings/polynomial/polynomial_gf2x.cpp: In function \u00e2\ufffd\ufffdPyObject* __pyx_pf_4sage_5rings_10polynomial_15polynomial_gf2x_15Polynomial_GF2X_modular_compos                                                                                                                                                    sition(PyObject*, PyObject*, PyObject*)\u00e2\ufffd\ufffd:\nsage/rings/polynomial/polynomial_gf2x.cpp:10871: error: \u00e2\ufffd\ufffdstruct __pyx_obj_4sage_6matrix_17matrix_mod2_dense_Matrix_mod2_dense\u00e2\ufffd\ufffd has no member named \u00e2\ufffd\ufffd_en                                                                                                                                                ntries\u00e2\ufffd\ufffd\nsage/rings/polynomial/polynomial_gf2x.cpp:10941: error: \u00e2\ufffd\ufffdstruct __pyx_obj_4sage_6matrix_17matrix_mod2_dense_Matrix_mod2_dense\u00e2\ufffd\ufffd has no member named \u00e2\ufffd\ufffd_en                                                                                                                                                ntries\u00e2\ufffd\ufffd\nsage/rings/polynomial/polynomial_gf2x.cpp:11042: error: \u00e2\ufffd\ufffdstruct __pyx_obj_4sage_6matrix_17matrix_mod2_dense_Matrix_mod2_dense\u00e2\ufffd\ufffd has no member named \u00e2\ufffd\ufffd_en                                                                                                                                                ntries\u00e2\ufffd\ufffd\nsage/rings/polynomial/polynomial_gf2x.cpp:11227: error: \u00e2\ufffd\ufffdstruct __pyx_obj_4sage_6matrix_17matrix_mod2_dense_Matrix_mod2_dense\u00e2\ufffd\ufffd has no member named \u00e2\ufffd\ufffd_en                                                                                                                                                ntries\u00e2\ufffd\ufffd\nsage/rings/polynomial/polynomial_gf2x.cpp:11250: error: \u00e2\ufffd\ufffdstruct __pyx_obj_4sage_6matrix_17matrix_mod2_dense_Matrix_mod2_dense\u00e2\ufffd\ufffd has no member named \u00e2\ufffd\ufffd_en                                                                                                                                                ntries\u00e2\ufffd\ufffd\nsage/rings/polynomial/polynomial_gf2x.cpp:11475: error: \u00e2\ufffd\ufffdstruct __pyx_obj_4sage_6matrix_17matrix_mod2_dense_Matrix_mod2_dense\u00e2\ufffd\ufffd has no member named \u00e2\ufffd\ufffd_en                                                                                                                                                ntries\u00e2\ufffd\ufffd\ngcc -fno-strict-aliasing -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/scratch/ncalexan/sage-4.0.2.alpha1/local/lib/python2.5/site-packages/numpy/core/include -I/scratch/ncalexan/sage-4.0.2.alpha1/local//include -I/scratch/ncalexan/sage-4.0.2.alpha1/local//include/csage -I/scratch/ncalexan/sage-4.0.2.alpha1/devel//sage/sage/ext -I/scratch/ncalexan/sage-4.0.2.alpha1/local/include/python2.5 -c sage/stats/hmm/chmm.c -o build/temp.linux-x86_64-2.5/sage/stats/hmm/chmm.o -w\ngcc -pthread -shared build/temp.linux-x86_64-2.5/sage/matrix/matrix2.o -L/scratch/ncalexan/sage-4.0.2.alpha1/local//lib -lcsage -lstdc++ -lntl -o build/lib.linux-x86_64-2.5/sage/matrix/matrix2.so\ngcc -fno-strict-aliasing -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/scratch/ncalexan/sage-4.0.2.alpha1/local/lib/python2.5/site-packages/numpy/core/include -I/scratch/ncalexan/sage-4.0.2.alpha1/local//include -I/scratch/ncalexan/sage-4.0.2.alpha1/local//include/csage -I/scratch/ncalexan/sage-4.0.2.alpha1/devel//sage/sage/ext -I/scratch/ncalexan/sage-4.0.2.alpha1/local/include/python2.5 -c sage/stats/hmm/hmm.c -o build/temp.linux-x86_64-2.5/sage/stats/hmm/hmm.o -w\ngcc -pthread -shared build/temp.linux-x86_64-2.5/sage/matrix/matrix_integer_dense.o -L/scratch/ncalexan/sage-4.0.2.alpha1/local//lib -lcsage -liml -lgmp -lm -lcblas -latlas -lstdc++ -lntl -o build/lib.linux-x86_64-2.5/sage/matrix/matrix_integer_dense.so\nerror: command 'gcc' failed with exit status 1\nsage: There was an error installing modified sage library code.\n```\n\nAfter 'touch sage/polynomial/*' and a few retries, this still fails.  (I didn't try sage -ba.)  So I'm going to say needs work, to fix the dependencies.",
    "created_at": "2009-06-13T22:07:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5510#issuecomment-34416",
    "user": "https://github.com/ncalexan"
}
```

<div id="comment:9" align="right">comment:9</div>

The dependencies are definitely not correct.  Even after 'touch sage/matrix/*' I can't compile it.

```
sage/rings/polynomial/polynomial_gf2x.cpp: In function â��PyObject* __pyx_pf_4sage_5rings_10polynomial_15polynomial_gf2x_15Polynomial_GF2X_modular_compos                                                                                                                                                    sition(PyObject*, PyObject*, PyObject*)â��:
sage/rings/polynomial/polynomial_gf2x.cpp:10871: error: â��struct __pyx_obj_4sage_6matrix_17matrix_mod2_dense_Matrix_mod2_denseâ�� has no member named â��_en                                                                                                                                                ntriesâ��
sage/rings/polynomial/polynomial_gf2x.cpp:10941: error: â��struct __pyx_obj_4sage_6matrix_17matrix_mod2_dense_Matrix_mod2_denseâ�� has no member named â��_en                                                                                                                                                ntriesâ��
sage/rings/polynomial/polynomial_gf2x.cpp:11042: error: â��struct __pyx_obj_4sage_6matrix_17matrix_mod2_dense_Matrix_mod2_denseâ�� has no member named â��_en                                                                                                                                                ntriesâ��
sage/rings/polynomial/polynomial_gf2x.cpp:11227: error: â��struct __pyx_obj_4sage_6matrix_17matrix_mod2_dense_Matrix_mod2_denseâ�� has no member named â��_en                                                                                                                                                ntriesâ��
sage/rings/polynomial/polynomial_gf2x.cpp:11250: error: â��struct __pyx_obj_4sage_6matrix_17matrix_mod2_dense_Matrix_mod2_denseâ�� has no member named â��_en                                                                                                                                                ntriesâ��
sage/rings/polynomial/polynomial_gf2x.cpp:11475: error: â��struct __pyx_obj_4sage_6matrix_17matrix_mod2_dense_Matrix_mod2_denseâ�� has no member named â��_en                                                                                                                                                ntriesâ��
gcc -fno-strict-aliasing -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/scratch/ncalexan/sage-4.0.2.alpha1/local/lib/python2.5/site-packages/numpy/core/include -I/scratch/ncalexan/sage-4.0.2.alpha1/local//include -I/scratch/ncalexan/sage-4.0.2.alpha1/local//include/csage -I/scratch/ncalexan/sage-4.0.2.alpha1/devel//sage/sage/ext -I/scratch/ncalexan/sage-4.0.2.alpha1/local/include/python2.5 -c sage/stats/hmm/chmm.c -o build/temp.linux-x86_64-2.5/sage/stats/hmm/chmm.o -w
gcc -pthread -shared build/temp.linux-x86_64-2.5/sage/matrix/matrix2.o -L/scratch/ncalexan/sage-4.0.2.alpha1/local//lib -lcsage -lstdc++ -lntl -o build/lib.linux-x86_64-2.5/sage/matrix/matrix2.so
gcc -fno-strict-aliasing -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/scratch/ncalexan/sage-4.0.2.alpha1/local/lib/python2.5/site-packages/numpy/core/include -I/scratch/ncalexan/sage-4.0.2.alpha1/local//include -I/scratch/ncalexan/sage-4.0.2.alpha1/local//include/csage -I/scratch/ncalexan/sage-4.0.2.alpha1/devel//sage/sage/ext -I/scratch/ncalexan/sage-4.0.2.alpha1/local/include/python2.5 -c sage/stats/hmm/hmm.c -o build/temp.linux-x86_64-2.5/sage/stats/hmm/hmm.o -w
gcc -pthread -shared build/temp.linux-x86_64-2.5/sage/matrix/matrix_integer_dense.o -L/scratch/ncalexan/sage-4.0.2.alpha1/local//lib -lcsage -liml -lgmp -lm -lcblas -latlas -lstdc++ -lntl -o build/lib.linux-x86_64-2.5/sage/matrix/matrix_integer_dense.so
error: command 'gcc' failed with exit status 1
sage: There was an error installing modified sage library code.
```

After 'touch sage/polynomial/*' and a few retries, this still fails.  (I didn't try sage -ba.)  So I'm going to say needs work, to fix the dependencies.



---

archive/issue_comments_034417.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nYou need to also install the spkg listed in the comments above.",
    "created_at": "2009-06-13T22:42:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5510#issuecomment-34417",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:10" align="right">comment:10</div>

You need to also install the spkg listed in the comments above.



---

archive/issue_events_064572.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2009-06-13T22:42:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5510",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5510#event-64572"
}
```



---

archive/issue_events_064573.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2009-06-13T22:42:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5510",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5510#event-64573"
}
```



---

archive/issue_comments_034418.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nWith the spkg, works perfectly.  Sorry for the confusion.",
    "created_at": "2009-06-13T23:25:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5510#issuecomment-34418",
    "user": "https://github.com/ncalexan"
}
```

<div id="comment:11" align="right">comment:11</div>

With the spkg, works perfectly.  Sorry for the confusion.



---

archive/issue_events_064574.json:
```json
{
    "actor": "https://github.com/ncalexan",
    "created_at": "2009-06-13T23:25:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5510",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5510#event-64574"
}
```



---

archive/issue_events_064575.json:
```json
{
    "actor": "https://github.com/ncalexan",
    "created_at": "2009-06-13T23:25:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/5510",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5510#event-64575"
}
```



---

archive/issue_comments_034419.json:
```json
{
    "body": "Merged: **4.0.2.alpha0**",
    "created_at": "2009-06-13T23:25:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5510#issuecomment-34419",
    "user": "https://github.com/ncalexan"
}
```

Merged: **4.0.2.alpha0**
