# Issue 5209: Sage 3.3.a6: numerical noise in sage/plot/plot.py on OpenSUSE 11.1 64 bit

archive/issues_005209.json:
```json
{
    "body": "\n```\nsage -t -long \"devel/sage/sage/plot/plot.py\" \n********************************************************************** \nFile \"/space/build/sage-3.3.alpha6/devel/sage/sage/plot/plot.py\", line 2582: \n    sage: generate_plot_points(sin(x), (-pi, pi), randomize=False) \nExpected: \n    [(-3.1415926535897931, -1.2246...e-16), (-2.748893571891069, \n    -0.38268343236508989), (-2.3561944901923448, -0.707106781186547...), \n    (-2.1598449493429825, -0.83146961230254546), (-1.9634954084936207, \n    -0.92387953251128674), (-1.7671458676442586, -0.98078528040323043), \n    (-1.5707963267948966, -1.0), (-1.3744467859455345, \n    -0.98078528040323043), (-1.1780972450961724, -0.92387953251128674), \n    (-0.98174770424681035, -0.83146961230254524), (-0.78539816339744828, \n    -0.707106781186547...), (-0.39269908169872414, -0.38268343236508978), \n    (0.0, 0.0), (0.39269908169872414, 0.38268343236508978), \n    (0.78539816339744828, 0.707106781186547...), (0.98174770424681035, \n    0.83146961230254524), (1.1780972450961724, 0.92387953251128674), \n    (1.3744467859455345, 0.98078528040323043), (1.5707963267948966, 1.0), \n    (1.7671458676442586, 0.98078528040323043), (1.9634954084936207, \n    0.92387953251128674), (2.1598449493429825, 0.83146961230254546), \n    (2.3561944901923448, 0.707106781186547...), (2.748893571891069, \n    0.38268343236508989), (3.1415926535897931, 1.2246...e-16)] \nGot: \n    [(-3.1415926535897931, -1.2246467991473532e-16), \n(-2.748893571891069, -0.38268343236508989), (-2.3561944901923448, \n-0.70710678118654757), (-2.1598449493429825, -0.83146961230254535), \n(-1.9634954084936207, -0.92387953251128674), (-1.7671458676442586, \n-0.98078528040323043), (-1.5707963267948966, -1.0), \n(-1.3744467859455345, -0.98078528040323043), (-1.1780972450961724, \n-0.92387953251128674), (-0.98174770424681035, -0.83146961230254524), \n(-0.78539816339744828, -0.70710678118654746), (-0.39269908169872414, \n-0.38268343236508978), (0.0, 0.0), (0.39269908169872414, \n0.38268343236508978), (0.78539816339744828, 0.70710678118654746), \n(0.98174770424681035, 0.83146961230254524), (1.1780972450961724, \n0.92387953251128674), (1.3744467859455345, 0.98078528040323043), \n(1.5707963267948966, 1.0), (1.7671458676442586, 0.98078528040323043), \n(1.9634954084936207, 0.92387953251128674), (2.1598449493429825, \n0.83146961230254535), (2.3561944901923448, 0.70710678118654757), \n(2.748893571891069, 0.38268343236508989), (3.1415926535897931, \n1.2246467991473532e-16)] \n**********************************************************************\n```\n\n**Assignee:** mabshoff\n\nIssue created by migration from https://trac.sagemath.org/ticket/5209\n\n",
    "closed_at": "2009-02-10T06:42:53Z",
    "created_at": "2009-02-08T20:16:44Z",
    "labels": [
        "component: doctest coverage",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-3.3",
    "title": "Sage 3.3.a6: numerical noise in sage/plot/plot.py on OpenSUSE 11.1 64 bit",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/5209",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

```
sage -t -long "devel/sage/sage/plot/plot.py" 
********************************************************************** 
File "/space/build/sage-3.3.alpha6/devel/sage/sage/plot/plot.py", line 2582: 
    sage: generate_plot_points(sin(x), (-pi, pi), randomize=False) 
Expected: 
    [(-3.1415926535897931, -1.2246...e-16), (-2.748893571891069, 
    -0.38268343236508989), (-2.3561944901923448, -0.707106781186547...), 
    (-2.1598449493429825, -0.83146961230254546), (-1.9634954084936207, 
    -0.92387953251128674), (-1.7671458676442586, -0.98078528040323043), 
    (-1.5707963267948966, -1.0), (-1.3744467859455345, 
    -0.98078528040323043), (-1.1780972450961724, -0.92387953251128674), 
    (-0.98174770424681035, -0.83146961230254524), (-0.78539816339744828, 
    -0.707106781186547...), (-0.39269908169872414, -0.38268343236508978), 
    (0.0, 0.0), (0.39269908169872414, 0.38268343236508978), 
    (0.78539816339744828, 0.707106781186547...), (0.98174770424681035, 
    0.83146961230254524), (1.1780972450961724, 0.92387953251128674), 
    (1.3744467859455345, 0.98078528040323043), (1.5707963267948966, 1.0), 
    (1.7671458676442586, 0.98078528040323043), (1.9634954084936207, 
    0.92387953251128674), (2.1598449493429825, 0.83146961230254546), 
    (2.3561944901923448, 0.707106781186547...), (2.748893571891069, 
    0.38268343236508989), (3.1415926535897931, 1.2246...e-16)] 
Got: 
    [(-3.1415926535897931, -1.2246467991473532e-16), 
(-2.748893571891069, -0.38268343236508989), (-2.3561944901923448, 
-0.70710678118654757), (-2.1598449493429825, -0.83146961230254535), 
(-1.9634954084936207, -0.92387953251128674), (-1.7671458676442586, 
-0.98078528040323043), (-1.5707963267948966, -1.0), 
(-1.3744467859455345, -0.98078528040323043), (-1.1780972450961724, 
-0.92387953251128674), (-0.98174770424681035, -0.83146961230254524), 
(-0.78539816339744828, -0.70710678118654746), (-0.39269908169872414, 
-0.38268343236508978), (0.0, 0.0), (0.39269908169872414, 
0.38268343236508978), (0.78539816339744828, 0.70710678118654746), 
(0.98174770424681035, 0.83146961230254524), (1.1780972450961724, 
0.92387953251128674), (1.3744467859455345, 0.98078528040323043), 
(1.5707963267948966, 1.0), (1.7671458676442586, 0.98078528040323043), 
(1.9634954084936207, 0.92387953251128674), (2.1598449493429825, 
0.83146961230254535), (2.3561944901923448, 0.70710678118654757), 
(2.748893571891069, 0.38268343236508989), (3.1415926535897931, 
1.2246467991473532e-16)] 
**********************************************************************
```

**Assignee:** mabshoff

Issue created by migration from https://trac.sagemath.org/ticket/5209





---

archive/issue_comments_033133.json:
```json
{
    "body": "<a id='comment:1'></a>\nAnd another one - it might be the same noise since it is also from an OpenSUSE box:\n\n```\n**********************************************************************\nFile \"/home/mabshoff/build-3.3.alpha6/sage-3.3.alpha6-menas/devel/sage/sage/plot/plot.py\", line 2582:\n    sage: generate_plot_points(sin(x), (-pi, pi), randomize=False)\nExpected:\n    [(-3.1415926535897931, -1.2246...e-16), (-2.748893571891069,\n    -0.38268343236508989), (-2.3561944901923448, -0.707106781186547...),\n    (-2.1598449493429825, -0.83146961230254546), (-1.9634954084936207,\n    -0.92387953251128674), (-1.7671458676442586, -0.98078528040323043),\n    (-1.5707963267948966, -1.0), (-1.3744467859455345,\n    -0.98078528040323043), (-1.1780972450961724, -0.92387953251128674),\n    (-0.98174770424681035, -0.83146961230254524), (-0.78539816339744828,\n    -0.707106781186547...), (-0.39269908169872414, -0.38268343236508978),\n    (0.0, 0.0), (0.39269908169872414, 0.38268343236508978),\n    (0.78539816339744828, 0.707106781186547...), (0.98174770424681035,\n    0.83146961230254524), (1.1780972450961724, 0.92387953251128674),\n    (1.3744467859455345, 0.98078528040323043), (1.5707963267948966, 1.0),\n    (1.7671458676442586, 0.98078528040323043), (1.9634954084936207,\n    0.92387953251128674), (2.1598449493429825, 0.83146961230254546),\n    (2.3561944901923448, 0.707106781186547...), (2.748893571891069,\n    0.38268343236508989), (3.1415926535897931, 1.2246...e-16)]\nGot:\n    [(-3.1415926535897931, -1.2246467991473532e-16), (-2.748893571891069, \n    -0.38268343236508989), (-2.3561944901923448, -0.70710678118654757), \n    (-2.1598449493429825, -0.83146961230254535), (-1.9634954084936207, \n    -0.92387953251128674), (-1.7671458676442586, -0.98078528040323043), \n    (-1.5707963267948966, -1.0), (-1.3744467859455345, \n    -0.98078528040323043), (-1.1780972450961724, -0.92387953251128674), \n    (-0.98174770424681035, -0.83146961230254524), (-0.78539816339744828, \n    -0.70710678118654746), (-0.39269908169872414, -0.38268343236508978), \n    (0.0, 0.0), (0.39269908169872414, 0.38268343236508978), \n    (0.78539816339744828, 0.70710678118654746), (0.98174770424681035, \n    0.83146961230254524), (1.1780972450961724, 0.92387953251128674), \n    (1.3744467859455345, 0.98078528040323043), (1.5707963267948966, 1.0), \n    (1.7671458676442586, 0.98078528040323043), (1.9634954084936207, \n    0.92387953251128674), (2.1598449493429825, 0.83146961230254535), \n    (2.3561944901923448, 0.70710678118654757), (2.748893571891069, \n    0.38268343236508989), (3.1415926535897931, 1.2246467991473532e-16)]\n**********************************************************************\n```",
    "created_at": "2009-02-08T20:37:11Z",
    "issue": "https://github.com/sagemath/sage/issues/5209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5209#issuecomment-33133",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:1'></a>
And another one - it might be the same noise since it is also from an OpenSUSE box:

```
**********************************************************************
File "/home/mabshoff/build-3.3.alpha6/sage-3.3.alpha6-menas/devel/sage/sage/plot/plot.py", line 2582:
    sage: generate_plot_points(sin(x), (-pi, pi), randomize=False)
Expected:
    [(-3.1415926535897931, -1.2246...e-16), (-2.748893571891069,
    -0.38268343236508989), (-2.3561944901923448, -0.707106781186547...),
    (-2.1598449493429825, -0.83146961230254546), (-1.9634954084936207,
    -0.92387953251128674), (-1.7671458676442586, -0.98078528040323043),
    (-1.5707963267948966, -1.0), (-1.3744467859455345,
    -0.98078528040323043), (-1.1780972450961724, -0.92387953251128674),
    (-0.98174770424681035, -0.83146961230254524), (-0.78539816339744828,
    -0.707106781186547...), (-0.39269908169872414, -0.38268343236508978),
    (0.0, 0.0), (0.39269908169872414, 0.38268343236508978),
    (0.78539816339744828, 0.707106781186547...), (0.98174770424681035,
    0.83146961230254524), (1.1780972450961724, 0.92387953251128674),
    (1.3744467859455345, 0.98078528040323043), (1.5707963267948966, 1.0),
    (1.7671458676442586, 0.98078528040323043), (1.9634954084936207,
    0.92387953251128674), (2.1598449493429825, 0.83146961230254546),
    (2.3561944901923448, 0.707106781186547...), (2.748893571891069,
    0.38268343236508989), (3.1415926535897931, 1.2246...e-16)]
Got:
    [(-3.1415926535897931, -1.2246467991473532e-16), (-2.748893571891069, 
    -0.38268343236508989), (-2.3561944901923448, -0.70710678118654757), 
    (-2.1598449493429825, -0.83146961230254535), (-1.9634954084936207, 
    -0.92387953251128674), (-1.7671458676442586, -0.98078528040323043), 
    (-1.5707963267948966, -1.0), (-1.3744467859455345, 
    -0.98078528040323043), (-1.1780972450961724, -0.92387953251128674), 
    (-0.98174770424681035, -0.83146961230254524), (-0.78539816339744828, 
    -0.70710678118654746), (-0.39269908169872414, -0.38268343236508978), 
    (0.0, 0.0), (0.39269908169872414, 0.38268343236508978), 
    (0.78539816339744828, 0.70710678118654746), (0.98174770424681035, 
    0.83146961230254524), (1.1780972450961724, 0.92387953251128674), 
    (1.3744467859455345, 0.98078528040323043), (1.5707963267948966, 1.0), 
    (1.7671458676442586, 0.98078528040323043), (1.9634954084936207, 
    0.92387953251128674), (2.1598449493429825, 0.83146961230254535), 
    (2.3561944901923448, 0.70710678118654757), (2.748893571891069, 
    0.38268343236508989), (3.1415926535897931, 1.2246467991473532e-16)]
**********************************************************************
```



---

archive/issue_comments_033134.json:
```json
{
    "body": "<a id='comment:2'></a>\nIn both cases the failure is the following:\n\n```\n    (-2.1598449493429825, -0.83146961230254546), (-1.9634954084936207,\n    (-2.1598449493429825, -0.83146961230254535), (-1.9634954084936207, \n\n    0.92387953251128674), (2.1598449493429825, 0.83146961230254546),\n    0.92387953251128674), (2.1598449493429825, 0.83146961230254535), \n```\nPatch coming up.\n\nCheers,\n\nMichael",
    "created_at": "2009-02-09T10:48:02Z",
    "issue": "https://github.com/sagemath/sage/issues/5209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5209#issuecomment-33134",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:2'></a>
In both cases the failure is the following:

```
    (-2.1598449493429825, -0.83146961230254546), (-1.9634954084936207,
    (-2.1598449493429825, -0.83146961230254535), (-1.9634954084936207, 

    0.92387953251128674), (2.1598449493429825, 0.83146961230254546),
    0.92387953251128674), (2.1598449493429825, 0.83146961230254535), 
```
Patch coming up.

Cheers,

Michael



---

archive/issue_events_032242.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2009-02-09T10:48:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5209",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5209#event-32242"
}
```



---

archive/issue_comments_033135.json:
```json
{
    "body": "<a id='comment:3'></a>\nWith the patch applied:\n\n```\nsage -t -long \"devel/sage/sage/plot/plot.py\"                \n\t [41.5 s]\n```\n\nCheers,\n\nMichael",
    "created_at": "2009-02-09T11:01:36Z",
    "issue": "https://github.com/sagemath/sage/issues/5209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5209#issuecomment-33135",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:3'></a>
With the patch applied:

```
sage -t -long "devel/sage/sage/plot/plot.py"                
	 [41.5 s]
```

Cheers,

Michael



---

archive/attachments_006078.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_5209_numerical_noise.patch",
    "asset_url": "tarball://root/attachments/ticket5209/trac_5209_numerical_noise.patch",
    "created_at": "2009-02-09T14:52:30Z",
    "issue": "https://github.com/sagemath/sage/issues/5209",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket5209/trac_5209_numerical_noise.patch",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```



---

archive/issue_comments_033136.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Attachment:** [trac_5209_numerical_noise.patch](https://github.com/sagemath/sage/files/ticket5209/trac_5209_numerical_noise.patch)\n\nStandard sort of minimal fix for this type of issue; I did not test it directly but it seems clear that this is OK based on other similar problems.  Only affects the doctest.  Positive review.",
    "created_at": "2009-02-09T14:52:30Z",
    "issue": "https://github.com/sagemath/sage/issues/5209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5209#issuecomment-33136",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

<a id='comment:4'></a>
**Attachment:** [trac_5209_numerical_noise.patch](https://github.com/sagemath/sage/files/ticket5209/trac_5209_numerical_noise.patch)

Standard sort of minimal fix for this type of issue; I did not test it directly but it seems clear that this is OK based on other similar problems.  Only affects the doctest.  Positive review.



---

archive/issue_events_032243.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mhampton",
    "created_at": "2009-02-09T14:52:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5209",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5209#event-32243"
}
```



---

archive/issue_events_032244.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mhampton",
    "created_at": "2009-02-09T14:52:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5209",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5209#event-32244"
}
```



---

archive/issue_comments_033137.json:
```json
{
    "body": "<a id='comment:5'></a>\nMerged in Sage 3.3.rc0.\n\nCheers,\n\nMichael",
    "created_at": "2009-02-10T06:42:53Z",
    "issue": "https://github.com/sagemath/sage/issues/5209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5209#issuecomment-33137",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:5'></a>
Merged in Sage 3.3.rc0.

Cheers,

Michael



---

archive/issue_events_032245.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2009-02-10T06:42:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5209",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5209#event-32245"
}
```



---

archive/issue_events_032246.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2009-02-10T06:42:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/5209",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5209#event-32246"
}
```
