# Issue 5982: Can't construct fraction field

archive/issues_005982.json:
```json
{
    "assignees": [],
    "body": "\n```\n----------------------------------------------------------------------\n| Sage Version 3.4.2, Release Date: 2009-05-04                       |\n| Type notebook() for the GUI, and license() for information.        |\n----------------------------------------------------------------------\nsage: R.<x, y> = PolynomialRing(QQ, 2) \nsage: I = (x^2 + y^2 - 1)*R\nsage: Q = R.quotient(I); Q\nQuotient of Multivariate Polynomial Ring in x, y over Rational Field by the ideal (x^2 + y^2 - 1)\nsage: Q.fraction_field()\n---------------------------------------------------------------------------\nNotImplementedError                       Traceback (most recent call last)\n<SNIP>\n```\n\nApply\n\n* [attachment: trac_5982-ncalexan-with-check2.patch](https://github.com/sagemath/sage/files/ticket5982/trac_5982-ncalexan-with-check2.patch.gz)\n\n* [attachment: trac_5982-reviewer.patch](https://github.com/sagemath/sage/files/ticket5982/trac_5982-reviewer.patch.gz)\n\n* [attachment: trac_5982_review2.patch](https://github.com/sagemath/sage/files/ticket5982/trac_5982_review2.patch.gz)\n\nCC:  @malb\n\nComponent: **algebra**\n\nAuthor: **Nick Alexander, Juan M. Bello Rivas**\n\nReviewer: **William Stein, Mike Hansen, Marco Streng**\n\nMerged: **sage-4.7.1.alpha0**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/5982_\n\n",
    "closed_at": "2011-05-03T12:28:22Z",
    "created_at": "2009-05-04T23:19:45Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20algebra",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.7.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Can't construct fraction field",
    "type": "issue",
    "updated_at": "2011-05-03T12:28:22Z",
    "url": "https://github.com/sagemath/sage/issues/5982",
    "user": "https://github.com/jmbr"
}
```

```
----------------------------------------------------------------------
| Sage Version 3.4.2, Release Date: 2009-05-04                       |
| Type notebook() for the GUI, and license() for information.        |
----------------------------------------------------------------------
sage: R.<x, y> = PolynomialRing(QQ, 2) 
sage: I = (x^2 + y^2 - 1)*R
sage: Q = R.quotient(I); Q
Quotient of Multivariate Polynomial Ring in x, y over Rational Field by the ideal (x^2 + y^2 - 1)
sage: Q.fraction_field()
---------------------------------------------------------------------------
NotImplementedError                       Traceback (most recent call last)
<SNIP>
```

Apply

* [attachment: trac_5982-ncalexan-with-check2.patch](https://github.com/sagemath/sage/files/ticket5982/trac_5982-ncalexan-with-check2.patch.gz)

* [attachment: trac_5982-reviewer.patch](https://github.com/sagemath/sage/files/ticket5982/trac_5982-reviewer.patch.gz)

* [attachment: trac_5982_review2.patch](https://github.com/sagemath/sage/files/ticket5982/trac_5982_review2.patch.gz)

CC:  @malb

Component: **algebra**

Author: **Nick Alexander, Juan M. Bello Rivas**

Reviewer: **William Stein, Mike Hansen, Marco Streng**

Merged: **sage-4.7.1.alpha0**

_Issue created by migration from https://trac.sagemath.org/ticket/5982_





---

archive/issue_events_071853.json:
```json
{
    "actor": "https://github.com/jmbr",
    "created_at": "2009-05-04T23:19:45Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "milestone_number": null,
    "milestone_title": "sage-4.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5982#event-71853"
}
```



---

archive/issue_events_071854.json:
```json
{
    "actor": "https://github.com/jmbr",
    "created_at": "2009-05-04T23:19:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "c: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5982#event-71854"
}
```



---

archive/issue_events_071855.json:
```json
{
    "actor": "https://github.com/jmbr",
    "created_at": "2009-05-04T23:19:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5982#event-71855"
}
```



---

archive/issue_events_071856.json:
```json
{
    "actor": "https://github.com/jmbr",
    "created_at": "2009-05-04T23:19:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5982#event-71856"
}
```



---

archive/issue_events_071857.json:
```json
{
    "actor": "https://github.com/jmbr",
    "created_at": "2009-05-04T23:19:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5982#event-71857"
}
```



---

archive/issue_comments_038921.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,15 +1,16 @@\n----\n+\n+```\n+----------------------------------------------------------------------\n | Sage Version 3.4, Release Date: 2009-03-11 | | Type notebook() for\n the GUI, and license() for information.  |\n-\n----\n+----------------------------------------------------------------------\n \n sage: R.<x, y> = PolynomialRing(QQ, 2) sage: I = (x^2 + y^2 - 1)*R\n sage: Q = R.quotient(I) sage: Q Quotient of Multivariate Polynomial\n Ring in x, y over Rational Field by the ideal (x^2 + y^2 - 1) sage:\n Q.fraction_field()\n-\n----\n+---------------------------------------------------------------------------\n NotImplementedError Traceback (most recent call last)\n \n ...\n+```\n``````\n",
    "created_at": "2009-05-04T23:20:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38921",
    "user": "https://github.com/jmbr"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,15 +1,16 @@
----
+
+```
+----------------------------------------------------------------------
 | Sage Version 3.4, Release Date: 2009-03-11 | | Type notebook() for
 the GUI, and license() for information.  |
-
----
+----------------------------------------------------------------------
 
 sage: R.<x, y> = PolynomialRing(QQ, 2) sage: I = (x^2 + y^2 - 1)*R
 sage: Q = R.quotient(I) sage: Q Quotient of Multivariate Polynomial
 Ring in x, y over Rational Field by the ideal (x^2 + y^2 - 1) sage:
 Q.fraction_field()
-
----
+---------------------------------------------------------------------------
 NotImplementedError Traceback (most recent call last)
 
 ...
+```
``````




---

archive/issue_comments_038922.json:
```json
{
    "body": "Attachment: **[sage+multi-polynomial-fraction-fields2.diff.gz](https://github.com/sagemath/sage/files/ticket5982/b022d23c25d2819b7fe1cd9d1b2737e8.gz)**\n\nFix/workaround using Macaulay 2",
    "created_at": "2009-05-04T23:22:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38922",
    "user": "https://github.com/jmbr"
}
```

Attachment: **[sage+multi-polynomial-fraction-fields2.diff.gz](https://github.com/sagemath/sage/files/ticket5982/b022d23c25d2819b7fe1cd9d1b2737e8.gz)**

Fix/workaround using Macaulay 2



---

archive/issue_comments_038923.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\n[with patch, needs review]\n\n```\n----------------------------------------------------------------------\n| Sage Version 3.4, Release Date: 2009-03-11 | | Type notebook() for\nthe GUI, and license() for information.  |\n----------------------------------------------------------------------\n\nsage: R.<x, y> = PolynomialRing(QQ, 2) sage: I = (x^2 + y^2 - 1)*R\nsage: Q = R.quotient(I) sage: Q Quotient of Multivariate Polynomial\nRing in x, y over Rational Field by the ideal (x^2 + y^2 - 1) sage:\nQ.fraction_field()\n---------------------------------------------------------------------------\nNotImplementedError Traceback (most recent call last)\n\n...\n```",
    "created_at": "2009-05-04T23:23:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38923",
    "user": "https://github.com/jmbr"
}
```

<div id="comment:2" align="right">comment:2</div>

[with patch, needs review]

```
----------------------------------------------------------------------
| Sage Version 3.4, Release Date: 2009-03-11 | | Type notebook() for
the GUI, and license() for information.  |
----------------------------------------------------------------------

sage: R.<x, y> = PolynomialRing(QQ, 2) sage: I = (x^2 + y^2 - 1)*R
sage: Q = R.quotient(I) sage: Q Quotient of Multivariate Polynomial
Ring in x, y over Rational Field by the ideal (x^2 + y^2 - 1) sage:
Q.fraction_field()
---------------------------------------------------------------------------
NotImplementedError Traceback (most recent call last)

...
```



---

archive/issue_events_071858.json:
```json
{
    "actor": "https://github.com/aghitza",
    "created_at": "2009-05-05T00:10:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5982#event-71858"
}
```



---

archive/issue_events_071859.json:
```json
{
    "actor": "https://github.com/aghitza",
    "created_at": "2009-05-05T00:10:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5982#event-71859"
}
```



---

archive/issue_events_071860.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-05-05T01:28:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5982#event-71860"
}
```



---

archive/issue_events_071861.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-05-05T01:28:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5982#event-71861"
}
```



---

archive/issue_comments_038924.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nHi,\n\nM2 isn't a default part of Sage, so the doctest must be made optional. I also don't see a reason why this cannot be implemented via libSingular for example, but maybe I am overlooking things.\n\nYou also posted a diff, so please check in the code and post an hg patch to properly preserve credit. \n\nAnd since you are not listed at http://trac.sagemath.org/sage_trac/wiki please add yourself there.\n\nCheers,\n\nMichael",
    "created_at": "2009-05-05T01:28:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38924",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:4" align="right">comment:4</div>

Hi,

M2 isn't a default part of Sage, so the doctest must be made optional. I also don't see a reason why this cannot be implemented via libSingular for example, but maybe I am overlooking things.

You also posted a diff, so please check in the code and post an hg patch to properly preserve credit. 

And since you are not listed at http://trac.sagemath.org/sage_trac/wiki please add yourself there.

Cheers,

Michael



---

archive/issue_comments_038925.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,10 +5,11 @@\n the GUI, and license() for information.  |\n ----------------------------------------------------------------------\n \n-sage: R.<x, y> = PolynomialRing(QQ, 2) sage: I = (x^2 + y^2 - 1)*R\n-sage: Q = R.quotient(I) sage: Q Quotient of Multivariate Polynomial\n-Ring in x, y over Rational Field by the ideal (x^2 + y^2 - 1) sage:\n-Q.fraction_field()\n+sage: R.<x, y> = PolynomialRing(QQ, 2) \n+sage: I = (x^2 + y^2 - 1)*R\n+sage: Q = R.quotient(I) \n+Q Quotient of Multivariate Polynomial Ring in x, y over Rational Field by the ideal (x^2 + y^2 - 1) \n+sage: Q.fraction_field()\n ---------------------------------------------------------------------------\n NotImplementedError Traceback (most recent call last)\n \n``````\n",
    "created_at": "2009-05-05T01:28:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38925",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,10 +5,11 @@
 the GUI, and license() for information.  |
 ----------------------------------------------------------------------
 
-sage: R.<x, y> = PolynomialRing(QQ, 2) sage: I = (x^2 + y^2 - 1)*R
-sage: Q = R.quotient(I) sage: Q Quotient of Multivariate Polynomial
-Ring in x, y over Rational Field by the ideal (x^2 + y^2 - 1) sage:
-Q.fraction_field()
+sage: R.<x, y> = PolynomialRing(QQ, 2) 
+sage: I = (x^2 + y^2 - 1)*R
+sage: Q = R.quotient(I) 
+Q Quotient of Multivariate Polynomial Ring in x, y over Rational Field by the ideal (x^2 + y^2 - 1) 
+sage: Q.fraction_field()
 ---------------------------------------------------------------------------
 NotImplementedError Traceback (most recent call last)
 
``````




---

archive/issue_comments_038926.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,17 +1,15 @@\n \n ```\n ----------------------------------------------------------------------\n-| Sage Version 3.4, Release Date: 2009-03-11 | | Type notebook() for\n-the GUI, and license() for information.  |\n+| Sage Version 3.4.2, Release Date: 2009-05-04                       |\n+| Type notebook() for the GUI, and license() for information.        |\n ----------------------------------------------------------------------\n-\n sage: R.<x, y> = PolynomialRing(QQ, 2) \n sage: I = (x^2 + y^2 - 1)*R\n-sage: Q = R.quotient(I) \n-Q Quotient of Multivariate Polynomial Ring in x, y over Rational Field by the ideal (x^2 + y^2 - 1) \n+sage: Q = R.quotient(I); Q\n+Quotient of Multivariate Polynomial Ring in x, y over Rational Field by the ideal (x^2 + y^2 - 1)\n sage: Q.fraction_field()\n ---------------------------------------------------------------------------\n-NotImplementedError Traceback (most recent call last)\n-\n-...\n+NotImplementedError                       Traceback (most recent call last)\n+<SNIP>\n ```\n``````\n",
    "created_at": "2009-05-05T01:31:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38926",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,17 +1,15 @@
 
 ```
 ----------------------------------------------------------------------
-| Sage Version 3.4, Release Date: 2009-03-11 | | Type notebook() for
-the GUI, and license() for information.  |
+| Sage Version 3.4.2, Release Date: 2009-05-04                       |
+| Type notebook() for the GUI, and license() for information.        |
 ----------------------------------------------------------------------
-
 sage: R.<x, y> = PolynomialRing(QQ, 2) 
 sage: I = (x^2 + y^2 - 1)*R
-sage: Q = R.quotient(I) 
-Q Quotient of Multivariate Polynomial Ring in x, y over Rational Field by the ideal (x^2 + y^2 - 1) 
+sage: Q = R.quotient(I); Q
+Quotient of Multivariate Polynomial Ring in x, y over Rational Field by the ideal (x^2 + y^2 - 1)
 sage: Q.fraction_field()
 ---------------------------------------------------------------------------
-NotImplementedError Traceback (most recent call last)
-
-...
+NotImplementedError                       Traceback (most recent call last)
+<SNIP>
 ```
``````




---

archive/issue_comments_038927.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nHi Michael,\n\nAttached is a Mercurial bundle with the same patch plus the docstring modifications you requested.  I'd like to write a native Sage implementation of this in the future but for now this works well enough for me.\n\nRegards,",
    "created_at": "2009-05-06T16:59:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38927",
    "user": "https://github.com/jmbr"
}
```

<div id="comment:6" align="right">comment:6</div>

Hi Michael,

Attached is a Mercurial bundle with the same patch plus the docstring modifications you requested.  I'd like to write a native Sage implementation of this in the future but for now this works well enough for me.

Regards,



---

archive/issue_comments_038928.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nHi Juan,\n\na patch would have been better, but someone can extra the changeset from the bundle and post the patch.\n\nOne more thing: When you post an updated patch you need to change the summary to read \"needs review\" again.\n\nCheers,\n\nMichael",
    "created_at": "2009-05-06T21:47:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38928",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:7" align="right">comment:7</div>

Hi Juan,

a patch would have been better, but someone can extra the changeset from the bundle and post the patch.

One more thing: When you post an updated patch you need to change the summary to read "needs review" again.

Cheers,

Michael



---

archive/issue_events_071862.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-05-06T21:47:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5982#event-71862"
}
```



---

archive/issue_events_071863.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-05-06T21:47:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5982#event-71863"
}
```



---

archive/issue_comments_038929.json:
```json
{
    "body": "Attachment: **[trac_5982.patch.gz](https://github.com/sagemath/sage/files/ticket5982/trac_5982.patch.gz)**\n\nAttachment: **[trac_5982-ncalexan.patch.gz](https://github.com/sagemath/sage/files/ticket5982/trac_5982-ncalexan.patch.gz)**",
    "created_at": "2009-06-19T22:24:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38929",
    "user": "https://github.com/ncalexan"
}
```

Attachment: **[trac_5982.patch.gz](https://github.com/sagemath/sage/files/ticket5982/trac_5982.patch.gz)**

Attachment: **[trac_5982-ncalexan.patch.gz](https://github.com/sagemath/sage/files/ticket5982/trac_5982-ncalexan.patch.gz)**



---

archive/issue_comments_038930.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\n`trac_5982-ncalexan.patch` replaces all others.  This version doesn't use Macaulay2, but it could be really slow.",
    "created_at": "2009-06-19T22:25:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38930",
    "user": "https://github.com/ncalexan"
}
```

<div id="comment:8" align="right">comment:8</div>

`trac_5982-ncalexan.patch` replaces all others.  This version doesn't use Macaulay2, but it could be really slow.



---

archive/issue_comments_038931.json:
```json
{
    "body": "Author: **Nick Alexander**",
    "created_at": "2009-06-19T22:25:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38931",
    "user": "https://github.com/ncalexan"
}
```

Author: **Nick Alexander**



---

archive/issue_comments_038932.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nWould it be reasonable to have both versions of `is_prime` added, with a flag for which to use (defaulting to `native`, but with `M2` an option)? This way, if there were cases that one cared about but were slow, one could call off to M2 and (hopefully) get an answer back faster ...",
    "created_at": "2009-06-20T21:43:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38932",
    "user": "https://github.com/craigcitro"
}
```

<div id="comment:9" align="right">comment:9</div>

Would it be reasonable to have both versions of `is_prime` added, with a flag for which to use (defaulting to `native`, but with `M2` an option)? This way, if there were cases that one cared about but were slow, one could call off to M2 and (hopefully) get an answer back faster ...



---

archive/issue_comments_038933.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI thought about doing exactly that, but if you're clever enough to know one is better than the other, aren't you clever enough to call `_macaulay2_().isPrime()`?  Also, as far as I can tell, the Macaulay2 algorithm is the same as the Singular.",
    "created_at": "2009-06-21T08:17:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38933",
    "user": "https://github.com/ncalexan"
}
```

<div id="comment:10" align="right">comment:10</div>

I thought about doing exactly that, but if you're clever enough to know one is better than the other, aren't you clever enough to call `_macaulay2_().isPrime()`?  Also, as far as I can tell, the Macaulay2 algorithm is the same as the Singular.



---

archive/issue_comments_038934.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nHi Nick,\n\nCould you point me to the location of Singular's ideal primality testing algorithm?  Thanks",
    "created_at": "2009-06-21T10:20:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38934",
    "user": "https://github.com/jmbr"
}
```

<div id="comment:11" align="right">comment:11</div>

Hi Nick,

Could you point me to the location of Singular's ideal primality testing algorithm?  Thanks



---

archive/issue_comments_038935.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@jmbr](#comment:11):\n> Hi Nick,\n> \n> Could you point me to the location of Singular's ideal primality testing algorithm?  Thanks\n\nAFAICT, Singular does not have a toplevel isprime() (or ismaximal()) function.  Reading some mailing list posts regarding Singular and Macaulay2, I believe both implement the same two algorithms for calculating the complete primary decomposition of an ideal.  I don't understand enough to say definitively and I may be misusing the complete primary decomposition for testing primality.  I was hoping that Martin Albrecht would review and clarify the situation.",
    "created_at": "2009-06-21T18:39:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38935",
    "user": "https://github.com/ncalexan"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@jmbr](#comment:11):
> Hi Nick,
> 
> Could you point me to the location of Singular's ideal primality testing algorithm?  Thanks

AFAICT, Singular does not have a toplevel isprime() (or ismaximal()) function.  Reading some mailing list posts regarding Singular and Macaulay2, I believe both implement the same two algorithms for calculating the complete primary decomposition of an ideal.  I don't understand enough to say definitively and I may be misusing the complete primary decomposition for testing primality.  I was hoping that Martin Albrecht would review and clarify the situation.



---

archive/issue_comments_038936.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThe patch looks good to me, I didn't run doctests though. I can't really clarify the situation any more than what Nick wrote above.",
    "created_at": "2009-06-21T20:36:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38936",
    "user": "https://github.com/malb"
}
```

<div id="comment:13" align="right">comment:13</div>

The patch looks good to me, I didn't run doctests though. I can't really clarify the situation any more than what Nick wrote above.



---

archive/issue_comments_038937.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nAs far as I can recall, Macaulay2 implements the Gianni-Trager-Zacharias algorithm for primality testing instead of relying on primary decomposition.\n\nBest regards",
    "created_at": "2009-06-21T20:53:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38937",
    "user": "https://github.com/jmbr"
}
```

<div id="comment:14" align="right">comment:14</div>

As far as I can recall, Macaulay2 implements the Gianni-Trager-Zacharias algorithm for primality testing instead of relying on primary decomposition.

Best regards



---

archive/issue_comments_038938.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nPositive review modulo fixing this one trivial change to a doctest:\n\n```\nwstein@sage:~/build/sage-4.1$ ./sage -t  devel/sage/sage/rings/quotient_ring.py\nsage -t  \"devel/sage/sage/rings/quotient_ring.py\"           \n**********************************************************************\nFile \"/scratch/wstein/build/sage-4.1/devel/sage/sage/rings/quotient_ring.py\", line 442:\n    sage: Q.is_integral_domain()\nExpected:\n    Traceback (most recent call last):\n    ...\n    NotImplementedError\nGot:\n    Traceback (most recent call last):\n      File \"/scratch/wstein/build/sage-4.1/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/scratch/wstein/build/sage-4.1/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/scratch/wstein/build/sage-4.1/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_13[7]>\", line 1, in <module>\n        Q.is_integral_domain()###line 442:\n    sage: Q.is_integral_domain()\n      File \"/scratch/wstein/build/sage-4.1/local/lib/python/site-packages/sage/rings/quotient_ring.py\", line 447, in is_integral_domain\n        return self.defining_ideal().is_prime()\n      File \"/scratch/wstein/build/sage-4.1/local/lib/python/site-packages/sage/rings/polynomial/multi_polynomial_ideal.py\", line 854, in is_prime\n        CPD = self.complete_primary_decomposition(**kwds)\n      File \"/scratch/wstein/build/sage-4.1/local/lib/python/site-packages/sage/rings/polynomial/multi_polynomial_ideal.py\", line 401, in __call__\n        raise ValueError(\"Coefficient ring must be a field for function '%s'.\"%(self.f.__name__))\n    ValueError: Coefficient ring must be a field for function 'complete_primary_decomposition'.\n**********************************************************************\n1 items had failures:\n   1 of   8 in __main__.example_13\n***Test Failed*** 1 failures.\nFor whitespace errors, see the file /scratch/wstein/build/sage-4.1/tmp/.doctest_quotient_ring.py\n         [1.8 s]\nexit code: 1024\n \n----------------------------------------------------------------------\nThe following tests failed:\n\n\n        sage -t  \"devel/sage/sage/rings/quotient_ring.py\"\nTotal time for all tests: 1.8 seconds\nwstein@sage:~/build/sage-4.1$ \n```",
    "created_at": "2009-07-21T04:51:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38938",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:15" align="right">comment:15</div>

Positive review modulo fixing this one trivial change to a doctest:

```
wstein@sage:~/build/sage-4.1$ ./sage -t  devel/sage/sage/rings/quotient_ring.py
sage -t  "devel/sage/sage/rings/quotient_ring.py"           
**********************************************************************
File "/scratch/wstein/build/sage-4.1/devel/sage/sage/rings/quotient_ring.py", line 442:
    sage: Q.is_integral_domain()
Expected:
    Traceback (most recent call last):
    ...
    NotImplementedError
Got:
    Traceback (most recent call last):
      File "/scratch/wstein/build/sage-4.1/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/scratch/wstein/build/sage-4.1/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/scratch/wstein/build/sage-4.1/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_13[7]>", line 1, in <module>
        Q.is_integral_domain()###line 442:
    sage: Q.is_integral_domain()
      File "/scratch/wstein/build/sage-4.1/local/lib/python/site-packages/sage/rings/quotient_ring.py", line 447, in is_integral_domain
        return self.defining_ideal().is_prime()
      File "/scratch/wstein/build/sage-4.1/local/lib/python/site-packages/sage/rings/polynomial/multi_polynomial_ideal.py", line 854, in is_prime
        CPD = self.complete_primary_decomposition(**kwds)
      File "/scratch/wstein/build/sage-4.1/local/lib/python/site-packages/sage/rings/polynomial/multi_polynomial_ideal.py", line 401, in __call__
        raise ValueError("Coefficient ring must be a field for function '%s'."%(self.f.__name__))
    ValueError: Coefficient ring must be a field for function 'complete_primary_decomposition'.
**********************************************************************
1 items had failures:
   1 of   8 in __main__.example_13
***Test Failed*** 1 failures.
For whitespace errors, see the file /scratch/wstein/build/sage-4.1/tmp/.doctest_quotient_ring.py
         [1.8 s]
exit code: 1024
 
----------------------------------------------------------------------
The following tests failed:


        sage -t  "devel/sage/sage/rings/quotient_ring.py"
Total time for all tests: 1.8 seconds
wstein@sage:~/build/sage-4.1$ 
```



---

archive/issue_events_071864.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-07-21T04:51:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5982#event-71864"
}
```



---

archive/issue_events_071865.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-07-21T04:51:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5982#event-71865"
}
```



---

archive/issue_events_071866.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-07-26T21:51:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5982#event-71866"
}
```



---

archive/issue_events_071867.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-07-26T21:51:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5982#event-71867"
}
```



---

archive/issue_comments_038939.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nAttachment: **[trac_5982-ncalexan-with-check.patch.gz](https://github.com/sagemath/sage/files/ticket5982/trac_5982-ncalexan-with-check.patch.gz)**\n\nMinh (or whoever merges this),\n\nApply *only* trac_5982-ncalexan-with-check.patch.  Note that you'll have to check it in as Nick Alexander and \"Juan M. Bello Rivas <jmbr@superadditive.com>\" when applying the patch, since Juan didn't use HG evidently.",
    "created_at": "2009-07-26T21:51:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38939",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:17" align="right">comment:17</div>

Attachment: **[trac_5982-ncalexan-with-check.patch.gz](https://github.com/sagemath/sage/files/ticket5982/trac_5982-ncalexan-with-check.patch.gz)**

Minh (or whoever merges this),

Apply *only* trac_5982-ncalexan-with-check.patch.  Note that you'll have to check it in as Nick Alexander and "Juan M. Bello Rivas <jmbr@superadditive.com>" when applying the patch, since Juan didn't use HG evidently.



---

archive/issue_comments_038940.json:
```json
{
    "body": "Attachment: **[trac_5982-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket5982/trac_5982-reviewer.patch.gz)**\n\nreviewer patch: fix ReST typos",
    "created_at": "2009-08-23T10:53:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38940",
    "user": "https://github.com/sagetrac-mvngu"
}
```

Attachment: **[trac_5982-reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket5982/trac_5982-reviewer.patch.gz)**

reviewer patch: fix ReST typos



---

archive/issue_comments_038941.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nThe reviewer patch `trac_5982-reviewer.patch` fixes some ReST typos in `trac_5982-ncalexan-with-check.patch` so that the reference manual builds without warnings. After applying patches in this order:\n\n1. `trac_5982-ncalexan-with-check.patch`\n2. `trac_5982-reviewer.patch`\n \nI get the following doctest failure:\n\n```\nsage -t -long devel/sage-main/sage/schemes/hyperelliptic_curves/jacobian_morphism.py\n**********************************************************************\nFile \"/scratch/mvngu/release/sage-4.1.1/devel/sage-main/sage/schemes/hyperelliptic_curves/jacobian_morphism.py\", line 297:\n    sage: J = H.jacobian()(F); J\nExpected:\n    verbose 0 (919: multi_polynomial_ideal.py, dimension) Warning: falling back to very slow toy implementation.\n    Set of points of Jacobian of Hyperelliptic Curve over Finite Field of size 1000000000000000000000000000057 defined by y^2 + 2*x*y = x^7 + x^2 + 1 defined over Finite Field of size 1000000000000000000000000000057\nGot:\n    verbose 0 (964: multi_polynomial_ideal.py, dimension) Warning: falling back to very slow toy implementation.\n    Set of points of Jacobian of Hyperelliptic Curve over Finite Field of size 1000000000000000000000000000057 defined by y^2 + 2*x*y = x^7 + x^2 + 1 defined over Finite Field of size 1000000000000000000000000000057\n**********************************************************************\n1 items had failures:\n   1 of  20 in __main__.example_4\n***Test Failed*** 1 failures.\nFor whitespace errors, see the file /scratch/mvngu/release/sage-4.1.1/tmp/.doctest_jacobian_morphism.py\n\t [3.1 s]\n```",
    "created_at": "2009-08-23T11:12:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38941",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<div id="comment:18" align="right">comment:18</div>

The reviewer patch `trac_5982-reviewer.patch` fixes some ReST typos in `trac_5982-ncalexan-with-check.patch` so that the reference manual builds without warnings. After applying patches in this order:

1. `trac_5982-ncalexan-with-check.patch`
2. `trac_5982-reviewer.patch`
 
I get the following doctest failure:

```
sage -t -long devel/sage-main/sage/schemes/hyperelliptic_curves/jacobian_morphism.py
**********************************************************************
File "/scratch/mvngu/release/sage-4.1.1/devel/sage-main/sage/schemes/hyperelliptic_curves/jacobian_morphism.py", line 297:
    sage: J = H.jacobian()(F); J
Expected:
    verbose 0 (919: multi_polynomial_ideal.py, dimension) Warning: falling back to very slow toy implementation.
    Set of points of Jacobian of Hyperelliptic Curve over Finite Field of size 1000000000000000000000000000057 defined by y^2 + 2*x*y = x^7 + x^2 + 1 defined over Finite Field of size 1000000000000000000000000000057
Got:
    verbose 0 (964: multi_polynomial_ideal.py, dimension) Warning: falling back to very slow toy implementation.
    Set of points of Jacobian of Hyperelliptic Curve over Finite Field of size 1000000000000000000000000000057 defined by y^2 + 2*x*y = x^7 + x^2 + 1 defined over Finite Field of size 1000000000000000000000000000057
**********************************************************************
1 items had failures:
   1 of  20 in __main__.example_4
***Test Failed*** 1 failures.
For whitespace errors, see the file /scratch/mvngu/release/sage-4.1.1/tmp/.doctest_jacobian_morphism.py
	 [3.1 s]
```



---

archive/issue_events_071868.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2009-08-23T11:46:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5982#event-71868"
}
```



---

archive/issue_events_071869.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2009-08-23T11:46:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5982#event-71869"
}
```



---

archive/issue_comments_038942.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nIt looks like the difference is just the line number of the doctest...",
    "created_at": "2009-09-29T07:42:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38942",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:20" align="right">comment:20</div>

It looks like the difference is just the line number of the doctest...



---

archive/issue_comments_038943.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nAll tests pass for me when I tried the two patches.  I'm giving this a positive review again.  The doctest in question has \"...\" where the 919/964 are.",
    "created_at": "2009-10-05T19:06:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38943",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:21" align="right">comment:21</div>

All tests pass for me when I tried the two patches.  I'm giving this a positive review again.  The doctest in question has "..." where the 919/964 are.



---

archive/issue_comments_038944.json:
```json
{
    "body": "Reviewer: **William Stein, Mike Hansen**",
    "created_at": "2009-10-05T19:06:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38944",
    "user": "https://github.com/mwhansen"
}
```

Reviewer: **William Stein, Mike Hansen**



---

archive/issue_events_071870.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-10-05T19:06:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5982#event-71870"
}
```



---

archive/issue_events_071871.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-10-05T19:06:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5982#event-71871"
}
```



---

archive/issue_comments_038945.json:
```json
{
    "body": "Changed author from **Nick Alexander** to **Nick Alexander, Juan M. Bello Rivas**",
    "created_at": "2009-10-05T19:06:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38945",
    "user": "https://github.com/mwhansen"
}
```

Changed author from **Nick Alexander** to **Nick Alexander, Juan M. Bello Rivas**



---

archive/issue_events_071872.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-10-16T08:40:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5982#event-71872"
}
```



---

archive/issue_events_071873.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-10-16T08:40:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5982#event-71873"
}
```



---

archive/issue_comments_038946.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nIn 4.1.2, I get a number of failures arising from NotImplementedErrors in is_integral_domain.",
    "created_at": "2009-10-16T08:40:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38946",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:22" align="right">comment:22</div>

In 4.1.2, I get a number of failures arising from NotImplementedErrors in is_integral_domain.



---

archive/issue_events_071874.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2011-01-23T18:36:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5982#event-71874"
}
```



---

archive/issue_events_071875.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2011-01-23T18:36:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5982#event-71875"
}
```



---

archive/issue_comments_038947.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nCuriously, all tests in sage/rings and sage/schemes pass for me under sage 4.6.2.alpha1. I'm going to reinstate the \"needs review\", since I can't replicate mhansen's problem. We'll see if patchbot agrees :-)\n\nApply trac_5982-ncalexan-with-check.patch, trac_5982-reviewer.patch",
    "created_at": "2011-01-23T18:36:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38947",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:24" align="right">comment:24</div>

Curiously, all tests in sage/rings and sage/schemes pass for me under sage 4.6.2.alpha1. I'm going to reinstate the "needs review", since I can't replicate mhansen's problem. We'll see if patchbot agrees :-)

Apply trac_5982-ncalexan-with-check.patch, trac_5982-reviewer.patch



---

archive/issue_comments_038948.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nPatchbot seems to be happy with it, but a full ptestlong run on my 4.6.2.alpha1 build revealed a couple of failures: `sage/algebras/quatalg/quaternion_algebra.py` and `sage/matrix/tests.py`. Both of these are to do with the symbolic ring, which (rather oddly) knows it's a field but isn't sure if it's an integral domain. These can be squashed by simply moving the field check to before the integral domain check.",
    "created_at": "2011-01-23T19:30:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38948",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:25" align="right">comment:25</div>

Patchbot seems to be happy with it, but a full ptestlong run on my 4.6.2.alpha1 build revealed a couple of failures: `sage/algebras/quatalg/quaternion_algebra.py` and `sage/matrix/tests.py`. Both of these are to do with the symbolic ring, which (rather oddly) knows it's a field but isn't sure if it's an integral domain. These can be squashed by simply moving the field check to before the integral domain check.



---

archive/issue_comments_038949.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nAttachment: **[trac_5982_review2.patch.gz](https://github.com/sagemath/sage/files/ticket5982/trac_5982_review2.patch.gz)**\n\nWhy is this\n\n```\n        The following is Trac #5982.  Note that the quotient ring \n        is not recognized as being a field at this time, so the \n        fraction field is not the quotient ring itself:: \n \n            sage: Q = R.quotient(I); Q \n            Quotient of Multivariate Polynomial Ring in x, y over Rational Field by the ideal (x^2 - y^2 - 1) \n            sage: Q.fraction_field() \n            Fraction Field of Quotient of Multivariate Polynomial Ring in x, y over Rational Field by the ideal (x^2 - y^2 - 1) \n```\npart of the documentation of `is_prime` and not of `fraction_field`?\n\nAll tests pass with these patches on sage-4.6.2.alpha4. Patches fix the problem in the ticket description, and all changes look good.",
    "created_at": "2011-02-14T09:41:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38949",
    "user": "https://github.com/mstreng"
}
```

<div id="comment:26" align="right">comment:26</div>

Attachment: **[trac_5982_review2.patch.gz](https://github.com/sagemath/sage/files/ticket5982/trac_5982_review2.patch.gz)**

Why is this

```
        The following is Trac #5982.  Note that the quotient ring 
        is not recognized as being a field at this time, so the 
        fraction field is not the quotient ring itself:: 
 
            sage: Q = R.quotient(I); Q 
            Quotient of Multivariate Polynomial Ring in x, y over Rational Field by the ideal (x^2 - y^2 - 1) 
            sage: Q.fraction_field() 
            Fraction Field of Quotient of Multivariate Polynomial Ring in x, y over Rational Field by the ideal (x^2 - y^2 - 1) 
```
part of the documentation of `is_prime` and not of `fraction_field`?

All tests pass with these patches on sage-4.6.2.alpha4. Patches fix the problem in the ticket description, and all changes look good.



---

archive/issue_comments_038950.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,3 +13,11 @@\n NotImplementedError                       Traceback (most recent call last)\n <SNIP>\n ```\n+\n+Apply\n+\n+* [attachment: trac_5982-ncalexan-with-check.patch](https://github.com/sagemath/sage/files/ticket5982/trac_5982-ncalexan-with-check.patch.gz)\n+\n+* [attachment: trac_5982-reviewer.patch](https://github.com/sagemath/sage/files/ticket5982/trac_5982-reviewer.patch.gz)\n+\n+* [attachment: trac_5982_review2.patch](https://github.com/sagemath/sage/files/ticket5982/trac_5982_review2.patch.gz)\n``````\n",
    "created_at": "2011-02-14T09:41:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38950",
    "user": "https://github.com/mstreng"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,3 +13,11 @@
 NotImplementedError                       Traceback (most recent call last)
 <SNIP>
 ```
+
+Apply
+
+* [attachment: trac_5982-ncalexan-with-check.patch](https://github.com/sagemath/sage/files/ticket5982/trac_5982-ncalexan-with-check.patch.gz)
+
+* [attachment: trac_5982-reviewer.patch](https://github.com/sagemath/sage/files/ticket5982/trac_5982-reviewer.patch.gz)
+
+* [attachment: trac_5982_review2.patch](https://github.com/sagemath/sage/files/ticket5982/trac_5982_review2.patch.gz)
``````




---

archive/issue_comments_038951.json:
```json
{
    "body": "Changed reviewer from **William Stein, Mike Hansen** to **William Stein, Mike Hansen, Marco Streng**",
    "created_at": "2011-02-14T09:41:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38951",
    "user": "https://github.com/mstreng"
}
```

Changed reviewer from **William Stein, Mike Hansen** to **William Stein, Mike Hansen, Marco Streng**



---

archive/issue_comments_038952.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nMarco, did you forget to mark this as \"positive review\"?",
    "created_at": "2011-04-22T15:20:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38952",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:27" align="right">comment:27</div>

Marco, did you forget to mark this as "positive review"?



---

archive/issue_comments_038953.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@JohnCremona](#comment:27):\n> Marco, did you forget to mark this as \"positive review\"?\n\nActually, I was waiting for an answer to my question first, and then forgot all about the ticket.\n\nIf I recall correctly, the question was not that important.",
    "created_at": "2011-04-22T15:45:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38953",
    "user": "https://github.com/mstreng"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@JohnCremona](#comment:27):
> Marco, did you forget to mark this as "positive review"?

Actually, I was waiting for an answer to my question first, and then forgot all about the ticket.

If I recall correctly, the question was not that important.



---

archive/issue_events_071876.json:
```json
{
    "actor": "https://github.com/mstreng",
    "created_at": "2011-04-22T15:45:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5982#event-71876"
}
```



---

archive/issue_events_071877.json:
```json
{
    "actor": "https://github.com/mstreng",
    "created_at": "2011-04-22T15:45:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5982#event-71877"
}
```



---

archive/issue_events_071878.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-22T15:51:45Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "milestone_number": null,
    "milestone_title": "sage-4.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5982#event-71878"
}
```



---

archive/issue_events_071879.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-22T15:51:45Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "milestone_number": null,
    "milestone_title": "sage-4.7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5982#event-71879"
}
```



---

archive/issue_comments_038954.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\n[attachment: trac_5982-ncalexan-with-check.patch](https://github.com/sagemath/sage/files/ticket5982/trac_5982-ncalexan-with-check.patch.gz) is not a proper `hg` changeset.  Patches should be made using `hg export tip` and not `hg diff`.",
    "created_at": "2011-04-25T13:18:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38954",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:30" align="right">comment:30</div>

[attachment: trac_5982-ncalexan-with-check.patch](https://github.com/sagemath/sage/files/ticket5982/trac_5982-ncalexan-with-check.patch.gz) is not a proper `hg` changeset.  Patches should be made using `hg export tip` and not `hg diff`.



---

archive/issue_events_071880.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-25T13:18:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5982#event-71880"
}
```



---

archive/issue_events_071881.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-25T13:18:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5982#event-71881"
}
```



---

archive/issue_comments_038955.json:
```json
{
    "body": "proper hg changeset version of trac_5982-ncalexan-with-check.patch",
    "created_at": "2011-04-28T10:38:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38955",
    "user": "https://github.com/mstreng"
}
```

proper hg changeset version of trac_5982-ncalexan-with-check.patch



---

archive/issue_events_071882.json:
```json
{
    "actor": "https://github.com/mstreng",
    "created_at": "2011-04-28T10:41:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5982#event-71882"
}
```



---

archive/issue_events_071883.json:
```json
{
    "actor": "https://github.com/mstreng",
    "created_at": "2011-04-28T10:41:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5982#event-71883"
}
```



---

archive/issue_comments_038956.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -16,7 +16,7 @@\n \n Apply\n \n-* [attachment: trac_5982-ncalexan-with-check.patch](https://github.com/sagemath/sage/files/ticket5982/trac_5982-ncalexan-with-check.patch.gz)\n+* [attachment: trac_5982-ncalexan-with-check2.patch](https://github.com/sagemath/sage/files/ticket5982/trac_5982-ncalexan-with-check2.patch.gz)\n \n * [attachment: trac_5982-reviewer.patch](https://github.com/sagemath/sage/files/ticket5982/trac_5982-reviewer.patch.gz)\n \n``````\n",
    "created_at": "2011-04-28T10:41:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38956",
    "user": "https://github.com/mstreng"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -16,7 +16,7 @@
 
 Apply
 
-* [attachment: trac_5982-ncalexan-with-check.patch](https://github.com/sagemath/sage/files/ticket5982/trac_5982-ncalexan-with-check.patch.gz)
+* [attachment: trac_5982-ncalexan-with-check2.patch](https://github.com/sagemath/sage/files/ticket5982/trac_5982-ncalexan-with-check2.patch.gz)
 
 * [attachment: trac_5982-reviewer.patch](https://github.com/sagemath/sage/files/ticket5982/trac_5982-reviewer.patch.gz)
 
``````




---

archive/issue_comments_038957.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nAttachment: **[trac_5982-ncalexan-with-check2.patch.gz](https://github.com/sagemath/sage/files/ticket5982/trac_5982-ncalexan-with-check2.patch.gz)**\n\nI made that patch into a proper hg changeset. All tests still pass, and as the new patch does exactly the same as the old one, I put it back to positive_review.\n\n(apply [attachment: trac_5982-ncalexan-with-check2.patch](https://github.com/sagemath/sage/files/ticket5982/trac_5982-ncalexan-with-check2.patch.gz), [attachment: trac_5982-reviewer.patch](https://github.com/sagemath/sage/files/ticket5982/trac_5982-reviewer.patch.gz), [attachment: trac_5982_review2.patch](https://github.com/sagemath/sage/files/ticket5982/trac_5982_review2.patch.gz))",
    "created_at": "2011-04-28T10:41:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38957",
    "user": "https://github.com/mstreng"
}
```

<div id="comment:31" align="right">comment:31</div>

Attachment: **[trac_5982-ncalexan-with-check2.patch.gz](https://github.com/sagemath/sage/files/ticket5982/trac_5982-ncalexan-with-check2.patch.gz)**

I made that patch into a proper hg changeset. All tests still pass, and as the new patch does exactly the same as the old one, I put it back to positive_review.

(apply [attachment: trac_5982-ncalexan-with-check2.patch](https://github.com/sagemath/sage/files/ticket5982/trac_5982-ncalexan-with-check2.patch.gz), [attachment: trac_5982-reviewer.patch](https://github.com/sagemath/sage/files/ticket5982/trac_5982-reviewer.patch.gz), [attachment: trac_5982_review2.patch](https://github.com/sagemath/sage/files/ticket5982/trac_5982_review2.patch.gz))



---

archive/issue_comments_038958.json:
```json
{
    "body": "Attachment: **[patches.diff.gz](https://github.com/sagemath/sage/files/ticket5982/patches.diff.gz)**\n\nthe difference between trac_5982-ncalexan-with-check.patch and trac_5982-ncalexan-with-check2.patch",
    "created_at": "2011-04-28T10:46:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38958",
    "user": "https://github.com/mstreng"
}
```

Attachment: **[patches.diff.gz](https://github.com/sagemath/sage/files/ticket5982/patches.diff.gz)**

the difference between trac_5982-ncalexan-with-check.patch and trac_5982-ncalexan-with-check2.patch



---

archive/issue_comments_038959.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\n(apply trac_5982-ncalexan-with-check2.patch, trac_5982-reviewer.patch, trac_5982_review2.patch)",
    "created_at": "2011-04-28T10:47:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38959",
    "user": "https://github.com/mstreng"
}
```

<div id="comment:32" align="right">comment:32</div>

(apply trac_5982-ncalexan-with-check2.patch, trac_5982-reviewer.patch, trac_5982_review2.patch)



---

archive/issue_comments_038960.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\n(apply trac_5982-ncalexan-with-check2.patch, trac_5982-reviewer.patch, trac_5982_review2.patch )",
    "created_at": "2011-04-28T10:50:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38960",
    "user": "https://github.com/mstreng"
}
```

<div id="comment:33" align="right">comment:33</div>

(apply trac_5982-ncalexan-with-check2.patch, trac_5982-reviewer.patch, trac_5982_review2.patch )



---

archive/issue_events_071884.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-05-03T12:28:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5982#event-71884"
}
```



---

archive/issue_events_071885.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-05-03T12:28:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/5982#event-71885"
}
```



---

archive/issue_comments_038961.json:
```json
{
    "body": "Merged: **sage-4.7.1.alpha0**",
    "created_at": "2011-05-03T12:28:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/5982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/5982#issuecomment-38961",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.7.1.alpha0**
