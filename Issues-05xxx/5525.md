# Issue 5525: fix bug in intersection of ZZ-modules

archive/issues_005525.json:
```json
{
    "body": "\n```\nsage: A = (QQ^1).span([[1/3]],ZZ); A\nFree module of degree 1 and rank 1 over Integer Ring\nEchelon basis matrix:\n[1/3]\nsage: B = (QQ^1).span([[1]],ZZ); B\nFree module of degree 1 and rank 1 over Integer Ring\nEchelon basis matrix:\n[1]\nsage: A.intersection(B)\nFree module of degree 1 and rank 1 over Integer Ring\nEchelon basis matrix:\n[1/3]\n```\n\n**Assignee:** @malb\n\nIssue created by migration from https://trac.sagemath.org/ticket/5525\n\n",
    "closed_at": "2009-03-31T08:45:39Z",
    "created_at": "2009-03-15T07:37:43Z",
    "labels": [
        "component: commutative algebra",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-3.4.1",
    "title": "fix bug in intersection of ZZ-modules",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/5525",
    "user": "https://github.com/williamstein"
}
```

```
sage: A = (QQ^1).span([[1/3]],ZZ); A
Free module of degree 1 and rank 1 over Integer Ring
Echelon basis matrix:
[1/3]
sage: B = (QQ^1).span([[1]],ZZ); B
Free module of degree 1 and rank 1 over Integer Ring
Echelon basis matrix:
[1]
sage: A.intersection(B)
Free module of degree 1 and rank 1 over Integer Ring
Echelon basis matrix:
[1/3]
```

**Assignee:** @malb

Issue created by migration from https://trac.sagemath.org/ticket/5525





---

archive/attachments_006269.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_5525.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5525/trac_5525.patch",
    "created_at": "2009-03-15T08:22:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5525",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/williamstein"
}
```



---

archive/issue_comments_036721.json:
```json
{
    "body": "<a id='comment:1'></a>\n",
    "created_at": "2009-03-15T08:22:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5525#issuecomment-36721",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:1'></a>




---

archive/issue_events_035643.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-03-15T08:22:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5525",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5525#event-35643"
}
```



---

archive/issue_events_035644.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2009-03-16T23:46:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5525",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5525#event-35644"
}
```



---

archive/issue_events_035645.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2009-03-16T23:46:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5525",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5525#event-35645"
}
```



---

archive/issue_events_035646.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2009-03-23T18:57:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5525",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5525#event-35646"
}
```



---

archive/issue_events_035647.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2009-03-23T18:57:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5525",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5525#event-35647"
}
```



---

archive/issue_comments_036722.json:
```json
{
    "body": "<a id='comment:3'></a>\nThis patch causes a massive number of failures:\n\n```\nThe following tests failed:\n\n        sage -t -long devel/sage/sage/modular/abvar/homspace.py # 49 doctests failed\n        sage -t -long devel/sage/sage/modular/abvar/abvar.py # 292 doctests failed\n        sage -t -long devel/sage/sage/matrix/matrix_integer_dense.pyx # 2 doctests failed\n        sage -t -long devel/sage/sage/schemes/elliptic_curves/padics.py # 7 doctests failed\n        sage -t -long devel/sage/doc/en/bordeaux_2008/elliptic_curves.rst # 3 doctests failed\n        sage -t -long devel/sage/sage/schemes/elliptic_curves/padic_lseries.py # 22 doctests failed\n        sage -t -long devel/sage/sage/schemes/elliptic_curves/sha_tate.py # 12 doctests failed\n        sage -t -long devel/sage/sage/modular/modform/element.py # 29 doctests failed\n        sage -t -long devel/sage/sage/modular/modsym/space.py # 41 doctests failed\n        sage -t -long devel/sage/sage/modular/abvar/morphism.py # 86 doctests failed\n        sage -t -long devel/sage/sage/modular/abvar/torsion_subgroup.py # 22 doctests failed\n        sage -t -long devel/sage/sage/modular/abvar/finite_subgroup.py # 99 doctests failed\n        sage -t -long devel/sage/sage/modular/modsym/subspace.py # 10 doctests failed\n        sage -t -long devel/sage/sage/modular/modform/space.py # 2 doctests failed\n        sage -t -long devel/sage/sage/modular/modsym/ambient.py # 18 doctests failed\n        sage -t -long devel/sage/sage/modular/modsym/tests.py # 3 doctests failed\n        sage -t -long devel/sage/doc/en/bordeaux_2008/modabvar.rst # 11 doctests failed\n        sage -t -long devel/sage/sage/modular/abvar/abvar_ambient_jacobian.py # 13 doctests failed\n        sage -t -long devel/sage/sage/modular/hecke/submodule.py # 20 doctests failed\n        sage -t -long devel/sage/sage/modular/hecke/module.py # 26 doctests failed\n        sage -t -long devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 2 doctests failed\n        sage -t -long devel/sage/doc/fr/tutorial/tour_advanced.rst # 1 doctests failed\n        sage -t -long devel/sage/doc/en/tutorial/tour_advanced.rst # 1 doctests failed\n        sage -t -long devel/sage/sage/modular/abvar/abvar_newform.py # 8 doctests failed\n        sage -t -long devel/sage/sage/tests/book_stein_modform.py # 7 doctests failed\n        sage -t -long devel/sage/sage/modular/abvar/cuspidal_subgroup.py # 38 doctests failed\n        sage -t -long devel/sage/sage/modular/dims.py # 3 doctests failed\n        sage -t -long devel/sage/sage/modular/modform/constructor.py # 1 doctests failed\n        sage -t -long devel/sage/sage/server/notebook/twist.py # 2 doctests failed\n        sage -t -long devel/sage/sage/structure/coerce.pyx # 5 doctests failed\n        sage -t -long devel/sage/sage/modular/hecke/ambient_module.py # 12 doctests failed\n        sage -t -long devel/sage/sage/structure/factorization.py # 5 doctests failed\n        sage -t -long devel/sage/sage/schemes/elliptic_curves/ell_modular_symbols.py # 1 doctests failed\n        sage -t -long devel/sage/sage/modular/abvar/lseries.py # 22 doctests failed\n        sage -t -long devel/sage/doc/en/bordeaux_2008/modular_symbols.rst # 1 doctests failed\n        sage -t -long devel/sage/sage/modular/hecke/hecke_operator.py # 2 doctests failed\n        sage -t -long devel/sage/sage/modular/hecke/degenmap.py # 10 doctests failed\n```\n\nCheers,\n\nMichael",
    "created_at": "2009-03-23T18:57:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5525#issuecomment-36722",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:3'></a>
This patch causes a massive number of failures:

```
The following tests failed:

        sage -t -long devel/sage/sage/modular/abvar/homspace.py # 49 doctests failed
        sage -t -long devel/sage/sage/modular/abvar/abvar.py # 292 doctests failed
        sage -t -long devel/sage/sage/matrix/matrix_integer_dense.pyx # 2 doctests failed
        sage -t -long devel/sage/sage/schemes/elliptic_curves/padics.py # 7 doctests failed
        sage -t -long devel/sage/doc/en/bordeaux_2008/elliptic_curves.rst # 3 doctests failed
        sage -t -long devel/sage/sage/schemes/elliptic_curves/padic_lseries.py # 22 doctests failed
        sage -t -long devel/sage/sage/schemes/elliptic_curves/sha_tate.py # 12 doctests failed
        sage -t -long devel/sage/sage/modular/modform/element.py # 29 doctests failed
        sage -t -long devel/sage/sage/modular/modsym/space.py # 41 doctests failed
        sage -t -long devel/sage/sage/modular/abvar/morphism.py # 86 doctests failed
        sage -t -long devel/sage/sage/modular/abvar/torsion_subgroup.py # 22 doctests failed
        sage -t -long devel/sage/sage/modular/abvar/finite_subgroup.py # 99 doctests failed
        sage -t -long devel/sage/sage/modular/modsym/subspace.py # 10 doctests failed
        sage -t -long devel/sage/sage/modular/modform/space.py # 2 doctests failed
        sage -t -long devel/sage/sage/modular/modsym/ambient.py # 18 doctests failed
        sage -t -long devel/sage/sage/modular/modsym/tests.py # 3 doctests failed
        sage -t -long devel/sage/doc/en/bordeaux_2008/modabvar.rst # 11 doctests failed
        sage -t -long devel/sage/sage/modular/abvar/abvar_ambient_jacobian.py # 13 doctests failed
        sage -t -long devel/sage/sage/modular/hecke/submodule.py # 20 doctests failed
        sage -t -long devel/sage/sage/modular/hecke/module.py # 26 doctests failed
        sage -t -long devel/sage/sage/schemes/elliptic_curves/ell_rational_field.py # 2 doctests failed
        sage -t -long devel/sage/doc/fr/tutorial/tour_advanced.rst # 1 doctests failed
        sage -t -long devel/sage/doc/en/tutorial/tour_advanced.rst # 1 doctests failed
        sage -t -long devel/sage/sage/modular/abvar/abvar_newform.py # 8 doctests failed
        sage -t -long devel/sage/sage/tests/book_stein_modform.py # 7 doctests failed
        sage -t -long devel/sage/sage/modular/abvar/cuspidal_subgroup.py # 38 doctests failed
        sage -t -long devel/sage/sage/modular/dims.py # 3 doctests failed
        sage -t -long devel/sage/sage/modular/modform/constructor.py # 1 doctests failed
        sage -t -long devel/sage/sage/server/notebook/twist.py # 2 doctests failed
        sage -t -long devel/sage/sage/structure/coerce.pyx # 5 doctests failed
        sage -t -long devel/sage/sage/modular/hecke/ambient_module.py # 12 doctests failed
        sage -t -long devel/sage/sage/structure/factorization.py # 5 doctests failed
        sage -t -long devel/sage/sage/schemes/elliptic_curves/ell_modular_symbols.py # 1 doctests failed
        sage -t -long devel/sage/sage/modular/abvar/lseries.py # 22 doctests failed
        sage -t -long devel/sage/doc/en/bordeaux_2008/modular_symbols.rst # 1 doctests failed
        sage -t -long devel/sage/sage/modular/hecke/hecke_operator.py # 2 doctests failed
        sage -t -long devel/sage/sage/modular/hecke/degenmap.py # 10 doctests failed
```

Cheers,

Michael



---

archive/issue_comments_036723.json:
```json
{
    "body": "<a id='comment:4'></a>\nThis has been fixed via the patch at #5520.\n\nCheers,\n\nMichael",
    "created_at": "2009-03-31T08:45:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5525#issuecomment-36723",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:4'></a>
This has been fixed via the patch at #5520.

Cheers,

Michael



---

archive/issue_events_035648.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2009-03-31T08:45:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5525",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5525#event-35648"
}
```



---

archive/issue_events_035649.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2009-03-31T08:45:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5525",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5525#event-35649"
}
```



---

archive/issue_events_035650.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2009-03-31T08:45:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5525",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5525#event-35650"
}
```



---

archive/issue_events_035651.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2009-03-31T08:45:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/5525",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5525#event-35651"
}
```
