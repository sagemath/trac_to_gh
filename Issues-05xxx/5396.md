# Issue 5396: Wrapping lcalc library

archive/issues_005396.json:
```json
{
    "body": "Wrapping lcalc library. This patch depends spkg upgrade in #4793\n\n**Assignee:** @rishikesha\n\n**CC:**  @craigcitro @JohnCremona bober mrubinst@math.uwaterloo.ca mvngu\n\n**Keywords:** lcalc\n\n**Author:** Rishikesh, Yann Laigle-Chapuy\n\n**Reviewer:** John Cremona, David Kirkby, Alex Ghitza\n\n**Merged:** sage-4.5.2.alpha1\n\nIssue created by migration from https://trac.sagemath.org/ticket/5396\n\n",
    "closed_at": "2010-07-22T23:49:13Z",
    "created_at": "2009-02-27T20:29:50Z",
    "labels": [
        "component: number theory",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.5.2",
    "title": "Wrapping lcalc library",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/5396",
    "user": "https://github.com/rishikesha"
}
```
Wrapping lcalc library. This patch depends spkg upgrade in #4793

**Assignee:** @rishikesha

**CC:**  @craigcitro @JohnCremona bober mrubinst@math.uwaterloo.ca mvngu

**Keywords:** lcalc

**Author:** Rishikesh, Yann Laigle-Chapuy

**Reviewer:** John Cremona, David Kirkby, Alex Ghitza

**Merged:** sage-4.5.2.alpha1

Issue created by migration from https://trac.sagemath.org/ticket/5396





---

archive/issue_events_033711.json:
```json
{
    "actor": "https://github.com/rishikesha",
    "created_at": "2009-02-27T20:30:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "component: algebra",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33711"
}
```



---

archive/issue_events_033712.json:
```json
{
    "actor": "https://github.com/rishikesha",
    "created_at": "2009-02-27T20:30:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "component: number theory",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33712"
}
```



---

archive/issue_comments_034527.json:
```json
{
    "body": "<a id='comment:2'></a>\nHi Rishi,\n\nNo patch, not relevant for 3.4 ;)\n\nCheers,\n\nMichael",
    "created_at": "2009-02-27T23:11:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34527",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:2'></a>
Hi Rishi,

No patch, not relevant for 3.4 ;)

Cheers,

Michael



---

archive/issue_events_033713.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2009-02-27T23:11:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "milestone": "sage-3.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33713"
}
```



---

archive/issue_events_033714.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2009-02-27T23:11:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "milestone": "sage-3.4.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33714"
}
```



---

archive/attachments_006072.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "Lcalc_in_sage.sws",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5396/Lcalc_in_sage.sws",
    "created_at": "2009-08-12T15:42:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.sws",
    "user": "https://github.com/rishikesha"
}
```



---

archive/issue_comments_034528.json:
```json
{
    "body": "",
    "created_at": "2009-08-12T15:42:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34528",
    "user": "https://github.com/rishikesha"
}
```





---

archive/issue_comments_034529.json:
```json
{
    "body": "<a id='comment:3'></a>\nI am attaching a lcalc library wrapper and a sage worksheet showing how to use it. It needs the latest lcalc release. Please see http://www.math.uwaterloo.ca/~mrubinst \n\nCopy all the include files from lcalc/include to $SAGE_ROOT/local/include . Copy the libLfunction.so from lcalc/src to $SAGE_ROOT/local/lib \nThen you can compile the wrapper. \n\nThe attached worksheet gives examples",
    "created_at": "2009-08-12T15:44:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34529",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:3'></a>
I am attaching a lcalc library wrapper and a sage worksheet showing how to use it. It needs the latest lcalc release. Please see http://www.math.uwaterloo.ca/~mrubinst 

Copy all the include files from lcalc/include to $SAGE_ROOT/local/include . Copy the libLfunction.so from lcalc/src to $SAGE_ROOT/local/lib 
Then you can compile the wrapper. 

The attached worksheet gives examples



---

archive/issue_comments_034530.json:
```json
{
    "body": "<a id='comment:4'></a>\nI am writing some functions which will generate lcalc objects for Dirichlet L functions, Elliptic Curve L functions, Cuspform L functions, which I am putting in sage/lfunctions/lcalc.py. Please let me know if you want something specific. To see what is needed by lcalc please look at page 18 of the following paper.",
    "created_at": "2009-08-12T15:52:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34530",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:4'></a>
I am writing some functions which will generate lcalc objects for Dirichlet L functions, Elliptic Curve L functions, Cuspform L functions, which I am putting in sage/lfunctions/lcalc.py. Please let me know if you want something specific. To see what is needed by lcalc please look at page 18 of the following paper.



---

archive/issue_comments_034531.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [rishi](#comment%3A4):\nI forgot the link to paper.\n\nhttp://arxiv.org/abs/math/0412181\n\nSee p.18",
    "created_at": "2009-08-12T15:53:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34531",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:5'></a>
Replying to [rishi](#comment%3A4):
I forgot the link to paper.

http://arxiv.org/abs/math/0412181

See p.18



---

archive/issue_events_033715.json:
```json
{
    "actor": "https://github.com/rishikesha",
    "created_at": "2009-08-12T18:11:07Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "rename": {
        "from": "Wrapping lcalc library",
        "to": "Wrapping lcalc library [with patch, needs review]"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33715"
}
```



---

archive/issue_events_033716.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mvngu",
    "created_at": "2009-08-13T16:39:44Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "rename": {
        "from": "Wrapping lcalc library [with patch, needs review]",
        "to": "Wrapping lcalc library"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33716"
}
```



---

archive/issue_comments_034532.json:
```json
{
    "body": "<a id='comment:10'></a>\nI was asked to review this so took a look, but I have no idea what is going on here.  Isn't lcalc already in Sage?  Or are only some of the functions already in Sage?\n\nWhat on earth does the instruction \"Copy all the include files from lcalc/include to $SAGE_ROOT/local/include . Copy the libLfunction.so from lcalc/src to $SAGE_ROOT/local/lib Then you can compile the wrapper.\" mean?  Should that not be done when Sage is built, so is not the right thing to do to change the existing lcalc spkg in Sage (lcalc-20080205.p2) to a new spkg?  Then the reviewer should install this new experimental spkg, apply a patch, and proceed as normal.\n\nI also do not find it helpful to attach a worksheet with examples, because I do not use the notebook and so it's just one more complication.\n\nBecause of the above I changed the tag from \"needs review\" to \"needs work\", since I do not think this is ready for review.",
    "created_at": "2009-08-23T16:47:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34532",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:10'></a>
I was asked to review this so took a look, but I have no idea what is going on here.  Isn't lcalc already in Sage?  Or are only some of the functions already in Sage?

What on earth does the instruction "Copy all the include files from lcalc/include to $SAGE_ROOT/local/include . Copy the libLfunction.so from lcalc/src to $SAGE_ROOT/local/lib Then you can compile the wrapper." mean?  Should that not be done when Sage is built, so is not the right thing to do to change the existing lcalc spkg in Sage (lcalc-20080205.p2) to a new spkg?  Then the reviewer should install this new experimental spkg, apply a patch, and proceed as normal.

I also do not find it helpful to attach a worksheet with examples, because I do not use the notebook and so it's just one more complication.

Because of the above I changed the tag from "needs review" to "needs work", since I do not think this is ready for review.



---

archive/issue_events_033717.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2009-08-23T16:47:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33717"
}
```



---

archive/issue_events_033718.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2009-08-23T16:47:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33718"
}
```



---

archive/attachments_006073.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "L-1.23.spkg",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5396/L-1.23.spkg",
    "created_at": "2009-08-23T17:51:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.spkg",
    "user": "https://github.com/rishikesha"
}
```



---

archive/issue_comments_034533.json:
```json
{
    "body": "",
    "created_at": "2009-08-23T17:51:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34533",
    "user": "https://github.com/rishikesha"
}
```





---

archive/issue_comments_034534.json:
```json
{
    "body": "<a id='comment:11'></a>\nI have attached the spkg file. \n\n\nThe lcalc in sage uses the command line version of lcalc. The lcalc library lot richer than what the command line exposes. For example, you cannot find the zeros of a Dirichlet L function or Modular form L function without writing a lcalc file in appropriate format and calling the command line version. Using this patch, it is possible to forgo the lcalc file. In fact, in one of the example, I have written a function which given a primitive Dirichlet character, generates a Lcalc object, say L\n\n\n```\n#This code is only for example, It will not execute\nchi=DirichletGroup(5)[1]\nL =dirLFuncGenerator(chi)\nL.value(2+3*I) #gives value\nL.find_zeros_via_N(10) # finds the first 10 zeros of this L function. (ordered by distance from real axis)\n```\n\n\nI will repost the code in the sage notebook again",
    "created_at": "2009-08-23T18:04:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34534",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:11'></a>
I have attached the spkg file. 


The lcalc in sage uses the command line version of lcalc. The lcalc library lot richer than what the command line exposes. For example, you cannot find the zeros of a Dirichlet L function or Modular form L function without writing a lcalc file in appropriate format and calling the command line version. Using this patch, it is possible to forgo the lcalc file. In fact, in one of the example, I have written a function which given a primitive Dirichlet character, generates a Lcalc object, say L


```
#This code is only for example, It will not execute
chi=DirichletGroup(5)[1]
L =dirLFuncGenerator(chi)
L.value(2+3*I) #gives value
L.find_zeros_via_N(10) # finds the first 10 zeros of this L function. (ordered by distance from real axis)
```


I will repost the code in the sage notebook again



---

archive/issue_comments_034535.json:
```json
{
    "body": "<a id='comment:12'></a>\nHere I am reproducing what the sage worksheet does.\n\n```\nsage: import sage.libs.lcalc.for_testing\nsage: from sage.libs.lcalc.for_testing import *\nsage: D=DirichletGroup(5)\nsage: chi=D[1]\nsage: chi.values()\n[0, 1, zeta4, -zeta4, -1]\nsage: L=dirLFuncGenerator(chi)\nsage: L.find_zeros_via_N(5)\n\n[-4.13290370521285,\n 6.18357819545085,\n 8.45722917442324,\n -9.44293112972852,\n -11.2828964415816]\n\n\n#Following Code produces the lowest zeros of Dirichlet L functions of Cubic Characters with modulus up to 10\nsage: for k in srange(3,10):\n    for chi in DirichletGroup(k,CyclotomicField(3)):\n        if chi.is_primitive() and chi.order()==3:\n            L=dirLFuncGenerator(chi)\n            print k, L.find_zeros_via_N(1)[0]\n....:             \n7 4.35640162473628\n7 -4.35640162473628\n9 -3.44409315514895\n9 3.44409315514895\n\n#Here we create a L function corresponding to Elliptic Curve and find its zeros\nsage: E=EllipticCurve('11a')\nsage: L=elLFuncGenerator(E)\nsage: L.find_zeros_via_N(5)\n\n[6.36261389471309,\n 8.60353961929075,\n 10.0355090971811,\n 11.4512586103452,\n 13.5686390571300]\n\n\n#Another example related to Elliptic Curves\n\nsage: E=EllipticCurve('37')\nsage: L2=elLFuncGenerator(E)\nsage: print L2.value(.5), L2.value(.5,derivative=1)\n0 0.305999824716000 elliptic curve\n\n```",
    "created_at": "2009-08-23T18:23:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34535",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:12'></a>
Here I am reproducing what the sage worksheet does.

```
sage: import sage.libs.lcalc.for_testing
sage: from sage.libs.lcalc.for_testing import *
sage: D=DirichletGroup(5)
sage: chi=D[1]
sage: chi.values()
[0, 1, zeta4, -zeta4, -1]
sage: L=dirLFuncGenerator(chi)
sage: L.find_zeros_via_N(5)

[-4.13290370521285,
 6.18357819545085,
 8.45722917442324,
 -9.44293112972852,
 -11.2828964415816]


#Following Code produces the lowest zeros of Dirichlet L functions of Cubic Characters with modulus up to 10
sage: for k in srange(3,10):
    for chi in DirichletGroup(k,CyclotomicField(3)):
        if chi.is_primitive() and chi.order()==3:
            L=dirLFuncGenerator(chi)
            print k, L.find_zeros_via_N(1)[0]
....:             
7 4.35640162473628
7 -4.35640162473628
9 -3.44409315514895
9 3.44409315514895

#Here we create a L function corresponding to Elliptic Curve and find its zeros
sage: E=EllipticCurve('11a')
sage: L=elLFuncGenerator(E)
sage: L.find_zeros_via_N(5)

[6.36261389471309,
 8.60353961929075,
 10.0355090971811,
 11.4512586103452,
 13.5686390571300]


#Another example related to Elliptic Curves

sage: E=EllipticCurve('37')
sage: L2=elLFuncGenerator(E)
sage: print L2.value(.5), L2.value(.5,derivative=1)
0 0.305999824716000 elliptic curve

```



---

archive/issue_comments_034536.json:
```json
{
    "body": "<a id='comment:13'></a>\nThanks for the explanation.\n\nI successfully installed the new lcalc spkg;  then I successfully applied the patch and rebuilt sage.\n\nNow testing sage/libs/lcalc gives this:\n\n```\nsage -t  \"devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx\"\n**********************************************************************\nFile \"/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 411:\n    sage: L.value(.6)\nExpected:\n    0.274633355856348 - 6.59869267328213e-18*I\nGot:\n    0.274633355856341 - 6.59869267328188e-18*I\n**********************************************************************\nFile \"/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 413:\n    sage: L.value(.6+1*I)\nExpected:\n    0.362258705721100 + 0.433888250620852*I\nGot:\n    0.362258705721102 + 0.433888250620855*I\n**********************************************************************\nFile \"/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 450:\n    sage: L.find_zeros(1,15,.1)\nExpected:\n    [6.64845334472771, 9.83144443288668, 11.9588456260835]\nGot:\n    [6.64845334472771, 9.83144443288667, 11.9588456260835]\n**********************************************************************\nFile \"/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 491:\n    sage: L.find_zeros_via_N(3)\nExpected:\n    [6.64845334472771, 9.83144443288668, 11.9588456260835]\nGot:\n    [6.64845334472772, 9.83144443288667, 11.9588456260835]\n**********************************************************************\nFile \"/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 642:\n    sage: L.value(.5)\nExpected:\n    0.763747880117299 + 0.216964767518864*I\nGot:\n    0.763747880117295 + 0.216964767518863*I\n**********************************************************************\nFile \"/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 644:\n    sage: L.value(.6+5*I)\nExpected:\n    0.702723260619684 - 1.10178575243940*I\nGot:\n    0.702723260619682 - 1.10178575243940*I\n**********************************************************************\nFile \"/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 789:\n    sage: lcalc_zeta.value(CC(.4,.5))\nExpected:\n    -0.450728958517113 - 0.780511403019070*I\nGot:\n    -0.450728958517121 - 0.780511403019071*I\n**********************************************************************\nFile \"/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 852:\n    sage: lcalc_zeta.find_zeros_via_N(3)\nExpected:\n    [14.1347251417347, 21.0220396387715, 25.0108575801457]\nGot:\n    [14.1347251417347, 21.0220396387716, 25.0108575801457]\n**********************************************************************\nFile \"/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 174:\n    sage: L.value(.5)\nExpected:\n    0.231750947504015 + 5.75329642226134e-18*I\nGot:\n    0.231750947504012 + 5.75329642226126e-18*I\n**********************************************************************\nFile \"/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 176:\n    sage: L.value(CC(.2,.4))\nExpected:\n    0.102558603193338 + 0.190840777924700*I\nGot:\n    0.102558603193336 + 0.190840777924703*I\n**********************************************************************\n7 items had failures:\n```\n\n-- that is all just numerical noise probably because I'm testing on a 32-bit system and you made the tests on a 64-bit system (is that right?)  That is not serious (though will need to be fixed).\n\nIn the \"testing\" file, are the functions intended for inclusion in Sage?  If so, they need doctesting (and the names are a little strange) and they should perhaps be made into member functions of the appropriate classes (e.g. ell_rational_field).\n\nIn the docstrings explaining all the parameters, I don't think it is enough to just refer to the lcacl documentation.  These are Sage functions and the inputs need to be documented withing Sage (however tedious that might be!)\n\nThere are quite a few typos in the documentation.\n\nWould it be possible to have a base class and have the various L-series classes derive from it?  That might reduce the code a little and make the structure clearer.\n\nYou have some input parameters which I think would more natually be True/False instead of 1/0 as now.\n\nThis has clearly been a huge amount of work and will be very useful.  The things I mentioned above are all minor, but still they should be considered, so I have left the tag as \"needs work\", but I think this is quite close to being includable.",
    "created_at": "2009-08-23T19:26:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34536",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:13'></a>
Thanks for the explanation.

I successfully installed the new lcalc spkg;  then I successfully applied the patch and rebuilt sage.

Now testing sage/libs/lcalc gives this:

```
sage -t  "devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx"
**********************************************************************
File "/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx", line 411:
    sage: L.value(.6)
Expected:
    0.274633355856348 - 6.59869267328213e-18*I
Got:
    0.274633355856341 - 6.59869267328188e-18*I
**********************************************************************
File "/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx", line 413:
    sage: L.value(.6+1*I)
Expected:
    0.362258705721100 + 0.433888250620852*I
Got:
    0.362258705721102 + 0.433888250620855*I
**********************************************************************
File "/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx", line 450:
    sage: L.find_zeros(1,15,.1)
Expected:
    [6.64845334472771, 9.83144443288668, 11.9588456260835]
Got:
    [6.64845334472771, 9.83144443288667, 11.9588456260835]
**********************************************************************
File "/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx", line 491:
    sage: L.find_zeros_via_N(3)
Expected:
    [6.64845334472771, 9.83144443288668, 11.9588456260835]
Got:
    [6.64845334472772, 9.83144443288667, 11.9588456260835]
**********************************************************************
File "/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx", line 642:
    sage: L.value(.5)
Expected:
    0.763747880117299 + 0.216964767518864*I
Got:
    0.763747880117295 + 0.216964767518863*I
**********************************************************************
File "/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx", line 644:
    sage: L.value(.6+5*I)
Expected:
    0.702723260619684 - 1.10178575243940*I
Got:
    0.702723260619682 - 1.10178575243940*I
**********************************************************************
File "/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx", line 789:
    sage: lcalc_zeta.value(CC(.4,.5))
Expected:
    -0.450728958517113 - 0.780511403019070*I
Got:
    -0.450728958517121 - 0.780511403019071*I
**********************************************************************
File "/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx", line 852:
    sage: lcalc_zeta.find_zeros_via_N(3)
Expected:
    [14.1347251417347, 21.0220396387715, 25.0108575801457]
Got:
    [14.1347251417347, 21.0220396387716, 25.0108575801457]
**********************************************************************
File "/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx", line 174:
    sage: L.value(.5)
Expected:
    0.231750947504015 + 5.75329642226134e-18*I
Got:
    0.231750947504012 + 5.75329642226126e-18*I
**********************************************************************
File "/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx", line 176:
    sage: L.value(CC(.2,.4))
Expected:
    0.102558603193338 + 0.190840777924700*I
Got:
    0.102558603193336 + 0.190840777924703*I
**********************************************************************
7 items had failures:
```

-- that is all just numerical noise probably because I'm testing on a 32-bit system and you made the tests on a 64-bit system (is that right?)  That is not serious (though will need to be fixed).

In the "testing" file, are the functions intended for inclusion in Sage?  If so, they need doctesting (and the names are a little strange) and they should perhaps be made into member functions of the appropriate classes (e.g. ell_rational_field).

In the docstrings explaining all the parameters, I don't think it is enough to just refer to the lcacl documentation.  These are Sage functions and the inputs need to be documented withing Sage (however tedious that might be!)

There are quite a few typos in the documentation.

Would it be possible to have a base class and have the various L-series classes derive from it?  That might reduce the code a little and make the structure clearer.

You have some input parameters which I think would more natually be True/False instead of 1/0 as now.

This has clearly been a huge amount of work and will be very useful.  The things I mentioned above are all minor, but still they should be considered, so I have left the tag as "needs work", but I think this is quite close to being includable.



---

archive/issue_comments_034537.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n-I am wrapping lcalc library. It is working but still needs some work.\n+Thanks John for your feedback.  I was looking at the patch again, I am indeed seeing the typos, and places where documentation is far from clear. \n+\n+While I was writing, I did think of having a base class and have various L series derive from it, but it had taken me several weeks of manipulation just to get a compilable code out of cython, so I balked. I will go back and see how to reduce the clutter.\n``````\n",
    "created_at": "2009-08-23T20:00:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34537",
    "user": "https://github.com/rishikesha"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,3 @@
-I am wrapping lcalc library. It is working but still needs some work.
+Thanks John for your feedback.  I was looking at the patch again, I am indeed seeing the typos, and places where documentation is far from clear. 
+
+While I was writing, I did think of having a base class and have various L series derive from it, but it had taken me several weeks of manipulation just to get a compilable code out of cython, so I balked. I will go back and see how to reduce the clutter.
``````




---

archive/issue_comments_034538.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [cremona](#comment%3A13):\n> Thanks for the explanation.\n> \n> I successfully installed the new lcalc spkg;  then I successfully applied the patch and rebuilt sage.\n> \n> Now testing sage/libs/lcalc gives this:\n> \n> ```\n> sage -t  \"devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx\"\n> **********************************************************************\n> File \"/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 411:\n>     sage: L.value(.6)\n> Expected:\n>     0.274633355856348 - 6.59869267328213e-18*I\n> Got:\n>     0.274633355856341 - 6.59869267328188e-18*I\n> **********************************************************************\n> File \"/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 413:\n>     sage: L.value(.6+1*I)\n> Expected:\n>     0.362258705721100 + 0.433888250620852*I\n> Got:\n>     0.362258705721102 + 0.433888250620855*I\n> **********************************************************************\n> File \"/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 450:\n>     sage: L.find_zeros(1,15,.1)\n> Expected:\n>     [6.64845334472771, 9.83144443288668, 11.9588456260835]\n> Got:\n>     [6.64845334472771, 9.83144443288667, 11.9588456260835]\n> **********************************************************************\n> File \"/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 491:\n>     sage: L.find_zeros_via_N(3)\n> Expected:\n>     [6.64845334472771, 9.83144443288668, 11.9588456260835]\n> Got:\n>     [6.64845334472772, 9.83144443288667, 11.9588456260835]\n> **********************************************************************\n> File \"/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 642:\n>     sage: L.value(.5)\n> Expected:\n>     0.763747880117299 + 0.216964767518864*I\n> Got:\n>     0.763747880117295 + 0.216964767518863*I\n> **********************************************************************\n> File \"/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 644:\n>     sage: L.value(.6+5*I)\n> Expected:\n>     0.702723260619684 - 1.10178575243940*I\n> Got:\n>     0.702723260619682 - 1.10178575243940*I\n> **********************************************************************\n> File \"/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 789:\n>     sage: lcalc_zeta.value(CC(.4,.5))\n> Expected:\n>     -0.450728958517113 - 0.780511403019070*I\n> Got:\n>     -0.450728958517121 - 0.780511403019071*I\n> **********************************************************************\n> File \"/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 852:\n>     sage: lcalc_zeta.find_zeros_via_N(3)\n> Expected:\n>     [14.1347251417347, 21.0220396387715, 25.0108575801457]\n> Got:\n>     [14.1347251417347, 21.0220396387716, 25.0108575801457]\n> **********************************************************************\n> File \"/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 174:\n>     sage: L.value(.5)\n> Expected:\n>     0.231750947504015 + 5.75329642226134e-18*I\n> Got:\n>     0.231750947504012 + 5.75329642226126e-18*I\n> **********************************************************************\n> File \"/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 176:\n>     sage: L.value(CC(.2,.4))\n> Expected:\n>     0.102558603193338 + 0.190840777924700*I\n> Got:\n>     0.102558603193336 + 0.190840777924703*I\n> **********************************************************************\n> 7 items had failures:\n> ```\n> \n> -- that is all just numerical noise probably because I'm testing on a 32-bit system and you made the tests on a 64-bit system (is that right?)  That is not serious (though will need to be fixed).\n> \n> In the \"testing\" file, are the functions intended for inclusion in Sage?  If so, they need doctesting (and the names are a little strange) and they should perhaps be made into member functions of the appropriate classes (e.g. ell_rational_field).\n> \n> In the docstrings explaining all the parameters, I don't think it is enough to just refer to the lcacl documentation.  These are Sage functions and the inputs need to be documented withing Sage (however tedious that might be!)\n> \n> There are quite a few typos in the documentation.\n> \n> Would it be possible to have a base class and have the various L-series classes derive from it?  That might reduce the code a little and make the structure clearer.\n> \n> You have some input parameters which I think would more natually be True/False instead of 1/0 as now.\n> \n> This has clearly been a huge amount of work and will be very useful.  The things I mentioned above are all minor, but still they should be considered, so I have left the tag as \"needs work\", but I think this is quite close to being includable.\n",
    "created_at": "2009-08-23T20:00:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34538",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:14'></a>
Replying to [cremona](#comment%3A13):
> Thanks for the explanation.
> 
> I successfully installed the new lcalc spkg;  then I successfully applied the patch and rebuilt sage.
> 
> Now testing sage/libs/lcalc gives this:
> 
> ```
> sage -t  "devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx"
> **********************************************************************
> File "/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx", line 411:
>     sage: L.value(.6)
> Expected:
>     0.274633355856348 - 6.59869267328213e-18*I
> Got:
>     0.274633355856341 - 6.59869267328188e-18*I
> **********************************************************************
> File "/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx", line 413:
>     sage: L.value(.6+1*I)
> Expected:
>     0.362258705721100 + 0.433888250620852*I
> Got:
>     0.362258705721102 + 0.433888250620855*I
> **********************************************************************
> File "/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx", line 450:
>     sage: L.find_zeros(1,15,.1)
> Expected:
>     [6.64845334472771, 9.83144443288668, 11.9588456260835]
> Got:
>     [6.64845334472771, 9.83144443288667, 11.9588456260835]
> **********************************************************************
> File "/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx", line 491:
>     sage: L.find_zeros_via_N(3)
> Expected:
>     [6.64845334472771, 9.83144443288668, 11.9588456260835]
> Got:
>     [6.64845334472772, 9.83144443288667, 11.9588456260835]
> **********************************************************************
> File "/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx", line 642:
>     sage: L.value(.5)
> Expected:
>     0.763747880117299 + 0.216964767518864*I
> Got:
>     0.763747880117295 + 0.216964767518863*I
> **********************************************************************
> File "/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx", line 644:
>     sage: L.value(.6+5*I)
> Expected:
>     0.702723260619684 - 1.10178575243940*I
> Got:
>     0.702723260619682 - 1.10178575243940*I
> **********************************************************************
> File "/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx", line 789:
>     sage: lcalc_zeta.value(CC(.4,.5))
> Expected:
>     -0.450728958517113 - 0.780511403019070*I
> Got:
>     -0.450728958517121 - 0.780511403019071*I
> **********************************************************************
> File "/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx", line 852:
>     sage: lcalc_zeta.find_zeros_via_N(3)
> Expected:
>     [14.1347251417347, 21.0220396387715, 25.0108575801457]
> Got:
>     [14.1347251417347, 21.0220396387716, 25.0108575801457]
> **********************************************************************
> File "/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx", line 174:
>     sage: L.value(.5)
> Expected:
>     0.231750947504015 + 5.75329642226134e-18*I
> Got:
>     0.231750947504012 + 5.75329642226126e-18*I
> **********************************************************************
> File "/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx", line 176:
>     sage: L.value(CC(.2,.4))
> Expected:
>     0.102558603193338 + 0.190840777924700*I
> Got:
>     0.102558603193336 + 0.190840777924703*I
> **********************************************************************
> 7 items had failures:
> ```
> 
> -- that is all just numerical noise probably because I'm testing on a 32-bit system and you made the tests on a 64-bit system (is that right?)  That is not serious (though will need to be fixed).
> 
> In the "testing" file, are the functions intended for inclusion in Sage?  If so, they need doctesting (and the names are a little strange) and they should perhaps be made into member functions of the appropriate classes (e.g. ell_rational_field).
> 
> In the docstrings explaining all the parameters, I don't think it is enough to just refer to the lcacl documentation.  These are Sage functions and the inputs need to be documented withing Sage (however tedious that might be!)
> 
> There are quite a few typos in the documentation.
> 
> Would it be possible to have a base class and have the various L-series classes derive from it?  That might reduce the code a little and make the structure clearer.
> 
> You have some input parameters which I think would more natually be True/False instead of 1/0 as now.
> 
> This has clearly been a huge amount of work and will be very useful.  The things I mentioned above are all minor, but still they should be considered, so I have left the tag as "needs work", but I think this is quite close to being includable.




---

archive/issue_comments_034539.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [rishi](#comment%3A14):\n\n\nThanks John for your feedback.  I was looking at the patch again, I am indeed seeing the typos, and places where documentation is far from clear. \n\nWhile I was writing, I did think of having a base class and have various L series derive from it, but it had taken me several weeks of manipulation just to get a compilable code out of cython, so I balked. I will go back and see how to reduce the clutter.\n\nRishi\n> Replying to [cremona](#comment%3A13):\n> > Thanks for the explanation.\n> > \n> > I successfully installed the new lcalc spkg;  then I successfully applied the patch and rebuilt sage.\n> > \n> > Now testing sage/libs/lcalc gives this:\n> > \n> > ```\n> > sage -t  \"devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx\"\n> > **********************************************************************\n> > File \"/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 411:\n> >     sage: L.value(.6)\n> > Expected:\n> >     0.274633355856348 - 6.59869267328213e-18*I\n> > Got:\n> >     0.274633355856341 - 6.59869267328188e-18*I\n> > **********************************************************************\n> > File \"/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 413:\n> >     sage: L.value(.6+1*I)\n> > Expected:\n> >     0.362258705721100 + 0.433888250620852*I\n> > Got:\n> >     0.362258705721102 + 0.433888250620855*I\n> > **********************************************************************\n> > File \"/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 450:\n> >     sage: L.find_zeros(1,15,.1)\n> > Expected:\n> >     [6.64845334472771, 9.83144443288668, 11.9588456260835]\n> > Got:\n> >     [6.64845334472771, 9.83144443288667, 11.9588456260835]\n> > **********************************************************************\n> > File \"/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 491:\n> >     sage: L.find_zeros_via_N(3)\n> > Expected:\n> >     [6.64845334472771, 9.83144443288668, 11.9588456260835]\n> > Got:\n> >     [6.64845334472772, 9.83144443288667, 11.9588456260835]\n> > **********************************************************************\n> > File \"/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 642:\n> >     sage: L.value(.5)\n> > Expected:\n> >     0.763747880117299 + 0.216964767518864*I\n> > Got:\n> >     0.763747880117295 + 0.216964767518863*I\n> > **********************************************************************\n> > File \"/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 644:\n> >     sage: L.value(.6+5*I)\n> > Expected:\n> >     0.702723260619684 - 1.10178575243940*I\n> > Got:\n> >     0.702723260619682 - 1.10178575243940*I\n> > **********************************************************************\n> > File \"/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 789:\n> >     sage: lcalc_zeta.value(CC(.4,.5))\n> > Expected:\n> >     -0.450728958517113 - 0.780511403019070*I\n> > Got:\n> >     -0.450728958517121 - 0.780511403019071*I\n> > **********************************************************************\n> > File \"/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 852:\n> >     sage: lcalc_zeta.find_zeros_via_N(3)\n> > Expected:\n> >     [14.1347251417347, 21.0220396387715, 25.0108575801457]\n> > Got:\n> >     [14.1347251417347, 21.0220396387716, 25.0108575801457]\n> > **********************************************************************\n> > File \"/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 174:\n> >     sage: L.value(.5)\n> > Expected:\n> >     0.231750947504015 + 5.75329642226134e-18*I\n> > Got:\n> >     0.231750947504012 + 5.75329642226126e-18*I\n> > **********************************************************************\n> > File \"/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 176:\n> >     sage: L.value(CC(.2,.4))\n> > Expected:\n> >     0.102558603193338 + 0.190840777924700*I\n> > Got:\n> >     0.102558603193336 + 0.190840777924703*I\n> > **********************************************************************\n> > 7 items had failures:\n> > ```\n> > \n> > -- that is all just numerical noise probably because I'm testing on a 32-bit system and you made the tests on a 64-bit system (is that right?)  That is not serious (though will need to be fixed).\n> > \n> > In the \"testing\" file, are the functions intended for inclusion in Sage?  If so, they need doctesting (and the names are a little strange) and they should perhaps be made into member functions of the appropriate classes (e.g. ell_rational_field).\n> > \n> > In the docstrings explaining all the parameters, I don't think it is enough to just refer to the lcacl documentation.  These are Sage functions and the inputs need to be documented withing Sage (however tedious that might be!)\n> > \n> > There are quite a few typos in the documentation.\n> > \n> > Would it be possible to have a base class and have the various L-series classes derive from it?  That might reduce the code a little and make the structure clearer.\n> > \n> > You have some input parameters which I think would more natually be True/False instead of 1/0 as now.\n> > \n> > This has clearly been a huge amount of work and will be very useful.  The things I mentioned above are all minor, but still they should be considered, so I have left the tag as \"needs work\", but I think this is quite close to being includable.\n",
    "created_at": "2009-08-23T20:07:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34539",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:15'></a>
Replying to [rishi](#comment%3A14):


Thanks John for your feedback.  I was looking at the patch again, I am indeed seeing the typos, and places where documentation is far from clear. 

While I was writing, I did think of having a base class and have various L series derive from it, but it had taken me several weeks of manipulation just to get a compilable code out of cython, so I balked. I will go back and see how to reduce the clutter.

Rishi
> Replying to [cremona](#comment%3A13):
> > Thanks for the explanation.
> > 
> > I successfully installed the new lcalc spkg;  then I successfully applied the patch and rebuilt sage.
> > 
> > Now testing sage/libs/lcalc gives this:
> > 
> > ```
> > sage -t  "devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx"
> > **********************************************************************
> > File "/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx", line 411:
> >     sage: L.value(.6)
> > Expected:
> >     0.274633355856348 - 6.59869267328213e-18*I
> > Got:
> >     0.274633355856341 - 6.59869267328188e-18*I
> > **********************************************************************
> > File "/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx", line 413:
> >     sage: L.value(.6+1*I)
> > Expected:
> >     0.362258705721100 + 0.433888250620852*I
> > Got:
> >     0.362258705721102 + 0.433888250620855*I
> > **********************************************************************
> > File "/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx", line 450:
> >     sage: L.find_zeros(1,15,.1)
> > Expected:
> >     [6.64845334472771, 9.83144443288668, 11.9588456260835]
> > Got:
> >     [6.64845334472771, 9.83144443288667, 11.9588456260835]
> > **********************************************************************
> > File "/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx", line 491:
> >     sage: L.find_zeros_via_N(3)
> > Expected:
> >     [6.64845334472771, 9.83144443288668, 11.9588456260835]
> > Got:
> >     [6.64845334472772, 9.83144443288667, 11.9588456260835]
> > **********************************************************************
> > File "/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx", line 642:
> >     sage: L.value(.5)
> > Expected:
> >     0.763747880117299 + 0.216964767518864*I
> > Got:
> >     0.763747880117295 + 0.216964767518863*I
> > **********************************************************************
> > File "/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx", line 644:
> >     sage: L.value(.6+5*I)
> > Expected:
> >     0.702723260619684 - 1.10178575243940*I
> > Got:
> >     0.702723260619682 - 1.10178575243940*I
> > **********************************************************************
> > File "/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx", line 789:
> >     sage: lcalc_zeta.value(CC(.4,.5))
> > Expected:
> >     -0.450728958517113 - 0.780511403019070*I
> > Got:
> >     -0.450728958517121 - 0.780511403019071*I
> > **********************************************************************
> > File "/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx", line 852:
> >     sage: lcalc_zeta.find_zeros_via_N(3)
> > Expected:
> >     [14.1347251417347, 21.0220396387715, 25.0108575801457]
> > Got:
> >     [14.1347251417347, 21.0220396387716, 25.0108575801457]
> > **********************************************************************
> > File "/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx", line 174:
> >     sage: L.value(.5)
> > Expected:
> >     0.231750947504015 + 5.75329642226134e-18*I
> > Got:
> >     0.231750947504012 + 5.75329642226126e-18*I
> > **********************************************************************
> > File "/home/john/sage-4.1.1/devel/sage-tests/sage/libs/lcalc/lcalc_Lfunction.pyx", line 176:
> >     sage: L.value(CC(.2,.4))
> > Expected:
> >     0.102558603193338 + 0.190840777924700*I
> > Got:
> >     0.102558603193336 + 0.190840777924703*I
> > **********************************************************************
> > 7 items had failures:
> > ```
> > 
> > -- that is all just numerical noise probably because I'm testing on a 32-bit system and you made the tests on a 64-bit system (is that right?)  That is not serious (though will need to be fixed).
> > 
> > In the "testing" file, are the functions intended for inclusion in Sage?  If so, they need doctesting (and the names are a little strange) and they should perhaps be made into member functions of the appropriate classes (e.g. ell_rational_field).
> > 
> > In the docstrings explaining all the parameters, I don't think it is enough to just refer to the lcacl documentation.  These are Sage functions and the inputs need to be documented withing Sage (however tedious that might be!)
> > 
> > There are quite a few typos in the documentation.
> > 
> > Would it be possible to have a base class and have the various L-series classes derive from it?  That might reduce the code a little and make the structure clearer.
> > 
> > You have some input parameters which I think would more natually be True/False instead of 1/0 as now.
> > 
> > This has clearly been a huge amount of work and will be very useful.  The things I mentioned above are all minor, but still they should be considered, so I have left the tag as "needs work", but I think this is quite close to being includable.




---

archive/issue_comments_034540.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1 @@\n-Thanks John for your feedback.  I was looking at the patch again, I am indeed seeing the typos, and places where documentation is far from clear. \n-\n-While I was writing, I did think of having a base class and have various L series derive from it, but it had taken me several weeks of manipulation just to get a compilable code out of cython, so I balked. I will go back and see how to reduce the clutter.\n+Wrapping lcalc library\n``````\n",
    "created_at": "2009-08-23T20:07:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34540",
    "user": "https://github.com/rishikesha"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1 @@
-Thanks John for your feedback.  I was looking at the patch again, I am indeed seeing the typos, and places where documentation is far from clear. 
-
-While I was writing, I did think of having a base class and have various L series derive from it, but it had taken me several weeks of manipulation just to get a compilable code out of cython, so I balked. I will go back and see how to reduce the clutter.
+Wrapping lcalc library
``````




---

archive/issue_comments_034541.json:
```json
{
    "body": "basic lcalc wrapper",
    "created_at": "2009-10-01T00:42:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34541",
    "user": "https://github.com/rishikesha"
}
```

basic lcalc wrapper



---

archive/attachments_006074.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "lcalc_wrapper.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5396/lcalc_wrapper.patch",
    "created_at": "2009-10-01T00:54:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/rishikesha"
}
```



---

archive/issue_comments_034542.json:
```json
{
    "body": "<a id='comment:16'></a>\nThe new patch adds lot of documentation, and clean few typos. There are three functions where True or False is more natural as parameter, and I am going to change it. That is pretty much the only change left. Any program written using this patch will continue to work when I make those changes, so this patch can still be included. I will probably post the patch by tomorrow. Today I received an email that someone wants to use this program so I am uploading this patch.",
    "created_at": "2009-10-01T00:54:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34542",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:16'></a>
The new patch adds lot of documentation, and clean few typos. There are three functions where True or False is more natural as parameter, and I am going to change it. That is pretty much the only change left. Any program written using this patch will continue to work when I make those changes, so this patch can still be included. I will probably post the patch by tomorrow. Today I received an email that someone wants to use this program so I am uploading this patch.



---

archive/issue_events_033719.json:
```json
{
    "actor": "https://github.com/rishikesha",
    "created_at": "2009-10-01T00:54:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33719"
}
```



---

archive/issue_events_033720.json:
```json
{
    "actor": "https://github.com/rishikesha",
    "created_at": "2009-10-01T00:54:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33720"
}
```



---

archive/issue_comments_034543.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [rishi](#comment%3A16):\n> The new patch adds lot of documentation, and clean few typos.\n\nWith the patch `lcalc_wrapper.patch`, you create a new empty file called `sage/libs/lcalc/__init__.py`. It's dangerous to create empty files in the Sage library. Such files are known to result in missing files (hence corrupt the \"main\" repository) when creating a new source distribution of Sage. A solution is to put a comment in `sage/libs/lcalc/__init__.py`. The comment can just be something like:\n\n```\n# A comment here so this file is picked up when creating a new source distribution.\n```",
    "created_at": "2009-10-01T04:19:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34543",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

<a id='comment:17'></a>
Replying to [rishi](#comment%3A16):
> The new patch adds lot of documentation, and clean few typos.

With the patch `lcalc_wrapper.patch`, you create a new empty file called `sage/libs/lcalc/__init__.py`. It's dangerous to create empty files in the Sage library. Such files are known to result in missing files (hence corrupt the "main" repository) when creating a new source distribution of Sage. A solution is to put a comment in `sage/libs/lcalc/__init__.py`. The comment can just be something like:

```
# A comment here so this file is picked up when creating a new source distribution.
```



---

archive/issue_comments_034544.json:
```json
{
    "body": "<a id='comment:18'></a>\nI assume `L-1.23.spkg` is version 1.23 of lcalc. Then the package must use the name `lcalc-1.23.spkg`; the current version in Sage 4.1.1 is `lcalc-20080205.p3.spkg`. A name for the lcalc package like `L-1.23.spkg` can result in errors building or upgrading Sage. If this ticket is closed, then ticket #4793 should be closed as \"wontfix\".",
    "created_at": "2009-10-01T06:18:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34544",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

<a id='comment:18'></a>
I assume `L-1.23.spkg` is version 1.23 of lcalc. Then the package must use the name `lcalc-1.23.spkg`; the current version in Sage 4.1.1 is `lcalc-20080205.p3.spkg`. A name for the lcalc package like `L-1.23.spkg` can result in errors building or upgrading Sage. If this ticket is closed, then ticket #4793 should be closed as "wontfix".



---

archive/attachments_006075.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "minor_revision.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5396/minor_revision.patch",
    "created_at": "2009-10-01T15:09:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/rishikesha"
}
```



---

archive/issue_comments_034545.json:
```json
{
    "body": "",
    "created_at": "2009-10-01T15:09:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34545",
    "user": "https://github.com/rishikesha"
}
```





---

archive/attachments_006076.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "make_init_nonempty.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5396/make_init_nonempty.patch",
    "created_at": "2009-11-26T01:36:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://trac.sagemath.org/admin/accounts/users/ylchapuy"
}
```



---

archive/issue_comments_034546.json:
```json
{
    "body": "standalone patch, based on 4.3.alpha0",
    "created_at": "2009-11-26T01:36:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34546",
    "user": "https://trac.sagemath.org/admin/accounts/users/ylchapuy"
}
```

standalone patch, based on 4.3.alpha0



---

archive/attachments_006077.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_5396-refactor.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5396/trac_5396-refactor.patch",
    "created_at": "2009-11-26T01:45:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://trac.sagemath.org/admin/accounts/users/ylchapuy"
}
```



---

archive/issue_comments_034547.json:
```json
{
    "body": "<a id='comment:19'></a>\nI hope you won't mind, but I refactored a little bit your code to address reviewers comments.\n\nIn the provided patch:\n\n* the different L-functions derive from a base class\n* all doctests are protected against numerical noise\n* I removed the file for_testing.py and incorporated the (renamed) functions in the main file\n  ( they could be moved to better places though )\n* added a `__repr__` method (which is minimalistic)\n\nAfter spkg install, only my patch needs to be applied.\n\nPlease let me know your opinion about all these.",
    "created_at": "2009-11-26T01:45:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34547",
    "user": "https://trac.sagemath.org/admin/accounts/users/ylchapuy"
}
```

<a id='comment:19'></a>
I hope you won't mind, but I refactored a little bit your code to address reviewers comments.

In the provided patch:

* the different L-functions derive from a base class
* all doctests are protected against numerical noise
* I removed the file for_testing.py and incorporated the (renamed) functions in the main file
  ( they could be moved to better places though )
* added a `__repr__` method (which is minimalistic)

After spkg install, only my patch needs to be applied.

Please let me know your opinion about all these.



---

archive/issue_comments_034548.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [ylchapuy](#comment%3A19):\n\nWonderfull!! I am looking at the code which has changed a lot, and it is impressive. I had written this as the lowest layer of a three layered interface to lcalc library. It was dirty, but it has taken me so long to add the necessary patches to lcalc itself, and then getting this thing to work with sage, that I balked when my attempts to derive the L-functions from a base class failed. \n\nI am still absorbing the changes. I will write more later.\n\nRishi",
    "created_at": "2009-11-27T12:23:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34548",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:20'></a>
Replying to [ylchapuy](#comment%3A19):

Wonderfull!! I am looking at the code which has changed a lot, and it is impressive. I had written this as the lowest layer of a three layered interface to lcalc library. It was dirty, but it has taken me so long to add the necessary patches to lcalc itself, and then getting this thing to work with sage, that I balked when my attempts to derive the L-functions from a base class failed. 

I am still absorbing the changes. I will write more later.

Rishi



---

archive/issue_comments_034549.json:
```json
{
    "body": "<a id='comment:21'></a>\nAny move on this?",
    "created_at": "2009-12-15T11:20:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34549",
    "user": "https://trac.sagemath.org/admin/accounts/users/ylchapuy"
}
```

<a id='comment:21'></a>
Any move on this?



---

archive/issue_comments_034550.json:
```json
{
    "body": "<a id='comment:22'></a>\nI apologise. I was busy with a gap which had popped up in my thesis. I will write by Sunday.",
    "created_at": "2009-12-15T21:38:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34550",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:22'></a>
I apologise. I was busy with a gap which had popped up in my thesis. I will write by Sunday.



---

archive/issue_comments_034551.json:
```json
{
    "body": "<a id='comment:23'></a>\nReplying to [ylchapuy](#comment%3A21):\n> Any move on this?\n\n\nI had a closer look, and I like what I see. The code is beautiful. I would like it to be included as it is. It does address everything which John Cremona had raised.\n\nThe last 2 functions which generate L functions for Dirichlet characters and Elliptic Curves were supposed to be there for testing and as example.  For the time being I feel we can leave it like this till an improved version comes. \n\n\nCraig: Can I give it a positive review? I am not sure how the reviewing process works in this case.\n\n\nRishi",
    "created_at": "2009-12-21T14:20:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34551",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:23'></a>
Replying to [ylchapuy](#comment%3A21):
> Any move on this?


I had a closer look, and I like what I see. The code is beautiful. I would like it to be included as it is. It does address everything which John Cremona had raised.

The last 2 functions which generate L functions for Dirichlet characters and Elliptic Curves were supposed to be there for testing and as example.  For the time being I feel we can leave it like this till an improved version comes. 


Craig: Can I give it a positive review? I am not sure how the reviewing process works in this case.


Rishi



---

archive/issue_comments_034552.json:
```json
{
    "body": "<a id='comment:24'></a>\nNow there is code here from both rishi and ylchapuy it would be possible for each to review the other's code (since they both now know more about it than anyone else!) but it would be even better to have a third party do the job.  I volunteer to do that, in the next day or so.",
    "created_at": "2009-12-21T14:46:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34552",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:24'></a>
Now there is code here from both rishi and ylchapuy it would be possible for each to review the other's code (since they both now know more about it than anyone else!) but it would be even better to have a third party do the job.  I volunteer to do that, in the next day or so.



---

archive/issue_comments_034553.json:
```json
{
    "body": "<a id='comment:25'></a>\nThanks John.\n\n\nReplying to [cremona](#comment%3A24):\n> Now there is code here from both rishi and ylchapuy it would be possible for each to review the other's code (since they both now know more about it than anyone else!) but it would be even better to have a third party do the job.  I volunteer to do that, in the next day or so.\n",
    "created_at": "2009-12-21T16:20:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34553",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:25'></a>
Thanks John.


Replying to [cremona](#comment%3A24):
> Now there is code here from both rishi and ylchapuy it would be possible for each to review the other's code (since they both now know more about it than anyone else!) but it would be even better to have a third party do the job.  I volunteer to do that, in the next day or so.




---

archive/issue_comments_034554.json:
```json
{
    "body": "<a id='comment:26'></a>\nHere's what I did:  made a fresh clone of 4.3.rc0, installed the spkg (sage -i lcalc-1.23.spkg), applied the latch, rebuilt.  Then sage -t gives this:\n\n```\njohn@ubuntu%sage -t sage-4.3.rc0/devel/sage-lcalc/sage/libs/lcalc/ \nsage -t  \"devel/sage-lcalc/sage/libs/lcalc/__init__.py\"     \n\t [0.1 s]\nsage -t  \"devel/sage-lcalc/sage/libs/lcalc/lcalc_Lfunction.pyx\"\nException NotImplementedError in 'sage.libs.lcalc.lcalc_Lfunction.Lfunction.__init_fun' ignored\n-----------------------------------------------\n\nName of L_function: \nnumber of dirichlet coefficients = 5\ncoefficients are periodic\nb[1] = 1\nb[2] = -1\nb[3] = -1\nb[4] = 1\nb[5] = 0\n\nQ = 1.26156626101\nOMEGA = (1,4.96506830649e-17)\na = 1 (the quasi degree)\ngamma[1] =0.5    lambda[1] =(0,0)\n\n\nnumber of poles (of the completed L function) = 0\n-----------------------------------------------\n\n-----------------------------------------------\n\nName of L_function: \nnumber of dirichlet coefficients = 5\ncoefficients are periodic\nb[1] = (1,0)\nb[2] = (6.12323399574e-17,1)\nb[3] = (-6.12323399574e-17,-1)\nb[4] = (-1,0)\nb[5] = (0,0)\n\nQ = 1.26156626101\nOMEGA = (0.850650808352,0.525731112119)\na = 1 (the quasi degree)\ngamma[1] =0.5    lambda[1] =(0.5,0)\n\n\nnumber of poles (of the completed L function) = 0\n-----------------------------------------------\n\n**********************************************************************\nFile \"/home/john/sage-4.3.rc0/devel/sage-lcalc/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 780:\n    sage: L.value(0.5, derivative=1)\nExpected:\n    0.305999824716...\nGot:\n    0.305999723948232\n-----------------------------------------------\n\nName of L_function: \nnumber of dirichlet coefficients = 5\ncoefficients are periodic\nb[1] = 1\nb[2] = -1\nb[3] = -1\nb[4] = 1\nb[5] = 0\n\nQ = 1.26156626101\nOMEGA = (1,4.96506830649e-17)\na = 1 (the quasi degree)\ngamma[1] =0.5    lambda[1] =(0,0)\n\n\nnumber of poles (of the completed L function) = 0\n-----------------------------------------------\n\n**********************************************************************\n1 items had failures:\n   1 of   7 in __main__.example_24\n***Test Failed*** 1 failures.\nFor whitespace errors, see the file /home/john/.sage//tmp/.doctest_lcalc_Lfunction.py\n\t [2.2 s]\n \n----------------------------------------------------------------------\nThe following tests failed:\n\n\n\tsage -t  \"devel/sage-lcalc/sage/libs/lcalc/lcalc_Lfunction.pyx\"\nTotal time for all tests: 2.2 seconds\n```\nI cannot really tell what is going on here, sorry.",
    "created_at": "2009-12-23T20:14:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34554",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:26'></a>
Here's what I did:  made a fresh clone of 4.3.rc0, installed the spkg (sage -i lcalc-1.23.spkg), applied the latch, rebuilt.  Then sage -t gives this:

```
john@ubuntu%sage -t sage-4.3.rc0/devel/sage-lcalc/sage/libs/lcalc/ 
sage -t  "devel/sage-lcalc/sage/libs/lcalc/__init__.py"     
	 [0.1 s]
sage -t  "devel/sage-lcalc/sage/libs/lcalc/lcalc_Lfunction.pyx"
Exception NotImplementedError in 'sage.libs.lcalc.lcalc_Lfunction.Lfunction.__init_fun' ignored
-----------------------------------------------

Name of L_function: 
number of dirichlet coefficients = 5
coefficients are periodic
b[1] = 1
b[2] = -1
b[3] = -1
b[4] = 1
b[5] = 0

Q = 1.26156626101
OMEGA = (1,4.96506830649e-17)
a = 1 (the quasi degree)
gamma[1] =0.5    lambda[1] =(0,0)


number of poles (of the completed L function) = 0
-----------------------------------------------

-----------------------------------------------

Name of L_function: 
number of dirichlet coefficients = 5
coefficients are periodic
b[1] = (1,0)
b[2] = (6.12323399574e-17,1)
b[3] = (-6.12323399574e-17,-1)
b[4] = (-1,0)
b[5] = (0,0)

Q = 1.26156626101
OMEGA = (0.850650808352,0.525731112119)
a = 1 (the quasi degree)
gamma[1] =0.5    lambda[1] =(0.5,0)


number of poles (of the completed L function) = 0
-----------------------------------------------

**********************************************************************
File "/home/john/sage-4.3.rc0/devel/sage-lcalc/sage/libs/lcalc/lcalc_Lfunction.pyx", line 780:
    sage: L.value(0.5, derivative=1)
Expected:
    0.305999824716...
Got:
    0.305999723948232
-----------------------------------------------

Name of L_function: 
number of dirichlet coefficients = 5
coefficients are periodic
b[1] = 1
b[2] = -1
b[3] = -1
b[4] = 1
b[5] = 0

Q = 1.26156626101
OMEGA = (1,4.96506830649e-17)
a = 1 (the quasi degree)
gamma[1] =0.5    lambda[1] =(0,0)


number of poles (of the completed L function) = 0
-----------------------------------------------

**********************************************************************
1 items had failures:
   1 of   7 in __main__.example_24
***Test Failed*** 1 failures.
For whitespace errors, see the file /home/john/.sage//tmp/.doctest_lcalc_Lfunction.py
	 [2.2 s]
 
----------------------------------------------------------------------
The following tests failed:


	sage -t  "devel/sage-lcalc/sage/libs/lcalc/lcalc_Lfunction.pyx"
Total time for all tests: 2.2 seconds
```
I cannot really tell what is going on here, sorry.



---

archive/issue_events_033721.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2009-12-23T20:14:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33721"
}
```



---

archive/issue_events_033722.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2009-12-23T20:14:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33722"
}
```



---

archive/issue_comments_034555.json:
```json
{
    "body": "<a id='comment:27'></a>\nThe only lines really corresponding to the failure are:\n\n```\nFile \"/home/john/sage-4.3.rc0/devel/sage-lcalc/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 780:\n    sage: L.value(0.5, derivative=1)\nExpected:\n    0.305999824716...\nGot:\n    0.305999723948232\n```\n\nThe other ones comes from the doctesting of the `_print_data_to_standard_output` functions. I don't know how to deal with standard output easily in this case.\n\nThe problem is thus a numerical one. I don't know if it's normal to get such a difference in the result though. Should we just test for `0.305999...` ?",
    "created_at": "2009-12-23T20:55:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34555",
    "user": "https://trac.sagemath.org/admin/accounts/users/ylchapuy"
}
```

<a id='comment:27'></a>
The only lines really corresponding to the failure are:

```
File "/home/john/sage-4.3.rc0/devel/sage-lcalc/sage/libs/lcalc/lcalc_Lfunction.pyx", line 780:
    sage: L.value(0.5, derivative=1)
Expected:
    0.305999824716...
Got:
    0.305999723948232
```

The other ones comes from the doctesting of the `_print_data_to_standard_output` functions. I don't know how to deal with standard output easily in this case.

The problem is thus a numerical one. I don't know if it's normal to get such a difference in the result though. Should we just test for `0.305999...` ?



---

archive/issue_comments_034556.json:
```json
{
    "body": "<a id='comment:28'></a>\nOh, I just noticed the Exception at the beginning. I don't know where it comes from.",
    "created_at": "2009-12-23T20:56:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34556",
    "user": "https://trac.sagemath.org/admin/accounts/users/ylchapuy"
}
```

<a id='comment:28'></a>
Oh, I just noticed the Exception at the beginning. I don't know where it comes from.



---

archive/issue_comments_034557.json:
```json
{
    "body": "<a id='comment:29'></a>\nOk, the (ignored) Exception comes from the very first doctest where I try to create an instance of the `Lfunction` class which is intended to be virtual.\n\nThe attached patch correct this, reals with the numerical noise (should we?) as stated above, and also correct a small typo.",
    "created_at": "2009-12-23T21:11:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34557",
    "user": "https://trac.sagemath.org/admin/accounts/users/ylchapuy"
}
```

<a id='comment:29'></a>
Ok, the (ignored) Exception comes from the very first doctest where I try to create an instance of the `Lfunction` class which is intended to be virtual.

The attached patch correct this, reals with the numerical noise (should we?) as stated above, and also correct a small typo.



---

archive/attachments_006078.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_5396-review.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5396/trac_5396-review.patch",
    "created_at": "2009-12-23T21:12:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://trac.sagemath.org/admin/accounts/users/ylchapuy"
}
```



---

archive/issue_comments_034558.json:
```json
{
    "body": "<a id='comment:30'></a>\n",
    "created_at": "2009-12-23T21:12:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34558",
    "user": "https://trac.sagemath.org/admin/accounts/users/ylchapuy"
}
```

<a id='comment:30'></a>




---

archive/issue_events_033723.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/ylchapuy",
    "created_at": "2009-12-23T21:12:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33723"
}
```



---

archive/issue_events_033724.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/ylchapuy",
    "created_at": "2009-12-23T21:12:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33724"
}
```



---

archive/issue_comments_034559.json:
```json
{
    "body": "<a id='comment:31'></a>\nReplying to [ylchapuy](#comment%3A30):\nNot sure when I'll get back to this -- family calls, and it might be a few days.  It's a pity if the numerical accuracy depends so much on platform though.",
    "created_at": "2009-12-23T22:52:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34559",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:31'></a>
Replying to [ylchapuy](#comment%3A30):
Not sure when I'll get back to this -- family calls, and it might be a few days.  It's a pity if the numerical accuracy depends so much on platform though.



---

archive/issue_comments_034560.json:
```json
{
    "body": "<a id='comment:32'></a>\nReplying to [cremona](#comment%3A31):\n> Not sure when I'll get back to this -- family calls, and it might be a few days.\n\n\nNo problem of course; Happy Christmas!",
    "created_at": "2009-12-23T22:59:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34560",
    "user": "https://trac.sagemath.org/admin/accounts/users/ylchapuy"
}
```

<a id='comment:32'></a>
Replying to [cremona](#comment%3A31):
> Not sure when I'll get back to this -- family calls, and it might be a few days.


No problem of course; Happy Christmas!



---

archive/issue_comments_034561.json:
```json
{
    "body": "**Reviewer:** John Cremona",
    "created_at": "2009-12-24T15:50:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34561",
    "user": "https://github.com/JohnCremona"
}
```

**Reviewer:** John Cremona



---

archive/issue_comments_034562.json:
```json
{
    "body": "<a id='comment:33'></a>\nOK, so I found a few minutes.  New extra patch looks fine to me.  Successfully applied and tested on 32 and 64 bit machines.\n\nI guess that we'll next want to change, or add to, the interface to command-line lcalc in sage/lfunctions/lcalc.py -- but that's for another ticket.",
    "created_at": "2009-12-24T15:50:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34562",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:33'></a>
OK, so I found a few minutes.  New extra patch looks fine to me.  Successfully applied and tested on 32 and 64 bit machines.

I guess that we'll next want to change, or add to, the interface to command-line lcalc in sage/lfunctions/lcalc.py -- but that's for another ticket.



---

archive/issue_events_033725.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2009-12-24T15:50:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33725"
}
```



---

archive/issue_events_033726.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2009-12-24T15:50:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33726"
}
```



---

archive/issue_comments_034563.json:
```json
{
    "body": "**Author:** rishi, ylchapuy",
    "created_at": "2009-12-24T15:50:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34563",
    "user": "https://github.com/JohnCremona"
}
```

**Author:** rishi, ylchapuy



---

archive/issue_comments_034564.json:
```json
{
    "body": "<a id='comment:34'></a>\nI did not check my email in the last 24 hours. Yes the derivatives will not be accurate. In fact it gets progressively wrong with higher derivatives. I will add a patch later to add to documentation to this fact. The derivative is calculated by calculating L function at two points very close and using the definition of derivative. It is not accurate at all.\n\nThe following error message is from lcalc library. It is debugging info which Mike uses when things go wrong.\n\n```\n----------------------------------------------\n\nName of L_function: \nnumber of dirichlet coefficients = 5\ncoefficients are periodic\nb[1] = 1\nb[2] = -1\nb[3] = -1\nb[4] = 1\nb[5] = 0\n\nQ = 1.26156626101\nOMEGA = (1,4.96506830649e-17)\na = 1 (the quasi degree)\ngamma[1] =0.5    lambda[1] =(0,0)\n\n\nnumber of poles (of the completed L function) = 0\n-----------------------------------------------\n\n\n```",
    "created_at": "2009-12-24T19:23:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34564",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:34'></a>
I did not check my email in the last 24 hours. Yes the derivatives will not be accurate. In fact it gets progressively wrong with higher derivatives. I will add a patch later to add to documentation to this fact. The derivative is calculated by calculating L function at two points very close and using the definition of derivative. It is not accurate at all.

The following error message is from lcalc library. It is debugging info which Mike uses when things go wrong.

```
----------------------------------------------

Name of L_function: 
number of dirichlet coefficients = 5
coefficients are periodic
b[1] = 1
b[2] = -1
b[3] = -1
b[4] = 1
b[5] = 0

Q = 1.26156626101
OMEGA = (1,4.96506830649e-17)
a = 1 (the quasi degree)
gamma[1] =0.5    lambda[1] =(0,0)


number of poles (of the completed L function) = 0
-----------------------------------------------


```



---

archive/issue_comments_034565.json:
```json
{
    "body": "<a id='comment:35'></a>\nI was wrong in the previous message. The print_data_to_standard_output is used for debugging in developing lcalc, and I used it to debug the wrapper initially when things were going totally awry. Although I rewrote few functions in lcalc to return values instead of printing in standard output, this function still prints everything out in standard output.",
    "created_at": "2009-12-24T19:34:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34565",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:35'></a>
I was wrong in the previous message. The print_data_to_standard_output is used for debugging in developing lcalc, and I used it to debug the wrapper initially when things were going totally awry. Although I rewrote few functions in lcalc to return values instead of printing in standard output, this function still prints everything out in standard output.



---

archive/issue_comments_034566.json:
```json
{
    "body": "<a id='comment:36'></a>\nNB See also #7788 for some minor docstring changes which should be merged when this is.",
    "created_at": "2009-12-30T16:17:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34566",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:36'></a>
NB See also #7788 for some minor docstring changes which should be merged when this is.



---

archive/issue_comments_034567.json:
```json
{
    "body": "<a id='comment:37'></a>\nWhat all do I need apply for this?  I get the following failure:\n\n```\ncd \"/virtual/scratch/mhansen/release/4.3.1/alpha0/sage-4.3.1.alpha0/devel/sage\" && hg qser\ncd \"/virtual/scratch/mhansen/release/4.3.1/alpha0/sage-4.3.1.alpha0/devel/sage\" && hg qimport /home/mhansen/.sage/temp/boxen/29343/release_0/trac_5396-refactor.patch\ncd \"/virtual/scratch/mhansen/release/4.3.1/alpha0/sage-4.3.1.alpha0/devel/sage\" && hg qpush\ncd \"/virtual/scratch/mhansen/release/4.3.1/alpha0/sage-4.3.1.alpha0/devel/sage\" && hg qimport /home/mhansen/.sage/temp/boxen/29343/release_0/trac_5396-review.patch\ncd \"/virtual/scratch/mhansen/release/4.3.1/alpha0/sage-4.3.1.alpha0/devel/sage\" && hg qpush\n\n=========================\n >>> Rebuilding Sage <<< \n=========================\n\ncc1plus: warning: command line option \"-Wstrict-prototypes\" is valid for Ada/C/ObjC but not for C++\nIn file included from sage/libs/lcalc/lcalc_Lfunction.cpp:149:\nsage/libs/lcalc/lcalc_sage.h:1:15: error: L.h: No such file or directory\nIn file included from sage/libs/lcalc/lcalc_Lfunction.cpp:149:\nsage/libs/lcalc/lcalc_sage.h:27: error: expected constructor, destructor, or type conversion before \u2018*\u2019 token\nsage/libs/lcalc/lcalc_sage.h:33: error: variable or field \u2018del_Complexes\u2019 declared void\nsage/libs/lcalc/lcalc_sage.h:33: error: \u2018Complex\u2019 was not declared in this scope\nsage/libs/lcalc/lcalc_sage.h:33: error: \u2018A\u2019 was not declared in this scope\nsage/libs/lcalc/lcalc_sage.h:38: error: \u2018Complex\u2019 does not name a type\nsage/libs/lcalc/lcalc_sage.h:44: error: variable or field \u2018testL\u2019 declared void\nsage/libs/lcalc/lcalc_sage.h:44: error: \u2018L_function\u2019 was not declared in this scope\nsage/libs/lcalc/lcalc_sage.h:44: error: \u2018Complex\u2019 was not declared in this scope\nsage/libs/lcalc/lcalc_sage.h:44: error: \u2018L\u2019 was not declared in this scope\nIn file included from /usr/include/c++/4.2/ios:44,\n                 from /usr/include/c++/4.2/ostream:45,\n                 from /usr/include/c++/4.2/iostream:45,\n                 from /virtual/scratch/mhansen/release/4.3.1/alpha0/sage-4.3.1.alpha0/local//include/NTL/tools.h:14,\n                 from /virtual/scratch/mhansen/release/4.3.1/alpha0/sage-4.3.1.alpha0/local//include/NTL/ZZ.h:19,\n                 from /virtual/scratch/mhansen/release/4.3.1/alpha0/sage-4.3.1.alpha0/local//include/csage/ntl_wrap.h:2,\n                 from sage/libs/lcalc/lcalc_Lfunction.cpp:151:\n/usr/include/c++/4.2/exception:40: error: expected declaration before end of line\n```",
    "created_at": "2010-01-04T01:59:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34567",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:37'></a>
What all do I need apply for this?  I get the following failure:

```
cd "/virtual/scratch/mhansen/release/4.3.1/alpha0/sage-4.3.1.alpha0/devel/sage" && hg qser
cd "/virtual/scratch/mhansen/release/4.3.1/alpha0/sage-4.3.1.alpha0/devel/sage" && hg qimport /home/mhansen/.sage/temp/boxen/29343/release_0/trac_5396-refactor.patch
cd "/virtual/scratch/mhansen/release/4.3.1/alpha0/sage-4.3.1.alpha0/devel/sage" && hg qpush
cd "/virtual/scratch/mhansen/release/4.3.1/alpha0/sage-4.3.1.alpha0/devel/sage" && hg qimport /home/mhansen/.sage/temp/boxen/29343/release_0/trac_5396-review.patch
cd "/virtual/scratch/mhansen/release/4.3.1/alpha0/sage-4.3.1.alpha0/devel/sage" && hg qpush

=========================
 >>> Rebuilding Sage <<< 
=========================

cc1plus: warning: command line option "-Wstrict-prototypes" is valid for Ada/C/ObjC but not for C++
In file included from sage/libs/lcalc/lcalc_Lfunction.cpp:149:
sage/libs/lcalc/lcalc_sage.h:1:15: error: L.h: No such file or directory
In file included from sage/libs/lcalc/lcalc_Lfunction.cpp:149:
sage/libs/lcalc/lcalc_sage.h:27: error: expected constructor, destructor, or type conversion before ‘*’ token
sage/libs/lcalc/lcalc_sage.h:33: error: variable or field ‘del_Complexes’ declared void
sage/libs/lcalc/lcalc_sage.h:33: error: ‘Complex’ was not declared in this scope
sage/libs/lcalc/lcalc_sage.h:33: error: ‘A’ was not declared in this scope
sage/libs/lcalc/lcalc_sage.h:38: error: ‘Complex’ does not name a type
sage/libs/lcalc/lcalc_sage.h:44: error: variable or field ‘testL’ declared void
sage/libs/lcalc/lcalc_sage.h:44: error: ‘L_function’ was not declared in this scope
sage/libs/lcalc/lcalc_sage.h:44: error: ‘Complex’ was not declared in this scope
sage/libs/lcalc/lcalc_sage.h:44: error: ‘L’ was not declared in this scope
In file included from /usr/include/c++/4.2/ios:44,
                 from /usr/include/c++/4.2/ostream:45,
                 from /usr/include/c++/4.2/iostream:45,
                 from /virtual/scratch/mhansen/release/4.3.1/alpha0/sage-4.3.1.alpha0/local//include/NTL/tools.h:14,
                 from /virtual/scratch/mhansen/release/4.3.1/alpha0/sage-4.3.1.alpha0/local//include/NTL/ZZ.h:19,
                 from /virtual/scratch/mhansen/release/4.3.1/alpha0/sage-4.3.1.alpha0/local//include/csage/ntl_wrap.h:2,
                 from sage/libs/lcalc/lcalc_Lfunction.cpp:151:
/usr/include/c++/4.2/exception:40: error: expected declaration before end of line
```



---

archive/issue_comments_034568.json:
```json
{
    "body": "<a id='comment:38'></a>\nReplying to [mhansen](#comment%3A37):\n> What all do I need apply for this?  I get the following failure:\n\n\nAre you using the spkg in this ticket?",
    "created_at": "2010-01-04T03:23:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34568",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:38'></a>
Replying to [mhansen](#comment%3A37):
> What all do I need apply for this?  I get the following failure:


Are you using the spkg in this ticket?



---

archive/issue_events_033727.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-01-13T07:01:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33727"
}
```



---

archive/issue_events_033728.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-01-13T07:01:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33728"
}
```



---

archive/issue_comments_034569.json:
```json
{
    "body": "<a id='comment:39'></a>\nAfter building `lcalc-1.23.spkg` and applying `trac_5396-refactor.patch` and `trac_5396-review.patch`, I get the following failures:\n\n```\n        sage -t -long devel/sage-main/sage/plot/line.py # 1 doctests failed\n        sage -t -long devel/sage-main/sage/schemes/elliptic_curves/lseries_ell.py # 6 doctests failed\n        sage -t -long devel/sage-main/sage/schemes/elliptic_curves/ell_rational_field.py # 3 doctests failed\n        sage -t -long devel/sage-main/sage/lfunctions/lcalc.py # 3 doctests failed\n```\n\nFor example:\n\n```\nsage -t -long sage/plot/line.py\n**********************************************************************\nFile \"/virtual/scratch/rlm/sage-4.3.1.alpha2/devel/sage-main/sage/plot/line.py\", line 375:\n    sage: vals = E.lseries().values_along_line(1-I, 1+10*I, 100) # critical line\nExpected nothing\nGot:\n    lcalc:  You need to uncomment the line: PARI_DEFINE = -DINCLUDE_PARI\n    lcalc:  in the Makefile and do: 'make clean', then 'make' if you wish to use\n    lcalc:  elliptic curve L-functions. Requires that you already have pari installed\n    lcalc:  on your machine.\n**********************************************************************\n```",
    "created_at": "2010-01-13T07:01:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34569",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:39'></a>
After building `lcalc-1.23.spkg` and applying `trac_5396-refactor.patch` and `trac_5396-review.patch`, I get the following failures:

```
        sage -t -long devel/sage-main/sage/plot/line.py # 1 doctests failed
        sage -t -long devel/sage-main/sage/schemes/elliptic_curves/lseries_ell.py # 6 doctests failed
        sage -t -long devel/sage-main/sage/schemes/elliptic_curves/ell_rational_field.py # 3 doctests failed
        sage -t -long devel/sage-main/sage/lfunctions/lcalc.py # 3 doctests failed
```

For example:

```
sage -t -long sage/plot/line.py
**********************************************************************
File "/virtual/scratch/rlm/sage-4.3.1.alpha2/devel/sage-main/sage/plot/line.py", line 375:
    sage: vals = E.lseries().values_along_line(1-I, 1+10*I, 100) # critical line
Expected nothing
Got:
    lcalc:  You need to uncomment the line: PARI_DEFINE = -DINCLUDE_PARI
    lcalc:  in the Makefile and do: 'make clean', then 'make' if you wish to use
    lcalc:  elliptic curve L-functions. Requires that you already have pari installed
    lcalc:  on your machine.
**********************************************************************
```



---

archive/issue_comments_034570.json:
```json
{
    "body": "<a id='comment:40'></a>\nThis suggests to me that the build script in the spkg needs attention.",
    "created_at": "2010-01-13T09:35:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34570",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:40'></a>
This suggests to me that the build script in the spkg needs attention.



---

archive/attachments_006079.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "lcalc-1.23.spkg",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5396/lcalc-1.23.spkg",
    "created_at": "2010-01-13T15:34:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.spkg",
    "user": "https://github.com/rishikesha"
}
```



---

archive/issue_comments_034571.json:
```json
{
    "body": "",
    "created_at": "2010-01-13T15:34:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34571",
    "user": "https://github.com/rishikesha"
}
```





---

archive/issue_comments_034572.json:
```json
{
    "body": "<a id='comment:41'></a>\nI have uncommented the appropriate line in the Makefile. lcalc uses pari to generate the dirichlet coefficients. If we use the wrapper, we can use sage to generate the dirichlet coefficients and feed it to lcalc.",
    "created_at": "2010-01-13T15:54:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34572",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:41'></a>
I have uncommented the appropriate line in the Makefile. lcalc uses pari to generate the dirichlet coefficients. If we use the wrapper, we can use sage to generate the dirichlet coefficients and feed it to lcalc.



---

archive/issue_events_033729.json:
```json
{
    "actor": "https://github.com/rishikesha",
    "created_at": "2010-01-13T15:54:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33729"
}
```



---

archive/issue_events_033730.json:
```json
{
    "actor": "https://github.com/rishikesha",
    "created_at": "2010-01-13T15:54:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33730"
}
```



---

archive/issue_events_033731.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-01-13T17:13:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33731"
}
```



---

archive/issue_events_033732.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-01-13T17:13:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33732"
}
```



---

archive/issue_comments_034573.json:
```json
{
    "body": "<a id='comment:42'></a>\nrishi, I could not install this version of lcalc.  I'll paste in below the error message I got.  Before that, two comments:  (1) the spkg should contain more than it does (an install script and the src directory).  See http://www.sagemath.org/doc/developer/producing_spkgs.html: there should be a file SPKG.txt, and there should be mercurial files, and an check script.... (2) When you make new versions of the spkg it's helpful for the name to change sp people can tell them apart:  here you could have called the first version lcalc-1.23.spkg, then lcalc-1.23.p1.spkg, etc.  The changes in each version should be docuemtned in SPKG.txt.\n\nHere's the error I got installing it:\n\n```\n...\ng++ -Wa,-W -O3  -Wno-deprecated  -ffast-math -fPIC  -I../include -I/usr/local/include/pari  -DINCLUDE_PARI -c Lcommandline_elliptic.cc\nLcommandline_elliptic.cc: In function \u2018void data_E(char*, char*, char*, char*, char*, int, Double*)\u2019:\nLcommandline_elliptic.cc:124: error: \u2018lgeti\u2019 was not declared in this scope\nmake[1]: *** [Lcommandline_elliptic.o] Error 1\nmake[1]: Leaving directory `/home/john/sage-4.3.1.alpha1/spkg/build/lcalc-1.23/src/src'\nmake: *** [all] Error 2\nError building lcalc\ncp: cannot stat `lcalc': No such file or directory\n\nreal\t0m17.528s\nuser\t0m16.449s\nsys\t0m0.564s\nsage: An error occurred while installing lcalc-1.23\nPlease email sage-devel http://groups.google.com/group/sage-devel\nexplaining the problem and send the relevant part of\nof /home/john/sage-4.3.1.alpha1/install.log.  Describe your computer, operating system, etc.\nIf you want to try to fix the problem yourself, *don't* just cd to\n/home/john/sage-4.3.1.alpha1/spkg/build/lcalc-1.23 and type 'make check' or whatever is appropriate.\nInstead, the following commands setup all environment variables\ncorrectly and load a subshell for you to debug the error:\n(cd '/home/john/sage-4.3.1.alpha1/spkg/build/lcalc-1.23' && '/home/john/sage-4.3.1.alpha1/sage' -sh)\nWhen you are done debugging, you can type \"exit\" to leave the\nsubshell.\n```",
    "created_at": "2010-01-13T17:13:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34573",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:42'></a>
rishi, I could not install this version of lcalc.  I'll paste in below the error message I got.  Before that, two comments:  (1) the spkg should contain more than it does (an install script and the src directory).  See http://www.sagemath.org/doc/developer/producing_spkgs.html: there should be a file SPKG.txt, and there should be mercurial files, and an check script.... (2) When you make new versions of the spkg it's helpful for the name to change sp people can tell them apart:  here you could have called the first version lcalc-1.23.spkg, then lcalc-1.23.p1.spkg, etc.  The changes in each version should be docuemtned in SPKG.txt.

Here's the error I got installing it:

```
...
g++ -Wa,-W -O3  -Wno-deprecated  -ffast-math -fPIC  -I../include -I/usr/local/include/pari  -DINCLUDE_PARI -c Lcommandline_elliptic.cc
Lcommandline_elliptic.cc: In function ‘void data_E(char*, char*, char*, char*, char*, int, Double*)’:
Lcommandline_elliptic.cc:124: error: ‘lgeti’ was not declared in this scope
make[1]: *** [Lcommandline_elliptic.o] Error 1
make[1]: Leaving directory `/home/john/sage-4.3.1.alpha1/spkg/build/lcalc-1.23/src/src'
make: *** [all] Error 2
Error building lcalc
cp: cannot stat `lcalc': No such file or directory

real	0m17.528s
user	0m16.449s
sys	0m0.564s
sage: An error occurred while installing lcalc-1.23
Please email sage-devel http://groups.google.com/group/sage-devel
explaining the problem and send the relevant part of
of /home/john/sage-4.3.1.alpha1/install.log.  Describe your computer, operating system, etc.
If you want to try to fix the problem yourself, *don't* just cd to
/home/john/sage-4.3.1.alpha1/spkg/build/lcalc-1.23 and type 'make check' or whatever is appropriate.
Instead, the following commands setup all environment variables
correctly and load a subshell for you to debug the error:
(cd '/home/john/sage-4.3.1.alpha1/spkg/build/lcalc-1.23' && '/home/john/sage-4.3.1.alpha1/sage' -sh)
When you are done debugging, you can type "exit" to leave the
subshell.
```



---

archive/issue_comments_034574.json:
```json
{
    "body": "<a id='comment:43'></a>\nThis problem has to do with the makefile for lcalc, which needs work. Note that it includes the following, which explains why it didn't compile after that INCLUDE_PARI line was uncommented.\n\n```\nifeq ($(PARI_DEFINE),-DINCLUDE_PARI)\n    #location of pari.h.\n    LOCATION_PARI_H = /usr/local/include/pari #usual location\n\n    #location of libpari.a or of libpari.so\n    #depending on whether static or dynamic libraries are being used.\n    #On mac os x it's the former, on linux I think usually the latter.\n    LOCATION_PARI_LIBRARY = /usr/local/lib #usual location\nelse\n    #supplied as a dummy so as to avoid more ifeq's below\n    LOCATION_PARI_H = .\n    LOCATION_PARI_LIBRARY = .\nendif\n```",
    "created_at": "2010-01-13T21:56:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34574",
    "user": "https://trac.sagemath.org/admin/accounts/users/bober"
}
```

<a id='comment:43'></a>
This problem has to do with the makefile for lcalc, which needs work. Note that it includes the following, which explains why it didn't compile after that INCLUDE_PARI line was uncommented.

```
ifeq ($(PARI_DEFINE),-DINCLUDE_PARI)
    #location of pari.h.
    LOCATION_PARI_H = /usr/local/include/pari #usual location

    #location of libpari.a or of libpari.so
    #depending on whether static or dynamic libraries are being used.
    #On mac os x it's the former, on linux I think usually the latter.
    LOCATION_PARI_LIBRARY = /usr/local/lib #usual location
else
    #supplied as a dummy so as to avoid more ifeq's below
    LOCATION_PARI_H = .
    LOCATION_PARI_LIBRARY = .
endif
```



---

archive/issue_comments_034575.json:
```json
{
    "body": "Suggestion: in the function Lfunction_from_character, instead of calling chi.gauss_sum(), call chi.gauss_sum_numerical(). It is much faster, and in the end we are only interested in the numerical approximation anyway.\n\n```\nsage: G = DirichletGroup(101)            \nsage: chi = G[1]\nsage: time A = chi.gauss_sum()\nCPU times: user 19.05 s, sys: 0.02 s, total: 19.07 s\nWall time: 19.07 s\nsage: time B = chi.gauss_sum_numerical()\nCPU times: user 0.06 s, sys: 0.00 s, total: 0.06 s\nWall time: 0.06 s\n```",
    "created_at": "2010-01-13T22:11:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34575",
    "user": "https://trac.sagemath.org/admin/accounts/users/bober"
}
```

Suggestion: in the function Lfunction_from_character, instead of calling chi.gauss_sum(), call chi.gauss_sum_numerical(). It is much faster, and in the end we are only interested in the numerical approximation anyway.

```
sage: G = DirichletGroup(101)            
sage: chi = G[1]
sage: time A = chi.gauss_sum()
CPU times: user 19.05 s, sys: 0.02 s, total: 19.07 s
Wall time: 19.07 s
sage: time B = chi.gauss_sum_numerical()
CPU times: user 0.06 s, sys: 0.00 s, total: 0.06 s
Wall time: 0.06 s
```



---

archive/issue_comments_034576.json:
```json
{
    "body": "<a id='comment:45'></a>\nThanks Bober for the comment about compiling lcalc.\n\n I wrote the two functions to generate L functions of Dirichlet characters and Elliptic Curves exclusively for testing of wrapper. It was not supposed to be for end users at all. I wrote very simple function whose sole purpose was to not introduce any bugs. In fact they were in a file called for_testing.py till the refactor of code.\n\nCan we do optimization outside the wrapper itself. \n\nMaybe we can write new functions in the lfunctions directory to generate elliptic curve, modular forms and dirichlet lfunctions.\n\nReplying to [bober](#comment%3A44):\n> Suggestion: in the function Lfunction_from_character, instead of calling chi.gauss_sum(), call chi.gauss_sum_numerical(). It is much faster, and in the end we are only interested in the numerical approximation anyway.\n> \n> ```\n> sage: G = DirichletGroup(101)            \n> sage: chi = G[1]\n> sage: time A = chi.gauss_sum()\n> CPU times: user 19.05 s, sys: 0.02 s, total: 19.07 s\n> Wall time: 19.07 s\n> sage: time B = chi.gauss_sum_numerical()\n> CPU times: user 0.06 s, sys: 0.00 s, total: 0.06 s\n> Wall time: 0.06 s\n> ```\n",
    "created_at": "2010-01-14T00:48:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34576",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:45'></a>
Thanks Bober for the comment about compiling lcalc.

 I wrote the two functions to generate L functions of Dirichlet characters and Elliptic Curves exclusively for testing of wrapper. It was not supposed to be for end users at all. I wrote very simple function whose sole purpose was to not introduce any bugs. In fact they were in a file called for_testing.py till the refactor of code.

Can we do optimization outside the wrapper itself. 

Maybe we can write new functions in the lfunctions directory to generate elliptic curve, modular forms and dirichlet lfunctions.

Replying to [bober](#comment%3A44):
> Suggestion: in the function Lfunction_from_character, instead of calling chi.gauss_sum(), call chi.gauss_sum_numerical(). It is much faster, and in the end we are only interested in the numerical approximation anyway.
> 
> ```
> sage: G = DirichletGroup(101)            
> sage: chi = G[1]
> sage: time A = chi.gauss_sum()
> CPU times: user 19.05 s, sys: 0.02 s, total: 19.07 s
> Wall time: 19.07 s
> sage: time B = chi.gauss_sum_numerical()
> CPU times: user 0.06 s, sys: 0.00 s, total: 0.06 s
> Wall time: 0.06 s
> ```




---

archive/attachments_006080.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "lcalc-1.23.p1.spkg",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5396/lcalc-1.23.p1.spkg",
    "created_at": "2010-01-14T03:43:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.spkg",
    "user": "https://github.com/rishikesha"
}
```



---

archive/issue_comments_034577.json:
```json
{
    "body": "For lcalc wrapper. This should work with the old code based on command line version of lcalc",
    "created_at": "2010-01-14T03:43:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34577",
    "user": "https://github.com/rishikesha"
}
```

For lcalc wrapper. This should work with the old code based on command line version of lcalc



---

archive/issue_comments_034578.json:
```json
{
    "body": "<a id='comment:46'></a>\nI am attaching another spkg. This is based on the earlier lcalc spkg. This should work. This also follows the instructions of http://www.sagemath.org/doc/developer/producing_spkgs.html\n\nSpecial thanks to John from whom I have learnt a lot during this review process.",
    "created_at": "2010-01-14T03:55:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34578",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:46'></a>
I am attaching another spkg. This is based on the earlier lcalc spkg. This should work. This also follows the instructions of http://www.sagemath.org/doc/developer/producing_spkgs.html

Special thanks to John from whom I have learnt a lot during this review process.



---

archive/issue_events_033733.json:
```json
{
    "actor": "https://github.com/rishikesha",
    "created_at": "2010-01-14T03:55:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33733"
}
```



---

archive/issue_events_033734.json:
```json
{
    "actor": "https://github.com/rishikesha",
    "created_at": "2010-01-14T03:55:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33734"
}
```



---

archive/issue_comments_034579.json:
```json
{
    "body": "I realized that instead of having Makefile.sage, having just a patch file will make it more robust to changes in Makefile by Mike later.",
    "created_at": "2010-01-14T17:18:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34579",
    "user": "https://github.com/rishikesha"
}
```

I realized that instead of having Makefile.sage, having just a patch file will make it more robust to changes in Makefile by Mike later.



---

archive/issue_events_033735.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/drkirkby",
    "created_at": "2010-01-31T05:59:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33735"
}
```



---

archive/issue_events_033736.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/drkirkby",
    "created_at": "2010-01-31T05:59:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33736"
}
```



---

archive/issue_comments_034580.json:
```json
{
    "body": "**Changing reviewer** from \"John Cremona\" to \"John Cremona, David Kirkby\".",
    "created_at": "2010-01-31T05:59:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34580",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

**Changing reviewer** from "John Cremona" to "John Cremona, David Kirkby".



---

archive/attachments_006081.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "lcalc-1.23.p2.spkg",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5396/lcalc-1.23.p2.spkg",
    "created_at": "2010-01-31T05:59:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.spkg",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```



---

archive/issue_comments_034581.json:
```json
{
    "body": "<a id='comment:47'></a>\nWilliam said the other day he does not want to see patches used. One reason cited was the fact that not all systems have a patch command, though I pointed out 'patch' was a requirement for POSIX. \n\nAs such, I think you should rename this to a makefile.patch, and go back to your original solution of a patched makefile in the patches directory.",
    "created_at": "2010-01-31T05:59:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34581",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:47'></a>
William said the other day he does not want to see patches used. One reason cited was the fact that not all systems have a patch command, though I pointed out 'patch' was a requirement for POSIX. 

As such, I think you should rename this to a makefile.patch, and go back to your original solution of a patched makefile in the patches directory.



---

archive/issue_comments_034582.json:
```json
{
    "body": "Following David Kirby's comment, I have removed the changes from p2. This is exactly the same as lcalc-1.23.p1",
    "created_at": "2010-02-02T14:26:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34582",
    "user": "https://github.com/rishikesha"
}
```

Following David Kirby's comment, I have removed the changes from p2. This is exactly the same as lcalc-1.23.p1



---

archive/issue_events_033737.json:
```json
{
    "actor": "https://github.com/rishikesha",
    "created_at": "2010-02-02T14:28:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33737"
}
```



---

archive/issue_events_033738.json:
```json
{
    "actor": "https://github.com/rishikesha",
    "created_at": "2010-02-02T14:28:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33738"
}
```



---

archive/attachments_006082.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "lcalc-1.23.p3.spkg",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5396/lcalc-1.23.p3.spkg",
    "created_at": "2010-02-02T14:28:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.spkg",
    "user": "https://github.com/rishikesha"
}
```



---

archive/issue_comments_034583.json:
```json
{
    "body": "<a id='comment:48'></a>\nI have removed the patch file, and gone back to the version 1.23.p1. This works on boxen. All the tests passed.",
    "created_at": "2010-02-02T14:28:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34583",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:48'></a>
I have removed the patch file, and gone back to the version 1.23.p1. This works on boxen. All the tests passed.



---

archive/issue_events_033739.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/drkirkby",
    "created_at": "2010-02-02T17:53:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33739"
}
```



---

archive/issue_events_033740.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/drkirkby",
    "created_at": "2010-02-02T17:53:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33740"
}
```



---

archive/issue_comments_034584.json:
```json
{
    "body": "<a id='comment:49'></a>\nI'm a bit concerned about the need to change the doctest to check for a result which is very different from the original, so the doctest chances from \n\n```\n0.305999824716... \n\nto \n\n0.305999..\n```\n\nI know numerical noise does occur in calculations, but this seems a lot of it. Is there independant verification the new result is correct (in which case let's use it, and not all the dots), or is there independant verification the old result is correct, in which case it is doubtful this should be put in. \n\nI've expressed concern before about the way lcalc hides compiler warnings, which happened to be in a way that it stopped the Solaris build  #6609. It basically added a compiler flag, which was supposed to be sent to the gnu assembler, to suppress warnings. \n\nThere are also #7178 and #7065 which I've raised. \n\nThe fact this is so such a different result to the previous one, deserves some explanation I feel. I'd like to see an independent check with Mathematica. \n\nI'm marking it as 'needs info', as I think we should not just ignore the different result, but understand why it is so different. \n\nDave",
    "created_at": "2010-02-02T17:53:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34584",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:49'></a>
I'm a bit concerned about the need to change the doctest to check for a result which is very different from the original, so the doctest chances from 

```
0.305999824716... 

to 

0.305999..
```

I know numerical noise does occur in calculations, but this seems a lot of it. Is there independant verification the new result is correct (in which case let's use it, and not all the dots), or is there independant verification the old result is correct, in which case it is doubtful this should be put in. 

I've expressed concern before about the way lcalc hides compiler warnings, which happened to be in a way that it stopped the Solaris build  #6609. It basically added a compiler flag, which was supposed to be sent to the gnu assembler, to suppress warnings. 

There are also #7178 and #7065 which I've raised. 

The fact this is so such a different result to the previous one, deserves some explanation I feel. I'd like to see an independent check with Mathematica. 

I'm marking it as 'needs info', as I think we should not just ignore the different result, but understand why it is so different. 

Dave



---

archive/issue_comments_034585.json:
```json
{
    "body": "<a id='comment:50'></a>\nI'm not a mathematician, but do have access to Mathematica. Can anyone tell me what this means, so I can compute this value in Mathematica? If I increase the precision, I should be able to get an accurate result. \n\nI have a comment regarding the remark by John Cremona about a different numerical value, and whether this could be due to his use of a 32-bit computer. This looks all like floating point maths to me, so the result would depend only on the IEEE floating point standard, which should give identical results on any Intel or AMD CPU,. as they both use 64-bits for the result, but work at 80 bits internally. This makes me even more concerned, and believe this needs addressing. \n\nDave",
    "created_at": "2010-02-02T19:11:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34585",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:50'></a>
I'm not a mathematician, but do have access to Mathematica. Can anyone tell me what this means, so I can compute this value in Mathematica? If I increase the precision, I should be able to get an accurate result. 

I have a comment regarding the remark by John Cremona about a different numerical value, and whether this could be due to his use of a 32-bit computer. This looks all like floating point maths to me, so the result would depend only on the IEEE floating point standard, which should give identical results on any Intel or AMD CPU,. as they both use 64-bits for the result, but work at 80 bits internally. This makes me even more concerned, and believe this needs addressing. 

Dave



---

archive/issue_comments_034586.json:
```json
{
    "body": "<a id='comment:51'></a>\nI don't think Mathematica will be much help here:  evaluating derivatives of L-series of elliptic curves. \n\nI tried Magma, but as far as I can see they don't do derivatives.  They can evaluate the L-series, and I did a \"poor man's derivative\" evaluating (L(0.5+e)-L(0.5))/e for small e and the result seemed to converge to  0.017188297766 and not anything like 0.305.\n\nSo Dave's question about what's going on here does need to be answered.",
    "created_at": "2010-02-02T20:30:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34586",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:51'></a>
I don't think Mathematica will be much help here:  evaluating derivatives of L-series of elliptic curves. 

I tried Magma, but as far as I can see they don't do derivatives.  They can evaluate the L-series, and I did a "poor man's derivative" evaluating (L(0.5+e)-L(0.5))/e for small e and the result seemed to converge to  0.017188297766 and not anything like 0.305.

So Dave's question about what's going on here does need to be answered.



---

archive/issue_comments_034587.json:
```json
{
    "body": "<a id='comment:52'></a>\n0.305... looks more like the value of L.derivative(1).",
    "created_at": "2010-02-02T20:33:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34587",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:52'></a>
0.305... looks more like the value of L.derivative(1).



---

archive/issue_comments_034588.json:
```json
{
    "body": "<a id='comment:53'></a>\nReplying to [mhansen](#comment%3A52):\n> 0.305... looks more like the value of L.derivative(1).\n\n\nYou're right!  That's the value I have in my database, anyway.  It is possible that lcalc normalises the functions so that the centre of the critical strip is 0.5 and not 1.\n\nSo I can verify with my own program that the value to around 50 decimals is\n\n0.305999773834052301820483683321676474452637774590",
    "created_at": "2010-02-02T20:41:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34588",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:53'></a>
Replying to [mhansen](#comment%3A52):
> 0.305... looks more like the value of L.derivative(1).


You're right!  That's the value I have in my database, anyway.  It is possible that lcalc normalises the functions so that the centre of the critical strip is 0.5 and not 1.

So I can verify with my own program that the value to around 50 decimals is

0.305999773834052301820483683321676474452637774590



---

archive/issue_comments_034589.json:
```json
{
    "body": "<a id='comment:54'></a>\nAnd in Magma (once I read the manual):\n\n```\n> E := EllipticCurve([0,0,1,-1,0]);\n> CremonaReference(E);             \n37a1\n> L := LSeries(E);                 \n> Evaluate(L,1 : Derivative:=1);\n0.305999773834052301820483683322\n```",
    "created_at": "2010-02-02T20:51:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34589",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:54'></a>
And in Magma (once I read the manual):

```
> E := EllipticCurve([0,0,1,-1,0]);
> CremonaReference(E);             
37a1
> L := LSeries(E);                 
> Evaluate(L,1 : Derivative:=1);
0.305999773834052301820483683322
```



---

archive/issue_comments_034590.json:
```json
{
    "body": "<a id='comment:55'></a>\nAs you can tell, this is outside my Mathematical knowledge, but just a few comments. \n\n* If this behaves differently to what someone might expect, then it should be documented how it works. I believe John is an expert in this area and he was surprised by the behavior, then clearly it could cause confusion. \n* Since John's computed an computed a result with high precision, I would put that as a comment in the test code. \n* I recall William once saying lcalc was very fast, but to me at least, this is not computing a very accurate result. I would suggest that should also be documented too. along with slower, but more accurate alternatives. \n\n\n\nDave",
    "created_at": "2010-02-02T22:42:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34590",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:55'></a>
As you can tell, this is outside my Mathematical knowledge, but just a few comments. 

* If this behaves differently to what someone might expect, then it should be documented how it works. I believe John is an expert in this area and he was surprised by the behavior, then clearly it could cause confusion. 
* Since John's computed an computed a result with high precision, I would put that as a comment in the test code. 
* I recall William once saying lcalc was very fast, but to me at least, this is not computing a very accurate result. I would suggest that should also be documented too. along with slower, but more accurate alternatives. 



Dave



---

archive/issue_comments_034591.json:
```json
{
    "body": "<a id='comment:56'></a>\nYes it does normalize so that the center is at 0.5. The derivatives are not precise. I have added Mike to the discussion list so that he can give more details.",
    "created_at": "2010-02-03T02:04:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34591",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:56'></a>
Yes it does normalize so that the center is at 0.5. The derivatives are not precise. I have added Mike to the discussion list so that he can give more details.



---

archive/issue_comments_034592.json:
```json
{
    "body": "<a id='comment:57'></a>\nI should have mentioned it in the last posting. I was planning to create another layer of python lfuntion class which will have the standard center (for general newforms).",
    "created_at": "2010-02-03T02:17:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34592",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:57'></a>
I should have mentioned it in the last posting. I was planning to create another layer of python lfuntion class which will have the standard center (for general newforms).



---

archive/issue_comments_034593.json:
```json
{
    "body": "<a id='comment:58'></a>\nReplying to [drkirkby](#comment%3A55):\n> As you can tell, this is outside my Mathematical knowledge, but just a few comments. \n> \n> * If this behaves differently to what someone might expect, then it should be documented how it works. I believe John is an expert in this area and he was surprised by the behavior, then clearly it could cause confusion. \n\n\nThe center being at half is documented. The key line is\n \\Lambda(s) = \\omega Q^s \\overline{\\Lambda(1-\\bar s)} \n\n>  * Since John's computed an computed a result with high precision, I would put that as a comment in the test code. \n\n\nlcalc uses double to compute. The high precision is not possible. There is another ticket which contains documentation about loss of precision when calculating derivatives.\n\n\n>  * I recall William once saying lcalc was very fast, but to me at least, this is not computing a very accurate result. I would suggest that should also be documented too. along with slower, but more accurate alternatives. \n\n\nUsing double makes things fast, but they will not be as accurate as using a multiprecision library.\n\n> \n> Dave\n",
    "created_at": "2010-02-03T02:47:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34593",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:58'></a>
Replying to [drkirkby](#comment%3A55):
> As you can tell, this is outside my Mathematical knowledge, but just a few comments. 
> 
> * If this behaves differently to what someone might expect, then it should be documented how it works. I believe John is an expert in this area and he was surprised by the behavior, then clearly it could cause confusion. 


The center being at half is documented. The key line is
 \Lambda(s) = \omega Q^s \overline{\Lambda(1-\bar s)} 

>  * Since John's computed an computed a result with high precision, I would put that as a comment in the test code. 


lcalc uses double to compute. The high precision is not possible. There is another ticket which contains documentation about loss of precision when calculating derivatives.


>  * I recall William once saying lcalc was very fast, but to me at least, this is not computing a very accurate result. I would suggest that should also be documented too. along with slower, but more accurate alternatives. 


Using double makes things fast, but they will not be as accurate as using a multiprecision library.

> 
> Dave




---

archive/issue_comments_034594.json:
```json
{
    "body": "<a id='comment:59'></a>\nI think it is important to note here that lcalc can handle a vastly larger assortment of L-functions than the opposition.  For example, the one value I recomputed independently is of the only kind I can handle with my code (and I can only compute the value at the centre, not anywhere else!).  So we should not leave the impression that lcalc is inferior just because it only uses double precision and not multi.",
    "created_at": "2010-02-03T09:24:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34594",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:59'></a>
I think it is important to note here that lcalc can handle a vastly larger assortment of L-functions than the opposition.  For example, the one value I recomputed independently is of the only kind I can handle with my code (and I can only compute the value at the centre, not anywhere else!).  So we should not leave the impression that lcalc is inferior just because it only uses double precision and not multi.



---

archive/issue_events_033741.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-02-03T09:24:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33741"
}
```



---

archive/issue_events_033742.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-02-03T09:24:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33742"
}
```



---

archive/issue_comments_034595.json:
```json
{
    "body": "<a id='comment:60'></a>\nReplying to [cremona](#comment%3A59):\n> I think it is important to note here that lcalc can handle a vastly larger assortment of L-functions than the opposition.  For example, the one value I recomputed independently is of the only kind I can handle with my code (and I can only compute the value at the centre, not anywhere else!).  So we should not leave the impression that lcalc is inferior just because it only uses double precision and not multi.\n\n\nI agree, but there is significant precision loss - perhaps more than some might expect, so personally I would have thought that worth documenting. Of course, anyone should know hardware floating point will be less accurate (but faster) than extended precision in software.  \n\nGiven for simple computations, 16 digits of precision are possible, but here only 9, I would have thought that work documenting. \n\nThe fact lcalc can handle a vastly larger assortment of L-functions than anything else should also be noted! \n\nDave",
    "created_at": "2010-02-03T11:44:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34595",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:60'></a>
Replying to [cremona](#comment%3A59):
> I think it is important to note here that lcalc can handle a vastly larger assortment of L-functions than the opposition.  For example, the one value I recomputed independently is of the only kind I can handle with my code (and I can only compute the value at the centre, not anywhere else!).  So we should not leave the impression that lcalc is inferior just because it only uses double precision and not multi.


I agree, but there is significant precision loss - perhaps more than some might expect, so personally I would have thought that worth documenting. Of course, anyone should know hardware floating point will be less accurate (but faster) than extended precision in software.  

Given for simple computations, 16 digits of precision are possible, but here only 9, I would have thought that work documenting. 

The fact lcalc can handle a vastly larger assortment of L-functions than anything else should also be noted! 

Dave



---

archive/issue_comments_034596.json:
```json
{
    "body": "<a id='comment:61'></a>\nReplying to [drkirkby](#comment%3A60):\n> Replying to [cremona](#comment%3A59):\n> > I think it is important to note here that lcalc can handle a vastly larger assortment of L-functions than the opposition.  For example, the one value I recomputed independently is of the only kind I can handle with my code (and I can only compute the value at the centre, not anywhere else!).  So we should not leave the impression that lcalc is inferior just because it only uses double precision and not multi.\n\n> \n> I agree, but there is significant precision loss - perhaps more than some might expect, so personally I would have thought that worth documenting. Of course, anyone should know hardware floating point will be less accurate (but faster) than extended precision in software.  \n> \n> Given for simple computations, 16 digits of precision are possible, but here only 9, I would have thought that work documenting. \n> \n> The fact lcalc can handle a vastly larger assortment of L-functions than anything else should also be noted! \n> \n> Dave\n",
    "created_at": "2010-02-03T15:26:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34596",
    "user": "https://trac.sagemath.org/admin/accounts/users/mrubinst"
}
```

<a id='comment:61'></a>
Replying to [drkirkby](#comment%3A60):
> Replying to [cremona](#comment%3A59):
> > I think it is important to note here that lcalc can handle a vastly larger assortment of L-functions than the opposition.  For example, the one value I recomputed independently is of the only kind I can handle with my code (and I can only compute the value at the centre, not anywhere else!).  So we should not leave the impression that lcalc is inferior just because it only uses double precision and not multi.

> 
> I agree, but there is significant precision loss - perhaps more than some might expect, so personally I would have thought that worth documenting. Of course, anyone should know hardware floating point will be less accurate (but faster) than extended precision in software.  
> 
> Given for simple computations, 16 digits of precision are possible, but here only 9, I would have thought that work documenting. 
> 
> The fact lcalc can handle a vastly larger assortment of L-functions than anything else should also be noted! 
> 
> Dave




---

archive/issue_comments_034597.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,77 @@\n-Wrapping lcalc library\n+\n+I plan to release version L-1.3 in a couple of weeks, and also to\n+have Rishi update his cython wrapper during our march workshop (I made\n+a handful of changes that will need him to update).\n+\n+There are a number of key improvements.\n+\n+Precision-\n+\n+I've spent quite a bit of effort getting a multiprecision version\n+of lcalc to work. I now have it working with Bailey's double double\n+and quad double (about 30 and 60 digits respectively) and also MPFR,\n+though the latter seems quite slow, perhaps because of the c++ wrapper that I am using... haven't dug too deep with the latter since\n+Bailey's dd and qd works quite nicely, and 60 digits is quite reasonable. Nonetheless,\n+it does work to higher precision with mpfr.\n+\n+I am also developing a test suite to be run at compile time to check on accuracy of many of the routines and do various timing tests.\n+\n+Output precision-\n+\n+Rishi needs to handle this carefully since I have a parameter\n+which describes how many digits of the working digits are accurate.\n+I use this parameter when outputting my results. Not sure how\n+or if Rishi makes use of this extra info, or just passes the double results\n+of my routines.\n+\n+At the same time I am wiring in better control of output precision\n+based on the explicit formula and also on using the smooth approximate\n+functional equation with a couple of different test functions.\n+\n+Derivatives-\n+\n+the version in L-1.23 is very crummy and I fixed that up too\n+in version L-1.3. I initially just wanted to get that functionality in there, and I now use (version L-1.3 to be released) higher central differences for the derivatives that gives an accuracy of about Digits*4/(n+4) for the nth derivative. So for the 1st derivative,\n+my new version is accurate to about 4/5 the working precision, so roughly 12-13 digits with double precision and 24-25 digits with Bailey's dd.\n+\n+\n+Zeros-\n+\n+I fixed a subtle bug that would on rare occasion cause some zeros to be omitted\n+and other zeros to be duplicated in their place.\n+\n+I'm also finishing to wire in a test of the explicit formula (based on a prototype that Kevin McGown helped me with in our kickoff frg coding sprint) that will prevent\n+such bugs from going unnoticed!\n+\n+Trivial zeros-\n+\n+I built in knowledge of the trivial zeros so that correct output is displayed there.\n+This allowed me to apply the functional equation correctly, so that the new version\n+works throughout the complex plane (previously it gave nonsense results left of 0).\n+\n+Band limited interpolation-\n+\n+I'm wiring in some code of ghaith Hiary for computing zeta using band limited\n+interpolation. This will give a significant speedup in, for example, computing zeros of zeta.\n+\n+Start at Nth zero-\n+\n+Ability to start searching for zeros from the Nth zero onward (rather than\n+always starting from the real axis). This one was long overdue!\n+\n+\n+Many small improvements that have a big impact-\n+\n+For example I coded up my own trig functions that are about 4 times faster than\n+the machines (for double precision) and also faster than Bailey's and MPFR's.\n+\n+Anyhow, my package definitely needs a companion paper and much better\n+documentation. Something to work on...\n+\n+Other planned improvements for version L-1.4:\n+\n+1) broader use of openmp in some of the key routines\n+2) fft algorithms- will lead to orders of magnitude improvement\n+especially for higher degree L-funcitons\n+3) L-functions of number fields and symmetric powers\n+\n``````\n",
    "created_at": "2010-02-03T15:26:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34597",
    "user": "https://trac.sagemath.org/admin/accounts/users/mrubinst"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,77 @@
-Wrapping lcalc library
+
+I plan to release version L-1.3 in a couple of weeks, and also to
+have Rishi update his cython wrapper during our march workshop (I made
+a handful of changes that will need him to update).
+
+There are a number of key improvements.
+
+Precision-
+
+I've spent quite a bit of effort getting a multiprecision version
+of lcalc to work. I now have it working with Bailey's double double
+and quad double (about 30 and 60 digits respectively) and also MPFR,
+though the latter seems quite slow, perhaps because of the c++ wrapper that I am using... haven't dug too deep with the latter since
+Bailey's dd and qd works quite nicely, and 60 digits is quite reasonable. Nonetheless,
+it does work to higher precision with mpfr.
+
+I am also developing a test suite to be run at compile time to check on accuracy of many of the routines and do various timing tests.
+
+Output precision-
+
+Rishi needs to handle this carefully since I have a parameter
+which describes how many digits of the working digits are accurate.
+I use this parameter when outputting my results. Not sure how
+or if Rishi makes use of this extra info, or just passes the double results
+of my routines.
+
+At the same time I am wiring in better control of output precision
+based on the explicit formula and also on using the smooth approximate
+functional equation with a couple of different test functions.
+
+Derivatives-
+
+the version in L-1.23 is very crummy and I fixed that up too
+in version L-1.3. I initially just wanted to get that functionality in there, and I now use (version L-1.3 to be released) higher central differences for the derivatives that gives an accuracy of about Digits*4/(n+4) for the nth derivative. So for the 1st derivative,
+my new version is accurate to about 4/5 the working precision, so roughly 12-13 digits with double precision and 24-25 digits with Bailey's dd.
+
+
+Zeros-
+
+I fixed a subtle bug that would on rare occasion cause some zeros to be omitted
+and other zeros to be duplicated in their place.
+
+I'm also finishing to wire in a test of the explicit formula (based on a prototype that Kevin McGown helped me with in our kickoff frg coding sprint) that will prevent
+such bugs from going unnoticed!
+
+Trivial zeros-
+
+I built in knowledge of the trivial zeros so that correct output is displayed there.
+This allowed me to apply the functional equation correctly, so that the new version
+works throughout the complex plane (previously it gave nonsense results left of 0).
+
+Band limited interpolation-
+
+I'm wiring in some code of ghaith Hiary for computing zeta using band limited
+interpolation. This will give a significant speedup in, for example, computing zeros of zeta.
+
+Start at Nth zero-
+
+Ability to start searching for zeros from the Nth zero onward (rather than
+always starting from the real axis). This one was long overdue!
+
+
+Many small improvements that have a big impact-
+
+For example I coded up my own trig functions that are about 4 times faster than
+the machines (for double precision) and also faster than Bailey's and MPFR's.
+
+Anyhow, my package definitely needs a companion paper and much better
+documentation. Something to work on...
+
+Other planned improvements for version L-1.4:
+
+1) broader use of openmp in some of the key routines
+2) fft algorithms- will lead to orders of magnitude improvement
+especially for higher degree L-funcitons
+3) L-functions of number fields and symmetric powers
+
``````




---

archive/issue_comments_034598.json:
```json
{
    "body": "<a id='comment:62'></a>\nI plan to release version L-1.3 in a couple of weeks, and also to\nhave Rishi update his cython wrapper during our march workshop (I made\na handful of changes that will need him to update).\n\nThere are a number of key improvements.\n\nPrecision-\n\nI've spent quite a bit of effort getting a multiprecision version\nof lcalc to work. I now have it working with Bailey's double double\nand quad double (about 30 and 60 digits respectively) and also MPFR,\nthough the latter seems quite slow, perhaps because of the c++ wrapper that I am using... haven't dug too deep with the latter since\nBailey's dd and qd works quite nicely, and 60 digits is quite reasonable. Nonetheless,\nit does work to higher precision with mpfr.\n\nI am also developing a test suite to be run at compile time to check on accuracy of many of the routines and do various timing tests.\n\nOutput precision-\n\nRishi needs to handle this carefully since I have a parameter\nwhich describes how many digits of the working digits are accurate.\nI use this parameter when outputting my results. Not sure how\nor if Rishi makes use of this extra info, or just passes the double results\nof my routines.\n\nAt the same time I am wiring in better control of output precision\nbased on the explicit formula and also on using the smooth approximate\nfunctional equation with a couple of different test functions.\n\nDerivatives-\n\nthe version in L-1.23 is very crummy and I fixed that up too\nin version L-1.3. I initially just wanted to get that functionality in there, and I now use (version L-1.3 to be released) higher central differences for the derivatives that gives an accuracy of about Digits*4/(n+4) for the nth derivative. So for the 1st derivative,\nmy new version is accurate to about 4/5 the working precision, so roughly 12-13 digits with double precision and 24-25 digits with Bailey's dd.\n\n\nZeros-\n\nI fixed a subtle bug that would on rare occasion cause some zeros to be omitted\nand other zeros to be duplicated in their place.\n\nI'm also finishing to wire in a test of the explicit formula (based on a prototype that Kevin McGown helped me with in our kickoff frg coding sprint) that will prevent\nsuch bugs from going unnoticed!\n\nTrivial zeros-\n\nI built in knowledge of the trivial zeros so that correct output is displayed there.\nThis allowed me to apply the functional equation correctly, so that the new version\nworks throughout the complex plane (previously it gave nonsense results left of 0).\n\nBand limited interpolation-\n\nI'm wiring in some code of ghaith Hiary for computing zeta using band limited\ninterpolation. This will give a significant speedup in, for example, computing zeros of zeta.\n\nStart at Nth zero-\n\nAbility to start searching for zeros from the Nth zero onward (rather than\nalways starting from the real axis). This one was long overdue!\n\n\nMany small improvements that have a big impact-\n\nFor example I coded up my own trig functions that are about 4 times faster than\nthe machines (for double precision) and also faster than Bailey's and MPFR's.\n\nAnyhow, my package definitely needs a companion paper and much better\ndocumentation. Something to work on...\n\nOther planned improvements for version L-1.4:\n\n1) broader use of openmp in some of the key routines\n2) fft algorithms- will lead to orders of magnitude improvement\nespecially for higher degree L-funcitons\n3) L-functions of number fields and symmetric powers",
    "created_at": "2010-02-03T15:33:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34598",
    "user": "https://trac.sagemath.org/admin/accounts/users/mrubinst"
}
```

<a id='comment:62'></a>
I plan to release version L-1.3 in a couple of weeks, and also to
have Rishi update his cython wrapper during our march workshop (I made
a handful of changes that will need him to update).

There are a number of key improvements.

Precision-

I've spent quite a bit of effort getting a multiprecision version
of lcalc to work. I now have it working with Bailey's double double
and quad double (about 30 and 60 digits respectively) and also MPFR,
though the latter seems quite slow, perhaps because of the c++ wrapper that I am using... haven't dug too deep with the latter since
Bailey's dd and qd works quite nicely, and 60 digits is quite reasonable. Nonetheless,
it does work to higher precision with mpfr.

I am also developing a test suite to be run at compile time to check on accuracy of many of the routines and do various timing tests.

Output precision-

Rishi needs to handle this carefully since I have a parameter
which describes how many digits of the working digits are accurate.
I use this parameter when outputting my results. Not sure how
or if Rishi makes use of this extra info, or just passes the double results
of my routines.

At the same time I am wiring in better control of output precision
based on the explicit formula and also on using the smooth approximate
functional equation with a couple of different test functions.

Derivatives-

the version in L-1.23 is very crummy and I fixed that up too
in version L-1.3. I initially just wanted to get that functionality in there, and I now use (version L-1.3 to be released) higher central differences for the derivatives that gives an accuracy of about Digits*4/(n+4) for the nth derivative. So for the 1st derivative,
my new version is accurate to about 4/5 the working precision, so roughly 12-13 digits with double precision and 24-25 digits with Bailey's dd.


Zeros-

I fixed a subtle bug that would on rare occasion cause some zeros to be omitted
and other zeros to be duplicated in their place.

I'm also finishing to wire in a test of the explicit formula (based on a prototype that Kevin McGown helped me with in our kickoff frg coding sprint) that will prevent
such bugs from going unnoticed!

Trivial zeros-

I built in knowledge of the trivial zeros so that correct output is displayed there.
This allowed me to apply the functional equation correctly, so that the new version
works throughout the complex plane (previously it gave nonsense results left of 0).

Band limited interpolation-

I'm wiring in some code of ghaith Hiary for computing zeta using band limited
interpolation. This will give a significant speedup in, for example, computing zeros of zeta.

Start at Nth zero-

Ability to start searching for zeros from the Nth zero onward (rather than
always starting from the real axis). This one was long overdue!


Many small improvements that have a big impact-

For example I coded up my own trig functions that are about 4 times faster than
the machines (for double precision) and also faster than Bailey's and MPFR's.

Anyhow, my package definitely needs a companion paper and much better
documentation. Something to work on...

Other planned improvements for version L-1.4:

1) broader use of openmp in some of the key routines
2) fft algorithms- will lead to orders of magnitude improvement
especially for higher degree L-funcitons
3) L-functions of number fields and symmetric powers



---

archive/issue_comments_034599.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,77 +1 @@\n-\n-I plan to release version L-1.3 in a couple of weeks, and also to\n-have Rishi update his cython wrapper during our march workshop (I made\n-a handful of changes that will need him to update).\n-\n-There are a number of key improvements.\n-\n-Precision-\n-\n-I've spent quite a bit of effort getting a multiprecision version\n-of lcalc to work. I now have it working with Bailey's double double\n-and quad double (about 30 and 60 digits respectively) and also MPFR,\n-though the latter seems quite slow, perhaps because of the c++ wrapper that I am using... haven't dug too deep with the latter since\n-Bailey's dd and qd works quite nicely, and 60 digits is quite reasonable. Nonetheless,\n-it does work to higher precision with mpfr.\n-\n-I am also developing a test suite to be run at compile time to check on accuracy of many of the routines and do various timing tests.\n-\n-Output precision-\n-\n-Rishi needs to handle this carefully since I have a parameter\n-which describes how many digits of the working digits are accurate.\n-I use this parameter when outputting my results. Not sure how\n-or if Rishi makes use of this extra info, or just passes the double results\n-of my routines.\n-\n-At the same time I am wiring in better control of output precision\n-based on the explicit formula and also on using the smooth approximate\n-functional equation with a couple of different test functions.\n-\n-Derivatives-\n-\n-the version in L-1.23 is very crummy and I fixed that up too\n-in version L-1.3. I initially just wanted to get that functionality in there, and I now use (version L-1.3 to be released) higher central differences for the derivatives that gives an accuracy of about Digits*4/(n+4) for the nth derivative. So for the 1st derivative,\n-my new version is accurate to about 4/5 the working precision, so roughly 12-13 digits with double precision and 24-25 digits with Bailey's dd.\n-\n-\n-Zeros-\n-\n-I fixed a subtle bug that would on rare occasion cause some zeros to be omitted\n-and other zeros to be duplicated in their place.\n-\n-I'm also finishing to wire in a test of the explicit formula (based on a prototype that Kevin McGown helped me with in our kickoff frg coding sprint) that will prevent\n-such bugs from going unnoticed!\n-\n-Trivial zeros-\n-\n-I built in knowledge of the trivial zeros so that correct output is displayed there.\n-This allowed me to apply the functional equation correctly, so that the new version\n-works throughout the complex plane (previously it gave nonsense results left of 0).\n-\n-Band limited interpolation-\n-\n-I'm wiring in some code of ghaith Hiary for computing zeta using band limited\n-interpolation. This will give a significant speedup in, for example, computing zeros of zeta.\n-\n-Start at Nth zero-\n-\n-Ability to start searching for zeros from the Nth zero onward (rather than\n-always starting from the real axis). This one was long overdue!\n-\n-\n-Many small improvements that have a big impact-\n-\n-For example I coded up my own trig functions that are about 4 times faster than\n-the machines (for double precision) and also faster than Bailey's and MPFR's.\n-\n-Anyhow, my package definitely needs a companion paper and much better\n-documentation. Something to work on...\n-\n-Other planned improvements for version L-1.4:\n-\n-1) broader use of openmp in some of the key routines\n-2) fft algorithms- will lead to orders of magnitude improvement\n-especially for higher degree L-funcitons\n-3) L-functions of number fields and symmetric powers\n-\n+Wrapping lcalc library\n``````\n",
    "created_at": "2010-02-03T15:33:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34599",
    "user": "https://trac.sagemath.org/admin/accounts/users/mrubinst"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,77 +1 @@
-
-I plan to release version L-1.3 in a couple of weeks, and also to
-have Rishi update his cython wrapper during our march workshop (I made
-a handful of changes that will need him to update).
-
-There are a number of key improvements.
-
-Precision-
-
-I've spent quite a bit of effort getting a multiprecision version
-of lcalc to work. I now have it working with Bailey's double double
-and quad double (about 30 and 60 digits respectively) and also MPFR,
-though the latter seems quite slow, perhaps because of the c++ wrapper that I am using... haven't dug too deep with the latter since
-Bailey's dd and qd works quite nicely, and 60 digits is quite reasonable. Nonetheless,
-it does work to higher precision with mpfr.
-
-I am also developing a test suite to be run at compile time to check on accuracy of many of the routines and do various timing tests.
-
-Output precision-
-
-Rishi needs to handle this carefully since I have a parameter
-which describes how many digits of the working digits are accurate.
-I use this parameter when outputting my results. Not sure how
-or if Rishi makes use of this extra info, or just passes the double results
-of my routines.
-
-At the same time I am wiring in better control of output precision
-based on the explicit formula and also on using the smooth approximate
-functional equation with a couple of different test functions.
-
-Derivatives-
-
-the version in L-1.23 is very crummy and I fixed that up too
-in version L-1.3. I initially just wanted to get that functionality in there, and I now use (version L-1.3 to be released) higher central differences for the derivatives that gives an accuracy of about Digits*4/(n+4) for the nth derivative. So for the 1st derivative,
-my new version is accurate to about 4/5 the working precision, so roughly 12-13 digits with double precision and 24-25 digits with Bailey's dd.
-
-
-Zeros-
-
-I fixed a subtle bug that would on rare occasion cause some zeros to be omitted
-and other zeros to be duplicated in their place.
-
-I'm also finishing to wire in a test of the explicit formula (based on a prototype that Kevin McGown helped me with in our kickoff frg coding sprint) that will prevent
-such bugs from going unnoticed!
-
-Trivial zeros-
-
-I built in knowledge of the trivial zeros so that correct output is displayed there.
-This allowed me to apply the functional equation correctly, so that the new version
-works throughout the complex plane (previously it gave nonsense results left of 0).
-
-Band limited interpolation-
-
-I'm wiring in some code of ghaith Hiary for computing zeta using band limited
-interpolation. This will give a significant speedup in, for example, computing zeros of zeta.
-
-Start at Nth zero-
-
-Ability to start searching for zeros from the Nth zero onward (rather than
-always starting from the real axis). This one was long overdue!
-
-
-Many small improvements that have a big impact-
-
-For example I coded up my own trig functions that are about 4 times faster than
-the machines (for double precision) and also faster than Bailey's and MPFR's.
-
-Anyhow, my package definitely needs a companion paper and much better
-documentation. Something to work on...
-
-Other planned improvements for version L-1.4:
-
-1) broader use of openmp in some of the key routines
-2) fft algorithms- will lead to orders of magnitude improvement
-especially for higher degree L-funcitons
-3) L-functions of number fields and symmetric powers
-
+Wrapping lcalc library
``````




---

archive/issue_comments_034600.json:
```json
{
    "body": "<a id='comment:63'></a>\nOne more thing- I've also cleaned up my makefile a bit, and, in the source, got rid of depreciated headers and unused variables.",
    "created_at": "2010-02-03T15:44:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34600",
    "user": "https://trac.sagemath.org/admin/accounts/users/mrubinst"
}
```

<a id='comment:63'></a>
One more thing- I've also cleaned up my makefile a bit, and, in the source, got rid of depreciated headers and unused variables.



---

archive/issue_comments_034601.json:
```json
{
    "body": "<a id='comment:64'></a>\nReplying to [mrubinst](#comment%3A63):\n> One more thing- I've also cleaned up my makefile a bit, and, in the source, got rid of depreciated headers and unused variables.\n\n\nThat is really **excellent** news. Is there any chance either you or I could check this with the Sun compiler on Solaris, before you make an official release? The Sun compilers more fussy than gcc, but would give us a performance boost on Solaris. \n\nThe fact the compiler is more fussy, also tends to weed out some sort of bugs. On 't2' the Sun C compiler is \n\n`/opt/sunstudio12.1/bin/cc`\n\nand the C++ compiler is \n\n`/opt/sunstudio12.1/bin/CC`\n\nOn the C++ compiler, you will probably need the option \n\n```\n -library=stlport4 \n```\n\nas that will then implement the latest C++ standard. (The older C++ standard is not compatible with the latest standard. For backwards compatibility Sun's C++ compiler defaults to the old C++ standard.}}} \n\nPreviously I tried building lcalc with the Sun compiler but got lots of warnings and error messages. But if the code has been cleaned up, things have more chance of working. \n\nThe point I made above about storing the exact (or least high precision) result in the test file, would be that is some record of what and should be, even though it is not going to be achieved. \n\nThen if you bring out a later version of lcalc, which deviates more from the exact result, people will at least know. It would only add 70 or so bytes to a file. \n\nDave",
    "created_at": "2010-02-03T16:00:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34601",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:64'></a>
Replying to [mrubinst](#comment%3A63):
> One more thing- I've also cleaned up my makefile a bit, and, in the source, got rid of depreciated headers and unused variables.


That is really **excellent** news. Is there any chance either you or I could check this with the Sun compiler on Solaris, before you make an official release? The Sun compilers more fussy than gcc, but would give us a performance boost on Solaris. 

The fact the compiler is more fussy, also tends to weed out some sort of bugs. On 't2' the Sun C compiler is 

`/opt/sunstudio12.1/bin/cc`

and the C++ compiler is 

`/opt/sunstudio12.1/bin/CC`

On the C++ compiler, you will probably need the option 

```
 -library=stlport4 
```

as that will then implement the latest C++ standard. (The older C++ standard is not compatible with the latest standard. For backwards compatibility Sun's C++ compiler defaults to the old C++ standard.}}} 

Previously I tried building lcalc with the Sun compiler but got lots of warnings and error messages. But if the code has been cleaned up, things have more chance of working. 

The point I made above about storing the exact (or least high precision) result in the test file, would be that is some record of what and should be, even though it is not going to be achieved. 

Then if you bring out a later version of lcalc, which deviates more from the exact result, people will at least know. It would only add 70 or so bytes to a file. 

Dave



---

archive/issue_comments_034602.json:
```json
{
    "body": "<a id='comment:65'></a>\nHas this been checked on Solaris 10 with gcc? The different floating point processor may well give a different answer and need revisions to the doc test. \n\nThere's general information about building on Solaris at\n\n http://wiki.sagemath.org/solaris\n\nInformation specifically for 't2' at\n\n http://wiki.sagemath.org/devel/Building-Sage-on-the-T5240-t2\n\nBoth the source (4.3.0.1 is the latest to build on Solaris) and a binary which will run on any SPARC can be found at http://www.sagemath.org/download-source.html\n\nDave",
    "created_at": "2010-02-22T00:01:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34602",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:65'></a>
Has this been checked on Solaris 10 with gcc? The different floating point processor may well give a different answer and need revisions to the doc test. 

There's general information about building on Solaris at

 http://wiki.sagemath.org/solaris

Information specifically for 't2' at

 http://wiki.sagemath.org/devel/Building-Sage-on-the-T5240-t2

Both the source (4.3.0.1 is the latest to build on Solaris) and a binary which will run on any SPARC can be found at http://www.sagemath.org/download-source.html

Dave



---

archive/issue_events_033743.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/drkirkby",
    "created_at": "2010-02-22T00:01:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33743"
}
```



---

archive/issue_events_033744.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/drkirkby",
    "created_at": "2010-02-22T00:01:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33744"
}
```



---

archive/issue_comments_034603.json:
```json
{
    "body": "<a id='comment:66'></a>\nI am unable to decipher the following error message when I try to compile on t2.\n\n```\ng++ -Wa,-W -O3  -Wno-deprecated  -ffast-math -fPIC  -I../include Lglobals.o Lgamma.o Lriemannsiegel.o Lriemannsiegel_blfi.o Ldokchitser.o Lcommandline_globals.o Lcommandline_misc.o Lcommandline_numbertheory.o Lcommandline_values_zeros.o Lcommandline_elliptic.o Lcommandline_twist.o Lcommandline.o cmdline.o -Xlinker -export-dynamic  -Xlinker -rpath -Xlinker /scratch/rishi/sage-4.3.0.1-Solaris-10-SPARC-sun4u-or-sun4v/local/lib  -L/scratch/rishi/sage-4.3.0.1-Solaris-10-SPARC-sun4u-or-sun4v/local/lib  -lpari -o lcalc\nld: fatal: option -dn and -P are incompatible\nld: fatal: Flags processing errors\ncollect2: ld returned 1 exit status\nmake[1]: *** [lcalc] Error 1\nmake[1]: Leaving directory `/scratch/rishi/sage-4.3.0.1-Solaris-10-SPARC-sun4u-or-sun4v/spkg/build/lcalc-1.23.p3/src/src'\nmake: *** [all] Error 2\n```\n\nI have not seen -dn or -P options  in anything.",
    "created_at": "2010-02-23T00:45:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34603",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:66'></a>
I am unable to decipher the following error message when I try to compile on t2.

```
g++ -Wa,-W -O3  -Wno-deprecated  -ffast-math -fPIC  -I../include Lglobals.o Lgamma.o Lriemannsiegel.o Lriemannsiegel_blfi.o Ldokchitser.o Lcommandline_globals.o Lcommandline_misc.o Lcommandline_numbertheory.o Lcommandline_values_zeros.o Lcommandline_elliptic.o Lcommandline_twist.o Lcommandline.o cmdline.o -Xlinker -export-dynamic  -Xlinker -rpath -Xlinker /scratch/rishi/sage-4.3.0.1-Solaris-10-SPARC-sun4u-or-sun4v/local/lib  -L/scratch/rishi/sage-4.3.0.1-Solaris-10-SPARC-sun4u-or-sun4v/local/lib  -lpari -o lcalc
ld: fatal: option -dn and -P are incompatible
ld: fatal: Flags processing errors
collect2: ld returned 1 exit status
make[1]: *** [lcalc] Error 1
make[1]: Leaving directory `/scratch/rishi/sage-4.3.0.1-Solaris-10-SPARC-sun4u-or-sun4v/spkg/build/lcalc-1.23.p3/src/src'
make: *** [all] Error 2
```

I have not seen -dn or -P options  in anything.



---

archive/attachments_006083.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "lcalc-1.23.p4.spkg",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5396/lcalc-1.23.p4.spkg",
    "created_at": "2010-02-23T13:20:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.spkg",
    "user": "https://github.com/rishikesha"
}
```



---

archive/issue_comments_034604.json:
```json
{
    "body": "Changed makefile to compile on solaris",
    "created_at": "2010-02-23T13:20:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34604",
    "user": "https://github.com/rishikesha"
}
```

Changed makefile to compile on solaris



---

archive/issue_events_033745.json:
```json
{
    "actor": "https://github.com/rishikesha",
    "created_at": "2010-02-23T13:21:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33745"
}
```



---

archive/issue_events_033746.json:
```json
{
    "actor": "https://github.com/rishikesha",
    "created_at": "2010-02-23T13:21:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33746"
}
```



---

archive/issue_comments_034605.json:
```json
{
    "body": "<a id='comment:67'></a>\nI have attached new spkg. This compiles on solaris and the tests passed on t2.",
    "created_at": "2010-02-23T13:21:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34605",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:67'></a>
I have attached new spkg. This compiles on solaris and the tests passed on t2.



---

archive/issue_events_033747.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/drkirkby",
    "created_at": "2010-02-24T22:13:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33747"
}
```



---

archive/issue_events_033748.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/drkirkby",
    "created_at": "2010-02-24T22:13:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33748"
}
```



---

archive/issue_comments_034606.json:
```json
{
    "body": "<a id='comment:68'></a>\nReplying to [drkirkby](#comment%3A64):\n> Replying to [mrubinst](#comment%3A63):\n> > One more thing- I've also cleaned up my makefile a bit, and, in the source, got rid of depreciated headers and unused variables.\n\n> \n> That is really **excellent** news. Is there any chance either you or I could check this with the Sun compiler on Solaris, before you make an official release? The Sun compilers more fussy than gcc, but would give us a performance boost on Solaris. \n\n\nHaving looked at this more closely, you have suppressed warnings, after I'd gone out of the way to enable them. \n\nYou have the options -W and  -Wno-deprecated, which are documented at \n\nhttp://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#Warning-Options\n\nas \n\n```\n-w\n    Inhibit all warning messages. \n\n-Wno-deprecated\n    Do not warn about usage of deprecated features. See Deprecated Features. \n```\n\nIf we follow that link about Deprecated Features, it says \"Using the old features might cause a warning in some cases that the feature will be dropped in the future. In other cases, the feature might be gone already.\"\n\nSo this appears to be storing up trouble for the future to me. \n\nGiven I'd noticed some problems before on Solaris, I made an effort to highlight the warnings. Now they have gone, as you have suppressed them. \n\nAs more minor points: \n\n* This package is .p4, but the changes for .p3 are not documented in SPKG.txt. If .p3 was never merged into Sage (which I believe is probably the case), then this should be called .p3 and not .p4. You can overwrite your old .p3 version. \n* It would be useful if the ticket number #5396 was put in SPKG.txt too. \n\nDave \n\nDave",
    "created_at": "2010-02-24T22:13:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34606",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:68'></a>
Replying to [drkirkby](#comment%3A64):
> Replying to [mrubinst](#comment%3A63):
> > One more thing- I've also cleaned up my makefile a bit, and, in the source, got rid of depreciated headers and unused variables.

> 
> That is really **excellent** news. Is there any chance either you or I could check this with the Sun compiler on Solaris, before you make an official release? The Sun compilers more fussy than gcc, but would give us a performance boost on Solaris. 


Having looked at this more closely, you have suppressed warnings, after I'd gone out of the way to enable them. 

You have the options -W and  -Wno-deprecated, which are documented at 

http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#Warning-Options

as 

```
-w
    Inhibit all warning messages. 

-Wno-deprecated
    Do not warn about usage of deprecated features. See Deprecated Features. 
```

If we follow that link about Deprecated Features, it says "Using the old features might cause a warning in some cases that the feature will be dropped in the future. In other cases, the feature might be gone already."

So this appears to be storing up trouble for the future to me. 

Given I'd noticed some problems before on Solaris, I made an effort to highlight the warnings. Now they have gone, as you have suppressed them. 

As more minor points: 

* This package is .p4, but the changes for .p3 are not documented in SPKG.txt. If .p3 was never merged into Sage (which I believe is probably the case), then this should be called .p3 and not .p4. You can overwrite your old .p3 version. 
* It would be useful if the ticket number #5396 was put in SPKG.txt too. 

Dave 

Dave



---

archive/issue_comments_034607.json:
```json
{
    "body": "<a id='comment:69'></a>\nIt would be good if you could at least add -Wall and get rid of the warnings, and optionally -pedantic too. The the code will hopefully not break any time soon. This could easily break with a compiler upgrade. \n\nDave",
    "created_at": "2010-02-24T22:15:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34607",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:69'></a>
It would be good if you could at least add -Wall and get rid of the warnings, and optionally -pedantic too. The the code will hopefully not break any time soon. This could easily break with a compiler upgrade. 

Dave



---

archive/issue_comments_034608.json:
```json
{
    "body": "**Changing assignee** from Rishi to @rishikesha.",
    "created_at": "2010-02-24T23:55:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34608",
    "user": "https://github.com/rishikesha"
}
```

**Changing assignee** from Rishi to @rishikesha.



---

archive/issue_comments_034609.json:
```json
{
    "body": "<a id='comment:70'></a>\nThis version is not what Mike was writing about in his posting. He was giving a preview of a future release of lcalc. This version is not as polished. But then it is better than what is shipping with sage right now.\n\nRegarding overwriting older packages, John Cremona asked that I do exactly the opposite of what you are suggesting. Please see his posting from couple of months ago in this very ticket. I will include a one line description of p3. p3 was just reverting from p2 to p1.\n\nI just made the minimal changes to Mike's makefile so that it compiles on solaris and uses pari library in SAGE_LOCAL. I did not want to make too many changes to the lcalc makefile.\n\nIn any case I will make changes you suggested to Makefile.sage in patches directory and post it.",
    "created_at": "2010-02-24T23:55:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34609",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:70'></a>
This version is not what Mike was writing about in his posting. He was giving a preview of a future release of lcalc. This version is not as polished. But then it is better than what is shipping with sage right now.

Regarding overwriting older packages, John Cremona asked that I do exactly the opposite of what you are suggesting. Please see his posting from couple of months ago in this very ticket. I will include a one line description of p3. p3 was just reverting from p2 to p1.

I just made the minimal changes to Mike's makefile so that it compiles on solaris and uses pari library in SAGE_LOCAL. I did not want to make too many changes to the lcalc makefile.

In any case I will make changes you suggested to Makefile.sage in patches directory and post it.



---

archive/issue_comments_034610.json:
```json
{
    "body": "<a id='comment:71'></a>\nReplying to [rishi](#comment%3A70):\n> This version is not what Mike was writing about in his posting. He was giving a preview of a future release of lcalc. This version is not as polished. But then it is better than what is shipping with sage right now.\n> \n\n\nI should clarify that I am talking about lcalc the program, and not the build scripts.",
    "created_at": "2010-02-25T00:08:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34610",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:71'></a>
Replying to [rishi](#comment%3A70):
> This version is not what Mike was writing about in his posting. He was giving a preview of a future release of lcalc. This version is not as polished. But then it is better than what is shipping with sage right now.
> 


I should clarify that I am talking about lcalc the program, and not the build scripts.



---

archive/issue_comments_034611.json:
```json
{
    "body": "<a id='comment:72'></a>\nReplying to [rishi](#comment%3A70):\n\n> Regarding overwriting older packages, John Cremona asked that I do exactly the opposite of what you are suggesting. Please see his posting from couple of months ago in this very ticket. I will include a one line description of p3. p3 was just reverting from p2 to p1.\n\n\nI'm really confused here. I'm going to cc Minh onto this, as he knows more about version numbers than me, but I believe the version being proposed is incorrect. \n\n* 6 months ago you added 'L-1.23.spkg' to this ticket. So was that supposed to be brand new package? Currently there is no package in Sage called 'L'. In any case it should **not** have been attacked to the trac server, but instead a link provided to a place where it could be found. \n\n* There are numerous other attachments. Assuming all these changes are based on top of version 1.23 of lcalc, and not a version with a date code of'20080205', then I believe all these changes should be put into lcalc-1.23. There is no need for p0, p1, p2, p3 or p4. Patch levels should be incremented as a result of newer versions committed to Sage - not as a result of reviewer comments. \n\n* If all these changes are based on the version of lcalc in Sage, lcalc-20080205.p4.spkg, then the updated version should be called lcalc-20080205.p5.spkg. \n\nPerhaps you could briefly summerise what this is, and why it should be called a particular version. Why was it orriginally going to be called L? With a highly technical package and 70 comments spanning 6-months, it is hard to decipher it all. But I believe something is wrong here, but would welcome some comments from Minh. \n\nDave",
    "created_at": "2010-03-06T14:07:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34611",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:72'></a>
Replying to [rishi](#comment%3A70):

> Regarding overwriting older packages, John Cremona asked that I do exactly the opposite of what you are suggesting. Please see his posting from couple of months ago in this very ticket. I will include a one line description of p3. p3 was just reverting from p2 to p1.


I'm really confused here. I'm going to cc Minh onto this, as he knows more about version numbers than me, but I believe the version being proposed is incorrect. 

* 6 months ago you added 'L-1.23.spkg' to this ticket. So was that supposed to be brand new package? Currently there is no package in Sage called 'L'. In any case it should **not** have been attacked to the trac server, but instead a link provided to a place where it could be found. 

* There are numerous other attachments. Assuming all these changes are based on top of version 1.23 of lcalc, and not a version with a date code of'20080205', then I believe all these changes should be put into lcalc-1.23. There is no need for p0, p1, p2, p3 or p4. Patch levels should be incremented as a result of newer versions committed to Sage - not as a result of reviewer comments. 

* If all these changes are based on the version of lcalc in Sage, lcalc-20080205.p4.spkg, then the updated version should be called lcalc-20080205.p5.spkg. 

Perhaps you could briefly summerise what this is, and why it should be called a particular version. Why was it orriginally going to be called L? With a highly technical package and 70 comments spanning 6-months, it is hard to decipher it all. But I believe something is wrong here, but would welcome some comments from Minh. 

Dave



---

archive/issue_comments_034612.json:
```json
{
    "body": "<a id='comment:73'></a>\nReplying to [drkirkby](#comment%3A72):\n\n> Replying to [rishi](#comment%3A70):\n> > Regarding overwriting older packages, John Cremona asked that I do exactly the opposite of what you are suggesting. Please see his posting from couple of months ago in this very ticket. I will include a one line description of p3. p3 was just reverting from p2 to p1.\n\n> I'm really confused here. I'm going to cc Minh onto this, as he knows more about version numbers than me, but I believe the version being proposed is incorrect.  * 6 months ago you added 'L-1.23.spkg' to this ticket. So was that supposed to be brand new package? Currently there is no package in Sage called 'L'. In any case it should **not** have been attacked to the trac server, but instead a link provided to a place where it could be found. \n\nPlease read the comments in this ticket. http://trac.sagemath.org/sage_trac/ticket/5396#comment:39\n\n> * There are numerous other attachments. Assuming all these changes are based on top of version 1.23 of lcalc, and not a version with a date code of'20080205', then I believe all these changes should be put into lcalc-1.23. There is no need for p0, p1, p2, p3 or p4. Patch levels should be incremented as a result of newer versions committed to Sage - not as a result of reviewer comments.\n\n\n> * If all these changes are based on the version of lcalc in Sage, lcalc-20080205.p4.spkg, then the updated version should be called lcalc-20080205.p5.spkg.\n\n\nIt is not based on lcalc-20080205.\n\n> Perhaps you could briefly summerise what this is, and why it should be called a particular version. Why was it orriginally going to be called L? With a highly technical package and 70 comments spanning 6-months, it is hard to decipher it all. But I believe something is wrong here, but would welcome some comments from Minh.\n\n\n  http://trac.sagemath.org/sage_trac/ticket/5396#comment:39\n\n> Dave\n",
    "created_at": "2010-03-09T19:22:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34612",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:73'></a>
Replying to [drkirkby](#comment%3A72):

> Replying to [rishi](#comment%3A70):
> > Regarding overwriting older packages, John Cremona asked that I do exactly the opposite of what you are suggesting. Please see his posting from couple of months ago in this very ticket. I will include a one line description of p3. p3 was just reverting from p2 to p1.

> I'm really confused here. I'm going to cc Minh onto this, as he knows more about version numbers than me, but I believe the version being proposed is incorrect.  * 6 months ago you added 'L-1.23.spkg' to this ticket. So was that supposed to be brand new package? Currently there is no package in Sage called 'L'. In any case it should **not** have been attacked to the trac server, but instead a link provided to a place where it could be found. 

Please read the comments in this ticket. http://trac.sagemath.org/sage_trac/ticket/5396#comment:39

> * There are numerous other attachments. Assuming all these changes are based on top of version 1.23 of lcalc, and not a version with a date code of'20080205', then I believe all these changes should be put into lcalc-1.23. There is no need for p0, p1, p2, p3 or p4. Patch levels should be incremented as a result of newer versions committed to Sage - not as a result of reviewer comments.


> * If all these changes are based on the version of lcalc in Sage, lcalc-20080205.p4.spkg, then the updated version should be called lcalc-20080205.p5.spkg.


It is not based on lcalc-20080205.

> Perhaps you could briefly summerise what this is, and why it should be called a particular version. Why was it orriginally going to be called L? With a highly technical package and 70 comments spanning 6-months, it is hard to decipher it all. But I believe something is wrong here, but would welcome some comments from Minh.


  http://trac.sagemath.org/sage_trac/ticket/5396#comment:39

> Dave




---

archive/issue_comments_034613.json:
```json
{
    "body": "<a id='comment:74'></a>\nThe links were wrong.\n\nhttp://trac.sagemath.org/sage_trac/ticket/5396#comment:18",
    "created_at": "2010-03-09T19:24:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34613",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:74'></a>
The links were wrong.

http://trac.sagemath.org/sage_trac/ticket/5396#comment:18



---

archive/issue_comments_034614.json:
```json
{
    "body": "<a id='comment:75'></a>\nHOWTO\n\n1. Apply trac_5396-refactor.patch\n2. Apply trac_5396-review.patch\n3. Use lcalc-1.23.p4 spkg\n\nThis patch no longer compiles with the latest version of sage.",
    "created_at": "2010-03-09T19:27:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34614",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:75'></a>
HOWTO

1. Apply trac_5396-refactor.patch
2. Apply trac_5396-review.patch
3. Use lcalc-1.23.p4 spkg

This patch no longer compiles with the latest version of sage.



---

archive/issue_comments_034615.json:
```json
{
    "body": "(minor) rebase for sage4.3.3",
    "created_at": "2010-03-09T20:58:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34615",
    "user": "https://trac.sagemath.org/admin/accounts/users/ylchapuy"
}
```

(minor) rebase for sage4.3.3



---

archive/attachments_006084.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_5396-rebase_sage4.3.3.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5396/trac_5396-rebase_sage4.3.3.patch",
    "created_at": "2010-03-09T20:59:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://trac.sagemath.org/admin/accounts/users/ylchapuy"
}
```



---

archive/issue_comments_034616.json:
```json
{
    "body": "<a id='comment:76'></a>\nYou just have to apply the one character patch trac_5396-rebase_sage4.3.3.patch on top of others.",
    "created_at": "2010-03-09T20:59:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34616",
    "user": "https://trac.sagemath.org/admin/accounts/users/ylchapuy"
}
```

<a id='comment:76'></a>
You just have to apply the one character patch trac_5396-rebase_sage4.3.3.patch on top of others.



---

archive/issue_comments_034617.json:
```json
{
    "body": "combined patch rebased to 4.3.3",
    "created_at": "2010-03-09T21:24:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34617",
    "user": "https://github.com/rishikesha"
}
```

combined patch rebased to 4.3.3



---

archive/attachments_006085.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_5396_combined_rebasedto_4.3.3.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5396/trac_5396_combined_rebasedto_4.3.3.patch",
    "created_at": "2010-03-09T21:26:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/rishikesha"
}
```



---

archive/issue_comments_034618.json:
```json
{
    "body": "<a id='comment:77'></a>\nOops! I did not see Yann had already posted a patch.",
    "created_at": "2010-03-09T21:26:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34618",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:77'></a>
Oops! I did not see Yann had already posted a patch.



---

archive/issue_events_033749.json:
```json
{
    "actor": "https://github.com/rishikesha",
    "created_at": "2010-03-09T22:05:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33749"
}
```



---

archive/issue_events_033750.json:
```json
{
    "actor": "https://github.com/rishikesha",
    "created_at": "2010-03-09T22:05:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33750"
}
```



---

archive/issue_comments_034619.json:
```json
{
    "body": "<a id='comment:78'></a>\nAnother spkg. \n\nhttp://sage.math.washington.edu/home/rishikesh/lcalc/lcalc-1.23.spkg",
    "created_at": "2010-03-09T22:05:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34619",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:78'></a>
Another spkg. 

http://sage.math.washington.edu/home/rishikesh/lcalc/lcalc-1.23.spkg



---

archive/issue_comments_034620.json:
```json
{
    "body": "<a id='comment:79'></a>\nThis ticket has become too long. I am splitting the lcalc spkg to  a ticket originally by mabshoff  #4793",
    "created_at": "2010-03-17T19:35:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34620",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:79'></a>
This ticket has become too long. I am splitting the lcalc spkg to  a ticket originally by mabshoff  #4793



---

archive/issue_comments_034621.json:
```json
{
    "body": "<a id='comment:80'></a>\nOnly the last patch  trac_5396_combined_rebasedto_4.3.3.patch is needed. It combines all the work prior to it. This patch depends spkg upgrade in #4793",
    "created_at": "2010-03-17T19:42:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34621",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:80'></a>
Only the last patch  trac_5396_combined_rebasedto_4.3.3.patch is needed. It combines all the work prior to it. This patch depends spkg upgrade in #4793



---

archive/attachments_006086.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_5396_combined_rebased_4.3.4.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5396/trac_5396_combined_rebased_4.3.4.patch",
    "created_at": "2010-03-25T12:00:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/rishikesha"
}
```



---

archive/issue_comments_034622.json:
```json
{
    "body": "The location of header files have changed in the lcalc spkg. This incorporates neccessary changes to compile.",
    "created_at": "2010-03-25T12:00:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34622",
    "user": "https://github.com/rishikesha"
}
```

The location of header files have changed in the lcalc spkg. This incorporates neccessary changes to compile.



---

archive/issue_comments_034623.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-Wrapping lcalc library\n+Wrapping lcalc library. This patch depends spkg upgrade in #4793\n``````\n",
    "created_at": "2010-03-29T14:28:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34623",
    "user": "https://github.com/rishikesha"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1 @@
-Wrapping lcalc library
+Wrapping lcalc library. This patch depends spkg upgrade in #4793
``````




---

archive/issue_comments_034624.json:
```json
{
    "body": "<a id='comment:81'></a>\nSince the spkg upgrade this patch depended on has received positive review, can someone reinstate the positive review here.",
    "created_at": "2010-03-29T14:28:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34624",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:81'></a>
Since the spkg upgrade this patch depended on has received positive review, can someone reinstate the positive review here.



---

archive/issue_comments_034625.json:
```json
{
    "body": "<a id='comment:82'></a>\nApplied and tested on sage-4.4.2.",
    "created_at": "2010-06-04T23:59:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34625",
    "user": "https://github.com/aghitza"
}
```

<a id='comment:82'></a>
Applied and tested on sage-4.4.2.



---

archive/issue_comments_034626.json:
```json
{
    "body": "**Changing reviewer** from \"John Cremona, David Kirkby\" to \"John Cremona, David Kirkby, Alex Ghitza\".",
    "created_at": "2010-06-04T23:59:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34626",
    "user": "https://github.com/aghitza"
}
```

**Changing reviewer** from "John Cremona, David Kirkby" to "John Cremona, David Kirkby, Alex Ghitza".



---

archive/issue_events_033751.json:
```json
{
    "actor": "https://github.com/aghitza",
    "created_at": "2010-06-04T23:59:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33751"
}
```



---

archive/issue_events_033752.json:
```json
{
    "actor": "https://github.com/aghitza",
    "created_at": "2010-06-04T23:59:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33752"
}
```



---

archive/issue_comments_034627.json:
```json
{
    "body": "**Changing author** from \"rishi, ylchapuy\" to \"Rishikesh, Yann-Laigle Chapuy\".",
    "created_at": "2010-06-04T23:59:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34627",
    "user": "https://github.com/aghitza"
}
```

**Changing author** from "rishi, ylchapuy" to "Rishikesh, Yann-Laigle Chapuy".



---

archive/issue_events_033753.json:
```json
{
    "actor": "https://github.com/dandrake",
    "created_at": "2010-07-22T07:33:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33753"
}
```



---

archive/issue_events_033754.json:
```json
{
    "actor": "https://github.com/dandrake",
    "created_at": "2010-07-22T07:33:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33754"
}
```



---

archive/issue_comments_034628.json:
```json
{
    "body": "<a id='comment:83'></a>\nAm I correct that only attachment:trac_5396_combined_rebased_4.3.4.patch should be merged?\n\nIf so, please add the ticket number to that patch's commit message and switch this back to positive review!",
    "created_at": "2010-07-22T07:33:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34628",
    "user": "https://github.com/dandrake"
}
```

<a id='comment:83'></a>
Am I correct that only attachment:trac_5396_combined_rebased_4.3.4.patch should be merged?

If so, please add the ticket number to that patch's commit message and switch this back to positive review!



---

archive/issue_events_033755.json:
```json
{
    "actor": "https://github.com/rishikesha",
    "created_at": "2010-07-22T17:32:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33755"
}
```



---

archive/issue_events_033756.json:
```json
{
    "actor": "https://github.com/rishikesha",
    "created_at": "2010-07-22T17:32:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33756"
}
```



---

archive/issue_comments_034629.json:
```json
{
    "body": "<a id='comment:84'></a>\nReplying to [ddrake](#comment%3A83):\n> Am I correct that only attachment:trac_5396_combined_rebased_4.3.4.patch should be merged?\n> \n> If so, please add the ticket number to that patch's commit message and switch this back to positive review!\n\n\n\nYes only the last attachment is to be merged.",
    "created_at": "2010-07-22T17:32:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34629",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:84'></a>
Replying to [ddrake](#comment%3A83):
> Am I correct that only attachment:trac_5396_combined_rebased_4.3.4.patch should be merged?
> 
> If so, please add the ticket number to that patch's commit message and switch this back to positive review!



Yes only the last attachment is to be merged.



---

archive/issue_comments_034630.json:
```json
{
    "body": "<a id='comment:85'></a>\nReplying to [rishi](#comment%3A84):\n> Replying to [ddrake](#comment%3A83):\n> > Am I correct that only attachment:trac_5396_combined_rebased_4.3.4.patch should be merged?\n> > \n> > If so, please add the ticket number to that patch's commit message and switch this back to positive review!\n\n> \n> \n> Yes only the last attachment is to be merged.\n\n\nMerged on 4.5.2.alpha1.",
    "created_at": "2010-07-22T23:49:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34630",
    "user": "https://github.com/dandrake"
}
```

<a id='comment:85'></a>
Replying to [rishi](#comment%3A84):
> Replying to [ddrake](#comment%3A83):
> > Am I correct that only attachment:trac_5396_combined_rebased_4.3.4.patch should be merged?
> > 
> > If so, please add the ticket number to that patch's commit message and switch this back to positive review!

> 
> 
> Yes only the last attachment is to be merged.


Merged on 4.5.2.alpha1.



---

archive/issue_comments_034631.json:
```json
{
    "body": "**Merged:** sage-4.5.2.alpha1",
    "created_at": "2010-07-22T23:49:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34631",
    "user": "https://github.com/dandrake"
}
```

**Merged:** sage-4.5.2.alpha1



---

archive/issue_events_033757.json:
```json
{
    "actor": "https://github.com/dandrake",
    "created_at": "2010-07-22T23:49:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33757"
}
```



---

archive/issue_events_033758.json:
```json
{
    "actor": "https://github.com/dandrake",
    "created_at": "2010-07-22T23:49:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5396#event-33758"
}
```



---

archive/issue_comments_034632.json:
```json
{
    "body": "<a id='comment:86'></a>\nIs there a spkg that goes along with the patch? I'm trying to compile from scratch after applying the above patch, and it's failing:\n\n```\nIn file included from sage/libs/lcalc/lcalc_Lfunction.cpp:163:\nsage/libs/lcalc/lcalc_sage.h:27: error: expected constructor, destructor, or type conversion before \ufffd*\ufffd token\nsage/libs/lcalc/lcalc_sage.h:33: error: variable or field \ufffddel_Complexes\ufffd declared void\nsage/libs/lcalc/lcalc_sage.h:33: error: \ufffdComplex\ufffd was not declared in this scope\nsage/libs/lcalc/lcalc_sage.h:33: error: \ufffdA\ufffd was not declared in this scope\nsage/libs/lcalc/lcalc_sage.h:38: error: \ufffdComplex\ufffd does not name a type\nsage/libs/lcalc/lcalc_sage.h:44: error: variable or field \ufffdtestL\ufffd declared void\nsage/libs/lcalc/lcalc_sage.h:44: error: \ufffdL_function\ufffd was not declared in this scope\nsage/libs/lcalc/lcalc_sage.h:44: error: \ufffdComplex\ufffd was not declared in this scope\nsage/libs/lcalc/lcalc_sage.h:44: error: \ufffdL\ufffd was not declared in this scope\n```\nI have the above patch, and lcalc-20100428-1.23.p0.spkg. If I'm missing a spkg, which one is missing? I see a bunch of spkgs posted here, along with links to others. Which to merge?",
    "created_at": "2010-07-26T06:16:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34632",
    "user": "https://github.com/dandrake"
}
```

<a id='comment:86'></a>
Is there a spkg that goes along with the patch? I'm trying to compile from scratch after applying the above patch, and it's failing:

```
In file included from sage/libs/lcalc/lcalc_Lfunction.cpp:163:
sage/libs/lcalc/lcalc_sage.h:27: error: expected constructor, destructor, or type conversion before �*� token
sage/libs/lcalc/lcalc_sage.h:33: error: variable or field �del_Complexes� declared void
sage/libs/lcalc/lcalc_sage.h:33: error: �Complex� was not declared in this scope
sage/libs/lcalc/lcalc_sage.h:33: error: �A� was not declared in this scope
sage/libs/lcalc/lcalc_sage.h:38: error: �Complex� does not name a type
sage/libs/lcalc/lcalc_sage.h:44: error: variable or field �testL� declared void
sage/libs/lcalc/lcalc_sage.h:44: error: �L_function� was not declared in this scope
sage/libs/lcalc/lcalc_sage.h:44: error: �Complex� was not declared in this scope
sage/libs/lcalc/lcalc_sage.h:44: error: �L� was not declared in this scope
```
I have the above patch, and lcalc-20100428-1.23.p0.spkg. If I'm missing a spkg, which one is missing? I see a bunch of spkgs posted here, along with links to others. Which to merge?



---

archive/issue_comments_034633.json:
```json
{
    "body": "<a id='comment:87'></a>\nReplying to [ddrake](#comment%3A86):\n> Is there a spkg that goes along with the patch? I'm trying to compile from scratch after applying the above patch, and it's failing:\n\n\nHrm, it seems that the problem was that the lcalc spkg wasn't installed. I see in the spkg/standard/deps file that lcalc isn't a prequisite for the Sage library; should it be? The above problem went away after I installed the spkg with \"sage -i\".",
    "created_at": "2010-07-26T07:20:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34633",
    "user": "https://github.com/dandrake"
}
```

<a id='comment:87'></a>
Replying to [ddrake](#comment%3A86):
> Is there a spkg that goes along with the patch? I'm trying to compile from scratch after applying the above patch, and it's failing:


Hrm, it seems that the problem was that the lcalc spkg wasn't installed. I see in the spkg/standard/deps file that lcalc isn't a prequisite for the Sage library; should it be? The above problem went away after I installed the spkg with "sage -i".



---

archive/issue_comments_034634.json:
```json
{
    "body": "<a id='comment:88'></a>\nReplying to [ddrake](#comment%3A87):\n> Replying to [ddrake](#comment%3A86):\n> > Is there a spkg that goes along with the patch? I'm trying to compile from scratch after applying the above patch, and it's failing:\n\n> \n> Hrm, it seems that the problem was that the lcalc spkg wasn't installed. I see in the spkg/standard/deps file that lcalc isn't a prequisite for the Sage library; should it be? The above problem went away after I installed the spkg with \"sage -i\". \n> \n\n\nTill this patch, lcalc was not require to build sage library. The code William wrote used pexpect  and the command line version of lcalc. Now libLfunction.so is required to compile. I did not know that one has to change spkg/standard/deps also. Can you change it so that the spkg becomes a prerequisite for the sage library",
    "created_at": "2010-07-26T11:33:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34634",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:88'></a>
Replying to [ddrake](#comment%3A87):
> Replying to [ddrake](#comment%3A86):
> > Is there a spkg that goes along with the patch? I'm trying to compile from scratch after applying the above patch, and it's failing:

> 
> Hrm, it seems that the problem was that the lcalc spkg wasn't installed. I see in the spkg/standard/deps file that lcalc isn't a prequisite for the Sage library; should it be? The above problem went away after I installed the spkg with "sage -i". 
> 


Till this patch, lcalc was not require to build sage library. The code William wrote used pexpect  and the command line version of lcalc. Now libLfunction.so is required to compile. I did not know that one has to change spkg/standard/deps also. Can you change it so that the spkg becomes a prerequisite for the sage library



---

archive/attachments_006087.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "deps",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5396/deps",
    "created_at": "2010-07-27T07:44:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid",
    "user": "https://github.com/qed777"
}
```



---

archive/issue_comments_034635.json:
```json
{
    "body": "Updated `spkg/standard/deps` merged into 4.5.2.alpha1.",
    "created_at": "2010-07-27T07:44:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34635",
    "user": "https://github.com/qed777"
}
```

Updated `spkg/standard/deps` merged into 4.5.2.alpha1.



---

archive/issue_comments_034636.json:
```json
{
    "body": "Diff of `spkg/standard/deps` from 4.5.2.alpha0 to 4.5.2.alpha1, minus #9456's  \"hunk\"",
    "created_at": "2010-07-27T07:46:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34636",
    "user": "https://github.com/qed777"
}
```

Diff of `spkg/standard/deps` from 4.5.2.alpha0 to 4.5.2.alpha1, minus #9456's  "hunk"



---

archive/attachments_006088.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "deps.diff",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5396/deps.diff",
    "created_at": "2010-07-27T07:49:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.diff",
    "user": "https://github.com/qed777"
}
```



---

archive/issue_comments_034637.json:
```json
{
    "body": "<a id='comment:89'></a>\nI've attached the updated `deps` file included in Sage 4.5.2.alpha1.  Please see [sage-release](http://groups.google.com/group/sage-release/browse_thread/thread/9455213e89f94692/db2c5f0aa386eebb#db2c5f0aa386eebb) for an explanation.",
    "created_at": "2010-07-27T07:49:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34637",
    "user": "https://github.com/qed777"
}
```

<a id='comment:89'></a>
I've attached the updated `deps` file included in Sage 4.5.2.alpha1.  Please see [sage-release](http://groups.google.com/group/sage-release/browse_thread/thread/9455213e89f94692/db2c5f0aa386eebb#db2c5f0aa386eebb) for an explanation.



---

archive/issue_comments_034638.json:
```json
{
    "body": "<a id='comment:90'></a>\nThis ticket introduced some doctest failures in 4.5.2.alpha1; see #9615.",
    "created_at": "2010-07-28T02:43:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34638",
    "user": "https://github.com/dandrake"
}
```

<a id='comment:90'></a>
This ticket introduced some doctest failures in 4.5.2.alpha1; see #9615.



---

archive/issue_comments_034639.json:
```json
{
    "body": "<a id='comment:91'></a>\nReplying to [rishi](#comment%3A88):\n> Replying to [ddrake](#comment%3A87):\n> > Replying to [ddrake](#comment%3A86):\n> > > Is there a spkg that goes along with the patch? I'm trying to compile from scratch after applying the above patch, and it's failing:\n\n> > \n> > Hrm, it seems that the problem was that the lcalc spkg wasn't installed. I see in the spkg/standard/deps file that lcalc isn't a prequisite for the Sage library; should it be? The above problem went away after I installed the spkg with \"sage -i\". \n> > \n\n> \n> Till this patch, lcalc was not require to build sage library. The code William wrote used pexpect  and the command line version of lcalc. Now libLfunction.so is required to compile. I did not know that one has to change spkg/standard/deps also. Can you change it so that the spkg becomes a prerequisite for the sage library\n\n\nFor the record: This confirms the decision to merge an updated [attachment:deps spkg/standard/deps] file in Sage 4.5.2.alpha1.",
    "created_at": "2010-07-29T06:40:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34639",
    "user": "https://github.com/qed777"
}
```

<a id='comment:91'></a>
Replying to [rishi](#comment%3A88):
> Replying to [ddrake](#comment%3A87):
> > Replying to [ddrake](#comment%3A86):
> > > Is there a spkg that goes along with the patch? I'm trying to compile from scratch after applying the above patch, and it's failing:

> > 
> > Hrm, it seems that the problem was that the lcalc spkg wasn't installed. I see in the spkg/standard/deps file that lcalc isn't a prequisite for the Sage library; should it be? The above problem went away after I installed the spkg with "sage -i". 
> > 

> 
> Till this patch, lcalc was not require to build sage library. The code William wrote used pexpect  and the command line version of lcalc. Now libLfunction.so is required to compile. I did not know that one has to change spkg/standard/deps also. Can you change it so that the spkg becomes a prerequisite for the sage library


For the record: This confirms the decision to merge an updated [attachment:deps spkg/standard/deps] file in Sage 4.5.2.alpha1.



---

archive/issue_comments_034640.json:
```json
{
    "body": "<a id='comment:92'></a>\nI'm updating the Author(s) field using the [account name-real name map](http://trac.sagemath.org/sage_trac/wiki/WikiStart#AccountNamesmappedtoRealNames).",
    "created_at": "2010-08-06T02:02:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34640",
    "user": "https://github.com/qed777"
}
```

<a id='comment:92'></a>
I'm updating the Author(s) field using the [account name-real name map](http://trac.sagemath.org/sage_trac/wiki/WikiStart#AccountNamesmappedtoRealNames).



---

archive/issue_comments_034641.json:
```json
{
    "body": "**Changing author** from \"Rishikesh, Yann-Laigle Chapuy\" to \"Rishikesh, Yann Laigle-Chapuy\".",
    "created_at": "2010-08-06T02:02:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34641",
    "user": "https://github.com/qed777"
}
```

**Changing author** from "Rishikesh, Yann-Laigle Chapuy" to "Rishikesh, Yann Laigle-Chapuy".



---

archive/issue_comments_034642.json:
```json
{
    "body": "<a id='comment:93'></a>\nI noticed that you have mpfr in the dep for lcalc and that you include \nmpfr in the library list in module_list.py for the lcalc extension as well.\nlcalc doesn't currently depend on mpfr or link against it.\nI checked the current spkg and the latest version included in this bug\nand neither does. In spkg-install you have\n\n```\nif [ \"$UNAME\" = \"SunOS\" ]; then\n    LCALC_LIBS=\"-lpari -lmpfr -lgmpxx -lgmp -liberty\"\nelse\n    LCALC_LIBS=\"-lpari -lmpfr -lgmpxx -lgmp\"\nfi \nexport LCALC_LIBS\necho \"Using LCALC_LIBS=$LCALC_LIBS\"\n```\nBut LCALC_LIBS is not used anywhere in either the original Makefile\nor the Makefile provided by sage.\nI think it is a remnant from a time where Dave (Kirby) had an extremely\nsimplified Makefile for lcalc and even then it was a case of overlinking.\nIf you want to use mpfr in lcalc you need to export\n\n```\nPREPROCESSOR_DEFINE=-DUSE_MPFR\n```\nand on my machine at least lcalc refuse to compile with this.\n\nFrancois",
    "created_at": "2010-08-06T09:32:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34642",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:93'></a>
I noticed that you have mpfr in the dep for lcalc and that you include 
mpfr in the library list in module_list.py for the lcalc extension as well.
lcalc doesn't currently depend on mpfr or link against it.
I checked the current spkg and the latest version included in this bug
and neither does. In spkg-install you have

```
if [ "$UNAME" = "SunOS" ]; then
    LCALC_LIBS="-lpari -lmpfr -lgmpxx -lgmp -liberty"
else
    LCALC_LIBS="-lpari -lmpfr -lgmpxx -lgmp"
fi 
export LCALC_LIBS
echo "Using LCALC_LIBS=$LCALC_LIBS"
```
But LCALC_LIBS is not used anywhere in either the original Makefile
or the Makefile provided by sage.
I think it is a remnant from a time where Dave (Kirby) had an extremely
simplified Makefile for lcalc and even then it was a case of overlinking.
If you want to use mpfr in lcalc you need to export

```
PREPROCESSOR_DEFINE=-DUSE_MPFR
```
and on my machine at least lcalc refuse to compile with this.

Francois



---

archive/issue_comments_034643.json:
```json
{
    "body": "<a id='comment:94'></a>\nReplying to [fbissey](#comment%3A93):\n\n> I think it is a remnant from a time where Dave (Kirby) had an extremely\n> simplified Makefile for lcalc and even then it was a case of overlinking.\n> Francois\n\n\nMy logic for changing the Makefile fell into 3 reasons I think. \n* The original Makefile had a non-portable gcc option -Wa,-W in an attempt to suppress warnings from the assembler. That works with the GNU assembler, but failed with the Sun assembler, as the Sun assembler does not recognise the -W option.   \n* I added -Wall to show the warnings from the code - I think it's good we see what warnings are generated by the compiler, as it is something to look at when getting problems. \n* The original Makefile defined the compiler to be \"gcc\" but if we used $CC, we could use any compiler. \n\nI doubt I would have changed any linking - if I did, it was probably not intentionally. \n\nI have not checked this code when CC is defined to be a compiler other than gcc, but I did fix it to work with any compiler at one point - I hope a regression has not been introduced. \n\nDave",
    "created_at": "2010-08-06T15:07:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34643",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:94'></a>
Replying to [fbissey](#comment%3A93):

> I think it is a remnant from a time where Dave (Kirby) had an extremely
> simplified Makefile for lcalc and even then it was a case of overlinking.
> Francois


My logic for changing the Makefile fell into 3 reasons I think. 
* The original Makefile had a non-portable gcc option -Wa,-W in an attempt to suppress warnings from the assembler. That works with the GNU assembler, but failed with the Sun assembler, as the Sun assembler does not recognise the -W option.   
* I added -Wall to show the warnings from the code - I think it's good we see what warnings are generated by the compiler, as it is something to look at when getting problems. 
* The original Makefile defined the compiler to be "gcc" but if we used $CC, we could use any compiler. 

I doubt I would have changed any linking - if I did, it was probably not intentionally. 

I have not checked this code when CC is defined to be a compiler other than gcc, but I did fix it to work with any compiler at one point - I hope a regression has not been introduced. 

Dave



---

archive/issue_comments_034644.json:
```json
{
    "body": "<a id='comment:95'></a>\nReplying to [drkirkby](#comment%3A94):\n> Replying to [fbissey](#comment%3A93):\n> \n> > I think it is a remnant from a time where Dave (Kirby) had an extremely\n> > simplified Makefile for lcalc and even then it was a case of overlinking.\n> > Francois\n\n> \n> My logic for changing the Makefile fell into 3 reasons I think. \n> * The original Makefile had a non-portable gcc option -Wa,-W in an attempt to suppress warnings from the assembler. That works with the GNU assembler, but failed with the Sun assembler, as the Sun assembler does not recognise the -W option.   \n> * I added -Wall to show the warnings from the code - I think it's good we see what warnings are generated by the compiler, as it is something to look at when getting problems. \n> * The original Makefile defined the compiler to be \"gcc\" but if we used $CC, we could use any compiler. \n> \n> I doubt I would have changed any linking - if I did, it was probably not intentionally. \n> \n> I have not checked this code when CC is defined to be a compiler other than gcc, but I did fix it to work with any compiler at one point - I hope a regression has not been introduced. \n> \n\nHi Dave,\n\nthe makefile needed some sanity put back into it, especially linker wise.\nso that was a job that was needed. I guess my main concern here is:\n\n\n*lcalc depends on mpfr when it shouldn't.\n\n\nThe rest is just my ramblings about there being an unused variable in\nspkg-install - which may lead people to think it is.\n\n\nFrancois",
    "created_at": "2010-08-06T19:06:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34644",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:95'></a>
Replying to [drkirkby](#comment%3A94):
> Replying to [fbissey](#comment%3A93):
> 
> > I think it is a remnant from a time where Dave (Kirby) had an extremely
> > simplified Makefile for lcalc and even then it was a case of overlinking.
> > Francois

> 
> My logic for changing the Makefile fell into 3 reasons I think. 
> * The original Makefile had a non-portable gcc option -Wa,-W in an attempt to suppress warnings from the assembler. That works with the GNU assembler, but failed with the Sun assembler, as the Sun assembler does not recognise the -W option.   
> * I added -Wall to show the warnings from the code - I think it's good we see what warnings are generated by the compiler, as it is something to look at when getting problems. 
> * The original Makefile defined the compiler to be "gcc" but if we used $CC, we could use any compiler. 
> 
> I doubt I would have changed any linking - if I did, it was probably not intentionally. 
> 
> I have not checked this code when CC is defined to be a compiler other than gcc, but I did fix it to work with any compiler at one point - I hope a regression has not been introduced. 
> 

Hi Dave,

the makefile needed some sanity put back into it, especially linker wise.
so that was a job that was needed. I guess my main concern here is:


*lcalc depends on mpfr when it shouldn't.


The rest is just my ramblings about there being an unused variable in
spkg-install - which may lead people to think it is.


Francois



---

archive/issue_comments_034645.json:
```json
{
    "body": "<a id='comment:96'></a>\nThis ticket is not about lcalc spkg. Please do not add junk to this ticket. I am replying to the latest closed ticket about the spkg  #9665\n\nReplying to [fbissey](#comment%3A95):\n> Replying to [drkirkby](#comment%3A94):\n> > Replying to [fbissey](#comment%3A93):\n> > \n> > > I think it is a remnant from a time where Dave (Kirby) had an extremely\n> > > simplified Makefile for lcalc and even then it was a case of overlinking.\n> > > Francois\n\n> > \n> > My logic for changing the Makefile fell into 3 reasons I think. \n> > * The original Makefile had a non-portable gcc option -Wa,-W in an attempt to suppress warnings from the assembler. That works with the GNU assembler, but failed with the Sun assembler, as the Sun assembler does not recognise the -W option.   \n> > * I added -Wall to show the warnings from the code - I think it's good we see what warnings are generated by the compiler, as it is something to look at when getting problems. \n> > * The original Makefile defined the compiler to be \"gcc\" but if we used $CC, we could use any compiler. \n> > \n> > I doubt I would have changed any linking - if I did, it was probably not intentionally. \n> > \n> > I have not checked this code when CC is defined to be a compiler other than gcc, but I did fix it to work with any compiler at one point - I hope a regression has not been introduced. \n> > \n\n> Hi Dave,\n> \n> the makefile needed some sanity put back into it, especially linker wise.\n> so that was a job that was needed. I guess my main concern here is:\n\n\n> \n> *lcalc depends on mpfr when it shouldn't.\n\n\n> \n> The rest is just my ramblings about there being an unused variable in\n> spkg-install - which may lead people to think it is.\n\n\n> \n> Francois\n",
    "created_at": "2010-08-06T19:42:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5396#issuecomment-34645",
    "user": "https://github.com/rishikesha"
}
```

<a id='comment:96'></a>
This ticket is not about lcalc spkg. Please do not add junk to this ticket. I am replying to the latest closed ticket about the spkg  #9665

Replying to [fbissey](#comment%3A95):
> Replying to [drkirkby](#comment%3A94):
> > Replying to [fbissey](#comment%3A93):
> > 
> > > I think it is a remnant from a time where Dave (Kirby) had an extremely
> > > simplified Makefile for lcalc and even then it was a case of overlinking.
> > > Francois

> > 
> > My logic for changing the Makefile fell into 3 reasons I think. 
> > * The original Makefile had a non-portable gcc option -Wa,-W in an attempt to suppress warnings from the assembler. That works with the GNU assembler, but failed with the Sun assembler, as the Sun assembler does not recognise the -W option.   
> > * I added -Wall to show the warnings from the code - I think it's good we see what warnings are generated by the compiler, as it is something to look at when getting problems. 
> > * The original Makefile defined the compiler to be "gcc" but if we used $CC, we could use any compiler. 
> > 
> > I doubt I would have changed any linking - if I did, it was probably not intentionally. 
> > 
> > I have not checked this code when CC is defined to be a compiler other than gcc, but I did fix it to work with any compiler at one point - I hope a regression has not been introduced. 
> > 

> Hi Dave,
> 
> the makefile needed some sanity put back into it, especially linker wise.
> so that was a job that was needed. I guess my main concern here is:


> 
> *lcalc depends on mpfr when it shouldn't.


> 
> The rest is just my ramblings about there being an unused variable in
> spkg-install - which may lead people to think it is.


> 
> Francois

