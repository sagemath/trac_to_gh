# Issue 5716: lifting a subdivided matrix should preserve the subdivision, but doesn't.

archive/issues_005716.json:
```json
{
    "body": "\n```\nsage: a = random_matrix(GF(3),4)\nsage: a.subdivide(2,2)\nsage: a\n[2 0|0 2]\n[2 1|1 0]\n[---+---]\n[1 2|1 0]\n[1 0|0 1]\nsage: a.lift()\n[2 0 0 2]\n[2 1 1 0]\n[1 2 1 0]\n[1 0 0 1]\n```\n\nSee also #5717.\n\n**Assignee:** @jhpalmieri\n\n**CC:**  @jasongrout\n\n**Author:** John Palmieri\n\n**Reviewer:** Jason Grout\n\n**Merged:** 4.0.1.alpha0\n\nIssue created by migration from https://trac.sagemath.org/ticket/5716\n\n",
    "closed_at": "2009-05-31T23:47:34Z",
    "created_at": "2009-04-08T19:18:52Z",
    "labels": [
        "component: linear algebra",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.0.1",
    "title": "lifting a subdivided matrix should preserve the subdivision, but doesn't.",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/5716",
    "user": "https://github.com/williamstein"
}
```

```
sage: a = random_matrix(GF(3),4)
sage: a.subdivide(2,2)
sage: a
[2 0|0 2]
[2 1|1 0]
[---+---]
[1 2|1 0]
[1 0|0 1]
sage: a.lift()
[2 0 0 2]
[2 1 1 0]
[1 2 1 0]
[1 0 0 1]
```

See also #5717.

**Assignee:** @jhpalmieri

**CC:**  @jasongrout

**Author:** John Palmieri

**Reviewer:** Jason Grout

**Merged:** 4.0.1.alpha0

Issue created by migration from https://trac.sagemath.org/ticket/5716





---

archive/issue_comments_048406.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -14,3 +14,5 @@\n [1 2 1 0]\n [1 0 0 1]\n ```\n+\n+See also #5717.\n``````\n",
    "created_at": "2009-04-08T19:19:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5716#issuecomment-48406",
    "user": "https://github.com/williamstein"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -14,3 +14,5 @@
 [1 2 1 0]
 [1 0 0 1]
 ```
+
+See also #5717.
``````




---

archive/issue_events_016896.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/5716",
    "rename": {
        "from": "lifting a subdivided matrix should preserve the subdivision, but doesn't.",
        "to": "[duplicate] lifting a subdivided matrix should preserve the subdivision, but doesn't."
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5716#event-16896"
}
```



---

archive/issue_comments_048407.json:
```json
{
    "body": "<a id='comment:2'></a>\nIs this a high priority issue? I am not convinced and since there is no patch and no sign of anyone working on fixing this I am bumping this to 3.4.2. There are also various dupes, one of which go reopened, i.e. #5715, so let's figure this out. \n\nCheers,\n\nMichael",
    "created_at": "2009-04-09T18:45:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5716#issuecomment-48407",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:2'></a>
Is this a high priority issue? I am not convinced and since there is no patch and no sign of anyone working on fixing this I am bumping this to 3.4.2. There are also various dupes, one of which go reopened, i.e. #5715, so let's figure this out. 

Cheers,

Michael



---

archive/issue_events_016897.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2009-04-09T18:45:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/5716",
    "milestone": "sage-3.4.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5716#event-16897"
}
```



---

archive/issue_comments_048408.json:
```json
{
    "body": "<a id='comment:3'></a>\n(I don't think this is actually a duplicate.)",
    "created_at": "2009-05-06T22:30:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5716#issuecomment-48408",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:3'></a>
(I don't think this is actually a duplicate.)



---

archive/issue_events_016898.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/5716",
    "rename": {
        "from": "[duplicate] lifting a subdivided matrix should preserve the subdivision, but doesn't.",
        "to": "lifting a subdivided matrix should preserve the subdivision, but doesn't."
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5716#event-16898"
}
```



---

archive/issue_comments_048409.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2009-05-07T04:35:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5716#issuecomment-48409",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_048410.json:
```json
{
    "body": "<a id='comment:4'></a>\nHere's a patch.  This should change things so that subdivisions are preserved when calling `mat.change_ring()`, `mat.lift()`, `mat.dense_matrix()`, and `mat.sparse_matrix()`.",
    "created_at": "2009-05-07T04:35:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5716#issuecomment-48410",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:4'></a>
Here's a patch.  This should change things so that subdivisions are preserved when calling `mat.change_ring()`, `mat.lift()`, `mat.dense_matrix()`, and `mat.sparse_matrix()`.



---

archive/issue_comments_048411.json:
```json
{
    "body": "**Changing status** from new to assigned.",
    "created_at": "2009-05-07T04:35:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5716#issuecomment-48411",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing status** from new to assigned.



---

archive/issue_comments_048412.json:
```json
{
    "body": "**Changing assignee** from @williamstein to @jhpalmieri.",
    "created_at": "2009-05-07T04:35:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5716#issuecomment-48412",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing assignee** from @williamstein to @jhpalmieri.



---

archive/issue_comments_048413.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2009-05-29T11:03:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5716#issuecomment-48413",
    "user": "https://github.com/loefflerd"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_048414.json:
```json
{
    "body": "<a id='comment:5'></a>\nThis applies fine to 4.0.rc1 and all doctests in sage/matrix pass (except the known numerical-noise failure which is nothing to do with this patch). But I'm not completely happy with it, because not all of the functions where the behaviour has changed have doctests to prove it, so I'm changing this to \"needs work\". \n\nDavid",
    "created_at": "2009-05-29T11:03:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5716#issuecomment-48414",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:5'></a>
This applies fine to 4.0.rc1 and all doctests in sage/matrix pass (except the known numerical-noise failure which is nothing to do with this patch). But I'm not completely happy with it, because not all of the functions where the behaviour has changed have doctests to prove it, so I'm changing this to "needs work". 

David



---

archive/issue_comments_048415.json:
```json
{
    "body": "<a id='comment:6'></a>\nOkay, here's a new patch.  I think that this tests everything, although there is at least one function (sparse_matrix, maybe) which is tested in a doctest for another (by looking at `a.dense_matrix().sparse_matrix()` or something like that).",
    "created_at": "2009-05-29T18:48:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5716#issuecomment-48415",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:6'></a>
Okay, here's a new patch.  I think that this tests everything, although there is at least one function (sparse_matrix, maybe) which is tested in a doctest for another (by looking at `a.dense_matrix().sparse_matrix()` or something like that).



---

archive/issue_comments_048416.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2009-05-29T18:48:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5716#issuecomment-48416",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing status** from needs_work to needs_review.



---

archive/attachments_006544.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_5716.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket5716/trac_5716.patch",
    "created_at": "2009-05-30T05:02:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5716",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/jasongrout"
}
```



---

archive/issue_comments_048417.json:
```json
{
    "body": "<a id='comment:7'></a>\n",
    "created_at": "2009-05-30T05:02:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5716#issuecomment-48417",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:7'></a>




---

archive/issue_comments_048418.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2009-05-30T05:52:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5716#issuecomment-48418",
    "user": "https://github.com/jasongrout"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_048419.json:
```json
{
    "body": "<a id='comment:8'></a>\nIt passes doctests (and everything is tested).  Looks good to me.  Positive review.",
    "created_at": "2009-05-30T05:52:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5716#issuecomment-48419",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:8'></a>
It passes doctests (and everything is tested).  Looks good to me.  Positive review.



---

archive/issue_events_016899.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-05-31T23:47:34Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/5716",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/5716#event-16899"
}
```



---

archive/issue_comments_048420.json:
```json
{
    "body": "<a id='comment:9'></a>\nMerged in 4.0.alpha0.",
    "created_at": "2009-05-31T23:47:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5716#issuecomment-48420",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:9'></a>
Merged in 4.0.alpha0.



---

archive/issue_comments_048421.json:
```json
{
    "body": "**Merged:** 4.0.1.alpha0",
    "created_at": "2009-06-06T21:54:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5716#issuecomment-48421",
    "user": "https://github.com/mwhansen"
}
```

**Merged:** 4.0.1.alpha0



---

archive/issue_comments_048422.json:
```json
{
    "body": "**Reviewer:** Jason Grout",
    "created_at": "2009-06-06T21:54:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5716#issuecomment-48422",
    "user": "https://github.com/mwhansen"
}
```

**Reviewer:** Jason Grout



---

archive/issue_comments_048423.json:
```json
{
    "body": "**Author:** John Palmieri",
    "created_at": "2009-06-06T21:54:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/5716",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/5716#issuecomment-48423",
    "user": "https://github.com/mwhansen"
}
```

**Author:** John Palmieri
