# Issue 31117: move Dedekind zeta function to the category of number fields

Issue created by migration from https://trac.sagemath.org/ticket/31354

Original creator: chapoton

Original creation time: 2021-02-07 11:07:03

CC:  cremona davidloeffler slelievre

so that it works for QQ too


---

Comment by chapoton created at 2021-02-07 11:07:43

New commits:


---

Comment by chapoton created at 2021-02-07 11:07:43

Changing status from new to needs_review.


---

Comment by slelievre created at 2021-02-07 15:29:47

Changing keywords from "" to "zeta, QQ".


---

Comment by chapoton created at 2021-02-07 15:35:02

green bot, please review


---

Comment by cremona created at 2021-02-07 16:01:26

Does this ticket just move existing code from on eplace to another?  For a meaningful review, please explain further the purpose


---

Comment by chapoton created at 2021-02-07 16:27:29

yes, this is just moving code around. Plus adding one doctest in TESTS:

The motivation: `QQ.zeta_function` was a not implemented method.

Now QQ has a `zeta_function` method, as well as any member of the category of number fields.

No change in functionality for other number fields.

See also https://ask.sagemath.org/question/55607/


---

Comment by cremona created at 2021-02-08 08:59:46

Looks good to me.  I have not built the branch myself, and would like to, to make sure that the methods of the zeta function returned (which is of course the Riemann Zeta function) work.  That will take a little time...


---

Comment by cremona created at 2021-02-09 13:54:21

The docstring says that the algorithm defaults to 'gp' but (a) it doesn't, it defaults to 'pari', and (b)

```
sage: QQ.zeta_function(algorithm='gp')
...
AttributeError: 'RationalField_with_category' object has no attribute 'absolute_polynomial'
```

This can be fixed by changing the line mentioning self.absolute_polynomial() to

```
s = 'nf = nfinit(%s);' % polygen(self) if self.degree() == 1 else self.absolute_polynomial()
```

with also an additional import

```
from sage.rings.polynomial.polynomial_ring import polygen
```

a few lines earlier.  Or -- perhaps better? -- add methods polynomial(), absolute_polynomial(), defining_polynomial() to the RationalField class, to avoid such things once and for all.  (I very often add methods to RationalField to match methods available for number fields.)

And change the docstring to admit that 'pari' is the default -- so I am not sure why the default is 'None' which is the changed to 'pari' instead of being set to 'pari' i nthe first place!


---

Comment by cremona created at 2021-02-10 11:09:05

As I have built the branch, I'll make the additional changes I suggested and update the branch.


---

Comment by cremona created at 2021-02-10 15:13:43

I updated the branch to u/cremona/31354 which has one commit on top of u/chapoton/31354.  I hope that is OK in terms of etiquette.  I think we can now be joint reviewers, Frédéric?


---

Comment by git created at 2021-02-10 16:53:08

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2021-02-10 19:21:34

perfect etiquette. I am too tired for today


---

Comment by chapoton created at 2021-02-11 10:15:49

ok, this will do. Can we set to positive ?


---

Comment by cremona created at 2021-02-11 10:49:24

I will.  For another ticket perhaps: either change the name of the non default from gp to dokchitser or even get rid if it altogether.


---

Comment by cremona created at 2021-02-11 10:49:24

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2021-02-11 11:07:46

Thanks. Yes, we should get rid of the legacy dokchitser implementations. And more generally, L-functions are in need of care.


---

Comment by vbraun created at 2021-03-09 00:01:51

Resolution: fixed
