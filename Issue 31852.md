# Issue 31852: ConditionSet_callable_symbolic_expression

Issue created by migration from https://trac.sagemath.org/ticket/32089

Original creator: mkoeppe

Original creation time: 2021-06-30 07:13:47

CC:  tscrim egourgoulhon

(from #24176).

We define a constructor `ConditionSet`.  If the given predicate (condition) is a `CallableSymbolicExpression`, we create an instance of class `ConditionSet_callable_symbolic_expression`.


---

Comment by mkoeppe created at 2021-06-30 23:49:44

Last 10 new commits:


---

Comment by git created at 2021-07-01 04:19:11

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-07-01 05:08:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-07-01 16:54:21

I'm going to extend it to lists of several conditions


---

Comment by git created at 2021-07-01 19:15:49

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by git created at 2021-07-01 22:00:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-07-01 22:27:25

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-07-01 22:43:58

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-07-01 23:03:04

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-07-02 01:09:55

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-07-02 02:03:16

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-07-02 02:04:55

Changing status from new to needs_review.


---

Comment by git created at 2021-07-04 00:18:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2021-07-04 01:29:15

Note that this is duplicating some of the framework in `sage/combinat/combinat.py` with `FilteredCombinatorialClass`.

What do we want the intersection of two condition sets to be? Mainly, do we want the generic intersection? It could be another condition set object naturally, which would be more direct for operations such as containment check or iteration.


---

Comment by mkoeppe created at 2021-07-04 02:33:33

Replying to [comment:19 tscrim]:
> Note that this is duplicating some of the framework in `sage/combinat/combinat.py` with `FilteredCombinatorialClass`.

Thanks for the pointer! I was not aware of this. But it looks to me like this whole `*CombinatorialClass` business is deprecated?


---

Comment by mkoeppe created at 2021-07-04 02:34:39

Replying to [comment:19 tscrim]:
> What do we want the intersection of two condition sets to be? Mainly, do we want the generic intersection? It could be another condition set object naturally, which would be more direct for operations such as containment check or iteration.

A specialized `intersection` method is of course a natural candidate to be added in a follow-up ticket.  If for nothing else, certainly for more succinct printing.


---

Comment by tscrim created at 2021-07-04 12:29:48

Replying to [comment:20 mkoeppe]:
> Replying to [comment:19 tscrim]:
> > Note that this is duplicating some of the framework in `sage/combinat/combinat.py` with `FilteredCombinatorialClass`.
> 
> Thanks for the pointer! I was not aware of this. But it looks to me like this whole `*CombinatorialClass` business is deprecated?

Indeed, but some of it is still used without a true replacement ready IIRC.


---

Comment by tscrim created at 2021-07-04 12:30:40

Replying to [comment:21 mkoeppe]:
> Replying to [comment:19 tscrim]:
> > What do we want the intersection of two condition sets to be? Mainly, do we want the generic intersection? It could be another condition set object naturally, which would be more direct for operations such as containment check or iteration.
> 
> A specialized `intersection` method is of course a natural candidate to be added in a follow-up ticket.  If for nothing else, certainly for more succinct printing.

Why can't we do it on this ticket? It seems simple enough to check if `other` is a `ConditionSet`, and then just create a new such instance with the concatenation of the conditions.


---

Comment by git created at 2021-07-04 18:00:26

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-07-04 18:00:49

OK, here we go. Caught and fixed a bug along the way.


---

Comment by git created at 2021-07-07 03:17:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2021-07-07 05:10:53

Thank you. LGTM (modulo the doctest failure for the dependency).


---

Comment by tscrim created at 2021-07-07 05:10:53

Changing status from needs_review to positive_review.


---

Comment by git created at 2021-07-07 20:11:14

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by git created at 2021-07-07 20:11:14

Changing status from positive_review to needs_review.


---

Comment by tscrim created at 2021-07-07 22:14:49

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-07-07 23:22:58

Thank you!


---

Comment by git created at 2021-07-07 23:52:19

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. Last 10 new commits:


---

Comment by git created at 2021-07-07 23:52:19

Changing status from positive_review to needs_review.


---

Comment by mkoeppe created at 2021-07-07 23:52:36

Merged updated #32013.


---

Comment by mkoeppe created at 2021-07-07 23:53:05

Changing status from needs_review to needs_work.


---

Comment by mkoeppe created at 2021-07-07 23:53:05

Unfortunately the sort order of the symbolic conditions is not stable. I'll have to fix this


---

Comment by git created at 2021-07-08 00:10:10

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-07-08 00:11:15

Changing status from needs_work to needs_review.


---

Comment by mkoeppe created at 2021-07-08 00:11:15

Also the doctests that tried to use `(ZZ<sup>2).rename("ZZ</sup>2")` for cosmetic reasons were not stable. I have removed this complication.


---

Comment by tscrim created at 2021-07-08 23:16:40

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2021-07-08 23:16:40

For future reference, you can simply call `X.rename()` to revert back to the default name. This can be used to make the doctest stable.


---

Comment by mkoeppe created at 2021-07-09 00:10:43

Thanks!


---

Comment by vbraun created at 2021-07-09 21:23:12


```
[docpdf] Underfull \hbox (badness 10000) in paragraph at lines 5889--5891
[docpdf] \T1/txtt/m/sl/10 set.Set_boolean_operators\T1/qtm/m/n/10 , \T1/txtt/m/sl/10 sag
[docpdf] e.sets.set.Set_add_sub_operators\T1/qtm/m/n/10 , [][]\T1/txtt/m/n/10 sage.struc
[docpdf] ture.
[docpdf] ! Missing $ inserted.
[docpdf] <inserted text> 
[docpdf]                 $
[docpdf] l.5923 ...us{}even at 0x...\PYGZgt{}(x) \PYGZcb{}}
[docpdf]                                                   
[docpdf] ? 
[docpdf] ! Emergency stop.
```



---

Comment by vbraun created at 2021-07-09 21:23:12

Changing status from positive_review to needs_work.


---

Comment by git created at 2021-07-10 03:24:44

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-07-10 03:25:46

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2021-07-10 03:45:57

LGTM.


---

Comment by tscrim created at 2021-07-10 03:45:57

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-07-10 05:03:16

Thanks.


---

Comment by git created at 2021-07-11 21:54:51

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by git created at 2021-07-11 21:54:51

Changing status from positive_review to needs_review.


---

Comment by mkoeppe created at 2021-07-11 21:55:00

Changing status from needs_review to positive_review.


---

Comment by git created at 2021-07-13 00:59:38

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. Last 10 new commits:


---

Comment by git created at 2021-07-13 00:59:38

Changing status from positive_review to needs_review.


---

Comment by mkoeppe created at 2021-07-13 01:00:00

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2021-07-23 20:11:02

Resolution: fixed
