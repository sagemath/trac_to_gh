# Issue 19475: strongly_regular_graph() crashes when mu=0

Issue created by migration from Trac.

Original creator: ncohen

Original creation time: 2015-12-15 09:54:12

CC:  dimpase

Reported by Georgi Guninski:


```
sage: graphs.strongly_regular_graph(10,2,1)
<crash>
```


This is because of a "<whatever>%0" somewhere in the code. Which should not happen, as in a strongly regular graph we have mu>0.

Nathann


---

Comment by ncohen created at 2015-12-15 09:56:58

New commits:


---

Comment by ncohen created at 2015-12-15 09:56:58

Changing status from new to needs_review.


---

Comment by dimpase created at 2015-12-15 12:19:14

I presume you're not changing the definition, i.e. you still allow mu=0, right?


---

Comment by ncohen created at 2015-12-15 12:38:00

Well, is mu=0 allowed for strongly regular graphs? If they are assumed to be connected + non-complete, then mu>0 isn't it?

Nathann


---

Comment by dimpase created at 2015-12-15 12:52:46

Replying to [comment:3 ncohen]:
> Well, is mu=0 allowed for strongly regular graphs? If they are assumed to be connected + non-complete, then mu>0 isn't it?

Well, either we require that the graph AND its complement are connected, or we live with mu=0.

Don't we have mu=0 in 6.9? If yes, we'd need to do deprecation to switch to mu>0...

I'd rather keep mu=0 - the classification of graphs in this case is trivial.


---

Comment by ncohen created at 2015-12-15 13:09:24

> I'd rather keep mu=0 - the classification of graphs in this case is trivial.

Okayokay. Can you update the branch then?

Nathann


---

Comment by git created at 2015-12-15 13:33:47

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by ncohen created at 2015-12-15 13:34:04

Unless you agree with that ?

Nathann


---

Comment by dimpase created at 2015-12-15 14:32:20

Changing status from needs_review to needs_work.


---

Comment by dimpase created at 2015-12-15 14:32:20

here is a problem; not everything to do with strong regularity goes through the function you just changed:

```
sage: g=graphs.CompleteBipartiteGraph(3,3)
sage: g.is_strongly_regular()
True
sage: g.is_strongly_regular(parameters=True)
(6, 3, 0, 3)
sage: graphs.strongly_regular_graph(*g.is_strongly_regular(parameters=True))
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
...
ValueError: There exists no (6, 3, 0, 3)-strongly regular graph
```



---

Comment by dimpase created at 2015-12-15 14:47:10

because of the latter, I always thought that Sage does allow mu=0...
In fact, this is an inconsistency present already before this branch.

Also, note the docs of `is_strongly_regular()` that do not forbig mu=0 (or mu=0 for the complementary graph).


---

Comment by git created at 2015-12-15 15:06:59

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by ncohen created at 2015-12-15 15:07:55

Changing status from needs_work to needs_review.


---

Comment by dimpase created at 2015-12-15 18:08:08

if we allow mu=0 then the disjoint union of m copies of `K_n` is s.r.g.
(and its complement, complete m-partite graph with parts of size n). not only for m=2.
E.g. for m=3, n=5 one gets
(15, 4, 3, 0)
and
(15, 10, 5, 10)


---

Comment by ncohen created at 2015-12-15 21:03:13

The wikipedia page says that often both are excluded, i.e. both the disjoint complete graphs and the complete bipartite graphs.

Now, my former patch excluded both and you complained about it. Now, you seem to complain that I only exclude one of the two.

Make up your mind.

Nathann


---

Comment by dimpase created at 2015-12-15 21:13:33

well, I am OK with anything that makes `is_strongly_regular()` and `strongly_regular_graph()` consistent with each other. 

It looks easier after all to make `is_strongly_regular()` reject more things (to exclude mu=0 for graph or its complement); an added benefit of this is that it will be consistent with Andries' DB.


---

Comment by dimpase created at 2015-12-16 09:29:46

or allow mu=0, but make sure that _check_database() does not count these graphs.


---

Comment by dimpase created at 2015-12-16 09:47:21

well, let me know whether you like me to fix the patch, or rather do it yourself?


---

Comment by ncohen created at 2015-12-16 09:48:27

If you have time to deal with it today I certainly won't mind `:-P`


---

Comment by dimpase created at 2015-12-16 09:59:05

Replying to [comment:17 ncohen]:
> If you have time to deal with it today I certainly won't mind `:-P` 
OK, will do.


---

Comment by git created at 2015-12-16 11:22:07

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dimpase created at 2015-12-16 11:23:47

OK, ready for review!


---

Comment by dimpase created at 2015-12-16 11:38:08

Changing priority from major to critical.


---

Comment by git created at 2015-12-17 12:40:39

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by ncohen created at 2015-12-17 12:49:14

Looks good to me. I don't like the 'mu=0' much, given that it actually "isn't defined" but well, that's life. Well. What would you think of testing `l == k-1` instead or testing `mu=0`, however? Would do the trick to, and so we wouldn't suppose that the undefined 'mu' must be equal to 0?..

As you like.

Nathann


---

Comment by dimpase created at 2015-12-17 12:55:52

Replying to [comment:23 ncohen]:
> Looks good to me. I don't like the 'mu=0' much, given that it actually "isn't defined" but well, that's life. Well. What would you think of testing `l == k-1` instead or testing `mu=0`, however? Would do the trick to, and so we wouldn't suppose that the undefined 'mu' must be equal to 0?..

I don't see what do you mean when you say "the undefined 'mu'". Do you mean that it is an optional parameter? But it is uniquely determined by the other parameters, so it's not what I call "undefined"...


---

Comment by ncohen created at 2015-12-17 12:57:24

Oh, sorry. I meant that for complete graphs it is undefined. But indeed it is not 'as bad' as I thought. No problem then. I'll run the tests and change this ticket's status. Thanks.

Nathann


---

Comment by ncohen created at 2015-12-17 12:59:38

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2015-12-17 13:07:14

Great, thanks! Hopefully it can get into 6.10, still...


---

Comment by vbraun created at 2015-12-18 08:45:48

Resolution: fixed
