# Issue 24194: Pushout for Laurent series

Issue created by migration from https://trac.sagemath.org/ticket/24431

Original creator: vdelecroix

Original creation time: 2017-12-26 15:21:11

There should be an automatic extension of scalars in the following situation

```
sage: R.<x> = LaurentSeriesRing(QQ)
sage: QQbar.gen() * x
Traceback (most recent call last):
...
TypeError: unsupported operand parent(s) for *: 'Algebraic Field' and
'Laurent Series Ring in x over Rational Field'
```

To be compared with

```
sage: R.<x> = PowerSeriesRing(QQ)
sage: QQbar.gen() * x
I*x
sage: parent(_)
Power Series Ring in x over Algebraic Field
```



---

Comment by vdelecroix created at 2017-12-26 15:43:21

Changing status from new to needs_review.


---

Comment by vdelecroix created at 2017-12-26 15:43:21

New commits:


---

Comment by vdelecroix created at 2017-12-26 15:43:21

Changing component from PLEASE CHANGE to algebra.


---

Comment by git created at 2017-12-26 22:27:07

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2017-12-28 15:01:51

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2017-12-28 16:35:21

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2017-12-28 16:35:56

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by vdelecroix created at 2017-12-31 16:39:49

Changing status from needs_review to needs_work.


---

Comment by git created at 2017-12-31 17:46:07

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by vdelecroix created at 2017-12-31 17:47:34

Changing status from needs_work to needs_review.


---

Comment by git created at 2018-01-02 15:47:51

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by vdelecroix created at 2018-01-02 15:48:06

rebased on 8.2.beta2


---

Comment by tscrim created at 2018-01-02 23:30:27

LGTM except I don't understand the non-import changes in `schemes/hyperelliptic_curves/hyperelliptic_generic.py`. (Also, is `LaurentPolynomialRing` is not used in that file.)


---

Comment by vdelecroix created at 2018-01-03 15:17:44

Replying to [comment:11 tscrim]:
> LGTM except I don't understand the non-import changes in `schemes/hyperelliptic_curves/hyperelliptic_generic.py`. (Also, is `LaurentPolynomialRing` is not used in that file.)

I believe you refer to this line

```
-    L = PolynomialRing(self.base_ring(),'x')
+    L = PolynomialRing(K,'x')
```

This is the third point in the ticket description.


---

Comment by tscrim created at 2018-01-03 16:56:02

I understand now the reason why that change is needed. Thanks. (Although I don't quite understand why that pushout is no longer allowed, but that's okay.)

Just remove the unneeded import of `LaurentPolynomialRing` and the `\`'s here

```diff
@@ -410,7 +565,11 @@ class LaurentSeriesRing_generic(UniqueRepresentation, ring.CommutativeRing):
 
         from sage.rings.polynomial.polynomial_ring import is_PolynomialRing
         from sage.rings.power_series_ring import is_PowerSeriesRing
-        if ((is_LaurentSeriesRing(P) or is_PowerSeriesRing(P) or is_PolynomialRing(P))
+        from sage.rings.polynomial.laurent_polynomial_ring import is_LaurentPolynomialRing
+        if ((is_LaurentSeriesRing(P) or \
+             is_LaurentPolynomialRing(P) or \
+             is_PowerSeriesRing(P) or \
+             is_PolynomialRing(P))
             and P.variable_name() == self.variable_name()
             and A.has_coerce_map_from(P.base_ring())):
             return True
```

and you can set a positive review on my behalf.


---

Comment by git created at 2018-01-03 17:48:29

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2018-01-03 17:49:41

I did not find the import you were talking about in [comment:13].


---

Comment by tscrim created at 2018-01-03 18:12:21


```diff
diff --git a/src/sage/schemes/hyperelliptic_curves/hyperelliptic_generic.py b/src/sage/schemes/hyperelliptic_curves/hyperelliptic_generic.py
index cdca282..9e9897a 100644
--- a/src/sage/schemes/hyperelliptic_curves/hyperelliptic_generic.py
+++ b/src/sage/schemes/hyperelliptic_curves/hyperelliptic_generic.py
@@ -33,7 +33,11 @@ from __future__ import absolute_import
 #                  http://www.gnu.org/licenses/
 #*****************************************************************************
 
-from sage.rings.all import PolynomialRing, RR, PowerSeriesRing, LaurentSeriesRing, O
+from sage.rings.polynomial.all import PolynomialRing, LaurentPolynomialRing
+from sage.rings.big_oh import O
+from sage.rings.power_series_ring import PowerSeriesRing
+from sage.rings.laurent_series_ring import LaurentSeriesRing
+from sage.rings.real_mpfr import RR
 from sage.functions.all import log
 from sage.structure.category_object import normalize_names
 
```



---

Comment by git created at 2018-01-03 18:47:44

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mmezzarobba created at 2018-01-30 15:05:15

Looks like there is a test failure since 8.2.beta3.


---

Comment by mmezzarobba created at 2018-01-30 15:05:15

Changing status from needs_review to needs_work.


---

Comment by tscrim created at 2018-01-30 17:24:31

It is trivial due to the output of the functor. Once fixed, you can set a positive review on my behalf.


---

Comment by git created at 2018-01-30 18:12:12

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by vdelecroix created at 2018-01-30 18:13:03

Rebased on beta4. Waiting for patchbots as an extra check.


---

Comment by vdelecroix created at 2018-01-30 18:13:03

Changing status from needs_work to needs_review.


---

Comment by vdelecroix created at 2018-01-30 22:00:41

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2018-02-02 12:05:57

Resolution: fixed
