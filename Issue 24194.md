# Issue 24194: Pushout for Laurent series

archive/issues_024194.json:
```json
{
    "body": "There should be an automatic extension of scalars in the following situation\n\n```\nsage: R.<x> = LaurentSeriesRing(QQ)\nsage: QQbar.gen() * x\nTraceback (most recent call last):\n...\nTypeError: unsupported operand parent(s) for *: 'Algebraic Field' and\n'Laurent Series Ring in x over Rational Field'\n```\n\nTo be compared with\n\n```\nsage: R.<x> = PowerSeriesRing(QQ)\nsage: QQbar.gen() * x\nI*x\nsage: parent(_)\nPower Series Ring in x over Algebraic Field\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/24431\n\n",
    "created_at": "2017-12-26T15:21:11Z",
    "labels": [
        "PLEASE CHANGE",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "Pushout for Laurent series",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24194",
    "user": "@videlec"
}
```
There should be an automatic extension of scalars in the following situation

```
sage: R.<x> = LaurentSeriesRing(QQ)
sage: QQbar.gen() * x
Traceback (most recent call last):
...
TypeError: unsupported operand parent(s) for *: 'Algebraic Field' and
'Laurent Series Ring in x over Rational Field'
```

To be compared with

```
sage: R.<x> = PowerSeriesRing(QQ)
sage: QQbar.gen() * x
I*x
sage: parent(_)
Power Series Ring in x over Algebraic Field
```


Issue created by migration from https://trac.sagemath.org/ticket/24431





---

archive/issue_comments_338885.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-12-26T15:43:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24194#issuecomment-338885",
    "user": "@videlec"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_338886.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-12-26T15:43:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24194#issuecomment-338886",
    "user": "@videlec"
}
```

New commits:



---

archive/issue_comments_338887.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to algebra.",
    "created_at": "2017-12-26T15:43:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24194#issuecomment-338887",
    "user": "@videlec"
}
```

Changing component from PLEASE CHANGE to algebra.



---

archive/issue_comments_338888.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-12-26T22:27:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24194#issuecomment-338888",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_338889.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-12-28T15:01:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24194#issuecomment-338889",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_338890.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-12-28T16:35:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24194#issuecomment-338890",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_338891.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-12-28T16:35:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24194#issuecomment-338891",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_338892.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-12-31T16:39:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24194#issuecomment-338892",
    "user": "@videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_338893.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-12-31T17:46:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24194#issuecomment-338893",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_338894.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-12-31T17:47:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24194#issuecomment-338894",
    "user": "@videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_338895.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-01-02T15:47:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24194#issuecomment-338895",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_338896.json:
```json
{
    "body": "rebased on 8.2.beta2",
    "created_at": "2018-01-02T15:48:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24194#issuecomment-338896",
    "user": "@videlec"
}
```

rebased on 8.2.beta2



---

archive/issue_comments_338897.json:
```json
{
    "body": "LGTM except I don't understand the non-import changes in `schemes/hyperelliptic_curves/hyperelliptic_generic.py`. (Also, is `LaurentPolynomialRing` is not used in that file.)",
    "created_at": "2018-01-02T23:30:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24194#issuecomment-338897",
    "user": "@tscrim"
}
```

LGTM except I don't understand the non-import changes in `schemes/hyperelliptic_curves/hyperelliptic_generic.py`. (Also, is `LaurentPolynomialRing` is not used in that file.)



---

archive/issue_comments_338898.json:
```json
{
    "body": "Replying to [comment:11 tscrim]:\n> LGTM except I don't understand the non-import changes in `schemes/hyperelliptic_curves/hyperelliptic_generic.py`. (Also, is `LaurentPolynomialRing` is not used in that file.)\n\nI believe you refer to this line\n\n```\n-    L = PolynomialRing(self.base_ring(),'x')\n+    L = PolynomialRing(K,'x')\n```\n\nThis is the third point in the ticket description.",
    "created_at": "2018-01-03T15:17:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24194#issuecomment-338898",
    "user": "@videlec"
}
```

Replying to [comment:11 tscrim]:
> LGTM except I don't understand the non-import changes in `schemes/hyperelliptic_curves/hyperelliptic_generic.py`. (Also, is `LaurentPolynomialRing` is not used in that file.)

I believe you refer to this line

```
-    L = PolynomialRing(self.base_ring(),'x')
+    L = PolynomialRing(K,'x')
```

This is the third point in the ticket description.



---

archive/issue_comments_338899.json:
```json
{
    "body": "I understand now the reason why that change is needed. Thanks. (Although I don't quite understand why that pushout is no longer allowed, but that's okay.)\n\nJust remove the unneeded import of `LaurentPolynomialRing` and the `\\`'s here\n\n```diff\n@@ -410,7 +565,11 @@ class LaurentSeriesRing_generic(UniqueRepresentation, ring.CommutativeRing):\n \n         from sage.rings.polynomial.polynomial_ring import is_PolynomialRing\n         from sage.rings.power_series_ring import is_PowerSeriesRing\n-        if ((is_LaurentSeriesRing(P) or is_PowerSeriesRing(P) or is_PolynomialRing(P))\n+        from sage.rings.polynomial.laurent_polynomial_ring import is_LaurentPolynomialRing\n+        if ((is_LaurentSeriesRing(P) or \\\n+             is_LaurentPolynomialRing(P) or \\\n+             is_PowerSeriesRing(P) or \\\n+             is_PolynomialRing(P))\n             and P.variable_name() == self.variable_name()\n             and A.has_coerce_map_from(P.base_ring())):\n             return True\n```\n\nand you can set a positive review on my behalf.",
    "created_at": "2018-01-03T16:56:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24194#issuecomment-338899",
    "user": "@tscrim"
}
```

I understand now the reason why that change is needed. Thanks. (Although I don't quite understand why that pushout is no longer allowed, but that's okay.)

Just remove the unneeded import of `LaurentPolynomialRing` and the `\`'s here

```diff
@@ -410,7 +565,11 @@ class LaurentSeriesRing_generic(UniqueRepresentation, ring.CommutativeRing):
 
         from sage.rings.polynomial.polynomial_ring import is_PolynomialRing
         from sage.rings.power_series_ring import is_PowerSeriesRing
-        if ((is_LaurentSeriesRing(P) or is_PowerSeriesRing(P) or is_PolynomialRing(P))
+        from sage.rings.polynomial.laurent_polynomial_ring import is_LaurentPolynomialRing
+        if ((is_LaurentSeriesRing(P) or \
+             is_LaurentPolynomialRing(P) or \
+             is_PowerSeriesRing(P) or \
+             is_PolynomialRing(P))
             and P.variable_name() == self.variable_name()
             and A.has_coerce_map_from(P.base_ring())):
             return True
```

and you can set a positive review on my behalf.



---

archive/issue_comments_338900.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-01-03T17:48:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24194#issuecomment-338900",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_338901.json:
```json
{
    "body": "I did not find the import you were talking about in [comment:13].",
    "created_at": "2018-01-03T17:49:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24194#issuecomment-338901",
    "user": "@videlec"
}
```

I did not find the import you were talking about in [comment:13].



---

archive/issue_comments_338902.json:
```json
{
    "body": "\n```diff\ndiff --git a/src/sage/schemes/hyperelliptic_curves/hyperelliptic_generic.py b/src/sage/schemes/hyperelliptic_curves/hyperelliptic_generic.py\nindex cdca282..9e9897a 100644\n--- a/src/sage/schemes/hyperelliptic_curves/hyperelliptic_generic.py\n+++ b/src/sage/schemes/hyperelliptic_curves/hyperelliptic_generic.py\n@@ -33,7 +33,11 @@ from __future__ import absolute_import\n #                  http://www.gnu.org/licenses/\n #*****************************************************************************\n \n-from sage.rings.all import PolynomialRing, RR, PowerSeriesRing, LaurentSeriesRing, O\n+from sage.rings.polynomial.all import PolynomialRing, LaurentPolynomialRing\n+from sage.rings.big_oh import O\n+from sage.rings.power_series_ring import PowerSeriesRing\n+from sage.rings.laurent_series_ring import LaurentSeriesRing\n+from sage.rings.real_mpfr import RR\n from sage.functions.all import log\n from sage.structure.category_object import normalize_names\n \n```\n",
    "created_at": "2018-01-03T18:12:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24194#issuecomment-338902",
    "user": "@tscrim"
}
```


```diff
diff --git a/src/sage/schemes/hyperelliptic_curves/hyperelliptic_generic.py b/src/sage/schemes/hyperelliptic_curves/hyperelliptic_generic.py
index cdca282..9e9897a 100644
--- a/src/sage/schemes/hyperelliptic_curves/hyperelliptic_generic.py
+++ b/src/sage/schemes/hyperelliptic_curves/hyperelliptic_generic.py
@@ -33,7 +33,11 @@ from __future__ import absolute_import
 #                  http://www.gnu.org/licenses/
 #*****************************************************************************
 
-from sage.rings.all import PolynomialRing, RR, PowerSeriesRing, LaurentSeriesRing, O
+from sage.rings.polynomial.all import PolynomialRing, LaurentPolynomialRing
+from sage.rings.big_oh import O
+from sage.rings.power_series_ring import PowerSeriesRing
+from sage.rings.laurent_series_ring import LaurentSeriesRing
+from sage.rings.real_mpfr import RR
 from sage.functions.all import log
 from sage.structure.category_object import normalize_names
 
```




---

archive/issue_comments_338903.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-01-03T18:47:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24194#issuecomment-338903",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_338904.json:
```json
{
    "body": "Looks like there is a test failure since 8.2.beta3.",
    "created_at": "2018-01-30T15:05:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24194#issuecomment-338904",
    "user": "@mezzarobba"
}
```

Looks like there is a test failure since 8.2.beta3.



---

archive/issue_comments_338905.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-01-30T15:05:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24194#issuecomment-338905",
    "user": "@mezzarobba"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_338906.json:
```json
{
    "body": "It is trivial due to the output of the functor. Once fixed, you can set a positive review on my behalf.",
    "created_at": "2018-01-30T17:24:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24194#issuecomment-338906",
    "user": "@tscrim"
}
```

It is trivial due to the output of the functor. Once fixed, you can set a positive review on my behalf.



---

archive/issue_comments_338907.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-01-30T18:12:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24194#issuecomment-338907",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_338908.json:
```json
{
    "body": "Rebased on beta4. Waiting for patchbots as an extra check.",
    "created_at": "2018-01-30T18:13:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24194#issuecomment-338908",
    "user": "@videlec"
}
```

Rebased on beta4. Waiting for patchbots as an extra check.



---

archive/issue_comments_338909.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-01-30T18:13:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24194#issuecomment-338909",
    "user": "@videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_338910.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-01-30T22:00:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24194#issuecomment-338910",
    "user": "@videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_338911.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-02-02T12:05:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24194#issuecomment-338911",
    "user": "@vbraun"
}
```

Resolution: fixed
