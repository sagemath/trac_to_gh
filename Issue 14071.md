# Issue 14071: Lazy imports with deprecation

Issue created by migration from https://trac.sagemath.org/ticket/14275

Original creator: roed

Original creation time: 2013-03-14 21:30:00

Assignee: jason

It's annoying when other people move something around in the Sage library and it's no longer available in the previous location to be imported.  Sage currently has some mechanisms for alleviating this problem (`sage.misc.superceded.deprecated_callable_import` and `sage.structure.sage_object.register_unpickle_override` for example).  This ticket adds another option: lazily import the old name so that a deprecation warning is issued whenever it is referred to.


---

Attachment


---

Comment by roed created at 2013-03-14 21:36:56

Changing status from new to needs_review.


---

Comment by tscrim created at 2013-04-03 16:29:46

Changing status from needs_review to needs_work.


---

Comment by tscrim created at 2013-04-03 16:29:46

Hey David,

The doctest is failing because the mismatch of the trac numbers. Also could you add a doctest with a message as well?

Thanks,

Travis


---

Comment by vbraun created at 2013-04-22 13:55:05

The way I see it, deprecation only makes sense for stuff that is imported into the global namespace. Anything that is not directly accessible from the command line is, by definition, an implementation detail. And once you require backwards compatibility for implementation details it basically becomes impossible to change anything. So there is no point in deprecating import locations.


---

Comment by tscrim created at 2014-03-09 18:53:45

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2014-03-09 18:53:45

This could be used to remove things from the global namespace but the class itself doesn't change.
----
New commits:


---

Comment by git created at 2014-03-09 18:59:10

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ncohen created at 2014-04-03 14:11:19

Comment from the sage-combinat thread :

the way it is implemented you add a "deprecation" 
feature to lazy import. But lazy imports can be used a lot, so 
wouldn't it be better to instead add a "lazy" feature to 
"deprecation_function_alias" ? 

Nathann


---

Comment by ncohen created at 2014-04-03 14:11:19

Changing status from needs_review to needs_info.


---

Comment by tscrim created at 2014-04-03 17:05:13

No, because then we'd have to import `deprecated_function_alias` (which doesn't currently accept a message too) and import the original object just to do something like

```
x = deprecation_function_alias(14275, x)
```

Otherwise we completely change the syntax and functionality to include `lazy_import`. Both of which are asinine.


---

Comment by tscrim created at 2014-04-03 17:05:13

Changing status from needs_info to needs_review.


---

Comment by ncohen created at 2014-04-03 20:37:13

Ahahaahha. Well, for as long as you know that the two reasons you gave me are bad reasons and can be easily avoided, all is fine. It is not so bad.

Good to go !

Nathann


---

Comment by ncohen created at 2014-04-03 20:37:13

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2014-04-03 21:34:22

Thanks Nathann.


---

Comment by vbraun created at 2014-04-04 15:55:31

Resolution: fixed
