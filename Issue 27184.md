# Issue 27184: .coefficient of multi-variate polynomial should accept output of .exponents()

Issue created by migration from https://trac.sagemath.org/ticket/27421

Original creator: dkrenn

Original creation time: 2019-03-04 15:41:26

CC:  @chamanagrawal

Keywords: easy, beginner


```
sage: P.<x,y> = QQ[]
sage: x.coefficient(x.exponents()[0])
```

gives

```
TypeError: The input degrees must be a dictionary of variables to exponents.
```

and one has to use 

```
sage: x.coefficient(list(x.exponents()[0]))
1
```

as a workaround. However, it seems strange, that the exponents output by the same object are not accepted as input to another method.


---

Comment by @ChamanAgrawal created at 2019-03-04 20:45:28

New commits:


---

Comment by @ChamanAgrawal created at 2019-03-04 20:45:28

Changing status from new to needs_review.


---

Comment by @ChamanAgrawal created at 2019-03-04 21:05:58

This is my first time in sagemath so sorry if I have missed some important community standards.

For the issue I thought two possible solutions:

1) Change the return type of exponents() to list.

2) Change coefficient() to handle the return value of exponents()

Changing the return type of exponents() will affect all the dependent functions of exponents() so I have changed coefficient() to handle ETuple also ( return type of exponents() ).


---

Comment by git created at 2019-03-04 21:17:52

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2019-03-05 00:28:26


```
if degrees_list is None:
```

is vacuous because `list(foo)` should never return `None`. Also, it seems wasteful to convert it to a list. Why not just use the `ETuple` directly with

```python
exps[i] = int((<ETuple>degrees).get_exp(i))
```


Also, we want to move away from the old-style Cython declarations

```diff
-for i from 0<=i<gens:
+for i in range(gens):
```



---

Comment by git created at 2019-03-08 06:59:42

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2019-03-11 04:04:13

Last two little things:

1 - You should test `f.coefficient(x.exponents()[0])` to show that the output matches the above (i.e., it is an equivalent input).
2 - Your line `exps[i] = int((<ETuple>degrees).get_exp(i))` is over-indented.

Thanks.


---

Comment by git created at 2019-03-11 19:30:56

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2019-03-11 22:10:29

No, that is not what I wanted for the test. I was looking for this change

```diff
-            sage: x.coefficient(x.exponents()[0])
-            1
+            sage: f.coefficient(x.exponents()[0])
+            y^2 + y + 1
```



---

Comment by @ChamanAgrawal created at 2019-03-12 09:29:09

Replying to [comment:8 tscrim]:
> No, that is not what I wanted for the test. I was looking for this change
> {{{#!diff
> -            sage: x.coefficient(x.exponents()[0])
> -            1
> +            sage: f.coefficient(x.exponents()[0])
> +            y^2 + y + 1
> }}}

But that is not how `exponents()` works. In the Multivariate Polynomial Ring in x, y over Rational Field `R.<x,y> = QQ[]` x has exponent (1,0) so `x.exponents()` returns `[(1, 0)]` and so `f.coefficient(x.exponents()[0])` returns `1`.

I don't think changing the behavior of `exponents()` is the right course of action, So can you please explain further the desired behaviour of the `coefficient()` in this case.


---

Comment by tscrim created at 2019-03-13 01:43:32

Ah, right, it has the `y` value explicitly set. Okay, then let's change the second part of your test to make it more clear what is going on, with a bit more explanation:

```
            sage: f.coefficient(x)
            y^2 + y + 1

        Note that exponents have all variables specified::

            sage: x.coefficient(x.exponents()[0])
            1
            sage: f.coefficient([1,0])
            1
            sage: f.coefficient({x:1,y:0})
            1
```



---

Comment by git created at 2019-03-13 15:11:47

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2019-03-13 22:30:49

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2019-03-13 22:30:49

Thanks. LGTM.


---

Comment by vbraun created at 2019-03-15 08:09:28

Resolution: fixed
