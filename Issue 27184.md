# Issue 27184: .coefficient of multi-variate polynomial should accept output of .exponents()

archive/issues_027184.json:
```json
{
    "body": "CC:  @chamanagrawal\n\nKeywords: easy, beginner\n\n\n```\nsage: P.<x,y> = QQ[]\nsage: x.coefficient(x.exponents()[0])\n```\n\ngives\n\n```\nTypeError: The input degrees must be a dictionary of variables to exponents.\n```\n\nand one has to use \n\n```\nsage: x.coefficient(list(x.exponents()[0]))\n1\n```\n\nas a workaround. However, it seems strange, that the exponents output by the same object are not accepted as input to another method.\n\nIssue created by migration from https://trac.sagemath.org/ticket/27421\n\n",
    "created_at": "2019-03-04T15:41:26Z",
    "labels": [
        "algebra",
        "minor",
        "enhancement"
    ],
    "title": ".coefficient of multi-variate polynomial should accept output of .exponents()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27184",
    "user": "dkrenn"
}
```
CC:  @chamanagrawal

Keywords: easy, beginner


```
sage: P.<x,y> = QQ[]
sage: x.coefficient(x.exponents()[0])
```

gives

```
TypeError: The input degrees must be a dictionary of variables to exponents.
```

and one has to use 

```
sage: x.coefficient(list(x.exponents()[0]))
1
```

as a workaround. However, it seems strange, that the exponents output by the same object are not accepted as input to another method.

Issue created by migration from https://trac.sagemath.org/ticket/27421





---

archive/issue_comments_382985.json:
```json
{
    "body": "New commits:",
    "created_at": "2019-03-04T20:45:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27184#issuecomment-382985",
    "user": "@ChamanAgrawal"
}
```

New commits:



---

archive/issue_comments_382986.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-03-04T20:45:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27184#issuecomment-382986",
    "user": "@ChamanAgrawal"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_382987.json:
```json
{
    "body": "This is my first time in sagemath so sorry if I have missed some important community standards.\n\nFor the issue I thought two possible solutions:\n\n1) Change the return type of exponents() to list.\n\n2) Change coefficient() to handle the return value of exponents()\n\nChanging the return type of exponents() will affect all the dependent functions of exponents() so I have changed coefficient() to handle ETuple also ( return type of exponents() ).",
    "created_at": "2019-03-04T21:05:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27184#issuecomment-382987",
    "user": "@ChamanAgrawal"
}
```

This is my first time in sagemath so sorry if I have missed some important community standards.

For the issue I thought two possible solutions:

1) Change the return type of exponents() to list.

2) Change coefficient() to handle the return value of exponents()

Changing the return type of exponents() will affect all the dependent functions of exponents() so I have changed coefficient() to handle ETuple also ( return type of exponents() ).



---

archive/issue_comments_382988.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-03-04T21:17:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27184#issuecomment-382988",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_382989.json:
```json
{
    "body": "\n```\nif degrees_list is None:\n```\n\nis vacuous because `list(foo)` should never return `None`. Also, it seems wasteful to convert it to a list. Why not just use the `ETuple` directly with\n\n```python\nexps[i] = int((<ETuple>degrees).get_exp(i))\n```\n\n\nAlso, we want to move away from the old-style Cython declarations\n\n```diff\n-for i from 0<=i<gens:\n+for i in range(gens):\n```\n",
    "created_at": "2019-03-05T00:28:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27184#issuecomment-382989",
    "user": "tscrim"
}
```


```
if degrees_list is None:
```

is vacuous because `list(foo)` should never return `None`. Also, it seems wasteful to convert it to a list. Why not just use the `ETuple` directly with

```python
exps[i] = int((<ETuple>degrees).get_exp(i))
```


Also, we want to move away from the old-style Cython declarations

```diff
-for i from 0<=i<gens:
+for i in range(gens):
```




---

archive/issue_comments_382990.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-03-08T06:59:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27184#issuecomment-382990",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_382991.json:
```json
{
    "body": "Last two little things:\n\n1 - You should test `f.coefficient(x.exponents()[0])` to show that the output matches the above (i.e., it is an equivalent input).\n2 - Your line `exps[i] = int((<ETuple>degrees).get_exp(i))` is over-indented.\n\nThanks.",
    "created_at": "2019-03-11T04:04:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27184#issuecomment-382991",
    "user": "tscrim"
}
```

Last two little things:

1 - You should test `f.coefficient(x.exponents()[0])` to show that the output matches the above (i.e., it is an equivalent input).
2 - Your line `exps[i] = int((<ETuple>degrees).get_exp(i))` is over-indented.

Thanks.



---

archive/issue_comments_382992.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-03-11T19:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27184#issuecomment-382992",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_382993.json:
```json
{
    "body": "No, that is not what I wanted for the test. I was looking for this change\n\n```diff\n-            sage: x.coefficient(x.exponents()[0])\n-            1\n+            sage: f.coefficient(x.exponents()[0])\n+            y^2 + y + 1\n```\n",
    "created_at": "2019-03-11T22:10:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27184#issuecomment-382993",
    "user": "tscrim"
}
```

No, that is not what I wanted for the test. I was looking for this change

```diff
-            sage: x.coefficient(x.exponents()[0])
-            1
+            sage: f.coefficient(x.exponents()[0])
+            y^2 + y + 1
```




---

archive/issue_comments_382994.json:
```json
{
    "body": "Replying to [comment:8 tscrim]:\n> No, that is not what I wanted for the test. I was looking for this change\n> {{{#!diff\n> -            sage: x.coefficient(x.exponents()[0])\n> -            1\n> +            sage: f.coefficient(x.exponents()[0])\n> +            y^2 + y + 1\n> }}}\n\nBut that is not how `exponents()` works. In the Multivariate Polynomial Ring in x, y over Rational Field `R.<x,y> = QQ[]` x has exponent (1,0) so `x.exponents()` returns `[(1, 0)]` and so `f.coefficient(x.exponents()[0])` returns `1`.\n\nI don't think changing the behavior of `exponents()` is the right course of action, So can you please explain further the desired behaviour of the `coefficient()` in this case.",
    "created_at": "2019-03-12T09:29:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27184#issuecomment-382994",
    "user": "@ChamanAgrawal"
}
```

Replying to [comment:8 tscrim]:
> No, that is not what I wanted for the test. I was looking for this change
> {{{#!diff
> -            sage: x.coefficient(x.exponents()[0])
> -            1
> +            sage: f.coefficient(x.exponents()[0])
> +            y^2 + y + 1
> }}}

But that is not how `exponents()` works. In the Multivariate Polynomial Ring in x, y over Rational Field `R.<x,y> = QQ[]` x has exponent (1,0) so `x.exponents()` returns `[(1, 0)]` and so `f.coefficient(x.exponents()[0])` returns `1`.

I don't think changing the behavior of `exponents()` is the right course of action, So can you please explain further the desired behaviour of the `coefficient()` in this case.



---

archive/issue_comments_382995.json:
```json
{
    "body": "Ah, right, it has the `y` value explicitly set. Okay, then let's change the second part of your test to make it more clear what is going on, with a bit more explanation:\n\n```\n            sage: f.coefficient(x)\n            y^2 + y + 1\n\n        Note that exponents have all variables specified::\n\n            sage: x.coefficient(x.exponents()[0])\n            1\n            sage: f.coefficient([1,0])\n            1\n            sage: f.coefficient({x:1,y:0})\n            1\n```\n",
    "created_at": "2019-03-13T01:43:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27184#issuecomment-382995",
    "user": "tscrim"
}
```

Ah, right, it has the `y` value explicitly set. Okay, then let's change the second part of your test to make it more clear what is going on, with a bit more explanation:

```
            sage: f.coefficient(x)
            y^2 + y + 1

        Note that exponents have all variables specified::

            sage: x.coefficient(x.exponents()[0])
            1
            sage: f.coefficient([1,0])
            1
            sage: f.coefficient({x:1,y:0})
            1
```




---

archive/issue_comments_382996.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-03-13T15:11:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27184#issuecomment-382996",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_382997.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-03-13T22:30:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27184#issuecomment-382997",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_382998.json:
```json
{
    "body": "Thanks. LGTM.",
    "created_at": "2019-03-13T22:30:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27184#issuecomment-382998",
    "user": "tscrim"
}
```

Thanks. LGTM.



---

archive/issue_comments_382999.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-03-15T08:09:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27184#issuecomment-382999",
    "user": "vbraun"
}
```

Resolution: fixed
