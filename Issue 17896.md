# Issue 17896: Implement Orlik-Solomon algebra of an arrangement

archive/issues_017896.json:
```json
{
    "body": "CC:  @tscrim stefan yomcat @chaoxu\n\nKeywords: hyperplane arrangements\n\nThe Orlik-Solomon algebra is a fundamental invariant for an arrangement, which also enables computing scads of useful information about e.g. the complement.  But it's purely algebraic.  So we should have it (see also #17506).\n\nIssue created by migration from https://trac.sagemath.org/ticket/18133\n\n",
    "created_at": "2015-04-07T13:11:09Z",
    "labels": [
        "component: geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.1",
    "title": "Implement Orlik-Solomon algebra of an arrangement",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17896",
    "user": "https://github.com/kcrisman"
}
```
CC:  @tscrim stefan yomcat @chaoxu

Keywords: hyperplane arrangements

The Orlik-Solomon algebra is a fundamental invariant for an arrangement, which also enables computing scads of useful information about e.g. the complement.  But it's purely algebraic.  So we should have it (see also #17506).

Issue created by migration from https://trac.sagemath.org/ticket/18133





---

archive/issue_comments_239949.json:
```json
{
    "body": "how about algebras generated by reciprocals of linear forms of hyperplanes of the arrangement (cf e.g. http://arxiv.org/abs/math/0105095) ?",
    "created_at": "2015-04-10T20:43:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239949",
    "user": "https://github.com/dimpase"
}
```

how about algebras generated by reciprocals of linear forms of hyperplanes of the arrangement (cf e.g. http://arxiv.org/abs/math/0105095) ?



---

archive/issue_comments_239950.json:
```json
{
    "body": "Sure, anything you want!  I'm not actually implementing this ticket :-) Basically anything in Orlik/Terao is great, so much of it is computational - I was kind of hoping the matroid folks would see this too.  Actually, I thought some of this stuff was going to be in a 'next-gen' book by Alex, Dan and others but all I could find was a draft at Hal Schenck's website.  It would be great to get Sage \"officially\" in that book in the same way it's in the Toric Varieties book he coauthored.",
    "created_at": "2015-04-11T01:27:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239950",
    "user": "https://github.com/kcrisman"
}
```

Sure, anything you want!  I'm not actually implementing this ticket :-) Basically anything in Orlik/Terao is great, so much of it is computational - I was kind of hoping the matroid folks would see this too.  Actually, I thought some of this stuff was going to be in a 'next-gen' book by Alex, Dan and others but all I could find was a draft at Hal Schenck's website.  It would be great to get Sage "officially" in that book in the same way it's in the Toric Varieties book he coauthored.



---

archive/issue_events_051364.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-11-01T21:36:34Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "milestone": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17896#event-51364"
}
```



---

archive/issue_comments_239951.json:
```json
{
    "body": "Here is an implementation based upon code given to me by William Slofstra.\n----\nNew commits:",
    "created_at": "2015-11-01T21:36:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239951",
    "user": "https://github.com/tscrim"
}
```

Here is an implementation based upon code given to me by William Slofstra.
----
New commits:



---

archive/issue_comments_239952.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-11-01T21:36:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239952",
    "user": "https://github.com/tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_239953.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-01T21:40:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239953",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239954.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-14T18:01:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239954",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239955.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-20T01:44:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239955",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239956.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-20T02:18:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239956",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239957.json:
```json
{
    "body": "I didn't know that this algebra could be defined for any matroid! That's really nice.\n\nOn the other hand, I'm afraid the code doesn't properly iterate the reduction.\n\n```\n            sage: M4 = matroids.CompleteGraphic(4)\n            sage: OS = M4.orlik_solomon_algebra(QQ)\n            sage: OS._reduce_broken_circuit(frozenset({2,3,4}))\n            OS{1, 3, 4} + OS{1, 2, 3} - OS{1, 2, 4}\n```\n\nThe result is malformed: {1, 3, 4} itself contains a broken circuit, so one of the monomials isn't actually a monomial. Now you could argue that this is an underscored method and might do with malformed results if the method calling it knows what it's doing, but first of all I'm not sure whether the CombinatorialFreeModule framework will keep accepting such monomials in the future, and second I cannot guarantee that the multiplication as you implemented it still works with this implementation of `_reduce_broken_circuit`.\n\nThe point is, reducing an element modulo the ideal J(M) is a multistep process, as clearing out one broken circuit might create another. If you do it until no more broken circuits remain, then I think your product is correct (though I'll have to take another look).\n\nAnother issue is the `algebra_generators`: You're setting the `i`-th generator to be `self.monomial(frozenset([i]))`, but this too might be malformed. (For example, if `M` is a uniform matroid `U_{n,1} = matroids.Uniform(1,n)`, then all basis elements are equal, which means that they cannot be distinct basis elements.)\n\nI think both of these issues can be fixed at once. Let me do it.",
    "created_at": "2016-01-20T02:42:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239957",
    "user": "https://github.com/darijgr"
}
```

I didn't know that this algebra could be defined for any matroid! That's really nice.

On the other hand, I'm afraid the code doesn't properly iterate the reduction.

```
            sage: M4 = matroids.CompleteGraphic(4)
            sage: OS = M4.orlik_solomon_algebra(QQ)
            sage: OS._reduce_broken_circuit(frozenset({2,3,4}))
            OS{1, 3, 4} + OS{1, 2, 3} - OS{1, 2, 4}
```

The result is malformed: {1, 3, 4} itself contains a broken circuit, so one of the monomials isn't actually a monomial. Now you could argue that this is an underscored method and might do with malformed results if the method calling it knows what it's doing, but first of all I'm not sure whether the CombinatorialFreeModule framework will keep accepting such monomials in the future, and second I cannot guarantee that the multiplication as you implemented it still works with this implementation of `_reduce_broken_circuit`.

The point is, reducing an element modulo the ideal J(M) is a multistep process, as clearing out one broken circuit might create another. If you do it until no more broken circuits remain, then I think your product is correct (though I'll have to take another look).

Another issue is the `algebra_generators`: You're setting the `i`-th generator to be `self.monomial(frozenset([i]))`, but this too might be malformed. (For example, if `M` is a uniform matroid `U_{n,1} = matroids.Uniform(1,n)`, then all basis elements are equal, which means that they cannot be distinct basis elements.)

I think both of these issues can be fixed at once. Let me do it.



---

archive/issue_comments_239958.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-20T03:24:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239958",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239959.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-20T03:26:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239959",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239960.json:
```json
{
    "body": "OK, the above points are done.\n\nI am out of time now, so if anyone wants to take this over, feel free to do so. If not, I'll probably return to this in a week or so.\n\nMeanwhile, here is one more question: Your implementation of the Orlik-Solomon algebra for a hyperplane arrangement assumes that the base field of the algebra is that of the arrangement. Is that a reasonable assumption? (To me it sounds wrong -- like studying the homology of real manifolds only with real coefficients.)",
    "created_at": "2016-01-20T03:28:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239960",
    "user": "https://github.com/darijgr"
}
```

OK, the above points are done.

I am out of time now, so if anyone wants to take this over, feel free to do so. If not, I'll probably return to this in a week or so.

Meanwhile, here is one more question: Your implementation of the Orlik-Solomon algebra for a hyperplane arrangement assumes that the base field of the algebra is that of the arrangement. Is that a reasonable assumption? (To me it sounds wrong -- like studying the homology of real manifolds only with real coefficients.)



---

archive/issue_comments_239961.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-20T03:33:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239961",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239962.json:
```json
{
    "body": "Replying to [comment:10 darij]:\n> On the other hand, I'm afraid the code doesn't properly iterate the reduction.\n> {{{\n>             sage: M4 = matroids.CompleteGraphic(4)\n>             sage: OS = M4.orlik_solomon_algebra(QQ)\n>             sage: OS._reduce_broken_circuit(frozenset({2,3,4}))\n>             OS{1, 3, 4} + OS{1, 2, 3} - OS{1, 2, 4}\n> }}}\n> The result is malformed: {1, 3, 4} itself contains a broken circuit, so one of the monomials isn't actually a monomial. Now you could argue that this is an underscored method and might do with malformed results if the method calling it knows what it's doing,\n\nThat was going to be my argument.\n\n> but first of all I'm not sure whether the CombinatorialFreeModule framework will keep accepting such monomials in the future,\n\nIt should because those checks are expensive and there has to be a way to tell this proposed CFM that you know what you're doing (especially in internal methods like `_from_dict`).\n\n> and second I cannot guarantee that the multiplication as you implemented it still works with this implementation of `_reduce_broken_circuit`.\n> \n> The point is, reducing an element modulo the ideal J(M) is a multistep process, as clearing out one broken circuit might create another. If you do it until no more broken circuits remain, then I think your product is correct (though I'll have to take another look).\n\nThat is how the product was designed and why it worked. Although now you've basically pushed that into the recursive step. This also has an effect of making it recursive. Have you done some timing benchmarks between the two implementations?\n\nAlso this is bad:\n\n```\nif not type(S) == frozenset:\n```\n\nYou should use the pythonic (and more robust if we replace it by some subclass of `frozenset`):\n\n```\nif not isinstance(S, frozenset):\n```\n\nI can change this though.\n\n> Another issue is the `algebra_generators`: You're setting the `i`-th generator to be `self.monomial(frozenset([i]))`, but this too might be malformed. (For example, if `M` is a uniform matroid `U_{n,1} = matroids.Uniform(1,n)`, then all basis elements are equal, which means that they cannot be distinct basis elements.)\n\nThis is a good point. Good catch.",
    "created_at": "2016-01-20T16:30:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239962",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:10 darij]:
> On the other hand, I'm afraid the code doesn't properly iterate the reduction.
> {{{
>             sage: M4 = matroids.CompleteGraphic(4)
>             sage: OS = M4.orlik_solomon_algebra(QQ)
>             sage: OS._reduce_broken_circuit(frozenset({2,3,4}))
>             OS{1, 3, 4} + OS{1, 2, 3} - OS{1, 2, 4}
> }}}
> The result is malformed: {1, 3, 4} itself contains a broken circuit, so one of the monomials isn't actually a monomial. Now you could argue that this is an underscored method and might do with malformed results if the method calling it knows what it's doing,

That was going to be my argument.

> but first of all I'm not sure whether the CombinatorialFreeModule framework will keep accepting such monomials in the future,

It should because those checks are expensive and there has to be a way to tell this proposed CFM that you know what you're doing (especially in internal methods like `_from_dict`).

> and second I cannot guarantee that the multiplication as you implemented it still works with this implementation of `_reduce_broken_circuit`.
> 
> The point is, reducing an element modulo the ideal J(M) is a multistep process, as clearing out one broken circuit might create another. If you do it until no more broken circuits remain, then I think your product is correct (though I'll have to take another look).

That is how the product was designed and why it worked. Although now you've basically pushed that into the recursive step. This also has an effect of making it recursive. Have you done some timing benchmarks between the two implementations?

Also this is bad:

```
if not type(S) == frozenset:
```

You should use the pythonic (and more robust if we replace it by some subclass of `frozenset`):

```
if not isinstance(S, frozenset):
```

I can change this though.

> Another issue is the `algebra_generators`: You're setting the `i`-th generator to be `self.monomial(frozenset([i]))`, but this too might be malformed. (For example, if `M` is a uniform matroid `U_{n,1} = matroids.Uniform(1,n)`, then all basis elements are equal, which means that they cannot be distinct basis elements.)

This is a good point. Good catch.



---

archive/issue_comments_239963.json:
```json
{
    "body": "Replying to [comment:13 darij]:\n> OK, the above points are done.\n> \n> I am out of time now, so if anyone wants to take this over, feel free to do so. If not, I'll probably return to this in a week or so.\n\nThank you for taking a look at it and pushing some changes.\n\n> Meanwhile, here is one more question: Your implementation of the Orlik-Solomon algebra for a hyperplane arrangement assumes that the base field of the algebra is that of the arrangement. Is that a reasonable assumption? (To me it sounds wrong -- like studying the homology of real manifolds only with real coefficients.)\n\nI can easily change this so the default is the base ring of the arrangement, but it can take another base ring as input. Although I think it carries less meaning in terms of studying the arrangement, but I'm not that much of an expert to know for certain.",
    "created_at": "2016-01-20T16:32:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239963",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:13 darij]:
> OK, the above points are done.
> 
> I am out of time now, so if anyone wants to take this over, feel free to do so. If not, I'll probably return to this in a week or so.

Thank you for taking a look at it and pushing some changes.

> Meanwhile, here is one more question: Your implementation of the Orlik-Solomon algebra for a hyperplane arrangement assumes that the base field of the algebra is that of the arrangement. Is that a reasonable assumption? (To me it sounds wrong -- like studying the homology of real manifolds only with real coefficients.)

I can easily change this so the default is the base ring of the arrangement, but it can take another base ring as input. Although I think it carries less meaning in terms of studying the arrangement, but I'm not that much of an expert to know for certain.



---

archive/issue_comments_239964.json:
```json
{
    "body": "> I can easily change this so the default is the base ring of the arrangement, but it can take another base ring as input. Although I think it carries less meaning in terms of studying the arrangement, but I'm not that much of an expert to know for certain.\n\nI don't have a copy of !Orlik/Terao around to check but usually everything was complex anyway.  But I did find [this](http://pages.uoregon.edu/njp/os.pdf) wherein the coefficients are in the field of two elements, though the definitions are not *quite* the same as just taking the OS algebra over two elements as its base field.  Wikipedia says you can take any subring of the base field but I don't know I'd trust that without reading the final version of [this](http://www.math.uiuc.edu/~schenck/cxarr.pdf) a bit more.  If one of you knows one of these guys one could ask; I haven't talked to any of them in quite a while.",
    "created_at": "2016-01-20T18:59:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239964",
    "user": "https://github.com/kcrisman"
}
```

> I can easily change this so the default is the base ring of the arrangement, but it can take another base ring as input. Although I think it carries less meaning in terms of studying the arrangement, but I'm not that much of an expert to know for certain.

I don't have a copy of !Orlik/Terao around to check but usually everything was complex anyway.  But I did find [this](http://pages.uoregon.edu/njp/os.pdf) wherein the coefficients are in the field of two elements, though the definitions are not *quite* the same as just taking the OS algebra over two elements as its base field.  Wikipedia says you can take any subring of the base field but I don't know I'd trust that without reading the final version of [this](http://www.math.uiuc.edu/~schenck/cxarr.pdf) a bit more.  If one of you knows one of these guys one could ask; I haven't talked to any of them in quite a while.



---

archive/issue_comments_239965.json:
```json
{
    "body": "The Proudfoot reference you linked makes it clear to me that the base ring of the algerba should not have anything to do with the base ring of the arrangement.",
    "created_at": "2016-01-20T19:03:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239965",
    "user": "https://github.com/darijgr"
}
```

The Proudfoot reference you linked makes it clear to me that the base ring of the algerba should not have anything to do with the base ring of the arrangement.



---

archive/issue_comments_239966.json:
```json
{
    "body": "Technical question... can we rely on frozensets being indices of a combinatorial free module? They don't compare well:\n\n\n```\nsage: frozenset([2]) < frozenset([3])\nFalse\nsage: frozenset([3]) < frozenset([2])\nFalse\nsage: frozenset([3]) == frozenset([2])\nFalse\nsage: frozenset([2]) > frozenset([3])\nFalse\n```\n",
    "created_at": "2016-01-21T03:53:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239966",
    "user": "https://github.com/darijgr"
}
```

Technical question... can we rely on frozensets being indices of a combinatorial free module? They don't compare well:


```
sage: frozenset([2]) < frozenset([3])
False
sage: frozenset([3]) < frozenset([2])
False
sage: frozenset([3]) == frozenset([2])
False
sage: frozenset([2]) > frozenset([3])
False
```




---

archive/issue_comments_239967.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-21T03:56:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239967",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239968.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-21T04:20:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239968",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239969.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-21T04:25:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239969",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239970.json:
```json
{
    "body": "In other news, I've math-reviewed the ticket. What remains to be done:\n\n- Better doctests, e.g., one that would have caught my bug in `subset_image`. We don't have any nonstandard orderings, and we don't have any interesting matroids. I'd like an example with a matroid given by a graph with 3 vertices and 2 edges between each two distinct vertices.\n\n- The frozenset issue mentioned above. Maybe switch to sorted lists?",
    "created_at": "2016-01-21T04:26:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239970",
    "user": "https://github.com/darijgr"
}
```

In other news, I've math-reviewed the ticket. What remains to be done:

- Better doctests, e.g., one that would have caught my bug in `subset_image`. We don't have any nonstandard orderings, and we don't have any interesting matroids. I'd like an example with a matroid given by a graph with 3 vertices and 2 edges between each two distinct vertices.

- The frozenset issue mentioned above. Maybe switch to sorted lists?



---

archive/issue_comments_239971.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-21T21:03:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239971",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239972.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-01-21T21:04:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239972",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_239973.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-21T21:07:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239973",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239974.json:
```json
{
    "body": "Whoops, sorry; bad merge. You can safely ignore comment:24.\n\nI fixed any issues with comparisons using `frozenset` by implementing a term comparison function. I also added a few more doctests. Thanks for changing the behavior for creating the Orlik-Solomon. I'm happy with the current version. If you are too (and there are no other objectios), then we can set a positive review.",
    "created_at": "2016-01-21T21:08:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239974",
    "user": "https://github.com/tscrim"
}
```

Whoops, sorry; bad merge. You can safely ignore comment:24.

I fixed any issues with comparisons using `frozenset` by implementing a term comparison function. I also added a few more doctests. Thanks for changing the behavior for creating the Orlik-Solomon. I'm happy with the current version. If you are too (and there are no other objectios), then we can set a positive review.



---

archive/issue_events_051365.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-01-21T21:08:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "milestone": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17896#event-51365"
}
```



---

archive/issue_events_051366.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-01-21T21:08:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "milestone": "sage-7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17896#event-51366"
}
```



---

archive/issue_comments_239975.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-22T02:41:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239975",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239976.json:
```json
{
    "body": "Thanks! This fixes it.\n\nThe code looks good to me now. Feel free to set it to positive_review, or wait for others to comment, if you feel so inclined.",
    "created_at": "2016-01-22T02:42:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239976",
    "user": "https://github.com/darijgr"
}
```

Thanks! This fixes it.

The code looks good to me now. Feel free to set it to positive_review, or wait for others to comment, if you feel so inclined.



---

archive/issue_comments_239977.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-22T02:47:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239977",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239978.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-22T02:50:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239978",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239979.json:
```json
{
    "body": "Back to you; if you're happy with my changes, then you can set a positive review. Thanks.",
    "created_at": "2016-01-22T02:51:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239979",
    "user": "https://github.com/tscrim"
}
```

Back to you; if you're happy with my changes, then you can set a positive review. Thanks.



---

archive/issue_comments_239980.json:
```json
{
    "body": "Perfect!",
    "created_at": "2016-01-22T02:51:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239980",
    "user": "https://github.com/darijgr"
}
```

Perfect!



---

archive/issue_comments_239981.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-01-22T02:51:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239981",
    "user": "https://github.com/darijgr"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_239982.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2016-01-23T17:01:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239982",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_239983.json:
```json
{
    "body": "\n```\nsage -t --long src/sage/matroids/matroid.pyx\n**********************************************************************\nFile \"src/sage/matroids/matroid.pyx\", line 2912, in sage.matroids.matroid.Matroid.orlik_solomon_algebra\nFailed example:\n    OS = M.orlik_solomon_algebra(QQ)\nExpected:\n    Orlik-Solomon algebra of U(3, 4): Matroid of rank 3 on 4 elements\n     with circuit-closures\n     {3: {{0, 1, 2, 3}}}\nGot:\n    <BLANKLINE>\n**********************************************************************\n1 item had failures:\n   1 of   3 in sage.matroids.matroid.Matroid.orlik_solomon_algebra\n    [775 tests, 1 failure, 2.64 s]\n```\n",
    "created_at": "2016-01-23T17:01:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239983",
    "user": "https://github.com/vbraun"
}
```


```
sage -t --long src/sage/matroids/matroid.pyx
**********************************************************************
File "src/sage/matroids/matroid.pyx", line 2912, in sage.matroids.matroid.Matroid.orlik_solomon_algebra
Failed example:
    OS = M.orlik_solomon_algebra(QQ)
Expected:
    Orlik-Solomon algebra of U(3, 4): Matroid of rank 3 on 4 elements
     with circuit-closures
     {3: {{0, 1, 2, 3}}}
Got:
    <BLANKLINE>
**********************************************************************
1 item had failures:
   1 of   3 in sage.matroids.matroid.Matroid.orlik_solomon_algebra
    [775 tests, 1 failure, 2.64 s]
```




---

archive/issue_comments_239984.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-23T17:33:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239984",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239985.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2016-01-23T17:34:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239985",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_239986.json:
```json
{
    "body": "Stupid me; trivial doctest fix.",
    "created_at": "2016-01-23T17:34:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239986",
    "user": "https://github.com/tscrim"
}
```

Stupid me; trivial doctest fix.



---

archive/issue_comments_239987.json:
```json
{
    "body": "Oops, that was me being stupid too. The only file I've run the tests on was orlik-solomon.py...",
    "created_at": "2016-01-23T17:36:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239987",
    "user": "https://github.com/darijgr"
}
```

Oops, that was me being stupid too. The only file I've run the tests on was orlik-solomon.py...



---

archive/issue_events_051367.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-01-24T12:52:52Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17896#event-51367"
}
```



---

archive/issue_comments_239988.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-01-24T12:52:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17896#issuecomment-239988",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
