# Issue 17457: zero vs zero_element / one vs one_element

Issue created by migration from Trac.

Original creator: vdelecroix

Original creation time: 2015-01-30 09:34:52

CC:  ncohen slelievre

We deprecate the usage of zero_element/one_element in favor of zero/one.


---

Comment by vdelecroix created at 2015-01-30 13:59:46

Changing status from new to needs_review.


---

Comment by vdelecroix created at 2015-01-30 13:59:46

New commits:


---

Comment by ncohen created at 2015-02-02 10:26:24

Hello,

There are some `zero_element` that you rename to `zero` without adding a deprecated copy. I wondered if perhaps the deprecated copy was inherited, but found something weird:


```
sage: L = LazyPowerSeriesRing(QQ)
sage: L.zero # zero_element appears when you press tab
L.zero          L.zero_element  L.zero_ideal    
sage: L.zero_element()
...
AttributeError: 'LazyPowerSeriesRing' object has no attribute 'zero_element'
```


So it seems that this function, for instance, has no deprecated `zero_element`. And also that the function still appears in the tab expansion, which I cannot explain.

Nathann


---

Comment by jdemeyer created at 2015-02-03 15:13:48

Replying to [ticket:17694 vdelecroix]:
> To avoid duplication we also upgrade slightly the category of polyhedra.
Please explain...


---

Comment by vdelecroix created at 2015-02-04 09:14:31

Replying to [comment:4 ncohen]:

Right. I guess that the problem is that `Rings` is *not* a sub category of additive monoid and multiplicative monoid! I really do not want to fix it within categories as there is an interplay with Nicolas axioms.

I will add a commit that takes care of `LazyPowerSeries` and have a look at other rings which do not inherit from `sage.rings.ring.Ring`.

Replying to [comment:5 jdemeyer]:
> Replying to [ticket:17694 vdelecroix]:
> > To avoid duplication we also upgrade slightly the category of polyhedra.
> Please explain...

The polyhedra do have a sum (Minkowski sum) and a product (cartesian product). The method `zero_element` was implemented but the category was AdditiveMagmas. So I switched to AdditiveMonoids (i.e. Magma + unit) and only rename the method `zero_element()` to `zero()`. And the ParentMethods of the category takes care of the deprecation.


---

Comment by jdemeyer created at 2015-02-04 09:28:59

The polyhedra change worries me (as potential reviewer) because I don't fully understand how categories work.


---

Comment by vdelecroix created at 2015-02-04 09:36:44

Replying to [comment:7 jdemeyer]:
> The polyhedra change worries me (as potential reviewer) because I don't fully understand how categories work.

For the purpose of this ticket, you only need to know that `ParentMethods` and `ElementMethods` in the categories are respectively inherited to the concrete `Parent` and `Element` (via a dirty mechanism of dynamic classes created on the fly).

An other option is to revert the changes and add a `deprecated_function_alias` inside the polyhedron class.

Vincent


---

Comment by git created at 2015-02-04 09:39:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-02-04 09:42:08

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by vdelecroix created at 2015-02-04 09:42:35

Sorry... wrong commit. I messed up with #17692. Fixed now.


---

Comment by jdemeyer created at 2015-02-04 10:54:56

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2015-02-04 10:54:56


```
deprecation(17694, ".one() is deprecated. Please use .one() instead.")
```



---

Comment by git created at 2015-02-04 12:56:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2015-02-04 12:56:52

Changing status from needs_work to needs_review.


---

Comment by mmezzarobba created at 2015-02-06 17:31:50

Lgtm, but I'd prefer waiting for a second opinion as Nathann and Jeroen appeared to have concerns.


---

Comment by jdemeyer created at 2015-02-07 09:10:54

I don't have further concerns.


---

Comment by ncohen created at 2015-02-07 10:43:00

Hello,

> Lgtm, but I'd prefer waiting for a second opinion as Nathann and Jeroen appeared to have concerns.

Well, all I wanted to do with this branch is make sure that all functions that have been removed are now deprecated. If this is done I have no objection at all.

Nathann


---

Comment by mmezzarobba created at 2015-02-07 11:21:19

Changing status from needs_review to positive_review.


---

Comment by mmezzarobba created at 2015-02-07 12:31:39

Changing status from positive_review to needs_work.


---

Comment by mmezzarobba created at 2015-02-07 12:31:39

Turns out I didn't notice a merge conflict with `f1a086ae` (which also reformats the example in a way that will hopefully make such conflicts less frequent).


---

Comment by vdelecroix created at 2015-02-07 12:36:51

Replying to [comment:19 mmezzarobba]:
> Turns out I didn't notice a merge conflict with `f1a086ae` (which also reformats the example in a way that will hopefully make such conflicts less frequent).

Which ticket?


---

Comment by mmezzarobba created at 2015-02-07 12:42:05

Replying to [comment:20 vdelecroix]:
> Replying to [comment:19 mmezzarobba]:
> > Turns out I didn't notice a merge conflict with `f1a086ae` (which also reformats the example in a way that will hopefully make such conflicts less frequent).
> 
> Which ticket?

#12600


---

Comment by git created at 2015-02-07 13:13:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2015-02-07 13:16:54

Changing status from needs_work to needs_review.


---

Comment by mmezzarobba created at 2015-02-07 13:35:15

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-02-18 01:27:09

Resolution: fixed
