# Issue 25044: py3: deprecate our custom has_key methods

Issue created by migration from https://trac.sagemath.org/ticket/25281

Original creator: chapoton

Original creation time: 2018-05-02 08:26:39

CC:  jdemeyer tscrim fbissey embray




---

Comment by chapoton created at 2018-05-02 08:35:18

New commits:


---

Comment by chapoton created at 2018-05-02 08:35:18

Changing status from new to needs_review.


---

Comment by chapoton created at 2018-05-02 08:37:42

not yet good for review


---

Comment by chapoton created at 2018-05-02 08:37:42

Changing status from needs_review to needs_work.


---

Comment by git created at 2018-05-02 08:41:13

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by chapoton created at 2018-05-02 08:42:51

The remaining case of Family is more complicated, because "in" currently checks for containment in the values, not in the keys.


---

Comment by chapoton created at 2018-05-02 08:42:51

Changing status from needs_work to needs_review.


---

Comment by embray created at 2018-05-02 17:59:39

Changing status from needs_review to needs_info.


---

Comment by embray created at 2018-05-02 18:00:07

Oops, I meant to write all that in a comment

Is `Family` even supposed to be a `dict` subclass?  If not, then I would leave it.  There's nothing wrong with some class having a method called `has_key`, but if it's a `dict` subclass then it is confusing to still have it.

I would update the deprecation message slightly--"use in instead" is very confusing if you don't know what the `in` keyword is--the message almost looks like a typo.  Instead it should say something like `use `key in dictionary` syntax instead`


---

Comment by git created at 2018-05-02 18:45:58

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2018-05-02 18:47:18

Thanks. I changed the deprecation message according to your suggestion. I agree to let Family as it is.


---

Comment by chapoton created at 2018-05-02 18:47:18

Changing status from needs_info to needs_review.


---

Comment by tscrim created at 2018-05-02 21:13:01

Replying to [comment:6 embray]:
> Is `Family` even supposed to be a `dict` subclass?  If not, then I would leave it.  There's nothing wrong with some class having a method called `has_key`, but if it's a `dict` subclass then it is confusing to still have it.

No, it is not a subclass of `dict`, only of `Parent` and behaves somewhat like an immutable `dict`.


---

Comment by chapoton created at 2018-05-04 11:29:56

green bot, please review


---

Comment by tscrim created at 2018-05-05 08:45:23

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2018-05-05 08:45:23

LGTM.


---

Comment by vbraun created at 2018-05-15 22:33:41

Resolution: fixed
