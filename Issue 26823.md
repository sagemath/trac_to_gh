# Issue 26823: Fix various invalid uses of sig_on()

Issue created by migration from https://trac.sagemath.org/ticket/27060

Original creator: jdemeyer

Original creation time: 2019-01-15 12:23:52

In order to debug crashes with cypari2 (#26442), I added some checks to cypari2. But these checks are now failing because `sig_on()` is regularly used badly inside Sage.

In particular, this branch removes code inside `sig_on()` which can potentially cause Python garbage collection.


---

Comment by git created at 2019-01-15 13:28:19

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2019-01-15 15:15:28

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2019-01-15 15:15:48

Changing status from new to needs_review.


---

Comment by embray created at 2019-01-15 18:15:21

Retarging tickets optimistically to the next milestone.  If you are responsible for this ticket (either its reporter or owner) and don't believe you are likely to complete this ticket before the next release (8.7) please retarget this ticket's milestone to sage-pending or sage-wishlist.


---

Comment by @timokau created at 2019-01-17 19:51:16

On the macro-scale this LGTM. On the details, the person I'd choose to review this is you. But since you already made the commit...


---

Comment by @timokau created at 2019-01-17 19:51:16

Changing status from needs_review to positive_review.


---

Comment by embray created at 2019-01-18 12:30:32

Could you say a little bit more about why these `sig_on()` are not correct?  Is it because they're releasing the GIL inappropriately?


---

Comment by jdemeyer created at 2019-01-18 13:05:11

Replying to [comment:8 embray]:
> Could you say a little bit more about why these `sig_on()` are not correct?  Is it because they're releasing the GIL inappropriately?

I updated the ticket description, I hope it is clearer now. It has nothing to do with the GIL.


---

Comment by embray created at 2019-01-18 13:55:57

I see what you're saying now--thank you.


---

Comment by vbraun created at 2019-01-26 15:55:36

Resolution: fixed
