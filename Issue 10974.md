# Issue 10974: Add features to FiniteDimensionalModulesWithBasis

Issue created by migration from https://trac.sagemath.org/ticket/11111

Original creator: nthiery

Original creation time: 2011-04-01 12:40:31

Assignee: nthiery

CC:  sage-combinat

The patch under development on the Sage-Combinat queue will add generic features around morphisms, subspaces, quotients, ... for finite dimensional modules with basis.


---

Comment by jdemeyer created at 2011-09-19 10:21:07

Where is the patch?


---

Comment by nthiery created at 2014-07-01 20:46:29

Last 10 new commits:


---

Comment by virmaux created at 2014-07-02 19:39:10

After compiling it, I cannot launch sage. The error is the following:


```
[...]
---> 16 from sage.categories.non_unital_algebras import NonUnitalAlgebras
        global sage.categories.non_unital_algebras = undefined
        global NonUnitalAlgebras = undefined

ImportError: No module named non_unital_algebras
```



---

Comment by git created at 2014-07-02 23:30:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-07-03 00:52:19

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by virmaux created at 2014-07-08 02:48:31

I don't know if it is the proper place to report this bug but let's try as it is relatde to morphisms of finite dimensional modules (and coercion system). The following has been obtained on the t/11111 branch.


```
sage: A5 = SymmetricGroupAlgebra(QQ, 5)
sage: Z5 = A5.center()
sage: phi = Z5.module_morphism(on_basis=lambda i: Z5.an_element()*Z5.basis()[i], codomain=Z5)
sage: a = list(Z5.basis())[3]
sage: a in phi.domain()
True
sage: phi(a)
```


and I get
[...]

```
    445             TODO: make a better unit test once Modules().example() is implemented
    446             """
--> 447             from sage.structure.element import get_coercion_model
    448             import operator
    449             return get_coercion_model().bin_op(left, right, operator.mul)

RuntimeError: maximum recursion depth exceeded while calling a Python object
sage: 
```



---

Comment by virmaux created at 2014-07-08 02:52:45

In fact this bug is related to the fact that the center of on algebra is a CombinatorialFreeModule and nothing more... Sorry for the noise.


---

Comment by git created at 2014-07-11 15:01:26

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by git created at 2014-07-15 22:46:46

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-07-16 00:55:04

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by virmaux created at 2014-07-16 01:38:18

I added some code to depreciate to old method center for group algebras, and replace it by center_basis which gives a center in the good category using the generic method of finite_dimensional_algebra_on_basis.

```
sage: Z = SymmetricGroup(4).algebra(QQ).center()
sage: Z.category()
Join of Category of finite dimensional algebras with basis over Rational Field and Category of commutative algebras over Rational Field and Category of subquotients of monoids and Category of subobjects of sets
```



---

Comment by git created at 2014-07-25 00:37:57

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-07-25 02:31:16

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-08-15 11:02:11

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by aschilling created at 2014-08-15 13:47:41

There are currently failing tests:

```
sage -t algebras.py
**********************************************************************
File "algebras.py", line 236, in sage.categories.algebras.Algebras.Subobjects.ElementMethods._mul_
Failed example:
    Z = SymmetricGroup(5).algebra(QQ).center()
Exception raised:
    Traceback (most recent call last):
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 843, in compile_and_execute
        exec compiled in globs
      File "<doctest sage.categories.algebras.Algebras.Subobjects.ElementMethods._mul_[0]>", line 1, in <module>
        Z = SymmetricGroup(Integer(5)).algebra(QQ).center()
      File "cachefunc.pyx", line 2143, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12263)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/categories/finite_dimensional_algebras_with_basis.py", line 340, in center
        center = self.submodule(self.center_basis(),
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/categories/groups.py", line 682, in center_basis
        self.basis().keys().conjugacy_classes()]
      File "parent.pyx", line 864, in sage.structure.parent.Parent.__getattr__ (build/cythonized/sage/structure/parent.c:7377)
      File "misc.pyx", line 251, in sage.structure.misc.getattr_from_other_class (build/cythonized/sage/structure/misc.c:1687)
    AttributeError: 'StandardPermutations_n_with_category' object has no attribute 'conjugacy_classes'
**********************************************************************
File "algebras.py", line 237, in sage.categories.algebras.Algebras.Subobjects.ElementMethods._mul_
Failed example:
    B = Z.basis()
Exception raised:
    Traceback (most recent call last):
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 843, in compile_and_execute
        exec compiled in globs
      File "<doctest sage.categories.algebras.Algebras.Subobjects.ElementMethods._mul_[1]>", line 1, in <module>
        B = Z.basis()
    NameError: name 'Z' is not defined
**********************************************************************
File "algebras.py", line 238, in sage.categories.algebras.Algebras.Subobjects.ElementMethods._mul_
Failed example:
    B[3] * B[2]
Exception raised:
    Traceback (most recent call last):
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 843, in compile_and_execute
        exec compiled in globs
      File "<doctest sage.categories.algebras.Algebras.Subobjects.ElementMethods._mul_[2]>", line 1, in <module>
        B[Integer(3)] * B[Integer(2)]
    NameError: name 'B' is not defined
**********************************************************************
1 item had failures:
   3 of   4 in sage.categories.algebras.Algebras.Subobjects.ElementMethods._mul_
    [25 tests, 3 failures, 0.66 s]
sage -t category_with_axiom.py
**********************************************************************
File "category_with_axiom.py", line 1642, in sage.categories.category_with_axiom
Failed example:
    FiniteGroups().Algebras(QQ)
Expected:
    Join of Category of finite dimensional hopf algebras with basis over Rational Field
        and Category of group algebras over Rational Field
        and Category of finite set algebras over Rational Field
Got:
    Category of finite group algebras over Rational Field
**********************************************************************
1 item had failures:
   1 of 166 in sage.categories.category_with_axiom
    [322 tests, 1 failure, 0.49 s]
sage -t fields.py
**********************************************************************
File "fields.py", line 128, in sage.categories.fields.Fields._contains_helper
Failed example:
    Q.category()
Expected:
    Join of Category of commutative algebras over Rational Field and Category of subquotients of monoids and Category of quotients of semigroups
Got:
    Category of commutative quotients of algebras over Rational Field
**********************************************************************
1 item had failures:
   1 of   8 in sage.categories.fields.Fields._contains_helper
    [75 tests, 1 failure, 1.66 s]
sage -t groups.py
**********************************************************************
File "groups.py", line 673, in sage.categories.groups.Groups.Algebras.ParentMethods.center_basis
Failed example:
    SymmetricGroup(3).algebra(QQ).center_basis()
Exception raised:
    Traceback (most recent call last):
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 843, in compile_and_execute
        exec compiled in globs
      File "<doctest sage.categories.groups.Groups.Algebras.ParentMethods.center_basis[0]>", line 1, in <module>
        SymmetricGroup(Integer(3)).algebra(QQ).center_basis()
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/categories/groups.py", line 682, in center_basis
        self.basis().keys().conjugacy_classes()]
      File "parent.pyx", line 864, in sage.structure.parent.Parent.__getattr__ (build/cythonized/sage/structure/parent.c:7377)
      File "misc.pyx", line 251, in sage.structure.misc.getattr_from_other_class (build/cythonized/sage/structure/misc.c:1687)
    AttributeError: 'StandardPermutations_n_with_category' object has no attribute 'conjugacy_classes'
**********************************************************************
File "groups.py", line 809, in sage.categories.groups.Groups.Algebras.ElementMethods.central_form
Failed example:
    A.central_form()
Expected:
    B[(1,2,3)]
Got:
    B[[2, 3, 1]]
**********************************************************************
File "groups.py", line 813, in sage.categories.groups.Groups.Algebras.ElementMethods.central_form
Failed example:
    B.central_form()
Expected:
    4*B[()] + 3*B[(1,2)] + 2*B[(1,2)(3,4)] + 2*B[(1,2,3)] + B[(1,2,3,4)]
Got:
    4*B[[1, 2, 3, 4]] + 3*B[[2, 1, 3, 4]] + 2*B[[2, 1, 4, 3]] + 2*B[[2, 3, 1, 4]] + B[[2, 3, 4, 1]]
**********************************************************************
2 items had failures:
   2 of   9 in sage.categories.groups.Groups.Algebras.ElementMethods.central_form
   1 of   2 in sage.categories.groups.Groups.Algebras.ParentMethods.center_basis
    [124 tests, 3 failures, 2.94 s]
sage -t modules_with_basis.py
**********************************************************************
File "modules_with_basis.py", line 509, in sage.categories.modules_with_basis.ModulesWithBasis.ParentMethods.submodule
Failed example:
    basis
Expected:
    [B[()], B[(2,3)] + B[(1,2)] + B[(1,3)], B[(1,2,3)] + B[(1,3,2)]]
Got:
    [[1, 2, 3], [1, 3, 2] + [2, 1, 3] + [3, 2, 1], [2, 3, 1] + [3, 1, 2]]
**********************************************************************
File "modules_with_basis.py", line 520, in sage.categories.modules_with_basis.ModulesWithBasis.ParentMethods.submodule
Failed example:
    c[1].lift()
Expected:
    B[(2,3)] + B[(1,2)] + B[(1,3)]
Got:
    [1, 3, 2] + [2, 1, 3] + [3, 2, 1]
**********************************************************************
File "modules_with_basis.py", line 530, in sage.categories.modules_with_basis.ModulesWithBasis.ParentMethods.submodule
Failed example:
    center = S3A.center()
Exception raised:
    Traceback (most recent call last):
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 843, in compile_and_execute
        exec compiled in globs
      File "<doctest sage.categories.modules_with_basis.ModulesWithBasis.ParentMethods.submodule[22]>", line 1, in <module>
        center = S3A.center()
      File "cachefunc.pyx", line 2143, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12263)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/categories/finite_dimensional_algebras_with_basis.py", line 340, in center
        center = self.submodule(self.center_basis(),
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/categories/groups.py", line 682, in center_basis
        self.basis().keys().conjugacy_classes()]
      File "parent.pyx", line 864, in sage.structure.parent.Parent.__getattr__ (build/cythonized/sage/structure/parent.c:7377)
      File "misc.pyx", line 251, in sage.structure.misc.getattr_from_other_class (build/cythonized/sage/structure/misc.c:1687)
    AttributeError: 'StandardPermutations_n_with_category' object has no attribute 'conjugacy_classes'
**********************************************************************
1 item had failures:
   3 of  26 in sage.categories.modules_with_basis.ModulesWithBasis.ParentMethods.submodule
    [550 tests, 3 failures, 1.92 s]
sage -t sets_cat.py
**********************************************************************
File "sets_cat.py", line 1402, in sage.categories.sets_cat.Sets.ParentMethods.algebra
Failed example:
    SymmetricGroup(5).algebra(QQ) in SemisimpleAlgebras(QQ)
Expected:
    True
Got:
    False
**********************************************************************
1 item had failures:
   1 of  27 in sage.categories.sets_cat.Sets.ParentMethods.algebra
    [340 tests, 1 failure, 2.63 s]
----------------------------------------------------------------------
sage -t algebras.py  # 3 doctests failed
sage -t category_with_axiom.py  # 1 doctest failed
sage -t fields.py  # 1 doctest failed
sage -t groups.py  # 3 doctests failed
sage -t modules_with_basis.py  # 3 doctests failed
sage -t objects.py  # Source line number found
sage -t sets_cat.py  # 1 doctest failed
----------------------------------------------------------------------
Total time for all tests: 139.2 seconds
    cpu time: 86.4 seconds
    cumulative wall time: 126.4 seconds
```



---

Comment by virmaux created at 2014-08-30 23:25:48

These problems could be fixed by deleting the algebra method in sage.groups.perm_gps.permgroup_named.py. It might be something recent because it was working at the time I wrote the failing doctest.
The problem is that this method calls SymmetricGroupAlgebra instead of letting the general one.

So far and to my humble opinion, why keeping SymmetricGroupAlgebra which brings, to my eyes, only troubles as the general algebra method works perfectly?


---

Comment by tscrim created at 2014-08-31 01:11:01

Replying to [comment:27 virmaux]:
> These problems could be fixed by deleting the algebra method in sage.groups.perm_gps.permgroup_named.py. It might be something recent because it was working at the time I wrote the failing doctest.
> The problem is that this method calls SymmetricGroupAlgebra instead of letting the general one.
> 
> So far and to my humble opinion, why keeping SymmetricGroupAlgebra which brings, to my eyes, only troubles as the general algebra method works perfectly?

Because it offers much more functionality that the general algebra doesn't and previously the functionality that you want of the general algebra wasn't used. Half of the failures are trivial due to output format, the others, except the check in `SemisimpleAlgebras` (should just be a matter of setting the right category), can be solved by implementing a `conjugacy_classes` method for `StandardPermutations_n` (there was talk about implementing this specifically for permutations without appealing to GAP and would fix the problem).

However I think there is a problem with your code's robustness that should be fixed instead. You're using the indexing set of the basis, but it would be better use the `.group()` (which should be an abstract method for the category IMO) because is explicitly what you want.

Another couple of questions/comments:

This line in `categories/objects.py`:

```
doctest:1: DeprecationWarning: hom_category is deprecated. Please use Homsets instead.
```

should be

```
doctest:...: DeprecationWarning: hom_category is deprecated. Please use Homsets instead.
```


I think creation of the axiom 'semisimple' and the (perhaps somewhat of shell) categories for semisimple groups and algebras should be done as a dependency ticket for better separation of concerns (and is a part we can split off and review more easily).

Best,

Travis


---

Comment by virmaux created at 2014-08-31 08:18:28

My bad, I did not know that this group method was existing; it should fix everything as on a SymmetricGroupAlgebra it gives a SymmetricGroup object and not a StandardPermutations_n. Also, notations are different between SymmetricGroup and StandardPermutation objects. One is the cyclic notation for permutation, the other one is the functional notation. It is then very confusing when going from group to algebra and vice versa.

Let's note that using .basis().key() is almost 3 times faster as doing .group() but it should not be an issue as it is usually called only once.

I am still a bit dubious about the class SymmetricGroupAlgebra. In my personnal using of sage I have always dodged it to avoid all kind of troubles. Is there a way of using the more general framework and adding the few methods it adds to the particular case of symmetric groups algebras without defining a special class for it ? Would it be a good idea ?

I hope I did not say too much nonsense.

Best,
Aladin


---

Comment by git created at 2014-09-01 14:46:14

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-09-03 12:57:09

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by nthiery created at 2014-09-03 13:15:15

Hi Travis,

Thanks for investigating this!

Replying to [comment:28 tscrim]:
> Because it offers much more functionality that the general algebra doesn't and previously the functionality that you want of the general algebra wasn't used. Half of the failures are trivial due to output format, the others, except the check in `SemisimpleAlgebras` (should just be a matter of setting the right category), can be solved by implementing a `conjugacy_classes` method for `StandardPermutations_n` (there was talk about implementing this specifically for permutations without appealing to GAP and would fix the problem).

Reverting SymmetricGroup.algebra to not return SymmetricGroupAlgebra
is now #16925. See there for the rationale, but essentially
SymmetricGroupAlgebra is not a drop-in replacement, and breaks too
many assumptions that generic code about group algebras will want to
do. See you there if this needs to be further discussed.

I have made #16925 a dependency of this ticket.

See #16926 for a plan to have all implementations of the group algebra
of the symmetric group benefit from the cool features of
SymmetricGroupAlgebra.

> Another couple of questions/comments:
> 
> This line in `categories/objects.py`:
> {{{
> doctest:1: DeprecationWarning: hom_category is deprecated. Please use Homsets instead.
> }}}
> should be
> {{{
> doctest:...: DeprecationWarning: hom_category is deprecated. Please use Homsets instead.
> }}}

This is now fixed (actually in the #10668 dependency). Thanks for
catching though!

> I think creation of the axiom 'semisimple' and the (perhaps somewhat of shell) categories for semisimple groups and algebras should be done as a dependency ticket for better separation of concerns (and is a part we can split off and review more easily).

Possibly so. Now this ticket is already floating on a pile of
dependency which are somewhat of a pain to maintain (e.g. for merging
in beta on a regular basis). And separating the stuff would take a bit
of work. So I would not bother too much about this.

Cheers,
                           Nicolas


---

Comment by nthiery created at 2014-09-03 13:16:00

Changing status from new to needs_review.


---

Comment by nthiery created at 2014-09-03 13:18:20

I am temporarily putting it to needs review to get reports from the build bot. Also, most of the code won't change much and can already be reviewed.

There are some failing doctests around steenrod/quiver algebras that I need to fix in #8678.
I also have this on my list:

   - [ ] Make span return a true submodule rather than a FreeModule;
   - [ ] Adapt annihilator accordingly;


---

Comment by git created at 2014-09-03 14:02:35

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2014-09-15 20:08:15

For reference, #10305 implements centers of the symmetric group algebra.


---

Comment by git created at 2015-03-10 23:18:51

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by git created at 2015-03-10 23:37:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-03-16 22:11:54

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by git created at 2015-03-16 22:16:55

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-03-16 23:10:00

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-03-17 06:49:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-03-20 23:51:45

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by git created at 2015-03-21 07:05:43

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-03-21 07:19:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-04-13 14:57:07

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-04-13 15:24:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-04-13 17:32:35

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-04-13 21:21:19

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-04-14 02:47:20

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-04-14 03:19:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-04-14 16:00:09

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-04-14 16:01:58

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-04-14 17:08:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-04-14 20:26:06

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-04-14 20:32:11

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-04-15 05:11:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-04-15 05:28:39

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-04-15 05:32:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-04-15 13:57:09

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-04-15 20:00:27

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-04-16 03:01:14

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-04-16 03:09:25

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by saliola created at 2015-04-16 03:11:42

Hello Nicolas,

I'm almost done reviewing this. The patch looks great! I've made some "improvements" to the documentation, please take a look.

Here are a few remaining questions:

1. First of all, I'm not sure what the commit cfe399d is all about. Was it some sort of auto-merge by git?

2. `categories/finite_dimensional_modules_with_basis.py`: the docstring of `quotient_module` talks about quotient "free" module. What do you mean by free?

3. `categories/semisimple_algebras.py`: what do you mean by "TODO: trivial implementations for semisimple_quotient"

4. `combinat/free_module.py`: `_order_cmp` requires a docstring

5. `combinat/free_module.py` has a method called `echelon_form`, which is very similar to `echelonize` from `categories/modules_with_basis.py`. They essential do the same thing except that `echelon_form` allows one to specify a `base_ring`. Should these be merged? or eliminate one of them?
----
New commits:


---

Comment by git created at 2015-04-16 03:14:36

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-04-16 03:40:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-04-16 04:00:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-04-16 04:23:57

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by nthiery created at 2015-04-16 04:27:14

Replying to [comment:65 saliola]:
> I'm almost done reviewing this. The patch looks great! I've made some "improvements" to the documentation, please take a look.

I double checked your changes, thanks!

> Here are a few remaining questions:
> 
> 1. First of all, I'm not sure what the commit cfe399d is all about. Was it some sort of auto-merge by git?

Sounds like we both merged in 6.7.beta0 and that was a merge of our
merges ...

> 2. `categories/finite_dimensional_modules_with_basis.py`: the docstring of `quotient_module` talks about quotient "free" module. What do you mean by free?

I agree, the phrasing is not great. The point that needs to be
highlighted is that this only handles quotients by free submodules
admitting a unitriangular row echelon form, so that the quotient is
again a free module. Any proposition of rewording is welcome!

> 3. `categories/semisimple_algebras.py`: what do you mean by "TODO: trivial implementations for semisimple_quotient"

Err, good point, I don't really know. I guess all the methods that
become trivial in this category, like is_semisimple, ... Maybe we can
just remove this comment.

> 4. `combinat/free_module.py`: `_order_cmp` requires a docstring

Done.

> 5. `combinat/free_module.py` has a method called `echelon_form`, which is very similar to `echelonize` from `categories/modules_with_basis.py`. They essential do the same thing except that `echelon_form` allows one to specify a `base_ring`. Should these be merged? or eliminate one of them?

Oops, good catch. I merged the two of them as `echelon_form` in the
category. I deleted the `base_ring` feature which seems useless and
dangerous (the resulting vectors had coefficient in the specified
base_ring but injected back into the original module). We probably
don't need to go through a deprecation period for a broken "feature"
like this.

Running long tests now.

> ----
> New commits:
> ||[af995f4](http://git.sagemath.org/sage.git/commit/?id=af995f48d7ec6b098eb2115ffb5495e2cc884042)||`Merge branch 'develop' into t/11111/more_support_for_finite_dimensional_modules_and_algebras_with_basis`||
> ||[a476501](http://git.sagemath.org/sage.git/commit/?id=a476501f8ecfa8784cb7a8a6dfc3d4196f5fe53c)||`Merge branch 'public/11111-more_support_for_finite_dimensional_modules_and_algebras_with_basis' of trac.sagemath.org:sage into t/11111/more_support_for_finite_dimensional_modules_and_algebras_with_basis`||
----
New commits:


---

Comment by git created at 2015-04-16 05:04:25

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by saliola created at 2015-04-16 05:06:19

Replying to [comment:70 nthiery]:
> Replying to [comment:65 saliola]:
> > 2. `categories/finite_dimensional_modules_with_basis.py`: the docstring of `quotient_module` talks about quotient "free" module. What do you mean by free?
> 
> I agree, the phrasing is not great. The point that needs to be
> highlighted is that this only handles quotients by free submodules
> admitting a unitriangular row echelon form, so that the quotient is
> again a free module. Any proposition of rewording is welcome!

I tweaked it a bit, using what you wrote here.
 
> > 3. `categories/semisimple_algebras.py`: what do you mean by "TODO: trivial implementations for semisimple_quotient"
> 
> Err, good point, I don't really know. I guess all the methods that
> become trivial in this category, like is_semisimple, ... Maybe we can
> just remove this comment.

Removed.

> Running long tests now.

Positive review, provided that all doctests pass.


---

Comment by git created at 2015-04-16 12:12:00

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by nthiery created at 2015-04-16 14:20:15

Changing keywords from "" to "days20_5, days64, sd67".


---

Comment by nthiery created at 2015-04-16 14:23:55

Running the long tests on `sage.math.u-psud.fr` triggered the following failures:

```
sage -t --long src/sage/interfaces/expect.py  # 1 doctest failed
sage -t --long src/sage/tests/cmdline.py  # 3 doctests failed
sage -t --long src/sage/parallel/decorate.py  # 1 doctest failed
sage -t --long src/sage/functions/hypergeometric.py  # 1 doctest failed
sage -t --long src/sage/dev/sagedev.py  # Timed out
sage -t --long src/sage/schemes/elliptic_curves/lseries_ell.py  # Timed out
sage -t --long src/sage/doctest/test.py  # 1 doctest failed
sage -t --long src/sage/combinat/dyck_word.py  # 1 doctest failed
sage -t --long src/sage/misc/temporary_file.py  # 5 doctests failed
```


All of them passed smoothly when I reran them with:

```
sage -t --long --failed src/sage
```


So I assume it was just a transient issue due to the machine being under heavy load.

Hence, positive review!

Thanks a lot everyone, and in particular Franco!

That was a long story from Sage Days 20.5 to Sage Days 67 :-)


---

Comment by nthiery created at 2015-04-16 14:24:35

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-04-19 12:24:16

PSA: I'm not merging tickets if the dependency can't be merged (i.e. don't depend on a duplicate/invalid/wontfix ticket).


---

Comment by vbraun created at 2015-04-19 16:44:57

Resolution: fixed


---

Comment by nthiery created at 2015-04-21 10:35:19

Replying to [comment:78 vbraun]:
> PSA: I'm not merging tickets if the dependency can't be merged (i.e. don't depend on a duplicate/invalid/wontfix ticket).

Oh, I see. We should have updated. the dependency from #16925 to #16926. Thanks for the tip!
