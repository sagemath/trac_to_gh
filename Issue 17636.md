# Issue 17636: Segfault in iFUB

Issue created by migration from https://trac.sagemath.org/ticket/17873

Original creator: dcoudert

Original creation time: 2015-02-28 09:04:05

CC:  ncohen

This patch resolve a segfault occuring in ``iFUB`` for graphs of order 1. It was due to an uninitialized variable in ``diameter_lower_bound_multi_sweep``.


---

Comment by git created at 2015-02-28 09:14:38

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2015-02-28 09:27:53

There is something weird in my commit and I don't understand why.
I have not modified the `generic_graph.py` file but the commit contains code from it O_o
I'm sure I have created this branch starting from the `develop` branch (after a git trac checkout develop; git trac pull; git branch ifub; git checkout ifub; fix ifub problems and do test and docbuild; git commit...; git trac push 17873).
Any idea on how to resolve this?

David.


---

Comment by dcoudert created at 2015-02-28 09:27:53

Changing status from new to needs_review.


---

Comment by ncohen created at 2015-02-28 09:47:55

Hello !

> Any idea on how to resolve this?

Well, I do not understand hwo you got there either. Your branch seems based on the latest develop indeed, but your must have had some changes in `generic_graph` when you ran this 'pull'. Either way none of that is really a problem. Here is what you should do:

1) "Break" your last commit. Its content will become unstaged changes
`sage reset HEAD~1` 

2) At this moment you can do a `git checkout generic_graph.py`. This will discard any change in `generic_graph.py`. In particular there are `<<<<<<<` and `>>>>>>>` in there that probably come from a failed merge.

3) When you are satisfied with the result, create the commit again in the usual way

4) As you modified a commit, technically you rewrote history. When you push your commit again you will have to use a `-f` flag.

In general, if you call 'tig' more frequently to look at your commits and diff you should have less troubles with git.

I am in the train right now, a bit after Avignon. God, it feels good to see this warm sunlight everywhere. It feels more like home than any other place.

Nathann


---

Comment by git created at 2015-02-28 09:58:15

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by dcoudert created at 2015-02-28 10:01:51

THANKS A LOT !!!

So the patch is ready to be reviewed. Note that I have not changed the first test of the diameter method from `if n==0` to `if n<=1`, but we can do it as well to save time.

David.
PS: current weather in Nice is not so perfect, we have some clouds ;)


---

Comment by ncohen created at 2015-03-01 18:20:22

Well. Saving time for instances of size 0 is cool, but I seriously hope that it will not be the bottleneck anywhere. This fix is good, as the lowest level method does not rely on some assumption made by the function which calls it. Good to go, thanks !

Nathann


---

Comment by ncohen created at 2015-03-01 18:20:22

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-03-03 00:25:09

Resolution: fixed
