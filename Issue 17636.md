# Issue 17636: Segfault in iFUB

archive/issues_017636.json:
```json
{
    "body": "CC:  @nathanncohen\n\nThis patch resolve a segfault occuring in ``iFUB`` for graphs of order 1. It was due to an uninitialized variable in ``diameter_lower_bound_multi_sweep``.\n\nIssue created by migration from https://trac.sagemath.org/ticket/17873\n\n",
    "created_at": "2015-02-28T09:04:05Z",
    "labels": [
        "component: graph theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.6",
    "title": "Segfault in iFUB",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17636",
    "user": "https://github.com/dcoudert"
}
```
CC:  @nathanncohen

This patch resolve a segfault occuring in ``iFUB`` for graphs of order 1. It was due to an uninitialized variable in ``diameter_lower_bound_multi_sweep``.

Issue created by migration from https://trac.sagemath.org/ticket/17873





---

archive/issue_comments_235399.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-02-28T09:14:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17636",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17636#issuecomment-235399",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_235400.json:
```json
{
    "body": "There is something weird in my commit and I don't understand why.\nI have not modified the `generic_graph.py` file but the commit contains code from it O_o\nI'm sure I have created this branch starting from the `develop` branch (after a git trac checkout develop; git trac pull; git branch ifub; git checkout ifub; fix ifub problems and do test and docbuild; git commit...; git trac push 17873).\nAny idea on how to resolve this?\n\nDavid.",
    "created_at": "2015-02-28T09:27:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17636",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17636#issuecomment-235400",
    "user": "https://github.com/dcoudert"
}
```

There is something weird in my commit and I don't understand why.
I have not modified the `generic_graph.py` file but the commit contains code from it O_o
I'm sure I have created this branch starting from the `develop` branch (after a git trac checkout develop; git trac pull; git branch ifub; git checkout ifub; fix ifub problems and do test and docbuild; git commit...; git trac push 17873).
Any idea on how to resolve this?

David.



---

archive/issue_comments_235401.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-02-28T09:27:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17636",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17636#issuecomment-235401",
    "user": "https://github.com/dcoudert"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_235402.json:
```json
{
    "body": "Hello !\n\n> Any idea on how to resolve this?\n\nWell, I do not understand hwo you got there either. Your branch seems based on the latest develop indeed, but your must have had some changes in `generic_graph` when you ran this 'pull'. Either way none of that is really a problem. Here is what you should do:\n\n1) \"Break\" your last commit. Its content will become unstaged changes\n`sage reset HEAD~1` \n\n2) At this moment you can do a `git checkout generic_graph.py`. This will discard any change in `generic_graph.py`. In particular there are `<<<<<<<` and `>>>>>>>` in there that probably come from a failed merge.\n\n3) When you are satisfied with the result, create the commit again in the usual way\n\n4) As you modified a commit, technically you rewrote history. When you push your commit again you will have to use a `-f` flag.\n\nIn general, if you call 'tig' more frequently to look at your commits and diff you should have less troubles with git.\n\nI am in the train right now, a bit after Avignon. God, it feels good to see this warm sunlight everywhere. It feels more like home than any other place.\n\nNathann",
    "created_at": "2015-02-28T09:47:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17636",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17636#issuecomment-235402",
    "user": "https://github.com/nathanncohen"
}
```

Hello !

> Any idea on how to resolve this?

Well, I do not understand hwo you got there either. Your branch seems based on the latest develop indeed, but your must have had some changes in `generic_graph` when you ran this 'pull'. Either way none of that is really a problem. Here is what you should do:

1) "Break" your last commit. Its content will become unstaged changes
`sage reset HEAD~1` 

2) At this moment you can do a `git checkout generic_graph.py`. This will discard any change in `generic_graph.py`. In particular there are `<<<<<<<` and `>>>>>>>` in there that probably come from a failed merge.

3) When you are satisfied with the result, create the commit again in the usual way

4) As you modified a commit, technically you rewrote history. When you push your commit again you will have to use a `-f` flag.

In general, if you call 'tig' more frequently to look at your commits and diff you should have less troubles with git.

I am in the train right now, a bit after Avignon. God, it feels good to see this warm sunlight everywhere. It feels more like home than any other place.

Nathann



---

archive/issue_comments_235403.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-02-28T09:58:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17636",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17636#issuecomment-235403",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_235404.json:
```json
{
    "body": "THANKS A LOT !!!\n\nSo the patch is ready to be reviewed. Note that I have not changed the first test of the diameter method from `if n==0` to `if n<=1`, but we can do it as well to save time.\n\nDavid.\nPS: current weather in Nice is not so perfect, we have some clouds ;)",
    "created_at": "2015-02-28T10:01:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17636",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17636#issuecomment-235404",
    "user": "https://github.com/dcoudert"
}
```

THANKS A LOT !!!

So the patch is ready to be reviewed. Note that I have not changed the first test of the diameter method from `if n==0` to `if n<=1`, but we can do it as well to save time.

David.
PS: current weather in Nice is not so perfect, we have some clouds ;)



---

archive/issue_comments_235405.json:
```json
{
    "body": "Well. Saving time for instances of size 0 is cool, but I seriously hope that it will not be the bottleneck anywhere. This fix is good, as the lowest level method does not rely on some assumption made by the function which calls it. Good to go, thanks !\n\nNathann",
    "created_at": "2015-03-01T18:20:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17636",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17636#issuecomment-235405",
    "user": "https://github.com/nathanncohen"
}
```

Well. Saving time for instances of size 0 is cool, but I seriously hope that it will not be the bottleneck anywhere. This fix is good, as the lowest level method does not rely on some assumption made by the function which calls it. Good to go, thanks !

Nathann



---

archive/issue_comments_235406.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-03-01T18:20:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17636",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17636#issuecomment-235406",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_016986.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-03-03T00:25:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17636",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17636#event-16986"
}
```



---

archive/issue_comments_235407.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-03-03T00:25:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17636",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17636#issuecomment-235407",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
