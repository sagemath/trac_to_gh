# Issue 19788: is_prime_power fails on some inputs

archive/issues_019788.json:
```json
{
    "body": "CC:  vdelecroix\n\nPlaying with finite fields on Sage 6.10 or 7.0:\n\n```\nGF(30011**(19*3), name='z')\n...\nValueError: the order of a finite field must be a prime power\n```\n\nApparently `is_prime_power` returns `False` for that cardinality.\n\nIssue created by migration from https://trac.sagemath.org/ticket/20025\n\n",
    "created_at": "2016-02-08T16:25:13Z",
    "labels": [
        "basic arithmetic",
        "critical",
        "bug"
    ],
    "title": "is_prime_power fails on some inputs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19788",
    "user": "jpflori"
}
```
CC:  vdelecroix

Playing with finite fields on Sage 6.10 or 7.0:

```
GF(30011**(19*3), name='z')
...
ValueError: the order of a finite field must be a prime power
```

Apparently `is_prime_power` returns `False` for that cardinality.

Issue created by migration from https://trac.sagemath.org/ticket/20025





---

archive/issue_comments_271920.json:
```json
{
    "body": "`:-P`\n\n\n```\nsage: print [i for i in range(1,100) if not is_prime_power(30011**i)]\n[22, 26, 33, 34, 38, 39, 44, 46, 51, 52, 55, 57, 58, 62, 65, 66, 68, 69, 74, 76, 77, 78, 82, 85, 86, 87, 88, 91, 92, 93, 94, 95, 99]\n```\n",
    "created_at": "2016-02-08T16:35:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19788#issuecomment-271920",
    "user": "ncohen"
}
```

`:-P`


```
sage: print [i for i in range(1,100) if not is_prime_power(30011**i)]
[22, 26, 33, 34, 38, 39, 44, 46, 51, 52, 55, 57, 58, 62, 65, 66, 68, 69, 74, 76, 77, 78, 82, 85, 86, 87, 88, 91, 92, 93, 94, 95, 99]
```




---

archive/issue_comments_271921.json:
```json
{
    "body": "Thanks, I was building the latest beta to see if the PARI update changed anything (though I could not say at this point if PARI is involved).\nIt seems its not the case.",
    "created_at": "2016-02-08T16:36:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19788#issuecomment-271921",
    "user": "jpflori"
}
```

Thanks, I was building the latest beta to see if the PARI update changed anything (though I could not say at this point if PARI is involved).
It seems its not the case.



---

archive/issue_comments_271922.json:
```json
{
    "body": "Funny\n\n```\nsage: set([p for i in range(1,100) for p in primes(200000) if not is_prime_power(p**i)])\n{30011}\n```\n",
    "created_at": "2016-02-08T16:39:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19788#issuecomment-271922",
    "user": "ncohen"
}
```

Funny

```
sage: set([p for i in range(1,100) for p in primes(200000) if not is_prime_power(p**i)])
{30011}
```




---

archive/issue_comments_271923.json:
```json
{
    "body": "So it is an issue in the PARI versions we ship (at least the one in 7.0):\n\n```\n? isprimepower(30011^(17*3))\nOddPwrs: examining 758-bit integer\nOddPwrs: examining 252-bit integer\n\nOddPwrs: not a power\nZ_isanypower: now k=3, x=252-bit\n\nOddPwrs: [17] passed modular checks\n%1 = 0\n```\n",
    "created_at": "2016-02-08T16:48:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19788#issuecomment-271923",
    "user": "jpflori"
}
```

So it is an issue in the PARI versions we ship (at least the one in 7.0):

```
? isprimepower(30011^(17*3))
OddPwrs: examining 758-bit integer
OddPwrs: examining 252-bit integer

OddPwrs: not a power
Z_isanypower: now k=3, x=252-bit

OddPwrs: [17] passed modular checks
%1 = 0
```




---

archive/issue_comments_271924.json:
```json
{
    "body": "I attempted to send a bug report upstream.\nIf it appears on their bugtracker, I'll report here.",
    "created_at": "2016-02-08T16:57:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19788#issuecomment-271924",
    "user": "jpflori"
}
```

I attempted to send a bug report upstream.
If it appears on their bugtracker, I'll report here.



---

archive/issue_comments_271925.json:
```json
{
    "body": "http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1782",
    "created_at": "2016-02-08T17:04:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19788#issuecomment-271925",
    "user": "jpflori"
}
```

http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1782



---

archive/issue_comments_271926.json:
```json
{
    "body": "I tried all primes up to 10<sup>6</sup> and still only 30011 fails.",
    "created_at": "2016-02-08T21:51:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19788#issuecomment-271926",
    "user": "jdemeyer"
}
```

I tried all primes up to 10<sup>6</sup> and still only 30011 fails.



---

archive/issue_comments_271927.json:
```json
{
    "body": "Fixed in master according to Karim, though he did not push the commit yet :)",
    "created_at": "2016-02-09T09:00:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19788#issuecomment-271927",
    "user": "jpflori"
}
```

Fixed in master according to Karim, though he did not push the commit yet :)



---

archive/issue_comments_271928.json:
```json
{
    "body": "Let's me know when it's fixed in PARI master, then I can make a package.",
    "created_at": "2016-02-09T09:04:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19788#issuecomment-271928",
    "user": "jdemeyer"
}
```

Let's me know when it's fixed in PARI master, then I can make a package.



---

archive/issue_comments_271929.json:
```json
{
    "body": "Done:\n* http://pari.math.u-bordeaux.fr/cgi-bin/gitweb.cgi?p=pari.git;a=commit;h=61b65cc7e4fc3ce51a2daed4d48e3c675e8417e8",
    "created_at": "2016-02-09T13:41:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19788#issuecomment-271929",
    "user": "jpflori"
}
```

Done:
* http://pari.math.u-bordeaux.fr/cgi-bin/gitweb.cgi?p=pari.git;a=commit;h=61b65cc7e4fc3ce51a2daed4d48e3c675e8417e8



---

archive/issue_comments_271930.json:
```json
{
    "body": "I did not yet run full doctests, but otherwise this seems to work.\n----\nNew commits:",
    "created_at": "2016-02-09T15:55:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19788#issuecomment-271930",
    "user": "jdemeyer"
}
```

I did not yet run full doctests, but otherwise this seems to work.
----
New commits:



---

archive/issue_comments_271931.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-02-09T15:55:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19788#issuecomment-271931",
    "user": "jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_271932.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-02-10T07:53:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19788#issuecomment-271932",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_271933.json:
```json
{
    "body": "Doctests pass now.",
    "created_at": "2016-02-10T08:00:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19788#issuecomment-271933",
    "user": "jdemeyer"
}
```

Doctests pass now.



---

archive/issue_comments_271934.json:
```json
{
    "body": "Thanks, looks ok.",
    "created_at": "2016-02-10T13:19:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19788#issuecomment-271934",
    "user": "jpflori"
}
```

Thanks, looks ok.



---

archive/issue_comments_271935.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-02-10T13:19:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19788#issuecomment-271935",
    "user": "jpflori"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_271936.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-02-11T12:22:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19788#issuecomment-271936",
    "user": "vbraun"
}
```

Resolution: fixed
