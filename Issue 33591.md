# Issue 33591: Fix conda workflow

archive/issues_033591.json:
```json
{
    "body": "CC:  @isuruf @dimpase @saraedum @mkoeppe @slel\n\nCurrently is broken because of issues with `pari`.\n\nhttps://github.com/sagemath/sage/runs/6236167749?check_suite_focus=true\n\nIssue created by migration from https://trac.sagemath.org/ticket/33828\n\n",
    "created_at": "2022-05-09T21:47:28Z",
    "labels": [
        "component: build",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "Fix conda workflow",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33591",
    "user": "https://github.com/tobiasdiez"
}
```
CC:  @isuruf @dimpase @saraedum @mkoeppe @slel

Currently is broken because of issues with `pari`.

https://github.com/sagemath/sage/runs/6236167749?check_suite_focus=true

Issue created by migration from https://trac.sagemath.org/ticket/33828





---

archive/issue_comments_477531.json:
```json
{
    "body": "`@`isuruf Where should we point Sage users who encounter problems of this kind with the conda packages?",
    "created_at": "2022-05-09T21:51:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33591#issuecomment-477531",
    "user": "https://github.com/mkoeppe"
}
```

`@`isuruf Where should we point Sage users who encounter problems of this kind with the conda packages?



---

archive/issue_comments_477532.json:
```json
{
    "body": "I think they should open an issue on the feedstock, i.e., at https://github.com/conda-forge/sage-feedstock/issues.",
    "created_at": "2022-05-09T23:07:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33591#issuecomment-477532",
    "user": "https://github.com/saraedum"
}
```

I think they should open an issue on the feedstock, i.e., at https://github.com/conda-forge/sage-feedstock/issues.



---

archive/issue_comments_477533.json:
```json
{
    "body": "I'm not sure why the single threaded version was picked up. You can change the entry in `build/pkgs/pari/distros/conda.txt` to `pari=*=*_pthread` to ensure that we pick up the threaded version.",
    "created_at": "2022-05-09T23:14:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33591#issuecomment-477533",
    "user": "https://github.com/isuruf"
}
```

I'm not sure why the single threaded version was picked up. You can change the entry in `build/pkgs/pari/distros/conda.txt` to `pari=*=*_pthread` to ensure that we pick up the threaded version.



---

archive/issue_comments_477534.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-10T01:17:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33591#issuecomment-477534",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_477535.json:
```json
{
    "body": "Testing at https://github.com/sagemath/sagetrac-mirror/actions/runs/2297778419",
    "created_at": "2022-05-10T01:22:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33591#issuecomment-477535",
    "user": "https://github.com/mkoeppe"
}
```

Testing at https://github.com/sagemath/sagetrac-mirror/actions/runs/2297778419



---

archive/issue_comments_477536.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-05-10T01:49:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33591#issuecomment-477536",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_477537.json:
```json
{
    "body": "tests look good (some unrelated doctest errors)",
    "created_at": "2022-05-10T08:53:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33591#issuecomment-477537",
    "user": "https://github.com/dimpase"
}
```

tests look good (some unrelated doctest errors)



---

archive/issue_comments_477538.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-05-10T08:53:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33591#issuecomment-477538",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_477539.json:
```json
{
    "body": "Thanks for the quick fix!",
    "created_at": "2022-05-10T18:36:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33591#issuecomment-477539",
    "user": "https://github.com/tobiasdiez"
}
```

Thanks for the quick fix!



---

archive/issue_comments_477540.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-05-17T21:00:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33591#issuecomment-477540",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
