# Issue 14519: Error when SymPy can't evaluate an integral

archive/issues_014519.json:
```json
{
    "body": "Assignee: @burcin\n\nCC:  @kcrisman asmeurer @williamstein\n\nWhen SymPy can't evaluate an integral, such as `integrate((log(x)*log(log(x))), x, algorithm='sympy')`, it returns \"AttributeError: 'Integral' object has no attribute '_sage_'\". It should just return an unevaluated integral, the way it does when Maxima is used.\n\nIssue created by migration from https://trac.sagemath.org/ticket/14723\n\n",
    "created_at": "2013-06-11T19:29:53Z",
    "labels": [
        "calculus",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "Error when SymPy can't evaluate an integral",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14519",
    "user": "@eviatarbach"
}
```
Assignee: @burcin

CC:  @kcrisman asmeurer @williamstein

When SymPy can't evaluate an integral, such as `integrate((log(x)*log(log(x))), x, algorithm='sympy')`, it returns "AttributeError: 'Integral' object has no attribute '_sage_'". It should just return an unevaluated integral, the way it does when Maxima is used.

Issue created by migration from https://trac.sagemath.org/ticket/14723





---

archive/issue_comments_184265.json:
```json
{
    "body": "Attachment [14723.patch](tarball://root/attachments/some-uuid/ticket14723/14723.patch) by @eviatarbach created at 2013-06-11 19:32:26\n\nWith the patch, `integrate(log(x)*log(log(x)), x)` is returned.",
    "created_at": "2013-06-11T19:32:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184265",
    "user": "@eviatarbach"
}
```

Attachment [14723.patch](tarball://root/attachments/some-uuid/ticket14723/14723.patch) by @eviatarbach created at 2013-06-11 19:32:26

With the patch, `integrate(log(x)*log(log(x)), x)` is returned.



---

archive/issue_comments_184266.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-06-12T19:25:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184266",
    "user": "@eviatarbach"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_184267.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-06-12T19:31:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184267",
    "user": "@eviatarbach"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_184268.json:
```json
{
    "body": "Just looking at the patch, that doesn't look like it does the right thing for definite integrals.",
    "created_at": "2013-08-27T05:36:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184268",
    "user": "asmeurer"
}
```

Just looking at the patch, that doesn't look like it does the right thing for definite integrals.



---

archive/issue_comments_184269.json:
```json
{
    "body": "This is a dup of #15256.  Not sure which one should be closed.",
    "created_at": "2014-06-17T12:34:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184269",
    "user": "@kcrisman"
}
```

This is a dup of #15256.  Not sure which one should be closed.



---

archive/issue_comments_184270.json:
```json
{
    "body": "Changing keywords from \"\" to \"sympy, integrate\".",
    "created_at": "2014-08-12T13:38:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184270",
    "user": "@rwst"
}
```

Changing keywords from "" to "sympy, integrate".



---

archive/issue_comments_184271.json:
```json
{
    "body": "The original case is now working in sympy:\n\n```\nsage: integrate(sin(x)*tan(x), x, algorithm='sympy') \n1/2*log(sin(x) + 1) - 1/2*log(sin(x) - 1) - sin(x)\n```\n\nso we need a more complicated one:\n\n```\nsage: integrate(sin(x)*tan(x)/(1-cos(x)), x, algorithm='sympy')\nintegrate(-sin(x)*tan(x)/(cos(x) - 1), x)\n```\n\nHowever, comment:7 is right regarding definite integrals:\n\n```\nsage: integrate(sin(x)*tan(x)/(1-cos(x)), x, a, b, algorithm='sympy')\nintegrate(-sin(x)*tan(x)/(cos(x) - 1), x)\n```\n",
    "created_at": "2014-08-12T13:38:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184271",
    "user": "@rwst"
}
```

The original case is now working in sympy:

```
sage: integrate(sin(x)*tan(x), x, algorithm='sympy') 
1/2*log(sin(x) + 1) - 1/2*log(sin(x) - 1) - sin(x)
```

so we need a more complicated one:

```
sage: integrate(sin(x)*tan(x)/(1-cos(x)), x, algorithm='sympy')
integrate(-sin(x)*tan(x)/(cos(x) - 1), x)
```

However, comment:7 is right regarding definite integrals:

```
sage: integrate(sin(x)*tan(x)/(1-cos(x)), x, a, b, algorithm='sympy')
integrate(-sin(x)*tan(x)/(cos(x) - 1), x)
```




---

archive/issue_comments_184272.json:
```json
{
    "body": "It is a matter of either\n* adding a `_sage_` method to the upstream sympy code in `sympy/integrals/integrals.py` or     \n* catching the exception in `sage.symbolic.integration.external.sympy_integrator()`\n\nEDIT: The problem with the latter is, all sorts of elementary sympy functions have a `_sage_` method, so why not add one to `sympy.Integral` or even do a bulk upgrade of sympy (e.g. `gamma._sage_` is missing too)?\n\nActually, this is https://github.com/sympy/sympy/issues/3444",
    "created_at": "2014-12-06T15:11:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184272",
    "user": "@rwst"
}
```

It is a matter of either
* adding a `_sage_` method to the upstream sympy code in `sympy/integrals/integrals.py` or     
* catching the exception in `sage.symbolic.integration.external.sympy_integrator()`

EDIT: The problem with the latter is, all sorts of elementary sympy functions have a `_sage_` method, so why not add one to `sympy.Integral` or even do a bulk upgrade of sympy (e.g. `gamma._sage_` is missing too)?

Actually, this is https://github.com/sympy/sympy/issues/3444



---

archive/issue_comments_184273.json:
```json
{
    "body": "Eventually we may want to start looking into switching to SymPy for the default integration method, or possibly trying both by default (not sure how long that would take, though).  Before that, we'd probably want to work with #7763, though - and what about #2787?  I personally don't know that I like deprecating it, but all of this is part of the same package of taking *advantage* of the capabilities out there by having a more consistent interface.",
    "created_at": "2014-12-06T20:13:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184273",
    "user": "@kcrisman"
}
```

Eventually we may want to start looking into switching to SymPy for the default integration method, or possibly trying both by default (not sure how long that would take, though).  Before that, we'd probably want to work with #7763, though - and what about #2787?  I personally don't know that I like deprecating it, but all of this is part of the same package of taking *advantage* of the capabilities out there by having a more consistent interface.



---

archive/issue_comments_184274.json:
```json
{
    "body": "This Sympy patch completely fixes the issue. A pull request containing it was reported there and waits for review.\n\nhttps://github.com/sympy/sympy/pull/8592\n\n\n```\ndiff --git a/sympy/integrals/integrals.py b/sympy/integrals/integrals.py\nindex 2a3ccfe..ac434c5 100644\n--- a/sympy/integrals/integrals.py\n+++ b/sympy/integrals/integrals.py\n@@ -1070,6 +1070,27 @@ def as_sum(self, n, method=\"midpoint\"):\n             result += self.function.subs(sym, xi)\n         return result*dx\n \n+    def _sage_(self, ):\n+        from sage.symbolic.integration.integral import definite_integral, indefinite_integral\n+        f, limits = self.function, list(self.limits)\n+        limit = limits.pop(-1)\n+        if len(limit) >= 2:\n+            if len(limit) == 2:\n+                x, b = limit\n+                a = None\n+            else:\n+                x, a, b = limit\n+            return definite_integral(f._sage_(),\n+                                        x._sage_(),\n+                                        a._sage_(),\n+                                        b._sage_(),\n+                                        hold=True)\n+        else:\n+            x = limit[0]\n+            return indefinite_integral(f._sage_(),\n+                                       x._sage_(),\n+                                       hold=True)\n+\n \n @xthreaded\n def integrate(*args, **kwargs):\n```\n",
    "created_at": "2014-12-09T09:53:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184274",
    "user": "@rwst"
}
```

This Sympy patch completely fixes the issue. A pull request containing it was reported there and waits for review.

https://github.com/sympy/sympy/pull/8592


```
diff --git a/sympy/integrals/integrals.py b/sympy/integrals/integrals.py
index 2a3ccfe..ac434c5 100644
--- a/sympy/integrals/integrals.py
+++ b/sympy/integrals/integrals.py
@@ -1070,6 +1070,27 @@ def as_sum(self, n, method="midpoint"):
             result += self.function.subs(sym, xi)
         return result*dx
 
+    def _sage_(self, ):
+        from sage.symbolic.integration.integral import definite_integral, indefinite_integral
+        f, limits = self.function, list(self.limits)
+        limit = limits.pop(-1)
+        if len(limit) >= 2:
+            if len(limit) == 2:
+                x, b = limit
+                a = None
+            else:
+                x, a, b = limit
+            return definite_integral(f._sage_(),
+                                        x._sage_(),
+                                        a._sage_(),
+                                        b._sage_(),
+                                        hold=True)
+        else:
+            x = limit[0]
+            return indefinite_integral(f._sage_(),
+                                       x._sage_(),
+                                       hold=True)
+
 
 @xthreaded
 def integrate(*args, **kwargs):
```




---

archive/issue_comments_184275.json:
```json
{
    "body": "Huh, that looks pretty straightforward.  Of course one would want to test it with a variety of round-trips, especially involving infinity or symbolic variables as endpoints.  How would it hold up with multivariate functions?",
    "created_at": "2014-12-09T13:29:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184275",
    "user": "@kcrisman"
}
```

Huh, that looks pretty straightforward.  Of course one would want to test it with a variety of round-trips, especially involving infinity or symbolic variables as endpoints.  How would it hold up with multivariate functions?



---

archive/issue_comments_184276.json:
```json
{
    "body": "Replying to [comment:18 kcrisman]:\n> Huh, that looks pretty straightforward.  Of course one would want to test it with a variety of round-trips, especially involving infinity or symbolic variables as endpoints.  How would it hold up with multivariate functions?\nWell, if that SymPy object parameter you are talking about has a `_sage_` method, it will be called and does the right thing before it's given to the Sage function as parameter. This patch is only about SymPy's `Integral` object itself, not its parameters.",
    "created_at": "2014-12-09T14:31:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184276",
    "user": "@rwst"
}
```

Replying to [comment:18 kcrisman]:
> Huh, that looks pretty straightforward.  Of course one would want to test it with a variety of round-trips, especially involving infinity or symbolic variables as endpoints.  How would it hold up with multivariate functions?
Well, if that SymPy object parameter you are talking about has a `_sage_` method, it will be called and does the right thing before it's given to the Sage function as parameter. This patch is only about SymPy's `Integral` object itself, not its parameters.



---

archive/issue_comments_184277.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-12-11T09:11:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184277",
    "user": "@rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_184278.json:
```json
{
    "body": "I decided to patch our own sympy until that sympy pull request gets pulled. \n----\nNew commits:",
    "created_at": "2014-12-11T09:11:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184278",
    "user": "@rwst"
}
```

I decided to patch our own sympy until that sympy pull request gets pulled. 
----
New commits:



---

archive/issue_comments_184279.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-12-11T09:18:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184279",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_184280.json:
```json
{
    "body": "Some issues surfaced, see Sympy pull request.",
    "created_at": "2014-12-15T09:37:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184280",
    "user": "@rwst"
}
```

Some issues surfaced, see Sympy pull request.



---

archive/issue_comments_184281.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-12-15T09:37:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184281",
    "user": "@rwst"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_184282.json:
```json
{
    "body": "Replying to [comment:16 kcrisman]:\n> Eventually we may want to start looking into switching to SymPy for the default integration method, or possibly trying both by default (not sure how long that would take, though).  Before that, we'd probably want to work with #7763, though - and what about #2787?  I personally don't know that I like deprecating it, but all of this is part of the same package of taking *advantage* of the capabilities out there by having a more consistent interface.\nI see, I just stumbled over the necessity for #2787 for this ticket because of #17507. I'll dupe #17507 and make #2787 a dependency for this one.",
    "created_at": "2014-12-15T14:13:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184282",
    "user": "@rwst"
}
```

Replying to [comment:16 kcrisman]:
> Eventually we may want to start looking into switching to SymPy for the default integration method, or possibly trying both by default (not sure how long that would take, though).  Before that, we'd probably want to work with #7763, though - and what about #2787?  I personally don't know that I like deprecating it, but all of this is part of the same package of taking *advantage* of the capabilities out there by having a more consistent interface.
I see, I just stumbled over the necessity for #2787 for this ticket because of #17507. I'll dupe #17507 and make #2787 a dependency for this one.



---

archive/issue_comments_184283.json:
```json
{
    "body": "Interesting!  Just be careful - *particularly* for something so heavily used by non-experts (including their instructors) as integrals, we would really need a deprecation period - see [comment:2:ticket:2787 this example] for a particularly irksome decision that would have to be made.",
    "created_at": "2014-12-15T14:24:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184283",
    "user": "@kcrisman"
}
```

Interesting!  Just be careful - *particularly* for something so heavily used by non-experts (including their instructors) as integrals, we would really need a deprecation period - see [comment:2:ticket:2787 this example] for a particularly irksome decision that would have to be made.



---

archive/issue_comments_184284.json:
```json
{
    "body": "I take that completely back. I was in error, #17507 is only a misleading error message. The interface is consistent. Sorry.",
    "created_at": "2014-12-15T15:16:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184284",
    "user": "@rwst"
}
```

I take that completely back. I was in error, #17507 is only a misleading error message. The interface is consistent. Sorry.



---

archive/issue_comments_184285.json:
```json
{
    "body": "> Some issues surfaced, see Sympy pull request.\nI assume you mean issues beyond whitespace and tests?  We can still include a patch for now if necessary, without just updating upstream.",
    "created_at": "2014-12-15T20:01:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184285",
    "user": "@kcrisman"
}
```

> Some issues surfaced, see Sympy pull request.
I assume you mean issues beyond whitespace and tests?  We can still include a patch for now if necessary, without just updating upstream.



---

archive/issue_comments_184286.json:
```json
{
    "body": "Replying to [comment:27 kcrisman]:\n> > Some issues surfaced, see Sympy pull request.\n> I assume you mean issues beyond whitespace and tests?\nYes, I forgot to handle multiple integrals. SymPy has implemented the issue of #2787 with its `Integrate`.",
    "created_at": "2014-12-16T06:51:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184286",
    "user": "@rwst"
}
```

Replying to [comment:27 kcrisman]:
> > Some issues surfaced, see Sympy pull request.
> I assume you mean issues beyond whitespace and tests?
Yes, I forgot to handle multiple integrals. SymPy has implemented the issue of #2787 with its `Integrate`.



---

archive/issue_comments_184287.json:
```json
{
    "body": "Sympy's \"antiderivative at\" will not have an equivalent in Sage:\n\n```\nsage: sympy.Integral(sympy.sin(x),(x,0)).doit()\n-1\nsage: integral(sin(x),x,0,hold=True)\nintegrate(sin(x), x, x, 0)\nsage: _.simplify()\ncos(x) - 1\n```\n\nEDIT: second problem deleted, wasn't.",
    "created_at": "2014-12-16T09:39:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184287",
    "user": "@rwst"
}
```

Sympy's "antiderivative at" will not have an equivalent in Sage:

```
sage: sympy.Integral(sympy.sin(x),(x,0)).doit()
-1
sage: integral(sin(x),x,0,hold=True)
integrate(sin(x), x, x, 0)
sage: _.simplify()
cos(x) - 1
```

EDIT: second problem deleted, wasn't.



---

archive/issue_comments_184288.json:
```json
{
    "body": "> Sympy's \"antiderivative at\" will not have an equivalent in Sage:\n\nWhat is that supposed to be mathematically?  Maybe Maxima has something like this that we already translate for them?   Do you think there is a way to deal with this by raising an error upon translation back to Sage (if that's appropriate)?  Sorry for the questions; each software has a slightly different philosophy.",
    "created_at": "2014-12-16T14:50:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184288",
    "user": "@kcrisman"
}
```

> Sympy's "antiderivative at" will not have an equivalent in Sage:

What is that supposed to be mathematically?  Maybe Maxima has something like this that we already translate for them?   Do you think there is a way to deal with this by raising an error upon translation back to Sage (if that's appropriate)?  Sorry for the questions; each software has a slightly different philosophy.



---

archive/issue_comments_184289.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-12-16T14:55:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184289",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_184290.json:
```json
{
    "body": "Replying to [comment:30 kcrisman]:\n> > Sympy's \"antiderivative at\" will not have an equivalent in Sage:\n> \n> What is that supposed to be mathematically?\nThe indefinite integral value at the given point. I.e., if `F(x) = integral(f(x),x)` then `F(a) = sympy.Integral(f(x), x, a)`.\n\n> Maybe Maxima has something like this that we already translate for them?\nCouldn't find such a thing.\n\n> Do you think there is a way to deal with this by raising an error upon translation back to Sage (if that's appropriate)?  Sorry for the questions; each software has a slightly different philosophy.\nComputation would be 1. compute the indef. integral; 2. if succesful substitute. So not difficult I guess.",
    "created_at": "2014-12-16T15:07:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184290",
    "user": "@rwst"
}
```

Replying to [comment:30 kcrisman]:
> > Sympy's "antiderivative at" will not have an equivalent in Sage:
> 
> What is that supposed to be mathematically?
The indefinite integral value at the given point. I.e., if `F(x) = integral(f(x),x)` then `F(a) = sympy.Integral(f(x), x, a)`.

> Maybe Maxima has something like this that we already translate for them?
Couldn't find such a thing.

> Do you think there is a way to deal with this by raising an error upon translation back to Sage (if that's appropriate)?  Sorry for the questions; each software has a slightly different philosophy.
Computation would be 1. compute the indef. integral; 2. if succesful substitute. So not difficult I guess.



---

archive/issue_comments_184291.json:
```json
{
    "body": "Replying to [comment:32 rws]:\n> Computation would be 1. compute the indef. integral; 2. if succesful substitute. So not difficult I guess.\nHowever, we are getting unevaluated Integral objects, so nothing would be necessary IF #12438 would not change the parameters via `_normalize_integral_input()`, so a fix of that function would be necessary as well.",
    "created_at": "2014-12-16T15:14:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184291",
    "user": "@rwst"
}
```

Replying to [comment:32 rws]:
> Computation would be 1. compute the indef. integral; 2. if succesful substitute. So not difficult I guess.
However, we are getting unevaluated Integral objects, so nothing would be necessary IF #12438 would not change the parameters via `_normalize_integral_input()`, so a fix of that function would be necessary as well.



---

archive/issue_comments_184292.json:
```json
{
    "body": "> The indefinite integral value at the given point.\nYeah, I never know what to do with this - even though there is no \"the\" indefinite integral most systems just return a convenient one.  I think that there is a problem with actually having this syntax, though, because in general there are lots of times (esp. with complicated trig stuff) that the integral you get before simplifying is one thing, the one you get if you simplify or do some trig expansion first is different, **and** they differ by a non-zero constant!  It would be very bad to have\n\n```\nsage: F(x) = complicated stuff\nsage: integral(f, x, 0, hold=True).simplify()\n0\nsage: integral(f.some_simplification_routine(), x, 0, hold=True).simplify()\n1/2\n```\n\n\nSee also #13221 for the thought process behind #12438, though hopefully without too much of a hack it would be possible to support both, if that were desired.",
    "created_at": "2014-12-16T15:20:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184292",
    "user": "@kcrisman"
}
```

> The indefinite integral value at the given point.
Yeah, I never know what to do with this - even though there is no "the" indefinite integral most systems just return a convenient one.  I think that there is a problem with actually having this syntax, though, because in general there are lots of times (esp. with complicated trig stuff) that the integral you get before simplifying is one thing, the one you get if you simplify or do some trig expansion first is different, **and** they differ by a non-zero constant!  It would be very bad to have

```
sage: F(x) = complicated stuff
sage: integral(f, x, 0, hold=True).simplify()
0
sage: integral(f.some_simplification_routine(), x, 0, hold=True).simplify()
1/2
```


See also #13221 for the thought process behind #12438, though hopefully without too much of a hack it would be possible to support both, if that were desired.



---

archive/issue_comments_184293.json:
```json
{
    "body": "I would argue there is actually no scenario where Sympy would return such an antiderivative unevaluated when asked from Sage for an integral, just because #12438 rewrites the parameters *before* handing it to Sympy with `algorithm='sympy'`.\n\nSo, we do not want it, we won't get it. Please open an enhancement ticket if you think it's a necessary feature. Please review.",
    "created_at": "2014-12-16T15:36:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184293",
    "user": "@rwst"
}
```

I would argue there is actually no scenario where Sympy would return such an antiderivative unevaluated when asked from Sage for an integral, just because #12438 rewrites the parameters *before* handing it to Sympy with `algorithm='sympy'`.

So, we do not want it, we won't get it. Please open an enhancement ticket if you think it's a necessary feature. Please review.



---

archive/issue_comments_184294.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-12-16T15:36:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184294",
    "user": "@rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_184295.json:
```json
{
    "body": "The SymPy integral at a point is used by the differential equation solver in some cases where it would otherwise have to introduce a new constant for the lower limit of integration (or use negative infinity, which might not even converge). There are some examples at http://docs.sympy.org/latest/modules/solvers/ode.html. The result always ends up being correct because there always ends up being a + C1 in the solution. The syntax was borrowed from Maple, which uses it for the same purpose. Note that this syntax was introduced (by me) before we had an unevaluated Subs object. If it had existed at the time, I probably would have just used it instead.",
    "created_at": "2014-12-16T17:29:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184295",
    "user": "asmeurer"
}
```

The SymPy integral at a point is used by the differential equation solver in some cases where it would otherwise have to introduce a new constant for the lower limit of integration (or use negative infinity, which might not even converge). There are some examples at http://docs.sympy.org/latest/modules/solvers/ode.html. The result always ends up being correct because there always ends up being a + C1 in the solution. The syntax was borrowed from Maple, which uses it for the same purpose. Note that this syntax was introduced (by me) before we had an unevaluated Subs object. If it had existed at the time, I probably would have just used it instead.



---

archive/issue_comments_184296.json:
```json
{
    "body": "Minor notes:\n* I think the first revision is `.p0`, not `.p1`, as Python counts starting at zero.  (Very minor note!)\n* You should have at least one example for a definite integral (the one in comment:13 is really slow, though).\n* Is it possible to have a multiple integral example, or is the point that Sympy might want to translate a multiple integral to Sage, but not vice versa?\n\nAnyway, this is fine and hopefully in the long run will lead to more Sage-Sympy helping each other out, always a good thing.  Though I guess I'd feel most comfortable actually merging it once upstream has done so in their unstable, if they have such a concept (could be sage-pending until then).",
    "created_at": "2014-12-16T18:03:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184296",
    "user": "@kcrisman"
}
```

Minor notes:
* I think the first revision is `.p0`, not `.p1`, as Python counts starting at zero.  (Very minor note!)
* You should have at least one example for a definite integral (the one in comment:13 is really slow, though).
* Is it possible to have a multiple integral example, or is the point that Sympy might want to translate a multiple integral to Sage, but not vice versa?

Anyway, this is fine and hopefully in the long run will lead to more Sage-Sympy helping each other out, always a good thing.  Though I guess I'd feel most comfortable actually merging it once upstream has done so in their unstable, if they have such a concept (could be sage-pending until then).



---

archive/issue_comments_184297.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-12-17T09:29:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184297",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_184298.json:
```json
{
    "body": "Of course we didn't need an unsolvable integral for testing this. Setting pending. Can positive be set too?",
    "created_at": "2014-12-17T09:32:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184298",
    "user": "@rwst"
}
```

Of course we didn't need an unsolvable integral for testing this. Setting pending. Can positive be set too?



---

archive/issue_comments_184299.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-12-17T13:38:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184299",
    "user": "@kcrisman"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_184300.json:
```json
{
    "body": "Oh, I guess we don't have to have an undoable one.  Though my preference would be to keep it so that it raises a doctest error when Sympy can do it, which will alert us to it :-) as well as dealing with the actual reported issue on the ticket, which is our usual practice.  That said, I understand the point of testing the underlying issue.  What do you think?\n\nJust waiting on testing this new patch for the other thing you asked about... okay!",
    "created_at": "2014-12-17T13:38:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184300",
    "user": "@kcrisman"
}
```

Oh, I guess we don't have to have an undoable one.  Though my preference would be to keep it so that it raises a doctest error when Sympy can do it, which will alert us to it :-) as well as dealing with the actual reported issue on the ticket, which is our usual practice.  That said, I understand the point of testing the underlying issue.  What do you think?

Just waiting on testing this new patch for the other thing you asked about... okay!



---

archive/issue_comments_184301.json:
```json
{
    "body": "I do get an unrelated error (also on develop) - ever seen this?\n\n```\n\nsage -t src/sage/symbolic/expression.pyx\n**********************************************************************\nFile \"src/sage/symbolic/expression.pyx\", line 10566, in sage.symbolic.expression.get_dynamic_class_for_function\nFailed example:\n    import sagenb.misc.support as s\nExpected nothing\nGot:\n    doctest:14: ImportWarning: Not importing directory '/Users/.../sage/local/lib/python2.7/site-packages/Babel-1.3-py2.7.egg/babel/localedata': missing __init__.py\n**********************************************************************\n```\n\nIt's probably related to my messing around with sagenb, no worries.",
    "created_at": "2014-12-17T13:41:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184301",
    "user": "@kcrisman"
}
```

I do get an unrelated error (also on develop) - ever seen this?

```

sage -t src/sage/symbolic/expression.pyx
**********************************************************************
File "src/sage/symbolic/expression.pyx", line 10566, in sage.symbolic.expression.get_dynamic_class_for_function
Failed example:
    import sagenb.misc.support as s
Expected nothing
Got:
    doctest:14: ImportWarning: Not importing directory '/Users/.../sage/local/lib/python2.7/site-packages/Babel-1.3-py2.7.egg/babel/localedata': missing __init__.py
**********************************************************************
```

It's probably related to my messing around with sagenb, no worries.



---

archive/issue_comments_184302.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2014-12-17T16:10:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184302",
    "user": "git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_184303.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2014-12-17T16:10:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184303",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_184304.json:
```json
{
    "body": "That was a good catch.",
    "created_at": "2014-12-17T16:15:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184304",
    "user": "@kcrisman"
}
```

That was a good catch.



---

archive/issue_comments_184305.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-12-17T16:15:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184305",
    "user": "@kcrisman"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_184306.json:
```json
{
    "body": "You can't just test integral(f(x), x), where f is an unevaluated function (Function('f') in SymPy)? SymPy will always return an unevaluated integral for that.",
    "created_at": "2014-12-18T03:53:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184306",
    "user": "asmeurer"
}
```

You can't just test integral(f(x), x), where f is an unevaluated function (Function('f') in SymPy)? SymPy will always return an unevaluated integral for that.



---

archive/issue_comments_184307.json:
```json
{
    "body": "> You can't just test integral(f(x), x), where f is an unevaluated function (Function('f') in SymPy)? SymPy will always return an unevaluated integral for that. \n\nAre you saying we *should* test the integrals that can't be solved to properly test this?  I don't think there is a test like this in the current patch.",
    "created_at": "2014-12-18T04:41:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184307",
    "user": "@kcrisman"
}
```

> You can't just test integral(f(x), x), where f is an unevaluated function (Function('f') in SymPy)? SymPy will always return an unevaluated integral for that. 

Are you saying we *should* test the integrals that can't be solved to properly test this?  I don't think there is a test like this in the current patch.



---

archive/issue_comments_184308.json:
```json
{
    "body": "Replying to [comment:45 kcrisman]:\n> > You can't just test integral(f(x), x), where f is an unevaluated function (Function('f') in SymPy)? SymPy will always return an unevaluated integral for that. \n> \n> Are you saying we *should* test the integrals that can't be solved to properly test this?  I don't think there is a test like this in the current patch.\nContrary, the code of this ticket is only invoked when SymPy returns an unevaluated integral. What he suggested was replacing `x` with `f(x)` (for clarity I guess).",
    "created_at": "2014-12-18T06:29:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184308",
    "user": "@rwst"
}
```

Replying to [comment:45 kcrisman]:
> > You can't just test integral(f(x), x), where f is an unevaluated function (Function('f') in SymPy)? SymPy will always return an unevaluated integral for that. 
> 
> Are you saying we *should* test the integrals that can't be solved to properly test this?  I don't think there is a test like this in the current patch.
Contrary, the code of this ticket is only invoked when SymPy returns an unevaluated integral. What he suggested was replacing `x` with `f(x)` (for clarity I guess).



---

archive/issue_comments_184309.json:
```json
{
    "body": "My point is just if you want to have an \"unsolvable\" integral that is the best one.",
    "created_at": "2014-12-18T06:46:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184309",
    "user": "asmeurer"
}
```

My point is just if you want to have an "unsolvable" integral that is the best one.



---

archive/issue_comments_184310.json:
```json
{
    "body": "Oh, that would need a `_sage_` method for `sympy.core.function.UndefinedFunction` as well. Let's do that, for completeness.",
    "created_at": "2014-12-18T08:20:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184310",
    "user": "@rwst"
}
```

Oh, that would need a `_sage_` method for `sympy.core.function.UndefinedFunction` as well. Let's do that, for completeness.



---

archive/issue_comments_184311.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2014-12-18T10:46:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184311",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_184312.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2014-12-18T10:46:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184312",
    "user": "git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_184313.json:
```json
{
    "body": "I presume that the latest commit, with its`class UndefinedFunction(FunctionClass):` is the equivalent of one of the changes in the same file at [the pull request](https://github.com/sympy/sympy/pull/8592/files), or does that need to be added upstream as well?\n\nGiven that asmeurer has also weighed in here, I think I am happy with accepting this before the pull request upstream formally joins in, though, so I'll give a positive review once I have a chance to test this a bit more (not this morning EST, my apologies).",
    "created_at": "2014-12-18T13:47:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184313",
    "user": "@kcrisman"
}
```

I presume that the latest commit, with its`class UndefinedFunction(FunctionClass):` is the equivalent of one of the changes in the same file at [the pull request](https://github.com/sympy/sympy/pull/8592/files), or does that need to be added upstream as well?

Given that asmeurer has also weighed in here, I think I am happy with accepting this before the pull request upstream formally joins in, though, so I'll give a positive review once I have a chance to test this a bit more (not this morning EST, my apologies).



---

archive/issue_comments_184314.json:
```json
{
    "body": "Replying to [comment:50 kcrisman]:\n> ... or does that need to be added upstream as well?\nYes, it's now added.",
    "created_at": "2014-12-18T15:59:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184314",
    "user": "@rwst"
}
```

Replying to [comment:50 kcrisman]:
> ... or does that need to be added upstream as well?
Yes, it's now added.



---

archive/issue_comments_184315.json:
```json
{
    "body": "Along these lines, we have\n\n```\nsage: integrate(integrate(integrate(f,x),y),z)\nintegrate(integrate(integrate(f(x, y, z), x), y), z)\n```\n\nbut\n\n```\nsage: var('y z')\n(y, z)\nsage: f = function('f',x,y,z)\nsage: f\nf(x, y, z)\nsage: integrate(integrate(integrate(f,x,algorithm='sympy'),y,algorithm='sympy'),z,algorithm='sympy')\n---------------------------------------------------------------------------\n<snip>\n    690             return f_sympy(*sympy.sympify(g, evaluate=False))\n    691         else:\n--> 692             raise NotImplementedError(\"SymPy function '%s' doesn't exist\" % f)\n    693 \n    694 sympy = SympyConverter()\n\nNotImplementedError: SymPy function 'f' doesn't exist\nsage: integrate(integrate(integrate(f,x),y),z)\n```\n\nPerhaps it would be good to fix that here, or elsewhere?\n\nBut I like that\n\n```\nsage: integrate(integrate(integrate(abs(x),x,algorithm='sympy'),y,algorithm='sympy'),z,algorithm='sympy')\nintegrate(y*z*abs(x), x)\nsage: integrate(integrate(integrate(abs(x*y*z),x,algorithm='sympy'),y,algorithm='sympy'),z,algorithm='sympy')\nintegrate(integrate(integrate(abs(x*y*z), x), y), z)\n```\n\nso otherwise I think we should be good to go.",
    "created_at": "2014-12-18T19:36:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184315",
    "user": "@kcrisman"
}
```

Along these lines, we have

```
sage: integrate(integrate(integrate(f,x),y),z)
integrate(integrate(integrate(f(x, y, z), x), y), z)
```

but

```
sage: var('y z')
(y, z)
sage: f = function('f',x,y,z)
sage: f
f(x, y, z)
sage: integrate(integrate(integrate(f,x,algorithm='sympy'),y,algorithm='sympy'),z,algorithm='sympy')
---------------------------------------------------------------------------
<snip>
    690             return f_sympy(*sympy.sympify(g, evaluate=False))
    691         else:
--> 692             raise NotImplementedError("SymPy function '%s' doesn't exist" % f)
    693 
    694 sympy = SympyConverter()

NotImplementedError: SymPy function 'f' doesn't exist
sage: integrate(integrate(integrate(f,x),y),z)
```

Perhaps it would be good to fix that here, or elsewhere?

But I like that

```
sage: integrate(integrate(integrate(abs(x),x,algorithm='sympy'),y,algorithm='sympy'),z,algorithm='sympy')
integrate(y*z*abs(x), x)
sage: integrate(integrate(integrate(abs(x*y*z),x,algorithm='sympy'),y,algorithm='sympy'),z,algorithm='sympy')
integrate(integrate(integrate(abs(x*y*z), x), y), z)
```

so otherwise I think we should be good to go.



---

archive/issue_comments_184316.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-12-19T09:46:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184316",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_184317.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-12-19T13:33:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184317",
    "user": "@kcrisman"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_184318.json:
```json
{
    "body": "Thanks, this is really a much more robust patch now.  I'm sure there are still some things we won't get right, but this goes a long ways toward better Sage-Sympy integration.  Just waiting on some basic tests for positive review.",
    "created_at": "2014-12-19T13:33:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184318",
    "user": "@kcrisman"
}
```

Thanks, this is really a much more robust patch now.  I'm sure there are still some things we won't get right, but this goes a long ways toward better Sage-Sympy integration.  Just waiting on some basic tests for positive review.



---

archive/issue_comments_184319.json:
```json
{
    "body": "Glad I ran the tests - this is a good one to have fail, though :-)\n\n```\n**********************************************************************\nFile \"src/sage/symbolic/function.pyx\", line 634, in sage.symbolic.function.Function._sympy_init_\nFailed example:\n    g(x)._sympy_()\nExpected:\n    Traceback (most recent call last):\n    ...\n    NotImplementedError: SymPy function 'gg' doesn't exist\nGot:\n    gg(x)\n**********************************************************************\n```\n\nI do love that we code errors in the tests, because it's always gratifying to see when someone has fixed one.  (Can you think of another way to test that error branch, incidentally? I have to admit I can't offhand, unless it's a (very unusual!) Sage symbolic function not in Sympy, maybe something number-theoretic, or maybe just a fake function?)",
    "created_at": "2014-12-19T13:52:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184319",
    "user": "@kcrisman"
}
```

Glad I ran the tests - this is a good one to have fail, though :-)

```
**********************************************************************
File "src/sage/symbolic/function.pyx", line 634, in sage.symbolic.function.Function._sympy_init_
Failed example:
    g(x)._sympy_()
Expected:
    Traceback (most recent call last):
    ...
    NotImplementedError: SymPy function 'gg' doesn't exist
Got:
    gg(x)
**********************************************************************
```

I do love that we code errors in the tests, because it's always gratifying to see when someone has fixed one.  (Can you think of another way to test that error branch, incidentally? I have to admit I can't offhand, unless it's a (very unusual!) Sage symbolic function not in Sympy, maybe something number-theoretic, or maybe just a fake function?)



---

archive/issue_comments_184320.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2014-12-19T14:12:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184320",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_184321.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2014-12-19T14:12:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184321",
    "user": "git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_184322.json:
```json
{
    "body": "Thanks for all the work here.",
    "created_at": "2014-12-19T14:18:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184322",
    "user": "@kcrisman"
}
```

Thanks for all the work here.



---

archive/issue_comments_184323.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-12-19T14:18:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184323",
    "user": "@kcrisman"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_184324.json:
```json
{
    "body": "Thanks for the review.",
    "created_at": "2014-12-19T14:19:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184324",
    "user": "@rwst"
}
```

Thanks for the review.



---

archive/issue_comments_184325.json:
```json
{
    "body": "PSA: Once you want the ticket merged you can set a milestone to something else than \"sage-pending\"",
    "created_at": "2015-01-29T15:50:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184325",
    "user": "@vbraun"
}
```

PSA: Once you want the ticket merged you can set a milestone to something else than "sage-pending"



---

archive/issue_comments_184326.json:
```json
{
    "body": "Thanks; in this case I think we are waiting for [https://github.com/sympy/sympy/pull/8817](https://github.com/sympy/sympy/pull/8817) to be merged in upstream unstable.",
    "created_at": "2015-01-29T16:02:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184326",
    "user": "@kcrisman"
}
```

Thanks; in this case I think we are waiting for [https://github.com/sympy/sympy/pull/8817](https://github.com/sympy/sympy/pull/8817) to be merged in upstream unstable.



---

archive/issue_comments_184327.json:
```json
{
    "body": "I have merged the upstream PR.",
    "created_at": "2015-01-29T17:22:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184327",
    "user": "asmeurer"
}
```

I have merged the upstream PR.



---

archive/issue_comments_184328.json:
```json
{
    "body": "Awesome, thanks.",
    "created_at": "2015-01-29T17:24:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184328",
    "user": "@kcrisman"
}
```

Awesome, thanks.



---

archive/issue_comments_184329.json:
```json
{
    "body": "Conflicts with #17493",
    "created_at": "2015-02-07T09:21:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184329",
    "user": "@mezzarobba"
}
```

Conflicts with #17493



---

archive/issue_comments_184330.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2015-02-07T13:41:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184330",
    "user": "git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_184331.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2015-02-07T13:41:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184331",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_184332.json:
```json
{
    "body": "Merged #14723. Please review fix.",
    "created_at": "2015-02-07T13:42:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184332",
    "user": "@rwst"
}
```

Merged #14723. Please review fix.



---

archive/issue_comments_184333.json:
```json
{
    "body": "The following test failure may be related to the changes in this ticket (no time to check right now, sorry).\n\n\n```\n**********************************************************************\nFile \"src/sage/tests/french_book/recequadiff.py\", line 387, in sage.tests.french_book.recequadiff\nFailed example:\n    rsolve(f, u(n), {u(0):-1,u(1):1})\nException raised:\n    Traceback (most recent call last):\n      File \"/home/marc/co/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 488, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/marc/co/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 850, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.tests.french_book.recequadiff[107]>\", line 1, in <module>\n        rsolve(f, u(n), {u(Integer(0)):-Integer(1),u(Integer(1)):Integer(1)})\n      File \"/home/marc/co/sage/local/lib/python2.7/site-packages/sympy/solvers/recurr.py\", line 733, in rsolve\n        \"'%s(%s+k)' expected, got '%s'\" % (y.func, n, h))\n    ValueError: 'u(n+k)' expected, got 'u(n + 1)'\n**********************************************************************\n```\n",
    "created_at": "2015-02-07T15:10:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184333",
    "user": "@mezzarobba"
}
```

The following test failure may be related to the changes in this ticket (no time to check right now, sorry).


```
**********************************************************************
File "src/sage/tests/french_book/recequadiff.py", line 387, in sage.tests.french_book.recequadiff
Failed example:
    rsolve(f, u(n), {u(0):-1,u(1):1})
Exception raised:
    Traceback (most recent call last):
      File "/home/marc/co/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 488, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/marc/co/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 850, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.tests.french_book.recequadiff[107]>", line 1, in <module>
        rsolve(f, u(n), {u(Integer(0)):-Integer(1),u(Integer(1)):Integer(1)})
      File "/home/marc/co/sage/local/lib/python2.7/site-packages/sympy/solvers/recurr.py", line 733, in rsolve
        "'%s(%s+k)' expected, got '%s'" % (y.func, n, h))
    ValueError: 'u(n+k)' expected, got 'u(n + 1)'
**********************************************************************
```




---

archive/issue_comments_184334.json:
```json
{
    "body": "I don't get this error. Please recheck.",
    "created_at": "2015-02-08T06:43:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184334",
    "user": "@rwst"
}
```

I don't get this error. Please recheck.



---

archive/issue_comments_184335.json:
```json
{
    "body": "Replying to [comment:67 rws]:\n> I don't get this error. Please recheck.\n\nApparently I had an older version of your branch. The problem goes away with the last version. Sorry for the noise.",
    "created_at": "2015-02-08T09:22:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184335",
    "user": "@mezzarobba"
}
```

Replying to [comment:67 rws]:
> I don't get this error. Please recheck.

Apparently I had an older version of your branch. The problem goes away with the last version. Sorry for the noise.



---

archive/issue_comments_184336.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-02-08T09:22:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184336",
    "user": "@mezzarobba"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_184337.json:
```json
{
    "body": "And now I've compiled a version of sage including all positively reviewed changes, and the test fails again. Do you see any other ticket that may be the cause the problem? I will also launch a brute force `git bisect`, but it may take a while to complete.",
    "created_at": "2015-02-08T13:49:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184337",
    "user": "@mezzarobba"
}
```

And now I've compiled a version of sage including all positively reviewed changes, and the test fails again. Do you see any other ticket that may be the cause the problem? I will also launch a brute force `git bisect`, but it may take a while to complete.



---

archive/issue_comments_184338.json:
```json
{
    "body": "Can only be a Sympy problem, or the way Sympy is used. Did you do `make` to include the patches from #17493 and #14723 into your Sage?",
    "created_at": "2015-02-08T14:08:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184338",
    "user": "@rwst"
}
```

Can only be a Sympy problem, or the way Sympy is used. Did you do `make` to include the patches from #17493 and #14723 into your Sage?



---

archive/issue_comments_184339.json:
```json
{
    "body": "Replying to [comment:70 rws]:\n> Can only be a Sympy problem, or the way Sympy is used.\n\nYup, that's why I thought the problem may come from this ticket.\n\n> Did you do `make` to include the patches from #17493 and #14723 into your Sage?\n\nYes.",
    "created_at": "2015-02-08T14:25:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184339",
    "user": "@mezzarobba"
}
```

Replying to [comment:70 rws]:
> Can only be a Sympy problem, or the way Sympy is used.

Yup, that's why I thought the problem may come from this ticket.

> Did you do `make` to include the patches from #17493 and #14723 into your Sage?

Yes.



---

archive/issue_comments_184340.json:
```json
{
    "body": "Replying to [comment:69 mmezzarobba]:\n> I will also launch a brute force `git bisect`, but it may take a while to complete.\n\nNo success with that, there are commits where sage fails to build or similar situations that make it a pain.\n\nIf I understand correctly, the `n` in `result = h.args[0].match(n + k)` (`recurr.py:727`) somehow ends up being different than the one in appearing in the argument of `h`, so that the match fails. I suspect there is a conversion from sympy to sage and back going on somewhere, but I have no idea how this all works...",
    "created_at": "2015-02-09T13:38:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184340",
    "user": "@mezzarobba"
}
```

Replying to [comment:69 mmezzarobba]:
> I will also launch a brute force `git bisect`, but it may take a while to complete.

No success with that, there are commits where sage fails to build or similar situations that make it a pain.

If I understand correctly, the `n` in `result = h.args[0].match(n + k)` (`recurr.py:727`) somehow ends up being different than the one in appearing in the argument of `h`, so that the match fails. I suspect there is a conversion from sympy to sage and back going on somewhere, but I have no idea how this all works...



---

archive/issue_comments_184341.json:
```json
{
    "body": "Can you attach here a diff against develop of your all-positive branch so that I can try to confirm your result at least?",
    "created_at": "2015-02-09T13:53:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184341",
    "user": "@rwst"
}
```

Can you attach here a diff against develop of your all-positive branch so that I can try to confirm your result at least?



---

archive/issue_comments_184342.json:
```json
{
    "body": "Replying to [comment:73 rws]:\n> Can you attach here a diff against develop of your all-positive branch so that I can try to confirm your result at least?\n\nI pushed to `u/mmezzarobba/tmp/sympy` a branch that contains all the commits I was playing with yesterday (if I remember correctly) plus some, and with which the test still fails. In the meantime I am rebuilding the current `trac/develop` plus the branch from this ticket...",
    "created_at": "2015-02-09T14:29:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184342",
    "user": "@mezzarobba"
}
```

Replying to [comment:73 rws]:
> Can you attach here a diff against develop of your all-positive branch so that I can try to confirm your result at least?

I pushed to `u/mmezzarobba/tmp/sympy` a branch that contains all the commits I was playing with yesterday (if I remember correctly) plus some, and with which the test still fails. In the meantime I am rebuilding the current `trac/develop` plus the branch from this ticket...



---

archive/issue_comments_184343.json:
```json
{
    "body": "Replying to [comment:74 mmezzarobba]:\n> Replying to [comment:73 rws]:\n> > Can you attach here a diff against develop of your all-positive branch so that I can try to confirm your result at least?\n> \n> I pushed to `u/mmezzarobba/tmp/sympy` a branch that contains all the commits I was playing with yesterday (if I remember correctly) plus some, and with which the test still fails. In the meantime I am rebuilding the current `trac/develop` plus the branch from this ticket...\n\n...and the test still fails with that build, even after `./sage -i -f sympy ; make build`.",
    "created_at": "2015-02-09T14:39:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184343",
    "user": "@mezzarobba"
}
```

Replying to [comment:74 mmezzarobba]:
> Replying to [comment:73 rws]:
> > Can you attach here a diff against develop of your all-positive branch so that I can try to confirm your result at least?
> 
> I pushed to `u/mmezzarobba/tmp/sympy` a branch that contains all the commits I was playing with yesterday (if I remember correctly) plus some, and with which the test still fails. In the meantime I am rebuilding the current `trac/develop` plus the branch from this ticket...

...and the test still fails with that build, even after `./sage -i -f sympy ; make build`.



---

archive/issue_comments_184344.json:
```json
{
    "body": "I don't think I can download your branch, keeps asking me for a password.",
    "created_at": "2015-02-09T15:17:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184344",
    "user": "@rwst"
}
```

I don't think I can download your branch, keeps asking me for a password.



---

archive/issue_comments_184345.json:
```json
{
    "body": "See this link, though:\nhttp://git.sagemath.org/sage.git/diff/?id=29e862a147f129c5694f5cbd83338826f9a9e468&h=u%2Fmmezzarobba%2Ftmp%2Fsympy",
    "created_at": "2015-02-09T15:19:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184345",
    "user": "@kcrisman"
}
```

See this link, though:
http://git.sagemath.org/sage.git/diff/?id=29e862a147f129c5694f5cbd83338826f9a9e468&h=u%2Fmmezzarobba%2Ftmp%2Fsympy



---

archive/issue_comments_184346.json:
```json
{
    "body": "Replying to [comment:76 rws]:\n> I don't think I can download your branch, keeps asking me for a password. \n\nI don't know what is going on, but in view of my previous comment, it doesn't matter...",
    "created_at": "2015-02-09T15:35:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184346",
    "user": "@mezzarobba"
}
```

Replying to [comment:76 rws]:
> I don't think I can download your branch, keeps asking me for a password. 

I don't know what is going on, but in view of my previous comment, it doesn't matter...



---

archive/issue_comments_184347.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-02-09T16:04:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184347",
    "user": "@mezzarobba"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_184348.json:
```json
{
    "body": "OK, it's definitely the integrate patch, i.e., this ticket (not the other).",
    "created_at": "2015-02-09T16:34:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184348",
    "user": "@rwst"
}
```

OK, it's definitely the integrate patch, i.e., this ticket (not the other).



---

archive/issue_comments_184349.json:
```json
{
    "body": "In Sympy master it works fine, maybe there is something with our `01_no-mpmath.patch`. I'd rather wait for sympy-0.7.7 which doesn't need it anymore.",
    "created_at": "2015-02-09T17:07:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184349",
    "user": "@rwst"
}
```

In Sympy master it works fine, maybe there is something with our `01_no-mpmath.patch`. I'd rather wait for sympy-0.7.7 which doesn't need it anymore.



---

archive/issue_comments_184350.json:
```json
{
    "body": "Summary:\n\nThe Sympy patch of this branch contains two hunks, one patches `integral.py`, the other `function.py`. The latter one adds a `_sage_` method to `AppliedUndef` but uses a deprecated call method. The added `_sage_` method is already there in sympy-1 but gets deleted by a patch in #20185 because it triggers the same error in #20185 as Marc reported here (I was too stupid to rebuild Sympy to see it). So the problem actually exists. However, without the patch this branch does not work.\n\nThe first part (the one for `integral.py`) is no longer necessary because it is in Sympy already.\n\nSo what needs to be done is to fix in Sympy and/or Sage the described error. It is investigated in #20185 and its dedicated ticket is #20204, so we depend on that.",
    "created_at": "2016-08-06T09:07:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184350",
    "user": "@rwst"
}
```

Summary:

The Sympy patch of this branch contains two hunks, one patches `integral.py`, the other `function.py`. The latter one adds a `_sage_` method to `AppliedUndef` but uses a deprecated call method. The added `_sage_` method is already there in sympy-1 but gets deleted by a patch in #20185 because it triggers the same error in #20185 as Marc reported here (I was too stupid to rebuild Sympy to see it). So the problem actually exists. However, without the patch this branch does not work.

The first part (the one for `integral.py`) is no longer necessary because it is in Sympy already.

So what needs to be done is to fix in Sympy and/or Sage the described error. It is investigated in #20185 and its dedicated ticket is #20204, so we depend on that.



---

archive/issue_comments_184351.json:
```json
{
    "body": "While trying to debug #23496, I noticed that assumptions are lost going to/from Sympy and Sage, which was causing different Sympy `Symbol`s to be created. This may cause some subtle problems at some point if we just work around the problem on #23496 instead of fixing it.",
    "created_at": "2017-09-02T16:48:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184351",
    "user": "@tscrim"
}
```

While trying to debug #23496, I noticed that assumptions are lost going to/from Sympy and Sage, which was causing different Sympy `Symbol`s to be created. This may cause some subtle problems at some point if we just work around the problem on #23496 instead of fixing it.



---

archive/issue_comments_184352.json:
```json
{
    "body": "All conversion problems were resolved in 8.1.rc0. The problematic integrals in this tickets, including the triple one, work now without any additional code. What remains for this ticket is to add doctests.",
    "created_at": "2017-11-09T08:17:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184352",
    "user": "@rwst"
}
```

All conversion problems were resolved in 8.1.rc0. The problematic integrals in this tickets, including the triple one, work now without any additional code. What remains for this ticket is to add doctests.



---

archive/issue_comments_184353.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-11-09T08:35:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184353",
    "user": "@rwst"
}
```

New commits:



---

archive/issue_comments_184354.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-11-09T08:35:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184354",
    "user": "@rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_184355.json:
```json
{
    "body": "Changing type from defect to task.",
    "created_at": "2017-11-09T08:35:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184355",
    "user": "@rwst"
}
```

Changing type from defect to task.



---

archive/issue_comments_184356.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-11-09T09:11:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184356",
    "user": "@tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_184357.json:
```json
{
    "body": "LGTM.",
    "created_at": "2017-11-09T09:11:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184357",
    "user": "@tscrim"
}
```

LGTM.



---

archive/issue_comments_184358.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-12-11T01:04:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14519#issuecomment-184358",
    "user": "@vbraun"
}
```

Resolution: fixed
