# Issue 19717: QQbar cleaning 1

Issue created by migration from https://trac.sagemath.org/ticket/19954

Original creator: vdelecroix

Original creation time: 2016-01-24 20:08:35

This is a series of ticket about `QQbar` cleaning. In this first one we:
 - get rid of `ANRootOfUnity` descriptor
 - get rid of special casing for 'zero', 'rootunity', 'imaginary'
 - move the 34-gon commented function as a doctest

By doing so we slow down the code for `minpoly` but this will be fixed in subsequent ticket.


---

Comment by vdelecroix created at 2016-01-24 20:18:11

New commits:


---

Comment by vdelecroix created at 2016-01-24 20:18:11

Changing status from new to needs_review.


---

Comment by chapoton created at 2016-02-02 20:28:08

failing doctests, see patchbot report


---

Comment by chapoton created at 2016-02-02 20:28:08

Changing status from needs_review to needs_work.


---

Comment by git created at 2016-02-03 12:19:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2016-02-03 12:19:39

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2016-02-03 14:21:22

Still one doctest failing


---

Comment by git created at 2016-02-03 14:25:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2016-02-03 14:27:45

I see. The doctest was dependent of execution order. I changed for a more neutral one.


---

Comment by chapoton created at 2016-02-03 19:46:40

I have found a typo:

```
Class to upport old unpickling
```


And I am a bit puzzled by the very complicated shape of the new results of the `sage_input` method.


---

Comment by vdelecroix created at 2016-02-03 20:44:46

The `sage_input` is just intended to reconstruct the object. It is the very same with

```
sage: A = identity_matrix(4)
sage: sage_input(A)
matrix(ZZ, [[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]])
```

the answer is hopefully not `identity_matrix(4)`!

Before this ticket, the algebraic numbers used to remember the way they were constructed. Which is a complete nonsense.


---

Comment by git created at 2016-02-03 20:46:59

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2016-02-05 21:43:22

the description at the top of the documentation still refers to


```
Algebraic numbers exist in one of the following forms:

a rational number
the product of a rational number and an n‘th root of unity
etc
```

The second line should be removed, no ?


---

Comment by git created at 2016-02-16 14:25:56

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2016-02-16 14:26:50

Right! I also remove functions relative to "gaussian" which no longer exists.


---

Comment by chapoton created at 2016-02-18 10:06:43

ok, this seems to be good to go.

One can note that there is the `UniversalCyclotomicField` for people only caring
about the abelian closure of `QQ`.


---

Comment by chapoton created at 2016-02-18 10:06:43

Changing status from needs_review to positive_review.


---

Comment by vdelecroix created at 2016-02-18 11:55:22

Thanks Frédéric!


---

Comment by vbraun created at 2016-02-19 21:36:49

Resolution: fixed
