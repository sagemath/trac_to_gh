# Issue 17502: enhance desolve output from separable ODEs

archive/issues_017502.json:
```json
{
    "body": "At the moment, `desolve` behaves like this even with trivial separable ODEs:\n\n```\nsage: t = var('t')\nsage: y=function('y')(t)\nsage: desolve(diff(y,t)-y^2,y)\n-1/y(t) == _C + t\nsage: desolve(diff(y,t)-y^2+y,y)\nlog(y(t) - 1) - log(y(t)) == _C + t\nsage: desolve(diff(y,t)-y^2-1,y)\narctan(y(t)) == _C + t\n```\n\nThey could be solved by substituting a variable for `y(t)` and calling `solve`. Only if there is no solution from `solve` the integrated equation should be given.\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/17739\n\n",
    "created_at": "2015-02-06T09:15:40Z",
    "labels": [
        "calculus",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.5",
    "title": "enhance desolve output from separable ODEs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17502",
    "user": "@rwst"
}
```
At the moment, `desolve` behaves like this even with trivial separable ODEs:

```
sage: t = var('t')
sage: y=function('y')(t)
sage: desolve(diff(y,t)-y^2,y)
-1/y(t) == _C + t
sage: desolve(diff(y,t)-y^2+y,y)
log(y(t) - 1) - log(y(t)) == _C + t
sage: desolve(diff(y,t)-y^2-1,y)
arctan(y(t)) == _C + t
```

They could be solved by substituting a variable for `y(t)` and calling `solve`. Only if there is no solution from `solve` the integrated equation should be given.


Issue created by migration from https://trac.sagemath.org/ticket/17739





---

archive/issue_comments_233746.json:
```json
{
    "body": "This would yield (doctest):\n\n```\nsage: t = var('t')\nsage: y=function('y')(t)\nsage: desolve(diff(y,t)-y^2,y)\n-1/(_C + t)\nsage: desolve(diff(y,t)-y^2+y,y)\n-1/(e^(_C + t) - 1)\nsage: desolve(diff(y,t)-y^2-1,y)\ntan(_C + t)\n```\n",
    "created_at": "2015-02-06T09:20:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17502",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17502#issuecomment-233746",
    "user": "@rwst"
}
```

This would yield (doctest):

```
sage: t = var('t')
sage: y=function('y')(t)
sage: desolve(diff(y,t)-y^2,y)
-1/(_C + t)
sage: desolve(diff(y,t)-y^2+y,y)
-1/(e^(_C + t) - 1)
sage: desolve(diff(y,t)-y^2-1,y)
tan(_C + t)
```




---

archive/issue_comments_233747.json:
```json
{
    "body": "Do we resolve this in Sage, Maxima, or both?",
    "created_at": "2015-02-06T09:22:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17502",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17502#issuecomment-233747",
    "user": "@rwst"
}
```

Do we resolve this in Sage, Maxima, or both?



---

archive/issue_comments_233748.json:
```json
{
    "body": "You should report this upstream, but maybe first to the email list, not as a bug.  Surely there must be a *reason* they report the solutions that way ... right?  (For instance, maybe this is \"more correct\" than something with solve that might lose a solution or something.  Though it's hard to see how that could happen in your first example!)",
    "created_at": "2015-02-06T15:55:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17502",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17502#issuecomment-233748",
    "user": "@kcrisman"
}
```

You should report this upstream, but maybe first to the email list, not as a bug.  Surely there must be a *reason* they report the solutions that way ... right?  (For instance, maybe this is "more correct" than something with solve that might lose a solution or something.  Though it's hard to see how that could happen in your first example!)



---

archive/issue_comments_233749.json:
```json
{
    "body": "Replying to [comment:3 kcrisman]:\n> You should report this upstream, but maybe first to the email list, not as a bug.  Surely there must be a *reason* they report the solutions that way ... right? \nIt appears not, see http://sourceforge.net/p/maxima/mailman/message/33364512/",
    "created_at": "2015-02-07T13:46:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17502",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17502#issuecomment-233749",
    "user": "@rwst"
}
```

Replying to [comment:3 kcrisman]:
> You should report this upstream, but maybe first to the email list, not as a bug.  Surely there must be a *reason* they report the solutions that way ... right? 
It appears not, see http://sourceforge.net/p/maxima/mailman/message/33364512/



---

archive/issue_comments_233750.json:
```json
{
    "body": "So, the inconsistency is in Sage, which removes 'y==' from the results that have it, perhaps to facilitate further usage of the expression.\n\n```\n    if is_SymbolicEquation(soln) and soln.lhs() == dvar:\n        # Remark: Here we do not check that the right hand side does not depend on dvar.\n        # This probably will not hapen for soutions obtained via ode2, anyway.\n        soln = soln.rhs()\n```\n\nWe could now either remove the snippet, in order to always get an equation, or always try to solve for `dvar` and return an equation only when no solution is found.",
    "created_at": "2015-02-09T17:18:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17502",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17502#issuecomment-233750",
    "user": "@rwst"
}
```

So, the inconsistency is in Sage, which removes 'y==' from the results that have it, perhaps to facilitate further usage of the expression.

```
    if is_SymbolicEquation(soln) and soln.lhs() == dvar:
        # Remark: Here we do not check that the right hand side does not depend on dvar.
        # This probably will not hapen for soutions obtained via ode2, anyway.
        soln = soln.rhs()
```

We could now either remove the snippet, in order to always get an equation, or always try to solve for `dvar` and return an equation only when no solution is found.
