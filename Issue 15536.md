# Issue 15536: Build ATLAS on ARM

Issue created by migration from https://trac.sagemath.org/ticket/15773

Original creator: vbraun

Original creation time: 2014-02-01 16:31:09

CC:  jpflori dimpase snark leif




---

Comment by vbraun created at 2014-02-01 16:40:58

New commits:


---

Comment by vbraun created at 2014-02-01 16:40:58

Changing component from PLEASE CHANGE to build.


---

Comment by vbraun created at 2014-02-01 16:40:58

Changing type from PLEASE CHANGE to defect.


---

Comment by dimpase created at 2014-02-01 18:25:16

in `CONFIG/src/atlcomp.txt` we see

```
# ARM defaults
#
MACH=ARMv7 OS=ALL LVL=1000 COMPS=xcc
   'gcc' '-mcpu=cortex-a8 -O1 -mfpu=vfpv3 -mfloat-abi=softfp '
MACH=ARMv7 OS=ALL LVL=1000 COMPS=smc,skc,gcc,icc
   'gcc' '-O1 -mcpu=cortex-a8 -mtune=cortex-a8 -mfpu=vfpv3 -mfloat-abi=softfp -fno-expensive-optimizations'
MACH=ARMv7 OS=ALL LVL=1000 COMPS=dmc,dkc
   'gcc' '-O1 -mcpu=cortex-a8 -mtune=cortex-a8 -mfpu=vfpv3 -mfloat-abi=softfp -fno-schedule-insns2'
MACH=ARMv7 OS=ALL LVL=1000 COMPS=f77
   'gfortran' '-mcpu=cortex-a8 -mfpu=vfpv3 -mfloat-abi=softfp -O'
```

i.e. `mfloat` is always set to `soft`. But on this machine (and on more and more modern ARM chips, I gather) it is `hard`. So this is why, I guess, you get that error.
I suppose a proper detection of `mfloat-abi` should be added, unless upstream already did so.


---

Comment by vbraun created at 2014-02-01 18:26:51

ATLAS 3.11.22 switched to hardfp as default, for the record.


---

Comment by vbraun created at 2014-08-31 13:20:28

Changing status from new to needs_review.


---

Comment by vbraun created at 2014-08-31 13:20:28

I managed to compile atlas-3.10.1.20140210 on that machine...


---

Comment by dimpase created at 2014-08-31 15:10:48

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2014-08-31 15:10:48

in June I tried compiling atlas3.11.28.tar.bz2 there, and it did work. I was wondering what to do with this...


---

Comment by vbraun created at 2014-08-31 17:45:31

Resolution: fixed
