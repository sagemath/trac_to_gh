# Issue 19193: Update Jmol release to use new security certificate

Issue created by migration from https://trac.sagemath.org/ticket/19430

Original creator: gutow

Original creation time: 2015-10-17 12:55:33

CC:  kcrisman was

Keywords: Jmol, java

A mistake at the certificate authority used by Jmol has revoked the old security certificate for Jmol.  This means that the java versions older than 14.4.0_2015.10.14 will not work in any browsers.  Since we default to the javascript version, this is not a disaster but may cause problems for those using complicated 3D.

New Jmol/JSmol will need testing.  Hopefully, this will just require packaging the new Jmol/JSmol.


---

Comment by novoselt created at 2016-07-24 22:16:28

New commits:


---

Comment by novoselt created at 2016-07-24 22:16:28

Changing component from notebook to packages: standard.


---

Comment by novoselt created at 2016-07-24 22:25:54

Changing status from new to needs_review.


---

Comment by novoselt created at 2016-07-24 22:36:43

And in case SMC is not quite working, an alternative link https://www.dropbox.com/s/rkrvybyyh5zuv5z/jmol-14.6.1_2016.07.11.tar.bz2?dl=0


---

Comment by git created at 2016-07-25 21:49:18

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by novoselt created at 2016-07-25 21:57:01

Since it does not have to depend on #20933 and that one needs to be updated, I've rebased.


---

Comment by mkoeppe created at 2016-07-26 07:03:33

The updated package seems to work for me; but #20978 still doesn't work with the new version.


---

Comment by mkoeppe created at 2016-07-26 07:06:00

Changing status from needs_review to positive_review.


---

Comment by novoselt created at 2016-07-26 18:45:10

Thank you for reviewing!

I've seen #20978, but I don't really care about Java version for a few years - even when it works it is annoying to keep pressing confirmations and then of course there is no way to save it on campus computers. My main motivation for this upgrade having the PHP script included.


---

Comment by vbraun created at 2016-07-26 21:49:24

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2016-07-26 21:49:24

I can't download it:
`Error opening 'jmol-14.6.1_2016.07.11.tar.bz2' -- "Traceback (most recent call last):\n File \"/usr/local/bin/smc-compute\", line 9, in \n load_entry_point('smc-pyutil==1.1', 'console_scripts', 'smc-compute')()\n File \"/usr/local/lib/python2.7/dist-packages/smc_pyutil/smc_compute.py\", line 1016, in main\n args.func(args)\n File \"/usr/local/lib/python2.7/dist-packages/smc_pyutil/smc_compute.py\", line 886, in g\n result = getattr(Project(project_id=project_id, dev=args.dev, projects=args.projects, single=args.single), function)(**kwds)\n File \"/usr/local/lib/python2.7/dist-packages/smc_pyutil/smc_compute.py\", line 681, in read_file\n raise RuntimeError(\"path (=%s) must be at most %s bytes, but it is %s bytes\"%(path, maxsize, size))\nRuntimeError: path (=jmol-14.6.1_2016.07.11.tar.bz2) must be at most 20000000 bytes, but it is 38106981 bytes\n"`


---

Comment by novoselt created at 2016-07-26 22:06:36

How about this one?
https://www.dropbox.com/s/rkrvybyyh5zuv5z/jmol-14.6.1_2016.07.11.tar.bz2?dl=0


---

Comment by mkoeppe created at 2016-07-26 22:11:05

the one from dropbox is what I reviewed. The other gave me a checksum error


---

Comment by novoselt created at 2016-07-26 22:35:36

I'll take the liberty of setting back to positive review since there is a confirmation that this link worked. I am already using this package in SageMathCell, so would be nice to have it in 7.3.


---

Comment by novoselt created at 2016-07-26 22:35:36

Changing status from needs_work to positive_review.


---

Comment by novoselt created at 2016-08-01 23:50:51

Apparently SageMathCloud link managed to propagate to the servers and it is now possible to "download" this new jmol with the following message in the package log

```
Found local metadata for jmol-14.6.1_2016.07.11.p0
Invalid checksum for cached file /home/sc_serv/sage/upstream/jmol-14.6.1_2016.07.11.tar.bz2, deleting
Attempting to download package jmol-14.6.1_2016.07.11.tar.bz2 from mirrors
http://mirrors.mit.edu/sage/spkg/upstream/jmol/jmol-14.6.1_2016.07.11.tar.bz2
[......................................................................]
Traceback (most recent call last):
  File "/home/sc_serv/sage/build/bin/sage-download-file", line 28, in <module>
    run_safe()
  File "/home/sc_serv/sage/build/bin/../sage_bootstrap/download/cmdline.py", line 115, in run_safe
    run()
  File "/home/sc_serv/sage/build/bin/../sage_bootstrap/download/cmdline.py", line 97, in run
    app.download_tarball(args.url_or_tarball, args.destination)
  File "/home/sc_serv/sage/build/bin/../sage_bootstrap/download/app.py", line 43, in download_tarball
    tarball.download()
  File "/home/sc_serv/sage/build/bin/../sage_bootstrap/tarball.py", line 163, in download
    raise ChecksumError('checksum does not match')
sage_bootstrap.tarball.ChecksumError: checksum does not match
```

and no clue what is wrong on the console:

```
make[2]: Leaving directory '/home/sc_serv/sage/build/make'
Makefile:839: recipe for target 'all' failed
make[1]: *** [all] Error 2
make[1]: Leaving directory '/home/sc_serv/sage/build/make'

real    0m7.713s
user    0m7.200s
sys     0m1.264s
***************************************************************
Error building Sage.

The following package(s) may have failed to build (not necessarily
during this run of 'make all'):

The build directory may contain configuration files and other potentially
helpful information. WARNING: if you now run 'make' again, the build
directory will, by default, be deleted. Set the environment variable
SAGE_KEEP_BUILT_SPKGS to 'yes' to prevent this.

Makefile:16: recipe for target 'all' failed
make: *** [all] Error 1
```

Is it possible to report for which package `make` returned an error?


---

Comment by vbraun created at 2016-08-07 20:01:40

Resolution: fixed
