# Issue 19193: Update Jmol release to use new security certificate

archive/issues_019193.json:
```json
{
    "body": "CC:  kcrisman was\n\nKeywords: Jmol, java\n\nA mistake at the certificate authority used by Jmol has revoked the old security certificate for Jmol.  This means that the java versions older than 14.4.0_2015.10.14 will not work in any browsers.\u00a0 Since we default to the javascript version, this is not a disaster but may cause problems for those using complicated 3D.\n\nNew Jmol/JSmol will need testing.\u00a0 Hopefully, this will just require packaging the new Jmol/JSmol.\n\nIssue created by migration from https://trac.sagemath.org/ticket/19430\n\n",
    "created_at": "2015-10-17T12:55:33Z",
    "labels": [
        "notebook",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.3",
    "title": "Update Jmol release to use new security certificate",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19193",
    "user": "gutow"
}
```
CC:  kcrisman was

Keywords: Jmol, java

A mistake at the certificate authority used by Jmol has revoked the old security certificate for Jmol.  This means that the java versions older than 14.4.0_2015.10.14 will not work in any browsers.  Since we default to the javascript version, this is not a disaster but may cause problems for those using complicated 3D.

New Jmol/JSmol will need testing.  Hopefully, this will just require packaging the new Jmol/JSmol.

Issue created by migration from https://trac.sagemath.org/ticket/19430





---

archive/issue_comments_263351.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-07-24T22:16:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19193#issuecomment-263351",
    "user": "novoselt"
}
```

New commits:



---

archive/issue_comments_263352.json:
```json
{
    "body": "Changing component from notebook to packages: standard.",
    "created_at": "2016-07-24T22:16:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19193#issuecomment-263352",
    "user": "novoselt"
}
```

Changing component from notebook to packages: standard.



---

archive/issue_comments_263353.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-07-24T22:25:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19193#issuecomment-263353",
    "user": "novoselt"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_263354.json:
```json
{
    "body": "And in case SMC is not quite working, an alternative link https://www.dropbox.com/s/rkrvybyyh5zuv5z/jmol-14.6.1_2016.07.11.tar.bz2?dl=0",
    "created_at": "2016-07-24T22:36:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19193#issuecomment-263354",
    "user": "novoselt"
}
```

And in case SMC is not quite working, an alternative link https://www.dropbox.com/s/rkrvybyyh5zuv5z/jmol-14.6.1_2016.07.11.tar.bz2?dl=0



---

archive/issue_comments_263355.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-07-25T21:49:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19193#issuecomment-263355",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_263356.json:
```json
{
    "body": "Since it does not have to depend on #20933 and that one needs to be updated, I've rebased.",
    "created_at": "2016-07-25T21:57:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19193#issuecomment-263356",
    "user": "novoselt"
}
```

Since it does not have to depend on #20933 and that one needs to be updated, I've rebased.



---

archive/issue_comments_263357.json:
```json
{
    "body": "The updated package seems to work for me; but #20978 still doesn't work with the new version.",
    "created_at": "2016-07-26T07:03:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19193#issuecomment-263357",
    "user": "mkoeppe"
}
```

The updated package seems to work for me; but #20978 still doesn't work with the new version.



---

archive/issue_comments_263358.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-07-26T07:06:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19193#issuecomment-263358",
    "user": "mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_263359.json:
```json
{
    "body": "Thank you for reviewing!\n\nI've seen #20978, but I don't really care about Java version for a few years - even when it works it is annoying to keep pressing confirmations and then of course there is no way to save it on campus computers. My main motivation for this upgrade having the PHP script included.",
    "created_at": "2016-07-26T18:45:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19193#issuecomment-263359",
    "user": "novoselt"
}
```

Thank you for reviewing!

I've seen #20978, but I don't really care about Java version for a few years - even when it works it is annoying to keep pressing confirmations and then of course there is no way to save it on campus computers. My main motivation for this upgrade having the PHP script included.



---

archive/issue_comments_263360.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2016-07-26T21:49:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19193#issuecomment-263360",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_263361.json:
```json
{
    "body": "I can't download it:\n`Error opening 'jmol-14.6.1_2016.07.11.tar.bz2' -- \"Traceback (most recent call last):\\n File \\\"/usr/local/bin/smc-compute\\\", line 9, in \\n load_entry_point('smc-pyutil==1.1', 'console_scripts', 'smc-compute')()\\n File \\\"/usr/local/lib/python2.7/dist-packages/smc_pyutil/smc_compute.py\\\", line 1016, in main\\n args.func(args)\\n File \\\"/usr/local/lib/python2.7/dist-packages/smc_pyutil/smc_compute.py\\\", line 886, in g\\n result = getattr(Project(project_id=project_id, dev=args.dev, projects=args.projects, single=args.single), function)(**kwds)\\n File \\\"/usr/local/lib/python2.7/dist-packages/smc_pyutil/smc_compute.py\\\", line 681, in read_file\\n raise RuntimeError(\\\"path (=%s) must be at most %s bytes, but it is %s bytes\\\"%(path, maxsize, size))\\nRuntimeError: path (=jmol-14.6.1_2016.07.11.tar.bz2) must be at most 20000000 bytes, but it is 38106981 bytes\\n\"`",
    "created_at": "2016-07-26T21:49:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19193#issuecomment-263361",
    "user": "vbraun"
}
```

I can't download it:
`Error opening 'jmol-14.6.1_2016.07.11.tar.bz2' -- "Traceback (most recent call last):\n File \"/usr/local/bin/smc-compute\", line 9, in \n load_entry_point('smc-pyutil==1.1', 'console_scripts', 'smc-compute')()\n File \"/usr/local/lib/python2.7/dist-packages/smc_pyutil/smc_compute.py\", line 1016, in main\n args.func(args)\n File \"/usr/local/lib/python2.7/dist-packages/smc_pyutil/smc_compute.py\", line 886, in g\n result = getattr(Project(project_id=project_id, dev=args.dev, projects=args.projects, single=args.single), function)(**kwds)\n File \"/usr/local/lib/python2.7/dist-packages/smc_pyutil/smc_compute.py\", line 681, in read_file\n raise RuntimeError(\"path (=%s) must be at most %s bytes, but it is %s bytes\"%(path, maxsize, size))\nRuntimeError: path (=jmol-14.6.1_2016.07.11.tar.bz2) must be at most 20000000 bytes, but it is 38106981 bytes\n"`



---

archive/issue_comments_263362.json:
```json
{
    "body": "How about this one?\nhttps://www.dropbox.com/s/rkrvybyyh5zuv5z/jmol-14.6.1_2016.07.11.tar.bz2?dl=0",
    "created_at": "2016-07-26T22:06:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19193#issuecomment-263362",
    "user": "novoselt"
}
```

How about this one?
https://www.dropbox.com/s/rkrvybyyh5zuv5z/jmol-14.6.1_2016.07.11.tar.bz2?dl=0



---

archive/issue_comments_263363.json:
```json
{
    "body": "the one from dropbox is what I reviewed. The other gave me a checksum error",
    "created_at": "2016-07-26T22:11:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19193#issuecomment-263363",
    "user": "mkoeppe"
}
```

the one from dropbox is what I reviewed. The other gave me a checksum error



---

archive/issue_comments_263364.json:
```json
{
    "body": "I'll take the liberty of setting back to positive review since there is a confirmation that this link worked. I am already using this package in SageMathCell, so would be nice to have it in 7.3.",
    "created_at": "2016-07-26T22:35:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19193#issuecomment-263364",
    "user": "novoselt"
}
```

I'll take the liberty of setting back to positive review since there is a confirmation that this link worked. I am already using this package in SageMathCell, so would be nice to have it in 7.3.



---

archive/issue_comments_263365.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2016-07-26T22:35:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19193#issuecomment-263365",
    "user": "novoselt"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_263366.json:
```json
{
    "body": "Apparently SageMathCloud link managed to propagate to the servers and it is now possible to \"download\" this new jmol with the following message in the package log\n\n```\nFound local metadata for jmol-14.6.1_2016.07.11.p0\nInvalid checksum for cached file /home/sc_serv/sage/upstream/jmol-14.6.1_2016.07.11.tar.bz2, deleting\nAttempting to download package jmol-14.6.1_2016.07.11.tar.bz2 from mirrors\nhttp://mirrors.mit.edu/sage/spkg/upstream/jmol/jmol-14.6.1_2016.07.11.tar.bz2\n[......................................................................]\nTraceback (most recent call last):\n  File \"/home/sc_serv/sage/build/bin/sage-download-file\", line 28, in <module>\n    run_safe()\n  File \"/home/sc_serv/sage/build/bin/../sage_bootstrap/download/cmdline.py\", line 115, in run_safe\n    run()\n  File \"/home/sc_serv/sage/build/bin/../sage_bootstrap/download/cmdline.py\", line 97, in run\n    app.download_tarball(args.url_or_tarball, args.destination)\n  File \"/home/sc_serv/sage/build/bin/../sage_bootstrap/download/app.py\", line 43, in download_tarball\n    tarball.download()\n  File \"/home/sc_serv/sage/build/bin/../sage_bootstrap/tarball.py\", line 163, in download\n    raise ChecksumError('checksum does not match')\nsage_bootstrap.tarball.ChecksumError: checksum does not match\n```\n\nand no clue what is wrong on the console:\n\n```\nmake[2]: Leaving directory '/home/sc_serv/sage/build/make'\nMakefile:839: recipe for target 'all' failed\nmake[1]: *** [all] Error 2\nmake[1]: Leaving directory '/home/sc_serv/sage/build/make'\n\nreal    0m7.713s\nuser    0m7.200s\nsys     0m1.264s\n***************************************************************\nError building Sage.\n\nThe following package(s) may have failed to build (not necessarily\nduring this run of 'make all'):\n\nThe build directory may contain configuration files and other potentially\nhelpful information. WARNING: if you now run 'make' again, the build\ndirectory will, by default, be deleted. Set the environment variable\nSAGE_KEEP_BUILT_SPKGS to 'yes' to prevent this.\n\nMakefile:16: recipe for target 'all' failed\nmake: *** [all] Error 1\n```\n\nIs it possible to report for which package `make` returned an error?",
    "created_at": "2016-08-01T23:50:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19193#issuecomment-263366",
    "user": "novoselt"
}
```

Apparently SageMathCloud link managed to propagate to the servers and it is now possible to "download" this new jmol with the following message in the package log

```
Found local metadata for jmol-14.6.1_2016.07.11.p0
Invalid checksum for cached file /home/sc_serv/sage/upstream/jmol-14.6.1_2016.07.11.tar.bz2, deleting
Attempting to download package jmol-14.6.1_2016.07.11.tar.bz2 from mirrors
http://mirrors.mit.edu/sage/spkg/upstream/jmol/jmol-14.6.1_2016.07.11.tar.bz2
[......................................................................]
Traceback (most recent call last):
  File "/home/sc_serv/sage/build/bin/sage-download-file", line 28, in <module>
    run_safe()
  File "/home/sc_serv/sage/build/bin/../sage_bootstrap/download/cmdline.py", line 115, in run_safe
    run()
  File "/home/sc_serv/sage/build/bin/../sage_bootstrap/download/cmdline.py", line 97, in run
    app.download_tarball(args.url_or_tarball, args.destination)
  File "/home/sc_serv/sage/build/bin/../sage_bootstrap/download/app.py", line 43, in download_tarball
    tarball.download()
  File "/home/sc_serv/sage/build/bin/../sage_bootstrap/tarball.py", line 163, in download
    raise ChecksumError('checksum does not match')
sage_bootstrap.tarball.ChecksumError: checksum does not match
```

and no clue what is wrong on the console:

```
make[2]: Leaving directory '/home/sc_serv/sage/build/make'
Makefile:839: recipe for target 'all' failed
make[1]: *** [all] Error 2
make[1]: Leaving directory '/home/sc_serv/sage/build/make'

real    0m7.713s
user    0m7.200s
sys     0m1.264s
***************************************************************
Error building Sage.

The following package(s) may have failed to build (not necessarily
during this run of 'make all'):

The build directory may contain configuration files and other potentially
helpful information. WARNING: if you now run 'make' again, the build
directory will, by default, be deleted. Set the environment variable
SAGE_KEEP_BUILT_SPKGS to 'yes' to prevent this.

Makefile:16: recipe for target 'all' failed
make: *** [all] Error 1
```

Is it possible to report for which package `make` returned an error?



---

archive/issue_comments_263367.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-08-07T20:01:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19193#issuecomment-263367",
    "user": "vbraun"
}
```

Resolution: fixed
