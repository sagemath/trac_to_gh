# Issue 33057: Ticket CI

Issue created by migration from https://trac.sagemath.org/ticket/33294

Original creator: vbraun

Original creation time: 2022-02-05 14:46:40

The aim of this ticket is to:
* add CI that runs on each ticket (using github actions)
* use self-hosted runner that is fast enough to build all tickets
* prevents tickets from being merged unless it succeeds
* add status badge to trac

The code from trac ticket will be pushed by an external script to a branch ticket/12345, and this will trigger the CI run.


---

Comment by git created at 2022-02-05 14:48:38

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by @tobiasdiez created at 2022-02-05 15:15:40

Just as a heads-up: something similar is done in #33263 (already ready for merge)


---

Comment by mkoeppe created at 2022-02-05 18:43:18

+1 on providing fast self-hosted runners if you have them

-1 on designing workflows that only can succeed on self-hosted runners

(I haven't looked at the yml)


---

Comment by git created at 2022-02-06 14:18:02

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2022-02-06 16:51:55

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by vbraun created at 2022-02-06 19:25:47

Full (not incremental) build + html docs + long tests takes about 50 mins

There are necessarily going to be some differences with a self-hosted runner, like
* No docker
* Use local fs cache (ccache and /upstream)
but what can be shared should, of course.


---

Comment by mkoeppe created at 2022-02-06 19:49:12

I'd suggest to put the script that provisions the runner next to the yml script, to eliminate the guesswork what may be installed on the runner.


---

Comment by git created at 2022-02-17 00:02:37

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mkoeppe created at 2022-02-17 20:20:07

Replying to [ticket:33294 vbraun]:
> The code from trac ticket will be pushed by an external script to a branch ticket/12345, and this will trigger the CI run.

https://github.com/sagemath/sagetrac-mirror already has all trac branches. Do you have a script already that would push branches that merge the trac branch into the current beta?
(related - #33113#comment:18)


---

Comment by git created at 2022-02-20 14:32:24

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by vbraun created at 2022-02-20 14:35:38

I'm working on a script to push the merged tickets to branches named `ticket/12354`, currently on https://github.com/vbraun/sage until I have worked out the kinks


---

Comment by git created at 2022-03-08 11:36:02

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2022-03-27 18:00:33

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2022-06-30 20:00:20

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2022-07-08 22:04:45

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
