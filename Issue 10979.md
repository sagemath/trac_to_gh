# Issue 10979: Add a cache for .list() method in FiniteEnumeratedSet

Issue created by migration from Trac.

Original creator: hivert

Original creation time: 2011-04-02 18:05:09

Assignee: sage-combinat

CC:  sage-combinat

Keywords: list FiniteEnumeratedSet cache

There are two way to get the list of the elements of a `FiniteEnumeratedSet`:

```
     list(FSet)
     FSet.list()
```

The first case uses `FSet.__iter__` which is slow in many practical case, for example because of deep `yield` recursion...

After a discussion with Nicolas, We decided the following: In the second case, we assume that there is a need for speed and therefore we take chance to cache the list.


---

Comment by hivert created at 2011-04-02 20:13:04

Changing status from new to needs_review.


---

Comment by hivert created at 2011-04-02 20:13:04

I tried the most elementary solution... It seems to work.

Please review,

Florent


---

Comment by hivert created at 2011-04-04 15:13:32

Here is an advanced solution. Please review.


---

Comment by hivert created at 2011-12-03 14:45:50

Changing assignee from sage-combinat to hivert.


---

Comment by hivert created at 2012-02-06 14:54:38

Changing keywords from "list FiniteEnumeratedSet cache" to "list FiniteEnumeratedSet cache Cernay2012".


---

Comment by nthiery created at 2012-02-09 00:31:57

Except for a timeout in sage/sandpiles/sandpile.py, all tests passed on sage-5.0.beta2 with the following patches applied::

```
trac_11003-folded.patch
trac_10998-categories-posets-nt.patch
trac_10670_integral_mobius_matrix_for_posets-fh.patch
trac_11382-subposet_to_vertex_speedup-fh.patch
trac_12476-lattice_join_matrix_speedup-fh.patch
trac_11118-finite_enumset_list_cache-fh.patch
```



---

Comment by nthiery created at 2012-02-09 00:31:57

Changing status from needs_review to positive_review.


---

Attachment


---

Comment by jdemeyer created at 2012-02-14 14:20:04

Resolution: fixed
