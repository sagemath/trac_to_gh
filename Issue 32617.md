# Issue 32617: search of doc pages is broken

archive/issues_032617.json:
```json
{
    "body": "when searching on https://doc.sagemath.org/html/en/reference/search.html?q=plot an error about a jQuery incompatibility causes it to break.\n\nIs this already reported? I just heard about this.\n\nIssue created by migration from https://trac.sagemath.org/ticket/32854\n\n",
    "created_at": "2021-11-11T09:14:10Z",
    "labels": [
        "documentation",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "search of doc pages is broken",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32617",
    "user": "@haraldschilly"
}
```
when searching on https://doc.sagemath.org/html/en/reference/search.html?q=plot an error about a jQuery incompatibility causes it to break.

Is this already reported? I just heard about this.

Issue created by migration from https://trac.sagemath.org/ticket/32854





---

archive/issue_comments_465218.json:
```json
{
    "body": "Duplicate of #29576?",
    "created_at": "2021-11-11T19:56:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32617",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32617#issuecomment-465218",
    "user": "@jhpalmieri"
}
```

Duplicate of #29576?



---

archive/issue_comments_465219.json:
```json
{
    "body": "Thank you, well, I don't think this is a duplicate, because I know that for the previous version the search worked (while producing those square bracket object output strings).\n\nThis time around, Thebe is actually breaking the code. So, IMHO, common solution to both tickets is to get rid of that library and make a new ticket to figure out how to add it back \"safely\", or to at least check what its current status is.",
    "created_at": "2021-11-12T08:10:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32617",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32617#issuecomment-465219",
    "user": "@haraldschilly"
}
```

Thank you, well, I don't think this is a duplicate, because I know that for the previous version the search worked (while producing those square bracket object output strings).

This time around, Thebe is actually breaking the code. So, IMHO, common solution to both tickets is to get rid of that library and make a new ticket to figure out how to add it back "safely", or to at least check what its current status is.



---

archive/issue_comments_465220.json:
```json
{
    "body": "here is the stacktrace I see\n\n![](https://cocalc.com/share/raw/d07330668a99873e2a5c6bd2531115b5514132fc/2021-11-12-thebe-crashing-search-doc.sagemath.org.png)",
    "created_at": "2021-11-12T08:12:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32617",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32617#issuecomment-465220",
    "user": "@haraldschilly"
}
```

here is the stacktrace I see

![](https://cocalc.com/share/raw/d07330668a99873e2a5c6bd2531115b5514132fc/2021-11-12-thebe-crashing-search-doc.sagemath.org.png)



---

archive/issue_comments_465221.json:
```json
{
    "body": "bump to 9.6",
    "created_at": "2022-01-29T08:58:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32617",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32617#issuecomment-465221",
    "user": "@fchapoton"
}
```

bump to 9.6



---

archive/issue_comments_465222.json:
```json
{
    "body": "For 9.5, the error is slightly different:\n\n![](https://cocalc.com/share/raw/f2792a71a6bbad8febe83c9f04dda7e2efaff3c9/2022-02-01-doc.sagemath.org-search-error.png)",
    "created_at": "2022-02-01T11:25:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32617",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32617#issuecomment-465222",
    "user": "@haraldschilly"
}
```

For 9.5, the error is slightly different:

![](https://cocalc.com/share/raw/f2792a71a6bbad8febe83c9f04dda7e2efaff3c9/2022-02-01-doc.sagemath.org-search-error.png)



---

archive/issue_comments_465223.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-02-10T12:39:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32617",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32617#issuecomment-465223",
    "user": "@kwankyu"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_465224.json:
```json
{
    "body": "In #33309, we turned off Thebe, fixing search box.",
    "created_at": "2022-02-10T12:39:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32617",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32617#issuecomment-465224",
    "user": "@kwankyu"
}
```

In #33309, we turned off Thebe, fixing search box.



---

archive/issue_comments_465225.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-02-13T17:48:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32617",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32617#issuecomment-465225",
    "user": "@mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_465226.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2022-02-26T18:53:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32617",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32617#issuecomment-465226",
    "user": "@mkoeppe"
}
```

Resolution: invalid
