# Issue 17323: Implement (quantum) Mobius algebras

archive/issues_017323.json:
```json
{
    "body": "Assignee: sage-combinat\n\nCC:  sage-combinat\n\nKeywords: posets, mobius algebra\n\nBased on *The Kazhdan-Lusztig polynomial of a matroid* by Ben Elias, Nicholas Proudfoot, and Max Wakefield by recently posted to the arXiv (1412.7408), this implements their results for general graded lattices. In particular, this implements the Mobius algebra, and it's q-deformation (which I've coined as the quantum Mobius algebra). This also implements KL polynomials for general graded posets.\n\nIn particular, you can use #14786 and recover the KL polynomials. However the code in its current state is quite slow (most of the time is spent constructing the digraphs for the posets), but faster implementations can be done on followup tickets.\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/17560\n\n",
    "created_at": "2014-12-28T04:49:24Z",
    "labels": [
        "combinatorics",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.10",
    "title": "Implement (quantum) Mobius algebras",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17323",
    "user": "@tscrim"
}
```
Assignee: sage-combinat

CC:  sage-combinat

Keywords: posets, mobius algebra

Based on *The Kazhdan-Lusztig polynomial of a matroid* by Ben Elias, Nicholas Proudfoot, and Max Wakefield by recently posted to the arXiv (1412.7408), this implements their results for general graded lattices. In particular, this implements the Mobius algebra, and it's q-deformation (which I've coined as the quantum Mobius algebra). This also implements KL polynomials for general graded posets.

In particular, you can use #14786 and recover the KL polynomials. However the code in its current state is quite slow (most of the time is spent constructing the digraphs for the posets), but faster implementations can be done on followup tickets.


Issue created by migration from https://trac.sagemath.org/ticket/17560





---

archive/issue_comments_230754.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-12-28T04:50:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17323#issuecomment-230754",
    "user": "@tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_230755.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-12-28T04:50:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17323#issuecomment-230755",
    "user": "@tscrim"
}
```

New commits:



---

archive/issue_comments_230756.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-01T03:01:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17323#issuecomment-230756",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_230757.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-08-09T12:23:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17323#issuecomment-230757",
    "user": "@fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_230758.json:
```json
{
    "body": "needs rebase, does not apply",
    "created_at": "2015-08-09T12:23:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17323#issuecomment-230758",
    "user": "@fchapoton"
}
```

needs rebase, does not apply



---

archive/issue_comments_230759.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-02T14:35:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17323#issuecomment-230759",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_230760.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-09-02T14:35:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17323#issuecomment-230760",
    "user": "@tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_230761.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-25T03:49:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17323#issuecomment-230761",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_230762.json:
```json
{
    "body": "Still need to play around with the code, once I wrap my head around everything, but a few preliminary comments:\n\n* E and C bases for quantum mobius algebras just say that they're bases for mobius algebras in the docstring (KL does specify quantum mobius algebra).\n* Throw in the word 'principal' when referring to `I_x` and `F^x` being the order ideal and filter associated to x, just to make it clear.\n* I think the assumptions related to `kazhdan_lusztig_polynomial()` need to be cleaned up some. The docstring says it's defined for a graded, bounded poset. The paper makes me think it should only be defined for geometric lattices (ie, corresponding to a matroid). And the code only checks to see if the poset is ranked.",
    "created_at": "2015-10-13T21:51:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17323#issuecomment-230762",
    "user": "@kevindilks"
}
```

Still need to play around with the code, once I wrap my head around everything, but a few preliminary comments:

* E and C bases for quantum mobius algebras just say that they're bases for mobius algebras in the docstring (KL does specify quantum mobius algebra).
* Throw in the word 'principal' when referring to `I_x` and `F^x` being the order ideal and filter associated to x, just to make it clear.
* I think the assumptions related to `kazhdan_lusztig_polynomial()` need to be cleaned up some. The docstring says it's defined for a graded, bounded poset. The paper makes me think it should only be defined for geometric lattices (ie, corresponding to a matroid). And the code only checks to see if the poset is ranked.



---

archive/issue_comments_230763.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-10-15T03:47:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17323#issuecomment-230763",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_230764.json:
```json
{
    "body": "Replying to [comment:8 kdilks]:\n> * E and C bases for quantum mobius algebras just say that they're bases for mobius algebras in the docstring (KL does specify quantum mobius algebra).\n\nFixed.\n\n> * Throw in the word 'principal' when referring to `I_x` and `F^x` being the order ideal and filter associated to x, just to make it clear.\n\nFixed.\n\n> * I think the assumptions related to `kazhdan_lusztig_polynomial()` need to be cleaned up some. The docstring says it's defined for a graded, bounded poset. The paper makes me think it should only be defined for geometric lattices (ie, corresponding to a matroid). And the code only checks to see if the poset is ranked.\n\nIf you go through their definitions, you find you just need these conditions (I confirmed this from the authors). I only need to check the ranked (graded) conditions because the finiteness guarantees bounded.",
    "created_at": "2015-10-15T03:57:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17323#issuecomment-230764",
    "user": "@tscrim"
}
```

Replying to [comment:8 kdilks]:
> * E and C bases for quantum mobius algebras just say that they're bases for mobius algebras in the docstring (KL does specify quantum mobius algebra).

Fixed.

> * Throw in the word 'principal' when referring to `I_x` and `F^x` being the order ideal and filter associated to x, just to make it clear.

Fixed.

> * I think the assumptions related to `kazhdan_lusztig_polynomial()` need to be cleaned up some. The docstring says it's defined for a graded, bounded poset. The paper makes me think it should only be defined for geometric lattices (ie, corresponding to a matroid). And the code only checks to see if the poset is ranked.

If you go through their definitions, you find you just need these conditions (I confirmed this from the authors). I only need to check the ranked (graded) conditions because the finiteness guarantees bounded.



---

archive/issue_comments_230765.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-10-16T15:10:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17323#issuecomment-230765",
    "user": "@fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_230766.json:
```json
{
    "body": "does not apply",
    "created_at": "2015-10-16T15:10:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17323#issuecomment-230766",
    "user": "@fchapoton"
}
```

does not apply



---

archive/issue_comments_230767.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-10-16T19:23:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17323#issuecomment-230767",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_230768.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-10-16T19:23:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17323#issuecomment-230768",
    "user": "@tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_230769.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-10-17T07:00:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17323#issuecomment-230769",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_230770.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-10-17T10:11:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17323#issuecomment-230770",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_230771.json:
```json
{
    "body": "I would consider having `R=ZZ` as a default for `mobius_algebra`. Otherwise, looks good, feel free to make that change if you want and set a positive review on my behalf.\n\nAlso, if the convention is going to be to use `moebius` instead of `mobius` in function names, then the existing mobius function will need to be changed.",
    "created_at": "2015-10-17T20:33:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17323#issuecomment-230771",
    "user": "@kevindilks"
}
```

I would consider having `R=ZZ` as a default for `mobius_algebra`. Otherwise, looks good, feel free to make that change if you want and set a positive review on my behalf.

Also, if the convention is going to be to use `moebius` instead of `mobius` in function names, then the existing mobius function will need to be changed.



---

archive/issue_comments_230772.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-10-17T21:36:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17323#issuecomment-230772",
    "user": "@tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_230773.json:
```json
{
    "body": "Replying to [comment:16 kdilks]:\n> I would consider having `R=ZZ` as a default for `mobius_algebra`. Otherwise, looks good, feel free to make that change if you want and set a positive review on my behalf.\n\nI would rather not set a default as we don't have any default rings for any algebra (at least as far as I remember). Thanks for doing the review.\n\n> Also, if the convention is going to be to use `moebius` instead of `mobius` in function names, then the existing mobius function will need to be changed.\n\nYea, we probably should do that on a followup ticket. (FYI, the reason I switched the name is because Moebius appears in more files and more often than Mobius.)",
    "created_at": "2015-10-17T21:36:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17323#issuecomment-230773",
    "user": "@tscrim"
}
```

Replying to [comment:16 kdilks]:
> I would consider having `R=ZZ` as a default for `mobius_algebra`. Otherwise, looks good, feel free to make that change if you want and set a positive review on my behalf.

I would rather not set a default as we don't have any default rings for any algebra (at least as far as I remember). Thanks for doing the review.

> Also, if the convention is going to be to use `moebius` instead of `mobius` in function names, then the existing mobius function will need to be changed.

Yea, we probably should do that on a followup ticket. (FYI, the reason I switched the name is because Moebius appears in more files and more often than Mobius.)



---

archive/issue_comments_230774.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-10-18T19:11:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17323",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17323#issuecomment-230774",
    "user": "@vbraun"
}
```

Resolution: fixed
