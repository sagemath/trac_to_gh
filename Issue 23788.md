# Issue 23788: Update simple autotools packages to use sdh_configure and related helpers

archive/issues_023788.json:
```json
{
    "body": "These are packages that use standard autoconf builds (configure && make && make install) that could be easily updated to use the corresponding helper functions, as explained in #24024.\n\nThis ticket updates a large number of packages, but the change to all of them is nearly identical.\n\nIssue created by migration from https://trac.sagemath.org/ticket/24025\n\n",
    "created_at": "2017-10-12T15:16:54Z",
    "labels": [
        "build",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "Update simple autotools packages to use sdh_configure and related helpers",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23788",
    "user": "embray"
}
```
These are packages that use standard autoconf builds (configure && make && make install) that could be easily updated to use the corresponding helper functions, as explained in #24024.

This ticket updates a large number of packages, but the change to all of them is nearly identical.

Issue created by migration from https://trac.sagemath.org/ticket/24025





---

archive/issue_comments_333251.json:
```json
{
    "body": "I'm going to check to see if there are any other open tickets this conflicts with before setting it ready for review.",
    "created_at": "2017-10-12T15:17:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333251",
    "user": "embray"
}
```

I'm going to check to see if there are any other open tickets this conflicts with before setting it ready for review.



---

archive/issue_comments_333252.json:
```json
{
    "body": "This is also based on a couple other pending tickets.",
    "created_at": "2017-10-12T15:19:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333252",
    "user": "embray"
}
```

This is also based on a couple other pending tickets.



---

archive/issue_comments_333253.json:
```json
{
    "body": "Note: we need to check the portability of `cp -L` on OS X which does not have GNU tools.",
    "created_at": "2017-10-12T19:21:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333253",
    "user": "jdemeyer"
}
```

Note: we need to check the portability of `cp -L` on OS X which does not have GNU tools.



---

archive/issue_comments_333254.json:
```json
{
    "body": "The man page for `cp` on OS X says:\n\n```\n-L    If the -R option is specified, all symbolic links are followed.\n```\n",
    "created_at": "2017-10-12T19:53:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333254",
    "user": "jhpalmieri"
}
```

The man page for `cp` on OS X says:

```
-L    If the -R option is specified, all symbolic links are followed.
```




---

archive/issue_comments_333255.json:
```json
{
    "body": "Looks good in principle, but I'm sure that there are details to be checked and fixed.",
    "created_at": "2017-10-12T20:55:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333255",
    "user": "jdemeyer"
}
```

Looks good in principle, but I'm sure that there are details to be checked and fixed.



---

archive/issue_comments_333256.json:
```json
{
    "body": "Replying to [comment:3 jdemeyer]:\n> Note: we need to check the portability of `cp -L` on OS X which does not have GNU tools.\n\nI did check that. Also that comes from #23781.  This ticket depends on 3 others so it would be best for those to be merged before reviewing this one.  This ticket *only* changes the `spkg-` scripts of some packages.  Note, you can always manually do a diff as well.",
    "created_at": "2017-10-13T08:31:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333256",
    "user": "embray"
}
```

Replying to [comment:3 jdemeyer]:
> Note: we need to check the portability of `cp -L` on OS X which does not have GNU tools.

I did check that. Also that comes from #23781.  This ticket depends on 3 others so it would be best for those to be merged before reviewing this one.  This ticket *only* changes the `spkg-` scripts of some packages.  Note, you can always manually do a diff as well.



---

archive/issue_comments_333257.json:
```json
{
    "body": "Replying to [comment:5 jdemeyer]:\n> Looks good in principle, but I'm sure that there are details to be checked and fixed.\n\nAre you?  I'll note that these changes are all extracted from #22509 which I'm working on breaking up into multiple smaller steps, but the branch in #22509 has already gone through quite a lot of testing.\n\nThe only thing I'm sure of is it's worth checking what open tickets this conflicts with, of which I'm sure there are some.",
    "created_at": "2017-10-13T08:33:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333257",
    "user": "embray"
}
```

Replying to [comment:5 jdemeyer]:
> Looks good in principle, but I'm sure that there are details to be checked and fixed.

Are you?  I'll note that these changes are all extracted from #22509 which I'm working on breaking up into multiple smaller steps, but the branch in #22509 has already gone through quite a lot of testing.

The only thing I'm sure of is it's worth checking what open tickets this conflicts with, of which I'm sure there are some.



---

archive/issue_comments_333258.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2017-10-26T13:41:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333258",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_333259.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-10-26T13:42:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333259",
    "user": "embray"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_333260.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-10-26T13:43:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333260",
    "user": "embray"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_333261.json:
```json
{
    "body": "Oops, rebase is messed up...",
    "created_at": "2017-10-26T13:43:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333261",
    "user": "embray"
}
```

Oops, rebase is messed up...



---

archive/issue_comments_333262.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-10-26T13:45:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333262",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_333263.json:
```json
{
    "body": "Okay, there we go.\n\nThis ticket unfortunately touches a large number of files, but I don't see a much better way to do it other than to create separate tickets for each package, which quickly becomes tedious.  The subset of packages updated by this ticket was specifically selected because they required no additional changes other than mechanical replacement of `./configure` with `sdh_configure` and so on (and in the case of brial, one use of `sdh_pip_install` as well).\n\nSome other packages will be addressed in followup tickets.",
    "created_at": "2017-10-26T13:48:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333263",
    "user": "embray"
}
```

Okay, there we go.

This ticket unfortunately touches a large number of files, but I don't see a much better way to do it other than to create separate tickets for each package, which quickly becomes tedious.  The subset of packages updated by this ticket was specifically selected because they required no additional changes other than mechanical replacement of `./configure` with `sdh_configure` and so on (and in the case of brial, one use of `sdh_pip_install` as well).

Some other packages will be addressed in followup tickets.



---

archive/issue_comments_333264.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-10-26T13:48:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333264",
    "user": "embray"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_333265.json:
```json
{
    "body": "One question remains whether we need to update the patch level on these packages.  I think it's a bit excessive, because the point of focusing on this subset of packages is that the replacement by the helper functions results in almost the exact same build scripts as before.  But I'm not outright opposed.",
    "created_at": "2017-10-26T13:51:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333265",
    "user": "embray"
}
```

One question remains whether we need to update the patch level on these packages.  I think it's a bit excessive, because the point of focusing on this subset of packages is that the replacement by the helper functions results in almost the exact same build scripts as before.  But I'm not outright opposed.



---

archive/issue_comments_333266.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-10-26T13:51:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333266",
    "user": "embray"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_333267.json:
```json
{
    "body": "Didn't mean to change the status.",
    "created_at": "2017-10-26T13:59:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333267",
    "user": "embray"
}
```

Didn't mean to change the status.



---

archive/issue_comments_333268.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-10-26T13:59:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333268",
    "user": "embray"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_333269.json:
```json
{
    "body": "That will clash with #24092 (which you happily reviewed). I am sorry, can you make it yet another dependency of this ticket?",
    "created_at": "2017-10-26T21:42:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333269",
    "user": "fbissey"
}
```

That will clash with #24092 (which you happily reviewed). I am sorry, can you make it yet another dependency of this ticket?



---

archive/issue_comments_333270.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-10-26T21:42:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333270",
    "user": "fbissey"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_333271.json:
```json
{
    "body": "Replying to [comment:15 fbissey]:\n> That will clash with #24092 (which you happily reviewed). I am sorry, can you make it yet another dependency of this ticket?\n\nSure, of course.  Thanks for pointing it out.  I'm trying to track down any other currently active tickets this might clash with.",
    "created_at": "2017-10-27T12:22:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333271",
    "user": "embray"
}
```

Replying to [comment:15 fbissey]:
> That will clash with #24092 (which you happily reviewed). I am sorry, can you make it yet another dependency of this ticket?

Sure, of course.  Thanks for pointing it out.  I'm trying to track down any other currently active tickets this might clash with.



---

archive/issue_comments_333272.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-27T12:38:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333272",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333273.json:
```json
{
    "body": "Fully incorporated fix from #24092.",
    "created_at": "2017-10-27T12:38:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333273",
    "user": "embray"
}
```

Fully incorporated fix from #24092.



---

archive/issue_comments_333274.json:
```json
{
    "body": "Okay--hard to be *exactly* sure, but I don't think there are any other imminent tickets this conflicts with, so the sooner it can be applied the better, if indeed it's acceptable.",
    "created_at": "2017-10-27T12:48:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333274",
    "user": "embray"
}
```

Okay--hard to be *exactly* sure, but I don't think there are any other imminent tickets this conflicts with, so the sooner it can be applied the better, if indeed it's acceptable.



---

archive/issue_comments_333275.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-10-27T12:48:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333275",
    "user": "embray"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_333276.json:
```json
{
    "body": "I would rather prefer to see all those packages receiving a version bump, to avoid trouble.\n\nAlso, some random quick comments:\n\n1. `libfplll`: conflicts with #24042: just postpone `libfplll` to a new ticket.\n\n2. `libpng`: I don't want to think about `$DESTDIR` for now, please revert that.\n\n3. `mpfr`: one `./configure` command is intentionally not checked I believe.\n\n4. `ppl`: just use `./configure` instead of `sdh_configure` if you don't want the functionality of `sdh_configure`.\n\n5. `zlib`: use `ZLIB_CONFIGURE` instead of `CONFIGUREFLAGS` to be consistent with other packages.\n\nIf you disagree with any of the above, I would much rather prefer to postpone the given package to a new ticket and only deal on this ticket with the packages where we agree. Otherwise we will never make progress.",
    "created_at": "2017-10-27T13:19:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333276",
    "user": "jdemeyer"
}
```

I would rather prefer to see all those packages receiving a version bump, to avoid trouble.

Also, some random quick comments:

1. `libfplll`: conflicts with #24042: just postpone `libfplll` to a new ticket.

2. `libpng`: I don't want to think about `$DESTDIR` for now, please revert that.

3. `mpfr`: one `./configure` command is intentionally not checked I believe.

4. `ppl`: just use `./configure` instead of `sdh_configure` if you don't want the functionality of `sdh_configure`.

5. `zlib`: use `ZLIB_CONFIGURE` instead of `CONFIGUREFLAGS` to be consistent with other packages.

If you disagree with any of the above, I would much rather prefer to postpone the given package to a new ticket and only deal on this ticket with the packages where we agree. Otherwise we will never make progress.



---

archive/issue_comments_333277.json:
```json
{
    "body": "Replying to [comment:21 jdemeyer]:\n> I would rather prefer to see all those packages receiving a version bump, to avoid trouble.\n\nOkay--that will probably introduce more potential conflicts though; e.g. with #23700.  I could postpone some of those, or help get those tickets done more quickly if possible...\n\n> Also, some random quick comments:\n> \n> 1. `libfplll`: conflicts with #24042: just postpone `libfplll` to a new ticket.\n\nI don't see any reason to postpone it to a new ticket.  In particular, since #24042 is already closed I can just merge it into this.\n \n> 2. `libpng`: I don't want to think about `$DESTDIR` for now, please revert that.\n\nOops--yes, my intention was to leave out anything to do with DESTDIR.  I missed that one.\n\n> 3. `mpfr`: one `./configure` command is intentionally not checked I believe.\n\nRight--I think originally I had that correct, but when I was checking this patch over I initially thought it was something I missed and updated it.  Now you've reminded me that it was intentionally allowed to fail.\n\n> 4. `ppl`: just use `./configure` instead of `sdh_configure` if you don't want the functionality of `sdh_configure`.\n\nThe functionality of `sdh_configure` isn't just the error checking.  But I'll see if there's a different approach I can take to that case that doesn't require a sub-shell.  Maybe I'll leave ppl and mpfr out of this ticket for now.\n\n> 5. `zlib`: use `ZLIB_CONFIGURE` instead of `CONFIGUREFLAGS` to be consistent with other packages.\n\n+1\n\n> If you disagree with any of the above, I would much rather prefer to postpone the given package to a new ticket and only deal on this ticket with the packages where we agree. Otherwise we will never make progress.\n\nAgreed--with the exception of `libfplll` where I'm not sure why you propose a separate ticket.",
    "created_at": "2017-10-27T14:01:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333277",
    "user": "embray"
}
```

Replying to [comment:21 jdemeyer]:
> I would rather prefer to see all those packages receiving a version bump, to avoid trouble.

Okay--that will probably introduce more potential conflicts though; e.g. with #23700.  I could postpone some of those, or help get those tickets done more quickly if possible...

> Also, some random quick comments:
> 
> 1. `libfplll`: conflicts with #24042: just postpone `libfplll` to a new ticket.

I don't see any reason to postpone it to a new ticket.  In particular, since #24042 is already closed I can just merge it into this.
 
> 2. `libpng`: I don't want to think about `$DESTDIR` for now, please revert that.

Oops--yes, my intention was to leave out anything to do with DESTDIR.  I missed that one.

> 3. `mpfr`: one `./configure` command is intentionally not checked I believe.

Right--I think originally I had that correct, but when I was checking this patch over I initially thought it was something I missed and updated it.  Now you've reminded me that it was intentionally allowed to fail.

> 4. `ppl`: just use `./configure` instead of `sdh_configure` if you don't want the functionality of `sdh_configure`.

The functionality of `sdh_configure` isn't just the error checking.  But I'll see if there's a different approach I can take to that case that doesn't require a sub-shell.  Maybe I'll leave ppl and mpfr out of this ticket for now.

> 5. `zlib`: use `ZLIB_CONFIGURE` instead of `CONFIGUREFLAGS` to be consistent with other packages.

+1

> If you disagree with any of the above, I would much rather prefer to postpone the given package to a new ticket and only deal on this ticket with the packages where we agree. Otherwise we will never make progress.

Agreed--with the exception of `libfplll` where I'm not sure why you propose a separate ticket.



---

archive/issue_comments_333278.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-27T14:22:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333278",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333279.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-27T14:24:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333279",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333280.json:
```json
{
    "body": "Also merged in #24042.",
    "created_at": "2017-10-27T14:25:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333280",
    "user": "embray"
}
```

Also merged in #24042.



---

archive/issue_comments_333281.json:
```json
{
    "body": "Jeroen, how does this sound to you?  I think I addressed all your comments--I excluded ppl and mpfr from this ticket for now, until I decide what to do there, and I have also removed updates to gc and curl in order to avoid conflicts, for now, with other tickets that update them.",
    "created_at": "2017-10-27T14:26:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333281",
    "user": "embray"
}
```

Jeroen, how does this sound to you?  I think I addressed all your comments--I excluded ppl and mpfr from this ticket for now, until I decide what to do there, and I have also removed updates to gc and curl in order to avoid conflicts, for now, with other tickets that update them.



---

archive/issue_comments_333282.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-31T15:13:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333282",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333283.json:
```json
{
    "body": "The problem here was a missing change to the definition of `sdh_configure` that I originally included in #22509.  This is part of the problem with taking a large commit that works fine and trying to chop it down piecemeal...",
    "created_at": "2017-10-31T15:15:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333283",
    "user": "embray"
}
```

The problem here was a missing change to the definition of `sdh_configure` that I originally included in #22509.  This is part of the problem with taking a large commit that works fine and trying to chop it down piecemeal...



---

archive/issue_comments_333284.json:
```json
{
    "body": "Replying to [comment:27 git]:\n> Branch pushed to git repo; I updated commit sha1. New commits:\n> ||[d094602](https://git.sagemath.org/sage.git/commit/?id=d09460226e0494a8c2f14ca40132dbd4ded77f54)||`Force the libdir option to $SAGE_LOCAL/lib for all packages that call sdh_configure`||\n\nI am wondering if this could be split and included quickly. That way, separately from a big push for all packages I and other can already start migrating when upgrading packages. \n\nFor example I am thinking on working on #22836 - it will conflict with this ticket. But instead of just upgrading I think I could use the opportunity to migrate. It would be more useful if the above commit was already available.",
    "created_at": "2017-11-08T22:57:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333284",
    "user": "fbissey"
}
```

Replying to [comment:27 git]:
> Branch pushed to git repo; I updated commit sha1. New commits:
> ||[d094602](https://git.sagemath.org/sage.git/commit/?id=d09460226e0494a8c2f14ca40132dbd4ded77f54)||`Force the libdir option to $SAGE_LOCAL/lib for all packages that call sdh_configure`||

I am wondering if this could be split and included quickly. That way, separately from a big push for all packages I and other can already start migrating when upgrading packages. 

For example I am thinking on working on #22836 - it will conflict with this ticket. But instead of just upgrading I think I could use the opportunity to migrate. It would be more useful if the above commit was already available.



---

archive/issue_comments_333285.json:
```json
{
    "body": "Let me rebase it and figure out what the issue is with building flint, which is still broken for some reason.  But I agree this should be high priority to merge.",
    "created_at": "2017-11-09T10:22:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333285",
    "user": "embray"
}
```

Let me rebase it and figure out what the issue is with building flint, which is still broken for some reason.  But I agree this should be high priority to merge.



---

archive/issue_comments_333286.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2017-11-09T10:22:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333286",
    "user": "embray"
}
```

Changing priority from major to critical.



---

archive/issue_comments_333287.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2017-11-10T12:58:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333287",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_333288.json:
```json
{
    "body": "It turns out that flint is not actually a real autoconf'd package, and has a hand-written custom `configure` script which doesn't support `--libdir`.\n\nI might do something about that, but in the meantime it should be dropped from this ticket.",
    "created_at": "2017-11-10T13:01:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333288",
    "user": "embray"
}
```

It turns out that flint is not actually a real autoconf'd package, and has a hand-written custom `configure` script which doesn't support `--libdir`.

I might do something about that, but in the meantime it should be dropped from this ticket.



---

archive/issue_comments_333289.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-11-12T08:38:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333289",
    "user": "jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_333290.json:
```json
{
    "body": "Squashed most commits together and reverted zlib.\n----\nNew commits:",
    "created_at": "2017-11-12T08:38:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333290",
    "user": "jdemeyer"
}
```

Squashed most commits together and reverted zlib.
----
New commits:



---

archive/issue_comments_333291.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2017-11-13T11:46:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333291",
    "user": "embray"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_333292.json:
```json
{
    "body": "Why \"reverted zlib\"?  I don't see any problems there.",
    "created_at": "2017-11-13T11:46:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333292",
    "user": "embray"
}
```

Why "reverted zlib"?  I don't see any problems there.



---

archive/issue_comments_333293.json:
```json
{
    "body": "Please don't unilaterally replace my branch with yours without discussion if it's making non-trivial changes.\n----\nNew commits:",
    "created_at": "2017-11-13T11:50:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333293",
    "user": "embray"
}
```

Please don't unilaterally replace my branch with yours without discussion if it's making non-trivial changes.
----
New commits:



---

archive/issue_comments_333294.json:
```json
{
    "body": "First of all, I think it is a bad idea to change a ticket back to positive_review just because of that question. As I explained in [comment:21], we have the most chances of actually making progress if we try to merge what we can and postpone more difficult packages.\n\nGiving positive_review to a part of a ticket which makes sense by itself is something that I have done before and I honestly don't see the problem.\n\nMy goal is to actually merge this ticket and I don't understand why you are going against that.",
    "created_at": "2017-11-13T11:53:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333294",
    "user": "jdemeyer"
}
```

First of all, I think it is a bad idea to change a ticket back to positive_review just because of that question. As I explained in [comment:21], we have the most chances of actually making progress if we try to merge what we can and postpone more difficult packages.

Giving positive_review to a part of a ticket which makes sense by itself is something that I have done before and I honestly don't see the problem.

My goal is to actually merge this ticket and I don't understand why you are going against that.



---

archive/issue_comments_333295.json:
```json
{
    "body": "Replying to [comment:35 embray]:\n> Why \"reverted zlib\"?\n\nThere looks to be an issue with quoting (`\"` quotes nested inside `\"` quotes). I thought I commented on this already, but I see now that I haven't. Anyway, I'm done with reviewing this ticket.",
    "created_at": "2017-11-13T11:59:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333295",
    "user": "jdemeyer"
}
```

Replying to [comment:35 embray]:
> Why "reverted zlib"?

There looks to be an issue with quoting (`"` quotes nested inside `"` quotes). I thought I commented on this already, but I see now that I haven't. Anyway, I'm done with reviewing this ticket.



---

archive/issue_comments_333296.json:
```json
{
    "body": "> Giving positive_review to a part of a ticket which makes sense by itself is something that I have done before and I honestly don't see the problem.\n\nBecause you made changes and then set it to \"positive review\" without consulting.  If anything you should have then set it to \"needs review\" so that I could review *your* changes.  Otherwise something that I didn't intend might end up getting merged.  It's just presumptuous.\n\nI don't know what issue with zlib you're talking about.  I can't reproduce it.  Maybe if there really is an issue it would be simpler for me to fix it than to just revert the change entirely.",
    "created_at": "2017-11-13T12:05:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333296",
    "user": "embray"
}
```

> Giving positive_review to a part of a ticket which makes sense by itself is something that I have done before and I honestly don't see the problem.

Because you made changes and then set it to "positive review" without consulting.  If anything you should have then set it to "needs review" so that I could review *your* changes.  Otherwise something that I didn't intend might end up getting merged.  It's just presumptuous.

I don't know what issue with zlib you're talking about.  I can't reproduce it.  Maybe if there really is an issue it would be simpler for me to fix it than to just revert the change entirely.



---

archive/issue_comments_333297.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-11-13T12:14:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333297",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_333298.json:
```json
{
    "body": "Replying to [comment:39 embray]:\n> Because you made changes and then set it to \"positive review\" without consulting.\n\nI wouldn't call it making changes. Essentially, you propose A, B, C and D and I agree with A, B and C but not with D. So instead of having a discussion about D, I simply say: let's merge A, B and C right now and postpone D. I don't see any problem here.",
    "created_at": "2017-11-13T12:16:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333298",
    "user": "jdemeyer"
}
```

Replying to [comment:39 embray]:
> Because you made changes and then set it to "positive review" without consulting.

I wouldn't call it making changes. Essentially, you propose A, B, C and D and I agree with A, B and C but not with D. So instead of having a discussion about D, I simply say: let's merge A, B and C right now and postpone D. I don't see any problem here.



---

archive/issue_comments_333299.json:
```json
{
    "body": "Changing status from needs_info to positive_review.",
    "created_at": "2017-11-13T12:16:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333299",
    "user": "embray"
}
```

Changing status from needs_info to positive_review.



---

archive/issue_comments_333300.json:
```json
{
    "body": "Ah, I see--you're talking about the double quotes inside the assignment of `ZLIB_CONFIGURE`.  You could've just said so.  Although it didn't seem to cause any harm it was obviously a mistake; a simple bug.  I've removed the `--includedir` flag entirely from that line since it was superfluous anyways.\n----\nNew commits:",
    "created_at": "2017-11-13T12:16:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333300",
    "user": "embray"
}
```

Ah, I see--you're talking about the double quotes inside the assignment of `ZLIB_CONFIGURE`.  You could've just said so.  Although it didn't seem to cause any harm it was obviously a mistake; a simple bug.  I've removed the `--includedir` flag entirely from that line since it was superfluous anyways.
----
New commits:



---

archive/issue_comments_333301.json:
```json
{
    "body": "Replying to [comment:41 jdemeyer]:\n> Replying to [comment:39 embray]:\n> > Because you made changes and then set it to \"positive review\" without consulting.\n> \n> I wouldn't call it making changes. Essentially, you propose A, B, C and D and I agree with A, B and C but not with D. So instead of having a discussion about D, I simply say: let's merge A, B and C right now and postpone D. I don't see any problem here.\n\nThere'd be less problem if some reasonable explanation were given.",
    "created_at": "2017-11-13T12:16:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333301",
    "user": "embray"
}
```

Replying to [comment:41 jdemeyer]:
> Replying to [comment:39 embray]:
> > Because you made changes and then set it to "positive review" without consulting.
> 
> I wouldn't call it making changes. Essentially, you propose A, B, C and D and I agree with A, B and C but not with D. So instead of having a discussion about D, I simply say: let's merge A, B and C right now and postpone D. I don't see any problem here.

There'd be less problem if some reasonable explanation were given.



---

archive/issue_comments_333302.json:
```json
{
    "body": "It's also sneaky since the change was rolled into a squashed commit.  In this case it could be very easy for me to miss, since I already have other branches where I've done further work on this.",
    "created_at": "2017-11-13T12:18:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333302",
    "user": "embray"
}
```

It's also sneaky since the change was rolled into a squashed commit.  In this case it could be very easy for me to miss, since I already have other branches where I've done further work on this.



---

archive/issue_comments_333303.json:
```json
{
    "body": "reviewer name, please",
    "created_at": "2017-11-15T12:21:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333303",
    "user": "chapoton"
}
```

reviewer name, please



---

archive/issue_comments_333304.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-12-02T23:36:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333304",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_333305.json:
```json
{
    "body": "merge conflict",
    "created_at": "2017-12-02T23:36:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333305",
    "user": "vbraun"
}
```

merge conflict



---

archive/issue_comments_333306.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2017-12-04T10:38:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333306",
    "user": "jdemeyer"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_333307.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-12-04T10:38:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333307",
    "user": "jdemeyer"
}
```

New commits:



---

archive/issue_comments_333308.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-12-11T01:04:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333308",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_333309.json:
```json
{
    "body": "Great!",
    "created_at": "2017-12-11T10:09:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333309",
    "user": "jdemeyer"
}
```

Great!



---

archive/issue_comments_333310.json:
```json
{
    "body": "I am confused - where are all these `sdh_make`, `sdh_confugure` etc scripts located ?",
    "created_at": "2018-01-06T12:46:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333310",
    "user": "dimpase"
}
```

I am confused - where are all these `sdh_make`, `sdh_confugure` etc scripts located ?



---

archive/issue_comments_333311.json:
```json
{
    "body": "facepalm - sdh==sage-dist-helpers, see #23160",
    "created_at": "2018-01-06T14:45:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23788#issuecomment-333311",
    "user": "dimpase"
}
```

facepalm - sdh==sage-dist-helpers, see #23160
