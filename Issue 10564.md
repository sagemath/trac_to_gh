# Issue 10564: Make polynomial over ZZ call FLINT for composition and evaluation

Issue created by migration from https://trac.sagemath.org/ticket/10617

Original creator: spancratz

Original creation time: 2011-01-13 01:47:24

Assignee: AlexGhitza

CC:  mhansen

Keywords: polynomial arithmetic

In Sage 4.6.0, 

```
sage: R.<x> = ZZ[]
sage: f = R.random_element(200)
sage: g = R.random_element(200)
sage: %time _ = f(g)
CPU times: user 102.61 s, sys: 4.47 s, total: 107.08 s
Wall time: 107.27 s
```



---

Comment by spancratz created at 2011-01-13 04:49:20

With the ticket applied,

```
sage: R.<x> = ZZ[]
sage: f = R.random_element(200)
sage: g = R.random_element(200)
sage: %time _ = f(g)
CPU times: user 4.19 s, sys: 0.16 s, total: 4.35 s
Wall time: 4.37 s
```


We also note the change in runtime taken for evaluating a polynomial at an integer.  With a vanilla 4.6.0, 

```
sage: R.<x> = ZZ[]
sage: f = R.random_element(degree=2048, x=2**1024)
sage: a = ZZ.random_element(x = 2**1024)
sage: %time _ = f(a)
CPU times: user 4.35 s, sys: 0.00 s, total: 4.35 s
Wall time: 4.36 s
```


```
sage: R.<x> = ZZ[]
sage: f = R.random_element(degree=2048, x=2**1024)
sage: a = ZZ.random_element(x = 2**1024)
sage: %time _ = f(a)
CPU times: user 0.22 s, sys: 0.00 s, total: 0.22 s
Wall time: 0.23 s
```



---

Comment by spancratz created at 2011-01-13 06:28:36

Apply only ``trac-10617.2.patch`` --- I forgot to mark the "replace" box.  Sebastian


---

Comment by spancratz created at 2011-01-13 06:34:47

Actually, I just had to re-upload the patch and this time I did remember to tick the "replace" box, so it's now

``trac-10617.patch``

again.  Sebastian


---

Comment by boothby created at 2011-01-13 22:57:24

Changing status from new to needs_review.


---

Comment by boothby created at 2011-01-13 22:58:19

Changing status from needs_review to positive_review.


---

Comment by boothby created at 2011-01-13 22:58:19

Works for me.


---

Comment by jdemeyer created at 2011-01-23 13:17:44

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2011-01-23 13:17:44

1. Please fill in your real names as Author/Reviewer
 1. The patch should be a proper hg changeset, i.e. created with `hg export tip` instead of `hg diff`.
 1. The patch should be rebased to sage-4.6.2.alpha1.


---

Comment by mhansen created at 2011-12-18 16:01:05

We should update this quickly after updating FLINT in Sage.


---

Attachment


---

Comment by mhansen created at 2012-05-28 05:33:21

Apply only trac_10617.patch


---

Comment by mhansen created at 2012-05-28 05:33:21

Changing status from needs_work to needs_review.


---

Comment by mhansen created at 2012-05-28 05:34:06

Changing status from needs_review to positive_review.


---

Comment by mhansen created at 2012-05-28 05:34:06

I've rebased the patch, and everything looks good.


---

Comment by jdemeyer created at 2012-06-18 10:22:17

Resolution: fixed
