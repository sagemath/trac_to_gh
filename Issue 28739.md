# Issue 28739: AssertionError in valuation()

Issue created by migration from https://trac.sagemath.org/ticket/28976

Original creator: saraedum

Original creation time: 2020-01-09 23:32:42

CC:  swewers cremona alexjbest dimpase


```
R.<x> = QQ[]
K.<theta_K> = NumberField(x^6 - 18*x^4 - 24*x^3 + 27*x^2 + 36*x - 6)
fp = K.fractional_ideal((2, -7/44*theta_K^5 + 19/44*theta_K^4 +
87/44*theta_K^3 - 87/44*theta_K^2 - 5/2*theta_K + 39/22))
print(fp.norm())               # yields 2
print(fp in K.primes_above(2)) # yields True
v = K.valuation(fp)            # raises AssertionError 
```


see https://groups.google.com/forum/#!topic/sage-nt/zEkLa-4cgys/discussion


---

Comment by saraedum created at 2020-04-19 06:25:45

Changing status from new to needs_review.


---

Comment by saraedum created at 2020-04-19 06:25:45

New commits:


---

Comment by saraedum created at 2020-04-19 06:29:04

Changing status from needs_review to needs_work.


---

Comment by git created at 2020-04-19 06:59:49

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-04-19 07:04:15

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by saraedum created at 2020-04-19 07:04:30

Changing status from needs_work to needs_review.


---

Comment by saraedum created at 2020-04-19 07:10:21

CCing the people who participated in the sage-nt/sage-devel threads.


---

Comment by vdelecroix created at 2020-04-23 16:44:42

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2020-04-24 22:28:16

Resolution: fixed
