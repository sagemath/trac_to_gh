# Issue 31040: Switching from --with-system-SPKG to --without-system-SPKG does not trigger rebuilds of dependent packages

Issue created by migration from https://trac.sagemath.org/ticket/31277

Original creator: mkoeppe

Original creation time: 2021-01-22 02:28:20

CC:  dimpase jhpalmieri mjo

As observed, for example, in #31267:
Build SPKG `readline`, build SPKG `singular` (which has the dependency on `readline`); then removing the SPKG `readline` and using the system readline does not trigger a rebuild of `singular`.

This is caused by a shortcoming of our build system: All system packages are represented by the target `$SAGE_LOCAL/var/lib/sage/installed/.dummy` - which is old.


---

Comment by mkoeppe created at 2021-02-13 20:51:01

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.
