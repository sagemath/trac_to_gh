# Issue 33817: Update documentation for EnumeratedFamily

archive/issues_033817.json:
```json
{
    "body": "CC:  tscrim\n\nKeywords: gsoc2022 documentation family\n\nThe current documentation implies that the index set must be finite. This is not the case:\n\n\n```\nsage: F = Family(ZZ)\nsage: type(F)\n<class 'sage.sets.family.EnumeratedFamily_with_category'>\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/34054\n\n",
    "created_at": "2022-06-22T19:32:51Z",
    "labels": [
        "PLEASE CHANGE",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "Update documentation for EnumeratedFamily",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33817",
    "user": "tkarn"
}
```
CC:  tscrim

Keywords: gsoc2022 documentation family

The current documentation implies that the index set must be finite. This is not the case:


```
sage: F = Family(ZZ)
sage: type(F)
<class 'sage.sets.family.EnumeratedFamily_with_category'>
```


Issue created by migration from https://trac.sagemath.org/ticket/34054





---

archive/issue_comments_480477.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-06-22T19:33:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33817#issuecomment-480477",
    "user": "tkarn"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_480478.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-06-23T00:25:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33817#issuecomment-480478",
    "user": "tscrim"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_480479.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to documentation.",
    "created_at": "2022-06-23T00:25:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33817#issuecomment-480479",
    "user": "tscrim"
}
```

Changing component from PLEASE CHANGE to documentation.



---

archive/issue_comments_480480.json:
```json
{
    "body": "I am not sure the documentation is wrong, but it might be a slight abuse of notation. In particular `|ZZ|` is aleph<sub>0</sub>, and aleph<sub>0</sub> - 1 = aleph<sub>0</sub> (well, this might make slightly more sense in terms of ordinals rather than cardinals). So it is saying it is indexed by `{0, 1, ...}`.\n\nNow your change definitely is wrong because it is not indexed by **Z** but by **N** (with 0) in the infinite case. Don't let this run for too long:\n\n```\nsage: F = Family(ZZ)\nsage: F[-1]\n```\n\nas the generic `unrank()` from the category doesn't protect against bad input (for infinite enuemrated sets, IMO, it should).",
    "created_at": "2022-06-23T00:25:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33817#issuecomment-480480",
    "user": "tscrim"
}
```

I am not sure the documentation is wrong, but it might be a slight abuse of notation. In particular `|ZZ|` is aleph<sub>0</sub>, and aleph<sub>0</sub> - 1 = aleph<sub>0</sub> (well, this might make slightly more sense in terms of ordinals rather than cardinals). So it is saying it is indexed by `{0, 1, ...}`.

Now your change definitely is wrong because it is not indexed by **Z** but by **N** (with 0) in the infinite case. Don't let this run for too long:

```
sage: F = Family(ZZ)
sage: F[-1]
```

as the generic `unrank()` from the category doesn't protect against bad input (for infinite enuemrated sets, IMO, it should).



---

archive/issue_comments_480481.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-08-10T00:54:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33817#issuecomment-480481",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_480482.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-10T00:55:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33817#issuecomment-480482",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_480483.json:
```json
{
    "body": "I changed this to reflect your comment about `ZZ[-1]`, and then saw that `_unrank_from_iterator` expects a positive rank, but does not check for it, so I added the check there.",
    "created_at": "2022-08-10T00:56:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33817#issuecomment-480483",
    "user": "tkarn"
}
```

I changed this to reflect your comment about `ZZ[-1]`, and then saw that `_unrank_from_iterator` expects a positive rank, but does not check for it, so I added the check there.



---

archive/issue_comments_480484.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-08-10T00:56:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33817#issuecomment-480484",
    "user": "tkarn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_480485.json:
```json
{
    "body": "There is no reason for a separate `TESTS::` block. I would also put the `ZZ` test below the `C` one to have better grouping of the tests.",
    "created_at": "2022-08-10T01:40:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33817#issuecomment-480485",
    "user": "tscrim"
}
```

There is no reason for a separate `TESTS::` block. I would also put the `ZZ` test below the `C` one to have better grouping of the tests.



---

archive/issue_comments_480486.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-10T15:14:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33817#issuecomment-480486",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_480487.json:
```json
{
    "body": "\n```\n+            if r < 0:\n+                raise ValueError(\"the value must be greater than or equal to 0\")\n```\n\nI'd suggest to change from \"value\" to \"rank\" here.\n\nOtherwise LGTM",
    "created_at": "2022-08-16T17:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33817#issuecomment-480487",
    "user": "mkoeppe"
}
```


```
+            if r < 0:
+                raise ValueError("the value must be greater than or equal to 0")
```

I'd suggest to change from "value" to "rank" here.

Otherwise LGTM



---

archive/issue_comments_480488.json:
```json
{
    "body": "Maybe it would also be a good idea to check that it's an integer?",
    "created_at": "2022-08-16T17:21:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33817#issuecomment-480488",
    "user": "mkoeppe"
}
```

Maybe it would also be a good idea to check that it's an integer?



---

archive/issue_comments_480489.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-17T19:47:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33817#issuecomment-480489",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_480490.json:
```json
{
    "body": "I would rephrase \"must be between %s and %s inclusive\" -> \"must be in the range from %s to %s\"",
    "created_at": "2022-08-17T20:07:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33817#issuecomment-480490",
    "user": "mkoeppe"
}
```

I would rephrase "must be between %s and %s inclusive" -> "must be in the range from %s to %s"



---

archive/issue_comments_480491.json:
```json
{
    "body": "I know that this is not from your ticket, but this:\n\n```\n             counter = 0\n             for u in self:\n                 if counter == r:\n                     return u\n                 counter += 1\n```\n\ncould be rewritten using `enumerate`",
    "created_at": "2022-08-17T20:08:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33817#issuecomment-480491",
    "user": "mkoeppe"
}
```

I know that this is not from your ticket, but this:

```
             counter = 0
             for u in self:
                 if counter == r:
                     return u
                 counter += 1
```

could be rewritten using `enumerate`



---

archive/issue_comments_480492.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-17T20:43:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33817#issuecomment-480492",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_480493.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-17T21:04:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33817#issuecomment-480493",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_480494.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-08-18T00:35:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33817#issuecomment-480494",
    "user": "mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_480495.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2022-08-25T20:23:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33817#issuecomment-480495",
    "user": "mkoeppe"
}
```

Changing priority from major to minor.



---

archive/issue_comments_480496.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-08-30T19:04:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33817#issuecomment-480496",
    "user": "vbraun"
}
```

Resolution: fixed
