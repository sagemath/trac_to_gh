# Issue 29576: Sage documentation search page broken

archive/issues_029339.json:
```json
{
    "assignees": [],
    "body": "Go to \nhttps://doc.sagemath.org/html/en/reference/search.html?q=modules\n\nand see the many [object Object] labels throughout the page.\n\nCC:  @jcamp0x2a @kwankyu @haraldschilly @slel @williamstein\n\nKeywords: **online_documentation, search, js**\n\nBranch/Commit: **[u/klee/29576](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/29576) @ [74d1330](https://github.com/sagemath/sagetrac-mirror/commit/74d1330a311ad7142b096f23838edca8c8e98f93)**\n\nReviewer: **Matthias Koeppe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29576_\n\n",
    "closed_at": "2022-02-26T18:53:04Z",
    "created_at": "2020-04-25T07:52:49Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/component%3A%20documentation",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Sage documentation search page broken",
    "type": "issue",
    "updated_at": "2022-02-26T18:53:04Z",
    "url": "https://github.com/sagemath/sage/issues/29576",
    "user": "https://github.com/antonio-rojas"
}
```
Go to 
https://doc.sagemath.org/html/en/reference/search.html?q=modules

and see the many [object Object] labels throughout the page.

CC:  @jcamp0x2a @kwankyu @haraldschilly @slel @williamstein

Keywords: **online_documentation, search, js**

Branch/Commit: **[u/klee/29576](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/29576) @ [74d1330](https://github.com/sagemath/sagetrac-mirror/commit/74d1330a311ad7142b096f23838edca8c8e98f93)**

Reviewer: **Matthias Koeppe**

_Issue created by migration from https://trac.sagemath.org/ticket/29576_





---

archive/issue_events_375070.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2020-04-25T07:52:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29576#event-375070"
}
```



---

archive/issue_events_375071.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2020-04-25T07:52:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20documentation",
    "label_color": "0075ca",
    "label_name": "component: documentation",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29576#event-375071"
}
```



---

archive/issue_events_375072.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2020-04-25T07:52:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29576#event-375072"
}
```



---

archive/issue_events_375073.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-17T18:33:40Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29576#event-375073"
}
```



---

archive/issue_events_375074.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-17T18:33:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29576#event-375074"
}
```



---

archive/issue_comments_468352.json:
```json
{
    "body": "Changed keywords from **** to **online_documentation, search, js**",
    "created_at": "2020-10-02T09:09:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29576#issuecomment-468352",
    "user": "https://github.com/slel"
}
```

Changed keywords from **** to **online_documentation, search, js**



---

archive/issue_comments_468353.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nRestoring the online documentation's search box\nseems critical to me.\n\nCan anyone help with that?",
    "created_at": "2020-10-02T09:09:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29576#issuecomment-468353",
    "user": "https://github.com/slel"
}
```

<a id='comment:4'>Comment 4:</a>
Restoring the online documentation's search box
seems critical to me.

Can anyone help with that?



---

archive/issue_events_375075.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29576#event-375075"
}
```



---

archive/issue_events_375076.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29576#event-375076"
}
```



---

archive/issue_comments_468354.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nReplying to [@slel](#comment%3A4):\n> Restoring the online documentation's search box\n> seems critical to me.\n> \n> Can anyone help with that?\n\nWhat is the normal result of the search box? What should be shown? Would you explain?",
    "created_at": "2021-04-14T01:00:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29576#issuecomment-468354",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:7'>Comment 7:</a>
Replying to [@slel](#comment%3A4):
> Restoring the online documentation's search box
> seems critical to me.
> 
> Can anyone help with that?

What is the normal result of the search box? What should be shown? Would you explain?



---

archive/issue_comments_468355.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nMoving to 9.4, as 9.3 has been released.",
    "created_at": "2021-05-10T17:42:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29576#issuecomment-468355",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'>Comment 8:</a>
Moving to 9.4, as 9.3 has been released.



---

archive/issue_events_375077.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-10T17:42:09Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29576#event-375077"
}
```



---

archive/issue_events_375078.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-10T17:42:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29576#event-375078"
}
```



---

archive/issue_events_375079.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29576#event-375079"
}
```



---

archive/issue_events_375080.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29576#event-375080"
}
```



---

archive/issue_comments_468356.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nReported again in https://groups.google.com/g/sage-devel/c/FxjVDtqxw1U/m/t_K6IDjUAAAJ",
    "created_at": "2021-11-11T00:18:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29576#issuecomment-468356",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'>Comment 10:</a>
Reported again in https://groups.google.com/g/sage-devel/c/FxjVDtqxw1U/m/t_K6IDjUAAAJ



---

archive/issue_comments_468357.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nSee also: #31415",
    "created_at": "2021-11-11T01:25:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29576#issuecomment-468357",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'>Comment 11:</a>
See also: #31415



---

archive/issue_comments_468358.json:
```json
{
    "body": "Branch: **[u/klee/29576](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/29576)**",
    "created_at": "2021-11-11T07:54:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29576#issuecomment-468358",
    "user": "https://github.com/kwankyu"
}
```

Branch: **[u/klee/29576](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/29576)**



---

archive/issue_comments_468359.json:
```json
{
    "body": "Author: **Kwankyu Lee**",
    "created_at": "2021-11-11T07:54:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29576#issuecomment-468359",
    "user": "https://github.com/kwankyu"
}
```

Author: **Kwankyu Lee**



---

archive/issue_comments_468360.json:
```json
{
    "body": "Commit: **[74d1330](https://github.com/sagemath/sagetrac-mirror/commit/74d1330a311ad7142b096f23838edca8c8e98f93)**",
    "created_at": "2021-11-11T07:54:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29576#issuecomment-468360",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[74d1330](https://github.com/sagemath/sagetrac-mirror/commit/74d1330a311ad7142b096f23838edca8c8e98f93)**



---

archive/issue_comments_468361.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/74d1330a311ad7142b096f23838edca8c8e98f93\">74d1330</a></td><td><code>Revive search in documentation</code></td></tr></table>\n",
    "created_at": "2021-11-11T07:54:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29576#issuecomment-468361",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:13'>Comment 13:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/74d1330a311ad7142b096f23838edca8c8e98f93">74d1330</a></td><td><code>Revive search in documentation</code></td></tr></table>




---

archive/issue_comments_468362.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nThe patch revives search page. \n\nFor this, I had to turn off Thebe (see changes in `layout.html`), which seems to conflict with `underline.js`. Actually it seems old Thebe javascript file is to blame, as with the latest one from CDN works fine with the search page.\n\nI am not sure if Thebe still works with Sage. See related #24593. If we cannot turn off Thebe, then please provide updated javascript (here or to #24593).",
    "created_at": "2021-11-11T08:04:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29576#issuecomment-468362",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:14'>Comment 14:</a>
The patch revives search page. 

For this, I had to turn off Thebe (see changes in `layout.html`), which seems to conflict with `underline.js`. Actually it seems old Thebe javascript file is to blame, as with the latest one from CDN works fine with the search page.

I am not sure if Thebe still works with Sage. See related #24593. If we cannot turn off Thebe, then please provide updated javascript (here or to #24593).



---

archive/issue_events_375081.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2021-11-11T08:05:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29576#event-375081"
}
```



---

archive/issue_comments_468363.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nWhat I did is mostly to make our customized `layout.html` and `search.html` to be close to original ones from Sphinx.",
    "created_at": "2021-11-11T08:10:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29576#issuecomment-468363",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:16'>Comment 16:</a>
What I did is mostly to make our customized `layout.html` and `search.html` to be close to original ones from Sphinx.



---

archive/issue_events_375082.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2021-11-12T11:21:44Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "title_is": "Sage documentation search page broken",
    "title_was": "Missing js objects on doc search page",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29576#event-375082"
}
```



---

archive/issue_comments_468364.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nSee also #32854.",
    "created_at": "2021-11-12T17:51:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29576#issuecomment-468364",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:18'>Comment 18:</a>
See also #32854.



---

archive/issue_comments_468365.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nSet milestone to sage-9.6 after Sage 9.5 release.",
    "created_at": "2022-01-30T15:44:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29576#issuecomment-468365",
    "user": "https://github.com/slel"
}
```

<a id='comment:19'>Comment 19:</a>
Set milestone to sage-9.6 after Sage 9.5 release.



---

archive/issue_events_375083.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2022-01-30T15:44:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29576#event-375083"
}
```



---

archive/issue_events_375084.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2022-01-30T15:44:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29576#event-375084"
}
```



---

archive/issue_events_375085.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-02-10T12:37:50Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29576#event-375085"
}
```



---

archive/issue_events_375086.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-02-10T12:37:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29576#event-375086"
}
```



---

archive/issue_events_375087.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-02-10T12:37:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29576#event-375087"
}
```



---

archive/issue_comments_468366.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nThe code in this ticket is now merged to the branch of #33309. Hence we close this ticket.",
    "created_at": "2022-02-10T12:37:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29576#issuecomment-468366",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:20'>Comment 20:</a>
The code in this ticket is now merged to the branch of #33309. Hence we close this ticket.



---

archive/issue_comments_468367.json:
```json
{
    "body": "Changed author from **Kwankyu Lee** to none",
    "created_at": "2022-02-13T17:48:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29576#issuecomment-468367",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Kwankyu Lee** to none



---

archive/issue_events_375088.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-02-13T17:48:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29576#event-375088"
}
```



---

archive/issue_events_375089.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-02-13T17:48:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29576#event-375089"
}
```



---

archive/issue_comments_468368.json:
```json
{
    "body": "Reviewer: **Matthias Koeppe**",
    "created_at": "2022-02-13T17:48:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29576#issuecomment-468368",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Matthias Koeppe**



---

archive/issue_events_375090.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-02-26T18:53:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29576#event-375090"
}
```



---

archive/issue_events_375091.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-02-26T18:53:04Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29576",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29576#event-375091"
}
```
