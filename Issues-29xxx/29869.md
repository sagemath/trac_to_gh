# Issue 29869: Move attrcall and friends from sage.misc.misc to new module sage.misc.call

archive/issues_029632.json:
```json
{
    "body": "This will help with #29865\n\nCC:  @tscrim\n\nBranch/Commit: 6024ffd4f207db7b5d419696b3ce1b6711a81056\n\nReviewer: Travis Scrimshaw\n\nAuthor: Matthias Koeppe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29869\n\n",
    "closed_at": "2020-07-02T21:30:07Z",
    "created_at": "2020-06-15T18:27:09Z",
    "labels": [
        "component: refactoring"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Move attrcall and friends from sage.misc.misc to new module sage.misc.call",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29869",
    "user": "https://github.com/mkoeppe"
}
```
This will help with #29865

CC:  @tscrim

Branch/Commit: 6024ffd4f207db7b5d419696b3ce1b6711a81056

Reviewer: Travis Scrimshaw

Author: Matthias Koeppe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29869





---

archive/issue_comments_448596.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-\n+This will help with #29865\n \n Comment: 1\n \n``````\n",
    "created_at": "2020-06-15T18:28:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29869#issuecomment-448596",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-
+This will help with #29865
 
 Comment: 1
 
``````




---

archive/issue_comments_448597.json:
```json
{
    "body": "<a id='comment:3'></a>The reimport in `sage.misc.misc` probably needs a deprecation?\n\n---\nNew commits:",
    "created_at": "2020-06-15T18:39:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29869#issuecomment-448597",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>The reimport in `sage.misc.misc` probably needs a deprecation?

---
New commits:



---

archive/issue_comments_448598.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-06-15T18:39:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29869#issuecomment-448598",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_448599.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-15T19:22:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29869#issuecomment-448599",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_448600.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-15T23:03:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29869#issuecomment-448600",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_448601.json:
```json
{
    "body": "<a id='comment:7'></a>I think this is clean now, needs review",
    "created_at": "2020-06-15T23:04:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29869#issuecomment-448601",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>I think this is clean now, needs review



---

archive/issue_comments_448602.json:
```json
{
    "body": "<a id='comment:8'></a>You need to add the new file to\n\n```\nsrc/doc/en/reference/misc/index.rst\n```\nIt is also missing the standard header information:\n\n```\n\"\"\"\nMiscellaneous calling functions\n\"\"\"\n\n# Copyright...\n```",
    "created_at": "2020-06-15T23:23:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29869#issuecomment-448602",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>You need to add the new file to

```
src/doc/en/reference/misc/index.rst
```
It is also missing the standard header information:

```
"""
Miscellaneous calling functions
"""

# Copyright...
```



---

archive/issue_comments_448603.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-15T23:52:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29869#issuecomment-448603",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_448604.json:
```json
{
    "body": "<a id='comment:10'></a>Thanks. If the patchbot comes back green, then this is a positive review.",
    "created_at": "2020-06-16T02:41:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29869#issuecomment-448604",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'></a>Thanks. If the patchbot comes back green, then this is a positive review.



---

archive/issue_comments_448605.json:
```json
{
    "body": "<a id='comment:11'></a>Well, there are all kinds of colors, but I think this is from code that was already there",
    "created_at": "2020-06-16T19:30:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29869#issuecomment-448605",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>Well, there are all kinds of colors, but I think this is from code that was already there



---

archive/issue_comments_448606.json:
```json
{
    "body": "<a id='comment:12'></a>There is one real failure:\n\n```\nsage -t --long src/sage/modules/with_basis/indexed_element.pyx  # 1 doctest failed\n```",
    "created_at": "2020-06-16T23:28:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29869#issuecomment-448606",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'></a>There is one real failure:

```
sage -t --long src/sage/modules/with_basis/indexed_element.pyx  # 1 doctest failed
```



---

archive/issue_comments_448607.json:
```json
{
    "body": "<a id='comment:13'></a>\n```\nexplain_pickle(x)\npg_dynamic_class = unpickle_global('sage.structure.dynamic_class', 'dynamic_class')\npg_CombinatorialFreeModuleElement = unpickle_global('sage.combinat.free_module', 'CombinatorialFreeModuleElement')\npg_getattr = unpickle_global('__builtin__', 'getattr')\npg_call_method = unpickle_global('sage.misc.misc', 'call_method')\npg_unreduce = unpickle_global('sage.structure.unique_representation', 'unreduce')\npg_Modules = unpickle_global('sage.categories.modules', 'Modules')\npg_IntegerRing = unpickle_global('sage.rings.integer_ring', 'IntegerRing')\npg = unpickle_instantiate(pg_IntegerRing, ())\nsi1 = pg_call_method(pg_unreduce(pg_Modules, (pg,), {'dispatch':False}), '_with_axiom', 'WithBasis')\nsi2 = unpickle_newobj(pg_dynamic_class('CombinatorialFreeModule_with_category.element_class', (pg_CombinatorialFreeModuleElement, pg_getattr(pg_call_method(si1, '_with_axiom', 'FiniteDimensional'), 'element_class')), None, None, None), ())\npg_CombinatorialFreeModule = unpickle_global('sage.combinat.free_module', 'CombinatorialFreeModule')\npg_FiniteEnumeratedSet = unpickle_global('sage.sets.finite_enumerated_set', 'FiniteEnumeratedSet')\npg_make_integer = unpickle_global('sage.rings.integer', 'make_integer')\nunpickle_build(si2, (pg_unreduce(pg_CombinatorialFreeModule, (pg, pg_unreduce(pg_FiniteEnumeratedSet, (('x', 'y'),), {})), {'category':si1, 'prefix':'B'}), {'_monomial_coefficients':{'y':pg_make_integer('2'), 'x':pg_make_integer('2')}}))\nsi2\n```\nOK... I need some help here. Do I need to add `register_unpickle_override`?",
    "created_at": "2020-06-17T00:46:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29869#issuecomment-448607",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>
```
explain_pickle(x)
pg_dynamic_class = unpickle_global('sage.structure.dynamic_class', 'dynamic_class')
pg_CombinatorialFreeModuleElement = unpickle_global('sage.combinat.free_module', 'CombinatorialFreeModuleElement')
pg_getattr = unpickle_global('__builtin__', 'getattr')
pg_call_method = unpickle_global('sage.misc.misc', 'call_method')
pg_unreduce = unpickle_global('sage.structure.unique_representation', 'unreduce')
pg_Modules = unpickle_global('sage.categories.modules', 'Modules')
pg_IntegerRing = unpickle_global('sage.rings.integer_ring', 'IntegerRing')
pg = unpickle_instantiate(pg_IntegerRing, ())
si1 = pg_call_method(pg_unreduce(pg_Modules, (pg,), {'dispatch':False}), '_with_axiom', 'WithBasis')
si2 = unpickle_newobj(pg_dynamic_class('CombinatorialFreeModule_with_category.element_class', (pg_CombinatorialFreeModuleElement, pg_getattr(pg_call_method(si1, '_with_axiom', 'FiniteDimensional'), 'element_class')), None, None, None), ())
pg_CombinatorialFreeModule = unpickle_global('sage.combinat.free_module', 'CombinatorialFreeModule')
pg_FiniteEnumeratedSet = unpickle_global('sage.sets.finite_enumerated_set', 'FiniteEnumeratedSet')
pg_make_integer = unpickle_global('sage.rings.integer', 'make_integer')
unpickle_build(si2, (pg_unreduce(pg_CombinatorialFreeModule, (pg, pg_unreduce(pg_FiniteEnumeratedSet, (('x', 'y'),), {})), {'category':si1, 'prefix':'B'}), {'_monomial_coefficients':{'y':pg_make_integer('2'), 'x':pg_make_integer('2')}}))
si2
```
OK... I need some help here. Do I need to add `register_unpickle_override`?



---

archive/issue_comments_448608.json:
```json
{
    "body": "<a id='comment:14'></a>Yes, that is correct. You can add it in the old file to redirect to the new file. The other option (which has happened) is to simply drop the backwards compatibility and tell people to find a version of Sage during the deprecation period to load it then resave as a new pickle. IMO, I would rather do the former here since it is a 1-line fix.",
    "created_at": "2020-06-17T00:59:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29869#issuecomment-448608",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:14'></a>Yes, that is correct. You can add it in the old file to redirect to the new file. The other option (which has happened) is to simply drop the backwards compatibility and tell people to find a version of Sage during the deprecation period to load it then resave as a new pickle. IMO, I would rather do the former here since it is a 1-line fix.



---

archive/issue_comments_448609.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-17T01:10:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29869#issuecomment-448609",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_448610.json:
```json
{
    "body": "<a id='comment:16'></a>Thanks. I had to add it to the new file though because `sage.misc.misc` is a dependency of `sage.misc.persist`.\n  \n---\nNew commits:",
    "created_at": "2020-06-17T01:11:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29869#issuecomment-448610",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>Thanks. I had to add it to the new file though because `sage.misc.misc` is a dependency of `sage.misc.persist`.
  
---
New commits:



---

archive/issue_comments_448611.json:
```json
{
    "body": "<a id='comment:17'></a>I think it doesn't matter where it is at. I just want to see one more run of the patchbot before setting a positive review.",
    "created_at": "2020-06-17T02:23:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29869#issuecomment-448611",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:17'></a>I think it doesn't matter where it is at. I just want to see one more run of the patchbot before setting a positive review.



---

archive/issue_comments_448612.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-06-17T05:21:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29869#issuecomment-448612",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_448613.json:
```json
{
    "body": "<a id='comment:19'></a>Thanks!",
    "created_at": "2020-06-17T06:05:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29869#issuecomment-448613",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:19'></a>Thanks!



---

archive/issue_events_076541.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-07-02T21:30:07Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29869",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29869#event-76541"
}
```



---

archive/issue_comments_448614.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-07-02T21:30:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29869#issuecomment-448614",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
