# Issue 29317: glpk: when doctesting, ignore a warning message

archive/issues_029080.json:
```json
{
    "body": "Vanilla GLPK 4.65 frequently prints a warning message \"Long-step dual simplex will be used\". Sage patches its GLPK to skip this, and some distros use a patched GLPK as well, but not all of them. For the systems where there is only an unpatched GLPK, we should ignore this warning message in doctesting.\n\nCC:  @mkoeppe\n\nReviewer: Matthias Koeppe\n\nAuthor: John Palmieri\n\nBranch: f38dbdbbb5b6114dd09d8827cfc1f34d94a120a6\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29317\n\n",
    "closed_at": "2020-03-14T23:10:38Z",
    "created_at": "2020-03-12T02:08:52Z",
    "labels": [
        "component: packages: standard",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "glpk: when doctesting, ignore a warning message",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29317",
    "user": "https://github.com/jhpalmieri"
}
```
Vanilla GLPK 4.65 frequently prints a warning message "Long-step dual simplex will be used". Sage patches its GLPK to skip this, and some distros use a patched GLPK as well, but not all of them. For the systems where there is only an unpatched GLPK, we should ignore this warning message in doctesting.

CC:  @mkoeppe

Reviewer: Matthias Koeppe

Author: John Palmieri

Branch: f38dbdbbb5b6114dd09d8827cfc1f34d94a120a6

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29317





---

archive/issue_comments_571861.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jhpalmieri/glpk-ignore-warning-when-doctesting\"",
    "created_at": "2020-03-12T02:09:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29317#issuecomment-571861",
    "user": "https://github.com/jhpalmieri"
}
```

Changing branch from "" to "u/jhpalmieri/glpk-ignore-warning-when-doctesting"



---

archive/issue_comments_571862.json:
```json
{
    "body": "Changing commit from \"\" to \"f38dbdbbb5b6114dd09d8827cfc1f34d94a120a6\"",
    "created_at": "2020-03-12T02:10:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29317#issuecomment-571862",
    "user": "https://github.com/jhpalmieri"
}
```

Changing commit from "" to "f38dbdbbb5b6114dd09d8827cfc1f34d94a120a6"



---

archive/issue_comments_571863.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew commits:\n|                                                                                                                                          |                                                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|\n|[f38dbdb](https://git.sagemath.org/sage.git/commit?id=f38dbdbbb5b6114dd09d8827cfc1f34d94a120a6)|`trac 29317: ignore glpk warning message when doctesting`|",
    "created_at": "2020-03-12T02:10:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29317#issuecomment-571863",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:2'></a>
New commits:
|                                                                                                                                          |                                                         |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|
|[f38dbdb](https://git.sagemath.org/sage.git/commit?id=f38dbdbbb5b6114dd09d8827cfc1f34d94a120a6)|`trac 29317: ignore glpk warning message when doctesting`|



---

archive/issue_comments_571864.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-03-12T02:10:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29317#issuecomment-571864",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_571865.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-Vanilla glpk 4.65 frequently prints a warning message \"Long-step dual simplex will be used\". Sage patches its glpk to skip this, and some distros use a patched glpk as well, but not all of them. For the systems where there is only an unpatched glpkg, we should ignore this warning message in doctesting.\n+Vanilla glpk 4.65 frequently prints a warning message \"Long-step dual simplex will be used\". Sage patches its glpk to skip this, and some distros use a patched glpk as well, but not all of them. For the systems where there is only an unpatched glpk, we should ignore this warning message in doctesting.\n``````\n",
    "created_at": "2020-03-12T02:10:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29317#issuecomment-571865",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-Vanilla glpk 4.65 frequently prints a warning message "Long-step dual simplex will be used". Sage patches its glpk to skip this, and some distros use a patched glpk as well, but not all of them. For the systems where there is only an unpatched glpkg, we should ignore this warning message in doctesting.
+Vanilla glpk 4.65 frequently prints a warning message "Long-step dual simplex will be used". Sage patches its glpk to skip this, and some distros use a patched glpk as well, but not all of them. For the systems where there is only an unpatched glpk, we should ignore this warning message in doctesting.
``````




---

archive/issue_comments_571866.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-Vanilla glpk 4.65 frequently prints a warning message \"Long-step dual simplex will be used\". Sage patches its glpk to skip this, and some distros use a patched glpk as well, but not all of them. For the systems where there is only an unpatched glpk, we should ignore this warning message in doctesting.\n+Vanilla GLPK 4.65 frequently prints a warning message \"Long-step dual simplex will be used\". Sage patches its GLPK to skip this, and some distros use a patched GLPK as well, but not all of them. For the systems where there is only an unpatched GLPK, we should ignore this warning message in doctesting.\n``````\n",
    "created_at": "2020-03-12T02:11:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29317#issuecomment-571866",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-Vanilla glpk 4.65 frequently prints a warning message "Long-step dual simplex will be used". Sage patches its glpk to skip this, and some distros use a patched glpk as well, but not all of them. For the systems where there is only an unpatched glpk, we should ignore this warning message in doctesting.
+Vanilla GLPK 4.65 frequently prints a warning message "Long-step dual simplex will be used". Sage patches its GLPK to skip this, and some distros use a patched GLPK as well, but not all of them. For the systems where there is only an unpatched GLPK, we should ignore this warning message in doctesting.
``````




---

archive/issue_comments_571867.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Matthias Koeppe\"",
    "created_at": "2020-03-12T22:05:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29317#issuecomment-571867",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "" to "Matthias Koeppe"



---

archive/issue_comments_571868.json:
```json
{
    "body": "<a id='comment:6'></a>\nWorks well for me. Setting this to positive review even though I would personally prefer to reject unpatched glpk distro packages.",
    "created_at": "2020-03-12T22:05:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29317#issuecomment-571868",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
Works well for me. Setting this to positive review even though I would personally prefer to reject unpatched glpk distro packages.



---

archive/issue_comments_571869.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-03-12T22:05:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29317#issuecomment-571869",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_571870.json:
```json
{
    "body": "<a id='comment:7'></a>\nBy the way, I see (with and without the ticket):\n\n```\nFile \"src/sage/numerical/backends/glpk_backend.pyx\", line 2287, in sage.numerical.backends.glpk_backend.GLPKBackend.print_ranges\nFailed example:\n    p.print_ranges()\nExpected:\n    glp_print_ranges: optimal basic solution required\n    1\nGot:\n    1\n```",
    "created_at": "2020-03-12T22:07:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29317#issuecomment-571870",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
By the way, I see (with and without the ticket):

```
File "src/sage/numerical/backends/glpk_backend.pyx", line 2287, in sage.numerical.backends.glpk_backend.GLPKBackend.print_ranges
Failed example:
    p.print_ranges()
Expected:
    glp_print_ranges: optimal basic solution required
    1
Got:
    1
```



---

archive/issue_comments_571871.json:
```json
{
    "body": "<a id='comment:8'></a>\nthis is perhaps one more message to add to ignoring list.\nProbably due to glpk not built with GMP support, IIRC.",
    "created_at": "2020-03-12T22:16:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29317#issuecomment-571871",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:8'></a>
this is perhaps one more message to add to ignoring list.
Probably due to glpk not built with GMP support, IIRC.



---

archive/issue_comments_571872.json:
```json
{
    "body": "Changing branch from \"u/jhpalmieri/glpk-ignore-warning-when-doctesting\" to \"f38dbdbbb5b6114dd09d8827cfc1f34d94a120a6\"",
    "created_at": "2020-03-14T23:10:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29317#issuecomment-571872",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/jhpalmieri/glpk-ignore-warning-when-doctesting" to "f38dbdbbb5b6114dd09d8827cfc1f34d94a120a6"



---

archive/issue_events_074619.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-03-14T23:10:38Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29317",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29317#event-74619"
}
```



---

archive/issue_comments_571873.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-03-14T23:10:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29317#issuecomment-571873",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_571874.json:
```json
{
    "body": "Changing commit from \"f38dbdbbb5b6114dd09d8827cfc1f34d94a120a6\" to \"\"",
    "created_at": "2022-04-03T00:00:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29317#issuecomment-571874",
    "user": "https://github.com/jhpalmieri"
}
```

Changing commit from "f38dbdbbb5b6114dd09d8827cfc1f34d94a120a6" to ""



---

archive/issue_comments_571875.json:
```json
{
    "body": "<a id='comment:10'></a>\nSee #33588 for a followup.",
    "created_at": "2022-04-03T00:00:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29317",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29317#issuecomment-571875",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:10'></a>
See #33588 for a followup.
