# Issue 29388: prototype to make fast_callable accepts numpy arrays of floating points

archive/issues_029151.json:
```json
{
    "assignees": [],
    "body": "This ticket is regarding the prototype I am proposing to sage math for the project Fast evaluation of symbolic expressions.\n\nThe objective is to make the following work\n\n```\nsage: import numpy as np\nsage: x = SR.var('x')\nsage: f = cos(x) + 3 * sin(x)**2\nsage: g = fast_callable(f, vars=['x'], domain=RDF)\nsage: a = np.array([0.1, 0.3, 0.4], dtype=float)\nsage: g(a)    # currently raises a TypeError\narray([1.0249043 , 1.21733307, 1.37600093])\n```\n\nCC:  @videlec\n\nKeywords: **GSOC Prototype**\n\nReviewer: **Vincent Delecroix**\n\nComponent: **symbolics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29388_\n\n",
    "closed_at": "2020-03-27T11:04:01Z",
    "created_at": "2020-03-22T04:35:22Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
        "https://github.com/sagemath/sage/labels/duplicate"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "prototype to make fast_callable accepts numpy arrays of floating points",
    "type": "issue",
    "updated_at": "2020-03-27T11:04:01Z",
    "url": "https://github.com/sagemath/sage/issues/29388",
    "user": "https://github.com/unicorn-io"
}
```
This ticket is regarding the prototype I am proposing to sage math for the project Fast evaluation of symbolic expressions.

The objective is to make the following work

```
sage: import numpy as np
sage: x = SR.var('x')
sage: f = cos(x) + 3 * sin(x)**2
sage: g = fast_callable(f, vars=['x'], domain=RDF)
sage: a = np.array([0.1, 0.3, 0.4], dtype=float)
sage: g(a)    # currently raises a TypeError
array([1.0249043 , 1.21733307, 1.37600093])
```

CC:  @videlec

Keywords: **GSOC Prototype**

Reviewer: **Vincent Delecroix**

Component: **symbolics**

_Issue created by migration from https://trac.sagemath.org/ticket/29388_





---

archive/issue_events_404089.json:
```json
{
    "actor": "https://github.com/unicorn-io",
    "created_at": "2020-03-22T04:35:22Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29388",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29388#event-404089"
}
```



---

archive/issue_events_404090.json:
```json
{
    "actor": "https://github.com/unicorn-io",
    "created_at": "2020-03-22T04:35:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29388",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29388#event-404090"
}
```



---

archive/issue_comments_461309.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI need a little clarity regarding the following points,\n\n* I am slightly unclear about the project goals/ Major contributions section, can you please briefly describe the idea behind it.\n\n\n\nP.S. i would also love to contribute in Diameter, radius, eccentricities, and distances what should I be doing to get in contact with other mentors?",
    "created_at": "2020-03-22T04:44:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29388#issuecomment-461309",
    "user": "https://github.com/unicorn-io"
}
```

<div id="comment:1" align="right">comment:1</div>

I need a little clarity regarding the following points,

* I am slightly unclear about the project goals/ Major contributions section, can you please briefly describe the idea behind it.



P.S. i would also love to contribute in Diameter, radius, eccentricities, and distances what should I be doing to get in contact with other mentors?



---

archive/issue_comments_461310.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nTickets are to propose and discuss changes to [SageMath](../wiki/SageMath). Not to discuss the content of GSoC. For the latter, do use the mailing list https://groups.google.com/forum/#!forum/sage-gsoc",
    "created_at": "2020-03-22T09:23:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29388#issuecomment-461310",
    "user": "https://github.com/videlec"
}
```

<div id="comment:2" align="right">comment:2</div>

Tickets are to propose and discuss changes to [SageMath](../wiki/SageMath). Not to discuss the content of GSoC. For the latter, do use the mailing list https://groups.google.com/forum/#!forum/sage-gsoc



---

archive/issue_comments_461311.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI updated the description.",
    "created_at": "2020-03-22T09:26:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29388#issuecomment-461311",
    "user": "https://github.com/videlec"
}
```

<div id="comment:3" align="right">comment:3</div>

I updated the description.



---

archive/issue_comments_461312.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,13 @@\n This ticket is regarding the prototype I am proposing to sage math for the project Fast evaluation of symbolic expressions.\n+\n+The objective is to make the following works\n+\n+```\n+sage: import numpy as np\n+sage: x = SR.var('x')\n+sage: f = cos(x) + 3 * sin(x)**2\n+sage: g = fast_callable(f, vars=['x'], domain=RDF)\n+sage: a = np.array([0.1, 0.3, 0.4], dtype=float)\n+sage: g(a)\n+array([1.0249043 , 1.21733307, 1.37600093])\n+```\n``````\n",
    "created_at": "2020-03-22T09:26:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29388#issuecomment-461312",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,13 @@
 This ticket is regarding the prototype I am proposing to sage math for the project Fast evaluation of symbolic expressions.
+
+The objective is to make the following works
+
+```
+sage: import numpy as np
+sage: x = SR.var('x')
+sage: f = cos(x) + 3 * sin(x)**2
+sage: g = fast_callable(f, vars=['x'], domain=RDF)
+sage: a = np.array([0.1, 0.3, 0.4], dtype=float)
+sage: g(a)
+array([1.0249043 , 1.21733307, 1.37600093])
+```
``````




---

archive/issue_events_404091.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-03-22T09:26:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29388",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "c: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29388#event-404091"
}
```



---

archive/issue_comments_461313.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n This ticket is regarding the prototype I am proposing to sage math for the project Fast evaluation of symbolic expressions.\n \n-The objective is to make the following works\n+The objective is to make the following work\n \n ```\n sage: import numpy as np\n@@ -8,6 +8,6 @@\n sage: f = cos(x) + 3 * sin(x)**2\n sage: g = fast_callable(f, vars=['x'], domain=RDF)\n sage: a = np.array([0.1, 0.3, 0.4], dtype=float)\n-sage: g(a)\n+sage: g(a)    # currently raises a TypeError\n array([1.0249043 , 1.21733307, 1.37600093])\n ```\n``````\n",
    "created_at": "2020-03-22T09:27:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29388#issuecomment-461313",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 This ticket is regarding the prototype I am proposing to sage math for the project Fast evaluation of symbolic expressions.
 
-The objective is to make the following works
+The objective is to make the following work
 
 ```
 sage: import numpy as np
@@ -8,6 +8,6 @@
 sage: f = cos(x) + 3 * sin(x)**2
 sage: g = fast_callable(f, vars=['x'], domain=RDF)
 sage: a = np.array([0.1, 0.3, 0.4], dtype=float)
-sage: g(a)
+sage: g(a)    # currently raises a TypeError
 array([1.0249043 , 1.21733307, 1.37600093])
 ```
``````




---

archive/issue_events_404092.json:
```json
{
    "actor": "https://github.com/DaveWitteMorris",
    "created_at": "2020-03-27T01:14:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29388",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29388#event-404092"
}
```



---

archive/issue_comments_461314.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThis seems to be a duplicate of #29235.",
    "created_at": "2020-03-27T01:14:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29388#issuecomment-461314",
    "user": "https://github.com/DaveWitteMorris"
}
```

<div id="comment:5" align="right">comment:5</div>

This seems to be a duplicate of #29235.



---

archive/issue_events_404093.json:
```json
{
    "actor": "https://github.com/DaveWitteMorris",
    "created_at": "2020-03-27T01:14:38Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29388",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29388#event-404093"
}
```



---

archive/issue_events_404094.json:
```json
{
    "actor": "https://github.com/DaveWitteMorris",
    "created_at": "2020-03-27T01:14:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29388",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29388#event-404094"
}
```



---

archive/issue_events_404095.json:
```json
{
    "actor": "https://github.com/DaveWitteMorris",
    "created_at": "2020-03-27T01:14:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29388",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29388#event-404095"
}
```



---

archive/issue_comments_461315.json:
```json
{
    "body": "Reviewer: **Vincent Delecroix**",
    "created_at": "2020-03-27T11:03:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29388#issuecomment-461315",
    "user": "https://github.com/videlec"
}
```

Reviewer: **Vincent Delecroix**



---

archive/issue_events_404096.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-03-27T11:03:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29388",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29388#event-404096"
}
```



---

archive/issue_events_404097.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-03-27T11:03:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29388",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29388#event-404097"
}
```



---

archive/issue_comments_461316.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nIt indeed is. I forgot that I already opened one.",
    "created_at": "2020-03-27T11:03:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29388#issuecomment-461316",
    "user": "https://github.com/videlec"
}
```

<div id="comment:6" align="right">comment:6</div>

It indeed is. I forgot that I already opened one.



---

archive/issue_comments_461317.json:
```json
{
    "body": "Changed author from **gh-unicorn-io** to none",
    "created_at": "2020-03-27T11:03:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29388#issuecomment-461317",
    "user": "https://github.com/videlec"
}
```

Changed author from **gh-unicorn-io** to none



---

archive/issue_events_404098.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-03-27T11:04:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29388",
    "label": "https://github.com/sagemath/sage/labels/duplicate",
    "label_color": "a6a6a6",
    "label_name": "duplicate",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29388#event-404098"
}
```



---

archive/issue_events_404099.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-03-27T11:04:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29388",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29388#event-404099"
}
```



---

archive/issue_events_404100.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-03-27T11:04:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29388",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29388#event-404100"
}
```
