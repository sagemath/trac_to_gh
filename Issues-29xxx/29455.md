# Issue 29455: Bug in incidence_matrix of CombinatorialPolyhedron

archive/issues_029218.json:
```json
{
    "body": "The `incidence_matrix` method of a 0-dimensional `CombinatorialPolyhedron` returns an error:\n\n```\nsage: P = Polyhedron([[0]]); P\nA 0-dimensional polyhedron in ZZ^1 defined as the convex hull of 1 vertex\nsage: C = P.combinatorial_polyhedron()\nsage: C.incidence_matrix()\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-7-dab311ba238f> in <module>()\n----> 1 C.incidence_matrix()\n...\nValueError: ``output_dimension`` must be the dimension of proper faces\n```\n\nWe fix this and make the `0`-dimensional case consistent with `Polyhedron_base`.\n\nAlso we make `incidence_matrix` a `chached_method`.\n\nCC:  @jplab @kliem\n\nKeywords: polytope, combinatorialpolyhedron, incidence_matrix\n\nBranch/Commit: 34f32546d1a1d477b55d22b423a9aa2ade50a0e8\n\nReviewer: Laith Rastanawi\n\nAuthor: Jonathan Kliem\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29455\n\n",
    "closed_at": "2020-04-12T15:34:22Z",
    "created_at": "2020-04-03T12:08:49Z",
    "labels": [
        "component: geometry",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "Bug in incidence_matrix of CombinatorialPolyhedron",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29455",
    "user": "https://github.com/LaisRast"
}
```
The `incidence_matrix` method of a 0-dimensional `CombinatorialPolyhedron` returns an error:

```
sage: P = Polyhedron([[0]]); P
A 0-dimensional polyhedron in ZZ^1 defined as the convex hull of 1 vertex
sage: C = P.combinatorial_polyhedron()
sage: C.incidence_matrix()
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-7-dab311ba238f> in <module>()
----> 1 C.incidence_matrix()
...
ValueError: ``output_dimension`` must be the dimension of proper faces
```

We fix this and make the `0`-dimensional case consistent with `Polyhedron_base`.

Also we make `incidence_matrix` a `chached_method`.

CC:  @jplab @kliem

Keywords: polytope, combinatorialpolyhedron, incidence_matrix

Branch/Commit: 34f32546d1a1d477b55d22b423a9aa2ade50a0e8

Reviewer: Laith Rastanawi

Author: Jonathan Kliem

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29455





---

archive/issue_comments_568331.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                                                        |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|\n|[4aa8b28](https://github.com/sagemath/sagetrac-mirror/commit/4aa8b28c0b64b5ad51f9f3a16bae3bf47f7a7b1e)|`fix incidence matrix for small combinatorial polyhedra`|",
    "created_at": "2020-04-03T12:54:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29455#issuecomment-568331",
    "user": "https://github.com/kliem"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                                                        |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|
|[4aa8b28](https://github.com/sagemath/sagetrac-mirror/commit/4aa8b28c0b64b5ad51f9f3a16bae3bf47f7a7b1e)|`fix incidence matrix for small combinatorial polyhedra`|



---

archive/issue_comments_568332.json:
```json
{
    "body": "Changing author from \"\" to \"Jonathan Kliem\"",
    "created_at": "2020-04-03T12:54:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29455#issuecomment-568332",
    "user": "https://github.com/kliem"
}
```

Changing author from "" to "Jonathan Kliem"



---

archive/issue_comments_568333.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,3 +12,7 @@\n ...\n ValueError: ``output_dimension`` must be the dimension of proper faces\n ```\n+\n+We fix this and make the `0`-dimensional case consistent with `Polyhedron_base`.\n+\n+Also we make `incidence_matrix` a `chached_method`.\n``````\n",
    "created_at": "2020-04-03T12:54:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29455#issuecomment-568333",
    "user": "https://github.com/kliem"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,3 +12,7 @@
 ...
 ValueError: ``output_dimension`` must be the dimension of proper faces
 ```
+
+We fix this and make the `0`-dimensional case consistent with `Polyhedron_base`.
+
+Also we make `incidence_matrix` a `chached_method`.
``````




---

archive/issue_comments_568334.json:
```json
{
    "body": "Changing commit from \"\" to \"4aa8b28c0b64b5ad51f9f3a16bae3bf47f7a7b1e\"",
    "created_at": "2020-04-03T12:54:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29455#issuecomment-568334",
    "user": "https://github.com/kliem"
}
```

Changing commit from "" to "4aa8b28c0b64b5ad51f9f3a16bae3bf47f7a7b1e"



---

archive/issue_comments_568335.json:
```json
{
    "body": "Changing branch from \"\" to \"public/29455\"",
    "created_at": "2020-04-03T12:54:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29455#issuecomment-568335",
    "user": "https://github.com/kliem"
}
```

Changing branch from "" to "public/29455"



---

archive/issue_comments_568336.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-04-03T12:54:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29455#issuecomment-568336",
    "user": "https://github.com/kliem"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_568337.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-04-03T16:56:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29455#issuecomment-568337",
    "user": "https://github.com/LaisRast"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_568338.json:
```json
{
    "body": "<a id='comment:2'></a>\nThis fixes the problem.",
    "created_at": "2020-04-03T16:56:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29455#issuecomment-568338",
    "user": "https://github.com/LaisRast"
}
```

<a id='comment:2'></a>
This fixes the problem.



---

archive/issue_comments_568339.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Laith Rastanawi\"",
    "created_at": "2020-04-03T16:56:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29455#issuecomment-568339",
    "user": "https://github.com/LaisRast"
}
```

Changing reviewer from "" to "Laith Rastanawi"



---

archive/issue_comments_568340.json:
```json
{
    "body": "<a id='comment:3'></a>\nThanks",
    "created_at": "2020-04-03T16:57:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29455#issuecomment-568340",
    "user": "https://github.com/kliem"
}
```

<a id='comment:3'></a>
Thanks



---

archive/issue_comments_568341.json:
```json
{
    "body": "<a id='comment:4'></a>\nSee patchbots:\n\n```\nsage -t --long src/sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx  # 2 doctests failed\n```",
    "created_at": "2020-04-07T18:18:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29455#issuecomment-568341",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:4'></a>
See patchbots:

```
sage -t --long src/sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx  # 2 doctests failed
```



---

archive/issue_comments_568342.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-04-07T18:18:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29455#issuecomment-568342",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_568343.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------|\n|[34f3254](https://github.com/sagemath/sagetrac-mirror/commit/34f32546d1a1d477b55d22b423a9aa2ade50a0e8)|`typos in doctests`|",
    "created_at": "2020-04-07T18:30:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29455#issuecomment-568343",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------|
|[34f3254](https://github.com/sagemath/sagetrac-mirror/commit/34f32546d1a1d477b55d22b423a9aa2ade50a0e8)|`typos in doctests`|



---

archive/issue_comments_568344.json:
```json
{
    "body": "Changing commit from \"4aa8b28c0b64b5ad51f9f3a16bae3bf47f7a7b1e\" to \"34f32546d1a1d477b55d22b423a9aa2ade50a0e8\"",
    "created_at": "2020-04-07T18:30:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29455#issuecomment-568344",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4aa8b28c0b64b5ad51f9f3a16bae3bf47f7a7b1e" to "34f32546d1a1d477b55d22b423a9aa2ade50a0e8"



---

archive/issue_comments_568345.json:
```json
{
    "body": "<a id='comment:6'></a>\nI'm sorry. I really don't know how that could have happened. It didn't even work for me.",
    "created_at": "2020-04-07T18:31:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29455#issuecomment-568345",
    "user": "https://github.com/kliem"
}
```

<a id='comment:6'></a>
I'm sorry. I really don't know how that could have happened. It didn't even work for me.



---

archive/issue_comments_568346.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-04-07T18:31:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29455#issuecomment-568346",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_568347.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-04-07T20:24:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29455#issuecomment-568347",
    "user": "https://github.com/LaisRast"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_568348.json:
```json
{
    "body": "<a id='comment:7'></a>\nSorry, it is my mistake since I put it on \"positive review\".\nNow the tests look fine. So I will but it again on \"positive review\".",
    "created_at": "2020-04-07T20:24:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29455#issuecomment-568348",
    "user": "https://github.com/LaisRast"
}
```

<a id='comment:7'></a>
Sorry, it is my mistake since I put it on "positive review".
Now the tests look fine. So I will but it again on "positive review".



---

archive/issue_comments_568349.json:
```json
{
    "body": "Changing branch from \"public/29455\" to \"34f32546d1a1d477b55d22b423a9aa2ade50a0e8\"",
    "created_at": "2020-04-12T15:34:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29455#issuecomment-568349",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/29455" to "34f32546d1a1d477b55d22b423a9aa2ade50a0e8"



---

archive/issue_comments_568350.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-04-12T15:34:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29455#issuecomment-568350",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_092622.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-12T15:34:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29455",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29455#event-92622"
}
```
