# Issue 29287: SPKG type: Make "normal/script/pip" orthogonal to "base/standard/optional/experimental"

archive/issues_029050.json:
```json
{
    "assignees": [],
    "body": "This ticket, inspired by a proposal by embray in #24586, removes the misuse of \"package type\" for the undocumented \"script package\" category (introduced in #19427). Likewise, it removes the same misuse of \"package type\" for the undocumented (as noted in #21033) \"pip package\" category (introduced in #19187).\n\nWith this ticket, `type` has to be one of `base` / `standard` / `optional` / `experimental`.\n\nAll `type=pip` packages are changed to `optional`.\n\nAll `type=script` packages are changed to `optional`; with the exception of `sage_conf`, which is a dependency of `sagelib` and is changed to `standard`.\n\nOrthogonal to `type` is the new notion of a package \"source\", which is defined as follows:\n- `normal` packages have a `checksum.ini` file\n- `pip` packages have a `requirements.txt` file instead (which is used for `pip install`). (This allows us to change the `pyopenssl` package from `script` to `pip`.)\n- `script` packages have neither of the two\n\nThe ticket also makes `script` packages more similar to `normal` packages: They can now optionally have a `package-version.txt` file; and their installation status is recorded.\n\nFinally, this ticket adds documentation to the developer manual.\n\n\n\nCC:  @embray @dimpase @jhpalmieri @sagetrac-tmonteil @vbraun\n\nBranch/Commit: **[`0919086`](https://github.com/sagemath/sagetrac-mirror/commit/091908665ae681b6f9cc1f491d4801acbdfb89ae)**\n\nReviewer: **John Palmieri**\n\nAuthor: **Matthias Koeppe**\n\nComponent: **build**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29287_\n\n",
    "closed_at": "2020-03-25T22:48:51Z",
    "created_at": "2020-03-06T16:46:19Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build",
        "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "SPKG type: Make \"normal/script/pip\" orthogonal to \"base/standard/optional/experimental\"",
    "type": "issue",
    "updated_at": "2020-03-25T22:48:51Z",
    "url": "https://github.com/sagemath/sage/issues/29287",
    "user": "https://github.com/mkoeppe"
}
```
This ticket, inspired by a proposal by embray in #24586, removes the misuse of "package type" for the undocumented "script package" category (introduced in #19427). Likewise, it removes the same misuse of "package type" for the undocumented (as noted in #21033) "pip package" category (introduced in #19187).

With this ticket, `type` has to be one of `base` / `standard` / `optional` / `experimental`.

All `type=pip` packages are changed to `optional`.

All `type=script` packages are changed to `optional`; with the exception of `sage_conf`, which is a dependency of `sagelib` and is changed to `standard`.

Orthogonal to `type` is the new notion of a package "source", which is defined as follows:
- `normal` packages have a `checksum.ini` file
- `pip` packages have a `requirements.txt` file instead (which is used for `pip install`). (This allows us to change the `pyopenssl` package from `script` to `pip`.)
- `script` packages have neither of the two

The ticket also makes `script` packages more similar to `normal` packages: They can now optionally have a `package-version.txt` file; and their installation status is recorded.

Finally, this ticket adds documentation to the developer manual.



CC:  @embray @dimpase @jhpalmieri @sagetrac-tmonteil @vbraun

Branch/Commit: **[`0919086`](https://github.com/sagemath/sagetrac-mirror/commit/091908665ae681b6f9cc1f491d4801acbdfb89ae)**

Reviewer: **John Palmieri**

Author: **Matthias Koeppe**

Component: **build**

_Issue created by migration from https://trac.sagemath.org/ticket/29287_





---

archive/issue_events_404672.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-06T16:46:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29287#event-404672"
}
```



---

archive/issue_events_404673.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-06T16:46:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "000080",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29287#event-404673"
}
```



---

archive/issue_events_404674.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-06T16:46:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29287#event-404674"
}
```



---

archive/issue_events_404675.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-06T16:46:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29287#event-404675"
}
```



---

archive/issue_comments_459204.json:
```json
{
    "body": "Branch: **[u/mkoeppe/spkg_type__make__regular_script_pip__orthogonal_to__standard_optional_experimental_](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/spkg_type__make__regular_script_pip__orthogonal_to__standard_optional_experimental_)**",
    "created_at": "2020-03-07T00:05:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459204",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/spkg_type__make__regular_script_pip__orthogonal_to__standard_optional_experimental_](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/spkg_type__make__regular_script_pip__orthogonal_to__standard_optional_experimental_)**



---

archive/issue_comments_459205.json:
```json
{
    "body": "Commit: **[`90054f6`](https://github.com/sagemath/sagetrac-mirror/commit/90054f65bfbba569d1d95d1de08931f2738ee35f)**",
    "created_at": "2020-03-07T00:14:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459205",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`90054f6`](https://github.com/sagemath/sagetrac-mirror/commit/90054f65bfbba569d1d95d1de08931f2738ee35f)**



---

archive/issue_comments_459206.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2020-03-07T00:14:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459206",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_comments_459207.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c5dcfd650d05a36eafec77a006692e4c3dc02f86\"><code>c5dcfd6</code></a></td><td><code>build/pkgs: Change all 'type=pip' packages to 'type=optional' and add requirements.txt</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9a9b3c3b50eda50bb41f8d2d21f569e32545d155\"><code>9a9b3c3</code></a></td><td><code>build/pkgs: Change all 'type=script' packages to 'type=optional'</code></td></tr><tr><td><code>[90054f6](https://github.com/sagemath/sagetrac-mirror/commit/90054f65bfbba569d1d95d1de08931f2738ee35f)</code></td><td><code>`m4/sage_spkg_collect.m4: Make SPKG_SOURCE={normal</code></td></tr></table>\n",
    "created_at": "2020-03-07T00:14:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459207",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c5dcfd650d05a36eafec77a006692e4c3dc02f86"><code>c5dcfd6</code></a></td><td><code>build/pkgs: Change all 'type=pip' packages to 'type=optional' and add requirements.txt</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9a9b3c3b50eda50bb41f8d2d21f569e32545d155"><code>9a9b3c3</code></a></td><td><code>build/pkgs: Change all 'type=script' packages to 'type=optional'</code></td></tr><tr><td><code>[90054f6](https://github.com/sagemath/sagetrac-mirror/commit/90054f65bfbba569d1d95d1de08931f2738ee35f)</code></td><td><code>`m4/sage_spkg_collect.m4: Make SPKG_SOURCE={normal</code></td></tr></table>




---

archive/issue_comments_459208.json:
```json
{
    "body": "Changed commit from **[`90054f6`](https://github.com/sagemath/sagetrac-mirror/commit/90054f65bfbba569d1d95d1de08931f2738ee35f)** to **[`f7a661c`](https://github.com/sagemath/sagetrac-mirror/commit/f7a661c00eb396629a445b3395056b531f1afad3)**",
    "created_at": "2020-03-07T02:57:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459208",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`90054f6`](https://github.com/sagemath/sagetrac-mirror/commit/90054f65bfbba569d1d95d1de08931f2738ee35f)** to **[`f7a661c`](https://github.com/sagemath/sagetrac-mirror/commit/f7a661c00eb396629a445b3395056b531f1afad3)**



---

archive/issue_comments_459209.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f7a661c00eb396629a445b3395056b531f1afad3\"><code>f7a661c</code></a></td><td><code>sage.misc.package.list_packages: New argument pkg_sources, orthogonal to pkg_types</code></td></tr></table>\n",
    "created_at": "2020-03-07T02:57:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459209",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f7a661c00eb396629a445b3395056b531f1afad3"><code>f7a661c</code></a></td><td><code>sage.misc.package.list_packages: New argument pkg_sources, orthogonal to pkg_types</code></td></tr></table>




---

archive/issue_events_404676.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-07T03:05:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29287#event-404676"
}
```



---

archive/issue_events_404677.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2020-03-07T05:42:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29287#event-404677"
}
```



---

archive/issue_events_404678.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2020-03-07T05:42:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29287#event-404678"
}
```



---

archive/issue_comments_459210.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThis needs documentation.",
    "created_at": "2020-03-07T05:42:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459210",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:5" align="right">comment:5</div>

This needs documentation.



---

archive/issue_comments_459211.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nIndeed, as noted already in #21033.",
    "created_at": "2020-03-08T00:15:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459211",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">comment:6</div>

Indeed, as noted already in #21033.



---

archive/issue_comments_459212.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nJust putting the list in the description somewhere in the docs would help. What is a \"script\" package, anyway?",
    "created_at": "2020-03-08T20:27:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459212",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:7" align="right">comment:7</div>

Just putting the list in the description somewhere in the docs would help. What is a "script" package, anyway?



---

archive/issue_comments_459213.json:
```json
{
    "body": "Dependencies: **#21033**",
    "created_at": "2020-03-08T20:27:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459213",
    "user": "https://github.com/jhpalmieri"
}
```

Dependencies: **#21033**



---

archive/issue_comments_459214.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nYes, I'll work on it",
    "created_at": "2020-03-08T20:29:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459214",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

Yes, I'll work on it



---

archive/issue_comments_459215.json:
```json
{
    "body": "Changed dependencies from **#21033** to **#29096**",
    "created_at": "2020-03-14T21:55:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459215",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#21033** to **#29096**



---

archive/issue_comments_459216.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/09cc8ba22ebda53f6bf1e31935b655dadd62ace0\"><code>09cc8ba</code></a></td><td><code>build/pkgs: Change all 'type=pip' packages to 'type=optional' and add requirements.txt</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8a8100a398304c691cba4746641ba8b56f395dd6\"><code>8a8100a</code></a></td><td><code>build/pkgs: Change all 'type=script' packages to 'type=optional'</code></td></tr><tr><td><code>[ca47dc4](https://github.com/sagemath/sagetrac-mirror/commit/ca47dc4f1cfddf5d138eaa4c2f84424fb6766493)</code></td><td><code>`m4/sage_spkg_collect.m4: Make SPKG_SOURCE={normal</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ff4db4be1222a145e2a17eb819d0db01210e9b74\"><code>ff4db4b</code></a></td><td><code>sage.misc.package.list_packages: New argument pkg_sources, orthogonal to pkg_types</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/041c76d5ad0d4fe8ab09b7242a75c797c435bde5\"><code>041c76d</code></a></td><td><code>Rename spkg-build, spkg-install etc. templates as spkg-build.in, spkg-install.in etc.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4524b04f9ecff7346aec7d27caf985629f8ca7e8\"><code>4524b04</code></a></td><td><code>Update developer manual</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/27240830696cfe7c140b98f6120382b99f8b73c5\"><code>2724083</code></a></td><td><code>Undo rename of build/pkgs/*/spkg-install.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec540dd345a3127ef19bdb2def38e63cdb6a3361\"><code>ec540dd</code></a></td><td><code>Fix up sage-spkg</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f819b51bbccb7b13fb9bf12c4f6e6aefb37bc3b6\"><code>f819b51</code></a></td><td><code>Merge branch 't/29096/rename_spkg_build__spkg_install_etc__templates_as_spkg_build_in__spkg_install_in_etc_' into t/29287/spkg_type__make__regular_script_pip__orthogonal_to__standard_optional_experimental_</code></td></tr></table>\n",
    "created_at": "2020-03-14T21:55:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459216",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/09cc8ba22ebda53f6bf1e31935b655dadd62ace0"><code>09cc8ba</code></a></td><td><code>build/pkgs: Change all 'type=pip' packages to 'type=optional' and add requirements.txt</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8a8100a398304c691cba4746641ba8b56f395dd6"><code>8a8100a</code></a></td><td><code>build/pkgs: Change all 'type=script' packages to 'type=optional'</code></td></tr><tr><td><code>[ca47dc4](https://github.com/sagemath/sagetrac-mirror/commit/ca47dc4f1cfddf5d138eaa4c2f84424fb6766493)</code></td><td><code>`m4/sage_spkg_collect.m4: Make SPKG_SOURCE={normal</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ff4db4be1222a145e2a17eb819d0db01210e9b74"><code>ff4db4b</code></a></td><td><code>sage.misc.package.list_packages: New argument pkg_sources, orthogonal to pkg_types</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/041c76d5ad0d4fe8ab09b7242a75c797c435bde5"><code>041c76d</code></a></td><td><code>Rename spkg-build, spkg-install etc. templates as spkg-build.in, spkg-install.in etc.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4524b04f9ecff7346aec7d27caf985629f8ca7e8"><code>4524b04</code></a></td><td><code>Update developer manual</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/27240830696cfe7c140b98f6120382b99f8b73c5"><code>2724083</code></a></td><td><code>Undo rename of build/pkgs/*/spkg-install.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec540dd345a3127ef19bdb2def38e63cdb6a3361"><code>ec540dd</code></a></td><td><code>Fix up sage-spkg</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f819b51bbccb7b13fb9bf12c4f6e6aefb37bc3b6"><code>f819b51</code></a></td><td><code>Merge branch 't/29096/rename_spkg_build__spkg_install_etc__templates_as_spkg_build_in__spkg_install_in_etc_' into t/29287/spkg_type__make__regular_script_pip__orthogonal_to__standard_optional_experimental_</code></td></tr></table>




---

archive/issue_comments_459217.json:
```json
{
    "body": "Changed commit from **[`f7a661c`](https://github.com/sagemath/sagetrac-mirror/commit/f7a661c00eb396629a445b3395056b531f1afad3)** to **[`f819b51`](https://github.com/sagemath/sagetrac-mirror/commit/f819b51bbccb7b13fb9bf12c4f6e6aefb37bc3b6)**",
    "created_at": "2020-03-14T21:55:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459217",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f7a661c`](https://github.com/sagemath/sagetrac-mirror/commit/f7a661c00eb396629a445b3395056b531f1afad3)** to **[`f819b51`](https://github.com/sagemath/sagetrac-mirror/commit/f819b51bbccb7b13fb9bf12c4f6e6aefb37bc3b6)**



---

archive/issue_comments_459218.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nRebased on 9.1.beta7, merged #29096 to avoid conflicts in documentation",
    "created_at": "2020-03-14T21:56:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459218",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:11" align="right">comment:11</div>

Rebased on 9.1.beta7, merged #29096 to avoid conflicts in documentation



---

archive/issue_comments_459219.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,10 +1,10 @@\n This would enable having \"optional\" \"script\" packages. (Needed for #27952 - libnauty)\n \n-`type` would only be used for \"standard/optional/experimental\".\n+`type` would only be used for `standard`/`optional`/`experimental`.\n \n-- regular packages have a `checksum.ini`\n-- pip packages have `requirements.txt` instead\n-- script packages have neither of the two\n+- `normal` packages have a `checksum.ini`\n+- `pip` packages have `requirements.txt` instead\n+- `script` packages have neither of the two\n \n \n \n``````\n",
    "created_at": "2020-03-14T22:26:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459219",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,10 +1,10 @@
 This would enable having "optional" "script" packages. (Needed for #27952 - libnauty)
 
-`type` would only be used for "standard/optional/experimental".
+`type` would only be used for `standard`/`optional`/`experimental`.
 
-- regular packages have a `checksum.ini`
-- pip packages have `requirements.txt` instead
-- script packages have neither of the two
+- `normal` packages have a `checksum.ini`
+- `pip` packages have `requirements.txt` instead
+- `script` packages have neither of the two
 
 
 
``````




---

archive/issue_events_404679.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-14T22:26:31Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "title_is": "SPKG type: Make \"normal/script/pip\" orthogonal to \"standard/optional/experimental\"",
    "title_was": "SPKG type: Make \"regular/script/pip\" orthogonal to \"standard/optional/experimental\"",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29287#event-404679"
}
```



---

archive/issue_comments_459220.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/678f4cd2b66a30481f1160af45a70fb8b36350ac\"><code>678f4cd</code></a></td><td><code>src/doc/en/developer/packaging.rst: Update doc</code></td></tr></table>\n",
    "created_at": "2020-03-14T23:01:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459220",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/678f4cd2b66a30481f1160af45a70fb8b36350ac"><code>678f4cd</code></a></td><td><code>src/doc/en/developer/packaging.rst: Update doc</code></td></tr></table>




---

archive/issue_comments_459221.json:
```json
{
    "body": "Changed commit from **[`f819b51`](https://github.com/sagemath/sagetrac-mirror/commit/f819b51bbccb7b13fb9bf12c4f6e6aefb37bc3b6)** to **[`678f4cd`](https://github.com/sagemath/sagetrac-mirror/commit/678f4cd2b66a30481f1160af45a70fb8b36350ac)**",
    "created_at": "2020-03-14T23:01:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459221",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f819b51`](https://github.com/sagemath/sagetrac-mirror/commit/f819b51bbccb7b13fb9bf12c4f6e6aefb37bc3b6)** to **[`678f4cd`](https://github.com/sagemath/sagetrac-mirror/commit/678f4cd2b66a30481f1160af45a70fb8b36350ac)**



---

archive/issue_comments_459222.json:
```json
{
    "body": "Changed commit from **[`678f4cd`](https://github.com/sagemath/sagetrac-mirror/commit/678f4cd2b66a30481f1160af45a70fb8b36350ac)** to **[`b80d88f`](https://github.com/sagemath/sagetrac-mirror/commit/b80d88f851cc3ab3119ac5da25d4c5636e415ba8)**",
    "created_at": "2020-03-14T23:27:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459222",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`678f4cd`](https://github.com/sagemath/sagetrac-mirror/commit/678f4cd2b66a30481f1160af45a70fb8b36350ac)** to **[`b80d88f`](https://github.com/sagemath/sagetrac-mirror/commit/b80d88f851cc3ab3119ac5da25d4c5636e415ba8)**



---

archive/issue_comments_459223.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/28d5c92c16821d981cdfddd8078695c6fc8779fb\"><code>28d5c92</code></a></td><td><code>build/make/Makefile.in: Install pip packages using 'pip install -r requirements.txt'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b80d88f851cc3ab3119ac5da25d4c5636e415ba8\"><code>b80d88f</code></a></td><td><code>Update doc</code></td></tr></table>\n",
    "created_at": "2020-03-14T23:27:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459223",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/28d5c92c16821d981cdfddd8078695c6fc8779fb"><code>28d5c92</code></a></td><td><code>build/make/Makefile.in: Install pip packages using 'pip install -r requirements.txt'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b80d88f851cc3ab3119ac5da25d4c5636e415ba8"><code>b80d88f</code></a></td><td><code>Update doc</code></td></tr></table>




---

archive/issue_comments_459224.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4793466dba3f397ee0e4d60084cc8e7e2b5fed67\"><code>4793466</code></a></td><td><code>build/pkgs/sage_conf: Change type to standard</code></td></tr></table>\n",
    "created_at": "2020-03-15T00:11:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459224",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4793466dba3f397ee0e4d60084cc8e7e2b5fed67"><code>4793466</code></a></td><td><code>build/pkgs/sage_conf: Change type to standard</code></td></tr></table>




---

archive/issue_comments_459225.json:
```json
{
    "body": "Changed commit from **[`b80d88f`](https://github.com/sagemath/sagetrac-mirror/commit/b80d88f851cc3ab3119ac5da25d4c5636e415ba8)** to **[`4793466`](https://github.com/sagemath/sagetrac-mirror/commit/4793466dba3f397ee0e4d60084cc8e7e2b5fed67)**",
    "created_at": "2020-03-15T00:11:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459225",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b80d88f`](https://github.com/sagemath/sagetrac-mirror/commit/b80d88f851cc3ab3119ac5da25d4c5636e415ba8)** to **[`4793466`](https://github.com/sagemath/sagetrac-mirror/commit/4793466dba3f397ee0e4d60084cc8e7e2b5fed67)**



---

archive/issue_comments_459226.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nAdded documentation describing normal, pip, and script packages.",
    "created_at": "2020-03-15T01:33:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459226",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:16" align="right">comment:16</div>

Added documentation describing normal, pip, and script packages.



---

archive/issue_comments_459227.json:
```json
{
    "body": "Changed commit from **[`4793466`](https://github.com/sagemath/sagetrac-mirror/commit/4793466dba3f397ee0e4d60084cc8e7e2b5fed67)** to **[`a6cea8e`](https://github.com/sagemath/sagetrac-mirror/commit/a6cea8e03928741fc0830e83dd85430d313ed2f9)**",
    "created_at": "2020-03-15T01:47:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459227",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4793466`](https://github.com/sagemath/sagetrac-mirror/commit/4793466dba3f397ee0e4d60084cc8e7e2b5fed67)** to **[`a6cea8e`](https://github.com/sagemath/sagetrac-mirror/commit/a6cea8e03928741fc0830e83dd85430d313ed2f9)**



---

archive/issue_comments_459228.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72e77195c152e74834bf194e245ea05d3033a6e1\"><code>72e7719</code></a></td><td><code>m4/sage_spkg_collect.m4: Remove handling of type=script</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dcaaa85abef036f2c23e14acc8ee741604dfa662\"><code>dcaaa85</code></a></td><td><code>m4/sage_spkg_collect.m4: Remove special-casing of unversioned (script/pip) packages</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/52902eb5ce7daed8ccb0e8e4fe01d27ed63d4451\"><code>52902eb</code></a></td><td><code>m4/sage_spkg_collect.m4: For unversioned packages, set version to 'none' instead of name of spkg</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ff871b79c5154f7b007a5485be3131b3ebce2436\"><code>ff871b7</code></a></td><td><code>build/make/Makefile.in: Version and record script packages like normal packages</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa8cdc5046bb8f1f0d0a0f2bbb94f41f7df765b0\"><code>aa8cdc5</code></a></td><td><code>Update doc regarding versioning/recording of script packages</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a6cea8e03928741fc0830e83dd85430d313ed2f9\"><code>a6cea8e</code></a></td><td><code>build/make/Makefile.in: Mark the targets SPKG and SPKG-clean as phony</code></td></tr></table>\n",
    "created_at": "2020-03-15T01:47:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459228",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72e77195c152e74834bf194e245ea05d3033a6e1"><code>72e7719</code></a></td><td><code>m4/sage_spkg_collect.m4: Remove handling of type=script</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dcaaa85abef036f2c23e14acc8ee741604dfa662"><code>dcaaa85</code></a></td><td><code>m4/sage_spkg_collect.m4: Remove special-casing of unversioned (script/pip) packages</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/52902eb5ce7daed8ccb0e8e4fe01d27ed63d4451"><code>52902eb</code></a></td><td><code>m4/sage_spkg_collect.m4: For unversioned packages, set version to 'none' instead of name of spkg</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ff871b79c5154f7b007a5485be3131b3ebce2436"><code>ff871b7</code></a></td><td><code>build/make/Makefile.in: Version and record script packages like normal packages</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa8cdc5046bb8f1f0d0a0f2bbb94f41f7df765b0"><code>aa8cdc5</code></a></td><td><code>Update doc regarding versioning/recording of script packages</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a6cea8e03928741fc0830e83dd85430d313ed2f9"><code>a6cea8e</code></a></td><td><code>build/make/Makefile.in: Mark the targets SPKG and SPKG-clean as phony</code></td></tr></table>




---

archive/issue_comments_459229.json:
```json
{
    "body": "Changed commit from **[`a6cea8e`](https://github.com/sagemath/sagetrac-mirror/commit/a6cea8e03928741fc0830e83dd85430d313ed2f9)** to **[`d6005a3`](https://github.com/sagemath/sagetrac-mirror/commit/d6005a301cd99a4e549a84fe59ecbd6dfddb08d7)**",
    "created_at": "2020-03-15T01:58:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459229",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a6cea8e`](https://github.com/sagemath/sagetrac-mirror/commit/a6cea8e03928741fc0830e83dd85430d313ed2f9)** to **[`d6005a3`](https://github.com/sagemath/sagetrac-mirror/commit/d6005a301cd99a4e549a84fe59ecbd6dfddb08d7)**



---

archive/issue_comments_459230.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d6005a301cd99a4e549a84fe59ecbd6dfddb08d7\"><code>d6005a3</code></a></td><td><code>src/bin/sage-list-packages: Remove use of type=pip</code></td></tr></table>\n",
    "created_at": "2020-03-15T01:58:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459230",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d6005a301cd99a4e549a84fe59ecbd6dfddb08d7"><code>d6005a3</code></a></td><td><code>src/bin/sage-list-packages: Remove use of type=pip</code></td></tr></table>




---

archive/issue_comments_459231.json:
```json
{
    "body": "Changed commit from **[`d6005a3`](https://github.com/sagemath/sagetrac-mirror/commit/d6005a301cd99a4e549a84fe59ecbd6dfddb08d7)** to **[`d4b4d81`](https://github.com/sagemath/sagetrac-mirror/commit/d4b4d81f47f538acf6eef1468634502a7bb00b98)**",
    "created_at": "2020-03-15T02:03:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459231",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d6005a3`](https://github.com/sagemath/sagetrac-mirror/commit/d6005a301cd99a4e549a84fe59ecbd6dfddb08d7)** to **[`d4b4d81`](https://github.com/sagemath/sagetrac-mirror/commit/d4b4d81f47f538acf6eef1468634502a7bb00b98)**



---

archive/issue_comments_459232.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4b4d81f47f538acf6eef1468634502a7bb00b98\"><code>d4b4d81</code></a></td><td><code>sage.misc.package.list_packages: For unversioned packages, use 'none' as version</code></td></tr></table>\n",
    "created_at": "2020-03-15T02:03:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459232",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4b4d81f47f538acf6eef1468634502a7bb00b98"><code>d4b4d81</code></a></td><td><code>sage.misc.package.list_packages: For unversioned packages, use 'none' as version</code></td></tr></table>




---

archive/issue_comments_459233.json:
```json
{
    "body": "Changed commit from **[`d4b4d81`](https://github.com/sagemath/sagetrac-mirror/commit/d4b4d81f47f538acf6eef1468634502a7bb00b98)** to **[`cb3c913`](https://github.com/sagemath/sagetrac-mirror/commit/cb3c9137ba9a6561ebd2d6cf8312e8f3401fe7ae)**",
    "created_at": "2020-03-15T02:19:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459233",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d4b4d81`](https://github.com/sagemath/sagetrac-mirror/commit/d4b4d81f47f538acf6eef1468634502a7bb00b98)** to **[`cb3c913`](https://github.com/sagemath/sagetrac-mirror/commit/cb3c9137ba9a6561ebd2d6cf8312e8f3401fe7ae)**



---

archive/issue_comments_459234.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec2805e71f473a51e87581b015c516d85520205c\"><code>ec2805e</code></a></td><td><code>m4/sage_spkg_collect.m4: Fix up collection of dependencies</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cb3c9137ba9a6561ebd2d6cf8312e8f3401fe7ae\"><code>cb3c913</code></a></td><td><code>build/pkgs/texlive/spkg-install: Fix up path</code></td></tr></table>\n",
    "created_at": "2020-03-15T02:19:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459234",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec2805e71f473a51e87581b015c516d85520205c"><code>ec2805e</code></a></td><td><code>m4/sage_spkg_collect.m4: Fix up collection of dependencies</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cb3c9137ba9a6561ebd2d6cf8312e8f3401fe7ae"><code>cb3c913</code></a></td><td><code>build/pkgs/texlive/spkg-install: Fix up path</code></td></tr></table>




---

archive/issue_events_404680.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-15T03:12:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29287#event-404680"
}
```



---

archive/issue_events_404681.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-15T03:12:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29287#event-404681"
}
```



---

archive/issue_events_404682.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-15T03:12:20Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "title_is": "SPKG type: Make \"normal/script/pip\" orthogonal to \"base/standard/optional/experimental\"",
    "title_was": "SPKG type: Make \"normal/script/pip\" orthogonal to \"standard/optional/experimental\"",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29287#event-404682"
}
```



---

archive/issue_comments_459235.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,10 +1,18 @@\n-This would enable having \"optional\" \"script\" packages. (Needed for #27952 - libnauty)\n+This ticket, inspired by a proposal by embray in #24586, removes the misuse of \"package type\" for the undocumented \"script package\" category (introduced in #19427). Likewise, it removes the same misuse of \"package type\" for the undocumented (as noted in #21033) \"pip package\" category (introduced in #19187).\n \n-`type` would only be used for `standard`/`optional`/`experimental`.\n+With this ticket, `type` has to be one of `base` / `standard` / `optional` / `experimental`.\n \n-- `normal` packages have a `checksum.ini`\n-- `pip` packages have `requirements.txt` instead\n+All `type=pip` packages are changed to `optional`.\n+\n+All `type=script` packages are changed to `optional`; with the exception of `sage_conf`, which is a dependency of `sagelib` and is changed to `standard`.\n+\n+Orthogonal to `type` is the new notion of a package \"source\", which is defined as follows:\n+- `normal` packages have a `checksum.ini` file\n+- `pip` packages have a `requirements.txt` file instead (which is used for `pip install`)\n - `script` packages have neither of the two\n \n+The ticket also makes `script` packages more similar to `normal` packages: They can now optionally have a `package-version.txt` file; and their installation status is recorded.\n+\n+Finally, this ticket adds documentation to the developer manual.\n \n \n``````\n",
    "created_at": "2020-03-15T03:12:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459235",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,10 +1,18 @@
-This would enable having "optional" "script" packages. (Needed for #27952 - libnauty)
+This ticket, inspired by a proposal by embray in #24586, removes the misuse of "package type" for the undocumented "script package" category (introduced in #19427). Likewise, it removes the same misuse of "package type" for the undocumented (as noted in #21033) "pip package" category (introduced in #19187).
 
-`type` would only be used for `standard`/`optional`/`experimental`.
+With this ticket, `type` has to be one of `base` / `standard` / `optional` / `experimental`.
 
-- `normal` packages have a `checksum.ini`
-- `pip` packages have `requirements.txt` instead
+All `type=pip` packages are changed to `optional`.
+
+All `type=script` packages are changed to `optional`; with the exception of `sage_conf`, which is a dependency of `sagelib` and is changed to `standard`.
+
+Orthogonal to `type` is the new notion of a package "source", which is defined as follows:
+- `normal` packages have a `checksum.ini` file
+- `pip` packages have a `requirements.txt` file instead (which is used for `pip install`)
 - `script` packages have neither of the two
 
+The ticket also makes `script` packages more similar to `normal` packages: They can now optionally have a `package-version.txt` file; and their installation status is recorded.
+
+Finally, this ticket adds documentation to the developer manual.
 
 
``````




---

archive/issue_comments_459236.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nWhy do you had all these `.in`? Such a change should be agreed on sage-devel.",
    "created_at": "2020-03-15T22:17:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459236",
    "user": "https://github.com/videlec"
}
```

<div id="comment:22" align="right">comment:22</div>

Why do you had all these `.in`? Such a change should be agreed on sage-devel.



---

archive/issue_comments_459237.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nUnless I misunderstood something, in the section `Install scripts of script packages`, <code>\\`\\`spkg-install\\`\\`</code> should be <code>\\`\\`spkg-install.in\\`\\`</code> (twice).",
    "created_at": "2020-03-15T22:18:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459237",
    "user": "https://github.com/videlec"
}
```

<div id="comment:23" align="right">comment:23</div>

Unless I misunderstood something, in the section `Install scripts of script packages`, <code>\`\`spkg-install\`\`</code> should be <code>\`\`spkg-install.in\`\`</code> (twice).



---

archive/issue_comments_459238.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nChanging to .in happened on #29096.\n\nNo, script packages don't to templating.",
    "created_at": "2020-03-15T22:20:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459238",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:24" align="right">comment:24</div>

Changing to .in happened on #29096.

No, script packages don't to templating.



---

archive/issue_comments_459239.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@videlec](#comment:22):\n> Why do you had all these `.in`? Such a change should be agreed on sage-devel.\n\nwe had an argument about it, and that change should have been done when the actual conversion of most of sage-install scripts into templates happened, a couple of years back. So this change merely corrects an old fault of the naming scheme.",
    "created_at": "2020-03-16T08:35:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459239",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@videlec](#comment:22):
> Why do you had all these `.in`? Such a change should be agreed on sage-devel.

we had an argument about it, and that change should have been done when the actual conversion of most of sage-install scripts into templates happened, a couple of years back. So this change merely corrects an old fault of the naming scheme.



---

archive/issue_comments_459240.json:
```json
{
    "body": "Changed commit from **[`cb3c913`](https://github.com/sagemath/sagetrac-mirror/commit/cb3c9137ba9a6561ebd2d6cf8312e8f3401fe7ae)** to **[`dbb9860`](https://github.com/sagemath/sagetrac-mirror/commit/dbb9860cb41006fbe4108447f4f01e26ed8f0bdd)**",
    "created_at": "2020-03-19T00:09:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459240",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cb3c913`](https://github.com/sagemath/sagetrac-mirror/commit/cb3c9137ba9a6561ebd2d6cf8312e8f3401fe7ae)** to **[`dbb9860`](https://github.com/sagemath/sagetrac-mirror/commit/dbb9860cb41006fbe4108447f4f01e26ed8f0bdd)**



---

archive/issue_comments_459241.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad9e524efa453ae8a944ea4f70b40ab598da4243\"><code>ad9e524</code></a></td><td><code>m4/sage_spkg_collect.m4: Remove handling of type=script</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c977beb6b745cf2ef4803a796c135dce488791b\"><code>6c977be</code></a></td><td><code>m4/sage_spkg_collect.m4: Remove special-casing of unversioned (script/pip) packages</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4e8cd9aa39f9c48ea7ee4543dfbe1c4f2932387\"><code>d4e8cd9</code></a></td><td><code>m4/sage_spkg_collect.m4: For unversioned packages, set version to 'none' instead of name of spkg</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8370225f6c76defe884d9bb40fcf2bf668175689\"><code>8370225</code></a></td><td><code>build/make/Makefile.in: Version and record script packages like normal packages</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/495d49938bd35fa56ec913537f240355c53272a3\"><code>495d499</code></a></td><td><code>Update doc regarding versioning/recording of script packages</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc4ed346119f0780f83038f157e5970cf26f54c4\"><code>bc4ed34</code></a></td><td><code>build/make/Makefile.in: Mark the targets SPKG and SPKG-clean as phony</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d1fd7a73c077f122847b27ef779bde44f9efc430\"><code>d1fd7a7</code></a></td><td><code>src/bin/sage-list-packages: Remove use of type=pip</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/75175db466a0ef461b656fdb1b7b40e7479981f7\"><code>75175db</code></a></td><td><code>sage.misc.package.list_packages: For unversioned packages, use 'none' as version</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d3d78f47429f6d033abdfa47e32453d980f995e5\"><code>d3d78f4</code></a></td><td><code>m4/sage_spkg_collect.m4: Fix up collection of dependencies</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dbb9860cb41006fbe4108447f4f01e26ed8f0bdd\"><code>dbb9860</code></a></td><td><code>build/pkgs/texlive/spkg-install: Fix up path</code></td></tr></table>\n",
    "created_at": "2020-03-19T00:09:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459241",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad9e524efa453ae8a944ea4f70b40ab598da4243"><code>ad9e524</code></a></td><td><code>m4/sage_spkg_collect.m4: Remove handling of type=script</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c977beb6b745cf2ef4803a796c135dce488791b"><code>6c977be</code></a></td><td><code>m4/sage_spkg_collect.m4: Remove special-casing of unversioned (script/pip) packages</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4e8cd9aa39f9c48ea7ee4543dfbe1c4f2932387"><code>d4e8cd9</code></a></td><td><code>m4/sage_spkg_collect.m4: For unversioned packages, set version to 'none' instead of name of spkg</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8370225f6c76defe884d9bb40fcf2bf668175689"><code>8370225</code></a></td><td><code>build/make/Makefile.in: Version and record script packages like normal packages</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/495d49938bd35fa56ec913537f240355c53272a3"><code>495d499</code></a></td><td><code>Update doc regarding versioning/recording of script packages</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc4ed346119f0780f83038f157e5970cf26f54c4"><code>bc4ed34</code></a></td><td><code>build/make/Makefile.in: Mark the targets SPKG and SPKG-clean as phony</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d1fd7a73c077f122847b27ef779bde44f9efc430"><code>d1fd7a7</code></a></td><td><code>src/bin/sage-list-packages: Remove use of type=pip</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/75175db466a0ef461b656fdb1b7b40e7479981f7"><code>75175db</code></a></td><td><code>sage.misc.package.list_packages: For unversioned packages, use 'none' as version</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d3d78f47429f6d033abdfa47e32453d980f995e5"><code>d3d78f4</code></a></td><td><code>m4/sage_spkg_collect.m4: Fix up collection of dependencies</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dbb9860cb41006fbe4108447f4f01e26ed8f0bdd"><code>dbb9860</code></a></td><td><code>build/pkgs/texlive/spkg-install: Fix up path</code></td></tr></table>




---

archive/issue_comments_459242.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nRebased on 9.1.beta8 -- so the diff is easier to read now. Needs review",
    "created_at": "2020-03-19T00:10:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459242",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:27" align="right">comment:27</div>

Rebased on 9.1.beta8 -- so the diff is easier to read now. Needs review



---

archive/issue_comments_459243.json:
```json
{
    "body": "Changed dependencies from **#29096** to none",
    "created_at": "2020-03-19T00:10:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459243",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#29096** to none



---

archive/issue_comments_459244.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nI get a doctest failure:\n\n```\nsage -t --long --warn-long 65.3 src/sage/env.py\n**********************************************************************\nFile \"src/sage/env.py\", line 14, in sage.env\nFailed example:\n    res = subprocess.call([sys.executable, \"-c\", cmd], env=env)  # long time\nExpected:\n    None\nGot:\n    /Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/29090/29287/sage-9.1.beta8\n**********************************************************************\n1 item had failures:\n   1 of   5 in sage.env\n    [45 tests, 1 failure, 1.41 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long 65.3 src/sage/env.py  # 1 doctest failed\n----------------------------------------------------------------------\nTotal time for all tests: 1.4 seconds\n    cpu time: 0.1 seconds\n    cumulative wall time: 1.4 seconds\n```",
    "created_at": "2020-03-19T16:30:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459244",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:28" align="right">comment:28</div>

I get a doctest failure:

```
sage -t --long --warn-long 65.3 src/sage/env.py
**********************************************************************
File "src/sage/env.py", line 14, in sage.env
Failed example:
    res = subprocess.call([sys.executable, "-c", cmd], env=env)  # long time
Expected:
    None
Got:
    /Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/29090/29287/sage-9.1.beta8
**********************************************************************
1 item had failures:
   1 of   5 in sage.env
    [45 tests, 1 failure, 1.41 s]
----------------------------------------------------------------------
sage -t --long --warn-long 65.3 src/sage/env.py  # 1 doctest failed
----------------------------------------------------------------------
Total time for all tests: 1.4 seconds
    cpu time: 0.1 seconds
    cumulative wall time: 1.4 seconds
```



---

archive/issue_comments_459245.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nI don't know m4 syntax. Is the indentation remaining after you delete `if test \"$SPKG_NAME\" != \"$SPKG_VERSION\"; then` meaningful?",
    "created_at": "2020-03-19T17:00:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459245",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:29" align="right">comment:29</div>

I don't know m4 syntax. Is the indentation remaining after you delete `if test "$SPKG_NAME" != "$SPKG_VERSION"; then` meaningful?



---

archive/issue_comments_459246.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nNo, it is not meaningful, I was just keeping the diff small.",
    "created_at": "2020-03-19T17:04:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459246",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:30" align="right">comment:30</div>

No, it is not meaningful, I was just keeping the diff small.



---

archive/issue_comments_459247.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nWhat do you think about this proposed change:\n\n```diff\ndiff --git a/src/doc/en/developer/packaging.rst b/src/doc/en/developer/packaging.rst\nindex 6934f4ebbf..34f5651bc1 100644\n--- a/src/doc/en/developer/packaging.rst\n+++ b/src/doc/en/developer/packaging.rst\n@@ -87,8 +87,9 @@ the following source types:\n    - is obtained directly from https://pypi.org/;\n \n    - the version to be installed is determined using the required file\n-     ``requirements.txt`` (see\n-     https://pip.pypa.io/en/stable/reference/pip_install/#requirements-file-format);\n+     ``requirements.txt`` -- in its simplest form, this file just\n+     contains the name of the package (more details at\n+     https://pip.pypa.io/en/stable/user_guide/#requirements-files);\n \n    - Sage installs the package using the ``pip`` package manager;\n \n```\nNote: different link, in addition to the changed text.",
    "created_at": "2020-03-19T17:10:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459247",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:31" align="right">comment:31</div>

What do you think about this proposed change:

```diff
diff --git a/src/doc/en/developer/packaging.rst b/src/doc/en/developer/packaging.rst
index 6934f4ebbf..34f5651bc1 100644
--- a/src/doc/en/developer/packaging.rst
+++ b/src/doc/en/developer/packaging.rst
@@ -87,8 +87,9 @@ the following source types:
    - is obtained directly from https://pypi.org/;
 
    - the version to be installed is determined using the required file
-     ``requirements.txt`` (see
-     https://pip.pypa.io/en/stable/reference/pip_install/#requirements-file-format);
+     ``requirements.txt`` -- in its simplest form, this file just
+     contains the name of the package (more details at
+     https://pip.pypa.io/en/stable/user_guide/#requirements-files);
 
    - Sage installs the package using the ``pip`` package manager;
 
```
Note: different link, in addition to the changed text.



---

archive/issue_comments_459248.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nExcellent, please push it to the ticket",
    "created_at": "2020-03-19T17:11:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459248",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:32" align="right">comment:32</div>

Excellent, please push it to the ticket



---

archive/issue_comments_459249.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/spkg_type__make__regular_script_pip__orthogonal_to__standard_optional_experimental_](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/spkg_type__make__regular_script_pip__orthogonal_to__standard_optional_experimental_)** to **[u/jhpalmieri/spkg_type__make__regular_script_pip__orthogonal_to__standard_optional_experimental_](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/spkg_type__make__regular_script_pip__orthogonal_to__standard_optional_experimental_)**",
    "created_at": "2020-03-19T17:16:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459249",
    "user": "https://github.com/jhpalmieri"
}
```

Changed branch from **[u/mkoeppe/spkg_type__make__regular_script_pip__orthogonal_to__standard_optional_experimental_](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/spkg_type__make__regular_script_pip__orthogonal_to__standard_optional_experimental_)** to **[u/jhpalmieri/spkg_type__make__regular_script_pip__orthogonal_to__standard_optional_experimental_](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/spkg_type__make__regular_script_pip__orthogonal_to__standard_optional_experimental_)**



---

archive/issue_comments_459250.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nNot necessarily for this ticket, but should `pyopenssl` be a pip package?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8b1d5ca6074561315be14ea4f072149b88fe2fd0\"><code>8b1d5ca</code></a></td><td><code>trac 29287: rewording documentation</code></td></tr></table>\n",
    "created_at": "2020-03-19T17:19:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459250",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:34" align="right">comment:34</div>

Not necessarily for this ticket, but should `pyopenssl` be a pip package?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8b1d5ca6074561315be14ea4f072149b88fe2fd0"><code>8b1d5ca</code></a></td><td><code>trac 29287: rewording documentation</code></td></tr></table>




---

archive/issue_comments_459251.json:
```json
{
    "body": "Changed commit from **[`dbb9860`](https://github.com/sagemath/sagetrac-mirror/commit/dbb9860cb41006fbe4108447f4f01e26ed8f0bdd)** to **[`8b1d5ca`](https://github.com/sagemath/sagetrac-mirror/commit/8b1d5ca6074561315be14ea4f072149b88fe2fd0)**",
    "created_at": "2020-03-19T17:19:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459251",
    "user": "https://github.com/jhpalmieri"
}
```

Changed commit from **[`dbb9860`](https://github.com/sagemath/sagetrac-mirror/commit/dbb9860cb41006fbe4108447f4f01e26ed8f0bdd)** to **[`8b1d5ca`](https://github.com/sagemath/sagetrac-mirror/commit/8b1d5ca6074561315be14ea4f072149b88fe2fd0)**



---

archive/issue_comments_459252.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nGood idea. I'll make this change.",
    "created_at": "2020-03-19T17:25:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459252",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:35" align="right">comment:35</div>

Good idea. I'll make this change.



---

archive/issue_comments_459253.json:
```json
{
    "body": "Changed branch from **[u/jhpalmieri/spkg_type__make__regular_script_pip__orthogonal_to__standard_optional_experimental_](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/spkg_type__make__regular_script_pip__orthogonal_to__standard_optional_experimental_)** to **[u/mkoeppe/spkg_type__make__regular_script_pip__orthogonal_to__standard_optional_experimental_](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/spkg_type__make__regular_script_pip__orthogonal_to__standard_optional_experimental_)**",
    "created_at": "2020-03-19T17:28:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459253",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/jhpalmieri/spkg_type__make__regular_script_pip__orthogonal_to__standard_optional_experimental_](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/spkg_type__make__regular_script_pip__orthogonal_to__standard_optional_experimental_)** to **[u/mkoeppe/spkg_type__make__regular_script_pip__orthogonal_to__standard_optional_experimental_](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/spkg_type__make__regular_script_pip__orthogonal_to__standard_optional_experimental_)**



---

archive/issue_comments_459254.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplying to [@jhpalmieri](#comment:28):\n> I get a doctest failure:\n> \n> ```\n> sage -t --long --warn-long 65.3 src/sage/env.py\n> **********************************************************************\n> File \"src/sage/env.py\", line 14, in sage.env\n> Failed example:\n>     res = subprocess.call([sys.executable, \"-c\", cmd], env=env)  # long time\n> Expected:\n>     None\n> Got:\n>     /Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/29090/29287/sage-9.1.beta8\n> ```\n\nHa, this doctest is funny. I'll fix it.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/057a66bdd05ad75539f2bdbd27561af3f0d57d65\"><code>057a66b</code></a></td><td><code>Make pyopenssl a pip package</code></td></tr></table>\n",
    "created_at": "2020-03-19T17:48:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459254",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:37" align="right">comment:37</div>

Replying to [@jhpalmieri](#comment:28):
> I get a doctest failure:
> 
> ```
> sage -t --long --warn-long 65.3 src/sage/env.py
> **********************************************************************
> File "src/sage/env.py", line 14, in sage.env
> Failed example:
>     res = subprocess.call([sys.executable, "-c", cmd], env=env)  # long time
> Expected:
>     None
> Got:
>     /Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/29090/29287/sage-9.1.beta8
> ```

Ha, this doctest is funny. I'll fix it.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/057a66bdd05ad75539f2bdbd27561af3f0d57d65"><code>057a66b</code></a></td><td><code>Make pyopenssl a pip package</code></td></tr></table>




---

archive/issue_comments_459255.json:
```json
{
    "body": "Changed commit from **[`8b1d5ca`](https://github.com/sagemath/sagetrac-mirror/commit/8b1d5ca6074561315be14ea4f072149b88fe2fd0)** to **[`057a66b`](https://github.com/sagemath/sagetrac-mirror/commit/057a66bdd05ad75539f2bdbd27561af3f0d57d65)**",
    "created_at": "2020-03-19T17:48:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459255",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[`8b1d5ca`](https://github.com/sagemath/sagetrac-mirror/commit/8b1d5ca6074561315be14ea4f072149b88fe2fd0)** to **[`057a66b`](https://github.com/sagemath/sagetrac-mirror/commit/057a66bdd05ad75539f2bdbd27561af3f0d57d65)**



---

archive/issue_comments_459256.json:
```json
{
    "body": "Changed commit from **[`057a66b`](https://github.com/sagemath/sagetrac-mirror/commit/057a66bdd05ad75539f2bdbd27561af3f0d57d65)** to **[`8f6323e`](https://github.com/sagemath/sagetrac-mirror/commit/8f6323ed8af19d0c1301c65e41d3b219a8fa7a43)**",
    "created_at": "2020-03-19T18:28:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459256",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`057a66b`](https://github.com/sagemath/sagetrac-mirror/commit/057a66bdd05ad75539f2bdbd27561af3f0d57d65)** to **[`8f6323e`](https://github.com/sagemath/sagetrac-mirror/commit/8f6323ed8af19d0c1301c65e41d3b219a8fa7a43)**



---

archive/issue_comments_459257.json:
```json
{
    "body": "<div id=\"comment:38\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8f6323ed8af19d0c1301c65e41d3b219a8fa7a43\"><code>8f6323e</code></a></td><td><code>src/sage/env.py: Fix up doctest on starting sage without SAGE_* variables</code></td></tr></table>\n",
    "created_at": "2020-03-19T18:28:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459257",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:38"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8f6323ed8af19d0c1301c65e41d3b219a8fa7a43"><code>8f6323e</code></a></td><td><code>src/sage/env.py: Fix up doctest on starting sage without SAGE_* variables</code></td></tr></table>




---

archive/issue_comments_459258.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,7 +8,7 @@\n \n Orthogonal to `type` is the new notion of a package \"source\", which is defined as follows:\n - `normal` packages have a `checksum.ini` file\n-- `pip` packages have a `requirements.txt` file instead (which is used for `pip install`)\n+- `pip` packages have a `requirements.txt` file instead (which is used for `pip install`). (This allows us to change the `pyopenssl` package from `script` to `pip`.)\n - `script` packages have neither of the two\n \n The ticket also makes `script` packages more similar to `normal` packages: They can now optionally have a `package-version.txt` file; and their installation status is recorded.\n``````\n",
    "created_at": "2020-03-19T18:31:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459258",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,7 +8,7 @@
 
 Orthogonal to `type` is the new notion of a package "source", which is defined as follows:
 - `normal` packages have a `checksum.ini` file
-- `pip` packages have a `requirements.txt` file instead (which is used for `pip install`)
+- `pip` packages have a `requirements.txt` file instead (which is used for `pip install`). (This allows us to change the `pyopenssl` package from `script` to `pip`.)
 - `script` packages have neither of the two
 
 The ticket also makes `script` packages more similar to `normal` packages: They can now optionally have a `package-version.txt` file; and their installation status is recorded.
``````




---

archive/issue_comments_459259.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nCan you explain the doctest failure? For some reason, there was no output before, but now there is output?",
    "created_at": "2020-03-19T20:19:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459259",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:40" align="right">comment:40</div>

Can you explain the doctest failure? For some reason, there was no output before, but now there is output?



---

archive/issue_comments_459260.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nThe doctest was actually \"broken\" by #29038 in the situation when the `sage_conf` package that it added is installed.\nSee ticket description of #29038 -- in particular, it provides `SAGE_ROOT` in the situation that Python imports `sage.all` outside of a sage-env.\nThat doctest was testing that `SAGE_ROOT` is not provided in that situation -- when it should simply have tested that the `sage.all` module works.\n\nThe present ticket makes sure that `sage_conf` is always installed (fixes #29365, for example), and so you now saw the doctest failure.",
    "created_at": "2020-03-19T20:25:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459260",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:41" align="right">comment:41</div>

The doctest was actually "broken" by #29038 in the situation when the `sage_conf` package that it added is installed.
See ticket description of #29038 -- in particular, it provides `SAGE_ROOT` in the situation that Python imports `sage.all` outside of a sage-env.
That doctest was testing that `SAGE_ROOT` is not provided in that situation -- when it should simply have tested that the `sage.all` module works.

The present ticket makes sure that `sage_conf` is always installed (fixes #29365, for example), and so you now saw the doctest failure.



---

archive/issue_comments_459261.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nWhy do we need to give a longer path in the `spkg-install` file for `texlive`?",
    "created_at": "2020-03-19T22:46:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459261",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:42" align="right">comment:42</div>

Why do we need to give a longer path in the `spkg-install` file for `texlive`?



---

archive/issue_comments_459262.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nReplying to [@jhpalmieri](#comment:42):\n> Why do we need to give a longer path in the `spkg-install` file for `texlive`?\n\nThis is an incidental bugfix for something that was broken by some earlier ticket. Seems nobody has tried `sage -i texlive` in a while.",
    "created_at": "2020-03-19T22:51:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459262",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:43" align="right">comment:43</div>

Replying to [@jhpalmieri](#comment:42):
> Why do we need to give a longer path in the `spkg-install` file for `texlive`?

This is an incidental bugfix for something that was broken by some earlier ticket. Seems nobody has tried `sage -i texlive` in a while.



---

archive/issue_comments_459263.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/spkg_type__make__regular_script_pip__orthogonal_to__standard_optional_experimental_](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/spkg_type__make__regular_script_pip__orthogonal_to__standard_optional_experimental_)** to **[u/jhpalmieri/spkg_type__make__regular_script_pip__orthogonal_to__standard_optional_experimental_](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/spkg_type__make__regular_script_pip__orthogonal_to__standard_optional_experimental_)**",
    "created_at": "2020-03-19T22:51:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459263",
    "user": "https://github.com/jhpalmieri"
}
```

Changed branch from **[u/mkoeppe/spkg_type__make__regular_script_pip__orthogonal_to__standard_optional_experimental_](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/spkg_type__make__regular_script_pip__orthogonal_to__standard_optional_experimental_)** to **[u/jhpalmieri/spkg_type__make__regular_script_pip__orthogonal_to__standard_optional_experimental_](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/spkg_type__make__regular_script_pip__orthogonal_to__standard_optional_experimental_)**



---

archive/issue_comments_459264.json:
```json
{
    "body": "Changed commit from **[`8f6323e`](https://github.com/sagemath/sagetrac-mirror/commit/8f6323ed8af19d0c1301c65e41d3b219a8fa7a43)** to **[`0919086`](https://github.com/sagemath/sagetrac-mirror/commit/091908665ae681b6f9cc1f491d4801acbdfb89ae)**",
    "created_at": "2020-03-19T22:53:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459264",
    "user": "https://github.com/jhpalmieri"
}
```

Changed commit from **[`8f6323e`](https://github.com/sagemath/sagetrac-mirror/commit/8f6323ed8af19d0c1301c65e41d3b219a8fa7a43)** to **[`0919086`](https://github.com/sagemath/sagetrac-mirror/commit/091908665ae681b6f9cc1f491d4801acbdfb89ae)**



---

archive/issue_comments_459265.json:
```json
{
    "body": "Reviewer: **John Palmieri**",
    "created_at": "2020-03-19T22:53:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459265",
    "user": "https://github.com/jhpalmieri"
}
```

Reviewer: **John Palmieri**



---

archive/issue_comments_459266.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nA few small changes. If you're happy with these, positive review from me.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/091908665ae681b6f9cc1f491d4801acbdfb89ae\"><code>0919086</code></a></td><td><code>trac 29287: doc fixes</code></td></tr></table>\n",
    "created_at": "2020-03-19T22:53:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459266",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:45" align="right">comment:45</div>

A few small changes. If you're happy with these, positive review from me.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/091908665ae681b6f9cc1f491d4801acbdfb89ae"><code>0919086</code></a></td><td><code>trac 29287: doc fixes</code></td></tr></table>




---

archive/issue_comments_459267.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nGreat, thanks very much.",
    "created_at": "2020-03-19T22:54:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459267",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:46" align="right">comment:46</div>

Great, thanks very much.



---

archive/issue_events_404683.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-19T22:54:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29287#event-404683"
}
```



---

archive/issue_events_404684.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-19T22:54:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29287#event-404684"
}
```



---

archive/issue_events_404685.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-21T01:23:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29287#event-404685"
}
```



---

archive/issue_events_404686.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-21T01:23:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29287#event-404686"
}
```



---

archive/issue_events_404687.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-03-25T22:48:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29287#event-404687"
}
```



---

archive/issue_events_404688.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "28957f3f6ae37502fbc1150a68ea52c2544d7ca3",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-03-25T22:48:51Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29287#event-404688"
}
```



---

archive/issue_comments_459268.json:
```json
{
    "body": "Changed branch from **[u/jhpalmieri/spkg_type__make__regular_script_pip__orthogonal_to__standard_optional_experimental_](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/spkg_type__make__regular_script_pip__orthogonal_to__standard_optional_experimental_)** to **[`0919086`](https://github.com/sagemath/sagetrac-mirror/commit/091908665ae681b6f9cc1f491d4801acbdfb89ae)**",
    "created_at": "2020-03-25T22:48:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29287#issuecomment-459268",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jhpalmieri/spkg_type__make__regular_script_pip__orthogonal_to__standard_optional_experimental_](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/spkg_type__make__regular_script_pip__orthogonal_to__standard_optional_experimental_)** to **[`0919086`](https://github.com/sagemath/sagetrac-mirror/commit/091908665ae681b6f9cc1f491d4801acbdfb89ae)**
