# Issue 29198: Set up hypercube with both Vrep and Hrep (if backend supports it)

archive/issues_028961.json:
```json
{
    "body": "Currently, the hypercube is set up with the vertices. This is slow, as the vertices grow exponentially with dimension:\n\n```\nsage: %time _ = polytopes.hypercube(8)\nCPU times: user 58.6 ms, sys: 0 ns, total: 58.6 ms\nWall time: 58.2 ms\nsage: %time _ = polytopes.hypercube(14)\nCPU times: user 2.74 s, sys: 19.1 ms, total: 2.76 s\nWall time: 2.76 s\n```\n\nWith #28880 at hand, we can set up the hypercube with both Vrep and Hrep. If the backend supports it (as in `backend='field'`), then the double description does not need to be computed. If the backend does not support it (as in `backend='ppl'`), then the hypercube is set up from the inequalities, which is much faster:\n\n```\nsage: %time _ = polytopes.hypercube(8)   # uses ppl\nCPU times: user 47.8 ms, sys: 3.19 ms, total: 51 ms\nWall time: 50 ms\nsage: %time _ = polytopes.hypercube(14)  # uses ppl\nCPU times: user 421 ms, sys: 4.7 ms, total: 426 ms\nWall time: 425 ms\nsage: %time _ = polytopes.hypercube(14, backend='field')  # uses both descriptions\nCPU times: user 168 ms, sys: 124 \u00b5s, total: 169 ms\nWall time: 168 ms\n```\n\nCC:  @jplab @laisrast\n\nKeywords: hypercube, polyhedron, double description\n\nBranch/Commit: 91ae9baed801970849814fcf7d035204dd48686d\n\nReviewer: Jean-Philippe Labb\u00e9, S\u00e9bastien Labb\u00e9\n\nAuthor: Jonathan Kliem\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29198\n\n",
    "closed_at": "2020-03-08T11:27:17Z",
    "created_at": "2020-02-14T15:24:45Z",
    "labels": [
        "component: geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "Set up hypercube with both Vrep and Hrep (if backend supports it)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29198",
    "user": "https://github.com/kliem"
}
```
Currently, the hypercube is set up with the vertices. This is slow, as the vertices grow exponentially with dimension:

```
sage: %time _ = polytopes.hypercube(8)
CPU times: user 58.6 ms, sys: 0 ns, total: 58.6 ms
Wall time: 58.2 ms
sage: %time _ = polytopes.hypercube(14)
CPU times: user 2.74 s, sys: 19.1 ms, total: 2.76 s
Wall time: 2.76 s
```

With #28880 at hand, we can set up the hypercube with both Vrep and Hrep. If the backend supports it (as in `backend='field'`), then the double description does not need to be computed. If the backend does not support it (as in `backend='ppl'`), then the hypercube is set up from the inequalities, which is much faster:

```
sage: %time _ = polytopes.hypercube(8)   # uses ppl
CPU times: user 47.8 ms, sys: 3.19 ms, total: 51 ms
Wall time: 50 ms
sage: %time _ = polytopes.hypercube(14)  # uses ppl
CPU times: user 421 ms, sys: 4.7 ms, total: 426 ms
Wall time: 425 ms
sage: %time _ = polytopes.hypercube(14, backend='field')  # uses both descriptions
CPU times: user 168 ms, sys: 124 µs, total: 169 ms
Wall time: 168 ms
```

CC:  @jplab @laisrast

Keywords: hypercube, polyhedron, double description

Branch/Commit: 91ae9baed801970849814fcf7d035204dd48686d

Reviewer: Jean-Philippe Labbé, Sébastien Labbé

Author: Jonathan Kliem

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29198





---

archive/issue_comments_569385.json:
```json
{
    "body": "Changing branch from \"\" to \"public/29198\"",
    "created_at": "2020-02-14T15:25:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29198#issuecomment-569385",
    "user": "https://github.com/kliem"
}
```

Changing branch from "" to "public/29198"



---

archive/issue_comments_569386.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-02-14T15:25:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29198#issuecomment-569386",
    "user": "https://github.com/kliem"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_569387.json:
```json
{
    "body": "Changing commit from \"\" to \"3942824ce0bbb1c19e425e306d02b548f0f3ce43\"",
    "created_at": "2020-02-14T15:25:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29198#issuecomment-569387",
    "user": "https://github.com/kliem"
}
```

Changing commit from "" to "3942824ce0bbb1c19e425e306d02b548f0f3ce43"



---

archive/issue_comments_569388.json:
```json
{
    "body": "<a id='comment:1'></a>New commits:",
    "created_at": "2020-02-14T15:25:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29198#issuecomment-569388",
    "user": "https://github.com/kliem"
}
```

<a id='comment:1'></a>New commits:



---

archive/issue_comments_569389.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-02-15T14:17:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29198#issuecomment-569389",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_569390.json:
```json
{
    "body": "Changing commit from \"3942824ce0bbb1c19e425e306d02b548f0f3ce43\" to \"8b8abb233a2a0c099c3554ec9cb51579fdf6ceb4\"",
    "created_at": "2020-02-15T14:17:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29198#issuecomment-569390",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3942824ce0bbb1c19e425e306d02b548f0f3ce43" to "8b8abb233a2a0c099c3554ec9cb51579fdf6ceb4"



---

archive/issue_comments_569391.json:
```json
{
    "body": "Changing commit from \"8b8abb233a2a0c099c3554ec9cb51579fdf6ceb4\" to \"ac0390b6f98185d8eae0e2c196cc32bc3be2b5c8\"",
    "created_at": "2020-02-24T10:11:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29198#issuecomment-569391",
    "user": "https://github.com/kliem"
}
```

Changing commit from "8b8abb233a2a0c099c3554ec9cb51579fdf6ceb4" to "ac0390b6f98185d8eae0e2c196cc32bc3be2b5c8"



---

archive/issue_comments_569392.json:
```json
{
    "body": "Changing branch from \"public/29198\" to \"public/29198-reb\"",
    "created_at": "2020-02-24T10:11:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29198#issuecomment-569392",
    "user": "https://github.com/kliem"
}
```

Changing branch from "public/29198" to "public/29198-reb"



---

archive/issue_comments_569393.json:
```json
{
    "body": "<a id='comment:3'></a>New commits:",
    "created_at": "2020-02-24T10:11:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29198#issuecomment-569393",
    "user": "https://github.com/kliem"
}
```

<a id='comment:3'></a>New commits:



---

archive/issue_comments_569394.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,13 +12,13 @@\n With #28880 at hand, we can set up the hypercube with both Vrep and Hrep. If the backend supports it (as in `backend='field'`), then the double description does not need to be computed. If the backend does not support it (as in `backend='ppl'`), then the hypercube is set up from the inequalities, which is much faster:\n \n ```\n-sage: %time _ = polytopes.hypercube(8)\n+sage: %time _ = polytopes.hypercube(8)   # uses ppl\n CPU times: user 47.8 ms, sys: 3.19 ms, total: 51 ms\n Wall time: 50 ms\n-sage: %time _ = polytopes.hypercube(14)\n+sage: %time _ = polytopes.hypercube(14)  # uses ppl\n CPU times: user 421 ms, sys: 4.7 ms, total: 426 ms\n Wall time: 425 ms\n-sage: %time _ = polytopes.hypercube(14, backend='field')\n+sage: %time _ = polytopes.hypercube(14, backend='field')  # uses both descriptions\n CPU times: user 168 ms, sys: 124 \u00b5s, total: 169 ms\n Wall time: 168 ms\n ```\n``````\n",
    "created_at": "2020-02-28T09:58:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29198#issuecomment-569394",
    "user": "https://github.com/jplab"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,13 +12,13 @@
 With #28880 at hand, we can set up the hypercube with both Vrep and Hrep. If the backend supports it (as in `backend='field'`), then the double description does not need to be computed. If the backend does not support it (as in `backend='ppl'`), then the hypercube is set up from the inequalities, which is much faster:
 
 ```
-sage: %time _ = polytopes.hypercube(8)
+sage: %time _ = polytopes.hypercube(8)   # uses ppl
 CPU times: user 47.8 ms, sys: 3.19 ms, total: 51 ms
 Wall time: 50 ms
-sage: %time _ = polytopes.hypercube(14)
+sage: %time _ = polytopes.hypercube(14)  # uses ppl
 CPU times: user 421 ms, sys: 4.7 ms, total: 426 ms
 Wall time: 425 ms
-sage: %time _ = polytopes.hypercube(14, backend='field')
+sage: %time _ = polytopes.hypercube(14, backend='field')  # uses both descriptions
 CPU times: user 168 ms, sys: 124 µs, total: 169 ms
 Wall time: 168 ms
 ```
``````




---

archive/issue_comments_569395.json:
```json
{
    "body": "Changing commit from \"ac0390b6f98185d8eae0e2c196cc32bc3be2b5c8\" to \"53b54e26eb7a1707c69103d6b39f68f24870f22e\"",
    "created_at": "2020-02-28T10:49:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29198#issuecomment-569395",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ac0390b6f98185d8eae0e2c196cc32bc3be2b5c8" to "53b54e26eb7a1707c69103d6b39f68f24870f22e"



---

archive/issue_comments_569396.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-02-28T10:49:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29198#issuecomment-569396",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_569397.json:
```json
{
    "body": "<a id='comment:6'></a>Ok, that's the doctest  from the bots. I also only got that one on my machine.\n\nLet's see what the bots say. It looks good apart from that.",
    "created_at": "2020-02-28T10:52:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29198#issuecomment-569397",
    "user": "https://github.com/jplab"
}
```

<a id='comment:6'></a>Ok, that's the doctest  from the bots. I also only got that one on my machine.

Let's see what the bots say. It looks good apart from that.



---

archive/issue_comments_569398.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-02-28T23:20:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29198#issuecomment-569398",
    "user": "https://github.com/jplab"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_569399.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Jean-Philippe Labb\u00e9\"",
    "created_at": "2020-02-28T23:20:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29198#issuecomment-569399",
    "user": "https://github.com/jplab"
}
```

Changing reviewer from "" to "Jean-Philippe Labbé"



---

archive/issue_comments_569400.json:
```json
{
    "body": "<a id='comment:8'></a>Merge conflict",
    "created_at": "2020-02-29T09:35:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29198#issuecomment-569400",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:8'></a>Merge conflict



---

archive/issue_comments_569401.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-02-29T09:35:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29198#issuecomment-569401",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_569402.json:
```json
{
    "body": "Changing commit from \"53b54e26eb7a1707c69103d6b39f68f24870f22e\" to \"91ae9baed801970849814fcf7d035204dd48686d\"",
    "created_at": "2020-03-02T12:26:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29198#issuecomment-569402",
    "user": "https://github.com/kliem"
}
```

Changing commit from "53b54e26eb7a1707c69103d6b39f68f24870f22e" to "91ae9baed801970849814fcf7d035204dd48686d"



---

archive/issue_comments_569403.json:
```json
{
    "body": "<a id='comment:9'></a>New commits:",
    "created_at": "2020-03-02T12:26:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29198#issuecomment-569403",
    "user": "https://github.com/kliem"
}
```

<a id='comment:9'></a>New commits:



---

archive/issue_comments_569404.json:
```json
{
    "body": "Changing branch from \"public/29198-reb\" to \"public/29198-reb2\"",
    "created_at": "2020-03-02T12:26:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29198#issuecomment-569404",
    "user": "https://github.com/kliem"
}
```

Changing branch from "public/29198-reb" to "public/29198-reb2"



---

archive/issue_comments_569405.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-03-02T12:26:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29198#issuecomment-569405",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_569406.json:
```json
{
    "body": "Changing reviewer from \"Jean-Philippe Labb\u00e9\" to \"Jean-Philippe Labb\u00e9, S\u00e9bastien Labb\u00e9\"",
    "created_at": "2020-03-05T21:05:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29198#issuecomment-569406",
    "user": "https://github.com/seblabbe"
}
```

Changing reviewer from "Jean-Philippe Labbé" to "Jean-Philippe Labbé, Sébastien Labbé"



---

archive/issue_comments_569407.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-03-05T21:05:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29198#issuecomment-569407",
    "user": "https://github.com/seblabbe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_569408.json:
```json
{
    "body": "<a id='comment:10'></a>I confirm the timing improvements. I get all tests passed in `src/sage/geometry` and `src/sage/plot` except `src/sage/geometry/polyhedron/base.py` which still has a \"killed due to abort\" issue which is independent of this ticket.",
    "created_at": "2020-03-05T21:05:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29198#issuecomment-569408",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:10'></a>I confirm the timing improvements. I get all tests passed in `src/sage/geometry` and `src/sage/plot` except `src/sage/geometry/polyhedron/base.py` which still has a "killed due to abort" issue which is independent of this ticket.



---

archive/issue_events_074168.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-03-08T11:27:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29198",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29198#event-74168"
}
```



---

archive/issue_comments_569409.json:
```json
{
    "body": "Changing branch from \"public/29198-reb2\" to \"91ae9baed801970849814fcf7d035204dd48686d\"",
    "created_at": "2020-03-08T11:27:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29198#issuecomment-569409",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/29198-reb2" to "91ae9baed801970849814fcf7d035204dd48686d"



---

archive/issue_comments_569410.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-03-08T11:27:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29198#issuecomment-569410",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
