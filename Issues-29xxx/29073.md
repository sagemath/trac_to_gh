# Issue 29073: `gale_transform` does not work for `RDF`

archive/issues_028836.json:
```json
{
    "body": "Currently the Gale transform for `RDF` does not work\n\n```\nsage: P = polytopes.icosahedron(exact=False)\nsage: sum(P.gale_transform())\n(1.3819660112000005, -1.3819660112000005, 0.3819660112000003, -1.3819660112000005, -9.43689570931383e-16, 1.6653345369377348e-16, -6.661338147750939e-16, 0.0)\n```\n\nbut the sum should be close to zero. This is of course only an indication that something goes terribly wrong. For #29065, I wanted to add a doctest recovering an inexact polyhedron from the gale diagram, but it simply does not work.\n\nThe problem is quite simple. The method `right_kernel` for matrices, should just not be used, as it echolonizes the kernel. This is just something, one shouldn't do for inexact rings. The method `right_kernel_matrix(basis=computed)` gives a much more useful matrix.\n\nWe also leave a note in `left_kernel`, `right_kernel`, and `right_kernel_matrix` to indicate this problem.\n\n\n\nCC:  @jplab @laisrast\n\nKeywords: polytopes, gale transform, RDF\n\nBranch/Commit: 96831516e18b4ecb50bf2ecf4e18f7056c9edd78\n\nReviewer: Laith Rastanawi\n\nAuthor: Jonathan Kliem\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29073\n\n",
    "closed_at": "2020-01-31T23:49:29Z",
    "created_at": "2020-01-23T19:52:57Z",
    "labels": [
        "component: geometry",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "`gale_transform` does not work for `RDF`",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29073",
    "user": "https://github.com/kliem"
}
```
Currently the Gale transform for `RDF` does not work

```
sage: P = polytopes.icosahedron(exact=False)
sage: sum(P.gale_transform())
(1.3819660112000005, -1.3819660112000005, 0.3819660112000003, -1.3819660112000005, -9.43689570931383e-16, 1.6653345369377348e-16, -6.661338147750939e-16, 0.0)
```

but the sum should be close to zero. This is of course only an indication that something goes terribly wrong. For #29065, I wanted to add a doctest recovering an inexact polyhedron from the gale diagram, but it simply does not work.

The problem is quite simple. The method `right_kernel` for matrices, should just not be used, as it echolonizes the kernel. This is just something, one shouldn't do for inexact rings. The method `right_kernel_matrix(basis=computed)` gives a much more useful matrix.

We also leave a note in `left_kernel`, `right_kernel`, and `right_kernel_matrix` to indicate this problem.



CC:  @jplab @laisrast

Keywords: polytopes, gale transform, RDF

Branch/Commit: 96831516e18b4ecb50bf2ecf4e18f7056c9edd78

Reviewer: Laith Rastanawi

Author: Jonathan Kliem

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29073





---

archive/issue_comments_567046.json:
```json
{
    "body": "Changing branch from \"\" to \"public/29073\"",
    "created_at": "2020-01-23T20:23:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29073#issuecomment-567046",
    "user": "https://github.com/kliem"
}
```

Changing branch from "" to "public/29073"



---

archive/issue_comments_567047.json:
```json
{
    "body": "Changing commit from \"\" to \"29f9ebe6502ded976393f20fc5bcb1c2d5b846e8\"",
    "created_at": "2020-01-23T20:23:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29073#issuecomment-567047",
    "user": "https://github.com/kliem"
}
```

Changing commit from "" to "29f9ebe6502ded976393f20fc5bcb1c2d5b846e8"



---

archive/issue_comments_567048.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-01-23T20:23:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29073#issuecomment-567048",
    "user": "https://github.com/kliem"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_567049.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                                                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|\n|[1db3349](https://github.com/sagemath/sagetrac-mirror/commit/1db3349ba20b38544eaca3194d629ec10e2f20bc)|`add notes about not echolonizing kernels for inexact rings`|\n|[29f9ebe](https://github.com/sagemath/sagetrac-mirror/commit/29f9ebe6502ded976393f20fc5bcb1c2d5b846e8)|`do not echolonize kernel basis for gale transpose`|",
    "created_at": "2020-01-23T20:23:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29073#issuecomment-567049",
    "user": "https://github.com/kliem"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                                                            |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|
|[1db3349](https://github.com/sagemath/sagetrac-mirror/commit/1db3349ba20b38544eaca3194d629ec10e2f20bc)|`add notes about not echolonizing kernels for inexact rings`|
|[29f9ebe](https://github.com/sagemath/sagetrac-mirror/commit/29f9ebe6502ded976393f20fc5bcb1c2d5b846e8)|`do not echolonize kernel basis for gale transpose`|



---

archive/issue_comments_567050.json:
```json
{
    "body": "Changing author from \"\" to \"Jonathan Kliem\"",
    "created_at": "2020-01-23T20:23:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29073#issuecomment-567050",
    "user": "https://github.com/kliem"
}
```

Changing author from "" to "Jonathan Kliem"



---

archive/issue_comments_567051.json:
```json
{
    "body": "Changing commit from \"29f9ebe6502ded976393f20fc5bcb1c2d5b846e8\" to \"cfd9b1a1d2aac511019d51068aa57921e5686703\"",
    "created_at": "2020-01-27T17:10:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29073#issuecomment-567051",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "29f9ebe6502ded976393f20fc5bcb1c2d5b846e8" to "cfd9b1a1d2aac511019d51068aa57921e5686703"



---

archive/issue_comments_567052.json:
```json
{
    "body": "<a id='comment:2'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------|\n|[cfd9b1a](https://github.com/sagemath/sagetrac-mirror/commit/cfd9b1a1d2aac511019d51068aa57921e5686703)|`fixed doc indent`|",
    "created_at": "2020-01-27T17:10:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29073#issuecomment-567052",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------|
|[cfd9b1a](https://github.com/sagemath/sagetrac-mirror/commit/cfd9b1a1d2aac511019d51068aa57921e5686703)|`fixed doc indent`|



---

archive/issue_comments_567053.json:
```json
{
    "body": "<a id='comment:3'></a>\nIn `left_kernel`, explain your note a little bit:\n\n```diff\n             For inexact rings use :meth:`right_kernel_matrix` with\n-            ``basis='computed'`` to avoid echolonizing.\n+            ``basis='computed'`` (on the transpose of the matrix) to avoid echolonizing.\n```\n\nOtherwise, it is good to go.",
    "created_at": "2020-01-30T12:03:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29073#issuecomment-567053",
    "user": "https://github.com/LaisRast"
}
```

<a id='comment:3'></a>
In `left_kernel`, explain your note a little bit:

```diff
             For inexact rings use :meth:`right_kernel_matrix` with
-            ``basis='computed'`` to avoid echolonizing.
+            ``basis='computed'`` (on the transpose of the matrix) to avoid echolonizing.
```

Otherwise, it is good to go.



---

archive/issue_comments_567054.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[9683151](https://github.com/sagemath/sagetrac-mirror/commit/96831516e18b4ecb50bf2ecf4e18f7056c9edd78)|`better comment in doc of left_kernel`|",
    "created_at": "2020-01-30T12:29:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29073#issuecomment-567054",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[9683151](https://github.com/sagemath/sagetrac-mirror/commit/96831516e18b4ecb50bf2ecf4e18f7056c9edd78)|`better comment in doc of left_kernel`|



---

archive/issue_comments_567055.json:
```json
{
    "body": "Changing commit from \"cfd9b1a1d2aac511019d51068aa57921e5686703\" to \"96831516e18b4ecb50bf2ecf4e18f7056c9edd78\"",
    "created_at": "2020-01-30T12:29:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29073#issuecomment-567055",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "cfd9b1a1d2aac511019d51068aa57921e5686703" to "96831516e18b4ecb50bf2ecf4e18f7056c9edd78"



---

archive/issue_comments_567056.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-01-30T12:51:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29073#issuecomment-567056",
    "user": "https://github.com/LaisRast"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_567057.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Laith Rastanawi\"",
    "created_at": "2020-01-30T14:18:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29073#issuecomment-567057",
    "user": "https://github.com/LaisRast"
}
```

Changing reviewer from "" to "Laith Rastanawi"



---

archive/issue_events_083212.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-01-31T23:49:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29073",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29073#event-83212"
}
```



---

archive/issue_comments_567058.json:
```json
{
    "body": "Changing branch from \"public/29073\" to \"96831516e18b4ecb50bf2ecf4e18f7056c9edd78\"",
    "created_at": "2020-01-31T23:49:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29073#issuecomment-567058",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/29073" to "96831516e18b4ecb50bf2ecf4e18f7056c9edd78"



---

archive/issue_comments_567059.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-01-31T23:49:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29073#issuecomment-567059",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
