# Issue 29314: update GAP to version 4.11, libsemigroup to 1.0.9

archive/issues_029077.json:
```json
{
    "body": "GAP 4.11.0 and libsemigroup 1.3.1 have been released.\n(we pick libsemigroup 1.0.9 as the one compatible with GAP's 4.11 semigroups package) \n\ntarball: see upstream_url fields\n\n\n**CC:**  @antonio-rojas @timokau @soehms @tobiasdiez\n\n**Branch/Commit:** [a28138c2fc1396171734b12fdbe5904b79bf1ec1](https://github.com/sagemath/sagetrac-mirror/commit/a28138c2fc1396171734b12fdbe5904b79bf1ec1)\n\n**Reviewer:** Matthias Koeppe, Tobias Diez\n\n**Author:** Dima Pasechnik\n\nIssue created by migration from https://trac.sagemath.org/ticket/29314\n\n",
    "closed_at": "2020-12-13T20:31:08Z",
    "created_at": "2020-03-11T11:12:19Z",
    "labels": [
        "component: packages: standard",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.3",
    "title": "update GAP to version 4.11, libsemigroup to 1.0.9",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/29314",
    "user": "https://github.com/dimpase"
}
```
GAP 4.11.0 and libsemigroup 1.3.1 have been released.
(we pick libsemigroup 1.0.9 as the one compatible with GAP's 4.11 semigroups package) 

tarball: see upstream_url fields


**CC:**  @antonio-rojas @timokau @soehms @tobiasdiez

**Branch/Commit:** [a28138c2fc1396171734b12fdbe5904b79bf1ec1](https://github.com/sagemath/sagetrac-mirror/commit/a28138c2fc1396171734b12fdbe5904b79bf1ec1)

**Reviewer:** Matthias Koeppe, Tobias Diez

**Author:** Dima Pasechnik

Issue created by migration from https://trac.sagemath.org/ticket/29314





---

archive/issue_comments_462528.json:
```json
{
    "body": "<a id='comment:3'></a>\nDoes the upgrade fix #28728?",
    "created_at": "2020-03-12T00:41:42Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462528",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>
Does the upgrade fix #28728?



---

archive/issue_comments_462529.json:
```json
{
    "body": "<a id='comment:4'></a>\nBesides changes in tests output, there's only one small change needed due to the VERSION alias removal. Patch at https://aur.archlinux.org/cgit/aur.git/tree/sagemath-gap-4.11.patch?h=sagemath-git\n\nI haven't tested the gap-packages update",
    "created_at": "2020-03-15T20:53:01Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462529",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:4'></a>
Besides changes in tests output, there's only one small change needed due to the VERSION alias removal. Patch at https://aur.archlinux.org/cgit/aur.git/tree/sagemath-gap-4.11.patch?h=sagemath-git

I haven't tested the gap-packages update



---

archive/issue_events_260763.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-04T20:06:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29314#event-260763"
}
```



---

archive/issue_events_260764.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-04T20:06:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29314#event-260764"
}
```



---

archive/issue_events_260765.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-09-02T17:01:28Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "rename": {
        "from": "update GAP to version 4.11",
        "to": "update GAP to version 4.11, libsemigroup to 1.3.1"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29314#event-260765"
}
```



---

archive/issue_comments_462530.json:
```json
{
    "body": "**Author:** Dima Pasechnik",
    "created_at": "2020-09-02T17:01:28Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462530",
    "user": "https://github.com/dimpase"
}
```

**Author:** Dima Pasechnik



---

archive/issue_comments_462531.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,3 @@\n-GAP 4.11.0 has been released.\n+GAP 4.11.0 and libsemigroup 1.3.1 have been released.\n \n-tarball: \n-https://www.gap-system.org/pub/gap/gap-4.11/tar.bz2/gap-4.11.0.tar.bz2\n+tarball: see upstream_url fields\n``````\n",
    "created_at": "2020-09-02T17:01:28Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462531",
    "user": "https://github.com/dimpase"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,3 @@
-GAP 4.11.0 has been released.
+GAP 4.11.0 and libsemigroup 1.3.1 have been released.
 
-tarball: 
-https://www.gap-system.org/pub/gap/gap-4.11/tar.bz2/gap-4.11.0.tar.bz2
+tarball: see upstream_url fields
``````




---

archive/issue_comments_462532.json:
```json
{
    "body": "**Commit:** [1b80d95959282e2b20331721fae67f4d276217d1](https://github.com/sagemath/sagetrac-mirror/commit/1b80d95959282e2b20331721fae67f4d276217d1)",
    "created_at": "2020-09-02T17:01:28Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462532",
    "user": "https://github.com/dimpase"
}
```

**Commit:** [1b80d95959282e2b20331721fae67f4d276217d1](https://github.com/sagemath/sagetrac-mirror/commit/1b80d95959282e2b20331721fae67f4d276217d1)



---

archive/issue_comments_462533.json:
```json
{
    "body": "<a id='comment:6'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/47c42d044ee849b67413c96726793d006c101762\">47c42d0</a></td><td><code>version bumps, checksums, patch removal, packages: updated names</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b80d95959282e2b20331721fae67f4d276217d1\">1b80d95</a></td><td><code>libsemigroups update</code></td></tr></table>\n",
    "created_at": "2020-09-02T17:01:28Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462533",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:6'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/47c42d044ee849b67413c96726793d006c101762">47c42d0</a></td><td><code>version bumps, checksums, patch removal, packages: updated names</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b80d95959282e2b20331721fae67f4d276217d1">1b80d95</a></td><td><code>libsemigroups update</code></td></tr></table>




---

archive/issue_comments_462534.json:
```json
{
    "body": "**Branch:** [u/dimpase/packages/gap411](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/gap411)",
    "created_at": "2020-09-02T17:01:28Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462534",
    "user": "https://github.com/dimpase"
}
```

**Branch:** [u/dimpase/packages/gap411](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/gap411)



---

archive/issue_comments_462535.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f361b88fa462485cd7f03725845ae7c741d9d011\">f361b88</a></td><td><code>libsemigroups update</code></td></tr></table>\n",
    "created_at": "2020-09-02T17:20:43Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462535",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f361b88fa462485cd7f03725845ae7c741d9d011">f361b88</a></td><td><code>libsemigroups update</code></td></tr></table>




---

archive/issue_comments_462536.json:
```json
{
    "body": "**Changing commit** from \"[1b80d95959282e2b20331721fae67f4d276217d1](https://github.com/sagemath/sagetrac-mirror/commit/1b80d95959282e2b20331721fae67f4d276217d1)\" to \"[f361b88fa462485cd7f03725845ae7c741d9d011](https://github.com/sagemath/sagetrac-mirror/commit/f361b88fa462485cd7f03725845ae7c741d9d011)\".",
    "created_at": "2020-09-02T17:20:43Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462536",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1b80d95959282e2b20331721fae67f4d276217d1](https://github.com/sagemath/sagetrac-mirror/commit/1b80d95959282e2b20331721fae67f4d276217d1)" to "[f361b88fa462485cd7f03725845ae7c741d9d011](https://github.com/sagemath/sagetrac-mirror/commit/f361b88fa462485cd7f03725845ae7c741d9d011)".



---

archive/issue_comments_462537.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n GAP 4.11.0 and libsemigroup 1.3.1 have been released.\n+(we pick libsemigroup 1.0.9 as the one compatible with GAP's 4.11 semigroups package) \n \n tarball: see upstream_url fields\n+\n``````\n",
    "created_at": "2020-09-02T17:52:00Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462537",
    "user": "https://github.com/dimpase"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 GAP 4.11.0 and libsemigroup 1.3.1 have been released.
+(we pick libsemigroup 1.0.9 as the one compatible with GAP's 4.11 semigroups package) 
 
 tarball: see upstream_url fields
+
``````




---

archive/issue_comments_462538.json:
```json
{
    "body": "<a id='comment:8'></a>\n\n```\nsage -t --warn-long 105.7 --random-seed=0 src/sage/libs/gap/element.pyx  # 6 doctests failed\nsage -t --warn-long 105.7 --random-seed=0 src/sage/libs/gap/libgap.pyx  # 1 doctest failed\n```\n\nsomething to be fixed 1st",
    "created_at": "2020-09-02T17:52:00Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462538",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:8'></a>

```
sage -t --warn-long 105.7 --random-seed=0 src/sage/libs/gap/element.pyx  # 6 doctests failed
sage -t --warn-long 105.7 --random-seed=0 src/sage/libs/gap/libgap.pyx  # 1 doctest failed
```

something to be fixed 1st



---

archive/issue_events_260766.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-09-02T17:52:00Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "rename": {
        "from": "update GAP to version 4.11, libsemigroup to 1.3.1",
        "to": "update GAP to version 4.11, libsemigroup to 1.0.9"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29314#event-260766"
}
```



---

archive/issue_comments_462539.json:
```json
{
    "body": "**Dependencies:** #30496",
    "created_at": "2020-09-02T20:55:31Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462539",
    "user": "https://github.com/dimpase"
}
```

**Dependencies:** #30496



---

archive/issue_comments_462540.json:
```json
{
    "body": "**Changing commit** from \"[f361b88fa462485cd7f03725845ae7c741d9d011](https://github.com/sagemath/sagetrac-mirror/commit/f361b88fa462485cd7f03725845ae7c741d9d011)\" to \"[8429a9c6e3f03a94003c32536541f08f0b38528a](https://github.com/sagemath/sagetrac-mirror/commit/8429a9c6e3f03a94003c32536541f08f0b38528a)\".",
    "created_at": "2020-09-02T21:36:10Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462540",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f361b88fa462485cd7f03725845ae7c741d9d011](https://github.com/sagemath/sagetrac-mirror/commit/f361b88fa462485cd7f03725845ae7c741d9d011)" to "[8429a9c6e3f03a94003c32536541f08f0b38528a](https://github.com/sagemath/sagetrac-mirror/commit/8429a9c6e3f03a94003c32536541f08f0b38528a)".



---

archive/issue_comments_462541.json:
```json
{
    "body": "<a id='comment:10'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/82191ca6058fa0bf84eace353984c9b7c683b90b\">82191ca</a></td><td><code>fix conversion from gap polynomial with valence > 0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c582e80d55dbd0ba2fc4003a3e5cb2d8638621c4\">c582e80</a></td><td><code>better syntax for libgap calls</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bbd7419ecdd5e36230ef1fe616a462b94839ce86\">bbd7419</a></td><td><code>version bumps, checksums, patch removal, packages: updated names</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87c6a6b3e755fd80bc03692eb1e31b4f44257991\">87c6a6b</a></td><td><code>libsemigroups update</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8429a9c6e3f03a94003c32536541f08f0b38528a\">8429a9c</a></td><td><code>patches from Arch (cf #29314)</code></td></tr></table>\n",
    "created_at": "2020-09-02T21:36:10Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462541",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/82191ca6058fa0bf84eace353984c9b7c683b90b">82191ca</a></td><td><code>fix conversion from gap polynomial with valence > 0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c582e80d55dbd0ba2fc4003a3e5cb2d8638621c4">c582e80</a></td><td><code>better syntax for libgap calls</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bbd7419ecdd5e36230ef1fe616a462b94839ce86">bbd7419</a></td><td><code>version bumps, checksums, patch removal, packages: updated names</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87c6a6b3e755fd80bc03692eb1e31b4f44257991">87c6a6b</a></td><td><code>libsemigroups update</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8429a9c6e3f03a94003c32536541f08f0b38528a">8429a9c</a></td><td><code>patches from Arch (cf #29314)</code></td></tr></table>




---

archive/issue_comments_462542.json:
```json
{
    "body": "<a id='comment:11'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/08193ae145223f5f8b25f0e44bb11096f37c6548\">08193ae</a></td><td><code>tagged #random tests with output depending upon gap_packages installed</code></td></tr></table>\n",
    "created_at": "2020-09-02T21:50:29Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462542",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/08193ae145223f5f8b25f0e44bb11096f37c6548">08193ae</a></td><td><code>tagged #random tests with output depending upon gap_packages installed</code></td></tr></table>




---

archive/issue_comments_462543.json:
```json
{
    "body": "**Changing commit** from \"[8429a9c6e3f03a94003c32536541f08f0b38528a](https://github.com/sagemath/sagetrac-mirror/commit/8429a9c6e3f03a94003c32536541f08f0b38528a)\" to \"[08193ae145223f5f8b25f0e44bb11096f37c6548](https://github.com/sagemath/sagetrac-mirror/commit/08193ae145223f5f8b25f0e44bb11096f37c6548)\".",
    "created_at": "2020-09-02T21:50:29Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462543",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8429a9c6e3f03a94003c32536541f08f0b38528a](https://github.com/sagemath/sagetrac-mirror/commit/8429a9c6e3f03a94003c32536541f08f0b38528a)" to "[08193ae145223f5f8b25f0e44bb11096f37c6548](https://github.com/sagemath/sagetrac-mirror/commit/08193ae145223f5f8b25f0e44bb11096f37c6548)".



---

archive/issue_comments_462544.json:
```json
{
    "body": "<a id='comment:12'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c90360ba618188c4b8874f8f56d1759b2bd898f1\">c90360b</a></td><td><code>one more doctest fix</code></td></tr></table>\n",
    "created_at": "2020-09-02T22:51:52Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462544",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c90360ba618188c4b8874f8f56d1759b2bd898f1">c90360b</a></td><td><code>one more doctest fix</code></td></tr></table>




---

archive/issue_comments_462545.json:
```json
{
    "body": "**Changing commit** from \"[08193ae145223f5f8b25f0e44bb11096f37c6548](https://github.com/sagemath/sagetrac-mirror/commit/08193ae145223f5f8b25f0e44bb11096f37c6548)\" to \"[c90360ba618188c4b8874f8f56d1759b2bd898f1](https://github.com/sagemath/sagetrac-mirror/commit/c90360ba618188c4b8874f8f56d1759b2bd898f1)\".",
    "created_at": "2020-09-02T22:51:52Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462545",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[08193ae145223f5f8b25f0e44bb11096f37c6548](https://github.com/sagemath/sagetrac-mirror/commit/08193ae145223f5f8b25f0e44bb11096f37c6548)" to "[c90360ba618188c4b8874f8f56d1759b2bd898f1](https://github.com/sagemath/sagetrac-mirror/commit/c90360ba618188c4b8874f8f56d1759b2bd898f1)".



---

archive/issue_comments_462546.json:
```json
{
    "body": "**Changing commit** from \"[c90360ba618188c4b8874f8f56d1759b2bd898f1](https://github.com/sagemath/sagetrac-mirror/commit/c90360ba618188c4b8874f8f56d1759b2bd898f1)\" to \"[21211413f3399e93051696a149bcff0e5d4c936e](https://github.com/sagemath/sagetrac-mirror/commit/21211413f3399e93051696a149bcff0e5d4c936e)\".",
    "created_at": "2020-09-03T08:53:18Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462546",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c90360ba618188c4b8874f8f56d1759b2bd898f1](https://github.com/sagemath/sagetrac-mirror/commit/c90360ba618188c4b8874f8f56d1759b2bd898f1)" to "[21211413f3399e93051696a149bcff0e5d4c936e](https://github.com/sagemath/sagetrac-mirror/commit/21211413f3399e93051696a149bcff0e5d4c936e)".



---

archive/issue_comments_462547.json:
```json
{
    "body": "<a id='comment:13'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/21211413f3399e93051696a149bcff0e5d4c936e\">2121141</a></td><td><code>more robust test, so that GAP's packages don't matter</code></td></tr></table>\n",
    "created_at": "2020-09-03T08:53:18Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462547",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/21211413f3399e93051696a149bcff0e5d4c936e">2121141</a></td><td><code>more robust test, so that GAP's packages don't matter</code></td></tr></table>




---

archive/issue_comments_462548.json:
```json
{
    "body": "<a id='comment:14'></a>\nthere seems to be one failing doctest that is macOS-specific, in `src/sage/groups/cubic_braid.py`, \nbut I still think we have to proceed (it's probably a platform-specific GAP bug).",
    "created_at": "2020-09-03T13:55:24Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462548",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:14'></a>
there seems to be one failing doctest that is macOS-specific, in `src/sage/groups/cubic_braid.py`, 
but I still think we have to proceed (it's probably a platform-specific GAP bug).



---

archive/issue_events_260767.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-09-03T13:55:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29314#event-260767"
}
```



---

archive/issue_comments_462549.json:
```json
{
    "body": "<a id='comment:15'></a>\non macOS 10.15.6 with and without gap_packages installed\n\n```\nsage -t --warn-long 70.9 --random-seed=0 src/sage/groups/cubic_braid.py\n**********************************************************************\nFile \"src/sage/groups/cubic_braid.py\", line 1454, in sage.groups.cubic_braid.CubicBraidGroup.as_matrix_group\nFailed example:\n    m_back = C5(m)\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/dima/software/sagetrac-mirror/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 715, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/dima/software/sagetrac-mirror/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1139, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.groups.cubic_braid.CubicBraidGroup.as_matrix_group[4]>\", line 1, in <module>\n        m_back = C5(m)\n      File \"sage/structure/parent.pyx\", line 900, in sage.structure.parent.Parent.__call__ (build/cythonized/sage/structure/parent.c:9336)\n        return mor._call_(x)\n      File \"sage/structure/coerce_maps.pyx\", line 161, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (build/cythonized/sage/structure/coerce_maps.c:4623)\n        raise\n      File \"sage/structure/coerce_maps.pyx\", line 156, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (build/cythonized/sage/structure/coerce_maps.c:4515)\n        return C._element_constructor(x)\n      File \"/Users/dima/software/sagetrac-mirror/local/lib/python3.7/site-packages/sage/groups/cubic_braid.py\", line 1314, in _element_constructor_\n        return map_to.lift(x)\n      File \"/Users/dima/software/sagetrac-mirror/local/lib/python3.7/site-packages/sage/groups/libgap_morphism.py\", line 514, in lift\n        if h.gap() not in phi.Image():\n      File \"sage/libs/gap/element.pyx\", line 656, in sage.libs.gap.element.GapElement.__contains__ (build/cythonized/sage/libs/gap/element.c:7753)\n        return GAP_IN(other, self).sage()\n      File \"sage/libs/gap/element.pyx\", line 2525, in sage.libs.gap.element.GapElement_Function.__call__ (build/cythonized/sage/libs/gap/element.c:19780)\n        sig_on()\n    sage.libs.gap.util.GAPError: Error, reached the pre-set memory limit\n    (change it with the -o command line option)\n```\n\ncan't reproduce this on Linux",
    "created_at": "2020-09-03T15:06:30Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462549",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:15'></a>
on macOS 10.15.6 with and without gap_packages installed

```
sage -t --warn-long 70.9 --random-seed=0 src/sage/groups/cubic_braid.py
**********************************************************************
File "src/sage/groups/cubic_braid.py", line 1454, in sage.groups.cubic_braid.CubicBraidGroup.as_matrix_group
Failed example:
    m_back = C5(m)
Exception raised:
    Traceback (most recent call last):
      File "/Users/dima/software/sagetrac-mirror/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 715, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/dima/software/sagetrac-mirror/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1139, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.groups.cubic_braid.CubicBraidGroup.as_matrix_group[4]>", line 1, in <module>
        m_back = C5(m)
      File "sage/structure/parent.pyx", line 900, in sage.structure.parent.Parent.__call__ (build/cythonized/sage/structure/parent.c:9336)
        return mor._call_(x)
      File "sage/structure/coerce_maps.pyx", line 161, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (build/cythonized/sage/structure/coerce_maps.c:4623)
        raise
      File "sage/structure/coerce_maps.pyx", line 156, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (build/cythonized/sage/structure/coerce_maps.c:4515)
        return C._element_constructor(x)
      File "/Users/dima/software/sagetrac-mirror/local/lib/python3.7/site-packages/sage/groups/cubic_braid.py", line 1314, in _element_constructor_
        return map_to.lift(x)
      File "/Users/dima/software/sagetrac-mirror/local/lib/python3.7/site-packages/sage/groups/libgap_morphism.py", line 514, in lift
        if h.gap() not in phi.Image():
      File "sage/libs/gap/element.pyx", line 656, in sage.libs.gap.element.GapElement.__contains__ (build/cythonized/sage/libs/gap/element.c:7753)
        return GAP_IN(other, self).sage()
      File "sage/libs/gap/element.pyx", line 2525, in sage.libs.gap.element.GapElement_Function.__call__ (build/cythonized/sage/libs/gap/element.c:19780)
        sig_on()
    sage.libs.gap.util.GAPError: Error, reached the pre-set memory limit
    (change it with the -o command line option)
```

can't reproduce this on Linux



---

archive/issue_comments_462550.json:
```json
{
    "body": "<a id='comment:16'></a>\nSebastian, could you reproduce this computation in GAP? I suspect it's a \"pure\" GAP bug.",
    "created_at": "2020-09-03T15:40:15Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462550",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:16'></a>
Sebastian, could you reproduce this computation in GAP? I suspect it's a "pure" GAP bug.



---

archive/issue_comments_462551.json:
```json
{
    "body": "<a id='comment:17'></a>\nIt's not macOS-specific, I've been seeing this on Arch since I updated GAP. It only happens when running the full test suite, testing only the groups/cubic_braid.py file or even the entire groups module works.",
    "created_at": "2020-09-03T16:08:52Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462551",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:17'></a>
It's not macOS-specific, I've been seeing this on Arch since I updated GAP. It only happens when running the full test suite, testing only the groups/cubic_braid.py file or even the entire groups module works.



---

archive/issue_comments_462552.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [arojas](#comment%3A17):\n> It's not macOS-specific, I've been seeing this on Arch since I updated GAP. It only happens when running the full test suite, testing only the groups/cubic_braid.py file or even the entire groups module works.\n\n\nOn macOS it's reproducible at Sage prompt.",
    "created_at": "2020-09-03T16:32:39Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462552",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:18'></a>
Replying to [arojas](#comment%3A17):
> It's not macOS-specific, I've been seeing this on Arch since I updated GAP. It only happens when running the full test suite, testing only the groups/cubic_braid.py file or even the entire groups module works.


On macOS it's reproducible at Sage prompt.



---

archive/issue_comments_462553.json:
```json
{
    "body": "<a id='comment:19'></a>\nI'll just do\n\n```diff\n--- a/src/sage/interfaces/gap.py\n+++ b/src/sage/interfaces/gap.py\n@@ -277,7 +277,7 @@ def get_gap_memory_pool_size():\n     # Don't eat all address space if the user set ulimit -v\n     suggested_size = min(suggested_size, vmax // 10)\n     # ~220MB is the minimum for long doctests\n-    suggested_size = max(suggested_size, 250 * 1024**2)\n+    suggested_size = max(suggested_size, 350 * 1024**2)\n     return suggested_size\n```\nthis limit has not been chnaged for 7 years, so that's OK :-)",
    "created_at": "2020-09-03T17:04:54Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462553",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:19'></a>
I'll just do

```diff
--- a/src/sage/interfaces/gap.py
+++ b/src/sage/interfaces/gap.py
@@ -277,7 +277,7 @@ def get_gap_memory_pool_size():
     # Don't eat all address space if the user set ulimit -v
     suggested_size = min(suggested_size, vmax // 10)
     # ~220MB is the minimum for long doctests
-    suggested_size = max(suggested_size, 250 * 1024**2)
+    suggested_size = max(suggested_size, 350 * 1024**2)
     return suggested_size
```
this limit has not been chnaged for 7 years, so that's OK :-)



---

archive/issue_comments_462554.json:
```json
{
    "body": "<a id='comment:20'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f02f6e1d67dfbff7a4d1f96533ea14be765c418a\">f02f6e1</a></td><td><code>increase memory pool for libgap</code></td></tr></table>\n",
    "created_at": "2020-09-03T17:13:59Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462554",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f02f6e1d67dfbff7a4d1f96533ea14be765c418a">f02f6e1</a></td><td><code>increase memory pool for libgap</code></td></tr></table>




---

archive/issue_comments_462555.json:
```json
{
    "body": "**Changing commit** from \"[21211413f3399e93051696a149bcff0e5d4c936e](https://github.com/sagemath/sagetrac-mirror/commit/21211413f3399e93051696a149bcff0e5d4c936e)\" to \"[f02f6e1d67dfbff7a4d1f96533ea14be765c418a](https://github.com/sagemath/sagetrac-mirror/commit/f02f6e1d67dfbff7a4d1f96533ea14be765c418a)\".",
    "created_at": "2020-09-03T17:13:59Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462555",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[21211413f3399e93051696a149bcff0e5d4c936e](https://github.com/sagemath/sagetrac-mirror/commit/21211413f3399e93051696a149bcff0e5d4c936e)" to "[f02f6e1d67dfbff7a4d1f96533ea14be765c418a](https://github.com/sagemath/sagetrac-mirror/commit/f02f6e1d67dfbff7a4d1f96533ea14be765c418a)".



---

archive/issue_comments_462556.json:
```json
{
    "body": "<a id='comment:21'></a>\nmade it 400m",
    "created_at": "2020-09-03T17:15:59Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462556",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:21'></a>
made it 400m



---

archive/issue_comments_462557.json:
```json
{
    "body": "<a id='comment:22'></a>\nGitHub Actions tests on https://github.com/sagemath/sage/pull/98",
    "created_at": "2020-09-03T17:19:10Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462557",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:22'></a>
GitHub Actions tests on https://github.com/sagemath/sage/pull/98



---

archive/issue_comments_462558.json:
```json
{
    "body": "<a id='comment:23'></a>\nhttps://github.com/sagemath/sage/actions just needs some housekeeping - there are lots of workflowed from the WSL pull request that are no longer needed",
    "created_at": "2020-09-04T15:21:58Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462558",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'></a>
https://github.com/sagemath/sage/actions just needs some housekeeping - there are lots of workflowed from the WSL pull request that are no longer needed



---

archive/issue_comments_462559.json:
```json
{
    "body": "<a id='comment:24'></a>\nping?",
    "created_at": "2020-09-07T09:23:08Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462559",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:24'></a>
ping?



---

archive/issue_events_260768.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-07T19:35:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29314#event-260768"
}
```



---

archive/issue_events_260769.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-07T19:35:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29314#event-260769"
}
```



---

archive/issue_comments_462560.json:
```json
{
    "body": "**Reviewer:** Matthias Koeppe",
    "created_at": "2020-09-07T19:35:54Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462560",
    "user": "https://github.com/mkoeppe"
}
```

**Reviewer:** Matthias Koeppe



---

archive/issue_comments_462561.json:
```json
{
    "body": "<a id='comment:25'></a>\nThe updated `libsemigroup` fails to build on the outdated platforms `ubuntu-trusty`, `debian-jessie`, `linuxmint-17`. This is a regression regarding platform support, but I think that's fine for an optional package (also `normaliz` has the same problem).\n\nOtherwise looks fine.",
    "created_at": "2020-09-07T19:35:54Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462561",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'></a>
The updated `libsemigroup` fails to build on the outdated platforms `ubuntu-trusty`, `debian-jessie`, `linuxmint-17`. This is a regression regarding platform support, but I think that's fine for an optional package (also `normaliz` has the same problem).

Otherwise looks fine.



---

archive/issue_comments_462562.json:
```json
{
    "body": "<a id='comment:26'></a>\nDoes the upgrade fix something \"critical\"?",
    "created_at": "2020-09-07T19:36:33Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462562",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>
Does the upgrade fix something "critical"?



---

archive/issue_comments_462563.json:
```json
{
    "body": "<a id='comment:27'></a>\nit removes a lot of patches (in fact, all the patches we have for `gap` and `gap_packages`), for one, which is always good. It incorporates numerous upstream bug fixes too, and it's a bit overdue, as 4.11 was released 6 months ago.",
    "created_at": "2020-09-07T20:22:22Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462563",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:27'></a>
it removes a lot of patches (in fact, all the patches we have for `gap` and `gap_packages`), for one, which is always good. It incorporates numerous upstream bug fixes too, and it's a bit overdue, as 4.11 was released 6 months ago.



---

archive/issue_comments_462564.json:
```json
{
    "body": "<a id='comment:28'></a>\nReplying to [dimpase](#comment%3A16):\n> Sebastian, could you reproduce this computation in GAP? I suspect it's a \"pure\" GAP bug.\n\nSorry, that I didn't see that earlier, since I'm on vacation until next weekend! But it seems that you've solved that already.\n\nDo you know the reason why the domains of permutation groups of matrix groups have increased in the new version (see the differences of the doctests of `permgroup.py` at line 850 and 899)?\nOn a first impression I wouldn't take that for an improvement. Anyway, I would break these long doctests lines.\n\nSebastian.",
    "created_at": "2020-09-07T21:43:51Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462564",
    "user": "https://github.com/soehms"
}
```

<a id='comment:28'></a>
Replying to [dimpase](#comment%3A16):
> Sebastian, could you reproduce this computation in GAP? I suspect it's a "pure" GAP bug.

Sorry, that I didn't see that earlier, since I'm on vacation until next weekend! But it seems that you've solved that already.

Do you know the reason why the domains of permutation groups of matrix groups have increased in the new version (see the differences of the doctests of `permgroup.py` at line 850 and 899)?
On a first impression I wouldn't take that for an improvement. Anyway, I would break these long doctests lines.

Sebastian.



---

archive/issue_comments_462565.json:
```json
{
    "body": "<a id='comment:29'></a>\nDocbuild hangs forever on buildbots, a strace ends with\n\n```\n$ strace -ff ./sage --docbuild --verbose 99 --no-pdf-links all html\n[...]\n[pid 106971] access(\"/var/lib/buildbot/slave/sage_git/build/local/share/gap/pkg/resclasses-4.7.2/init.g\", F_OK) = 0\n[pid 106971] access(\"/var/lib/buildbot/slave/sage_git/build/local/share/gap/pkg/resclasses-4.7.2/read.g\", F_OK) = 0\n[pid 106971] access(\"/var/lib/buildbot/slave/sage_git/build/local/share/gap/pkg/polenta-1.3.9/doc/manual.six\", F_OK) = 0\n[pid 106971] access(\"/var/lib/buildbot/slave/sage_git/build/local/share/gap/pkg/resclasses-4.7.2/doc/manual.six\", F_OK) = 0\n[pid 106971] access(\"/var/lib/buildbot/.gap/gaprc\", R_OK) = -1 ENOENT (No such file or directory)\n[pid 106971] access(\"/var/lib/buildbot/.gap/gaprc.gz\", R_OK) = -1 ENOENT (No such file or directory)\n[pid 106971] access(\"/var/lib/buildbot/slave/sage_git/build/local/share/gap/gaprc\", R_OK) = -1 ENOENT (No such file or directory)\n[pid 106971] access(\"/var/lib/buildbot/slave/sage_git/build/local/share/gap/gaprc.gz\", R_OK) = -1 ENOENT (No such file or directory)\n[pid 106971] access(\"/var/lib/buildbot/.gap\", F_OK) = -1 ENOENT (No such file or directory)\n[pid 106971] open(\"/var/lib/buildbot/.gaprc\", O_RDONLY) = -1 ENOENT (No such file or directory)\n[pid 106971] access(\"/var/lib/buildbot/.gaprc.gz\", R_OK) = -1 ENOENT (No such file or directory)\n[pid 106971] access(\"/var/lib/buildbot/.gaprc.gz.gz\", R_OK) = -1 ENOENT (No such file or directory)\n[pid 106971] open(\"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/libs/gap/sage.gaprc\", O_RDONLY) = 12\n[pid 106971] read(12, \"# This file is run by Sage when \"..., 20000) = 567\n[pid 106971] read(12, \"\", 20000)        = 0\n[pid 106971] close(12)                  = 0\n[pid 106971] rt_sigaction(SIGCHLD, {SIG_DFL, [CHLD], SA_RESTORER|SA_RESTART, 0x7f2bc20154b0}, {0x7f0bc9679880, [CHLD], SA_RESTORER|SA_RESTART, 0x7f2bc20154b0}, 8) = 0\n[pid 106971] stat(\"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/matrix\", {st_mode=S_IFDIR|0755, st_size=12288, ...}) = 0\n[pid 106971] stat(\"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/matrix/action.cpython-38-x86_64-linux-gnu.so\", {st_mode=S_IFREG|0755, st_size=1110904, ...}) = 0\n[pid 106971] open(\"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/matrix/action.cpython-38-x86_64-linux-gnu.so\", O_RDONLY|O_CLOEXEC) = 12\n[pid 106971] read(12, \"\\177ELF\\2\\1\\1\\0\\0\\0\\0\\0\\0\\0\\0\\0\\3\\0>\\0\\1\\0\\0\\0\\300?\\0\\0\\0\\0\\0\\0\"..., 832) = 832\n[pid 106971] fstat(12, {st_mode=S_IFREG|0755, st_size=1110904, ...}) = 0\n[pid 106971] mmap(NULL, 2244824, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 12, 0) = 0x7f0babc8a000\n[pid 106971] mprotect(0x7f0babca9000, 2093056, PROT_NONE) = 0\n[pid 106971] mmap(0x7f0babea8000, 24576, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 12, 0x1e000) = 0x7f0babea8000\n[pid 106971] mmap(0x7f0babeae000, 216, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x7f0babeae000\n[pid 106971] close(12)                  = 0\n[pid 106971] mprotect(0x7f0babea8000, 4096, PROT_READ) = 0\n[pid 106971] mmap(NULL, 262144, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f0babc4a000\n[pid 106971] munmap(0x7f0babc4a000, 262144) = 0\n[pid 106971] mmap(NULL, 262144, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f0babc4a000\n[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={16, 968000}, ru_stime={0, 556000}, ...}) = 0\n[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={16, 968000}, ru_stime={0, 556000}, ...}) = 0\n[pid 106971] madvise(0x100004a00000, 7344128, MADV_DONTNEED) = 0\n[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={17, 532000}, ru_stime={0, 556000}, ...}) = 0\n[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={17, 532000}, ru_stime={0, 556000}, ...}) = 0\n[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={18, 76000}, ru_stime={0, 556000}, ...}) = 0\n[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={18, 76000}, ru_stime={0, 556000}, ...}) = 0\n[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={18, 624000}, ru_stime={0, 564000}, ...}) = 0\n[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={18, 624000}, ru_stime={0, 568000}, ...}) = 0\n[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={19, 172000}, ru_stime={0, 568000}, ...}) = 0\n[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={19, 172000}, ru_stime={0, 568000}, ...}) = 0\n[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={19, 712000}, ru_stime={0, 568000}, ...}) = 0\n[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={19, 712000}, ru_stime={0, 568000}, ...}) = 0\n[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={20, 252000}, ru_stime={0, 568000}, ...}) = 0\n[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={20, 252000}, ru_stime={0, 568000}, ...}) = 0\n[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={20, 788000}, ru_stime={0, 568000}, ...}) = 0\n[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={20, 792000}, ru_stime={0, 568000}, ...}) = 0\n[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={21, 328000}, ru_stime={0, 568000}, ...}) = 0\n[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={21, 328000}, ru_stime={0, 568000}, ...}) = 0\n[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={21, 872000}, ru_stime={0, 568000}, ...}) = 0\n[... repeat ad infinitum ...]\n```\nbut not when building locally. I tried to delete the content of sage.gaprc but that didn't help.",
    "created_at": "2020-09-12T12:41:13Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462565",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:29'></a>
Docbuild hangs forever on buildbots, a strace ends with

```
$ strace -ff ./sage --docbuild --verbose 99 --no-pdf-links all html
[...]
[pid 106971] access("/var/lib/buildbot/slave/sage_git/build/local/share/gap/pkg/resclasses-4.7.2/init.g", F_OK) = 0
[pid 106971] access("/var/lib/buildbot/slave/sage_git/build/local/share/gap/pkg/resclasses-4.7.2/read.g", F_OK) = 0
[pid 106971] access("/var/lib/buildbot/slave/sage_git/build/local/share/gap/pkg/polenta-1.3.9/doc/manual.six", F_OK) = 0
[pid 106971] access("/var/lib/buildbot/slave/sage_git/build/local/share/gap/pkg/resclasses-4.7.2/doc/manual.six", F_OK) = 0
[pid 106971] access("/var/lib/buildbot/.gap/gaprc", R_OK) = -1 ENOENT (No such file or directory)
[pid 106971] access("/var/lib/buildbot/.gap/gaprc.gz", R_OK) = -1 ENOENT (No such file or directory)
[pid 106971] access("/var/lib/buildbot/slave/sage_git/build/local/share/gap/gaprc", R_OK) = -1 ENOENT (No such file or directory)
[pid 106971] access("/var/lib/buildbot/slave/sage_git/build/local/share/gap/gaprc.gz", R_OK) = -1 ENOENT (No such file or directory)
[pid 106971] access("/var/lib/buildbot/.gap", F_OK) = -1 ENOENT (No such file or directory)
[pid 106971] open("/var/lib/buildbot/.gaprc", O_RDONLY) = -1 ENOENT (No such file or directory)
[pid 106971] access("/var/lib/buildbot/.gaprc.gz", R_OK) = -1 ENOENT (No such file or directory)
[pid 106971] access("/var/lib/buildbot/.gaprc.gz.gz", R_OK) = -1 ENOENT (No such file or directory)
[pid 106971] open("/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/libs/gap/sage.gaprc", O_RDONLY) = 12
[pid 106971] read(12, "# This file is run by Sage when "..., 20000) = 567
[pid 106971] read(12, "", 20000)        = 0
[pid 106971] close(12)                  = 0
[pid 106971] rt_sigaction(SIGCHLD, {SIG_DFL, [CHLD], SA_RESTORER|SA_RESTART, 0x7f2bc20154b0}, {0x7f0bc9679880, [CHLD], SA_RESTORER|SA_RESTART, 0x7f2bc20154b0}, 8) = 0
[pid 106971] stat("/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/matrix", {st_mode=S_IFDIR|0755, st_size=12288, ...}) = 0
[pid 106971] stat("/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/matrix/action.cpython-38-x86_64-linux-gnu.so", {st_mode=S_IFREG|0755, st_size=1110904, ...}) = 0
[pid 106971] open("/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/matrix/action.cpython-38-x86_64-linux-gnu.so", O_RDONLY|O_CLOEXEC) = 12
[pid 106971] read(12, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0\300?\0\0\0\0\0\0"..., 832) = 832
[pid 106971] fstat(12, {st_mode=S_IFREG|0755, st_size=1110904, ...}) = 0
[pid 106971] mmap(NULL, 2244824, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 12, 0) = 0x7f0babc8a000
[pid 106971] mprotect(0x7f0babca9000, 2093056, PROT_NONE) = 0
[pid 106971] mmap(0x7f0babea8000, 24576, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 12, 0x1e000) = 0x7f0babea8000
[pid 106971] mmap(0x7f0babeae000, 216, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x7f0babeae000
[pid 106971] close(12)                  = 0
[pid 106971] mprotect(0x7f0babea8000, 4096, PROT_READ) = 0
[pid 106971] mmap(NULL, 262144, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f0babc4a000
[pid 106971] munmap(0x7f0babc4a000, 262144) = 0
[pid 106971] mmap(NULL, 262144, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f0babc4a000
[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={16, 968000}, ru_stime={0, 556000}, ...}) = 0
[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={16, 968000}, ru_stime={0, 556000}, ...}) = 0
[pid 106971] madvise(0x100004a00000, 7344128, MADV_DONTNEED) = 0
[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={17, 532000}, ru_stime={0, 556000}, ...}) = 0
[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={17, 532000}, ru_stime={0, 556000}, ...}) = 0
[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={18, 76000}, ru_stime={0, 556000}, ...}) = 0
[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={18, 76000}, ru_stime={0, 556000}, ...}) = 0
[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={18, 624000}, ru_stime={0, 564000}, ...}) = 0
[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={18, 624000}, ru_stime={0, 568000}, ...}) = 0
[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={19, 172000}, ru_stime={0, 568000}, ...}) = 0
[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={19, 172000}, ru_stime={0, 568000}, ...}) = 0
[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={19, 712000}, ru_stime={0, 568000}, ...}) = 0
[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={19, 712000}, ru_stime={0, 568000}, ...}) = 0
[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={20, 252000}, ru_stime={0, 568000}, ...}) = 0
[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={20, 252000}, ru_stime={0, 568000}, ...}) = 0
[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={20, 788000}, ru_stime={0, 568000}, ...}) = 0
[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={20, 792000}, ru_stime={0, 568000}, ...}) = 0
[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={21, 328000}, ru_stime={0, 568000}, ...}) = 0
[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={21, 328000}, ru_stime={0, 568000}, ...}) = 0
[pid 106971] getrusage(RUSAGE_SELF, {ru_utime={21, 872000}, ru_stime={0, 568000}, ...}) = 0
[... repeat ad infinitum ...]
```
but not when building locally. I tried to delete the content of sage.gaprc but that didn't help.



---

archive/issue_events_260770.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-09-12T12:41:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29314#event-260770"
}
```



---

archive/issue_events_260771.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-09-12T12:41:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29314#event-260771"
}
```



---

archive/issue_comments_462566.json:
```json
{
    "body": "**Changing branch** from \"[u/dimpase/packages/gap411](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/gap411)\" to \"[u/mkoeppe/packages/gap411](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/packages/gap411)\".",
    "created_at": "2020-09-12T21:22:25Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462566",
    "user": "https://github.com/mkoeppe"
}
```

**Changing branch** from "[u/dimpase/packages/gap411](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/gap411)" to "[u/mkoeppe/packages/gap411](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/packages/gap411)".



---

archive/issue_comments_462567.json:
```json
{
    "body": "**Changing commit** from \"[f02f6e1d67dfbff7a4d1f96533ea14be765c418a](https://github.com/sagemath/sagetrac-mirror/commit/f02f6e1d67dfbff7a4d1f96533ea14be765c418a)\" to \"[35649994b528588b33968f860530ad8fef5c38c7](https://github.com/sagemath/sagetrac-mirror/commit/35649994b528588b33968f860530ad8fef5c38c7)\".",
    "created_at": "2020-09-12T21:35:53Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462567",
    "user": "https://github.com/dimpase"
}
```

**Changing commit** from "[f02f6e1d67dfbff7a4d1f96533ea14be765c418a](https://github.com/sagemath/sagetrac-mirror/commit/f02f6e1d67dfbff7a4d1f96533ea14be765c418a)" to "[35649994b528588b33968f860530ad8fef5c38c7](https://github.com/sagemath/sagetrac-mirror/commit/35649994b528588b33968f860530ad8fef5c38c7)".



---

archive/issue_comments_462568.json:
```json
{
    "body": "<a id='comment:31'></a>\nAbsolutely no idea what sort of fresh hell this might be. \n\nTime to get rid of buildbots, maybe...\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/35649994b528588b33968f860530ad8fef5c38c7\">3564999</a></td><td><code>build/pkgs/gap_packages: Use symlinks to refer to gap's tarball</code></td></tr></table>\n",
    "created_at": "2020-09-12T21:35:53Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462568",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:31'></a>
Absolutely no idea what sort of fresh hell this might be. 

Time to get rid of buildbots, maybe...

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/35649994b528588b33968f860530ad8fef5c38c7">3564999</a></td><td><code>build/pkgs/gap_packages: Use symlinks to refer to gap's tarball</code></td></tr></table>




---

archive/issue_comments_462569.json:
```json
{
    "body": "<a id='comment:32'></a>\ncould it be something like running out of file descriptors?",
    "created_at": "2020-09-12T21:54:54Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462569",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:32'></a>
could it be something like running out of file descriptors?



---

archive/issue_comments_462570.json:
```json
{
    "body": "<a id='comment:33'></a>\nUnlikely, it happened also on kucalc which is rather beefy",
    "created_at": "2020-09-12T22:32:01Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462570",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:33'></a>
Unlikely, it happened also on kucalc which is rather beefy



---

archive/issue_comments_462571.json:
```json
{
    "body": "<a id='comment:34'></a>\nOS has a hard limit on the number of them, beefy or not, and if you leak them, then god help you.\n\ncould also be some parallelisation crap. Do bildbots try to over-parallelise things, with setting MAKE to something etc?\n\nCould also be something similar to #30351 - which deals with a hanging docbuild on macOS - maybe this desease is now infecting buildbots too?",
    "created_at": "2020-09-13T06:54:12Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462571",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:34'></a>
OS has a hard limit on the number of them, beefy or not, and if you leak them, then god help you.

could also be some parallelisation crap. Do bildbots try to over-parallelise things, with setting MAKE to something etc?

Could also be something similar to #30351 - which deals with a hanging docbuild on macOS - maybe this desease is now infecting buildbots too?



---

archive/issue_comments_462572.json:
```json
{
    "body": "<a id='comment:35'></a>\nThere are multiple physical hosts, its not a resource limit (or at least one thats set up by the docbuilder)",
    "created_at": "2020-09-13T09:40:41Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462572",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:35'></a>
There are multiple physical hosts, its not a resource limit (or at least one thats set up by the docbuilder)



---

archive/issue_comments_462573.json:
```json
{
    "body": "<a id='comment:36'></a>\nany idea at what point of docbuild it hangs?",
    "created_at": "2020-09-13T17:06:52Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462573",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:36'></a>
any idea at what point of docbuild it hangs?



---

archive/issue_comments_462574.json:
```json
{
    "body": "<a id='comment:37'></a>\n\n```\ncd ../.. && sage-logger -p './sage --docbuild --no-pdf-links all html -j ' logs/dochtml.log\n[dochtml] \n[dochtml] Building reference manual, first pass.\n[dochtml] \n[dochtml] [reference] building [inventory]: targets for 1 source files that are out of date\n[dochtml] [reference] updating environment: [new config] 1 added, 0 changed, 0 removed\n[dochtml] [reference] The inventory files are in local/share/doc/sage/inventory/en/reference/references.\n[dochtml] Build finished. The built documents can be found in /home/buildbot/slave/sage_git/build/local/share/doc/sage/inventory/en/reference/references\n[dochtml] [spkg     ] building [inventory]: targets for 271 source files that are out of date\n[dochtml] [spkg     ] updating environment: [new config] 271 added, 0 changed, 0 removed\n[dochtml] [spkg     ] The inventory files are in local/share/doc/sage/inventory/en/reference/spkg.\n[dochtml] Build finished. The built documents can be found in /home/buildbot/slave/sage_git/build/local/share/doc/sage/inventory/en/reference/spkg\n[dochtml] [manifolds] building [inventory]: targets for 78 source files that are out of date\n[dochtml] [manifolds] updating environment: [new config] 78 added, 0 changed, 0 removed\n[dochtml] [manifolds] The inventory files are in local/share/doc/sage/inventory/en/reference/manifolds.\n[dochtml] Build finished. The built documents can be found in /home/buildbot/slave/sage_git/build/local/share/doc/sage/inventory/en/reference/manifolds\n[dochtml] [polynomia] building [inventory]: targets for 62 source files that are out of date\n[dochtml] [polynomia] updating environment: [new config] 62 added, 0 changed, 0 removed\n[dochtml] [polynomia] The inventory files are in local/share/doc/sage/inventory/en/reference/polynomial_rings.\n[dochtml] Build finished. The built documents can be found in /home/buildbot/slave/sage_git/build/local/share/doc/sage/inventory/en/reference/polynomial_rings\n[dochtml] [repl     ] building [inventory]: targets for 35 source files that are out of date\n[dochtml] [repl     ] updating environment: [new config] 35 added, 0 changed, 0 removed\n[dochtml] [repl     ] The inventory files are in local/share/doc/sage/inventory/en/reference/repl.\n[dochtml] Build finished. The built documents can be found in /home/buildbot/slave/sage_git/build/local/share/doc/sage/inventory/en/reference/repl\n[dochtml] [algebras ] building [inventory]: targets for 95 source files that are out of date\n[dochtml] [algebras ] updating environment: [new config] 95 added, 0 changed, 0 removed\n[dochtml] [algebras ] The inventory files are in local/share/doc/sage/inventory/en/reference/algebras.\n[dochtml] Build finished. The built documents can be found in /home/buildbot/slave/sage_git/build/local/share/doc/sage/inventory/en/reference/algebras\n[dochtml] [tensor_fr] building [inventory]: targets for 19 source files that are out of date\n[dochtml] [tensor_fr] updating environment: [new config] 19 added, 0 changed, 0 removed\n[dochtml] [tensor_fr] The inventory files are in local/share/doc/sage/inventory/en/reference/tensor_free_modules.\n[dochtml] Build finished. The built documents can be found in /home/buildbot/slave/sage_git/build/local/share/doc/sage/inventory/en/reference/tensor_free_modules\n[dochtml] Warning: Missing title for sage.combinat.posets.mobile\n[dochtml] [combinat ] building [inventory]: targets for 378 source files that are out of date\n[dochtml] [combinat ] updating environment: [new config] 378 added, 0 changed, 0 removed\ncommand timed out: 1200 seconds without output running ['make', 'doc-html-mathjax'], attempting to kill\nprocess killed by signal 9\nprogram finished with exit code -1\nelapsedTime=1349.554977\n```\n@mkoeppe: can you try to reproduce it on a CI build?",
    "created_at": "2020-09-13T22:17:54Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462574",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:37'></a>

```
cd ../.. && sage-logger -p './sage --docbuild --no-pdf-links all html -j ' logs/dochtml.log
[dochtml] 
[dochtml] Building reference manual, first pass.
[dochtml] 
[dochtml] [reference] building [inventory]: targets for 1 source files that are out of date
[dochtml] [reference] updating environment: [new config] 1 added, 0 changed, 0 removed
[dochtml] [reference] The inventory files are in local/share/doc/sage/inventory/en/reference/references.
[dochtml] Build finished. The built documents can be found in /home/buildbot/slave/sage_git/build/local/share/doc/sage/inventory/en/reference/references
[dochtml] [spkg     ] building [inventory]: targets for 271 source files that are out of date
[dochtml] [spkg     ] updating environment: [new config] 271 added, 0 changed, 0 removed
[dochtml] [spkg     ] The inventory files are in local/share/doc/sage/inventory/en/reference/spkg.
[dochtml] Build finished. The built documents can be found in /home/buildbot/slave/sage_git/build/local/share/doc/sage/inventory/en/reference/spkg
[dochtml] [manifolds] building [inventory]: targets for 78 source files that are out of date
[dochtml] [manifolds] updating environment: [new config] 78 added, 0 changed, 0 removed
[dochtml] [manifolds] The inventory files are in local/share/doc/sage/inventory/en/reference/manifolds.
[dochtml] Build finished. The built documents can be found in /home/buildbot/slave/sage_git/build/local/share/doc/sage/inventory/en/reference/manifolds
[dochtml] [polynomia] building [inventory]: targets for 62 source files that are out of date
[dochtml] [polynomia] updating environment: [new config] 62 added, 0 changed, 0 removed
[dochtml] [polynomia] The inventory files are in local/share/doc/sage/inventory/en/reference/polynomial_rings.
[dochtml] Build finished. The built documents can be found in /home/buildbot/slave/sage_git/build/local/share/doc/sage/inventory/en/reference/polynomial_rings
[dochtml] [repl     ] building [inventory]: targets for 35 source files that are out of date
[dochtml] [repl     ] updating environment: [new config] 35 added, 0 changed, 0 removed
[dochtml] [repl     ] The inventory files are in local/share/doc/sage/inventory/en/reference/repl.
[dochtml] Build finished. The built documents can be found in /home/buildbot/slave/sage_git/build/local/share/doc/sage/inventory/en/reference/repl
[dochtml] [algebras ] building [inventory]: targets for 95 source files that are out of date
[dochtml] [algebras ] updating environment: [new config] 95 added, 0 changed, 0 removed
[dochtml] [algebras ] The inventory files are in local/share/doc/sage/inventory/en/reference/algebras.
[dochtml] Build finished. The built documents can be found in /home/buildbot/slave/sage_git/build/local/share/doc/sage/inventory/en/reference/algebras
[dochtml] [tensor_fr] building [inventory]: targets for 19 source files that are out of date
[dochtml] [tensor_fr] updating environment: [new config] 19 added, 0 changed, 0 removed
[dochtml] [tensor_fr] The inventory files are in local/share/doc/sage/inventory/en/reference/tensor_free_modules.
[dochtml] Build finished. The built documents can be found in /home/buildbot/slave/sage_git/build/local/share/doc/sage/inventory/en/reference/tensor_free_modules
[dochtml] Warning: Missing title for sage.combinat.posets.mobile
[dochtml] [combinat ] building [inventory]: targets for 378 source files that are out of date
[dochtml] [combinat ] updating environment: [new config] 378 added, 0 changed, 0 removed
command timed out: 1200 seconds without output running ['make', 'doc-html-mathjax'], attempting to kill
process killed by signal 9
program finished with exit code -1
elapsedTime=1349.554977
```
@mkoeppe: can you try to reproduce it on a CI build?



---

archive/issue_comments_462575.json:
```json
{
    "body": "<a id='comment:38'></a>\nWhat is the meaning of `-j` option in `./sage --docbuild --no-pdf-links all html -j `?\n\nIs it documented? If it's akin to `-j` for `make`, then, hmm, all bets are off.",
    "created_at": "2020-09-13T22:57:48Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462575",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:38'></a>
What is the meaning of `-j` option in `./sage --docbuild --no-pdf-links all html -j `?

Is it documented? If it's akin to `-j` for `make`, then, hmm, all bets are off.



---

archive/issue_comments_462576.json:
```json
{
    "body": "<a id='comment:39'></a>\nAh, ok, `-j` is  for MathJax. Is MathJax locally installed?",
    "created_at": "2020-09-13T23:00:50Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462576",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:39'></a>
Ah, ok, `-j` is  for MathJax. Is MathJax locally installed?



---

archive/issue_comments_462577.json:
```json
{
    "body": "<a id='comment:40'></a>\nDefinitely not on all buildbots...",
    "created_at": "2020-09-15T22:10:31Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462577",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:40'></a>
Definitely not on all buildbots...



---

archive/issue_comments_462578.json:
```json
{
    "body": "<a id='comment:41'></a>\nReplying to [vbraun](#comment%3A40):\n> Definitely not on all buildbots...\n\ndoes it only hang on buildbots without locally installed MathJax ?",
    "created_at": "2020-09-16T08:59:07Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462578",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:41'></a>
Replying to [vbraun](#comment%3A40):
> Definitely not on all buildbots...

does it only hang on buildbots without locally installed MathJax ?



---

archive/issue_comments_462579.json:
```json
{
    "body": "<a id='comment:42'></a>\nHere an observation which could help (done under WSL Ubuntu):\n\nIf I checkout this ticket on top of 9.2.beta12 and do\n\n```\nmake SAGE_SPKG=\"sage-spkg -o\" gap_packages-clean build\n```\n\nthen I get:\n\n```\nsage: B = BraidGroup(8)\nTraceback (most recent call last):\n...\nGAPError: Error, no method found! Error, no 2nd choice method found for `InverseSameMutability' on 1 arguments\n```\n\nI came accross that while looking at the docbuild failure noted in #30346 (which seems to be caused by this ticket as well).",
    "created_at": "2020-09-16T12:57:23Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462579",
    "user": "https://github.com/soehms"
}
```

<a id='comment:42'></a>
Here an observation which could help (done under WSL Ubuntu):

If I checkout this ticket on top of 9.2.beta12 and do

```
make SAGE_SPKG="sage-spkg -o" gap_packages-clean build
```

then I get:

```
sage: B = BraidGroup(8)
Traceback (most recent call last):
...
GAPError: Error, no method found! Error, no 2nd choice method found for `InverseSameMutability' on 1 arguments
```

I came accross that while looking at the docbuild failure noted in #30346 (which seems to be caused by this ticket as well).



---

archive/issue_comments_462580.json:
```json
{
    "body": "<a id='comment:43'></a>\nReplying to [soehms](#comment%3A42):\n> Here an observation which could help (done under WSL Ubuntu):\n> \n> If I checkout this ticket on top of 9.2.beta12 and do\n> \n> ```\n> make SAGE_SPKG=\"sage-spkg -o\" gap_packages-clean build\n> ```\n> \n> then I get:\n> \n> ```\n> sage: B = BraidGroup(8)\n> Traceback (most recent call last):\n> ...\n> GAPError: Error, no method found! Error, no 2nd choice method found for `InverseSameMutability' on 1 arguments\n> ```\n> \n> I came accross that while looking at the docbuild failure noted in #30346 (which seems to be caused by this ticket as well).\n\n\nI tried `B = BraidGroup(8)` on this branch, without and with `gap_packages` installed, and it works for me. (On Gentoo Linux - so this might be an WSL problem).",
    "created_at": "2020-09-16T15:12:45Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462580",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:43'></a>
Replying to [soehms](#comment%3A42):
> Here an observation which could help (done under WSL Ubuntu):
> 
> If I checkout this ticket on top of 9.2.beta12 and do
> 
> ```
> make SAGE_SPKG="sage-spkg -o" gap_packages-clean build
> ```
> 
> then I get:
> 
> ```
> sage: B = BraidGroup(8)
> Traceback (most recent call last):
> ...
> GAPError: Error, no method found! Error, no 2nd choice method found for `InverseSameMutability' on 1 arguments
> ```
> 
> I came accross that while looking at the docbuild failure noted in #30346 (which seems to be caused by this ticket as well).


I tried `B = BraidGroup(8)` on this branch, without and with `gap_packages` installed, and it works for me. (On Gentoo Linux - so this might be an WSL problem).



---

archive/issue_comments_462581.json:
```json
{
    "body": "<a id='comment:44'></a>\nto support gcc10 we need https://github.com/gap-packages/cohomolo/pull/25 here",
    "created_at": "2020-09-16T17:12:09Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462581",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:44'></a>
to support gcc10 we need https://github.com/gap-packages/cohomolo/pull/25 here



---

archive/issue_comments_462582.json:
```json
{
    "body": "<a id='comment:45'></a>\nCan this upstream patch be applied to the existing gap version (4.10.2) as well? Then that should probably be done on a separate ticket",
    "created_at": "2020-09-16T21:32:11Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462582",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:45'></a>
Can this upstream patch be applied to the existing gap version (4.10.2) as well? Then that should probably be done on a separate ticket



---

archive/issue_comments_462583.json:
```json
{
    "body": "<a id='comment:46'></a>\nadded a patch needed for gap_packages on XCode 12\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b0d8fc860a7f9d2f808b287aa72d8212886d73e4\">b0d8fc8</a></td><td><code>version bumps, checksums, patch removal, packages: updated names</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c0b35f99d8f726837ee57dfadf7627d914af5355\">c0b35f9</a></td><td><code>libsemigroups update</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a6c8cea4f9f4e271d4bf12b8783e59d2622b412\">6a6c8ce</a></td><td><code>patches from Arch (cf #29314)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c45832370816dfea4172f972b4a6a02f757ce35\">3c45832</a></td><td><code>tagged #random tests with output depending upon gap_packages installed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/07968eb3e23bb41842b00e8269f6d2828388b43d\">07968eb</a></td><td><code>one more doctest fix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2728be6da5eb1ffa185ae0980db69fd29ba5046c\">2728be6</a></td><td><code>more robust test, so that GAP's packages don't matter</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b2fa6d8d195f65f4488aa3a9c3c62abb87fb8760\">b2fa6d8</a></td><td><code>increase memory pool for libgap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dd39f33d9a41064b77001118c9c4bfb4a68c8092\">dd39f33</a></td><td><code>build/pkgs/gap_packages: Use symlinks to refer to gap's tarball</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3435c24a53490f484ff28267b61498282c8afbbb\">3435c24</a></td><td><code>clang 12 (macOS XCode 12) needs extra includes</code></td></tr></table>\n",
    "created_at": "2020-09-24T13:51:10Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462583",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:46'></a>
added a patch needed for gap_packages on XCode 12

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b0d8fc860a7f9d2f808b287aa72d8212886d73e4">b0d8fc8</a></td><td><code>version bumps, checksums, patch removal, packages: updated names</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c0b35f99d8f726837ee57dfadf7627d914af5355">c0b35f9</a></td><td><code>libsemigroups update</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a6c8cea4f9f4e271d4bf12b8783e59d2622b412">6a6c8ce</a></td><td><code>patches from Arch (cf #29314)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c45832370816dfea4172f972b4a6a02f757ce35">3c45832</a></td><td><code>tagged #random tests with output depending upon gap_packages installed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/07968eb3e23bb41842b00e8269f6d2828388b43d">07968eb</a></td><td><code>one more doctest fix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2728be6da5eb1ffa185ae0980db69fd29ba5046c">2728be6</a></td><td><code>more robust test, so that GAP's packages don't matter</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b2fa6d8d195f65f4488aa3a9c3c62abb87fb8760">b2fa6d8</a></td><td><code>increase memory pool for libgap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dd39f33d9a41064b77001118c9c4bfb4a68c8092">dd39f33</a></td><td><code>build/pkgs/gap_packages: Use symlinks to refer to gap's tarball</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3435c24a53490f484ff28267b61498282c8afbbb">3435c24</a></td><td><code>clang 12 (macOS XCode 12) needs extra includes</code></td></tr></table>




---

archive/issue_events_260772.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-09-24T13:51:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29314#event-260772"
}
```



---

archive/issue_events_260773.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-09-24T13:51:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29314#event-260773"
}
```



---

archive/issue_comments_462584.json:
```json
{
    "body": "**Changing commit** from \"[35649994b528588b33968f860530ad8fef5c38c7](https://github.com/sagemath/sagetrac-mirror/commit/35649994b528588b33968f860530ad8fef5c38c7)\" to \"[3435c24a53490f484ff28267b61498282c8afbbb](https://github.com/sagemath/sagetrac-mirror/commit/3435c24a53490f484ff28267b61498282c8afbbb)\".",
    "created_at": "2020-09-24T13:51:10Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462584",
    "user": "https://github.com/dimpase"
}
```

**Changing commit** from "[35649994b528588b33968f860530ad8fef5c38c7](https://github.com/sagemath/sagetrac-mirror/commit/35649994b528588b33968f860530ad8fef5c38c7)" to "[3435c24a53490f484ff28267b61498282c8afbbb](https://github.com/sagemath/sagetrac-mirror/commit/3435c24a53490f484ff28267b61498282c8afbbb)".



---

archive/issue_comments_462585.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/packages/gap411](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/packages/gap411)\" to \"[u/dimpase/packages/gap411](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/gap411)\".",
    "created_at": "2020-09-24T13:51:10Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462585",
    "user": "https://github.com/dimpase"
}
```

**Changing branch** from "[u/mkoeppe/packages/gap411](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/packages/gap411)" to "[u/dimpase/packages/gap411](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/gap411)".



---

archive/issue_comments_462586.json:
```json
{
    "body": "<a id='comment:47'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ca2c40a570cb0cd03fc110298c2dc436370cf846\">ca2c40a</a></td><td><code>version bump</code></td></tr></table>\n",
    "created_at": "2020-09-24T13:52:09Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462586",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:47'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ca2c40a570cb0cd03fc110298c2dc436370cf846">ca2c40a</a></td><td><code>version bump</code></td></tr></table>




---

archive/issue_comments_462587.json:
```json
{
    "body": "**Changing commit** from \"[3435c24a53490f484ff28267b61498282c8afbbb](https://github.com/sagemath/sagetrac-mirror/commit/3435c24a53490f484ff28267b61498282c8afbbb)\" to \"[ca2c40a570cb0cd03fc110298c2dc436370cf846](https://github.com/sagemath/sagetrac-mirror/commit/ca2c40a570cb0cd03fc110298c2dc436370cf846)\".",
    "created_at": "2020-09-24T13:52:09Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462587",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[3435c24a53490f484ff28267b61498282c8afbbb](https://github.com/sagemath/sagetrac-mirror/commit/3435c24a53490f484ff28267b61498282c8afbbb)" to "[ca2c40a570cb0cd03fc110298c2dc436370cf846](https://github.com/sagemath/sagetrac-mirror/commit/ca2c40a570cb0cd03fc110298c2dc436370cf846)".



---

archive/issue_comments_462588.json:
```json
{
    "body": "**Changing reviewer** from \"Matthias Koeppe\" to \"Matthias Koeppe, https://github.com/mkoeppe/sage/actions/runs/270864243\".",
    "created_at": "2020-09-24T15:42:09Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462588",
    "user": "https://github.com/mkoeppe"
}
```

**Changing reviewer** from "Matthias Koeppe" to "Matthias Koeppe, https://github.com/mkoeppe/sage/actions/runs/270864243".



---

archive/issue_comments_462589.json:
```json
{
    "body": "<a id='comment:49'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5549ee60a915dbcb01bdbce9bdae9d6555b1fda9\">5549ee6</a></td><td><code>fix cohomolo pkg code to allow build with gcc10</code></td></tr></table>\n",
    "created_at": "2020-09-24T17:06:02Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462589",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:49'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5549ee60a915dbcb01bdbce9bdae9d6555b1fda9">5549ee6</a></td><td><code>fix cohomolo pkg code to allow build with gcc10</code></td></tr></table>




---

archive/issue_comments_462590.json:
```json
{
    "body": "**Changing commit** from \"[ca2c40a570cb0cd03fc110298c2dc436370cf846](https://github.com/sagemath/sagetrac-mirror/commit/ca2c40a570cb0cd03fc110298c2dc436370cf846)\" to \"[5549ee60a915dbcb01bdbce9bdae9d6555b1fda9](https://github.com/sagemath/sagetrac-mirror/commit/5549ee60a915dbcb01bdbce9bdae9d6555b1fda9)\".",
    "created_at": "2020-09-24T17:06:02Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462590",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ca2c40a570cb0cd03fc110298c2dc436370cf846](https://github.com/sagemath/sagetrac-mirror/commit/ca2c40a570cb0cd03fc110298c2dc436370cf846)" to "[5549ee60a915dbcb01bdbce9bdae9d6555b1fda9](https://github.com/sagemath/sagetrac-mirror/commit/5549ee60a915dbcb01bdbce9bdae9d6555b1fda9)".



---

archive/issue_comments_462591.json:
```json
{
    "body": "<a id='comment:50'></a>\nadded forgotten gcc-10 patch",
    "created_at": "2020-09-24T17:06:39Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462591",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:50'></a>
added forgotten gcc-10 patch



---

archive/issue_comments_462592.json:
```json
{
    "body": "<a id='comment:51'></a>\nReplying to [dimpase](#comment%3A43):\n> Replying to [soehms](#comment%3A42):\n> > Here an observation which could help (done under WSL Ubuntu):\n\n....\n> \n> I tried `B = BraidGroup(8)` on this branch, without and with `gap_packages` installed, and it works for me. (On Gentoo Linux - so this might be an WSL problem).\n\n\nDima, I'm having the same problem on `LinuxMint 19.1`. So, its probably not a WSL issue but maybe a problem with the person in front of the computer. Can you please post how I have to build Sage after checking out the branch?",
    "created_at": "2020-09-26T15:27:34Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462592",
    "user": "https://github.com/soehms"
}
```

<a id='comment:51'></a>
Replying to [dimpase](#comment%3A43):
> Replying to [soehms](#comment%3A42):
> > Here an observation which could help (done under WSL Ubuntu):

....
> 
> I tried `B = BraidGroup(8)` on this branch, without and with `gap_packages` installed, and it works for me. (On Gentoo Linux - so this might be an WSL problem).


Dima, I'm having the same problem on `LinuxMint 19.1`. So, its probably not a WSL issue but maybe a problem with the person in front of the computer. Can you please post how I have to build Sage after checking out the branch?



---

archive/issue_comments_462593.json:
```json
{
    "body": "<a id='comment:52'></a>\nReplying to [soehms](#comment%3A51):\n> Dima, I'm having the same problem on `LinuxMint 19.1`. So, its probably not a WSL issue but maybe a problem with the person in front of the computer. Can you please post how I have to build Sage after checking out the branch?\n\n\n1. pull the branch\n2. ./sage  -f gap\n3. ./sage -f gap_packages  # (optional)\n4. make build",
    "created_at": "2020-09-27T17:03:48Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462593",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:52'></a>
Replying to [soehms](#comment%3A51):
> Dima, I'm having the same problem on `LinuxMint 19.1`. So, its probably not a WSL issue but maybe a problem with the person in front of the computer. Can you please post how I have to build Sage after checking out the branch?


1. pull the branch
2. ./sage  -f gap
3. ./sage -f gap_packages  # (optional)
4. make build



---

archive/issue_comments_462594.json:
```json
{
    "body": "<a id='comment:53'></a>\nReplying to [dimpase](#comment%3A52):\n> Replying to [soehms](#comment%3A51):\n> > Dima, I'm having the same problem on `LinuxMint 19.1`. So, its probably not a WSL issue but maybe a problem with the person in front of the computer. Can you please post how I have to build Sage after checking out the branch?\n\n> \n> 1. pull the branch\n> 2. ./sage  -f gap\n> 3. ./sage -f gap_packages  # (optional)\n> 4. make build\n> \n\n\nThank you! Unfortunately that didn't solve the problem. Is it possible that there is a dependency missing in the ticket description?\n\nThe list of doctest failures under `groups` I'm getting under `WSL` and `LinuxMint` looks like this:\n\n```\n...\nsage -t --random-seed=0 src/sage/groups/braid.py  # 289 doctests failed\nsage -t --random-seed=0 src/sage/groups/raag.py  # 145 doctests failed\nsage -t --random-seed=0 src/sage/groups/libgap_wrapper.pyx  # 13 doctests failed\nsage -t --random-seed=0 src/sage/groups/free_group.py  # Killed due to segmentation fault\nsage -t --random-seed=0 src/sage/groups/finitely_presented.py  # 251 doctests failed\n...\n```\n\nIn the case of `finitely_presented.py` I also got `longjmp` error messages:\n\n```\n*** longjmp causes uninitialized stack frame ***: /home/sebastian/develop/sage/local/bin/python3 terminated\n*** longjmp causes uninitialized stack frame ***: /home/sebastian/develop/sage/local/bin/python3 terminated\n```",
    "created_at": "2020-09-28T19:31:16Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462594",
    "user": "https://github.com/soehms"
}
```

<a id='comment:53'></a>
Replying to [dimpase](#comment%3A52):
> Replying to [soehms](#comment%3A51):
> > Dima, I'm having the same problem on `LinuxMint 19.1`. So, its probably not a WSL issue but maybe a problem with the person in front of the computer. Can you please post how I have to build Sage after checking out the branch?

> 
> 1. pull the branch
> 2. ./sage  -f gap
> 3. ./sage -f gap_packages  # (optional)
> 4. make build
> 


Thank you! Unfortunately that didn't solve the problem. Is it possible that there is a dependency missing in the ticket description?

The list of doctest failures under `groups` I'm getting under `WSL` and `LinuxMint` looks like this:

```
...
sage -t --random-seed=0 src/sage/groups/braid.py  # 289 doctests failed
sage -t --random-seed=0 src/sage/groups/raag.py  # 145 doctests failed
sage -t --random-seed=0 src/sage/groups/libgap_wrapper.pyx  # 13 doctests failed
sage -t --random-seed=0 src/sage/groups/free_group.py  # Killed due to segmentation fault
sage -t --random-seed=0 src/sage/groups/finitely_presented.py  # 251 doctests failed
...
```

In the case of `finitely_presented.py` I also got `longjmp` error messages:

```
*** longjmp causes uninitialized stack frame ***: /home/sebastian/develop/sage/local/bin/python3 terminated
*** longjmp causes uninitialized stack frame ***: /home/sebastian/develop/sage/local/bin/python3 terminated
```



---

archive/issue_comments_462595.json:
```json
{
    "body": "<a id='comment:54'></a>\n1. try removing `~/.sage/gap/`, or even `~/.sage/`. \n\n2. Could it be you have GAP installed systemwide, and you get an interference?\n   Or perhaps something in your `gap.ini` or `gaprc` files, cf. https://www.gap-system.org/Manuals/doc/ref/chap3.html#X7FD66F977A3B02DF ? \n\n3. Test the Sage's GAP 4.11 installation, e.g. by\n\n```\n$ SAGE_CHECK=yes ./sage -f gap\n```\n\n4. Try building this branch from scratch.",
    "created_at": "2020-09-28T21:01:54Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462595",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:54'></a>
1. try removing `~/.sage/gap/`, or even `~/.sage/`. 

2. Could it be you have GAP installed systemwide, and you get an interference?
   Or perhaps something in your `gap.ini` or `gaprc` files, cf. https://www.gap-system.org/Manuals/doc/ref/chap3.html#X7FD66F977A3B02DF ? 

3. Test the Sage's GAP 4.11 installation, e.g. by

```
$ SAGE_CHECK=yes ./sage -f gap
```

4. Try building this branch from scratch.



---

archive/issue_comments_462596.json:
```json
{
    "body": "**Changing commit** from \"[5549ee60a915dbcb01bdbce9bdae9d6555b1fda9](https://github.com/sagemath/sagetrac-mirror/commit/5549ee60a915dbcb01bdbce9bdae9d6555b1fda9)\" to \"[40a2d0f2109daf56293c51e153747cc5ca3b25ff](https://github.com/sagemath/sagetrac-mirror/commit/40a2d0f2109daf56293c51e153747cc5ca3b25ff)\".",
    "created_at": "2020-09-29T16:02:43Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462596",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5549ee60a915dbcb01bdbce9bdae9d6555b1fda9](https://github.com/sagemath/sagetrac-mirror/commit/5549ee60a915dbcb01bdbce9bdae9d6555b1fda9)" to "[40a2d0f2109daf56293c51e153747cc5ca3b25ff](https://github.com/sagemath/sagetrac-mirror/commit/40a2d0f2109daf56293c51e153747cc5ca3b25ff)".



---

archive/issue_comments_462597.json:
```json
{
    "body": "<a id='comment:55'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/40a2d0f2109daf56293c51e153747cc5ca3b25ff\">40a2d0f</a></td><td><code>remove old workaround from #22626</code></td></tr></table>\n",
    "created_at": "2020-09-29T16:02:43Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462597",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:55'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/40a2d0f2109daf56293c51e153747cc5ca3b25ff">40a2d0f</a></td><td><code>remove old workaround from #22626</code></td></tr></table>




---

archive/issue_events_260774.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-09-29T16:05:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29314#event-260774"
}
```



---

archive/issue_events_260775.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-09-29T16:05:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29314#event-260775"
}
```



---

archive/issue_comments_462598.json:
```json
{
    "body": "<a id='comment:56'></a>\nVolker, could we try this again? I gather that the commit in [comment:55](#comment%3A55) should change the behaviour of buildbots in [comment:29](#comment%3A29), where crunch seems to happen after reading `sage.gaprc`\n(and this commit removes an overlooked GAP 4.10-specific workaround in `sage.gaprc`)",
    "created_at": "2020-09-29T16:05:58Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462598",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:56'></a>
Volker, could we try this again? I gather that the commit in [comment:55](#comment%3A55) should change the behaviour of buildbots in [comment:29](#comment%3A29), where crunch seems to happen after reading `sage.gaprc`
(and this commit removes an overlooked GAP 4.10-specific workaround in `sage.gaprc`)



---

archive/issue_comments_462599.json:
```json
{
    "body": "<a id='comment:57'></a>\nReplying to [dimpase](#comment%3A54):\n\nThanks for the advices! Here my results:\n\n> 1. try removing `~/.sage/gap/`, or even `~/.sage/`.\n\n\nno succsess\n\n> 2. Could it be you have GAP installed systemwide, and you get an interference?  Or perhaps something in your `gap.ini` or `gaprc` files ...\n\n\nyes, on both of the platforms there is gap 4.8.8, but I was not aware of that. I once installed Sage via `apt` which is an old version (8.1). My guess is that the systemwide gap came along with that (possible?). \n\n\nBut anyway, I have an older computer running under `LinuxMint 18` without a systemwide gap installed and the bug shows there, as well, even after your latest commit. Furthermore I didn't find `gap.ini` and `gaprc` below `local/share/gap`.\n\n> 3. Test the Sage's GAP 4.11 installation, e.g. by\n> \n> ```\n> $ SAGE_CHECK=yes ./sage -f gap\n> ```\n\n\nThe gap testsuite passed through successfully (in all cases).\n\n> 4. Try building this branch from scratch.\n\n\nOn the `WSL` machine I build from a fresh git clone. The bug still shows.\n\nThe error output on the older machine produced back-trace information for the longjmp errors. Shall I upload a log-file?",
    "created_at": "2020-09-29T17:59:13Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462599",
    "user": "https://github.com/soehms"
}
```

<a id='comment:57'></a>
Replying to [dimpase](#comment%3A54):

Thanks for the advices! Here my results:

> 1. try removing `~/.sage/gap/`, or even `~/.sage/`.


no succsess

> 2. Could it be you have GAP installed systemwide, and you get an interference?  Or perhaps something in your `gap.ini` or `gaprc` files ...


yes, on both of the platforms there is gap 4.8.8, but I was not aware of that. I once installed Sage via `apt` which is an old version (8.1). My guess is that the systemwide gap came along with that (possible?). 


But anyway, I have an older computer running under `LinuxMint 18` without a systemwide gap installed and the bug shows there, as well, even after your latest commit. Furthermore I didn't find `gap.ini` and `gaprc` below `local/share/gap`.

> 3. Test the Sage's GAP 4.11 installation, e.g. by
> 
> ```
> $ SAGE_CHECK=yes ./sage -f gap
> ```


The gap testsuite passed through successfully (in all cases).

> 4. Try building this branch from scratch.


On the `WSL` machine I build from a fresh git clone. The bug still shows.

The error output on the older machine produced back-trace information for the longjmp errors. Shall I upload a log-file?



---

archive/issue_events_260776.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/git",
    "created_at": "2020-09-29T18:10:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29314#event-260776"
}
```



---

archive/issue_events_260777.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/git",
    "created_at": "2020-09-29T18:10:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29314#event-260777"
}
```



---

archive/issue_comments_462600.json:
```json
{
    "body": "<a id='comment:58'></a>\n**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ffc24af85679499aff4846b1f135f8cea22b8c0\">2ffc24a</a></td><td><code>this file should exist - leave just comments there</code></td></tr></table>\n",
    "created_at": "2020-09-29T18:10:01Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462600",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:58'></a>
**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ffc24af85679499aff4846b1f135f8cea22b8c0">2ffc24a</a></td><td><code>this file should exist - leave just comments there</code></td></tr></table>




---

archive/issue_comments_462601.json:
```json
{
    "body": "**Changing commit** from \"[40a2d0f2109daf56293c51e153747cc5ca3b25ff](https://github.com/sagemath/sagetrac-mirror/commit/40a2d0f2109daf56293c51e153747cc5ca3b25ff)\" to \"[2ffc24af85679499aff4846b1f135f8cea22b8c0](https://github.com/sagemath/sagetrac-mirror/commit/2ffc24af85679499aff4846b1f135f8cea22b8c0)\".",
    "created_at": "2020-09-29T18:10:01Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462601",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[40a2d0f2109daf56293c51e153747cc5ca3b25ff](https://github.com/sagemath/sagetrac-mirror/commit/40a2d0f2109daf56293c51e153747cc5ca3b25ff)" to "[2ffc24af85679499aff4846b1f135f8cea22b8c0](https://github.com/sagemath/sagetrac-mirror/commit/2ffc24af85679499aff4846b1f135f8cea22b8c0)".



---

archive/issue_comments_462602.json:
```json
{
    "body": "<a id='comment:59'></a>\nReplying to [soehms](#comment%3A57):\n> Replying to [dimpase](#comment%3A54):\n> \n> Thanks for the advices! Here my results:\n> \n> > 1. try removing `~/.sage/gap/`, or even `~/.sage/`.\n  \n> \n> no succsess\n> \n> > 2. Could it be you have GAP installed systemwide, and you get an interference?  Or perhaps something in your `gap.ini` or `gaprc` files ...\n  \n> \n> yes, on both of the platforms there is gap 4.8.8, but I was not aware of that. I once installed Sage via `apt` which is an old version (8.1). My guess is that the systemwide gap came along with that (possible?). \n\n\nCould it be that you have an old libgap too, somewhere, from Sage 8.1?\n\n\nlibgap and GAP share stuff under Sage, and if something came from GAP 4.8.8 then certainly there is a high chance that things break.\nCould you remove the old GAP and old Sage and try again?\n\n> \n> \n> But anyway, I have an older computer running under `LinuxMint 18` without a systemwide gap installed and the bug shows there, as well, even after your latest commit. Furthermore I didn't find `gap.ini` and `gaprc` below `local/share/gap`.\n\n\nPlease make sure there no traces of other GAP installations, `.gaprc` etc on that other machine.\n\n> \n> > 3. Test the Sage's GAP 4.11 installation, e.g. by\n> > \n> > ```\n> > $ SAGE_CHECK=yes ./sage -f gap\n> > ```\n\n> \n> The gap testsuite passed through successfully (in all cases).\n> \n> > 4. Try building this branch from scratch.\n  \n> \n> On the `WSL` machine I build from a fresh git clone. The bug still shows.\n> \n> The error output on the older machine produced back-trace information for the longjmp errors. Shall I upload a log-file?\n\n\nHopefully it's just stale bits that cause this error.\nCould you post the linkage of libgap Python module, i.e. the output of\n\n```\nldd local/lib/python3*/site-packages/sage/libs/gap/libgap.*.so\n```",
    "created_at": "2020-09-29T18:27:46Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462602",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:59'></a>
Replying to [soehms](#comment%3A57):
> Replying to [dimpase](#comment%3A54):
> 
> Thanks for the advices! Here my results:
> 
> > 1. try removing `~/.sage/gap/`, or even `~/.sage/`.
  
> 
> no succsess
> 
> > 2. Could it be you have GAP installed systemwide, and you get an interference?  Or perhaps something in your `gap.ini` or `gaprc` files ...
  
> 
> yes, on both of the platforms there is gap 4.8.8, but I was not aware of that. I once installed Sage via `apt` which is an old version (8.1). My guess is that the systemwide gap came along with that (possible?). 


Could it be that you have an old libgap too, somewhere, from Sage 8.1?


libgap and GAP share stuff under Sage, and if something came from GAP 4.8.8 then certainly there is a high chance that things break.
Could you remove the old GAP and old Sage and try again?

> 
> 
> But anyway, I have an older computer running under `LinuxMint 18` without a systemwide gap installed and the bug shows there, as well, even after your latest commit. Furthermore I didn't find `gap.ini` and `gaprc` below `local/share/gap`.


Please make sure there no traces of other GAP installations, `.gaprc` etc on that other machine.

> 
> > 3. Test the Sage's GAP 4.11 installation, e.g. by
> > 
> > ```
> > $ SAGE_CHECK=yes ./sage -f gap
> > ```

> 
> The gap testsuite passed through successfully (in all cases).
> 
> > 4. Try building this branch from scratch.
  
> 
> On the `WSL` machine I build from a fresh git clone. The bug still shows.
> 
> The error output on the older machine produced back-trace information for the longjmp errors. Shall I upload a log-file?


Hopefully it's just stale bits that cause this error.
Could you post the linkage of libgap Python module, i.e. the output of

```
ldd local/lib/python3*/site-packages/sage/libs/gap/libgap.*.so
```



---

archive/issue_comments_462603.json:
```json
{
    "body": "<a id='comment:60'></a>\nReplying to [dimpase](#comment%3A59):\n> Replying to [soehms](#comment%3A57):\n> > Replying to [dimpase](#comment%3A54):\n> > \n\n> ......\n\n> Hopefully it's just stale bits that cause this error.\n> Could you post the linkage of libgap Python module, i.e. the output of\n> \n> ```\n> ldd local/lib/python3*/site-packages/sage/libs/gap/libgap.*.so\n> ```\n\n\n\n> \n\n\nHere the one from the `LinuxMint 18`\n\n```\nlocal/lib/python3.7/site-packages/sage/libs/gap/libgap.cpython-37m-x86_64-linux-gnu.so:\n\tlinux-vdso.so.1 =>  (0x00007ffd3a776000)\n\tlibgap.so.0 => /home/sebastian/develop/sage/local/lib/libgap.so.0 (0x00007efc33b3c000)\n\tlibpython3.7m.so.1.0 => not found\n\tlibpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007efc3391f000)\n\tlibc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007efc33555000)\n\tlibgmp.so.10 => /usr/lib/x86_64-linux-gnu/libgmp.so.10 (0x00007efc332d5000)\n\tlibz.so.1 => /lib/x86_64-linux-gnu/libz.so.1 (0x00007efc330bb000)\n\tlibreadline.so.6 => /home/sebastian/develop/sage/local/lib/libreadline.so.6 (0x00007efc32e71000)\n\tlibm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007efc32b68000)\n\tlibdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007efc32964000)\n\tlibutil.so.1 => /lib/x86_64-linux-gnu/libutil.so.1 (0x00007efc32761000)\n\t/lib64/ld-linux-x86-64.so.2 (0x00007efc34a8c000)\n\tlibtinfo.so.6 => /home/sebastian/develop/sage/local/lib/libtinfo.so.6 (0x00007efc32528000)\nlocal/lib/python3.8/site-packages/sage/libs/gap/libgap.cpython-38-x86_64-linux-gnu.so:\n\tlinux-vdso.so.1 =>  (0x00007fff44b9d000)\n\tlibgap.so.0 => /home/sebastian/develop/sage/local/lib/libgap.so.0 (0x00007fdca3ad8000)\n\tlibpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007fdca38bb000)\n\tlibc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007fdca34f1000)\n\tlibgmp.so.10 => /usr/lib/x86_64-linux-gnu/libgmp.so.10 (0x00007fdca3271000)\n\tlibz.so.1 => /lib/x86_64-linux-gnu/libz.so.1 (0x00007fdca3057000)\n\tlibreadline.so.6 => /home/sebastian/develop/sage/local/lib/libreadline.so.6 (0x00007fdca2e0d000)\n\tlibm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007fdca2b04000)\n\tlibdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007fdca2900000)\n\tlibutil.so.1 => /lib/x86_64-linux-gnu/libutil.so.1 (0x00007fdca26fd000)\n\t/lib64/ld-linux-x86-64.so.2 (0x00007fdca4a29000)\n\tlibtinfo.so.6 => /home/sebastian/develop/sage/local/lib/libtinfo.so.6 (0x00007fdca24c4000)\n```\n\n\nHere from `WSL` case\n\n```\n        linux-vdso.so.1 (0x00007ffff0e43000)\n        libgap.so.0 => /home/sebastian/devel/sage/local/lib/libgap.so.0 (0x00007f53a2a65000)\n        libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f53a2830000)\n        libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f53a2430000)\n        libgmp.so.10 => /usr/lib/x86_64-linux-gnu/libgmp.so.10 (0x00007f53a21a0000)\n        libz.so.1 => /lib/x86_64-linux-gnu/libz.so.1 (0x00007f53a1f80000)\n        libreadline.so.7 => /lib/x86_64-linux-gnu/libreadline.so.7 (0x00007f53a1d30000)\n        libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f53a1980000)\n        libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f53a1770000)\n        libutil.so.1 => /lib/x86_64-linux-gnu/libutil.so.1 (0x00007f53a1560000)\n        /lib64/ld-linux-x86-64.so.2 (0x00007f53a3600000)\n        libtinfo.so.5 => /lib/x86_64-linux-gnu/libtinfo.so.5 (0x00007f53a1330000)\n```",
    "created_at": "2020-09-29T19:08:29Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462603",
    "user": "https://github.com/soehms"
}
```

<a id='comment:60'></a>
Replying to [dimpase](#comment%3A59):
> Replying to [soehms](#comment%3A57):
> > Replying to [dimpase](#comment%3A54):
> > 

> ......

> Hopefully it's just stale bits that cause this error.
> Could you post the linkage of libgap Python module, i.e. the output of
> 
> ```
> ldd local/lib/python3*/site-packages/sage/libs/gap/libgap.*.so
> ```



> 


Here the one from the `LinuxMint 18`

```
local/lib/python3.7/site-packages/sage/libs/gap/libgap.cpython-37m-x86_64-linux-gnu.so:
	linux-vdso.so.1 =>  (0x00007ffd3a776000)
	libgap.so.0 => /home/sebastian/develop/sage/local/lib/libgap.so.0 (0x00007efc33b3c000)
	libpython3.7m.so.1.0 => not found
	libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007efc3391f000)
	libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007efc33555000)
	libgmp.so.10 => /usr/lib/x86_64-linux-gnu/libgmp.so.10 (0x00007efc332d5000)
	libz.so.1 => /lib/x86_64-linux-gnu/libz.so.1 (0x00007efc330bb000)
	libreadline.so.6 => /home/sebastian/develop/sage/local/lib/libreadline.so.6 (0x00007efc32e71000)
	libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007efc32b68000)
	libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007efc32964000)
	libutil.so.1 => /lib/x86_64-linux-gnu/libutil.so.1 (0x00007efc32761000)
	/lib64/ld-linux-x86-64.so.2 (0x00007efc34a8c000)
	libtinfo.so.6 => /home/sebastian/develop/sage/local/lib/libtinfo.so.6 (0x00007efc32528000)
local/lib/python3.8/site-packages/sage/libs/gap/libgap.cpython-38-x86_64-linux-gnu.so:
	linux-vdso.so.1 =>  (0x00007fff44b9d000)
	libgap.so.0 => /home/sebastian/develop/sage/local/lib/libgap.so.0 (0x00007fdca3ad8000)
	libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007fdca38bb000)
	libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007fdca34f1000)
	libgmp.so.10 => /usr/lib/x86_64-linux-gnu/libgmp.so.10 (0x00007fdca3271000)
	libz.so.1 => /lib/x86_64-linux-gnu/libz.so.1 (0x00007fdca3057000)
	libreadline.so.6 => /home/sebastian/develop/sage/local/lib/libreadline.so.6 (0x00007fdca2e0d000)
	libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007fdca2b04000)
	libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007fdca2900000)
	libutil.so.1 => /lib/x86_64-linux-gnu/libutil.so.1 (0x00007fdca26fd000)
	/lib64/ld-linux-x86-64.so.2 (0x00007fdca4a29000)
	libtinfo.so.6 => /home/sebastian/develop/sage/local/lib/libtinfo.so.6 (0x00007fdca24c4000)
```


Here from `WSL` case

```
        linux-vdso.so.1 (0x00007ffff0e43000)
        libgap.so.0 => /home/sebastian/devel/sage/local/lib/libgap.so.0 (0x00007f53a2a65000)
        libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f53a2830000)
        libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f53a2430000)
        libgmp.so.10 => /usr/lib/x86_64-linux-gnu/libgmp.so.10 (0x00007f53a21a0000)
        libz.so.1 => /lib/x86_64-linux-gnu/libz.so.1 (0x00007f53a1f80000)
        libreadline.so.7 => /lib/x86_64-linux-gnu/libreadline.so.7 (0x00007f53a1d30000)
        libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f53a1980000)
        libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f53a1770000)
        libutil.so.1 => /lib/x86_64-linux-gnu/libutil.so.1 (0x00007f53a1560000)
        /lib64/ld-linux-x86-64.so.2 (0x00007f53a3600000)
        libtinfo.so.5 => /lib/x86_64-linux-gnu/libtinfo.so.5 (0x00007f53a1330000)
```



---

archive/issue_comments_462604.json:
```json
{
    "body": "<a id='comment:61'></a>\nLinux Mint case looks a bit funny, as you have both python 3.7 and 3.8 in one installation? Or they are different?\n\nCould you also post the errors you get in src/sage/groups/libgap_wrapper.pyx ?\n(which is the root cause of the other errors, I gather)\n\nAnyhow, I'm now testing on Linux Mint 19 (in an lxc container), let's see if this is reproducible.",
    "created_at": "2020-09-29T21:06:35Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462604",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:61'></a>
Linux Mint case looks a bit funny, as you have both python 3.7 and 3.8 in one installation? Or they are different?

Could you also post the errors you get in src/sage/groups/libgap_wrapper.pyx ?
(which is the root cause of the other errors, I gather)

Anyhow, I'm now testing on Linux Mint 19 (in an lxc container), let's see if this is reproducible.



---

archive/issue_comments_462605.json:
```json
{
    "body": "Output of doctest of libgap_wrapper.pyx on LinuxMint 18",
    "created_at": "2020-09-30T04:33:43Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462605",
    "user": "https://github.com/soehms"
}
```

Output of doctest of libgap_wrapper.pyx on LinuxMint 18



---

archive/attachments_022039.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "libgap_wrapper_test.log",
    "asset_url": "tarball://root/attachments/ticket29314/libgap_wrapper_test.log",
    "created_at": "2020-09-30T04:37:39Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket29314/libgap_wrapper_test.log",
    "user": "https://github.com/soehms"
}
```



---

archive/issue_comments_462606.json:
```json
{
    "body": "<a id='comment:62'></a>\n**Attachment:** [libgap_wrapper_test.log](https://github.com/sagemath/sage/files/ticket29314/libgap_wrapper_test.log)\n\nReplying to [dimpase](#comment%3A61):\n\n> Could you also post the errors you get in src/sage/groups/libgap_wrapper.pyx ?\n> (which is the root cause of the other errors, I gather)\n\n\nSee the attached file!",
    "created_at": "2020-09-30T04:37:39Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462606",
    "user": "https://github.com/soehms"
}
```

<a id='comment:62'></a>
**Attachment:** [libgap_wrapper_test.log](https://github.com/sagemath/sage/files/ticket29314/libgap_wrapper_test.log)

Replying to [dimpase](#comment%3A61):

> Could you also post the errors you get in src/sage/groups/libgap_wrapper.pyx ?
> (which is the root cause of the other errors, I gather)


See the attached file!



---

archive/issue_comments_462607.json:
```json
{
    "body": "<a id='comment:63'></a>\nI've installed Linux Mint Tara (i.e. 19) in an xlc container, built this branch there, and ran tests - and everything worked. Here is what I have in the apt sources list\n\n```\ndeb http://packages.linuxmint.com tara main upstream import backport\ndeb http://archive.ubuntu.com/ubuntu bionic main restricted universe multiverse\ndeb http://archive.ubuntu.com/ubuntu bionic-updates main restricted universe multiverse\ndeb http://security.ubuntu.com/ubuntu bionic-security main restricted universe multiverse\n```\nthe kernel is\n\n```\nLinux m1 5.4.48-06434-gd868196d13af #1 SMP PREEMPT Wed Jul 29 00:32:34 PDT 2020 x86_64 x86_64 x86_64 GNU/Linux\n```\nSo it looks as if everything should run just fine - I guess something is wrong with the particular box, sorry.",
    "created_at": "2020-09-30T08:25:11Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462607",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:63'></a>
I've installed Linux Mint Tara (i.e. 19) in an xlc container, built this branch there, and ran tests - and everything worked. Here is what I have in the apt sources list

```
deb http://packages.linuxmint.com tara main upstream import backport
deb http://archive.ubuntu.com/ubuntu bionic main restricted universe multiverse
deb http://archive.ubuntu.com/ubuntu bionic-updates main restricted universe multiverse
deb http://security.ubuntu.com/ubuntu bionic-security main restricted universe multiverse
```
the kernel is

```
Linux m1 5.4.48-06434-gd868196d13af #1 SMP PREEMPT Wed Jul 29 00:32:34 PDT 2020 x86_64 x86_64 x86_64 GNU/Linux
```
So it looks as if everything should run just fine - I guess something is wrong with the particular box, sorry.



---

archive/issue_events_260778.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-09-30T12:35:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29314#event-260778"
}
```



---

archive/issue_events_260779.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-09-30T12:35:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29314#event-260779"
}
```



---

archive/issue_comments_462608.json:
```json
{
    "body": "**Changing reviewer** from \"Matthias Koeppe, https://github.com/mkoeppe/sage/actions/runs/270864243\" to \"Matthias Koeppe\".",
    "created_at": "2020-09-30T23:25:18Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462608",
    "user": "https://github.com/mkoeppe"
}
```

**Changing reviewer** from "Matthias Koeppe, https://github.com/mkoeppe/sage/actions/runs/270864243" to "Matthias Koeppe".



---

archive/issue_comments_462609.json:
```json
{
    "body": "<a id='comment:66'></a>\nReplying to [dimpase](#comment%3A63):\n\n> So it looks as if everything should run just fine - I guess something is wrong with the particular box, sorry. \n\n\nDima, one thing common to my platforms is, that I have `gap3` installed (from https://webusers.imj-prg.fr/~jean.michel/gap3/ according to the advices given in `src/sage/interfaces/gap3.py`, and I'm using it inside Sage). Did you test with `gap3`, as well?\n\nBTW: removing gap 4.8.8 did not help!",
    "created_at": "2020-10-01T08:02:01Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462609",
    "user": "https://github.com/soehms"
}
```

<a id='comment:66'></a>
Replying to [dimpase](#comment%3A63):

> So it looks as if everything should run just fine - I guess something is wrong with the particular box, sorry. 


Dima, one thing common to my platforms is, that I have `gap3` installed (from https://webusers.imj-prg.fr/~jean.michel/gap3/ according to the advices given in `src/sage/interfaces/gap3.py`, and I'm using it inside Sage). Did you test with `gap3`, as well?

BTW: removing gap 4.8.8 did not help!



---

archive/issue_comments_462610.json:
```json
{
    "body": "<a id='comment:67'></a>\nReplying to [soehms](#comment%3A66):\n> Replying to [dimpase](#comment%3A63):\n> \n> > So it looks as if everything should run just fine - I guess something is wrong with the particular box, sorry. \n\n> \n> Dima, one thing common to my platforms is, that I have `gap3` installed (from https://webusers.imj-prg.fr/~jean.michel/gap3/ according to the advices given in `src/sage/interfaces/gap3.py`, and I'm using it inside Sage). Did you test with `gap3`, as well?\n\n\nI just tried installing gap3 experimental package and running tests, and nothing is broken for me (in Linux Mint container, too).\n\nI don't know the advantage of following the manual instructions in `src/sage/interfaces/gap3.py` instead -- are there any?\n\nPerhaps they should be marked as obsolete, or just removed. In any event, `WARNING` about broken `pexpect` there should go.\n\nNeedless to say, if you mangle your Sage installation manually in some way, then all the bets are off, we can't say that Sage has a bug then. :-)",
    "created_at": "2020-10-01T09:05:12Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462610",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:67'></a>
Replying to [soehms](#comment%3A66):
> Replying to [dimpase](#comment%3A63):
> 
> > So it looks as if everything should run just fine - I guess something is wrong with the particular box, sorry. 

> 
> Dima, one thing common to my platforms is, that I have `gap3` installed (from https://webusers.imj-prg.fr/~jean.michel/gap3/ according to the advices given in `src/sage/interfaces/gap3.py`, and I'm using it inside Sage). Did you test with `gap3`, as well?


I just tried installing gap3 experimental package and running tests, and nothing is broken for me (in Linux Mint container, too).

I don't know the advantage of following the manual instructions in `src/sage/interfaces/gap3.py` instead -- are there any?

Perhaps they should be marked as obsolete, or just removed. In any event, `WARNING` about broken `pexpect` there should go.

Needless to say, if you mangle your Sage installation manually in some way, then all the bets are off, we can't say that Sage has a bug then. :-)



---

archive/issue_comments_462611.json:
```json
{
    "body": "<a id='comment:68'></a>\nfor the latter, see #30686.",
    "created_at": "2020-10-01T09:08:35Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462611",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:68'></a>
for the latter, see #30686.



---

archive/issue_comments_462612.json:
```json
{
    "body": "<a id='comment:69'></a>\nReplying to [dimpase](#comment%3A67):\n> Replying to [soehms](#comment%3A66):\n> ...\n\n>\n> I just tried installing gap3 experimental package and running tests, and nothing is broken for me (in Linux Mint container, too).\n\nThanks for your help! In the meantime I realized that gap3 isn't the reason for my desaster, either (since against my expectation it was not present on the WSL).\n\n> I don't know the advantage of following the manual instructions in `src/sage/interfaces/gap3.py` instead -- are there any?\n\n\nI don't know. I did that years ago when I was new to Sage, and probably didn't know it better.\n\n> Perhaps they should be marked as obsolete, or just removed. In any event, `WARNING` about broken `pexpect` there should go.\n\n>\n> Needless to say, if you mangle your Sage installation manually in some way, then all the bets are off, we can't say that Sage has a bug then. :-)\n\n\nI agree! But that was not my point. I have to fix my facilities until this ticket is released (or completely switch to working in docker containers).",
    "created_at": "2020-10-01T16:50:18Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462612",
    "user": "https://github.com/soehms"
}
```

<a id='comment:69'></a>
Replying to [dimpase](#comment%3A67):
> Replying to [soehms](#comment%3A66):
> ...

>
> I just tried installing gap3 experimental package and running tests, and nothing is broken for me (in Linux Mint container, too).

Thanks for your help! In the meantime I realized that gap3 isn't the reason for my desaster, either (since against my expectation it was not present on the WSL).

> I don't know the advantage of following the manual instructions in `src/sage/interfaces/gap3.py` instead -- are there any?


I don't know. I did that years ago when I was new to Sage, and probably didn't know it better.

> Perhaps they should be marked as obsolete, or just removed. In any event, `WARNING` about broken `pexpect` there should go.

>
> Needless to say, if you mangle your Sage installation manually in some way, then all the bets are off, we can't say that Sage has a bug then. :-)


I agree! But that was not my point. I have to fix my facilities until this ticket is released (or completely switch to working in docker containers).



---

archive/issue_comments_462613.json:
```json
{
    "body": "<a id='comment:70'></a>\nReplying to [soehms](#comment%3A69):\n\ndo you have a particular \"interesting\" hardware for WSL and Mint  - is it the same box? Unusual toolchain?\n\nCould you maybe spin a WSL somewhere else and try to reproduce?\n\n> I agree! But that was not my point. I have to fix my facilities until this ticket is released (or completely switch to working in docker containers).\n> \n\nany test errors in `src/sage/libs/gap/` ? in `src/sage/groups/matrix_gps/` ?\nOr is your problem specifically related to free groups and finitely presented groups?",
    "created_at": "2020-10-02T11:00:59Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462613",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:70'></a>
Replying to [soehms](#comment%3A69):

do you have a particular "interesting" hardware for WSL and Mint  - is it the same box? Unusual toolchain?

Could you maybe spin a WSL somewhere else and try to reproduce?

> I agree! But that was not my point. I have to fix my facilities until this ticket is released (or completely switch to working in docker containers).
> 

any test errors in `src/sage/libs/gap/` ? in `src/sage/groups/matrix_gps/` ?
Or is your problem specifically related to free groups and finitely presented groups?



---

archive/issue_comments_462614.json:
```json
{
    "body": "<a id='comment:71'></a>\nReplying to [dimpase](#comment%3A70):\n> Replying to [soehms](#comment%3A69):\n> \n\n\nThanks again for your hints!\n\n> do you have a particular \"interesting\" hardware for WSL and Mint - is it the same box? Unusual toolchain?\n\n\nThe three cases above where all Lenovo ThinkPads (L560 WSL, X240 LinuxMint 19.1, L520 LinuxMint 18, all running on Intel i5). In addition I have now a fourth test case: SonyVaio (on Intel i5, as well, and LinuxMint 17.3).\n\nOn the X240 I created a Docker image for the ticket using the `$SAGE_ROOT/docker/Dockerfile`. The bug does not show in the corresponding container. So, I think the issue has nothing to do with the hardware.\n\n\n> Could you maybe spin a WSL somewhere else and try to reproduce?\n\n\nI will check that out.\n\n> any test errors in src/sage/libs/gap/ ? in src/sage/groups/matrix_gps/ ? Or is your problem specifically related to free groups and finitely presented groups?\n\n\nYes:\n\n```\nFile \"src/sage/libs/gap/element.pyx\", line 1335, in sage.libs.gap.element.GapElement.sage\nFile \"src/sage/libs/gap/element.pyx\", line 1336, in sage.libs.gap.element.GapElement.sage\nFile \"src/sage/libs/gap/element.pyx\", line 1338, in sage.libs.gap.element.GapElement.sage\nFile \"src/sage/libs/gap/element.pyx\", line 1347, in sage.libs.gap.element.GapElement.sage\nFile \"src/sage/libs/gap/element.pyx\", line 1348, in sage.libs.gap.element.GapElement.sage\nFile \"src/sage/libs/gap/element.pyx\", line 1350, in sage.libs.gap.element.GapElement.sage\nFile \"src/sage/libs/gap/libgap.pyx\", line 351, in sage.libs.gap.libgap.Gap._construct_matrix\n\nsage -t --warn-long 46.3 --random-seed=0 src/sage/libs/gap/element.pyx  # 6 doctests failed\nsage -t --warn-long 46.3 --random-seed=0 src/sage/libs/gap/libgap.pyx  # 1 doctest failed\n```\n\nUnder `src/sage/groups` there are in sum 1182 failing doctests, 78 of them under `sage.groups.matrix_gps`. Free groups and finitely presented groups are just the top scores. Probably they all have the same origin.",
    "created_at": "2020-10-02T22:16:11Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462614",
    "user": "https://github.com/soehms"
}
```

<a id='comment:71'></a>
Replying to [dimpase](#comment%3A70):
> Replying to [soehms](#comment%3A69):
> 


Thanks again for your hints!

> do you have a particular "interesting" hardware for WSL and Mint - is it the same box? Unusual toolchain?


The three cases above where all Lenovo ThinkPads (L560 WSL, X240 LinuxMint 19.1, L520 LinuxMint 18, all running on Intel i5). In addition I have now a fourth test case: SonyVaio (on Intel i5, as well, and LinuxMint 17.3).

On the X240 I created a Docker image for the ticket using the `$SAGE_ROOT/docker/Dockerfile`. The bug does not show in the corresponding container. So, I think the issue has nothing to do with the hardware.


> Could you maybe spin a WSL somewhere else and try to reproduce?


I will check that out.

> any test errors in src/sage/libs/gap/ ? in src/sage/groups/matrix_gps/ ? Or is your problem specifically related to free groups and finitely presented groups?


Yes:

```
File "src/sage/libs/gap/element.pyx", line 1335, in sage.libs.gap.element.GapElement.sage
File "src/sage/libs/gap/element.pyx", line 1336, in sage.libs.gap.element.GapElement.sage
File "src/sage/libs/gap/element.pyx", line 1338, in sage.libs.gap.element.GapElement.sage
File "src/sage/libs/gap/element.pyx", line 1347, in sage.libs.gap.element.GapElement.sage
File "src/sage/libs/gap/element.pyx", line 1348, in sage.libs.gap.element.GapElement.sage
File "src/sage/libs/gap/element.pyx", line 1350, in sage.libs.gap.element.GapElement.sage
File "src/sage/libs/gap/libgap.pyx", line 351, in sage.libs.gap.libgap.Gap._construct_matrix

sage -t --warn-long 46.3 --random-seed=0 src/sage/libs/gap/element.pyx  # 6 doctests failed
sage -t --warn-long 46.3 --random-seed=0 src/sage/libs/gap/libgap.pyx  # 1 doctest failed
```

Under `src/sage/groups` there are in sum 1182 failing doctests, 78 of them under `sage.groups.matrix_gps`. Free groups and finitely presented groups are just the top scores. Probably they all have the same origin.



---

archive/issue_comments_462615.json:
```json
{
    "body": "<a id='comment:72'></a>\nBy the way, do you by any chances have any stray/old patches in `build/pkgs/gap/patches` or in `build/pkgs/gap_packages/patches` ?\n\nCertainly, errors in `src/sage/libs/gap/element.pyx` and `src/sage/libs/gap/libgap.pyx` are the root of the problem, and should be relatively easy to debug, as it's more or less direct interaction with libgap, and well-localised - everything has to do with dealing with a GAP variable `x`.\n\nSo what happens if you run the stuff around line 1335 from `libs/gap/element.pyx`?\n\n```\nsage: x = libgap.Integers.Indeterminate(\"x\")\nsage: x\nsage: x+1\nsage: x^2\nsage: p = x^2 - 2*x + 3\n```",
    "created_at": "2020-10-02T23:12:41Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462615",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:72'></a>
By the way, do you by any chances have any stray/old patches in `build/pkgs/gap/patches` or in `build/pkgs/gap_packages/patches` ?

Certainly, errors in `src/sage/libs/gap/element.pyx` and `src/sage/libs/gap/libgap.pyx` are the root of the problem, and should be relatively easy to debug, as it's more or less direct interaction with libgap, and well-localised - everything has to do with dealing with a GAP variable `x`.

So what happens if you run the stuff around line 1335 from `libs/gap/element.pyx`?

```
sage: x = libgap.Integers.Indeterminate("x")
sage: x
sage: x+1
sage: x^2
sage: p = x^2 - 2*x + 3
```



---

archive/issue_comments_462616.json:
```json
{
    "body": "<a id='comment:73'></a>\nStill hangs the buildbot\n\n```\n[dochtml] [algebras ] building [inventory]: targets for 95 source files that are out of date\n[dochtml] [algebras ] updating environment: [new config] 95 added, 0 changed, 0 removed\n[dochtml] [algebras ] The inventory files are in local/share/doc/sage/inventory/en/reference/algebras.\n[dochtml] Build finished. The built documents can be found in /var/lib/buildbot/slave/sage_git/build/local/share/doc/sage/inventory/en/reference/algebras\n[dochtml] [tensor_fr] building [inventory]: targets for 19 source files that are out of date\n[dochtml] [tensor_fr] updating environment: [new config] 19 added, 0 changed, 0 removed\n[dochtml] [tensor_fr] The inventory files are in local/share/doc/sage/inventory/en/reference/tensor_free_modules.\n[dochtml] Build finished. The built documents can be found in /var/lib/buildbot/slave/sage_git/build/local/share/doc/sage/inventory/en/reference/tensor_free_modules\n[dochtml] Warning: Missing title for sage.combinat.posets.mobile\n[dochtml] [combinat ] building [inventory]: targets for 379 source files that are out of date\n[dochtml] [combinat ] updating environment: [new config] 379 added, 0 changed, 0 removed\ncommand timed out: 1200 seconds without output running ['make', 'doc-html-mathjax'], attempting to kill\nprocess killed by signal 9\nprogram finished with exit code -1\nelapsedTime=1394.804628\n```",
    "created_at": "2020-10-04T22:26:40Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462616",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:73'></a>
Still hangs the buildbot

```
[dochtml] [algebras ] building [inventory]: targets for 95 source files that are out of date
[dochtml] [algebras ] updating environment: [new config] 95 added, 0 changed, 0 removed
[dochtml] [algebras ] The inventory files are in local/share/doc/sage/inventory/en/reference/algebras.
[dochtml] Build finished. The built documents can be found in /var/lib/buildbot/slave/sage_git/build/local/share/doc/sage/inventory/en/reference/algebras
[dochtml] [tensor_fr] building [inventory]: targets for 19 source files that are out of date
[dochtml] [tensor_fr] updating environment: [new config] 19 added, 0 changed, 0 removed
[dochtml] [tensor_fr] The inventory files are in local/share/doc/sage/inventory/en/reference/tensor_free_modules.
[dochtml] Build finished. The built documents can be found in /var/lib/buildbot/slave/sage_git/build/local/share/doc/sage/inventory/en/reference/tensor_free_modules
[dochtml] Warning: Missing title for sage.combinat.posets.mobile
[dochtml] [combinat ] building [inventory]: targets for 379 source files that are out of date
[dochtml] [combinat ] updating environment: [new config] 379 added, 0 changed, 0 removed
command timed out: 1200 seconds without output running ['make', 'doc-html-mathjax'], attempting to kill
process killed by signal 9
program finished with exit code -1
elapsedTime=1394.804628
```



---

archive/issue_events_260780.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-10-04T22:26:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29314#event-260780"
}
```



---

archive/issue_events_260781.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-10-04T22:26:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29314#event-260781"
}
```



---

archive/issue_comments_462617.json:
```json
{
    "body": "<a id='comment:74'></a>\nHow about backporting the patch added for Xcode 12 and leaving the gap upgrade to the 9.3 series.",
    "created_at": "2020-10-04T22:30:53Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462617",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:74'></a>
How about backporting the patch added for Xcode 12 and leaving the gap upgrade to the 9.3 series.



---

archive/issue_events_260782.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-04T22:30:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29314#event-260782"
}
```



---

archive/issue_events_260783.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-04T22:30:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29314#event-260783"
}
```



---

archive/issue_comments_462618.json:
```json
{
    "body": "<a id='comment:75'></a>\nCreated #30720 for this",
    "created_at": "2020-10-04T22:39:11Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462618",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:75'></a>
Created #30720 for this



---

archive/issue_comments_462619.json:
```json
{
    "body": "<a id='comment:76'></a>\nReplying to [dimpase](#comment%3A72):\n> By the way, do you by any chances have any stray/old patches in `build/pkgs/gap/patches` or in `build/pkgs/gap_packages/patches` ?\n> \n\nNo!\n\n> Certainly, errors in `src/sage/libs/gap/element.pyx` and `src/sage/libs/gap/libgap.pyx` are the root of the problem, and should be relatively easy to debug, as it's more or less direct interaction with libgap, and well-localised - everything has to do with dealing with a GAP variable `x`.\n> \n> So what happens if you run the stuff around line 1335 from `libs/gap/element.pyx`?\n> \n> ```\n> sage: x = libgap.Integers.Indeterminate(\"x\")\n> sage: x\n> sage: x+1\n> sage: x^2\n> sage: p = x^2 - 2*x + 3\n> ```\n> \n\n\nThe crash already occured at the addition `x+1`, more precisely in `local/lib/python3.8/site-packages/cysignals/macros.h`. It jumped to line 134 even though `cysigs.sig_on_count` was zero.\n\n```\n(gdb) n\n__pyx_f_4sage_4libs_3gap_7element_10GapElement__add_ (__pyx_v_self=0x7f5e227f1840, __pyx_v_right=0x7f5e2281eb00, __pyx_skip_dispatch=<optimized out>)\n    at build/cythonized/sage/libs/gap/element.c:10206\n10206       __pyx_t_5 = sig_on(); if (unlikely(__pyx_t_5 == ((int)0))) __PYX_ERR(0, 1007, __pyx_L4_error)\n(gdb) s\n_sig_on_prejmp (message=0x0, file=0x7f5e31f0c728 \"build/cythonized/sage/libs/gap/element.c\", line=10206)\n    at /home/sebastian/develop/sage/local/lib/python3.8/site-packages/cysignals/macros.h:117\n117         cysigs.s = message;\n(gdb) s\n132         if (cysigs.sig_on_count > 0)\n(gdb) p cysigs.sig_on_count\n$2 = 0\n(gdb) l\n127             fprintf(stderr, \"\\n*** ERROR *** sig_on() with sig_on_count = %i, block_sigint = %i\\n\",\n128                     (int)cysigs.sig_on_count, (int)cysigs.block_sigint);\n129             print_backtrace();\n130         }\n131     #endif\n132         if (cysigs.sig_on_count > 0)\n133         {\n134             cysigs.sig_on_count++;\n135             return 1;\n136         }\n(gdb) s\n134             cysigs.sig_on_count++;\n(gdb) p cysigs.sig_on_count\n$3 = 0\n```\n\nTherefore, I ran\n\n```\nsage -f cysignals\nmake build\n```\n\nand that **solved the problem**!\n\nBut, why did I have to do that even in the case where I build fro scratch? Anyway, thanks a lot for your patience!",
    "created_at": "2020-10-05T09:00:45Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462619",
    "user": "https://github.com/soehms"
}
```

<a id='comment:76'></a>
Replying to [dimpase](#comment%3A72):
> By the way, do you by any chances have any stray/old patches in `build/pkgs/gap/patches` or in `build/pkgs/gap_packages/patches` ?
> 

No!

> Certainly, errors in `src/sage/libs/gap/element.pyx` and `src/sage/libs/gap/libgap.pyx` are the root of the problem, and should be relatively easy to debug, as it's more or less direct interaction with libgap, and well-localised - everything has to do with dealing with a GAP variable `x`.
> 
> So what happens if you run the stuff around line 1335 from `libs/gap/element.pyx`?
> 
> ```
> sage: x = libgap.Integers.Indeterminate("x")
> sage: x
> sage: x+1
> sage: x^2
> sage: p = x^2 - 2*x + 3
> ```
> 


The crash already occured at the addition `x+1`, more precisely in `local/lib/python3.8/site-packages/cysignals/macros.h`. It jumped to line 134 even though `cysigs.sig_on_count` was zero.

```
(gdb) n
__pyx_f_4sage_4libs_3gap_7element_10GapElement__add_ (__pyx_v_self=0x7f5e227f1840, __pyx_v_right=0x7f5e2281eb00, __pyx_skip_dispatch=<optimized out>)
    at build/cythonized/sage/libs/gap/element.c:10206
10206       __pyx_t_5 = sig_on(); if (unlikely(__pyx_t_5 == ((int)0))) __PYX_ERR(0, 1007, __pyx_L4_error)
(gdb) s
_sig_on_prejmp (message=0x0, file=0x7f5e31f0c728 "build/cythonized/sage/libs/gap/element.c", line=10206)
    at /home/sebastian/develop/sage/local/lib/python3.8/site-packages/cysignals/macros.h:117
117         cysigs.s = message;
(gdb) s
132         if (cysigs.sig_on_count > 0)
(gdb) p cysigs.sig_on_count
$2 = 0
(gdb) l
127             fprintf(stderr, "\n*** ERROR *** sig_on() with sig_on_count = %i, block_sigint = %i\n",
128                     (int)cysigs.sig_on_count, (int)cysigs.block_sigint);
129             print_backtrace();
130         }
131     #endif
132         if (cysigs.sig_on_count > 0)
133         {
134             cysigs.sig_on_count++;
135             return 1;
136         }
(gdb) s
134             cysigs.sig_on_count++;
(gdb) p cysigs.sig_on_count
$3 = 0
```

Therefore, I ran

```
sage -f cysignals
make build
```

and that **solved the problem**!

But, why did I have to do that even in the case where I build fro scratch? Anyway, thanks a lot for your patience!



---

archive/issue_comments_462620.json:
```json
{
    "body": "<a id='comment:77'></a>\nReplying to [soehms](#comment%3A76):\n[...]\n> Therefore, I ran\n> \n> ```\n> sage -f cysignals\n> make build\n> ```\n> \n> and that **solved the problem**!\n\n\nGreat! \n\n> But, why did I have to do that even in the case where I build fro scratch? Anyway, thanks a lot for your patience! \n\nCould be #30687 (with the original suject: \"local/**lib**/python3*\" must be removed)  - unless\nyou did run `make distclean` which removes `local/` completely anyway...",
    "created_at": "2020-10-05T11:29:04Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462620",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:77'></a>
Replying to [soehms](#comment%3A76):
[...]
> Therefore, I ran
> 
> ```
> sage -f cysignals
> make build
> ```
> 
> and that **solved the problem**!


Great! 

> But, why did I have to do that even in the case where I build fro scratch? Anyway, thanks a lot for your patience! 

Could be #30687 (with the original suject: "local/**lib**/python3*" must be removed)  - unless
you did run `make distclean` which removes `local/` completely anyway...



---

archive/issue_comments_462621.json:
```json
{
    "body": "<a id='comment:78'></a>\nReplying to [vbraun](#comment%3A73):\n> Still hangs the buildbot\n\n\nSomeone has to debug this somehow, I have no clue what's going on there. Could you do another `strace -ff ...` as in [comment:29](#comment%3A29) ?",
    "created_at": "2020-10-05T11:33:50Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462621",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:78'></a>
Replying to [vbraun](#comment%3A73):
> Still hangs the buildbot


Someone has to debug this somehow, I have no clue what's going on there. Could you do another `strace -ff ...` as in [comment:29](#comment%3A29) ?



---

archive/issue_comments_462622.json:
```json
{
    "body": "**Work Issues:** rebase on top of #30720",
    "created_at": "2020-10-05T12:05:26Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462622",
    "user": "https://github.com/mkoeppe"
}
```

**Work Issues:** rebase on top of #30720



---

archive/issue_comments_462623.json:
```json
{
    "body": "**Changing commit** from \"[2ffc24af85679499aff4846b1f135f8cea22b8c0](https://github.com/sagemath/sagetrac-mirror/commit/2ffc24af85679499aff4846b1f135f8cea22b8c0)\" to \"[649bc8defe5c4f58da7582b1f7bfa10f1c3f793e](https://github.com/sagemath/sagetrac-mirror/commit/649bc8defe5c4f58da7582b1f7bfa10f1c3f793e)\".",
    "created_at": "2020-10-05T19:02:25Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462623",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[2ffc24af85679499aff4846b1f135f8cea22b8c0](https://github.com/sagemath/sagetrac-mirror/commit/2ffc24af85679499aff4846b1f135f8cea22b8c0)" to "[649bc8defe5c4f58da7582b1f7bfa10f1c3f793e](https://github.com/sagemath/sagetrac-mirror/commit/649bc8defe5c4f58da7582b1f7bfa10f1c3f793e)".



---

archive/issue_comments_462624.json:
```json
{
    "body": "<a id='comment:80'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2033e4a8248bf24aa1a5a0f6642470a90ee1ea68\">2033e4a</a></td><td><code>libsemigroups update</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/540d761d5269272741b72ab440d22ad098311e18\">540d761</a></td><td><code>patches from Arch (cf #29314)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/98267a58be3bff1dbef34f9809088c0bb3325ff0\">98267a5</a></td><td><code>tagged #random tests with output depending upon gap_packages installed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aec0937602b332145dfaeaa5e15d8632b97a579c\">aec0937</a></td><td><code>one more doctest fix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8a2251ecfcbef35fd95438323698df49c510e984\">8a2251e</a></td><td><code>more robust test, so that GAP's packages don't matter</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d2fb8228f0c272fae8388d8fdcdb122c0b90bc94\">d2fb822</a></td><td><code>increase memory pool for libgap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/22c7420fbb2f395936ca37a11cc9b3b7e3efda0a\">22c7420</a></td><td><code>build/pkgs/gap_packages: Use symlinks to refer to gap's tarball</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b54ec20b55ab22dfdaeaaf6535026d8e0ffa0a96\">b54ec20</a></td><td><code>version bump</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b22dd962ed17953e0bc6f1825df024569951db0\">3b22dd9</a></td><td><code>remove old workaround from #22626</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/649bc8defe5c4f58da7582b1f7bfa10f1c3f793e\">649bc8d</a></td><td><code>this file should exist - leave just comments there</code></td></tr></table>\n",
    "created_at": "2020-10-05T19:02:25Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462624",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:80'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2033e4a8248bf24aa1a5a0f6642470a90ee1ea68">2033e4a</a></td><td><code>libsemigroups update</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/540d761d5269272741b72ab440d22ad098311e18">540d761</a></td><td><code>patches from Arch (cf #29314)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/98267a58be3bff1dbef34f9809088c0bb3325ff0">98267a5</a></td><td><code>tagged #random tests with output depending upon gap_packages installed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aec0937602b332145dfaeaa5e15d8632b97a579c">aec0937</a></td><td><code>one more doctest fix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8a2251ecfcbef35fd95438323698df49c510e984">8a2251e</a></td><td><code>more robust test, so that GAP's packages don't matter</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d2fb8228f0c272fae8388d8fdcdb122c0b90bc94">d2fb822</a></td><td><code>increase memory pool for libgap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/22c7420fbb2f395936ca37a11cc9b3b7e3efda0a">22c7420</a></td><td><code>build/pkgs/gap_packages: Use symlinks to refer to gap's tarball</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b54ec20b55ab22dfdaeaaf6535026d8e0ffa0a96">b54ec20</a></td><td><code>version bump</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b22dd962ed17953e0bc6f1825df024569951db0">3b22dd9</a></td><td><code>remove old workaround from #22626</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/649bc8defe5c4f58da7582b1f7bfa10f1c3f793e">649bc8d</a></td><td><code>this file should exist - leave just comments there</code></td></tr></table>




---

archive/issue_comments_462625.json:
```json
{
    "body": "**Changing dependencies** from \"#30496\" to \"#30720\".",
    "created_at": "2020-10-05T19:03:41Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462625",
    "user": "https://github.com/dimpase"
}
```

**Changing dependencies** from "#30496" to "#30720".



---

archive/issue_events_260784.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-10-05T19:03:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29314#event-260784"
}
```



---

archive/issue_events_260785.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-10-05T19:03:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29314#event-260785"
}
```



---

archive/issue_comments_462626.json:
```json
{
    "body": "<a id='comment:81'></a>\nrebased over #30720",
    "created_at": "2020-10-05T19:03:41Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462626",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:81'></a>
rebased over #30720



---

archive/issue_comments_462627.json:
```json
{
    "body": "**Changing work issues** from \"rebase on top of #30720\" to \"\".",
    "created_at": "2020-10-05T19:03:41Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462627",
    "user": "https://github.com/dimpase"
}
```

**Changing work issues** from "rebase on top of #30720" to "".



---

archive/issue_comments_462628.json:
```json
{
    "body": "<a id='comment:82'></a>\nThe patches for `gap_packages` don't work:\n\n```\nApplying patches from ../patches...\nApplying ../patches/cohomolo-gcc10.patch\ncan't find file to patch at input line 5\nPerhaps you used the wrong -p or --strip option?\nThe text leading up to this was:\n--------------------------\n|diff --git a/pkg/cohomolo-1.6.7/standalone/progs.d/crp1.c b/pkg/cohomolo-1.6.7/standalone/progs.d/crp1.c\n|index 3bbdc45..7df699f 100644\n|--- a/pkg/cohomolo-1.6.7/standalone/progs.d/crp1.c\n|+++ b/pkg/cohomolo-1.6.7/standalone/progs.d/crp1.c\n--------------------------\nFile to patch: \nSkip this patch? [y] \nSkipping patch.\n4 out of 4 hunks ignored\ncan't find file to patch at input line 54\nPerhaps you used the wrong -p or --strip option?\nThe text leading up to this was:\n--------------------------\n|diff --git a/pkg/cohomolo-1.6.7/standalone/progs.d/nq+chfns.c b/pkg/cohomolo-1.6.7/standalone/progs.d/nq+chfns.c\n|index a7396b2..658496f 100644\n|--- a/pkg/cohomolo-1.6.7/standalone/progs.d/nq+chfns.c\n|+++ b/pkg/cohomolo-1.6.7/standalone/progs.d/nq+chfns.c\n--------------------------\nFile to patch: \nSkip this patch? [y] \nSkipping patch.\n4 out of 4 hunks ignored\ncan't find file to patch at input line 98\nPerhaps you used the wrong -p or --strip option?\nThe text leading up to this was:\n--------------------------\n|diff --git a/pkg/cohomolo-1.6.7/standalone/progs.d/nqmfns.c b/pkg/cohomolo-1.6.7/standalone/progs.d/nqmfns.c\n|index 0896551..6841bc8 100644\n|--- a/pkg/cohomolo-1.6.7/standalone/progs.d/nqmfns.c\n|+++ b/pkg/cohomolo-1.6.7/standalone/progs.d/nqmfns.c\n--------------------------\nFile to patch: \nSkip this patch? [y] \nSkipping patch.\n4 out of 4 hunks ignored\ncan't find file to patch at input line 135\nPerhaps you used the wrong -p or --strip option?\nThe text leading up to this was:\n--------------------------\n|diff --git a/pkg/cohomolo-1.6.7/standalone/progs.d/nqmp.c b/pkg/cohomolo-1.6.7/standalone/progs.d/nqmp.c\n|index 01cf914..0144883 100644\n|--- a/pkg/cohomolo-1.6.7/standalone/progs.d/nqmp.c\n|+++ b/pkg/cohomolo-1.6.7/standalone/progs.d/nqmp.c\n--------------------------\nFile to patch: \nSkip this patch? [y] \nSkipping patch.\n2 out of 2 hunks ignored\nError applying '../patches/cohomolo-gcc10.patch'\n************************************************************************\nError applying patches\n************************************************************************\n```",
    "created_at": "2020-10-05T22:20:48Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462628",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:82'></a>
The patches for `gap_packages` don't work:

```
Applying patches from ../patches...
Applying ../patches/cohomolo-gcc10.patch
can't find file to patch at input line 5
Perhaps you used the wrong -p or --strip option?
The text leading up to this was:
--------------------------
|diff --git a/pkg/cohomolo-1.6.7/standalone/progs.d/crp1.c b/pkg/cohomolo-1.6.7/standalone/progs.d/crp1.c
|index 3bbdc45..7df699f 100644
|--- a/pkg/cohomolo-1.6.7/standalone/progs.d/crp1.c
|+++ b/pkg/cohomolo-1.6.7/standalone/progs.d/crp1.c
--------------------------
File to patch: 
Skip this patch? [y] 
Skipping patch.
4 out of 4 hunks ignored
can't find file to patch at input line 54
Perhaps you used the wrong -p or --strip option?
The text leading up to this was:
--------------------------
|diff --git a/pkg/cohomolo-1.6.7/standalone/progs.d/nq+chfns.c b/pkg/cohomolo-1.6.7/standalone/progs.d/nq+chfns.c
|index a7396b2..658496f 100644
|--- a/pkg/cohomolo-1.6.7/standalone/progs.d/nq+chfns.c
|+++ b/pkg/cohomolo-1.6.7/standalone/progs.d/nq+chfns.c
--------------------------
File to patch: 
Skip this patch? [y] 
Skipping patch.
4 out of 4 hunks ignored
can't find file to patch at input line 98
Perhaps you used the wrong -p or --strip option?
The text leading up to this was:
--------------------------
|diff --git a/pkg/cohomolo-1.6.7/standalone/progs.d/nqmfns.c b/pkg/cohomolo-1.6.7/standalone/progs.d/nqmfns.c
|index 0896551..6841bc8 100644
|--- a/pkg/cohomolo-1.6.7/standalone/progs.d/nqmfns.c
|+++ b/pkg/cohomolo-1.6.7/standalone/progs.d/nqmfns.c
--------------------------
File to patch: 
Skip this patch? [y] 
Skipping patch.
4 out of 4 hunks ignored
can't find file to patch at input line 135
Perhaps you used the wrong -p or --strip option?
The text leading up to this was:
--------------------------
|diff --git a/pkg/cohomolo-1.6.7/standalone/progs.d/nqmp.c b/pkg/cohomolo-1.6.7/standalone/progs.d/nqmp.c
|index 01cf914..0144883 100644
|--- a/pkg/cohomolo-1.6.7/standalone/progs.d/nqmp.c
|+++ b/pkg/cohomolo-1.6.7/standalone/progs.d/nqmp.c
--------------------------
File to patch: 
Skip this patch? [y] 
Skipping patch.
2 out of 2 hunks ignored
Error applying '../patches/cohomolo-gcc10.patch'
************************************************************************
Error applying patches
************************************************************************
```



---

archive/issue_comments_462629.json:
```json
{
    "body": "<a id='comment:83'></a>\nI see: the versions are wrong. Here's a fix.",
    "created_at": "2020-10-05T22:24:52Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462629",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:83'></a>
I see: the versions are wrong. Here's a fix.



---

archive/issue_comments_462630.json:
```json
{
    "body": "**Changing branch** from \"[u/dimpase/packages/gap411](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/gap411)\" to \"[u/jhpalmieri/packages/gap411](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/packages/gap411)\".",
    "created_at": "2020-10-05T22:25:01Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462630",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing branch** from "[u/dimpase/packages/gap411](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/gap411)" to "[u/jhpalmieri/packages/gap411](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/packages/gap411)".



---

archive/issue_comments_462631.json:
```json
{
    "body": "<a id='comment:85'></a>\nThis (including `libsemigroups` and `gap_packages`) builds for me on OS X with Xcode 12.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/47fcc169297fdf7cc7b58c8f454255bb29f955c5\">47fcc16</a></td><td><code>trac 29314: fix version numbers in patches for gap_packages</code></td></tr></table>\n",
    "created_at": "2020-10-05T22:27:23Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462631",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:85'></a>
This (including `libsemigroups` and `gap_packages`) builds for me on OS X with Xcode 12.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/47fcc169297fdf7cc7b58c8f454255bb29f955c5">47fcc16</a></td><td><code>trac 29314: fix version numbers in patches for gap_packages</code></td></tr></table>




---

archive/issue_comments_462632.json:
```json
{
    "body": "**Changing commit** from \"[649bc8defe5c4f58da7582b1f7bfa10f1c3f793e](https://github.com/sagemath/sagetrac-mirror/commit/649bc8defe5c4f58da7582b1f7bfa10f1c3f793e)\" to \"[47fcc169297fdf7cc7b58c8f454255bb29f955c5](https://github.com/sagemath/sagetrac-mirror/commit/47fcc169297fdf7cc7b58c8f454255bb29f955c5)\".",
    "created_at": "2020-10-05T22:27:23Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462632",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing commit** from "[649bc8defe5c4f58da7582b1f7bfa10f1c3f793e](https://github.com/sagemath/sagetrac-mirror/commit/649bc8defe5c4f58da7582b1f7bfa10f1c3f793e)" to "[47fcc169297fdf7cc7b58c8f454255bb29f955c5](https://github.com/sagemath/sagetrac-mirror/commit/47fcc169297fdf7cc7b58c8f454255bb29f955c5)".



---

archive/issue_comments_462633.json:
```json
{
    "body": "<a id='comment:86'></a>\nBuilding the documentation, I see\n\n```\nError, reached the pre-set memory limit\n(change it with the -o command line option)\n```\nI don't remember ever seeing this before. (The documentation build continues, but the error message was strange.)",
    "created_at": "2020-10-05T22:36:06Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462633",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:86'></a>
Building the documentation, I see

```
Error, reached the pre-set memory limit
(change it with the -o command line option)
```
I don't remember ever seeing this before. (The documentation build continues, but the error message was strange.)



---

archive/issue_comments_462634.json:
```json
{
    "body": "<a id='comment:87'></a>\nThen patching the failing packages in #30729 using the diff to GAP 4.11 would be a way forward",
    "created_at": "2020-10-05T22:38:06Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462634",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:87'></a>
Then patching the failing packages in #30729 using the diff to GAP 4.11 would be a way forward



---

archive/issue_comments_462635.json:
```json
{
    "body": "<a id='comment:88'></a>\nDoctests pass for me (with `libsemigroups` and `gap_packages` installed).",
    "created_at": "2020-10-05T23:22:14Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462635",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:88'></a>
Doctests pass for me (with `libsemigroups` and `gap_packages` installed).



---

archive/issue_comments_462636.json:
```json
{
    "body": "<a id='comment:89'></a>\nReplying to [mkoeppe](#comment%3A87):\n> Then patching the failing packages in #30729 using the diff to GAP 4.11 would be a way forward\n\n\nOr just merge this ticket instead.",
    "created_at": "2020-10-05T23:23:25Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462636",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:89'></a>
Replying to [mkoeppe](#comment%3A87):
> Then patching the failing packages in #30729 using the diff to GAP 4.11 would be a way forward


Or just merge this ticket instead.



---

archive/issue_comments_462637.json:
```json
{
    "body": "<a id='comment:90'></a>\nThere are unresolved problems with this upgrade",
    "created_at": "2020-10-05T23:28:55Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462637",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:90'></a>
There are unresolved problems with this upgrade



---

archive/issue_comments_462638.json:
```json
{
    "body": "<a id='comment:91'></a>\nReplying to [jhpalmieri](#comment%3A85):\n> This (including `libsemigroups` and `gap_packages`) builds for me on OS X with Xcode 12.\n\n\nthanks for fixing this. \nWhat XCode 12 are you on? 12.0? 12.2?",
    "created_at": "2020-10-06T08:25:24Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462638",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:91'></a>
Replying to [jhpalmieri](#comment%3A85):
> This (including `libsemigroups` and `gap_packages`) builds for me on OS X with Xcode 12.


thanks for fixing this. 
What XCode 12 are you on? 12.0? 12.2?



---

archive/issue_comments_462639.json:
```json
{
    "body": "<a id='comment:92'></a>\nReplying to [mkoeppe](#comment%3A90):\n> There are unresolved problems with this upgrade\n\n\nand a problem I cannot debug, as it's essentially a privately run network of buildbots which (in part?) seem to hang on our damn docbuild :-(",
    "created_at": "2020-10-06T08:27:50Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462639",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:92'></a>
Replying to [mkoeppe](#comment%3A90):
> There are unresolved problems with this upgrade


and a problem I cannot debug, as it's essentially a privately run network of buildbots which (in part?) seem to hang on our damn docbuild :-(



---

archive/issue_events_260786.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-06T17:53:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29314#event-260786"
}
```



---

archive/issue_events_260787.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-06T17:53:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29314#event-260787"
}
```



---

archive/issue_comments_462640.json:
```json
{
    "body": "<a id='comment:94'></a>\nIt does not seem realistic to get this ticket done for 9.2. So let's do #30729",
    "created_at": "2020-10-06T17:53:56Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462640",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:94'></a>
It does not seem realistic to get this ticket done for 9.2. So let's do #30729



---

archive/issue_comments_462641.json:
```json
{
    "body": "<a id='comment:95'></a>\nReplying to [dimpase](#comment%3A91):\n> Replying to [jhpalmieri](#comment%3A85):\n> > This (including `libsemigroups` and `gap_packages`) builds for me on OS X with Xcode 12.\n\n> \n> thanks for fixing this. \n> What XCode 12 are you on? 12.0? 12.2?\n\n\n12.0.1",
    "created_at": "2020-10-06T18:31:24Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462641",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:95'></a>
Replying to [dimpase](#comment%3A91):
> Replying to [jhpalmieri](#comment%3A85):
> > This (including `libsemigroups` and `gap_packages`) builds for me on OS X with Xcode 12.

> 
> thanks for fixing this. 
> What XCode 12 are you on? 12.0? 12.2?


12.0.1



---

archive/issue_comments_462642.json:
```json
{
    "body": "<a id='comment:96'></a>\nReplying to [dimpase](#comment%3A77):\n> Replying to [soehms](#comment%3A76):\n> [...]\n> > Therefore, I ran\n> > \n> > ```\n> > sage -f cysignals\n> > make build\n> > ```\n> > \n> > and that **solved the problem**!\n\n> \n> Great! \n> \n> > But, why did I have to do that even in the case where I build fro scratch? Anyway, thanks a lot for your patience! \n\n> Could be #30687 (with the original suject: \"local/**lib**/python3*\" must be removed)  - unless\n> you did run `make distclean` which removes `local/` completely anyway...\n> \n> \n\n\nIt must be an independent problem. As it appears now on all of my systems (by whatever reason) I have to rebuild `cysignals` whenever I switch back and forth between gap 4.10 and 4.11. This is regardless of whether I merged #30687 in or not.",
    "created_at": "2020-10-11T17:09:20Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462642",
    "user": "https://github.com/soehms"
}
```

<a id='comment:96'></a>
Replying to [dimpase](#comment%3A77):
> Replying to [soehms](#comment%3A76):
> [...]
> > Therefore, I ran
> > 
> > ```
> > sage -f cysignals
> > make build
> > ```
> > 
> > and that **solved the problem**!

> 
> Great! 
> 
> > But, why did I have to do that even in the case where I build fro scratch? Anyway, thanks a lot for your patience! 

> Could be #30687 (with the original suject: "local/**lib**/python3*" must be removed)  - unless
> you did run `make distclean` which removes `local/` completely anyway...
> 
> 


It must be an independent problem. As it appears now on all of my systems (by whatever reason) I have to rebuild `cysignals` whenever I switch back and forth between gap 4.10 and 4.11. This is regardless of whether I merged #30687 in or not.



---

archive/issue_comments_462643.json:
```json
{
    "body": "<a id='comment:97'></a>\nperhaps buildbot hanging is a multithreading issue - libgap in not multithreaded, calling it from several threads is asking for trouble: https://github.com/gap-system/gap/issues/2893#issuecomment-707700408",
    "created_at": "2020-10-13T14:10:14Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462643",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:97'></a>
perhaps buildbot hanging is a multithreading issue - libgap in not multithreaded, calling it from several threads is asking for trouble: https://github.com/gap-system/gap/issues/2893#issuecomment-707700408



---

archive/issue_comments_462644.json:
```json
{
    "body": "<a id='comment:98'></a>\nwe should move PackageManager GAP package from gap_packages to gap - it is small and useful.",
    "created_at": "2020-10-16T13:11:57Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462644",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:98'></a>
we should move PackageManager GAP package from gap_packages to gap - it is small and useful.



---

archive/issue_events_260788.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-11-10T17:55:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29314#event-260788"
}
```



---

archive/issue_events_260789.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-11-10T17:55:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29314#event-260789"
}
```



---

archive/issue_comments_462645.json:
```json
{
    "body": "<a id='comment:99'></a>\nThe ball here is in Volker's court. I have no idea why his buildbots hang.",
    "created_at": "2020-11-10T17:55:14Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462645",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:99'></a>
The ball here is in Volker's court. I have no idea why his buildbots hang.



---

archive/issue_comments_462646.json:
```json
{
    "body": "**Changing reviewer** from \"Matthias Koeppe\" to \"Matthias Koeppe, ...\".",
    "created_at": "2020-11-12T02:20:15Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462646",
    "user": "https://github.com/mkoeppe"
}
```

**Changing reviewer** from "Matthias Koeppe" to "Matthias Koeppe, ...".



---

archive/issue_comments_462647.json:
```json
{
    "body": "<a id='comment:101'></a>\nReplying to [dimpase](#comment%3A98):\n> we should move PackageManager GAP package from gap_packages to gap - it is small and useful.\n\n\n+1 -- separate ticket or here?",
    "created_at": "2020-11-14T09:46:02Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462647",
    "user": "https://github.com/slel"
}
```

<a id='comment:101'></a>
Replying to [dimpase](#comment%3A98):
> we should move PackageManager GAP package from gap_packages to gap - it is small and useful.


+1 -- separate ticket or here?



---

archive/issue_comments_462648.json:
```json
{
    "body": "<a id='comment:102'></a>\nReplying to [slelievre](#comment%3A101):\n> Replying to [dimpase](#comment%3A98):\n> > we should move PackageManager GAP package from gap_packages to gap - it is small and useful.\n\n> \n> +1 -- separate ticket or here?\n\nI'll do it here - it's still \"needs review\" after all.",
    "created_at": "2020-11-14T09:49:15Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462648",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:102'></a>
Replying to [slelievre](#comment%3A101):
> Replying to [dimpase](#comment%3A98):
> > we should move PackageManager GAP package from gap_packages to gap - it is small and useful.

> 
> +1 -- separate ticket or here?

I'll do it here - it's still "needs review" after all.



---

archive/issue_comments_462649.json:
```json
{
    "body": "**Changing commit** from \"[47fcc169297fdf7cc7b58c8f454255bb29f955c5](https://github.com/sagemath/sagetrac-mirror/commit/47fcc169297fdf7cc7b58c8f454255bb29f955c5)\" to \"[9836f794b7bf90f9c3b6c1b2928f032f4a7bd093](https://github.com/sagemath/sagetrac-mirror/commit/9836f794b7bf90f9c3b6c1b2928f032f4a7bd093)\".",
    "created_at": "2020-11-14T09:55:28Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462649",
    "user": "https://github.com/dimpase"
}
```

**Changing commit** from "[47fcc169297fdf7cc7b58c8f454255bb29f955c5](https://github.com/sagemath/sagetrac-mirror/commit/47fcc169297fdf7cc7b58c8f454255bb29f955c5)" to "[9836f794b7bf90f9c3b6c1b2928f032f4a7bd093](https://github.com/sagemath/sagetrac-mirror/commit/9836f794b7bf90f9c3b6c1b2928f032f4a7bd093)".



---

archive/issue_comments_462650.json:
```json
{
    "body": "**Changing branch** from \"[u/jhpalmieri/packages/gap411](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/packages/gap411)\" to \"[u/dimpase/packages/gap411](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/gap411)\".",
    "created_at": "2020-11-14T09:55:28Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462650",
    "user": "https://github.com/dimpase"
}
```

**Changing branch** from "[u/jhpalmieri/packages/gap411](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/packages/gap411)" to "[u/dimpase/packages/gap411](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/gap411)".



---

archive/issue_comments_462651.json:
```json
{
    "body": "**Changing dependencies** from \"#30720\" to \"\".",
    "created_at": "2020-11-14T09:55:28Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462651",
    "user": "https://github.com/dimpase"
}
```

**Changing dependencies** from "#30720" to "".



---

archive/issue_comments_462652.json:
```json
{
    "body": "<a id='comment:4'></a>\nrebased over the latest beta, moved PackageManager GAP package as discussed.",
    "created_at": "2020-11-14T09:59:00Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462652",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:4'></a>
rebased over the latest beta, moved PackageManager GAP package as discussed.



---

archive/issue_comments_462653.json:
```json
{
    "body": "<a id='comment:5'></a>\nI've used this ticket in #30371, and it runs well on the github action (https://github.com/tobiasdiez/sage/runs/1413136300?check_suite_focus=true). In particular, there was no \"hanging\" or multithreading problem.\n\nThe only gap related doc tests that fail are:\n\n```\n2020-11-17T17:27:35.4675866Z sage -t --random-seed=0 /__w/sage/sage/src/sage/interfaces/gap_workspace.py\n2020-11-17T17:27:35.4676910Z **********************************************************************\n2020-11-17T17:27:35.4677821Z File \"/__w/sage/sage/src/sage/interfaces/gap_workspace.py\", line 55, in sage.interfaces.gap_workspace.gap_workspace_file\n2020-11-17T17:27:35.4681873Z Failed example:\n2020-11-17T17:27:35.4683784Z     name1 = Popen([sys.executable, '-c', cmd], stdout=PIPE).communicate()[0]\n2020-11-17T17:27:35.4684739Z Expected nothing\n2020-11-17T17:27:35.4685235Z Got:\n2020-11-17T17:27:35.4686344Z     /__w/sage/sage/src/sage/calculus/functional.py:57: DeprecationWarning: invalid escape sequence \\d\n2020-11-17T17:27:35.4687468Z       \"\"\"\n2020-11-17T17:27:39.4060681Z **********************************************************************\n2020-11-17T17:27:39.4062343Z File \"/__w/sage/sage/src/sage/interfaces/gap_workspace.py\", line 56, in sage.interfaces.gap_workspace.gap_workspace_file\n2020-11-17T17:27:39.4063371Z Failed example:\n2020-11-17T17:27:39.4065030Z     name2 = Popen([sys.executable, '-c', cmd], stdout=PIPE).communicate()[0]\n2020-11-17T17:27:39.4065813Z Expected nothing\n2020-11-17T17:27:39.4066315Z Got:\n2020-11-17T17:27:39.4067147Z     /__w/sage/sage/src/sage/calculus/functional.py:57: DeprecationWarning: invalid escape sequence \\d\n2020-11-17T17:27:39.4067993Z       \"\"\"\n2020-11-17T17:27:39.4129689Z **********************************************************************\n```\nBut that could also very well be a result of the somewhat unusual setup of #30371.\nSo from my side this looks good.",
    "created_at": "2020-11-17T21:48:01Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462653",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:5'></a>
I've used this ticket in #30371, and it runs well on the github action (https://github.com/tobiasdiez/sage/runs/1413136300?check_suite_focus=true). In particular, there was no "hanging" or multithreading problem.

The only gap related doc tests that fail are:

```
2020-11-17T17:27:35.4675866Z sage -t --random-seed=0 /__w/sage/sage/src/sage/interfaces/gap_workspace.py
2020-11-17T17:27:35.4676910Z **********************************************************************
2020-11-17T17:27:35.4677821Z File "/__w/sage/sage/src/sage/interfaces/gap_workspace.py", line 55, in sage.interfaces.gap_workspace.gap_workspace_file
2020-11-17T17:27:35.4681873Z Failed example:
2020-11-17T17:27:35.4683784Z     name1 = Popen([sys.executable, '-c', cmd], stdout=PIPE).communicate()[0]
2020-11-17T17:27:35.4684739Z Expected nothing
2020-11-17T17:27:35.4685235Z Got:
2020-11-17T17:27:35.4686344Z     /__w/sage/sage/src/sage/calculus/functional.py:57: DeprecationWarning: invalid escape sequence \d
2020-11-17T17:27:35.4687468Z       """
2020-11-17T17:27:39.4060681Z **********************************************************************
2020-11-17T17:27:39.4062343Z File "/__w/sage/sage/src/sage/interfaces/gap_workspace.py", line 56, in sage.interfaces.gap_workspace.gap_workspace_file
2020-11-17T17:27:39.4063371Z Failed example:
2020-11-17T17:27:39.4065030Z     name2 = Popen([sys.executable, '-c', cmd], stdout=PIPE).communicate()[0]
2020-11-17T17:27:39.4065813Z Expected nothing
2020-11-17T17:27:39.4066315Z Got:
2020-11-17T17:27:39.4067147Z     /__w/sage/sage/src/sage/calculus/functional.py:57: DeprecationWarning: invalid escape sequence \d
2020-11-17T17:27:39.4067993Z       """
2020-11-17T17:27:39.4129689Z **********************************************************************
```
But that could also very well be a result of the somewhat unusual setup of #30371.
So from my side this looks good.



---

archive/issue_comments_462654.json:
```json
{
    "body": "**Changing reviewer** from \"Matthias Koeppe, ...\" to \"Matthias Koeppe, Tobias Diez, ...\".",
    "created_at": "2020-11-17T21:48:01Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462654",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing reviewer** from "Matthias Koeppe, ..." to "Matthias Koeppe, Tobias Diez, ...".



---

archive/issue_comments_462655.json:
```json
{
    "body": "<a id='comment:106'></a>\nReplying to [gh-tobiasdiez](#comment%3A105):\n> I've used this ticket in #30371, and it runs well on the github action (https://github.com/tobiasdiez/sage/runs/1413136300?check_suite_focus=true). In particular, there was no \"hanging\" or multithreading problem.\n> \n> The only gap related doc tests that fail are:\n\nThanks.\nI can't reproduce these, they don't seem to originate from this ticket.",
    "created_at": "2020-11-18T14:13:57Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462655",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:106'></a>
Replying to [gh-tobiasdiez](#comment%3A105):
> I've used this ticket in #30371, and it runs well on the github action (https://github.com/tobiasdiez/sage/runs/1413136300?check_suite_focus=true). In particular, there was no "hanging" or multithreading problem.
> 
> The only gap related doc tests that fail are:

Thanks.
I can't reproduce these, they don't seem to originate from this ticket.



---

archive/issue_comments_462656.json:
```json
{
    "body": "**Changing branch** from \"[u/dimpase/packages/gap411](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/gap411)\" to \"[u/mkoeppe/packages/gap411](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/packages/gap411)\".",
    "created_at": "2020-12-08T22:49:33Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462656",
    "user": "https://github.com/mkoeppe"
}
```

**Changing branch** from "[u/dimpase/packages/gap411](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/gap411)" to "[u/mkoeppe/packages/gap411](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/packages/gap411)".



---

archive/issue_comments_462657.json:
```json
{
    "body": "**Changing reviewer** from \"Matthias Koeppe, Tobias Diez, ...\" to \"Matthias Koeppe, Tobias Diez, https://github.com/mkoeppe/sage/actions/runs/409420323\".",
    "created_at": "2020-12-08T23:46:19Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462657",
    "user": "https://github.com/mkoeppe"
}
```

**Changing reviewer** from "Matthias Koeppe, Tobias Diez, ..." to "Matthias Koeppe, Tobias Diez, https://github.com/mkoeppe/sage/actions/runs/409420323".



---

archive/issue_comments_462658.json:
```json
{
    "body": "<a id='comment:8'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a28138c2fc1396171734b12fdbe5904b79bf1ec1\">a28138c</a></td><td><code>Merge tag '9.3.beta3' into t/29314/packages/gap411</code></td></tr></table>\n",
    "created_at": "2020-12-08T23:46:19Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462658",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a28138c2fc1396171734b12fdbe5904b79bf1ec1">a28138c</a></td><td><code>Merge tag '9.3.beta3' into t/29314/packages/gap411</code></td></tr></table>




---

archive/issue_comments_462659.json:
```json
{
    "body": "**Changing commit** from \"[9836f794b7bf90f9c3b6c1b2928f032f4a7bd093](https://github.com/sagemath/sagetrac-mirror/commit/9836f794b7bf90f9c3b6c1b2928f032f4a7bd093)\" to \"[a28138c2fc1396171734b12fdbe5904b79bf1ec1](https://github.com/sagemath/sagetrac-mirror/commit/a28138c2fc1396171734b12fdbe5904b79bf1ec1)\".",
    "created_at": "2020-12-08T23:46:19Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462659",
    "user": "https://github.com/mkoeppe"
}
```

**Changing commit** from "[9836f794b7bf90f9c3b6c1b2928f032f4a7bd093](https://github.com/sagemath/sagetrac-mirror/commit/9836f794b7bf90f9c3b6c1b2928f032f4a7bd093)" to "[a28138c2fc1396171734b12fdbe5904b79bf1ec1](https://github.com/sagemath/sagetrac-mirror/commit/a28138c2fc1396171734b12fdbe5904b79bf1ec1)".



---

archive/issue_comments_462660.json:
```json
{
    "body": "<a id='comment:9'></a>\nLooks all fine on GH Actions. (comment:25 of course still applies)",
    "created_at": "2020-12-10T01:04:22Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462660",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
Looks all fine on GH Actions. (comment:25 of course still applies)



---

archive/issue_comments_462661.json:
```json
{
    "body": "**Changing reviewer** from \"Matthias Koeppe, Tobias Diez, https://github.com/mkoeppe/sage/actions/runs/409420323\" to \"Matthias Koeppe, Tobias Diez\".",
    "created_at": "2020-12-10T01:04:22Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462661",
    "user": "https://github.com/mkoeppe"
}
```

**Changing reviewer** from "Matthias Koeppe, Tobias Diez, https://github.com/mkoeppe/sage/actions/runs/409420323" to "Matthias Koeppe, Tobias Diez".



---

archive/issue_events_260790.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-10T01:04:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29314#event-260790"
}
```



---

archive/issue_events_260791.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-10T01:04:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29314#event-260791"
}
```



---

archive/issue_comments_462662.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/packages/gap411](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/packages/gap411)\" to \"[a28138c2fc1396171734b12fdbe5904b79bf1ec1](https://github.com/sagemath/sagetrac-mirror/commit/a28138c2fc1396171734b12fdbe5904b79bf1ec1)\".",
    "created_at": "2020-12-13T20:31:08Z",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29314#issuecomment-462662",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/mkoeppe/packages/gap411](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/packages/gap411)" to "[a28138c2fc1396171734b12fdbe5904b79bf1ec1](https://github.com/sagemath/sagetrac-mirror/commit/a28138c2fc1396171734b12fdbe5904b79bf1ec1)".



---

archive/issue_events_260792.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-12-13T20:31:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29314#event-260792"
}
```



---

archive/issue_events_260793.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "5f46b34049619d6118321e8d079f78f0914d4d7c",
    "created_at": "2020-12-13T20:31:08Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29314",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29314#event-260793"
}
```
