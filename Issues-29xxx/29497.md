# Issue 29497: package symengine and its Python interface

archive/issues_029260.json:
```json
{
    "body": "Symengine is a C++ symbolic engine\n- that can be used as a backend in sympy (and makes it much faster)\n- that implements \"fast callable\" for floats, GMP types, flint types, arb types, ... and accepts numpy arrays as arguments (the function is applied entrywise)\n\nIt is very strong candidate for replacing some of the symbolic we have in Sage, in particular all the fast callable.\n\n- https://github.com/symengine/symengine/releases\n- https://github.com/symengine/symengine.py/\n\n\nSee also:\n- https://groups.google.com/d/msg/sage-devel/m8XXaoIpvIw/Eeju5I61CQAJ (discussion August 2015)\n- https://groups.google.com/d/msg/sympy/bPh2Hx1HRJ4/CLyuv2c1AgAJ (discussion May 2020)\n- https://groups.google.com/g/sage-devel/c/sY3zh-pq8T4/m/Y2Bp0_LxAAAJ (discussion January 2021)\n\n\nCC:  @isuruf @mkoeppe @egourgoulhon\n\nKeywords: thursdaysbdx, sd109\n\nBranch/Commit: d614ee2dec3914a75e14fa79d7881da537faccb5\n\nReviewer: Matthias Koeppe, Vincent Delecroix\n\nAuthor: Vincent Delecroix, Isuru Fernando, Matthias Koeppe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29497\n\n",
    "closed_at": "2021-03-01T00:20:57Z",
    "created_at": "2020-04-11T11:13:48Z",
    "labels": [
        "component: symbolics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "package symengine and its Python interface",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29497",
    "user": "https://github.com/videlec"
}
```
Symengine is a C++ symbolic engine
- that can be used as a backend in sympy (and makes it much faster)
- that implements "fast callable" for floats, GMP types, flint types, arb types, ... and accepts numpy arrays as arguments (the function is applied entrywise)

It is very strong candidate for replacing some of the symbolic we have in Sage, in particular all the fast callable.

- https://github.com/symengine/symengine/releases
- https://github.com/symengine/symengine.py/


See also:
- https://groups.google.com/d/msg/sage-devel/m8XXaoIpvIw/Eeju5I61CQAJ (discussion August 2015)
- https://groups.google.com/d/msg/sympy/bPh2Hx1HRJ4/CLyuv2c1AgAJ (discussion May 2020)
- https://groups.google.com/g/sage-devel/c/sY3zh-pq8T4/m/Y2Bp0_LxAAAJ (discussion January 2021)


CC:  @isuruf @mkoeppe @egourgoulhon

Keywords: thursdaysbdx, sd109

Branch/Commit: d614ee2dec3914a75e14fa79d7881da537faccb5

Reviewer: Matthias Koeppe, Vincent Delecroix

Author: Vincent Delecroix, Isuru Fernando, Matthias Koeppe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29497





---

archive/issue_comments_441572.json:
```json
{
    "body": "<a id='comment:1'></a>Let me know if you run into any trouble.\n\nHere are some of the options I use in conda. https://github.com/conda-forge/symengine-feedstock/blob/master/recipe/build.sh#L6-L19. They should work fine for sage (except for WITH_LLVM=yes)\n\nDependencies: CMake, GMP/MPIR, MPFR, MPC, FLINT2, ARB",
    "created_at": "2020-04-12T02:11:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441572",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:1'></a>Let me know if you run into any trouble.

Here are some of the options I use in conda. https://github.com/conda-forge/symengine-feedstock/blob/master/recipe/build.sh#L6-L19. They should work fine for sage (except for WITH_LLVM=yes)

Dependencies: CMake, GMP/MPIR, MPFR, MPC, FLINT2, ARB



---

archive/issue_comments_441573.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2020-04-12T07:35:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441573",
    "user": "https://github.com/videlec"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_441574.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-04-12T07:45:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441574",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_events_075206.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-04-12T07:46:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29497#event-75206"
}
```



---

archive/issue_comments_441575.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n tarballs\n-- https://github.com/symengine/symengine/archive/v0.6.0.tar.gz\n-- https://github.com/symengine/symengine.py/archive/v0.6.1.tar.gz\n+- https://github.com/symengine/symengine/archive/v0.6.0.tar.gz (WARNING: has to be renamed `symengine-0.6.0.tar.gz`)\n+- https://github.com/symengine/symengine.py/archive/v0.6.1.tar.gz (WARNING: has to be renamed `symengine.py-0.6.1.tar.gz`)\n \n Author: Vincent Delecroix\n \n``````\n",
    "created_at": "2020-04-12T07:46:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441575",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 tarballs
-- https://github.com/symengine/symengine/archive/v0.6.0.tar.gz
-- https://github.com/symengine/symengine.py/archive/v0.6.1.tar.gz
+- https://github.com/symengine/symengine/archive/v0.6.0.tar.gz (WARNING: has to be renamed `symengine-0.6.0.tar.gz`)
+- https://github.com/symengine/symengine.py/archive/v0.6.1.tar.gz (WARNING: has to be renamed `symengine.py-0.6.1.tar.gz`)
 
 Author: Vincent Delecroix
 
``````




---

archive/issue_comments_441576.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-04-12T07:46:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441576",
    "user": "https://github.com/videlec"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_441577.json:
```json
{
    "body": "<a id='comment:5'></a>Please add upstream_url to checksums.ini and distros/ Information",
    "created_at": "2020-04-12T07:50:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441577",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>Please add upstream_url to checksums.ini and distros/ Information



---

archive/issue_comments_441578.json:
```json
{
    "body": "<a id='comment:6'></a>I intentionally did write upstream_url because the tarballs are from github with their tags as names.",
    "created_at": "2020-04-12T08:06:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441578",
    "user": "https://github.com/videlec"
}
```

<a id='comment:6'></a>I intentionally did write upstream_url because the tarballs are from github with their tags as names.



---

archive/issue_comments_441579.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-12T08:14:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441579",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_441580.json:
```json
{
    "body": "<a id='comment:8'></a>(I wanted instead to use the tarball from PyPI for symengine.py but its name is `symengine-0.6.1.tar.gz` which collides with symengine tarballs)",
    "created_at": "2020-04-12T08:23:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441580",
    "user": "https://github.com/videlec"
}
```

<a id='comment:8'></a>(I wanted instead to use the tarball from PyPI for symengine.py but its name is `symengine-0.6.1.tar.gz` which collides with symengine tarballs)



---

archive/issue_comments_441581.json:
```json
{
    "body": "<a id='comment:9'></a>`symengine.py` needs cmake as well.",
    "created_at": "2020-04-12T12:46:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441581",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:9'></a>`symengine.py` needs cmake as well.



---

archive/issue_comments_441582.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-12T12:51:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441582",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_441583.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n-\n+tarballs\n+- https://github.com/symengine/symengine/releases/download/v0.6.0/symengine-0.6.0.tar.gz\n+- https://github.com/symengine/symengine.py/archive/v0.6.1.tar.gz (WARNING: has to be renamed `symengine.py-0.6.1.tar.gz`)\n \n Author: Vincent Delecroix\n \n``````\n",
    "created_at": "2020-04-12T12:59:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441583",
    "user": "https://github.com/isuruf"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,6 @@
-
+tarballs
+- https://github.com/symengine/symengine/releases/download/v0.6.0/symengine-0.6.0.tar.gz
+- https://github.com/symengine/symengine.py/archive/v0.6.1.tar.gz (WARNING: has to be renamed `symengine.py-0.6.1.tar.gz`)
 
 Author: Vincent Delecroix
 
``````




---

archive/issue_comments_441584.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:8 vdelecroix]:\n> (I wanted instead to use the tarball from PyPI for symengine.py but its name is `symengine-0.6.1.tar.gz` which collides with symengine tarballs)\n\nThe `upstream_url` code handles renaming just fine\n\n```diff\ndiff --git a/build/pkgs/symengine.py/checksums.ini b/build/pkgs/symengine.py/checksums.ini\nindex ea4c44b468..489d040bcc 100644\n--- a/build/pkgs/symengine.py/checksums.ini\n+++ b/build/pkgs/symengine.py/checksums.ini\n@@ -2,3 +2,4 @@ tarball=symengine.py-VERSION.tar.gz\n sha1=40df2b8f406b6ac4a86c83a82d31593b5738a470\n md5=52b035da7851414d74f3bde83b6c2976\n cksum=2829876300\n+upstream_url=https://github.com/symengine/symengine.py/archive/vVERSION.tar.gz\ndiff --git a/build/pkgs/symengine/checksums.ini b/build/pkgs/symengine/checksums.ini\nindex 8143c8eae5..b2651f694c 100644\n--- a/build/pkgs/symengine/checksums.ini\n+++ b/build/pkgs/symengine/checksums.ini\n@@ -2,3 +2,4 @@ tarball=symengine-VERSION.tar.gz\n sha1=abd7d39b1b724f47bcdc5b1d811cf33f2c413aea\n md5=3c0df2b14310467c6d45bc26a557324b\n cksum=100973134\n+upstream_url=https://github.com/symengine/symengine/archive/vVERSION.tar.gz\n```",
    "created_at": "2020-04-12T14:45:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441584",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>Replying to [comment:8 vdelecroix]:
> (I wanted instead to use the tarball from PyPI for symengine.py but its name is `symengine-0.6.1.tar.gz` which collides with symengine tarballs)

The `upstream_url` code handles renaming just fine

```diff
diff --git a/build/pkgs/symengine.py/checksums.ini b/build/pkgs/symengine.py/checksums.ini
index ea4c44b468..489d040bcc 100644
--- a/build/pkgs/symengine.py/checksums.ini
+++ b/build/pkgs/symengine.py/checksums.ini
@@ -2,3 +2,4 @@ tarball=symengine.py-VERSION.tar.gz
 sha1=40df2b8f406b6ac4a86c83a82d31593b5738a470
 md5=52b035da7851414d74f3bde83b6c2976
 cksum=2829876300
+upstream_url=https://github.com/symengine/symengine.py/archive/vVERSION.tar.gz
diff --git a/build/pkgs/symengine/checksums.ini b/build/pkgs/symengine/checksums.ini
index 8143c8eae5..b2651f694c 100644
--- a/build/pkgs/symengine/checksums.ini
+++ b/build/pkgs/symengine/checksums.ini
@@ -2,3 +2,4 @@ tarball=symengine-VERSION.tar.gz
 sha1=abd7d39b1b724f47bcdc5b1d811cf33f2c413aea
 md5=3c0df2b14310467c6d45bc26a557324b
 cksum=100973134
+upstream_url=https://github.com/symengine/symengine/archive/vVERSION.tar.gz
```



---

archive/issue_comments_441585.json:
```json
{
    "body": "<a id='comment:13'></a>Replying to [comment:12 mkoeppe]:\n> Replying to [comment:8 vdelecroix]:\n> > (I wanted instead to use the tarball from PyPI for symengine.py but its name is `symengine-0.6.1.tar.gz` which collides with symengine tarballs)\n\n> The `upstream_url` code handles renaming just fine\n\nWunderbar!",
    "created_at": "2020-04-12T14:46:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441585",
    "user": "https://github.com/videlec"
}
```

<a id='comment:13'></a>Replying to [comment:12 mkoeppe]:
> Replying to [comment:8 vdelecroix]:
> > (I wanted instead to use the tarball from PyPI for symengine.py but its name is `symengine-0.6.1.tar.gz` which collides with symengine tarballs)

> The `upstream_url` code handles renaming just fine

Wunderbar!



---

archive/issue_comments_441586.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-12T14:53:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441586",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_441587.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-04-12T15:09:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441587",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_441588.json:
```json
{
    "body": "<a id='comment:15'></a>Builds and tests OK on macOS with python3. Could you add a little bit to the ticket description please - what is it intended to be used for in Sage",
    "created_at": "2020-04-12T15:09:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441588",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>Builds and tests OK on macOS with python3. Could you add a little bit to the ticket description please - what is it intended to be used for in Sage



---

archive/issue_comments_441589.json:
```json
{
    "body": "<a id='comment:16'></a>New commits:",
    "created_at": "2020-04-12T15:19:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441589",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:16'></a>New commits:



---

archive/issue_comments_441590.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2020-04-12T15:19:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441590",
    "user": "https://github.com/isuruf"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_441591.json:
```json
{
    "body": "<a id='comment:17'></a>`'import symengine; symengine.test()'` uses pytest. Switched to nose",
    "created_at": "2020-04-12T15:23:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441591",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:17'></a>`'import symengine; symengine.test()'` uses pytest. Switched to nose



---

archive/issue_comments_441592.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,12 @@\n+Symengine is a C++ symbolic engine\n+- that can be used as a backend in sympy (and makes it much faster)\n+- that implements \"fast callable\" for floats, GMP types, flint types, arb types, ... and accepts numpy arrays as arguments (the function is applied entrywise)\n \n+It is very strong candidate for replacing some of the symbolic we have in Sage, in particular all the fast callable.\n+\n+tarballs\n+- https://github.com/symengine/symengine/releases/download/v0.6.0/symengine-0.6.0.tar.gz\n+- https://github.com/symengine/symengine.py/archive/v0.6.1.tar.gz (WARNING: has to be renamed `symengine.py-0.6.1.tar.gz`)\n \n Author: Vincent Delecroix\n \n``````\n",
    "created_at": "2020-04-12T15:27:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441592",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,12 @@
+Symengine is a C++ symbolic engine
+- that can be used as a backend in sympy (and makes it much faster)
+- that implements "fast callable" for floats, GMP types, flint types, arb types, ... and accepts numpy arrays as arguments (the function is applied entrywise)
 
+It is very strong candidate for replacing some of the symbolic we have in Sage, in particular all the fast callable.
+
+tarballs
+- https://github.com/symengine/symengine/releases/download/v0.6.0/symengine-0.6.0.tar.gz
+- https://github.com/symengine/symengine.py/archive/v0.6.1.tar.gz (WARNING: has to be renamed `symengine.py-0.6.1.tar.gz`)
 
 Author: Vincent Delecroix
 
``````




---

archive/issue_comments_441593.json:
```json
{
    "body": "<a id='comment:19'></a>As tests are not run by default, I don't like this so much\n\n```diff\n-symengine $(PYTHON) | cmake pip setuptools\n+symengine $(PYTHON) | cmake pip setuptools nose\n```\n`@`Matthias: how do we solve that when tests depend on additional libraries? (same thing actually hapenning with numpy, rpy2, etc)",
    "created_at": "2020-04-12T15:29:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441593",
    "user": "https://github.com/videlec"
}
```

<a id='comment:19'></a>As tests are not run by default, I don't like this so much

```diff
-symengine $(PYTHON) | cmake pip setuptools
+symengine $(PYTHON) | cmake pip setuptools nose
```
`@`Matthias: how do we solve that when tests depend on additional libraries? (same thing actually hapenning with numpy, rpy2, etc)



---

archive/issue_comments_441594.json:
```json
{
    "body": "<a id='comment:20'></a>Something like this (untested)?\n\n```diff\n--- a/build/pkgs/symengine.py/dependencies\n+++ b/build/pkgs/symengine.py/dependencies\n@@ -1,4 +1,4 @@\n-symengine $(PYTHON) | cmake pip setuptools\n+symengine $(PYTHON) | cmake pip setuptools $(and $(filter-out no,$(SAGE_CHECK)), nose)\n \n ----------\n All lines of this file are ignored except the first.\ndiff --git a/src/bin/sage b/src/bin/sage\nindex 10acddcd96..2106102952 100755\n--- a/src/bin/sage\n+++ b/src/bin/sage\n@@ -359,6 +359,11 @@ if [ \"$1\" = '-i' ]; then\n                 echo >&2 \"Error: 'sage -i $OPT <package>' is no longer supported, use 'sage --info <package>' instead.\"\n                 exit 2;;\n             -f) FORCE_INSTALL=yes;;\n+            # Setting SAGE_CHECK here duplicates what we do in sage-spkg\n+            # but we need it in \"make\" already when there are (order-only)\n+            # dependencies on packages providing test infrastructure\n+            -c) INSTALL_OPTIONS=\"$INSTALL_OPTIONS $OPT\"; SAGE_CHECK=yes;;\n+            -w) INSTALL_OPTIONS=\"$INSTALL_OPTIONS $OPT\"; SAGE_CHECK=warn;;\n             -*) INSTALL_OPTIONS=\"$INSTALL_OPTIONS $OPT\";;\n             *) PACKAGES=\"$PACKAGES $OPT\";;\n         esac\n```",
    "created_at": "2020-04-12T16:02:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441594",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'></a>Something like this (untested)?

```diff
--- a/build/pkgs/symengine.py/dependencies
+++ b/build/pkgs/symengine.py/dependencies
@@ -1,4 +1,4 @@
-symengine $(PYTHON) | cmake pip setuptools
+symengine $(PYTHON) | cmake pip setuptools $(and $(filter-out no,$(SAGE_CHECK)), nose)
 
 ----------
 All lines of this file are ignored except the first.
diff --git a/src/bin/sage b/src/bin/sage
index 10acddcd96..2106102952 100755
--- a/src/bin/sage
+++ b/src/bin/sage
@@ -359,6 +359,11 @@ if [ "$1" = '-i' ]; then
                 echo >&2 "Error: 'sage -i $OPT <package>' is no longer supported, use 'sage --info <package>' instead."
                 exit 2;;
             -f) FORCE_INSTALL=yes;;
+            # Setting SAGE_CHECK here duplicates what we do in sage-spkg
+            # but we need it in "make" already when there are (order-only)
+            # dependencies on packages providing test infrastructure
+            -c) INSTALL_OPTIONS="$INSTALL_OPTIONS $OPT"; SAGE_CHECK=yes;;
+            -w) INSTALL_OPTIONS="$INSTALL_OPTIONS $OPT"; SAGE_CHECK=warn;;
             -*) INSTALL_OPTIONS="$INSTALL_OPTIONS $OPT";;
             *) PACKAGES="$PACKAGES $OPT";;
         esac
```



---

archive/issue_comments_441595.json:
```json
{
    "body": "<a id='comment:21'></a>Forgot `export SAGE_CHECK` obviously",
    "created_at": "2020-04-12T16:48:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441595",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'></a>Forgot `export SAGE_CHECK` obviously



---

archive/issue_events_075207.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-12T23:56:10Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29497#event-75207"
}
```



---

archive/issue_events_075208.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-12T23:56:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29497#event-75208"
}
```



---

archive/issue_comments_441596.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-04-13T14:45:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441596",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_441597.json:
```json
{
    "body": "<a id='comment:23'></a>The doctester does not like dot\n\n```\nTraceback (most recent call last):\n  File \"/opt/sage/src/bin/sage-runtests\", line 177, in <module>\n    DC = DocTestController(options, args)\n  File \"/opt/sage/local/lib/python3.7/site-packages/sage/doctest/control.py\", line 365, in __init__\n    raise ValueError('invalid optional tag {!r}'.format(o))\nValueError: invalid optional tag 'symengine.py'\n```",
    "created_at": "2020-04-13T14:45:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441597",
    "user": "https://github.com/videlec"
}
```

<a id='comment:23'></a>The doctester does not like dot

```
Traceback (most recent call last):
  File "/opt/sage/src/bin/sage-runtests", line 177, in <module>
    DC = DocTestController(options, args)
  File "/opt/sage/local/lib/python3.7/site-packages/sage/doctest/control.py", line 365, in __init__
    raise ValueError('invalid optional tag {!r}'.format(o))
ValueError: invalid optional tag 'symengine.py'
```



---

archive/issue_comments_441598.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-05-14T08:43:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441598",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_441599.json:
```json
{
    "body": "<a id='comment:24'></a>New commits:",
    "created_at": "2020-05-14T08:43:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441599",
    "user": "https://github.com/videlec"
}
```

<a id='comment:24'></a>New commits:



---

archive/issue_comments_441600.json:
```json
{
    "body": "<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-05-14T09:31:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441600",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_441601.json:
```json
{
    "body": "<a id='comment:26'></a>`@`isuruf: I think this ticket is ready for inclusion. Next step is I believe to implement the conversion `Sage -> symengine` (which is not there, right?)",
    "created_at": "2020-05-14T09:34:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441601",
    "user": "https://github.com/videlec"
}
```

<a id='comment:26'></a>`@`isuruf: I think this ticket is ready for inclusion. Next step is I believe to implement the conversion `Sage -> symengine` (which is not there, right?)



---

archive/issue_comments_441602.json:
```json
{
    "body": "Changing keywords from \"\" to \"thursdaysbdx\".",
    "created_at": "2020-05-14T09:35:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441602",
    "user": "https://github.com/videlec"
}
```

Changing keywords from "" to "thursdaysbdx".



---

archive/issue_comments_441603.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,18 @@\n+Symengine is a C++ symbolic engine\n+- that can be used as a backend in sympy (and makes it much faster)\n+- that implements \"fast callable\" for floats, GMP types, flint types, arb types, ... and accepts numpy arrays as arguments (the function is applied entrywise)\n+\n+It is very strong candidate for replacing some of the symbolic we have in Sage, in particular all the fast callable.\n+\n+tarballs\n+- https://github.com/symengine/symengine/releases/download/v0.6.0/symengine-0.6.0.tar.gz\n+- https://github.com/symengine/symengine.py/archive/v0.6.1.tar.gz (WARNING: has to be renamed `symengine.py-0.6.1.tar.gz`)\n+\n+\n+See also:\n+- https://groups.google.com/d/msg/sage-devel/m8XXaoIpvIw/Eeju5I61CQAJ (discussion August 2015)\n+- https://groups.google.com/d/msg/sympy/bPh2Hx1HRJ4/CLyuv2c1AgAJ (discussion May 2020)\n+\n \n \n Author: Vincent Delecroix\n``````\n",
    "created_at": "2020-05-29T21:25:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441603",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,18 @@
+Symengine is a C++ symbolic engine
+- that can be used as a backend in sympy (and makes it much faster)
+- that implements "fast callable" for floats, GMP types, flint types, arb types, ... and accepts numpy arrays as arguments (the function is applied entrywise)
+
+It is very strong candidate for replacing some of the symbolic we have in Sage, in particular all the fast callable.
+
+tarballs
+- https://github.com/symengine/symengine/releases/download/v0.6.0/symengine-0.6.0.tar.gz
+- https://github.com/symengine/symengine.py/archive/v0.6.1.tar.gz (WARNING: has to be renamed `symengine.py-0.6.1.tar.gz`)
+
+
+See also:
+- https://groups.google.com/d/msg/sage-devel/m8XXaoIpvIw/Eeju5I61CQAJ (discussion August 2015)
+- https://groups.google.com/d/msg/sympy/bPh2Hx1HRJ4/CLyuv2c1AgAJ (discussion May 2020)
+
 
 
 Author: Vincent Delecroix
``````




---

archive/issue_comments_441604.json:
```json
{
    "body": "<a id='comment:29'></a>Does sympy have to be configured specifically to use this package? Does the package have to be available at installation time of sympy?",
    "created_at": "2020-05-29T21:52:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441604",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'></a>Does sympy have to be configured specifically to use this package? Does the package have to be available at installation time of sympy?



---

archive/issue_comments_441605.json:
```json
{
    "body": "<a id='comment:30'></a>symengine and sympy can interoperate without any configuration.\n\nThere's a feature in sympy enabled by the env variable `USE_SYMENGINE=1` at runtime which will make some modules of sympy use symengine as the core symbolic engine. This is still experimental work.",
    "created_at": "2020-05-29T22:15:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441605",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:30'></a>symengine and sympy can interoperate without any configuration.

There's a feature in sympy enabled by the env variable `USE_SYMENGINE=1` at runtime which will make some modules of sympy use symengine as the core symbolic engine. This is still experimental work.



---

archive/issue_comments_441606.json:
```json
{
    "body": "<a id='comment:31'></a>`@`vdelecroix, thanks for this effort. Let us know what you need, we'll be happy to implement in `SymEngine`.",
    "created_at": "2020-05-29T22:25:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441606",
    "user": "https://github.com/certik"
}
```

<a id='comment:31'></a>`@`vdelecroix, thanks for this effort. Let us know what you need, we'll be happy to implement in `SymEngine`.



---

archive/issue_comments_441607.json:
```json
{
    "body": "<a id='comment:32'></a>\n```\n[symengine_py-0.6.1] Installing symengine_py-0.6.1\n[symengine_py-0.6.1] /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/bin/sage-pip-install requires . as final argument\n```",
    "created_at": "2020-05-29T22:39:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441607",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:32'></a>
```
[symengine_py-0.6.1] Installing symengine_py-0.6.1
[symengine_py-0.6.1] /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/bin/sage-pip-install requires . as final argument
```



---

archive/issue_comments_441608.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-05-29T22:39:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441608",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_441609.json:
```json
{
    "body": "<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-05-30T06:55:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441609",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_441610.json:
```json
{
    "body": "<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-05-30T06:56:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441610",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_441611.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-05-30T06:56:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441611",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_441612.json:
```json
{
    "body": "<a id='comment:36'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-01T19:16:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441612",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:36'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_441613.json:
```json
{
    "body": "<a id='comment:37'></a>Tests running at https://github.com/mkoeppe/sage/actions/runs/121775190",
    "created_at": "2020-06-01T19:16:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441613",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:37'></a>Tests running at https://github.com/mkoeppe/sage/actions/runs/121775190



---

archive/issue_comments_441614.json:
```json
{
    "body": "Changing keywords from \"thursdaysbdx\" to \"thursdaysbdx, sd109\".",
    "created_at": "2020-06-01T19:16:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441614",
    "user": "https://github.com/mkoeppe"
}
```

Changing keywords from "thursdaysbdx" to "thursdaysbdx, sd109".



---

archive/issue_comments_441615.json:
```json
{
    "body": "<a id='comment:39'></a>`symengine_py` build fails:\n\n```\n    running build_ext\n    error: error in command line: command 'BuildExtWithCmake' has no such option 'no_user_cfg'\n    Running setup.py install for symengine: finished with status 'error'\n```\n(see https://github.com/mkoeppe/sage/runs/728445828?check_suite_focus=true)",
    "created_at": "2020-06-02T19:10:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441615",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:39'></a>`symengine_py` build fails:

```
    running build_ext
    error: error in command line: command 'BuildExtWithCmake' has no such option 'no_user_cfg'
    Running setup.py install for symengine: finished with status 'error'
```
(see https://github.com/mkoeppe/sage/runs/728445828?check_suite_focus=true)



---

archive/issue_comments_441616.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-06-02T19:10:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441616",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_441617.json:
```json
{
    "body": "<a id='comment:40'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-07-04T22:22:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441617",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:40'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_441618.json:
```json
{
    "body": "<a id='comment:41'></a>Rebased on 9.2.beta3",
    "created_at": "2020-07-04T22:22:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441618",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:41'></a>Rebased on 9.2.beta3



---

archive/issue_comments_441619.json:
```json
{
    "body": "<a id='comment:42'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-04T23:41:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441619",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:42'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_441620.json:
```json
{
    "body": "<a id='comment:43'></a>Tests run at https://github.com/mkoeppe/sage/actions/runs/157858355",
    "created_at": "2020-07-04T23:41:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441620",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:43'></a>Tests run at https://github.com/mkoeppe/sage/actions/runs/157858355



---

archive/issue_comments_441621.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-07-04T23:45:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441621",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_441622.json:
```json
{
    "body": "<a id='comment:45'></a>Maybe\n\n```\n-upstream_url=https://github.com/symengine/symengine/releases/download/v0.6.0/symengine-VERSION.tar.gz\n+upstream_url=https://github.com/symengine/symengine/releases/download/vVERSION/symengine-VERSION.tar.gz\n```",
    "created_at": "2020-07-05T06:28:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441622",
    "user": "https://github.com/videlec"
}
```

<a id='comment:45'></a>Maybe

```
-upstream_url=https://github.com/symengine/symengine/releases/download/v0.6.0/symengine-VERSION.tar.gz
+upstream_url=https://github.com/symengine/symengine/releases/download/vVERSION/symengine-VERSION.tar.gz
```



---

archive/issue_comments_441623.json:
```json
{
    "body": "<a id='comment:46'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-05T07:27:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441623",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:46'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_441624.json:
```json
{
    "body": "<a id='comment:47'></a>Replying to [comment:43 mkoeppe]:\n> Tests run at https://github.com/mkoeppe/sage/actions/runs/157858355\n\nThe docker-based tests didn't go through because they are broken in 9.2.beta3 (#30064 has the fix).\n\nBut the `cygwin-standard` build (https://github.com/mkoeppe/sage/runs/838016220) reveals a build problem:\n\n```\n[arb-2.16.0.p0] installing. Log file: /cygdrive/d/a/sage/sage/logs/pkgs/arb-2.16.0.p0.log\n[ecm-7.0.4.p1] installing. Log file: /cygdrive/d/a/sage/sage/logs/pkgs/ecm-7.0.4.p1.log\n  [ecm-7.0.4.p1] successfully installed.\n  [arb-2.16.0.p0] successfully installed.\nsage-logger -p 'sage-spkg -y -o  symengine-0.6.0' '/cygdrive/d/a/sage/sage/logs/pkgs/symengine-0.6.0.log'\n[symengine-0.6.0] installing. Log file: /cygdrive/d/a/sage/sage/logs/pkgs/symengine-0.6.0.log\n  [symengine-0.6.0] error installing, exit status 1. End of log file:\n  [symengine-0.6.0]   -- Check size of long double\n  [symengine-0.6.0]   -- Check size of long double - done\n  [symengine-0.6.0]   -- Found GMP: /usr/lib/libgmp.dll.a  \n  [symengine-0.6.0]   -- Found ECM: /cygdrive/d/a/sage/sage/local/lib/libecm.dll.a  \n  [symengine-0.6.0]   -- Found FLINT: /usr/lib/libflint.dll.a  \n  [symengine-0.6.0]   CMake Error at /usr/share/cmake-3.14.5/Modules/FindPackageHandleStandardArgs.cmake:137 (message):\n  [symengine-0.6.0]     Could NOT find ARB (missing: ARB_LIBRARIES)\n  [symengine-0.6.0]   Call Stack (most recent call first):\n  [symengine-0.6.0]     /usr/share/cmake-3.14.5/Modules/FindPackageHandleStandardArgs.cmake:378 (_FPHSA_FAILURE_MESSAGE)\n  [symengine-0.6.0]     cmake/FindARB.cmake:11 (find_package_handle_standard_args)\n  [symengine-0.6.0]     CMakeLists.txt:336 (find_package)\n  [symengine-0.6.0]   \n  [symengine-0.6.0]   \n  [symengine-0.6.0]   -- Configuring incomplete, errors occurred!\n```",
    "created_at": "2020-07-05T16:58:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441624",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:47'></a>Replying to [comment:43 mkoeppe]:
> Tests run at https://github.com/mkoeppe/sage/actions/runs/157858355

The docker-based tests didn't go through because they are broken in 9.2.beta3 (#30064 has the fix).

But the `cygwin-standard` build (https://github.com/mkoeppe/sage/runs/838016220) reveals a build problem:

```
[arb-2.16.0.p0] installing. Log file: /cygdrive/d/a/sage/sage/logs/pkgs/arb-2.16.0.p0.log
[ecm-7.0.4.p1] installing. Log file: /cygdrive/d/a/sage/sage/logs/pkgs/ecm-7.0.4.p1.log
  [ecm-7.0.4.p1] successfully installed.
  [arb-2.16.0.p0] successfully installed.
sage-logger -p 'sage-spkg -y -o  symengine-0.6.0' '/cygdrive/d/a/sage/sage/logs/pkgs/symengine-0.6.0.log'
[symengine-0.6.0] installing. Log file: /cygdrive/d/a/sage/sage/logs/pkgs/symengine-0.6.0.log
  [symengine-0.6.0] error installing, exit status 1. End of log file:
  [symengine-0.6.0]   -- Check size of long double
  [symengine-0.6.0]   -- Check size of long double - done
  [symengine-0.6.0]   -- Found GMP: /usr/lib/libgmp.dll.a  
  [symengine-0.6.0]   -- Found ECM: /cygdrive/d/a/sage/sage/local/lib/libecm.dll.a  
  [symengine-0.6.0]   -- Found FLINT: /usr/lib/libflint.dll.a  
  [symengine-0.6.0]   CMake Error at /usr/share/cmake-3.14.5/Modules/FindPackageHandleStandardArgs.cmake:137 (message):
  [symengine-0.6.0]     Could NOT find ARB (missing: ARB_LIBRARIES)
  [symengine-0.6.0]   Call Stack (most recent call first):
  [symengine-0.6.0]     /usr/share/cmake-3.14.5/Modules/FindPackageHandleStandardArgs.cmake:378 (_FPHSA_FAILURE_MESSAGE)
  [symengine-0.6.0]     cmake/FindARB.cmake:11 (find_package_handle_standard_args)
  [symengine-0.6.0]     CMakeLists.txt:336 (find_package)
  [symengine-0.6.0]   
  [symengine-0.6.0]   
  [symengine-0.6.0]   -- Configuring incomplete, errors occurred!
```



---

archive/issue_comments_441625.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-07-05T17:01:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441625",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_441626.json:
```json
{
    "body": "<a id='comment:49'></a>This is an issue with arb not installing the import library on windows. https://github.com/fredrik-johansson/arb/pull/315 should fix it",
    "created_at": "2020-07-05T18:00:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441626",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:49'></a>This is an issue with arb not installing the import library on windows. https://github.com/fredrik-johansson/arb/pull/315 should fix it



---

archive/issue_comments_441627.json:
```json
{
    "body": "<a id='comment:50'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-05T18:36:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441627",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:50'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_441628.json:
```json
{
    "body": "<a id='comment:51'></a>Replying to [comment:49 isuruf]:\n> This is an issue with arb not installing the import library on windows. https://github.com/fredrik-johansson/arb/pull/315 should fix it\n\n\nIt's marked as a draft - should we be testing it here on the ticket?",
    "created_at": "2020-07-11T22:06:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441628",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:51'></a>Replying to [comment:49 isuruf]:
> This is an issue with arb not installing the import library on windows. https://github.com/fredrik-johansson/arb/pull/315 should fix it


It's marked as a draft - should we be testing it here on the ticket?



---

archive/issue_comments_441629.json:
```json
{
    "body": "<a id='comment:52'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-11T22:47:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441629",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:52'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_441630.json:
```json
{
    "body": "<a id='comment:53'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-11T22:48:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441630",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:53'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_441631.json:
```json
{
    "body": "<a id='comment:56'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-12T05:13:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441631",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:56'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_075209.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-22T18:06:33Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29497#event-75209"
}
```



---

archive/issue_events_075210.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-22T18:06:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29497#event-75210"
}
```



---

archive/issue_comments_441632.json:
```json
{
    "body": "<a id='comment:58'></a>Replying to [comment:31 certik]:\n> `@`vdelecroix, thanks for this effort. Let us know what you need, we'll be happy to implement in `SymEngine`.\n\n\nHow about Documentation? :-)",
    "created_at": "2021-01-18T17:37:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441632",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:58'></a>Replying to [comment:31 certik]:
> `@`vdelecroix, thanks for this effort. Let us know what you need, we'll be happy to implement in `SymEngine`.


How about Documentation? :-)



---

archive/issue_comments_441633.json:
```json
{
    "body": "<a id='comment:59'></a>`@`dimpase: What kind of documentation would help? I'm also interested in pushing this along!",
    "created_at": "2021-01-19T12:57:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441633",
    "user": "https://github.com/bollu"
}
```

<a id='comment:59'></a>`@`dimpase: What kind of documentation would help? I'm also interested in pushing this along!



---

archive/issue_comments_441634.json:
```json
{
    "body": "<a id='comment:60'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2021-01-20T00:29:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441634",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:60'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_441635.json:
```json
{
    "body": "<a id='comment:61'></a>Rebased on current develop",
    "created_at": "2021-01-20T00:29:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441635",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:61'></a>Rebased on current develop



---

archive/issue_comments_441636.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,17 @@\n+Symengine is a C++ symbolic engine\n+- that can be used as a backend in sympy (and makes it much faster)\n+- that implements \"fast callable\" for floats, GMP types, flint types, arb types, ... and accepts numpy arrays as arguments (the function is applied entrywise)\n+\n+It is very strong candidate for replacing some of the symbolic we have in Sage, in particular all the fast callable.\n+\n+- https://github.com/symengine/symengine/releases\n+- https://github.com/symengine/symengine.py/\n+\n+\n+See also:\n+- https://groups.google.com/d/msg/sage-devel/m8XXaoIpvIw/Eeju5I61CQAJ (discussion August 2015)\n+- https://groups.google.com/d/msg/sympy/bPh2Hx1HRJ4/CLyuv2c1AgAJ (discussion May 2020)\n+\n \n \n Author: Vincent Delecroix\n``````\n",
    "created_at": "2021-01-20T00:35:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441636",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,17 @@
+Symengine is a C++ symbolic engine
+- that can be used as a backend in sympy (and makes it much faster)
+- that implements "fast callable" for floats, GMP types, flint types, arb types, ... and accepts numpy arrays as arguments (the function is applied entrywise)
+
+It is very strong candidate for replacing some of the symbolic we have in Sage, in particular all the fast callable.
+
+- https://github.com/symengine/symengine/releases
+- https://github.com/symengine/symengine.py/
+
+
+See also:
+- https://groups.google.com/d/msg/sage-devel/m8XXaoIpvIw/Eeju5I61CQAJ (discussion August 2015)
+- https://groups.google.com/d/msg/sympy/bPh2Hx1HRJ4/CLyuv2c1AgAJ (discussion May 2020)
+
 
 
 Author: Vincent Delecroix
``````




---

archive/issue_comments_441637.json:
```json
{
    "body": "<a id='comment:64'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-01-20T00:54:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441637",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:64'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_441638.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-01-20T01:06:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441638",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_441639.json:
```json
{
    "body": "<a id='comment:65'></a>I've updated the package metadata. Ready for review.",
    "created_at": "2021-01-20T01:06:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441639",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:65'></a>I've updated the package metadata. Ready for review.



---

archive/issue_comments_441640.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,17 @@\n+Symengine is a C++ symbolic engine\n+- that can be used as a backend in sympy (and makes it much faster)\n+- that implements \"fast callable\" for floats, GMP types, flint types, arb types, ... and accepts numpy arrays as arguments (the function is applied entrywise)\n+\n+It is very strong candidate for replacing some of the symbolic we have in Sage, in particular all the fast callable.\n+\n+- https://github.com/symengine/symengine/releases\n+- https://github.com/symengine/symengine.py/\n+\n+\n+See also:\n+- https://groups.google.com/d/msg/sage-devel/m8XXaoIpvIw/Eeju5I61CQAJ (discussion August 2015)\n+- https://groups.google.com/d/msg/sympy/bPh2Hx1HRJ4/CLyuv2c1AgAJ (discussion May 2020)\n+- https://groups.google.com/g/sage-devel/c/sY3zh-pq8T4/m/Y2Bp0_LxAAAJ (discussion January 2021)\n \n \n Author: Vincent Delecroix\n``````\n",
    "created_at": "2021-01-20T19:08:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441640",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,17 @@
+Symengine is a C++ symbolic engine
+- that can be used as a backend in sympy (and makes it much faster)
+- that implements "fast callable" for floats, GMP types, flint types, arb types, ... and accepts numpy arrays as arguments (the function is applied entrywise)
+
+It is very strong candidate for replacing some of the symbolic we have in Sage, in particular all the fast callable.
+
+- https://github.com/symengine/symengine/releases
+- https://github.com/symengine/symengine.py/
+
+
+See also:
+- https://groups.google.com/d/msg/sage-devel/m8XXaoIpvIw/Eeju5I61CQAJ (discussion August 2015)
+- https://groups.google.com/d/msg/sympy/bPh2Hx1HRJ4/CLyuv2c1AgAJ (discussion May 2020)
+- https://groups.google.com/g/sage-devel/c/sY3zh-pq8T4/m/Y2Bp0_LxAAAJ (discussion January 2021)
 
 
 Author: Vincent Delecroix
``````




---

archive/issue_comments_441641.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-02-17T15:15:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441641",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_441642.json:
```json
{
    "body": "<a id='comment:68'></a>Install worked fine and tests pass! Time to move forward.",
    "created_at": "2021-02-17T15:15:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441642",
    "user": "https://github.com/videlec"
}
```

<a id='comment:68'></a>Install worked fine and tests pass! Time to move forward.



---

archive/issue_comments_441643.json:
```json
{
    "body": "<a id='comment:69'></a>Great, thanks.",
    "created_at": "2021-02-17T15:21:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441643",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:69'></a>Great, thanks.



---

archive/issue_comments_441644.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-03-01T00:20:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29497#issuecomment-441644",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_075211.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-03-01T00:20:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29497",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29497#event-75211"
}
```
