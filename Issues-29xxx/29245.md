# Issue 29245: spkg-configure for fplll

archive/issues_029008.json:
```json
{
    "body": "fplll ships a pkg-config file, is slow to build, and has only one dependency that was already spkg-configurified.\n\nIt is packaged for a few distros, so let's use it.\n\n\n**CC:**  @embray @dimpase @mkoeppe @isuruf @kiwifb\n\n**Branch/Commit:** [7fc917b6cdeac783ad8dd05aed19fd783772d53d](https://github.com/sagemath/sagetrac-mirror/commit/7fc917b6cdeac783ad8dd05aed19fd783772d53d)\n\n**Reviewer:** Dima Pasechnik\n\n**Author:** Michael Orlitzky\n\nIssue created by migration from https://trac.sagemath.org/ticket/29245\n\n",
    "closed_at": "2020-03-03T23:21:22Z",
    "created_at": "2020-02-24T17:40:44Z",
    "labels": [
        "component: build: configure",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "spkg-configure for fplll",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29245",
    "user": "https://github.com/orlitzky"
}
```
fplll ships a pkg-config file, is slow to build, and has only one dependency that was already spkg-configurified.

It is packaged for a few distros, so let's use it.


**CC:**  @embray @dimpase @mkoeppe @isuruf @kiwifb

**Branch/Commit:** [7fc917b6cdeac783ad8dd05aed19fd783772d53d](https://github.com/sagemath/sagetrac-mirror/commit/7fc917b6cdeac783ad8dd05aed19fd783772d53d)

**Reviewer:** Dima Pasechnik

**Author:** Michael Orlitzky

Issue created by migration from https://trac.sagemath.org/ticket/29245





---

archive/issue_comments_544401.json:
```json
{
    "body": "**Author:** Michael Orlitzky",
    "created_at": "2020-02-24T17:46:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29245#issuecomment-544401",
    "user": "https://github.com/orlitzky"
}
```

**Author:** Michael Orlitzky



---

archive/issue_comments_544402.json:
```json
{
    "body": "**Commit:** [34d1c62c3496c6c78238d8a350f7e58bcf127b7c](https://github.com/sagemath/sagetrac-mirror/commit/34d1c62c3496c6c78238d8a350f7e58bcf127b7c)",
    "created_at": "2020-02-24T17:46:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29245#issuecomment-544402",
    "user": "https://github.com/orlitzky"
}
```

**Commit:** [34d1c62c3496c6c78238d8a350f7e58bcf127b7c](https://github.com/sagemath/sagetrac-mirror/commit/34d1c62c3496c6c78238d8a350f7e58bcf127b7c)



---

archive/issue_comments_544403.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,4 +2,3 @@\n \n It is packaged for a few distros, so let's use it.\n \n-\n``````\n",
    "created_at": "2020-02-24T17:46:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29245#issuecomment-544403",
    "user": "https://github.com/orlitzky"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,4 +2,3 @@
 
 It is packaged for a few distros, so let's use it.
 
-
``````




---

archive/issue_comments_544404.json:
```json
{
    "body": "**Branch:** [u/mjo/ticket/29245](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/29245)",
    "created_at": "2020-02-24T17:46:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29245#issuecomment-544404",
    "user": "https://github.com/orlitzky"
}
```

**Branch:** [u/mjo/ticket/29245](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/29245)



---

archive/issue_comments_544405.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2020-02-24T17:46:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29245#issuecomment-544405",
    "user": "https://github.com/orlitzky"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_544406.json:
```json
{
    "body": "<a id='comment:1'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/34d1c62c3496c6c78238d8a350f7e58bcf127b7c\">34d1c62</a></td><td><code>Trac #29245: new spkg-configure.m4 for fplll.</code></td></tr></table>\n",
    "created_at": "2020-02-24T17:46:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29245#issuecomment-544406",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:1'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/34d1c62c3496c6c78238d8a350f7e58bcf127b7c">34d1c62</a></td><td><code>Trac #29245: new spkg-configure.m4 for fplll.</code></td></tr></table>




---

archive/issue_comments_544407.json:
```json
{
    "body": "<a id='comment:2'></a>\nCould you add `build/pkgs/fplll/distros/` please (see #29129)?",
    "created_at": "2020-02-24T18:01:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29245#issuecomment-544407",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
Could you add `build/pkgs/fplll/distros/` please (see #29129)?



---

archive/issue_comments_544408.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e478f113368a16d45c1c10f71d5dd49f47047724\">e478f11</a></td><td><code>Trac #29245: add \"distros\" directory with an entry for Gentoo.</code></td></tr></table>\n",
    "created_at": "2020-02-24T18:20:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29245#issuecomment-544408",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e478f113368a16d45c1c10f71d5dd49f47047724">e478f11</a></td><td><code>Trac #29245: add "distros" directory with an entry for Gentoo.</code></td></tr></table>




---

archive/issue_comments_544409.json:
```json
{
    "body": "**Changing commit** from \"[34d1c62c3496c6c78238d8a350f7e58bcf127b7c](https://github.com/sagemath/sagetrac-mirror/commit/34d1c62c3496c6c78238d8a350f7e58bcf127b7c)\" to \"[e478f113368a16d45c1c10f71d5dd49f47047724](https://github.com/sagemath/sagetrac-mirror/commit/e478f113368a16d45c1c10f71d5dd49f47047724)\".",
    "created_at": "2020-02-24T18:20:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29245#issuecomment-544409",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[34d1c62c3496c6c78238d8a350f7e58bcf127b7c](https://github.com/sagemath/sagetrac-mirror/commit/34d1c62c3496c6c78238d8a350f7e58bcf127b7c)" to "[e478f113368a16d45c1c10f71d5dd49f47047724](https://github.com/sagemath/sagetrac-mirror/commit/e478f113368a16d45c1c10f71d5dd49f47047724)".



---

archive/issue_comments_544410.json:
```json
{
    "body": "<a id='comment:4'></a>\nSure. I'll add the others if people can tell me what to stick in the text files. For example I'm pretty sure you need both the main package and -dev on Debian, but who knows. I'm also pretty sure that someone is going to tell me the pc file is missing somewhere and make me do a header/library search...",
    "created_at": "2020-02-24T18:26:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29245#issuecomment-544410",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:4'></a>
Sure. I'll add the others if people can tell me what to stick in the text files. For example I'm pretty sure you need both the main package and -dev on Debian, but who knows. I'm also pretty sure that someone is going to tell me the pc file is missing somewhere and make me do a header/library search...



---

archive/issue_comments_544411.json:
```json
{
    "body": "<a id='comment:5'></a>\nhttps://repology.org/ has the info you need",
    "created_at": "2020-02-24T18:33:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29245#issuecomment-544411",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>
https://repology.org/ has the info you need



---

archive/issue_comments_544412.json:
```json
{
    "body": "<a id='comment:6'></a>\nAnd this all can be tested using tox.",
    "created_at": "2020-02-24T18:34:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29245#issuecomment-544412",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
And this all can be tested using tox.



---

archive/issue_comments_544413.json:
```json
{
    "body": "<a id='comment:7'></a>\non debian one needs `libfplll-dev` and (probably) `fplll-tools`\n- the latter is very small, so it doesn't hurt to ask for it be installed.",
    "created_at": "2020-02-25T10:38:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29245#issuecomment-544413",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:7'></a>
on debian one needs `libfplll-dev` and (probably) `fplll-tools`
- the latter is very small, so it doesn't hurt to ask for it be installed.



---

archive/issue_comments_544414.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e8c386758094cb74e8c3c498a220dbccb0892a48\">e8c3867</a></td><td><code>Trac #29245: add Debian package information for fplll.</code></td></tr></table>\n",
    "created_at": "2020-02-25T15:10:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29245#issuecomment-544414",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e8c386758094cb74e8c3c498a220dbccb0892a48">e8c3867</a></td><td><code>Trac #29245: add Debian package information for fplll.</code></td></tr></table>




---

archive/issue_comments_544415.json:
```json
{
    "body": "**Changing commit** from \"[e478f113368a16d45c1c10f71d5dd49f47047724](https://github.com/sagemath/sagetrac-mirror/commit/e478f113368a16d45c1c10f71d5dd49f47047724)\" to \"[e8c386758094cb74e8c3c498a220dbccb0892a48](https://github.com/sagemath/sagetrac-mirror/commit/e8c386758094cb74e8c3c498a220dbccb0892a48)\".",
    "created_at": "2020-02-25T15:10:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29245#issuecomment-544415",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[e478f113368a16d45c1c10f71d5dd49f47047724](https://github.com/sagemath/sagetrac-mirror/commit/e478f113368a16d45c1c10f71d5dd49f47047724)" to "[e8c386758094cb74e8c3c498a220dbccb0892a48](https://github.com/sagemath/sagetrac-mirror/commit/e8c386758094cb74e8c3c498a220dbccb0892a48)".



---

archive/issue_comments_544416.json:
```json
{
    "body": "**Reviewer:** Dima Pasechnik",
    "created_at": "2020-02-27T07:10:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29245#issuecomment-544416",
    "user": "https://github.com/dimpase"
}
```

**Reviewer:** Dima Pasechnik



---

archive/issue_comments_544417.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2020-02-27T07:10:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29245#issuecomment-544417",
    "user": "https://github.com/dimpase"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_544418.json:
```json
{
    "body": "<a id='comment:9'></a>\nDebian fplll package is broken - fplll/pruner/ headers are missing.\nSo one gets \n\n```\n[fpylll-0.5.1dev]     building 'fpylll.fplll.integer_matrix' extension\n[fpylll-0.5.1dev]     creating build/temp.linux-x86_64-2.7/build/src/fpylll/fplll\n[fpylll-0.5.1dev]     gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -Isrc/fpylll/fplll -I/home/dimpase/sage/local/lib/python2.7/site-packages/cysignals -I/home/dimpase/sage/local/include -I/home/dimpase/sage/local/lib/python2.7/site-packages/numpy/core/include -I/home/dimpase/sage/local/include/python2.7 -c build/src/fpylll/fplll/integer_matrix.cpp -o build/temp.linux-x86_64-2.7/build/src/fpylll/fplll/integer_matrix.o -std=c++11\n[fpylll-0.5.1dev]     build/src/fpylll/fplll/integer_matrix.cpp:698:10: fatal error: fplll/pruner/pruner.h: No such file or directory\n[fpylll-0.5.1dev]      #include \"fplll/pruner/pruner.h\"\n[fpylll-0.5.1dev]               ^~~~~~~~~~~~~~~~~~~~~~~\n[fpylll-0.5.1dev]     compilation terminated.\n[fpylll-0.5.1dev]     error: command 'gcc' failed with exit status 1\n```\nI propose to include a check for this header in the macro.",
    "created_at": "2020-02-27T07:10:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29245#issuecomment-544418",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:9'></a>
Debian fplll package is broken - fplll/pruner/ headers are missing.
So one gets 

```
[fpylll-0.5.1dev]     building 'fpylll.fplll.integer_matrix' extension
[fpylll-0.5.1dev]     creating build/temp.linux-x86_64-2.7/build/src/fpylll/fplll
[fpylll-0.5.1dev]     gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -Isrc/fpylll/fplll -I/home/dimpase/sage/local/lib/python2.7/site-packages/cysignals -I/home/dimpase/sage/local/include -I/home/dimpase/sage/local/lib/python2.7/site-packages/numpy/core/include -I/home/dimpase/sage/local/include/python2.7 -c build/src/fpylll/fplll/integer_matrix.cpp -o build/temp.linux-x86_64-2.7/build/src/fpylll/fplll/integer_matrix.o -std=c++11
[fpylll-0.5.1dev]     build/src/fpylll/fplll/integer_matrix.cpp:698:10: fatal error: fplll/pruner/pruner.h: No such file or directory
[fpylll-0.5.1dev]      #include "fplll/pruner/pruner.h"
[fpylll-0.5.1dev]               ^~~~~~~~~~~~~~~~~~~~~~~
[fpylll-0.5.1dev]     compilation terminated.
[fpylll-0.5.1dev]     error: command 'gcc' failed with exit status 1
```
I propose to include a check for this header in the macro.



---

archive/issue_comments_544419.json:
```json
{
    "body": "<a id='comment:10'></a>\nIn fact, fplll-5.2.1 does not have that header, they only appear in fplll-5.3\n\nso, just updating the minimal version will do.",
    "created_at": "2020-02-27T07:16:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29245#issuecomment-544419",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:10'></a>
In fact, fplll-5.2.1 does not have that header, they only appear in fplll-5.3

so, just updating the minimal version will do.



---

archive/issue_comments_544420.json:
```json
{
    "body": "<a id='comment:11'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7fc917b6cdeac783ad8dd05aed19fd783772d53d\">7fc917b</a></td><td><code>Trac #29245: increase minimum version of fplll to 5.3.</code></td></tr></table>\n",
    "created_at": "2020-02-27T13:00:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29245#issuecomment-544420",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7fc917b6cdeac783ad8dd05aed19fd783772d53d">7fc917b</a></td><td><code>Trac #29245: increase minimum version of fplll to 5.3.</code></td></tr></table>




---

archive/issue_comments_544421.json:
```json
{
    "body": "**Changing commit** from \"[e8c386758094cb74e8c3c498a220dbccb0892a48](https://github.com/sagemath/sagetrac-mirror/commit/e8c386758094cb74e8c3c498a220dbccb0892a48)\" to \"[7fc917b6cdeac783ad8dd05aed19fd783772d53d](https://github.com/sagemath/sagetrac-mirror/commit/7fc917b6cdeac783ad8dd05aed19fd783772d53d)\".",
    "created_at": "2020-02-27T13:00:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29245#issuecomment-544421",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[e8c386758094cb74e8c3c498a220dbccb0892a48](https://github.com/sagemath/sagetrac-mirror/commit/e8c386758094cb74e8c3c498a220dbccb0892a48)" to "[7fc917b6cdeac783ad8dd05aed19fd783772d53d](https://github.com/sagemath/sagetrac-mirror/commit/7fc917b6cdeac783ad8dd05aed19fd783772d53d)".



---

archive/issue_comments_544422.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [dimpase](#comment%3A10):\n> In fact, fplll-5.2.1 does not have that header, they only appear in fplll-5.3\n> \n> so, just updating the minimal version will do.\n\n\nThanks, fixed.",
    "created_at": "2020-02-27T13:00:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29245#issuecomment-544422",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:12'></a>
Replying to [dimpase](#comment%3A10):
> In fact, fplll-5.2.1 does not have that header, they only appear in fplll-5.3
> 
> so, just updating the minimal version will do.


Thanks, fixed.



---

archive/issue_comments_544423.json:
```json
{
    "body": "**Changing status** from needs_work to positive_review.",
    "created_at": "2020-03-02T03:44:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29245#issuecomment-544423",
    "user": "https://github.com/dimpase"
}
```

**Changing status** from needs_work to positive_review.



---

archive/issue_events_084274.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-03-03T23:21:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29245",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29245#event-84274"
}
```



---

archive/issue_comments_544424.json:
```json
{
    "body": "**Changing branch** from \"[u/mjo/ticket/29245](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/29245)\" to \"[7fc917b6cdeac783ad8dd05aed19fd783772d53d](https://github.com/sagemath/sagetrac-mirror/commit/7fc917b6cdeac783ad8dd05aed19fd783772d53d)\".",
    "created_at": "2020-03-03T23:21:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29245",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29245#issuecomment-544424",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/mjo/ticket/29245](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/29245)" to "[7fc917b6cdeac783ad8dd05aed19fd783772d53d](https://github.com/sagemath/sagetrac-mirror/commit/7fc917b6cdeac783ad8dd05aed19fd783772d53d)".
