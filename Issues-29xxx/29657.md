# Issue 29657: Meta ticket: graphs: improve distances, radius, diameter, eccentricities

archive/issues_029420.json:
```json
{
    "body": "The goal of this ticket is to organize and follow the changes and improvements done on methods for computing distances, diameter, radius and eccentricities.\n\n**Tickets**:\n- #29660: Move radius, diameter and eccentricity methods from generic_graph.py to graph.py and digraph.py\n- #29715: Implement a fast algorithm by Dragan, Habib and Viennot for computing the radius of undirected graphs.\n- #29734: fix an error in `shortest_path_lengths` method in `generic_graph.py`. The input graph should not be modified.\n- #29744: Implement diameter computation method for undirected graphs given by Dragan, Habib and Viennot.\n- #27934: Implement all eccentricity method for undirected graphs given by Dragan, Habib and viennot.\n- #29422:  DiFUB algorithm for diameter of real (unweighed) directed graphs\n- #30039: Weighted version of difub algorithm and 2Dsweep.\n- #30081: Cleaning and improving consistency in `distances` methods in graph module\n- #30247: memory efficient implementation of Wiener index\n- #30269: memory efficient implementation of distances distribution\n- #30405: fast (and memory efficient) implementation of `antipodal_graph`\n\n\n**To do**:\n- avoid the use of \"dict of dict of distances\" inside method eccentricity, and avoid repeated conversions from one graph format to the other\n- Make usage of weights, weight functions and checks consistent. See for instance issue reported with boost in #29781. This can be done by introducing following lines of code in all distances related methods such `shortest_path(s)` , `shortest_path_length(s)`, `shortest_path_all_pairs`\n\n```\nif by_weight and weight_function is None:\n    def weight_function(e):\n        return 1 if e[2] is None else e[2]\n```\n\n- `shortest_paths` method in `boost_graph.pyx` doesnt properly detect negative cycle using `Bellman-Ford` as algorithm. To solve, we can try to traverse distance dictionary and check if any value is negative. If negative then raise error, since distances can't be negative.\n\n- In #29744 and #29715, we have raised an error, if graph contains negative edge weights. Reason for this was `Bellman-Ford` is not able to properly detect negative cycle in undirected graphs. \n\n**Opened and inactive tickets, to be finalized or ...**\n- #29346:  diameter for large directed real graphs - Algorithm by [Takuya Akiba, Yoichi Iwata, Yuki Kawata](https://doi.org/10.1007/978-3-319-20086-6_5)\n- #29309: duplicate of #29346 with a different implementation\n- #29336: proposal for making a code of Yuki Kawata to compute the diameter of directed graphs an external package. Same algorithm than #29346 ? \n- #27564: methods for computing the diameter of trees. Note that 2 BFS / Dijkstra calls are sufficient for that.\n- #27540: approximate algorithm for the diameter of undirected graphs.\n\n\n- #4854: add parameter `as_edge` to return a path as a list of labeled edges instead of a list of vertices\n\nCC:  @vipul79321\n\nKeywords: gsoc2020\n\nAuthor: Vipul Gupta, David Coudert\n\nIssue created by migration from https://trac.sagemath.org/ticket/29657\n\n",
    "created_at": "2020-05-06T17:45:48Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Meta ticket: graphs: improve distances, radius, diameter, eccentricities",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29657",
    "user": "https://github.com/dcoudert"
}
```
The goal of this ticket is to organize and follow the changes and improvements done on methods for computing distances, diameter, radius and eccentricities.

**Tickets**:
- #29660: Move radius, diameter and eccentricity methods from generic_graph.py to graph.py and digraph.py
- #29715: Implement a fast algorithm by Dragan, Habib and Viennot for computing the radius of undirected graphs.
- #29734: fix an error in `shortest_path_lengths` method in `generic_graph.py`. The input graph should not be modified.
- #29744: Implement diameter computation method for undirected graphs given by Dragan, Habib and Viennot.
- #27934: Implement all eccentricity method for undirected graphs given by Dragan, Habib and viennot.
- #29422:  DiFUB algorithm for diameter of real (unweighed) directed graphs
- #30039: Weighted version of difub algorithm and 2Dsweep.
- #30081: Cleaning and improving consistency in `distances` methods in graph module
- #30247: memory efficient implementation of Wiener index
- #30269: memory efficient implementation of distances distribution
- #30405: fast (and memory efficient) implementation of `antipodal_graph`


**To do**:
- avoid the use of "dict of dict of distances" inside method eccentricity, and avoid repeated conversions from one graph format to the other
- Make usage of weights, weight functions and checks consistent. See for instance issue reported with boost in #29781. This can be done by introducing following lines of code in all distances related methods such `shortest_path(s)` , `shortest_path_length(s)`, `shortest_path_all_pairs`

```
if by_weight and weight_function is None:
    def weight_function(e):
        return 1 if e[2] is None else e[2]
```

- `shortest_paths` method in `boost_graph.pyx` doesnt properly detect negative cycle using `Bellman-Ford` as algorithm. To solve, we can try to traverse distance dictionary and check if any value is negative. If negative then raise error, since distances can't be negative.

- In #29744 and #29715, we have raised an error, if graph contains negative edge weights. Reason for this was `Bellman-Ford` is not able to properly detect negative cycle in undirected graphs. 

**Opened and inactive tickets, to be finalized or ...**
- #29346:  diameter for large directed real graphs - Algorithm by [Takuya Akiba, Yoichi Iwata, Yuki Kawata](https://doi.org/10.1007/978-3-319-20086-6_5)
- #29309: duplicate of #29346 with a different implementation
- #29336: proposal for making a code of Yuki Kawata to compute the diameter of directed graphs an external package. Same algorithm than #29346 ? 
- #27564: methods for computing the diameter of trees. Note that 2 BFS / Dijkstra calls are sufficient for that.
- #27540: approximate algorithm for the diameter of undirected graphs.


- #4854: add parameter `as_edge` to return a path as a list of labeled edges instead of a list of vertices

CC:  @vipul79321

Keywords: gsoc2020

Author: Vipul Gupta, David Coudert

Issue created by migration from https://trac.sagemath.org/ticket/29657





---

archive/issue_comments_416924.json:
```json
{
    "body": "<a id='comment:3'></a>I am glad to see this, because there are several open tickets on these topics. Other tickets I noticed that seem to fit the description and I hope will be included in the organization: #29431, #29422, #29346, #29336, #29309, #27934, #27564, #27540, #27506.",
    "created_at": "2020-05-23T21:15:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29657#issuecomment-416924",
    "user": "https://github.com/DaveWitteMorris"
}
```

<a id='comment:3'></a>I am glad to see this, because there are several open tickets on these topics. Other tickets I noticed that seem to fit the description and I hope will be included in the organization: #29431, #29422, #29346, #29336, #29309, #27934, #27564, #27540, #27506.



---

archive/issue_comments_416925.json:
```json
{
    "body": "<a id='comment:4'></a>Replying to [comment:3 gh-DaveWitteMorris]:\n> I am glad to see this, because there are several open tickets on these topics. Other tickets I noticed that seem to fit the description and I hope will be included in the organization: #29431, #29422, #29346, #29336, #29309, #27934, #27564, #27540, #27506.\n\n\nYou are right, some of them must be finalized, some other closed.\n\nFor #27564, we may implement a Tree class like `BipartiteGraph` and to add it specific methods. This could help organizing methods.",
    "created_at": "2020-05-24T09:56:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29657#issuecomment-416925",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:4'></a>Replying to [comment:3 gh-DaveWitteMorris]:
> I am glad to see this, because there are several open tickets on these topics. Other tickets I noticed that seem to fit the description and I hope will be included in the organization: #29431, #29422, #29346, #29336, #29309, #27934, #27564, #27540, #27506.


You are right, some of them must be finalized, some other closed.

For #27564, we may implement a Tree class like `BipartiteGraph` and to add it specific methods. This could help organizing methods.



---

archive/issue_comments_416926.json:
```json
{
    "body": "Changing keywords from \"gsoc\" to \"gsoc20\".",
    "created_at": "2020-05-29T03:11:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29657#issuecomment-416926",
    "user": "https://github.com/slel"
}
```

Changing keywords from "gsoc" to "gsoc20".



---

archive/issue_comments_416927.json:
```json
{
    "body": "Changing type from task to defect.",
    "created_at": "2020-06-03T17:02:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29657#issuecomment-416927",
    "user": "https://github.com/vipul79321"
}
```

Changing type from task to defect.



---

archive/issue_comments_416928.json:
```json
{
    "body": "Changing type from defect to task.",
    "created_at": "2020-06-04T18:10:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29657#issuecomment-416928",
    "user": "https://github.com/vipul79321"
}
```

Changing type from defect to task.



---

archive/issue_comments_416929.json:
```json
{
    "body": "<a id='comment:11'></a>Tickets move to  sage-duplicate/invalid/wontfix:\n- #29431:  duplicate of #29715\n- #27506: proposed improvement of iFUB is what we already do.",
    "created_at": "2020-06-06T16:34:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29657#issuecomment-416929",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:11'></a>Tickets move to  sage-duplicate/invalid/wontfix:
- #29431:  duplicate of #29715
- #27506: proposed improvement of iFUB is what we already do.



---

archive/issue_comments_416930.json:
```json
{
    "body": "Changing keywords from \"gsoc20\" to \"gsoc2020\".",
    "created_at": "2020-06-27T17:27:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29657#issuecomment-416930",
    "user": "https://github.com/dcoudert"
}
```

Changing keywords from "gsoc20" to "gsoc2020".



---

archive/issue_events_075818.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29657",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29657#event-75818"
}
```



---

archive/issue_comments_416931.json:
```json
{
    "body": "<a id='comment:20'></a>Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-04-07T19:29:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29657#issuecomment-416931",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'></a>Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_075819.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-07T19:29:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29657",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29657#event-75819"
}
```



---

archive/issue_events_075820.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-07T19:29:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29657",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29657#event-75820"
}
```



---

archive/issue_events_075821.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-10T17:30:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29657",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29657#event-75821"
}
```



---

archive/issue_events_075822.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-10T17:30:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29657",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29657#event-75822"
}
```



---

archive/issue_events_075823.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:11:26Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29657",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29657#event-75823"
}
```



---

archive/issue_events_075824.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:11:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29657",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29657#event-75824"
}
```



---

archive/issue_events_075825.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-01T21:16:35Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29657",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29657#event-75825"
}
```



---

archive/issue_events_075826.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-01T21:16:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29657",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29657#event-75826"
}
```



---

archive/issue_events_075827.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T05:25:02Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29657",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29657#event-75827"
}
```



---

archive/issue_events_075828.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T05:25:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29657",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29657#event-75828"
}
```
