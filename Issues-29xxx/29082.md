# Issue 29082: Do not stage .pc files in src/lib/, clean old generated *.pc files at 'make distclean', fix 'permission denied' errors

archive/issues_028845.json:
```json
{
    "body": "#29003 introduced 2-stage installation of generated *.pc files, \nvia `src/lib/pkgconfig`- but did not provide a way to clean them up at all. And this is a problem (cf. e.g. #29071).\n \nAlso, in some installations, repeated installations this code leads to 'permission denied' errors when trying to overwrite read-only files:\n\n```\n  [openblas-0.3.6.p0]   Wrote /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/var/tmp/sage/build/openblas-0.3.6.p0/inst/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/lib/pkgconfig/blas.pc\n  [openblas-0.3.6.p0]   Wrote /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/var/tmp/sage/build/openblas-0.3.6.p0/inst/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/lib/pkgconfig/cblas.pc\n  [openblas-0.3.6.p0]   Wrote /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/var/tmp/sage/build/openblas-0.3.6.p0/inst/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/lib/pkgconfig/lapack.pc\n  [openblas-0.3.6.p0]   \n  [openblas-0.3.6.p0]   real\t8m40.259s\n  [openblas-0.3.6.p0]   user\t45m2.739s\n  [openblas-0.3.6.p0]   sys\t5m48.754s\n  [openblas-0.3.6.p0]   Copying package files from temporary location /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/var/tmp/sage/build/openblas-0.3.6.p0/inst to /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local\n  [openblas-0.3.6.p0]   cp: /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/./lib/pkgconfig/cblas.pc: Permission denied\n  [openblas-0.3.6.p0]   cp: /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/./lib/pkgconfig/blas.pc: Permission denied\n  [openblas-0.3.6.p0]   cp: /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/./lib/pkgconfig/lapack.pc: Permission denied\n```\n\nThis ticket revises the installation as follows:\n\n- `configure` no longer creates .pc files in the build tree\n- Instead it creates rules in `make/Makefile` that create the .pc files in `SAGE_LOCAL`.\n- Before pc files are installed into `SAGE_LOCAL`, the targets are removed, to avoid permission problems\n\nThis ticket does not solve everything. There may still be problems when switching from a system library to an spkg-provided library. We will use the follow-up ticket #29387 (Complete solution for installing the generated *.pc files) to address this problem.\n\n\n\nCC:  @embray @mkoeppe @jhpalmieri @vbraun @kiwifb\n\nBranch/Commit: [329843baa9cecfb751e8afdb6b666f01930f0bf0](https://github.com/sagemath/sagetrac-mirror/commit/329843baa9cecfb751e8afdb6b666f01930f0bf0)\n\nReviewer: Dima Pasechnik\n\nAuthor: Matthias Koeppe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29082\n\n",
    "closed_at": "2020-03-29T00:24:26Z",
    "created_at": "2020-01-26T12:40:13Z",
    "labels": [
        "component: build: configure",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "Do not stage .pc files in src/lib/, clean old generated *.pc files at 'make distclean', fix 'permission denied' errors",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29082",
    "user": "https://github.com/dimpase"
}
```
#29003 introduced 2-stage installation of generated *.pc files, 
via `src/lib/pkgconfig`- but did not provide a way to clean them up at all. And this is a problem (cf. e.g. #29071).
 
Also, in some installations, repeated installations this code leads to 'permission denied' errors when trying to overwrite read-only files:

```
  [openblas-0.3.6.p0]   Wrote /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/var/tmp/sage/build/openblas-0.3.6.p0/inst/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/lib/pkgconfig/blas.pc
  [openblas-0.3.6.p0]   Wrote /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/var/tmp/sage/build/openblas-0.3.6.p0/inst/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/lib/pkgconfig/cblas.pc
  [openblas-0.3.6.p0]   Wrote /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/var/tmp/sage/build/openblas-0.3.6.p0/inst/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/lib/pkgconfig/lapack.pc
  [openblas-0.3.6.p0]   
  [openblas-0.3.6.p0]   real	8m40.259s
  [openblas-0.3.6.p0]   user	45m2.739s
  [openblas-0.3.6.p0]   sys	5m48.754s
  [openblas-0.3.6.p0]   Copying package files from temporary location /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/var/tmp/sage/build/openblas-0.3.6.p0/inst to /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local
  [openblas-0.3.6.p0]   cp: /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/./lib/pkgconfig/cblas.pc: Permission denied
  [openblas-0.3.6.p0]   cp: /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/./lib/pkgconfig/blas.pc: Permission denied
  [openblas-0.3.6.p0]   cp: /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/./lib/pkgconfig/lapack.pc: Permission denied
```

This ticket revises the installation as follows:

- `configure` no longer creates .pc files in the build tree
- Instead it creates rules in `make/Makefile` that create the .pc files in `SAGE_LOCAL`.
- Before pc files are installed into `SAGE_LOCAL`, the targets are removed, to avoid permission problems

This ticket does not solve everything. There may still be problems when switching from a system library to an spkg-provided library. We will use the follow-up ticket #29387 (Complete solution for installing the generated *.pc files) to address this problem.



CC:  @embray @mkoeppe @jhpalmieri @vbraun @kiwifb

Branch/Commit: [329843baa9cecfb751e8afdb6b666f01930f0bf0](https://github.com/sagemath/sagetrac-mirror/commit/329843baa9cecfb751e8afdb6b666f01930f0bf0)

Reviewer: Dima Pasechnik

Author: Matthias Koeppe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29082





---

archive/issue_comments_567143.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2020-01-26T12:43:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567143",
    "user": "https://github.com/dimpase"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_567144.json:
```json
{
    "body": "<a id='comment:2'></a>\nMy suggestion would be to rewrite this as a script package instead of putting things into `src/`. This stuff really does not belong into `src/`.",
    "created_at": "2020-01-28T00:43:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567144",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
My suggestion would be to rewrite this as a script package instead of putting things into `src/`. This stuff really does not belong into `src/`.



---

archive/issue_comments_567145.json:
```json
{
    "body": "<a id='comment:3'></a>\nAdded #29071 as a dependency as it touches the same files.",
    "created_at": "2020-01-28T01:00:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567145",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>
Added #29071 as a dependency as it touches the same files.



---

archive/issue_comments_567146.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#29071\"",
    "created_at": "2020-01-28T01:00:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567146",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#29071"



---

archive/issue_events_083246.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "rename": {
        "from": "clean generated *.pc files",
        "to": "Move .pc file from src/ to build/, clean generated *.pc files at 'make distclean'"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29082#event-83246"
}
```



---

archive/issue_comments_567147.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,7 @@\n #29003 introduced 2-stage installation of generated *.pc files, \n via `src/lib/pkgconfig`- but did not provide a way to clean them up at all. And this is a problem (cf. e.g. #29071).\n  \n-At least `make distclean` should clean them, possibly even `make clean`, not sure about this.\n+The generated files are for sage-the-distribution, not sagelib, so they belong into `build`, not `src`.\n \n+Because `configure` (`config.status`) creates them, `make distclean` should clean them, but not `make clean`.\n+\n``````\n",
    "created_at": "2020-01-28T01:00:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567147",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,7 @@
 #29003 introduced 2-stage installation of generated *.pc files, 
 via `src/lib/pkgconfig`- but did not provide a way to clean them up at all. And this is a problem (cf. e.g. #29071).
  
-At least `make distclean` should clean them, possibly even `make clean`, not sure about this.
+The generated files are for sage-the-distribution, not sagelib, so they belong into `build`, not `src`.
 
+Because `configure` (`config.status`) creates them, `make distclean` should clean them, but not `make clean`.
+
``````




---

archive/issue_comments_567148.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2020-01-28T01:01:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567148",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_567149.json:
```json
{
    "body": "<a id='comment:5'></a>\n(deleted a comment that was intended for #29071.)",
    "created_at": "2020-01-28T01:06:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567149",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>
(deleted a comment that was intended for #29071.)



---

archive/issue_comments_567150.json:
```json
{
    "body": "<a id='comment:6'></a>\n(deleted a comment that was intended for #29071.)",
    "created_at": "2020-01-28T01:19:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567150",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
(deleted a comment that was intended for #29071.)



---

archive/issue_comments_567151.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [mkoeppe](#comment%3A2):\n> My suggestion would be to rewrite this as a script package instead of putting things into `src/`. This stuff really does not belong into `src/`.\n\n\nPerhaps we should just create `var/` next to `src/` and put these things there?",
    "created_at": "2020-01-28T09:03:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567151",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:7'></a>
Replying to [mkoeppe](#comment%3A2):
> My suggestion would be to rewrite this as a script package instead of putting things into `src/`. This stuff really does not belong into `src/`.


Perhaps we should just create `var/` next to `src/` and put these things there?



---

archive/issue_comments_567152.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,5 +3,5 @@\n  \n The generated files are for sage-the-distribution, not sagelib, so they belong into `build`, not `src`.\n \n-Because `configure` (`config.status`) creates them, `make distclean` should clean them, but not `make clean`.\n+Because `configure` (`config.status`) creates them, `make distclean` should clean them, if not `make clean`.\n \n``````\n",
    "created_at": "2020-01-28T09:03:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567152",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,5 +3,5 @@
  
 The generated files are for sage-the-distribution, not sagelib, so they belong into `build`, not `src`.
 
-Because `configure` (`config.status`) creates them, `make distclean` should clean them, but not `make clean`.
+Because `configure` (`config.status`) creates them, `make distclean` should clean them, if not `make clean`.
 
``````




---

archive/issue_comments_567153.json:
```json
{
    "body": "<a id='comment:8'></a>\nNo, I don't think so. These are configure-generated files of sage-the-distribution - like `build/make/Makefile`. There's no need for a new top level.\n\nLet me take care of this ticket after #29071 is done.",
    "created_at": "2020-01-28T12:22:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567153",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
No, I don't think so. These are configure-generated files of sage-the-distribution - like `build/make/Makefile`. There's no need for a new top level.

Let me take care of this ticket after #29071 is done.



---

archive/issue_comments_567154.json:
```json
{
    "body": "Changing dependencies from \"#29071\" to \"#29051, #29071, #29084\"",
    "created_at": "2020-01-29T00:31:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567154",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29071" to "#29051, #29071, #29084"



---

archive/issue_comments_567155.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2020-01-29T02:02:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567155",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_567156.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/move__pc_file_from_src__to_build___clean_generated___pc_files_at__make_distclean_\"",
    "created_at": "2020-01-29T04:19:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567156",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/move__pc_file_from_src__to_build___clean_generated___pc_files_at__make_distclean_"



---

archive/issue_comments_567157.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,9 @@\n #29003 introduced 2-stage installation of generated *.pc files, \n via `src/lib/pkgconfig`- but did not provide a way to clean them up at all. And this is a problem (cf. e.g. #29071).\n  \n-The generated files are for sage-the-distribution, not sagelib, so they belong into `build`, not `src`.\n+This ticket revises the 2-stage installation as follows:\n+- Because the generated files are for sage-the-distribution, not sagelib, so they belong into `build`, not `src`.\n+- Because `configure` (`config.status`) creates them, `make distclean` cleans them.\n+- Special-purpose code in `build/make/Makefile.in` is removed in favor of creating a new type=script package `sage_system_blas_facade`, whose `spkg-install` does the installation to `SAGE_LOCAL`.\n+- `openblas/spkg-configure.m4` sets `SAGE_BLAS=sage_system_blas_facade` if PC files are generated.\n \n-Because `configure` (`config.status`) creates them, `make distclean` should clean them, if not `make clean`.\n-\n``````\n",
    "created_at": "2020-01-29T04:26:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567157",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,9 @@
 #29003 introduced 2-stage installation of generated *.pc files, 
 via `src/lib/pkgconfig`- but did not provide a way to clean them up at all. And this is a problem (cf. e.g. #29071).
  
-The generated files are for sage-the-distribution, not sagelib, so they belong into `build`, not `src`.
+This ticket revises the 2-stage installation as follows:
+- Because the generated files are for sage-the-distribution, not sagelib, so they belong into `build`, not `src`.
+- Because `configure` (`config.status`) creates them, `make distclean` cleans them.
+- Special-purpose code in `build/make/Makefile.in` is removed in favor of creating a new type=script package `sage_system_blas_facade`, whose `spkg-install` does the installation to `SAGE_LOCAL`.
+- `openblas/spkg-configure.m4` sets `SAGE_BLAS=sage_system_blas_facade` if PC files are generated.
 
-Because `configure` (`config.status`) creates them, `make distclean` should clean them, if not `make clean`.
-
``````




---

archive/issue_comments_567158.json:
```json
{
    "body": "<a id='comment:12'></a>\nLast 10 new commits:\n|                                                                                                                                          |                                        |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|\n|[683a926](https://github.com/sagemath/sagetrac-mirror/commit/683a926bb67d90832711ba64be1446dbe0463ea0)|`make installing *.pc files conditional`|\n|[a0acbcb](https://github.com/sagemath/sagetrac-mirror/commit/a0acbcb1a199e5b9795dd126756288869e86e09a)|`correct quoting of m4 index variable`|\n|[5ee6844](https://github.com/sagemath/sagetrac-mirror/commit/5ee6844ebc67fa43f4a1d6a502e90ed8751b0889)|`ensure gfortran is available`|\n|[56541ae](https://github.com/sagemath/sagetrac-mirror/commit/56541ae443c5cffaf5d943694c37f3b4afb5bca2)|`wrap AC_FC_FUNC so that it does not throw an error without Fortran`|\n|[9d1770a](https://github.com/sagemath/sagetrac-mirror/commit/9d1770a3ae75526fab19cff91dba6aeba1e04d97)|`revert #29025, remove useless [ALL] section`|\n|[dba7aef](https://github.com/sagemath/sagetrac-mirror/commit/dba7aefc4d6678210c796aaea4edf17867be216d)|`revert from \"libraries=\" back to section-specific \"BLAH_libs=\"`|\n|[3a4524e](https://github.com/sagemath/sagetrac-mirror/commit/3a4524e4c82840fb023a0fd2af83d0a1c65292cd)|`Merge remote-tracking branch 'trac/public/packages/numpy/no_DEFAULT_and_ALL_numpy_site_cfg' into openblaspcfix`|\n|[06f46eb](https://github.com/sagemath/sagetrac-mirror/commit/06f46ebaa41a620016d8e04c8c27045acbcd3ae0)|`Add blas to fflas_ffpack linked libraries so that openblas is picked up on Arch`|\n|[5f16988](https://github.com/sagemath/sagetrac-mirror/commit/5f16988d3545fb08f52ea3bd3362ae70f9c83b9b)|`Merge branch 'u/arojas/make_fflas_ffpack_detect_and_use_system_openblas_on_arch' of git://trac.sagemath.org/sage into t/29082/move__pc_file_from_src__to_build___clean_generated___pc_files_at__make_distclean_`|\n|[2a01db1](https://github.com/sagemath/sagetrac-mirror/commit/2a01db11ef106d00217d3176a794850524467bcd)|`Move all BLAS PC file installation logic to new script package sage_sage_system_blas_facade`|",
    "created_at": "2020-01-29T04:26:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567158",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>
Last 10 new commits:
|                                                                                                                                          |                                        |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|
|[683a926](https://github.com/sagemath/sagetrac-mirror/commit/683a926bb67d90832711ba64be1446dbe0463ea0)|`make installing *.pc files conditional`|
|[a0acbcb](https://github.com/sagemath/sagetrac-mirror/commit/a0acbcb1a199e5b9795dd126756288869e86e09a)|`correct quoting of m4 index variable`|
|[5ee6844](https://github.com/sagemath/sagetrac-mirror/commit/5ee6844ebc67fa43f4a1d6a502e90ed8751b0889)|`ensure gfortran is available`|
|[56541ae](https://github.com/sagemath/sagetrac-mirror/commit/56541ae443c5cffaf5d943694c37f3b4afb5bca2)|`wrap AC_FC_FUNC so that it does not throw an error without Fortran`|
|[9d1770a](https://github.com/sagemath/sagetrac-mirror/commit/9d1770a3ae75526fab19cff91dba6aeba1e04d97)|`revert #29025, remove useless [ALL] section`|
|[dba7aef](https://github.com/sagemath/sagetrac-mirror/commit/dba7aefc4d6678210c796aaea4edf17867be216d)|`revert from "libraries=" back to section-specific "BLAH_libs="`|
|[3a4524e](https://github.com/sagemath/sagetrac-mirror/commit/3a4524e4c82840fb023a0fd2af83d0a1c65292cd)|`Merge remote-tracking branch 'trac/public/packages/numpy/no_DEFAULT_and_ALL_numpy_site_cfg' into openblaspcfix`|
|[06f46eb](https://github.com/sagemath/sagetrac-mirror/commit/06f46ebaa41a620016d8e04c8c27045acbcd3ae0)|`Add blas to fflas_ffpack linked libraries so that openblas is picked up on Arch`|
|[5f16988](https://github.com/sagemath/sagetrac-mirror/commit/5f16988d3545fb08f52ea3bd3362ae70f9c83b9b)|`Merge branch 'u/arojas/make_fflas_ffpack_detect_and_use_system_openblas_on_arch' of git://trac.sagemath.org/sage into t/29082/move__pc_file_from_src__to_build___clean_generated___pc_files_at__make_distclean_`|
|[2a01db1](https://github.com/sagemath/sagetrac-mirror/commit/2a01db11ef106d00217d3176a794850524467bcd)|`Move all BLAS PC file installation logic to new script package sage_sage_system_blas_facade`|



---

archive/issue_comments_567159.json:
```json
{
    "body": "Changing commit from \"\" to \"2a01db11ef106d00217d3176a794850524467bcd\"",
    "created_at": "2020-01-29T04:26:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567159",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "2a01db11ef106d00217d3176a794850524467bcd"



---

archive/issue_comments_567160.json:
```json
{
    "body": "<a id='comment:13'></a>\nBranch is on top of #29051, #29071, #29084.\nThis is a first version, haven't tested much yet.",
    "created_at": "2020-01-29T04:27:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567160",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>
Branch is on top of #29051, #29071, #29084.
This is a first version, haven't tested much yet.



---

archive/issue_comments_567161.json:
```json
{
    "body": "<a id='comment:14'></a>\nTests run at https://github.com/mkoeppe/sage/actions/runs/32449719",
    "created_at": "2020-01-29T04:31:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567161",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>
Tests run at https://github.com/mkoeppe/sage/actions/runs/32449719



---

archive/issue_comments_567162.json:
```json
{
    "body": "Changing dependencies from \"#29051, #29071, #29084\" to \"#29051, #29071, #29084, #26130, #29056\"",
    "created_at": "2020-01-30T01:37:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567162",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29051, #29071, #29084" to "#29051, #29071, #29084, #26130, #29056"



---

archive/issue_events_083247.json:
```json
{
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "label": "blocker",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29082#event-83247"
}
```



---

archive/issue_comments_567163.json:
```json
{
    "body": "<a id='comment:16'></a>\nI will redo this on top of the hot fix - #29121.",
    "created_at": "2020-01-31T15:59:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567163",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>
I will redo this on top of the hot fix - #29121.



---

archive/issue_comments_567164.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,7 +2,7 @@\n via `src/lib/pkgconfig`- but did not provide a way to clean them up at all. And this is a problem (cf. e.g. #29071).\n  \n This ticket revises the 2-stage installation as follows:\n-- Because the generated files are for sage-the-distribution, not sagelib, so they belong into `build`, not `src`.\n+- Because the generated files are for sage-the-distribution, not sagelib, they belong into `build`, not `src`.\n - Because `configure` (`config.status`) creates them, `make distclean` cleans them.\n - Special-purpose code in `build/make/Makefile.in` is removed in favor of creating a new type=script package `sage_system_blas_facade`, whose `spkg-install` does the installation to `SAGE_LOCAL`.\n - `openblas/spkg-configure.m4` sets `SAGE_BLAS=sage_system_blas_facade` if PC files are generated.\n``````\n",
    "created_at": "2020-02-16T20:32:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567164",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,7 +2,7 @@
 via `src/lib/pkgconfig`- but did not provide a way to clean them up at all. And this is a problem (cf. e.g. #29071).
  
 This ticket revises the 2-stage installation as follows:
-- Because the generated files are for sage-the-distribution, not sagelib, so they belong into `build`, not `src`.
+- Because the generated files are for sage-the-distribution, not sagelib, they belong into `build`, not `src`.
 - Because `configure` (`config.status`) creates them, `make distclean` cleans them.
 - Special-purpose code in `build/make/Makefile.in` is removed in favor of creating a new type=script package `sage_system_blas_facade`, whose `spkg-install` does the installation to `SAGE_LOCAL`.
 - `openblas/spkg-configure.m4` sets `SAGE_BLAS=sage_system_blas_facade` if PC files are generated.
``````




---

archive/issue_comments_567165.json:
```json
{
    "body": "Changing commit from \"2a01db11ef106d00217d3176a794850524467bcd\" to \"2535c186176468a691627bdc0cff84d8387782a8\"",
    "created_at": "2020-02-16T20:37:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567165",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2a01db11ef106d00217d3176a794850524467bcd" to "2535c186176468a691627bdc0cff84d8387782a8"



---

archive/issue_comments_567166.json:
```json
{
    "body": "<a id='comment:18'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                                                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------|\n|[2535c18](https://github.com/sagemath/sagetrac-mirror/commit/2535c186176468a691627bdc0cff84d8387782a8)|`Move all BLAS PC file installation logic to new script package sage_sage_system_blas_facade`|",
    "created_at": "2020-02-16T20:37:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567166",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                                                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------|
|[2535c18](https://github.com/sagemath/sagetrac-mirror/commit/2535c186176468a691627bdc0cff84d8387782a8)|`Move all BLAS PC file installation logic to new script package sage_sage_system_blas_facade`|



---

archive/issue_comments_567167.json:
```json
{
    "body": "Changing dependencies from \"#29051, #29071, #29084, #26130, #29056\" to \"\"",
    "created_at": "2020-02-16T20:38:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567167",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29051, #29071, #29084, #26130, #29056" to ""



---

archive/issue_comments_567168.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-02-16T20:38:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567168",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_567169.json:
```json
{
    "body": "<a id='comment:19'></a>\nRebased on 9.1.beta4",
    "created_at": "2020-02-16T20:38:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567169",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:19'></a>
Rebased on 9.1.beta4



---

archive/issue_comments_567170.json:
```json
{
    "body": "Changing commit from \"2535c186176468a691627bdc0cff84d8387782a8\" to \"3f2060ebf71d3cd593efe44a751b1a8017af969b\"",
    "created_at": "2020-02-22T23:52:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567170",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2535c186176468a691627bdc0cff84d8387782a8" to "3f2060ebf71d3cd593efe44a751b1a8017af969b"



---

archive/issue_comments_567171.json:
```json
{
    "body": "<a id='comment:21'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------|\n|[3f2060e](https://github.com/sagemath/sagetrac-mirror/commit/3f2060ebf71d3cd593efe44a751b1a8017af969b)|`Merge tag '9.1.beta5' into t/29082/move__pc_file_from_src__to_build___clean_generated___pc_files_at__make_distclean_`|",
    "created_at": "2020-02-22T23:52:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567171",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------|
|[3f2060e](https://github.com/sagemath/sagetrac-mirror/commit/3f2060ebf71d3cd593efe44a751b1a8017af969b)|`Merge tag '9.1.beta5' into t/29082/move__pc_file_from_src__to_build___clean_generated___pc_files_at__make_distclean_`|



---

archive/issue_comments_567172.json:
```json
{
    "body": "<a id='comment:22'></a>\nNeeds review.",
    "created_at": "2020-02-22T23:53:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567172",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:22'></a>
Needs review.



---

archive/issue_comments_567173.json:
```json
{
    "body": "Changing commit from \"3f2060ebf71d3cd593efe44a751b1a8017af969b\" to \"d6b5677f0a51dd790377482f4608fd041fb0fbbe\"",
    "created_at": "2020-03-02T01:51:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567173",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3f2060ebf71d3cd593efe44a751b1a8017af969b" to "d6b5677f0a51dd790377482f4608fd041fb0fbbe"



---

archive/issue_comments_567174.json:
```json
{
    "body": "<a id='comment:23'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------|\n|[d6b5677](https://github.com/sagemath/sagetrac-mirror/commit/d6b5677f0a51dd790377482f4608fd041fb0fbbe)|`Merge tag '9.1.beta6' into t/29082/move__pc_file_from_src__to_build___clean_generated___pc_files_at__make_distclean_`|",
    "created_at": "2020-03-02T01:51:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567174",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------|
|[d6b5677](https://github.com/sagemath/sagetrac-mirror/commit/d6b5677f0a51dd790377482f4608fd041fb0fbbe)|`Merge tag '9.1.beta6' into t/29082/move__pc_file_from_src__to_build___clean_generated___pc_files_at__make_distclean_`|



---

archive/issue_comments_567175.json:
```json
{
    "body": "<a id='comment:24'></a>\nAgreed on the first two points in the description.\n\nDon't agree on sage_system_blas_facade and the changes to Makefile.in.  I don't see how it's \"special-purpose code\".  It's a quite generic solution that you seem to be *replacing* with \"special-purpose code\" that's very specific to openblas.  This ticket was needed for more than just blas.",
    "created_at": "2020-03-06T14:40:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567175",
    "user": "https://github.com/embray"
}
```

<a id='comment:24'></a>
Agreed on the first two points in the description.

Don't agree on sage_system_blas_facade and the changes to Makefile.in.  I don't see how it's "special-purpose code".  It's a quite generic solution that you seem to be *replacing* with "special-purpose code" that's very specific to openblas.  This ticket was needed for more than just blas.



---

archive/issue_comments_567176.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2020-03-06T14:42:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567176",
    "user": "https://github.com/embray"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_567177.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,6 +4,6 @@\n This ticket revises the 2-stage installation as follows:\n - Because the generated files are for sage-the-distribution, not sagelib, they belong into `build`, not `src`.\n - Because `configure` (`config.status`) creates them, `make distclean` cleans them.\n-- Special-purpose code in `build/make/Makefile.in` is removed in favor of creating a new type=script package `sage_system_blas_facade`, whose `spkg-install` does the installation to `SAGE_LOCAL`.\n+- Code in `build/make/Makefile.in` is removed in favor of creating a new type=script package `sage_system_blas_facade`, whose `spkg-install` does the installation to `SAGE_LOCAL`.\n - `openblas/spkg-configure.m4` sets `SAGE_BLAS=sage_system_blas_facade` if PC files are generated.\n \n``````\n",
    "created_at": "2020-03-06T16:04:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567177",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,6 +4,6 @@
 This ticket revises the 2-stage installation as follows:
 - Because the generated files are for sage-the-distribution, not sagelib, they belong into `build`, not `src`.
 - Because `configure` (`config.status`) creates them, `make distclean` cleans them.
-- Special-purpose code in `build/make/Makefile.in` is removed in favor of creating a new type=script package `sage_system_blas_facade`, whose `spkg-install` does the installation to `SAGE_LOCAL`.
+- Code in `build/make/Makefile.in` is removed in favor of creating a new type=script package `sage_system_blas_facade`, whose `spkg-install` does the installation to `SAGE_LOCAL`.
 - `openblas/spkg-configure.m4` sets `SAGE_BLAS=sage_system_blas_facade` if PC files are generated.
 
``````




---

archive/issue_comments_567178.json:
```json
{
    "body": "<a id='comment:27'></a>\nIs my ticket handling the `gsl.pc` correctly? Which packages use this file?",
    "created_at": "2020-03-07T03:32:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567178",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>
Is my ticket handling the `gsl.pc` correctly? Which packages use this file?



---

archive/issue_events_083248.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "rename": {
        "from": "Move .pc file from src/ to build/, clean generated *.pc files at 'make distclean'",
        "to": "Move .pc file from src/ to build/, clean generated *.pc files at 'make distclean', fix 'permission denied' errors"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29082#event-83248"
}
```



---

archive/issue_comments_567179.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,22 @@\n #29003 introduced 2-stage installation of generated *.pc files, \n via `src/lib/pkgconfig`- but did not provide a way to clean them up at all. And this is a problem (cf. e.g. #29071).\n  \n+Also, in some installations, repeated installations this code leads to 'permission denied' errors when trying to override read-only files:\n+\n+```\n+  [openblas-0.3.6.p0]   Wrote /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/var/tmp/sage/build/openblas-0.3.6.p0/inst/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/lib/pkgconfig/blas.pc\n+  [openblas-0.3.6.p0]   Wrote /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/var/tmp/sage/build/openblas-0.3.6.p0/inst/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/lib/pkgconfig/cblas.pc\n+  [openblas-0.3.6.p0]   Wrote /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/var/tmp/sage/build/openblas-0.3.6.p0/inst/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/lib/pkgconfig/lapack.pc\n+  [openblas-0.3.6.p0]   \n+  [openblas-0.3.6.p0]   real\t8m40.259s\n+  [openblas-0.3.6.p0]   user\t45m2.739s\n+  [openblas-0.3.6.p0]   sys\t5m48.754s\n+  [openblas-0.3.6.p0]   Copying package files from temporary location /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/var/tmp/sage/build/openblas-0.3.6.p0/inst to /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local\n+  [openblas-0.3.6.p0]   cp: /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/./lib/pkgconfig/cblas.pc: Permission denied\n+  [openblas-0.3.6.p0]   cp: /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/./lib/pkgconfig/blas.pc: Permission denied\n+  [openblas-0.3.6.p0]   cp: /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/./lib/pkgconfig/lapack.pc: Permission denied\n+```\n+\n This ticket revises the 2-stage installation as follows:\n - Because the generated files are for sage-the-distribution, not sagelib, they belong into `build`, not `src`.\n - Because `configure` (`config.status`) creates them, `make distclean` cleans them.\n``````\n",
    "created_at": "2020-03-14T01:10:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567179",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,22 @@
 #29003 introduced 2-stage installation of generated *.pc files, 
 via `src/lib/pkgconfig`- but did not provide a way to clean them up at all. And this is a problem (cf. e.g. #29071).
  
+Also, in some installations, repeated installations this code leads to 'permission denied' errors when trying to override read-only files:
+
+```
+  [openblas-0.3.6.p0]   Wrote /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/var/tmp/sage/build/openblas-0.3.6.p0/inst/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/lib/pkgconfig/blas.pc
+  [openblas-0.3.6.p0]   Wrote /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/var/tmp/sage/build/openblas-0.3.6.p0/inst/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/lib/pkgconfig/cblas.pc
+  [openblas-0.3.6.p0]   Wrote /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/var/tmp/sage/build/openblas-0.3.6.p0/inst/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/lib/pkgconfig/lapack.pc
+  [openblas-0.3.6.p0]   
+  [openblas-0.3.6.p0]   real	8m40.259s
+  [openblas-0.3.6.p0]   user	45m2.739s
+  [openblas-0.3.6.p0]   sys	5m48.754s
+  [openblas-0.3.6.p0]   Copying package files from temporary location /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/var/tmp/sage/build/openblas-0.3.6.p0/inst to /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local
+  [openblas-0.3.6.p0]   cp: /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/./lib/pkgconfig/cblas.pc: Permission denied
+  [openblas-0.3.6.p0]   cp: /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/./lib/pkgconfig/blas.pc: Permission denied
+  [openblas-0.3.6.p0]   cp: /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/./lib/pkgconfig/lapack.pc: Permission denied
+```
+
 This ticket revises the 2-stage installation as follows:
 - Because the generated files are for sage-the-distribution, not sagelib, they belong into `build`, not `src`.
 - Because `configure` (`config.status`) creates them, `make distclean` cleans them.
``````




---

archive/issue_comments_567180.json:
```json
{
    "body": "<a id='comment:29'></a>\nI also don't quite understand the need to create a special script package, instead of adjusting `build/make/Makefile.in`.\n\nIs there a technical problem?",
    "created_at": "2020-03-19T03:31:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567180",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:29'></a>
I also don't quite understand the need to create a special script package, instead of adjusting `build/make/Makefile.in`.

Is there a technical problem?



---

archive/issue_comments_567181.json:
```json
{
    "body": "<a id='comment:30'></a>\nIt seemed to be an elegant solution when I wrote this a month ago",
    "created_at": "2020-03-19T03:49:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567181",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:30'></a>
It seemed to be an elegant solution when I wrote this a month ago



---

archive/issue_comments_567182.json:
```json
{
    "body": "<a id='comment:31'></a>\nIt seems that your package handles more that blas/lapack pc files, no?\nPerhaps it just is wrongly named?",
    "created_at": "2020-03-19T03:58:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567182",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:31'></a>
It seems that your package handles more that blas/lapack pc files, no?
Perhaps it just is wrongly named?



---

archive/issue_comments_567183.json:
```json
{
    "body": "<a id='comment:32'></a>\nThat's basically my question regarding gsl.pc above, I guess.",
    "created_at": "2020-03-19T03:59:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567183",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:32'></a>
That's basically my question regarding gsl.pc above, I guess.



---

archive/issue_comments_567184.json:
```json
{
    "body": "<a id='comment:33'></a>\nthere is also a bug: PKG_CONFIG_PATH is pointing to the wrong directory, so these\nnewly installed pc files are not found:\n\n```\n(sage-sh) dima@fedora:sagetrac-mirror$ echo $PKG_CONFIG_PATH\n/home/dima/sagetrac-mirror/local/lib/pkgconfig:.\n(sage-sh) dima@fedora:sagetrac-mirror$ find . -name cblas.pc\n./build/pkgs/sage_system_blas_facade/src/cblas.pc\n./src/lib/pkgconfig/cblas.pc\n```",
    "created_at": "2020-03-19T04:11:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567184",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:33'></a>
there is also a bug: PKG_CONFIG_PATH is pointing to the wrong directory, so these
newly installed pc files are not found:

```
(sage-sh) dima@fedora:sagetrac-mirror$ echo $PKG_CONFIG_PATH
/home/dima/sagetrac-mirror/local/lib/pkgconfig:.
(sage-sh) dima@fedora:sagetrac-mirror$ find . -name cblas.pc
./build/pkgs/sage_system_blas_facade/src/cblas.pc
./src/lib/pkgconfig/cblas.pc
```



---

archive/issue_comments_567185.json:
```json
{
    "body": "<a id='comment:34'></a>\noops, I mean, they are just not installed at all.\nPKG_CONFIG_PATH is correct, but pc files are not there, or anywhere, except the old location",
    "created_at": "2020-03-19T04:14:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567185",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:34'></a>
oops, I mean, they are just not installed at all.
PKG_CONFIG_PATH is correct, but pc files are not there, or anywhere, except the old location



---

archive/issue_comments_567186.json:
```json
{
    "body": "<a id='comment:35'></a>\nFeel free to make changes -- otherwise I can look into it tomorrow",
    "created_at": "2020-03-19T04:29:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567186",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:35'></a>
Feel free to make changes -- otherwise I can look into it tomorrow



---

archive/issue_comments_567187.json:
```json
{
    "body": "<a id='comment:36'></a>\nWhat does `build/pkgs/sage_system_blas_facade/spkg-install` look like on your machine?",
    "created_at": "2020-03-19T04:34:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567187",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:36'></a>
What does `build/pkgs/sage_system_blas_facade/spkg-install` look like on your machine?



---

archive/issue_comments_567188.json:
```json
{
    "body": "<a id='comment:37'></a>\nhere it is:\n\n{{{#! /usr/bin/env bash\nPCFILES=\"blas.pccblas.pclapack.pc\"\nSAGE_PKGCONFIG=\"$SAGE_LOCAL/lib/pkgconfig\"\nmkdir -p \"$SAGE_PKGCONFIG\"\nif [ -n \"$PCFILES\" ]; then\n   cd build/pkgs/sage_system_blas_facade/src && cp -P $PCFILES \"$SAGE_PKGCONFIG\"\nfi\n```\nalso note that the original openblas.pc is in SAGE_ROOT",
    "created_at": "2020-03-19T04:40:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567188",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:37'></a>
here it is:

{{{#! /usr/bin/env bash
PCFILES="blas.pccblas.pclapack.pc"
SAGE_PKGCONFIG="$SAGE_LOCAL/lib/pkgconfig"
mkdir -p "$SAGE_PKGCONFIG"
if [ -n "$PCFILES" ]; then
   cd build/pkgs/sage_system_blas_facade/src && cp -P $PCFILES "$SAGE_PKGCONFIG"
fi
```
also note that the original openblas.pc is in SAGE_ROOT



---

archive/issue_comments_567189.json:
```json
{
    "body": "<a id='comment:38'></a>\nLooks like some spaces are missing",
    "created_at": "2020-03-19T04:58:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567189",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:38'></a>
Looks like some spaces are missing



---

archive/issue_comments_567190.json:
```json
{
    "body": "<a id='comment:39'></a>\nindeed, one needs\n\n```diff\n--- a/build/pkgs/openblas/spkg-configure.m4\n+++ b/build/pkgs/openblas/spkg-configure.m4\n@@ -37,7 +37,7 @@ SAGE_SPKG_CONFIGURE([openblas], [dnl CHECK\n        m4_foreach([blaslibnam], [blas, cblas, lapack], [\n         AS_IF([test x$sage_install_]blaslibnam[_pc = xyes], [\n          AC_CONFIG_LINKS([build/pkgs/sage_system_blas_facade/src/]blaslibnam[.pc:$OPENBLASPCDIR/openblas.pc])\n-         AS_VAR_APPEND([SAGE_SYSTEM_BLAS_FACADE_PC_FILES], blaslibnam[.pc])])\n+         AS_VAR_APPEND([SAGE_SYSTEM_BLAS_FACADE_PC_FILES], [blaslibnam[.pc]' '])])\n          AC_SUBST([SAGE_BLAS], [sage_system_blas_facade])\n        ])\n     ])\n```",
    "created_at": "2020-03-19T06:47:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567190",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:39'></a>
indeed, one needs

```diff
--- a/build/pkgs/openblas/spkg-configure.m4
+++ b/build/pkgs/openblas/spkg-configure.m4
@@ -37,7 +37,7 @@ SAGE_SPKG_CONFIGURE([openblas], [dnl CHECK
        m4_foreach([blaslibnam], [blas, cblas, lapack], [
         AS_IF([test x$sage_install_]blaslibnam[_pc = xyes], [
          AC_CONFIG_LINKS([build/pkgs/sage_system_blas_facade/src/]blaslibnam[.pc:$OPENBLASPCDIR/openblas.pc])
-         AS_VAR_APPEND([SAGE_SYSTEM_BLAS_FACADE_PC_FILES], blaslibnam[.pc])])
+         AS_VAR_APPEND([SAGE_SYSTEM_BLAS_FACADE_PC_FILES], [blaslibnam[.pc]' '])])
          AC_SUBST([SAGE_BLAS], [sage_system_blas_facade])
        ])
     ])
```



---

archive/issue_comments_567191.json:
```json
{
    "body": "<a id='comment:40'></a>\nbut this does not make any difference. As far as I can see, `spkg-install` of `sage_system_blas_facade` never gets run - I'm lost in untangling the reason for this.",
    "created_at": "2020-03-19T13:39:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567191",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:40'></a>
but this does not make any difference. As far as I can see, `spkg-install` of `sage_system_blas_facade` never gets run - I'm lost in untangling the reason for this.



---

archive/issue_comments_567192.json:
```json
{
    "body": "<a id='comment:41'></a>\nOK, I'll take care of it later today.",
    "created_at": "2020-03-19T13:44:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567192",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:41'></a>
OK, I'll take care of it later today.



---

archive/issue_comments_567193.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2020-03-19T15:11:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567193",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_567194.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#29287\"",
    "created_at": "2020-03-20T22:07:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567194",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#29287"



---

archive/issue_comments_567195.json:
```json
{
    "body": "<a id='comment:44'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n|                                                                                                                                           |                                                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|\n|[d1fd7a7](https://github.com/sagemath/sagetrac-mirror/commit/d1fd7a73c077f122847b27ef779bde44f9efc430)|`src/bin/sage-list-packages: Remove use of type=pip`|\n|[75175db](https://github.com/sagemath/sagetrac-mirror/commit/75175db466a0ef461b656fdb1b7b40e7479981f7)|`sage.misc.package.list_packages: For unversioned packages, use 'none' as version`|\n|[d3d78f4](https://github.com/sagemath/sagetrac-mirror/commit/d3d78f47429f6d033abdfa47e32453d980f995e5)|`m4/sage_spkg_collect.m4: Fix up collection of dependencies`|\n|[dbb9860](https://github.com/sagemath/sagetrac-mirror/commit/dbb9860cb41006fbe4108447f4f01e26ed8f0bdd)|`build/pkgs/texlive/spkg-install: Fix up path`|\n|[8b1d5ca](https://github.com/sagemath/sagetrac-mirror/commit/8b1d5ca6074561315be14ea4f072149b88fe2fd0)|`trac 29287: rewording documentation`|\n|[057a66b](https://github.com/sagemath/sagetrac-mirror/commit/057a66bdd05ad75539f2bdbd27561af3f0d57d65)|`Make pyopenssl a pip package`|\n|[8f6323e](https://github.com/sagemath/sagetrac-mirror/commit/8f6323ed8af19d0c1301c65e41d3b219a8fa7a43)|`src/sage/env.py: Fix up doctest on starting sage without SAGE_* variables`|\n|[0919086](https://github.com/sagemath/sagetrac-mirror/commit/091908665ae681b6f9cc1f491d4801acbdfb89ae)|`trac 29287: doc fixes`|\n|[6781790](https://github.com/sagemath/sagetrac-mirror/commit/67817908a4b8956b7a78d15295d1af3c0865bb82)|`Move all BLAS PC file installation logic to new script package sage_sage_system_blas_facade`|\n|[30d3b82](https://github.com/sagemath/sagetrac-mirror/commit/30d3b8245cbcee8c7b629dfebc9de213e89f7c86)|`build/pkgs/openblas/spkg-configure.m4: Separate library names by spaces`|",
    "created_at": "2020-03-20T22:44:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567195",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:44'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
|                                                                                                                                           |                                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|
|[d1fd7a7](https://github.com/sagemath/sagetrac-mirror/commit/d1fd7a73c077f122847b27ef779bde44f9efc430)|`src/bin/sage-list-packages: Remove use of type=pip`|
|[75175db](https://github.com/sagemath/sagetrac-mirror/commit/75175db466a0ef461b656fdb1b7b40e7479981f7)|`sage.misc.package.list_packages: For unversioned packages, use 'none' as version`|
|[d3d78f4](https://github.com/sagemath/sagetrac-mirror/commit/d3d78f47429f6d033abdfa47e32453d980f995e5)|`m4/sage_spkg_collect.m4: Fix up collection of dependencies`|
|[dbb9860](https://github.com/sagemath/sagetrac-mirror/commit/dbb9860cb41006fbe4108447f4f01e26ed8f0bdd)|`build/pkgs/texlive/spkg-install: Fix up path`|
|[8b1d5ca](https://github.com/sagemath/sagetrac-mirror/commit/8b1d5ca6074561315be14ea4f072149b88fe2fd0)|`trac 29287: rewording documentation`|
|[057a66b](https://github.com/sagemath/sagetrac-mirror/commit/057a66bdd05ad75539f2bdbd27561af3f0d57d65)|`Make pyopenssl a pip package`|
|[8f6323e](https://github.com/sagemath/sagetrac-mirror/commit/8f6323ed8af19d0c1301c65e41d3b219a8fa7a43)|`src/sage/env.py: Fix up doctest on starting sage without SAGE_* variables`|
|[0919086](https://github.com/sagemath/sagetrac-mirror/commit/091908665ae681b6f9cc1f491d4801acbdfb89ae)|`trac 29287: doc fixes`|
|[6781790](https://github.com/sagemath/sagetrac-mirror/commit/67817908a4b8956b7a78d15295d1af3c0865bb82)|`Move all BLAS PC file installation logic to new script package sage_sage_system_blas_facade`|
|[30d3b82](https://github.com/sagemath/sagetrac-mirror/commit/30d3b8245cbcee8c7b629dfebc9de213e89f7c86)|`build/pkgs/openblas/spkg-configure.m4: Separate library names by spaces`|



---

archive/issue_comments_567196.json:
```json
{
    "body": "Changing commit from \"d6b5677f0a51dd790377482f4608fd041fb0fbbe\" to \"30d3b8245cbcee8c7b629dfebc9de213e89f7c86\"",
    "created_at": "2020-03-20T22:44:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567196",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d6b5677f0a51dd790377482f4608fd041fb0fbbe" to "30d3b8245cbcee8c7b629dfebc9de213e89f7c86"



---

archive/issue_comments_567197.json:
```json
{
    "body": "<a id='comment:45'></a>\nBranch is on top of #29287",
    "created_at": "2020-03-20T22:44:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567197",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:45'></a>
Branch is on top of #29287



---

archive/issue_comments_567198.json:
```json
{
    "body": "<a id='comment:46'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------|\n|[b68595e](https://github.com/sagemath/sagetrac-mirror/commit/b68595e74582eacd050b93312610f0ece11d2a93)|`Change type`|\n|[7fd5e31](https://github.com/sagemath/sagetrac-mirror/commit/7fd5e31fa51e0f9a662848450dbae37732468d6f)|`fixup`|",
    "created_at": "2020-03-21T02:05:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567198",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:46'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------|
|[b68595e](https://github.com/sagemath/sagetrac-mirror/commit/b68595e74582eacd050b93312610f0ece11d2a93)|`Change type`|
|[7fd5e31](https://github.com/sagemath/sagetrac-mirror/commit/7fd5e31fa51e0f9a662848450dbae37732468d6f)|`fixup`|



---

archive/issue_comments_567199.json:
```json
{
    "body": "Changing commit from \"30d3b8245cbcee8c7b629dfebc9de213e89f7c86\" to \"7fd5e31fa51e0f9a662848450dbae37732468d6f\"",
    "created_at": "2020-03-21T02:05:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567199",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "30d3b8245cbcee8c7b629dfebc9de213e89f7c86" to "7fd5e31fa51e0f9a662848450dbae37732468d6f"



---

archive/issue_comments_567200.json:
```json
{
    "body": "Changing commit from \"7fd5e31fa51e0f9a662848450dbae37732468d6f\" to \"b493a32df5c9bb08613e370759412e55a2501676\"",
    "created_at": "2020-03-21T02:08:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567200",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7fd5e31fa51e0f9a662848450dbae37732468d6f" to "b493a32df5c9bb08613e370759412e55a2501676"



---

archive/issue_comments_567201.json:
```json
{
    "body": "<a id='comment:47'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|\n|[b493a32](https://github.com/sagemath/sagetrac-mirror/commit/b493a32df5c9bb08613e370759412e55a2501676)|`install sage_system_blas_facade`|",
    "created_at": "2020-03-21T02:08:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567201",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:47'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|
|[b493a32](https://github.com/sagemath/sagetrac-mirror/commit/b493a32df5c9bb08613e370759412e55a2501676)|`install sage_system_blas_facade`|



---

archive/issue_events_083249.json:
```json
{
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "label": "blocker",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29082#event-83249"
}
```



---

archive/issue_comments_567202.json:
```json
{
    "body": "<a id='comment:48'></a>\nthis prevents building on Fedora after distclean",
    "created_at": "2020-03-21T08:13:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567202",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:48'></a>
this prevents building on Fedora after distclean



---

archive/issue_comments_567203.json:
```json
{
    "body": "<a id='comment:49'></a>\nI'm working on a simpler version of this ticket.",
    "created_at": "2020-03-21T12:36:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567203",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:49'></a>
I'm working on a simpler version of this ticket.



---

archive/issue_comments_567204.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,7 @@\n #29003 introduced 2-stage installation of generated *.pc files, \n via `src/lib/pkgconfig`- but did not provide a way to clean them up at all. And this is a problem (cf. e.g. #29071).\n  \n-Also, in some installations, repeated installations this code leads to 'permission denied' errors when trying to override read-only files:\n+Also, in some installations, repeated installations this code leads to 'permission denied' errors when trying to overwrite read-only files:\n \n ```\n   [openblas-0.3.6.p0]   Wrote /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/var/tmp/sage/build/openblas-0.3.6.p0/inst/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/lib/pkgconfig/blas.pc\n@@ -20,6 +20,7 @@\n This ticket revises the 2-stage installation as follows:\n - Because the generated files are for sage-the-distribution, not sagelib, they belong into `build`, not `src`.\n - Because `configure` (`config.status`) creates them, `make distclean` cleans them.\n+- The pc files installed into `SAGE_LOCAL` are uninstalled when necessary - or it is ensured that they are properly overwritten.\n - Code in `build/make/Makefile.in` is removed in favor of creating a new type=script package `sage_system_blas_facade`, whose `spkg-install` does the installation to `SAGE_LOCAL`.\n - `openblas/spkg-configure.m4` sets `SAGE_BLAS=sage_system_blas_facade` if PC files are generated.\n \n``````\n",
    "created_at": "2020-03-21T12:57:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567204",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,7 @@
 #29003 introduced 2-stage installation of generated *.pc files, 
 via `src/lib/pkgconfig`- but did not provide a way to clean them up at all. And this is a problem (cf. e.g. #29071).
  
-Also, in some installations, repeated installations this code leads to 'permission denied' errors when trying to override read-only files:
+Also, in some installations, repeated installations this code leads to 'permission denied' errors when trying to overwrite read-only files:
 
 ```
   [openblas-0.3.6.p0]   Wrote /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/var/tmp/sage/build/openblas-0.3.6.p0/inst/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/lib/pkgconfig/blas.pc
@@ -20,6 +20,7 @@
 This ticket revises the 2-stage installation as follows:
 - Because the generated files are for sage-the-distribution, not sagelib, they belong into `build`, not `src`.
 - Because `configure` (`config.status`) creates them, `make distclean` cleans them.
+- The pc files installed into `SAGE_LOCAL` are uninstalled when necessary - or it is ensured that they are properly overwritten.
 - Code in `build/make/Makefile.in` is removed in favor of creating a new type=script package `sage_system_blas_facade`, whose `spkg-install` does the installation to `SAGE_LOCAL`.
 - `openblas/spkg-configure.m4` sets `SAGE_BLAS=sage_system_blas_facade` if PC files are generated.
 
``````




---

archive/issue_comments_567205.json:
```json
{
    "body": "Changing dependencies from \"#29287\" to \"\"",
    "created_at": "2020-03-21T15:52:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567205",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29287" to ""



---

archive/issue_comments_567206.json:
```json
{
    "body": "Changing commit from \"b493a32df5c9bb08613e370759412e55a2501676\" to \"705da6a06eaa69613f0c25149f7e9e2d21833371\"",
    "created_at": "2020-03-21T18:30:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567206",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b493a32df5c9bb08613e370759412e55a2501676" to "705da6a06eaa69613f0c25149f7e9e2d21833371"



---

archive/issue_comments_567207.json:
```json
{
    "body": "<a id='comment:52'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|\n|[705da6a](https://github.com/sagemath/sagetrac-mirror/commit/705da6a06eaa69613f0c25149f7e9e2d21833371)|`Link/generate pc files in make, not configure`|",
    "created_at": "2020-03-21T18:30:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567207",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:52'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|
|[705da6a](https://github.com/sagemath/sagetrac-mirror/commit/705da6a06eaa69613f0c25149f7e9e2d21833371)|`Link/generate pc files in make, not configure`|



---

archive/issue_comments_567208.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-03-21T18:31:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567208",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_567209.json:
```json
{
    "body": "Changing commit from \"705da6a06eaa69613f0c25149f7e9e2d21833371\" to \"d86cd33c67e253dd17992a8a470a6391663892e2\"",
    "created_at": "2020-03-21T18:34:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567209",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "705da6a06eaa69613f0c25149f7e9e2d21833371" to "d86cd33c67e253dd17992a8a470a6391663892e2"



---

archive/issue_comments_567210.json:
```json
{
    "body": "<a id='comment:54'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------|\n|[d86cd33](https://github.com/sagemath/sagetrac-mirror/commit/d86cd33c67e253dd17992a8a470a6391663892e2)|`fixup`|",
    "created_at": "2020-03-21T18:34:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567210",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:54'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |       |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------|
|[d86cd33](https://github.com/sagemath/sagetrac-mirror/commit/d86cd33c67e253dd17992a8a470a6391663892e2)|`fixup`|



---

archive/issue_comments_567211.json:
```json
{
    "body": "<a id='comment:55'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------|\n|[f5b4f62](https://github.com/sagemath/sagetrac-mirror/commit/f5b4f625d6e3001f07123974b4d1f5356545ae03)|`Makefile [misc-clean]: No need to remove build/lib/pkgconfig`|",
    "created_at": "2020-03-21T19:33:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567211",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:55'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------|
|[f5b4f62](https://github.com/sagemath/sagetrac-mirror/commit/f5b4f625d6e3001f07123974b4d1f5356545ae03)|`Makefile [misc-clean]: No need to remove build/lib/pkgconfig`|



---

archive/issue_comments_567212.json:
```json
{
    "body": "Changing commit from \"d86cd33c67e253dd17992a8a470a6391663892e2\" to \"f5b4f625d6e3001f07123974b4d1f5356545ae03\"",
    "created_at": "2020-03-21T19:33:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567212",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d86cd33c67e253dd17992a8a470a6391663892e2" to "f5b4f625d6e3001f07123974b4d1f5356545ae03"



---

archive/issue_comments_567213.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-03-22T02:13:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567213",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_567214.json:
```json
{
    "body": "<a id='comment:56'></a>\nError with gsl.pc for `local-homebrew-macos-standard` - https://github.com/mkoeppe/sage/runs/524361197",
    "created_at": "2020-03-22T02:13:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567214",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:56'></a>
Error with gsl.pc for `local-homebrew-macos-standard` - https://github.com/mkoeppe/sage/runs/524361197



---

archive/issue_comments_567215.json:
```json
{
    "body": "<a id='comment:57'></a>\nalso `ubuntu-bionic-standard` (sagelib and cvxopt)",
    "created_at": "2020-03-22T02:15:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567215",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:57'></a>
also `ubuntu-bionic-standard` (sagelib and cvxopt)



---

archive/issue_comments_567216.json:
```json
{
    "body": "<a id='comment:58'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|\n|[2a38a16](https://github.com/sagemath/sagetrac-mirror/commit/2a38a167ab0c6aa3f39d704eb4087d9adf36c85a)|`build/pkgs/gsl/spkg-configure.m4: Quoting fix`|",
    "created_at": "2020-03-22T02:59:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567216",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:58'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|
|[2a38a16](https://github.com/sagemath/sagetrac-mirror/commit/2a38a167ab0c6aa3f39d704eb4087d9adf36c85a)|`build/pkgs/gsl/spkg-configure.m4: Quoting fix`|



---

archive/issue_comments_567217.json:
```json
{
    "body": "Changing commit from \"f5b4f625d6e3001f07123974b4d1f5356545ae03\" to \"2a38a167ab0c6aa3f39d704eb4087d9adf36c85a\"",
    "created_at": "2020-03-22T02:59:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567217",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f5b4f625d6e3001f07123974b4d1f5356545ae03" to "2a38a167ab0c6aa3f39d704eb4087d9adf36c85a"



---

archive/issue_comments_567218.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-03-22T02:59:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567218",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_567219.json:
```json
{
    "body": "<a id='comment:60'></a>\nTests run at https://github.com/mkoeppe/sage/actions/runs/60588138",
    "created_at": "2020-03-22T02:59:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567219",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:60'></a>
Tests run at https://github.com/mkoeppe/sage/actions/runs/60588138



---

archive/issue_comments_567220.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -17,10 +17,12 @@\n   [openblas-0.3.6.p0]   cp: /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/./lib/pkgconfig/lapack.pc: Permission denied\n ```\n \n-This ticket revises the 2-stage installation as follows:\n-- Because the generated files are for sage-the-distribution, not sagelib, they belong into `build`, not `src`.\n-- Because `configure` (`config.status`) creates them, `make distclean` cleans them.\n-- The pc files installed into `SAGE_LOCAL` are uninstalled when necessary - or it is ensured that they are properly overwritten.\n-- Code in `build/make/Makefile.in` is removed in favor of creating a new type=script package `sage_system_blas_facade`, whose `spkg-install` does the installation to `SAGE_LOCAL`.\n-- `openblas/spkg-configure.m4` sets `SAGE_BLAS=sage_system_blas_facade` if PC files are generated.\n+This ticket revises the installation as follows:\n \n+- `configure` no longer creates .pc files in the build tree\n+- Instead it creates rules in `make/Makefile` that create the .pc files in `SAGE_LOCAL`.\n+- Before pc files are installed into `SAGE_LOCAL`, the targets are removed, to avoid permission problems\n+\n+This ticket does not solve everything. There may still be problems when switching from a system library to an spkg-provided library. We will use the follow-up ticket #29387 (Complete solution for installing the generated *.pc files) to address this problem.\n+\n+\n``````\n",
    "created_at": "2020-03-22T03:41:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567220",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -17,10 +17,12 @@
   [openblas-0.3.6.p0]   cp: /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-minimal/local/./lib/pkgconfig/lapack.pc: Permission denied
 ```
 
-This ticket revises the 2-stage installation as follows:
-- Because the generated files are for sage-the-distribution, not sagelib, they belong into `build`, not `src`.
-- Because `configure` (`config.status`) creates them, `make distclean` cleans them.
-- The pc files installed into `SAGE_LOCAL` are uninstalled when necessary - or it is ensured that they are properly overwritten.
-- Code in `build/make/Makefile.in` is removed in favor of creating a new type=script package `sage_system_blas_facade`, whose `spkg-install` does the installation to `SAGE_LOCAL`.
-- `openblas/spkg-configure.m4` sets `SAGE_BLAS=sage_system_blas_facade` if PC files are generated.
+This ticket revises the installation as follows:
 
+- `configure` no longer creates .pc files in the build tree
+- Instead it creates rules in `make/Makefile` that create the .pc files in `SAGE_LOCAL`.
+- Before pc files are installed into `SAGE_LOCAL`, the targets are removed, to avoid permission problems
+
+This ticket does not solve everything. There may still be problems when switching from a system library to an spkg-provided library. We will use the follow-up ticket #29387 (Complete solution for installing the generated *.pc files) to address this problem.
+
+
``````




---

archive/issue_comments_567221.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Dima Pasechnik\"",
    "created_at": "2020-03-22T09:10:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567221",
    "user": "https://github.com/dimpase"
}
```

Changing reviewer from "" to "Dima Pasechnik"



---

archive/issue_comments_567222.json:
```json
{
    "body": "<a id='comment:62'></a>\nOK, this does the needed job. Perhaps the make rules could be made less explicit, but OK.",
    "created_at": "2020-03-22T09:10:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567222",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:62'></a>
OK, this does the needed job. Perhaps the make rules could be made less explicit, but OK.



---

archive/issue_comments_567223.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-03-22T09:10:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567223",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_567224.json:
```json
{
    "body": "<a id='comment:63'></a>\nThanks!",
    "created_at": "2020-03-22T09:27:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567224",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:63'></a>
Thanks!



---

archive/issue_events_083250.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "rename": {
        "from": "Move .pc file from src/ to build/, clean generated *.pc files at 'make distclean', fix 'permission denied' errors",
        "to": "Do not stage .pc files in src/lib/, clean old generated *.pc files at 'make distclean', fix 'permission denied' errors"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29082#event-83250"
}
```



---

archive/issue_comments_567225.json:
```json
{
    "body": "<a id='comment:65'></a>\nMake distclean deletes `src/lib/pkgconfig/.gitignore`",
    "created_at": "2020-03-23T23:22:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567225",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:65'></a>
Make distclean deletes `src/lib/pkgconfig/.gitignore`



---

archive/issue_comments_567226.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-03-23T23:22:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567226",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_567227.json:
```json
{
    "body": "<a id='comment:66'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------|\n|[329843b](https://github.com/sagemath/sagetrac-mirror/commit/329843baa9cecfb751e8afdb6b666f01930f0bf0)|`Ignore /src/lib/pkgconfig using top-level .gitignore`|",
    "created_at": "2020-03-23T23:26:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567227",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:66'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------|
|[329843b](https://github.com/sagemath/sagetrac-mirror/commit/329843baa9cecfb751e8afdb6b666f01930f0bf0)|`Ignore /src/lib/pkgconfig using top-level .gitignore`|



---

archive/issue_comments_567228.json:
```json
{
    "body": "Changing commit from \"2a38a167ab0c6aa3f39d704eb4087d9adf36c85a\" to \"329843baa9cecfb751e8afdb6b666f01930f0bf0\"",
    "created_at": "2020-03-23T23:26:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567228",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2a38a167ab0c6aa3f39d704eb4087d9adf36c85a" to "329843baa9cecfb751e8afdb6b666f01930f0bf0"



---

archive/issue_comments_567229.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-03-23T23:27:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567229",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_567230.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-03-24T03:32:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567230",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_567231.json:
```json
{
    "body": "<a id='comment:68'></a>\nok. sorry for overlooking this.",
    "created_at": "2020-03-24T03:32:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567231",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:68'></a>
ok. sorry for overlooking this.



---

archive/issue_comments_567232.json:
```json
{
    "body": "<a id='comment:69'></a>\nThanks",
    "created_at": "2020-03-24T03:33:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567232",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:69'></a>
Thanks



---

archive/issue_comments_567233.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-03-29T00:24:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567233",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_083251.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-03-29T00:24:26Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29082#event-83251"
}
```



---

archive/issue_comments_567234.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/move__pc_file_from_src__to_build___clean_generated___pc_files_at__make_distclean_\" to \"329843baa9cecfb751e8afdb6b666f01930f0bf0\"",
    "created_at": "2020-03-29T00:24:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29082",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29082#issuecomment-567234",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/move__pc_file_from_src__to_build___clean_generated___pc_files_at__make_distclean_" to "329843baa9cecfb751e8afdb6b666f01930f0bf0"
