# Issue 29415: tox.ini: Add environment local-conda

archive/issues_029178.json:
```json
{
    "body": "This environment creates an isolated conda installation within the tox environment directory,\nsimilar to `local-homebrew`.\n\nTo run:\n\n```\n   MAKE=\"make -j8\" tox -e local-conda-forge-standard\n   MAKE=\"make -j8\" tox -e local-conda-forge-minimal\n```\n\nDepends on #29087\n\n**CC:**  @dimpase @jhpalmieri @isuruf @saraedum @kliem\n\n**Branch:** [a61c48e04b0c463b02fb47903454a94133b3a560](https://github.com/sagemath/sagetrac-mirror/commit/a61c48e04b0c463b02fb47903454a94133b3a560)\n\n**Reviewer:** Isuru Fernando\n\n**Author:** Matthias Koeppe\n\nIssue created by migration from https://trac.sagemath.org/ticket/29415\n\n",
    "closed_at": "2020-04-09T22:44:44Z",
    "created_at": "2020-03-27T15:24:09Z",
    "labels": [
        "component: porting",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.1",
    "title": "tox.ini: Add environment local-conda",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/29415",
    "user": "https://github.com/mkoeppe"
}
```
This environment creates an isolated conda installation within the tox environment directory,
similar to `local-homebrew`.

To run:

```
   MAKE="make -j8" tox -e local-conda-forge-standard
   MAKE="make -j8" tox -e local-conda-forge-minimal
```

Depends on #29087

**CC:**  @dimpase @jhpalmieri @isuruf @saraedum @kliem

**Branch:** [a61c48e04b0c463b02fb47903454a94133b3a560](https://github.com/sagemath/sagetrac-mirror/commit/a61c48e04b0c463b02fb47903454a94133b3a560)

**Reviewer:** Isuru Fernando

**Author:** Matthias Koeppe

Issue created by migration from https://trac.sagemath.org/ticket/29415





---

archive/issue_comments_464799.json:
```json
{
    "body": "**Branch:** [u/mkoeppe/tox_ini__add_environment_local_conda](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/tox_ini__add_environment_local_conda)",
    "created_at": "2020-03-28T21:33:42Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29415#issuecomment-464799",
    "user": "https://github.com/mkoeppe"
}
```

**Branch:** [u/mkoeppe/tox_ini__add_environment_local_conda](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/tox_ini__add_environment_local_conda)



---

archive/issue_comments_464800.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/65834f04ef89d9d29eaf506e62384149201d2040\">65834f0</a></td><td><code>Reorder systems so debian-sid comes after other debians</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d95a6885ce70ace12e60252dc05b9899257fcd8f\">d95a688</a></td><td><code>tox.ini [ubuntu-focal]: Use IGNORE_MISSING_SYSTEM_PACKAGES=yes because of libpython3.7-dev</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3896794928805d7aaba149885180eed533ff15f8\">3896794</a></td><td><code>Merge tag '9.1.beta8' into t/29354/tox_ini__add_slackware_environments</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bda9ebd0572f000d5bc3141ff06e2d24ac621412\">bda9ebd</a></td><td><code>Add slackware package info</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fbb73933b72f189a654beb96e8cac0afc7d975a8\">fbb7393</a></td><td><code>Fixup packages</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cfcd8f285facfd1c1d9d21efea5cd1759552ac31\">cfcd8f2</a></td><td><code>build/bin/sage-guess-package-system, build/bin/sage-print-system-package-command: Handle slackware too</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/136feeb63f5fa2bea181790420f935b9cf492ac1\">136feeb</a></td><td><code>build/bin/sage-spkg: Show equivalent system packages for ALL distros</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9939051ef6326c46861c219fb4994144b4ae5ec9\">9939051</a></td><td><code>Merge branch 't/29354/tox_ini__add_slackware_environments' into t/29087/CI-gh-actions-tox-configure-build</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/818796ef7d68f09851a386decee83e8b35bdfd7f\">818796e</a></td><td><code>tox.ini: Add local-conda environments</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/36e1c9afe2379c243d02bd348adb75c720247f78\">36e1c9a</a></td><td><code>tox.yml: Add local-conda-forge</code></td></tr></table>\n",
    "created_at": "2020-03-28T21:37:14Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29415#issuecomment-464800",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
**Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/65834f04ef89d9d29eaf506e62384149201d2040">65834f0</a></td><td><code>Reorder systems so debian-sid comes after other debians</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d95a6885ce70ace12e60252dc05b9899257fcd8f">d95a688</a></td><td><code>tox.ini [ubuntu-focal]: Use IGNORE_MISSING_SYSTEM_PACKAGES=yes because of libpython3.7-dev</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3896794928805d7aaba149885180eed533ff15f8">3896794</a></td><td><code>Merge tag '9.1.beta8' into t/29354/tox_ini__add_slackware_environments</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bda9ebd0572f000d5bc3141ff06e2d24ac621412">bda9ebd</a></td><td><code>Add slackware package info</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fbb73933b72f189a654beb96e8cac0afc7d975a8">fbb7393</a></td><td><code>Fixup packages</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cfcd8f285facfd1c1d9d21efea5cd1759552ac31">cfcd8f2</a></td><td><code>build/bin/sage-guess-package-system, build/bin/sage-print-system-package-command: Handle slackware too</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/136feeb63f5fa2bea181790420f935b9cf492ac1">136feeb</a></td><td><code>build/bin/sage-spkg: Show equivalent system packages for ALL distros</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9939051ef6326c46861c219fb4994144b4ae5ec9">9939051</a></td><td><code>Merge branch 't/29354/tox_ini__add_slackware_environments' into t/29087/CI-gh-actions-tox-configure-build</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/818796ef7d68f09851a386decee83e8b35bdfd7f">818796e</a></td><td><code>tox.ini: Add local-conda environments</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/36e1c9afe2379c243d02bd348adb75c720247f78">36e1c9a</a></td><td><code>tox.yml: Add local-conda-forge</code></td></tr></table>




---

archive/issue_comments_464801.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,4 @@\n-This environment would create and use an isolated conda installation within the tox environment directory,\n+This environment creates an isolated conda installation within the tox environment directory,\n similar to `local-homebrew`.\n \n+\n``````\n",
    "created_at": "2020-03-28T21:37:14Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29415#issuecomment-464801",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,4 @@
-This environment would create and use an isolated conda installation within the tox environment directory,
+This environment creates an isolated conda installation within the tox environment directory,
 similar to `local-homebrew`.
 
+
``````




---

archive/issue_events_261839.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-28T21:37:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29415#event-261839"
}
```



---

archive/issue_comments_464802.json:
```json
{
    "body": "**Commit:** [36e1c9afe2379c243d02bd348adb75c720247f78](https://github.com/sagemath/sagetrac-mirror/commit/36e1c9afe2379c243d02bd348adb75c720247f78)",
    "created_at": "2020-03-28T21:37:14Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29415#issuecomment-464802",
    "user": "https://github.com/mkoeppe"
}
```

**Commit:** [36e1c9afe2379c243d02bd348adb75c720247f78](https://github.com/sagemath/sagetrac-mirror/commit/36e1c9afe2379c243d02bd348adb75c720247f78)



---

archive/issue_comments_464803.json:
```json
{
    "body": "**Author:** Matthias Koeppe",
    "created_at": "2020-03-28T21:37:14Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29415#issuecomment-464803",
    "user": "https://github.com/mkoeppe"
}
```

**Author:** Matthias Koeppe



---

archive/issue_comments_464804.json:
```json
{
    "body": "**Changing dependencies** from \"#29104\" to \"#29087\".",
    "created_at": "2020-03-28T21:37:28Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29415#issuecomment-464804",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#29104" to "#29087".



---

archive/issue_comments_464805.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,9 @@\n This environment creates an isolated conda installation within the tox environment directory,\n similar to `local-homebrew`.\n \n+To run:\n \n+```\n+   MAKE=\"make -j8\" tox -e local-conda-forge-standard\n+   MAKE=\"make -j8\" tox -e local-conda-forge-minimal\n+```\n``````\n",
    "created_at": "2020-03-29T01:19:27Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29415#issuecomment-464805",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,9 @@
 This environment creates an isolated conda installation within the tox environment directory,
 similar to `local-homebrew`.
 
+To run:
 
+```
+   MAKE="make -j8" tox -e local-conda-forge-standard
+   MAKE="make -j8" tox -e local-conda-forge-minimal
+```
``````




---

archive/issue_comments_464806.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a71ec3fd7bb082a8f6006ff542da34d46fa846fd\">a71ec3f</a></td><td><code>Use conda-install --yes --quiet</code></td></tr></table>\n",
    "created_at": "2020-03-29T02:45:50Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29415#issuecomment-464806",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a71ec3fd7bb082a8f6006ff542da34d46fa846fd">a71ec3f</a></td><td><code>Use conda-install --yes --quiet</code></td></tr></table>




---

archive/issue_comments_464807.json:
```json
{
    "body": "**Changing commit** from \"[36e1c9afe2379c243d02bd348adb75c720247f78](https://github.com/sagemath/sagetrac-mirror/commit/36e1c9afe2379c243d02bd348adb75c720247f78)\" to \"[a71ec3fd7bb082a8f6006ff542da34d46fa846fd](https://github.com/sagemath/sagetrac-mirror/commit/a71ec3fd7bb082a8f6006ff542da34d46fa846fd)\".",
    "created_at": "2020-03-29T02:45:50Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29415#issuecomment-464807",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[36e1c9afe2379c243d02bd348adb75c720247f78](https://github.com/sagemath/sagetrac-mirror/commit/36e1c9afe2379c243d02bd348adb75c720247f78)" to "[a71ec3fd7bb082a8f6006ff542da34d46fa846fd](https://github.com/sagemath/sagetrac-mirror/commit/a71ec3fd7bb082a8f6006ff542da34d46fa846fd)".



---

archive/issue_comments_464808.json:
```json
{
    "body": "**Changing commit** from \"[a71ec3fd7bb082a8f6006ff542da34d46fa846fd](https://github.com/sagemath/sagetrac-mirror/commit/a71ec3fd7bb082a8f6006ff542da34d46fa846fd)\" to \"[354cf90635e94587435c75e237a3d6ef8c806e06](https://github.com/sagemath/sagetrac-mirror/commit/354cf90635e94587435c75e237a3d6ef8c806e06)\".",
    "created_at": "2020-03-29T03:00:32Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29415#issuecomment-464808",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[a71ec3fd7bb082a8f6006ff542da34d46fa846fd](https://github.com/sagemath/sagetrac-mirror/commit/a71ec3fd7bb082a8f6006ff542da34d46fa846fd)" to "[354cf90635e94587435c75e237a3d6ef8c806e06](https://github.com/sagemath/sagetrac-mirror/commit/354cf90635e94587435c75e237a3d6ef8c806e06)".



---

archive/issue_comments_464809.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cbcd65717008f5dc571a7b2c0b67249157cf4526\">cbcd657</a></td><td><code>Merge tag '9.1.beta9' into t/29415/tox_ini__add_environment_local_conda</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b864487a5ec819465db2d8d03b57f2530c52f969\">b864487</a></td><td><code>tox.ini: Add local-conda environments</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dae3c9395e87abfcbc6def989d5cb3fbcadc9b50\">dae3c93</a></td><td><code>tox.yml: Add local-conda-forge</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/354cf90635e94587435c75e237a3d6ef8c806e06\">354cf90</a></td><td><code>Use conda-install --yes --quiet</code></td></tr></table>\n",
    "created_at": "2020-03-29T03:00:32Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29415#issuecomment-464809",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cbcd65717008f5dc571a7b2c0b67249157cf4526">cbcd657</a></td><td><code>Merge tag '9.1.beta9' into t/29415/tox_ini__add_environment_local_conda</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b864487a5ec819465db2d8d03b57f2530c52f969">b864487</a></td><td><code>tox.ini: Add local-conda environments</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dae3c9395e87abfcbc6def989d5cb3fbcadc9b50">dae3c93</a></td><td><code>tox.yml: Add local-conda-forge</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/354cf90635e94587435c75e237a3d6ef8c806e06">354cf90</a></td><td><code>Use conda-install --yes --quiet</code></td></tr></table>




---

archive/issue_comments_464810.json:
```json
{
    "body": "<a id='comment:7'></a>\nRebased on 9.1.beta9+#29087",
    "created_at": "2020-03-29T03:00:53Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29415#issuecomment-464810",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
Rebased on 9.1.beta9+#29087



---

archive/issue_comments_464811.json:
```json
{
    "body": "<a id='comment:8'></a>\nNeeds testing, in particular on Linux",
    "created_at": "2020-03-30T18:23:55Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29415#issuecomment-464811",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
Needs testing, in particular on Linux



---

archive/issue_comments_464812.json:
```json
{
    "body": "<a id='comment:9'></a>\nI end up with a C++ error in Singular\n\n```\nlibtool: compile:  /home/dimpase/sage/.tox/local-conda-forge-standard/conda/bin/x86_64-conda_cos6-linux-gnu-c++ -DHAVE_CONFIG_H -I. -I.\n./../.. -I. -I../../.. -I../../.. -I../../../libpolys -I../../../libpolys -I/home/dimpase/sage/.tox/local-conda-forge-standard/local/var/tmp/sage/build/singular-4.1.1p2.p0/src -I/home/dimpase/sage/.tox/local-conda-forge-standard/local/var/tmp/sage/build/singular-4.1.1p2.p0/src/factory/include -I/home/dimpase/sage/.tox/local-conda-forge-standard/local/var/tmp/sage/build/singular-4.1.1p2.p0/src -I/home/dimpase/sage/.tox/local-conda-forge-standard/local/var/tmp/sage/build/singular-4.1.1p2.p0/src -pthread -DDYNAMIC_VERSION -DGMPRATIONAL -DNDEBUG -D_FORTIFY_SOURCE=2 -O2 -isystem /home/dimpase/sage/.tox/local-conda-forge-standard/conda/include -O2 -g -fvisibility-inlines-hidden -std=c++17 -fmessage-length=0 -march=nocona -mtune=haswell -ftree-vectorize -fPIC -fstack-protector-strong -fno-plt -O2 -ffunction-sections -pipe -isystem /home/dimpase/sage/.tox/local-conda-forge-standard/conda/include -fno-common -g0 -O3 -Wno-unused-function -Wno-trigraphs -Wno-unused-parameter -Wunknown-pragmas -Wno-unused-variable -fomit-frame-pointer -fwrapv -fvisibility=default -finline-functions -fno-exceptions -fno-threadsafe-statics -fno-enforce-eh-specs -fconserve-space -funroll-loops -fno-delete-null-pointer-checks -fno-rtti -fexceptions -frtti -c groebnerCone.cc  -fPIC -DPIC -o .libs/gfanlib_la-groebnerCone.o\ngroebnerCone.cc:428:58: error: no 'bool groebnerCone::pointsOutwards(gfan::ZVector) const' member function declared in class 'groebnerCone'\n bool groebnerCone::pointsOutwards(const gfan::ZVector w) const\n                                                          ^~~~~\ngroebnerCone.cc: In member function 'groebnerCones groebnerCone::tropicalNeighbours() const':\ngroebnerCone.cc:449:13: error: 'pointsOutwards' was not declared in this scope\n         if (pointsOutwards(ray[j]))\n             ^~~~~~~~~~~~~~\nmake[9]: *** [Makefile:726: gfanlib_la-groebnerCone.lo] Error 1\n```\n\nthis is on Debian, and might be due to using gfan from the system.",
    "created_at": "2020-03-31T04:43:46Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29415#issuecomment-464812",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:9'></a>
I end up with a C++ error in Singular

```
libtool: compile:  /home/dimpase/sage/.tox/local-conda-forge-standard/conda/bin/x86_64-conda_cos6-linux-gnu-c++ -DHAVE_CONFIG_H -I. -I.
./../.. -I. -I../../.. -I../../.. -I../../../libpolys -I../../../libpolys -I/home/dimpase/sage/.tox/local-conda-forge-standard/local/var/tmp/sage/build/singular-4.1.1p2.p0/src -I/home/dimpase/sage/.tox/local-conda-forge-standard/local/var/tmp/sage/build/singular-4.1.1p2.p0/src/factory/include -I/home/dimpase/sage/.tox/local-conda-forge-standard/local/var/tmp/sage/build/singular-4.1.1p2.p0/src -I/home/dimpase/sage/.tox/local-conda-forge-standard/local/var/tmp/sage/build/singular-4.1.1p2.p0/src -pthread -DDYNAMIC_VERSION -DGMPRATIONAL -DNDEBUG -D_FORTIFY_SOURCE=2 -O2 -isystem /home/dimpase/sage/.tox/local-conda-forge-standard/conda/include -O2 -g -fvisibility-inlines-hidden -std=c++17 -fmessage-length=0 -march=nocona -mtune=haswell -ftree-vectorize -fPIC -fstack-protector-strong -fno-plt -O2 -ffunction-sections -pipe -isystem /home/dimpase/sage/.tox/local-conda-forge-standard/conda/include -fno-common -g0 -O3 -Wno-unused-function -Wno-trigraphs -Wno-unused-parameter -Wunknown-pragmas -Wno-unused-variable -fomit-frame-pointer -fwrapv -fvisibility=default -finline-functions -fno-exceptions -fno-threadsafe-statics -fno-enforce-eh-specs -fconserve-space -funroll-loops -fno-delete-null-pointer-checks -fno-rtti -fexceptions -frtti -c groebnerCone.cc  -fPIC -DPIC -o .libs/gfanlib_la-groebnerCone.o
groebnerCone.cc:428:58: error: no 'bool groebnerCone::pointsOutwards(gfan::ZVector) const' member function declared in class 'groebnerCone'
 bool groebnerCone::pointsOutwards(const gfan::ZVector w) const
                                                          ^~~~~
groebnerCone.cc: In member function 'groebnerCones groebnerCone::tropicalNeighbours() const':
groebnerCone.cc:449:13: error: 'pointsOutwards' was not declared in this scope
         if (pointsOutwards(ray[j]))
             ^~~~~~~~~~~~~~
make[9]: *** [Makefile:726: gfanlib_la-groebnerCone.lo] Error 1
```

this is on Debian, and might be due to using gfan from the system.



---

archive/issue_comments_464813.json:
```json
{
    "body": "<a id='comment:10'></a>\nThis is fixed in singular 4.1.2. https://github.com/Singular/Sources/commit/80a9ffc773542e3329935e5377f6906628be16e6\n\nA workaround is to do `export CPPFLAGS=\"$CPPFLAGS -UNDEBUG\"` in Singular build script.",
    "created_at": "2020-03-31T04:56:12Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29415#issuecomment-464813",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:10'></a>
This is fixed in singular 4.1.2. https://github.com/Singular/Sources/commit/80a9ffc773542e3329935e5377f6906628be16e6

A workaround is to do `export CPPFLAGS="$CPPFLAGS -UNDEBUG"` in Singular build script.



---

archive/issue_comments_464814.json:
```json
{
    "body": "<a id='comment:11'></a>\nshould we upgrade Sage's singular?",
    "created_at": "2020-03-31T07:37:56Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29415#issuecomment-464814",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:11'></a>
should we upgrade Sage's singular?



---

archive/issue_comments_464815.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [dimpase](#comment%3A11):\n> should we upgrade Sage's singular?\n\nThat's #25993.",
    "created_at": "2020-03-31T11:34:55Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29415#issuecomment-464815",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>
Replying to [dimpase](#comment%3A11):
> should we upgrade Sage's singular?

That's #25993.



---

archive/issue_comments_464816.json:
```json
{
    "body": "<a id='comment:13'></a>\nI also see a failure (testing with #29417):\n\n- `local-conda-forge-macos-standard`: \n\n```\n  [dochtml]       from sage.symbolic.all   import *\n  [dochtml]     File \"/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/local/lib/python3.7/site-packages/sage/symbolic/all.py\", line 3, in <module>\n  [dochtml]       from sage.libs.pynac.pynac import I\n  [dochtml]     File \"sage/symbolic/expression.pxd\", line 4, in init sage.libs.pynac.pynac (build/cythonized/sage/libs/pynac/pynac.cpp:30411)\n   [dochtml]     File \"sage/symbolic/expression.pyx\", line 160, in init sage.symbolic.expression (build/cythonized/sage/symbolic/expression.cpp:75349)\n  [dochtml]   ImportError: dlopen(/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/local/lib/python3.7/site-packages/sage/symbolic/ring.cpython-37m-darwin.so, 2): Symbol not found: __ZN5GiNaC9containerINSt3__16vectorEEC2ERKNS2_INS_2exENS1_9allocatorIS4_EEEEb\n  [dochtml]     Referenced from: /Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/local/lib/python3.7/site-packages/sage/symbolic/ring.cpython-37m-darwin.so\n  [dochtml]     Expected in: flat namespace\n  [dochtml]    in /Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/local/lib/python3.7/site-packages/sage/symbolic/ring.cpython-37m-darwin.so\n```\n(this is with #29404 -- should take another look)",
    "created_at": "2020-03-31T11:53:08Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29415#issuecomment-464816",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>
I also see a failure (testing with #29417):

- `local-conda-forge-macos-standard`: 

```
  [dochtml]       from sage.symbolic.all   import *
  [dochtml]     File "/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/local/lib/python3.7/site-packages/sage/symbolic/all.py", line 3, in <module>
  [dochtml]       from sage.libs.pynac.pynac import I
  [dochtml]     File "sage/symbolic/expression.pxd", line 4, in init sage.libs.pynac.pynac (build/cythonized/sage/libs/pynac/pynac.cpp:30411)
   [dochtml]     File "sage/symbolic/expression.pyx", line 160, in init sage.symbolic.expression (build/cythonized/sage/symbolic/expression.cpp:75349)
  [dochtml]   ImportError: dlopen(/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/local/lib/python3.7/site-packages/sage/symbolic/ring.cpython-37m-darwin.so, 2): Symbol not found: __ZN5GiNaC9containerINSt3__16vectorEEC2ERKNS2_INS_2exENS1_9allocatorIS4_EEEEb
  [dochtml]     Referenced from: /Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/local/lib/python3.7/site-packages/sage/symbolic/ring.cpython-37m-darwin.so
  [dochtml]     Expected in: flat namespace
  [dochtml]    in /Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/local/lib/python3.7/site-packages/sage/symbolic/ring.cpython-37m-darwin.so
```
(this is with #29404 -- should take another look)



---

archive/issue_comments_464817.json:
```json
{
    "body": "<a id='comment:14'></a>\nIn any case, the present ticket is about adding the testing framework for local-conda, which appears to work. Needs review.",
    "created_at": "2020-03-31T12:58:29Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29415#issuecomment-464817",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>
In any case, the present ticket is about adding the testing framework for local-conda, which appears to work. Needs review.



---

archive/issue_comments_464818.json:
```json
{
    "body": "<a id='comment:16'></a>\nShameless plug. Use miniforge instead of miniconda?",
    "created_at": "2020-03-31T16:33:53Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29415#issuecomment-464818",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:16'></a>
Shameless plug. Use miniforge instead of miniconda?



---

archive/issue_comments_464819.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [isuruf](#comment%3A16):\n> Shameless plug. Use miniforge instead of miniconda?\n\nJust tried it and it behaves a bit different from miniconda:\n\n```\nlocal-macos-conda-forge-standard-python2 run-test-pre: commands[6] | bash -c '/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-macos-conda-forge-standard-python2/conda/bin/conda update -n base --yes conda'\nTraceback (most recent call last):\n  File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-macos-conda-forge-standard-python2/conda/bin/conda\", line 12, in <module>\n    from conda.cli import main\nModuleNotFoundError: No module named 'conda'\n```\nDo I need to activate the environment before using that?",
    "created_at": "2020-03-31T17:11:40Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29415#issuecomment-464819",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>
Replying to [isuruf](#comment%3A16):
> Shameless plug. Use miniforge instead of miniconda?

Just tried it and it behaves a bit different from miniconda:

```
local-macos-conda-forge-standard-python2 run-test-pre: commands[6] | bash -c '/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-macos-conda-forge-standard-python2/conda/bin/conda update -n base --yes conda'
Traceback (most recent call last):
  File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-macos-conda-forge-standard-python2/conda/bin/conda", line 12, in <module>
    from conda.cli import main
ModuleNotFoundError: No module named 'conda'
```
Do I need to activate the environment before using that?



---

archive/issue_comments_464820.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [isuruf](#comment%3A10):\n> This is fixed in singular 4.1.2. https://github.com/Singular/Sources/commit/80a9ffc773542e3329935e5377f6906628be16e6\n> \n> A workaround is to do `export CPPFLAGS=\"$CPPFLAGS -UNDEBUG\"` in Singular build script.\n\n\nBecause the singular upgrade (#25993) will not be ready for 9.1, I have opened #29438 for this",
    "created_at": "2020-03-31T17:19:33Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29415#issuecomment-464820",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>
Replying to [isuruf](#comment%3A10):
> This is fixed in singular 4.1.2. https://github.com/Singular/Sources/commit/80a9ffc773542e3329935e5377f6906628be16e6
> 
> A workaround is to do `export CPPFLAGS="$CPPFLAGS -UNDEBUG"` in Singular build script.


Because the singular upgrade (#25993) will not be ready for 9.1, I have opened #29438 for this



---

archive/issue_comments_464821.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [mkoeppe](#comment%3A17):\n> Do I need to activate the environment before using that?\n\n\nYes, but even miniconda needs activation.",
    "created_at": "2020-03-31T17:22:20Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29415#issuecomment-464821",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:19'></a>
Replying to [mkoeppe](#comment%3A17):
> Do I need to activate the environment before using that?


Yes, but even miniconda needs activation.



---

archive/issue_comments_464822.json:
```json
{
    "body": "**Changing commit** from \"[354cf90635e94587435c75e237a3d6ef8c806e06](https://github.com/sagemath/sagetrac-mirror/commit/354cf90635e94587435c75e237a3d6ef8c806e06)\" to \"[a61c48e04b0c463b02fb47903454a94133b3a560](https://github.com/sagemath/sagetrac-mirror/commit/a61c48e04b0c463b02fb47903454a94133b3a560)\".",
    "created_at": "2020-03-31T17:37:15Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29415#issuecomment-464822",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[354cf90635e94587435c75e237a3d6ef8c806e06](https://github.com/sagemath/sagetrac-mirror/commit/354cf90635e94587435c75e237a3d6ef8c806e06)" to "[a61c48e04b0c463b02fb47903454a94133b3a560](https://github.com/sagemath/sagetrac-mirror/commit/a61c48e04b0c463b02fb47903454a94133b3a560)".



---

archive/issue_comments_464823.json:
```json
{
    "body": "<a id='comment:20'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/375721242dd6621bdd77e7f3f547d60d1b45ce81\">3757212</a></td><td><code>tox.ini: Switch local-conda-forge to miniforge</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a61c48e04b0c463b02fb47903454a94133b3a560\">a61c48e</a></td><td><code>tox.ini [local-conda]: Activate conda before calling conda install</code></td></tr></table>\n",
    "created_at": "2020-03-31T17:37:15Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29415#issuecomment-464823",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/375721242dd6621bdd77e7f3f547d60d1b45ce81">3757212</a></td><td><code>tox.ini: Switch local-conda-forge to miniforge</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a61c48e04b0c463b02fb47903454a94133b3a560">a61c48e</a></td><td><code>tox.ini [local-conda]: Activate conda before calling conda install</code></td></tr></table>




---

archive/attachments_021324.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "openblas.log",
    "asset_url": "tarball://root/attachments/ticket29415/openblas.log",
    "created_at": "2020-04-01T09:19:02Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket29415/openblas.log",
    "user": "https://github.com/kliem"
}
```



---

archive/issue_comments_464824.json:
```json
{
    "body": "Attachment [openblas.log](https://github.com/sagemath/sage/files/ticket29415/openblas.log) by @kliem created at 2020-04-01 09:19:02",
    "created_at": "2020-04-01T09:19:02Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29415#issuecomment-464824",
    "user": "https://github.com/kliem"
}
```

Attachment [openblas.log](https://github.com/sagemath/sage/files/ticket29415/openblas.log) by @kliem created at 2020-04-01 09:19:02



---

archive/issue_comments_464825.json:
```json
{
    "body": "<a id='comment:21'></a>\nI guess it works in the way that it doesn't work.\n\n```\n* package:         openblas-0.3.6.p0\n  last build time: Apr 1 10:54\n  log file:        /srv/public/kliem/sage/logs/pkgs/openblas-0.3.6.p0.log\n  build directory: /srv/public/kliem/sage/.tox/local-conda-forge-standard/local/var/tmp/sage/build/openblas-0.3.6.p0                                                               \n\n* package:         singular-4.1.1p2.p0\n  last build time: Apr 1 11:00\n  log file:        /srv/public/kliem/sage/logs/pkgs/singular-4.1.1p2.p0.log\n  build directory: /srv/public/kliem/sage/.tox/local-conda-forge-standard/local/var/tmp/sage/build/singular-4.1.1p2.p0                                                             \n\n```\n\nI attached the logs.",
    "created_at": "2020-04-01T09:21:12Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29415#issuecomment-464825",
    "user": "https://github.com/kliem"
}
```

<a id='comment:21'></a>
I guess it works in the way that it doesn't work.

```
* package:         openblas-0.3.6.p0
  last build time: Apr 1 10:54
  log file:        /srv/public/kliem/sage/logs/pkgs/openblas-0.3.6.p0.log
  build directory: /srv/public/kliem/sage/.tox/local-conda-forge-standard/local/var/tmp/sage/build/openblas-0.3.6.p0                                                               

* package:         singular-4.1.1p2.p0
  last build time: Apr 1 11:00
  log file:        /srv/public/kliem/sage/logs/pkgs/singular-4.1.1p2.p0.log
  build directory: /srv/public/kliem/sage/.tox/local-conda-forge-standard/local/var/tmp/sage/build/singular-4.1.1p2.p0                                                             

```

I attached the logs.



---

archive/issue_comments_464826.json:
```json
{
    "body": "<a id='comment:22'></a>\nSingular might need the fix proposed by Isuru above",
    "created_at": "2020-04-01T09:32:52Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29415#issuecomment-464826",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:22'></a>
Singular might need the fix proposed by Isuru above



---

archive/issue_comments_464827.json:
```json
{
    "body": "<a id='comment:23'></a>\nI'm not sure that I understand.\n\nAt least this here did not fix the problem.\n\n```\n+++ b/build/pkgs/singular/spkg-install.in\n@@ -19,6 +19,7 @@ else\n fi\n \n export CFLAGS CXXFLAGS\n+export CPPFLAGS=\"$CPPFLAGS -UNDEBUG\"\n \n \n remove_old_version()\n```\n\nNow openblas, tachyon, m4ri, givaro, ecm, python3, giac, singular fail to install.",
    "created_at": "2020-04-01T12:57:10Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29415#issuecomment-464827",
    "user": "https://github.com/kliem"
}
```

<a id='comment:23'></a>
I'm not sure that I understand.

At least this here did not fix the problem.

```
+++ b/build/pkgs/singular/spkg-install.in
@@ -19,6 +19,7 @@ else
 fi
 
 export CFLAGS CXXFLAGS
+export CPPFLAGS="$CPPFLAGS -UNDEBUG"
 
 
 remove_old_version()
```

Now openblas, tachyon, m4ri, givaro, ecm, python3, giac, singular fail to install.



---

archive/issue_comments_464828.json:
```json
{
    "body": "<a id='comment:24'></a>\nSingular fixes - please on  #29438, not here",
    "created_at": "2020-04-01T13:12:47Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29415#issuecomment-464828",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'></a>
Singular fixes - please on  #29438, not here



---

archive/issue_comments_464829.json:
```json
{
    "body": "<a id='comment:25'></a>\nThis ticket is about adding the testing environment for conda, not fixing everything that may be broken in the conda build",
    "created_at": "2020-04-01T13:13:39Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29415#issuecomment-464829",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'></a>
This ticket is about adding the testing environment for conda, not fixing everything that may be broken in the conda build



---

archive/issue_comments_464830.json:
```json
{
    "body": "**Reviewer:** Isuru Fernando",
    "created_at": "2020-04-03T16:33:31Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29415#issuecomment-464830",
    "user": "https://github.com/isuruf"
}
```

**Reviewer:** Isuru Fernando



---

archive/issue_events_261840.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2020-04-03T16:33:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29415#event-261840"
}
```



---

archive/issue_events_261841.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2020-04-03T16:33:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29415#event-261841"
}
```



---

archive/issue_comments_464831.json:
```json
{
    "body": "<a id='comment:27'></a>\nThank you.",
    "created_at": "2020-04-03T16:44:04Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29415#issuecomment-464831",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>
Thank you.



---

archive/issue_events_261842.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-09T22:44:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29415#event-261842"
}
```



---

archive/issue_events_261843.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "88539d35d0de6f80ea7cb2aba7c02d71c7d2ce2e",
    "created_at": "2020-04-09T22:44:44Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29415#event-261843"
}
```



---

archive/issue_comments_464832.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/tox_ini__add_environment_local_conda](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/tox_ini__add_environment_local_conda)\" to \"[a61c48e04b0c463b02fb47903454a94133b3a560](https://github.com/sagemath/sagetrac-mirror/commit/a61c48e04b0c463b02fb47903454a94133b3a560)\".",
    "created_at": "2020-04-09T22:44:44Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29415#issuecomment-464832",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/mkoeppe/tox_ini__add_environment_local_conda](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/tox_ini__add_environment_local_conda)" to "[a61c48e04b0c463b02fb47903454a94133b3a560](https://github.com/sagemath/sagetrac-mirror/commit/a61c48e04b0c463b02fb47903454a94133b3a560)".



---

archive/issue_comments_464833.json:
```json
{
    "body": "<a id='comment:29'></a>\nReplying to [mkoeppe](#comment%3A13):\n> I also see a failure (testing with #29417):\n> \n> - `local-conda-forge-macos-standard`: \n> \n> ```\n>   [dochtml]       from sage.symbolic.all   import *\n>   [dochtml]     File \"/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/local/lib/python3.7/site-packages/sage/symbolic/all.py\", line 3, in <module>\n>   [dochtml]       from sage.libs.pynac.pynac import I\n>   [dochtml]     File \"sage/symbolic/expression.pxd\", line 4, in init sage.libs.pynac.pynac (build/cythonized/sage/libs/pynac/pynac.cpp:30411)\n>    [dochtml]     File \"sage/symbolic/expression.pyx\", line 160, in init sage.symbolic.expression (build/cythonized/sage/symbolic/expression.cpp:75349)\n>   [dochtml]   ImportError: dlopen(/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/local/lib/python3.7/site-packages/sage/symbolic/ring.cpython-37m-darwin.so, 2): Symbol not found: __ZN5GiNaC9containerINSt3__16vectorEEC2ERKNS2_INS_2exENS1_9allocatorIS4_EEEEb\n>   [dochtml]     Referenced from: /Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/local/lib/python3.7/site-packages/sage/symbolic/ring.cpython-37m-darwin.so\n>   [dochtml]     Expected in: flat namespace\n>   [dochtml]    in /Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/local/lib/python3.7/site-packages/sage/symbolic/ring.cpython-37m-darwin.so\n> ```\n> (this is with #29404 -- should take another look)\n\n\nThis is now #29574",
    "created_at": "2020-04-25T03:16:55Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29415#issuecomment-464833",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'></a>
Replying to [mkoeppe](#comment%3A13):
> I also see a failure (testing with #29417):
> 
> - `local-conda-forge-macos-standard`: 
> 
> ```
>   [dochtml]       from sage.symbolic.all   import *
>   [dochtml]     File "/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/local/lib/python3.7/site-packages/sage/symbolic/all.py", line 3, in <module>
>   [dochtml]       from sage.libs.pynac.pynac import I
>   [dochtml]     File "sage/symbolic/expression.pxd", line 4, in init sage.libs.pynac.pynac (build/cythonized/sage/libs/pynac/pynac.cpp:30411)
>    [dochtml]     File "sage/symbolic/expression.pyx", line 160, in init sage.symbolic.expression (build/cythonized/sage/symbolic/expression.cpp:75349)
>   [dochtml]   ImportError: dlopen(/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/local/lib/python3.7/site-packages/sage/symbolic/ring.cpython-37m-darwin.so, 2): Symbol not found: __ZN5GiNaC9containerINSt3__16vectorEEC2ERKNS2_INS_2exENS1_9allocatorIS4_EEEEb
>   [dochtml]     Referenced from: /Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/local/lib/python3.7/site-packages/sage/symbolic/ring.cpython-37m-darwin.so
>   [dochtml]     Expected in: flat namespace
>   [dochtml]    in /Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/local/lib/python3.7/site-packages/sage/symbolic/ring.cpython-37m-darwin.so
> ```
> (this is with #29404 -- should take another look)


This is now #29574



---

archive/issue_comments_464834.json:
```json
{
    "body": "**Changing commit** from \"[a61c48e04b0c463b02fb47903454a94133b3a560](https://github.com/sagemath/sagetrac-mirror/commit/a61c48e04b0c463b02fb47903454a94133b3a560)\" to \"\".",
    "created_at": "2020-04-25T03:16:55Z",
    "issue": "https://github.com/sagemath/sage/issues/29415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29415#issuecomment-464834",
    "user": "https://github.com/mkoeppe"
}
```

**Changing commit** from "[a61c48e04b0c463b02fb47903454a94133b3a560](https://github.com/sagemath/sagetrac-mirror/commit/a61c48e04b0c463b02fb47903454a94133b3a560)" to "".
