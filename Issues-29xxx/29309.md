# Issue 29309: Exact Algorithm for Diameters of Large Real Directed Graphs

archive/issues_029072.json:
```json
{
    "body": "Adds an algorithm for computing the diameter of directed graphs as described in [https://doi.org/10.1007/978-3-319-20086-6_5](https://doi.org/10.1007/978-3-319-20086-6_5)\n\nAssignee: @tabus\n\nKeywords: diameter\n\nAuthor: Jo\u00e3o Tavares\n\nBranch: u/gh-tabus/exact_algorithm_for_diameters_of_large_real_directed_graphs\n\nStatus: needs_work\n\nCommit: a79cfd1832d577de512d4bd135d342facbb9d9f6\n\nIssue created by migration from https://trac.sagemath.org/ticket/29309\n\n",
    "created_at": "2020-03-10T11:51:12Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Exact Algorithm for Diameters of Large Real Directed Graphs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29309",
    "user": "https://github.com/tabus"
}
```
Adds an algorithm for computing the diameter of directed graphs as described in [https://doi.org/10.1007/978-3-319-20086-6_5](https://doi.org/10.1007/978-3-319-20086-6_5)

Assignee: @tabus

Keywords: diameter

Author: Jo√£o Tavares

Branch: u/gh-tabus/exact_algorithm_for_diameters_of_large_real_directed_graphs

Status: needs_work

Commit: a79cfd1832d577de512d4bd135d342facbb9d9f6

Issue created by migration from https://trac.sagemath.org/ticket/29309





---

archive/issue_comments_564412.json:
```json
{
    "body": "Changing branch from \"\" to \"u/gh-tabus/exact_algorithm_for_diameters_of_large_real_directed_graphs\"",
    "created_at": "2020-03-10T12:01:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564412",
    "user": "https://github.com/tabus"
}
```

Changing branch from "" to "u/gh-tabus/exact_algorithm_for_diameters_of_large_real_directed_graphs"



---

archive/issue_comments_564413.json:
```json
{
    "body": "Changing commit from \"\" to \"febaa2ec724cd4921ba894c54ef59c6328e8436c\"",
    "created_at": "2020-03-10T21:04:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564413",
    "user": "https://github.com/tabus"
}
```

Changing commit from "" to "febaa2ec724cd4921ba894c54ef59c6328e8436c"



---

archive/issue_comments_564414.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew commits:\n|                                                                                                                                          |                                                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[febaa2e](https://github.com/sagemath/sagetrac-mirror/commit/febaa2ec724cd4921ba894c54ef59c6328e8436c)|`First implmentation (only for undirected graphs)`|",
    "created_at": "2020-03-10T21:04:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564414",
    "user": "https://github.com/tabus"
}
```

<a id='comment:2'></a>
New commits:
|                                                                                                                                          |                                                  |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[febaa2e](https://github.com/sagemath/sagetrac-mirror/commit/febaa2ec724cd4921ba894c54ef59c6328e8436c)|`First implmentation (only for undirected graphs)`|



---

archive/issue_comments_564415.json:
```json
{
    "body": "Set assignee to @tabus.",
    "created_at": "2020-03-10T21:04:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564415",
    "user": "https://github.com/tabus"
}
```

Set assignee to @tabus.



---

archive/issue_comments_564416.json:
```json
{
    "body": "<a id='comment:3'></a>\nA few comments:\n- please document your methods\n- use standard notation `n` instead of `V`.\n- you can use `UINT32_MAX`\n- `range(g.neighbors[v+1]-g.neighbors[v+1])` unless I'm mistaken, this range is empty...\n- you can use `bitset_first` and `bitset_next` to iterate over 1s of a bitset. See for instance [https://github.com/sagemath/sagelib/blob/master/sage/misc/bitset.pxi](https://github.com/sagemath/sagelib/blob/master/sage/misc/bitset.pxi)\n- `Diferent graph` -> `Different graph`, although I don't understand this comment.",
    "created_at": "2020-03-13T15:23:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564416",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:3'></a>
A few comments:
- please document your methods
- use standard notation `n` instead of `V`.
- you can use `UINT32_MAX`
- `range(g.neighbors[v+1]-g.neighbors[v+1])` unless I'm mistaken, this range is empty...
- you can use `bitset_first` and `bitset_next` to iterate over 1s of a bitset. See for instance [https://github.com/sagemath/sagelib/blob/master/sage/misc/bitset.pxi](https://github.com/sagemath/sagelib/blob/master/sage/misc/bitset.pxi)
- `Diferent graph` -> `Different graph`, although I don't understand this comment.



---

archive/issue_comments_564417.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|\n|[86d5bb8](https://github.com/sagemath/sagetrac-mirror/commit/86d5bb8a6b62d69aee6dc8fd72f73b73ea98c218)|`Cleanup files and add tests`|\n|[fa9a391](https://github.com/sagemath/sagetrac-mirror/commit/fa9a391b40531f1c40e41786ab6ecfc6cfbf404d)|`Added support for DiGraph + Fixed bug concerning the doublesweep`|",
    "created_at": "2020-03-13T22:23:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564417",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|
|[86d5bb8](https://github.com/sagemath/sagetrac-mirror/commit/86d5bb8a6b62d69aee6dc8fd72f73b73ea98c218)|`Cleanup files and add tests`|
|[fa9a391](https://github.com/sagemath/sagetrac-mirror/commit/fa9a391b40531f1c40e41786ab6ecfc6cfbf404d)|`Added support for DiGraph + Fixed bug concerning the doublesweep`|



---

archive/issue_comments_564418.json:
```json
{
    "body": "Changing commit from \"febaa2ec724cd4921ba894c54ef59c6328e8436c\" to \"fa9a391b40531f1c40e41786ab6ecfc6cfbf404d\"",
    "created_at": "2020-03-13T22:23:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564418",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "febaa2ec724cd4921ba894c54ef59c6328e8436c" to "fa9a391b40531f1c40e41786ab6ecfc6cfbf404d"



---

archive/issue_comments_564419.json:
```json
{
    "body": "<a id='comment:5'></a>\nThank you so much for you input.\n\nI have taken care of points 2, 3, 5 (I wasn't aware of the existence of a function like bitwise_next in O(1), thank you!).\n\nRegarding the 6th point (sorry for the typo) the comment refers to the fact that the BFS should be done only on the SCC of the considered node with the inverted edges in order to obtain the backwards distance. Temporarily I had used the given graph because I was considering G as an undirected graph. The comment was only there to remind me to find and efficient way to perform the BFS on the desired graph.",
    "created_at": "2020-03-13T23:43:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564419",
    "user": "https://github.com/tabus"
}
```

<a id='comment:5'></a>
Thank you so much for you input.

I have taken care of points 2, 3, 5 (I wasn't aware of the existence of a function like bitwise_next in O(1), thank you!).

Regarding the 6th point (sorry for the typo) the comment refers to the fact that the BFS should be done only on the SCC of the considered node with the inverted edges in order to obtain the backwards distance. Temporarily I had used the given graph because I was considering G as an undirected graph. The comment was only there to remind me to find and efficient way to perform the BFS on the desired graph.



---

archive/issue_comments_564420.json:
```json
{
    "body": "Changing commit from \"fa9a391b40531f1c40e41786ab6ecfc6cfbf404d\" to \"b6e4ac46a030be5c4a78232cbd2521ef4ab6cd0d\"",
    "created_at": "2020-03-13T23:46:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564420",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "fa9a391b40531f1c40e41786ab6ecfc6cfbf404d" to "b6e4ac46a030be5c4a78232cbd2521ef4ab6cd0d"



---

archive/issue_comments_564421.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------|\n|[b6e4ac4](https://github.com/sagemath/sagetrac-mirror/commit/b6e4ac46a030be5c4a78232cbd2521ef4ab6cd0d)|`Fixing the notation`|",
    "created_at": "2020-03-13T23:46:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564421",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------|
|[b6e4ac4](https://github.com/sagemath/sagetrac-mirror/commit/b6e4ac46a030be5c4a78232cbd2521ef4ab6cd0d)|`Fixing the notation`|



---

archive/issue_comments_564422.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [dcoudert](#comment%3A3):\n> A few comments:\n> - please document your methods\n> - use standard notation `n` instead of `V`.\n> - you can use `UINT32_MAX`\n> - `range(g.neighbors[v+1]-g.neighbors[v+1])` unless I'm mistaken, this range is empty...\n> - you can use `bitset_first` and `bitset_next` to iterate over 1s of a bitset. See for instance [https://github.com/sagemath/sagelib/blob/master/sage/misc/bitset.pxi](https://github.com/sagemath/sagelib/blob/master/sage/misc/bitset.pxi)\n> - `Diferent graph` -> `Different graph`, although I don't understand this comment.\n\n\nAbout the 6th point as I commented before, the problem is that I have to consider the graph of reverse edges with vertices in the SCC. One way to do this is to create these graphs, however this seems be very inefficient. One solution I've though of is to create only the revere graph using init_revese, which is already implemented, and to run BFS adding only the vertices on the same SCC to the queue.\n\nThe current implementation of simple_BFS does not allow for this. However with a couple of very simple changes and adding an optional list of components to the arguments of the function it could. I am hesitant about this path because I would then have to fix all calls to this function.\n\nCan I get your input on this one? Is it preferred not to mess with the arguments of already implemented functions? Perhaps I should just switch to another graph structure which allows for these operations although a bit less efficient?",
    "created_at": "2020-03-14T17:27:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564422",
    "user": "https://github.com/tabus"
}
```

<a id='comment:7'></a>
Replying to [dcoudert](#comment%3A3):
> A few comments:
> - please document your methods
> - use standard notation `n` instead of `V`.
> - you can use `UINT32_MAX`
> - `range(g.neighbors[v+1]-g.neighbors[v+1])` unless I'm mistaken, this range is empty...
> - you can use `bitset_first` and `bitset_next` to iterate over 1s of a bitset. See for instance [https://github.com/sagemath/sagelib/blob/master/sage/misc/bitset.pxi](https://github.com/sagemath/sagelib/blob/master/sage/misc/bitset.pxi)
> - `Diferent graph` -> `Different graph`, although I don't understand this comment.


About the 6th point as I commented before, the problem is that I have to consider the graph of reverse edges with vertices in the SCC. One way to do this is to create these graphs, however this seems be very inefficient. One solution I've though of is to create only the revere graph using init_revese, which is already implemented, and to run BFS adding only the vertices on the same SCC to the queue.

The current implementation of simple_BFS does not allow for this. However with a couple of very simple changes and adding an optional list of components to the arguments of the function it could. I am hesitant about this path because I would then have to fix all calls to this function.

Can I get your input on this one? Is it preferred not to mess with the arguments of already implemented functions? Perhaps I should just switch to another graph structure which allows for these operations although a bit less efficient?



---

archive/issue_comments_564423.json:
```json
{
    "body": "Changing commit from \"b6e4ac46a030be5c4a78232cbd2521ef4ab6cd0d\" to \"2fc27dac81af197c17f02550c817cee896da41f8\"",
    "created_at": "2020-03-14T21:54:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564423",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b6e4ac46a030be5c4a78232cbd2521ef4ab6cd0d" to "2fc27dac81af197c17f02550c817cee896da41f8"



---

archive/issue_comments_564424.json:
```json
{
    "body": "<a id='comment:8'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------|\n|[2fc27da](https://github.com/sagemath/sagetrac-mirror/commit/2fc27dac81af197c17f02550c817cee896da41f8)|`Change to simple_BFS`|",
    "created_at": "2020-03-14T21:54:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564424",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------|
|[2fc27da](https://github.com/sagemath/sagetrac-mirror/commit/2fc27dac81af197c17f02550c817cee896da41f8)|`Change to simple_BFS`|



---

archive/issue_comments_564425.json:
```json
{
    "body": "<a id='comment:9'></a>\nNew commits:\n|                                                                                                                                          |                                                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[febaa2e](https://github.com/sagemath/sagetrac-mirror/commit/febaa2ec724cd4921ba894c54ef59c6328e8436c)|`First implmentation (only for undirected graphs)`|\n|[86d5bb8](https://github.com/sagemath/sagetrac-mirror/commit/86d5bb8a6b62d69aee6dc8fd72f73b73ea98c218)|`Cleanup files and add tests`|\n|[fa9a391](https://github.com/sagemath/sagetrac-mirror/commit/fa9a391b40531f1c40e41786ab6ecfc6cfbf404d)|`Added support for DiGraph + Fixed bug concerning the doublesweep`|\n|[b6e4ac4](https://github.com/sagemath/sagetrac-mirror/commit/b6e4ac46a030be5c4a78232cbd2521ef4ab6cd0d)|`Fixing the notation`|\n|[2fc27da](https://github.com/sagemath/sagetrac-mirror/commit/2fc27dac81af197c17f02550c817cee896da41f8)|`Change to simple_BFS`|",
    "created_at": "2020-03-15T14:51:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564425",
    "user": "https://github.com/tabus"
}
```

<a id='comment:9'></a>
New commits:
|                                                                                                                                          |                                                  |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[febaa2e](https://github.com/sagemath/sagetrac-mirror/commit/febaa2ec724cd4921ba894c54ef59c6328e8436c)|`First implmentation (only for undirected graphs)`|
|[86d5bb8](https://github.com/sagemath/sagetrac-mirror/commit/86d5bb8a6b62d69aee6dc8fd72f73b73ea98c218)|`Cleanup files and add tests`|
|[fa9a391](https://github.com/sagemath/sagetrac-mirror/commit/fa9a391b40531f1c40e41786ab6ecfc6cfbf404d)|`Added support for DiGraph + Fixed bug concerning the doublesweep`|
|[b6e4ac4](https://github.com/sagemath/sagetrac-mirror/commit/b6e4ac46a030be5c4a78232cbd2521ef4ab6cd0d)|`Fixing the notation`|
|[2fc27da](https://github.com/sagemath/sagetrac-mirror/commit/2fc27dac81af197c17f02550c817cee896da41f8)|`Change to simple_BFS`|



---

archive/issue_comments_564426.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|\n|[25010cb](https://github.com/sagemath/sagetrac-mirror/commit/25010cbdbe32189c338a6fc3066502f66072f91e)|`Working version of the implementation`|\n|[121fa76](https://github.com/sagemath/sagetrac-mirror/commit/121fa769a9cc4b7814fc77fba8158a3bdbb05ea5)|`Merge remote-tracking branch 'refs/remotes/trac/u/gh-tabus/exact_algorithm_for_diameters_of_large_real_directed_graphs' into t/29309/exact_algorithm_for_diameters_of_large_real_directed_graphs`|",
    "created_at": "2020-03-15T15:00:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564426",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|
|[25010cb](https://github.com/sagemath/sagetrac-mirror/commit/25010cbdbe32189c338a6fc3066502f66072f91e)|`Working version of the implementation`|
|[121fa76](https://github.com/sagemath/sagetrac-mirror/commit/121fa769a9cc4b7814fc77fba8158a3bdbb05ea5)|`Merge remote-tracking branch 'refs/remotes/trac/u/gh-tabus/exact_algorithm_for_diameters_of_large_real_directed_graphs' into t/29309/exact_algorithm_for_diameters_of_large_real_directed_graphs`|



---

archive/issue_comments_564427.json:
```json
{
    "body": "Changing commit from \"2fc27dac81af197c17f02550c817cee896da41f8\" to \"121fa769a9cc4b7814fc77fba8158a3bdbb05ea5\"",
    "created_at": "2020-03-15T15:00:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564427",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2fc27dac81af197c17f02550c817cee896da41f8" to "121fa769a9cc4b7814fc77fba8158a3bdbb05ea5"



---

archive/issue_comments_564428.json:
```json
{
    "body": "<a id='comment:11'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------|\n|[0e87a2b](https://github.com/sagemath/sagetrac-mirror/commit/0e87a2b9311683ab5a0ed60d11d75e124a2d01aa)|`Fix the merge mistakes`|",
    "created_at": "2020-03-15T15:06:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564428",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------|
|[0e87a2b](https://github.com/sagemath/sagetrac-mirror/commit/0e87a2b9311683ab5a0ed60d11d75e124a2d01aa)|`Fix the merge mistakes`|



---

archive/issue_comments_564429.json:
```json
{
    "body": "Changing commit from \"121fa769a9cc4b7814fc77fba8158a3bdbb05ea5\" to \"0e87a2b9311683ab5a0ed60d11d75e124a2d01aa\"",
    "created_at": "2020-03-15T15:06:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564429",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "121fa769a9cc4b7814fc77fba8158a3bdbb05ea5" to "0e87a2b9311683ab5a0ed60d11d75e124a2d01aa"



---

archive/issue_comments_564430.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-03-15T15:10:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564430",
    "user": "https://github.com/tabus"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_564431.json:
```json
{
    "body": "Changing author from \"\" to \"Jo\u00e3o Tavares\"",
    "created_at": "2020-03-15T15:10:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564431",
    "user": "https://github.com/tabus"
}
```

Changing author from "" to "Jo√£o Tavares"



---

archive/issue_comments_564432.json:
```json
{
    "body": "<a id='comment:13'></a>\nYou must add doctests for your algorithms. Also, benchmarks would be welcome.",
    "created_at": "2020-03-15T18:08:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564432",
    "user": "https://github.com/videlec"
}
```

<a id='comment:13'></a>
You must add doctests for your algorithms. Also, benchmarks would be welcome.



---

archive/issue_comments_564433.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-03-15T18:08:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564433",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_564434.json:
```json
{
    "body": "Changing commit from \"0e87a2b9311683ab5a0ed60d11d75e124a2d01aa\" to \"81a019f35d2ba857cb2497feb4f84d2b12174fec\"",
    "created_at": "2020-03-15T19:34:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564434",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0e87a2b9311683ab5a0ed60d11d75e124a2d01aa" to "81a019f35d2ba857cb2497feb4f84d2b12174fec"



---

archive/issue_comments_564435.json:
```json
{
    "body": "<a id='comment:14'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------|\n|[81a019f](https://github.com/sagemath/sagetrac-mirror/commit/81a019f35d2ba857cb2497feb4f84d2b12174fec)|`Added doctests`|",
    "created_at": "2020-03-15T19:34:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564435",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------|
|[81a019f](https://github.com/sagemath/sagetrac-mirror/commit/81a019f35d2ba857cb2497feb4f84d2b12174fec)|`Added doctests`|



---

archive/issue_comments_564436.json:
```json
{
    "body": "<a id='comment:15'></a>\nI have been experimenting and it seems this method is more efficient when the graph is sparse.\nIt should happen because the method creates a short_digraph with the reverse edges, something that iFUB does not have to do.\n\n```\nsage: G = DiGraph([[1,2]])\n....: while not G.is_strongly_connected():\n....:     G = digraphs.RandomDirectedGNP(1000, 0.2)\n....: \n....: %time G.diameter(algorithm='TYY')\n....: %time G.diameter()\n....: \nCPU times: user 887 ms, sys: 11.9 ms, total: 899 ms\nWall time: 912 ms\n2\nCPU times: user 542 ms, sys: 2.96 ms, total: 545 ms\nWall time: 549 ms\n2\nsage: G = DiGraph([[1,2]])\n....: while not G.is_strongly_connected():\n....:     G = digraphs.RandomDirectedGNP(1000, 0.1)\n....: \n....: %time G.diameter(algorithm='TYY')\n....: %time G.diameter()\n....: \nCPU times: user 77.5 ms, sys: 0 ns, total: 77.5 ms\nWall time: 78.5 ms\n3\nCPU times: user 314 ms, sys: 3.66 ms, total: 317 ms\nWall time: 320 ms\n3\nsage: G = DiGraph([[1,2]])\n....: while not G.is_strongly_connected():\n....:     G = digraphs.RandomDirectedGNP(1000, 0.01)\n....: \n....: %time G.diameter(algorithm='TYY')\n....: %time G.diameter()\n....: \nCPU times: user 22.5 ms, sys: 0 ns, total: 22.5 ms\nWall time: 31.6 ms\n6\nCPU times: user 54.6 ms, sys: 196 \u00b5s, total: 54.8 ms\nWall time: 63.6 ms\n6\nsage: G = DiGraph([[1,2]])\n....: while not G.is_strongly_connected():\n....:     G = digraphs.RandomDirectedGNP(5000, 0.2)\n....: \n....: %time G.diameter(algorithm='TYY')\n....: %time G.diameter()\n....: \nCPU times: user 1min 9s, sys: 218 ms, total: 1min 9s\nWall time: 1min 10s\n2\nCPU times: user 36.7 s, sys: 232 ms, total: 36.9 s\nWall time: 37.1 s\n2\nsage: G = DiGraph([[1,2]])\n....: while not G.is_strongly_connected():\n....:     G = digraphs.RandomDirectedGNP(5000, 0.1)\n....: \n....: %time G.diameter(algorithm='TYY')\n....: %time G.diameter()\n....: \nCPU times: user 30.3 s, sys: 24.1 ms, total: 30.3 s\nWall time: 30.3 s\n2\nCPU times: user 16.4 s, sys: 64.1 ms, total: 16.4 s\nWall time: 16.4 s\n2\nsage: G = DiGraph([[1,2]])\n....: while not G.is_strongly_connected():\n....:     G = digraphs.RandomDirectedGNP(5000, 0.05)\n....: \n....: %time G.diameter(algorithm='TYY')\n....: %time G.diameter()\n....: \nCPU times: user 665 ms, sys: 13 \u00b5s, total: 665 ms\nWall time: 665 ms\n3\nCPU times: user 7.59 s, sys: 4.04 ms, total: 7.6 s\nWall time: 7.6 s\n3",
    "created_at": "2020-03-15T20:09:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564436",
    "user": "https://github.com/tabus"
}
```

<a id='comment:15'></a>
I have been experimenting and it seems this method is more efficient when the graph is sparse.
It should happen because the method creates a short_digraph with the reverse edges, something that iFUB does not have to do.

```
sage: G = DiGraph([[1,2]])
....: while not G.is_strongly_connected():
....:     G = digraphs.RandomDirectedGNP(1000, 0.2)
....: 
....: %time G.diameter(algorithm='TYY')
....: %time G.diameter()
....: 
CPU times: user 887 ms, sys: 11.9 ms, total: 899 ms
Wall time: 912 ms
2
CPU times: user 542 ms, sys: 2.96 ms, total: 545 ms
Wall time: 549 ms
2
sage: G = DiGraph([[1,2]])
....: while not G.is_strongly_connected():
....:     G = digraphs.RandomDirectedGNP(1000, 0.1)
....: 
....: %time G.diameter(algorithm='TYY')
....: %time G.diameter()
....: 
CPU times: user 77.5 ms, sys: 0 ns, total: 77.5 ms
Wall time: 78.5 ms
3
CPU times: user 314 ms, sys: 3.66 ms, total: 317 ms
Wall time: 320 ms
3
sage: G = DiGraph([[1,2]])
....: while not G.is_strongly_connected():
....:     G = digraphs.RandomDirectedGNP(1000, 0.01)
....: 
....: %time G.diameter(algorithm='TYY')
....: %time G.diameter()
....: 
CPU times: user 22.5 ms, sys: 0 ns, total: 22.5 ms
Wall time: 31.6 ms
6
CPU times: user 54.6 ms, sys: 196 ¬µs, total: 54.8 ms
Wall time: 63.6 ms
6
sage: G = DiGraph([[1,2]])
....: while not G.is_strongly_connected():
....:     G = digraphs.RandomDirectedGNP(5000, 0.2)
....: 
....: %time G.diameter(algorithm='TYY')
....: %time G.diameter()
....: 
CPU times: user 1min 9s, sys: 218 ms, total: 1min 9s
Wall time: 1min 10s
2
CPU times: user 36.7 s, sys: 232 ms, total: 36.9 s
Wall time: 37.1 s
2
sage: G = DiGraph([[1,2]])
....: while not G.is_strongly_connected():
....:     G = digraphs.RandomDirectedGNP(5000, 0.1)
....: 
....: %time G.diameter(algorithm='TYY')
....: %time G.diameter()
....: 
CPU times: user 30.3 s, sys: 24.1 ms, total: 30.3 s
Wall time: 30.3 s
2
CPU times: user 16.4 s, sys: 64.1 ms, total: 16.4 s
Wall time: 16.4 s
2
sage: G = DiGraph([[1,2]])
....: while not G.is_strongly_connected():
....:     G = digraphs.RandomDirectedGNP(5000, 0.05)
....: 
....: %time G.diameter(algorithm='TYY')
....: %time G.diameter()
....: 
CPU times: user 665 ms, sys: 13 ¬µs, total: 665 ms
Wall time: 665 ms
3
CPU times: user 7.59 s, sys: 4.04 ms, total: 7.6 s
Wall time: 7.6 s
3



---

archive/issue_comments_564437.json:
```json
{
    "body": "Changing commit from \"81a019f35d2ba857cb2497feb4f84d2b12174fec\" to \"781538fe74c8c2d6bfc998d8bba2180caab86cc0\"",
    "created_at": "2020-03-15T20:13:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564437",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "81a019f35d2ba857cb2497feb4f84d2b12174fec" to "781538fe74c8c2d6bfc998d8bba2180caab86cc0"



---

archive/issue_comments_564438.json:
```json
{
    "body": "<a id='comment:16'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------|\n|[781538f](https://github.com/sagemath/sagetrac-mirror/commit/781538fe74c8c2d6bfc998d8bba2180caab86cc0)|`Added note to doctest warning that the method is faster for sparse graphs`|",
    "created_at": "2020-03-15T20:13:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564438",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------|
|[781538f](https://github.com/sagemath/sagetrac-mirror/commit/781538fe74c8c2d6bfc998d8bba2180caab86cc0)|`Added note to doctest warning that the method is faster for sparse graphs`|



---

archive/issue_comments_564439.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-03-15T20:14:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564439",
    "user": "https://github.com/tabus"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_564440.json:
```json
{
    "body": "<a id='comment:18'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[a79cfd1](https://github.com/sagemath/sagetrac-mirror/commit/a79cfd1832d577de512d4bd135d342facbb9d9f6)|`Added reference + Disposed of memory`|",
    "created_at": "2020-03-16T18:10:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564440",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[a79cfd1](https://github.com/sagemath/sagetrac-mirror/commit/a79cfd1832d577de512d4bd135d342facbb9d9f6)|`Added reference + Disposed of memory`|



---

archive/issue_comments_564441.json:
```json
{
    "body": "Changing commit from \"781538fe74c8c2d6bfc998d8bba2180caab86cc0\" to \"a79cfd1832d577de512d4bd135d342facbb9d9f6\"",
    "created_at": "2020-03-16T18:10:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564441",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "781538fe74c8c2d6bfc998d8bba2180caab86cc0" to "a79cfd1832d577de512d4bd135d342facbb9d9f6"



---

archive/issue_comments_564442.json:
```json
{
    "body": "<a id='comment:19'></a>\nFYI, #29346 also proposes an implementation of the same algorithm. Authors could join forces to get a better code.",
    "created_at": "2020-03-17T19:34:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564442",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:19'></a>
FYI, #29346 also proposes an implementation of the same algorithm. Authors could join forces to get a better code.



---

archive/issue_comments_564443.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [dcoudert](#comment%3A19):\n> FYI, #29346 also proposes an implementation of the same algorithm. Authors could join forces to get a better code.\n\n#29346 implements the same algorithm with the modified definition of diameter, where we consider the maximum finite eccentricities only. This seems counter intuitive to have different algorithms giving different answers",
    "created_at": "2020-03-24T00:12:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564443",
    "user": "https://github.com/tabus"
}
```

<a id='comment:20'></a>
Replying to [dcoudert](#comment%3A19):
> FYI, #29346 also proposes an implementation of the same algorithm. Authors could join forces to get a better code.

#29346 implements the same algorithm with the modified definition of diameter, where we consider the maximum finite eccentricities only. This seems counter intuitive to have different algorithms giving different answers



---

archive/issue_comments_564444.json:
```json
{
    "body": "<a id='comment:21'></a>\nMay be with a proper documentation and an appropriate parameter, the same method could be used for both definitions, no?",
    "created_at": "2020-03-24T10:01:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564444",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:21'></a>
May be with a proper documentation and an appropriate parameter, the same method could be used for both definitions, no?



---

archive/issue_comments_564445.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [dcoudert](#comment%3A21):\n> May be with a proper documentation and an appropriate parameter, the same method could be used for both definitions, no?\n\nAbsolutely, but in that case the implementation over at #29346 should be used, mine has a lot of simplifications due to the restriction to connected graphs",
    "created_at": "2020-03-24T10:51:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564445",
    "user": "https://github.com/tabus"
}
```

<a id='comment:22'></a>
Replying to [dcoudert](#comment%3A21):
> May be with a proper documentation and an appropriate parameter, the same method could be used for both definitions, no?

Absolutely, but in that case the implementation over at #29346 should be used, mine has a lot of simplifications due to the restriction to connected graphs



---

archive/issue_events_092035.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29309#event-92035"
}
```



---

archive/issue_comments_564446.json:
```json
{
    "body": "<a id='comment:23'></a>\nBatch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.",
    "created_at": "2020-04-14T19:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564446",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'></a>
Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.



---

archive/issue_comments_564447.json:
```json
{
    "body": "<a id='comment:24'></a>\nred flag",
    "created_at": "2020-06-20T07:22:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564447",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:24'></a>
red flag



---

archive/issue_comments_564448.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-06-20T07:22:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564448",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_events_092036.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29309#event-92036"
}
```



---

archive/issue_events_092037.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29309#event-92037"
}
```



---

archive/issue_events_092038.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29309#event-92038"
}
```



---

archive/issue_events_092039.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29309#event-92039"
}
```



---

archive/issue_comments_564449.json:
```json
{
    "body": "<a id='comment:26'></a>\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564449",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>
Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_564450.json:
```json
{
    "body": "<a id='comment:27'></a>\nSetting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29309#issuecomment-564450",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>
Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_092040.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29309#event-92040"
}
```



---

archive/issue_events_092041.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29309#event-92041"
}
```



---

archive/issue_events_092042.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29309#event-92042"
}
```



---

archive/issue_events_092043.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29309#event-92043"
}
```



---

archive/issue_events_092044.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:27:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29309#event-92044"
}
```



---

archive/issue_events_092045.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:27:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29309#event-92045"
}
```



---

archive/issue_events_092046.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29309#event-92046"
}
```



---

archive/issue_events_092047.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29309",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29309#event-92047"
}
```
