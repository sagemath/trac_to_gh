# Issue 29865: Modularization of sagelib: Break out separate packages sagemath-objects, sagemath-categories

archive/issues_029628.json:
```json
{
    "body": "This ticket creates two experimental packages https://pypi.org/project/sagemath-objects/ and https://pypi.org/project/sagemath-categories/, outlined in Meta-ticket #29705, that consist of small subsets of the modules of sagelib, making Sage objects, the element/parent framework, categories, the coercion system and the related metaclasses available.\n\nTo build an sdist:\n\n```\n./sage -sh build/pkgs/sagemath_objects/spkg-src\n./sage -sh build/pkgs/sagemath_categories/spkg-src\n```\nThis creates a pip-installable source distribution `sagemath-objects-VERSION.tar.gz` (or `sagemath-categories-VERSION.tar.gz`) in `upstream/`.  \n\nThe distributions depend only on `Cython`, `pkgconfig`, `cysignals`, `gmpy2`. The latter, of course, requires various headers and libraries, so they are not quite \"purely\" pip-installable packages.\n\nThe goal is for all modules of **sagemath-objects** and **sagemath-categories** to be importable even when `sagelib` is not installed.  This can be tested (with tox) as follows:\n\n```\n./bootstrap && ./sage -sh -c '(cd build/pkgs/sagemath_objects/src && tox -v -v -e py39)'\n./bootstrap && ./sage -sh -c '(cd build/pkgs/sagemath_categories/src && tox -v -v -e py39)'\n```\n\n**sagemath-categories** is intended to have **sagemath-objects** as a prerequisite. However, currently, **sagemath-categories** is an independent distribution that provides a superset of the modules of **sagemath-objects**.\n\nRecombining it with the rest of sagelib via namespace package magic as outlined in #29705 is not implemented on this ticket. This will be done in follow-up tickets.\n\n\nCC:  @videlec @tscrim @orlitzky @nthiery @timokau @fchapoton @tobiasdiez @kwankyu @vbraun\n\nKeywords: sd111\n\nReviewer: Kwankyu Lee\n\nAuthor: Matthias Koeppe\n\nBranch: 36d6b097ab164189a244eb8169d2b8efb913972a\n\nDependencies: #29039, #32933\n\nCommit: 36d6b097ab164189a244eb8169d2b8efb913972a\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29865\n\n",
    "closed_at": "2022-01-31T23:31:48Z",
    "created_at": "2020-06-15T04:26:08Z",
    "labels": [
        "component: refactoring"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "Modularization of sagelib: Break out separate packages sagemath-objects, sagemath-categories",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29865",
    "user": "https://github.com/mkoeppe"
}
```
This ticket creates two experimental packages https://pypi.org/project/sagemath-objects/ and https://pypi.org/project/sagemath-categories/, outlined in Meta-ticket #29705, that consist of small subsets of the modules of sagelib, making Sage objects, the element/parent framework, categories, the coercion system and the related metaclasses available.

To build an sdist:

```
./sage -sh build/pkgs/sagemath_objects/spkg-src
./sage -sh build/pkgs/sagemath_categories/spkg-src
```
This creates a pip-installable source distribution `sagemath-objects-VERSION.tar.gz` (or `sagemath-categories-VERSION.tar.gz`) in `upstream/`.  

The distributions depend only on `Cython`, `pkgconfig`, `cysignals`, `gmpy2`. The latter, of course, requires various headers and libraries, so they are not quite "purely" pip-installable packages.

The goal is for all modules of **sagemath-objects** and **sagemath-categories** to be importable even when `sagelib` is not installed.  This can be tested (with tox) as follows:

```
./bootstrap && ./sage -sh -c '(cd build/pkgs/sagemath_objects/src && tox -v -v -e py39)'
./bootstrap && ./sage -sh -c '(cd build/pkgs/sagemath_categories/src && tox -v -v -e py39)'
```

**sagemath-categories** is intended to have **sagemath-objects** as a prerequisite. However, currently, **sagemath-categories** is an independent distribution that provides a superset of the modules of **sagemath-objects**.

Recombining it with the rest of sagelib via namespace package magic as outlined in #29705 is not implemented on this ticket. This will be done in follow-up tickets.


CC:  @videlec @tscrim @orlitzky @nthiery @timokau @fchapoton @tobiasdiez @kwankyu @vbraun

Keywords: sd111

Reviewer: Kwankyu Lee

Author: Matthias Koeppe

Branch: 36d6b097ab164189a244eb8169d2b8efb913972a

Dependencies: #29039, #32933

Commit: 36d6b097ab164189a244eb8169d2b8efb913972a

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29865





---

archive/issue_events_076516.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-06-15T04:27:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29865#event-76516"
}
```



---

archive/issue_comments_420267.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-15T07:09:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420267",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420268.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-15T07:47:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420268",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420269.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-15T16:17:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420269",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420270.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2020-06-15T19:24:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420270",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_420271.json:
```json
{
    "body": "<a id='comment:11'></a>`import sage.structure.all` succeeds now",
    "created_at": "2020-06-15T19:25:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420271",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>`import sage.structure.all` succeeds now



---

archive/issue_comments_420272.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-15T19:50:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420272",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420273.json:
```json
{
    "body": "<a id='comment:13'></a>Some of the Python modules in `sage.categories` seem to be sensitive to import order.\n\n```\n$ build/pkgs/sage_objects/src/.tox/python/bin/python -c 'import sage.categories.map'\nTraceback (most recent call last):\n  File \"<string>\", line 1, in <module>\n  File \"sage/categories/map.pyx\", line 1, in init sage.categories.map (build/cythonized/sage/categories/map.c:16980)\n  File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sage_objects/src/.tox/python/lib/python3.7/site-packages/sage/structure/__init__.py\", line 2, in <module>\n    import sage.structure.element\n  File \"sage/structure/parent.pxd\", line 12, in init sage.structure.element (build/cythonized/sage/structure/element.c:34583)\n  File \"sage/categories/map.pxd\", line 4, in init sage.structure.parent (build/cythonized/sage/structure/parent.c:27689)\nAttributeError: module 'sage.categories.map' has no attribute 'Map'\n```\nvs.\n\n```\n$ build/pkgs/sage_objects/src/.tox/python/bin/python -c 'import sage.structure.all, sage.categories.map'\n# succeeds\n```",
    "created_at": "2020-06-15T19:52:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420273",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>Some of the Python modules in `sage.categories` seem to be sensitive to import order.

```
$ build/pkgs/sage_objects/src/.tox/python/bin/python -c 'import sage.categories.map'
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "sage/categories/map.pyx", line 1, in init sage.categories.map (build/cythonized/sage/categories/map.c:16980)
  File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sage_objects/src/.tox/python/lib/python3.7/site-packages/sage/structure/__init__.py", line 2, in <module>
    import sage.structure.element
  File "sage/structure/parent.pxd", line 12, in init sage.structure.element (build/cythonized/sage/structure/element.c:34583)
  File "sage/categories/map.pxd", line 4, in init sage.structure.parent (build/cythonized/sage/structure/parent.c:27689)
AttributeError: module 'sage.categories.map' has no attribute 'Map'
```
vs.

```
$ build/pkgs/sage_objects/src/.tox/python/bin/python -c 'import sage.structure.all, sage.categories.map'
# succeeds
```



---

archive/issue_comments_420274.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-15T20:24:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420274",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420275.json:
```json
{
    "body": "<a id='comment:15'></a>\n```\n$ build/pkgs/sage_objects/src/.tox/python/bin/python -c 'import sage.structure.all, sage.categories.all'\n# succeeds\n```\nbut does not succeed without importing `sage.structure.all` first...",
    "created_at": "2020-06-15T20:26:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420275",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>
```
$ build/pkgs/sage_objects/src/.tox/python/bin/python -c 'import sage.structure.all, sage.categories.all'
# succeeds
```
but does not succeed without importing `sage.structure.all` first...



---

archive/issue_comments_420276.json:
```json
{
    "body": "<a id='comment:16'></a>\n```\nbuild/pkgs/sage_objects/src/.tox/python/bin/python -c 'import sage.structure.all, sage.categories.all, sage.categories.facade_sets; sage.categories.facade_sets.FacadeSets().example()'\nTraceback (most recent call last):\n  File \"<string>\", line 1, in <module>\n  File \"sage/misc/classcall_metaclass.pyx\", line 322, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (build/cythonized/sage/misc/classcall_metaclass.c:1717)\n  File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sage_objects/src/.tox/python/lib/python3.7/site-packages/sage/categories/category_with_axiom.py\", line 1993, in __classcall__\n    (base_category_class, axiom) = cls._base_category_class_and_axiom\n  File \"sage/misc/lazy_attribute.pyx\", line 699, in sage.misc.lazy_attribute.lazy_class_attribute.__get__ (build/cythonized/sage/misc/lazy_attribute.c:2894)\n  File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sage_objects/src/.tox/python/lib/python3.7/site-packages/sage/categories/category_with_axiom.py\", line 1933, in _base_category_class_and_axiom\n    base_category_class, axiom = base_category_class_and_axiom(cls)\n  File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sage_objects/src/.tox/python/lib/python3.7/site-packages/sage/categories/category_with_axiom.py\", line 1790, in base_category_class_and_axiom\n    assert getattr(base_category_class, axiom, None) is cls, \\\n  File \"sage/misc/lazy_import.pyx\", line 498, in sage.misc.lazy_import.LazyImport.__get__ (build/cythonized/sage/misc/lazy_import.c:4236)\n  File \"sage/misc/lazy_import.pyx\", line 188, in sage.misc.lazy_import.LazyImport.get_object (build/cythonized/sage/misc/lazy_import.c:2340)\n  File \"sage/misc/lazy_import.pyx\", line 217, in sage.misc.lazy_import.LazyImport._get_object (build/cythonized/sage/misc/lazy_import.c:2482)\nRuntimeError: resolving lazy import FacadeSets during startup\n```",
    "created_at": "2020-06-15T20:39:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420276",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>
```
build/pkgs/sage_objects/src/.tox/python/bin/python -c 'import sage.structure.all, sage.categories.all, sage.categories.facade_sets; sage.categories.facade_sets.FacadeSets().example()'
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "sage/misc/classcall_metaclass.pyx", line 322, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (build/cythonized/sage/misc/classcall_metaclass.c:1717)
  File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sage_objects/src/.tox/python/lib/python3.7/site-packages/sage/categories/category_with_axiom.py", line 1993, in __classcall__
    (base_category_class, axiom) = cls._base_category_class_and_axiom
  File "sage/misc/lazy_attribute.pyx", line 699, in sage.misc.lazy_attribute.lazy_class_attribute.__get__ (build/cythonized/sage/misc/lazy_attribute.c:2894)
  File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sage_objects/src/.tox/python/lib/python3.7/site-packages/sage/categories/category_with_axiom.py", line 1933, in _base_category_class_and_axiom
    base_category_class, axiom = base_category_class_and_axiom(cls)
  File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sage_objects/src/.tox/python/lib/python3.7/site-packages/sage/categories/category_with_axiom.py", line 1790, in base_category_class_and_axiom
    assert getattr(base_category_class, axiom, None) is cls, \
  File "sage/misc/lazy_import.pyx", line 498, in sage.misc.lazy_import.LazyImport.__get__ (build/cythonized/sage/misc/lazy_import.c:4236)
  File "sage/misc/lazy_import.pyx", line 188, in sage.misc.lazy_import.LazyImport.get_object (build/cythonized/sage/misc/lazy_import.c:2340)
  File "sage/misc/lazy_import.pyx", line 217, in sage.misc.lazy_import.LazyImport._get_object (build/cythonized/sage/misc/lazy_import.c:2482)
RuntimeError: resolving lazy import FacadeSets during startup
```



---

archive/issue_comments_420277.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-15T21:43:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420277",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420278.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2020-06-16T01:01:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420278",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_events_076517.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-06-16T01:04:08Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29865#event-76517"
}
```



---

archive/issue_events_076518.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-06-16T01:04:08Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29865#event-76518"
}
```



---

archive/issue_comments_420279.json:
```json
{
    "body": "<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-16T01:32:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420279",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420280.json:
```json
{
    "body": "<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-16T01:55:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420280",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420281.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-16T02:17:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420281",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420282.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-06-16T12:20:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420282",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_420283.json:
```json
{
    "body": "<a id='comment:32'></a>As part of this ticket I made a number of changes to import statements throughout `sage.categories`.\nhttps://git.sagemath.org/sage.git/diff/src/sage/categories/?id=5ec60422cff0e536e913c8e6306de45147b2f129&id2=e2dcdeeabb578c37bcf0361c0be3079315e9252c\n\nShould I put them on a separate ticket to facilitate review?",
    "created_at": "2020-06-16T12:26:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420283",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:32'></a>As part of this ticket I made a number of changes to import statements throughout `sage.categories`.
https://git.sagemath.org/sage.git/diff/src/sage/categories/?id=5ec60422cff0e536e913c8e6306de45147b2f129&id2=e2dcdeeabb578c37bcf0361c0be3079315e9252c

Should I put them on a separate ticket to facilitate review?



---

archive/issue_comments_420284.json:
```json
{
    "body": "<a id='comment:35'></a>Replying to [comment:32 mkoeppe]:\n> As part of this ticket I made a number of changes to import statements throughout `sage.categories`.\n> https://git.sagemath.org/sage.git/diff/src/sage/categories/?id=5ec60422cff0e536e913c8e6306de45147b2f129&id2=e2dcdeeabb578c37bcf0361c0be3079315e9252c\n> \n> Should I put them on a separate ticket to facilitate review?\n\nThis is now #29873",
    "created_at": "2020-06-16T19:00:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420284",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:35'></a>Replying to [comment:32 mkoeppe]:
> As part of this ticket I made a number of changes to import statements throughout `sage.categories`.
> https://git.sagemath.org/sage.git/diff/src/sage/categories/?id=5ec60422cff0e536e913c8e6306de45147b2f129&id2=e2dcdeeabb578c37bcf0361c0be3079315e9252c
> 
> Should I put them on a separate ticket to facilitate review?

This is now #29873



---

archive/issue_comments_420285.json:
```json
{
    "body": "<a id='comment:36'></a>Can all of the functions/methods in sage-objects be run after a pip install, or is it only the import that works? (The existing doctests use various things from sage.all, so no one expects those to work.)",
    "created_at": "2020-06-16T19:58:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420285",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:36'></a>Can all of the functions/methods in sage-objects be run after a pip install, or is it only the import that works? (The existing doctests use various things from sage.all, so no one expects those to work.)



---

archive/issue_comments_420286.json:
```json
{
    "body": "<a id='comment:37'></a>This is unknown. Activating a part of the testsuite that can/does work, and finding the best way to test this, is TBD. \nI hope some of it can be done through mocking (see #29874).",
    "created_at": "2020-06-16T20:03:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420286",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:37'></a>This is unknown. Activating a part of the testsuite that can/does work, and finding the best way to test this, is TBD. 
I hope some of it can be done through mocking (see #29874).



---

archive/issue_comments_420287.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-06-18T02:37:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420287",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_420288.json:
```json
{
    "body": "<a id='comment:44'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2020-06-18T03:43:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420288",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:44'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_420289.json:
```json
{
    "body": "<a id='comment:45'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-18T04:53:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420289",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:45'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420290.json:
```json
{
    "body": "<a id='comment:46'></a>Tests run at https://github.com/mkoeppe/sage/actions/runs/139194878",
    "created_at": "2020-06-18T05:09:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420290",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:46'></a>Tests run at https://github.com/mkoeppe/sage/actions/runs/139194878



---

archive/issue_comments_420291.json:
```json
{
    "body": "<a id='comment:48'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-18T18:41:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420291",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:48'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420292.json:
```json
{
    "body": "<a id='comment:49'></a>https://github.com/mkoeppe/sage/runs/785565655:\n\n```\n  [sage_objects-9.1.rc5]     File \"setup.py\", line 6, in <module>\n  [sage_objects-9.1.rc5]       from sage_setup.command.sage_build_cython import sage_build_cython\n  [sage_objects-9.1.rc5]     File \"/sage/build/pkgs/sage_objects/src/sage_setup/command/sage_build_cython.py\", line 19, in <module>\n  [sage_objects-9.1.rc5]       from sage_setup.library_order import library_order\n  [sage_objects-9.1.rc5]     File \"/sage/build/pkgs/sage_objects/src/sage_setup/library_order.py\", line 54, in <module>\n  [sage_objects-9.1.rc5]       m4ri_pc = pkgconfig.parse('m4ri')\n  [sage_objects-9.1.rc5]     File \"/sage/local/lib/python3.7/site-packages/pkgconfig/pkgconfig.py\", line 248, in parse\n  [sage_objects-9.1.rc5]       _raise_if_not_exists(package)\n  [sage_objects-9.1.rc5]     File \"/sage/local/lib/python3.7/site-packages/pkgconfig/pkgconfig.py\", line 103, in _raise_if_not_exists\n  [sage_objects-9.1.rc5]       raise PackageNotFoundError(package)\n  [sage_objects-9.1.rc5]   pkgconfig.pkgconfig.PackageNotFoundError: m4ri not found\n  [sage_objects-9.1.rc5] Full log file: /sage/logs/pkgs/sage_objects-9.1.rc5.log\n```",
    "created_at": "2020-06-19T17:34:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420292",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:49'></a>https://github.com/mkoeppe/sage/runs/785565655:

```
  [sage_objects-9.1.rc5]     File "setup.py", line 6, in <module>
  [sage_objects-9.1.rc5]       from sage_setup.command.sage_build_cython import sage_build_cython
  [sage_objects-9.1.rc5]     File "/sage/build/pkgs/sage_objects/src/sage_setup/command/sage_build_cython.py", line 19, in <module>
  [sage_objects-9.1.rc5]       from sage_setup.library_order import library_order
  [sage_objects-9.1.rc5]     File "/sage/build/pkgs/sage_objects/src/sage_setup/library_order.py", line 54, in <module>
  [sage_objects-9.1.rc5]       m4ri_pc = pkgconfig.parse('m4ri')
  [sage_objects-9.1.rc5]     File "/sage/local/lib/python3.7/site-packages/pkgconfig/pkgconfig.py", line 248, in parse
  [sage_objects-9.1.rc5]       _raise_if_not_exists(package)
  [sage_objects-9.1.rc5]     File "/sage/local/lib/python3.7/site-packages/pkgconfig/pkgconfig.py", line 103, in _raise_if_not_exists
  [sage_objects-9.1.rc5]       raise PackageNotFoundError(package)
  [sage_objects-9.1.rc5]   pkgconfig.pkgconfig.PackageNotFoundError: m4ri not found
  [sage_objects-9.1.rc5] Full log file: /sage/logs/pkgs/sage_objects-9.1.rc5.log
```



---

archive/issue_comments_420293.json:
```json
{
    "body": "<a id='comment:50'></a>Also, of course, installation of `sage_objects` breaks other things in the tests:\n\n```\n(build/cythonized/sage/plot/plot3d/shapes.c:12604)\n  File \"sage/ext/interpreters/wrapper_rdf.pxd\", line 7, in init sage.plot.plot3d.parametric_surface (build/cythonized/sage/plot/plot3d/parametric_surface.c:12057)\nModuleNotFoundError: No module named 'sage.ext.interpreters.wrapper_rdf'\n```",
    "created_at": "2020-06-19T17:35:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420293",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:50'></a>Also, of course, installation of `sage_objects` breaks other things in the tests:

```
(build/cythonized/sage/plot/plot3d/shapes.c:12604)
  File "sage/ext/interpreters/wrapper_rdf.pxd", line 7, in init sage.plot.plot3d.parametric_surface (build/cythonized/sage/plot/plot3d/parametric_surface.c:12057)
ModuleNotFoundError: No module named 'sage.ext.interpreters.wrapper_rdf'
```



---

archive/issue_comments_420294.json:
```json
{
    "body": "<a id='comment:53'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-20T01:34:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420294",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:53'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420295.json:
```json
{
    "body": "<a id='comment:54'></a>I'll probably make `sage-objects` smaller by only including `sage.categories.category` rather than all of `sage.categories`;\nand add a package `sage-categories` that is larger than the current version, including also `sage.rings.ring` and similar abstract classes.\n(On this ticket, `sage-categories` would just be a larger package whose MANIFEST.in is a superset of that of `sage-objects`. It will be done by dependencies later.)",
    "created_at": "2020-06-20T05:59:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420295",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:54'></a>I'll probably make `sage-objects` smaller by only including `sage.categories.category` rather than all of `sage.categories`;
and add a package `sage-categories` that is larger than the current version, including also `sage.rings.ring` and similar abstract classes.
(On this ticket, `sage-categories` would just be a larger package whose MANIFEST.in is a superset of that of `sage-objects`. It will be done by dependencies later.)



---

archive/issue_comments_420296.json:
```json
{
    "body": "<a id='comment:55'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-20T06:01:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420296",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:55'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420297.json:
```json
{
    "body": "<a id='comment:56'></a>This will need #29916 (`sage.structure`: Replace import of `sage.categories.all` by more specific imports)",
    "created_at": "2020-06-20T14:45:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420297",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:56'></a>This will need #29916 (`sage.structure`: Replace import of `sage.categories.all` by more specific imports)



---

archive/issue_comments_420298.json:
```json
{
    "body": "<a id='comment:60'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2020-06-20T19:27:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420298",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:60'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_420299.json:
```json
{
    "body": "<a id='comment:61'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-20T20:02:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420299",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:61'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420300.json:
```json
{
    "body": "<a id='comment:63'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-20T21:42:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420300",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:63'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420301.json:
```json
{
    "body": "<a id='comment:64'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2020-06-21T01:17:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420301",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:64'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_420302.json:
```json
{
    "body": "<a id='comment:65'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2020-06-22T23:23:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420302",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:65'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_420303.json:
```json
{
    "body": "<a id='comment:66'></a>Doctesting sage-objects now \"works\" thanks to #29922.\nOf course, most doctests fail because all the concrete classes that are used in the examples are not defined. And the preparsed language also requires `Integer` and `RealNumber`, which we do not have.",
    "created_at": "2020-06-22T23:24:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420303",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:66'></a>Doctesting sage-objects now "works" thanks to #29922.
Of course, most doctests fail because all the concrete classes that are used in the examples are not defined. And the preparsed language also requires `Integer` and `RealNumber`, which we do not have.



---

archive/issue_comments_420304.json:
```json
{
    "body": "<a id='comment:67'></a>Replying to [comment:54 mkoeppe]:\n> I'll probably make `sage-objects` smaller by only including `sage.categories.category` rather than all of `sage.categories`;\n\n\nthis is done (but I temporarily added modules to do doctesting)\n\n> and add a package `sage-categories` that is larger than the current version, including also `sage.rings.ring` and similar abstract classes.\n\n\nThis is probably best to do if we can include `Integer` as well, so that depends on #29911 (remove ntl dependency)",
    "created_at": "2020-06-23T00:36:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420304",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:67'></a>Replying to [comment:54 mkoeppe]:
> I'll probably make `sage-objects` smaller by only including `sage.categories.category` rather than all of `sage.categories`;


this is done (but I temporarily added modules to do doctesting)

> and add a package `sage-categories` that is larger than the current version, including also `sage.rings.ring` and similar abstract classes.


This is probably best to do if we can include `Integer` as well, so that depends on #29911 (remove ntl dependency)



---

archive/issue_comments_420305.json:
```json
{
    "body": "<a id='comment:68'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-28T01:05:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420305",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:68'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420306.json:
```json
{
    "body": "<a id='comment:70'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2020-06-29T05:45:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420306",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:70'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_420307.json:
```json
{
    "body": "<a id='comment:71'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-29T18:38:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420307",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:71'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420308.json:
```json
{
    "body": "<a id='comment:72'></a>Before we can add `sage.rings.integer`, we need #30022 (`sage.rings.integer`, `rational`: Remove compile-time dependency on `cypari2` and `flint`).",
    "created_at": "2020-06-29T18:39:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420308",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:72'></a>Before we can add `sage.rings.integer`, we need #30022 (`sage.rings.integer`, `rational`: Remove compile-time dependency on `cypari2` and `flint`).



---

archive/issue_comments_420309.json:
```json
{
    "body": "<a id='comment:73'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-29T18:52:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420309",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:73'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420310.json:
```json
{
    "body": "<a id='comment:74'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2020-07-26T05:36:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420310",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:74'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_420311.json:
```json
{
    "body": "<a id='comment:77'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-26T05:48:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420311",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:77'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_076519.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-26T05:49:39Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29865#event-76519"
}
```



---

archive/issue_events_076520.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-26T05:49:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29865#event-76520"
}
```



---

archive/issue_comments_420312.json:
```json
{
    "body": "<a id='comment:79'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2020-09-08T22:05:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420312",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:79'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_420313.json:
```json
{
    "body": "<a id='comment:81'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-08T22:17:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420313",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:81'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420314.json:
```json
{
    "body": "<a id='comment:83'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-10-27T22:26:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420314",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:83'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420315.json:
```json
{
    "body": "<a id='comment:84'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-10-27T23:18:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420315",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:84'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420316.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd111\".",
    "created_at": "2020-12-06T17:42:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420316",
    "user": "https://github.com/mkoeppe"
}
```

Changing keywords from "" to "sd111".



---

archive/issue_comments_420317.json:
```json
{
    "body": "<a id='comment:88'></a>Big +1 from me.  This would be very useful for #31297 and for gappy in general.",
    "created_at": "2021-02-03T13:40:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420317",
    "user": "https://github.com/embray"
}
```

<a id='comment:88'></a>Big +1 from me.  This would be very useful for #31297 and for gappy in general.



---

archive/issue_comments_420318.json:
```json
{
    "body": "<a id='comment:89'></a>Replying to [comment:54 mkoeppe]:\n> I'll probably make `sage-objects` smaller by only including `sage.categories.category` rather than all of `sage.categories`;\n> and add a package `sage-categories` that is larger than the current version, including also `sage.rings.ring` and similar abstract classes.\n> (On this ticket, `sage-categories` would just be a larger package whose MANIFEST.in is a superset of that of `sage-objects`. It will be done by dependencies later.)\n\n\nOkay.  I was going to say, it seems like sage-objects still depends too heavily on too much of `sage.categories`.  For my purposes I would want it to be as light-weight as possible.\n\nI think it might also be worth it to further divide `SageObject`, `Parent`, and `Element` into some `SageObjectBase`, `ParentBase`, and `ElementBase` that only provide the minimal C-level type structs necessary to bootstrap the rest of the hierarchy.\n\nFor `SageObject` this is trivial because its type struct is empty.  For `Parent` and `Element` the `Base` classes need to consist primarily of any cdef attributes which define the type struct.  Anything else is optional and can be bolted on in a subclass.",
    "created_at": "2021-02-03T14:01:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420318",
    "user": "https://github.com/embray"
}
```

<a id='comment:89'></a>Replying to [comment:54 mkoeppe]:
> I'll probably make `sage-objects` smaller by only including `sage.categories.category` rather than all of `sage.categories`;
> and add a package `sage-categories` that is larger than the current version, including also `sage.rings.ring` and similar abstract classes.
> (On this ticket, `sage-categories` would just be a larger package whose MANIFEST.in is a superset of that of `sage-objects`. It will be done by dependencies later.)


Okay.  I was going to say, it seems like sage-objects still depends too heavily on too much of `sage.categories`.  For my purposes I would want it to be as light-weight as possible.

I think it might also be worth it to further divide `SageObject`, `Parent`, and `Element` into some `SageObjectBase`, `ParentBase`, and `ElementBase` that only provide the minimal C-level type structs necessary to bootstrap the rest of the hierarchy.

For `SageObject` this is trivial because its type struct is empty.  For `Parent` and `Element` the `Base` classes need to consist primarily of any cdef attributes which define the type struct.  Anything else is optional and can be bolted on in a subclass.



---

archive/issue_comments_420319.json:
```json
{
    "body": "<a id='comment:90'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-02-03T18:33:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420319",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:90'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420320.json:
```json
{
    "body": "<a id='comment:91'></a>Yes, I also hope that `sagemath-objects` can be eventually be made even smaller. But the coercion system pulls in quite a bit of the category system (in particular via pushout)",
    "created_at": "2021-02-03T18:41:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420320",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:91'></a>Yes, I also hope that `sagemath-objects` can be eventually be made even smaller. But the coercion system pulls in quite a bit of the category system (in particular via pushout)



---

archive/issue_events_076521.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-03T18:41:44Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29865#event-76521"
}
```



---

archive/issue_events_076522.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-03T18:41:44Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29865#event-76522"
}
```



---

archive/issue_comments_420321.json:
```json
{
    "body": "<a id='comment:94'></a>This is really cool :-)\n\nI won't alas have time to seriously follow the discussion. But\nif at some point it can be useful, I certainly can free myself\nfor a live discussion.",
    "created_at": "2021-02-03T21:05:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420321",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:94'></a>This is really cool :-)

I won't alas have time to seriously follow the discussion. But
if at some point it can be useful, I certainly can free myself
for a live discussion.



---

archive/issue_comments_420322.json:
```json
{
    "body": "<a id='comment:95'></a>Thanks, Nicolas!",
    "created_at": "2021-02-03T21:10:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420322",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:95'></a>Thanks, Nicolas!



---

archive/issue_comments_420323.json:
```json
{
    "body": "<a id='comment:96'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-02-03T21:16:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420323",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:96'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420324.json:
```json
{
    "body": "<a id='comment:97'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-02-03T21:40:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420324",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:97'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420325.json:
```json
{
    "body": "<a id='comment:98'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-02-03T21:42:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420325",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:98'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_420326.json:
```json
{
    "body": "<a id='comment:0'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-02-03T22:03:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420326",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:0'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420327.json:
```json
{
    "body": "<a id='comment:1'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-02-03T22:33:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420327",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420328.json:
```json
{
    "body": "<a id='comment:2'></a>what's the status here?",
    "created_at": "2021-04-22T09:17:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420328",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:2'></a>what's the status here?



---

archive/issue_comments_420329.json:
```json
{
    "body": "<a id='comment:3'></a>It works but I will want to update it according to the proposed new layout for embedded source trees (#31577)",
    "created_at": "2021-04-22T16:07:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420329",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>It works but I will want to update it according to the proposed new layout for embedded source trees (#31577)



---

archive/issue_comments_420330.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2021-06-25T21:47:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420330",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_420331.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-06-25T22:06:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420331",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_420332.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-06-25T22:13:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420332",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_420333.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-06-25T22:28:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420333",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_420334.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-06-25T22:31:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420334",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_events_076523.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-09T21:07:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29865#event-76523"
}
```



---

archive/issue_events_076524.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-09T21:07:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29865#event-76524"
}
```



---

archive/issue_comments_420335.json:
```json
{
    "body": "<a id='comment:0'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-12T21:27:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420335",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:0'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420336.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-08-12T21:57:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420336",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_420337.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2021-08-12T23:41:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420337",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_420338.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-12T23:53:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420338",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420339.json:
```json
{
    "body": "<a id='comment:6'></a>\n```\n    File \"setup.py\", line 24, in <module>\n      from sage.env import SAGE_VERSION\n  ModuleNotFoundError: No module named 'sage'\n```",
    "created_at": "2021-08-12T23:57:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420339",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
```
    File "setup.py", line 24, in <module>
      from sage.env import SAGE_VERSION
  ModuleNotFoundError: No module named 'sage'
```



---

archive/issue_comments_420340.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-13T00:13:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420340",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420341.json:
```json
{
    "body": "<a id='comment:8'></a>\n```\n    File \"/private/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/pip-req-build-_o5ymrt1/sage_setup/library_order.py\", line 14, in <module>\n      aliases = cython_aliases()\n    File \"/private/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/pip-req-build-_o5ymrt1/sage/env.py\", line 451, in cython_aliases\n      import pkgconfig\n  ModuleNotFoundError: No module named 'pkgconfig'\n```",
    "created_at": "2021-08-13T00:14:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420341",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
```
    File "/private/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/pip-req-build-_o5ymrt1/sage_setup/library_order.py", line 14, in <module>
      aliases = cython_aliases()
    File "/private/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/pip-req-build-_o5ymrt1/sage/env.py", line 451, in cython_aliases
      import pkgconfig
  ModuleNotFoundError: No module named 'pkgconfig'
```



---

archive/issue_comments_420342.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-13T00:32:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420342",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420343.json:
```json
{
    "body": "<a id='comment:0'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-13T00:55:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420343",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:0'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420344.json:
```json
{
    "body": "<a id='comment:1'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-13T01:19:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420344",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420345.json:
```json
{
    "body": "<a id='comment:2'></a>\n```\n    File \"/private/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/pip-build-env-f9779kgd/overlay/lib/python3.9/site-packages/sage_setup/command/sage_build_cython.py\", line 208, in run\n      from ..library_order import library_order\n    File \"/private/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/pip-build-env-f9779kgd/overlay/lib/python3.9/site-packages/sage_setup/library_order.py\", line 14, in <module>\n      aliases = cython_aliases()\n    File \"/private/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/pip-req-build-8_9lsvo_/sage/env.py\", line 472, in cython_aliases\n      aliases[var + \"CFLAGS\"] = pkgconfig.cflags(lib).split()\n    File \"/private/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/pip-build-env-f9779kgd/overlay/lib/python3.9/site-packages/pkgconfig/pkgconfig.py\", line 144, in cflags\n      _raise_if_not_exists(package)\n    File \"/private/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/pip-build-env-f9779kgd/overlay/lib/python3.9/site-packages/pkgconfig/pkgconfig.py\", line 103, in _raise_if_not_exists\n      raise PackageNotFoundError(package)\n  pkgconfig.pkgconfig.PackageNotFoundError: fflas-ffpack not found\n```",
    "created_at": "2021-08-13T01:20:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420345",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
```
    File "/private/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/pip-build-env-f9779kgd/overlay/lib/python3.9/site-packages/sage_setup/command/sage_build_cython.py", line 208, in run
      from ..library_order import library_order
    File "/private/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/pip-build-env-f9779kgd/overlay/lib/python3.9/site-packages/sage_setup/library_order.py", line 14, in <module>
      aliases = cython_aliases()
    File "/private/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/pip-req-build-8_9lsvo_/sage/env.py", line 472, in cython_aliases
      aliases[var + "CFLAGS"] = pkgconfig.cflags(lib).split()
    File "/private/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/pip-build-env-f9779kgd/overlay/lib/python3.9/site-packages/pkgconfig/pkgconfig.py", line 144, in cflags
      _raise_if_not_exists(package)
    File "/private/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/pip-build-env-f9779kgd/overlay/lib/python3.9/site-packages/pkgconfig/pkgconfig.py", line 103, in _raise_if_not_exists
      raise PackageNotFoundError(package)
  pkgconfig.pkgconfig.PackageNotFoundError: fflas-ffpack not found
```



---

archive/issue_comments_420346.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-13T02:18:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420346",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420347.json:
```json
{
    "body": "<a id='comment:5'></a>More of the same:\n\n```\n    File \"/usr/local/Cellar/python@3.9/3.9.6/Frameworks/Python.framework/Versions/3.9/lib/python3.9/distutils/dist.py\", line 985, in run_command\n      cmd_obj.run()\n    File \"/private/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/pip-req-build-z0x28qby/sage_setup/command/sage_build_cython.py\", line 225, in run\n      aliases=cython_aliases(),\n    File \"/private/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/pip-req-build-z0x28qby/sage/env.py\", line 472, in cython_aliases\n      aliases[var + \"CFLAGS\"] = pkgconfig.cflags(lib).split()\n    File \"/private/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/pip-build-env-ti7oa28i/overlay/lib/python3.9/site-packages/pkgconfig/pkgconfig.py\", line 144, in cflags\n      _raise_if_not_exists(package)\n    File \"/private/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/pip-build-env-ti7oa28i/overlay/lib/python3.9/site-packages/pkgconfig/pkgconfig.py\", line 103, in _raise_if_not_exists\n      raise PackageNotFoundError(package)\n  pkgconfig.pkgconfig.PackageNotFoundError: fflas-ffpack not found\n```",
    "created_at": "2021-08-13T02:27:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420347",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>More of the same:

```
    File "/usr/local/Cellar/python@3.9/3.9.6/Frameworks/Python.framework/Versions/3.9/lib/python3.9/distutils/dist.py", line 985, in run_command
      cmd_obj.run()
    File "/private/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/pip-req-build-z0x28qby/sage_setup/command/sage_build_cython.py", line 225, in run
      aliases=cython_aliases(),
    File "/private/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/pip-req-build-z0x28qby/sage/env.py", line 472, in cython_aliases
      aliases[var + "CFLAGS"] = pkgconfig.cflags(lib).split()
    File "/private/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/pip-build-env-ti7oa28i/overlay/lib/python3.9/site-packages/pkgconfig/pkgconfig.py", line 144, in cflags
      _raise_if_not_exists(package)
    File "/private/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/pip-build-env-ti7oa28i/overlay/lib/python3.9/site-packages/pkgconfig/pkgconfig.py", line 103, in _raise_if_not_exists
      raise PackageNotFoundError(package)
  pkgconfig.pkgconfig.PackageNotFoundError: fflas-ffpack not found
```



---

archive/issue_comments_420348.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-08-28T05:01:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420348",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_420349.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-28T05:03:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420349",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420350.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-03T01:07:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420350",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420351.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-19T00:43:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420351",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420352.json:
```json
{
    "body": "<a id='comment:0'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2021-09-26T21:23:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420352",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:0'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_420353.json:
```json
{
    "body": "<a id='comment:1'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-28T15:16:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420353",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420354.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-10-12T18:16:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420354",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420355.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-10-12T18:18:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420355",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420356.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-10-29T07:17:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420356",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420357.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-12T23:46:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420357",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420358.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-14T05:27:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420358",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420359.json:
```json
{
    "body": "<a id='comment:1'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-16T03:57:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420359",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420360.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-19T17:24:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420360",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420361.json:
```json
{
    "body": "<a id='comment:3'></a>Let's get this in please",
    "created_at": "2021-11-19T17:28:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420361",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>Let's get this in please



---

archive/issue_comments_420362.json:
```json
{
    "body": "<a id='comment:5'></a>This command \n\n```\n./bootstrap && ./sage -sh -c '(cd build/pkgs/sagemath_objects/src && tox -v -v -e py39)'\n```\nresults in lots of doctest failures. This is expected. Right?\n\nThen this command\n\n```\npkgs/sagemath-objects/.tox/py39/bin/sage\n```\nshould run the sage with only modules installed by `sagemath-objects`. But then still with this sage, I get\n\n```\nsage: GF(9)\nFinite Field in z2 of size 3^2\n```\nIs this normal? What code would fail?",
    "created_at": "2021-11-25T05:42:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420362",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:5'></a>This command 

```
./bootstrap && ./sage -sh -c '(cd build/pkgs/sagemath_objects/src && tox -v -v -e py39)'
```
results in lots of doctest failures. This is expected. Right?

Then this command

```
pkgs/sagemath-objects/.tox/py39/bin/sage
```
should run the sage with only modules installed by `sagemath-objects`. But then still with this sage, I get

```
sage: GF(9)
Finite Field in z2 of size 3^2
```
Is this normal? What code would fail?



---

archive/issue_comments_420363.json:
```json
{
    "body": "<a id='comment:146'></a>Replying to [comment:145 klee]:\n> This command \n> \n> ```\n> ./bootstrap && ./sage -sh -c '(cd build/pkgs/sagemath_objects/src && tox -v -v -e py39)'\n> ```\n> results in lots of doctest failures. This is expected. Right?\n\n\nYes.",
    "created_at": "2021-11-25T06:31:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420363",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:146'></a>Replying to [comment:145 klee]:
> This command 
> 
> ```
> ./bootstrap && ./sage -sh -c '(cd build/pkgs/sagemath_objects/src && tox -v -v -e py39)'
> ```
> results in lots of doctest failures. This is expected. Right?


Yes.



---

archive/issue_comments_420364.json:
```json
{
    "body": "<a id='comment:147'></a>Replying to [comment:145 klee]:\n> Then this command\n> \n> ```\n> pkgs/sagemath-objects/.tox/py39/bin/sage\n> ```\n> should run the sage with only modules installed by `sagemath-objects`. But then still with this sage, I get\n> \n> ```\n> sage: GF(9)\n> Finite Field in z2 of size 3^2\n> ```\n> Is this normal? What code would fail?\n\n\nThere was something wrong with which helper scripts are shipped as part of **sagemath-objects**. I am working on a fix",
    "created_at": "2021-11-25T06:33:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420364",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:147'></a>Replying to [comment:145 klee]:
> Then this command
> 
> ```
> pkgs/sagemath-objects/.tox/py39/bin/sage
> ```
> should run the sage with only modules installed by `sagemath-objects`. But then still with this sage, I get
> 
> ```
> sage: GF(9)
> Finite Field in z2 of size 3^2
> ```
> Is this normal? What code would fail?


There was something wrong with which helper scripts are shipped as part of **sagemath-objects**. I am working on a fix



---

archive/issue_comments_420365.json:
```json
{
    "body": "<a id='comment:8'></a>After testing with the two experimental distributions, I could confirm that there are no other doctest failures with the main sage than it already had on develop branch. Hence the two experimental distributions are at least safe to have.\n\nAnyway the failed doctests are\n\n```\nsage -t --warn-long 70.5 --random-seed=328015936148055540834358934757959169042 src/sage/tests/cmdline.py\n**********************************************************************\nFile \"src/sage/tests/cmdline.py\", line 325, in sage.tests.cmdline.test_executable\nFailed example:\n    ret\nExpected:\n    0\nGot:\n    4\n**********************************************************************\nFile \"src/sage/tests/cmdline.py\", line 330, in sage.tests.cmdline.test_executable\nFailed example:\n    ret\nExpected:\n    0\nGot:\n    2\n```",
    "created_at": "2021-11-25T07:03:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420365",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:8'></a>After testing with the two experimental distributions, I could confirm that there are no other doctest failures with the main sage than it already had on develop branch. Hence the two experimental distributions are at least safe to have.

Anyway the failed doctests are

```
sage -t --warn-long 70.5 --random-seed=328015936148055540834358934757959169042 src/sage/tests/cmdline.py
**********************************************************************
File "src/sage/tests/cmdline.py", line 325, in sage.tests.cmdline.test_executable
Failed example:
    ret
Expected:
    0
Got:
    4
**********************************************************************
File "src/sage/tests/cmdline.py", line 330, in sage.tests.cmdline.test_executable
Failed example:
    ret
Expected:
    0
Got:
    2
```



---

archive/issue_comments_420366.json:
```json
{
    "body": "<a id='comment:149'></a>Replying to [comment:147 mkoeppe]:\n> There was something wrong with which helper scripts are shipped as part of **sagemath-objects**. I am working on a fix\n\n\nOpened #32933 as part of the fix",
    "created_at": "2021-11-25T18:42:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420366",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:149'></a>Replying to [comment:147 mkoeppe]:
> There was something wrong with which helper scripts are shipped as part of **sagemath-objects**. I am working on a fix


Opened #32933 as part of the fix



---

archive/issue_comments_420367.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-11-26T02:08:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420367",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_420368.json:
```json
{
    "body": "<a id='comment:1'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-26T02:17:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420368",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420369.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-11-26T02:18:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420369",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_420370.json:
```json
{
    "body": "<a id='comment:2'></a>It now correctly fails:\n\n```\n$ pkgs/sagemath-objects/.tox/py39/bin/sage -c 'GF(9)'\nTraceback (most recent call last):\n  File \"/Users/mkoeppe/s/sage/sage-rebasing/pkgs/sagemath-objects/.tox/py39/bin/sage-eval\", line 4, in <module>\n    from sage.all import *\nModuleNotFoundError: No module named 'sage.all'\n```",
    "created_at": "2021-11-26T02:18:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420370",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>It now correctly fails:

```
$ pkgs/sagemath-objects/.tox/py39/bin/sage -c 'GF(9)'
Traceback (most recent call last):
  File "/Users/mkoeppe/s/sage/sage-rebasing/pkgs/sagemath-objects/.tox/py39/bin/sage-eval", line 4, in <module>
    from sage.all import *
ModuleNotFoundError: No module named 'sage.all'
```



---

archive/issue_comments_420371.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-26T02:32:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420371",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420372.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-26T02:44:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420372",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420373.json:
```json
{
    "body": "<a id='comment:5'></a>I guess this is normal\n\n```\n$ pkgs/sagemath-objects/.tox/py39/bin/sage\nTraceback (most recent call last):\n  File \"/Users/kwankyu/GitHub/sage-dev/pkgs/sagemath-objects/.tox/py39/bin/sage-ipython\", line 9, in <module>\n    from sage.misc.banner import banner\nModuleNotFoundError: No module named 'sage.misc.banner'\n```\nbut this works well\n\n```\n$ pkgs/sagemath-objects/.tox/py39/bin/python3 \nPython 3.9.7 (default, Oct 13 2021, 06:45:31) \n[Clang 13.0.0 (clang-1300.0.29.3)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> from sage.structure.sage_object import SageObject\n>>> SageObject()\n<sage.structure.sage_object.SageObject object at 0x10c977f60>\n>>> a = SageObject()\n>>> a.category()\nCategory of objects\n>>> a\n<sage.structure.sage_object.SageObject object at 0x10c977f50>\n>>> a.dumps()\nb'x\\x9ck`J.NLO\\xd5+.)*M.)-\\x02\\xb2\\x80\\xdc\\xf8\\xfc\\xa4\\xac\\xd4\\xe4\\x12\\xae` \\xdb\\x1f\\xc2,d\\xd0l,d\\xd4\\x03\\x00\\xb7P\\x10\\xef'\n>>> a.parent()\n<class 'sage.structure.sage_object.SageObject'>\n```",
    "created_at": "2021-11-26T04:55:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420373",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:5'></a>I guess this is normal

```
$ pkgs/sagemath-objects/.tox/py39/bin/sage
Traceback (most recent call last):
  File "/Users/kwankyu/GitHub/sage-dev/pkgs/sagemath-objects/.tox/py39/bin/sage-ipython", line 9, in <module>
    from sage.misc.banner import banner
ModuleNotFoundError: No module named 'sage.misc.banner'
```
but this works well

```
$ pkgs/sagemath-objects/.tox/py39/bin/python3 
Python 3.9.7 (default, Oct 13 2021, 06:45:31) 
[Clang 13.0.0 (clang-1300.0.29.3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> from sage.structure.sage_object import SageObject
>>> SageObject()
<sage.structure.sage_object.SageObject object at 0x10c977f60>
>>> a = SageObject()
>>> a.category()
Category of objects
>>> a
<sage.structure.sage_object.SageObject object at 0x10c977f50>
>>> a.dumps()
b'x\x9ck`J.NLO\xd5+.)*M.)-\x02\xb2\x80\xdc\xf8\xfc\xa4\xac\xd4\xe4\x12\xae` \xdb\x1f\xc2,d\xd0l,d\xd4\x03\x00\xb7P\x10\xef'
>>> a.parent()
<class 'sage.structure.sage_object.SageObject'>
```



---

archive/issue_comments_420374.json:
```json
{
    "body": "<a id='comment:6'></a>Likewise this works well\n\n```\n$ pkgs/sagemath-categories/.tox/py39/bin/python3\nPython 3.9.7 (default, Oct 13 2021, 06:45:31) \n[Clang 13.0.0 (clang-1300.0.29.3)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> from sage.categories.category import Category\n>>> from sage.categories.algebras import Algebras\n>>> Algebras(QQ)\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\nNameError: name 'QQ' is not defined\n>>> Algebras(ZZ)\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\nNameError: name 'ZZ' is not defined\n>>> from sage.categories.groups import Groups\n>>> Groups()\nCategory of groups\n>>> c = Groups()\n>>> c.example()\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/Users/kwankyu/GitHub/sage-dev/pkgs/sagemath-categories/.tox/py39/lib/python3.9/site-packages/sage/categories/groups.py\", line 48, in example\n    from sage.rings.rational_field import QQ\nModuleNotFoundError: No module named 'sage.rings.rational_field'\n>>> from sage.rings.infinity import infinity    \nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\nModuleNotFoundError: No module named 'sage.rings.infinity'\n>>> from sage.rings.integer_ring import ZZ     \nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\nModuleNotFoundError: No module named 'sage.rings.integer_ring'\n>>> from sage.categories.rings import Rings\n>>> r = Rings()\n>>> r\nCategory of rings\n>>> r.example()\nNotImplemented\n```\nIt seems that there is not much to do with just categories with no constructible objects. This is of course expected.",
    "created_at": "2021-11-26T05:12:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420374",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:6'></a>Likewise this works well

```
$ pkgs/sagemath-categories/.tox/py39/bin/python3
Python 3.9.7 (default, Oct 13 2021, 06:45:31) 
[Clang 13.0.0 (clang-1300.0.29.3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> from sage.categories.category import Category
>>> from sage.categories.algebras import Algebras
>>> Algebras(QQ)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'QQ' is not defined
>>> Algebras(ZZ)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'ZZ' is not defined
>>> from sage.categories.groups import Groups
>>> Groups()
Category of groups
>>> c = Groups()
>>> c.example()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/Users/kwankyu/GitHub/sage-dev/pkgs/sagemath-categories/.tox/py39/lib/python3.9/site-packages/sage/categories/groups.py", line 48, in example
    from sage.rings.rational_field import QQ
ModuleNotFoundError: No module named 'sage.rings.rational_field'
>>> from sage.rings.infinity import infinity    
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ModuleNotFoundError: No module named 'sage.rings.infinity'
>>> from sage.rings.integer_ring import ZZ     
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ModuleNotFoundError: No module named 'sage.rings.integer_ring'
>>> from sage.categories.rings import Rings
>>> r = Rings()
>>> r
Category of rings
>>> r.example()
NotImplemented
```
It seems that there is not much to do with just categories with no constructible objects. This is of course expected.



---

archive/issue_comments_420375.json:
```json
{
    "body": "<a id='comment:7'></a>In #32432 I am adding a few more things to `sagemath-categories` so that some runtime testing becomes possible",
    "created_at": "2021-11-26T05:20:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420375",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>In #32432 I am adding a few more things to `sagemath-categories` so that some runtime testing becomes possible



---

archive/issue_comments_420376.json:
```json
{
    "body": "<a id='comment:8'></a>After I started to experiment with the branch of this ticket, I get\n\n```\n$ sage -tp --all\n...\n...\nsage -t --warn-long 67.3 --random-seed=176797787270485350725074395342233660735 src/doc/ja/a_tour_of_sage/conf.py\n    [0 tests, 0.00 s]\n----------------------------------------------------------------------\nsage -t --warn-long 67.3 --random-seed=176797787270485350725074395342233660735 src/sage/tests/cmdline.py  # 2 doctests failed\n----------------------------------------------------------------------\nTotal time for all tests: 1819.6 seconds\n    cpu time: 11313.2 seconds\n    cumulative wall time: 13913.3 seconds\n============================================================================ test session starts ============================================================================\nplatform darwin -- Python 3.9.7, pytest-6.2.5, py-1.10.0, pluggy-1.0.0\nrootdir: /Users/kwankyu/GitHub/sage-dev/src, configfile: tox.ini\ncollected 10 items / 1 error / 9 selected                                                                                                                                   \n\n================================================================================== ERRORS ===================================================================================\n____________________________________________________________ ERROR collecting sage/structure/sage_object_test.py ____________________________________________________________\nImportError while importing test module '/Users/kwankyu/GitHub/sage-dev/src/sage/structure/sage_object_test.py'.\nHint: make sure your test modules/packages have valid Python names.\nTraceback:\nsrc/sage/structure/sage_object_test.py:3: in <module>\n    from .sage_object import SageObject\nE   ImportError: attempted relative import with no known parent package\n========================================================================== short test summary info ==========================================================================\nERROR src/sage/structure/sage_object_test.py\n!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! Interrupted: 1 error during collection !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n============================================================================= 1 error in 5.75s ==============================================================================\n```\n\nI have the doctest failures of `src/sage/tests/cmdline.py` on develop branch. So they seem not related with the present branch.\n\nThen what are these messages starting with ===.... test session starts ...===, which shows some failure?",
    "created_at": "2021-11-26T05:53:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420376",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:8'></a>After I started to experiment with the branch of this ticket, I get

```
$ sage -tp --all
...
...
sage -t --warn-long 67.3 --random-seed=176797787270485350725074395342233660735 src/doc/ja/a_tour_of_sage/conf.py
    [0 tests, 0.00 s]
----------------------------------------------------------------------
sage -t --warn-long 67.3 --random-seed=176797787270485350725074395342233660735 src/sage/tests/cmdline.py  # 2 doctests failed
----------------------------------------------------------------------
Total time for all tests: 1819.6 seconds
    cpu time: 11313.2 seconds
    cumulative wall time: 13913.3 seconds
============================================================================ test session starts ============================================================================
platform darwin -- Python 3.9.7, pytest-6.2.5, py-1.10.0, pluggy-1.0.0
rootdir: /Users/kwankyu/GitHub/sage-dev/src, configfile: tox.ini
collected 10 items / 1 error / 9 selected                                                                                                                                   

================================================================================== ERRORS ===================================================================================
____________________________________________________________ ERROR collecting sage/structure/sage_object_test.py ____________________________________________________________
ImportError while importing test module '/Users/kwankyu/GitHub/sage-dev/src/sage/structure/sage_object_test.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
src/sage/structure/sage_object_test.py:3: in <module>
    from .sage_object import SageObject
E   ImportError: attempted relative import with no known parent package
========================================================================== short test summary info ==========================================================================
ERROR src/sage/structure/sage_object_test.py
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! Interrupted: 1 error during collection !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
============================================================================= 1 error in 5.75s ==============================================================================
```

I have the doctest failures of `src/sage/tests/cmdline.py` on develop branch. So they seem not related with the present branch.

Then what are these messages starting with ===.... test session starts ...===, which shows some failure?



---

archive/issue_comments_420377.json:
```json
{
    "body": "<a id='comment:159'></a>Replying to [comment:158 klee]:\n> Then what are these messages starting with ===.... test session starts ...===, which shows some failure?\n\n\nAt the end of `sage -t`, `pytest` is run; this is from #31003 and follow-up tickets. Tickets #32892 and #31924 are for fixing some of these unsightly messages",
    "created_at": "2021-11-26T05:59:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420377",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:159'></a>Replying to [comment:158 klee]:
> Then what are these messages starting with ===.... test session starts ...===, which shows some failure?


At the end of `sage -t`, `pytest` is run; this is from #31003 and follow-up tickets. Tickets #32892 and #31924 are for fixing some of these unsightly messages



---

archive/issue_comments_420378.json:
```json
{
    "body": "<a id='comment:160'></a>Would you explain this line from `tox.ini`?\n\n```\n[testenv]\ndeps = -rrequirements.txt \n```\nWhat does `-r` do?",
    "created_at": "2021-11-26T06:07:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420378",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:160'></a>Would you explain this line from `tox.ini`?

```
[testenv]
deps = -rrequirements.txt 
```
What does `-r` do?



---

archive/issue_comments_420379.json:
```json
{
    "body": "<a id='comment:1'></a>It instructs `pip` to install the packages listed in the file `requirements.txt`",
    "created_at": "2021-11-26T06:09:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420379",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'></a>It instructs `pip` to install the packages listed in the file `requirements.txt`



---

archive/issue_comments_420380.json:
```json
{
    "body": "<a id='comment:2'></a>I tested with the branch of this ticket, perhaps from a user point of view. I finds it works well, as advertised in the description. So I am positive with the branch.\n\nBut I am not capable of reading the code, most of which looks to me cryptic, to give any useful comments. So I leave this task to other reviewer well versed with sage build system and python build tools.\n\nHowever, if no one gives more comments, then I will set positive review once we have a green bot, as this ticket needs to be closed before sage 9.5 release.",
    "created_at": "2021-11-26T06:21:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420380",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:2'></a>I tested with the branch of this ticket, perhaps from a user point of view. I finds it works well, as advertised in the description. So I am positive with the branch.

But I am not capable of reading the code, most of which looks to me cryptic, to give any useful comments. So I leave this task to other reviewer well versed with sage build system and python build tools.

However, if no one gives more comments, then I will set positive review once we have a green bot, as this ticket needs to be closed before sage 9.5 release.



---

archive/issue_comments_420381.json:
```json
{
    "body": "<a id='comment:4'></a>Thank you!",
    "created_at": "2021-11-26T06:26:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420381",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>Thank you!



---

archive/issue_comments_420382.json:
```json
{
    "body": "<a id='comment:5'></a>Files in `build/pkgs/sagemath_categories`,\n`build/pkgs/sagemath_objects`,\n`pkgs/sage-conf_pypi`, `pkgs/sagemath-categories`,\n`pkgs/sagemath-objects`,\ncould ideally end with a newline,\neven when they only have one line.",
    "created_at": "2021-11-26T18:48:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420382",
    "user": "https://github.com/slel"
}
```

<a id='comment:5'></a>Files in `build/pkgs/sagemath_categories`,
`build/pkgs/sagemath_objects`,
`pkgs/sage-conf_pypi`, `pkgs/sagemath-categories`,
`pkgs/sagemath-objects`,
could ideally end with a newline,
even when they only have one line.



---

archive/issue_comments_420383.json:
```json
{
    "body": "<a id='comment:6'></a>The files for which the diff shows this:\n\n```\ndiff --git a/build/pkgs/sagemath_categories/SPKG.rst b/build/pkgs/sagemath_categories/SPKG.rst\nnew file mode 120000\nindex 00000000..b4545b4\n--- /dev/null\n+++ b/build/pkgs/sagemath_categories/SPKG.rst\n@@ -0,0 +1 @@\n+src/README.rst\n\\ No newline at end of file\n```\nare actually symbolic links, and adding a newline is not an option.",
    "created_at": "2021-11-26T19:06:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420383",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>The files for which the diff shows this:

```
diff --git a/build/pkgs/sagemath_categories/SPKG.rst b/build/pkgs/sagemath_categories/SPKG.rst
new file mode 120000
index 00000000..b4545b4
--- /dev/null
+++ b/build/pkgs/sagemath_categories/SPKG.rst
@@ -0,0 +1 @@
+src/README.rst
\ No newline at end of file
```
are actually symbolic links, and adding a newline is not an option.



---

archive/issue_comments_420384.json:
```json
{
    "body": "<a id='comment:7'></a>Never mind then! Sorry for the noise.",
    "created_at": "2021-11-26T19:27:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420384",
    "user": "https://github.com/slel"
}
```

<a id='comment:7'></a>Never mind then! Sorry for the noise.



---

archive/issue_comments_420385.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-11-27T10:11:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420385",
    "user": "https://github.com/kwankyu"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_420386.json:
```json
{
    "body": "<a id='comment:8'></a>Okay. Let's get this in.",
    "created_at": "2021-11-27T10:11:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420386",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:8'></a>Okay. Let's get this in.



---

archive/issue_comments_420387.json:
```json
{
    "body": "<a id='comment:9'></a>Thanks!",
    "created_at": "2021-11-27T16:50:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420387",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>Thanks!



---

archive/issue_comments_420388.json:
```json
{
    "body": "<a id='comment:0'></a>Why this is not yet merged?",
    "created_at": "2022-01-03T02:33:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420388",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:0'></a>Why this is not yet merged?



---

archive/issue_events_076525.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-28T23:03:12Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29865#event-76525"
}
```



---

archive/issue_events_076526.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-28T23:03:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29865#event-76526"
}
```



---

archive/issue_events_076527.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-01-31T23:31:48Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29865#event-76527"
}
```



---

archive/issue_comments_420389.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-01-31T23:31:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29865",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29865#issuecomment-420389",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
