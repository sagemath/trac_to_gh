# Issue 29974: Make combinat doctests ready for random seeds

archive/issues_029737.json:
```json
{
    "body": "Part of #29935.\n\nThis ticket makes\n\n```\nsage -t --long --random-seed=n src/sage/combinat/\n```\npass for `n` more general than just `0`.\n\nSee also:\n- #30186 containment check for standard bracketed Lyndon words does not work.\n\nAlong the way we fix a tiny but annoying bug, where random derangements could fail.\n\nThat was because `randint(0, n)` has range `range(0, n + 1)`,\nwhich had caused confusion.\n\nReviewer: S\u00e9bastien Labb\u00e9\n\nAuthor: Jonathan Kliem\n\nBranch: 928863f09ef7659221ca42d5038cf19f1e690d9d\n\nDependencies: #29962\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29974\n\n",
    "closed_at": "2020-08-16T22:33:01Z",
    "created_at": "2020-06-24T21:22:48Z",
    "labels": [
        "component: doctest framework"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Make combinat doctests ready for random seeds",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29974",
    "user": "https://github.com/kliem"
}
```
Part of #29935.

This ticket makes

```
sage -t --long --random-seed=n src/sage/combinat/
```
pass for `n` more general than just `0`.

See also:
- #30186 containment check for standard bracketed Lyndon words does not work.

Along the way we fix a tiny but annoying bug, where random derangements could fail.

That was because `randint(0, n)` has range `range(0, n + 1)`,
which had caused confusion.

Reviewer: Sébastien Labbé

Author: Jonathan Kliem

Branch: 928863f09ef7659221ca42d5038cf19f1e690d9d

Dependencies: #29962

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29974





---

archive/issue_comments_589653.json:
```json
{
    "body": "Changing branch from \"\" to \"public/29974\"",
    "created_at": "2020-06-24T21:38:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589653",
    "user": "https://github.com/kliem"
}
```

Changing branch from "" to "public/29974"



---

archive/issue_comments_589654.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                                                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[da1c6be](https://github.com/sagemath/sagetrac-mirror/commit/da1c6beec7d0bb6b972d88ecf9fb4eccbdf285a5)|`start from a \"random\" random seed for doctesting`|\n|[b7b836d](https://github.com/sagemath/sagetrac-mirror/commit/b7b836d789e034433d62f331f33fbc1821c0deaa)|`make random seed reproducible`|\n|[eedbe5e](https://github.com/sagemath/sagetrac-mirror/commit/eedbe5ebea9c2b9da79404013c566fe17d0a3e20)|`document random_seed`|\n|[998b1b9](https://github.com/sagemath/sagetrac-mirror/commit/998b1b94ce1289ea92451a86e5f6191c37eaeb5a)|`default random seed 0 for now`|\n|[1d7b00e](https://github.com/sagemath/sagetrac-mirror/commit/1d7b00e3fc2ebc1dc9982a2df91d15e3f12e9432)|`dash instead of underscore for command line options`|\n|[e0e572e](https://github.com/sagemath/sagetrac-mirror/commit/e0e572ecc138a306d52a80cee2cf9acb299c1508)|`make combinat fuzz ready`|\n|[7c3a1ff](https://github.com/sagemath/sagetrac-mirror/commit/7c3a1ffc46f13b77a8ca0b78696b6b433c40295c)|`another file for combinat`|",
    "created_at": "2020-06-24T21:38:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589654",
    "user": "https://github.com/kliem"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                                                  |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[da1c6be](https://github.com/sagemath/sagetrac-mirror/commit/da1c6beec7d0bb6b972d88ecf9fb4eccbdf285a5)|`start from a "random" random seed for doctesting`|
|[b7b836d](https://github.com/sagemath/sagetrac-mirror/commit/b7b836d789e034433d62f331f33fbc1821c0deaa)|`make random seed reproducible`|
|[eedbe5e](https://github.com/sagemath/sagetrac-mirror/commit/eedbe5ebea9c2b9da79404013c566fe17d0a3e20)|`document random_seed`|
|[998b1b9](https://github.com/sagemath/sagetrac-mirror/commit/998b1b94ce1289ea92451a86e5f6191c37eaeb5a)|`default random seed 0 for now`|
|[1d7b00e](https://github.com/sagemath/sagetrac-mirror/commit/1d7b00e3fc2ebc1dc9982a2df91d15e3f12e9432)|`dash instead of underscore for command line options`|
|[e0e572e](https://github.com/sagemath/sagetrac-mirror/commit/e0e572ecc138a306d52a80cee2cf9acb299c1508)|`make combinat fuzz ready`|
|[7c3a1ff](https://github.com/sagemath/sagetrac-mirror/commit/7c3a1ffc46f13b77a8ca0b78696b6b433c40295c)|`another file for combinat`|



---

archive/issue_comments_589655.json:
```json
{
    "body": "Changing commit from \"\" to \"7c3a1ffc46f13b77a8ca0b78696b6b433c40295c\"",
    "created_at": "2020-06-24T21:38:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589655",
    "user": "https://github.com/kliem"
}
```

Changing commit from "" to "7c3a1ffc46f13b77a8ca0b78696b6b433c40295c"



---

archive/issue_comments_589656.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-06-24T21:38:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589656",
    "user": "https://github.com/kliem"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_589657.json:
```json
{
    "body": "<a id='comment:2'></a>\nMerge conflict.\n\nI also need to go through it again and check I respected the design decision in #29935.",
    "created_at": "2020-07-12T18:16:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589657",
    "user": "https://github.com/kliem"
}
```

<a id='comment:2'></a>
Merge conflict.

I also need to go through it again and check I respected the design decision in #29935.



---

archive/issue_comments_589658.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-07-12T18:16:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589658",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_589659.json:
```json
{
    "body": "<a id='comment:3'></a>\nNote that elements of `g = GelfandTsetlinPatterns(4, 5)` have the wrong parent.",
    "created_at": "2020-07-20T05:03:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589659",
    "user": "https://github.com/kliem"
}
```

<a id='comment:3'></a>
Note that elements of `g = GelfandTsetlinPatterns(4, 5)` have the wrong parent.



---

archive/issue_comments_589660.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,3 +4,5 @@\n sage -t --long --random-seed=n src/sage/combinat/\n ```\n pass for different values `n` than just `0`.\n+\n+See also: #30186 containment check for standard bracketed lyndon words does not work \n``````\n",
    "created_at": "2020-07-21T07:07:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589660",
    "user": "https://github.com/kliem"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,3 +4,5 @@
 sage -t --long --random-seed=n src/sage/combinat/
 ```
 pass for different values `n` than just `0`.
+
+See also: #30186 containment check for standard bracketed lyndon words does not work 
``````




---

archive/issue_comments_589661.json:
```json
{
    "body": "Changing commit from \"7c3a1ffc46f13b77a8ca0b78696b6b433c40295c\" to \"\"",
    "created_at": "2020-07-21T07:29:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589661",
    "user": "https://github.com/kliem"
}
```

Changing commit from "7c3a1ffc46f13b77a8ca0b78696b6b433c40295c" to ""



---

archive/issue_comments_589662.json:
```json
{
    "body": "Changing branch from \"public/29974\" to \"public/29974-reb\"",
    "created_at": "2020-07-21T07:29:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589662",
    "user": "https://github.com/kliem"
}
```

Changing branch from "public/29974" to "public/29974-reb"



---

archive/issue_comments_589663.json:
```json
{
    "body": "Changing commit from \"\" to \"a914b8db0373ab16bf24fafa3775fbfd3a1c32f9\"",
    "created_at": "2020-07-21T07:29:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589663",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "a914b8db0373ab16bf24fafa3775fbfd3a1c32f9"



---

archive/issue_comments_589664.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n|                                                                                                                                           |                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------|\n|[eedbe5e](https://github.com/sagemath/sagetrac-mirror/commit/eedbe5ebea9c2b9da79404013c566fe17d0a3e20)|`document random_seed`|\n|[998b1b9](https://github.com/sagemath/sagetrac-mirror/commit/998b1b94ce1289ea92451a86e5f6191c37eaeb5a)|`default random seed 0 for now`|\n|[1d7b00e](https://github.com/sagemath/sagetrac-mirror/commit/1d7b00e3fc2ebc1dc9982a2df91d15e3f12e9432)|`dash instead of underscore for command line options`|\n|[b31e2d5](https://github.com/sagemath/sagetrac-mirror/commit/b31e2d5dba166fdb4d8f9f6730df8cdb065ccae7)|`Merge branch 'public/29962' of git://trac.sagemath.org/sage into public/29962-reb`|\n|[2f30dd9](https://github.com/sagemath/sagetrac-mirror/commit/2f30dd9b9e13cb8134b85a1165375ac8bdd1f683)|`small fixes`|\n|[b62f781](https://github.com/sagemath/sagetrac-mirror/commit/b62f781647851a3f27ecc95ea4b98b53838da112)|`doctests do not start from a random seed by default yet`|\n|[1d99129](https://github.com/sagemath/sagetrac-mirror/commit/1d99129f26f4a065f9f9e5e13c3d5120a029e89f)|`fix merge conflict`|\n|[d40d826](https://github.com/sagemath/sagetrac-mirror/commit/d40d8266d04a661fa038c2765a5dd1891aaf7ae2)|`make combinat fuzz ready`|\n|[b9f88cf](https://github.com/sagemath/sagetrac-mirror/commit/b9f88cf8673e9fcaf4e0ec1e199a755dc52ca416)|`another file for combinat`|\n|[a914b8d](https://github.com/sagemath/sagetrac-mirror/commit/a914b8db0373ab16bf24fafa3775fbfd3a1c32f9)|`modify doctests according to decisions in 29935`|",
    "created_at": "2020-07-21T07:29:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589664",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
|                                                                                                                                           |                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------|
|[eedbe5e](https://github.com/sagemath/sagetrac-mirror/commit/eedbe5ebea9c2b9da79404013c566fe17d0a3e20)|`document random_seed`|
|[998b1b9](https://github.com/sagemath/sagetrac-mirror/commit/998b1b94ce1289ea92451a86e5f6191c37eaeb5a)|`default random seed 0 for now`|
|[1d7b00e](https://github.com/sagemath/sagetrac-mirror/commit/1d7b00e3fc2ebc1dc9982a2df91d15e3f12e9432)|`dash instead of underscore for command line options`|
|[b31e2d5](https://github.com/sagemath/sagetrac-mirror/commit/b31e2d5dba166fdb4d8f9f6730df8cdb065ccae7)|`Merge branch 'public/29962' of git://trac.sagemath.org/sage into public/29962-reb`|
|[2f30dd9](https://github.com/sagemath/sagetrac-mirror/commit/2f30dd9b9e13cb8134b85a1165375ac8bdd1f683)|`small fixes`|
|[b62f781](https://github.com/sagemath/sagetrac-mirror/commit/b62f781647851a3f27ecc95ea4b98b53838da112)|`doctests do not start from a random seed by default yet`|
|[1d99129](https://github.com/sagemath/sagetrac-mirror/commit/1d99129f26f4a065f9f9e5e13c3d5120a029e89f)|`fix merge conflict`|
|[d40d826](https://github.com/sagemath/sagetrac-mirror/commit/d40d8266d04a661fa038c2765a5dd1891aaf7ae2)|`make combinat fuzz ready`|
|[b9f88cf](https://github.com/sagemath/sagetrac-mirror/commit/b9f88cf8673e9fcaf4e0ec1e199a755dc52ca416)|`another file for combinat`|
|[a914b8d](https://github.com/sagemath/sagetrac-mirror/commit/a914b8db0373ab16bf24fafa3775fbfd3a1c32f9)|`modify doctests according to decisions in 29935`|



---

archive/issue_comments_589665.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-07-21T07:30:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589665",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_589666.json:
```json
{
    "body": "<a id='comment:8'></a>\nI get one failure in combinat:\n\n```\n----------------------------------------------------------------------\nsage -t --long --random-seed=2 src/sage/combinat/derangements.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\n\nCan you reproduce it?\n\n```\nsage -t --long --random-seed=2 src/sage/combinat/derangements.py\n**********************************************************************\nFile \"src/sage/combinat/derangements.py\", line 129, in sage.combinat.derangements.Derangements\nFailed example:\n    D2.random_element() # random\nException raised:\n    Traceback (most recent call last):\n      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 715, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1139, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.combinat.derangements.Derangements[7]>\", line 1, in <module>\n        D2.random_element() # random\n      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/combinat/derangements.py\", line 504, in random_element\n        return L[i]\n    IndexError: list index out of range\n**********************************************************************\n1 item had failures:\n   1 of   9 in sage.combinat.derangements.Derangements\n    [85 tests, 1 failure, 0.10 s]\n```",
    "created_at": "2020-08-14T13:56:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589666",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:8'></a>
I get one failure in combinat:

```
----------------------------------------------------------------------
sage -t --long --random-seed=2 src/sage/combinat/derangements.py  # 1 doctest failed
----------------------------------------------------------------------
```

Can you reproduce it?

```
sage -t --long --random-seed=2 src/sage/combinat/derangements.py
**********************************************************************
File "src/sage/combinat/derangements.py", line 129, in sage.combinat.derangements.Derangements
Failed example:
    D2.random_element() # random
Exception raised:
    Traceback (most recent call last):
      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 715, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1139, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.combinat.derangements.Derangements[7]>", line 1, in <module>
        D2.random_element() # random
      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/combinat/derangements.py", line 504, in random_element
        return L[i]
    IndexError: list index out of range
**********************************************************************
1 item had failures:
   1 of   9 in sage.combinat.derangements.Derangements
    [85 tests, 1 failure, 0.10 s]
```



---

archive/issue_comments_589667.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-08-14T13:56:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589667",
    "user": "https://github.com/seblabbe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_589668.json:
```json
{
    "body": "<a id='comment:9'></a>\nYes, I can confirm the problem.",
    "created_at": "2020-08-14T14:00:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589668",
    "user": "https://github.com/kliem"
}
```

<a id='comment:9'></a>
Yes, I can confirm the problem.



---

archive/issue_comments_589669.json:
```json
{
    "body": "Changing reviewer from \"\" to \"S\u00e9bastien Labb\u00e9\"",
    "created_at": "2020-08-14T14:30:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589669",
    "user": "https://github.com/seblabbe"
}
```

Changing reviewer from "" to "Sébastien Labbé"



---

archive/issue_comments_589670.json:
```json
{
    "body": "<a id='comment:10'></a>\nBut it works for `--random-seed=0`, `--random-seed=1`, `--random-seed=3`, `--random-seed=4`.",
    "created_at": "2020-08-14T14:30:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589670",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:10'></a>
But it works for `--random-seed=0`, `--random-seed=1`, `--random-seed=3`, `--random-seed=4`.



---

archive/issue_comments_589671.json:
```json
{
    "body": "Changing branch from \"public/29974-reb\" to \"public/29974-reb2\"",
    "created_at": "2020-08-15T07:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589671",
    "user": "https://github.com/kliem"
}
```

Changing branch from "public/29974-reb" to "public/29974-reb2"



---

archive/issue_comments_589672.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-08-15T07:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589672",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_589673.json:
```json
{
    "body": "<a id='comment:11'></a>\nTiny mistake that the range of `randint(0,n)` is actually `range(0,n+1)`.\n\n---\nNew commits:\n|                                                                                                                                          |                                                                                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------|\n|[48bd40e](https://github.com/sagemath/sagetrac-mirror/commit/48bd40e1d975d00681060992ee3ad818c1b626e0)|`Merge branch 'public/29974-reb' of git://trac.sagemath.org/sage into test_29974`|\n|[39f94e6](https://github.com/sagemath/sagetrac-mirror/commit/39f94e67e1630a9a021dc4f1ec46152384a1c50c)|`fix index error with random derangements`|",
    "created_at": "2020-08-15T07:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589673",
    "user": "https://github.com/kliem"
}
```

<a id='comment:11'></a>
Tiny mistake that the range of `randint(0,n)` is actually `range(0,n+1)`.

---
New commits:
|                                                                                                                                          |                                                                                 |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------|
|[48bd40e](https://github.com/sagemath/sagetrac-mirror/commit/48bd40e1d975d00681060992ee3ad818c1b626e0)|`Merge branch 'public/29974-reb' of git://trac.sagemath.org/sage into test_29974`|
|[39f94e6](https://github.com/sagemath/sagetrac-mirror/commit/39f94e67e1630a9a021dc4f1ec46152384a1c50c)|`fix index error with random derangements`|



---

archive/issue_comments_589674.json:
```json
{
    "body": "Changing commit from \"a914b8db0373ab16bf24fafa3775fbfd3a1c32f9\" to \"39f94e67e1630a9a021dc4f1ec46152384a1c50c\"",
    "created_at": "2020-08-15T07:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589674",
    "user": "https://github.com/kliem"
}
```

Changing commit from "a914b8db0373ab16bf24fafa3775fbfd3a1c32f9" to "39f94e67e1630a9a021dc4f1ec46152384a1c50c"



---

archive/issue_comments_589675.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,4 +5,6 @@\n ```\n pass for different values `n` than just `0`.\n \n-See also: #30186 containment check for standard bracketed lyndon words does not work \n+See also: #30186 containment check for standard bracketed lyndon words does not work.\n+\n+Along the way we fix a tiny but annoying bug, where random dearangments could fail, because `randint(0,n)` has range `range(0,n+1)`. \n``````\n",
    "created_at": "2020-08-15T07:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589675",
    "user": "https://github.com/kliem"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,4 +5,6 @@
 ```
 pass for different values `n` than just `0`.
 
-See also: #30186 containment check for standard bracketed lyndon words does not work 
+See also: #30186 containment check for standard bracketed lyndon words does not work.
+
+Along the way we fix a tiny but annoying bug, where random dearangments could fail, because `randint(0,n)` has range `range(0,n+1)`. 
``````




---

archive/issue_comments_589676.json:
```json
{
    "body": "<a id='comment:12'></a>\nThere is \n\n```\nfrom random import randrange\n```\nfor that. Do you mind to change to the lesser known `randrange`?",
    "created_at": "2020-08-15T08:16:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589676",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:12'></a>
There is 

```
from random import randrange
```
for that. Do you mind to change to the lesser known `randrange`?



---

archive/issue_comments_589677.json:
```json
{
    "body": "Changing commit from \"39f94e67e1630a9a021dc4f1ec46152384a1c50c\" to \"a391a3ebe2be270302b55f2360aeb53390d02492\"",
    "created_at": "2020-08-15T08:24:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589677",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "39f94e67e1630a9a021dc4f1ec46152384a1c50c" to "a391a3ebe2be270302b55f2360aeb53390d02492"



---

archive/issue_comments_589678.json:
```json
{
    "body": "<a id='comment:13'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|\n|[a391a3e](https://github.com/sagemath/sagetrac-mirror/commit/a391a3ebe2be270302b55f2360aeb53390d02492)|`use randrange instead of randint`|",
    "created_at": "2020-08-15T08:24:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589678",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|
|[a391a3e](https://github.com/sagemath/sagetrac-mirror/commit/a391a3ebe2be270302b55f2360aeb53390d02492)|`use randrange instead of randint`|



---

archive/issue_comments_589679.json:
```json
{
    "body": "<a id='comment:14'></a>\nI like `randrange` much better. It is much more intuitive if you are used to `range`. (But reading the very short docstring that was exactly the point of introducing it.)",
    "created_at": "2020-08-15T08:25:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589679",
    "user": "https://github.com/kliem"
}
```

<a id='comment:14'></a>
I like `randrange` much better. It is much more intuitive if you are used to `range`. (But reading the very short docstring that was exactly the point of introducing it.)



---

archive/issue_comments_589680.json:
```json
{
    "body": "<a id='comment:15'></a>\nIn fact, I think we want to import it from prandom\n\n```\nfrom sage.misc.prandom import randrange  \n```\nin order for it to depend on the `--random-seed`.",
    "created_at": "2020-08-15T08:29:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589680",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:15'></a>
In fact, I think we want to import it from prandom

```
from sage.misc.prandom import randrange  
```
in order for it to depend on the `--random-seed`.



---

archive/issue_comments_589681.json:
```json
{
    "body": "<a id='comment:16'></a>\nI was wondering about what the point was of duplicating that thing.",
    "created_at": "2020-08-15T08:32:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589681",
    "user": "https://github.com/kliem"
}
```

<a id='comment:16'></a>
I was wondering about what the point was of duplicating that thing.



---

archive/issue_comments_589682.json:
```json
{
    "body": "Changing commit from \"a391a3ebe2be270302b55f2360aeb53390d02492\" to \"928863f09ef7659221ca42d5038cf19f1e690d9d\"",
    "created_at": "2020-08-15T08:33:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589682",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a391a3ebe2be270302b55f2360aeb53390d02492" to "928863f09ef7659221ca42d5038cf19f1e690d9d"



---

archive/issue_comments_589683.json:
```json
{
    "body": "<a id='comment:17'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|\n|[928863f](https://github.com/sagemath/sagetrac-mirror/commit/928863f09ef7659221ca42d5038cf19f1e690d9d)|`import randrange from the correct place`|",
    "created_at": "2020-08-15T08:33:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589683",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|
|[928863f](https://github.com/sagemath/sagetrac-mirror/commit/928863f09ef7659221ca42d5038cf19f1e690d9d)|`import randrange from the correct place`|



---

archive/issue_comments_589684.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-08-15T08:59:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589684",
    "user": "https://github.com/seblabbe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_589685.json:
```json
{
    "body": "<a id='comment:19'></a>\nThank you.",
    "created_at": "2020-08-15T10:18:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589685",
    "user": "https://github.com/kliem"
}
```

<a id='comment:19'></a>
Thank you.



---

archive/issue_comments_589686.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-08-16T22:33:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589686",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_086831.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-16T22:33:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29974#event-86831"
}
```



---

archive/issue_comments_589687.json:
```json
{
    "body": "Changing branch from \"public/29974-reb2\" to \"928863f09ef7659221ca42d5038cf19f1e690d9d\"",
    "created_at": "2020-08-16T22:33:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589687",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/29974-reb2" to "928863f09ef7659221ca42d5038cf19f1e690d9d"



---

archive/issue_comments_589688.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,10 +1,16 @@\n+Part of #29935.\n+\n This ticket makes\n \n ```\n sage -t --long --random-seed=n src/sage/combinat/\n ```\n-pass for different values `n` than just `0`.\n+pass for `n` more general than just `0`.\n \n-See also: #30186 containment check for standard bracketed lyndon words does not work.\n+See also:\n+- #30186 containment check for standard bracketed Lyndon words does not work.\n \n-Along the way we fix a tiny but annoying bug, where random dearangments could fail, because `randint(0,n)` has range `range(0,n+1)`. \n+Along the way we fix a tiny but annoying bug, where random derangements could fail.\n+\n+That was because `randint(0, n)` has range `range(0, n + 1)`,\n+which had caused confusion.\n``````\n",
    "created_at": "2021-04-29T22:02:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589688",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,10 +1,16 @@
+Part of #29935.
+
 This ticket makes
 
 ```
 sage -t --long --random-seed=n src/sage/combinat/
 ```
-pass for different values `n` than just `0`.
+pass for `n` more general than just `0`.
 
-See also: #30186 containment check for standard bracketed lyndon words does not work.
+See also:
+- #30186 containment check for standard bracketed Lyndon words does not work.
 
-Along the way we fix a tiny but annoying bug, where random dearangments could fail, because `randint(0,n)` has range `range(0,n+1)`. 
+Along the way we fix a tiny but annoying bug, where random derangements could fail.
+
+That was because `randint(0, n)` has range `range(0, n + 1)`,
+which had caused confusion.
``````




---

archive/issue_comments_589689.json:
```json
{
    "body": "Changing commit from \"928863f09ef7659221ca42d5038cf19f1e690d9d\" to \"\"",
    "created_at": "2021-04-29T22:02:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29974#issuecomment-589689",
    "user": "https://github.com/slel"
}
```

Changing commit from "928863f09ef7659221ca42d5038cf19f1e690d9d" to ""
