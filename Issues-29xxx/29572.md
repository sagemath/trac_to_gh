# Issue 29572: Fix perl_term_readline_gnu build error on conda-forge-macos-maximal

archive/issues_029335.json:
```json
{
    "assignees": [],
    "body": "https://github.com/mkoeppe/sage/runs/612692498\n\n```\nx86_64-apple-darwin13.4.0-clang -c  -I/Users/runner/runners/2.169.1/work/sage/sage/.tox/local-conda-forge-macos-maximal/local/include -fno-common -DPERL_DARWIN -no-cpp-precomp -mmacosx-version-min=10.9 -fno-strict-aliasing -pipe -fstack-protector-strong -DPERL_USE_SAFE_PUTENV -O3   -DVERSION=\\\"1.35\\\" -DXS_VERSION=\\\"1.35\\\" -fPIC --sysroot=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.9.sdk \"-I/Users/runner/runners/2.169.1/work/sage/sage/.tox/local-conda-forge-macos-maximal/conda/lib/5.26.2/darwin-thread-multi-2level/CORE\"  -DHAVE_STRING_H -DTRG_READLINE_VERSION=0x0800 Gnu.c\nclang-9: warning: argument unused during compilation: '--sysroot=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.9.sdk' [-Wunused-command-line-argument]\nGnu.xs:161:8: error: unknown type name 'rl_hook_func_t'\nstatic rl_hook_func_t *rl_pre_input_hook;\n       ^\nGnu.xs:164:8: error: unknown type name 'rl_compdisp_func_t'\nstatic rl_compdisp_func_t *rl_completion_display_matches_hook;\n       ^\n```\n\n---\n\nReferences:\n- https://perldoc.perl.org/ExtUtils/MakeMaker.html\n\n- Patch is generated from \u200bhttps://github.com/mkoeppe/Term-Readline-Gnu.git\n\n\nCC:  @isuruf @saraedum @dimpase\n\nComponent: **porting**\n\nAuthor: **Matthias Koeppe, Isuru Fernando**\n\nBranch/Commit: **[`df48845`](https://github.com/sagemath/sagetrac-mirror/commit/df4884530bcd1c29460feed2011e23ef3b42c12a)**\n\nReviewer: **Isuru Fernando, Matthias Koeppe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29572_\n\n",
    "closed_at": "2020-05-26T21:49:57Z",
    "created_at": "2020-04-24T23:43:10Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20porting",
        "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Fix perl_term_readline_gnu build error on conda-forge-macos-maximal",
    "type": "issue",
    "updated_at": "2020-05-26T21:49:57Z",
    "url": "https://github.com/sagemath/sage/issues/29572",
    "user": "https://github.com/mkoeppe"
}
```
https://github.com/mkoeppe/sage/runs/612692498

```
x86_64-apple-darwin13.4.0-clang -c  -I/Users/runner/runners/2.169.1/work/sage/sage/.tox/local-conda-forge-macos-maximal/local/include -fno-common -DPERL_DARWIN -no-cpp-precomp -mmacosx-version-min=10.9 -fno-strict-aliasing -pipe -fstack-protector-strong -DPERL_USE_SAFE_PUTENV -O3   -DVERSION=\"1.35\" -DXS_VERSION=\"1.35\" -fPIC --sysroot=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.9.sdk "-I/Users/runner/runners/2.169.1/work/sage/sage/.tox/local-conda-forge-macos-maximal/conda/lib/5.26.2/darwin-thread-multi-2level/CORE"  -DHAVE_STRING_H -DTRG_READLINE_VERSION=0x0800 Gnu.c
clang-9: warning: argument unused during compilation: '--sysroot=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.9.sdk' [-Wunused-command-line-argument]
Gnu.xs:161:8: error: unknown type name 'rl_hook_func_t'
static rl_hook_func_t *rl_pre_input_hook;
       ^
Gnu.xs:164:8: error: unknown type name 'rl_compdisp_func_t'
static rl_compdisp_func_t *rl_completion_display_matches_hook;
       ^
```

---

References:
- https://perldoc.perl.org/ExtUtils/MakeMaker.html

- Patch is generated from ​https://github.com/mkoeppe/Term-Readline-Gnu.git


CC:  @isuruf @saraedum @dimpase

Component: **porting**

Author: **Matthias Koeppe, Isuru Fernando**

Branch/Commit: **[`df48845`](https://github.com/sagemath/sagetrac-mirror/commit/df4884530bcd1c29460feed2011e23ef3b42c12a)**

Reviewer: **Isuru Fernando, Matthias Koeppe**

_Issue created by migration from https://trac.sagemath.org/ticket/29572_





---

archive/issue_events_403681.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-24T23:43:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29572#event-403681"
}
```



---

archive/issue_events_403682.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-24T23:43:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20porting",
    "label_color": "0000b0",
    "label_name": "c: porting",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29572#event-403682"
}
```



---

archive/issue_events_403683.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-24T23:43:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29572#event-403683"
}
```



---

archive/issue_events_403684.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-24T23:43:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29572#event-403684"
}
```



---

archive/issue_comments_465182.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,13 @@\n https://github.com/mkoeppe/sage/runs/612692498\n+\n+```\n+x86_64-apple-darwin13.4.0-clang -c  -I/Users/runner/runners/2.169.1/work/sage/sage/.tox/local-conda-forge-macos-maximal/local/include -fno-common -DPERL_DARWIN -no-cpp-precomp -mmacosx-version-min=10.9 -fno-strict-aliasing -pipe -fstack-protector-strong -DPERL_USE_SAFE_PUTENV -O3   -DVERSION=\\\"1.35\\\" -DXS_VERSION=\\\"1.35\\\" -fPIC --sysroot=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.9.sdk \"-I/Users/runner/runners/2.169.1/work/sage/sage/.tox/local-conda-forge-macos-maximal/conda/lib/5.26.2/darwin-thread-multi-2level/CORE\"  -DHAVE_STRING_H -DTRG_READLINE_VERSION=0x0800 Gnu.c\n+clang-9: warning: argument unused during compilation: '--sysroot=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.9.sdk' [-Wunused-command-line-argument]\n+Gnu.xs:161:8: error: unknown type name 'rl_hook_func_t'\n+static rl_hook_func_t *rl_pre_input_hook;\n+       ^\n+Gnu.xs:164:8: error: unknown type name 'rl_compdisp_func_t'\n+static rl_compdisp_func_t *rl_completion_display_matches_hook;\n+       ^\n+```\n+\n``````\n",
    "created_at": "2020-04-24T23:44:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465182",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,13 @@
 https://github.com/mkoeppe/sage/runs/612692498
+
+```
+x86_64-apple-darwin13.4.0-clang -c  -I/Users/runner/runners/2.169.1/work/sage/sage/.tox/local-conda-forge-macos-maximal/local/include -fno-common -DPERL_DARWIN -no-cpp-precomp -mmacosx-version-min=10.9 -fno-strict-aliasing -pipe -fstack-protector-strong -DPERL_USE_SAFE_PUTENV -O3   -DVERSION=\"1.35\" -DXS_VERSION=\"1.35\" -fPIC --sysroot=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.9.sdk "-I/Users/runner/runners/2.169.1/work/sage/sage/.tox/local-conda-forge-macos-maximal/conda/lib/5.26.2/darwin-thread-multi-2level/CORE"  -DHAVE_STRING_H -DTRG_READLINE_VERSION=0x0800 Gnu.c
+clang-9: warning: argument unused during compilation: '--sysroot=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.9.sdk' [-Wunused-command-line-argument]
+Gnu.xs:161:8: error: unknown type name 'rl_hook_func_t'
+static rl_hook_func_t *rl_pre_input_hook;
+       ^
+Gnu.xs:164:8: error: unknown type name 'rl_compdisp_func_t'
+static rl_compdisp_func_t *rl_completion_display_matches_hook;
+       ^
+```
+
``````




---

archive/issue_comments_465183.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI'm not sure why it's picking up the readline package from macOS.",
    "created_at": "2020-04-25T00:32:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465183",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:2" align="right">comment:2</div>

I'm not sure why it's picking up the readline package from macOS.



---

archive/issue_comments_465184.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI know why. perl_term_readline_gnu is not using `CFLAGS` env variable",
    "created_at": "2020-04-25T00:39:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465184",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:3" align="right">comment:3</div>

I know why. perl_term_readline_gnu is not using `CFLAGS` env variable



---

archive/issue_comments_465185.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nspkg-install.in should pass the path of readline to `Makefile.PL` using `--incpath=`",
    "created_at": "2020-04-25T00:49:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465185",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:4" align="right">comment:4</div>

spkg-install.in should pass the path of readline to `Makefile.PL` using `--incpath=`



---

archive/issue_comments_465186.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\n`incdir`, sorry.",
    "created_at": "2020-04-25T00:52:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465186",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:5" align="right">comment:5</div>

`incdir`, sorry.



---

archive/issue_comments_465187.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nShould have been `includedir` and `libdir`",
    "created_at": "2020-04-25T00:56:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465187",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:6" align="right">comment:6</div>

Should have been `includedir` and `libdir`



---

archive/issue_comments_465188.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI see. Related: #29000",
    "created_at": "2020-04-25T01:18:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465188",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

I see. Related: #29000



---

archive/issue_comments_465189.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nOK, I'm going to fix #29000, creating env vars `SAGE_READLINE_INCDIR` and\n`SAGE_READLINE_LIBDIR` - it would help if you tell me what needs to change here, like\n\n```diff\n- perl Makefile.PL --prefix=\"$SAGE_LOCAL\" INSTALL_BASE=\"$SAGE_LOCAL\"\n+ perl Makefile.PL --prefix=\"$SAGE_LOCAL\" INSTALL_BASE=\"$SAGE_LOCAL\" \\ \n+ --includedir=$SAGE_READLINE_INCDIR --libdir=$SAGE_READLINE_LIBDIR \n```\nDoes this look right?",
    "created_at": "2020-04-25T02:35:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465189",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:8" align="right">comment:8</div>

OK, I'm going to fix #29000, creating env vars `SAGE_READLINE_INCDIR` and
`SAGE_READLINE_LIBDIR` - it would help if you tell me what needs to change here, like

```diff
- perl Makefile.PL --prefix="$SAGE_LOCAL" INSTALL_BASE="$SAGE_LOCAL"
+ perl Makefile.PL --prefix="$SAGE_LOCAL" INSTALL_BASE="$SAGE_LOCAL" \ 
+ --includedir=$SAGE_READLINE_INCDIR --libdir=$SAGE_READLINE_LIBDIR 
```
Does this look right?



---

archive/issue_comments_465190.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nYou don't need the prefix there.\n\n```\nperl Makefile.PL --includedir=$SAGE_READLINE_INCDIR --libdir=$SAGE_READLINE_LIBDIR INSTALL_BASE=\"$SAGE_LOCAL\" \n```",
    "created_at": "2020-04-25T02:38:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465190",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:9" align="right">comment:9</div>

You don't need the prefix there.

```
perl Makefile.PL --includedir=$SAGE_READLINE_INCDIR --libdir=$SAGE_READLINE_LIBDIR INSTALL_BASE="$SAGE_LOCAL" 
```



---

archive/issue_comments_465191.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nCan you try something like,\n\n```\n--- Makefile.PL 2020-04-27 04:21:25.239877458 +0000\n+++ Makefile.PL.old     2020-04-27 04:19:41.682872176 +0000\n@@ -138,14 +138,14 @@\n      VERSION_FROM => 'Gnu.pm',\n      MIN_PERL_VERSION => '5.8.1',\n      LIBS        => [ \"$RLLIB $libs\" ],\n-     LDDLFLAGS   => \"$RLLIB $Config{lddlflags} $ENV{LDFLAGS}\",                                                                                                       \n+     LDDLFLAGS   => \"$RLLIB $Config{lddlflags}\",                                                                                                                     \n      dynamic_lib  => { OTHERLDFLAGS => $lddflags },                                                                                                                  \n      DEFINE      => $defs,                                                                                                                                           \n      ($Config{osname} eq 'os2' ?                                                                                                                                     \n       (\n        IMPORTS   => { xfree => 'emxlibcm.401' }, # Yuck!\n       ) : () ),\n-     INC         => \"$RLINC $ENV{CFLAGS}\",\n+     INC         => $RLINC,\n      dist        => { COMPRESS => 'gzip -9f', SUFFIX => 'gz' },\n      clean       => { FILES => \"rlver.c rlver$Config{_exe} rlmalloc.c rlmalloc$Config{_exe}\" },\n );\n```",
    "created_at": "2020-04-27T05:00:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465191",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:10" align="right">comment:10</div>

Can you try something like,

```
--- Makefile.PL 2020-04-27 04:21:25.239877458 +0000
+++ Makefile.PL.old     2020-04-27 04:19:41.682872176 +0000
@@ -138,14 +138,14 @@
      VERSION_FROM => 'Gnu.pm',
      MIN_PERL_VERSION => '5.8.1',
      LIBS        => [ "$RLLIB $libs" ],
-     LDDLFLAGS   => "$RLLIB $Config{lddlflags} $ENV{LDFLAGS}",                                                                                                       
+     LDDLFLAGS   => "$RLLIB $Config{lddlflags}",                                                                                                                     
      dynamic_lib  => { OTHERLDFLAGS => $lddflags },                                                                                                                  
      DEFINE      => $defs,                                                                                                                                           
      ($Config{osname} eq 'os2' ?                                                                                                                                     
       (
        IMPORTS   => { xfree => 'emxlibcm.401' }, # Yuck!
       ) : () ),
-     INC         => "$RLINC $ENV{CFLAGS}",
+     INC         => $RLINC,
      dist        => { COMPRESS => 'gzip -9f', SUFFIX => 'gz' },
      clean       => { FILES => "rlver.c rlver$Config{_exe} rlmalloc.c rlmalloc$Config{_exe}" },
 );
```



---

archive/issue_comments_465192.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\n@mkoeppe, can you try the patch above?",
    "created_at": "2020-04-29T20:55:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465192",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:11" align="right">comment:11</div>

@mkoeppe, can you try the patch above?



---

archive/issue_comments_465193.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nThanks, will try",
    "created_at": "2020-04-30T00:11:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465193",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:12" align="right">comment:12</div>

Thanks, will try



---

archive/issue_comments_465194.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nJust quickly checked that 1.36 does not contain an immediate fix for the problem (#29623)",
    "created_at": "2020-04-30T01:09:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465194",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:13" align="right">comment:13</div>

Just quickly checked that 1.36 does not contain an immediate fix for the problem (#29623)



---

archive/issue_comments_465195.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nThat patch should be reversed. Sorry about that.",
    "created_at": "2020-04-30T01:22:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465195",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:14" align="right">comment:14</div>

That patch should be reversed. Sorry about that.



---

archive/issue_comments_465196.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nSure.",
    "created_at": "2020-04-30T01:44:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465196",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:15" align="right">comment:15</div>

Sure.



---

archive/issue_comments_465197.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nBut I don't think this is the right fix. I'd think it's dangerous to mix the Perl-provided flags with the general CFLAGS, LDFLAGS",
    "created_at": "2020-04-30T01:45:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465197",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:16" align="right">comment:16</div>

But I don't think this is the right fix. I'd think it's dangerous to mix the Perl-provided flags with the general CFLAGS, LDFLAGS



---

archive/issue_comments_465198.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nSo I think it's better to go through #29000",
    "created_at": "2020-04-30T01:46:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465198",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:17" align="right">comment:17</div>

So I think it's better to go through #29000



---

archive/issue_comments_465199.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI disagree. CFLAGS and LDFLAGS from the environment should be respected by any build system. I don't think its dangerous to mix these flags. Almost all spkgs pass through CFLAGS and LDFLAGS.",
    "created_at": "2020-04-30T01:50:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465199",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:18" align="right">comment:18</div>

I disagree. CFLAGS and LDFLAGS from the environment should be respected by any build system. I don't think its dangerous to mix these flags. Almost all spkgs pass through CFLAGS and LDFLAGS.



---

archive/issue_comments_465200.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nOK, I'll try it",
    "created_at": "2020-04-30T02:10:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465200",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:19" align="right">comment:19</div>

OK, I'll try it



---

archive/issue_comments_465201.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,3 +11,10 @@\n        ^\n ```\n \n+---\n+\n+References:\n+- https://perldoc.perl.org/ExtUtils/MakeMaker.html\n+\n+\n+\n``````\n",
    "created_at": "2020-04-30T02:20:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465201",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,3 +11,10 @@
        ^
 ```
 
+---
+
+References:
+- https://perldoc.perl.org/ExtUtils/MakeMaker.html
+
+
+
``````




---

archive/issue_comments_465202.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nThanks for that link. Maybe the following will work.\n\n```\nexport PERL_MM_OPT=\"INC=\\\"${CFLAGS}\\\" LDDLFLAGS=\\\"${LDFLAGS}\\\"\"\n```",
    "created_at": "2020-04-30T02:25:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465202",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:21" align="right">comment:21</div>

Thanks for that link. Maybe the following will work.

```
export PERL_MM_OPT="INC=\"${CFLAGS}\" LDDLFLAGS=\"${LDFLAGS}\""
```



---

archive/issue_comments_465203.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nYour patch from comment 10 seems to work on macOS. I try with the other approach too,\nand then a test on more platforms will be necessary",
    "created_at": "2020-04-30T03:27:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465203",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:22" align="right">comment:22</div>

Your patch from comment 10 seems to work on macOS. I try with the other approach too,
and then a test on more platforms will be necessary



---

archive/issue_comments_465204.json:
```json
{
    "body": "Branch: **[u/mkoeppe/fix_perl_term_readline_gnu_build_error_on_conda_forge_macos_maximal](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/fix_perl_term_readline_gnu_build_error_on_conda_forge_macos_maximal)**",
    "created_at": "2020-04-30T03:31:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465204",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/fix_perl_term_readline_gnu_build_error_on_conda_forge_macos_maximal](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/fix_perl_term_readline_gnu_build_error_on_conda_forge_macos_maximal)**



---

archive/issue_comments_465205.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b709cf2e10d491f0822e368774a8ee02aa9bea44\"><code>b709cf2</code></a></td><td><code>build/pkgs/perl_term_readline_gnu/patches: Add 0002-Makefile.PL-Include-CFLAGS-LDFLAGS.patch</code></td></tr></table>\n",
    "created_at": "2020-04-30T03:32:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465205",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:24"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b709cf2e10d491f0822e368774a8ee02aa9bea44"><code>b709cf2</code></a></td><td><code>build/pkgs/perl_term_readline_gnu/patches: Add 0002-Makefile.PL-Include-CFLAGS-LDFLAGS.patch</code></td></tr></table>




---

archive/issue_comments_465206.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -16,5 +16,5 @@\n References:\n - https://perldoc.perl.org/ExtUtils/MakeMaker.html\n \n+- Patch is generated from \u200bhttps://github.com/mkoeppe/Term-Readline-Gnu.git\n \n-\n``````\n",
    "created_at": "2020-04-30T03:32:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465206",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -16,5 +16,5 @@
 References:
 - https://perldoc.perl.org/ExtUtils/MakeMaker.html
 
+- Patch is generated from ​https://github.com/mkoeppe/Term-Readline-Gnu.git
 
-
``````




---

archive/issue_comments_465207.json:
```json
{
    "body": "Commit: **[`b709cf2`](https://github.com/sagemath/sagetrac-mirror/commit/b709cf2e10d491f0822e368774a8ee02aa9bea44)**",
    "created_at": "2020-04-30T03:32:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465207",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`b709cf2`](https://github.com/sagemath/sagetrac-mirror/commit/b709cf2e10d491f0822e368774a8ee02aa9bea44)**



---

archive/issue_comments_465208.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nTests running at https://github.com/mkoeppe/sage/actions/runs/91785670",
    "created_at": "2020-04-30T03:49:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465208",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:25" align="right">comment:25</div>

Tests running at https://github.com/mkoeppe/sage/actions/runs/91785670



---

archive/issue_comments_465209.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@isuruf](#comment%3A21):\n> Thanks for that link. Maybe the following will work.\n> \n> ```\n> export PERL_MM_OPT=\"INC=\\\"${CFLAGS}\\\" LDDLFLAGS=\\\"${LDFLAGS}\\\"\"\n> ```\n\nDoes not work as is, causes linker errors, probably too much of Perl's stuff is overwrittten:\n\n```\nx86_64-apple-darwin13.4.0-clang  -L/Users/mkoeppe/s/sage/sage-rebasing/.tox/local-conda-forge-macos-maximal/local/lib -Wl,-rpath,/Users/mkoeppe/s/sage/sage-rebasing/.tox/local-conda-forge-macos-maximal/local/lib -Wl,-pie -Wl,-headerpad_max_install_names -Wl,-dead_strip_dylibs -Wl,-rpath,/Users/mkoeppe/s/sage/sage-rebasing/.tox/local-conda-forge-macos-maximal/conda/lib -L/Users/mkoeppe/s/sage/sage-rebasing/.tox/local-conda-forge-macos-maximal/conda/lib Gnu.o  -o blib/arch/auto/Term/ReadLine/Gnu/Gnu.bundle  \\\n      \\\n  \nUndefined symbols for architecture x86_64:\n  \"_PL_thr_key\", referenced from:\n      _boot_Term__ReadLine__Gnu in Gnu.o\n      _XS_Term__ReadLine__Gnu__XS_rl_readline in Gnu.o\n      _XS_Term__ReadLine__Gnu__XS_rl_add_defun in Gnu.o\n      _XS_Term__ReadLine__Gnu__XS_rl_make_bare_keymap in Gnu.o\n      _XS_Term__ReadLine__Gnu__XS__rl_copy_keymap in Gnu.o\n      _XS_Term__ReadLine__Gnu__XS_rl_make_keymap in Gnu.o\n      _XS_Term__ReadLine__Gnu__XS__rl_discard_keymap in Gnu.o\n      ...\n  \"_PerlIO_debug\", referenced from:\n      _XS_Term__ReadLine__Gnu__Var__rl_store_iostream in Gnu.o\n  \"_PerlIO_findFILE\", referenced from:\n      _XS_Term__ReadLine__Gnu__XS_rl_getc in Gnu.o\n      _XS_Term__ReadLine__Gnu__Var__rl_store_iostream in Gnu.o\n  \"_Perl_av_fetch\", referenced from:\n      _XS_Term__ReadLine__Gnu__XS_rl_display_match_list in Gnu.o\n  \"_Perl_av_len\", referenced from:\n      _XS_Term__ReadLine__Gnu__XS_rl_display_match_list in Gnu.o\n  \"_Perl_av_push\", referenced from:\n      _completion_display_matches_hook_wrapper in Gnu.o\n  \"_Perl_call_sv\", referenced from:\n```",
    "created_at": "2020-04-30T03:52:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465209",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@isuruf](#comment%3A21):
> Thanks for that link. Maybe the following will work.
> 
> ```
> export PERL_MM_OPT="INC=\"${CFLAGS}\" LDDLFLAGS=\"${LDFLAGS}\""
> ```

Does not work as is, causes linker errors, probably too much of Perl's stuff is overwrittten:

```
x86_64-apple-darwin13.4.0-clang  -L/Users/mkoeppe/s/sage/sage-rebasing/.tox/local-conda-forge-macos-maximal/local/lib -Wl,-rpath,/Users/mkoeppe/s/sage/sage-rebasing/.tox/local-conda-forge-macos-maximal/local/lib -Wl,-pie -Wl,-headerpad_max_install_names -Wl,-dead_strip_dylibs -Wl,-rpath,/Users/mkoeppe/s/sage/sage-rebasing/.tox/local-conda-forge-macos-maximal/conda/lib -L/Users/mkoeppe/s/sage/sage-rebasing/.tox/local-conda-forge-macos-maximal/conda/lib Gnu.o  -o blib/arch/auto/Term/ReadLine/Gnu/Gnu.bundle  \
      \
  
Undefined symbols for architecture x86_64:
  "_PL_thr_key", referenced from:
      _boot_Term__ReadLine__Gnu in Gnu.o
      _XS_Term__ReadLine__Gnu__XS_rl_readline in Gnu.o
      _XS_Term__ReadLine__Gnu__XS_rl_add_defun in Gnu.o
      _XS_Term__ReadLine__Gnu__XS_rl_make_bare_keymap in Gnu.o
      _XS_Term__ReadLine__Gnu__XS__rl_copy_keymap in Gnu.o
      _XS_Term__ReadLine__Gnu__XS_rl_make_keymap in Gnu.o
      _XS_Term__ReadLine__Gnu__XS__rl_discard_keymap in Gnu.o
      ...
  "_PerlIO_debug", referenced from:
      _XS_Term__ReadLine__Gnu__Var__rl_store_iostream in Gnu.o
  "_PerlIO_findFILE", referenced from:
      _XS_Term__ReadLine__Gnu__XS_rl_getc in Gnu.o
      _XS_Term__ReadLine__Gnu__Var__rl_store_iostream in Gnu.o
  "_Perl_av_fetch", referenced from:
      _XS_Term__ReadLine__Gnu__XS_rl_display_match_list in Gnu.o
  "_Perl_av_len", referenced from:
      _XS_Term__ReadLine__Gnu__XS_rl_display_match_list in Gnu.o
  "_Perl_av_push", referenced from:
      _completion_display_matches_hook_wrapper in Gnu.o
  "_Perl_call_sv", referenced from:
```



---

archive/issue_comments_465210.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nThanks. I guess we'll have to go with patching. Is this ready for review?",
    "created_at": "2020-04-30T13:58:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465210",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:27" align="right">comment:27</div>

Thanks. I guess we'll have to go with patching. Is this ready for review?



---

archive/issue_events_403685.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-30T15:43:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29572#event-403685"
}
```



---

archive/issue_comments_465211.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nI haven't yet had a chance to look at the test results",
    "created_at": "2020-04-30T15:43:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465211",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:28" align="right">comment:28</div>

I haven't yet had a chance to look at the test results



---

archive/issue_comments_465212.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nMore tests at https://github.com/mkoeppe/sage/actions/runs/92681498",
    "created_at": "2020-05-01T01:31:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465212",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:29" align="right">comment:29</div>

More tests at https://github.com/mkoeppe/sage/actions/runs/92681498



---

archive/issue_comments_465213.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nOn `docker-conda-forge-standard` (https://github.com/mkoeppe/sage/runs/635176678):\n\n```\nChecking whether SageMath should install SPKG readline...\nchecking Installing ncurses? ... No.\nchecking for readline >= 6.0... yes\nconfigure: will use system package and not install SPKG readline\n\n****************************************************\nPackage 'perl_term_readline_gnu' is currently not installed\nNo legacy uninstaller found for 'perl_term_readline_gnu'; nothing to do\n/opt/conda/bin/..//bin/x86_64-conda_cos6-linux-gnu-gcc -I/sage/local/include -D_REENTRANT -D_GNU_SOURCE --sysroot=/opt/conda/bin/..//x86_64-conda_cos6-linux-gnu/sysroot -fwrapv -fno-strict-aliasing -pipe -fstack-protector-strong -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_FORTIFY_SOURCE=2 -DHAVE_STRING_H -O rlver.c -o rlver -L/sage/local/lib  -Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z,relro -Wl,-z,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath,/opt/conda/lib -Wl,-rpath-link,/opt/conda/lib -L/opt/conda/lib -fstack-protector-strong -lreadline -lncurses\nrlver.c:3:10: fatal error: readline/readline.h: No such file or directory\n #include <readline/readline.h>\n          ^~~~~~~~~~~~~~~~~~~~~\ncompilation terminated.\n!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\nCould not compile rlver.c.\n\nsystem(): Inappropriate ioctl for device\n\nIf you have installed the GNU Readline Library (libreadline.{a,so} and\nreadline/readline.h, etc.) on directories for which your perl is not\nconfigured to search (refer the value of `ccflags' and `libpath' in\nthe output of `perl -V'), specify the paths as follows;\n```\n(`docker pull docker.pkg.github.com/mkoeppe/sage/sage-docker-conda-forge-standard-with-targets:9.1.rc0-66608-g98b8231a35-failed`)\n\n\nSame on `docker-conda-forge-minimal` (https://github.com/mkoeppe/sage/runs/635176663?check_suite_focus=true) and `local-conda-forge-ubuntu-minimal (https://github.com/mkoeppe/sage/runs/635175780?check_suite_focus=true), all of which also have a system readline.",
    "created_at": "2020-05-01T03:38:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465213",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:30" align="right">comment:30</div>

On `docker-conda-forge-standard` (https://github.com/mkoeppe/sage/runs/635176678):

```
Checking whether SageMath should install SPKG readline...
checking Installing ncurses? ... No.
checking for readline >= 6.0... yes
configure: will use system package and not install SPKG readline

****************************************************
Package 'perl_term_readline_gnu' is currently not installed
No legacy uninstaller found for 'perl_term_readline_gnu'; nothing to do
/opt/conda/bin/..//bin/x86_64-conda_cos6-linux-gnu-gcc -I/sage/local/include -D_REENTRANT -D_GNU_SOURCE --sysroot=/opt/conda/bin/..//x86_64-conda_cos6-linux-gnu/sysroot -fwrapv -fno-strict-aliasing -pipe -fstack-protector-strong -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_FORTIFY_SOURCE=2 -DHAVE_STRING_H -O rlver.c -o rlver -L/sage/local/lib  -Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z,relro -Wl,-z,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath,/opt/conda/lib -Wl,-rpath-link,/opt/conda/lib -L/opt/conda/lib -fstack-protector-strong -lreadline -lncurses
rlver.c:3:10: fatal error: readline/readline.h: No such file or directory
 #include <readline/readline.h>
          ^~~~~~~~~~~~~~~~~~~~~
compilation terminated.
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
Could not compile rlver.c.

system(): Inappropriate ioctl for device

If you have installed the GNU Readline Library (libreadline.{a,so} and
readline/readline.h, etc.) on directories for which your perl is not
configured to search (refer the value of `ccflags' and `libpath' in
the output of `perl -V'), specify the paths as follows;
```
(`docker pull docker.pkg.github.com/mkoeppe/sage/sage-docker-conda-forge-standard-with-targets:9.1.rc0-66608-g98b8231a35-failed`)


Same on `docker-conda-forge-minimal` (https://github.com/mkoeppe/sage/runs/635176663?check_suite_focus=true) and `local-conda-forge-ubuntu-minimal (https://github.com/mkoeppe/sage/runs/635175780?check_suite_focus=true), all of which also have a system readline.



---

archive/issue_comments_465214.json:
```json
{
    "body": "Changed commit from **[`b709cf2`](https://github.com/sagemath/sagetrac-mirror/commit/b709cf2e10d491f0822e368774a8ee02aa9bea44)** to **[`5eed418`](https://github.com/sagemath/sagetrac-mirror/commit/5eed4183e75c4c307fbf6391e373dd9c871de84e)**",
    "created_at": "2020-05-01T04:40:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465214",
    "user": "https://github.com/isuruf"
}
```

Changed commit from **[`b709cf2`](https://github.com/sagemath/sagetrac-mirror/commit/b709cf2e10d491f0822e368774a8ee02aa9bea44)** to **[`5eed418`](https://github.com/sagemath/sagetrac-mirror/commit/5eed4183e75c4c307fbf6391e373dd9c871de84e)**



---

archive/issue_comments_465215.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/fix_perl_term_readline_gnu_build_error_on_conda_forge_macos_maximal](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/fix_perl_term_readline_gnu_build_error_on_conda_forge_macos_maximal)** to **[u/isuruf/fix_perl_term_readline_gnu_build_error_on_conda_forge_macos_maximal](https://github.com/sagemath/sagetrac-mirror/tree/u/isuruf/fix_perl_term_readline_gnu_build_error_on_conda_forge_macos_maximal)**",
    "created_at": "2020-05-01T04:40:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465215",
    "user": "https://github.com/isuruf"
}
```

Changed branch from **[u/mkoeppe/fix_perl_term_readline_gnu_build_error_on_conda_forge_macos_maximal](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/fix_perl_term_readline_gnu_build_error_on_conda_forge_macos_maximal)** to **[u/isuruf/fix_perl_term_readline_gnu_build_error_on_conda_forge_macos_maximal](https://github.com/sagemath/sagetrac-mirror/tree/u/isuruf/fix_perl_term_readline_gnu_build_error_on_conda_forge_macos_maximal)**



---

archive/issue_comments_465216.json:
```json
{
    "body": "<div id=\"comment:31\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5eed4183e75c4c307fbf6391e373dd9c871de84e\"><code>5eed418</code></a></td><td><code>Update patch for perl_term_readline_gnu</code></td></tr></table>\n",
    "created_at": "2020-05-01T04:40:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465216",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:31"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5eed4183e75c4c307fbf6391e373dd9c871de84e"><code>5eed418</code></a></td><td><code>Update patch for perl_term_readline_gnu</code></td></tr></table>




---

archive/issue_comments_465217.json:
```json
{
    "body": "Author: **Matthias Koeppe, Isuru Fernando**",
    "created_at": "2020-05-01T04:40:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465217",
    "user": "https://github.com/isuruf"
}
```

Author: **Matthias Koeppe, Isuru Fernando**



---

archive/issue_comments_465218.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nTesting again at https://github.com/mkoeppe/sage/actions/runs/92798013",
    "created_at": "2020-05-01T04:46:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465218",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:32" align="right">comment:32</div>

Testing again at https://github.com/mkoeppe/sage/actions/runs/92798013



---

archive/issue_comments_465219.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nPatch does not apply...\nCould you just send me a pull request at https://github.com/mkoeppe/Term-Readline-Gnu.git, then I can regenerate the patch",
    "created_at": "2020-05-01T05:58:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465219",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:33" align="right">comment:33</div>

Patch does not apply...
Could you just send me a pull request at https://github.com/mkoeppe/Term-Readline-Gnu.git, then I can regenerate the patch



---

archive/issue_comments_465220.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nhttps://github.com/mkoeppe/Term-Readline-Gnu/pull/1",
    "created_at": "2020-05-01T06:16:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465220",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:34" align="right">comment:34</div>

https://github.com/mkoeppe/Term-Readline-Gnu/pull/1



---

archive/issue_comments_465221.json:
```json
{
    "body": "Changed branch from **[u/isuruf/fix_perl_term_readline_gnu_build_error_on_conda_forge_macos_maximal](https://github.com/sagemath/sagetrac-mirror/tree/u/isuruf/fix_perl_term_readline_gnu_build_error_on_conda_forge_macos_maximal)** to **[u/mkoeppe/fix_perl_term_readline_gnu_build_error_on_conda_forge_macos_maximal](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/fix_perl_term_readline_gnu_build_error_on_conda_forge_macos_maximal)**",
    "created_at": "2020-05-01T06:24:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465221",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/isuruf/fix_perl_term_readline_gnu_build_error_on_conda_forge_macos_maximal](https://github.com/sagemath/sagetrac-mirror/tree/u/isuruf/fix_perl_term_readline_gnu_build_error_on_conda_forge_macos_maximal)** to **[u/mkoeppe/fix_perl_term_readline_gnu_build_error_on_conda_forge_macos_maximal](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/fix_perl_term_readline_gnu_build_error_on_conda_forge_macos_maximal)**



---

archive/issue_comments_465222.json:
```json
{
    "body": "Changed commit from **[`5eed418`](https://github.com/sagemath/sagetrac-mirror/commit/5eed4183e75c4c307fbf6391e373dd9c871de84e)** to **[`94fb0ec`](https://github.com/sagemath/sagetrac-mirror/commit/94fb0ecfec3f6235aafe5234d579efe40e32dfd0)**",
    "created_at": "2020-05-01T06:29:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465222",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[`5eed418`](https://github.com/sagemath/sagetrac-mirror/commit/5eed4183e75c4c307fbf6391e373dd9c871de84e)** to **[`94fb0ec`](https://github.com/sagemath/sagetrac-mirror/commit/94fb0ecfec3f6235aafe5234d579efe40e32dfd0)**



---

archive/issue_comments_465223.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nNew run at https://github.com/mkoeppe/sage/actions/runs/92850133\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/94fb0ecfec3f6235aafe5234d579efe40e32dfd0\"><code>94fb0ec</code></a></td><td><code>Update patch for perl_term_readline_gnu</code></td></tr></table>\n",
    "created_at": "2020-05-01T06:29:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465223",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:36" align="right">comment:36</div>

New run at https://github.com/mkoeppe/sage/actions/runs/92850133

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/94fb0ecfec3f6235aafe5234d579efe40e32dfd0"><code>94fb0ec</code></a></td><td><code>Update patch for perl_term_readline_gnu</code></td></tr></table>




---

archive/issue_comments_465224.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nOne more change, https://github.com/mkoeppe/Term-Readline-Gnu/pull/3",
    "created_at": "2020-05-01T06:42:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465224",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:37" align="right">comment:37</div>

One more change, https://github.com/mkoeppe/Term-Readline-Gnu/pull/3



---

archive/issue_comments_465225.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nLooks like the patch failed to apply.",
    "created_at": "2020-05-01T17:47:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465225",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:38" align="right">comment:38</div>

Looks like the patch failed to apply.



---

archive/issue_comments_465226.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nYes, looks like I messed up the merge into my testing branch",
    "created_at": "2020-05-01T17:52:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465226",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:39" align="right">comment:39</div>

Yes, looks like I messed up the merge into my testing branch



---

archive/issue_comments_465227.json:
```json
{
    "body": "<div id=\"comment:40\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1c3b7f3049a21b807540a0f29df4efb8e9d5aecd\"><code>1c3b7f3</code></a></td><td><code>Update patch</code></td></tr></table>\n",
    "created_at": "2020-05-01T21:56:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465227",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1c3b7f3049a21b807540a0f29df4efb8e9d5aecd"><code>1c3b7f3</code></a></td><td><code>Update patch</code></td></tr></table>




---

archive/issue_comments_465228.json:
```json
{
    "body": "Changed commit from **[`94fb0ec`](https://github.com/sagemath/sagetrac-mirror/commit/94fb0ecfec3f6235aafe5234d579efe40e32dfd0)** to **[`1c3b7f3`](https://github.com/sagemath/sagetrac-mirror/commit/1c3b7f3049a21b807540a0f29df4efb8e9d5aecd)**",
    "created_at": "2020-05-01T21:56:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465228",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`94fb0ec`](https://github.com/sagemath/sagetrac-mirror/commit/94fb0ecfec3f6235aafe5234d579efe40e32dfd0)** to **[`1c3b7f3`](https://github.com/sagemath/sagetrac-mirror/commit/1c3b7f3049a21b807540a0f29df4efb8e9d5aecd)**



---

archive/issue_comments_465229.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nAnother run: https://github.com/mkoeppe/sage/actions/runs/93430178",
    "created_at": "2020-05-01T21:58:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465229",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:41" align="right">comment:41</div>

Another run: https://github.com/mkoeppe/sage/actions/runs/93430178



---

archive/issue_comments_465230.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nBuild error on `conda-forge-macos-standard`:\n\n```\nLD_RUN_PATH=\"/Users/runner/runners/2.169.1/work/sage/sage/.tox/local-conda-forge-macos-standard/conda/lib\" x86_64-apple-darwin13.4.0-clang  -L/Users/runner/runners/2.169.1/work/sage/sage/.tox/local-conda-forge-macos-standard/local/lib -Wl,-pie -Wl,-headerpad_max_install_names -Wl,-dead_strip_dylibs -Wl,-rpath,/Users/runner/runners/2.169.1/work/sage/sage/.tox/local-conda-forge-macos-standard/conda/lib -L/Users/runner/runners/2.169.1/work/sage/sage/.tox/local-conda-forge-macos-standard/conda/lib -mmacosx-version-min=10.9 -bundle -undefined dynamic_lookup --sysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.9.sdk -fstack-protector-strong -L/Users/runner/runners/2.169.1/work/sage/sage/.tox/local-conda-forge-macos-standard/local/lib -Wl,-rpath,/Users/runner/runners/2.169.1/work/sage/sage/.tox/local-conda-forge-macos-standard/local/lib -Wl,-pie -Wl,-headerpad_max_install_names -Wl,-dead_strip_dylibs -Wl,-rpath,/Users/runner/runners/2.169.1/work/sage/sage/.tox/local-conda-forge-macos-standard/conda/lib -L/Users/runner/runners/2.169.1/work/sage/sage/.tox/local-conda-forge-macos-standard/conda/lib Gnu.o  -o blib/arch/auto/Term/ReadLine/Gnu/Gnu.bundle  \\\n   -L/Users/runner/runners/2.169.1/work/sage/sage/.tox/local-conda-forge-macos-standard/local/lib -L/Users/runner/runners/2.169.1/work/sage/sage/.tox/local-conda-forge-macos-standard/local/lib -Wl,-R/Users/runner/runners/2.169.1/work/sage/sage/.tox/local-conda-forge-macos-standard/local/lib -Wl,-pie -Wl,-headerpad_max_install_names -Wl,-dead_strip_dylibs -Wl,-R/Users/runner/runners/2.169.1/work/sage/sage/.tox/local-conda-forge-macos-standard/conda/lib -L/Users/runner/runners/2.169.1/work/sage/sage/.tox/local-conda-forge-macos-standard/conda/lib -lreadline -lncurses   \\\n  \nclang-9: warning: argument unused during compilation: '--sysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.9.sdk' [-Wunused-command-line-argument]\nld: unknown option: -R/Users/runner/runners/2.169.1/work/sage/sage/.tox/local-conda-forge-macos-standard/local/lib\nclang-9: error: linker command failed with exit code 1 (use -v to see invocation)\nmake[2]: *** [Makefile:494: blib/arch/auto/Term/ReadLine/Gnu/Gnu.bundle] Error 1\n```",
    "created_at": "2020-05-02T00:44:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465230",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:42" align="right">comment:42</div>

Build error on `conda-forge-macos-standard`:

```
LD_RUN_PATH="/Users/runner/runners/2.169.1/work/sage/sage/.tox/local-conda-forge-macos-standard/conda/lib" x86_64-apple-darwin13.4.0-clang  -L/Users/runner/runners/2.169.1/work/sage/sage/.tox/local-conda-forge-macos-standard/local/lib -Wl,-pie -Wl,-headerpad_max_install_names -Wl,-dead_strip_dylibs -Wl,-rpath,/Users/runner/runners/2.169.1/work/sage/sage/.tox/local-conda-forge-macos-standard/conda/lib -L/Users/runner/runners/2.169.1/work/sage/sage/.tox/local-conda-forge-macos-standard/conda/lib -mmacosx-version-min=10.9 -bundle -undefined dynamic_lookup --sysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.9.sdk -fstack-protector-strong -L/Users/runner/runners/2.169.1/work/sage/sage/.tox/local-conda-forge-macos-standard/local/lib -Wl,-rpath,/Users/runner/runners/2.169.1/work/sage/sage/.tox/local-conda-forge-macos-standard/local/lib -Wl,-pie -Wl,-headerpad_max_install_names -Wl,-dead_strip_dylibs -Wl,-rpath,/Users/runner/runners/2.169.1/work/sage/sage/.tox/local-conda-forge-macos-standard/conda/lib -L/Users/runner/runners/2.169.1/work/sage/sage/.tox/local-conda-forge-macos-standard/conda/lib Gnu.o  -o blib/arch/auto/Term/ReadLine/Gnu/Gnu.bundle  \
   -L/Users/runner/runners/2.169.1/work/sage/sage/.tox/local-conda-forge-macos-standard/local/lib -L/Users/runner/runners/2.169.1/work/sage/sage/.tox/local-conda-forge-macos-standard/local/lib -Wl,-R/Users/runner/runners/2.169.1/work/sage/sage/.tox/local-conda-forge-macos-standard/local/lib -Wl,-pie -Wl,-headerpad_max_install_names -Wl,-dead_strip_dylibs -Wl,-R/Users/runner/runners/2.169.1/work/sage/sage/.tox/local-conda-forge-macos-standard/conda/lib -L/Users/runner/runners/2.169.1/work/sage/sage/.tox/local-conda-forge-macos-standard/conda/lib -lreadline -lncurses   \
  
clang-9: warning: argument unused during compilation: '--sysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.9.sdk' [-Wunused-command-line-argument]
ld: unknown option: -R/Users/runner/runners/2.169.1/work/sage/sage/.tox/local-conda-forge-macos-standard/local/lib
clang-9: error: linker command failed with exit code 1 (use -v to see invocation)
make[2]: *** [Makefile:494: blib/arch/auto/Term/ReadLine/Gnu/Gnu.bundle] Error 1
```



---

archive/issue_comments_465231.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\n(The failure for `fedora` are unrelated, some system package did not install properly.)",
    "created_at": "2020-05-02T00:47:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465231",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:43" align="right">comment:43</div>

(The failure for `fedora` are unrelated, some system package did not install properly.)



---

archive/issue_events_403686.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-02T00:49:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29572#event-403686"
}
```



---

archive/issue_events_403687.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-02T00:49:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29572#event-403687"
}
```



---

archive/issue_comments_465232.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nI think this is an instance of \"it's dangerous to mix the Perl-provided flags with the general CFLAGS, LDFLAGS\"",
    "created_at": "2020-05-02T18:13:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465232",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:45" align="right">comment:45</div>

I think this is an instance of "it's dangerous to mix the Perl-provided flags with the general CFLAGS, LDFLAGS"



---

archive/issue_comments_465233.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nNope, this is an instance of \"Perl is trying to be smart and ends up being stupid\". By changing LDFLAGS like `-Wl,-rpath` to `-Wl,-R` or `-R` depending on whether the linker is invoked directly or not, it's breaking OSX as the linker doesn't know '-R'",
    "created_at": "2020-05-02T18:56:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465233",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:46" align="right">comment:46</div>

Nope, this is an instance of "Perl is trying to be smart and ends up being stupid". By changing LDFLAGS like `-Wl,-rpath` to `-Wl,-R` or `-R` depending on whether the linker is invoked directly or not, it's breaking OSX as the linker doesn't know '-R'



---

archive/issue_comments_465234.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nOK, how to fix?",
    "created_at": "2020-05-02T23:20:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465234",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:47" align="right">comment:47</div>

OK, how to fix?



---

archive/issue_comments_465235.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nWe need to fool Perl by changing `-Wl,-rpath,/path/to/lib` to `-Xlinker -rpath -Xlinker /path/to/lib` if the compiler is clang on osx. Otherwise we'll have to patch Perl itself, but that'll take some time.",
    "created_at": "2020-05-02T23:26:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465235",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:48" align="right">comment:48</div>

We need to fool Perl by changing `-Wl,-rpath,/path/to/lib` to `-Xlinker -rpath -Xlinker /path/to/lib` if the compiler is clang on osx. Otherwise we'll have to patch Perl itself, but that'll take some time.



---

archive/issue_comments_465236.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nPatching Perl is not an option here, I want this to work with Perl from all possible sources (including /usr/bin/perl, homebrew, perlbrew)",
    "created_at": "2020-05-02T23:30:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465236",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:49" align="right">comment:49</div>

Patching Perl is not an option here, I want this to work with Perl from all possible sources (including /usr/bin/perl, homebrew, perlbrew)



---

archive/issue_comments_465237.json:
```json
{
    "body": "<div id=\"comment:50\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e07dd7937fc71fc89393441a96da5216628c9402\"><code>e07dd79</code></a></td><td><code>Try a workaround for Perl changing LDFLAGS</code></td></tr></table>\n",
    "created_at": "2020-05-02T23:46:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465237",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:50"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e07dd7937fc71fc89393441a96da5216628c9402"><code>e07dd79</code></a></td><td><code>Try a workaround for Perl changing LDFLAGS</code></td></tr></table>




---

archive/issue_comments_465238.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/fix_perl_term_readline_gnu_build_error_on_conda_forge_macos_maximal](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/fix_perl_term_readline_gnu_build_error_on_conda_forge_macos_maximal)** to **[u/isuruf/fix_perl_term_readline_gnu_build_error_on_conda_forge_macos_maximal](https://github.com/sagemath/sagetrac-mirror/tree/u/isuruf/fix_perl_term_readline_gnu_build_error_on_conda_forge_macos_maximal)**",
    "created_at": "2020-05-02T23:46:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465238",
    "user": "https://github.com/isuruf"
}
```

Changed branch from **[u/mkoeppe/fix_perl_term_readline_gnu_build_error_on_conda_forge_macos_maximal](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/fix_perl_term_readline_gnu_build_error_on_conda_forge_macos_maximal)** to **[u/isuruf/fix_perl_term_readline_gnu_build_error_on_conda_forge_macos_maximal](https://github.com/sagemath/sagetrac-mirror/tree/u/isuruf/fix_perl_term_readline_gnu_build_error_on_conda_forge_macos_maximal)**



---

archive/issue_comments_465239.json:
```json
{
    "body": "Changed commit from **[`1c3b7f3`](https://github.com/sagemath/sagetrac-mirror/commit/1c3b7f3049a21b807540a0f29df4efb8e9d5aecd)** to **[`e07dd79`](https://github.com/sagemath/sagetrac-mirror/commit/e07dd7937fc71fc89393441a96da5216628c9402)**",
    "created_at": "2020-05-02T23:46:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465239",
    "user": "https://github.com/isuruf"
}
```

Changed commit from **[`1c3b7f3`](https://github.com/sagemath/sagetrac-mirror/commit/1c3b7f3049a21b807540a0f29df4efb8e9d5aecd)** to **[`e07dd79`](https://github.com/sagemath/sagetrac-mirror/commit/e07dd7937fc71fc89393441a96da5216628c9402)**



---

archive/issue_events_403688.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2020-05-02T23:46:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29572#event-403688"
}
```



---

archive/issue_events_403689.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2020-05-02T23:46:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29572#event-403689"
}
```



---

archive/issue_comments_465240.json:
```json
{
    "body": "Changed commit from **[`e07dd79`](https://github.com/sagemath/sagetrac-mirror/commit/e07dd7937fc71fc89393441a96da5216628c9402)** to **[`df48845`](https://github.com/sagemath/sagetrac-mirror/commit/df4884530bcd1c29460feed2011e23ef3b42c12a)**",
    "created_at": "2020-05-02T23:47:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465240",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e07dd79`](https://github.com/sagemath/sagetrac-mirror/commit/e07dd7937fc71fc89393441a96da5216628c9402)** to **[`df48845`](https://github.com/sagemath/sagetrac-mirror/commit/df4884530bcd1c29460feed2011e23ef3b42c12a)**



---

archive/issue_comments_465241.json:
```json
{
    "body": "<div id=\"comment:51\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/df4884530bcd1c29460feed2011e23ef3b42c12a\"><code>df48845</code></a></td><td><code>Try a workaround for Perl changing LDFLAGS</code></td></tr></table>\n",
    "created_at": "2020-05-02T23:47:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465241",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:51"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/df4884530bcd1c29460feed2011e23ef3b42c12a"><code>df48845</code></a></td><td><code>Try a workaround for Perl changing LDFLAGS</code></td></tr></table>




---

archive/issue_comments_465242.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nTesting at https://github.com/mkoeppe/sage/actions/runs/94951929",
    "created_at": "2020-05-04T05:33:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465242",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:52" align="right">comment:52</div>

Testing at https://github.com/mkoeppe/sage/actions/runs/94951929



---

archive/issue_comments_465243.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nLooks like it worked.",
    "created_at": "2020-05-04T15:34:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465243",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:53" align="right">comment:53</div>

Looks like it worked.



---

archive/issue_events_403690.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-04T15:39:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29572#event-403690"
}
```



---

archive/issue_events_403691.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-04T15:39:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29572#event-403691"
}
```



---

archive/issue_comments_465244.json:
```json
{
    "body": "Reviewer: **, Matthias Koeppe**",
    "created_at": "2020-05-04T15:39:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465244",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **, Matthias Koeppe**



---

archive/issue_comments_465245.json:
```json
{
    "body": "Changed reviewer from **, Matthias Koeppe** to **Matthias Koeppe**",
    "created_at": "2020-05-04T15:44:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465245",
    "user": "https://github.com/isuruf"
}
```

Changed reviewer from **, Matthias Koeppe** to **Matthias Koeppe**



---

archive/issue_comments_465246.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nYou're not a reviewer also?",
    "created_at": "2020-05-04T15:56:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465246",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:56" align="right">comment:56</div>

You're not a reviewer also?



---

archive/issue_comments_465247.json:
```json
{
    "body": "Changed reviewer from **Matthias Koeppe** to **Isuru Fernando, Matthias Koeppe**",
    "created_at": "2020-05-04T16:08:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465247",
    "user": "https://github.com/isuruf"
}
```

Changed reviewer from **Matthias Koeppe** to **Isuru Fernando, Matthias Koeppe**



---

archive/issue_comments_465248.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nSure. I just removed an extraneous comma in the last change.",
    "created_at": "2020-05-04T16:08:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465248",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:57" align="right">comment:57</div>

Sure. I just removed an extraneous comma in the last change.



---

archive/issue_comments_465249.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nThanks!",
    "created_at": "2020-05-04T16:49:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465249",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:58" align="right">comment:58</div>

Thanks!



---

archive/issue_events_403692.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-07T02:26:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29572#event-403692"
}
```



---

archive/issue_events_403693.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-07T02:26:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
    "label_color": "ff7700",
    "label_name": "p: critical / 2",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29572#event-403693"
}
```



---

archive/issue_events_403694.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-17T18:33:40Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29572#event-403694"
}
```



---

archive/issue_events_403695.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-17T18:33:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29572#event-403695"
}
```



---

archive/issue_comments_465250.json:
```json
{
    "body": "Changed branch from **[u/isuruf/fix_perl_term_readline_gnu_build_error_on_conda_forge_macos_maximal](https://github.com/sagemath/sagetrac-mirror/tree/u/isuruf/fix_perl_term_readline_gnu_build_error_on_conda_forge_macos_maximal)** to **[`df48845`](https://github.com/sagemath/sagetrac-mirror/commit/df4884530bcd1c29460feed2011e23ef3b42c12a)**",
    "created_at": "2020-05-26T21:49:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29572#issuecomment-465250",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/isuruf/fix_perl_term_readline_gnu_build_error_on_conda_forge_macos_maximal](https://github.com/sagemath/sagetrac-mirror/tree/u/isuruf/fix_perl_term_readline_gnu_build_error_on_conda_forge_macos_maximal)** to **[`df48845`](https://github.com/sagemath/sagetrac-mirror/commit/df4884530bcd1c29460feed2011e23ef3b42c12a)**



---

archive/issue_events_403696.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-05-26T21:49:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29572#event-403696"
}
```



---

archive/issue_events_403697.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "e30cbf511456288819c9e6f6bf03d78a6e74b24f",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-05-26T21:49:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29572",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29572#event-403697"
}
```
