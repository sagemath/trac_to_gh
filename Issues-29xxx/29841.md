# Issue 29841: Improve obtaining combinatorial polyhedron

archive/issues_029604.json:
```json
{
    "body": "This ticket improves obtaining the `CombinatorialPolyhedron` from an incidence matrix.\n\nAlong the way we also improve the method `CombinatorialPolyhedron.incidence_matrix` that reobtains the incidence matrix.\n\nNote that #29837 greatly speeds up obtainment of incidence matrices in `Polyhedron_base`.\n\nWithout this ticket:\n\n```\nsage: P = polytopes.permutahedron(7)\nsage: _ = P.incidence_matrix()\nsage: %time C = CombinatorialPolyhedron(P)\nCPU times: user 821 ms, sys: 19.4 ms, total: 840 ms\nWall time: 842 ms\nsage: C.incidence_matrix.clear_cache()\nsage: %time _ = C.incidence_matrix()\nCPU times: user 24.8 ms, sys: 22 \u00b5s, total: 24.8 ms\nWall time: 24.6 ms\n\nsage: P = polytopes.associahedron(['A', 9])\nsage: _ = P.incidence_matrix()\nsage: %time C = CombinatorialPolyhedron(P)\nCPU times: user 1.08 s, sys: 36.1 ms, total: 1.11 s\nWall time: 1.11 s\nsage: C.incidence_matrix.clear_cache()\nsage: %time _ = C.incidence_matrix()\nCPU times: user 94.2 ms, sys: 0 ns, total: 94.2 ms\nWall time: 93.8 ms\n```\n\nWith this ticket:\n\n```\nsage: P = polytopes.permutahedron(7)\nsage: _ = P.incidence_matrix()\nsage: %time C = CombinatorialPolyhedron(P)\nCPU times: user 77.6 ms, sys: 12 ms, total: 89.6 ms\nWall time: 88 ms\nsage: C.incidence_matrix.clear_cache()\nsage: %time _ = C.incidence_matrix()\nCPU times: user 17 ms, sys: 14 \u00b5s, total: 17 ms\nWall time: 16.7 ms\n\nsage: P = polytopes.associahedron(['A', 9])\nsage: _ = P.incidence_matrix()\nsage: %time C = CombinatorialPolyhedron(P)\nCPU times: user 110 ms, sys: 0 ns, total: 110 ms\nWall time: 109 ms\nsage: C.incidence_matrix.clear_cache()\nsage: %time _ = C.incidence_matrix()\nCPU times: user 65.3 ms, sys: 18 \u00b5s, total: 65.3 ms\nWall time: 64.3 ms\n```\n\nCC:  @jplab @laisrast\n\nKeywords: combinatorial polyhedron\n\nBranch/Commit: 2db3a70c8f39d1fead1b1fdf34422167a827a8e9\n\nReviewer: Travis Scrimshaw\n\nAuthor: Jonathan Kliem\n\nDependencies: #29837\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29841\n\n",
    "closed_at": "2020-07-10T19:34:02Z",
    "created_at": "2020-06-10T17:17:46Z",
    "labels": [
        "component: geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Improve obtaining combinatorial polyhedron",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29841",
    "user": "https://github.com/kliem"
}
```
This ticket improves obtaining the `CombinatorialPolyhedron` from an incidence matrix.

Along the way we also improve the method `CombinatorialPolyhedron.incidence_matrix` that reobtains the incidence matrix.

Note that #29837 greatly speeds up obtainment of incidence matrices in `Polyhedron_base`.

Without this ticket:

```
sage: P = polytopes.permutahedron(7)
sage: _ = P.incidence_matrix()
sage: %time C = CombinatorialPolyhedron(P)
CPU times: user 821 ms, sys: 19.4 ms, total: 840 ms
Wall time: 842 ms
sage: C.incidence_matrix.clear_cache()
sage: %time _ = C.incidence_matrix()
CPU times: user 24.8 ms, sys: 22 µs, total: 24.8 ms
Wall time: 24.6 ms

sage: P = polytopes.associahedron(['A', 9])
sage: _ = P.incidence_matrix()
sage: %time C = CombinatorialPolyhedron(P)
CPU times: user 1.08 s, sys: 36.1 ms, total: 1.11 s
Wall time: 1.11 s
sage: C.incidence_matrix.clear_cache()
sage: %time _ = C.incidence_matrix()
CPU times: user 94.2 ms, sys: 0 ns, total: 94.2 ms
Wall time: 93.8 ms
```

With this ticket:

```
sage: P = polytopes.permutahedron(7)
sage: _ = P.incidence_matrix()
sage: %time C = CombinatorialPolyhedron(P)
CPU times: user 77.6 ms, sys: 12 ms, total: 89.6 ms
Wall time: 88 ms
sage: C.incidence_matrix.clear_cache()
sage: %time _ = C.incidence_matrix()
CPU times: user 17 ms, sys: 14 µs, total: 17 ms
Wall time: 16.7 ms

sage: P = polytopes.associahedron(['A', 9])
sage: _ = P.incidence_matrix()
sage: %time C = CombinatorialPolyhedron(P)
CPU times: user 110 ms, sys: 0 ns, total: 110 ms
Wall time: 109 ms
sage: C.incidence_matrix.clear_cache()
sage: %time _ = C.incidence_matrix()
CPU times: user 65.3 ms, sys: 18 µs, total: 65.3 ms
Wall time: 64.3 ms
```

CC:  @jplab @laisrast

Keywords: combinatorial polyhedron

Branch/Commit: 2db3a70c8f39d1fead1b1fdf34422167a827a8e9

Reviewer: Travis Scrimshaw

Author: Jonathan Kliem

Dependencies: #29837

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29841





---

archive/issue_comments_447912.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-06-10T17:18:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29841#issuecomment-447912",
    "user": "https://github.com/kliem"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_447913.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2020-06-10T17:18:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29841#issuecomment-447913",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_447914.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-06-10T20:05:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29841#issuecomment-447914",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_447915.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-06-10T23:25:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29841#issuecomment-447915",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_447916.json:
```json
{
    "body": "<a id='comment:4'></a>New commits:",
    "created_at": "2020-06-10T23:25:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29841#issuecomment-447916",
    "user": "https://github.com/kliem"
}
```

<a id='comment:4'></a>New commits:



---

archive/issue_comments_447917.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -31,20 +31,20 @@\n sage: P = polytopes.permutahedron(7)\n sage: _ = P.incidence_matrix()\n sage: %time C = CombinatorialPolyhedron(P)\n-CPU times: user 36.4 ms, sys: 3.87 ms, total: 40.3 ms\n-Wall time: 39.7 ms\n+CPU times: user 77.6 ms, sys: 12 ms, total: 89.6 ms\n+Wall time: 88 ms\n sage: %time _ = C.incidence_matrix()\n-CPU times: user 5.26 ms, sys: 50 \u00b5s, total: 5.31 ms\n-Wall time: 5.35 ms\n+CPU times: user 17 ms, sys: 14 \u00b5s, total: 17 ms\n+Wall time: 16.7 ms\n \n sage: P = polytopes.associahedron(['A', 9])\n sage: _ = P.incidence_matrix()\n sage: %time C = CombinatorialPolyhedron(P)\n-CPU times: user 115 ms, sys: 57 \u00b5s, total: 115 ms\n-Wall time: 114 ms\n+CPU times: user 110 ms, sys: 0 ns, total: 110 ms\n+Wall time: 109 ms\n sage: %time _ = C.incidence_matrix()\n-CPU times: user 34.2 ms, sys: 0 ns, total: 34.2 ms\n-Wall time: 34.2 ms\n+CPU times: user 65.3 ms, sys: 18 \u00b5s, total: 65.3 ms\n+Wall time: 64.3 ms\n ```\n \n Author: Jonathan Kliem\n``````\n",
    "created_at": "2020-06-10T23:25:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29841#issuecomment-447917",
    "user": "https://github.com/kliem"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -31,20 +31,20 @@
 sage: P = polytopes.permutahedron(7)
 sage: _ = P.incidence_matrix()
 sage: %time C = CombinatorialPolyhedron(P)
-CPU times: user 36.4 ms, sys: 3.87 ms, total: 40.3 ms
-Wall time: 39.7 ms
+CPU times: user 77.6 ms, sys: 12 ms, total: 89.6 ms
+Wall time: 88 ms
 sage: %time _ = C.incidence_matrix()
-CPU times: user 5.26 ms, sys: 50 µs, total: 5.31 ms
-Wall time: 5.35 ms
+CPU times: user 17 ms, sys: 14 µs, total: 17 ms
+Wall time: 16.7 ms
 
 sage: P = polytopes.associahedron(['A', 9])
 sage: _ = P.incidence_matrix()
 sage: %time C = CombinatorialPolyhedron(P)
-CPU times: user 115 ms, sys: 57 µs, total: 115 ms
-Wall time: 114 ms
+CPU times: user 110 ms, sys: 0 ns, total: 110 ms
+Wall time: 109 ms
 sage: %time _ = C.incidence_matrix()
-CPU times: user 34.2 ms, sys: 0 ns, total: 34.2 ms
-Wall time: 34.2 ms
+CPU times: user 65.3 ms, sys: 18 µs, total: 65.3 ms
+Wall time: 64.3 ms
 ```
 
 Author: Jonathan Kliem
``````




---

archive/issue_comments_447918.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,55 @@\n+This ticket improves obtaining the `CombinatorialPolyhedron` from an incidence matrix.\n \n+Along the way we also improve the method `CombinatorialPolyhedron.incidence_matrix` that reobtains the incidence matrix.\n+\n+Note that #29837 greatly speeds up obtainment of incidence matrices in `Polyhedron_base`.\n+\n+Without this ticket:\n+\n+```\n+sage: P = polytopes.permutahedron(7)\n+sage: _ = P.incidence_matrix()\n+sage: %time C = CombinatorialPolyhedron(P)\n+CPU times: user 821 ms, sys: 19.4 ms, total: 840 ms\n+Wall time: 842 ms\n+sage: C.incidence_matrix.clear_cache()\n+sage: %time _ = C.incidence_matrix()\n+CPU times: user 24.8 ms, sys: 22 \u00b5s, total: 24.8 ms\n+Wall time: 24.6 ms\n+\n+sage: P = polytopes.associahedron(['A', 9])\n+sage: %time C = CombinatorialPolyhedron(P)\n+CPU times: user 3.03 s, sys: 19.7 ms, total: 3.05 s\n+Wall time: 3.05 s\n+sage: C.incidence_matrix.clear_cache()\n+sage: %time _ = C.incidence_matrix()\n+CPU times: user 94.2 ms, sys: 0 ns, total: 94.2 ms\n+Wall time: 93.8 ms\n+```\n+\n+With this ticket:\n+\n+```\n+sage: P = polytopes.permutahedron(7)\n+sage: _ = P.incidence_matrix()\n+sage: %time C = CombinatorialPolyhedron(P)\n+CPU times: user 77.6 ms, sys: 12 ms, total: 89.6 ms\n+Wall time: 88 ms\n+sage: C.incidence_matrix.clear_cache()\n+sage: %time _ = C.incidence_matrix()\n+CPU times: user 17 ms, sys: 14 \u00b5s, total: 17 ms\n+Wall time: 16.7 ms\n+\n+sage: P = polytopes.associahedron(['A', 9])\n+sage: _ = P.incidence_matrix()\n+sage: %time C = CombinatorialPolyhedron(P)\n+CPU times: user 110 ms, sys: 0 ns, total: 110 ms\n+Wall time: 109 ms\n+sage: C.incidence_matrix.clear_cache()\n+sage: %time _ = C.incidence_matrix()\n+CPU times: user 65.3 ms, sys: 18 \u00b5s, total: 65.3 ms\n+Wall time: 64.3 ms\n+```\n \n Author: Jonathan Kliem\n \n``````\n",
    "created_at": "2020-06-17T09:50:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29841#issuecomment-447918",
    "user": "https://github.com/kliem"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,55 @@
+This ticket improves obtaining the `CombinatorialPolyhedron` from an incidence matrix.
 
+Along the way we also improve the method `CombinatorialPolyhedron.incidence_matrix` that reobtains the incidence matrix.
+
+Note that #29837 greatly speeds up obtainment of incidence matrices in `Polyhedron_base`.
+
+Without this ticket:
+
+```
+sage: P = polytopes.permutahedron(7)
+sage: _ = P.incidence_matrix()
+sage: %time C = CombinatorialPolyhedron(P)
+CPU times: user 821 ms, sys: 19.4 ms, total: 840 ms
+Wall time: 842 ms
+sage: C.incidence_matrix.clear_cache()
+sage: %time _ = C.incidence_matrix()
+CPU times: user 24.8 ms, sys: 22 µs, total: 24.8 ms
+Wall time: 24.6 ms
+
+sage: P = polytopes.associahedron(['A', 9])
+sage: %time C = CombinatorialPolyhedron(P)
+CPU times: user 3.03 s, sys: 19.7 ms, total: 3.05 s
+Wall time: 3.05 s
+sage: C.incidence_matrix.clear_cache()
+sage: %time _ = C.incidence_matrix()
+CPU times: user 94.2 ms, sys: 0 ns, total: 94.2 ms
+Wall time: 93.8 ms
+```
+
+With this ticket:
+
+```
+sage: P = polytopes.permutahedron(7)
+sage: _ = P.incidence_matrix()
+sage: %time C = CombinatorialPolyhedron(P)
+CPU times: user 77.6 ms, sys: 12 ms, total: 89.6 ms
+Wall time: 88 ms
+sage: C.incidence_matrix.clear_cache()
+sage: %time _ = C.incidence_matrix()
+CPU times: user 17 ms, sys: 14 µs, total: 17 ms
+Wall time: 16.7 ms
+
+sage: P = polytopes.associahedron(['A', 9])
+sage: _ = P.incidence_matrix()
+sage: %time C = CombinatorialPolyhedron(P)
+CPU times: user 110 ms, sys: 0 ns, total: 110 ms
+Wall time: 109 ms
+sage: C.incidence_matrix.clear_cache()
+sage: %time _ = C.incidence_matrix()
+CPU times: user 65.3 ms, sys: 18 µs, total: 65.3 ms
+Wall time: 64.3 ms
+```
 
 Author: Jonathan Kliem
 
``````




---

archive/issue_comments_447919.json:
```json
{
    "body": "<a id='comment:5'></a>Last 10 new commits:",
    "created_at": "2020-06-17T09:50:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29841#issuecomment-447919",
    "user": "https://github.com/kliem"
}
```

<a id='comment:5'></a>Last 10 new commits:



---

archive/issue_comments_447920.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,56 @@\n+This ticket improves obtaining the `CombinatorialPolyhedron` from an incidence matrix.\n \n+Along the way we also improve the method `CombinatorialPolyhedron.incidence_matrix` that reobtains the incidence matrix.\n+\n+Note that #29837 greatly speeds up obtainment of incidence matrices in `Polyhedron_base`.\n+\n+Without this ticket:\n+\n+```\n+sage: P = polytopes.permutahedron(7)\n+sage: _ = P.incidence_matrix()\n+sage: %time C = CombinatorialPolyhedron(P)\n+CPU times: user 821 ms, sys: 19.4 ms, total: 840 ms\n+Wall time: 842 ms\n+sage: C.incidence_matrix.clear_cache()\n+sage: %time _ = C.incidence_matrix()\n+CPU times: user 24.8 ms, sys: 22 \u00b5s, total: 24.8 ms\n+Wall time: 24.6 ms\n+\n+sage: P = polytopes.associahedron(['A', 9])\n+sage: _ = P.incidence_matrix()\n+sage: %time C = CombinatorialPolyhedron(P)\n+CPU times: user 1.08 s, sys: 36.1 ms, total: 1.11 s\n+Wall time: 1.11 s\n+sage: C.incidence_matrix.clear_cache()\n+sage: %time _ = C.incidence_matrix()\n+CPU times: user 94.2 ms, sys: 0 ns, total: 94.2 ms\n+Wall time: 93.8 ms\n+```\n+\n+With this ticket:\n+\n+```\n+sage: P = polytopes.permutahedron(7)\n+sage: _ = P.incidence_matrix()\n+sage: %time C = CombinatorialPolyhedron(P)\n+CPU times: user 77.6 ms, sys: 12 ms, total: 89.6 ms\n+Wall time: 88 ms\n+sage: C.incidence_matrix.clear_cache()\n+sage: %time _ = C.incidence_matrix()\n+CPU times: user 17 ms, sys: 14 \u00b5s, total: 17 ms\n+Wall time: 16.7 ms\n+\n+sage: P = polytopes.associahedron(['A', 9])\n+sage: _ = P.incidence_matrix()\n+sage: %time C = CombinatorialPolyhedron(P)\n+CPU times: user 110 ms, sys: 0 ns, total: 110 ms\n+Wall time: 109 ms\n+sage: C.incidence_matrix.clear_cache()\n+sage: %time _ = C.incidence_matrix()\n+CPU times: user 65.3 ms, sys: 18 \u00b5s, total: 65.3 ms\n+Wall time: 64.3 ms\n+```\n \n Author: Jonathan Kliem\n \n``````\n",
    "created_at": "2020-06-30T05:08:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29841#issuecomment-447920",
    "user": "https://github.com/kliem"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,56 @@
+This ticket improves obtaining the `CombinatorialPolyhedron` from an incidence matrix.
 
+Along the way we also improve the method `CombinatorialPolyhedron.incidence_matrix` that reobtains the incidence matrix.
+
+Note that #29837 greatly speeds up obtainment of incidence matrices in `Polyhedron_base`.
+
+Without this ticket:
+
+```
+sage: P = polytopes.permutahedron(7)
+sage: _ = P.incidence_matrix()
+sage: %time C = CombinatorialPolyhedron(P)
+CPU times: user 821 ms, sys: 19.4 ms, total: 840 ms
+Wall time: 842 ms
+sage: C.incidence_matrix.clear_cache()
+sage: %time _ = C.incidence_matrix()
+CPU times: user 24.8 ms, sys: 22 µs, total: 24.8 ms
+Wall time: 24.6 ms
+
+sage: P = polytopes.associahedron(['A', 9])
+sage: _ = P.incidence_matrix()
+sage: %time C = CombinatorialPolyhedron(P)
+CPU times: user 1.08 s, sys: 36.1 ms, total: 1.11 s
+Wall time: 1.11 s
+sage: C.incidence_matrix.clear_cache()
+sage: %time _ = C.incidence_matrix()
+CPU times: user 94.2 ms, sys: 0 ns, total: 94.2 ms
+Wall time: 93.8 ms
+```
+
+With this ticket:
+
+```
+sage: P = polytopes.permutahedron(7)
+sage: _ = P.incidence_matrix()
+sage: %time C = CombinatorialPolyhedron(P)
+CPU times: user 77.6 ms, sys: 12 ms, total: 89.6 ms
+Wall time: 88 ms
+sage: C.incidence_matrix.clear_cache()
+sage: %time _ = C.incidence_matrix()
+CPU times: user 17 ms, sys: 14 µs, total: 17 ms
+Wall time: 16.7 ms
+
+sage: P = polytopes.associahedron(['A', 9])
+sage: _ = P.incidence_matrix()
+sage: %time C = CombinatorialPolyhedron(P)
+CPU times: user 110 ms, sys: 0 ns, total: 110 ms
+Wall time: 109 ms
+sage: C.incidence_matrix.clear_cache()
+sage: %time _ = C.incidence_matrix()
+CPU times: user 65.3 ms, sys: 18 µs, total: 65.3 ms
+Wall time: 64.3 ms
+```
 
 Author: Jonathan Kliem
 
``````




---

archive/issue_comments_447921.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-07-01T02:04:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29841#issuecomment-447921",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_447922.json:
```json
{
    "body": "<a id='comment:7'></a>LGTM.",
    "created_at": "2020-07-01T02:04:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29841#issuecomment-447922",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'></a>LGTM.



---

archive/issue_comments_447923.json:
```json
{
    "body": "<a id='comment:8'></a>Thank you.",
    "created_at": "2020-07-01T04:30:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29841#issuecomment-447923",
    "user": "https://github.com/kliem"
}
```

<a id='comment:8'></a>Thank you.



---

archive/issue_comments_447924.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-07-10T19:34:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29841#issuecomment-447924",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_076422.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-07-10T19:34:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29841",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29841#event-76422"
}
```
