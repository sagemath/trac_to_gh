# Issue 29837: Improvement for incidence matrix of polyhedra

archive/issues_029600.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nThis ticket collects some improvements for obtaining incidence matrices:\n\n- The method `self._is_zero` is called many times and we can save plenty of time by obtaining it beforehand.\n- We can obtain the slack matrix by multiplying the Vrepresentation matrix with the homogenous Vrepresentation. From this we can obtain the incidence matrix (strangely this last step takes up most of the time).\n\n  Unfortunately, matrix multiplication for algebraic fields isn't very efficient. So we need to keep the old method in this case.\n\nBefore this ticket:\n\n```\nsage: P = polytopes.permutahedron(7)\nsage: %time _ = P.incidence_matrix()\nCPU times: user 751 ms, sys: 7.95 ms, total: 759 ms\nWall time: 758 ms\nsage: P = polytopes.associahedron(['A', 9])\nsage: %time _ = P.incidence_matrix()\nCPU times: user 1.94 s, sys: 4.03 ms, total: 1.94 s\nWall time: 1.94 s\nsage: P = polytopes.hypercube(14)\nsage: %time _ = P.incidence_matrix()\nCPU times: user 670 ms, sys: 0 ns, total: 670 ms\nWall time: 669 ms\nsage: K.<sqrt2> = QuadraticField(2)\nsage: P = polytopes.permutahedron(7).dilation(sqrt2)\nsage: %time _ = P.incidence_matrix()\nCPU times: user 3.82 s, sys: 0 ns, total: 3.82 s\nWall time: 3.82 s\n```\n\nWith this ticket:\n\n```\nsage: P = polytopes.permutahedron(7)\nsage: %time _ = P.incidence_matrix()\nCPU times: user 64.4 ms, sys: 7 \u00b5s, total: 64.4 ms\nWall time: 63.6 ms\nsage: P = polytopes.associahedron(['A', 9])\nsage: %time _ = P.incidence_matrix()\nCPU times: user 325 ms, sys: 12.1 ms, total: 337 ms\nWall time: 335 ms\nsage: P = polytopes.hypercube(14)\nsage: %time _ = P.incidence_matrix()\nCPU times: user 139 ms, sys: 12 ms, total: 151 ms\nWall time: 149 ms\nsage: K.<sqrt2> = QuadraticField(2)\nsage: P = polytopes.permutahedron(7).dilation(sqrt2)\nsage: %time _ = P.incidence_matrix()\nCPU times: user 3.69 s, sys: 3.69 ms, total: 3.69 s\nWall time: 3.69 s\n```\n\nDepends on #29838\nDepends on #29839\n\nCC:  @jplab @LaisRast\n\nComponent: **geometry**\n\nKeywords: **polyhedra, incidence matrix**\n\nAuthor: **Jonathan Kliem**\n\nBranch/Commit: **[`955f12b`](https://github.com/sagemath/sagetrac-mirror/commit/955f12baa3ecf69aac9e7c6fb7773993f3eb9e80)**\n\nReviewer: **Travis Scrimshaw**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29837_\n\n",
    "closed_at": "2020-07-10T19:34:05Z",
    "created_at": "2020-06-10T10:09:27Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20geometry",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Improvement for incidence matrix of polyhedra",
    "type": "issue",
    "updated_at": "2020-07-10T19:34:05Z",
    "url": "https://github.com/sagemath/sage/issues/29837",
    "user": "https://github.com/kliem"
}
```
<div id="comment:0"></div>

This ticket collects some improvements for obtaining incidence matrices:

- The method `self._is_zero` is called many times and we can save plenty of time by obtaining it beforehand.
- We can obtain the slack matrix by multiplying the Vrepresentation matrix with the homogenous Vrepresentation. From this we can obtain the incidence matrix (strangely this last step takes up most of the time).

  Unfortunately, matrix multiplication for algebraic fields isn't very efficient. So we need to keep the old method in this case.

Before this ticket:

```
sage: P = polytopes.permutahedron(7)
sage: %time _ = P.incidence_matrix()
CPU times: user 751 ms, sys: 7.95 ms, total: 759 ms
Wall time: 758 ms
sage: P = polytopes.associahedron(['A', 9])
sage: %time _ = P.incidence_matrix()
CPU times: user 1.94 s, sys: 4.03 ms, total: 1.94 s
Wall time: 1.94 s
sage: P = polytopes.hypercube(14)
sage: %time _ = P.incidence_matrix()
CPU times: user 670 ms, sys: 0 ns, total: 670 ms
Wall time: 669 ms
sage: K.<sqrt2> = QuadraticField(2)
sage: P = polytopes.permutahedron(7).dilation(sqrt2)
sage: %time _ = P.incidence_matrix()
CPU times: user 3.82 s, sys: 0 ns, total: 3.82 s
Wall time: 3.82 s
```

With this ticket:

```
sage: P = polytopes.permutahedron(7)
sage: %time _ = P.incidence_matrix()
CPU times: user 64.4 ms, sys: 7 µs, total: 64.4 ms
Wall time: 63.6 ms
sage: P = polytopes.associahedron(['A', 9])
sage: %time _ = P.incidence_matrix()
CPU times: user 325 ms, sys: 12.1 ms, total: 337 ms
Wall time: 335 ms
sage: P = polytopes.hypercube(14)
sage: %time _ = P.incidence_matrix()
CPU times: user 139 ms, sys: 12 ms, total: 151 ms
Wall time: 149 ms
sage: K.<sqrt2> = QuadraticField(2)
sage: P = polytopes.permutahedron(7).dilation(sqrt2)
sage: %time _ = P.incidence_matrix()
CPU times: user 3.69 s, sys: 3.69 ms, total: 3.69 s
Wall time: 3.69 s
```

Depends on #29838
Depends on #29839

CC:  @jplab @LaisRast

Component: **geometry**

Keywords: **polyhedra, incidence matrix**

Author: **Jonathan Kliem**

Branch/Commit: **[`955f12b`](https://github.com/sagemath/sagetrac-mirror/commit/955f12baa3ecf69aac9e7c6fb7773993f3eb9e80)**

Reviewer: **Travis Scrimshaw**

_Issue created by migration from https://trac.sagemath.org/ticket/29837_





---

archive/issue_events_407534.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-10T10:09:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-407534"
}
```



---

archive/issue_events_407535.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-10T10:09:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20geometry",
    "label_color": "0000ff",
    "label_name": "c: geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-407535"
}
```



---

archive/issue_events_407536.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-10T10:09:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-407536"
}
```



---

archive/issue_comments_470911.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/42b5c42481459cd6406d47039784424fb9110026\"><code>42b5c42</code></a></td><td><code>determine is_zero beforehand</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/02a8a2ff3b5c1d734f7de5c61f52d02b8611f301\"><code>02a8a2f</code></a></td><td><code>small fix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6dbe5d24132b62c38a1e77c09a471510d9ab1776\"><code>6dbe5d2</code></a></td><td><code>use matrix multiplication to obtain incidence matrix</code></td></tr></table>\n",
    "created_at": "2020-06-10T10:10:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470911",
    "user": "https://github.com/kliem"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/42b5c42481459cd6406d47039784424fb9110026"><code>42b5c42</code></a></td><td><code>determine is_zero beforehand</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/02a8a2ff3b5c1d734f7de5c61f52d02b8611f301"><code>02a8a2f</code></a></td><td><code>small fix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6dbe5d24132b62c38a1e77c09a471510d9ab1776"><code>6dbe5d2</code></a></td><td><code>use matrix multiplication to obtain incidence matrix</code></td></tr></table>




---

archive/issue_comments_470912.json:
```json
{
    "body": "Commit: **[`6dbe5d2`](https://github.com/sagemath/sagetrac-mirror/commit/6dbe5d24132b62c38a1e77c09a471510d9ab1776)**",
    "created_at": "2020-06-10T10:10:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470912",
    "user": "https://github.com/kliem"
}
```

Commit: **[`6dbe5d2`](https://github.com/sagemath/sagetrac-mirror/commit/6dbe5d24132b62c38a1e77c09a471510d9ab1776)**



---

archive/issue_comments_470913.json:
```json
{
    "body": "Branch: **[public/29837](https://github.com/sagemath/sagetrac-mirror/tree/public/29837)**",
    "created_at": "2020-06-10T10:10:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470913",
    "user": "https://github.com/kliem"
}
```

Branch: **[public/29837](https://github.com/sagemath/sagetrac-mirror/tree/public/29837)**



---

archive/issue_events_407537.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-10T10:10:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-407537"
}
```



---

archive/issue_events_407538.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-10T10:10:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-407538"
}
```



---

archive/issue_comments_470914.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThis should be rebased on #29838 and another ticket that speeds up getting the incidence matrix from the slack matrix.",
    "created_at": "2020-06-10T12:00:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470914",
    "user": "https://github.com/kliem"
}
```

<div id="comment:2" align="right">comment:2</div>

This should be rebased on #29838 and another ticket that speeds up getting the incidence matrix from the slack matrix.



---

archive/issue_events_407539.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-10T12:00:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-407539"
}
```



---

archive/issue_events_407540.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-10T12:00:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-407540"
}
```



---

archive/issue_comments_470915.json:
```json
{
    "body": "Dependencies: **#29838**",
    "created_at": "2020-06-10T12:00:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470915",
    "user": "https://github.com/kliem"
}
```

Dependencies: **#29838**



---

archive/issue_comments_470916.json:
```json
{
    "body": "Changed dependencies from **#29838** to **#29838, #29839**",
    "created_at": "2020-06-10T13:14:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470916",
    "user": "https://github.com/kliem"
}
```

Changed dependencies from **#29838** to **#29838, #29839**



---

archive/issue_comments_470917.json:
```json
{
    "body": "Changed dependencies from **#29838, #29839** to **#29838, #29839, #29840**",
    "created_at": "2020-06-10T13:33:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470917",
    "user": "https://github.com/kliem"
}
```

Changed dependencies from **#29838, #29839** to **#29838, #29839, #29840**



---

archive/issue_comments_470918.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -32,21 +32,21 @@\n ```\n sage: P = polytopes.permutahedron(7)\n sage: %time _ = P.incidence_matrix()\n-CPU times: user 236 ms, sys: 15.8 ms, total: 252 ms\n-Wall time: 251 ms\n+CPU times: user 77.5 ms, sys: 11.9 ms, total: 89.3 ms\n+Wall time: 88.3 ms\n sage: P = polytopes.associahedron(['A', 9])\n sage: %time _ = P.incidence_matrix()\n-CPU times: user 1.21 s, sys: 52.1 ms, total: 1.27 s\n-Wall time: 1.27 s\n+CPU times: user 390 ms, sys: 3.98 ms, total: 394 ms\n+Wall time: 393 ms\n sage: P = polytopes.hypercube(14)\n sage: %time _ = P.incidence_matrix()\n-CPU times: user 247 ms, sys: 8.1 ms, total: 256 ms\n-Wall time: 255 ms\n+CPU times: user 138 ms, sys: 7.84 ms, total: 146 ms\n+Wall time: 144 ms\n sage: K.<sqrt2> = QuadraticField(2)\n sage: P = polytopes.permutahedron(7).dilation(sqrt2)\n sage: %time _ = P.incidence_matrix()\n-CPU times: user 3.77 s, sys: 3.81 ms, total: 3.77 s\n-Wall time: 3.77 s\n+CPU times: user 3.85 s, sys: 59 \u00b5s, total: 3.85 s\n+Wall time: 3.85 s\n ```\n \n Possible follow up: Set up incidence matrix etc. with base ring `GF(2)`.\n``````\n",
    "created_at": "2020-06-10T13:41:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470918",
    "user": "https://github.com/kliem"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -32,21 +32,21 @@
 ```
 sage: P = polytopes.permutahedron(7)
 sage: %time _ = P.incidence_matrix()
-CPU times: user 236 ms, sys: 15.8 ms, total: 252 ms
-Wall time: 251 ms
+CPU times: user 77.5 ms, sys: 11.9 ms, total: 89.3 ms
+Wall time: 88.3 ms
 sage: P = polytopes.associahedron(['A', 9])
 sage: %time _ = P.incidence_matrix()
-CPU times: user 1.21 s, sys: 52.1 ms, total: 1.27 s
-Wall time: 1.27 s
+CPU times: user 390 ms, sys: 3.98 ms, total: 394 ms
+Wall time: 393 ms
 sage: P = polytopes.hypercube(14)
 sage: %time _ = P.incidence_matrix()
-CPU times: user 247 ms, sys: 8.1 ms, total: 256 ms
-Wall time: 255 ms
+CPU times: user 138 ms, sys: 7.84 ms, total: 146 ms
+Wall time: 144 ms
 sage: K.<sqrt2> = QuadraticField(2)
 sage: P = polytopes.permutahedron(7).dilation(sqrt2)
 sage: %time _ = P.incidence_matrix()
-CPU times: user 3.77 s, sys: 3.81 ms, total: 3.77 s
-Wall time: 3.77 s
+CPU times: user 3.85 s, sys: 59 µs, total: 3.85 s
+Wall time: 3.85 s
 ```
 
 Possible follow up: Set up incidence matrix etc. with base ring `GF(2)`.
``````




---

archive/issue_comments_470919.json:
```json
{
    "body": "Changed commit from **[`6dbe5d2`](https://github.com/sagemath/sagetrac-mirror/commit/6dbe5d24132b62c38a1e77c09a471510d9ab1776)** to **[`89aeab3`](https://github.com/sagemath/sagetrac-mirror/commit/89aeab39856360ffe80a8e62a0e4886aa3d8d622)**",
    "created_at": "2020-06-10T17:06:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470919",
    "user": "https://github.com/kliem"
}
```

Changed commit from **[`6dbe5d2`](https://github.com/sagemath/sagetrac-mirror/commit/6dbe5d24132b62c38a1e77c09a471510d9ab1776)** to **[`89aeab3`](https://github.com/sagemath/sagetrac-mirror/commit/89aeab39856360ffe80a8e62a0e4886aa3d8d622)**



---

archive/issue_comments_470920.json:
```json
{
    "body": "Changed branch from **[public/29837](https://github.com/sagemath/sagetrac-mirror/tree/public/29837)** to **[public/29837-reb](https://github.com/sagemath/sagetrac-mirror/tree/public/29837-reb)**",
    "created_at": "2020-06-10T17:06:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470920",
    "user": "https://github.com/kliem"
}
```

Changed branch from **[public/29837](https://github.com/sagemath/sagetrac-mirror/tree/public/29837)** to **[public/29837-reb](https://github.com/sagemath/sagetrac-mirror/tree/public/29837-reb)**



---

archive/issue_events_407541.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-10T17:06:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-407541"
}
```



---

archive/issue_events_407542.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-10T17:06:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-407542"
}
```



---

archive/issue_comments_470921.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -32,21 +32,19 @@\n ```\n sage: P = polytopes.permutahedron(7)\n sage: %time _ = P.incidence_matrix()\n-CPU times: user 77.5 ms, sys: 11.9 ms, total: 89.3 ms\n-Wall time: 88.3 ms\n+CPU times: user 64.4 ms, sys: 7 \u00b5s, total: 64.4 ms\n+Wall time: 63.6 ms\n sage: P = polytopes.associahedron(['A', 9])\n sage: %time _ = P.incidence_matrix()\n-CPU times: user 390 ms, sys: 3.98 ms, total: 394 ms\n-Wall time: 393 ms\n+CPU times: user 325 ms, sys: 12.1 ms, total: 337 ms\n+Wall time: 335 ms\n sage: P = polytopes.hypercube(14)\n sage: %time _ = P.incidence_matrix()\n-CPU times: user 138 ms, sys: 7.84 ms, total: 146 ms\n-Wall time: 144 ms\n+CPU times: user 139 ms, sys: 12 ms, total: 151 ms\n+Wall time: 149 ms\n sage: K.<sqrt2> = QuadraticField(2)\n sage: P = polytopes.permutahedron(7).dilation(sqrt2)\n sage: %time _ = P.incidence_matrix()\n-CPU times: user 3.85 s, sys: 59 \u00b5s, total: 3.85 s\n-Wall time: 3.85 s\n+CPU times: user 4.41 s, sys: 7.9 ms, total: 4.42 s\n+Wall time: 4.42 s\n ```\n-\n-Possible follow up: Set up incidence matrix etc. with base ring `GF(2)`.\n``````\n",
    "created_at": "2020-06-10T17:06:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470921",
    "user": "https://github.com/kliem"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -32,21 +32,19 @@
 ```
 sage: P = polytopes.permutahedron(7)
 sage: %time _ = P.incidence_matrix()
-CPU times: user 77.5 ms, sys: 11.9 ms, total: 89.3 ms
-Wall time: 88.3 ms
+CPU times: user 64.4 ms, sys: 7 µs, total: 64.4 ms
+Wall time: 63.6 ms
 sage: P = polytopes.associahedron(['A', 9])
 sage: %time _ = P.incidence_matrix()
-CPU times: user 390 ms, sys: 3.98 ms, total: 394 ms
-Wall time: 393 ms
+CPU times: user 325 ms, sys: 12.1 ms, total: 337 ms
+Wall time: 335 ms
 sage: P = polytopes.hypercube(14)
 sage: %time _ = P.incidence_matrix()
-CPU times: user 138 ms, sys: 7.84 ms, total: 146 ms
-Wall time: 144 ms
+CPU times: user 139 ms, sys: 12 ms, total: 151 ms
+Wall time: 149 ms
 sage: K.<sqrt2> = QuadraticField(2)
 sage: P = polytopes.permutahedron(7).dilation(sqrt2)
 sage: %time _ = P.incidence_matrix()
-CPU times: user 3.85 s, sys: 59 µs, total: 3.85 s
-Wall time: 3.85 s
+CPU times: user 4.41 s, sys: 7.9 ms, total: 4.42 s
+Wall time: 4.42 s
 ```
-
-Possible follow up: Set up incidence matrix etc. with base ring `GF(2)`.
``````




---

archive/issue_comments_470922.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/43e6dfbd64c1372d0829ff18df7a9c7aa9491738\"><code>43e6dfb</code></a></td><td><code>implement _zero_matrix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/05eba1e190700fcaf2cd03fe043a8510706dd98f\"><code>05eba1e</code></a></td><td><code>fix bug</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7b708307f2aa4860299a9b7470e1344b88b59c12\"><code>7b70830</code></a></td><td><code>rename</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/47a19c6c02206602f0bb8285ef3ff6c78c23b0fe\"><code>47a19c6</code></a></td><td><code>implement slack matrix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/54755d7da65e6936ec646c122fb0097b6d0383f7\"><code>54755d7</code></a></td><td><code>Merge branch 'public/29838' of git://trac.sagemath.org/sage into public/29837-reb</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a4576d633d8a2890c8ce0482288d686a4896ecc1\"><code>a4576d6</code></a></td><td><code>set up incidence/adjacency matrix with GF(2)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/30c4715440293a251dc5af8acfd35ee2d7b06c02\"><code>30c4715</code></a></td><td><code>Merge branch 'public/29840' of git://trac.sagemath.org/sage into public/29837-reb</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fcd62d2f324c625d64e2f37c8899c1a593e1ebd6\"><code>fcd62d2</code></a></td><td><code>determine is_zero beforehand</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/13b8583b1e861139b56bf84b99c2b468cb14ac43\"><code>13b8583</code></a></td><td><code>small fix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/89aeab39856360ffe80a8e62a0e4886aa3d8d622\"><code>89aeab3</code></a></td><td><code>obtain incidence matrix from slack matrix</code></td></tr></table>\n",
    "created_at": "2020-06-10T17:06:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470922",
    "user": "https://github.com/kliem"
}
```

<div id="comment:6"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/43e6dfbd64c1372d0829ff18df7a9c7aa9491738"><code>43e6dfb</code></a></td><td><code>implement _zero_matrix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/05eba1e190700fcaf2cd03fe043a8510706dd98f"><code>05eba1e</code></a></td><td><code>fix bug</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7b708307f2aa4860299a9b7470e1344b88b59c12"><code>7b70830</code></a></td><td><code>rename</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/47a19c6c02206602f0bb8285ef3ff6c78c23b0fe"><code>47a19c6</code></a></td><td><code>implement slack matrix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/54755d7da65e6936ec646c122fb0097b6d0383f7"><code>54755d7</code></a></td><td><code>Merge branch 'public/29838' of git://trac.sagemath.org/sage into public/29837-reb</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a4576d633d8a2890c8ce0482288d686a4896ecc1"><code>a4576d6</code></a></td><td><code>set up incidence/adjacency matrix with GF(2)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/30c4715440293a251dc5af8acfd35ee2d7b06c02"><code>30c4715</code></a></td><td><code>Merge branch 'public/29840' of git://trac.sagemath.org/sage into public/29837-reb</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fcd62d2f324c625d64e2f37c8899c1a593e1ebd6"><code>fcd62d2</code></a></td><td><code>determine is_zero beforehand</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/13b8583b1e861139b56bf84b99c2b468cb14ac43"><code>13b8583</code></a></td><td><code>small fix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/89aeab39856360ffe80a8e62a0e4886aa3d8d622"><code>89aeab3</code></a></td><td><code>obtain incidence matrix from slack matrix</code></td></tr></table>




---

archive/issue_comments_470923.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI don't think changing the interface so that GF(2) matrices are returned is a good idea. How about leaving it as ZZ by default, and using a keyword argument for the base ring so it can be overridden.",
    "created_at": "2020-06-10T19:55:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470923",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

I don't think changing the interface so that GF(2) matrices are returned is a good idea. How about leaving it as ZZ by default, and using a keyword argument for the base ring so it can be overridden.



---

archive/issue_comments_470924.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@mkoeppe](#comment%3A7):\n> I don't think changing the interface so that GF(2) matrices are returned is a good idea. How about leaving it as ZZ by default, and using a keyword argument for the base ring so it can be overridden.\n> \n\nI don't think the change to `GF(2)` was needed to make things better. So I can rewrite some stuff and remove #29839, that would also do it, I think. `sage.matrix.matrix_integer_dense` is probably just as fast or faster than the other one.\n\nI really only thought that this is the more natural thing for a 0/1 matrix. If the more natural thing is base ring integer or `GF(2)` really performs awful, I can just revert that decision.",
    "created_at": "2020-06-10T20:00:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470924",
    "user": "https://github.com/kliem"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@mkoeppe](#comment%3A7):
> I don't think changing the interface so that GF(2) matrices are returned is a good idea. How about leaving it as ZZ by default, and using a keyword argument for the base ring so it can be overridden.
> 

I don't think the change to `GF(2)` was needed to make things better. So I can rewrite some stuff and remove #29839, that would also do it, I think. `sage.matrix.matrix_integer_dense` is probably just as fast or faster than the other one.

I really only thought that this is the more natural thing for a 0/1 matrix. If the more natural thing is base ring integer or `GF(2)` really performs awful, I can just revert that decision.



---

archive/issue_comments_470925.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nSee my comment in #29840",
    "created_at": "2020-06-10T20:01:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470925",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">comment:9</div>

See my comment in #29840



---

archive/issue_comments_470926.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nChanging the base ring of incidence matrices was rejected in #29340.",
    "created_at": "2020-06-10T20:04:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470926",
    "user": "https://github.com/kliem"
}
```

<div id="comment:10" align="right">comment:10</div>

Changing the base ring of incidence matrices was rejected in #29340.



---

archive/issue_events_407543.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-10T20:04:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-407543"
}
```



---

archive/issue_events_407544.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-10T20:04:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-407544"
}
```



---

archive/issue_comments_470927.json:
```json
{
    "body": "Changed dependencies from **#29838, #29839, #29840** to **#29838, #29839**",
    "created_at": "2020-06-10T20:04:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470927",
    "user": "https://github.com/kliem"
}
```

Changed dependencies from **#29838, #29839, #29840** to **#29838, #29839**



---

archive/issue_comments_470928.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI wish this was implemented using numpy matrices (knows as arrays), which provide faster linear algebra and have built-in methods to manipulate zero patterns of their matrices.",
    "created_at": "2020-06-10T21:07:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470928",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:11" align="right">comment:11</div>

I wish this was implemented using numpy matrices (knows as arrays), which provide faster linear algebra and have built-in methods to manipulate zero patterns of their matrices.



---

archive/issue_comments_470929.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI don't know how fast conversion back and forth works. It is true, that numpy is a bit faster, but that doesn't help me if I cannot convert things.\n\nE.g.\n\n```\nsage: P = polytopes.associahedron(['A', 9])\nsage: %time a = np.array(P.Vrepresentation())\nCPU times: user 383 ms, sys: 0 ns, total: 383 ms\nWall time: 382 ms\n```\n\nThis is already longer than it takes to obtain the entire incidence matrix. Of course this is most likely not an ideal way to convert, but I don't know any better way at the moment.\n\nAnd conversion back is also slow.\n\nReplying to [@dimpase](#comment%3A11):\n> I wish this was implemented using numpy matrices (knows as arrays), which provide faster linear algebra and have built-in methods to manipulate zero patterns of their matrices.",
    "created_at": "2020-06-10T22:19:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470929",
    "user": "https://github.com/kliem"
}
```

<div id="comment:12" align="right">comment:12</div>

I don't know how fast conversion back and forth works. It is true, that numpy is a bit faster, but that doesn't help me if I cannot convert things.

E.g.

```
sage: P = polytopes.associahedron(['A', 9])
sage: %time a = np.array(P.Vrepresentation())
CPU times: user 383 ms, sys: 0 ns, total: 383 ms
Wall time: 382 ms
```

This is already longer than it takes to obtain the entire incidence matrix. Of course this is most likely not an ideal way to convert, but I don't know any better way at the moment.

And conversion back is also slow.

Replying to [@dimpase](#comment%3A11):
> I wish this was implemented using numpy matrices (knows as arrays), which provide faster linear algebra and have built-in methods to manipulate zero patterns of their matrices.



---

archive/issue_events_407545.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-10T22:43:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-407545"
}
```



---

archive/issue_events_407546.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-10T22:43:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-407546"
}
```



---

archive/issue_comments_470930.json:
```json
{
    "body": "Changed commit from **[`89aeab3`](https://github.com/sagemath/sagetrac-mirror/commit/89aeab39856360ffe80a8e62a0e4886aa3d8d622)** to **[`3d28d09`](https://github.com/sagemath/sagetrac-mirror/commit/3d28d09c5c74cdc8cb79f3b17ef50b1bff8b828d)**",
    "created_at": "2020-06-10T22:43:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470930",
    "user": "https://github.com/kliem"
}
```

Changed commit from **[`89aeab3`](https://github.com/sagemath/sagetrac-mirror/commit/89aeab39856360ffe80a8e62a0e4886aa3d8d622)** to **[`3d28d09`](https://github.com/sagemath/sagetrac-mirror/commit/3d28d09c5c74cdc8cb79f3b17ef50b1bff8b828d)**



---

archive/issue_comments_470931.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/62f1ff9bcbf0bc221d209ef92e893c375b76bb02\"><code>62f1ff9</code></a></td><td><code>use integer matrix for zero_pattern_matrix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/88f6025c34127bb8cac3b507224d2c9a3a95c195\"><code>88f6025</code></a></td><td><code>Merge branch 'public/29838' of git://trac.sagemath.org/sage into public/29837-reb2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7cee02093bddb2aa64f302462c65e113460dc8d5\"><code>7cee020</code></a></td><td><code>determine is_zero beforehand</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3d28d09c5c74cdc8cb79f3b17ef50b1bff8b828d\"><code>3d28d09</code></a></td><td><code>small fix</code></td></tr></table>\n",
    "created_at": "2020-06-10T22:43:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470931",
    "user": "https://github.com/kliem"
}
```

<div id="comment:13"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/62f1ff9bcbf0bc221d209ef92e893c375b76bb02"><code>62f1ff9</code></a></td><td><code>use integer matrix for zero_pattern_matrix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/88f6025c34127bb8cac3b507224d2c9a3a95c195"><code>88f6025</code></a></td><td><code>Merge branch 'public/29838' of git://trac.sagemath.org/sage into public/29837-reb2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7cee02093bddb2aa64f302462c65e113460dc8d5"><code>7cee020</code></a></td><td><code>determine is_zero beforehand</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3d28d09c5c74cdc8cb79f3b17ef50b1bff8b828d"><code>3d28d09</code></a></td><td><code>small fix</code></td></tr></table>




---

archive/issue_comments_470932.json:
```json
{
    "body": "Changed branch from **[public/29837-reb](https://github.com/sagemath/sagetrac-mirror/tree/public/29837-reb)** to **[public/29837-reb2](https://github.com/sagemath/sagetrac-mirror/tree/public/29837-reb2)**",
    "created_at": "2020-06-10T22:43:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470932",
    "user": "https://github.com/kliem"
}
```

Changed branch from **[public/29837-reb](https://github.com/sagemath/sagetrac-mirror/tree/public/29837-reb)** to **[public/29837-reb2](https://github.com/sagemath/sagetrac-mirror/tree/public/29837-reb2)**



---

archive/issue_comments_470933.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ef6a111bf70637a01b6789819b87dde647bdc4c\"><code>7ef6a11</code></a></td><td><code>use slack matrix to obtain incidence matrix quicker</code></td></tr></table>\n",
    "created_at": "2020-06-10T22:43:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470933",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ef6a111bf70637a01b6789819b87dde647bdc4c"><code>7ef6a11</code></a></td><td><code>use slack matrix to obtain incidence matrix quicker</code></td></tr></table>




---

archive/issue_comments_470934.json:
```json
{
    "body": "Changed commit from **[`3d28d09`](https://github.com/sagemath/sagetrac-mirror/commit/3d28d09c5c74cdc8cb79f3b17ef50b1bff8b828d)** to **[`7ef6a11`](https://github.com/sagemath/sagetrac-mirror/commit/7ef6a111bf70637a01b6789819b87dde647bdc4c)**",
    "created_at": "2020-06-10T22:43:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470934",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3d28d09`](https://github.com/sagemath/sagetrac-mirror/commit/3d28d09c5c74cdc8cb79f3b17ef50b1bff8b828d)** to **[`7ef6a11`](https://github.com/sagemath/sagetrac-mirror/commit/7ef6a111bf70637a01b6789819b87dde647bdc4c)**



---

archive/issue_comments_470935.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b5837452ce2e3584c1ec2ca6f98ab4a2dd17de1c\"><code>b583745</code></a></td><td><code>make methods more generic</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/535dc85e9d8a04baf28a646e11f80651b9c16e8a\"><code>535dc85</code></a></td><td><code>note for developers</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0988730553adddb45444ab81e917b8a68ca78042\"><code>0988730</code></a></td><td><code>Merge branch 'public/29839' of git://trac.sagemath.org/sage into public/29837-reb2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/759d1f20427b7a213789e1c114e427824f0884c2\"><code>759d1f2</code></a></td><td><code>account for change in #29839</code></td></tr></table>\n",
    "created_at": "2020-06-11T09:39:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470935",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b5837452ce2e3584c1ec2ca6f98ab4a2dd17de1c"><code>b583745</code></a></td><td><code>make methods more generic</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/535dc85e9d8a04baf28a646e11f80651b9c16e8a"><code>535dc85</code></a></td><td><code>note for developers</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0988730553adddb45444ab81e917b8a68ca78042"><code>0988730</code></a></td><td><code>Merge branch 'public/29839' of git://trac.sagemath.org/sage into public/29837-reb2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/759d1f20427b7a213789e1c114e427824f0884c2"><code>759d1f2</code></a></td><td><code>account for change in #29839</code></td></tr></table>




---

archive/issue_comments_470936.json:
```json
{
    "body": "Changed commit from **[`7ef6a11`](https://github.com/sagemath/sagetrac-mirror/commit/7ef6a111bf70637a01b6789819b87dde647bdc4c)** to **[`759d1f2`](https://github.com/sagemath/sagetrac-mirror/commit/759d1f20427b7a213789e1c114e427824f0884c2)**",
    "created_at": "2020-06-11T09:39:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470936",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7ef6a11`](https://github.com/sagemath/sagetrac-mirror/commit/7ef6a111bf70637a01b6789819b87dde647bdc4c)** to **[`759d1f2`](https://github.com/sagemath/sagetrac-mirror/commit/759d1f20427b7a213789e1c114e427824f0884c2)**



---

archive/issue_comments_470937.json:
```json
{
    "body": "Changed branch from **[public/29837-reb2](https://github.com/sagemath/sagetrac-mirror/tree/public/29837-reb2)** to **[public/29837-reb3](https://github.com/sagemath/sagetrac-mirror/tree/public/29837-reb3)**",
    "created_at": "2020-06-17T09:29:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470937",
    "user": "https://github.com/kliem"
}
```

Changed branch from **[public/29837-reb2](https://github.com/sagemath/sagetrac-mirror/tree/public/29837-reb2)** to **[public/29837-reb3](https://github.com/sagemath/sagetrac-mirror/tree/public/29837-reb3)**



---

archive/issue_comments_470938.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/946237697b17bf1a2024326f854b1ef6e27dec04\"><code>9462376</code></a></td><td><code>Adding optimized get_is_zero_unsafe() to rational sparse matrices.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/94febdeb4ae5782a97793d9446fe8951f0c78bf9\"><code>94febde</code></a></td><td><code>Custom get_is_zero_unsafe() for modn sparse matrices.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf0352fdad5db674c3c2aa36f188f996600f7ee3\"><code>bf0352f</code></a></td><td><code>See if we can check trivial zeros first for symbolic matrices.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a08abe750c622e191a5849979bde1a041a31d52\"><code>2a08abe</code></a></td><td><code>small mistakes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/333c4baf305e19b3a12e99a48e3140459521f339\"><code>333c4ba</code></a></td><td><code>wrong doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/82c6b4ad9afe2ae7be5e5c2fb2e47147c2b2bb89\"><code>82c6b4a</code></a></td><td><code>docstring</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/211f4f19d1936588e93c0f8c0fc6e3bd7c4fe5e8\"><code>211f4f1</code></a></td><td><code>Merge branch 'public/29839' of git://trac.sagemath.org/sage into public/29837-reb3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4c5433e4dca9c57d28aa0311e1b30949c3d939c9\"><code>4c5433e</code></a></td><td><code>determine is_zero beforehand</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/27a1b90be39da37c8cda5f78075b8743a59d84ac\"><code>27a1b90</code></a></td><td><code>use slack matrix to obtain incidence matrix quicker</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/764a99b9a8c476f1d73e120f90b68652ff230eae\"><code>764a99b</code></a></td><td><code>account for change in #29839</code></td></tr></table>\n",
    "created_at": "2020-06-17T09:29:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470938",
    "user": "https://github.com/kliem"
}
```

<div id="comment:16"></div>

Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/946237697b17bf1a2024326f854b1ef6e27dec04"><code>9462376</code></a></td><td><code>Adding optimized get_is_zero_unsafe() to rational sparse matrices.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/94febdeb4ae5782a97793d9446fe8951f0c78bf9"><code>94febde</code></a></td><td><code>Custom get_is_zero_unsafe() for modn sparse matrices.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf0352fdad5db674c3c2aa36f188f996600f7ee3"><code>bf0352f</code></a></td><td><code>See if we can check trivial zeros first for symbolic matrices.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a08abe750c622e191a5849979bde1a041a31d52"><code>2a08abe</code></a></td><td><code>small mistakes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/333c4baf305e19b3a12e99a48e3140459521f339"><code>333c4ba</code></a></td><td><code>wrong doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/82c6b4ad9afe2ae7be5e5c2fb2e47147c2b2bb89"><code>82c6b4a</code></a></td><td><code>docstring</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/211f4f19d1936588e93c0f8c0fc6e3bd7c4fe5e8"><code>211f4f1</code></a></td><td><code>Merge branch 'public/29839' of git://trac.sagemath.org/sage into public/29837-reb3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4c5433e4dca9c57d28aa0311e1b30949c3d939c9"><code>4c5433e</code></a></td><td><code>determine is_zero beforehand</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/27a1b90be39da37c8cda5f78075b8743a59d84ac"><code>27a1b90</code></a></td><td><code>use slack matrix to obtain incidence matrix quicker</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/764a99b9a8c476f1d73e120f90b68652ff230eae"><code>764a99b</code></a></td><td><code>account for change in #29839</code></td></tr></table>




---

archive/issue_comments_470939.json:
```json
{
    "body": "Changed commit from **[`759d1f2`](https://github.com/sagemath/sagetrac-mirror/commit/759d1f20427b7a213789e1c114e427824f0884c2)** to **[`764a99b`](https://github.com/sagemath/sagetrac-mirror/commit/764a99b9a8c476f1d73e120f90b68652ff230eae)**",
    "created_at": "2020-06-17T09:29:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470939",
    "user": "https://github.com/kliem"
}
```

Changed commit from **[`759d1f2`](https://github.com/sagemath/sagetrac-mirror/commit/759d1f20427b7a213789e1c114e427824f0884c2)** to **[`764a99b`](https://github.com/sagemath/sagetrac-mirror/commit/764a99b9a8c476f1d73e120f90b68652ff230eae)**



---

archive/issue_comments_470940.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nNeeds review.\n\nThe the ticket itself is only 3 commits on top of #29838 and #29839, which are both closed now.",
    "created_at": "2020-06-30T05:19:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470940",
    "user": "https://github.com/kliem"
}
```

<div id="comment:17" align="right">comment:17</div>

Needs review.

The the ticket itself is only 3 commits on top of #29838 and #29839, which are both closed now.



---

archive/issue_comments_470941.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -23,8 +23,8 @@\n sage: K.<sqrt2> = QuadraticField(2)\n sage: P = polytopes.permutahedron(7).dilation(sqrt2)\n sage: %time _ = P.incidence_matrix()\n-CPU times: user 4.1 s, sys: 0 ns, total: 4.1 s\n-Wall time: 4.1 s\n+CPU times: user 3.82 s, sys: 0 ns, total: 3.82 s\n+Wall time: 3.82 s\n ```\n \n With this ticket:\n@@ -45,6 +45,6 @@\n sage: K.<sqrt2> = QuadraticField(2)\n sage: P = polytopes.permutahedron(7).dilation(sqrt2)\n sage: %time _ = P.incidence_matrix()\n-CPU times: user 4.41 s, sys: 7.9 ms, total: 4.42 s\n-Wall time: 4.42 s\n+CPU times: user 3.69 s, sys: 3.69 ms, total: 3.69 s\n+Wall time: 3.69 s\n ```\n``````\n",
    "created_at": "2020-06-30T06:10:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470941",
    "user": "https://github.com/kliem"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -23,8 +23,8 @@
 sage: K.<sqrt2> = QuadraticField(2)
 sage: P = polytopes.permutahedron(7).dilation(sqrt2)
 sage: %time _ = P.incidence_matrix()
-CPU times: user 4.1 s, sys: 0 ns, total: 4.1 s
-Wall time: 4.1 s
+CPU times: user 3.82 s, sys: 0 ns, total: 3.82 s
+Wall time: 3.82 s
 ```
 
 With this ticket:
@@ -45,6 +45,6 @@
 sage: K.<sqrt2> = QuadraticField(2)
 sage: P = polytopes.permutahedron(7).dilation(sqrt2)
 sage: %time _ = P.incidence_matrix()
-CPU times: user 4.41 s, sys: 7.9 ms, total: 4.42 s
-Wall time: 4.42 s
+CPU times: user 3.69 s, sys: 3.69 ms, total: 3.69 s
+Wall time: 3.69 s
 ```
``````




---

archive/issue_comments_470942.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nYou might be able to get a little more speed out by doing\n\n```diff\n-return x == 0\n+return (not x)\n```",
    "created_at": "2020-07-01T02:02:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470942",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:19" align="right">comment:19</div>

You might be able to get a little more speed out by doing

```diff
-return x == 0
+return (not x)
```



---

archive/issue_comments_470943.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2020-07-01T02:05:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470943",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_470944.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nHowever, whether you make that change or not, you can set a positive review on my behalf.",
    "created_at": "2020-07-01T02:05:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470944",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:20" align="right">comment:20</div>

However, whether you make that change or not, you can set a positive review on my behalf.



---

archive/issue_comments_470945.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nAbout three percent for `P = polytopes.permutahedron(7).dilation(sqrt2)`.\n\nThank you.",
    "created_at": "2020-07-01T04:29:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470945",
    "user": "https://github.com/kliem"
}
```

<div id="comment:21" align="right">comment:21</div>

About three percent for `P = polytopes.permutahedron(7).dilation(sqrt2)`.

Thank you.



---

archive/issue_comments_470946.json:
```json
{
    "body": "Changed commit from **[`764a99b`](https://github.com/sagemath/sagetrac-mirror/commit/764a99b9a8c476f1d73e120f90b68652ff230eae)** to **[`f70e1c5`](https://github.com/sagemath/sagetrac-mirror/commit/f70e1c5d22c28afd9d3145ce43f26a4eb8b98504)**",
    "created_at": "2020-07-01T04:30:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470946",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`764a99b`](https://github.com/sagemath/sagetrac-mirror/commit/764a99b9a8c476f1d73e120f90b68652ff230eae)** to **[`f70e1c5`](https://github.com/sagemath/sagetrac-mirror/commit/f70e1c5d22c28afd9d3145ce43f26a4eb8b98504)**



---

archive/issue_comments_470947.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f70e1c5d22c28afd9d3145ce43f26a4eb8b98504\"><code>f70e1c5</code></a></td><td><code>improvement suggested by reviewer</code></td></tr></table>\n",
    "created_at": "2020-07-01T04:30:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470947",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f70e1c5d22c28afd9d3145ce43f26a4eb8b98504"><code>f70e1c5</code></a></td><td><code>improvement suggested by reviewer</code></td></tr></table>




---

archive/issue_events_407547.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-07-01T04:30:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-407547"
}
```



---

archive/issue_events_407548.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-07-01T04:30:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-407548"
}
```



---

archive/issue_comments_470948.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nI am getting this with this ticket in sage-on-gentoo\n\n```\nsage -t --long --warn-long 101.0 /usr/lib/python3.7/site-packages/sage/geometry/polyhedron/backend_cdd.py\n**********************************************************************\nFile \"/usr/lib/python3.7/site-packages/sage/geometry/polyhedron/backend_cdd.py\", line 508, in sage.geometry.polyhedron.backend_cdd.Polyhedron_RDF_cdd.__init__\nFailed example:\n    TestSuite(p).run()\nExpected nothing\nGot:\n    Failure in _test_an_affine_basis:\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.7/site-packages/sage/misc/sage_unittest.py\", line 296, in run\n        test_method(tester=tester)\n      File \"/usr/lib/python3.7/site-packages/sage/geometry/polyhedron/base.py\", line 2122, in _test_an_affine_basis\n        b = self.an_affine_basis()\n      File \"/usr/lib/python3.7/site-packages/sage/geometry/polyhedron/base.py\", line 2085, in an_affine_basis\n        chain = self.a_maximal_chain()[1:]  # we exclude the empty face\n      File \"/usr/lib/python3.7/site-packages/sage/geometry/polyhedron/base.py\", line 3098, in a_maximal_chain\n        comb_chain = self.combinatorial_polyhedron().a_maximal_chain()\n      File \"sage/misc/cachefunc.pyx\", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_7/build/cythonized/sage/misc/cachefunc.c:12875)\n        self.cache = f(self._instance)\n      File \"/usr/lib/python3.7/site-packages/sage/geometry/polyhedron/base.py\", line 3362, in combinatorial_polyhedron\n        return CombinatorialPolyhedron(self)\n      File \"sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx\", line 367, in sage.geometry.polyhedron.combinatorial_polyhedron.base.CombinatorialPolyhedron.__init__ (/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_7/build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.c:6786)\n        data = data.incidence_matrix()\n      File \"sage/misc/cachefunc.pyx\", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_7/build/cythonized/sage/misc/cachefunc.c:12875)\n        self.cache = f(self._instance)\n      File \"/usr/lib/python3.7/site-packages/sage/geometry/polyhedron/base.py\", line 2749, in incidence_matrix\n        is_zero == self._is_zero\n    UnboundLocalError: local variable 'is_zero' referenced before assignment\n    ------------------------------------------------------------\n    The following tests failed: _test_an_affine_basis\n**********************************************************************\n```\nseems circular.",
    "created_at": "2020-07-05T02:22:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470948",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:24" align="right">comment:24</div>

I am getting this with this ticket in sage-on-gentoo

```
sage -t --long --warn-long 101.0 /usr/lib/python3.7/site-packages/sage/geometry/polyhedron/backend_cdd.py
**********************************************************************
File "/usr/lib/python3.7/site-packages/sage/geometry/polyhedron/backend_cdd.py", line 508, in sage.geometry.polyhedron.backend_cdd.Polyhedron_RDF_cdd.__init__
Failed example:
    TestSuite(p).run()
Expected nothing
Got:
    Failure in _test_an_affine_basis:
    Traceback (most recent call last):
      File "/usr/lib/python3.7/site-packages/sage/misc/sage_unittest.py", line 296, in run
        test_method(tester=tester)
      File "/usr/lib/python3.7/site-packages/sage/geometry/polyhedron/base.py", line 2122, in _test_an_affine_basis
        b = self.an_affine_basis()
      File "/usr/lib/python3.7/site-packages/sage/geometry/polyhedron/base.py", line 2085, in an_affine_basis
        chain = self.a_maximal_chain()[1:]  # we exclude the empty face
      File "/usr/lib/python3.7/site-packages/sage/geometry/polyhedron/base.py", line 3098, in a_maximal_chain
        comb_chain = self.combinatorial_polyhedron().a_maximal_chain()
      File "sage/misc/cachefunc.pyx", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_7/build/cythonized/sage/misc/cachefunc.c:12875)
        self.cache = f(self._instance)
      File "/usr/lib/python3.7/site-packages/sage/geometry/polyhedron/base.py", line 3362, in combinatorial_polyhedron
        return CombinatorialPolyhedron(self)
      File "sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx", line 367, in sage.geometry.polyhedron.combinatorial_polyhedron.base.CombinatorialPolyhedron.__init__ (/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_7/build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.c:6786)
        data = data.incidence_matrix()
      File "sage/misc/cachefunc.pyx", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_7/build/cythonized/sage/misc/cachefunc.c:12875)
        self.cache = f(self._instance)
      File "/usr/lib/python3.7/site-packages/sage/geometry/polyhedron/base.py", line 2749, in incidence_matrix
        is_zero == self._is_zero
    UnboundLocalError: local variable 'is_zero' referenced before assignment
    ------------------------------------------------------------
    The following tests failed: _test_an_affine_basis
**********************************************************************
```
seems circular.



---

archive/issue_comments_470949.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\n\n```diff\n-is_zero == self._is_zero\n+is_zero = self._is_zero\n```",
    "created_at": "2020-07-05T03:45:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470949",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:25" align="right">comment:25</div>


```diff
-is_zero == self._is_zero
+is_zero = self._is_zero
```



---

archive/issue_events_407549.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2020-07-05T03:45:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-407549"
}
```



---

archive/issue_events_407550.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2020-07-05T03:45:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-407550"
}
```



---

archive/issue_comments_470950.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nThe problem is that usually the cdd backend figures out the incidence matrix itself for inexact polyhedra. So you don't notice, because `incidence_matrix` is never run (except for the empty polyhedron, hence the error). I should add a doctest for this.",
    "created_at": "2020-07-05T06:17:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470950",
    "user": "https://github.com/kliem"
}
```

<div id="comment:26" align="right">comment:26</div>

The problem is that usually the cdd backend figures out the incidence matrix itself for inexact polyhedra. So you don't notice, because `incidence_matrix` is never run (except for the empty polyhedron, hence the error). I should add a doctest for this.



---

archive/issue_comments_470951.json:
```json
{
    "body": "Changed branch from **[public/29837-reb3](https://github.com/sagemath/sagetrac-mirror/tree/public/29837-reb3)** to **[public/29837-reb4](https://github.com/sagemath/sagetrac-mirror/tree/public/29837-reb4)**",
    "created_at": "2020-07-05T07:28:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470951",
    "user": "https://github.com/kliem"
}
```

Changed branch from **[public/29837-reb3](https://github.com/sagemath/sagetrac-mirror/tree/public/29837-reb3)** to **[public/29837-reb4](https://github.com/sagemath/sagetrac-mirror/tree/public/29837-reb4)**



---

archive/issue_events_407551.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-07-05T07:28:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-407551"
}
```



---

archive/issue_events_407552.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-07-05T07:28:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-407552"
}
```



---

archive/issue_comments_470952.json:
```json
{
    "body": "Changed commit from **[`f70e1c5`](https://github.com/sagemath/sagetrac-mirror/commit/f70e1c5d22c28afd9d3145ce43f26a4eb8b98504)** to **[`da9ec61`](https://github.com/sagemath/sagetrac-mirror/commit/da9ec61583cd63e246b8bbd326c3958f4679d12d)**",
    "created_at": "2020-07-05T07:28:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470952",
    "user": "https://github.com/kliem"
}
```

Changed commit from **[`f70e1c5`](https://github.com/sagemath/sagetrac-mirror/commit/f70e1c5d22c28afd9d3145ce43f26a4eb8b98504)** to **[`da9ec61`](https://github.com/sagemath/sagetrac-mirror/commit/da9ec61583cd63e246b8bbd326c3958f4679d12d)**



---

archive/issue_comments_470953.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nI rebased as well.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/169077aec99af8dbe7d53fba3f33c0fa31c37405\"><code>169077a</code></a></td><td><code>Merge branch 'public/29837-reb3' of git://trac.sagemath.org/sage into public/29837-reb4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/26590f1983f7979e638e1fd68385f8b064bb68fb\"><code>26590f1</code></a></td><td><code>fix mistake</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/da9ec61583cd63e246b8bbd326c3958f4679d12d\"><code>da9ec61</code></a></td><td><code>add doctest</code></td></tr></table>\n",
    "created_at": "2020-07-05T07:28:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470953",
    "user": "https://github.com/kliem"
}
```

<div id="comment:27" align="right">comment:27</div>

I rebased as well.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/169077aec99af8dbe7d53fba3f33c0fa31c37405"><code>169077a</code></a></td><td><code>Merge branch 'public/29837-reb3' of git://trac.sagemath.org/sage into public/29837-reb4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/26590f1983f7979e638e1fd68385f8b064bb68fb"><code>26590f1</code></a></td><td><code>fix mistake</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/da9ec61583cd63e246b8bbd326c3958f4679d12d"><code>da9ec61</code></a></td><td><code>add doctest</code></td></tr></table>




---

archive/issue_comments_470954.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nTrivial tweak, but the formatting is better:\n\n```diff\n         Test that this method works for inexact base ring\n-        (`cdd` sets the cache already)::\n+        (``cdd`` sets the cache already)::\n```",
    "created_at": "2020-07-05T07:33:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470954",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:28" align="right">comment:28</div>

Trivial tweak, but the formatting is better:

```diff
         Test that this method works for inexact base ring
-        (`cdd` sets the cache already)::
+        (``cdd`` sets the cache already)::
```



---

archive/issue_comments_470955.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/955f12baa3ecf69aac9e7c6fb7773993f3eb9e80\"><code>955f12b</code></a></td><td><code>sphinx syntax</code></td></tr></table>\n",
    "created_at": "2020-07-05T07:50:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470955",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/955f12baa3ecf69aac9e7c6fb7773993f3eb9e80"><code>955f12b</code></a></td><td><code>sphinx syntax</code></td></tr></table>




---

archive/issue_comments_470956.json:
```json
{
    "body": "Changed commit from **[`da9ec61`](https://github.com/sagemath/sagetrac-mirror/commit/da9ec61583cd63e246b8bbd326c3958f4679d12d)** to **[`955f12b`](https://github.com/sagemath/sagetrac-mirror/commit/955f12baa3ecf69aac9e7c6fb7773993f3eb9e80)**",
    "created_at": "2020-07-05T07:50:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470956",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`da9ec61`](https://github.com/sagemath/sagetrac-mirror/commit/da9ec61583cd63e246b8bbd326c3958f4679d12d)** to **[`955f12b`](https://github.com/sagemath/sagetrac-mirror/commit/955f12baa3ecf69aac9e7c6fb7773993f3eb9e80)**



---

archive/issue_comments_470957.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nDone.\n\nReplying to [@tscrim](#comment%3A28):\n> Trivial tweak, but the formatting is better:\n> \n> ```diff\n>          Test that this method works for inexact base ring\n> -        (`cdd` sets the cache already)::\n> +        (``cdd`` sets the cache already)::\n> ```",
    "created_at": "2020-07-05T07:54:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470957",
    "user": "https://github.com/kliem"
}
```

<div id="comment:30" align="right">comment:30</div>

Done.

Replying to [@tscrim](#comment%3A28):
> Trivial tweak, but the formatting is better:
> 
> ```diff
>          Test that this method works for inexact base ring
> -        (`cdd` sets the cache already)::
> +        (``cdd`` sets the cache already)::
> ```



---

archive/issue_comments_470958.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nThanks.",
    "created_at": "2020-07-05T09:20:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470958",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:31" align="right">comment:31</div>

Thanks.



---

archive/issue_events_407553.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2020-07-05T09:20:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-407553"
}
```



---

archive/issue_events_407554.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2020-07-05T09:20:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-407554"
}
```



---

archive/issue_events_407555.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-07-10T19:34:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-407555"
}
```



---

archive/issue_events_407556.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "24c9b49aa6e5cf7a1f3395ca93ba1224b98cde21",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-07-10T19:34:05Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-407556"
}
```



---

archive/issue_comments_470959.json:
```json
{
    "body": "Changed branch from **[public/29837-reb4](https://github.com/sagemath/sagetrac-mirror/tree/public/29837-reb4)** to **[`955f12b`](https://github.com/sagemath/sagetrac-mirror/commit/955f12baa3ecf69aac9e7c6fb7773993f3eb9e80)**",
    "created_at": "2020-07-10T19:34:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-470959",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/29837-reb4](https://github.com/sagemath/sagetrac-mirror/tree/public/29837-reb4)** to **[`955f12b`](https://github.com/sagemath/sagetrac-mirror/commit/955f12baa3ecf69aac9e7c6fb7773993f3eb9e80)**
