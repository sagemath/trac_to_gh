# Issue 29837: Improvement for incidence matrix of polyhedra

archive/issues_029600.json:
```json
{
    "assignees": [],
    "body": "This ticket collects some improvements for obtaining incidence matrices:\n\n- The method `self._is_zero` is called many times and we can save plenty of time by obtaining it beforehand.\n- We can obtain the slack matrix by multiplying the Vrepresentation matrix with the homogenous Vrepresentation. From this we can obtain the incidence matrix (strangely this last step takes up most of the time).\n\n  Unfortunately, matrix multiplication for algebraic fields isn't very efficient. So we need to keep the old method in this case.\n\nBefore this ticket:\n\n```\nsage: P = polytopes.permutahedron(7)\nsage: %time _ = P.incidence_matrix()\nCPU times: user 751 ms, sys: 7.95 ms, total: 759 ms\nWall time: 758 ms\nsage: P = polytopes.associahedron(['A', 9])\nsage: %time _ = P.incidence_matrix()\nCPU times: user 1.94 s, sys: 4.03 ms, total: 1.94 s\nWall time: 1.94 s\nsage: P = polytopes.hypercube(14)\nsage: %time _ = P.incidence_matrix()\nCPU times: user 670 ms, sys: 0 ns, total: 670 ms\nWall time: 669 ms\nsage: K.<sqrt2> = QuadraticField(2)\nsage: P = polytopes.permutahedron(7).dilation(sqrt2)\nsage: %time _ = P.incidence_matrix()\nCPU times: user 3.82 s, sys: 0 ns, total: 3.82 s\nWall time: 3.82 s\n```\n\nWith this ticket:\n\n```\nsage: P = polytopes.permutahedron(7)\nsage: %time _ = P.incidence_matrix()\nCPU times: user 64.4 ms, sys: 7 \u00b5s, total: 64.4 ms\nWall time: 63.6 ms\nsage: P = polytopes.associahedron(['A', 9])\nsage: %time _ = P.incidence_matrix()\nCPU times: user 325 ms, sys: 12.1 ms, total: 337 ms\nWall time: 335 ms\nsage: P = polytopes.hypercube(14)\nsage: %time _ = P.incidence_matrix()\nCPU times: user 139 ms, sys: 12 ms, total: 151 ms\nWall time: 149 ms\nsage: K.<sqrt2> = QuadraticField(2)\nsage: P = polytopes.permutahedron(7).dilation(sqrt2)\nsage: %time _ = P.incidence_matrix()\nCPU times: user 3.69 s, sys: 3.69 ms, total: 3.69 s\nWall time: 3.69 s\n```\n\nDepends on #29838\nDepends on #29839\n\nCC:  @jplab @LaisRast\n\nKeywords: **polyhedra, incidence matrix**\n\nBranch/Commit: **[955f12b](https://github.com/sagemath/sagetrac-mirror/commit/955f12baa3ecf69aac9e7c6fb7773993f3eb9e80)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Jonathan Kliem**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29837_\n\n",
    "closed_at": "2020-07-10T19:34:05Z",
    "created_at": "2020-06-10T10:09:27Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20geometry",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Improvement for incidence matrix of polyhedra",
    "type": "issue",
    "updated_at": "2020-07-10T19:34:05Z",
    "url": "https://github.com/sagemath/sage/issues/29837",
    "user": "https://github.com/kliem"
}
```
This ticket collects some improvements for obtaining incidence matrices:

- The method `self._is_zero` is called many times and we can save plenty of time by obtaining it beforehand.
- We can obtain the slack matrix by multiplying the Vrepresentation matrix with the homogenous Vrepresentation. From this we can obtain the incidence matrix (strangely this last step takes up most of the time).

  Unfortunately, matrix multiplication for algebraic fields isn't very efficient. So we need to keep the old method in this case.

Before this ticket:

```
sage: P = polytopes.permutahedron(7)
sage: %time _ = P.incidence_matrix()
CPU times: user 751 ms, sys: 7.95 ms, total: 759 ms
Wall time: 758 ms
sage: P = polytopes.associahedron(['A', 9])
sage: %time _ = P.incidence_matrix()
CPU times: user 1.94 s, sys: 4.03 ms, total: 1.94 s
Wall time: 1.94 s
sage: P = polytopes.hypercube(14)
sage: %time _ = P.incidence_matrix()
CPU times: user 670 ms, sys: 0 ns, total: 670 ms
Wall time: 669 ms
sage: K.<sqrt2> = QuadraticField(2)
sage: P = polytopes.permutahedron(7).dilation(sqrt2)
sage: %time _ = P.incidence_matrix()
CPU times: user 3.82 s, sys: 0 ns, total: 3.82 s
Wall time: 3.82 s
```

With this ticket:

```
sage: P = polytopes.permutahedron(7)
sage: %time _ = P.incidence_matrix()
CPU times: user 64.4 ms, sys: 7 µs, total: 64.4 ms
Wall time: 63.6 ms
sage: P = polytopes.associahedron(['A', 9])
sage: %time _ = P.incidence_matrix()
CPU times: user 325 ms, sys: 12.1 ms, total: 337 ms
Wall time: 335 ms
sage: P = polytopes.hypercube(14)
sage: %time _ = P.incidence_matrix()
CPU times: user 139 ms, sys: 12 ms, total: 151 ms
Wall time: 149 ms
sage: K.<sqrt2> = QuadraticField(2)
sage: P = polytopes.permutahedron(7).dilation(sqrt2)
sage: %time _ = P.incidence_matrix()
CPU times: user 3.69 s, sys: 3.69 ms, total: 3.69 s
Wall time: 3.69 s
```

Depends on #29838
Depends on #29839

CC:  @jplab @LaisRast

Keywords: **polyhedra, incidence matrix**

Branch/Commit: **[955f12b](https://github.com/sagemath/sagetrac-mirror/commit/955f12baa3ecf69aac9e7c6fb7773993f3eb9e80)**

Reviewer: **Travis Scrimshaw**

Author: **Jonathan Kliem**

_Issue created by migration from https://trac.sagemath.org/ticket/29837_





---

archive/issue_events_392347.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-10T10:09:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-392347"
}
```



---

archive/issue_events_392348.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-10T10:09:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20geometry",
    "label_color": "0000ff",
    "label_name": "component: geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-392348"
}
```



---

archive/issue_events_392349.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-10T10:09:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-392349"
}
```



---

archive/issue_comments_473965.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/42b5c42481459cd6406d47039784424fb9110026\">42b5c42</a></td><td><code>determine is_zero beforehand</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/02a8a2ff3b5c1d734f7de5c61f52d02b8611f301\">02a8a2f</a></td><td><code>small fix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6dbe5d24132b62c38a1e77c09a471510d9ab1776\">6dbe5d2</a></td><td><code>use matrix multiplication to obtain incidence matrix</code></td></tr></table>\n",
    "created_at": "2020-06-10T10:10:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-473965",
    "user": "https://github.com/kliem"
}
```

<a id='comment:1'>Comment 1:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/42b5c42481459cd6406d47039784424fb9110026">42b5c42</a></td><td><code>determine is_zero beforehand</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/02a8a2ff3b5c1d734f7de5c61f52d02b8611f301">02a8a2f</a></td><td><code>small fix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6dbe5d24132b62c38a1e77c09a471510d9ab1776">6dbe5d2</a></td><td><code>use matrix multiplication to obtain incidence matrix</code></td></tr></table>




---

archive/issue_comments_473966.json:
```json
{
    "body": "Commit: **[6dbe5d2](https://github.com/sagemath/sagetrac-mirror/commit/6dbe5d24132b62c38a1e77c09a471510d9ab1776)**",
    "created_at": "2020-06-10T10:10:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-473966",
    "user": "https://github.com/kliem"
}
```

Commit: **[6dbe5d2](https://github.com/sagemath/sagetrac-mirror/commit/6dbe5d24132b62c38a1e77c09a471510d9ab1776)**



---

archive/issue_comments_473967.json:
```json
{
    "body": "Branch: **[public/29837](https://github.com/sagemath/sagetrac-mirror/tree/public/29837)**",
    "created_at": "2020-06-10T10:10:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-473967",
    "user": "https://github.com/kliem"
}
```

Branch: **[public/29837](https://github.com/sagemath/sagetrac-mirror/tree/public/29837)**



---

archive/issue_events_392350.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-10T10:10:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-392350"
}
```



---

archive/issue_events_392351.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-10T10:10:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-392351"
}
```



---

archive/issue_comments_473968.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nThis should be rebased on #29838 and another ticket that speeds up getting the incidence matrix from the slack matrix.",
    "created_at": "2020-06-10T12:00:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-473968",
    "user": "https://github.com/kliem"
}
```

<a id='comment:2'>Comment 2:</a>
This should be rebased on #29838 and another ticket that speeds up getting the incidence matrix from the slack matrix.



---

archive/issue_events_392352.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-10T12:00:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-392352"
}
```



---

archive/issue_events_392353.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-10T12:00:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-392353"
}
```



---

archive/issue_comments_473969.json:
```json
{
    "body": "Dependencies: **#29838**",
    "created_at": "2020-06-10T12:00:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-473969",
    "user": "https://github.com/kliem"
}
```

Dependencies: **#29838**



---

archive/issue_comments_473970.json:
```json
{
    "body": "Changed dependencies from **#29838** to **#29838, #29839**",
    "created_at": "2020-06-10T13:14:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-473970",
    "user": "https://github.com/kliem"
}
```

Changed dependencies from **#29838** to **#29838, #29839**



---

archive/issue_comments_473971.json:
```json
{
    "body": "Changed dependencies from **#29838, #29839** to **#29838, #29839, #29840**",
    "created_at": "2020-06-10T13:33:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-473971",
    "user": "https://github.com/kliem"
}
```

Changed dependencies from **#29838, #29839** to **#29838, #29839, #29840**



---

archive/issue_comments_473972.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -32,21 +32,21 @@\n ```\n sage: P = polytopes.permutahedron(7)\n sage: %time _ = P.incidence_matrix()\n-CPU times: user 236 ms, sys: 15.8 ms, total: 252 ms\n-Wall time: 251 ms\n+CPU times: user 77.5 ms, sys: 11.9 ms, total: 89.3 ms\n+Wall time: 88.3 ms\n sage: P = polytopes.associahedron(['A', 9])\n sage: %time _ = P.incidence_matrix()\n-CPU times: user 1.21 s, sys: 52.1 ms, total: 1.27 s\n-Wall time: 1.27 s\n+CPU times: user 390 ms, sys: 3.98 ms, total: 394 ms\n+Wall time: 393 ms\n sage: P = polytopes.hypercube(14)\n sage: %time _ = P.incidence_matrix()\n-CPU times: user 247 ms, sys: 8.1 ms, total: 256 ms\n-Wall time: 255 ms\n+CPU times: user 138 ms, sys: 7.84 ms, total: 146 ms\n+Wall time: 144 ms\n sage: K.<sqrt2> = QuadraticField(2)\n sage: P = polytopes.permutahedron(7).dilation(sqrt2)\n sage: %time _ = P.incidence_matrix()\n-CPU times: user 3.77 s, sys: 3.81 ms, total: 3.77 s\n-Wall time: 3.77 s\n+CPU times: user 3.85 s, sys: 59 \u00b5s, total: 3.85 s\n+Wall time: 3.85 s\n ```\n \n Possible follow up: Set up incidence matrix etc. with base ring `GF(2)`.\n``````\n",
    "created_at": "2020-06-10T13:41:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-473972",
    "user": "https://github.com/kliem"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -32,21 +32,21 @@
 ```
 sage: P = polytopes.permutahedron(7)
 sage: %time _ = P.incidence_matrix()
-CPU times: user 236 ms, sys: 15.8 ms, total: 252 ms
-Wall time: 251 ms
+CPU times: user 77.5 ms, sys: 11.9 ms, total: 89.3 ms
+Wall time: 88.3 ms
 sage: P = polytopes.associahedron(['A', 9])
 sage: %time _ = P.incidence_matrix()
-CPU times: user 1.21 s, sys: 52.1 ms, total: 1.27 s
-Wall time: 1.27 s
+CPU times: user 390 ms, sys: 3.98 ms, total: 394 ms
+Wall time: 393 ms
 sage: P = polytopes.hypercube(14)
 sage: %time _ = P.incidence_matrix()
-CPU times: user 247 ms, sys: 8.1 ms, total: 256 ms
-Wall time: 255 ms
+CPU times: user 138 ms, sys: 7.84 ms, total: 146 ms
+Wall time: 144 ms
 sage: K.<sqrt2> = QuadraticField(2)
 sage: P = polytopes.permutahedron(7).dilation(sqrt2)
 sage: %time _ = P.incidence_matrix()
-CPU times: user 3.77 s, sys: 3.81 ms, total: 3.77 s
-Wall time: 3.77 s
+CPU times: user 3.85 s, sys: 59 µs, total: 3.85 s
+Wall time: 3.85 s
 ```
 
 Possible follow up: Set up incidence matrix etc. with base ring `GF(2)`.
``````




---

archive/issue_comments_473973.json:
```json
{
    "body": "Changed commit from **[6dbe5d2](https://github.com/sagemath/sagetrac-mirror/commit/6dbe5d24132b62c38a1e77c09a471510d9ab1776)** to **[89aeab3](https://github.com/sagemath/sagetrac-mirror/commit/89aeab39856360ffe80a8e62a0e4886aa3d8d622)**",
    "created_at": "2020-06-10T17:06:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-473973",
    "user": "https://github.com/kliem"
}
```

Changed commit from **[6dbe5d2](https://github.com/sagemath/sagetrac-mirror/commit/6dbe5d24132b62c38a1e77c09a471510d9ab1776)** to **[89aeab3](https://github.com/sagemath/sagetrac-mirror/commit/89aeab39856360ffe80a8e62a0e4886aa3d8d622)**



---

archive/issue_comments_473974.json:
```json
{
    "body": "Changed branch from **[public/29837](https://github.com/sagemath/sagetrac-mirror/tree/public/29837)** to **[public/29837-reb](https://github.com/sagemath/sagetrac-mirror/tree/public/29837-reb)**",
    "created_at": "2020-06-10T17:06:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-473974",
    "user": "https://github.com/kliem"
}
```

Changed branch from **[public/29837](https://github.com/sagemath/sagetrac-mirror/tree/public/29837)** to **[public/29837-reb](https://github.com/sagemath/sagetrac-mirror/tree/public/29837-reb)**



---

archive/issue_events_392354.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-10T17:06:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-392354"
}
```



---

archive/issue_events_392355.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-10T17:06:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-392355"
}
```



---

archive/issue_comments_473975.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -32,21 +32,19 @@\n ```\n sage: P = polytopes.permutahedron(7)\n sage: %time _ = P.incidence_matrix()\n-CPU times: user 77.5 ms, sys: 11.9 ms, total: 89.3 ms\n-Wall time: 88.3 ms\n+CPU times: user 64.4 ms, sys: 7 \u00b5s, total: 64.4 ms\n+Wall time: 63.6 ms\n sage: P = polytopes.associahedron(['A', 9])\n sage: %time _ = P.incidence_matrix()\n-CPU times: user 390 ms, sys: 3.98 ms, total: 394 ms\n-Wall time: 393 ms\n+CPU times: user 325 ms, sys: 12.1 ms, total: 337 ms\n+Wall time: 335 ms\n sage: P = polytopes.hypercube(14)\n sage: %time _ = P.incidence_matrix()\n-CPU times: user 138 ms, sys: 7.84 ms, total: 146 ms\n-Wall time: 144 ms\n+CPU times: user 139 ms, sys: 12 ms, total: 151 ms\n+Wall time: 149 ms\n sage: K.<sqrt2> = QuadraticField(2)\n sage: P = polytopes.permutahedron(7).dilation(sqrt2)\n sage: %time _ = P.incidence_matrix()\n-CPU times: user 3.85 s, sys: 59 \u00b5s, total: 3.85 s\n-Wall time: 3.85 s\n+CPU times: user 4.41 s, sys: 7.9 ms, total: 4.42 s\n+Wall time: 4.42 s\n ```\n-\n-Possible follow up: Set up incidence matrix etc. with base ring `GF(2)`.\n``````\n",
    "created_at": "2020-06-10T17:06:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-473975",
    "user": "https://github.com/kliem"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -32,21 +32,19 @@
 ```
 sage: P = polytopes.permutahedron(7)
 sage: %time _ = P.incidence_matrix()
-CPU times: user 77.5 ms, sys: 11.9 ms, total: 89.3 ms
-Wall time: 88.3 ms
+CPU times: user 64.4 ms, sys: 7 µs, total: 64.4 ms
+Wall time: 63.6 ms
 sage: P = polytopes.associahedron(['A', 9])
 sage: %time _ = P.incidence_matrix()
-CPU times: user 390 ms, sys: 3.98 ms, total: 394 ms
-Wall time: 393 ms
+CPU times: user 325 ms, sys: 12.1 ms, total: 337 ms
+Wall time: 335 ms
 sage: P = polytopes.hypercube(14)
 sage: %time _ = P.incidence_matrix()
-CPU times: user 138 ms, sys: 7.84 ms, total: 146 ms
-Wall time: 144 ms
+CPU times: user 139 ms, sys: 12 ms, total: 151 ms
+Wall time: 149 ms
 sage: K.<sqrt2> = QuadraticField(2)
 sage: P = polytopes.permutahedron(7).dilation(sqrt2)
 sage: %time _ = P.incidence_matrix()
-CPU times: user 3.85 s, sys: 59 µs, total: 3.85 s
-Wall time: 3.85 s
+CPU times: user 4.41 s, sys: 7.9 ms, total: 4.42 s
+Wall time: 4.42 s
 ```
-
-Possible follow up: Set up incidence matrix etc. with base ring `GF(2)`.
``````




---

archive/issue_comments_473976.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/43e6dfbd64c1372d0829ff18df7a9c7aa9491738\">43e6dfb</a></td><td><code>implement _zero_matrix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/05eba1e190700fcaf2cd03fe043a8510706dd98f\">05eba1e</a></td><td><code>fix bug</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7b708307f2aa4860299a9b7470e1344b88b59c12\">7b70830</a></td><td><code>rename</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/47a19c6c02206602f0bb8285ef3ff6c78c23b0fe\">47a19c6</a></td><td><code>implement slack matrix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/54755d7da65e6936ec646c122fb0097b6d0383f7\">54755d7</a></td><td><code>Merge branch 'public/29838' of git://trac.sagemath.org/sage into public/29837-reb</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a4576d633d8a2890c8ce0482288d686a4896ecc1\">a4576d6</a></td><td><code>set up incidence/adjacency matrix with GF(2)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/30c4715440293a251dc5af8acfd35ee2d7b06c02\">30c4715</a></td><td><code>Merge branch 'public/29840' of git://trac.sagemath.org/sage into public/29837-reb</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fcd62d2f324c625d64e2f37c8899c1a593e1ebd6\">fcd62d2</a></td><td><code>determine is_zero beforehand</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/13b8583b1e861139b56bf84b99c2b468cb14ac43\">13b8583</a></td><td><code>small fix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/89aeab39856360ffe80a8e62a0e4886aa3d8d622\">89aeab3</a></td><td><code>obtain incidence matrix from slack matrix</code></td></tr></table>\n",
    "created_at": "2020-06-10T17:06:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-473976",
    "user": "https://github.com/kliem"
}
```

<a id='comment:6'>Comment 6:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/43e6dfbd64c1372d0829ff18df7a9c7aa9491738">43e6dfb</a></td><td><code>implement _zero_matrix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/05eba1e190700fcaf2cd03fe043a8510706dd98f">05eba1e</a></td><td><code>fix bug</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7b708307f2aa4860299a9b7470e1344b88b59c12">7b70830</a></td><td><code>rename</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/47a19c6c02206602f0bb8285ef3ff6c78c23b0fe">47a19c6</a></td><td><code>implement slack matrix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/54755d7da65e6936ec646c122fb0097b6d0383f7">54755d7</a></td><td><code>Merge branch 'public/29838' of git://trac.sagemath.org/sage into public/29837-reb</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a4576d633d8a2890c8ce0482288d686a4896ecc1">a4576d6</a></td><td><code>set up incidence/adjacency matrix with GF(2)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/30c4715440293a251dc5af8acfd35ee2d7b06c02">30c4715</a></td><td><code>Merge branch 'public/29840' of git://trac.sagemath.org/sage into public/29837-reb</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fcd62d2f324c625d64e2f37c8899c1a593e1ebd6">fcd62d2</a></td><td><code>determine is_zero beforehand</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/13b8583b1e861139b56bf84b99c2b468cb14ac43">13b8583</a></td><td><code>small fix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/89aeab39856360ffe80a8e62a0e4886aa3d8d622">89aeab3</a></td><td><code>obtain incidence matrix from slack matrix</code></td></tr></table>




---

archive/issue_comments_473977.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nI don't think changing the interface so that GF(2) matrices are returned is a good idea. How about leaving it as ZZ by default, and using a keyword argument for the base ring so it can be overridden.",
    "created_at": "2020-06-10T19:55:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-473977",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'>Comment 7:</a>
I don't think changing the interface so that GF(2) matrices are returned is a good idea. How about leaving it as ZZ by default, and using a keyword argument for the base ring so it can be overridden.



---

archive/issue_comments_473978.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nReplying to [@mkoeppe](#comment%3A7):\n> I don't think changing the interface so that GF(2) matrices are returned is a good idea. How about leaving it as ZZ by default, and using a keyword argument for the base ring so it can be overridden.\n> \n\nI don't think the change to `GF(2)` was needed to make things better. So I can rewrite some stuff and remove #29839, that would also do it, I think. `sage.matrix.matrix_integer_dense` is probably just as fast or faster than the other one.\n\nI really only thought that this is the more natural thing for a 0/1 matrix. If the more natural thing is base ring integer or `GF(2)` really performs awful, I can just revert that decision.",
    "created_at": "2020-06-10T20:00:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-473978",
    "user": "https://github.com/kliem"
}
```

<a id='comment:8'>Comment 8:</a>
Replying to [@mkoeppe](#comment%3A7):
> I don't think changing the interface so that GF(2) matrices are returned is a good idea. How about leaving it as ZZ by default, and using a keyword argument for the base ring so it can be overridden.
> 

I don't think the change to `GF(2)` was needed to make things better. So I can rewrite some stuff and remove #29839, that would also do it, I think. `sage.matrix.matrix_integer_dense` is probably just as fast or faster than the other one.

I really only thought that this is the more natural thing for a 0/1 matrix. If the more natural thing is base ring integer or `GF(2)` really performs awful, I can just revert that decision.



---

archive/issue_comments_473979.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nSee my comment in #29840",
    "created_at": "2020-06-10T20:01:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-473979",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'>Comment 9:</a>
See my comment in #29840



---

archive/issue_comments_473980.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nChanging the base ring of incidence matrices was rejected in #29340.",
    "created_at": "2020-06-10T20:04:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-473980",
    "user": "https://github.com/kliem"
}
```

<a id='comment:10'>Comment 10:</a>
Changing the base ring of incidence matrices was rejected in #29340.



---

archive/issue_events_392356.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-10T20:04:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-392356"
}
```



---

archive/issue_events_392357.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-10T20:04:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-392357"
}
```



---

archive/issue_comments_473981.json:
```json
{
    "body": "Changed dependencies from **#29838, #29839, #29840** to **#29838, #29839**",
    "created_at": "2020-06-10T20:04:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-473981",
    "user": "https://github.com/kliem"
}
```

Changed dependencies from **#29838, #29839, #29840** to **#29838, #29839**



---

archive/issue_comments_473982.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nI wish this was implemented using numpy matrices (knows as arrays), which provide faster linear algebra and have built-in methods to manipulate zero patterns of their matrices.",
    "created_at": "2020-06-10T21:07:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-473982",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:11'>Comment 11:</a>
I wish this was implemented using numpy matrices (knows as arrays), which provide faster linear algebra and have built-in methods to manipulate zero patterns of their matrices.



---

archive/issue_comments_473983.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nI don't know how fast conversion back and forth works. It is true, that numpy is a bit faster, but that doesn't help me if I cannot convert things.\n\nE.g.\n\n```\nsage: P = polytopes.associahedron(['A', 9])\nsage: %time a = np.array(P.Vrepresentation())\nCPU times: user 383 ms, sys: 0 ns, total: 383 ms\nWall time: 382 ms\n```\n\nThis is already longer than it takes to obtain the entire incidence matrix. Of course this is most likely not an ideal way to convert, but I don't know any better way at the moment.\n\nAnd conversion back is also slow.\n\nReplying to [@dimpase](#comment%3A11):\n> I wish this was implemented using numpy matrices (knows as arrays), which provide faster linear algebra and have built-in methods to manipulate zero patterns of their matrices.",
    "created_at": "2020-06-10T22:19:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-473983",
    "user": "https://github.com/kliem"
}
```

<a id='comment:12'>Comment 12:</a>
I don't know how fast conversion back and forth works. It is true, that numpy is a bit faster, but that doesn't help me if I cannot convert things.

E.g.

```
sage: P = polytopes.associahedron(['A', 9])
sage: %time a = np.array(P.Vrepresentation())
CPU times: user 383 ms, sys: 0 ns, total: 383 ms
Wall time: 382 ms
```

This is already longer than it takes to obtain the entire incidence matrix. Of course this is most likely not an ideal way to convert, but I don't know any better way at the moment.

And conversion back is also slow.

Replying to [@dimpase](#comment%3A11):
> I wish this was implemented using numpy matrices (knows as arrays), which provide faster linear algebra and have built-in methods to manipulate zero patterns of their matrices.



---

archive/issue_events_392358.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-10T22:43:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-392358"
}
```



---

archive/issue_events_392359.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-10T22:43:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-392359"
}
```



---

archive/issue_comments_473984.json:
```json
{
    "body": "Changed commit from **[89aeab3](https://github.com/sagemath/sagetrac-mirror/commit/89aeab39856360ffe80a8e62a0e4886aa3d8d622)** to **[3d28d09](https://github.com/sagemath/sagetrac-mirror/commit/3d28d09c5c74cdc8cb79f3b17ef50b1bff8b828d)**",
    "created_at": "2020-06-10T22:43:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-473984",
    "user": "https://github.com/kliem"
}
```

Changed commit from **[89aeab3](https://github.com/sagemath/sagetrac-mirror/commit/89aeab39856360ffe80a8e62a0e4886aa3d8d622)** to **[3d28d09](https://github.com/sagemath/sagetrac-mirror/commit/3d28d09c5c74cdc8cb79f3b17ef50b1bff8b828d)**



---

archive/issue_comments_473985.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/62f1ff9bcbf0bc221d209ef92e893c375b76bb02\">62f1ff9</a></td><td><code>use integer matrix for zero_pattern_matrix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/88f6025c34127bb8cac3b507224d2c9a3a95c195\">88f6025</a></td><td><code>Merge branch 'public/29838' of git://trac.sagemath.org/sage into public/29837-reb2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7cee02093bddb2aa64f302462c65e113460dc8d5\">7cee020</a></td><td><code>determine is_zero beforehand</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3d28d09c5c74cdc8cb79f3b17ef50b1bff8b828d\">3d28d09</a></td><td><code>small fix</code></td></tr></table>\n",
    "created_at": "2020-06-10T22:43:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-473985",
    "user": "https://github.com/kliem"
}
```

<a id='comment:13'>Comment 13:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/62f1ff9bcbf0bc221d209ef92e893c375b76bb02">62f1ff9</a></td><td><code>use integer matrix for zero_pattern_matrix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/88f6025c34127bb8cac3b507224d2c9a3a95c195">88f6025</a></td><td><code>Merge branch 'public/29838' of git://trac.sagemath.org/sage into public/29837-reb2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7cee02093bddb2aa64f302462c65e113460dc8d5">7cee020</a></td><td><code>determine is_zero beforehand</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3d28d09c5c74cdc8cb79f3b17ef50b1bff8b828d">3d28d09</a></td><td><code>small fix</code></td></tr></table>




---

archive/issue_comments_473986.json:
```json
{
    "body": "Changed branch from **[public/29837-reb](https://github.com/sagemath/sagetrac-mirror/tree/public/29837-reb)** to **[public/29837-reb2](https://github.com/sagemath/sagetrac-mirror/tree/public/29837-reb2)**",
    "created_at": "2020-06-10T22:43:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-473986",
    "user": "https://github.com/kliem"
}
```

Changed branch from **[public/29837-reb](https://github.com/sagemath/sagetrac-mirror/tree/public/29837-reb)** to **[public/29837-reb2](https://github.com/sagemath/sagetrac-mirror/tree/public/29837-reb2)**



---

archive/issue_comments_473987.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ef6a111bf70637a01b6789819b87dde647bdc4c\">7ef6a11</a></td><td><code>use slack matrix to obtain incidence matrix quicker</code></td></tr></table>\n",
    "created_at": "2020-06-10T22:43:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-473987",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:14'>Comment 14:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ef6a111bf70637a01b6789819b87dde647bdc4c">7ef6a11</a></td><td><code>use slack matrix to obtain incidence matrix quicker</code></td></tr></table>




---

archive/issue_comments_473988.json:
```json
{
    "body": "Changed commit from **[3d28d09](https://github.com/sagemath/sagetrac-mirror/commit/3d28d09c5c74cdc8cb79f3b17ef50b1bff8b828d)** to **[7ef6a11](https://github.com/sagemath/sagetrac-mirror/commit/7ef6a111bf70637a01b6789819b87dde647bdc4c)**",
    "created_at": "2020-06-10T22:43:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-473988",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3d28d09](https://github.com/sagemath/sagetrac-mirror/commit/3d28d09c5c74cdc8cb79f3b17ef50b1bff8b828d)** to **[7ef6a11](https://github.com/sagemath/sagetrac-mirror/commit/7ef6a111bf70637a01b6789819b87dde647bdc4c)**



---

archive/issue_comments_473989.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b5837452ce2e3584c1ec2ca6f98ab4a2dd17de1c\">b583745</a></td><td><code>make methods more generic</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/535dc85e9d8a04baf28a646e11f80651b9c16e8a\">535dc85</a></td><td><code>note for developers</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0988730553adddb45444ab81e917b8a68ca78042\">0988730</a></td><td><code>Merge branch 'public/29839' of git://trac.sagemath.org/sage into public/29837-reb2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/759d1f20427b7a213789e1c114e427824f0884c2\">759d1f2</a></td><td><code>account for change in #29839</code></td></tr></table>\n",
    "created_at": "2020-06-11T09:39:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-473989",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:15'>Comment 15:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b5837452ce2e3584c1ec2ca6f98ab4a2dd17de1c">b583745</a></td><td><code>make methods more generic</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/535dc85e9d8a04baf28a646e11f80651b9c16e8a">535dc85</a></td><td><code>note for developers</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0988730553adddb45444ab81e917b8a68ca78042">0988730</a></td><td><code>Merge branch 'public/29839' of git://trac.sagemath.org/sage into public/29837-reb2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/759d1f20427b7a213789e1c114e427824f0884c2">759d1f2</a></td><td><code>account for change in #29839</code></td></tr></table>




---

archive/issue_comments_473990.json:
```json
{
    "body": "Changed commit from **[7ef6a11](https://github.com/sagemath/sagetrac-mirror/commit/7ef6a111bf70637a01b6789819b87dde647bdc4c)** to **[759d1f2](https://github.com/sagemath/sagetrac-mirror/commit/759d1f20427b7a213789e1c114e427824f0884c2)**",
    "created_at": "2020-06-11T09:39:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-473990",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7ef6a11](https://github.com/sagemath/sagetrac-mirror/commit/7ef6a111bf70637a01b6789819b87dde647bdc4c)** to **[759d1f2](https://github.com/sagemath/sagetrac-mirror/commit/759d1f20427b7a213789e1c114e427824f0884c2)**



---

archive/issue_comments_473991.json:
```json
{
    "body": "Changed branch from **[public/29837-reb2](https://github.com/sagemath/sagetrac-mirror/tree/public/29837-reb2)** to **[public/29837-reb3](https://github.com/sagemath/sagetrac-mirror/tree/public/29837-reb3)**",
    "created_at": "2020-06-17T09:29:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-473991",
    "user": "https://github.com/kliem"
}
```

Changed branch from **[public/29837-reb2](https://github.com/sagemath/sagetrac-mirror/tree/public/29837-reb2)** to **[public/29837-reb3](https://github.com/sagemath/sagetrac-mirror/tree/public/29837-reb3)**



---

archive/issue_comments_473992.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/946237697b17bf1a2024326f854b1ef6e27dec04\">9462376</a></td><td><code>Adding optimized get_is_zero_unsafe() to rational sparse matrices.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/94febdeb4ae5782a97793d9446fe8951f0c78bf9\">94febde</a></td><td><code>Custom get_is_zero_unsafe() for modn sparse matrices.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf0352fdad5db674c3c2aa36f188f996600f7ee3\">bf0352f</a></td><td><code>See if we can check trivial zeros first for symbolic matrices.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a08abe750c622e191a5849979bde1a041a31d52\">2a08abe</a></td><td><code>small mistakes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/333c4baf305e19b3a12e99a48e3140459521f339\">333c4ba</a></td><td><code>wrong doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/82c6b4ad9afe2ae7be5e5c2fb2e47147c2b2bb89\">82c6b4a</a></td><td><code>docstring</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/211f4f19d1936588e93c0f8c0fc6e3bd7c4fe5e8\">211f4f1</a></td><td><code>Merge branch 'public/29839' of git://trac.sagemath.org/sage into public/29837-reb3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4c5433e4dca9c57d28aa0311e1b30949c3d939c9\">4c5433e</a></td><td><code>determine is_zero beforehand</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/27a1b90be39da37c8cda5f78075b8743a59d84ac\">27a1b90</a></td><td><code>use slack matrix to obtain incidence matrix quicker</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/764a99b9a8c476f1d73e120f90b68652ff230eae\">764a99b</a></td><td><code>account for change in #29839</code></td></tr></table>\n",
    "created_at": "2020-06-17T09:29:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-473992",
    "user": "https://github.com/kliem"
}
```

<a id='comment:16'>Comment 16:</a>
Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/946237697b17bf1a2024326f854b1ef6e27dec04">9462376</a></td><td><code>Adding optimized get_is_zero_unsafe() to rational sparse matrices.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/94febdeb4ae5782a97793d9446fe8951f0c78bf9">94febde</a></td><td><code>Custom get_is_zero_unsafe() for modn sparse matrices.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf0352fdad5db674c3c2aa36f188f996600f7ee3">bf0352f</a></td><td><code>See if we can check trivial zeros first for symbolic matrices.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a08abe750c622e191a5849979bde1a041a31d52">2a08abe</a></td><td><code>small mistakes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/333c4baf305e19b3a12e99a48e3140459521f339">333c4ba</a></td><td><code>wrong doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/82c6b4ad9afe2ae7be5e5c2fb2e47147c2b2bb89">82c6b4a</a></td><td><code>docstring</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/211f4f19d1936588e93c0f8c0fc6e3bd7c4fe5e8">211f4f1</a></td><td><code>Merge branch 'public/29839' of git://trac.sagemath.org/sage into public/29837-reb3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4c5433e4dca9c57d28aa0311e1b30949c3d939c9">4c5433e</a></td><td><code>determine is_zero beforehand</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/27a1b90be39da37c8cda5f78075b8743a59d84ac">27a1b90</a></td><td><code>use slack matrix to obtain incidence matrix quicker</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/764a99b9a8c476f1d73e120f90b68652ff230eae">764a99b</a></td><td><code>account for change in #29839</code></td></tr></table>




---

archive/issue_comments_473993.json:
```json
{
    "body": "Changed commit from **[759d1f2](https://github.com/sagemath/sagetrac-mirror/commit/759d1f20427b7a213789e1c114e427824f0884c2)** to **[764a99b](https://github.com/sagemath/sagetrac-mirror/commit/764a99b9a8c476f1d73e120f90b68652ff230eae)**",
    "created_at": "2020-06-17T09:29:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-473993",
    "user": "https://github.com/kliem"
}
```

Changed commit from **[759d1f2](https://github.com/sagemath/sagetrac-mirror/commit/759d1f20427b7a213789e1c114e427824f0884c2)** to **[764a99b](https://github.com/sagemath/sagetrac-mirror/commit/764a99b9a8c476f1d73e120f90b68652ff230eae)**



---

archive/issue_comments_473994.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nNeeds review.\n\nThe the ticket itself is only 3 commits on top of #29838 and #29839, which are both closed now.",
    "created_at": "2020-06-30T05:19:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-473994",
    "user": "https://github.com/kliem"
}
```

<a id='comment:17'>Comment 17:</a>
Needs review.

The the ticket itself is only 3 commits on top of #29838 and #29839, which are both closed now.



---

archive/issue_comments_473995.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -23,8 +23,8 @@\n sage: K.<sqrt2> = QuadraticField(2)\n sage: P = polytopes.permutahedron(7).dilation(sqrt2)\n sage: %time _ = P.incidence_matrix()\n-CPU times: user 4.1 s, sys: 0 ns, total: 4.1 s\n-Wall time: 4.1 s\n+CPU times: user 3.82 s, sys: 0 ns, total: 3.82 s\n+Wall time: 3.82 s\n ```\n \n With this ticket:\n@@ -45,6 +45,6 @@\n sage: K.<sqrt2> = QuadraticField(2)\n sage: P = polytopes.permutahedron(7).dilation(sqrt2)\n sage: %time _ = P.incidence_matrix()\n-CPU times: user 4.41 s, sys: 7.9 ms, total: 4.42 s\n-Wall time: 4.42 s\n+CPU times: user 3.69 s, sys: 3.69 ms, total: 3.69 s\n+Wall time: 3.69 s\n ```\n``````\n",
    "created_at": "2020-06-30T06:10:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-473995",
    "user": "https://github.com/kliem"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -23,8 +23,8 @@
 sage: K.<sqrt2> = QuadraticField(2)
 sage: P = polytopes.permutahedron(7).dilation(sqrt2)
 sage: %time _ = P.incidence_matrix()
-CPU times: user 4.1 s, sys: 0 ns, total: 4.1 s
-Wall time: 4.1 s
+CPU times: user 3.82 s, sys: 0 ns, total: 3.82 s
+Wall time: 3.82 s
 ```
 
 With this ticket:
@@ -45,6 +45,6 @@
 sage: K.<sqrt2> = QuadraticField(2)
 sage: P = polytopes.permutahedron(7).dilation(sqrt2)
 sage: %time _ = P.incidence_matrix()
-CPU times: user 4.41 s, sys: 7.9 ms, total: 4.42 s
-Wall time: 4.42 s
+CPU times: user 3.69 s, sys: 3.69 ms, total: 3.69 s
+Wall time: 3.69 s
 ```
``````




---

archive/issue_comments_473996.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nYou might be able to get a little more speed out by doing\n\n```diff\n-return x == 0\n+return (not x)\n```",
    "created_at": "2020-07-01T02:02:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-473996",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:19'>Comment 19:</a>
You might be able to get a little more speed out by doing

```diff
-return x == 0
+return (not x)
```



---

archive/issue_comments_473997.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2020-07-01T02:05:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-473997",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_473998.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nHowever, whether you make that change or not, you can set a positive review on my behalf.",
    "created_at": "2020-07-01T02:05:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-473998",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:20'>Comment 20:</a>
However, whether you make that change or not, you can set a positive review on my behalf.



---

archive/issue_comments_473999.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nAbout three percent for `P = polytopes.permutahedron(7).dilation(sqrt2)`.\n\nThank you.",
    "created_at": "2020-07-01T04:29:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-473999",
    "user": "https://github.com/kliem"
}
```

<a id='comment:21'>Comment 21:</a>
About three percent for `P = polytopes.permutahedron(7).dilation(sqrt2)`.

Thank you.



---

archive/issue_comments_474000.json:
```json
{
    "body": "Changed commit from **[764a99b](https://github.com/sagemath/sagetrac-mirror/commit/764a99b9a8c476f1d73e120f90b68652ff230eae)** to **[f70e1c5](https://github.com/sagemath/sagetrac-mirror/commit/f70e1c5d22c28afd9d3145ce43f26a4eb8b98504)**",
    "created_at": "2020-07-01T04:30:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-474000",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[764a99b](https://github.com/sagemath/sagetrac-mirror/commit/764a99b9a8c476f1d73e120f90b68652ff230eae)** to **[f70e1c5](https://github.com/sagemath/sagetrac-mirror/commit/f70e1c5d22c28afd9d3145ce43f26a4eb8b98504)**



---

archive/issue_comments_474001.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f70e1c5d22c28afd9d3145ce43f26a4eb8b98504\">f70e1c5</a></td><td><code>improvement suggested by reviewer</code></td></tr></table>\n",
    "created_at": "2020-07-01T04:30:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-474001",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:22'>Comment 22:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f70e1c5d22c28afd9d3145ce43f26a4eb8b98504">f70e1c5</a></td><td><code>improvement suggested by reviewer</code></td></tr></table>




---

archive/issue_events_392360.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-07-01T04:30:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-392360"
}
```



---

archive/issue_events_392361.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-07-01T04:30:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-392361"
}
```



---

archive/issue_comments_474002.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nI am getting this with this ticket in sage-on-gentoo\n\n```\nsage -t --long --warn-long 101.0 /usr/lib/python3.7/site-packages/sage/geometry/polyhedron/backend_cdd.py\n**********************************************************************\nFile \"/usr/lib/python3.7/site-packages/sage/geometry/polyhedron/backend_cdd.py\", line 508, in sage.geometry.polyhedron.backend_cdd.Polyhedron_RDF_cdd.__init__\nFailed example:\n    TestSuite(p).run()\nExpected nothing\nGot:\n    Failure in _test_an_affine_basis:\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.7/site-packages/sage/misc/sage_unittest.py\", line 296, in run\n        test_method(tester=tester)\n      File \"/usr/lib/python3.7/site-packages/sage/geometry/polyhedron/base.py\", line 2122, in _test_an_affine_basis\n        b = self.an_affine_basis()\n      File \"/usr/lib/python3.7/site-packages/sage/geometry/polyhedron/base.py\", line 2085, in an_affine_basis\n        chain = self.a_maximal_chain()[1:]  # we exclude the empty face\n      File \"/usr/lib/python3.7/site-packages/sage/geometry/polyhedron/base.py\", line 3098, in a_maximal_chain\n        comb_chain = self.combinatorial_polyhedron().a_maximal_chain()\n      File \"sage/misc/cachefunc.pyx\", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_7/build/cythonized/sage/misc/cachefunc.c:12875)\n        self.cache = f(self._instance)\n      File \"/usr/lib/python3.7/site-packages/sage/geometry/polyhedron/base.py\", line 3362, in combinatorial_polyhedron\n        return CombinatorialPolyhedron(self)\n      File \"sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx\", line 367, in sage.geometry.polyhedron.combinatorial_polyhedron.base.CombinatorialPolyhedron.__init__ (/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_7/build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.c:6786)\n        data = data.incidence_matrix()\n      File \"sage/misc/cachefunc.pyx\", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_7/build/cythonized/sage/misc/cachefunc.c:12875)\n        self.cache = f(self._instance)\n      File \"/usr/lib/python3.7/site-packages/sage/geometry/polyhedron/base.py\", line 2749, in incidence_matrix\n        is_zero == self._is_zero\n    UnboundLocalError: local variable 'is_zero' referenced before assignment\n    ------------------------------------------------------------\n    The following tests failed: _test_an_affine_basis\n**********************************************************************\n```\nseems circular.",
    "created_at": "2020-07-05T02:22:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-474002",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:24'>Comment 24:</a>
I am getting this with this ticket in sage-on-gentoo

```
sage -t --long --warn-long 101.0 /usr/lib/python3.7/site-packages/sage/geometry/polyhedron/backend_cdd.py
**********************************************************************
File "/usr/lib/python3.7/site-packages/sage/geometry/polyhedron/backend_cdd.py", line 508, in sage.geometry.polyhedron.backend_cdd.Polyhedron_RDF_cdd.__init__
Failed example:
    TestSuite(p).run()
Expected nothing
Got:
    Failure in _test_an_affine_basis:
    Traceback (most recent call last):
      File "/usr/lib/python3.7/site-packages/sage/misc/sage_unittest.py", line 296, in run
        test_method(tester=tester)
      File "/usr/lib/python3.7/site-packages/sage/geometry/polyhedron/base.py", line 2122, in _test_an_affine_basis
        b = self.an_affine_basis()
      File "/usr/lib/python3.7/site-packages/sage/geometry/polyhedron/base.py", line 2085, in an_affine_basis
        chain = self.a_maximal_chain()[1:]  # we exclude the empty face
      File "/usr/lib/python3.7/site-packages/sage/geometry/polyhedron/base.py", line 3098, in a_maximal_chain
        comb_chain = self.combinatorial_polyhedron().a_maximal_chain()
      File "sage/misc/cachefunc.pyx", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_7/build/cythonized/sage/misc/cachefunc.c:12875)
        self.cache = f(self._instance)
      File "/usr/lib/python3.7/site-packages/sage/geometry/polyhedron/base.py", line 3362, in combinatorial_polyhedron
        return CombinatorialPolyhedron(self)
      File "sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx", line 367, in sage.geometry.polyhedron.combinatorial_polyhedron.base.CombinatorialPolyhedron.__init__ (/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_7/build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/base.c:6786)
        data = data.incidence_matrix()
      File "sage/misc/cachefunc.pyx", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_7/build/cythonized/sage/misc/cachefunc.c:12875)
        self.cache = f(self._instance)
      File "/usr/lib/python3.7/site-packages/sage/geometry/polyhedron/base.py", line 2749, in incidence_matrix
        is_zero == self._is_zero
    UnboundLocalError: local variable 'is_zero' referenced before assignment
    ------------------------------------------------------------
    The following tests failed: _test_an_affine_basis
**********************************************************************
```
seems circular.



---

archive/issue_comments_474003.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\n\n```diff\n-is_zero == self._is_zero\n+is_zero = self._is_zero\n```",
    "created_at": "2020-07-05T03:45:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-474003",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:25'>Comment 25:</a>

```diff
-is_zero == self._is_zero
+is_zero = self._is_zero
```



---

archive/issue_events_392362.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2020-07-05T03:45:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-392362"
}
```



---

archive/issue_events_392363.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2020-07-05T03:45:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-392363"
}
```



---

archive/issue_comments_474004.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nThe problem is that usually the cdd backend figures out the incidence matrix itself for inexact polyhedra. So you don't notice, because `incidence_matrix` is never run (except for the empty polyhedron, hence the error). I should add a doctest for this.",
    "created_at": "2020-07-05T06:17:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-474004",
    "user": "https://github.com/kliem"
}
```

<a id='comment:26'>Comment 26:</a>
The problem is that usually the cdd backend figures out the incidence matrix itself for inexact polyhedra. So you don't notice, because `incidence_matrix` is never run (except for the empty polyhedron, hence the error). I should add a doctest for this.



---

archive/issue_comments_474005.json:
```json
{
    "body": "Changed branch from **[public/29837-reb3](https://github.com/sagemath/sagetrac-mirror/tree/public/29837-reb3)** to **[public/29837-reb4](https://github.com/sagemath/sagetrac-mirror/tree/public/29837-reb4)**",
    "created_at": "2020-07-05T07:28:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-474005",
    "user": "https://github.com/kliem"
}
```

Changed branch from **[public/29837-reb3](https://github.com/sagemath/sagetrac-mirror/tree/public/29837-reb3)** to **[public/29837-reb4](https://github.com/sagemath/sagetrac-mirror/tree/public/29837-reb4)**



---

archive/issue_events_392364.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-07-05T07:28:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-392364"
}
```



---

archive/issue_events_392365.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-07-05T07:28:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-392365"
}
```



---

archive/issue_comments_474006.json:
```json
{
    "body": "Changed commit from **[f70e1c5](https://github.com/sagemath/sagetrac-mirror/commit/f70e1c5d22c28afd9d3145ce43f26a4eb8b98504)** to **[da9ec61](https://github.com/sagemath/sagetrac-mirror/commit/da9ec61583cd63e246b8bbd326c3958f4679d12d)**",
    "created_at": "2020-07-05T07:28:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-474006",
    "user": "https://github.com/kliem"
}
```

Changed commit from **[f70e1c5](https://github.com/sagemath/sagetrac-mirror/commit/f70e1c5d22c28afd9d3145ce43f26a4eb8b98504)** to **[da9ec61](https://github.com/sagemath/sagetrac-mirror/commit/da9ec61583cd63e246b8bbd326c3958f4679d12d)**



---

archive/issue_comments_474007.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nI rebased as well.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/169077aec99af8dbe7d53fba3f33c0fa31c37405\">169077a</a></td><td><code>Merge branch 'public/29837-reb3' of git://trac.sagemath.org/sage into public/29837-reb4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/26590f1983f7979e638e1fd68385f8b064bb68fb\">26590f1</a></td><td><code>fix mistake</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/da9ec61583cd63e246b8bbd326c3958f4679d12d\">da9ec61</a></td><td><code>add doctest</code></td></tr></table>\n",
    "created_at": "2020-07-05T07:28:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-474007",
    "user": "https://github.com/kliem"
}
```

<a id='comment:27'>Comment 27:</a>
I rebased as well.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/169077aec99af8dbe7d53fba3f33c0fa31c37405">169077a</a></td><td><code>Merge branch 'public/29837-reb3' of git://trac.sagemath.org/sage into public/29837-reb4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/26590f1983f7979e638e1fd68385f8b064bb68fb">26590f1</a></td><td><code>fix mistake</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/da9ec61583cd63e246b8bbd326c3958f4679d12d">da9ec61</a></td><td><code>add doctest</code></td></tr></table>




---

archive/issue_comments_474008.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nTrivial tweak, but the formatting is better:\n\n```diff\n         Test that this method works for inexact base ring\n-        (`cdd` sets the cache already)::\n+        (``cdd`` sets the cache already)::\n```",
    "created_at": "2020-07-05T07:33:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-474008",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:28'>Comment 28:</a>
Trivial tweak, but the formatting is better:

```diff
         Test that this method works for inexact base ring
-        (`cdd` sets the cache already)::
+        (``cdd`` sets the cache already)::
```



---

archive/issue_comments_474009.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/955f12baa3ecf69aac9e7c6fb7773993f3eb9e80\">955f12b</a></td><td><code>sphinx syntax</code></td></tr></table>\n",
    "created_at": "2020-07-05T07:50:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-474009",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:29'>Comment 29:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/955f12baa3ecf69aac9e7c6fb7773993f3eb9e80">955f12b</a></td><td><code>sphinx syntax</code></td></tr></table>




---

archive/issue_comments_474010.json:
```json
{
    "body": "Changed commit from **[da9ec61](https://github.com/sagemath/sagetrac-mirror/commit/da9ec61583cd63e246b8bbd326c3958f4679d12d)** to **[955f12b](https://github.com/sagemath/sagetrac-mirror/commit/955f12baa3ecf69aac9e7c6fb7773993f3eb9e80)**",
    "created_at": "2020-07-05T07:50:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-474010",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[da9ec61](https://github.com/sagemath/sagetrac-mirror/commit/da9ec61583cd63e246b8bbd326c3958f4679d12d)** to **[955f12b](https://github.com/sagemath/sagetrac-mirror/commit/955f12baa3ecf69aac9e7c6fb7773993f3eb9e80)**



---

archive/issue_comments_474011.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nDone.\n\nReplying to [@tscrim](#comment%3A28):\n> Trivial tweak, but the formatting is better:\n> \n> ```diff\n>          Test that this method works for inexact base ring\n> -        (`cdd` sets the cache already)::\n> +        (``cdd`` sets the cache already)::\n> ```",
    "created_at": "2020-07-05T07:54:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-474011",
    "user": "https://github.com/kliem"
}
```

<a id='comment:30'>Comment 30:</a>
Done.

Replying to [@tscrim](#comment%3A28):
> Trivial tweak, but the formatting is better:
> 
> ```diff
>          Test that this method works for inexact base ring
> -        (`cdd` sets the cache already)::
> +        (``cdd`` sets the cache already)::
> ```



---

archive/issue_comments_474012.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\nThanks.",
    "created_at": "2020-07-05T09:20:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-474012",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:31'>Comment 31:</a>
Thanks.



---

archive/issue_events_392366.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2020-07-05T09:20:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-392366"
}
```



---

archive/issue_events_392367.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2020-07-05T09:20:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-392367"
}
```



---

archive/issue_events_392368.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-07-10T19:34:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-392368"
}
```



---

archive/issue_events_392369.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "24c9b49aa6e5cf7a1f3395ca93ba1224b98cde21",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-07-10T19:34:05Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29837#event-392369"
}
```



---

archive/issue_comments_474013.json:
```json
{
    "body": "Changed branch from **[public/29837-reb4](https://github.com/sagemath/sagetrac-mirror/tree/public/29837-reb4)** to **[955f12b](https://github.com/sagemath/sagetrac-mirror/commit/955f12baa3ecf69aac9e7c6fb7773993f3eb9e80)**",
    "created_at": "2020-07-10T19:34:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29837",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29837#issuecomment-474013",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/29837-reb4](https://github.com/sagemath/sagetrac-mirror/tree/public/29837-reb4)** to **[955f12b](https://github.com/sagemath/sagetrac-mirror/commit/955f12baa3ecf69aac9e7c6fb7773993f3eb9e80)**
