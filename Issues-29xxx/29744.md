# Issue 29744: diameter computation in undirected graphs using certificates

archive/issues_029507.json:
```json
{
    "body": "This ticket aims to implement diameter computation method for weighted and unweighted undirected graphs, as given in [http://arxiv.org/abs/1803.04660](http://arxiv.org/abs/1803.04660)\n\nCC:  @dcoudert\n\nKeywords: gsoc2020\n\nBranch/Commit: 3eed5849912893e1e9d6e8ec9ca0f1400091369b\n\nReviewer: David Coudert\n\nAuthor: Vipul Gupta\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29744\n\n",
    "closed_at": "2020-07-19T07:24:23Z",
    "created_at": "2020-05-27T17:08:52Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "diameter computation in undirected graphs using certificates",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29744",
    "user": "https://github.com/vipul79321"
}
```
This ticket aims to implement diameter computation method for weighted and unweighted undirected graphs, as given in [http://arxiv.org/abs/1803.04660](http://arxiv.org/abs/1803.04660)

CC:  @dcoudert

Keywords: gsoc2020

Branch/Commit: 3eed5849912893e1e9d6e8ec9ca0f1400091369b

Reviewer: David Coudert

Author: Vipul Gupta

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29744





---

archive/issue_comments_582949.json:
```json
{
    "body": "Changing branch from \"\" to \"u/gh-vipul79321/ticket29744\"",
    "created_at": "2020-05-27T17:09:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582949",
    "user": "https://github.com/vipul79321"
}
```

Changing branch from "" to "u/gh-vipul79321/ticket29744"



---

archive/issue_comments_582950.json:
```json
{
    "body": "Changing commit from \"\" to \"e6ba789eec1f138ffe1f6ebf2f1c840c295a0e3e\"",
    "created_at": "2020-05-27T17:10:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582950",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "e6ba789eec1f138ffe1f6ebf2f1c840c295a0e3e"



---

archive/issue_comments_582951.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-05-27T17:10:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582951",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_582952.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-05-27T17:16:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582952",
    "user": "https://github.com/vipul79321"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_582953.json:
```json
{
    "body": "Changing reviewer from \"\" to \"David Coudert\"",
    "created_at": "2020-05-27T17:43:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582953",
    "user": "https://github.com/dcoudert"
}
```

Changing reviewer from "" to "David Coudert"



---

archive/issue_comments_582954.json:
```json
{
    "body": "<a id='comment:4'></a>The paper is unclear for the line `Select x such that d(u, x) + e(x) = e(u)`. In fact, this is method minES in the paper.\n\nSince we don't know e(x), we do as follows (a `while True` loop):\n1. Select x minimizing e_L(x) and such that d(u, x) + e_L(x) <= e(u).\n2. Compute e(x) and update `LB`.\n3. If e(x) = e_L(x), then x a good choice. We use it to update eccentricity upper bounds. Then we break from the while loop.\n3. Otherwise, x was not a good choice. We use its antipode to update lower bounds. Then, we go to 1.\n\nIt might be suitable to maintain the list of vertices from which we have not yet computed a BFS.\n\n\nDon't forget to add this ticket in the meta ticket. Also, I have not checked if a previously opened ticket was trying to implement the same algorithm...",
    "created_at": "2020-05-27T17:43:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582954",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:4'></a>The paper is unclear for the line `Select x such that d(u, x) + e(x) = e(u)`. In fact, this is method minES in the paper.

Since we don't know e(x), we do as follows (a `while True` loop):
1. Select x minimizing e_L(x) and such that d(u, x) + e_L(x) <= e(u).
2. Compute e(x) and update `LB`.
3. If e(x) = e_L(x), then x a good choice. We use it to update eccentricity upper bounds. Then we break from the while loop.
3. Otherwise, x was not a good choice. We use its antipode to update lower bounds. Then, we go to 1.

It might be suitable to maintain the list of vertices from which we have not yet computed a BFS.


Don't forget to add this ticket in the meta ticket. Also, I have not checked if a previously opened ticket was trying to implement the same algorithm...



---

archive/issue_comments_582955.json:
```json
{
    "body": "Changing commit from \"e6ba789eec1f138ffe1f6ebf2f1c840c295a0e3e\" to \"6fa032702da536c26d3e5de0a69b4a4ef2e39922\"",
    "created_at": "2020-05-28T18:43:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582955",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e6ba789eec1f138ffe1f6ebf2f1c840c295a0e3e" to "6fa032702da536c26d3e5de0a69b4a4ef2e39922"



---

archive/issue_comments_582956.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-05-28T18:43:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582956",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_582957.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:4 dcoudert]:\n> The paper is unclear for the line `Select x such that d(u, x) + e(x) = e(u)`. In fact, this is method minES in the paper.\n> \n> Since we don't know e(x), we do as follows (a `while True` loop):\n> 1. Select x minimizing e_L(x) and such that d(u, x) + e_L(x) <= e(u).\n> 2. Compute e(x) and update `LB`.\n> 3. If e(x) = e_L(x), then x a good choice. We use it to update eccentricity upper bounds. Then we break from the while loop.\n> 3. Otherwise, x was not a good choice. We use its antipode to update lower bounds. Then, we go to 1.\n> \n  \nI have added following changes and performance improved a little, but still not comparable to iFUB.\n\n> It might be suitable to maintain the list of vertices from which we have not yet computed a BFS.\n\nIt unclear to me, how we should use list of active vertices. Can you explain this part, so I can work on it.",
    "created_at": "2020-05-28T18:46:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582957",
    "user": "https://github.com/vipul79321"
}
```

<a id='comment:6'></a>Replying to [comment:4 dcoudert]:
> The paper is unclear for the line `Select x such that d(u, x) + e(x) = e(u)`. In fact, this is method minES in the paper.
> 
> Since we don't know e(x), we do as follows (a `while True` loop):
> 1. Select x minimizing e_L(x) and such that d(u, x) + e_L(x) <= e(u).
> 2. Compute e(x) and update `LB`.
> 3. If e(x) = e_L(x), then x a good choice. We use it to update eccentricity upper bounds. Then we break from the while loop.
> 3. Otherwise, x was not a good choice. We use its antipode to update lower bounds. Then, we go to 1.
> 
  
I have added following changes and performance improved a little, but still not comparable to iFUB.

> It might be suitable to maintain the list of vertices from which we have not yet computed a BFS.

It unclear to me, how we should use list of active vertices. Can you explain this part, so I can work on it.



---

archive/issue_comments_582958.json:
```json
{
    "body": "<a id='comment:7'></a>let active be the list of vertices\n\nwhile True, do:\n1. let idx be the index of the vertex in active with largest eccentricity upper bound\n2. active[idx], active[-1] = active[-1], active[idx]   # exchange \n3. source = active.pop()   # source is no longer active\n4. compute BFS from source, set ecc[source] and update eccentricity lower bounds\n5. apply minES as described in #comment:4.\n   - Each time you select a vertex x in active, you remove it from active.\n   - Warning: when you select the antipode, may be it is no longer active, and so cannot be removed from active. This is something hard to avoid. But you can use it anyway. So check if the antipode is in active and if so remove it.\n\n\nHope it helps.",
    "created_at": "2020-05-29T09:38:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582958",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:7'></a>let active be the list of vertices

while True, do:
1. let idx be the index of the vertex in active with largest eccentricity upper bound
2. active[idx], active[-1] = active[-1], active[idx]   # exchange 
3. source = active.pop()   # source is no longer active
4. compute BFS from source, set ecc[source] and update eccentricity lower bounds
5. apply minES as described in #comment:4.
   - Each time you select a vertex x in active, you remove it from active.
   - Warning: when you select the antipode, may be it is no longer active, and so cannot be removed from active. This is something hard to avoid. But you can use it anyway. So check if the antipode is in active and if so remove it.


Hope it helps.



---

archive/issue_comments_582959.json:
```json
{
    "body": "Changing commit from \"6fa032702da536c26d3e5de0a69b4a4ef2e39922\" to \"1068f753c89e6de759681e6faeb436c94bb0a836\"",
    "created_at": "2020-05-29T18:10:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582959",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6fa032702da536c26d3e5de0a69b4a4ef2e39922" to "1068f753c89e6de759681e6faeb436c94bb0a836"



---

archive/issue_comments_582960.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-05-29T18:10:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582960",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_582961.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [comment:7 dcoudert]:\n> let active be the list of vertices\n> \n> while True, do:\n> 1. let idx be the index of the vertex in active with largest eccentricity upper bound\n> 2. active[idx], active[-1] = active[-1], active[idx]   # exchange \n> 3. source = active.pop()   # source is no longer active\n> 4. compute BFS from source, set ecc[source] and update eccentricity lower bounds\n> 5. apply minES as described in #comment:4.\n>    - Each time you select a vertex x in active, you remove it from active.\n>    - Warning: when you select the antipode, may be it is no longer active, and so cannot be removed from active. This is something hard to avoid. But you can use it anyway. So check if the antipode is in active and if so remove it.\n> \n> \n> Hope it helps.\n\nI have update my method as you mentioned. But there is no improvement in performance.\\\\\n\nOne major drawback of our code is that sometimes it never comes out of inner while loop. This happens, because there is no vertex in `active` list which satisfies the condition `distances[v] + ecc_lower_bound[v] <= ecc[source]` and hence the continuous popping from `active` list\\\\\n\nWe have to figure out a way to deal with this situation when there is no such vertex in `active` list\n\nI have following suggestions:\n- If intially there is no vertex in `active` list, which satisfies the condition, then we should use `source` as its `delegate certificate`\n- If after entering inner while loop there is no vertex in `active` list which satisfies the condition, then we should use last `x` as `delegate certificate`",
    "created_at": "2020-05-29T18:19:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582961",
    "user": "https://github.com/vipul79321"
}
```

<a id='comment:9'></a>Replying to [comment:7 dcoudert]:
> let active be the list of vertices
> 
> while True, do:
> 1. let idx be the index of the vertex in active with largest eccentricity upper bound
> 2. active[idx], active[-1] = active[-1], active[idx]   # exchange 
> 3. source = active.pop()   # source is no longer active
> 4. compute BFS from source, set ecc[source] and update eccentricity lower bounds
> 5. apply minES as described in #comment:4.
>    - Each time you select a vertex x in active, you remove it from active.
>    - Warning: when you select the antipode, may be it is no longer active, and so cannot be removed from active. This is something hard to avoid. But you can use it anyway. So check if the antipode is in active and if so remove it.
> 
> 
> Hope it helps.

I have update my method as you mentioned. But there is no improvement in performance.\\

One major drawback of our code is that sometimes it never comes out of inner while loop. This happens, because there is no vertex in `active` list which satisfies the condition `distances[v] + ecc_lower_bound[v] <= ecc[source]` and hence the continuous popping from `active` list\\

We have to figure out a way to deal with this situation when there is no such vertex in `active` list

I have following suggestions:
- If intially there is no vertex in `active` list, which satisfies the condition, then we should use `source` as its `delegate certificate`
- If after entering inner while loop there is no vertex in `active` list which satisfies the condition, then we should use last `x` as `delegate certificate`



---

archive/issue_comments_582962.json:
```json
{
    "body": "Changing dependencies from \"#29660\" to \"\"",
    "created_at": "2020-05-30T14:37:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582962",
    "user": "https://github.com/dcoudert"
}
```

Changing dependencies from "#29660" to ""



---

archive/issue_comments_582963.json:
```json
{
    "body": "Changing commit from \"1068f753c89e6de759681e6faeb436c94bb0a836\" to \"37ac47a9297fc0a04441862ba8b2a82251d464a7\"",
    "created_at": "2020-05-30T14:37:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582963",
    "user": "https://github.com/dcoudert"
}
```

Changing commit from "1068f753c89e6de759681e6faeb436c94bb0a836" to "37ac47a9297fc0a04441862ba8b2a82251d464a7"



---

archive/issue_comments_582964.json:
```json
{
    "body": "<a id='comment:10'></a>I pushed a new branch with a different version of the algorithm. For me it's better and it is generally faster than iFUB.\nI have also renamed the algorithm as `DHV` instead of `diameter_dragan`. The branch is in public, so you can modify it.\n\n---\nNew commits:",
    "created_at": "2020-05-30T14:37:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582964",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:10'></a>I pushed a new branch with a different version of the algorithm. For me it's better and it is generally faster than iFUB.
I have also renamed the algorithm as `DHV` instead of `diameter_dragan`. The branch is in public, so you can modify it.

---
New commits:



---

archive/issue_comments_582965.json:
```json
{
    "body": "Changing branch from \"u/gh-vipul79321/ticket29744\" to \"public/graphs/29744_diameter_DHV\"",
    "created_at": "2020-05-30T14:37:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582965",
    "user": "https://github.com/dcoudert"
}
```

Changing branch from "u/gh-vipul79321/ticket29744" to "public/graphs/29744_diameter_DHV"



---

archive/issue_comments_582966.json:
```json
{
    "body": "Changing commit from \"37ac47a9297fc0a04441862ba8b2a82251d464a7\" to \"a0495566ae194295ec7613decac5d983527c451d\"",
    "created_at": "2020-05-30T18:22:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582966",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "37ac47a9297fc0a04441862ba8b2a82251d464a7" to "a0495566ae194295ec7613decac5d983527c451d"



---

archive/issue_comments_582967.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-05-30T18:22:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582967",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_582968.json:
```json
{
    "body": "<a id='comment:12'></a>- First of all, I would like to mention, it is very clean, efficient and simplified code :)\n\n- One problem, I encountered was that it was giving index error as follows\n\n```\nsage: from sage.graphs.distances_all_pairs import diameter\nsage: G = graphs.RandomGNP(21,0.6)\nsage: % time diameter(G, algorithm = 'DHV')\n---------------------------------------------------------------------------\nIndexError                                Traceback (most recent call last)\nIndexError: list index out of range\nException ignored in: 'sage.graphs.distances_all_pairs.diameter_dragan'\nIndexError: list index out of range\nCPU times: user 512 \u00b5s, sys: 27 \u00b5s, total: 539 \u00b5s\nWall time: 470 \u00b5s\n0\n```\n\nI have fixed that.\n\\\\\n\\\\\n- I agree, it sometimes works faster than iFUB. \nFew examples that I would like to point out, where it perform equivalent to brute are - \n\n```\nsage: G = graphs.RandomGNP(1009,0.6)\nsage: % time diameter(G, algorithm = 'standard')\nCPU times: user 673 ms, sys: 7.41 ms, total: 681 ms\nWall time: 679 ms\n2\nsage: % time diameter(G, algorithm = 'DHV')\nCPU times: user 648 ms, sys: 0 ns, total: 648 ms\nWall time: 647 ms\n2\nsage: % time diameter(G)\nCPU times: user 346 ms, sys: 0 ns, total: 346 ms\nWall time: 345 ms\n2\n```\n\n\n```\nsage: G = graphs.BubbleSortGraph(7)\nsage: % time diameter(G, algorithm = 'standard')\nCPU times: user 530 ms, sys: 0 ns, total: 530 ms\nWall time: 529 ms\n21\nsage: % time diameter(G, algorithm = 'DHV')\nCPU times: user 580 ms, sys: 0 ns, total: 580 ms\nWall time: 580 ms\n21\nsage: % time diameter(G)\nCPU times: user 276 ms, sys: 0 ns, total: 276 ms\nWall time: 276 ms\n21\n```\n\n\n```\nsage: G = graphs.FoldedCubeGraph(13)\nsage: % time diameter(G, algorithm = 'standard')\nCPU times: user 359 ms, sys: 0 ns, total: 359 ms\nWall time: 358 ms\n6\nsage: % time diameter(G, algorithm = 'DHV')\nCPU times: user 374 ms, sys: 0 ns, total: 374 ms\nWall time: 373 ms\n6\nsage: % time diameter(G)\nCPU times: user 297 ms, sys: 0 ns, total: 297 ms\nWall time: 296 ms\n6\n```\n\nMaybe above graphs are the worst cases of this algorithm.",
    "created_at": "2020-05-30T18:36:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582968",
    "user": "https://github.com/vipul79321"
}
```

<a id='comment:12'></a>- First of all, I would like to mention, it is very clean, efficient and simplified code :)

- One problem, I encountered was that it was giving index error as follows

```
sage: from sage.graphs.distances_all_pairs import diameter
sage: G = graphs.RandomGNP(21,0.6)
sage: % time diameter(G, algorithm = 'DHV')
---------------------------------------------------------------------------
IndexError                                Traceback (most recent call last)
IndexError: list index out of range
Exception ignored in: 'sage.graphs.distances_all_pairs.diameter_dragan'
IndexError: list index out of range
CPU times: user 512 µs, sys: 27 µs, total: 539 µs
Wall time: 470 µs
0
```

I have fixed that.
\\
\\
- I agree, it sometimes works faster than iFUB. 
Few examples that I would like to point out, where it perform equivalent to brute are - 

```
sage: G = graphs.RandomGNP(1009,0.6)
sage: % time diameter(G, algorithm = 'standard')
CPU times: user 673 ms, sys: 7.41 ms, total: 681 ms
Wall time: 679 ms
2
sage: % time diameter(G, algorithm = 'DHV')
CPU times: user 648 ms, sys: 0 ns, total: 648 ms
Wall time: 647 ms
2
sage: % time diameter(G)
CPU times: user 346 ms, sys: 0 ns, total: 346 ms
Wall time: 345 ms
2
```


```
sage: G = graphs.BubbleSortGraph(7)
sage: % time diameter(G, algorithm = 'standard')
CPU times: user 530 ms, sys: 0 ns, total: 530 ms
Wall time: 529 ms
21
sage: % time diameter(G, algorithm = 'DHV')
CPU times: user 580 ms, sys: 0 ns, total: 580 ms
Wall time: 580 ms
21
sage: % time diameter(G)
CPU times: user 276 ms, sys: 0 ns, total: 276 ms
Wall time: 276 ms
21
```


```
sage: G = graphs.FoldedCubeGraph(13)
sage: % time diameter(G, algorithm = 'standard')
CPU times: user 359 ms, sys: 0 ns, total: 359 ms
Wall time: 358 ms
6
sage: % time diameter(G, algorithm = 'DHV')
CPU times: user 374 ms, sys: 0 ns, total: 374 ms
Wall time: 373 ms
6
sage: % time diameter(G)
CPU times: user 297 ms, sys: 0 ns, total: 297 ms
Wall time: 296 ms
6
```

Maybe above graphs are the worst cases of this algorithm.



---

archive/issue_comments_582969.json:
```json
{
    "body": "<a id='comment:13'></a>if we need to add `active` in the outer while loop, it means that we are not correctly maintaining LB and UB. Indeed, if active is empty, it means that we have computed BFS from all the vertices. So we must have LB = UB. Can you check that ?\n\nFor the performance, try a large sparse graph, or `graphs.RandomBarabasiAlbert(100000, 2)`.",
    "created_at": "2020-05-30T18:57:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582969",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:13'></a>if we need to add `active` in the outer while loop, it means that we are not correctly maintaining LB and UB. Indeed, if active is empty, it means that we have computed BFS from all the vertices. So we must have LB = UB. Can you check that ?

For the performance, try a large sparse graph, or `graphs.RandomBarabasiAlbert(100000, 2)`.



---

archive/issue_comments_582970.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-05-31T17:32:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582970",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_582971.json:
```json
{
    "body": "Changing commit from \"a0495566ae194295ec7613decac5d983527c451d\" to \"f9319d547f03ca9c8dcf166a7a626e6f22c12599\"",
    "created_at": "2020-05-31T17:32:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582971",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a0495566ae194295ec7613decac5d983527c451d" to "f9319d547f03ca9c8dcf166a7a626e6f22c12599"



---

archive/issue_comments_582972.json:
```json
{
    "body": "<a id='comment:15'></a>You are right, we need to add `active` as a test of the outer while loop. This is typically the case for a graph with 2 vertices and an edge. I added a dockets for this case.\n\nMay be we should rename the method `diameter_DHV` to be consistent, no ?\n\nYou can now make this method available from the diameter method in `graph.py`.",
    "created_at": "2020-05-31T17:36:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582972",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:15'></a>You are right, we need to add `active` as a test of the outer while loop. This is typically the case for a graph with 2 vertices and an edge. I added a dockets for this case.

May be we should rename the method `diameter_DHV` to be consistent, no ?

You can now make this method available from the diameter method in `graph.py`.



---

archive/issue_comments_582973.json:
```json
{
    "body": "<a id='comment:16'></a>Replying to [comment:15 dcoudert]:\n> You are right, we need to add `active` as a test of the outer while loop. This is typically the case for a graph with 2 vertices and an edge. I added a dockets for this case.\n> \n> May be we should rename the method `diameter_DHV` to be consistent, no ?\n> \n\nYeah, that will be good.\n> You can now make this method available from the diameter method in `graph.py`.\n\n\nBefore doing this. I was wondering maybe I should implement the weighted version of this algorithm in `boost_graph.pyx` ? Then we will expose it `graph.py`",
    "created_at": "2020-06-01T12:10:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582973",
    "user": "https://github.com/vipul79321"
}
```

<a id='comment:16'></a>Replying to [comment:15 dcoudert]:
> You are right, we need to add `active` as a test of the outer while loop. This is typically the case for a graph with 2 vertices and an edge. I added a dockets for this case.
> 
> May be we should rename the method `diameter_DHV` to be consistent, no ?
> 

Yeah, that will be good.
> You can now make this method available from the diameter method in `graph.py`.


Before doing this. I was wondering maybe I should implement the weighted version of this algorithm in `boost_graph.pyx` ? Then we will expose it `graph.py`



---

archive/issue_comments_582974.json:
```json
{
    "body": "<a id='comment:17'></a>Feel free to do it.",
    "created_at": "2020-06-01T13:04:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582974",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:17'></a>Feel free to do it.



---

archive/issue_comments_582975.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-02T18:21:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582975",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_582976.json:
```json
{
    "body": "Changing commit from \"f9319d547f03ca9c8dcf166a7a626e6f22c12599\" to \"0ada5851e8cacae3fcec1325bc9bfb9810c6df13\"",
    "created_at": "2020-06-02T18:21:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582976",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f9319d547f03ca9c8dcf166a7a626e6f22c12599" to "0ada5851e8cacae3fcec1325bc9bfb9810c6df13"



---

archive/issue_comments_582977.json:
```json
{
    "body": "<a id='comment:19'></a>Replying to [comment:18 git]:\n> Branch pushed to git repo; I updated commit sha1. New commits:\n> |                                                                                                                                           |                                                                      |\n> |-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|\n> |[7314e0f](https://git.sagemath.org/sage.git/commit/?id=7314e0f202378b224866708ff5d3817e7b189f31)|`trac 29744: method added for weighted graphs and exposed in graph.py`|\n> |[e9798b8](https://git.sagemath.org/sage.git/commit/?id=e9798b8be90c26e8d6d474c8e24e4b030f8a2124)|`documentation updated`|\n> |[0ada585](https://git.sagemath.org/sage.git/commit/?id=0ada5851e8cacae3fcec1325bc9bfb9810c6df13)|`Merge branch 'public/graphs/29744_diameter_DHV' of git://trac.sagemath.org/sage into diameter_DHV`|\n\n\nadded `diameter_DHV` for weighted graph alongwith `check_weight` parameter and exposed both methods in `graph.py`.",
    "created_at": "2020-06-02T18:25:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582977",
    "user": "https://github.com/vipul79321"
}
```

<a id='comment:19'></a>Replying to [comment:18 git]:
> Branch pushed to git repo; I updated commit sha1. New commits:
> |                                                                                                                                           |                                                                      |
> |-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|
> |[7314e0f](https://git.sagemath.org/sage.git/commit/?id=7314e0f202378b224866708ff5d3817e7b189f31)|`trac 29744: method added for weighted graphs and exposed in graph.py`|
> |[e9798b8](https://git.sagemath.org/sage.git/commit/?id=e9798b8be90c26e8d6d474c8e24e4b030f8a2124)|`documentation updated`|
> |[0ada585](https://git.sagemath.org/sage.git/commit/?id=0ada5851e8cacae3fcec1325bc9bfb9810c6df13)|`Merge branch 'public/graphs/29744_diameter_DHV' of git://trac.sagemath.org/sage into diameter_DHV`|


added `diameter_DHV` for weighted graph alongwith `check_weight` parameter and exposed both methods in `graph.py`.



---

archive/issue_comments_582978.json:
```json
{
    "body": "<a id='comment:20'></a>You should add a doctest with a weighted graph in boost.\n\n```\nsage: from sage.graphs.base.boost_graph import diameter_DHV\nsage: G = graphs.CycleGraph(6)\nsage: for u, v in G.edges(labels=False):\n....:     G.set_edge_label(u, v, 1)\nsage: G.set_edge_label(4, 5, -1)\nsage: diameter_DHV(G)  # unweighted\n3.0\nsage: diameter_DHV(G, weight_function=lambda e:e[2])   # weighted \n0.0\n```\nThis last answer is not correct.\n\nOther issues, that were certainly already here.\n\n```\nsage: G.diameter(by_weight=True)\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-8-a687234a118b> in <module>()\n----> 1 G.diameter(by_weight=True)\n\n/Users/dcoudert/sage/local/lib/python3.7/site-packages/sage/graphs/graph.py in diameter(self, by_weight, algorithm, weight_function, check_weight)\n   5612             if by_weight:\n   5613                 raise ValueError(\"algorithm '\" + algorithm + \"' does not work\" +\n-> 5614                                  \" on weighted graphs\")\n   5615             from sage.graphs.distances_all_pairs import diameter\n   5616             return diameter(self, algorithm=algorithm)\n\nValueError: algorithm 'iFUB' does not work on weighted graphs\nsage: G.diameter(by_weight=True, algorithm='Johnson_Boost')\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-10-8e8a8c6456b1> in <module>()\n----> 1 G.diameter(by_weight=True, algorithm='Johnson_Boost')\n\n/Users/dcoudert/sage/local/lib/python3.7/site-packages/sage/graphs/graph.py in diameter(self, by_weight, algorithm, weight_function, check_weight)\n   5619                                      weight_function=weight_function,\n   5620                                      check_weight=check_weight,\n-> 5621                                      algorithm=algorithm))\n   5622 \n   5623     @doc_index(\"Distances\")\n\n/Users/dcoudert/sage/local/lib/python3.7/site-packages/sage/graphs/graph.py in eccentricity(self, v, by_weight, algorithm, weight_function, check_weight, dist_dict, with_labels)\n   5387         elif algorithm in ['Floyd-Warshall-Python', 'Floyd-Warshall-Cython', 'Johnson_Boost']:\n   5388             raise ValueError(\"algorithm '\" + algorithm + \"' works only if all\" +\n-> 5389                              \" eccentricities are needed\")\n   5390 \n   5391         if not isinstance(v, list):\n\nValueError: algorithm 'Johnson_Boost' works only if all eccentricities are needed\n```",
    "created_at": "2020-06-03T09:30:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582978",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:20'></a>You should add a doctest with a weighted graph in boost.

```
sage: from sage.graphs.base.boost_graph import diameter_DHV
sage: G = graphs.CycleGraph(6)
sage: for u, v in G.edges(labels=False):
....:     G.set_edge_label(u, v, 1)
sage: G.set_edge_label(4, 5, -1)
sage: diameter_DHV(G)  # unweighted
3.0
sage: diameter_DHV(G, weight_function=lambda e:e[2])   # weighted 
0.0
```
This last answer is not correct.

Other issues, that were certainly already here.

```
sage: G.diameter(by_weight=True)
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-8-a687234a118b> in <module>()
----> 1 G.diameter(by_weight=True)

/Users/dcoudert/sage/local/lib/python3.7/site-packages/sage/graphs/graph.py in diameter(self, by_weight, algorithm, weight_function, check_weight)
   5612             if by_weight:
   5613                 raise ValueError("algorithm '" + algorithm + "' does not work" +
-> 5614                                  " on weighted graphs")
   5615             from sage.graphs.distances_all_pairs import diameter
   5616             return diameter(self, algorithm=algorithm)

ValueError: algorithm 'iFUB' does not work on weighted graphs
sage: G.diameter(by_weight=True, algorithm='Johnson_Boost')
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-10-8e8a8c6456b1> in <module>()
----> 1 G.diameter(by_weight=True, algorithm='Johnson_Boost')

/Users/dcoudert/sage/local/lib/python3.7/site-packages/sage/graphs/graph.py in diameter(self, by_weight, algorithm, weight_function, check_weight)
   5619                                      weight_function=weight_function,
   5620                                      check_weight=check_weight,
-> 5621                                      algorithm=algorithm))
   5622 
   5623     @doc_index("Distances")

/Users/dcoudert/sage/local/lib/python3.7/site-packages/sage/graphs/graph.py in eccentricity(self, v, by_weight, algorithm, weight_function, check_weight, dist_dict, with_labels)
   5387         elif algorithm in ['Floyd-Warshall-Python', 'Floyd-Warshall-Cython', 'Johnson_Boost']:
   5388             raise ValueError("algorithm '" + algorithm + "' works only if all" +
-> 5389                              " eccentricities are needed")
   5390 
   5391         if not isinstance(v, list):

ValueError: algorithm 'Johnson_Boost' works only if all eccentricities are needed
```



---

archive/issue_comments_582979.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-06-03T09:30:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582979",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_582980.json:
```json
{
    "body": "<a id='comment:21'></a>Replying to [comment:20 dcoudert]:\n> You should add a doctest with a weighted graph in boost.\n> \n> \n> ```\n> sage: from sage.graphs.base.boost_graph import diameter_DHV\n> sage: G = graphs.CycleGraph(6)\n> sage: for u, v in G.edges(labels=False):\n> ....:     G.set_edge_label(u, v, 1)\n> sage: G.set_edge_label(4, 5, -1)\n> sage: diameter_DHV(G)  # unweighted\n> 3.0\n> sage: diameter_DHV(G, weight_function=lambda e:e[2])   # weighted \n> 0.0\n> ```\n> This last answer is not correct.\n> \n\nThis happens because instead of detecting negative cycle, `Bellman-Ford` is returning negative distances :(\n\n```\nsage: from sage.graphs.base.boost_graph import shortest_paths\nsage: G = graphs.CycleGraph(6)\nsage: shortest_paths(G,0, weight_function = lambda e:e[2])[0]\n{0: -2, 1: -1, 2: 0, 3: -3, 4: -4, 5: -5}\n```\nAny suggestion on what should I do for this?\n\n> Other issues, that were certainly already here.\n> \n> ```\n> sage: G.diameter(by_weight=True)\n> ---------------------------------------------------------------------------\n> ValueError                                Traceback (most recent call last)\n> <ipython-input-8-a687234a118b> in <module>()\n> ----> 1 G.diameter(by_weight=True)\n> \n> /Users/dcoudert/sage/local/lib/python3.7/site-packages/sage/graphs/graph.py in diameter(self, by_weight, algorithm, weight_function, check_weight)\n>    5612             if by_weight:\n>    5613                 raise ValueError(\"algorithm '\" + algorithm + \"' does not work\" +\n> -> 5614                                  \" on weighted graphs\")\n>    5615             from sage.graphs.distances_all_pairs import diameter\n>    5616             return diameter(self, algorithm=algorithm)\n> \n> ValueError: algorithm 'iFUB' does not work on weighted graphs\n> sage: G.diameter(by_weight=True, algorithm='Johnson_Boost')\n> ---------------------------------------------------------------------------\n> ValueError                                Traceback (most recent call last)\n> <ipython-input-10-8e8a8c6456b1> in <module>()\n> ----> 1 G.diameter(by_weight=True, algorithm='Johnson_Boost')\n> \n> /Users/dcoudert/sage/local/lib/python3.7/site-packages/sage/graphs/graph.py in diameter(self, by_weight, algorithm, weight_function, check_weight)\n>    5619                                      weight_function=weight_function,\n>    5620                                      check_weight=check_weight,\n> -> 5621                                      algorithm=algorithm))\n>    5622 \n>    5623     @doc_index(\"Distances\")\n> \n> /Users/dcoudert/sage/local/lib/python3.7/site-packages/sage/graphs/graph.py in eccentricity(self, v, by_weight, algorithm, weight_function, check_weight, dist_dict, with_labels)\n>    5387         elif algorithm in ['Floyd-Warshall-Python', 'Floyd-Warshall-Cython', 'Johnson_Boost']:\n>    5388             raise ValueError(\"algorithm '\" + algorithm + \"' works only if all\" +\n> -> 5389                              \" eccentricities are needed\")\n>    5390 \n>    5391         if not isinstance(v, list):\n> \n> ValueError: algorithm 'Johnson_Boost' works only if all eccentricities are needed\n> ```\n\nThis will be fixed by making changes suggested in last comment:37 in #29715",
    "created_at": "2020-06-03T11:26:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582980",
    "user": "https://github.com/vipul79321"
}
```

<a id='comment:21'></a>Replying to [comment:20 dcoudert]:
> You should add a doctest with a weighted graph in boost.
> 
> 
> ```
> sage: from sage.graphs.base.boost_graph import diameter_DHV
> sage: G = graphs.CycleGraph(6)
> sage: for u, v in G.edges(labels=False):
> ....:     G.set_edge_label(u, v, 1)
> sage: G.set_edge_label(4, 5, -1)
> sage: diameter_DHV(G)  # unweighted
> 3.0
> sage: diameter_DHV(G, weight_function=lambda e:e[2])   # weighted 
> 0.0
> ```
> This last answer is not correct.
> 

This happens because instead of detecting negative cycle, `Bellman-Ford` is returning negative distances :(

```
sage: from sage.graphs.base.boost_graph import shortest_paths
sage: G = graphs.CycleGraph(6)
sage: shortest_paths(G,0, weight_function = lambda e:e[2])[0]
{0: -2, 1: -1, 2: 0, 3: -3, 4: -4, 5: -5}
```
Any suggestion on what should I do for this?

> Other issues, that were certainly already here.
> 
> ```
> sage: G.diameter(by_weight=True)
> ---------------------------------------------------------------------------
> ValueError                                Traceback (most recent call last)
> <ipython-input-8-a687234a118b> in <module>()
> ----> 1 G.diameter(by_weight=True)
> 
> /Users/dcoudert/sage/local/lib/python3.7/site-packages/sage/graphs/graph.py in diameter(self, by_weight, algorithm, weight_function, check_weight)
>    5612             if by_weight:
>    5613                 raise ValueError("algorithm '" + algorithm + "' does not work" +
> -> 5614                                  " on weighted graphs")
>    5615             from sage.graphs.distances_all_pairs import diameter
>    5616             return diameter(self, algorithm=algorithm)
> 
> ValueError: algorithm 'iFUB' does not work on weighted graphs
> sage: G.diameter(by_weight=True, algorithm='Johnson_Boost')
> ---------------------------------------------------------------------------
> ValueError                                Traceback (most recent call last)
> <ipython-input-10-8e8a8c6456b1> in <module>()
> ----> 1 G.diameter(by_weight=True, algorithm='Johnson_Boost')
> 
> /Users/dcoudert/sage/local/lib/python3.7/site-packages/sage/graphs/graph.py in diameter(self, by_weight, algorithm, weight_function, check_weight)
>    5619                                      weight_function=weight_function,
>    5620                                      check_weight=check_weight,
> -> 5621                                      algorithm=algorithm))
>    5622 
>    5623     @doc_index("Distances")
> 
> /Users/dcoudert/sage/local/lib/python3.7/site-packages/sage/graphs/graph.py in eccentricity(self, v, by_weight, algorithm, weight_function, check_weight, dist_dict, with_labels)
>    5387         elif algorithm in ['Floyd-Warshall-Python', 'Floyd-Warshall-Cython', 'Johnson_Boost']:
>    5388             raise ValueError("algorithm '" + algorithm + "' works only if all" +
> -> 5389                              " eccentricities are needed")
>    5390 
>    5391         if not isinstance(v, list):
> 
> ValueError: algorithm 'Johnson_Boost' works only if all eccentricities are needed
> ```

This will be fixed by making changes suggested in last comment:37 in #29715



---

archive/issue_comments_582981.json:
```json
{
    "body": "<a id='comment:22'></a>> This happens because instead of detecting negative cycle, `Bellman-Ford` is returning negative distances :(\n> ...\n> Any suggestion on what should I do for this?\n\n\n1) Mention the problem in the meta ticket. 2) Check the documentation of 'Johnson_Boost' in case it can be used to detect negative cycles. Otherwise, we may have to change default algorithm.",
    "created_at": "2020-06-03T12:03:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582981",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:22'></a>> This happens because instead of detecting negative cycle, `Bellman-Ford` is returning negative distances :(
> ...
> Any suggestion on what should I do for this?


1) Mention the problem in the meta ticket. 2) Check the documentation of 'Johnson_Boost' in case it can be used to detect negative cycles. Otherwise, we may have to change default algorithm.



---

archive/issue_comments_582982.json:
```json
{
    "body": "<a id='comment:23'></a>Replying to [comment:22 dcoudert]:\n> > This happens because instead of detecting negative cycle, `Bellman-Ford` is returning negative distances :(\n> > ...\n> > Any suggestion on what should I do for this?\n\n> \n> 1) Mention the problem in the meta ticket. \n\nDone.\\\\\n\n> 2) Check the documentation of 'Johnson_Boost' in case it can be used to detect negative cycles.\\\\\n\nYeah it detects negative cycle properly.\n\nBut we cant use that in our algorithm. We have to find a way to avoid this, smae problem appears here and in `radius_DHV` in #29715.\\\\\n\n- 1).I have one solution,  since this methods are restricted to undirected graphs, why dont we exploit that property, since any edge with negative weight will definitely be a cycle. So raise an error in begining while checking for negative edges?\n\n- 2). or We can try the method, I suggested in #29657.\n\nFinally, whichever method we decide, we have to decide what do we want from our method, when `graph contains negative cycle , as well graph is disconnected`.",
    "created_at": "2020-06-03T17:13:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582982",
    "user": "https://github.com/vipul79321"
}
```

<a id='comment:23'></a>Replying to [comment:22 dcoudert]:
> > This happens because instead of detecting negative cycle, `Bellman-Ford` is returning negative distances :(
> > ...
> > Any suggestion on what should I do for this?

> 
> 1) Mention the problem in the meta ticket. 

Done.\\

> 2) Check the documentation of 'Johnson_Boost' in case it can be used to detect negative cycles.\\

Yeah it detects negative cycle properly.

But we cant use that in our algorithm. We have to find a way to avoid this, smae problem appears here and in `radius_DHV` in #29715.\\

- 1).I have one solution,  since this methods are restricted to undirected graphs, why dont we exploit that property, since any edge with negative weight will definitely be a cycle. So raise an error in begining while checking for negative edges?

- 2). or We can try the method, I suggested in #29657.

Finally, whichever method we decide, we have to decide what do we want from our method, when `graph contains negative cycle , as well graph is disconnected`.



---

archive/issue_comments_582983.json:
```json
{
    "body": "<a id='comment:24'></a>TODO:\n\n- Find a reliable way to detect negative cycle, which can be used in our method.\n\n- Make call to `eccentricity` method from `diameter` method with `v = None`.\n\n- Finally, decide default algorithms.",
    "created_at": "2020-06-03T17:16:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582983",
    "user": "https://github.com/vipul79321"
}
```

<a id='comment:24'></a>TODO:

- Find a reliable way to detect negative cycle, which can be used in our method.

- Make call to `eccentricity` method from `diameter` method with `v = None`.

- Finally, decide default algorithms.



---

archive/issue_comments_582984.json:
```json
{
    "body": "<a id='comment:25'></a>If I understand well, so far we have no algorithm that can be used for weighted undirected graph with at least 1 edge with negative weight. So I propose for this ticket and for #29715 to:\n- raise an error if the graph has an edge with negative weight, and so to remove calls to Bellman-Ford. This way we have a correct implementation for graphs with non-negative weights.\n- Indicate in the todo list of  #29657 that we have this issue. If we are able to find a proper fix, then we will be able to update all methods with this issue at once.",
    "created_at": "2020-06-04T07:34:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582984",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:25'></a>If I understand well, so far we have no algorithm that can be used for weighted undirected graph with at least 1 edge with negative weight. So I propose for this ticket and for #29715 to:
- raise an error if the graph has an edge with negative weight, and so to remove calls to Bellman-Ford. This way we have a correct implementation for graphs with non-negative weights.
- Indicate in the todo list of  #29657 that we have this issue. If we are able to find a proper fix, then we will be able to update all methods with this issue at once.



---

archive/issue_comments_582985.json:
```json
{
    "body": "<a id='comment:26'></a>Replying to [comment:25 dcoudert]:\n> If I understand well, so far we have no algorithm that can be used for weighted undirected graph with at least 1 edge with negative weight. \n\n\nYeah,because a negative edge in Undirected graph will automatically a cycle, because we can move in both direction from that edge and hence a cycle. \nTake a look at this, it might help us.\n[https://stackoverflow.com/questions/14785413/can-we-apply-the-bellman-ford-algorithm-to-an-undirected-graph](https://stackoverflow.com/questions/14785413/can-we-apply-the-bellman-ford-algorithm-to-an-undirected-graph).",
    "created_at": "2020-06-04T08:08:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582985",
    "user": "https://github.com/vipul79321"
}
```

<a id='comment:26'></a>Replying to [comment:25 dcoudert]:
> If I understand well, so far we have no algorithm that can be used for weighted undirected graph with at least 1 edge with negative weight. 


Yeah,because a negative edge in Undirected graph will automatically a cycle, because we can move in both direction from that edge and hence a cycle. 
Take a look at this, it might help us.
[https://stackoverflow.com/questions/14785413/can-we-apply-the-bellman-ford-algorithm-to-an-undirected-graph](https://stackoverflow.com/questions/14785413/can-we-apply-the-bellman-ford-algorithm-to-an-undirected-graph).



---

archive/issue_comments_582986.json:
```json
{
    "body": "<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-04T18:06:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582986",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_582987.json:
```json
{
    "body": "Changing commit from \"0ada5851e8cacae3fcec1325bc9bfb9810c6df13\" to \"9a06bbd64dfa93e3497c7de0a6ff775b3e1d37cc\"",
    "created_at": "2020-06-04T18:06:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582987",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0ada5851e8cacae3fcec1325bc9bfb9810c6df13" to "9a06bbd64dfa93e3497c7de0a6ff775b3e1d37cc"



---

archive/issue_comments_582988.json:
```json
{
    "body": "<a id='comment:28'></a>Replying to [comment:25 dcoudert]:\n> If I understand well, so far we have no algorithm that can be used for weighted undirected graph with at least 1 edge with negative weight. So I propose for this ticket and for #29715 to:\n> - raise an error if the graph has an edge with negative weight, and so to remove calls to Bellman-Ford. This way we have a correct implementation for graphs with non-negative weights.\n> - Indicate in the todo list of  #29657 that we have this issue. If we are able to find a proper fix, then we will be able to update all methods with this issue at once.\n\n\nDone.",
    "created_at": "2020-06-04T18:07:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582988",
    "user": "https://github.com/vipul79321"
}
```

<a id='comment:28'></a>Replying to [comment:25 dcoudert]:
> If I understand well, so far we have no algorithm that can be used for weighted undirected graph with at least 1 edge with negative weight. So I propose for this ticket and for #29715 to:
> - raise an error if the graph has an edge with negative weight, and so to remove calls to Bellman-Ford. This way we have a correct implementation for graphs with non-negative weights.
> - Indicate in the todo list of  #29657 that we have this issue. If we are able to find a proper fix, then we will be able to update all methods with this issue at once.


Done.



---

archive/issue_comments_582989.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-06-04T18:07:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582989",
    "user": "https://github.com/vipul79321"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_582990.json:
```json
{
    "body": "Changing keywords from \"gsoc20\" to \"gsoc2020\".",
    "created_at": "2020-06-05T08:24:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582990",
    "user": "https://github.com/dcoudert"
}
```

Changing keywords from "gsoc20" to "gsoc2020".



---

archive/issue_comments_582991.json:
```json
{
    "body": "<a id='comment:30'></a>LGTM.",
    "created_at": "2020-06-05T08:24:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582991",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:30'></a>LGTM.



---

archive/issue_comments_582992.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-06-05T08:24:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582992",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_582993.json:
```json
{
    "body": "<a id='comment:31'></a>Merge conflict",
    "created_at": "2020-06-21T22:42:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582993",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:31'></a>Merge conflict



---

archive/issue_comments_582994.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-06-21T22:42:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582994",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_582995.json:
```json
{
    "body": "<a id='comment:32'></a>`@`dcoudert, I tried solving the merge conflict using following steps - \n\n1). Firstly, I pulled branch `public/graphs/29744_diameter_DHV` in my local branch `diameter` of develop.\n\n2). Then, on branch `develop`, I ran `git pull` to pull changes from sage git repository.\n\n3). Then, I checked out `diameter` branch and ran `git merge develop`, hoping to get merge conflicts. But It merged cleanly. And is running without any problem.\n\nIs this the right procedure to find merge conflicts?\n\nCan you suggest me something for this?",
    "created_at": "2020-06-22T08:11:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582995",
    "user": "https://github.com/vipul79321"
}
```

<a id='comment:32'></a>`@`dcoudert, I tried solving the merge conflict using following steps - 

1). Firstly, I pulled branch `public/graphs/29744_diameter_DHV` in my local branch `diameter` of develop.

2). Then, on branch `develop`, I ran `git pull` to pull changes from sage git repository.

3). Then, I checked out `diameter` branch and ran `git merge develop`, hoping to get merge conflicts. But It merged cleanly. And is running without any problem.

Is this the right procedure to find merge conflicts?

Can you suggest me something for this?



---

archive/issue_comments_582996.json:
```json
{
    "body": "<a id='comment:33'></a>We have to wait for the next beta to see the conflict.\nTickets are accepted and merged into the develop branch for next beta in a certain order.\nThe radius ticket has been merged and it adds the references to Dragan. This might be the issue. So we will have to modify this ticket accordingly. This is for the same reason that we are waiting for the finalization of the eccentricity ticket.",
    "created_at": "2020-06-22T08:20:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582996",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:33'></a>We have to wait for the next beta to see the conflict.
Tickets are accepted and merged into the develop branch for next beta in a certain order.
The radius ticket has been merged and it adds the references to Dragan. This might be the issue. So we will have to modify this ticket accordingly. This is for the same reason that we are waiting for the finalization of the eccentricity ticket.



---

archive/issue_comments_582997.json:
```json
{
    "body": "<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-27T17:12:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582997",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_582998.json:
```json
{
    "body": "Changing commit from \"9a06bbd64dfa93e3497c7de0a6ff775b3e1d37cc\" to \"d33b7808fac7b8a42411e554a62dcde75734fc69\"",
    "created_at": "2020-06-27T17:12:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582998",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9a06bbd64dfa93e3497c7de0a6ff775b3e1d37cc" to "d33b7808fac7b8a42411e554a62dcde75734fc69"



---

archive/issue_comments_582999.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-06-27T17:14:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-582999",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_583000.json:
```json
{
    "body": "<a id='comment:35'></a>I fix merge conflict with 9.2.beta2. Please check that everything is working well.",
    "created_at": "2020-06-27T17:14:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-583000",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:35'></a>I fix merge conflict with 9.2.beta2. Please check that everything is working well.



---

archive/issue_comments_583001.json:
```json
{
    "body": "<a id='comment:36'></a>Replying to [comment:35 dcoudert]:\n> I fix merge conflict with 9.2.beta2. Please check that everything is working well.\n\n\nI have checked boundary cases. It looks good to me.",
    "created_at": "2020-06-30T07:25:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-583001",
    "user": "https://github.com/vipul79321"
}
```

<a id='comment:36'></a>Replying to [comment:35 dcoudert]:
> I fix merge conflict with 9.2.beta2. Please check that everything is working well.


I have checked boundary cases. It looks good to me.



---

archive/issue_comments_583002.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-06-30T08:32:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-583002",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_583003.json:
```json
{
    "body": "<a id='comment:37'></a>LGTM.\n\nthe pycodestyle warnings reported by the patchbot are fixed in #29804",
    "created_at": "2020-06-30T08:32:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-583003",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:37'></a>LGTM.

the pycodestyle warnings reported by the patchbot are fixed in #29804



---

archive/issue_comments_583004.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-07-04T19:13:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-583004",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_583005.json:
```json
{
    "body": "<a id='comment:38'></a>Merge conflict",
    "created_at": "2020-07-04T19:13:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-583005",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:38'></a>Merge conflict



---

archive/issue_comments_583006.json:
```json
{
    "body": "Changing commit from \"d33b7808fac7b8a42411e554a62dcde75734fc69\" to \"f2557a81df67ef5df8133c5784891fe4ee927e35\"",
    "created_at": "2020-07-08T07:08:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-583006",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d33b7808fac7b8a42411e554a62dcde75734fc69" to "f2557a81df67ef5df8133c5784891fe4ee927e35"



---

archive/issue_comments_583007.json:
```json
{
    "body": "<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-08T07:08:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-583007",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_583008.json:
```json
{
    "body": "<a id='comment:40'></a>Replying to [comment:39 git]:\n> Branch pushed to git repo; I updated commit sha1. New commits:\n> |                                                                                                                                           |                                                                                               |\n> |-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------|\n> |[95d669a](https://git.sagemath.org/sage.git/commit/?id=95d669a09c3272680c08c5029018ec069643a71f)|`Merge branch 'public/graphs/29744_diameter_DHV' of git://trac.sagemath.org/sage into diameter`|\n> |[f2557a8](https://git.sagemath.org/sage.git/commit/?id=f2557a81df67ef5df8133c5784891fe4ee927e35)|`minor documentation change`|\n\n\nDone some minor change in documentation.\n\nMerge conflict still to be solved in next release",
    "created_at": "2020-07-08T07:09:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-583008",
    "user": "https://github.com/vipul79321"
}
```

<a id='comment:40'></a>Replying to [comment:39 git]:
> Branch pushed to git repo; I updated commit sha1. New commits:
> |                                                                                                                                           |                                                                                               |
> |-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------|
> |[95d669a](https://git.sagemath.org/sage.git/commit/?id=95d669a09c3272680c08c5029018ec069643a71f)|`Merge branch 'public/graphs/29744_diameter_DHV' of git://trac.sagemath.org/sage into diameter`|
> |[f2557a8](https://git.sagemath.org/sage.git/commit/?id=f2557a81df67ef5df8133c5784891fe4ee927e35)|`minor documentation change`|


Done some minor change in documentation.

Merge conflict still to be solved in next release



---

archive/issue_comments_583009.json:
```json
{
    "body": "<a id='comment:41'></a>OK, let's wait for next beta to see the issue.",
    "created_at": "2020-07-08T07:18:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-583009",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:41'></a>OK, let's wait for next beta to see the issue.



---

archive/issue_comments_583010.json:
```json
{
    "body": "Changing commit from \"f2557a81df67ef5df8133c5784891fe4ee927e35\" to \"97c2b1bf6422f9b1f46d460cce048bb25353c78a\"",
    "created_at": "2020-07-14T16:05:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-583010",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f2557a81df67ef5df8133c5784891fe4ee927e35" to "97c2b1bf6422f9b1f46d460cce048bb25353c78a"



---

archive/issue_comments_583011.json:
```json
{
    "body": "<a id='comment:42'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-14T16:05:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-583011",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:42'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_583012.json:
```json
{
    "body": "<a id='comment:43'></a>Replying to [comment:42 git]:\n> Branch pushed to git repo; I updated commit sha1. New commits:\n> |                                                                                                                                           |                      |\n> |-------------------------------------------------------------------------------------------------------------------------------------------|----------------------|\n> |[97c2b1b](https://git.sagemath.org/sage.git/commit/?id=97c2b1bf6422f9b1f46d460cce048bb25353c78a)|`fixed merge conflict`|\n\n\nFixed merge conflict with 9.2beta5",
    "created_at": "2020-07-14T16:06:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-583012",
    "user": "https://github.com/vipul79321"
}
```

<a id='comment:43'></a>Replying to [comment:42 git]:
> Branch pushed to git repo; I updated commit sha1. New commits:
> |                                                                                                                                           |                      |
> |-------------------------------------------------------------------------------------------------------------------------------------------|----------------------|
> |[97c2b1b](https://git.sagemath.org/sage.git/commit/?id=97c2b1bf6422f9b1f46d460cce048bb25353c78a)|`fixed merge conflict`|


Fixed merge conflict with 9.2beta5



---

archive/issue_comments_583013.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-07-14T16:06:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-583013",
    "user": "https://github.com/vipul79321"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_583014.json:
```json
{
    "body": "Changing commit from \"97c2b1bf6422f9b1f46d460cce048bb25353c78a\" to \"3eed5849912893e1e9d6e8ec9ca0f1400091369b\"",
    "created_at": "2020-07-15T08:20:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-583014",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "97c2b1bf6422f9b1f46d460cce048bb25353c78a" to "3eed5849912893e1e9d6e8ec9ca0f1400091369b"



---

archive/issue_comments_583015.json:
```json
{
    "body": "<a id='comment:45'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-15T08:20:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-583015",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:45'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_583016.json:
```json
{
    "body": "<a id='comment:46'></a>I did a minor change because in ticket #30145 I'm preparing the deprecation of `edge_iterator`. \n\nLGTM",
    "created_at": "2020-07-15T08:22:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-583016",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:46'></a>I did a minor change because in ticket #30145 I'm preparing the deprecation of `edge_iterator`. 

LGTM



---

archive/issue_comments_583017.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-07-15T08:22:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-583017",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_583018.json:
```json
{
    "body": "Changing branch from \"public/graphs/29744_diameter_DHV\" to \"3eed5849912893e1e9d6e8ec9ca0f1400091369b\"",
    "created_at": "2020-07-19T07:24:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-583018",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/graphs/29744_diameter_DHV" to "3eed5849912893e1e9d6e8ec9ca0f1400091369b"



---

archive/issue_events_076104.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-07-19T07:24:23Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29744#event-76104"
}
```



---

archive/issue_comments_583019.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-07-19T07:24:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29744#issuecomment-583019",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
