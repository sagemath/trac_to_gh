# Issue 29524: bug with rational input in IntegerVectors

archive/issues_029287.json:
```json
{
    "assignees": [],
    "body": "As reported on [ask](https://ask.sagemath.org/question/50814/error-with-rational-input-in-integervectors/), we have the following unexpected behavior of IntegerVectors:\n\n```\nsage: IntegerVectors(2,3).list()\n[[2, 0, 0], [1, 1, 0], [1, 0, 1], [0, 2, 0], [0, 1, 1], [0, 0, 2]]\nsage: IntegerVectors(2,3/1).list()\n[[2, 0, 0], [1, 1, 0]]\n```\nThe relevant code block in the implementation of IntegerVectors seems to be the following:\n\n```\n    try:\n        return IntegerVectors_nnondescents(n, tuple(k))\n    except TypeError:\n        pass\n\n    return IntegerVectors_nk(n, k)\n```\nFor k=3/1 one has that tuple(k) does not give a TypeError (as opposed to tuple(3)) and thus the code never tries to interpret k as an integer.\n\n```\nsage: tuple(3/1)\n(3,)\nsage: tuple(3)\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-2-35e4067a6e17> in <module>()\n----> 1 tuple(Integer(3))\n\nTypeError: 'sage.rings.integer.Integer' object is not iterable\n```\n\nBranch/Commit: **[f189063](https://github.com/sagemath/sagetrac-mirror/commit/f18906328a305e3ae29819694ea21c06e010f8ec)**\n\nReviewer: **Fr\u00e9d\u00e9ric Chapoton**\n\nAuthor: **Vincent Delecroix**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29524_\n\n",
    "closed_at": "2020-04-22T20:52:28Z",
    "created_at": "2020-04-17T19:29:14Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "bug with rational input in IntegerVectors",
    "type": "issue",
    "updated_at": "2020-04-22T20:52:28Z",
    "url": "https://github.com/sagemath/sage/issues/29524",
    "user": "https://github.com/videlec"
}
```
As reported on [ask](https://ask.sagemath.org/question/50814/error-with-rational-input-in-integervectors/), we have the following unexpected behavior of IntegerVectors:

```
sage: IntegerVectors(2,3).list()
[[2, 0, 0], [1, 1, 0], [1, 0, 1], [0, 2, 0], [0, 1, 1], [0, 0, 2]]
sage: IntegerVectors(2,3/1).list()
[[2, 0, 0], [1, 1, 0]]
```
The relevant code block in the implementation of IntegerVectors seems to be the following:

```
    try:
        return IntegerVectors_nnondescents(n, tuple(k))
    except TypeError:
        pass

    return IntegerVectors_nk(n, k)
```
For k=3/1 one has that tuple(k) does not give a TypeError (as opposed to tuple(3)) and thus the code never tries to interpret k as an integer.

```
sage: tuple(3/1)
(3,)
sage: tuple(3)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-2-35e4067a6e17> in <module>()
----> 1 tuple(Integer(3))

TypeError: 'sage.rings.integer.Integer' object is not iterable
```

Branch/Commit: **[f189063](https://github.com/sagemath/sagetrac-mirror/commit/f18906328a305e3ae29819694ea21c06e010f8ec)**

Reviewer: **Frédéric Chapoton**

Author: **Vincent Delecroix**

_Issue created by migration from https://trac.sagemath.org/ticket/29524_





---

archive/issue_events_387831.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-04-17T19:29:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29524",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29524#event-387831"
}
```



---

archive/issue_events_387832.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-04-17T19:29:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29524",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "component: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29524#event-387832"
}
```



---

archive/issue_events_387833.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-04-17T19:29:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29524",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29524#event-387833"
}
```



---

archive/issue_events_387834.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-04-17T19:29:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29524",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29524#event-387834"
}
```



---

archive/issue_comments_467224.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -17,3 +17,15 @@\n     return IntegerVectors_nk(n, k)\n ```\n For k=3/1 one has that tuple(k) does not give a TypeError (as opposed to tuple(3)) and thus the code never tries to interpret k as an integer.\n+\n+```\n+sage: tuple(3/1)\n+(3,)\n+sage: tuple(3)\n+---------------------------------------------------------------------------\n+TypeError                                 Traceback (most recent call last)\n+<ipython-input-2-35e4067a6e17> in <module>()\n+----> 1 tuple(Integer(3))\n+\n+TypeError: 'sage.rings.integer.Integer' object is not iterable\n+```\n``````\n",
    "created_at": "2020-04-17T19:39:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29524#issuecomment-467224",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -17,3 +17,15 @@
     return IntegerVectors_nk(n, k)
 ```
 For k=3/1 one has that tuple(k) does not give a TypeError (as opposed to tuple(3)) and thus the code never tries to interpret k as an integer.
+
+```
+sage: tuple(3/1)
+(3,)
+sage: tuple(3)
+---------------------------------------------------------------------------
+TypeError                                 Traceback (most recent call last)
+<ipython-input-2-35e4067a6e17> in <module>()
+----> 1 tuple(Integer(3))
+
+TypeError: 'sage.rings.integer.Integer' object is not iterable
+```
``````




---

archive/issue_comments_467225.json:
```json
{
    "body": "Branch: **[public/29524](https://github.com/sagemath/sagetrac-mirror/tree/public/29524)**",
    "created_at": "2020-04-17T19:59:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29524#issuecomment-467225",
    "user": "https://github.com/videlec"
}
```

Branch: **[public/29524](https://github.com/sagemath/sagetrac-mirror/tree/public/29524)**



---

archive/issue_comments_467226.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cd6ba09b1134ed211b6388ce6ae70c0426bcd059\">cd6ba09</a></td><td><code>29524: more care with input of IntegerVectors</code></td></tr></table>\n",
    "created_at": "2020-04-17T19:59:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29524#issuecomment-467226",
    "user": "https://github.com/videlec"
}
```

<div id="comment:2" align="right">Comment 2</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cd6ba09b1134ed211b6388ce6ae70c0426bcd059">cd6ba09</a></td><td><code>29524: more care with input of IntegerVectors</code></td></tr></table>




---

archive/issue_events_387835.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-04-17T19:59:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29524",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29524#event-387835"
}
```



---

archive/issue_comments_467227.json:
```json
{
    "body": "Commit: **[cd6ba09](https://github.com/sagemath/sagetrac-mirror/commit/cd6ba09b1134ed211b6388ce6ae70c0426bcd059)**",
    "created_at": "2020-04-17T19:59:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29524#issuecomment-467227",
    "user": "https://github.com/videlec"
}
```

Commit: **[cd6ba09](https://github.com/sagemath/sagetrac-mirror/commit/cd6ba09b1134ed211b6388ce6ae70c0426bcd059)**



---

archive/issue_comments_467228.json:
```json
{
    "body": "Author: **Vincent Delecroix**",
    "created_at": "2020-04-17T19:59:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29524#issuecomment-467228",
    "user": "https://github.com/videlec"
}
```

Author: **Vincent Delecroix**



---

archive/issue_comments_467229.json:
```json
{
    "body": "Changed commit from **[cd6ba09](https://github.com/sagemath/sagetrac-mirror/commit/cd6ba09b1134ed211b6388ce6ae70c0426bcd059)** to **[f189063](https://github.com/sagemath/sagetrac-mirror/commit/f18906328a305e3ae29819694ea21c06e010f8ec)**",
    "created_at": "2020-04-18T11:34:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29524#issuecomment-467229",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[cd6ba09](https://github.com/sagemath/sagetrac-mirror/commit/cd6ba09b1134ed211b6388ce6ae70c0426bcd059)** to **[f189063](https://github.com/sagemath/sagetrac-mirror/commit/f18906328a305e3ae29819694ea21c06e010f8ec)**



---

archive/issue_comments_467230.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f18906328a305e3ae29819694ea21c06e010f8ec\">f189063</a></td><td><code>fix division in tableau.py</code></td></tr></table>\n",
    "created_at": "2020-04-18T11:34:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29524#issuecomment-467230",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3" align="right">Comment 3</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f18906328a305e3ae29819694ea21c06e010f8ec">f189063</a></td><td><code>fix division in tableau.py</code></td></tr></table>




---

archive/issue_comments_467231.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nwhat is this \"numbers\" module ? why is this better than \"k in ZZ\" ?",
    "created_at": "2020-04-18T16:21:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29524#issuecomment-467231",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:4" align="right">Comment 4</div>

what is this "numbers" module ? why is this better than "k in ZZ" ?



---

archive/issue_comments_467232.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nReplying to [@fchapoton](#comment%3A4):\n> what is this \"numbers\" module ?\n\nThis is standard Python [PEP 3141](https://www.python.org/dev/peps/pep-3141/) see also [the documentation here](https://docs.python.org/3/library/numbers.html).\n\n> why is this better than \"k in ZZ\" ?\n\nI never said it was better. But it is certainly more Pythonic.",
    "created_at": "2020-04-18T16:50:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29524#issuecomment-467232",
    "user": "https://github.com/videlec"
}
```

<div id="comment:5" align="right">Comment 5</div>

Replying to [@fchapoton](#comment%3A4):
> what is this "numbers" module ?

This is standard Python [PEP 3141](https://www.python.org/dev/peps/pep-3141/) see also [the documentation here](https://docs.python.org/3/library/numbers.html).

> why is this better than "k in ZZ" ?

I never said it was better. But it is certainly more Pythonic.



---

archive/issue_events_387836.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-04-19T10:08:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29524",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29524#event-387836"
}
```



---

archive/issue_events_387837.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-04-19T10:08:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29524",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29524#event-387837"
}
```



---

archive/issue_comments_467233.json:
```json
{
    "body": "Reviewer: **Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2020-04-19T10:08:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29524#issuecomment-467233",
    "user": "https://github.com/fchapoton"
}
```

Reviewer: **Frédéric Chapoton**



---

archive/issue_comments_467234.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nok, then",
    "created_at": "2020-04-19T10:08:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29524#issuecomment-467234",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:6" align="right">Comment 6</div>

ok, then



---

archive/issue_comments_467235.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nMerci.",
    "created_at": "2020-04-19T10:09:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29524#issuecomment-467235",
    "user": "https://github.com/videlec"
}
```

<div id="comment:7" align="right">Comment 7</div>

Merci.



---

archive/issue_comments_467236.json:
```json
{
    "body": "Changed branch from **[public/29524](https://github.com/sagemath/sagetrac-mirror/tree/public/29524)** to **[f189063](https://github.com/sagemath/sagetrac-mirror/commit/f18906328a305e3ae29819694ea21c06e010f8ec)**",
    "created_at": "2020-04-22T20:52:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29524#issuecomment-467236",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/29524](https://github.com/sagemath/sagetrac-mirror/tree/public/29524)** to **[f189063](https://github.com/sagemath/sagetrac-mirror/commit/f18906328a305e3ae29819694ea21c06e010f8ec)**



---

archive/issue_events_387838.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-22T20:52:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29524",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29524#event-387838"
}
```



---

archive/issue_events_387839.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "bc4b0ec1f9c246e307524b3b543bf9f7d33c430c",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-04-22T20:52:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29524",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29524#event-387839"
}
```
