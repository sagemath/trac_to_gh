# Issue 29417: tox.ini, GitHub CI workflow - minor fixes, more homebrew configuration factors, improve docker interface

archive/issues_029180.json:
```json
{
    "body": "This makes the following changes to tox.ini:\n- `tox -e local-homebrew-macos-standard` now uses python3 from homebrew.\n\n   This attempts to reproduce the environment of https://groups.google.com/d/msg/sage-release/kU5M1QVuQQY/Zu10Q-CKAwAJ\n\n- `tox -e local-homebrew-macos-standard-python3_xcode` uses `/usr/bin/python3` (was the old default)\n\n- `tox -e local-homebrew-macos-standard-python3_pythonorg` uses the Python 3.7 installation from the binary package from python.org\n\nNew toolchain factors: `gcc_spkg`, `gcc_9`.\n\nImproved docker interface.\n\n\nCC:  @jhpalmieri @dimpase @orlitzky @kliem @vbraun\n\nBranch/Commit: b7bb418343ab34c77a10af6d0f725111ba780662\n\nReviewer: Dima Pasechnik\n\nAuthor: Matthias Koeppe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29417\n\n",
    "closed_at": "2020-04-19T19:25:17Z",
    "created_at": "2020-03-27T17:06:56Z",
    "labels": [
        "component: porting"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "tox.ini, GitHub CI workflow - minor fixes, more homebrew configuration factors, improve docker interface",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29417",
    "user": "https://github.com/mkoeppe"
}
```
This makes the following changes to tox.ini:
- `tox -e local-homebrew-macos-standard` now uses python3 from homebrew.

   This attempts to reproduce the environment of https://groups.google.com/d/msg/sage-release/kU5M1QVuQQY/Zu10Q-CKAwAJ

- `tox -e local-homebrew-macos-standard-python3_xcode` uses `/usr/bin/python3` (was the old default)

- `tox -e local-homebrew-macos-standard-python3_pythonorg` uses the Python 3.7 installation from the binary package from python.org

New toolchain factors: `gcc_spkg`, `gcc_9`.

Improved docker interface.


CC:  @jhpalmieri @dimpase @orlitzky @kliem @vbraun

Branch/Commit: b7bb418343ab34c77a10af6d0f725111ba780662

Reviewer: Dima Pasechnik

Author: Matthias Koeppe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29417





---

archive/issue_comments_440192.json:
```json
{
    "body": "<a id='comment:3'></a>Last 10 new commits:",
    "created_at": "2020-03-28T15:47:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440192",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>Last 10 new commits:



---

archive/issue_comments_440193.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-28T15:59:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440193",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_440194.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2020-03-30T19:44:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440194",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_440195.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-30T20:01:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440195",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_440196.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-30T20:09:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440196",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_440197.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,14 @@\n+This makes the following changes to tox.ini:\n+- \\`tox -e local-homebrew-macos-standard\\` now uses python3 from homebrew.\n+\n+   This attempts to reproduce the environment of https://groups.google.com/d/msg/sage-release/kU5M1QVuQQY/Zu10Q-CKAwAJ\n+\n+- \\`tox -e local-homebrew-macos-standard-python3_xcode\\` uses \\`/usr/bin/python3\\` (was the old default)\n+\n+- \\`tox -e local-homebrew-macos-standard-python3_pythonorg\\` uses the Python 3.7 installation from the binary package from python.org\n+\n+New toolchain factors: \\`gcc_spkg\\`, \\`gcc_9\\`.\n+\n \n \n Comment: 1\n```\n",
    "created_at": "2020-03-30T20:24:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440197",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,14 @@
+This makes the following changes to tox.ini:
+- \`tox -e local-homebrew-macos-standard\` now uses python3 from homebrew.
+
+   This attempts to reproduce the environment of https://groups.google.com/d/msg/sage-release/kU5M1QVuQQY/Zu10Q-CKAwAJ
+
+- \`tox -e local-homebrew-macos-standard-python3_xcode\` uses \`/usr/bin/python3\` (was the old default)
+
+- \`tox -e local-homebrew-macos-standard-python3_pythonorg\` uses the Python 3.7 installation from the binary package from python.org
+
+New toolchain factors: \`gcc_spkg\`, \`gcc_9\`.
+
 
 
 Comment: 1
```




---

archive/issue_comments_440198.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2020-03-30T22:07:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440198",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_440199.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-31T13:46:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440199",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_440200.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-02T16:13:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440200",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_440201.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-02T16:39:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440201",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_440202.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-02T21:00:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440202",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_440203.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-03T17:15:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440203",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_440204.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-03T19:19:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440204",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_440205.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-03T22:49:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440205",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_440206.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-04T21:02:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440206",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_440207.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-05T21:06:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440207",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_440208.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-08T01:26:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440208",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_440209.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,15 @@\n+This makes the following changes to tox.ini:\n+- \\`tox -e local-homebrew-macos-standard\\` now uses python3 from homebrew.\n+\n+   This attempts to reproduce the environment of https://groups.google.com/d/msg/sage-release/kU5M1QVuQQY/Zu10Q-CKAwAJ\n+\n+- \\`tox -e local-homebrew-macos-standard-python3_xcode\\` uses \\`/usr/bin/python3\\` (was the old default)\n+\n+- \\`tox -e local-homebrew-macos-standard-python3_pythonorg\\` uses the Python 3.7 installation from the binary package from python.org\n+\n+New toolchain factors: \\`gcc_spkg\\`, \\`gcc_9\\`.\n+\n+Improved docker interface.\n \n \n Comment: 1\n```\n",
    "created_at": "2020-04-08T01:30:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440209",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,15 @@
+This makes the following changes to tox.ini:
+- \`tox -e local-homebrew-macos-standard\` now uses python3 from homebrew.
+
+   This attempts to reproduce the environment of https://groups.google.com/d/msg/sage-release/kU5M1QVuQQY/Zu10Q-CKAwAJ
+
+- \`tox -e local-homebrew-macos-standard-python3_xcode\` uses \`/usr/bin/python3\` (was the old default)
+
+- \`tox -e local-homebrew-macos-standard-python3_pythonorg\` uses the Python 3.7 installation from the binary package from python.org
+
+New toolchain factors: \`gcc_spkg\`, \`gcc_9\`.
+
+Improved docker interface.
 
 
 Comment: 1
```




---

archive/issue_comments_440210.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-04-08T01:30:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440210",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_440211.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-08T13:02:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440211",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_440212.json:
```json
{
    "body": "<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-08T13:53:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440212",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_440213.json:
```json
{
    "body": "<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-08T19:33:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440213",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_440214.json:
```json
{
    "body": "<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-09T18:35:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440214",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_440215.json:
```json
{
    "body": "<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-09T18:39:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440215",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_440216.json:
```json
{
    "body": "<a id='comment:29'></a>Do you know how to resolve this? Is this resolved already?\n\n```\n Error processing tar file(exit status 1): write /sage/local/share/doc/sage/html/en/reference/modsym/sage/modular/modsym/relation_matrix_pyx.html: no space left on device\nERROR: InvocationError: '/usr/bin/docker build . -f /home/runner/work/sage-test-27122/sage-test-27122/.tox/docker-ubuntu-trusty-standard/Dockerfile --build-arg EXTRA_CONFIGURE_ARGS=   --build-arg BASE_IMAGE=ubuntu:trusty --build-arg USE_MAKEFLAGS=-k V=0 SAGE_NUM_THREADS=3 --build-arg TARGETS=build ptest'\n___________________________________ summary ____________________________________\nERROR:   docker-ubuntu-trusty-standard: commands failed\n##[error]Process completed with exit code 1.\n```\n\nThis appears to be the reason that every single test is marked as failed, which is kind of annoying.\n\n[https://github.com/kliem/sage-test-27122/actions/runs/72102779](https://github.com/kliem/sage-test-27122/actions/runs/72102779)",
    "created_at": "2020-04-09T19:20:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440216",
    "user": "https://github.com/kliem"
}
```

<a id='comment:29'></a>Do you know how to resolve this? Is this resolved already?

```
 Error processing tar file(exit status 1): write /sage/local/share/doc/sage/html/en/reference/modsym/sage/modular/modsym/relation_matrix_pyx.html: no space left on device
ERROR: InvocationError: '/usr/bin/docker build . -f /home/runner/work/sage-test-27122/sage-test-27122/.tox/docker-ubuntu-trusty-standard/Dockerfile --build-arg EXTRA_CONFIGURE_ARGS=   --build-arg BASE_IMAGE=ubuntu:trusty --build-arg USE_MAKEFLAGS=-k V=0 SAGE_NUM_THREADS=3 --build-arg TARGETS=build ptest'
___________________________________ summary ____________________________________
ERROR:   docker-ubuntu-trusty-standard: commands failed
##[error]Process completed with exit code 1.
```

This appears to be the reason that every single test is marked as failed, which is kind of annoying.

[https://github.com/kliem/sage-test-27122/actions/runs/72102779](https://github.com/kliem/sage-test-27122/actions/runs/72102779)



---

archive/issue_comments_440217.json:
```json
{
    "body": "<a id='comment:30'></a>Replying to [comment:29 gh-kliem]:\n> Do you know how to resolve this? Is this resolved already?\n> \n> \n> ```\n>  Error processing tar file(exit status 1): write /sage/local/share/doc/sage/html/en/reference/modsym/sage/modular/modsym/relation_matrix_pyx.html: no space left on device\n> ERROR: InvocationError: '/usr/bin/docker build . -f /home/runner/work/sage-test-27122/sage-test-27122/.tox/docker-ubuntu-trusty-standard/Dockerfile --build-arg EXTRA_CONFIGURE_ARGS=   --build-arg BASE_IMAGE=ubuntu:trusty --build-arg USE_MAKEFLAGS=-k V=0 SAGE_NUM_THREADS=3 --build-arg TARGETS=build ptest'\n> ___________________________________ summary ____________________________________\n> ERROR:   docker-ubuntu-trusty-standard: commands failed\n> ##[error]Process completed with exit code 1.\n> ```\n\n\nHelp with this would be most welcome!\n\nI have the following browser tabs open, which should help with finding a solution. Essentially, one needs to reconfigure the docker daemon to use  larger `dm.basesize`. \n\nDocker - Using systemd to control the Docker daemon\nhttps://success.docker.com/article/using-systemd-to-control-the-docker-daemon\n\n\"systemctl set-property docker\" - Google Search\nhttps://www.google.com/search?safe=off&biw=834&bih=836&sxsrf=ALeKk02AnzFOj0bspN6PGW6rKhDhhp3f4w%3A1586407757228&ei=TamOXtqxDYKWtQW5zr3YBA&q=%22systemctl+set-property+docker%22&oq=%22systemctl+set-property+docker%22&gs_lcp=CgZwc3ktYWIQAzIECAAQHjoECAAQRzoGCAAQFhAeSgkIFxIFMTItNjJKCAgYEgQxMi00UNOnAVi1rQFg2a8BaABwAngAgAF4iAHlAZIBAzAuMpgBAKABAaoBB2d3cy13aXo&sclient=psy-ab&ved=0ahUKEwiajNq2xdroAhUCS60KHTlnD0s4ChDh1QMIDA&uact=5\n\nDocker - How to resolve Resource Temporarily Unavailable errors due to TaskMax setting\nhttps://success.docker.com/article/how-to-reserve-resource-temporarily-unavailable-errors-due-to-tasksmax-setting\n\n\"systemctl status docker.service\" dm.basesize - Google Search\nhttps://www.google.com/search?safe=off&sxsrf=ALeKk01dBCgUutnZt6DU3HHzqaJyqDfA_w%3A1586408161041&ei=4aqOXpKKAtHKswXerrtY&q=%22systemctl+status+docker.service%22+dm.basesize&oq=%22systemctl+status+docker.service%22+dm.basesize&gs_lcp=CgZwc3ktYWIQAzIFCCEQoAE6BAgAEEc6BggAEBYQHjoFCAAQzQI6CAghEBYQHRAeSgoIFxIGMTItMTE0SgkIGBIFMTItMThQpp4DWN7FA2DvyANoBHADeACAAaIBiAHcD5IBBDAuMTWYAQCgAQGqAQdnd3Mtd2l6&sclient=psy-ab&ved=0ahUKEwjS_qD3xtroAhVR5awKHV7XDgsQ4dUDCAw&uact=5\n\nCannot Change Docker Size on Ubuntu 16.04 - DevOps Stack Exchange\nhttps://devops.stackexchange.com/questions/4062/cannot-change-docker-size-on-ubuntu-16-04\n\nuggds/vagrant-docker\nhttps://github.com/uggds/vagrant-docker\n\nCan't install Docker - Cloudera Community\nhttps://community.cloudera.com/t5/Support-Questions/Can-t-install-Docker/td-p/205969\n\ndocker disk size - Google Search\nhttps://www.google.com/search?safe=off&sxsrf=ALeKk02gDtblI6DspE7pP0chAR0f7lCuJQ%3A1586404959534&ei=X56OXs-YIMHisAWJ-rWwBg&q=docker+disk+size&oq=docker+disk+size&gs_lcp=CgZwc3ktYWIQAzICCAAyBggAEAcQHjIGCAAQBxAeMgYIABAHEB4yAggAMgYIABAHEB4yBggAEAcQHjIGCAAQBxAeMgYIABAHEB4yAggAOgQIABBHOgYIABAFEB46CAgAEAcQBRAeOgQIABANOggIABAHEAoQHjoICAAQCBAHEB5KEAgXEgwxMC0yMTJnMTg0ZzdKDAgYEggxMC0xZzJnMlDhZVjfdGDjeGgDcAJ4AIAB4gGIAfwNkgEFMC40LjWYAQCgAQGqAQdnd3Mtd2l6&sclient=psy-ab&ved=0ahUKEwiPxNSAu9roAhVBMawKHQl9DWYQ4dUDCAw&uact=5\n\nelasticsearch - Disk size of a docker image - Stack Overflow\nhttps://stackoverflow.com/questions/48751032/disk-size-of-a-docker-image\n\ndockerd | Docker Documentation\nhttps://docs.docker.com/engine/reference/commandline/dockerd/\n\nvirtual-environments/Ubuntu1804-README.md at master \u00b7 actions/virtual-environments\nhttps://github.com/actions/virtual-environments/blob/master/images/linux/Ubuntu1804-README.md\n\nDocker Engine 18.09 release notes | Docker Documentation\nhttps://docs.docker.com/engine/release-notes/18.09/\n\nsystemctl(1) \u2014 systemd \u2014 Debian jessie \u2014 Debian Manpages\nhttps://manpages.debian.org/jessie/systemd/systemctl.1.en.html",
    "created_at": "2020-04-09T19:24:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440217",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:30'></a>Replying to [comment:29 gh-kliem]:
> Do you know how to resolve this? Is this resolved already?
> 
> 
> ```
>  Error processing tar file(exit status 1): write /sage/local/share/doc/sage/html/en/reference/modsym/sage/modular/modsym/relation_matrix_pyx.html: no space left on device
> ERROR: InvocationError: '/usr/bin/docker build . -f /home/runner/work/sage-test-27122/sage-test-27122/.tox/docker-ubuntu-trusty-standard/Dockerfile --build-arg EXTRA_CONFIGURE_ARGS=   --build-arg BASE_IMAGE=ubuntu:trusty --build-arg USE_MAKEFLAGS=-k V=0 SAGE_NUM_THREADS=3 --build-arg TARGETS=build ptest'
> ___________________________________ summary ____________________________________
> ERROR:   docker-ubuntu-trusty-standard: commands failed
> ##[error]Process completed with exit code 1.
> ```


Help with this would be most welcome!

I have the following browser tabs open, which should help with finding a solution. Essentially, one needs to reconfigure the docker daemon to use  larger `dm.basesize`. 

Docker - Using systemd to control the Docker daemon
https://success.docker.com/article/using-systemd-to-control-the-docker-daemon

"systemctl set-property docker" - Google Search
https://www.google.com/search?safe=off&biw=834&bih=836&sxsrf=ALeKk02AnzFOj0bspN6PGW6rKhDhhp3f4w%3A1586407757228&ei=TamOXtqxDYKWtQW5zr3YBA&q=%22systemctl+set-property+docker%22&oq=%22systemctl+set-property+docker%22&gs_lcp=CgZwc3ktYWIQAzIECAAQHjoECAAQRzoGCAAQFhAeSgkIFxIFMTItNjJKCAgYEgQxMi00UNOnAVi1rQFg2a8BaABwAngAgAF4iAHlAZIBAzAuMpgBAKABAaoBB2d3cy13aXo&sclient=psy-ab&ved=0ahUKEwiajNq2xdroAhUCS60KHTlnD0s4ChDh1QMIDA&uact=5

Docker - How to resolve Resource Temporarily Unavailable errors due to TaskMax setting
https://success.docker.com/article/how-to-reserve-resource-temporarily-unavailable-errors-due-to-tasksmax-setting

"systemctl status docker.service" dm.basesize - Google Search
https://www.google.com/search?safe=off&sxsrf=ALeKk01dBCgUutnZt6DU3HHzqaJyqDfA_w%3A1586408161041&ei=4aqOXpKKAtHKswXerrtY&q=%22systemctl+status+docker.service%22+dm.basesize&oq=%22systemctl+status+docker.service%22+dm.basesize&gs_lcp=CgZwc3ktYWIQAzIFCCEQoAE6BAgAEEc6BggAEBYQHjoFCAAQzQI6CAghEBYQHRAeSgoIFxIGMTItMTE0SgkIGBIFMTItMThQpp4DWN7FA2DvyANoBHADeACAAaIBiAHcD5IBBDAuMTWYAQCgAQGqAQdnd3Mtd2l6&sclient=psy-ab&ved=0ahUKEwjS_qD3xtroAhVR5awKHV7XDgsQ4dUDCAw&uact=5

Cannot Change Docker Size on Ubuntu 16.04 - DevOps Stack Exchange
https://devops.stackexchange.com/questions/4062/cannot-change-docker-size-on-ubuntu-16-04

uggds/vagrant-docker
https://github.com/uggds/vagrant-docker

Can't install Docker - Cloudera Community
https://community.cloudera.com/t5/Support-Questions/Can-t-install-Docker/td-p/205969

docker disk size - Google Search
https://www.google.com/search?safe=off&sxsrf=ALeKk02gDtblI6DspE7pP0chAR0f7lCuJQ%3A1586404959534&ei=X56OXs-YIMHisAWJ-rWwBg&q=docker+disk+size&oq=docker+disk+size&gs_lcp=CgZwc3ktYWIQAzICCAAyBggAEAcQHjIGCAAQBxAeMgYIABAHEB4yAggAMgYIABAHEB4yBggAEAcQHjIGCAAQBxAeMgYIABAHEB4yAggAOgQIABBHOgYIABAFEB46CAgAEAcQBRAeOgQIABANOggIABAHEAoQHjoICAAQCBAHEB5KEAgXEgwxMC0yMTJnMTg0ZzdKDAgYEggxMC0xZzJnMlDhZVjfdGDjeGgDcAJ4AIAB4gGIAfwNkgEFMC40LjWYAQCgAQGqAQdnd3Mtd2l6&sclient=psy-ab&ved=0ahUKEwiPxNSAu9roAhVBMawKHQl9DWYQ4dUDCAw&uact=5

elasticsearch - Disk size of a docker image - Stack Overflow
https://stackoverflow.com/questions/48751032/disk-size-of-a-docker-image

dockerd | Docker Documentation
https://docs.docker.com/engine/reference/commandline/dockerd/

virtual-environments/Ubuntu1804-README.md at master · actions/virtual-environments
https://github.com/actions/virtual-environments/blob/master/images/linux/Ubuntu1804-README.md

Docker Engine 18.09 release notes | Docker Documentation
https://docs.docker.com/engine/release-notes/18.09/

systemctl(1) — systemd — Debian jessie — Debian Manpages
https://manpages.debian.org/jessie/systemd/systemctl.1.en.html



---

archive/issue_comments_440218.json:
```json
{
    "body": "<a id='comment:31'></a>This looks really complicated. I'm afraid this is way above what I know.\n\nDoes this help?\n\nhttps://github.community/t5/GitHub-Actions/BUG-Strange-quot-No-space-left-on-device-quot-IOExceptions-on/m-p/47691#M6920",
    "created_at": "2020-04-09T19:59:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440218",
    "user": "https://github.com/kliem"
}
```

<a id='comment:31'></a>This looks really complicated. I'm afraid this is way above what I know.

Does this help?

https://github.community/t5/GitHub-Actions/BUG-Strange-quot-No-space-left-on-device-quot-IOExceptions-on/m-p/47691#M6920



---

archive/issue_comments_440219.json:
```json
{
    "body": "<a id='comment:32'></a>No worries - at least I was able to close this browser window now!",
    "created_at": "2020-04-09T21:17:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440219",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:32'></a>No worries - at least I was able to close this browser window now!



---

archive/issue_comments_440220.json:
```json
{
    "body": "<a id='comment:33'></a>It appears that the solution in the link I provided, is fixing at least part of the problem.\n\nI have put this \n\n```diff\n       - uses: actions/checkout@v2\n+      - name: free disk space\n+        run: |\n+          sudo swapoff -a\n+          sudo rm -f /swapfile\n+          sudo apt clean\n+          docker rmi $(docker image ls -aq)\n+          df -h\n       - name: Install test prerequisites\n```\nin the debian/ubuntu in `.github/workflows/tox.yml` and it seems to help. There are green checkmarks again. E.g. debian-jessie minimal passes [https://github.com/kliem/sage-test-27122/actions/runs/75035611](https://github.com/kliem/sage-test-27122/actions/runs/75035611), which previously had that `no space left on disk` error.\n\nNow many of minimal runs pass, but the standards show error messages as\n\n```\nThe command '/bin/sh -c make SAGE_SPKG=\"sage-spkg -y -o\" ${USE_MAKEFLAGS} ${TARGETS}' returned a non-zero code: 2\nERROR: InvocationError: '/bin/bash -c for docker_target in with-targets; do  docker build . -f /home/runner/work/sage-test-27122/sage-test-27122/.tox/docker-debian-jessie-standard/Dockerfile  --target $docker_target  --tag sage-docker-debian-jessie-standard-$docker_target:$(git describe --dirty --always)  --build-arg EXTRA_CONFIGURE_ARGS=\"  \"  --build-arg BASE_IMAGE=debian:jessie  --build-arg TARGETS_PRE=sagelib-build-deps  --build-arg TARGETS=build  --build-arg USE_MAKEFLAGS=\"-k V=0 SAGE_NUM_THREADS=3\" --build-arg TARGETS=\"build ptest\"; done'\n```",
    "created_at": "2020-04-10T12:56:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440220",
    "user": "https://github.com/kliem"
}
```

<a id='comment:33'></a>It appears that the solution in the link I provided, is fixing at least part of the problem.

I have put this 

```diff
       - uses: actions/checkout@v2
+      - name: free disk space
+        run: |
+          sudo swapoff -a
+          sudo rm -f /swapfile
+          sudo apt clean
+          docker rmi $(docker image ls -aq)
+          df -h
       - name: Install test prerequisites
```
in the debian/ubuntu in `.github/workflows/tox.yml` and it seems to help. There are green checkmarks again. E.g. debian-jessie minimal passes [https://github.com/kliem/sage-test-27122/actions/runs/75035611](https://github.com/kliem/sage-test-27122/actions/runs/75035611), which previously had that `no space left on disk` error.

Now many of minimal runs pass, but the standards show error messages as

```
The command '/bin/sh -c make SAGE_SPKG="sage-spkg -y -o" ${USE_MAKEFLAGS} ${TARGETS}' returned a non-zero code: 2
ERROR: InvocationError: '/bin/bash -c for docker_target in with-targets; do  docker build . -f /home/runner/work/sage-test-27122/sage-test-27122/.tox/docker-debian-jessie-standard/Dockerfile  --target $docker_target  --tag sage-docker-debian-jessie-standard-$docker_target:$(git describe --dirty --always)  --build-arg EXTRA_CONFIGURE_ARGS="  "  --build-arg BASE_IMAGE=debian:jessie  --build-arg TARGETS_PRE=sagelib-build-deps  --build-arg TARGETS=build  --build-arg USE_MAKEFLAGS="-k V=0 SAGE_NUM_THREADS=3" --build-arg TARGETS="build ptest"; done'
```



---

archive/issue_comments_440221.json:
```json
{
    "body": "<a id='comment:34'></a>In the link they also cleanup old artifacts\n\n```\n    - name: cleanup old action artifacts\n      run: .github/workflows/purge_artifacts.sh ${{ secrets.REPO_ACCESS_TOKEN }}\n```\n\nI don't know what this is for. But maybe that is also helpful.",
    "created_at": "2020-04-10T12:59:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440221",
    "user": "https://github.com/kliem"
}
```

<a id='comment:34'></a>In the link they also cleanup old artifacts

```
    - name: cleanup old action artifacts
      run: .github/workflows/purge_artifacts.sh ${{ secrets.REPO_ACCESS_TOKEN }}
```

I don't know what this is for. But maybe that is also helpful.



---

archive/issue_comments_440222.json:
```json
{
    "body": "<a id='comment:35'></a>That is probably the expected behavior when not all tests pass.\n\nReplying to [comment:33 gh-kliem]:\n> \n> \n> ```\n> The command '/bin/sh -c make SAGE_SPKG=\"sage-spkg -y -o\" ${USE_MAKEFLAGS} ${TARGETS}' returned a non-zero code: 2\n> ERROR: InvocationError: '/bin/bash -c for docker_target in with-targets; do  docker build . -f /home/runner/work/sage-test-27122/sage-test-27122/.tox/docker-debian-jessie-standard/Dockerfile  --target $docker_target  --tag sage-docker-debian-jessie-standard-$docker_target:$(git describe --dirty --always)  --build-arg EXTRA_CONFIGURE_ARGS=\"  \"  --build-arg BASE_IMAGE=debian:jessie  --build-arg TARGETS_PRE=sagelib-build-deps  --build-arg TARGETS=build  --build-arg USE_MAKEFLAGS=\"-k V=0 SAGE_NUM_THREADS=3\" --build-arg TARGETS=\"build ptest\"; done'\n> ```",
    "created_at": "2020-04-10T13:18:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440222",
    "user": "https://github.com/kliem"
}
```

<a id='comment:35'></a>That is probably the expected behavior when not all tests pass.

Replying to [comment:33 gh-kliem]:
> 
> 
> ```
> The command '/bin/sh -c make SAGE_SPKG="sage-spkg -y -o" ${USE_MAKEFLAGS} ${TARGETS}' returned a non-zero code: 2
> ERROR: InvocationError: '/bin/bash -c for docker_target in with-targets; do  docker build . -f /home/runner/work/sage-test-27122/sage-test-27122/.tox/docker-debian-jessie-standard/Dockerfile  --target $docker_target  --tag sage-docker-debian-jessie-standard-$docker_target:$(git describe --dirty --always)  --build-arg EXTRA_CONFIGURE_ARGS="  "  --build-arg BASE_IMAGE=debian:jessie  --build-arg TARGETS_PRE=sagelib-build-deps  --build-arg TARGETS=build  --build-arg USE_MAKEFLAGS="-k V=0 SAGE_NUM_THREADS=3" --build-arg TARGETS="build ptest"; done'
> ```



---

archive/issue_comments_440223.json:
```json
{
    "body": "<a id='comment:36'></a>Replying to [comment:35 gh-kliem]:\n> That is probably the expected behavior when not all tests pass.\n> \n> Replying to [comment:33 gh-kliem]:\n> > \n> > \n> > ```\n> > The command '/bin/sh -c make SAGE_SPKG=\"sage-spkg -y -o\" ${USE_MAKEFLAGS} ${TARGETS}' returned a non-zero code: 2\n> > ERROR: InvocationError: '/bin/bash -c for docker_target in with-targets; do  docker build . -f /home/runner/work/sage-test-27122/sage-test-27122/.tox/docker-debian-jessie-standard/Dockerfile  --target $docker_target  --tag sage-docker-debian-jessie-standard-$docker_target:$(git describe --dirty --always)  --build-arg EXTRA_CONFIGURE_ARGS=\"  \"  --build-arg BASE_IMAGE=debian:jessie  --build-arg TARGETS_PRE=sagelib-build-deps  --build-arg TARGETS=build  --build-arg USE_MAKEFLAGS=\"-k V=0 SAGE_NUM_THREADS=3\" --build-arg TARGETS=\"build ptest\"; done'\n> > ```\n\n\nYes, this is expected behavior.\n\nBut it would perhaps be better to change it so that the docker build succeeds if there are only testsuite failures",
    "created_at": "2020-04-10T15:13:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440223",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:36'></a>Replying to [comment:35 gh-kliem]:
> That is probably the expected behavior when not all tests pass.
> 
> Replying to [comment:33 gh-kliem]:
> > 
> > 
> > ```
> > The command '/bin/sh -c make SAGE_SPKG="sage-spkg -y -o" ${USE_MAKEFLAGS} ${TARGETS}' returned a non-zero code: 2
> > ERROR: InvocationError: '/bin/bash -c for docker_target in with-targets; do  docker build . -f /home/runner/work/sage-test-27122/sage-test-27122/.tox/docker-debian-jessie-standard/Dockerfile  --target $docker_target  --tag sage-docker-debian-jessie-standard-$docker_target:$(git describe --dirty --always)  --build-arg EXTRA_CONFIGURE_ARGS="  "  --build-arg BASE_IMAGE=debian:jessie  --build-arg TARGETS_PRE=sagelib-build-deps  --build-arg TARGETS=build  --build-arg USE_MAKEFLAGS="-k V=0 SAGE_NUM_THREADS=3" --build-arg TARGETS="build ptest"; done'
> > ```


Yes, this is expected behavior.

But it would perhaps be better to change it so that the docker build succeeds if there are only testsuite failures



---

archive/issue_comments_440224.json:
```json
{
    "body": "<a id='comment:37'></a>Replying to [comment:36 mkoeppe]:\n> But it would perhaps be better to change it so that the docker build succeeds if there are only testsuite failures\n\n\nWorking on a solution for this.",
    "created_at": "2020-04-10T17:04:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440224",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:37'></a>Replying to [comment:36 mkoeppe]:
> But it would perhaps be better to change it so that the docker build succeeds if there are only testsuite failures


Working on a solution for this.



---

archive/issue_comments_440225.json:
```json
{
    "body": "<a id='comment:38'></a>I think the above thing with the disk space is more important.\n\nI like the green check marks, because then I can just trust that everything worked fine. However,\nit would still be nice, if one can quickly access which tests failed. But maybe that is non-trivial and then that's just the way it is.\n\nAlso I still hope that very soon we will have most of the runs clean either way.",
    "created_at": "2020-04-10T18:20:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440225",
    "user": "https://github.com/kliem"
}
```

<a id='comment:38'></a>I think the above thing with the disk space is more important.

I like the green check marks, because then I can just trust that everything worked fine. However,
it would still be nice, if one can quickly access which tests failed. But maybe that is non-trivial and then that's just the way it is.

Also I still hope that very soon we will have most of the runs clean either way.



---

archive/issue_comments_440226.json:
```json
{
    "body": "<a id='comment:39'></a>Replying to [comment:38 gh-kliem]:\n> I think the above thing with the disk space is more important.\n\n\nYes, I'm trying out your patch",
    "created_at": "2020-04-10T18:25:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440226",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:39'></a>Replying to [comment:38 gh-kliem]:
> I think the above thing with the disk space is more important.


Yes, I'm trying out your patch



---

archive/issue_comments_440227.json:
```json
{
    "body": "<a id='comment:40'></a>Maybe one could have failing doctests communicated as neutral runs (according to github this is also a possible state). I don't know how much work it would be to accomplish this, but it would be really nice. Than one knows at the first glance what's going on.",
    "created_at": "2020-04-10T19:09:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440227",
    "user": "https://github.com/kliem"
}
```

<a id='comment:40'></a>Maybe one could have failing doctests communicated as neutral runs (according to github this is also a possible state). I don't know how much work it would be to accomplish this, but it would be really nice. Than one knows at the first glance what's going on.



---

archive/issue_comments_440228.json:
```json
{
    "body": "<a id='comment:41'></a>I don't think it is supported anymore [https://help.github.com/en/actions/building-actions/setting-exit-codes-for-actions](https://help.github.com/en/actions/building-actions/setting-exit-codes-for-actions)\n\nI rather have failed tests as failure so that one has to check the details. Otherwise we might overlook critical failing tests.",
    "created_at": "2020-04-10T19:18:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440228",
    "user": "https://github.com/kliem"
}
```

<a id='comment:41'></a>I don't think it is supported anymore [https://help.github.com/en/actions/building-actions/setting-exit-codes-for-actions](https://help.github.com/en/actions/building-actions/setting-exit-codes-for-actions)

I rather have failed tests as failure so that one has to check the details. Otherwise we might overlook critical failing tests.



---

archive/issue_comments_440229.json:
```json
{
    "body": "<a id='comment:42'></a>Replying to [comment:41 gh-kliem]:\n> I rather have failed tests as failure so that one has to check the details. Otherwise we might overlook critical failing tests.\n\nIn the branch that I'm testing right now this is conveniently configurable",
    "created_at": "2020-04-11T00:14:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440229",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:42'></a>Replying to [comment:41 gh-kliem]:
> I rather have failed tests as failure so that one has to check the details. Otherwise we might overlook critical failing tests.

In the branch that I'm testing right now this is conveniently configurable



---

archive/issue_comments_440230.json:
```json
{
    "body": "<a id='comment:43'></a>A preview at https://github.com/mkoeppe/sage/actions/runs/75739694",
    "created_at": "2020-04-11T16:39:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440230",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:43'></a>A preview at https://github.com/mkoeppe/sage/actions/runs/75739694



---

archive/issue_comments_440231.json:
```json
{
    "body": "<a id='comment:44'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-11T16:53:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440231",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:44'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_440232.json:
```json
{
    "body": "<a id='comment:45'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-12T05:13:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440232",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:45'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_440233.json:
```json
{
    "body": "<a id='comment:46'></a>Running at https://github.com/mkoeppe/sage/actions/runs/76368041",
    "created_at": "2020-04-12T07:26:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440233",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:46'></a>Running at https://github.com/mkoeppe/sage/actions/runs/76368041



---

archive/issue_comments_440234.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-04-12T16:04:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440234",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_440235.json:
```json
{
    "body": "<a id='comment:48'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-12T17:38:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440235",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:48'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_440236.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-04-12T17:39:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440236",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_440237.json:
```json
{
    "body": "<a id='comment:50'></a>This now seems to work very well. https://github.com/mkoeppe/sage/actions/runs/76629492\n\nFailing `TARGETS_OPTIONAL` (default = `ptest`) do not abort the build. These show as green checkmarks in the left pane, but for all failing doctest logs (both packages and sagelib ptest) also a yellow \"Check warning\" is displayed as annotation in the right pane.\n\nBy setting `TARGETS_OPTIONAL` to include names of optional packages, we can also test these in the same way.",
    "created_at": "2020-04-13T00:04:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440237",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:50'></a>This now seems to work very well. https://github.com/mkoeppe/sage/actions/runs/76629492

Failing `TARGETS_OPTIONAL` (default = `ptest`) do not abort the build. These show as green checkmarks in the left pane, but for all failing doctest logs (both packages and sagelib ptest) also a yellow "Check warning" is displayed as annotation in the right pane.

By setting `TARGETS_OPTIONAL` to include names of optional packages, we can also test these in the same way.



---

archive/issue_comments_440238.json:
```json
{
    "body": "<a id='comment:52'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-13T05:33:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440238",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:52'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_440239.json:
```json
{
    "body": "<a id='comment:53'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2020-04-13T05:34:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440239",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:53'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_440240.json:
```json
{
    "body": "<a id='comment:54'></a>Rebased on 9.1.rc0",
    "created_at": "2020-04-13T05:34:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440240",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:54'></a>Rebased on 9.1.rc0



---

archive/issue_comments_440241.json:
```json
{
    "body": "<a id='comment:55'></a>Test for 9.1.rc0 running at https://github.com/mkoeppe/sage/actions/runs/76923542",
    "created_at": "2020-04-13T15:44:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440241",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:55'></a>Test for 9.1.rc0 running at https://github.com/mkoeppe/sage/actions/runs/76923542



---

archive/issue_comments_440242.json:
```json
{
    "body": "<a id='comment:56'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-13T17:20:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440242",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:56'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_440243.json:
```json
{
    "body": "<a id='comment:57'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-15T01:24:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440243",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:57'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_440244.json:
```json
{
    "body": "<a id='comment:58'></a>Can we finalize the review of this one please to get it into 9.1?",
    "created_at": "2020-04-15T01:24:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440244",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:58'></a>Can we finalize the review of this one please to get it into 9.1?



---

archive/issue_comments_440245.json:
```json
{
    "body": "<a id='comment:59'></a>running GH Actions tests on this here: https://github.com/dimpase/sage/pull/3",
    "created_at": "2020-04-15T01:55:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440245",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:59'></a>running GH Actions tests on this here: https://github.com/dimpase/sage/pull/3



---

archive/issue_comments_440246.json:
```json
{
    "body": "<a id='comment:60'></a>Replying to [comment:59 dimpase]:\n> running GH Actions tests on this here: https://github.com/dimpase/sage/pull/3\n\n\nI see\n\n```\n/Users/runner/runners/2.168.0/work/sage/sage/build/bin/sage-venv \"/Users/runner/runners/2.168.0/work/sage/sage/.tox/local-homebrew-macos-python3_pythonorg-standard/local\"\n2020-04-15T16:31:11.9205990Z /bin/sh: /Library/Frameworks/Python.framework/Versions/3.7/bin/python3: No such file or directory\n2020-04-15T16:31:11.9206560Z make[1]: *** [/Users/runner/runners/2.168.0/work/sage/sage/.tox/local-homebrew-macos-python3_pythonorg-standard/local/pyvenv.cfg] Error 127\n2020-04-15T16:31:11.9207060Z make[1]: Target `doc-html' not remade because of errors.\n```\nthere. Isn't this ticked supposed to be fixing this?",
    "created_at": "2020-04-15T17:44:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440246",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:60'></a>Replying to [comment:59 dimpase]:
> running GH Actions tests on this here: https://github.com/dimpase/sage/pull/3


I see

```
/Users/runner/runners/2.168.0/work/sage/sage/build/bin/sage-venv "/Users/runner/runners/2.168.0/work/sage/sage/.tox/local-homebrew-macos-python3_pythonorg-standard/local"
2020-04-15T16:31:11.9205990Z /bin/sh: /Library/Frameworks/Python.framework/Versions/3.7/bin/python3: No such file or directory
2020-04-15T16:31:11.9206560Z make[1]: *** [/Users/runner/runners/2.168.0/work/sage/sage/.tox/local-homebrew-macos-python3_pythonorg-standard/local/pyvenv.cfg] Error 127
2020-04-15T16:31:11.9207060Z make[1]: Target `doc-html' not remade because of errors.
```
there. Isn't this ticked supposed to be fixing this?



---

archive/issue_comments_440247.json:
```json
{
    "body": "<a id='comment:61'></a>Thanks for catching this. Turns out I forgot to install the python.org python3 in tox.yml.\n(This cannot be done in tox.ini because it is not relocatable, see comment there)",
    "created_at": "2020-04-15T18:17:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440247",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:61'></a>Thanks for catching this. Turns out I forgot to install the python.org python3 in tox.yml.
(This cannot be done in tox.ini because it is not relocatable, see comment there)



---

archive/issue_comments_440248.json:
```json
{
    "body": "<a id='comment:62'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-15T18:38:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440248",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:62'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_440249.json:
```json
{
    "body": "<a id='comment:63'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-15T18:42:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440249",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:63'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_440250.json:
```json
{
    "body": "<a id='comment:64'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-15T21:10:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440250",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:64'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_440251.json:
```json
{
    "body": "<a id='comment:65'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-16T02:13:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440251",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:65'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_440252.json:
```json
{
    "body": "<a id='comment:66'></a>next try here: https://github.com/dimpase/sage/pull/4",
    "created_at": "2020-04-16T08:02:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440252",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:66'></a>next try here: https://github.com/dimpase/sage/pull/4



---

archive/issue_comments_440253.json:
```json
{
    "body": "<a id='comment:67'></a>`homebrew-macos-python3_pythonorg, standard` (https://github.com/dimpase/sage/runs/591414002) crashes at `[dochtml]` stage - not sure whether one can get complete `logs/dochtml.log` file from GitHub run above",
    "created_at": "2020-04-17T15:55:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440253",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:67'></a>`homebrew-macos-python3_pythonorg, standard` (https://github.com/dimpase/sage/runs/591414002) crashes at `[dochtml]` stage - not sure whether one can get complete `logs/dochtml.log` file from GitHub run above



---

archive/issue_comments_440254.json:
```json
{
    "body": "<a id='comment:68'></a>I presume that various errors on local-macos `standard` runs are to be debugged individually. \n\ne.g. on https://github.com/dimpase/sage/runs/591413919 (homebrew-macos-python3_xcode, minimal) I see `##[error] ==== ERROR IN LOG FILE artifacts/logs-commit-8bb28ec8ffd6869c6b86e3f5224333decb049d09-tox-local-homebrew-macos-python3_xcode-minimal/log/pkgs/gc-7.6.4.p0.log ====` and\n`Warning: Error testing package gc-7.6.4.p0 (ignored)`",
    "created_at": "2020-04-17T16:03:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440254",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:68'></a>I presume that various errors on local-macos `standard` runs are to be debugged individually. 

e.g. on https://github.com/dimpase/sage/runs/591413919 (homebrew-macos-python3_xcode, minimal) I see `##[error] ==== ERROR IN LOG FILE artifacts/logs-commit-8bb28ec8ffd6869c6b86e3f5224333decb049d09-tox-local-homebrew-macos-python3_xcode-minimal/log/pkgs/gc-7.6.4.p0.log ====` and
`Warning: Error testing package gc-7.6.4.p0 (ignored)`



---

archive/issue_comments_440255.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-04-17T16:03:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440255",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_440256.json:
```json
{
    "body": "<a id='comment:69'></a>Thanks!",
    "created_at": "2020-04-17T16:21:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440256",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:69'></a>Thanks!



---

archive/issue_comments_440257.json:
```json
{
    "body": "<a id='comment:70'></a>Yes, errors are to be fixed on their own tickets.",
    "created_at": "2020-04-17T16:21:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440257",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:70'></a>Yes, errors are to be fixed on their own tickets.



---

archive/issue_comments_440258.json:
```json
{
    "body": "<a id='comment:71'></a>Some of the errors are actually \"only\" testsuite failures. Tickets such as #29501 clean up some of the messages.",
    "created_at": "2020-04-17T16:23:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440258",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:71'></a>Some of the errors are actually "only" testsuite failures. Tickets such as #29501 clean up some of the messages.



---

archive/issue_comments_440259.json:
```json
{
    "body": "<a id='comment:72'></a>Replying to [comment:67 dimpase]:\n> `homebrew-macos-python3_pythonorg, standard` (https://github.com/dimpase/sage/runs/591414002) crashes at `[dochtml]` stage - not sure whether one can get complete `logs/dochtml.log` file from GitHub run above\n\n\nYes, download the log artifact.  But it only says \n\n```\n------------------------------------------------------------------------\n(no backtrace available)\n------------------------------------------------------------------------\nUnhandled SIGSEGV: A segmentation fault occurred.\nThis probably occurred because a *compiled* module has a bug\nin it and is not properly wrapped with sig_on(), sig_off().\nPython will now terminate.\n------------------------------------------------------------------------\n/Users/runner/runners/2.169.0/work/sage/sage/src/bin/sage-python: line 2: 14003 Segmentation fault: 11  sage -python \"$@\"\n```",
    "created_at": "2020-04-17T16:27:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440259",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:72'></a>Replying to [comment:67 dimpase]:
> `homebrew-macos-python3_pythonorg, standard` (https://github.com/dimpase/sage/runs/591414002) crashes at `[dochtml]` stage - not sure whether one can get complete `logs/dochtml.log` file from GitHub run above


Yes, download the log artifact.  But it only says 

```
------------------------------------------------------------------------
(no backtrace available)
------------------------------------------------------------------------
Unhandled SIGSEGV: A segmentation fault occurred.
This probably occurred because a *compiled* module has a bug
in it and is not properly wrapped with sig_on(), sig_off().
Python will now terminate.
------------------------------------------------------------------------
/Users/runner/runners/2.169.0/work/sage/sage/src/bin/sage-python: line 2: 14003 Segmentation fault: 11  sage -python "$@"
```



---

archive/issue_events_074986.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-19T19:25:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29417#event-74986"
}
```



---

archive/issue_comments_440260.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-04-19T19:25:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29417",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29417#issuecomment-440260",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
