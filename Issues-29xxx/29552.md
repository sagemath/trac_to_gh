# Issue 29552: Upgrade giac to 1.5.0-87

archive/issues_029315.json:
```json
{
    "body": "www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/\n\n(from #29521)\n\nPrevious updates:\n\n#26315 Upgrade to Giac 1.5\n#28101 update giac to 1.5.0-63\n\n\nCC:  @antonio-rojas @dimpase @frederichan-IMJPRG parisse @slel @infinity0 @saraedum @tobihan @timokau @kiwifb @mwageringel\n\nKeywords: giac\n\nBranch/Commit: eb7995f997cb53baa572bfd8543dfb2b887bcf2e\n\nWork Issues: merge #29171\n\nReviewer: Dima Pasechnik\n\nAuthor: Matthias Koeppe\n\nDependencies: #29521, #29171\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29552\n\n",
    "closed_at": "2020-08-26T21:17:55Z",
    "created_at": "2020-04-23T06:05:37Z",
    "labels": [
        "component: packages: standard",
        "blocker"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Upgrade giac to 1.5.0-87",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29552",
    "user": "https://github.com/mkoeppe"
}
```
www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/

(from #29521)

Previous updates:

#26315 Upgrade to Giac 1.5
#28101 update giac to 1.5.0-63


CC:  @antonio-rojas @dimpase @frederichan-IMJPRG parisse @slel @infinity0 @saraedum @tobihan @timokau @kiwifb @mwageringel

Keywords: giac

Branch/Commit: eb7995f997cb53baa572bfd8543dfb2b887bcf2e

Work Issues: merge #29171

Reviewer: Dima Pasechnik

Author: Matthias Koeppe

Dependencies: #29521, #29171

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29552





---

archive/issue_comments_577703.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#29521\"",
    "created_at": "2020-04-23T06:05:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577703",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#29521"



---

archive/issue_comments_577704.json:
```json
{
    "body": "<a id='comment:2'></a>\n1.6.0 is out, causing a few test failures:\n\n```\nage -t --long /usr/lib/python3.8/site-packages/sage/calculus/calculus.py\n**********************************************************************\nFile \"/usr/lib/python3.8/site-packages/sage/calculus/calculus.py\", line 1534, in sage.calculus.calculus.laplace\nFailed example:\n    laplace(heaviside(t-1), t, s, algorithm='giac')\nExpected:\n    e^(-s)/s\nGot:\n    0\n**********************************************************************\nFile \"/usr/lib/python3.8/site-packages/sage/calculus/calculus.py\", line 1548, in sage.calculus.calculus.laplace\nFailed example:\n    laplace(5*cos(3*t-2)*heaviside(t-2), t, s, algorithm='giac')\nExpected:\n    5*(s*cos(4)*e^(-2*s) - 3*e^(-2*s)*sin(4))/(s^2 + 9)\nGot:\n    0\n**********************************************************************\n1 item had failures:\n   2 of  40 in sage.calculus.calculus.laplace\n    [418 tests, 2 failures, 9.18 s]\nsage -t --long /usr/lib/python3.8/site-packages/sage/interfaces/giac.py\n**********************************************************************\nFile \"/usr/lib/python3.8/site-packages/sage/interfaces/giac.py\", line 41, in sage.interfaces.giac\nFailed example:\n    giac.factor('x^5 - y^5')\nExpected:\n    (x-y)*(x^4+x^3*y+x^2*y^2+x*y^3+y^4)\nGot:\n    (x-y)*(x^2+(-sqrt(5)+1)/2*x*y+y^2)*(x^2+(sqrt(5)+1)/2*x*y+y^2)\n**********************************************************************\nFile \"/usr/lib/python3.8/site-packages/sage/interfaces/giac.py\", line 83, in sage.interfaces.giac\nFailed example:\n    giac('factor(x^5-1)')\nExpected:\n    (x-1)*(x^4+x^3+x^2+x+1)\nGot:\n    (x-1)*(x^2+(-sqrt(5)+1)/2*x+1)*(x^2+(sqrt(5)+1)/2*x+1)\n**********************************************************************\nFile \"/usr/lib/python3.8/site-packages/sage/interfaces/giac.py\", line 95, in sage.interfaces.giac\nFailed example:\n    giac('(x^5-1)').factor()\nExpected:\n    (x-1)*(x^4+x^3+x^2+x+1)\nGot:\n    (x-1)*(x^2+(-sqrt(5)+1)/2*x+1)*(x^2+(sqrt(5)+1)/2*x+1)\n**********************************************************************\nFile \"/usr/lib/python3.8/site-packages/sage/interfaces/giac.py\", line 626, in sage.interfaces.giac.Giac.eval\nFailed example:\n    giac(s)\nExpected:\n    (x)->[x+1,x+2]\nGot:\n    (x)->{ \n      x+1;  \n      x+2;  \n    }\n**********************************************************************\nFile \"/usr/lib/python3.8/site-packages/sage/interfaces/giac.py\", line 995, in sage.interfaces.giac.GiacElement._latex_\nFailed example:\n    print(latex(giac('(x^4 - y)/(y^2-3*x)')))\nExpected:\n    \"\\frac{(x^{4}-y)}{(y^{2}-3\\cdot x)}\"\nGot:\n    \"\\frac{x^{4}-y}{y^{2}-3 x}\"\n**********************************************************************\n3 items had failures:\n   3 of  24 in sage.interfaces.giac\n   1 of   6 in sage.interfaces.giac.Giac.eval\n   1 of   2 in sage.interfaces.giac.GiacElement._latex_\n    [167 tests, 5 failures, 3.34 s]\n----------------------------------------------------------------------\nsage -t --long /usr/lib/python3.8/site-packages/sage/calculus/calculus.py  # 2 doctests failed\nsage -t --long /usr/lib/python3.8/site-packages/sage/interfaces/giac.py  # 5 doctests failed\n----------------------------------------------------------------------\n```\n\nThe ones in `interfaces/giac.py` just need the tests updated, the `calculus/calculus.py` failures are an upstream issue\n\n```\n1>> laplace(Heaviside(x-1),x,s)\nWarning: piecewise indefinite integration does not return a continuous antiderivative\n0\n// Time 0\n```",
    "created_at": "2020-07-09T10:51:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577704",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:2'></a>
1.6.0 is out, causing a few test failures:

```
age -t --long /usr/lib/python3.8/site-packages/sage/calculus/calculus.py
**********************************************************************
File "/usr/lib/python3.8/site-packages/sage/calculus/calculus.py", line 1534, in sage.calculus.calculus.laplace
Failed example:
    laplace(heaviside(t-1), t, s, algorithm='giac')
Expected:
    e^(-s)/s
Got:
    0
**********************************************************************
File "/usr/lib/python3.8/site-packages/sage/calculus/calculus.py", line 1548, in sage.calculus.calculus.laplace
Failed example:
    laplace(5*cos(3*t-2)*heaviside(t-2), t, s, algorithm='giac')
Expected:
    5*(s*cos(4)*e^(-2*s) - 3*e^(-2*s)*sin(4))/(s^2 + 9)
Got:
    0
**********************************************************************
1 item had failures:
   2 of  40 in sage.calculus.calculus.laplace
    [418 tests, 2 failures, 9.18 s]
sage -t --long /usr/lib/python3.8/site-packages/sage/interfaces/giac.py
**********************************************************************
File "/usr/lib/python3.8/site-packages/sage/interfaces/giac.py", line 41, in sage.interfaces.giac
Failed example:
    giac.factor('x^5 - y^5')
Expected:
    (x-y)*(x^4+x^3*y+x^2*y^2+x*y^3+y^4)
Got:
    (x-y)*(x^2+(-sqrt(5)+1)/2*x*y+y^2)*(x^2+(sqrt(5)+1)/2*x*y+y^2)
**********************************************************************
File "/usr/lib/python3.8/site-packages/sage/interfaces/giac.py", line 83, in sage.interfaces.giac
Failed example:
    giac('factor(x^5-1)')
Expected:
    (x-1)*(x^4+x^3+x^2+x+1)
Got:
    (x-1)*(x^2+(-sqrt(5)+1)/2*x+1)*(x^2+(sqrt(5)+1)/2*x+1)
**********************************************************************
File "/usr/lib/python3.8/site-packages/sage/interfaces/giac.py", line 95, in sage.interfaces.giac
Failed example:
    giac('(x^5-1)').factor()
Expected:
    (x-1)*(x^4+x^3+x^2+x+1)
Got:
    (x-1)*(x^2+(-sqrt(5)+1)/2*x+1)*(x^2+(sqrt(5)+1)/2*x+1)
**********************************************************************
File "/usr/lib/python3.8/site-packages/sage/interfaces/giac.py", line 626, in sage.interfaces.giac.Giac.eval
Failed example:
    giac(s)
Expected:
    (x)->[x+1,x+2]
Got:
    (x)->{ 
      x+1;  
      x+2;  
    }
**********************************************************************
File "/usr/lib/python3.8/site-packages/sage/interfaces/giac.py", line 995, in sage.interfaces.giac.GiacElement._latex_
Failed example:
    print(latex(giac('(x^4 - y)/(y^2-3*x)')))
Expected:
    "\frac{(x^{4}-y)}{(y^{2}-3\cdot x)}"
Got:
    "\frac{x^{4}-y}{y^{2}-3 x}"
**********************************************************************
3 items had failures:
   3 of  24 in sage.interfaces.giac
   1 of   6 in sage.interfaces.giac.Giac.eval
   1 of   2 in sage.interfaces.giac.GiacElement._latex_
    [167 tests, 5 failures, 3.34 s]
----------------------------------------------------------------------
sage -t --long /usr/lib/python3.8/site-packages/sage/calculus/calculus.py  # 2 doctests failed
sage -t --long /usr/lib/python3.8/site-packages/sage/interfaces/giac.py  # 5 doctests failed
----------------------------------------------------------------------
```

The ones in `interfaces/giac.py` just need the tests updated, the `calculus/calculus.py` failures are an upstream issue

```
1>> laplace(Heaviside(x-1),x,s)
Warning: piecewise indefinite integration does not return a continuous antiderivative
0
// Time 0
```



---

archive/issue_comments_577705.json:
```json
{
    "body": "<a id='comment:3'></a>\nFor 1.6 with laplace I have reported it upstream on giac's forum: \nhttps://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=3&t=2531\n\nbut for the sqrt(5) appearing in the doctests of giac.py I suspect some default configuration that is not dependent of the version of giac. Could it be that the user .xcasrc is taken into account?\n\nThen I think it would be more natural to force the configuration to not use sqrt before the computation with:\n\n`sage: giac.with_sqrt(0);`\nNB: this function returns the previous value of this setting so in a doctest it is better to not print the answer)",
    "created_at": "2020-07-09T12:26:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577705",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:3'></a>
For 1.6 with laplace I have reported it upstream on giac's forum: 
https://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=3&t=2531

but for the sqrt(5) appearing in the doctests of giac.py I suspect some default configuration that is not dependent of the version of giac. Could it be that the user .xcasrc is taken into account?

Then I think it would be more natural to force the configuration to not use sqrt before the computation with:

`sage: giac.with_sqrt(0);`
NB: this function returns the previous value of this setting so in a doctest it is better to not print the answer)



---

archive/issue_comments_577706.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [frederichan](#comment%3A3):\n> but for the sqrt(5) appearing in the doctests of giac.py I suspect some default configuration that is not dependent of the version of giac. Could it be that the user .xcasrc is taken into account?\n\n\ndowngrading giac makes those tests pass again, so there's definitely some change in 1.6 involved.",
    "created_at": "2020-07-09T18:21:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577706",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:4'></a>
Replying to [frederichan](#comment%3A3):
> but for the sqrt(5) appearing in the doctests of giac.py I suspect some default configuration that is not dependent of the version of giac. Could it be that the user .xcasrc is taken into account?


downgrading giac makes those tests pass again, so there's definitely some change in 1.6 involved.



---

archive/issue_comments_577707.json:
```json
{
    "body": "<a id='comment:5'></a>\nYes, it's an improvement, done for geogebra. Forcing the sqrt mode of Xcas to false should fix sage regression test, as explained by Frederic.\nLaplace bug is fixed in my source tree, I will make a new release probably next week.\n\n```\ndiff desolve.cc desolve.cc~\n117c117\n<     if (lop(res,at_integrate).empty() && lop(res,at_piecewise).empty() && lop(res,at_sign).empty())\n---\n>     if (lop(res,at_integrate).empty())\n```",
    "created_at": "2020-07-09T18:45:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577707",
    "user": "https://trac.sagemath.org/admin/accounts/users/parisse"
}
```

<a id='comment:5'></a>
Yes, it's an improvement, done for geogebra. Forcing the sqrt mode of Xcas to false should fix sage regression test, as explained by Frederic.
Laplace bug is fixed in my source tree, I will make a new release probably next week.

```
diff desolve.cc desolve.cc~
117c117
<     if (lop(res,at_integrate).empty() && lop(res,at_piecewise).empty() && lop(res,at_sign).empty())
---
>     if (lop(res,at_integrate).empty())
```



---

archive/issue_comments_577708.json:
```json
{
    "body": "<a id='comment:7'></a>\nIncidentally, with giac 1.5.0-63 on `manylinux-2010-standard` (from #30195), I get (https://github.com/kliem/sage/runs/908011984)\n\n```\nIn file included from misc.cc:9275:\nmisc.cc: In function 'std::string giac::fetch(const string&)':\nmisc.cc:9289:28: error: 'CURLOPT_ACCEPT_ENCODING' was not declared in this scope\n     curl_easy_setopt(curl, CURLOPT_ACCEPT_ENCODING, \"deflate\");\n                            ^~~~~~~~~~~~~~~~~~~~~~~\nmisc.cc:9289:28: note: suggested alternative: 'CURLOPT_ENCODING'\n```\nIt should be checked whether this goes away with the update",
    "created_at": "2020-07-25T00:49:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577708",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
Incidentally, with giac 1.5.0-63 on `manylinux-2010-standard` (from #30195), I get (https://github.com/kliem/sage/runs/908011984)

```
In file included from misc.cc:9275:
misc.cc: In function 'std::string giac::fetch(const string&)':
misc.cc:9289:28: error: 'CURLOPT_ACCEPT_ENCODING' was not declared in this scope
     curl_easy_setopt(curl, CURLOPT_ACCEPT_ENCODING, "deflate");
                            ^~~~~~~~~~~~~~~~~~~~~~~
misc.cc:9289:28: note: suggested alternative: 'CURLOPT_ENCODING'
```
It should be checked whether this goes away with the update



---

archive/issue_comments_577709.json:
```json
{
    "body": "<a id='comment:8'></a>\nYes, I do remember a problem with curl in an earlier giac. I believe it is fixed in 1.5.0-87+.",
    "created_at": "2020-07-25T01:43:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577709",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:8'></a>
Yes, I do remember a problem with curl in an earlier giac. I believe it is fixed in 1.5.0-87+.



---

archive/issue_comments_577710.json:
```json
{
    "body": "<a id='comment:9'></a>\nShould we continue waiting for another 1.6 patch release or upgrade to latest 1.5.x in the meantime?",
    "created_at": "2020-08-10T03:48:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577710",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
Should we continue waiting for another 1.6 patch release or upgrade to latest 1.5.x in the meantime?



---

archive/issue_comments_577711.json:
```json
{
    "body": "<a id='comment:10'></a>\nI would be OK to move to 1.5.0-87 already.",
    "created_at": "2020-08-10T04:05:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577711",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:10'></a>
I would be OK to move to 1.5.0-87 already.



---

archive/issue_comments_577712.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/upgrade_giac_to_1_5_0_87\"",
    "created_at": "2020-08-10T05:50:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577712",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/upgrade_giac_to_1_5_0_87"



---

archive/issue_comments_577713.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2020-08-10T05:51:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577713",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_577714.json:
```json
{
    "body": "Changing commit from \"\" to \"d2324a69aee28beb276fb7a33bf9475f674e618e\"",
    "created_at": "2020-08-10T05:51:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577714",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "d2324a69aee28beb276fb7a33bf9475f674e618e"



---

archive/issue_comments_577715.json:
```json
{
    "body": "<a id='comment:12'></a>\nNew commits:\n|                                                                                                                                          |                                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|\n|[d2324a6](https://git.sagemath.org/sage.git/commit?id=d2324a69aee28beb276fb7a33bf9475f674e618e)|`build/pkgs/giac: Update to 1.5.0.87`|",
    "created_at": "2020-08-10T05:51:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577715",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>
New commits:
|                                                                                                                                          |                                     |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|
|[d2324a6](https://git.sagemath.org/sage.git/commit?id=d2324a69aee28beb276fb7a33bf9475f674e618e)|`build/pkgs/giac: Update to 1.5.0.87`|



---

archive/issue_comments_577716.json:
```json
{
    "body": "Changing reviewer from \"\" to \"https://github.com/mkoeppe/sage/actions/runs/202114883\"",
    "created_at": "2020-08-10T06:50:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577716",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "" to "https://github.com/mkoeppe/sage/actions/runs/202114883"



---

archive/issue_comments_577717.json:
```json
{
    "body": "<a id='comment:13'></a>\nAttachment [giac-1.5.0.87.tar.bz2](tarball://root/attachments/some-uuid/ticket29552/giac-1.5.0.87.tar.bz2) by @mkoeppe created at 2020-08-10 06:50:03\n\nBuilds OK on macOS",
    "created_at": "2020-08-10T06:50:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577717",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>
Attachment [giac-1.5.0.87.tar.bz2](tarball://root/attachments/some-uuid/ticket29552/giac-1.5.0.87.tar.bz2) by @mkoeppe created at 2020-08-10 06:50:03

Builds OK on macOS



---

archive/issue_comments_577718.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-08-10T06:50:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577718",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_577719.json:
```json
{
    "body": "<a id='comment:14'></a>\nYou'll need https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/sage/files/giac-1.5.0.87.patch for sage's doctests.",
    "created_at": "2020-08-10T07:17:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577719",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:14'></a>
You'll need https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/sage/files/giac-1.5.0.87.patch for sage's doctests.



---

archive/issue_comments_577720.json:
```json
{
    "body": "<a id='comment:15'></a>\nUpdating doctests is probably better done together with #29541",
    "created_at": "2020-08-10T07:24:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577720",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>
Updating doctests is probably better done together with #29541



---

archive/issue_comments_577721.json:
```json
{
    "body": "<a id='comment:16'></a>\nBy the way, it seems that we don't install giac correctly (before or after this update):\n\n```\n$ giac --help\n// Maximum number of parallel threads 1\n// Unable to find keyword file /Applications/usr/share/giac/doc/en/keywords\nHelp file /Applications/usr/share/giac/doc/en/aide_cas not found\nAdded 0 synonyms\nHelp file /Applications/usr/share/giac/aide_cas not found\n:1: syntax error  line 1 col 1 at -- in --help  \n\nundef\n// dclock2 0.00015\n// Time 0\n// Total time 0\n```",
    "created_at": "2020-08-10T15:09:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577721",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>
By the way, it seems that we don't install giac correctly (before or after this update):

```
$ giac --help
// Maximum number of parallel threads 1
// Unable to find keyword file /Applications/usr/share/giac/doc/en/keywords
Help file /Applications/usr/share/giac/doc/en/aide_cas not found
Added 0 synonyms
Help file /Applications/usr/share/giac/aide_cas not found
:1: syntax error  line 1 col 1 at -- in --help  

undef
// dclock2 0.00015
// Time 0
// Total time 0
```



---

archive/issue_comments_577722.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [fbissey](#comment%3A14):\n> You'll need https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/sage/files/giac-1.5.0.87.patch for sage's doctests.\n\nLet's see...\n\n```\ndiff --git a/sage/interfaces/giac.py b/sage/interfaces/giac.py\nindex 68c9527..3c5fd12 100644\n--- a/sage/interfaces/giac.py\n+++ b/sage/interfaces/giac.py\n@@ -990,7 +990,7 @@ class GiacElement(ExpectElement):\n         EXAMPLES::\n \n             sage: print(latex(giac('(x^4 - y)/(y^2-3*x)')))\n-            \"\\frac{(x^{4}-y)}{(y^{2}-3\\cdot x)}\"\n+            \"\\frac{x^{4}-y}{y^{2}-3 x}\"\n \n         \"\"\"\n         return self.parent().eval('latex(%s)'%self.name())\n```\nBefore or after, this doctest makes no sense.\n\nThe `_latex_` method is broken -- it adds quotation marks\n\n```\nsage: g = giac('(x^4 - y)/(y^2-3*x)')\nsage: g\n(x^4-y)/(y^2-3*x)\nsage: s = g._sage_()\nsage: s\n(x^4 - y)/(y^2 - 3*x)\nsage: latex(s)\n\\frac{x^{4} - y}{y^{2} - 3 \\, x}\nsage: latex(g)\n\"\\frac{(x^{4}-y)}{(y^{2}-3\\cdot x)}\"\n```\nIs anyone using this interface at all?",
    "created_at": "2020-08-10T18:38:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577722",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>
Replying to [fbissey](#comment%3A14):
> You'll need https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/sage/files/giac-1.5.0.87.patch for sage's doctests.

Let's see...

```
diff --git a/sage/interfaces/giac.py b/sage/interfaces/giac.py
index 68c9527..3c5fd12 100644
--- a/sage/interfaces/giac.py
+++ b/sage/interfaces/giac.py
@@ -990,7 +990,7 @@ class GiacElement(ExpectElement):
         EXAMPLES::
 
             sage: print(latex(giac('(x^4 - y)/(y^2-3*x)')))
-            "\frac{(x^{4}-y)}{(y^{2}-3\cdot x)}"
+            "\frac{x^{4}-y}{y^{2}-3 x}"
 
         """
         return self.parent().eval('latex(%s)'%self.name())
```
Before or after, this doctest makes no sense.

The `_latex_` method is broken -- it adds quotation marks

```
sage: g = giac('(x^4 - y)/(y^2-3*x)')
sage: g
(x^4-y)/(y^2-3*x)
sage: s = g._sage_()
sage: s
(x^4 - y)/(y^2 - 3*x)
sage: latex(s)
\frac{x^{4} - y}{y^{2} - 3 \, x}
sage: latex(g)
"\frac{(x^{4}-y)}{(y^{2}-3\cdot x)}"
```
Is anyone using this interface at all?



---

archive/issue_comments_577723.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-08-10T18:39:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577723",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_577724.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [mkoeppe](#comment%3A17):\n> Replying to [fbissey](#comment%3A14):\n> > You'll need https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/sage/files/giac-1.5.0.87.patch for sage's doctests.\n\n> Let's see...\n> {{{\n> diff --git a/sage/interfaces/giac.py b/sage/interfaces/giac.py\n> index 68c9527..3c5fd12 100644\n> --- a/sage/interfaces/giac.py\n> +++ b/sage/interfaces/giac.py\n> `@``@` -990,7 +990,7 `@``@` class GiacElement(ExpectElement):\n>          EXAMPLES::\n>  \n>              sage: print(latex(giac('(x^4 - y)/(y^2-3*x)')))\n> -            \"\\frac{(x<sup>{4}-y)}{(y</sup>{2}-3\\cdot x)}\"\n> +            \"\\frac{x<sup>{4}-y}{y</sup>{2}-3 x}\"\n>  \n>          \"\"\"\n>          return self.parent().eval('latex(%s)'%self.name())\n> }}}\n> Before or after, this doctest makes no sense.\n> \n> The `_latex_` method is broken -- it adds quotation marks\n> \n> ```\n> sage: g = giac('(x^4 - y)/(y^2-3*x)')\n> sage: g\n> (x^4-y)/(y^2-3*x)\n> sage: s = g._sage_()\n> sage: s\n> (x^4 - y)/(y^2 - 3*x)\n> sage: latex(s)\n> \\frac{x^{4} - y}{y^{2} - 3 \\, x}\n> sage: latex(g)\n> \"\\frac{(x^{4}-y)}{(y^{2}-3\\cdot x)}\"\n> ```\n> Is anyone using this interface at all?\n\n\nI don't know :) - the pexpect interface and the optional giacpy_sage package are the only way to interact with giac right now. I cannot find anything linked with libgiac in sagelib.\nBut the latex interface in particular? I don't know. The latex spat out for that doctest is different in the currently shipped giac, 1.5.0-63 and 1.5.0-87.",
    "created_at": "2020-08-10T20:54:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577724",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:19'></a>
Replying to [mkoeppe](#comment%3A17):
> Replying to [fbissey](#comment%3A14):
> > You'll need https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/sage/files/giac-1.5.0.87.patch for sage's doctests.

> Let's see...
> {{{
> diff --git a/sage/interfaces/giac.py b/sage/interfaces/giac.py
> index 68c9527..3c5fd12 100644
> --- a/sage/interfaces/giac.py
> +++ b/sage/interfaces/giac.py
> `@``@` -990,7 +990,7 `@``@` class GiacElement(ExpectElement):
>          EXAMPLES::
>  
>              sage: print(latex(giac('(x^4 - y)/(y^2-3*x)')))
> -            "\frac{(x<sup>{4}-y)}{(y</sup>{2}-3\cdot x)}"
> +            "\frac{x<sup>{4}-y}{y</sup>{2}-3 x}"
>  
>          """
>          return self.parent().eval('latex(%s)'%self.name())
> }}}
> Before or after, this doctest makes no sense.
> 
> The `_latex_` method is broken -- it adds quotation marks
> 
> ```
> sage: g = giac('(x^4 - y)/(y^2-3*x)')
> sage: g
> (x^4-y)/(y^2-3*x)
> sage: s = g._sage_()
> sage: s
> (x^4 - y)/(y^2 - 3*x)
> sage: latex(s)
> \frac{x^{4} - y}{y^{2} - 3 \, x}
> sage: latex(g)
> "\frac{(x^{4}-y)}{(y^{2}-3\cdot x)}"
> ```
> Is anyone using this interface at all?


I don't know :) - the pexpect interface and the optional giacpy_sage package are the only way to interact with giac right now. I cannot find anything linked with libgiac in sagelib.
But the latex interface in particular? I don't know. The latex spat out for that doctest is different in the currently shipped giac, 1.5.0-63 and 1.5.0-87.



---

archive/issue_comments_577725.json:
```json
{
    "body": "Changing commit from \"d2324a69aee28beb276fb7a33bf9475f674e618e\" to \"0971326e7088a5bbc0ceb11cefb60a4f40d0ae1b\"",
    "created_at": "2020-08-10T23:14:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577725",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d2324a69aee28beb276fb7a33bf9475f674e618e" to "0971326e7088a5bbc0ceb11cefb60a4f40d0ae1b"



---

archive/issue_comments_577726.json:
```json
{
    "body": "<a id='comment:20'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------|\n|[0971326](https://git.sagemath.org/sage.git/commit/?id=0971326e7088a5bbc0ceb11cefb60a4f40d0ae1b)|`sage.interfaces.giac.GiacElement._latex_: Fix implementation and doctest, make doctest more flexible`|",
    "created_at": "2020-08-10T23:14:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577726",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------|
|[0971326](https://git.sagemath.org/sage.git/commit/?id=0971326e7088a5bbc0ceb11cefb60a4f40d0ae1b)|`sage.interfaces.giac.GiacElement._latex_: Fix implementation and doctest, make doctest more flexible`|



---

archive/issue_comments_577727.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-08-10T23:18:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577727",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_577728.json:
```json
{
    "body": "Changing commit from \"0971326e7088a5bbc0ceb11cefb60a4f40d0ae1b\" to \"8bbd05637c0b4a2d7a733af099540c91805363e2\"",
    "created_at": "2020-08-10T23:21:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577728",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0971326e7088a5bbc0ceb11cefb60a4f40d0ae1b" to "8bbd05637c0b4a2d7a733af099540c91805363e2"



---

archive/issue_comments_577729.json:
```json
{
    "body": "<a id='comment:22'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|\n|[5239d30](https://git.sagemath.org/sage.git/commit/?id=5239d30e84cd734a9fff1a3444d5e6c17ab9472d)|`build/pkgs/giac: Update to 1.5.0.87`|\n|[8bbd056](https://git.sagemath.org/sage.git/commit/?id=8bbd05637c0b4a2d7a733af099540c91805363e2)|`sage.interfaces.giac.GiacElement._latex_: Fix implementation and doctest, make doctest more flexible`|",
    "created_at": "2020-08-10T23:21:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577729",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|
|[5239d30](https://git.sagemath.org/sage.git/commit/?id=5239d30e84cd734a9fff1a3444d5e6c17ab9472d)|`build/pkgs/giac: Update to 1.5.0.87`|
|[8bbd056](https://git.sagemath.org/sage.git/commit/?id=8bbd05637c0b4a2d7a733af099540c91805363e2)|`sage.interfaces.giac.GiacElement._latex_: Fix implementation and doctest, make doctest more flexible`|



---

archive/issue_comments_577730.json:
```json
{
    "body": "Changing reviewer from \"https://github.com/mkoeppe/sage/actions/runs/202114883\" to \"github.com/mkoeppe/sage/actions/runs/203238491\"",
    "created_at": "2020-08-10T23:40:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577730",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "https://github.com/mkoeppe/sage/actions/runs/202114883" to "github.com/mkoeppe/sage/actions/runs/203238491"



---

archive/issue_comments_577731.json:
```json
{
    "body": "Changing commit from \"8bbd05637c0b4a2d7a733af099540c91805363e2\" to \"c076383f03d7bc22d98a0a7b442f3e7b877799a0\"",
    "created_at": "2020-08-12T03:39:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577731",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "8bbd05637c0b4a2d7a733af099540c91805363e2" to "c076383f03d7bc22d98a0a7b442f3e7b877799a0"



---

archive/issue_comments_577732.json:
```json
{
    "body": "<a id='comment:24'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------|\n|[c076383](https://git.sagemath.org/sage.git/commit/?id=c076383f03d7bc22d98a0a7b442f3e7b877799a0)|`src/sage/interfaces/giac.py: Make new latex doctest more flexible`|",
    "created_at": "2020-08-12T03:39:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577732",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------|
|[c076383](https://git.sagemath.org/sage.git/commit/?id=c076383f03d7bc22d98a0a7b442f3e7b877799a0)|`src/sage/interfaces/giac.py: Make new latex doctest more flexible`|



---

archive/issue_comments_577733.json:
```json
{
    "body": "<a id='comment:25'></a>\nTests at https://github.com/mkoeppe/sage/actions/runs/203238491:\n\nClean on `ubuntu-trusty-standard` (https://github.com/mkoeppe/sage/runs/969005090) and `fedora-32-standard` (https://github.com/mkoeppe/sage/runs/969005556) except for doctest fixed in c076383.",
    "created_at": "2020-08-12T04:04:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577733",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'></a>
Tests at https://github.com/mkoeppe/sage/actions/runs/203238491:

Clean on `ubuntu-trusty-standard` (https://github.com/mkoeppe/sage/runs/969005090) and `fedora-32-standard` (https://github.com/mkoeppe/sage/runs/969005556) except for doctest fixed in c076383.



---

archive/issue_comments_577734.json:
```json
{
    "body": "Changing reviewer from \"github.com/mkoeppe/sage/actions/runs/203238491\" to \"github.com/mkoeppe/sage/actions/runs/203238491, ...\"",
    "created_at": "2020-08-12T04:48:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577734",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "github.com/mkoeppe/sage/actions/runs/203238491" to "github.com/mkoeppe/sage/actions/runs/203238491, ..."



---

archive/issue_comments_577735.json:
```json
{
    "body": "<a id='comment:27'></a>\nNeeds review",
    "created_at": "2020-08-13T02:59:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577735",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>
Needs review



---

archive/issue_comments_577736.json:
```json
{
    "body": "<a id='comment:28'></a>\nthere is a strange behavior in this version of giac (I have tested with 1.5.0.85, 1.5.0.87 and 1.6.0.7)that breaks giacpy_sage doctests. (cf your comment 25 in #29171)\nindeed the c++ _size function applied to the empty list seq[] doesn't return 0 as with giac 1.5.0.63 and earlier version but it returns some configuration setting.\n\nExample: in icas `len(seq[])` gives 0 with 1.5.0.63 but it now gives \n`[[\"atom\",\"cplx\",\"idnt\",\"frac\",\"vector\",\"symb\",\"strng\",\"other\",\"total\"],[2,0,0,0,3,0,0,0,240]]` with 1.5.0.87\n\nI have reported it there [https://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=3&t=2534#p11776](https://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=3&t=2534#p11776) to know if this modification will remain or is a bug to know if we patch giac or adapt giacpy.",
    "created_at": "2020-08-13T14:45:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577736",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:28'></a>
there is a strange behavior in this version of giac (I have tested with 1.5.0.85, 1.5.0.87 and 1.6.0.7)that breaks giacpy_sage doctests. (cf your comment 25 in #29171)
indeed the c++ _size function applied to the empty list seq[] doesn't return 0 as with giac 1.5.0.63 and earlier version but it returns some configuration setting.

Example: in icas `len(seq[])` gives 0 with 1.5.0.63 but it now gives 
`[["atom","cplx","idnt","frac","vector","symb","strng","other","total"],[2,0,0,0,3,0,0,0,240]]` with 1.5.0.87

I have reported it there [https://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=3&t=2534#p11776](https://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=3&t=2534#p11776) to know if this modification will remain or is a bug to know if we patch giac or adapt giacpy.



---

archive/issue_comments_577737.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2020-08-13T22:09:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577737",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_577738.json:
```json
{
    "body": "<a id='comment:29'></a>\nOK, I guess we should hold off with this update.",
    "created_at": "2020-08-13T22:09:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577738",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'></a>
OK, I guess we should hold off with this update.



---

archive/issue_comments_577739.json:
```json
{
    "body": "<a id='comment:30'></a>\nSo the answer was that it is a modification usefull for very low memory systems (calculators). Whether or not these extra lines will be put inside an #ifdef in later versions of giac is still in discussion.\nI guess we can let it as is",
    "created_at": "2020-08-16T07:46:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577739",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:30'></a>
So the answer was that it is a modification usefull for very low memory systems (calculators). Whether or not these extra lines will be put inside an #ifdef in later versions of giac is still in discussion.
I guess we can let it as is



---

archive/issue_comments_577740.json:
```json
{
    "body": "Changing dependencies from \"#29521\" to \"#29521, #29171\"",
    "created_at": "2020-08-16T13:36:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577740",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29521" to "#29521, #29171"



---

archive/issue_comments_577741.json:
```json
{
    "body": "Changing work_issues from \"\" to \"merge #29171\"",
    "created_at": "2020-08-16T13:37:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577741",
    "user": "https://github.com/mkoeppe"
}
```

Changing work_issues from "" to "merge #29171"



---

archive/issue_comments_577742.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2020-08-16T13:37:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577742",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_577743.json:
```json
{
    "body": "<a id='comment:33'></a>\nFor #30351, we should apply \nhttps://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/giac/files/giac-1.5.0.87-gsl_lapack.patch\nin `spkg-src`.",
    "created_at": "2020-08-16T23:43:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577743",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:33'></a>
For #30351, we should apply 
https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/giac/files/giac-1.5.0.87-gsl_lapack.patch
in `spkg-src`.



---

archive/issue_comments_577744.json:
```json
{
    "body": "Changing commit from \"c076383f03d7bc22d98a0a7b442f3e7b877799a0\" to \"eb7995f997cb53baa572bfd8543dfb2b887bcf2e\"",
    "created_at": "2020-08-17T01:39:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577744",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c076383f03d7bc22d98a0a7b442f3e7b877799a0" to "eb7995f997cb53baa572bfd8543dfb2b887bcf2e"



---

archive/issue_comments_577745.json:
```json
{
    "body": "<a id='comment:34'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------|\n|[4805622](https://git.sagemath.org/sage.git/commit/?id=4805622344c0217c3518fe6428797f5bcee24bc9)|`build/pkgs/giac/spkg-src: Patch with giac-1.5.0.87-gsl_lapack.patch; remove old giac autotools patches`|\n|[1cec2e7](https://git.sagemath.org/sage.git/commit/?id=1cec2e794f3d03000a50c94ce9f4b69071757284)|`build/pkgs/giac/spkg-install.in: Remove --disable-lapack`|\n|[eb7995f](https://git.sagemath.org/sage.git/commit/?id=eb7995f997cb53baa572bfd8543dfb2b887bcf2e)|`build/pkgs/giac/dependencies: Add curl, glpk`|",
    "created_at": "2020-08-17T01:39:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577745",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------|
|[4805622](https://git.sagemath.org/sage.git/commit/?id=4805622344c0217c3518fe6428797f5bcee24bc9)|`build/pkgs/giac/spkg-src: Patch with giac-1.5.0.87-gsl_lapack.patch; remove old giac autotools patches`|
|[1cec2e7](https://git.sagemath.org/sage.git/commit/?id=1cec2e794f3d03000a50c94ce9f4b69071757284)|`build/pkgs/giac/spkg-install.in: Remove --disable-lapack`|
|[eb7995f](https://git.sagemath.org/sage.git/commit/?id=eb7995f997cb53baa572bfd8543dfb2b887bcf2e)|`build/pkgs/giac/dependencies: Add curl, glpk`|



---

archive/issue_comments_577746.json:
```json
{
    "body": "Attachment [giac-1.5.0.87p0.tar.bz2](tarball://root/attachments/some-uuid/ticket29552/giac-1.5.0.87p0.tar.bz2) by @mkoeppe created at 2020-08-17 01:42:26",
    "created_at": "2020-08-17T01:42:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577746",
    "user": "https://github.com/mkoeppe"
}
```

Attachment [giac-1.5.0.87p0.tar.bz2](tarball://root/attachments/some-uuid/ticket29552/giac-1.5.0.87p0.tar.bz2) by @mkoeppe created at 2020-08-17 01:42:26



---

archive/issue_comments_577747.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-08-17T01:42:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577747",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_577748.json:
```json
{
    "body": "Changing reviewer from \"github.com/mkoeppe/sage/actions/runs/203238491, ...\" to \"github.com/mkoeppe/sage/actions/runs/211389096, github.com/mkoeppe/sage/actions/runs/211389095, ...\"",
    "created_at": "2020-08-17T02:03:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577748",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "github.com/mkoeppe/sage/actions/runs/203238491, ..." to "github.com/mkoeppe/sage/actions/runs/211389096, github.com/mkoeppe/sage/actions/runs/211389095, ..."



---

archive/issue_comments_577749.json:
```json
{
    "body": "Changing priority from major to blocker.",
    "created_at": "2020-08-17T02:09:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577749",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from major to blocker.



---

archive/issue_comments_577750.json:
```json
{
    "body": "Changing keywords from \"\" to \"giac\".",
    "created_at": "2020-08-17T14:13:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577750",
    "user": "https://github.com/fchapoton"
}
```

Changing keywords from "" to "giac".



---

archive/issue_comments_577751.json:
```json
{
    "body": "<a id='comment:39'></a>\nNeeds review!",
    "created_at": "2020-08-19T15:48:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577751",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:39'></a>
Needs review!



---

archive/issue_comments_577752.json:
```json
{
    "body": "<a id='comment:40'></a>\n\n```\n$ giac\n// Maximum number of parallel threads 1\nHelp file /Applications/usr/share/giac/aide_cas not found\n// Unable to find keyword file /Applications/usr/share/giac/doc/en/keywords\nHelp file /Applications/usr/share/giac/doc/en/aide_cas not found\nAdded 0 synonyms\nWelcome to giac readline interface\n(c) 2001,2018 B. Parisse & others\nHomepage http://www-fourier.ujf-grenoble.fr/~parisse/giac.html\nReleased under the GPL license 3.0 or above\nSee http://www.gnu.org for license details\nMay contain BSD licensed software parts (lapack, atlas, tinymt)\n-------------------------------------------------\nPress CTRL and D simultaneously to finish session\nType ?commandname for help\n0>> \n```\nsomething with keywords ? (This is on macOS 10.15).",
    "created_at": "2020-08-20T10:50:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577752",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:40'></a>

```
$ giac
// Maximum number of parallel threads 1
Help file /Applications/usr/share/giac/aide_cas not found
// Unable to find keyword file /Applications/usr/share/giac/doc/en/keywords
Help file /Applications/usr/share/giac/doc/en/aide_cas not found
Added 0 synonyms
Welcome to giac readline interface
(c) 2001,2018 B. Parisse & others
Homepage http://www-fourier.ujf-grenoble.fr/~parisse/giac.html
Released under the GPL license 3.0 or above
See http://www.gnu.org for license details
May contain BSD licensed software parts (lapack, atlas, tinymt)
-------------------------------------------------
Press CTRL and D simultaneously to finish session
Type ?commandname for help
0>> 
```
something with keywords ? (This is on macOS 10.15).



---

archive/issue_comments_577753.json:
```json
{
    "body": "<a id='comment:41'></a>\nbut linking to openblas is fixed, good.",
    "created_at": "2020-08-20T10:51:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577753",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:41'></a>
but linking to openblas is fixed, good.



---

archive/issue_comments_577754.json:
```json
{
    "body": "<a id='comment:42'></a>\nReplying to [dimpase](#comment%3A40):\n> {{{\n> $ giac\n> // Maximum number of parallel threads 1\n> Help file /Applications/usr/share/giac/aide_cas not found\n> // Unable to find keyword file /Applications/usr/share/giac/doc/en/keywords\n> Help file /Applications/usr/share/giac/doc/en/aide_cas not found\n> Added 0 synonyms\n> Welcome to giac readline interface\n> (c) 2001,2018 B. Parisse & others\n> Homepage http://www-fourier.ujf-grenoble.fr/~parisse/giac.html\n> Released under the GPL license 3.0 or above\n> See http://www.gnu.org for license details\n> May contain BSD licensed software parts (lapack, atlas, tinymt)\n> \n> ---\n> Press CTRL and D simultaneously to finish session\n> Type ?commandname for help\n> 0>> \n> }}}\n> something with keywords ? (This is on macOS 10.15).\n\n\nFrederic indicates that these messages are not error messages. See #29171#comment:47",
    "created_at": "2020-08-20T13:40:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577754",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:42'></a>
Replying to [dimpase](#comment%3A40):
> {{{
> $ giac
> // Maximum number of parallel threads 1
> Help file /Applications/usr/share/giac/aide_cas not found
> // Unable to find keyword file /Applications/usr/share/giac/doc/en/keywords
> Help file /Applications/usr/share/giac/doc/en/aide_cas not found
> Added 0 synonyms
> Welcome to giac readline interface
> (c) 2001,2018 B. Parisse & others
> Homepage http://www-fourier.ujf-grenoble.fr/~parisse/giac.html
> Released under the GPL license 3.0 or above
> See http://www.gnu.org for license details
> May contain BSD licensed software parts (lapack, atlas, tinymt)
> 
> ---
> Press CTRL and D simultaneously to finish session
> Type ?commandname for help
> 0>> 
> }}}
> something with keywords ? (This is on macOS 10.15).


Frederic indicates that these messages are not error messages. See #29171#comment:47



---

archive/issue_comments_577755.json:
```json
{
    "body": "<a id='comment:43'></a>\nMoreover, for the keyword message,  I have tried on linux with parisse's debian package.\nwith LANG=C I have also the same (0 synonyms added)\nwith LANG=en_US I have 26 synonyms added but all are GUI related (turtle mode).\nso I don't think that it is a problem. \nso this ticket looks good to me.\ntested on fedora fc30.x86_64 (make test was OK)",
    "created_at": "2020-08-20T13:47:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577755",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:43'></a>
Moreover, for the keyword message,  I have tried on linux with parisse's debian package.
with LANG=C I have also the same (0 synonyms added)
with LANG=en_US I have 26 synonyms added but all are GUI related (turtle mode).
so I don't think that it is a problem. 
so this ticket looks good to me.
tested on fedora fc30.x86_64 (make test was OK)



---

archive/issue_comments_577756.json:
```json
{
    "body": "<a id='comment:44'></a>\nok",
    "created_at": "2020-08-20T15:09:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577756",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:44'></a>
ok



---

archive/issue_comments_577757.json:
```json
{
    "body": "Changing reviewer from \"github.com/mkoeppe/sage/actions/runs/211389096, github.com/mkoeppe/sage/actions/runs/211389095, ...\" to \"Dima Pasechnik\"",
    "created_at": "2020-08-20T15:09:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577757",
    "user": "https://github.com/dimpase"
}
```

Changing reviewer from "github.com/mkoeppe/sage/actions/runs/211389096, github.com/mkoeppe/sage/actions/runs/211389095, ..." to "Dima Pasechnik"



---

archive/issue_comments_577758.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-08-20T15:09:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577758",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_577759.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-08-26T21:17:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577759",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_075423.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-26T21:17:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29552#event-75423"
}
```



---

archive/issue_comments_577760.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/upgrade_giac_to_1_5_0_87\" to \"eb7995f997cb53baa572bfd8543dfb2b887bcf2e\"",
    "created_at": "2020-08-26T21:17:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29552#issuecomment-577760",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/upgrade_giac_to_1_5_0_87" to "eb7995f997cb53baa572bfd8543dfb2b887bcf2e"
