# Issue 29886: Add generator of symmetric matrices

archive/issues_029649.json:
```json
{
    "body": "We add a method to the `MatrixSpace` class that returns a generator over\nthe symmetric matrices in the space. The \"symmetry\" is defined by the user.\n\nCC:  @mkoeppe @tscrim\n\nKeywords: symmetric_matrices matrix_spaces\n\nReviewer: Samuel Leli\u00e8vre, ...\n\nAuthor: Ivo Maffei\n\nBranch: u/gh-Ivo-Maffei/symmetric_matrices\n\nStatus: needs_work\n\nCommit: 08fc8931f350c764b29aa1f76ac2a504de7cac5b\n\nIssue created by migration from https://trac.sagemath.org/ticket/29886\n\n",
    "created_at": "2020-06-17T17:37:07Z",
    "labels": [
        "component: linear algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Add generator of symmetric matrices",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29886",
    "user": "https://github.com/Ivo-Maffei"
}
```
We add a method to the `MatrixSpace` class that returns a generator over
the symmetric matrices in the space. The "symmetry" is defined by the user.

CC:  @mkoeppe @tscrim

Keywords: symmetric_matrices matrix_spaces

Reviewer: Samuel Lelièvre, ...

Author: Ivo Maffei

Branch: u/gh-Ivo-Maffei/symmetric_matrices

Status: needs_work

Commit: 08fc8931f350c764b29aa1f76ac2a504de7cac5b

Issue created by migration from https://trac.sagemath.org/ticket/29886





---

archive/issue_comments_586497.json:
```json
{
    "body": "<a id='comment:1'></a>Remove space before closing parenthesis:\n\n```\n- def symmetric_matrices(self, f, g=None ):\n+ def symmetric_matrices(self, f, g=None):\n```\n\nTypo: doesn't contains -> doesn't contain.\n\nUse a space after each comma in code,\nand around `+` signs.\n\nUse double backticks, e.g. ```f``` or ```ValueError```\nfor code formatting in docstrings.\n\nTypo \"funcition\" -> function.\n\nUse code formatting for `None`:\n`if it is None` -> `if it is ``None```\n\n```\n- skew-symmetric matrices:\n+ Skew-symmetric matrices:\n```\n\nTypo: `MetricSpace` -> `MatrixSpace`.\n\nHint: after making changes, rebuild Sage and test with\n\n```\nsage -t src/sage/matrix/matrix_space.py\n```\nbefore pushing. That would catch things such as `MetricSpace`.\n\nReplace this doctest whose output is hard to parse:\n\n```\nsage: gen = MS.symmetric_matrices(f)\nsage: for M in gen:\n....:     print(M)\n```\nby this one whose output takes up less space and is easier to parse:\n\n```\nsage: list(MS.symmetric_matrices(f))\n```\n\nLikewise, replace this:\n\n```\nsage: gen = MS.symmetric_matrices(f)\nsage: i = 0\nsage: for M in gen:\n....:     i+= 1\n....:     print(M)\n....:     if i == 3: break\n```\nwith this more concise:\n\n```\nsage: gen = MS.symmetric_matrices(f)\nsage: [next(gen) for _ in range(3)]\n```\n\nRemove spaces around `M` in `def make_symmetric( M ):`.\n\nSimplify \"can't have symmetric matrices if they are not square\"\nto \"symmetric matrices must be square\" or \"only square matrices\ncan be symmetric\".\n\nUse a space after `#` for comments, for instance:\n\n```\n- #When the base ring is not finite,\n+ # When the base ring is not finite,\n```\n\nFor inline comments, double space before `#` and single space after.\nFor instance:\n\n```\nmatrix_entries = []  # entries of matrix with lower half 0\n```\n\nNo need to comment `#make M symmetric` before\n`make_symmetric(M)`, function name says it all.\n\nRather than importing\n\n```\nimport sage.combinat.integer_vector\n```\nand using `sage.combinat.integer_vector.IntegerVectors`, instead import\n\n```\nfrom sage.combinat.integer_vector import IntegerVectors\n```\nand then use `IntegerVectors`.",
    "created_at": "2020-06-18T03:28:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586497",
    "user": "https://github.com/slel"
}
```

<a id='comment:1'></a>Remove space before closing parenthesis:

```
- def symmetric_matrices(self, f, g=None ):
+ def symmetric_matrices(self, f, g=None):
```

Typo: doesn't contains -> doesn't contain.

Use a space after each comma in code,
and around `+` signs.

Use double backticks, e.g. ```f``` or ```ValueError```
for code formatting in docstrings.

Typo "funcition" -> function.

Use code formatting for `None`:
`if it is None` -> `if it is ``None```

```
- skew-symmetric matrices:
+ Skew-symmetric matrices:
```

Typo: `MetricSpace` -> `MatrixSpace`.

Hint: after making changes, rebuild Sage and test with

```
sage -t src/sage/matrix/matrix_space.py
```
before pushing. That would catch things such as `MetricSpace`.

Replace this doctest whose output is hard to parse:

```
sage: gen = MS.symmetric_matrices(f)
sage: for M in gen:
....:     print(M)
```
by this one whose output takes up less space and is easier to parse:

```
sage: list(MS.symmetric_matrices(f))
```

Likewise, replace this:

```
sage: gen = MS.symmetric_matrices(f)
sage: i = 0
sage: for M in gen:
....:     i+= 1
....:     print(M)
....:     if i == 3: break
```
with this more concise:

```
sage: gen = MS.symmetric_matrices(f)
sage: [next(gen) for _ in range(3)]
```

Remove spaces around `M` in `def make_symmetric( M ):`.

Simplify "can't have symmetric matrices if they are not square"
to "symmetric matrices must be square" or "only square matrices
can be symmetric".

Use a space after `#` for comments, for instance:

```
- #When the base ring is not finite,
+ # When the base ring is not finite,
```

For inline comments, double space before `#` and single space after.
For instance:

```
matrix_entries = []  # entries of matrix with lower half 0
```

No need to comment `#make M symmetric` before
`make_symmetric(M)`, function name says it all.

Rather than importing

```
import sage.combinat.integer_vector
```
and using `sage.combinat.integer_vector.IntegerVectors`, instead import

```
from sage.combinat.integer_vector import IntegerVectors
```
and then use `IntegerVectors`.



---

archive/issue_comments_586498.json:
```json
{
    "body": "<a id='comment:2'></a>The [PEP-0008 Python style guide](https://www.python.org/dev/peps/pep-0008/)\nand [PEP-0257 Docstring conventions](https://www.python.org/dev/peps/pep-0257/)\nare recommended reading.\n\nI should read them again too, I realise I need a refresher on some points there.",
    "created_at": "2020-06-18T03:43:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586498",
    "user": "https://github.com/slel"
}
```

<a id='comment:2'></a>The [PEP-0008 Python style guide](https://www.python.org/dev/peps/pep-0008/)
and [PEP-0257 Docstring conventions](https://www.python.org/dev/peps/pep-0257/)
are recommended reading.

I should read them again too, I realise I need a refresher on some points there.



---

archive/issue_comments_586499.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-18T12:53:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586499",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_586500.json:
```json
{
    "body": "Changing commit from \"a24e6a07971f44715896523d15b8c61633ef9e52\" to \"9b5145b551a552ece2f31c0cf6a42b7c10d08f89\"",
    "created_at": "2020-06-18T12:53:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586500",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a24e6a07971f44715896523d15b8c61633ef9e52" to "9b5145b551a552ece2f31c0cf6a42b7c10d08f89"



---

archive/issue_comments_586501.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-06-18T12:53:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586501",
    "user": "https://github.com/Ivo-Maffei"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_586502.json:
```json
{
    "body": "Changing author from \"gh-Ivo-Maffei\" to \"Ivo Maffei\"",
    "created_at": "2020-06-18T12:53:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586502",
    "user": "https://github.com/Ivo-Maffei"
}
```

Changing author from "gh-Ivo-Maffei" to "Ivo Maffei"



---

archive/issue_comments_586503.json:
```json
{
    "body": "<a id='comment:5'></a>Thanks for the detailed review.\nI think I fixed all formatting issues now.\nI also took the liberty to change a bit the `__iter__` method.",
    "created_at": "2020-06-18T12:55:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586503",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:5'></a>Thanks for the detailed review.
I think I fixed all formatting issues now.
I also took the liberty to change a bit the `__iter__` method.



---

archive/issue_comments_586504.json:
```json
{
    "body": "<a id='comment:6'></a>Use `is None` to test if something is `None`:\n\n```\n- if g == None:\n+ if g is None:\n```\n\nI would also use `f=None` to mean `f` is the identity --\ngiving the standard \"symmetric\" matrices:\n\n```\nif f is None:\n    f = lambda x: x\n```\n\nI would write the input as:\n\n```\n- ``f`` -- function or ``None`` (optional; default: ``None``);\n  if ``None``, use the identity function\n\n- ``g`` -- function or ``None`` (optional; default: ``None``);\n  if ``None``, use the same function as for ``f``\n```\n\nNeed to decide what symmetric should mean\n- Among possible definitions:\n  - subdiagonal entries are images by ``f`` of the\n    corresponding superdiagonal entries, i.e.\n    for any `i < j` we have `A[j,i] = f(A[i,j])`\n  - nondiagonal entries are images by ``f``\n    of their mirror entries, i.e.\n    for any `i != j` we have `A[j,i] = f(A[i,j])`\n- These are the same if `f` is an involution;\n  if that is assumed it needs to be said\n- Accordingly, do all or only half the checks\n\nI would avoid formulas in the docstring's first sentence\nand clarify in a second sentence:\n\n```\nReturn a generator of all matrices in this matrix space\nthat are \"symmetric\" as defined by `f` and `g`.\n\nThis means subdiagonal entries are images by ``f``\nof the corresponding superdiagonal entries, i.e.\nfor any ``i < j`` we have ``A[j,i] = f(A[i,j])``,\nand diagonal elements are stable by ``g`` ,\ni.e. for any ``i`` we have ``A[i,i] = g(A[i,i])``.\n\nThe default value of ``None`` for ``f`` means\n``f`` is the identity, and the default value\nof ``None`` for ``g`` means ``g`` is ``f``.\n```\n\nNeed `::` here to start the doctest block:\n\n```\nSkew-symmetric matrices::\n```\n\nI would use `v` rather than `iv` for the loop variable.\n\nComments could be more concise:\n\n```\n- # If the number of entries is zero, then just\n- # yield the empty matrix in that case and return\n+ # If no entries, yield empty matrix and return\n  if number_of_entries == 0:\n      yield self(0)\n      return\n```\n\n```\n- # When the base ring is not finite, then we should go\n- # through and yield the matrices by \"weight\", which is\n- # the total number of iterations that need to be done\n- # on the base ring to reach the matrix.\n+ # For infinite rings, yield matrices by \"weight\",\n+ # i.e. by number of iterations needed to reach them.\n```\n\n```\n- # In the finite case, we do a similar thing except that\n- # instead of checking if the diagonal is correct after creating the vector\n- # we can select all possible diagonal elements a priori\n+ For finite rings, allow all ring elements on the diagonal a priori.\n```",
    "created_at": "2020-06-18T15:44:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586504",
    "user": "https://github.com/slel"
}
```

<a id='comment:6'></a>Use `is None` to test if something is `None`:

```
- if g == None:
+ if g is None:
```

I would also use `f=None` to mean `f` is the identity --
giving the standard "symmetric" matrices:

```
if f is None:
    f = lambda x: x
```

I would write the input as:

```
- ``f`` -- function or ``None`` (optional; default: ``None``);
  if ``None``, use the identity function

- ``g`` -- function or ``None`` (optional; default: ``None``);
  if ``None``, use the same function as for ``f``
```

Need to decide what symmetric should mean
- Among possible definitions:
  - subdiagonal entries are images by ``f`` of the
    corresponding superdiagonal entries, i.e.
    for any `i < j` we have `A[j,i] = f(A[i,j])`
  - nondiagonal entries are images by ``f``
    of their mirror entries, i.e.
    for any `i != j` we have `A[j,i] = f(A[i,j])`
- These are the same if `f` is an involution;
  if that is assumed it needs to be said
- Accordingly, do all or only half the checks

I would avoid formulas in the docstring's first sentence
and clarify in a second sentence:

```
Return a generator of all matrices in this matrix space
that are "symmetric" as defined by `f` and `g`.

This means subdiagonal entries are images by ``f``
of the corresponding superdiagonal entries, i.e.
for any ``i < j`` we have ``A[j,i] = f(A[i,j])``,
and diagonal elements are stable by ``g`` ,
i.e. for any ``i`` we have ``A[i,i] = g(A[i,i])``.

The default value of ``None`` for ``f`` means
``f`` is the identity, and the default value
of ``None`` for ``g`` means ``g`` is ``f``.
```

Need `::` here to start the doctest block:

```
Skew-symmetric matrices::
```

I would use `v` rather than `iv` for the loop variable.

Comments could be more concise:

```
- # If the number of entries is zero, then just
- # yield the empty matrix in that case and return
+ # If no entries, yield empty matrix and return
  if number_of_entries == 0:
      yield self(0)
      return
```

```
- # When the base ring is not finite, then we should go
- # through and yield the matrices by "weight", which is
- # the total number of iterations that need to be done
- # on the base ring to reach the matrix.
+ # For infinite rings, yield matrices by "weight",
+ # i.e. by number of iterations needed to reach them.
```

```
- # In the finite case, we do a similar thing except that
- # instead of checking if the diagonal is correct after creating the vector
- # we can select all possible diagonal elements a priori
+ For finite rings, allow all ring elements on the diagonal a priori.
```



---

archive/issue_comments_586505.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,2 @@\n-Added a method to the `MatrixSpace` class that returns a generator over the symmetric matrices in the space. The \"symmetry\" is defined by the user.\n+We add a method to the `MatrixSpace` class that returns a generator over\n+the symmetric matrices in the space. The \"symmetry\" is defined by the user.\n``````\n",
    "created_at": "2020-06-18T15:44:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586505",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,2 @@
-Added a method to the `MatrixSpace` class that returns a generator over the symmetric matrices in the space. The "symmetry" is defined by the user.
+We add a method to the `MatrixSpace` class that returns a generator over
+the symmetric matrices in the space. The "symmetry" is defined by the user.
``````




---

archive/issue_comments_586506.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-30T11:58:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586506",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_586507.json:
```json
{
    "body": "Changing commit from \"9b5145b551a552ece2f31c0cf6a42b7c10d08f89\" to \"08fc8931f350c764b29aa1f76ac2a504de7cac5b\"",
    "created_at": "2020-06-30T11:58:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586507",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9b5145b551a552ece2f31c0cf6a42b7c10d08f89" to "08fc8931f350c764b29aa1f76ac2a504de7cac5b"



---

archive/issue_comments_586508.json:
```json
{
    "body": "<a id='comment:8'></a>Thanks for the review!! I apologise for the delay. I got caught in other tickets.",
    "created_at": "2020-06-30T11:59:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586508",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:8'></a>Thanks for the review!! I apologise for the delay. I got caught in other tickets.



---

archive/issue_comments_586509.json:
```json
{
    "body": "<a id='comment:9'></a>reviewer name?",
    "created_at": "2020-08-10T14:36:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586509",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:9'></a>reviewer name?



---

archive/issue_comments_586510.json:
```json
{
    "body": "<a id='comment:10'></a>`@`slelievre (Samuel Leli\u00e8vre) did some reviewing, but never green lighted this. They probably never felt sure about the code.",
    "created_at": "2020-08-10T15:07:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586510",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:10'></a>`@`slelievre (Samuel Lelièvre) did some reviewing, but never green lighted this. They probably never felt sure about the code.



---

archive/issue_comments_586511.json:
```json
{
    "body": "<a id='comment:11'></a>Matthias, does it fit into the tensors stuff you are working on?",
    "created_at": "2020-08-10T15:10:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586511",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:11'></a>Matthias, does it fit into the tensors stuff you are working on?



---

archive/issue_comments_586512.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Samuel Leli\u00e8vre\"",
    "created_at": "2020-08-10T15:10:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586512",
    "user": "https://github.com/dimpase"
}
```

Changing reviewer from "" to "Samuel Lelièvre"



---

archive/issue_comments_586513.json:
```json
{
    "body": "Changing reviewer from \"Samuel Leli\u00e8vre\" to \"Samuel Leli\u00e8vre, ...\"",
    "created_at": "2020-08-10T15:11:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586513",
    "user": "https://github.com/dimpase"
}
```

Changing reviewer from "Samuel Lelièvre" to "Samuel Lelièvre, ..."



---

archive/issue_comments_586514.json:
```json
{
    "body": "<a id='comment:13'></a>Yes, I think it does. In #30229 I define free modules of tensors with prescribed index symmetries. This covers the case of symmetric and antisymmetric matrices, of course. There is a basis and so if the base ring is an enumerated set, so is the module.",
    "created_at": "2020-08-10T15:26:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586514",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>Yes, I think it does. In #30229 I define free modules of tensors with prescribed index symmetries. This covers the case of symmetric and antisymmetric matrices, of course. There is a basis and so if the base ring is an enumerated set, so is the module.



---

archive/issue_comments_586515.json:
```json
{
    "body": "<a id='comment:14'></a>I think that skew-symmetric matrices are requested often enough for them to warrant a named function (which would just forward naturally to what you altready implemented).",
    "created_at": "2020-08-10T15:45:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586515",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:14'></a>I think that skew-symmetric matrices are requested often enough for them to warrant a named function (which would just forward naturally to what you altready implemented).



---

archive/issue_comments_586516.json:
```json
{
    "body": "<a id='comment:15'></a>I agree that it would be nice to have facilities in matrix space for symmetric and skew-symmetric matrices, but I think it would be better to define the subspaces/modules of these matrices than to define enumeration methods. Enumeration comes for free from our general facilities for enumerated sets.",
    "created_at": "2020-08-10T15:49:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586516",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>I agree that it would be nice to have facilities in matrix space for symmetric and skew-symmetric matrices, but I think it would be better to define the subspaces/modules of these matrices than to define enumeration methods. Enumeration comes for free from our general facilities for enumerated sets.



---

archive/issue_comments_586517.json:
```json
{
    "body": "<a id='comment:16'></a>So you suggest having a general `SymmetricMatrixSpace` class which extends `MatrixSpace` or having the \"standard\" `SymmetricMatrixSpace` and `SkewSymmetricMatrixSpace` classes and leaving everything else to an enumeration method?",
    "created_at": "2020-08-10T16:20:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586517",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:16'></a>So you suggest having a general `SymmetricMatrixSpace` class which extends `MatrixSpace` or having the "standard" `SymmetricMatrixSpace` and `SkewSymmetricMatrixSpace` classes and leaving everything else to an enumeration method?



---

archive/issue_comments_586518.json:
```json
{
    "body": "<a id='comment:17'></a>I don't think new classes are really needed. Instead, just methods that construct submodules.\n\nUnfortunately, currently `MatrixSpace` does not fully implement the category of modules with bases (see (`sage.categories.modules_with_basis`) that it claims to belong to.\n\n```\nsage: M = MatrixSpace(QQ, 3, 3)\nsage: M in ModulesWithBasis(QQ)\nTrue\nsage: A = M([[0, 0, 1], [0, 0, 0], [0, 0, 0]])\nsage: A\n[0 0 1]\n[0 0 0]\n[0 0 0]\nsage: M.submodule([A])\nAttributeError: 'MatrixSpace_with_category' object has no attribute 'get_order'\n```\n\nI would suggest to start with fixing the implementation of this functionality of `MatrixSpace`.\n\nThen in the next step, you can define the methods that construct the specific modules that you need.",
    "created_at": "2020-08-10T16:36:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586518",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>I don't think new classes are really needed. Instead, just methods that construct submodules.

Unfortunately, currently `MatrixSpace` does not fully implement the category of modules with bases (see (`sage.categories.modules_with_basis`) that it claims to belong to.

```
sage: M = MatrixSpace(QQ, 3, 3)
sage: M in ModulesWithBasis(QQ)
True
sage: A = M([[0, 0, 1], [0, 0, 0], [0, 0, 0]])
sage: A
[0 0 1]
[0 0 0]
[0 0 0]
sage: M.submodule([A])
AttributeError: 'MatrixSpace_with_category' object has no attribute 'get_order'
```

I would suggest to start with fixing the implementation of this functionality of `MatrixSpace`.

Then in the next step, you can define the methods that construct the specific modules that you need.



---

archive/issue_comments_586519.json:
```json
{
    "body": "<a id='comment:18'></a>I am inclined to wave this through, as it's needed for Ivo's GSoC project, and the time is tight.",
    "created_at": "2020-08-10T16:54:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586519",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:18'></a>I am inclined to wave this through, as it's needed for Ivo's GSoC project, and the time is tight.



---

archive/issue_comments_586520.json:
```json
{
    "body": "<a id='comment:19'></a>I don't object to adding these specific enumeration methods,\nbut I think adding this interface with the generality of this `f` and `g` thing is not a good idea, because a future implementation along the lines that we just discussed will not be able to support general f and g.",
    "created_at": "2020-08-10T16:59:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586520",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:19'></a>I don't object to adding these specific enumeration methods,
but I think adding this interface with the generality of this `f` and `g` thing is not a good idea, because a future implementation along the lines that we just discussed will not be able to support general f and g.



---

archive/issue_comments_586521.json:
```json
{
    "body": "<a id='comment:20'></a>See #30276 for the type of symmetry that we hope to support.",
    "created_at": "2020-08-10T17:05:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586521",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'></a>See #30276 for the type of symmetry that we hope to support.



---

archive/issue_comments_586522.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-08-11T00:49:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586522",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_586523.json:
```json
{
    "body": "<a id='comment:21'></a>I usually thing of the sub/superdiagonal matrices as just being the entries immediately off the diagonal, not in all of the lower/upper triangular part.\n\nA lot of what this method does is really confusing to me. The algorithm should be explained in the docstring, in particular the order which it is iterating through everything.\n\nI also somewhat agree with Matthias here. I would first expect this to return a subspace, which doesn't work for generic `f` and `g`. Plus the word \"symmetric\" seems misleading to me for generic `f` and `g`. Perhaps as a middle ground, we call this `symmetric_matrices_iterator()`. \n\nComments from a quick look at the code:\n\nI don't see why you need to do `v2.clone()` since you never modify it. You simply get a sublist that to reassign to `v`.\n\n`self(0)` -> `self.zero()`.\n\nThis is very strange: `for _ in range(nrows):`. I don't understand this code block.",
    "created_at": "2020-08-11T00:49:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586523",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:21'></a>I usually thing of the sub/superdiagonal matrices as just being the entries immediately off the diagonal, not in all of the lower/upper triangular part.

A lot of what this method does is really confusing to me. The algorithm should be explained in the docstring, in particular the order which it is iterating through everything.

I also somewhat agree with Matthias here. I would first expect this to return a subspace, which doesn't work for generic `f` and `g`. Plus the word "symmetric" seems misleading to me for generic `f` and `g`. Perhaps as a middle ground, we call this `symmetric_matrices_iterator()`. 

Comments from a quick look at the code:

I don't see why you need to do `v2.clone()` since you never modify it. You simply get a sublist that to reassign to `v`.

`self(0)` -> `self.zero()`.

This is very strange: `for _ in range(nrows):`. I don't understand this code block.



---

archive/issue_comments_586524.json:
```json
{
    "body": "<a id='comment:22'></a>I suggest to implement here only the minimum needed for the GSoC tickets to be done (on a different branch, to preserve this, I suppose).",
    "created_at": "2020-08-11T11:12:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586524",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:22'></a>I suggest to implement here only the minimum needed for the GSoC tickets to be done (on a different branch, to preserve this, I suppose).



---

archive/issue_comments_586525.json:
```json
{
    "body": "mutable matrices issue full traceback",
    "created_at": "2020-08-11T12:22:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586525",
    "user": "https://github.com/Ivo-Maffei"
}
```

mutable matrices issue full traceback



---

archive/issue_comments_586526.json:
```json
{
    "body": "<a id='comment:23'></a>Attachment [traceback.txt](tarball://root/attachments/some-uuid/ticket29886/traceback.txt) by @Ivo-Maffei created at 2020-08-11 12:22:11\n\nI spent some time looking at the `submodule` method to see if there was some easy fix. I think I got 90% of the way.\nThere were some issues in the method `sage.categories.finite_dimensional_modules_with_basis.echelon_form`.\n\n```diff\ndiff --git a/src/sage/categories/finite_dimensional_modules_with_basis.py b/src/sage/categories/finite_dimensional_modules_with_basis.py\n\n--- a/src/sage/categories/finite_dimensional_modules_with_basis.py\n+++ b/src/sage/categories/finite_dimensional_modules_with_basis.py\n@@ -337,10 +337,25 @@ class FiniteDimensionalModulesWithBasis(CategoryWithAxiom_over_base_ring):\n                 sage: C.echelon_form([x[0] - x[1], 2*x[1] - 2*x[2], x[0] - x[2]])\n                 [x[0] - x[2], x[1] - x[2]]\n             \"\"\"\n             if order is not None:\n-                order = self._compute_support_order(order)\n+                order = self._compute_support_order(elements, order)\n+\n+            # order may be an ordering of the support of elements\n+            # hence not an ordering of the whole basis as needed below\n+            # so we extend order to an ordering of the whole basis\n+            orderList = list(order)\n+            for k in self.basis().keys():\n+                if k not in orderList:\n+                    orderList.append(k)\n+\n+            full_order = tuple(orderList)\n+\n+            \n             from sage.matrix.constructor import matrix\n-            mat = matrix(self.base_ring(), [g._vector_(order=order) for g in elements])\n+            mat = matrix(self.base_ring(), [g._vector_(order=full_order) for g in elements])\n             # Echelonizing a matrix over a field returned the rref\n             if row_reduced and self.base_ring() not in Fields():\n                 try:\n```\n\nAfter applying that patch there is an issue with mutable matrices not being hashable. The issue seems to lie in `sage.misc.cachefunc` and I don't have enough knowledge of python or the inner working of Sage to proceed.\n\nHonestly, I had a huge amount of issues with matrices/vectors not being hashable, so I wonder why aren't they immutable by default.",
    "created_at": "2020-08-11T12:22:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586526",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:23'></a>Attachment [traceback.txt](tarball://root/attachments/some-uuid/ticket29886/traceback.txt) by @Ivo-Maffei created at 2020-08-11 12:22:11

I spent some time looking at the `submodule` method to see if there was some easy fix. I think I got 90% of the way.
There were some issues in the method `sage.categories.finite_dimensional_modules_with_basis.echelon_form`.

```diff
diff --git a/src/sage/categories/finite_dimensional_modules_with_basis.py b/src/sage/categories/finite_dimensional_modules_with_basis.py

--- a/src/sage/categories/finite_dimensional_modules_with_basis.py
+++ b/src/sage/categories/finite_dimensional_modules_with_basis.py
@@ -337,10 +337,25 @@ class FiniteDimensionalModulesWithBasis(CategoryWithAxiom_over_base_ring):
                 sage: C.echelon_form([x[0] - x[1], 2*x[1] - 2*x[2], x[0] - x[2]])
                 [x[0] - x[2], x[1] - x[2]]
             """
             if order is not None:
-                order = self._compute_support_order(order)
+                order = self._compute_support_order(elements, order)
+
+            # order may be an ordering of the support of elements
+            # hence not an ordering of the whole basis as needed below
+            # so we extend order to an ordering of the whole basis
+            orderList = list(order)
+            for k in self.basis().keys():
+                if k not in orderList:
+                    orderList.append(k)
+
+            full_order = tuple(orderList)
+
+            
             from sage.matrix.constructor import matrix
-            mat = matrix(self.base_ring(), [g._vector_(order=order) for g in elements])
+            mat = matrix(self.base_ring(), [g._vector_(order=full_order) for g in elements])
             # Echelonizing a matrix over a field returned the rref
             if row_reduced and self.base_ring() not in Fields():
                 try:
```

After applying that patch there is an issue with mutable matrices not being hashable. The issue seems to lie in `sage.misc.cachefunc` and I don't have enough knowledge of python or the inner working of Sage to proceed.

Honestly, I had a huge amount of issues with matrices/vectors not being hashable, so I wonder why aren't they immutable by default.



---

archive/issue_comments_586527.json:
```json
{
    "body": "<a id='comment:24'></a>Replying to [dimpase](#comment%3A22):\n> I suggest to implement here only the minimum needed for the GSoC tickets to be done (on a different branch, to preserve this, I suppose).\n\n\nI have opened #30334 for the `MatrixSpace.submodule` issue.",
    "created_at": "2020-08-11T14:02:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586527",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'></a>Replying to [dimpase](#comment%3A22):
> I suggest to implement here only the minimum needed for the GSoC tickets to be done (on a different branch, to preserve this, I suppose).


I have opened #30334 for the `MatrixSpace.submodule` issue.



---

archive/issue_comments_586528.json:
```json
{
    "body": "<a id='comment:25'></a>#30334 is not urgent. \n\nGiven that `submodule` does not work, my suggestion for the present ticket would be the following. First implement a method named perhaps `MatrixSpace.symmetric_submodule_basis(phase=1)`. As in #30276, for `phase=1`, return a basis of the submodule of the symmetric matrices, and for `phase=-1`, skew-symmetric matrices. Error for all other values of `phase`.",
    "created_at": "2020-08-11T14:16:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586528",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'></a>#30334 is not urgent. 

Given that `submodule` does not work, my suggestion for the present ticket would be the following. First implement a method named perhaps `MatrixSpace.symmetric_submodule_basis(phase=1)`. As in #30276, for `phase=1`, return a basis of the submodule of the symmetric matrices, and for `phase=-1`, skew-symmetric matrices. Error for all other values of `phase`.



---

archive/issue_comments_586529.json:
```json
{
    "body": "<a id='comment:26'></a>I don't fully understand #30334. What I'm using this method for, is to generate skew-symmetric matrices with diagonal entries 0 (the standard definition `A^T = -A` would allow diagonal entries 1 in GF(2)) and Hermitian matrices.\nCan these be achieved for some `phase`?",
    "created_at": "2020-08-11T15:59:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586529",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:26'></a>I don't fully understand #30334. What I'm using this method for, is to generate skew-symmetric matrices with diagonal entries 0 (the standard definition `A^T = -A` would allow diagonal entries 1 in GF(2)) and Hermitian matrices.
Can these be achieved for some `phase`?



---

archive/issue_comments_586530.json:
```json
{
    "body": "<a id='comment:27'></a>That's important information - from looking at the code it was not clear to me what generality you need. \n\nFor Hermitian matrices - over what field?",
    "created_at": "2020-08-11T16:11:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586530",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>That's important information - from looking at the code it was not clear to me what generality you need. 

For Hermitian matrices - over what field?



---

archive/issue_comments_586531.json:
```json
{
    "body": "<a id='comment:28'></a>Replying to [mkoeppe](#comment%3A27):\n> For Hermitian matrices - over what field?\n\nFinite fields `GF(r^2)`.  Practically only `GF(4)` and `GF(9)`.",
    "created_at": "2020-08-11T16:17:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586531",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:28'></a>Replying to [mkoeppe](#comment%3A27):
> For Hermitian matrices - over what field?

Finite fields `GF(r^2)`.  Practically only `GF(4)` and `GF(9)`.



---

archive/issue_comments_586532.json:
```json
{
    "body": "<a id='comment:29'></a>Unfortunately the Hermitian matrices over a field k do not form a subspace (over k)...",
    "created_at": "2020-08-11T16:45:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586532",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'></a>Unfortunately the Hermitian matrices over a field k do not form a subspace (over k)...



---

archive/issue_comments_586533.json:
```json
{
    "body": "<a id='comment:30'></a>They form a subgroup and they seem quite common... \nIf you think there is no place for a generator of some sort here, then I'll just have the hermitian matrices created where I use them, so that nothing is exposed to the user.",
    "created_at": "2020-08-11T17:26:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586533",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:30'></a>They form a subgroup and they seem quite common... 
If you think there is no place for a generator of some sort here, then I'll just have the hermitian matrices created where I use them, so that nothing is exposed to the user.



---

archive/issue_comments_586534.json:
```json
{
    "body": "<a id='comment:31'></a>well, Hermitian matrices form a subspace over the fixed (by the automorphism) subfield. Probably our matrices aren't flexible enough for this, though.",
    "created_at": "2020-08-11T21:32:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586534",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:31'></a>well, Hermitian matrices form a subspace over the fixed (by the automorphism) subfield. Probably our matrices aren't flexible enough for this, though.



---

archive/issue_comments_586535.json:
```json
{
    "body": "<a id='comment:32'></a>Replying to [dimpase](#comment%3A22):\n> I suggest to implement here only the minimum needed for the GSoC tickets to be done (on a different branch, to preserve this, I suppose).\n\n\nTo move forward, I'd suggest to move this methods to the code where they are needed. It can be be refactored later when we figure out the right framework.",
    "created_at": "2020-08-13T17:39:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586535",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:32'></a>Replying to [dimpase](#comment%3A22):
> I suggest to implement here only the minimum needed for the GSoC tickets to be done (on a different branch, to preserve this, I suppose).


To move forward, I'd suggest to move this methods to the code where they are needed. It can be be refactored later when we figure out the right framework.



---

archive/issue_events_076617.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29886#event-76617"
}
```



---

archive/issue_events_076618.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29886#event-76618"
}
```



---

archive/issue_events_076619.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29886#event-76619"
}
```



---

archive/issue_comments_586536.json:
```json
{
    "body": "<a id='comment:34'></a>Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586536",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:34'></a>Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_586537.json:
```json
{
    "body": "<a id='comment:35'></a>Submodules of matrix spaces are taken care of at #31995 (superseding #30334).",
    "created_at": "2021-07-03T10:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586537",
    "user": "https://github.com/slel"
}
```

<a id='comment:35'></a>Submodules of matrix spaces are taken care of at #31995 (superseding #30334).



---

archive/issue_events_076620.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29886#event-76620"
}
```



---

archive/issue_events_076621.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29886#event-76621"
}
```



---

archive/issue_comments_586538.json:
```json
{
    "body": "<a id='comment:36'></a>Setting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29886#issuecomment-586538",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:36'></a>Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_076622.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29886#event-76622"
}
```



---

archive/issue_events_076623.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29886#event-76623"
}
```



---

archive/issue_events_076624.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:27:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29886#event-76624"
}
```



---

archive/issue_events_076625.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:27:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29886#event-76625"
}
```



---

archive/issue_events_076626.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29886#event-76626"
}
```



---

archive/issue_events_076627.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29886",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29886#event-76627"
}
```
