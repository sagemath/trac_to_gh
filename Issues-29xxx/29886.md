# Issue 29886: Add generator of symmetric matrices

archive/issues_029649.json:
```json
{
    "assignees": [],
    "body": "We add a method to the `MatrixSpace` class that returns a generator over\nthe symmetric matrices in the space. The \"symmetry\" is defined by the user.\n\nCC:  @mkoeppe @tscrim\n\nKeywords: **symmetric_matrices matrix_spaces**\n\nBranch/Commit: **[u/gh-Ivo-Maffei/symmetric_matrices](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-Ivo-Maffei/symmetric_matrices) @ [08fc893](https://github.com/sagemath/sagetrac-mirror/commit/08fc8931f350c764b29aa1f76ac2a504de7cac5b)**\n\nReviewer: **Samuel Leli\u00e8vre, ...**\n\nAuthor: **Ivo Maffei**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29886_\n\n",
    "created_at": "2020-06-17T17:37:07Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20linear%20algebra",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Add generator of symmetric matrices",
    "type": "issue",
    "updated_at": "2022-09-19T18:58:47Z",
    "url": "https://github.com/sagemath/sage/issues/29886",
    "user": "https://github.com/Ivo-Maffei"
}
```
We add a method to the `MatrixSpace` class that returns a generator over
the symmetric matrices in the space. The "symmetry" is defined by the user.

CC:  @mkoeppe @tscrim

Keywords: **symmetric_matrices matrix_spaces**

Branch/Commit: **[u/gh-Ivo-Maffei/symmetric_matrices](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-Ivo-Maffei/symmetric_matrices) @ [08fc893](https://github.com/sagemath/sagetrac-mirror/commit/08fc8931f350c764b29aa1f76ac2a504de7cac5b)**

Reviewer: **Samuel Leli√®vre, ...**

Author: **Ivo Maffei**

_Issue created by migration from https://trac.sagemath.org/ticket/29886_





---

archive/issue_events_379545.json:
```json
{
    "actor": "https://github.com/Ivo-Maffei",
    "created_at": "2020-06-17T17:37:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29886#event-379545"
}
```



---

archive/issue_events_379546.json:
```json
{
    "actor": "https://github.com/Ivo-Maffei",
    "created_at": "2020-06-17T17:37:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20linear%20algebra",
    "label_color": "0000ff",
    "label_name": "component: linear algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29886#event-379546"
}
```



---

archive/issue_events_379547.json:
```json
{
    "actor": "https://github.com/Ivo-Maffei",
    "created_at": "2020-06-17T17:37:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29886#event-379547"
}
```



---

archive/issue_events_379548.json:
```json
{
    "actor": "https://github.com/Ivo-Maffei",
    "created_at": "2020-06-17T17:37:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29886#event-379548"
}
```



---

archive/issue_comments_475261.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nRemove space before closing parenthesis:\n\n```\n- def symmetric_matrices(self, f, g=None ):\n+ def symmetric_matrices(self, f, g=None):\n```\n\nTypo: doesn't contains -> doesn't contain.\n\nUse a space after each comma in code,\nand around `+` signs.\n\nUse double backticks, e.g. <code>\\`\\`f\\`\\`</code> or <code>\\`\\`ValueError\\`\\`</code>\nfor code formatting in docstrings.\n\nTypo \"funcition\" -> function.\n\nUse code formatting for `None`:\n`if it is None` -> <code>if it is \\`\\`None\\`\\`</code>\n\n```\n- skew-symmetric matrices:\n+ Skew-symmetric matrices:\n```\n\nTypo: `MetricSpace` -> `MatrixSpace`.\n\nHint: after making changes, rebuild Sage and test with\n\n```\nsage -t src/sage/matrix/matrix_space.py\n```\nbefore pushing. That would catch things such as `MetricSpace`.\n\nReplace this doctest whose output is hard to parse:\n\n```\nsage: gen = MS.symmetric_matrices(f)\nsage: for M in gen:\n....:     print(M)\n```\nby this one whose output takes up less space and is easier to parse:\n\n```\nsage: list(MS.symmetric_matrices(f))\n```\n\nLikewise, replace this:\n\n```\nsage: gen = MS.symmetric_matrices(f)\nsage: i = 0\nsage: for M in gen:\n....:     i+= 1\n....:     print(M)\n....:     if i == 3: break\n```\nwith this more concise:\n\n```\nsage: gen = MS.symmetric_matrices(f)\nsage: [next(gen) for _ in range(3)]\n```\n\nRemove spaces around `M` in `def make_symmetric( M ):`.\n\nSimplify \"can't have symmetric matrices if they are not square\"\nto \"symmetric matrices must be square\" or \"only square matrices\ncan be symmetric\".\n\nUse a space after `#` for comments, for instance:\n\n```\n- #When the base ring is not finite,\n+ # When the base ring is not finite,\n```\n\nFor inline comments, double space before `#` and single space after.\nFor instance:\n\n```\nmatrix_entries = []  # entries of matrix with lower half 0\n```\n\nNo need to comment `#make M symmetric` before\n`make_symmetric(M)`, function name says it all.\n\nRather than importing\n\n```\nimport sage.combinat.integer_vector\n```\nand using `sage.combinat.integer_vector.IntegerVectors`, instead import\n\n```\nfrom sage.combinat.integer_vector import IntegerVectors\n```\nand then use `IntegerVectors`.",
    "created_at": "2020-06-18T03:28:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475261",
    "user": "https://github.com/slel"
}
```

<a id='comment:1'>Comment 1:</a>
Remove space before closing parenthesis:

```
- def symmetric_matrices(self, f, g=None ):
+ def symmetric_matrices(self, f, g=None):
```

Typo: doesn't contains -> doesn't contain.

Use a space after each comma in code,
and around `+` signs.

Use double backticks, e.g. <code>\`\`f\`\`</code> or <code>\`\`ValueError\`\`</code>
for code formatting in docstrings.

Typo "funcition" -> function.

Use code formatting for `None`:
`if it is None` -> <code>if it is \`\`None\`\`</code>

```
- skew-symmetric matrices:
+ Skew-symmetric matrices:
```

Typo: `MetricSpace` -> `MatrixSpace`.

Hint: after making changes, rebuild Sage and test with

```
sage -t src/sage/matrix/matrix_space.py
```
before pushing. That would catch things such as `MetricSpace`.

Replace this doctest whose output is hard to parse:

```
sage: gen = MS.symmetric_matrices(f)
sage: for M in gen:
....:     print(M)
```
by this one whose output takes up less space and is easier to parse:

```
sage: list(MS.symmetric_matrices(f))
```

Likewise, replace this:

```
sage: gen = MS.symmetric_matrices(f)
sage: i = 0
sage: for M in gen:
....:     i+= 1
....:     print(M)
....:     if i == 3: break
```
with this more concise:

```
sage: gen = MS.symmetric_matrices(f)
sage: [next(gen) for _ in range(3)]
```

Remove spaces around `M` in `def make_symmetric( M ):`.

Simplify "can't have symmetric matrices if they are not square"
to "symmetric matrices must be square" or "only square matrices
can be symmetric".

Use a space after `#` for comments, for instance:

```
- #When the base ring is not finite,
+ # When the base ring is not finite,
```

For inline comments, double space before `#` and single space after.
For instance:

```
matrix_entries = []  # entries of matrix with lower half 0
```

No need to comment `#make M symmetric` before
`make_symmetric(M)`, function name says it all.

Rather than importing

```
import sage.combinat.integer_vector
```
and using `sage.combinat.integer_vector.IntegerVectors`, instead import

```
from sage.combinat.integer_vector import IntegerVectors
```
and then use `IntegerVectors`.



---

archive/issue_comments_475262.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nThe [PEP-0008 Python style guide](https://www.python.org/dev/peps/pep-0008/)\nand [PEP-0257 Docstring conventions](https://www.python.org/dev/peps/pep-0257/)\nare recommended reading.\n\nI should read them again too, I realise I need a refresher on some points there.",
    "created_at": "2020-06-18T03:43:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475262",
    "user": "https://github.com/slel"
}
```

<a id='comment:2'>Comment 2:</a>
The [PEP-0008 Python style guide](https://www.python.org/dev/peps/pep-0008/)
and [PEP-0257 Docstring conventions](https://www.python.org/dev/peps/pep-0257/)
are recommended reading.

I should read them again too, I realise I need a refresher on some points there.



---

archive/issue_comments_475263.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b38de3b2ce0c4449e1826575d40ad2b3f582ad8\">1b38de3</a></td><td><code>fixed formatting</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9b5145b551a552ece2f31c0cf6a42b7c10d08f89\">9b5145b</a></td><td><code>removed trailing whitespaces</code></td></tr></table>\n",
    "created_at": "2020-06-18T12:53:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475263",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:3'>Comment 3:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b38de3b2ce0c4449e1826575d40ad2b3f582ad8">1b38de3</a></td><td><code>fixed formatting</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9b5145b551a552ece2f31c0cf6a42b7c10d08f89">9b5145b</a></td><td><code>removed trailing whitespaces</code></td></tr></table>




---

archive/issue_comments_475264.json:
```json
{
    "body": "Changed commit from **[a24e6a0](https://github.com/sagemath/sagetrac-mirror/commit/a24e6a07971f44715896523d15b8c61633ef9e52)** to **[9b5145b](https://github.com/sagemath/sagetrac-mirror/commit/9b5145b551a552ece2f31c0cf6a42b7c10d08f89)**",
    "created_at": "2020-06-18T12:53:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475264",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a24e6a0](https://github.com/sagemath/sagetrac-mirror/commit/a24e6a07971f44715896523d15b8c61633ef9e52)** to **[9b5145b](https://github.com/sagemath/sagetrac-mirror/commit/9b5145b551a552ece2f31c0cf6a42b7c10d08f89)**



---

archive/issue_events_379549.json:
```json
{
    "actor": "https://github.com/Ivo-Maffei",
    "created_at": "2020-06-18T12:53:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29886#event-379549"
}
```



---

archive/issue_comments_475265.json:
```json
{
    "body": "Changed author from **gh-Ivo-Maffei** to **Ivo Maffei**",
    "created_at": "2020-06-18T12:53:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475265",
    "user": "https://github.com/Ivo-Maffei"
}
```

Changed author from **gh-Ivo-Maffei** to **Ivo Maffei**



---

archive/issue_comments_475266.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nThanks for the detailed review.\nI think I fixed all formatting issues now.\nI also took the liberty to change a bit the `__iter__` method.",
    "created_at": "2020-06-18T12:55:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475266",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:5'>Comment 5:</a>
Thanks for the detailed review.
I think I fixed all formatting issues now.
I also took the liberty to change a bit the `__iter__` method.



---

archive/issue_comments_475267.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nUse `is None` to test if something is `None`:\n\n```\n- if g == None:\n+ if g is None:\n```\n\nI would also use `f=None` to mean `f` is the identity --\ngiving the standard \"symmetric\" matrices:\n\n```\nif f is None:\n    f = lambda x: x\n```\n\nI would write the input as:\n\n```\n- ``f`` -- function or ``None`` (optional; default: ``None``);\n  if ``None``, use the identity function\n\n- ``g`` -- function or ``None`` (optional; default: ``None``);\n  if ``None``, use the same function as for ``f``\n```\n\nNeed to decide what symmetric should mean\n- Among possible definitions:\n  - subdiagonal entries are images by ``f`` of the\n    corresponding superdiagonal entries, i.e.\n    for any `i < j` we have `A[j,i] = f(A[i,j])`\n  - nondiagonal entries are images by ``f``\n    of their mirror entries, i.e.\n    for any `i != j` we have `A[j,i] = f(A[i,j])`\n- These are the same if `f` is an involution;\n  if that is assumed it needs to be said\n- Accordingly, do all or only half the checks\n\nI would avoid formulas in the docstring's first sentence\nand clarify in a second sentence:\n\n```\nReturn a generator of all matrices in this matrix space\nthat are \"symmetric\" as defined by `f` and `g`.\n\nThis means subdiagonal entries are images by ``f``\nof the corresponding superdiagonal entries, i.e.\nfor any ``i < j`` we have ``A[j,i] = f(A[i,j])``,\nand diagonal elements are stable by ``g`` ,\ni.e. for any ``i`` we have ``A[i,i] = g(A[i,i])``.\n\nThe default value of ``None`` for ``f`` means\n``f`` is the identity, and the default value\nof ``None`` for ``g`` means ``g`` is ``f``.\n```\n\nNeed `::` here to start the doctest block:\n\n```\nSkew-symmetric matrices::\n```\n\nI would use `v` rather than `iv` for the loop variable.\n\nComments could be more concise:\n\n```\n- # If the number of entries is zero, then just\n- # yield the empty matrix in that case and return\n+ # If no entries, yield empty matrix and return\n  if number_of_entries == 0:\n      yield self(0)\n      return\n```\n\n```\n- # When the base ring is not finite, then we should go\n- # through and yield the matrices by \"weight\", which is\n- # the total number of iterations that need to be done\n- # on the base ring to reach the matrix.\n+ # For infinite rings, yield matrices by \"weight\",\n+ # i.e. by number of iterations needed to reach them.\n```\n\n```\n- # In the finite case, we do a similar thing except that\n- # instead of checking if the diagonal is correct after creating the vector\n- # we can select all possible diagonal elements a priori\n+ For finite rings, allow all ring elements on the diagonal a priori.\n```",
    "created_at": "2020-06-18T15:44:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475267",
    "user": "https://github.com/slel"
}
```

<a id='comment:6'>Comment 6:</a>
Use `is None` to test if something is `None`:

```
- if g == None:
+ if g is None:
```

I would also use `f=None` to mean `f` is the identity --
giving the standard "symmetric" matrices:

```
if f is None:
    f = lambda x: x
```

I would write the input as:

```
- ``f`` -- function or ``None`` (optional; default: ``None``);
  if ``None``, use the identity function

- ``g`` -- function or ``None`` (optional; default: ``None``);
  if ``None``, use the same function as for ``f``
```

Need to decide what symmetric should mean
- Among possible definitions:
  - subdiagonal entries are images by ``f`` of the
    corresponding superdiagonal entries, i.e.
    for any `i < j` we have `A[j,i] = f(A[i,j])`
  - nondiagonal entries are images by ``f``
    of their mirror entries, i.e.
    for any `i != j` we have `A[j,i] = f(A[i,j])`
- These are the same if `f` is an involution;
  if that is assumed it needs to be said
- Accordingly, do all or only half the checks

I would avoid formulas in the docstring's first sentence
and clarify in a second sentence:

```
Return a generator of all matrices in this matrix space
that are "symmetric" as defined by `f` and `g`.

This means subdiagonal entries are images by ``f``
of the corresponding superdiagonal entries, i.e.
for any ``i < j`` we have ``A[j,i] = f(A[i,j])``,
and diagonal elements are stable by ``g`` ,
i.e. for any ``i`` we have ``A[i,i] = g(A[i,i])``.

The default value of ``None`` for ``f`` means
``f`` is the identity, and the default value
of ``None`` for ``g`` means ``g`` is ``f``.
```

Need `::` here to start the doctest block:

```
Skew-symmetric matrices::
```

I would use `v` rather than `iv` for the loop variable.

Comments could be more concise:

```
- # If the number of entries is zero, then just
- # yield the empty matrix in that case and return
+ # If no entries, yield empty matrix and return
  if number_of_entries == 0:
      yield self(0)
      return
```

```
- # When the base ring is not finite, then we should go
- # through and yield the matrices by "weight", which is
- # the total number of iterations that need to be done
- # on the base ring to reach the matrix.
+ # For infinite rings, yield matrices by "weight",
+ # i.e. by number of iterations needed to reach them.
```

```
- # In the finite case, we do a similar thing except that
- # instead of checking if the diagonal is correct after creating the vector
- # we can select all possible diagonal elements a priori
+ For finite rings, allow all ring elements on the diagonal a priori.
```



---

archive/issue_events_379550.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2020-06-18T15:44:48Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "title_is": "Add generator of symmetric matrices",
    "title_was": "Generator of symmetric matrices.",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29886#event-379550"
}
```



---

archive/issue_comments_475268.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,2 @@\n-Added a method to the `MatrixSpace` class that returns a generator over the symmetric matrices in the space. The \"symmetry\" is defined by the user.\n+We add a method to the `MatrixSpace` class that returns a generator over\n+the symmetric matrices in the space. The \"symmetry\" is defined by the user.\n``````\n",
    "created_at": "2020-06-18T15:44:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475268",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,2 @@
-Added a method to the `MatrixSpace` class that returns a generator over the symmetric matrices in the space. The "symmetry" is defined by the user.
+We add a method to the `MatrixSpace` class that returns a generator over
+the symmetric matrices in the space. The "symmetry" is defined by the user.
``````




---

archive/issue_comments_475269.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/08fc8931f350c764b29aa1f76ac2a504de7cac5b\">08fc893</a></td><td><code>fixed more code formatting; allow f=None for nomal symmetric matrices</code></td></tr></table>\n",
    "created_at": "2020-06-30T11:58:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475269",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:7'>Comment 7:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/08fc8931f350c764b29aa1f76ac2a504de7cac5b">08fc893</a></td><td><code>fixed more code formatting; allow f=None for nomal symmetric matrices</code></td></tr></table>




---

archive/issue_comments_475270.json:
```json
{
    "body": "Changed commit from **[9b5145b](https://github.com/sagemath/sagetrac-mirror/commit/9b5145b551a552ece2f31c0cf6a42b7c10d08f89)** to **[08fc893](https://github.com/sagemath/sagetrac-mirror/commit/08fc8931f350c764b29aa1f76ac2a504de7cac5b)**",
    "created_at": "2020-06-30T11:58:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475270",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9b5145b](https://github.com/sagemath/sagetrac-mirror/commit/9b5145b551a552ece2f31c0cf6a42b7c10d08f89)** to **[08fc893](https://github.com/sagemath/sagetrac-mirror/commit/08fc8931f350c764b29aa1f76ac2a504de7cac5b)**



---

archive/issue_comments_475271.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nThanks for the review!! I apologise for the delay. I got caught in other tickets.",
    "created_at": "2020-06-30T11:59:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475271",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:8'>Comment 8:</a>
Thanks for the review!! I apologise for the delay. I got caught in other tickets.



---

archive/issue_comments_475272.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nreviewer name?",
    "created_at": "2020-08-10T14:36:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475272",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:9'>Comment 9:</a>
reviewer name?



---

archive/issue_comments_475273.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\n@slel (Samuel Leli\u00e8vre) did some reviewing, but never green lighted this. They probably never felt sure about the code.",
    "created_at": "2020-08-10T15:07:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475273",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:10'>Comment 10:</a>
@slel (Samuel Leli√®vre) did some reviewing, but never green lighted this. They probably never felt sure about the code.



---

archive/issue_comments_475274.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nMatthias, does it fit into the tensors stuff you are working on?",
    "created_at": "2020-08-10T15:10:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475274",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:11'>Comment 11:</a>
Matthias, does it fit into the tensors stuff you are working on?



---

archive/issue_comments_475275.json:
```json
{
    "body": "Reviewer: **Samuel Leli\u00e8vre**",
    "created_at": "2020-08-10T15:10:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475275",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Samuel Leli√®vre**



---

archive/issue_comments_475276.json:
```json
{
    "body": "Changed reviewer from **Samuel Leli\u00e8vre** to **Samuel Leli\u00e8vre, ...**",
    "created_at": "2020-08-10T15:11:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475276",
    "user": "https://github.com/dimpase"
}
```

Changed reviewer from **Samuel Leli√®vre** to **Samuel Leli√®vre, ...**



---

archive/issue_comments_475277.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nYes, I think it does. In #30229 I define free modules of tensors with prescribed index symmetries. This covers the case of symmetric and antisymmetric matrices, of course. There is a basis and so if the base ring is an enumerated set, so is the module.",
    "created_at": "2020-08-10T15:26:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475277",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'>Comment 13:</a>
Yes, I think it does. In #30229 I define free modules of tensors with prescribed index symmetries. This covers the case of symmetric and antisymmetric matrices, of course. There is a basis and so if the base ring is an enumerated set, so is the module.



---

archive/issue_comments_475278.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nI think that skew-symmetric matrices are requested often enough for them to warrant a named function (which would just forward naturally to what you altready implemented).",
    "created_at": "2020-08-10T15:45:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475278",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:14'>Comment 14:</a>
I think that skew-symmetric matrices are requested often enough for them to warrant a named function (which would just forward naturally to what you altready implemented).



---

archive/issue_comments_475279.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nI agree that it would be nice to have facilities in matrix space for symmetric and skew-symmetric matrices, but I think it would be better to define the subspaces/modules of these matrices than to define enumeration methods. Enumeration comes for free from our general facilities for enumerated sets.",
    "created_at": "2020-08-10T15:49:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475279",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'>Comment 15:</a>
I agree that it would be nice to have facilities in matrix space for symmetric and skew-symmetric matrices, but I think it would be better to define the subspaces/modules of these matrices than to define enumeration methods. Enumeration comes for free from our general facilities for enumerated sets.



---

archive/issue_comments_475280.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nSo you suggest having a general `SymmetricMatrixSpace` class which extends `MatrixSpace` or having the \"standard\" `SymmetricMatrixSpace` and `SkewSymmetricMatrixSpace` classes and leaving everything else to an enumeration method?",
    "created_at": "2020-08-10T16:20:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475280",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:16'>Comment 16:</a>
So you suggest having a general `SymmetricMatrixSpace` class which extends `MatrixSpace` or having the "standard" `SymmetricMatrixSpace` and `SkewSymmetricMatrixSpace` classes and leaving everything else to an enumeration method?



---

archive/issue_comments_475281.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nI don't think new classes are really needed. Instead, just methods that construct submodules.\n\nUnfortunately, currently `MatrixSpace` does not fully implement the category of modules with bases (see (`sage.categories.modules_with_basis`) that it claims to belong to.\n\n```\nsage: M = MatrixSpace(QQ, 3, 3)\nsage: M in ModulesWithBasis(QQ)\nTrue\nsage: A = M([[0, 0, 1], [0, 0, 0], [0, 0, 0]])\nsage: A\n[0 0 1]\n[0 0 0]\n[0 0 0]\nsage: M.submodule([A])\nAttributeError: 'MatrixSpace_with_category' object has no attribute 'get_order'\n```\n\nI would suggest to start with fixing the implementation of this functionality of `MatrixSpace`.\n\nThen in the next step, you can define the methods that construct the specific modules that you need.",
    "created_at": "2020-08-10T16:36:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475281",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'>Comment 17:</a>
I don't think new classes are really needed. Instead, just methods that construct submodules.

Unfortunately, currently `MatrixSpace` does not fully implement the category of modules with bases (see (`sage.categories.modules_with_basis`) that it claims to belong to.

```
sage: M = MatrixSpace(QQ, 3, 3)
sage: M in ModulesWithBasis(QQ)
True
sage: A = M([[0, 0, 1], [0, 0, 0], [0, 0, 0]])
sage: A
[0 0 1]
[0 0 0]
[0 0 0]
sage: M.submodule([A])
AttributeError: 'MatrixSpace_with_category' object has no attribute 'get_order'
```

I would suggest to start with fixing the implementation of this functionality of `MatrixSpace`.

Then in the next step, you can define the methods that construct the specific modules that you need.



---

archive/issue_comments_475282.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nI am inclined to wave this through, as it's needed for Ivo's GSoC project, and the time is tight.",
    "created_at": "2020-08-10T16:54:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475282",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:18'>Comment 18:</a>
I am inclined to wave this through, as it's needed for Ivo's GSoC project, and the time is tight.



---

archive/issue_comments_475283.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nI don't object to adding these specific enumeration methods,\nbut I think adding this interface with the generality of this `f` and `g` thing is not a good idea, because a future implementation along the lines that we just discussed will not be able to support general f and g.",
    "created_at": "2020-08-10T16:59:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475283",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:19'>Comment 19:</a>
I don't object to adding these specific enumeration methods,
but I think adding this interface with the generality of this `f` and `g` thing is not a good idea, because a future implementation along the lines that we just discussed will not be able to support general f and g.



---

archive/issue_comments_475284.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nSee #30276 for the type of symmetry that we hope to support.",
    "created_at": "2020-08-10T17:05:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475284",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'>Comment 20:</a>
See #30276 for the type of symmetry that we hope to support.



---

archive/issue_events_379551.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2020-08-11T00:49:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29886#event-379551"
}
```



---

archive/issue_events_379552.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2020-08-11T00:49:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29886#event-379552"
}
```



---

archive/issue_comments_475285.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nI usually thing of the sub/superdiagonal matrices as just being the entries immediately off the diagonal, not in all of the lower/upper triangular part.\n\nA lot of what this method does is really confusing to me. The algorithm should be explained in the docstring, in particular the order which it is iterating through everything.\n\nI also somewhat agree with Matthias here. I would first expect this to return a subspace, which doesn't work for generic `f` and `g`. Plus the word \"symmetric\" seems misleading to me for generic `f` and `g`. Perhaps as a middle ground, we call this `symmetric_matrices_iterator()`. \n\nComments from a quick look at the code:\n\nI don't see why you need to do `v2.clone()` since you never modify it. You simply get a sublist that to reassign to `v`.\n\n`self(0)` -> `self.zero()`.\n\nThis is very strange: `for _ in range(nrows):`. I don't understand this code block.",
    "created_at": "2020-08-11T00:49:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475285",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:21'>Comment 21:</a>
I usually thing of the sub/superdiagonal matrices as just being the entries immediately off the diagonal, not in all of the lower/upper triangular part.

A lot of what this method does is really confusing to me. The algorithm should be explained in the docstring, in particular the order which it is iterating through everything.

I also somewhat agree with Matthias here. I would first expect this to return a subspace, which doesn't work for generic `f` and `g`. Plus the word "symmetric" seems misleading to me for generic `f` and `g`. Perhaps as a middle ground, we call this `symmetric_matrices_iterator()`. 

Comments from a quick look at the code:

I don't see why you need to do `v2.clone()` since you never modify it. You simply get a sublist that to reassign to `v`.

`self(0)` -> `self.zero()`.

This is very strange: `for _ in range(nrows):`. I don't understand this code block.



---

archive/issue_comments_475286.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nI suggest to implement here only the minimum needed for the GSoC tickets to be done (on a different branch, to preserve this, I suppose).",
    "created_at": "2020-08-11T11:12:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475286",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:22'>Comment 22:</a>
I suggest to implement here only the minimum needed for the GSoC tickets to be done (on a different branch, to preserve this, I suppose).



---

archive/issue_comments_475287.json:
```json
{
    "body": "mutable matrices issue full traceback",
    "created_at": "2020-08-11T12:22:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475287",
    "user": "https://github.com/Ivo-Maffei"
}
```

mutable matrices issue full traceback



---

archive/issue_comments_475288.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nAttachment: **[traceback.txt](https://github.com/sagemath/sage/files/ticket29886/traceback.txt)**\n\nI spent some time looking at the `submodule` method to see if there was some easy fix. I think I got 90% of the way.\nThere were some issues in the method `sage.categories.finite_dimensional_modules_with_basis.echelon_form`.\n\n```diff\ndiff --git a/src/sage/categories/finite_dimensional_modules_with_basis.py b/src/sage/categories/finite_dimensional_modules_with_basis.py\n\n--- a/src/sage/categories/finite_dimensional_modules_with_basis.py\n+++ b/src/sage/categories/finite_dimensional_modules_with_basis.py\n@@ -337,10 +337,25 @@ class FiniteDimensionalModulesWithBasis(CategoryWithAxiom_over_base_ring):\n                 sage: C.echelon_form([x[0] - x[1], 2*x[1] - 2*x[2], x[0] - x[2]])\n                 [x[0] - x[2], x[1] - x[2]]\n             \"\"\"\n             if order is not None:\n-                order = self._compute_support_order(order)\n+                order = self._compute_support_order(elements, order)\n+\n+            # order may be an ordering of the support of elements\n+            # hence not an ordering of the whole basis as needed below\n+            # so we extend order to an ordering of the whole basis\n+            orderList = list(order)\n+            for k in self.basis().keys():\n+                if k not in orderList:\n+                    orderList.append(k)\n+\n+            full_order = tuple(orderList)\n+\n+            \n             from sage.matrix.constructor import matrix\n-            mat = matrix(self.base_ring(), [g._vector_(order=order) for g in elements])\n+            mat = matrix(self.base_ring(), [g._vector_(order=full_order) for g in elements])\n             # Echelonizing a matrix over a field returned the rref\n             if row_reduced and self.base_ring() not in Fields():\n                 try:\n```\n\nAfter applying that patch there is an issue with mutable matrices not being hashable. The issue seems to lie in `sage.misc.cachefunc` and I don't have enough knowledge of python or the inner working of Sage to proceed.\n\nHonestly, I had a huge amount of issues with matrices/vectors not being hashable, so I wonder why aren't they immutable by default.",
    "created_at": "2020-08-11T12:22:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475288",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:23'>Comment 23:</a>
Attachment: **[traceback.txt](https://github.com/sagemath/sage/files/ticket29886/traceback.txt)**

I spent some time looking at the `submodule` method to see if there was some easy fix. I think I got 90% of the way.
There were some issues in the method `sage.categories.finite_dimensional_modules_with_basis.echelon_form`.

```diff
diff --git a/src/sage/categories/finite_dimensional_modules_with_basis.py b/src/sage/categories/finite_dimensional_modules_with_basis.py

--- a/src/sage/categories/finite_dimensional_modules_with_basis.py
+++ b/src/sage/categories/finite_dimensional_modules_with_basis.py
@@ -337,10 +337,25 @@ class FiniteDimensionalModulesWithBasis(CategoryWithAxiom_over_base_ring):
                 sage: C.echelon_form([x[0] - x[1], 2*x[1] - 2*x[2], x[0] - x[2]])
                 [x[0] - x[2], x[1] - x[2]]
             """
             if order is not None:
-                order = self._compute_support_order(order)
+                order = self._compute_support_order(elements, order)
+
+            # order may be an ordering of the support of elements
+            # hence not an ordering of the whole basis as needed below
+            # so we extend order to an ordering of the whole basis
+            orderList = list(order)
+            for k in self.basis().keys():
+                if k not in orderList:
+                    orderList.append(k)
+
+            full_order = tuple(orderList)
+
+            
             from sage.matrix.constructor import matrix
-            mat = matrix(self.base_ring(), [g._vector_(order=order) for g in elements])
+            mat = matrix(self.base_ring(), [g._vector_(order=full_order) for g in elements])
             # Echelonizing a matrix over a field returned the rref
             if row_reduced and self.base_ring() not in Fields():
                 try:
```

After applying that patch there is an issue with mutable matrices not being hashable. The issue seems to lie in `sage.misc.cachefunc` and I don't have enough knowledge of python or the inner working of Sage to proceed.

Honestly, I had a huge amount of issues with matrices/vectors not being hashable, so I wonder why aren't they immutable by default.



---

archive/issue_comments_475289.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nReplying to [@dimpase](#comment%3A22):\n> I suggest to implement here only the minimum needed for the GSoC tickets to be done (on a different branch, to preserve this, I suppose).\n\nI have opened #30334 for the `MatrixSpace.submodule` issue.",
    "created_at": "2020-08-11T14:02:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475289",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'>Comment 24:</a>
Replying to [@dimpase](#comment%3A22):
> I suggest to implement here only the minimum needed for the GSoC tickets to be done (on a different branch, to preserve this, I suppose).

I have opened #30334 for the `MatrixSpace.submodule` issue.



---

archive/issue_comments_475290.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\n#30334 is not urgent. \n\nGiven that `submodule` does not work, my suggestion for the present ticket would be the following. First implement a method named perhaps `MatrixSpace.symmetric_submodule_basis(phase=1)`. As in #30276, for `phase=1`, return a basis of the submodule of the symmetric matrices, and for `phase=-1`, skew-symmetric matrices. Error for all other values of `phase`.",
    "created_at": "2020-08-11T14:16:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475290",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'>Comment 25:</a>
#30334 is not urgent. 

Given that `submodule` does not work, my suggestion for the present ticket would be the following. First implement a method named perhaps `MatrixSpace.symmetric_submodule_basis(phase=1)`. As in #30276, for `phase=1`, return a basis of the submodule of the symmetric matrices, and for `phase=-1`, skew-symmetric matrices. Error for all other values of `phase`.



---

archive/issue_comments_475291.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nI don't fully understand #30334. What I'm using this method for, is to generate skew-symmetric matrices with diagonal entries 0 (the standard definition `A^T = -A` would allow diagonal entries 1 in GF(2)) and Hermitian matrices.\nCan these be achieved for some `phase`?",
    "created_at": "2020-08-11T15:59:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475291",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:26'>Comment 26:</a>
I don't fully understand #30334. What I'm using this method for, is to generate skew-symmetric matrices with diagonal entries 0 (the standard definition `A^T = -A` would allow diagonal entries 1 in GF(2)) and Hermitian matrices.
Can these be achieved for some `phase`?



---

archive/issue_comments_475292.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nThat's important information - from looking at the code it was not clear to me what generality you need. \n\nFor Hermitian matrices - over what field?",
    "created_at": "2020-08-11T16:11:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475292",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'>Comment 27:</a>
That's important information - from looking at the code it was not clear to me what generality you need. 

For Hermitian matrices - over what field?



---

archive/issue_comments_475293.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nReplying to [@mkoeppe](#comment%3A27):\n> For Hermitian matrices - over what field?\n\nFinite fields `GF(r^2)`.  Practically only `GF(4)` and `GF(9)`.",
    "created_at": "2020-08-11T16:17:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475293",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:28'>Comment 28:</a>
Replying to [@mkoeppe](#comment%3A27):
> For Hermitian matrices - over what field?

Finite fields `GF(r^2)`.  Practically only `GF(4)` and `GF(9)`.



---

archive/issue_comments_475294.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nUnfortunately the Hermitian matrices over a field k do not form a subspace (over k)...",
    "created_at": "2020-08-11T16:45:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475294",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'>Comment 29:</a>
Unfortunately the Hermitian matrices over a field k do not form a subspace (over k)...



---

archive/issue_comments_475295.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nThey form a subgroup and they seem quite common... \nIf you think there is no place for a generator of some sort here, then I'll just have the hermitian matrices created where I use them, so that nothing is exposed to the user.",
    "created_at": "2020-08-11T17:26:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475295",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:30'>Comment 30:</a>
They form a subgroup and they seem quite common... 
If you think there is no place for a generator of some sort here, then I'll just have the hermitian matrices created where I use them, so that nothing is exposed to the user.



---

archive/issue_comments_475296.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\nwell, Hermitian matrices form a subspace over the fixed (by the automorphism) subfield. Probably our matrices aren't flexible enough for this, though.",
    "created_at": "2020-08-11T21:32:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475296",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:31'>Comment 31:</a>
well, Hermitian matrices form a subspace over the fixed (by the automorphism) subfield. Probably our matrices aren't flexible enough for this, though.



---

archive/issue_comments_475297.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nReplying to [@dimpase](#comment%3A22):\n> I suggest to implement here only the minimum needed for the GSoC tickets to be done (on a different branch, to preserve this, I suppose).\n\nTo move forward, I'd suggest to move this methods to the code where they are needed. It can be be refactored later when we figure out the right framework.",
    "created_at": "2020-08-13T17:39:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475297",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:32'>Comment 32:</a>
Replying to [@dimpase](#comment%3A22):
> I suggest to implement here only the minimum needed for the GSoC tickets to be done (on a different branch, to preserve this, I suppose).

To move forward, I'd suggest to move this methods to the code where they are needed. It can be be refactored later when we figure out the right framework.



---

archive/issue_events_379553.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29886#event-379553"
}
```



---

archive/issue_events_379554.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29886#event-379554"
}
```



---

archive/issue_events_379555.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29886#event-379555"
}
```



---

archive/issue_events_379556.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29886#event-379556"
}
```



---

archive/issue_comments_475298.json:
```json
{
    "body": "<a id='comment:34'>Comment 34:</a>\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475298",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:34'>Comment 34:</a>
Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_475299.json:
```json
{
    "body": "<a id='comment:35'>Comment 35:</a>\nSubmodules of matrix spaces are taken care of at #31995 (superseding #30334).",
    "created_at": "2021-07-03T10:51:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475299",
    "user": "https://github.com/slel"
}
```

<a id='comment:35'>Comment 35:</a>
Submodules of matrix spaces are taken care of at #31995 (superseding #30334).



---

archive/issue_events_379557.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29886#event-379557"
}
```



---

archive/issue_events_379558.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29886#event-379558"
}
```



---

archive/issue_comments_475300.json:
```json
{
    "body": "<a id='comment:36'>Comment 36:</a>\nSetting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29886#issuecomment-475300",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:36'>Comment 36:</a>
Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_379559.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29886#event-379559"
}
```



---

archive/issue_events_379560.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29886#event-379560"
}
```



---

archive/issue_events_379561.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:27:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29886#event-379561"
}
```



---

archive/issue_events_379562.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:27:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29886#event-379562"
}
```



---

archive/issue_events_379563.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29886#event-379563"
}
```



---

archive/issue_events_379564.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29886",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29886#event-379564"
}
```
