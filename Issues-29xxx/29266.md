# Issue 29266: Bugfix concerning ticket #26421

archive/issues_029029.json:
```json
{
    "body": "In #26421 factorization of polynomials has been extended to previously untreated cases in which the polynomial's base ring is an integral domain.\nThe factorization is done over the field of fraction and excepted if it can be coerced into the base ring itself. Since the method `base_change` of the class `Factorzation` doesn't check if the unit of the factorization is coerced to a unit again, this implementation is too vastly:\n\n```\nsage: R.<t> = LaurentPolynomialRing(ZZ)\nsage: P.<x> = R[]\nsage: f = 2*x + 4\nsage: f.is_irreducible()\nTrue\nsage: F = f.factor(); F\n(2) * (x + 2)\nsage: F.unit()\n2\n```\n\n\nCC:  @tscrim\n\nKeywords: factorization, integral domain\n\nBranch/Commit: a21db2793711b9bd10127911bc9a2c432dca9947\n\nReviewer: Travis Scrimshaw\n\nAuthor: Sebastian Oehms\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29266\n\n",
    "closed_at": "2020-03-03T23:21:33Z",
    "created_at": "2020-03-01T20:24:57Z",
    "labels": [
        "component: commutative algebra",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "Bugfix concerning ticket #26421",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29266",
    "user": "https://github.com/soehms"
}
```
In #26421 factorization of polynomials has been extended to previously untreated cases in which the polynomial's base ring is an integral domain.
The factorization is done over the field of fraction and excepted if it can be coerced into the base ring itself. Since the method `base_change` of the class `Factorzation` doesn't check if the unit of the factorization is coerced to a unit again, this implementation is too vastly:

```
sage: R.<t> = LaurentPolynomialRing(ZZ)
sage: P.<x> = R[]
sage: f = 2*x + 4
sage: f.is_irreducible()
True
sage: F = f.factor(); F
(2) * (x + 2)
sage: F.unit()
2
```


CC:  @tscrim

Keywords: factorization, integral domain

Branch/Commit: a21db2793711b9bd10127911bc9a2c432dca9947

Reviewer: Travis Scrimshaw

Author: Sebastian Oehms

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29266





---

archive/issue_comments_570639.json:
```json
{
    "body": "Changing branch from \"\" to \"u/soehms/factorization_integral_domain_29266\"",
    "created_at": "2020-03-01T20:28:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29266#issuecomment-570639",
    "user": "https://github.com/soehms"
}
```

Changing branch from "" to "u/soehms/factorization_integral_domain_29266"



---

archive/issue_comments_570640.json:
```json
{
    "body": "Changing commit from \"\" to \"004c1c4211af86c177b8fd537f6aad01cc593623\"",
    "created_at": "2020-03-01T20:31:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29266#issuecomment-570640",
    "user": "https://github.com/soehms"
}
```

Changing commit from "" to "004c1c4211af86c177b8fd537f6aad01cc593623"



---

archive/issue_comments_570641.json:
```json
{
    "body": "<a id='comment:2'></a>\nMaybe a better place for the fix would be the method `base_change` of the class `Factorization`. But since this leads to the failure of previous doctests (in cases `is_unit` is not implemented), I preferred the implementation in method `factor`.\n\n---\nNew commits:\n|                                                                                                                                          |                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|\n|[004c1c4](https://git.sagemath.org/sage.git/commit?id=004c1c4211af86c177b8fd537f6aad01cc593623)|`29266 initial version`|",
    "created_at": "2020-03-01T20:31:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29266#issuecomment-570641",
    "user": "https://github.com/soehms"
}
```

<a id='comment:2'></a>
Maybe a better place for the fix would be the method `base_change` of the class `Factorization`. But since this leads to the failure of previous doctests (in cases `is_unit` is not implemented), I preferred the implementation in method `factor`.

---
New commits:
|                                                                                                                                          |                       |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|
|[004c1c4](https://git.sagemath.org/sage.git/commit?id=004c1c4211af86c177b8fd537f6aad01cc593623)|`29266 initial version`|



---

archive/issue_comments_570642.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-03-01T20:31:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29266#issuecomment-570642",
    "user": "https://github.com/soehms"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_570643.json:
```json
{
    "body": "Changing author from \"\" to \"Sebastian Oehms\"",
    "created_at": "2020-03-01T20:31:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29266#issuecomment-570643",
    "user": "https://github.com/soehms"
}
```

Changing author from "" to "Sebastian Oehms"



---

archive/issue_comments_570644.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2020-03-02T00:09:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29266#issuecomment-570644",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_570645.json:
```json
{
    "body": "<a id='comment:3'></a>\nOne little change: \"coerce\" to \"convert\". If it was a coercion map, then the fact it was a unit must be preserved (as coercions must be morphisms). Once you change that, you can set a positive review.",
    "created_at": "2020-03-02T00:09:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29266#issuecomment-570645",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:3'></a>
One little change: "coerce" to "convert". If it was a coercion map, then the fact it was a unit must be preserved (as coercions must be morphisms). Once you change that, you can set a positive review.



---

archive/issue_comments_570646.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|\n|[a21db27](https://git.sagemath.org/sage.git/commit/?id=a21db2793711b9bd10127911bc9a2c432dca9947)|`29266: correction according to review`|",
    "created_at": "2020-03-02T06:29:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29266#issuecomment-570646",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|
|[a21db27](https://git.sagemath.org/sage.git/commit/?id=a21db2793711b9bd10127911bc9a2c432dca9947)|`29266: correction according to review`|



---

archive/issue_comments_570647.json:
```json
{
    "body": "Changing commit from \"004c1c4211af86c177b8fd537f6aad01cc593623\" to \"a21db2793711b9bd10127911bc9a2c432dca9947\"",
    "created_at": "2020-03-02T06:29:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29266#issuecomment-570647",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "004c1c4211af86c177b8fd537f6aad01cc593623" to "a21db2793711b9bd10127911bc9a2c432dca9947"



---

archive/issue_comments_570648.json:
```json
{
    "body": "<a id='comment:5'></a>\nThanks!",
    "created_at": "2020-03-02T06:31:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29266#issuecomment-570648",
    "user": "https://github.com/soehms"
}
```

<a id='comment:5'></a>
Thanks!



---

archive/issue_comments_570649.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-03-02T06:31:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29266#issuecomment-570649",
    "user": "https://github.com/soehms"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_074432.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-03-03T23:21:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29266",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29266#event-74432"
}
```



---

archive/issue_comments_570650.json:
```json
{
    "body": "Changing branch from \"u/soehms/factorization_integral_domain_29266\" to \"a21db2793711b9bd10127911bc9a2c432dca9947\"",
    "created_at": "2020-03-03T23:21:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29266#issuecomment-570650",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/soehms/factorization_integral_domain_29266" to "a21db2793711b9bd10127911bc9a2c432dca9947"



---

archive/issue_comments_570651.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-03-03T23:21:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29266#issuecomment-570651",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
