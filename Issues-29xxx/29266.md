# Issue 29266: Bugfix concerning ticket #26421

archive/issues_029029.json:
```json
{
    "assignees": [],
    "body": "In #26421 factorization of polynomials has been extended to previously untreated cases in which the polynomial's base ring is an integral domain.\nThe factorization is done over the field of fraction and excepted if it can be coerced into the base ring itself. Since the method `base_change` of the class `Factorzation` doesn't check if the unit of the factorization is coerced to a unit again, this implementation is too vastly:\n\n```\nsage: R.<t> = LaurentPolynomialRing(ZZ)\nsage: P.<x> = R[]\nsage: f = 2*x + 4\nsage: f.is_irreducible()\nTrue\nsage: F = f.factor(); F\n(2) * (x + 2)\nsage: F.unit()\n2\n```\n\n\nCC:  @tscrim\n\nKeywords: **factorization, integral domain**\n\nBranch/Commit: **[a21db27](https://github.com/sagemath/sagetrac-mirror/commit/a21db2793711b9bd10127911bc9a2c432dca9947)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Sebastian Oehms**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29266_\n\n",
    "closed_at": "2020-03-03T23:21:33Z",
    "created_at": "2020-03-01T20:24:57Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20commutative%20algebra",
        "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Bugfix concerning ticket #26421",
    "type": "issue",
    "updated_at": "2020-03-03T23:21:33Z",
    "url": "https://github.com/sagemath/sage/issues/29266",
    "user": "https://github.com/soehms"
}
```
In #26421 factorization of polynomials has been extended to previously untreated cases in which the polynomial's base ring is an integral domain.
The factorization is done over the field of fraction and excepted if it can be coerced into the base ring itself. Since the method `base_change` of the class `Factorzation` doesn't check if the unit of the factorization is coerced to a unit again, this implementation is too vastly:

```
sage: R.<t> = LaurentPolynomialRing(ZZ)
sage: P.<x> = R[]
sage: f = 2*x + 4
sage: f.is_irreducible()
True
sage: F = f.factor(); F
(2) * (x + 2)
sage: F.unit()
2
```


CC:  @tscrim

Keywords: **factorization, integral domain**

Branch/Commit: **[a21db27](https://github.com/sagemath/sagetrac-mirror/commit/a21db2793711b9bd10127911bc9a2c432dca9947)**

Reviewer: **Travis Scrimshaw**

Author: **Sebastian Oehms**

_Issue created by migration from https://trac.sagemath.org/ticket/29266_





---

archive/issue_events_384114.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2020-03-01T20:24:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29266",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29266#event-384114"
}
```



---

archive/issue_events_384115.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2020-03-01T20:24:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29266",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20commutative%20algebra",
    "label_color": "0000ff",
    "label_name": "component: commutative algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29266#event-384115"
}
```



---

archive/issue_events_384116.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2020-03-01T20:24:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29266",
    "label": "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29266#event-384116"
}
```



---

archive/issue_events_384117.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2020-03-01T20:24:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29266",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29266#event-384117"
}
```



---

archive/issue_comments_461859.json:
```json
{
    "body": "Branch: **[u/soehms/factorization_integral_domain_29266](https://github.com/sagemath/sagetrac-mirror/tree/u/soehms/factorization_integral_domain_29266)**",
    "created_at": "2020-03-01T20:28:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29266#issuecomment-461859",
    "user": "https://github.com/soehms"
}
```

Branch: **[u/soehms/factorization_integral_domain_29266](https://github.com/sagemath/sagetrac-mirror/tree/u/soehms/factorization_integral_domain_29266)**



---

archive/issue_comments_461860.json:
```json
{
    "body": "Commit: **[004c1c4](https://github.com/sagemath/sagetrac-mirror/commit/004c1c4211af86c177b8fd537f6aad01cc593623)**",
    "created_at": "2020-03-01T20:31:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29266#issuecomment-461860",
    "user": "https://github.com/soehms"
}
```

Commit: **[004c1c4](https://github.com/sagemath/sagetrac-mirror/commit/004c1c4211af86c177b8fd537f6aad01cc593623)**



---

archive/issue_comments_461861.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nMaybe a better place for the fix would be the method `base_change` of the class `Factorization`. But since this leads to the failure of previous doctests (in cases `is_unit` is not implemented), I preferred the implementation in method `factor`.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/004c1c4211af86c177b8fd537f6aad01cc593623\">004c1c4</a></td><td><code>29266 initial version</code></td></tr></table>\n",
    "created_at": "2020-03-01T20:31:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29266#issuecomment-461861",
    "user": "https://github.com/soehms"
}
```

<div id="comment:2" align="right">Comment 2</div>

Maybe a better place for the fix would be the method `base_change` of the class `Factorization`. But since this leads to the failure of previous doctests (in cases `is_unit` is not implemented), I preferred the implementation in method `factor`.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/004c1c4211af86c177b8fd537f6aad01cc593623">004c1c4</a></td><td><code>29266 initial version</code></td></tr></table>




---

archive/issue_events_384118.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2020-03-01T20:31:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29266",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29266#event-384118"
}
```



---

archive/issue_comments_461862.json:
```json
{
    "body": "Author: **Sebastian Oehms**",
    "created_at": "2020-03-01T20:31:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29266#issuecomment-461862",
    "user": "https://github.com/soehms"
}
```

Author: **Sebastian Oehms**



---

archive/issue_comments_461863.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2020-03-02T00:09:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29266#issuecomment-461863",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_461864.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nOne little change: \"coerce\" to \"convert\". If it was a coercion map, then the fact it was a unit must be preserved (as coercions must be morphisms). Once you change that, you can set a positive review.",
    "created_at": "2020-03-02T00:09:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29266#issuecomment-461864",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:3" align="right">Comment 3</div>

One little change: "coerce" to "convert". If it was a coercion map, then the fact it was a unit must be preserved (as coercions must be morphisms). Once you change that, you can set a positive review.



---

archive/issue_comments_461865.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a21db2793711b9bd10127911bc9a2c432dca9947\">a21db27</a></td><td><code>29266: correction according to review</code></td></tr></table>\n",
    "created_at": "2020-03-02T06:29:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29266#issuecomment-461865",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4" align="right">Comment 4</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a21db2793711b9bd10127911bc9a2c432dca9947">a21db27</a></td><td><code>29266: correction according to review</code></td></tr></table>




---

archive/issue_comments_461866.json:
```json
{
    "body": "Changed commit from **[004c1c4](https://github.com/sagemath/sagetrac-mirror/commit/004c1c4211af86c177b8fd537f6aad01cc593623)** to **[a21db27](https://github.com/sagemath/sagetrac-mirror/commit/a21db2793711b9bd10127911bc9a2c432dca9947)**",
    "created_at": "2020-03-02T06:29:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29266#issuecomment-461866",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[004c1c4](https://github.com/sagemath/sagetrac-mirror/commit/004c1c4211af86c177b8fd537f6aad01cc593623)** to **[a21db27](https://github.com/sagemath/sagetrac-mirror/commit/a21db2793711b9bd10127911bc9a2c432dca9947)**



---

archive/issue_comments_461867.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nThanks!",
    "created_at": "2020-03-02T06:31:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29266#issuecomment-461867",
    "user": "https://github.com/soehms"
}
```

<div id="comment:5" align="right">Comment 5</div>

Thanks!



---

archive/issue_events_384119.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2020-03-02T06:31:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29266",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29266#event-384119"
}
```



---

archive/issue_events_384120.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2020-03-02T06:31:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29266",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29266#event-384120"
}
```



---

archive/issue_events_384121.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-03-03T23:21:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29266",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29266#event-384121"
}
```



---

archive/issue_events_384122.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "cdaf307328f72db40fead1e04208afe073daa82a",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-03-03T23:21:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29266",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29266#event-384122"
}
```



---

archive/issue_comments_461868.json:
```json
{
    "body": "Changed branch from **[u/soehms/factorization_integral_domain_29266](https://github.com/sagemath/sagetrac-mirror/tree/u/soehms/factorization_integral_domain_29266)** to **[a21db27](https://github.com/sagemath/sagetrac-mirror/commit/a21db2793711b9bd10127911bc9a2c432dca9947)**",
    "created_at": "2020-03-03T23:21:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29266#issuecomment-461868",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/soehms/factorization_integral_domain_29266](https://github.com/sagemath/sagetrac-mirror/tree/u/soehms/factorization_integral_domain_29266)** to **[a21db27](https://github.com/sagemath/sagetrac-mirror/commit/a21db2793711b9bd10127911bc9a2c432dca9947)**
