# Issue 29486: cygwin: Do not use system R

archive/issues_029249.json:
```json
{
    "assignees": [],
    "body": "For package `rpy2` (versions 2.8.x) there is an unresolved build failure on cygwin when using system R (`cygwin-standard`).\nThis can be seen on the [GitHub](../wiki/GitHub) Actions workflow from #29403 but has also been reproduced locally. Details below.\n\nThis ticket disables use of system R on cygwin.  This should be reverted with the #29441 upgrade to more recent `rpy2` (python-3 only).\n\n\n---\n\n```\ngcc -shared -Wl,--enable-auto-image-base -L/cygdrive/d/a/sage/sage/local/lib -Wl,-rpath,/cygdrive/d/a/sage/sage/local/lib build/temp.cygwin-3.1.4-x86_64-3.7/./rpy/rinterface/_rinterface.o -L/usr/lib/R/lib -L/cygdrive/d/a/sage/sage/local/lib/python3.7/config -L/usr/lib -Lbuild/temp.cygwin-3.1.4-x86_64-3.7 -L/usr/lib/R/lib -lreadline -lR -lpcre -llzma -lbz2 -lz -ltirpc -lrt -ldl -lm -liconv -licuuc -licui18n -lpython3.7m -lr_utils -o build/lib.cygwin-3.1.4-x86_64-3.7/rpy2/rinterface/_rinterface.cpython-37m-x86_64-cygwin.dll -fopenmp\n    /usr/lib/gcc/x86_64-pc-cygwin/9.3.0/../../../../x86_64-pc-cygwin/bin/ld: build/temp.cygwin-3.1.4-x86_64-3.7/libr_utils.a(r_utils.o): in function `rpy2_findfun':\n    /tmp/pip-req-build-ymc5_3kd/./rpy/rinterface/r_utils.c:58: undefined reference to `Rf_findVarInFrame3'\n    /tmp/pip-req-build-ymc5_3kd/./rpy/rinterface/r_utils.c:58:(.text+0xda): relocation truncated to fit: R_X86_64_PC32 against undefined symbol `Rf_findVarInFrame3'\n    /usr/lib/gcc/x86_64-pc-cygwin/9.3.0/../../../../x86_64-pc-cygwin/bin/ld: build/temp.cygwin-3.1.4-x86_64-3.7/libr_utils.a(r_utils.o): in function `rpy2_list_attr':\n    /tmp/pip-req-build-ymc5_3kd/./rpy/rinterface/r_utils.c:129: undefined reference to `ATTRIB'\n    /tmp/pip-req-build-ymc5_3kd/./rpy/rinterface/r_utils.c:129:(.text+0x340): relocation truncated to fit: R_X86_64_PC32 against undefined symbol `ATTRIB'\n    /usr/lib/gcc/x86_64-pc-cygwin/9.3.0/../../../../x86_64-pc-cygwin/bin/ld: build/temp.cygwin-3.1.4-x86_64-3.7/libr_utils.a(r_utils.o): in function `rpy2_remove':\n    /tmp/pip-req-build-ymc5_3kd/./rpy/rinterface/r_utils.c:152: undefined reference to `Rf_lang4'\n```\n\nFull logs can be downloaded at:\n- https://github.com/mkoeppe/sage/runs/572730287\n\nThe sage-local artifact that has been built can be downloaded at \n- https://github.com/mkoeppe/sage/suites/584124994/artifacts/4126694\n\n\nPrevious tickets: https://trac.sagemath.org/search?q=rpy2+cygwin&noquickjump=1&branch=on&milestone=on&ticket=on&wiki=on\n\n\nCC:  @EmmanuelCharpentier @videlec @tscrim @jpflori @embray @vbraun @dimpase @jhpalmieri @darijgr @kiwifb\n\nBranch/Commit: **[`032eb86`](https://github.com/sagemath/sagetrac-mirror/commit/032eb86b3276ad60e35c9f065fe46d7f20f9593d)**\n\nReviewer: **Dima Pasechnik**\n\nAuthor: **Matthias Koeppe**\n\nComponent: **porting: Cygwin**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29486_\n\n",
    "closed_at": "2020-04-23T22:33:23Z",
    "created_at": "2020-04-09T16:49:23Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20porting%3A%20cygwin",
        "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "cygwin: Do not use system R",
    "type": "issue",
    "updated_at": "2020-04-23T22:33:23Z",
    "url": "https://github.com/sagemath/sage/issues/29486",
    "user": "https://github.com/mkoeppe"
}
```
For package `rpy2` (versions 2.8.x) there is an unresolved build failure on cygwin when using system R (`cygwin-standard`).
This can be seen on the [GitHub](../wiki/GitHub) Actions workflow from #29403 but has also been reproduced locally. Details below.

This ticket disables use of system R on cygwin.  This should be reverted with the #29441 upgrade to more recent `rpy2` (python-3 only).


---

```
gcc -shared -Wl,--enable-auto-image-base -L/cygdrive/d/a/sage/sage/local/lib -Wl,-rpath,/cygdrive/d/a/sage/sage/local/lib build/temp.cygwin-3.1.4-x86_64-3.7/./rpy/rinterface/_rinterface.o -L/usr/lib/R/lib -L/cygdrive/d/a/sage/sage/local/lib/python3.7/config -L/usr/lib -Lbuild/temp.cygwin-3.1.4-x86_64-3.7 -L/usr/lib/R/lib -lreadline -lR -lpcre -llzma -lbz2 -lz -ltirpc -lrt -ldl -lm -liconv -licuuc -licui18n -lpython3.7m -lr_utils -o build/lib.cygwin-3.1.4-x86_64-3.7/rpy2/rinterface/_rinterface.cpython-37m-x86_64-cygwin.dll -fopenmp
    /usr/lib/gcc/x86_64-pc-cygwin/9.3.0/../../../../x86_64-pc-cygwin/bin/ld: build/temp.cygwin-3.1.4-x86_64-3.7/libr_utils.a(r_utils.o): in function `rpy2_findfun':
    /tmp/pip-req-build-ymc5_3kd/./rpy/rinterface/r_utils.c:58: undefined reference to `Rf_findVarInFrame3'
    /tmp/pip-req-build-ymc5_3kd/./rpy/rinterface/r_utils.c:58:(.text+0xda): relocation truncated to fit: R_X86_64_PC32 against undefined symbol `Rf_findVarInFrame3'
    /usr/lib/gcc/x86_64-pc-cygwin/9.3.0/../../../../x86_64-pc-cygwin/bin/ld: build/temp.cygwin-3.1.4-x86_64-3.7/libr_utils.a(r_utils.o): in function `rpy2_list_attr':
    /tmp/pip-req-build-ymc5_3kd/./rpy/rinterface/r_utils.c:129: undefined reference to `ATTRIB'
    /tmp/pip-req-build-ymc5_3kd/./rpy/rinterface/r_utils.c:129:(.text+0x340): relocation truncated to fit: R_X86_64_PC32 against undefined symbol `ATTRIB'
    /usr/lib/gcc/x86_64-pc-cygwin/9.3.0/../../../../x86_64-pc-cygwin/bin/ld: build/temp.cygwin-3.1.4-x86_64-3.7/libr_utils.a(r_utils.o): in function `rpy2_remove':
    /tmp/pip-req-build-ymc5_3kd/./rpy/rinterface/r_utils.c:152: undefined reference to `Rf_lang4'
```

Full logs can be downloaded at:
- https://github.com/mkoeppe/sage/runs/572730287

The sage-local artifact that has been built can be downloaded at 
- https://github.com/mkoeppe/sage/suites/584124994/artifacts/4126694


Previous tickets: https://trac.sagemath.org/search?q=rpy2+cygwin&noquickjump=1&branch=on&milestone=on&ticket=on&wiki=on


CC:  @EmmanuelCharpentier @videlec @tscrim @jpflori @embray @vbraun @dimpase @jhpalmieri @darijgr @kiwifb

Branch/Commit: **[`032eb86`](https://github.com/sagemath/sagetrac-mirror/commit/032eb86b3276ad60e35c9f065fe46d7f20f9593d)**

Reviewer: **Dima Pasechnik**

Author: **Matthias Koeppe**

Component: **porting: Cygwin**

_Issue created by migration from https://trac.sagemath.org/ticket/29486_





---

archive/issue_events_405549.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-09T16:49:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29486#event-405549"
}
```



---

archive/issue_events_405550.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-09T16:49:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20porting%3A%20cygwin",
    "label_color": "000080",
    "label_name": "c: porting: cygwin",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29486#event-405550"
}
```



---

archive/issue_events_405551.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-09T16:49:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29486#event-405551"
}
```



---

archive/issue_events_405552.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-09T16:49:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29486#event-405552"
}
```



---

archive/issue_events_405553.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-09T16:49:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29486#event-405553"
}
```



---

archive/issue_events_405554.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-09T16:49:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29486#event-405554"
}
```



---

archive/issue_comments_463459.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -19,3 +19,5 @@\n - https://github.com/mkoeppe/sage/suites/584124994/artifacts/4126694\n \n \n+Previous tickets: https://trac.sagemath.org/search?q=rpy2+cygwin&noquickjump=1&branch=on&milestone=on&ticket=on&wiki=on\n+\n``````\n",
    "created_at": "2020-04-09T17:14:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463459",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -19,3 +19,5 @@
 - https://github.com/mkoeppe/sage/suites/584124994/artifacts/4126694
 
 
+Previous tickets: https://trac.sagemath.org/search?q=rpy2+cygwin&noquickjump=1&branch=on&milestone=on&ticket=on&wiki=on
+
``````




---

archive/issue_comments_463460.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nDid you try the updated rpy2 package from #29441?",
    "created_at": "2020-04-10T07:08:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463460",
    "user": "https://github.com/videlec"
}
```

<div id="comment:3" align="right">comment:3</div>

Did you try the updated rpy2 package from #29441?



---

archive/issue_comments_463461.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI haven't because this upgrade cannot be used for the 9.1 release cycle; but you can by using the testing infrastructure ticket #29403",
    "created_at": "2020-04-10T16:34:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463461",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:4" align="right">comment:4</div>

I haven't because this upgrade cannot be used for the 9.1 release cycle; but you can by using the testing infrastructure ticket #29403



---

archive/issue_events_405555.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-15T03:24:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29486#event-405555"
}
```



---

archive/issue_events_405556.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-15T03:24:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "label": "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p: 1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29486#event-405556"
}
```



---

archive/issue_comments_463462.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nStill a problem. I'm trying now whether an update to 2.8.6 (last py2-compatible release) helps",
    "created_at": "2020-04-19T19:37:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463462",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">comment:6</div>

Still a problem. I'm trying now whether an update to 2.8.6 (last py2-compatible release) helps



---

archive/issue_comments_463463.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nSame with 2.8.6",
    "created_at": "2020-04-19T19:53:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463463",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

Same with 2.8.6



---

archive/issue_comments_463464.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nTrying #29441 now",
    "created_at": "2020-04-19T20:03:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463464",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

Trying #29441 now



---

archive/issue_comments_463465.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nOK, rpy2 3.2.7 from #29441 installs OK on Cygwin.",
    "created_at": "2020-04-19T21:16:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463465",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">comment:9</div>

OK, rpy2 3.2.7 from #29441 installs OK on Cygwin.



---

archive/issue_events_405557.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-19T21:26:51Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "title_is": "Downgrade R, rpy2 to \"optional\" because rpy2 fails to build on cygwin-standard",
    "title_was": "cygwin-standard: rpy2 fails to build",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29486#event-405557"
}
```



---

archive/issue_comments_463466.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,7 @@\n-This is using system R from cygwin, build running on the [GitHub](../wiki/GitHub) Actions workflow from #29403:\n+As proposed in https://groups.google.com/d/msg/sage-devel/IX3niEdmCEM/LovmF6gmIwAJ, we remove `r` from the list of standard packages. We make both `r` and `rpy2` optional packages.  This has minimal impact for users of these packages.\n+\n+This works around an unresolved build failure of `rpy2` on cygwin when using system R.\n+This can be seen on the [GitHub](../wiki/GitHub) Actions workflow from #29403 but has also been reproduced locally.\n \n ```\n gcc -shared -Wl,--enable-auto-image-base -L/cygdrive/d/a/sage/sage/local/lib -Wl,-rpath,/cygdrive/d/a/sage/sage/local/lib build/temp.cygwin-3.1.4-x86_64-3.7/./rpy/rinterface/_rinterface.o -L/usr/lib/R/lib -L/cygdrive/d/a/sage/sage/local/lib/python3.7/config -L/usr/lib -Lbuild/temp.cygwin-3.1.4-x86_64-3.7 -L/usr/lib/R/lib -lreadline -lR -lpcre -llzma -lbz2 -lz -ltirpc -lrt -ldl -lm -liconv -licuuc -licui18n -lpython3.7m -lr_utils -o build/lib.cygwin-3.1.4-x86_64-3.7/rpy2/rinterface/_rinterface.cpython-37m-x86_64-cygwin.dll -fopenmp\n``````\n",
    "created_at": "2020-04-19T21:26:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463466",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,7 @@
-This is using system R from cygwin, build running on the [GitHub](../wiki/GitHub) Actions workflow from #29403:
+As proposed in https://groups.google.com/d/msg/sage-devel/IX3niEdmCEM/LovmF6gmIwAJ, we remove `r` from the list of standard packages. We make both `r` and `rpy2` optional packages.  This has minimal impact for users of these packages.
+
+This works around an unresolved build failure of `rpy2` on cygwin when using system R.
+This can be seen on the [GitHub](../wiki/GitHub) Actions workflow from #29403 but has also been reproduced locally.
 
 ```
 gcc -shared -Wl,--enable-auto-image-base -L/cygdrive/d/a/sage/sage/local/lib -Wl,-rpath,/cygdrive/d/a/sage/sage/local/lib build/temp.cygwin-3.1.4-x86_64-3.7/./rpy/rinterface/_rinterface.o -L/usr/lib/R/lib -L/cygdrive/d/a/sage/sage/local/lib/python3.7/config -L/usr/lib -Lbuild/temp.cygwin-3.1.4-x86_64-3.7 -L/usr/lib/R/lib -lreadline -lR -lpcre -llzma -lbz2 -lz -ltirpc -lrt -ldl -lm -liconv -licuuc -licui18n -lpython3.7m -lr_utils -o build/lib.cygwin-3.1.4-x86_64-3.7/rpy2/rinterface/_rinterface.cpython-37m-x86_64-cygwin.dll -fopenmp
``````




---

archive/issue_comments_463467.json:
```json
{
    "body": "Branch: **[u/mkoeppe/downgrade_r__rpy2_to__optional__because_rpy2_fails_to_build_on_cygwin_standard](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/downgrade_r__rpy2_to__optional__because_rpy2_fails_to_build_on_cygwin_standard)**",
    "created_at": "2020-04-19T21:29:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463467",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/downgrade_r__rpy2_to__optional__because_rpy2_fails_to_build_on_cygwin_standard](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/downgrade_r__rpy2_to__optional__because_rpy2_fails_to_build_on_cygwin_standard)**



---

archive/issue_events_405558.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-19T21:30:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29486#event-405558"
}
```



---

archive/issue_comments_463468.json:
```json
{
    "body": "Commit: **[`6772c66`](https://github.com/sagemath/sagetrac-mirror/commit/6772c6646ec76b5301977053009c8f0c4bd952b6)**",
    "created_at": "2020-04-19T21:30:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463468",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`6772c66`](https://github.com/sagemath/sagetrac-mirror/commit/6772c6646ec76b5301977053009c8f0c4bd952b6)**



---

archive/issue_comments_463469.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6772c6646ec76b5301977053009c8f0c4bd952b6\">6772c66</a></td><td><code>Make r, rpy2 optional</code></td></tr></table>\n",
    "created_at": "2020-04-19T21:30:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463469",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:12"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6772c6646ec76b5301977053009c8f0c4bd952b6">6772c66</a></td><td><code>Make r, rpy2 optional</code></td></tr></table>




---

archive/issue_comments_463470.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2020-04-19T21:30:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463470",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_comments_463471.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nIf #29441 fixes the problem, can't we just that instead? Or are you proposing this as a temporary solution until #29441 is ready?",
    "created_at": "2020-04-19T23:42:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463471",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:14" align="right">comment:14</div>

If #29441 fixes the problem, can't we just that instead? Or are you proposing this as a temporary solution until #29441 is ready?



---

archive/issue_comments_463472.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nWe can't use #29441 because the new version is py3 only. \nWhen we make the switch to py3-only sage, we can reconsider.",
    "created_at": "2020-04-20T00:32:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463472",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:15" align="right">comment:15</div>

We can't use #29441 because the new version is py3 only. 
When we make the switch to py3-only sage, we can reconsider.



---

archive/issue_comments_463473.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nThis leads to a policy question: does this failure on Cygwin mean that people on OS X, linux, etc., are deprived of having a Sage installation of R? (Does anyone download a Sage binary expecting to get a functioning installation of R?)\n\nActually, why should R be optional; shouldn't it just be rpy2?",
    "created_at": "2020-04-20T00:35:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463473",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:16" align="right">comment:16</div>

This leads to a policy question: does this failure on Cygwin mean that people on OS X, linux, etc., are deprived of having a Sage installation of R? (Does anyone download a Sage binary expecting to get a functioning installation of R?)

Actually, why should R be optional; shouldn't it just be rpy2?



---

archive/issue_comments_463474.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nYes, we could just make rpy2 optional, that would be fine with me.\n\nI don't really know if we have any users of R and of rpy2.",
    "created_at": "2020-04-20T00:39:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463474",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:17" align="right">comment:17</div>

Yes, we could just make rpy2 optional, that would be fine with me.

I don't really know if we have any users of R and of rpy2.



---

archive/issue_comments_463475.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nAnd unfortunately nobody responded to my message on sage-devel last month",
    "created_at": "2020-04-20T00:59:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463475",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:18" align="right">comment:18</div>

And unfortunately nobody responded to my message on sage-devel last month



---

archive/issue_comments_463476.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,11 @@\n-As proposed in https://groups.google.com/d/msg/sage-devel/IX3niEdmCEM/LovmF6gmIwAJ, we remove `r` from the list of standard packages. We make both `r` and `rpy2` optional packages.  This has minimal impact for users of these packages.\n+In https://groups.google.com/d/msg/sage-devel/IX3niEdmCEM/LovmF6gmIwAJ, it was proposed to remove `r` (and thus everything that depends on it) from the list of standard packages. \n \n-This works around an unresolved build failure of `rpy2` on cygwin when using system R.\n-This can be seen on the [GitHub](../wiki/GitHub) Actions workflow from #29403 but has also been reproduced locally.\n+The build problems with `r` that prompted this proposal have been resolved. However, for the package `rpy2` there is an unresolved build failure on cygwin when using system R (`cygwin-standard`).\n+This can be seen on the [GitHub](../wiki/GitHub) Actions workflow from #29403 but has also been reproduced locally. Details below.\n+\n+This ticket downgrades rpy2 to \"optional\". (If the binary distributions wish to continue to ship it, that is just a matter of configuring them so.)\n+\n+---\n \n ```\n gcc -shared -Wl,--enable-auto-image-base -L/cygdrive/d/a/sage/sage/local/lib -Wl,-rpath,/cygdrive/d/a/sage/sage/local/lib build/temp.cygwin-3.1.4-x86_64-3.7/./rpy/rinterface/_rinterface.o -L/usr/lib/R/lib -L/cygdrive/d/a/sage/sage/local/lib/python3.7/config -L/usr/lib -Lbuild/temp.cygwin-3.1.4-x86_64-3.7 -L/usr/lib/R/lib -lreadline -lR -lpcre -llzma -lbz2 -lz -ltirpc -lrt -ldl -lm -liconv -licuuc -licui18n -lpython3.7m -lr_utils -o build/lib.cygwin-3.1.4-x86_64-3.7/rpy2/rinterface/_rinterface.cpython-37m-x86_64-cygwin.dll -fopenmp\n``````\n",
    "created_at": "2020-04-20T02:02:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463476",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,11 @@
-As proposed in https://groups.google.com/d/msg/sage-devel/IX3niEdmCEM/LovmF6gmIwAJ, we remove `r` from the list of standard packages. We make both `r` and `rpy2` optional packages.  This has minimal impact for users of these packages.
+In https://groups.google.com/d/msg/sage-devel/IX3niEdmCEM/LovmF6gmIwAJ, it was proposed to remove `r` (and thus everything that depends on it) from the list of standard packages. 
 
-This works around an unresolved build failure of `rpy2` on cygwin when using system R.
-This can be seen on the [GitHub](../wiki/GitHub) Actions workflow from #29403 but has also been reproduced locally.
+The build problems with `r` that prompted this proposal have been resolved. However, for the package `rpy2` there is an unresolved build failure on cygwin when using system R (`cygwin-standard`).
+This can be seen on the [GitHub](../wiki/GitHub) Actions workflow from #29403 but has also been reproduced locally. Details below.
+
+This ticket downgrades rpy2 to "optional". (If the binary distributions wish to continue to ship it, that is just a matter of configuring them so.)
+
+---
 
 ```
 gcc -shared -Wl,--enable-auto-image-base -L/cygdrive/d/a/sage/sage/local/lib -Wl,-rpath,/cygdrive/d/a/sage/sage/local/lib build/temp.cygwin-3.1.4-x86_64-3.7/./rpy/rinterface/_rinterface.o -L/usr/lib/R/lib -L/cygdrive/d/a/sage/sage/local/lib/python3.7/config -L/usr/lib -Lbuild/temp.cygwin-3.1.4-x86_64-3.7 -L/usr/lib/R/lib -lreadline -lR -lpcre -llzma -lbz2 -lz -ltirpc -lrt -ldl -lm -liconv -licuuc -licui18n -lpython3.7m -lr_utils -o build/lib.cygwin-3.1.4-x86_64-3.7/rpy2/rinterface/_rinterface.cpython-37m-x86_64-cygwin.dll -fopenmp
``````




---

archive/issue_events_405559.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-20T02:02:44Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "title_is": "Downgrade rpy2 to \"optional\" because it fails to build on cygwin-standard",
    "title_was": "Downgrade R, rpy2 to \"optional\" because rpy2 fails to build on cygwin-standard",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29486#event-405559"
}
```



---

archive/issue_comments_463477.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/95a72b6ed4240d45acbae755b06463e2b31d0f7a\">95a72b6</a></td><td><code>Downgrade package rpy2 to optional</code></td></tr></table>\n",
    "created_at": "2020-04-20T02:03:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463477",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/95a72b6ed4240d45acbae755b06463e2b31d0f7a">95a72b6</a></td><td><code>Downgrade package rpy2 to optional</code></td></tr></table>




---

archive/issue_comments_463478.json:
```json
{
    "body": "Changed commit from **[`6772c66`](https://github.com/sagemath/sagetrac-mirror/commit/6772c6646ec76b5301977053009c8f0c4bd952b6)** to **[`95a72b6`](https://github.com/sagemath/sagetrac-mirror/commit/95a72b6ed4240d45acbae755b06463e2b31d0f7a)**",
    "created_at": "2020-04-20T02:03:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463478",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6772c66`](https://github.com/sagemath/sagetrac-mirror/commit/6772c6646ec76b5301977053009c8f0c4bd952b6)** to **[`95a72b6`](https://github.com/sagemath/sagetrac-mirror/commit/95a72b6ed4240d45acbae755b06463e2b31d0f7a)**



---

archive/issue_comments_463479.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nOK, how about this version",
    "created_at": "2020-04-20T02:04:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463479",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:21" align="right">comment:21</div>

OK, how about this version



---

archive/issue_comments_463480.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nUsers of [SageMathCell](../wiki/SageMathCell) certainly do care about having R available and Sage interface to it functional (which, I believe, is based on rpy2 now). It also seemed to me that 9.1 does not have to support Python2, am I wrong on this?",
    "created_at": "2020-04-20T02:40:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463480",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:22" align="right">comment:22</div>

Users of [SageMathCell](../wiki/SageMathCell) certainly do care about having R available and Sage interface to it functional (which, I believe, is based on rpy2 now). It also seemed to me that 9.1 does not have to support Python2, am I wrong on this?



---

archive/issue_comments_463481.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@novoselt](#comment:22):\n> Users of [SageMathCell](../wiki/SageMathCell) certainly do care about having R available and Sage interface to it functional (which, I believe, is based on rpy2 now). \n\nYou can still choose to install it, like any other optional package\n\n> It also seemed to me that 9.1 does not have to support Python2, am I wrong on this?\n\n9.1 still supports Python 2 - see https://wiki.sagemath.org/ReleaseTours/sage-9.1",
    "created_at": "2020-04-20T02:42:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463481",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@novoselt](#comment:22):
> Users of [SageMathCell](../wiki/SageMathCell) certainly do care about having R available and Sage interface to it functional (which, I believe, is based on rpy2 now). 

You can still choose to install it, like any other optional package

> It also seemed to me that 9.1 does not have to support Python2, am I wrong on this?

9.1 still supports Python 2 - see https://wiki.sagemath.org/ReleaseTours/sage-9.1



---

archive/issue_comments_463482.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@mkoeppe](#comment:23):\n> Replying to [@novoselt](#comment:22):\n> > Users of [SageMathCell](../wiki/SageMathCell) certainly do care about having R available and Sage interface to it functional (which, I believe, is based on rpy2 now). \n\n> \n> You can still choose to install it, like any other optional package\n\nMy point was however that **users** care about it. If they care about it in the context of [SageMathCell](../wiki/SageMathCell), it is feasible that they care in other cases as well...",
    "created_at": "2020-04-20T02:54:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463482",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@mkoeppe](#comment:23):
> Replying to [@novoselt](#comment:22):
> > Users of [SageMathCell](../wiki/SageMathCell) certainly do care about having R available and Sage interface to it functional (which, I believe, is based on rpy2 now). 

> 
> You can still choose to install it, like any other optional package

My point was however that **users** care about it. If they care about it in the context of [SageMathCell](../wiki/SageMathCell), it is feasible that they care in other cases as well...



---

archive/issue_comments_463483.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nThey can install it, and also nothing would stop our binary distributions from installing it, like any other optional packages",
    "created_at": "2020-04-20T02:57:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463483",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:25" align="right">comment:25</div>

They can install it, and also nothing would stop our binary distributions from installing it, like any other optional packages



---

archive/issue_comments_463484.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nThere is barely any integration of R into Sage. There's `sage.interfaces.r` (which uses rpy2) and then a single function in the `sage.stats.r` module. I don't think this makes sense to keep as a standard package",
    "created_at": "2020-04-20T03:11:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463484",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:26" align="right">comment:26</div>

There is barely any integration of R into Sage. There's `sage.interfaces.r` (which uses rpy2) and then a single function in the `sage.stats.r` module. I don't think this makes sense to keep as a standard package



---

archive/issue_comments_463485.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@mkoeppe](#comment:26):\n> There is barely any integration of R into Sage. There's `sage.interfaces.r` (which uses rpy2) and then a single function in the `sage.stats.r` module. I don't think this makes sense to keep as a standard package\n\nUm, `sage.interfaces.r` IS the whole point of integration! We don't use it for other parts ourselves, but we make it available for users to use whatever is available through that interface. If it is optional, but binary distributions still include it, I am missing the point of what is standard. And for those who do use binary distributions it is not that easy to install optional packages.\n\nI think dropping Python 2 support would be less noticeable than dropping R installation anywhere.",
    "created_at": "2020-04-20T03:47:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463485",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@mkoeppe](#comment:26):
> There is barely any integration of R into Sage. There's `sage.interfaces.r` (which uses rpy2) and then a single function in the `sage.stats.r` module. I don't think this makes sense to keep as a standard package

Um, `sage.interfaces.r` IS the whole point of integration! We don't use it for other parts ourselves, but we make it available for users to use whatever is available through that interface. If it is optional, but binary distributions still include it, I am missing the point of what is standard. And for those who do use binary distributions it is not that easy to install optional packages.

I think dropping Python 2 support would be less noticeable than dropping R installation anywhere.



---

archive/issue_comments_463486.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nWe can drop support now and then reinstate once #29441 is ready (and we've made the transition to Python 3 only). Or we can keep the support now and have a broken build on Cygwin. Are those the two choices?\n\nThe ticket description is vague: if we build Sage's R with Cygwin, does everything work; that is, is it only a problem of the system R on Cygwin?",
    "created_at": "2020-04-20T04:02:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463486",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:28" align="right">comment:28</div>

We can drop support now and then reinstate once #29441 is ready (and we've made the transition to Python 3 only). Or we can keep the support now and have a broken build on Cygwin. Are those the two choices?

The ticket description is vague: if we build Sage's R with Cygwin, does everything work; that is, is it only a problem of the system R on Cygwin?



---

archive/issue_comments_463487.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nReplying to [@jhpalmieri](#comment:28):\n> We can drop support now and then reinstate once #29441 is ready (and we've made the transition to Python 3 only). Or we can keep the support now and have a broken build on Cygwin. Are those the two choices?\n\nYes.\n \n> The ticket description is vague: if we build Sage's R with Cygwin, does everything work; that is, is it only a problem of the system R on Cygwin?\n\nThis should be checked. If it works with R from the sage spkg, then disabling use of the system package would be a 3rd option, probably the best one.",
    "created_at": "2020-04-20T06:35:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463487",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:29" align="right">comment:29</div>

Replying to [@jhpalmieri](#comment:28):
> We can drop support now and then reinstate once #29441 is ready (and we've made the transition to Python 3 only). Or we can keep the support now and have a broken build on Cygwin. Are those the two choices?

Yes.
 
> The ticket description is vague: if we build Sage's R with Cygwin, does everything work; that is, is it only a problem of the system R on Cygwin?

This should be checked. If it works with R from the sage spkg, then disabling use of the system package would be a 3rd option, probably the best one.



---

archive/issue_comments_463488.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nSuddenly dropping R/rpy2 fells rough. However, we don't have usage data to know how rough it would be.\n\nI'd prefer the third option if it proves workable. Otherwise is it possible to have it optional so that it doesn't build on cygwin but build elsewhere?",
    "created_at": "2020-04-20T08:19:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463488",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:32" align="right">comment:32</div>

Suddenly dropping R/rpy2 fells rough. However, we don't have usage data to know how rough it would be.

I'd prefer the third option if it proves workable. Otherwise is it possible to have it optional so that it doesn't build on cygwin but build elsewhere?



---

archive/issue_comments_463489.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@mkoeppe](#comment:29):\n> > The ticket description is vague: if we build Sage's R with Cygwin, does everything work; that is, is it only a problem of the system R on Cygwin?\n\n> \n> This should be checked. If it works with R from the sage spkg, then disabling use of the system package would be a 3rd option, probably the best one.\n\nIt seems that this would work, but I have to check more",
    "created_at": "2020-04-20T15:58:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463489",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@mkoeppe](#comment:29):
> > The ticket description is vague: if we build Sage's R with Cygwin, does everything work; that is, is it only a problem of the system R on Cygwin?

> 
> This should be checked. If it works with R from the sage spkg, then disabling use of the system package would be a 3rd option, probably the best one.

It seems that this would work, but I have to check more



---

archive/issue_comments_463490.json:
```json
{
    "body": "<div id=\"comment:34\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/032eb86b3276ad60e35c9f065fe46d7f20f9593d\">032eb86</a></td><td><code>build/pkgs/r/spkg-configure.m4: Do not use system R on cygwin</code></td></tr></table>\n",
    "created_at": "2020-04-20T23:19:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463490",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:34"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/032eb86b3276ad60e35c9f065fe46d7f20f9593d">032eb86</a></td><td><code>build/pkgs/r/spkg-configure.m4: Do not use system R on cygwin</code></td></tr></table>




---

archive/issue_comments_463491.json:
```json
{
    "body": "Changed commit from **[`95a72b6`](https://github.com/sagemath/sagetrac-mirror/commit/95a72b6ed4240d45acbae755b06463e2b31d0f7a)** to **[`032eb86`](https://github.com/sagemath/sagetrac-mirror/commit/032eb86b3276ad60e35c9f065fe46d7f20f9593d)**",
    "created_at": "2020-04-20T23:19:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463491",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`95a72b6`](https://github.com/sagemath/sagetrac-mirror/commit/95a72b6ed4240d45acbae755b06463e2b31d0f7a)** to **[`032eb86`](https://github.com/sagemath/sagetrac-mirror/commit/032eb86b3276ad60e35c9f065fe46d7f20f9593d)**



---

archive/issue_events_405560.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-20T23:22:23Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "title_is": "cygwin: Do not use system R",
    "title_was": "Downgrade rpy2 to \"optional\" because it fails to build on cygwin-standard",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29486#event-405560"
}
```



---

archive/issue_comments_463492.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,9 +1,8 @@\n-In https://groups.google.com/d/msg/sage-devel/IX3niEdmCEM/LovmF6gmIwAJ, it was proposed to remove `r` (and thus everything that depends on it) from the list of standard packages. \n-\n-The build problems with `r` that prompted this proposal have been resolved. However, for the package `rpy2` there is an unresolved build failure on cygwin when using system R (`cygwin-standard`).\n+For package `rpy2` (versions 2.8.x) there is an unresolved build failure on cygwin when using system R (`cygwin-standard`).\n This can be seen on the [GitHub](../wiki/GitHub) Actions workflow from #29403 but has also been reproduced locally. Details below.\n \n-This ticket downgrades rpy2 to \"optional\". (If the binary distributions wish to continue to ship it, that is just a matter of configuring them so.)\n+This ticket disables use of system R on cygwin.  This should be reverted with the #29441 upgrade to more recent `rpy2` (python-3 only).\n+\n \n ---\n \n``````\n",
    "created_at": "2020-04-20T23:22:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463492",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,9 +1,8 @@
-In https://groups.google.com/d/msg/sage-devel/IX3niEdmCEM/LovmF6gmIwAJ, it was proposed to remove `r` (and thus everything that depends on it) from the list of standard packages. 
-
-The build problems with `r` that prompted this proposal have been resolved. However, for the package `rpy2` there is an unresolved build failure on cygwin when using system R (`cygwin-standard`).
+For package `rpy2` (versions 2.8.x) there is an unresolved build failure on cygwin when using system R (`cygwin-standard`).
 This can be seen on the [GitHub](../wiki/GitHub) Actions workflow from #29403 but has also been reproduced locally. Details below.
 
-This ticket downgrades rpy2 to "optional". (If the binary distributions wish to continue to ship it, that is just a matter of configuring them so.)
+This ticket disables use of system R on cygwin.  This should be reverted with the #29441 upgrade to more recent `rpy2` (python-3 only).
+
 
 ---
 
``````




---

archive/issue_comments_463493.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nOK, new approach",
    "created_at": "2020-04-20T23:22:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463493",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:36" align="right">comment:36</div>

OK, new approach



---

archive/issue_comments_463494.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nThank you for figuring it out!",
    "created_at": "2020-04-21T02:27:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463494",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:37" align="right">comment:37</div>

Thank you for figuring it out!



---

archive/issue_comments_463495.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nOK, this works on non-Cygwin. Now to test on Cygwin...",
    "created_at": "2020-04-21T03:05:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463495",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:38" align="right">comment:38</div>

OK, this works on non-Cygwin. Now to test on Cygwin...



---

archive/issue_comments_463496.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nCygwin tests on https://github.com/dimpase/sage/actions/runs/83451150",
    "created_at": "2020-04-21T03:11:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463496",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:39" align="right">comment:39</div>

Cygwin tests on https://github.com/dimpase/sage/actions/runs/83451150



---

archive/issue_comments_463497.json:
```json
{
    "body": "Reviewer: **Dima Pasechnik**",
    "created_at": "2020-04-21T03:12:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463497",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Dima Pasechnik**



---

archive/issue_events_405561.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-04-21T03:27:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29486#event-405561"
}
```



---

archive/issue_events_405562.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-04-21T03:27:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29486#event-405562"
}
```



---

archive/issue_comments_463498.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nOK, this works",
    "created_at": "2020-04-21T03:27:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463498",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:41" align="right">comment:41</div>

OK, this works



---

archive/issue_comments_463499.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nGreat, I'm very happy with this alternate approach!",
    "created_at": "2020-04-21T04:15:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463499",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:42" align="right">comment:42</div>

Great, I'm very happy with this alternate approach!



---

archive/issue_comments_463500.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nThanks!",
    "created_at": "2020-04-21T05:21:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463500",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:43" align="right">comment:43</div>

Thanks!



---

archive/issue_comments_463501.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/downgrade_r__rpy2_to__optional__because_rpy2_fails_to_build_on_cygwin_standard](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/downgrade_r__rpy2_to__optional__because_rpy2_fails_to_build_on_cygwin_standard)** to **[`032eb86`](https://github.com/sagemath/sagetrac-mirror/commit/032eb86b3276ad60e35c9f065fe46d7f20f9593d)**",
    "created_at": "2020-04-23T22:33:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29486#issuecomment-463501",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/downgrade_r__rpy2_to__optional__because_rpy2_fails_to_build_on_cygwin_standard](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/downgrade_r__rpy2_to__optional__because_rpy2_fails_to_build_on_cygwin_standard)** to **[`032eb86`](https://github.com/sagemath/sagetrac-mirror/commit/032eb86b3276ad60e35c9f065fe46d7f20f9593d)**



---

archive/issue_events_405563.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-23T22:33:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29486#event-405563"
}
```



---

archive/issue_events_405564.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "b30ea29038cc121300e860bcb450c30ef91bb9b8",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-04-23T22:33:23Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29486",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29486#event-405564"
}
```
