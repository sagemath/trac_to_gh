# Issue 29486: cygwin: Do not use system R

archive/issues_029249.json:
```json
{
    "body": "For package `rpy2` (versions 2.8.x) there is an unresolved build failure on cygwin when using system R (`cygwin-standard`).\nThis can be seen on the [GitHub](GitHub) Actions workflow from #29403 but has also been reproduced locally. Details below.\n\nThis ticket disables use of system R on cygwin.  This should be reverted with the #29441 upgrade to more recent `rpy2` (python-3 only).\n\n\n---\n\n```\ngcc -shared -Wl,--enable-auto-image-base -L/cygdrive/d/a/sage/sage/local/lib -Wl,-rpath,/cygdrive/d/a/sage/sage/local/lib build/temp.cygwin-3.1.4-x86_64-3.7/./rpy/rinterface/_rinterface.o -L/usr/lib/R/lib -L/cygdrive/d/a/sage/sage/local/lib/python3.7/config -L/usr/lib -Lbuild/temp.cygwin-3.1.4-x86_64-3.7 -L/usr/lib/R/lib -lreadline -lR -lpcre -llzma -lbz2 -lz -ltirpc -lrt -ldl -lm -liconv -licuuc -licui18n -lpython3.7m -lr_utils -o build/lib.cygwin-3.1.4-x86_64-3.7/rpy2/rinterface/_rinterface.cpython-37m-x86_64-cygwin.dll -fopenmp\n    /usr/lib/gcc/x86_64-pc-cygwin/9.3.0/../../../../x86_64-pc-cygwin/bin/ld: build/temp.cygwin-3.1.4-x86_64-3.7/libr_utils.a(r_utils.o): in function `rpy2_findfun':\n    /tmp/pip-req-build-ymc5_3kd/./rpy/rinterface/r_utils.c:58: undefined reference to `Rf_findVarInFrame3'\n    /tmp/pip-req-build-ymc5_3kd/./rpy/rinterface/r_utils.c:58:(.text+0xda): relocation truncated to fit: R_X86_64_PC32 against undefined symbol `Rf_findVarInFrame3'\n    /usr/lib/gcc/x86_64-pc-cygwin/9.3.0/../../../../x86_64-pc-cygwin/bin/ld: build/temp.cygwin-3.1.4-x86_64-3.7/libr_utils.a(r_utils.o): in function `rpy2_list_attr':\n    /tmp/pip-req-build-ymc5_3kd/./rpy/rinterface/r_utils.c:129: undefined reference to `ATTRIB'\n    /tmp/pip-req-build-ymc5_3kd/./rpy/rinterface/r_utils.c:129:(.text+0x340): relocation truncated to fit: R_X86_64_PC32 against undefined symbol `ATTRIB'\n    /usr/lib/gcc/x86_64-pc-cygwin/9.3.0/../../../../x86_64-pc-cygwin/bin/ld: build/temp.cygwin-3.1.4-x86_64-3.7/libr_utils.a(r_utils.o): in function `rpy2_remove':\n    /tmp/pip-req-build-ymc5_3kd/./rpy/rinterface/r_utils.c:152: undefined reference to `Rf_lang4'\n```\n\nFull logs can be downloaded at:\n- https://github.com/mkoeppe/sage/runs/572730287\n\nThe sage-local artifact that has been built can be downloaded at \n- https://github.com/mkoeppe/sage/suites/584124994/artifacts/4126694\n\n\nPrevious tickets: https://trac.sagemath.org/search?q=rpy2+cygwin&noquickjump=1&branch=on&milestone=on&ticket=on&wiki=on\n\n\nCC:  @EmmanuelCharpentier @videlec @tscrim jpflori @embray @vbraun @dimpase @jhpalmieri @darijgr @kiwifb\n\nBranch/Commit: 032eb86b3276ad60e35c9f065fe46d7f20f9593d\n\nReviewer: Dima Pasechnik\n\nAuthor: Matthias Koeppe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29486\n\n",
    "closed_at": "2020-04-23T22:33:23Z",
    "created_at": "2020-04-09T16:49:23Z",
    "labels": [
        "component: porting: cygwin",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "cygwin: Do not use system R",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29486",
    "user": "https://github.com/mkoeppe"
}
```
For package `rpy2` (versions 2.8.x) there is an unresolved build failure on cygwin when using system R (`cygwin-standard`).
This can be seen on the [GitHub](GitHub) Actions workflow from #29403 but has also been reproduced locally. Details below.

This ticket disables use of system R on cygwin.  This should be reverted with the #29441 upgrade to more recent `rpy2` (python-3 only).


---

```
gcc -shared -Wl,--enable-auto-image-base -L/cygdrive/d/a/sage/sage/local/lib -Wl,-rpath,/cygdrive/d/a/sage/sage/local/lib build/temp.cygwin-3.1.4-x86_64-3.7/./rpy/rinterface/_rinterface.o -L/usr/lib/R/lib -L/cygdrive/d/a/sage/sage/local/lib/python3.7/config -L/usr/lib -Lbuild/temp.cygwin-3.1.4-x86_64-3.7 -L/usr/lib/R/lib -lreadline -lR -lpcre -llzma -lbz2 -lz -ltirpc -lrt -ldl -lm -liconv -licuuc -licui18n -lpython3.7m -lr_utils -o build/lib.cygwin-3.1.4-x86_64-3.7/rpy2/rinterface/_rinterface.cpython-37m-x86_64-cygwin.dll -fopenmp
    /usr/lib/gcc/x86_64-pc-cygwin/9.3.0/../../../../x86_64-pc-cygwin/bin/ld: build/temp.cygwin-3.1.4-x86_64-3.7/libr_utils.a(r_utils.o): in function `rpy2_findfun':
    /tmp/pip-req-build-ymc5_3kd/./rpy/rinterface/r_utils.c:58: undefined reference to `Rf_findVarInFrame3'
    /tmp/pip-req-build-ymc5_3kd/./rpy/rinterface/r_utils.c:58:(.text+0xda): relocation truncated to fit: R_X86_64_PC32 against undefined symbol `Rf_findVarInFrame3'
    /usr/lib/gcc/x86_64-pc-cygwin/9.3.0/../../../../x86_64-pc-cygwin/bin/ld: build/temp.cygwin-3.1.4-x86_64-3.7/libr_utils.a(r_utils.o): in function `rpy2_list_attr':
    /tmp/pip-req-build-ymc5_3kd/./rpy/rinterface/r_utils.c:129: undefined reference to `ATTRIB'
    /tmp/pip-req-build-ymc5_3kd/./rpy/rinterface/r_utils.c:129:(.text+0x340): relocation truncated to fit: R_X86_64_PC32 against undefined symbol `ATTRIB'
    /usr/lib/gcc/x86_64-pc-cygwin/9.3.0/../../../../x86_64-pc-cygwin/bin/ld: build/temp.cygwin-3.1.4-x86_64-3.7/libr_utils.a(r_utils.o): in function `rpy2_remove':
    /tmp/pip-req-build-ymc5_3kd/./rpy/rinterface/r_utils.c:152: undefined reference to `Rf_lang4'
```

Full logs can be downloaded at:
- https://github.com/mkoeppe/sage/runs/572730287

The sage-local artifact that has been built can be downloaded at 
- https://github.com/mkoeppe/sage/suites/584124994/artifacts/4126694


Previous tickets: https://trac.sagemath.org/search?q=rpy2+cygwin&noquickjump=1&branch=on&milestone=on&ticket=on&wiki=on


CC:  @EmmanuelCharpentier @videlec @tscrim jpflori @embray @vbraun @dimpase @jhpalmieri @darijgr @kiwifb

Branch/Commit: 032eb86b3276ad60e35c9f065fe46d7f20f9593d

Reviewer: Dima Pasechnik

Author: Matthias Koeppe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29486





---

archive/issue_comments_414002.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2020-04-09T16:49:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414002",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_comments_414003.json:
```json
{
    "body": "<a id='comment:3'></a>Did you try the updated rpy2 package from #29441?",
    "created_at": "2020-04-10T07:08:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414003",
    "user": "https://github.com/videlec"
}
```

<a id='comment:3'></a>Did you try the updated rpy2 package from #29441?



---

archive/issue_comments_414004.json:
```json
{
    "body": "<a id='comment:4'></a>I haven't because this upgrade cannot be used for the 9.1 release cycle; but you can by using the testing infrastructure ticket #29403",
    "created_at": "2020-04-10T16:34:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414004",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>I haven't because this upgrade cannot be used for the 9.1 release cycle; but you can by using the testing infrastructure ticket #29403



---

archive/issue_comments_414005.json:
```json
{
    "body": "Changing priority from critical to blocker.",
    "created_at": "2020-04-15T03:24:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414005",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from critical to blocker.



---

archive/issue_comments_414006.json:
```json
{
    "body": "<a id='comment:6'></a>Still a problem. I'm trying now whether an update to 2.8.6 (last py2-compatible release) helps",
    "created_at": "2020-04-19T19:37:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414006",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>Still a problem. I'm trying now whether an update to 2.8.6 (last py2-compatible release) helps



---

archive/issue_comments_414007.json:
```json
{
    "body": "<a id='comment:7'></a>Same with 2.8.6",
    "created_at": "2020-04-19T19:53:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414007",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>Same with 2.8.6



---

archive/issue_comments_414008.json:
```json
{
    "body": "<a id='comment:8'></a>Trying #29441 now",
    "created_at": "2020-04-19T20:03:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414008",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>Trying #29441 now



---

archive/issue_comments_414009.json:
```json
{
    "body": "<a id='comment:9'></a>OK, rpy2 3.2.7 from #29441 installs OK on Cygwin.",
    "created_at": "2020-04-19T21:16:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414009",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>OK, rpy2 3.2.7 from #29441 installs OK on Cygwin.



---

archive/issue_comments_414010.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-04-19T21:30:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414010",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_414011.json:
```json
{
    "body": "<a id='comment:12'></a>New commits:",
    "created_at": "2020-04-19T21:30:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414011",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>New commits:



---

archive/issue_comments_414012.json:
```json
{
    "body": "<a id='comment:14'></a>If #29441 fixes the problem, can't we just that instead? Or are you proposing this as a temporary solution until #29441 is ready?",
    "created_at": "2020-04-19T23:42:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414012",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:14'></a>If #29441 fixes the problem, can't we just that instead? Or are you proposing this as a temporary solution until #29441 is ready?



---

archive/issue_comments_414013.json:
```json
{
    "body": "<a id='comment:15'></a>We can't use #29441 because the new version is py3 only. \nWhen we make the switch to py3-only sage, we can reconsider.",
    "created_at": "2020-04-20T00:32:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414013",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>We can't use #29441 because the new version is py3 only. 
When we make the switch to py3-only sage, we can reconsider.



---

archive/issue_comments_414014.json:
```json
{
    "body": "<a id='comment:16'></a>This leads to a policy question: does this failure on Cygwin mean that people on OS X, linux, etc., are deprived of having a Sage installation of R? (Does anyone download a Sage binary expecting to get a functioning installation of R?)\n\nActually, why should R be optional; shouldn't it just be rpy2?",
    "created_at": "2020-04-20T00:35:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414014",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:16'></a>This leads to a policy question: does this failure on Cygwin mean that people on OS X, linux, etc., are deprived of having a Sage installation of R? (Does anyone download a Sage binary expecting to get a functioning installation of R?)

Actually, why should R be optional; shouldn't it just be rpy2?



---

archive/issue_comments_414015.json:
```json
{
    "body": "<a id='comment:17'></a>Yes, we could just make rpy2 optional, that would be fine with me.\n\nI don't really know if we have any users of R and of rpy2.",
    "created_at": "2020-04-20T00:39:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414015",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>Yes, we could just make rpy2 optional, that would be fine with me.

I don't really know if we have any users of R and of rpy2.



---

archive/issue_comments_414016.json:
```json
{
    "body": "<a id='comment:18'></a>And unfortunately nobody responded to my message on sage-devel last month",
    "created_at": "2020-04-20T00:59:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414016",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>And unfortunately nobody responded to my message on sage-devel last month



---

archive/issue_comments_414017.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-04-20T02:03:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414017",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_414018.json:
```json
{
    "body": "<a id='comment:21'></a>OK, how about this version",
    "created_at": "2020-04-20T02:04:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414018",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'></a>OK, how about this version



---

archive/issue_comments_414019.json:
```json
{
    "body": "<a id='comment:22'></a>Users of [SageMathCell](SageMathCell) certainly do care about having R available and Sage interface to it functional (which, I believe, is based on rpy2 now). It also seemed to me that 9.1 does not have to support Python2, am I wrong on this?",
    "created_at": "2020-04-20T02:40:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414019",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:22'></a>Users of [SageMathCell](SageMathCell) certainly do care about having R available and Sage interface to it functional (which, I believe, is based on rpy2 now). It also seemed to me that 9.1 does not have to support Python2, am I wrong on this?



---

archive/issue_comments_414020.json:
```json
{
    "body": "<a id='comment:23'></a>Replying to [comment:22 novoselt]:\n> Users of [SageMathCell](SageMathCell) certainly do care about having R available and Sage interface to it functional (which, I believe, is based on rpy2 now). \n\n\nYou can still choose to install it, like any other optional package\n\n> It also seemed to me that 9.1 does not have to support Python2, am I wrong on this?\n\n\n9.1 still supports Python 2 - see https://wiki.sagemath.org/ReleaseTours/sage-9.1",
    "created_at": "2020-04-20T02:42:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414020",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'></a>Replying to [comment:22 novoselt]:
> Users of [SageMathCell](SageMathCell) certainly do care about having R available and Sage interface to it functional (which, I believe, is based on rpy2 now). 


You can still choose to install it, like any other optional package

> It also seemed to me that 9.1 does not have to support Python2, am I wrong on this?


9.1 still supports Python 2 - see https://wiki.sagemath.org/ReleaseTours/sage-9.1



---

archive/issue_comments_414021.json:
```json
{
    "body": "<a id='comment:24'></a>Replying to [comment:23 mkoeppe]:\n> Replying to [comment:22 novoselt]:\n> > Users of [SageMathCell](SageMathCell) certainly do care about having R available and Sage interface to it functional (which, I believe, is based on rpy2 now). \n\n> \n> You can still choose to install it, like any other optional package\n\n\nMy point was however that **users** care about it. If they care about it in the context of [SageMathCell](SageMathCell), it is feasible that they care in other cases as well...",
    "created_at": "2020-04-20T02:54:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414021",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:24'></a>Replying to [comment:23 mkoeppe]:
> Replying to [comment:22 novoselt]:
> > Users of [SageMathCell](SageMathCell) certainly do care about having R available and Sage interface to it functional (which, I believe, is based on rpy2 now). 

> 
> You can still choose to install it, like any other optional package


My point was however that **users** care about it. If they care about it in the context of [SageMathCell](SageMathCell), it is feasible that they care in other cases as well...



---

archive/issue_comments_414022.json:
```json
{
    "body": "<a id='comment:25'></a>They can install it, and also nothing would stop our binary distributions from installing it, like any other optional packages",
    "created_at": "2020-04-20T02:57:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414022",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'></a>They can install it, and also nothing would stop our binary distributions from installing it, like any other optional packages



---

archive/issue_comments_414023.json:
```json
{
    "body": "<a id='comment:26'></a>There is barely any integration of R into Sage. There's `sage.interfaces.r` (which uses rpy2) and then a single function in the `sage.stats.r` module. I don't think this makes sense to keep as a standard package",
    "created_at": "2020-04-20T03:11:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414023",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>There is barely any integration of R into Sage. There's `sage.interfaces.r` (which uses rpy2) and then a single function in the `sage.stats.r` module. I don't think this makes sense to keep as a standard package



---

archive/issue_comments_414024.json:
```json
{
    "body": "<a id='comment:27'></a>Replying to [comment:26 mkoeppe]:\n> There is barely any integration of R into Sage. There's `sage.interfaces.r` (which uses rpy2) and then a single function in the `sage.stats.r` module. I don't think this makes sense to keep as a standard package\n\n\nUm, `sage.interfaces.r` IS the whole point of integration! We don't use it for other parts ourselves, but we make it available for users to use whatever is available through that interface. If it is optional, but binary distributions still include it, I am missing the point of what is standard. And for those who do use binary distributions it is not that easy to install optional packages.\n\nI think dropping Python 2 support would be less noticeable than dropping R installation anywhere.",
    "created_at": "2020-04-20T03:47:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414024",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:27'></a>Replying to [comment:26 mkoeppe]:
> There is barely any integration of R into Sage. There's `sage.interfaces.r` (which uses rpy2) and then a single function in the `sage.stats.r` module. I don't think this makes sense to keep as a standard package


Um, `sage.interfaces.r` IS the whole point of integration! We don't use it for other parts ourselves, but we make it available for users to use whatever is available through that interface. If it is optional, but binary distributions still include it, I am missing the point of what is standard. And for those who do use binary distributions it is not that easy to install optional packages.

I think dropping Python 2 support would be less noticeable than dropping R installation anywhere.



---

archive/issue_comments_414025.json:
```json
{
    "body": "<a id='comment:28'></a>We can drop support now and then reinstate once #29441 is ready (and we've made the transition to Python 3 only). Or we can keep the support now and have a broken build on Cygwin. Are those the two choices?\n\nThe ticket description is vague: if we build Sage's R with Cygwin, does everything work; that is, is it only a problem of the system R on Cygwin?",
    "created_at": "2020-04-20T04:02:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414025",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:28'></a>We can drop support now and then reinstate once #29441 is ready (and we've made the transition to Python 3 only). Or we can keep the support now and have a broken build on Cygwin. Are those the two choices?

The ticket description is vague: if we build Sage's R with Cygwin, does everything work; that is, is it only a problem of the system R on Cygwin?



---

archive/issue_comments_414026.json:
```json
{
    "body": "<a id='comment:29'></a>Replying to [comment:28 jhpalmieri]:\n> We can drop support now and then reinstate once #29441 is ready (and we've made the transition to Python 3 only). Or we can keep the support now and have a broken build on Cygwin. Are those the two choices?\n\n\nYes.\n \n> The ticket description is vague: if we build Sage's R with Cygwin, does everything work; that is, is it only a problem of the system R on Cygwin?\n\n\nThis should be checked. If it works with R from the sage spkg, then disabling use of the system package would be a 3rd option, probably the best one.",
    "created_at": "2020-04-20T06:35:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414026",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'></a>Replying to [comment:28 jhpalmieri]:
> We can drop support now and then reinstate once #29441 is ready (and we've made the transition to Python 3 only). Or we can keep the support now and have a broken build on Cygwin. Are those the two choices?


Yes.
 
> The ticket description is vague: if we build Sage's R with Cygwin, does everything work; that is, is it only a problem of the system R on Cygwin?


This should be checked. If it works with R from the sage spkg, then disabling use of the system package would be a 3rd option, probably the best one.



---

archive/issue_comments_414027.json:
```json
{
    "body": "<a id='comment:32'></a>Suddenly dropping R/rpy2 fells rough. However, we don't have usage data to know how rough it would be.\n\nI'd prefer the third option if it proves workable. Otherwise is it possible to have it optional so that it doesn't build on cygwin but build elsewhere?",
    "created_at": "2020-04-20T08:19:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414027",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:32'></a>Suddenly dropping R/rpy2 fells rough. However, we don't have usage data to know how rough it would be.

I'd prefer the third option if it proves workable. Otherwise is it possible to have it optional so that it doesn't build on cygwin but build elsewhere?



---

archive/issue_comments_414028.json:
```json
{
    "body": "<a id='comment:33'></a>Replying to [comment:29 mkoeppe]:\n> > The ticket description is vague: if we build Sage's R with Cygwin, does everything work; that is, is it only a problem of the system R on Cygwin?\n\n> \n> This should be checked. If it works with R from the sage spkg, then disabling use of the system package would be a 3rd option, probably the best one.\n\n\nIt seems that this would work, but I have to check more",
    "created_at": "2020-04-20T15:58:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414028",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:33'></a>Replying to [comment:29 mkoeppe]:
> > The ticket description is vague: if we build Sage's R with Cygwin, does everything work; that is, is it only a problem of the system R on Cygwin?

> 
> This should be checked. If it works with R from the sage spkg, then disabling use of the system package would be a 3rd option, probably the best one.


It seems that this would work, but I have to check more



---

archive/issue_comments_414029.json:
```json
{
    "body": "<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-04-20T23:19:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414029",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_414030.json:
```json
{
    "body": "<a id='comment:36'></a>OK, new approach",
    "created_at": "2020-04-20T23:22:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414030",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:36'></a>OK, new approach



---

archive/issue_comments_414031.json:
```json
{
    "body": "<a id='comment:37'></a>Thank you for figuring it out!",
    "created_at": "2020-04-21T02:27:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414031",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:37'></a>Thank you for figuring it out!



---

archive/issue_comments_414032.json:
```json
{
    "body": "<a id='comment:38'></a>OK, this works on non-Cygwin. Now to test on Cygwin...",
    "created_at": "2020-04-21T03:05:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414032",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:38'></a>OK, this works on non-Cygwin. Now to test on Cygwin...



---

archive/issue_comments_414033.json:
```json
{
    "body": "<a id='comment:39'></a>Cygwin tests on https://github.com/dimpase/sage/actions/runs/83451150",
    "created_at": "2020-04-21T03:11:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414033",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:39'></a>Cygwin tests on https://github.com/dimpase/sage/actions/runs/83451150



---

archive/issue_comments_414034.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-04-21T03:27:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414034",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_414035.json:
```json
{
    "body": "<a id='comment:41'></a>OK, this works",
    "created_at": "2020-04-21T03:27:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414035",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:41'></a>OK, this works



---

archive/issue_comments_414036.json:
```json
{
    "body": "<a id='comment:42'></a>Great, I'm very happy with this alternate approach!",
    "created_at": "2020-04-21T04:15:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414036",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:42'></a>Great, I'm very happy with this alternate approach!



---

archive/issue_comments_414037.json:
```json
{
    "body": "<a id='comment:43'></a>Thanks!",
    "created_at": "2020-04-21T05:21:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414037",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:43'></a>Thanks!



---

archive/issue_events_075182.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-23T22:33:23Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29486#event-75182"
}
```



---

archive/issue_comments_414038.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-04-23T22:33:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29486#issuecomment-414038",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
