# Issue 29111: src/bin/sage: Delegate handling of options of sage-the-distribution, specifying a subset that is supported by sagelib proper

archive/issues_028874.json:
```json
{
    "body": "The `sage` script has a number of options that only make sense for sage-the-distribution, but do not make sense in downstream packaging of sage. Consequently, downstream packagers may install simple custom versions of the script that only provide a subset of the options.\n\nExamples:\n- `sage -sqlite` -- as discussed in #29002/#29092 -- because from a downstream packaging point of view, sage is not really responsible for providing sqlite, it's provided by justs another system package\n- `sage -upgrade` -- only makes sense with sage-the-distribution built from source\n\nWe should specify the subset of sage command line options that must be supported in any deployment/packaging of sage. This is so that user packages can work reliably.\n\nExamples:\n- `sage -c SAGECOMMAND` -- obviously\n- `sage -python -c COMMAND`\n- `sage -t` -- because it is used by user packages for testing sage sources\n- `sage -sh` ..... ?\n\nIn this ticket, we actually split `src/bin/sage` into sagelib functionality and sage-the-distribution functionality. `src/bin/sage` delegates unknown options to `build/bin/sage-site`. \n\nIdeally, distributions should be able to use an unmodified `src/bin/sage`.\n\nContext:\n- https://groups.google.com/d/msg/sage-packaging/BmkxIBdwbvE/fRMl2sjdBQAJ\n- #29060: Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages\n\nSee also:\n- #29884: `src/doc/bootstrap`: Generate `src/doc/en/reference/repl/options.rst`\n\n**CC:**  @kiwifb @isuruf @dimpase @embray @saraedum @antonio-rojas @slel @EmmanuelCharpentier @orlitzky @kcrisman\n\n**Branch:** [39536716aef05e8953bdc50038c49e5959ffdb6a](https://github.com/sagemath/sagetrac-mirror/commit/39536716aef05e8953bdc50038c49e5959ffdb6a)\n\n**Reviewer:** Matthias Koeppe, John Palmieri, Fran\u00e7ois Bissey\n\n**Author:** Matthias Koeppe, John Palmieri\n\n**Dependencies:** #29878, #29289, #29884\n\nIssue created by migration from https://trac.sagemath.org/ticket/29111\n\n",
    "closed_at": "2020-07-10T19:34:16Z",
    "created_at": "2020-01-30T16:12:13Z",
    "labels": [
        "component: scripts",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "src/bin/sage: Delegate handling of options of sage-the-distribution, specifying a subset that is supported by sagelib proper",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29111",
    "user": "https://github.com/mkoeppe"
}
```
The `sage` script has a number of options that only make sense for sage-the-distribution, but do not make sense in downstream packaging of sage. Consequently, downstream packagers may install simple custom versions of the script that only provide a subset of the options.

Examples:
- `sage -sqlite` -- as discussed in #29002/#29092 -- because from a downstream packaging point of view, sage is not really responsible for providing sqlite, it's provided by justs another system package
- `sage -upgrade` -- only makes sense with sage-the-distribution built from source

We should specify the subset of sage command line options that must be supported in any deployment/packaging of sage. This is so that user packages can work reliably.

Examples:
- `sage -c SAGECOMMAND` -- obviously
- `sage -python -c COMMAND`
- `sage -t` -- because it is used by user packages for testing sage sources
- `sage -sh` ..... ?

In this ticket, we actually split `src/bin/sage` into sagelib functionality and sage-the-distribution functionality. `src/bin/sage` delegates unknown options to `build/bin/sage-site`. 

Ideally, distributions should be able to use an unmodified `src/bin/sage`.

Context:
- https://groups.google.com/d/msg/sage-packaging/BmkxIBdwbvE/fRMl2sjdBQAJ
- #29060: Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages

See also:
- #29884: `src/doc/bootstrap`: Generate `src/doc/en/reference/repl/options.rst`

**CC:**  @kiwifb @isuruf @dimpase @embray @saraedum @antonio-rojas @slel @EmmanuelCharpentier @orlitzky @kcrisman

**Branch:** [39536716aef05e8953bdc50038c49e5959ffdb6a](https://github.com/sagemath/sagetrac-mirror/commit/39536716aef05e8953bdc50038c49e5959ffdb6a)

**Reviewer:** Matthias Koeppe, John Palmieri, Fran√ßois Bissey

**Author:** Matthias Koeppe, John Palmieri

**Dependencies:** #29878, #29289, #29884

Issue created by migration from https://trac.sagemath.org/ticket/29111





---

archive/issue_comments_542112.json:
```json
{
    "body": "<a id='comment:1'></a>\nAs I said on #29092, we should also move corresponding sage-the-distribution tests (such as those for `sage -sqlite`) mentioned in #29002) from `src` (which is for sagelib) to somewhere in `build` (which is for sage-the-distribution). Downstream packagers would ignore the sage-the-distribution tests.",
    "created_at": "2020-01-30T16:21:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542112",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'></a>
As I said on #29092, we should also move corresponding sage-the-distribution tests (such as those for `sage -sqlite`) mentioned in #29002) from `src` (which is for sagelib) to somewhere in `build` (which is for sage-the-distribution). Downstream packagers would ignore the sage-the-distribution tests.



---

archive/issue_events_083047.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T06:33:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29111#event-83047"
}
```



---

archive/issue_comments_542113.json:
```json
{
    "body": "<a id='comment:3'></a>\npushing these forward to 9.2",
    "created_at": "2020-04-14T06:33:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542113",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>
pushing these forward to 9.2



---

archive/issue_comments_542114.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -12,7 +12,7 @@\n - `sage -t` -- because it is used by user packages for testing sage sources\n - `sage -sh` ..... ?\n \n-(In addition to specifying this, we might actually want to split `src/bin/sage` into sagelib functionality and sage-the-distribution functionality.)\n+(In addition to specifying this, we might actually want to split `src/bin/sage` into sagelib functionality and sage-the-distribution functionality. Ideally, distributions should be able to use an unmodified `src/bin/sage`, which would delegate unknown options to an optional \"site\" script that would be provided by sage-the-distribution.)\n \n Context:\n - https://groups.google.com/d/msg/sage-packaging/BmkxIBdwbvE/fRMl2sjdBQAJ\n``````\n",
    "created_at": "2020-06-16T19:52:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542114",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -12,7 +12,7 @@
 - `sage -t` -- because it is used by user packages for testing sage sources
 - `sage -sh` ..... ?
 
-(In addition to specifying this, we might actually want to split `src/bin/sage` into sagelib functionality and sage-the-distribution functionality.)
+(In addition to specifying this, we might actually want to split `src/bin/sage` into sagelib functionality and sage-the-distribution functionality. Ideally, distributions should be able to use an unmodified `src/bin/sage`, which would delegate unknown options to an optional "site" script that would be provided by sage-the-distribution.)
 
 Context:
 - https://groups.google.com/d/msg/sage-packaging/BmkxIBdwbvE/fRMl2sjdBQAJ
``````




---

archive/issue_comments_542115.json:
```json
{
    "body": "<a id='comment:6'></a>\nI've asked this question before: if Sage is built with the system's Python, should we still keep `sage --python ...`? What is the difference between `sage --python` and `sage --sqlite3` (and what about `sage --gap`, `sage --singular`, etc.)?",
    "created_at": "2020-06-16T20:15:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542115",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:6'></a>
I've asked this question before: if Sage is built with the system's Python, should we still keep `sage --python ...`? What is the difference between `sage --python` and `sage --sqlite3` (and what about `sage --gap`, `sage --singular`, etc.)?



---

archive/issue_comments_542116.json:
```json
{
    "body": "<a id='comment:7'></a>\nHere are some arguments that should always be allowed:\n\n- `sage -t`\n- `sage -c`\n- `sage -h`\n- `sage -n`, `sage --notebook`\n- `sage --nodotsage`\n- `sage -v`, `sage --version`\n\n\"Advanced\" arguments:\n\n- `sage --preparse`\n- `sage --min`\n- `sage -q`\n- `sage --dumpversion`\n- `sage --startuptime`\n- `sage --fixdoctests`\n- `sage --coverage`\n- `sage --coverageall`\n- `sage --grep`, `sage --search_src`, `sage --grepdoc`, `sage --search_doc`\n- `sage --rst2ipynb`, `sage --ipynb2rst`\n\nMaybe also `sage --sh`.\n\n(I'm not saying is a complete list, but I would suggest these as a starting point.)",
    "created_at": "2020-06-16T20:24:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542116",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:7'></a>
Here are some arguments that should always be allowed:

- `sage -t`
- `sage -c`
- `sage -h`
- `sage -n`, `sage --notebook`
- `sage --nodotsage`
- `sage -v`, `sage --version`

"Advanced" arguments:

- `sage --preparse`
- `sage --min`
- `sage -q`
- `sage --dumpversion`
- `sage --startuptime`
- `sage --fixdoctests`
- `sage --coverage`
- `sage --coverageall`
- `sage --grep`, `sage --search_src`, `sage --grepdoc`, `sage --search_doc`
- `sage --rst2ipynb`, `sage --ipynb2rst`

Maybe also `sage --sh`.

(I'm not saying is a complete list, but I would suggest these as a starting point.)



---

archive/issue_comments_542117.json:
```json
{
    "body": "<a id='comment:8'></a>\nBy the way, `sage -twistd` doesn't work: there is no `twistd` executable since Sage 9.1. Plus we are removing the twisted package in #29754. See #29878.",
    "created_at": "2020-06-16T20:42:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542117",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:8'></a>
By the way, `sage -twistd` doesn't work: there is no `twistd` executable since Sage 9.1. Plus we are removing the twisted package in #29754. See #29878.



---

archive/issue_comments_542118.json:
```json
{
    "body": "<a id='comment:9'></a>\nHum, this ticket reminds me that I need to clean the version in sage-on-gentoo\n\n```\nfbissey@moonloop ~ $ sage -advanced\nSageMath version 9.2.beta1, Release Date: 2020-06-13\n\nRunning Sage:\n  file.[sage|py|spyx] -- run given .sage, .py or .spyx file\n  -advanced           -- print this advanced help message\n  -c <cmd>            -- Evaluates cmd as sage code\n  -h, -?              -- print short help message\n  -min [...]          -- do not populate global namespace (must be first\n                         option)\n  -preparse <file.sage> -- preparse file.sage and produce corresponding file.sage.py\n  -q                  -- quiet; start with no banner\n  -gthread, -qthread, -q4thread, -wthread, -pylab\n                      -- pass the option through to ipython\n  -v, -version        -- display Sage version information\n  -dumpversion        -- print Sage version\n\nRunning the notebook:\n  --notebook=[...]    -- start the Sage notebook (valid options are\n                         'default', 'sagenb', 'jupyter' and 'export').\n                         Current default is 'export' sagenb to jupyter.\n                         See the output of sage --notebook --help\n                         for more details and examples of how to pass\n                         optional arguments\n  -inotebook [...]    -- start the *insecure* Sage notebook (deprecated)\n  -n, -notebook [...] -- start the default Sage notebook (options are the\n                         same as for the notebook command in Sage).  See the\n                         output of sage -n -h for more details\n\nRunning external programs:\n  -cleaner            -- run the Sage cleaner\n  -cython [...]       -- run Cython with given arguments\n  -ecl [...]          -- run Common Lisp\n  -gap [...]          -- run Sage's Gap with given arguments\n  -gdb                -- run Sage under the control of gdb\n  -gp [...]           -- run Sage's PARI/GP calculator with given arguments\n  -ipython [...]      -- run Sage's IPython using the default environment (not\n                         Sage), passing additional options to IPython\n  -ipython3 [...]     -- same as above, but using Python 3\n  -jupyter [...]      -- run Sage's Jupyter with given arguments\n  -kash [...]         -- run Sage's Kash with given arguments\n                         (not installed currently, run sage -i kash)\n  -lisp [...]         -- run Lisp interpreter included with Sage\n  -M2 [...]           -- run Sage's Macaulay2 with given arguments\n                         (not installed currently, run sage -i macaulay2)\n  -maxima [...]       -- run Sage's Maxima with given arguments\n  -mwrank [...]       -- run Sage's mwrank with given arguments\n  -polymake [...]     -- run Sage's Polymake with given arguments\n                         (not installed currently, run sage -i polymake)\n  -python [...]       -- run the Python interpreter\n  -python2 [...]      -- run the Python 2 interpreter\n  -python3 [...]      -- run the Python 3 interpreter\n  -R [...]            -- run Sage's R with given arguments\n  -sh [...]           -- run $SHELL (/bin/bash) with Sage environment variables\n  -singular [...]     -- run Sage's singular with given arguments\n  -sqlite3 [...]      -- run Sage's sqlite3 with given arguments\n  -twistd [...]       -- run Twisted server\n\nTesting the Sage library:\n  -startuptime [module] -- display how long each component of Sage takes to\n                         start up; optionally specify a module to get more\n                         details about that particular module\n  -t [options] <--all|files|dir>\n                      -- test examples in .py, .pyx, .sage, .tex or .rst files\n                         selected options:\n                           --long - include lines with the phrase 'long time'\n                           --verbose - print debugging output during the test\n                           --all - test all files\n                           --sagenb - test all sagenb files\n                           --optional - controls which optional tests are run\n                           --initial - only show the first failure per block\n                           --debug - drop into PDB after an unexpected error\n                           --failed - only test files that failed last test\n                           --warn-long [timeout] - warning if doctest is slow\n                           --only-errors - only output failures, not successes\n                           --gc=GC - control garbarge collection (ALWAYS:\n                                     collect garbage before every test; NEVER:\n                                     disable gc; DEFAULT: Python default)\n                           --help - show all testing options\n  -tp <N> [...]       -- like -t above, but tests in parallel using N threads\n                         with 0 interpreted as a sensible default\n  -testall [options]  -- test all source files, docs, and examples.  options\n                         like -t\n\nFile conversion:\n  -rst2ipynb [...]    -- Generates Jupyter notebook (.ipynb) from standalone\n                         reStructuredText source.\n                         (not installed currently, run sage -i rst2ipynb)\n  -ipynb2rst [...]    -- Generates a reStructuredText source file from\n                         a Jupyter notebook (.ipynb).\n\nValgrind memory debugging:\n  -cachegrind         -- run Sage using Valgrind's cachegrind tool.  The log\n                         files are named sage-cachegrind.PID can be found in\n                         \n  -callgrind          -- run Sage using Valgrind's callgrind tool.  The log\n                         files are named sage-callgrind.PID can be found in\n                         \n  -massif             -- run Sage using Valgrind's massif tool.  The log\n                         files are named sage-massif.PID can be found in\n                         \n  -memcheck           -- run Sage using Valgrind's memcheck tool.  The log\n                         files are named sage-memcheck.PID can be found in\n                         \n  -omega              -- run Sage using Valgrind's omega tool.  The log\n                         files are named sage-omega.PID can be found in\n                         \n  -valgrind           -- this is an alias for -memcheck\n\nYou can also use -- before a long option, e.g., 'sage --optional'.\n```\nI have to drop the py2/py3 stuff for just defaut python. I dropped `-sh` the day I dropped `sage-env` altogether, the main point of keeping `sage -sh` around was to check or use the environment set by `sage-env`.",
    "created_at": "2020-06-16T21:03:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542118",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:9'></a>
Hum, this ticket reminds me that I need to clean the version in sage-on-gentoo

```
fbissey@moonloop ~ $ sage -advanced
SageMath version 9.2.beta1, Release Date: 2020-06-13

Running Sage:
  file.[sage|py|spyx] -- run given .sage, .py or .spyx file
  -advanced           -- print this advanced help message
  -c <cmd>            -- Evaluates cmd as sage code
  -h, -?              -- print short help message
  -min [...]          -- do not populate global namespace (must be first
                         option)
  -preparse <file.sage> -- preparse file.sage and produce corresponding file.sage.py
  -q                  -- quiet; start with no banner
  -gthread, -qthread, -q4thread, -wthread, -pylab
                      -- pass the option through to ipython
  -v, -version        -- display Sage version information
  -dumpversion        -- print Sage version

Running the notebook:
  --notebook=[...]    -- start the Sage notebook (valid options are
                         'default', 'sagenb', 'jupyter' and 'export').
                         Current default is 'export' sagenb to jupyter.
                         See the output of sage --notebook --help
                         for more details and examples of how to pass
                         optional arguments
  -inotebook [...]    -- start the *insecure* Sage notebook (deprecated)
  -n, -notebook [...] -- start the default Sage notebook (options are the
                         same as for the notebook command in Sage).  See the
                         output of sage -n -h for more details

Running external programs:
  -cleaner            -- run the Sage cleaner
  -cython [...]       -- run Cython with given arguments
  -ecl [...]          -- run Common Lisp
  -gap [...]          -- run Sage's Gap with given arguments
  -gdb                -- run Sage under the control of gdb
  -gp [...]           -- run Sage's PARI/GP calculator with given arguments
  -ipython [...]      -- run Sage's IPython using the default environment (not
                         Sage), passing additional options to IPython
  -ipython3 [...]     -- same as above, but using Python 3
  -jupyter [...]      -- run Sage's Jupyter with given arguments
  -kash [...]         -- run Sage's Kash with given arguments
                         (not installed currently, run sage -i kash)
  -lisp [...]         -- run Lisp interpreter included with Sage
  -M2 [...]           -- run Sage's Macaulay2 with given arguments
                         (not installed currently, run sage -i macaulay2)
  -maxima [...]       -- run Sage's Maxima with given arguments
  -mwrank [...]       -- run Sage's mwrank with given arguments
  -polymake [...]     -- run Sage's Polymake with given arguments
                         (not installed currently, run sage -i polymake)
  -python [...]       -- run the Python interpreter
  -python2 [...]      -- run the Python 2 interpreter
  -python3 [...]      -- run the Python 3 interpreter
  -R [...]            -- run Sage's R with given arguments
  -sh [...]           -- run $SHELL (/bin/bash) with Sage environment variables
  -singular [...]     -- run Sage's singular with given arguments
  -sqlite3 [...]      -- run Sage's sqlite3 with given arguments
  -twistd [...]       -- run Twisted server

Testing the Sage library:
  -startuptime [module] -- display how long each component of Sage takes to
                         start up; optionally specify a module to get more
                         details about that particular module
  -t [options] <--all|files|dir>
                      -- test examples in .py, .pyx, .sage, .tex or .rst files
                         selected options:
                           --long - include lines with the phrase 'long time'
                           --verbose - print debugging output during the test
                           --all - test all files
                           --sagenb - test all sagenb files
                           --optional - controls which optional tests are run
                           --initial - only show the first failure per block
                           --debug - drop into PDB after an unexpected error
                           --failed - only test files that failed last test
                           --warn-long [timeout] - warning if doctest is slow
                           --only-errors - only output failures, not successes
                           --gc=GC - control garbarge collection (ALWAYS:
                                     collect garbage before every test; NEVER:
                                     disable gc; DEFAULT: Python default)
                           --help - show all testing options
  -tp <N> [...]       -- like -t above, but tests in parallel using N threads
                         with 0 interpreted as a sensible default
  -testall [options]  -- test all source files, docs, and examples.  options
                         like -t

File conversion:
  -rst2ipynb [...]    -- Generates Jupyter notebook (.ipynb) from standalone
                         reStructuredText source.
                         (not installed currently, run sage -i rst2ipynb)
  -ipynb2rst [...]    -- Generates a reStructuredText source file from
                         a Jupyter notebook (.ipynb).

Valgrind memory debugging:
  -cachegrind         -- run Sage using Valgrind's cachegrind tool.  The log
                         files are named sage-cachegrind.PID can be found in
                         
  -callgrind          -- run Sage using Valgrind's callgrind tool.  The log
                         files are named sage-callgrind.PID can be found in
                         
  -massif             -- run Sage using Valgrind's massif tool.  The log
                         files are named sage-massif.PID can be found in
                         
  -memcheck           -- run Sage using Valgrind's memcheck tool.  The log
                         files are named sage-memcheck.PID can be found in
                         
  -omega              -- run Sage using Valgrind's omega tool.  The log
                         files are named sage-omega.PID can be found in
                         
  -valgrind           -- this is an alias for -memcheck

You can also use -- before a long option, e.g., 'sage --optional'.
```
I have to drop the py2/py3 stuff for just defaut python. I dropped `-sh` the day I dropped `sage-env` altogether, the main point of keeping `sage -sh` around was to check or use the environment set by `sage-env`.



---

archive/issue_comments_542119.json:
```json
{
    "body": "<a id='comment:10'></a>\nDropping `sage -sh` is a bad idea. User packages need this",
    "created_at": "2020-06-16T22:17:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542119",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>
Dropping `sage -sh` is a bad idea. User packages need this



---

archive/issue_comments_542120.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [jhpalmieri](#comment%3A6):\n> I've asked this question before: if Sage is built with the system's Python, should we still keep `sage --python ...`? What is the difference between `sage --python` and `sage --sqlite3` (and what about `sage --gap`, `sage --singular`, etc.)?\n\n\n`sage -python` means: run the python that sage runs in.\nIn distributions, this could just be plain Python.\n\nInstall scripts of user packages need this.",
    "created_at": "2020-06-16T22:19:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542120",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>
Replying to [jhpalmieri](#comment%3A6):
> I've asked this question before: if Sage is built with the system's Python, should we still keep `sage --python ...`? What is the difference between `sage --python` and `sage --sqlite3` (and what about `sage --gap`, `sage --singular`, etc.)?


`sage -python` means: run the python that sage runs in.
In distributions, this could just be plain Python.

Install scripts of user packages need this.



---

archive/issue_comments_542121.json:
```json
{
    "body": "**Dependencies:** #29878",
    "created_at": "2020-06-16T22:26:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542121",
    "user": "https://github.com/mkoeppe"
}
```

**Dependencies:** #29878



---

archive/issue_comments_542122.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [mkoeppe](#comment%3A10):\n> Dropping `sage -sh` is a bad idea. User packages need this\n\n\nCertainly, vanilla sage does need it. In sage-on-gentoo at best you would have a normal shell since I dropped sage-env altogether.",
    "created_at": "2020-06-16T22:29:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542122",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:13'></a>
Replying to [mkoeppe](#comment%3A10):
> Dropping `sage -sh` is a bad idea. User packages need this


Certainly, vanilla sage does need it. In sage-on-gentoo at best you would have a normal shell since I dropped sage-env altogether.



---

archive/issue_comments_542123.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [fbissey](#comment%3A13):\n> Replying to [mkoeppe](#comment%3A10):\n> > Dropping `sage -sh` is a bad idea. User packages need this\n\n> \n> Certainly, vanilla sage does need it. In sage-on-gentoo at best you would have a normal shell since I dropped sage-env altogether.\n\n\nYes, vanilla shell is fine. The point is that user packages need the _interface_.",
    "created_at": "2020-06-16T22:32:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542123",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>
Replying to [fbissey](#comment%3A13):
> Replying to [mkoeppe](#comment%3A10):
> > Dropping `sage -sh` is a bad idea. User packages need this

> 
> Certainly, vanilla sage does need it. In sage-on-gentoo at best you would have a normal shell since I dropped sage-env altogether.


Yes, vanilla shell is fine. The point is that user packages need the _interface_.



---

archive/issue_comments_542124.json:
```json
{
    "body": "**Changing dependencies** from \"#29878\" to \"#29878, #29289\".",
    "created_at": "2020-06-16T22:33:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542124",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#29878" to "#29878, #29289".



---

archive/issue_comments_542125.json:
```json
{
    "body": "<a id='comment:16'></a>\nNow, I understand what you mean. User scripts may start with `sage -sh` and what not. I completely forgot about that when I removed it - even though that was one of the reason I was keeping it around. I will re-instate it as a vanilla shell or no-op for compatibility.",
    "created_at": "2020-06-16T22:36:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542125",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:16'></a>
Now, I understand what you mean. User scripts may start with `sage -sh` and what not. I completely forgot about that when I removed it - even though that was one of the reason I was keeping it around. I will re-instate it as a vanilla shell or no-op for compatibility.



---

archive/issue_comments_542126.json:
```json
{
    "body": "<a id='comment:17'></a>\nGreat!",
    "created_at": "2020-06-16T22:39:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542126",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>
Great!



---

archive/issue_comments_542127.json:
```json
{
    "body": "**Branch:** [u/mkoeppe/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution)",
    "created_at": "2020-06-16T23:01:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542127",
    "user": "https://github.com/mkoeppe"
}
```

**Branch:** [u/mkoeppe/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution)



---

archive/issue_comments_542128.json:
```json
{
    "body": "<a id='comment:19'></a>\nHere's a beginning of what I have in mind. \n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b200d70de95654e31ad35dd751c034ed82d86c68\">b200d70</a></td><td><code>trac 29878: remove \"sage --twistd\" command-line argument</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e0b6112766e17ca2a4c72698d866afea6a3693db\">e0b6112</a></td><td><code>build/bin/sage-spkg, src/bin/sage: Remove support for installing old-style SPKGs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/20b2a931264e73ad5ea5b8ada726d4211e810431\">20b2a93</a></td><td><code>Merge branch 't/29289/remove_support_for_installing_old_style_spkgs__deprecated_in_sage_6_9' into t/29111/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/152e58155fe193fd9215bee3bf20755c5e0c51a2\">152e581</a></td><td><code>src/bin/sage: Delegate options that pertain to SAGE_ROOT or sage-the-distribution to the new script build/bin/sage-site</code></td></tr></table>\n",
    "created_at": "2020-06-16T23:02:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542128",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:19'></a>
Here's a beginning of what I have in mind. 

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b200d70de95654e31ad35dd751c034ed82d86c68">b200d70</a></td><td><code>trac 29878: remove "sage --twistd" command-line argument</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e0b6112766e17ca2a4c72698d866afea6a3693db">e0b6112</a></td><td><code>build/bin/sage-spkg, src/bin/sage: Remove support for installing old-style SPKGs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/20b2a931264e73ad5ea5b8ada726d4211e810431">20b2a93</a></td><td><code>Merge branch 't/29289/remove_support_for_installing_old_style_spkgs__deprecated_in_sage_6_9' into t/29111/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/152e58155fe193fd9215bee3bf20755c5e0c51a2">152e581</a></td><td><code>src/bin/sage: Delegate options that pertain to SAGE_ROOT or sage-the-distribution to the new script build/bin/sage-site</code></td></tr></table>




---

archive/issue_comments_542129.json:
```json
{
    "body": "**Commit:** [152e58155fe193fd9215bee3bf20755c5e0c51a2](https://github.com/sagemath/sagetrac-mirror/commit/152e58155fe193fd9215bee3bf20755c5e0c51a2)",
    "created_at": "2020-06-16T23:02:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542129",
    "user": "https://github.com/mkoeppe"
}
```

**Commit:** [152e58155fe193fd9215bee3bf20755c5e0c51a2](https://github.com/sagemath/sagetrac-mirror/commit/152e58155fe193fd9215bee3bf20755c5e0c51a2)



---

archive/issue_comments_542130.json:
```json
{
    "body": "<a id='comment:20'></a>\nOkay, I'm fine with keeping `sage --python`. What about `sage --singular` et al.? Should `src/bin/sage` be constructed by `./configure`, adding arguments when the corresponding packages are going to be installed by Sage? Or is that too complicated?",
    "created_at": "2020-06-16T23:12:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542130",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:20'></a>
Okay, I'm fine with keeping `sage --python`. What about `sage --singular` et al.? Should `src/bin/sage` be constructed by `./configure`, adding arguments when the corresponding packages are going to be installed by Sage? Or is that too complicated?



---

archive/issue_comments_542131.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -12,7 +12,9 @@\n - `sage -t` -- because it is used by user packages for testing sage sources\n - `sage -sh` ..... ?\n \n-(In addition to specifying this, we might actually want to split `src/bin/sage` into sagelib functionality and sage-the-distribution functionality. Ideally, distributions should be able to use an unmodified `src/bin/sage`, which would delegate unknown options to an optional \"site\" script that would be provided by sage-the-distribution.)\n+In this ticket, we actually split `src/bin/sage` into sagelib functionality and sage-the-distribution functionality. `src/bin/sage` delegates unknown options to `build/bin/sage-site`. \n+\n+Ideally, distributions should be able to use an unmodified `src/bin/sage`.\n \n Context:\n - https://groups.google.com/d/msg/sage-packaging/BmkxIBdwbvE/fRMl2sjdBQAJ\n``````\n",
    "created_at": "2020-06-16T23:12:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542131",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -12,7 +12,9 @@
 - `sage -t` -- because it is used by user packages for testing sage sources
 - `sage -sh` ..... ?
 
-(In addition to specifying this, we might actually want to split `src/bin/sage` into sagelib functionality and sage-the-distribution functionality. Ideally, distributions should be able to use an unmodified `src/bin/sage`, which would delegate unknown options to an optional "site" script that would be provided by sage-the-distribution.)
+In this ticket, we actually split `src/bin/sage` into sagelib functionality and sage-the-distribution functionality. `src/bin/sage` delegates unknown options to `build/bin/sage-site`. 
+
+Ideally, distributions should be able to use an unmodified `src/bin/sage`.
 
 Context:
 - https://groups.google.com/d/msg/sage-packaging/BmkxIBdwbvE/fRMl2sjdBQAJ
``````




---

archive/issue_events_083048.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "rename": {
        "from": "Specify a subset of sage command line options that are supported by sagelib - rather than sage-the-distribution",
        "to": "src/bin/sage: Delegate handling of options of sage-the-distribution, specifying a subset that is supported by sagelib proper"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29111#event-83048"
}
```



---

archive/issue_comments_542132.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [jhpalmieri](#comment%3A20):\n> Okay, I'm fine with keeping `sage --python`. What about `sage --singular` et al.? \n\n\nI think those should be moved to `sage-site` as well. (Also the printing of these in the help text...)\n\n> Should `src/bin/sage` be constructed by `./configure`, adding arguments when the corresponding packages are going to be installed by Sage? Or is that too complicated?\n\n\nI think that's too complicated",
    "created_at": "2020-06-16T23:14:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542132",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:22'></a>
Replying to [jhpalmieri](#comment%3A20):
> Okay, I'm fine with keeping `sage --python`. What about `sage --singular` et al.? 


I think those should be moved to `sage-site` as well. (Also the printing of these in the help text...)

> Should `src/bin/sage` be constructed by `./configure`, adding arguments when the corresponding packages are going to be installed by Sage? Or is that too complicated?


I think that's too complicated



---

archive/issue_comments_542133.json:
```json
{
    "body": "<a id='comment:23'></a>\n> sage --grep, sage --search_src, sage --grepdoc, sage --search_doc\n\n\nAt the risk of starting another holy war, we shouldn't expect these to work on a distribution because we shouldn't expect the source files to be available after installation. My current sage.git checkout contains 71MiB of *.py files that are entirely redundant after the optimized .opt-2.pyc files are generated. Someone is eventually going to realize that they shouldn't be installed after this gets more popular.",
    "created_at": "2020-06-16T23:40:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542133",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:23'></a>
> sage --grep, sage --search_src, sage --grepdoc, sage --search_doc


At the risk of starting another holy war, we shouldn't expect these to work on a distribution because we shouldn't expect the source files to be available after installation. My current sage.git checkout contains 71MiB of *.py files that are entirely redundant after the optimized .opt-2.pyc files are generated. Someone is eventually going to realize that they shouldn't be installed after this gets more popular.



---

archive/issue_comments_542134.json:
```json
{
    "body": "<a id='comment:24'></a>\nWe could just conditionalize these ones based on whether SAGE_SRC is set or not by sage-env...",
    "created_at": "2020-06-16T23:44:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542134",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'></a>
We could just conditionalize these ones based on whether SAGE_SRC is set or not by sage-env...



---

archive/issue_comments_542135.json:
```json
{
    "body": "**Changing commit** from \"[152e58155fe193fd9215bee3bf20755c5e0c51a2](https://github.com/sagemath/sagetrac-mirror/commit/152e58155fe193fd9215bee3bf20755c5e0c51a2)\" to \"[e734d55ff8bcff42a7c9b0f750dc066d2afa0252](https://github.com/sagemath/sagetrac-mirror/commit/e734d55ff8bcff42a7c9b0f750dc066d2afa0252)\".",
    "created_at": "2020-06-16T23:58:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542135",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[152e58155fe193fd9215bee3bf20755c5e0c51a2](https://github.com/sagemath/sagetrac-mirror/commit/152e58155fe193fd9215bee3bf20755c5e0c51a2)" to "[e734d55ff8bcff42a7c9b0f750dc066d2afa0252](https://github.com/sagemath/sagetrac-mirror/commit/e734d55ff8bcff42a7c9b0f750dc066d2afa0252)".



---

archive/issue_comments_542136.json:
```json
{
    "body": "<a id='comment:25'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e734d55ff8bcff42a7c9b0f750dc066d2afa0252\">e734d55</a></td><td><code>src/bin/sage: Disable options -grep, -grepdoc on distributions without SAGE_SRC</code></td></tr></table>\n",
    "created_at": "2020-06-16T23:58:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542136",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e734d55ff8bcff42a7c9b0f750dc066d2afa0252">e734d55</a></td><td><code>src/bin/sage: Disable options -grep, -grepdoc on distributions without SAGE_SRC</code></td></tr></table>




---

archive/issue_comments_542137.json:
```json
{
    "body": "**Changing commit** from \"[e734d55ff8bcff42a7c9b0f750dc066d2afa0252](https://github.com/sagemath/sagetrac-mirror/commit/e734d55ff8bcff42a7c9b0f750dc066d2afa0252)\" to \"[096ca9293b7ddef99c4b722f8604af0a2a420799](https://github.com/sagemath/sagetrac-mirror/commit/096ca9293b7ddef99c4b722f8604af0a2a420799)\".",
    "created_at": "2020-06-17T00:13:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542137",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[e734d55ff8bcff42a7c9b0f750dc066d2afa0252](https://github.com/sagemath/sagetrac-mirror/commit/e734d55ff8bcff42a7c9b0f750dc066d2afa0252)" to "[096ca9293b7ddef99c4b722f8604af0a2a420799](https://github.com/sagemath/sagetrac-mirror/commit/096ca9293b7ddef99c4b722f8604af0a2a420799)".



---

archive/issue_comments_542138.json:
```json
{
    "body": "<a id='comment:26'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/096ca9293b7ddef99c4b722f8604af0a2a420799\">096ca92</a></td><td><code>src/bin/sage: Move option -fix-pkg-checksums to sage-site</code></td></tr></table>\n",
    "created_at": "2020-06-17T00:13:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542138",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/096ca9293b7ddef99c4b722f8604af0a2a420799">096ca92</a></td><td><code>src/bin/sage: Move option -fix-pkg-checksums to sage-site</code></td></tr></table>




---

archive/issue_comments_542139.json:
```json
{
    "body": "**Author:** Matthias Koeppe",
    "created_at": "2020-06-17T00:29:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542139",
    "user": "https://github.com/mkoeppe"
}
```

**Author:** Matthias Koeppe



---

archive/issue_comments_542140.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2020-06-17T00:29:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542140",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_542141.json:
```json
{
    "body": "<a id='comment:27'></a>\nAll, please review, or feel free to push more changes to this ticket.",
    "created_at": "2020-06-17T00:29:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542141",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>
All, please review, or feel free to push more changes to this ticket.



---

archive/issue_comments_542142.json:
```json
{
    "body": "<a id='comment:28'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eadae5aad05ed13b4fc78db9ddf7ee8c67331274\">eadae5a</a></td><td><code>src/bin/sage: Move parts of the help message to sage-site</code></td></tr></table>\n",
    "created_at": "2020-06-17T16:55:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542142",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eadae5aad05ed13b4fc78db9ddf7ee8c67331274">eadae5a</a></td><td><code>src/bin/sage: Move parts of the help message to sage-site</code></td></tr></table>




---

archive/issue_comments_542143.json:
```json
{
    "body": "**Changing commit** from \"[096ca9293b7ddef99c4b722f8604af0a2a420799](https://github.com/sagemath/sagetrac-mirror/commit/096ca9293b7ddef99c4b722f8604af0a2a420799)\" to \"[eadae5aad05ed13b4fc78db9ddf7ee8c67331274](https://github.com/sagemath/sagetrac-mirror/commit/eadae5aad05ed13b4fc78db9ddf7ee8c67331274)\".",
    "created_at": "2020-06-17T16:55:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542143",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[096ca9293b7ddef99c4b722f8604af0a2a420799](https://github.com/sagemath/sagetrac-mirror/commit/096ca9293b7ddef99c4b722f8604af0a2a420799)" to "[eadae5aad05ed13b4fc78db9ddf7ee8c67331274](https://github.com/sagemath/sagetrac-mirror/commit/eadae5aad05ed13b4fc78db9ddf7ee8c67331274)".



---

archive/issue_comments_542144.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -20,3 +20,5 @@\n - https://groups.google.com/d/msg/sage-packaging/BmkxIBdwbvE/fRMl2sjdBQAJ\n - #29060: Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages\n \n+See also:\n+- #29884: `src/doc/bootstrap`: Generate `src/doc/en/reference/repl/options.rst`\n``````\n",
    "created_at": "2020-06-17T17:05:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542144",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -20,3 +20,5 @@
 - https://groups.google.com/d/msg/sage-packaging/BmkxIBdwbvE/fRMl2sjdBQAJ
 - #29060: Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages
 
+See also:
+- #29884: `src/doc/bootstrap`: Generate `src/doc/en/reference/repl/options.rst`
``````




---

archive/issue_comments_542145.json:
```json
{
    "body": "<a id='comment:30'></a>\nThere are also various options regarding notebooks that may need updating. If someone knows about the details, please push changes to the branch",
    "created_at": "2020-06-17T17:08:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542145",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:30'></a>
There are also various options regarding notebooks that may need updating. If someone knows about the details, please push changes to the branch



---

archive/issue_comments_542146.json:
```json
{
    "body": "<a id='comment:31'></a>\nSpeaking of holy wars, this has reminded me of #21, which I am thinking of trying to revive. I'll see if I have time to work on that. For this ticket, we could remove `-inotebook`, and `sagenb` is no longer a valid option for `-notebook`.",
    "created_at": "2020-06-17T17:23:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542146",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:31'></a>
Speaking of holy wars, this has reminded me of #21, which I am thinking of trying to revive. I'll see if I have time to work on that. For this ticket, we could remove `-inotebook`, and `sagenb` is no longer a valid option for `-notebook`.



---

archive/issue_comments_542147.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution)\" to \"[u/jhpalmieri/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution)\".",
    "created_at": "2020-06-17T17:23:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542147",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing branch** from "[u/mkoeppe/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution)" to "[u/jhpalmieri/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution)".



---

archive/issue_comments_542148.json:
```json
{
    "body": "**Changing commit** from \"[eadae5aad05ed13b4fc78db9ddf7ee8c67331274](https://github.com/sagemath/sagetrac-mirror/commit/eadae5aad05ed13b4fc78db9ddf7ee8c67331274)\" to \"[08569132d2b8dfd54a4446df7da200d303ad9ce1](https://github.com/sagemath/sagetrac-mirror/commit/08569132d2b8dfd54a4446df7da200d303ad9ce1)\".",
    "created_at": "2020-06-17T17:34:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542148",
    "user": "https://github.com/kcrisman"
}
```

**Changing commit** from "[eadae5aad05ed13b4fc78db9ddf7ee8c67331274](https://github.com/sagemath/sagetrac-mirror/commit/eadae5aad05ed13b4fc78db9ddf7ee8c67331274)" to "[08569132d2b8dfd54a4446df7da200d303ad9ce1](https://github.com/sagemath/sagetrac-mirror/commit/08569132d2b8dfd54a4446df7da200d303ad9ce1)".



---

archive/issue_comments_542149.json:
```json
{
    "body": "<a id='comment:33'></a>\n> Speaking of holy wars, this has reminded me of #21, which I am thinking of trying to revive. I'll see if I have time to work on that. \n\n\nOr holy grails!\n\n> For this ticket, we could remove `-inotebook`, and `sagenb` is no longer a valid option for `-notebook`.\n\n\n\nI don't remember all the options for `-notebook`, but I think it would be helpful to have some sort of warning message (or page?) that `sagenb` would raise, rather than removing it completely.  For instance, it could just open the export-to-Jupyter page by default, with an extra little warning template that \"if you want to use the old sagenb, please use Sage prior to 9.x\".  Probably what anyone who tries to use sagenb would want is the export at this point, and this is one way to inform them.\n\nJohn, what does your branch give for `sage -n -h` or `sage --notebook --help` which is somewhat prominently mentioned in the `sage -advanced` help?  Is any of what comes out of that still valid?\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/08569132d2b8dfd54a4446df7da200d303ad9ce1\">0856913</a></td><td><code>trac 29111: remove --inotebook, references to sagenb</code></td></tr></table>\n",
    "created_at": "2020-06-17T17:34:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542149",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:33'></a>
> Speaking of holy wars, this has reminded me of #21, which I am thinking of trying to revive. I'll see if I have time to work on that. 


Or holy grails!

> For this ticket, we could remove `-inotebook`, and `sagenb` is no longer a valid option for `-notebook`.



I don't remember all the options for `-notebook`, but I think it would be helpful to have some sort of warning message (or page?) that `sagenb` would raise, rather than removing it completely.  For instance, it could just open the export-to-Jupyter page by default, with an extra little warning template that "if you want to use the old sagenb, please use Sage prior to 9.x".  Probably what anyone who tries to use sagenb would want is the export at this point, and this is one way to inform them.

John, what does your branch give for `sage -n -h` or `sage --notebook --help` which is somewhat prominently mentioned in the `sage -advanced` help?  Is any of what comes out of that still valid?

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/08569132d2b8dfd54a4446df7da200d303ad9ce1">0856913</a></td><td><code>trac 29111: remove --inotebook, references to sagenb</code></td></tr></table>




---

archive/issue_comments_542150.json:
```json
{
    "body": "<a id='comment:34'></a>\nI think that the default for `sage --notebook` should now be `jupyter`. This involves only editing `sage-notebook`, and  belongs on a separate ticket: #29885.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/08569132d2b8dfd54a4446df7da200d303ad9ce1\">0856913</a></td><td><code>trac 29111: remove --inotebook, references to sagenb</code></td></tr></table>\n",
    "created_at": "2020-06-17T17:37:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542150",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:34'></a>
I think that the default for `sage --notebook` should now be `jupyter`. This involves only editing `sage-notebook`, and  belongs on a separate ticket: #29885.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/08569132d2b8dfd54a4446df7da200d303ad9ce1">0856913</a></td><td><code>trac 29111: remove --inotebook, references to sagenb</code></td></tr></table>




---

archive/issue_comments_542151.json:
```json
{
    "body": "<a id='comment:35'></a>\nThe branch here doesn't change `sage -n -h`. The branch at #29885 removes \"sagenb\" from this part of the help message:\n\n```\n  --notebook [NOTEBOOK], -n [NOTEBOOK], -notebook [NOTEBOOK]\n                        The notebook to run [one of: default, sagenb, ipython,\n                        jupyter, jupyterlab, export]. Default is export\n```",
    "created_at": "2020-06-17T17:38:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542151",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:35'></a>
The branch here doesn't change `sage -n -h`. The branch at #29885 removes "sagenb" from this part of the help message:

```
  --notebook [NOTEBOOK], -n [NOTEBOOK], -notebook [NOTEBOOK]
                        The notebook to run [one of: default, sagenb, ipython,
                        jupyter, jupyterlab, export]. Default is export
```



---

archive/issue_comments_542152.json:
```json
{
    "body": "<a id='comment:36'></a>\nOh, and with the branch at #29885, running `sage -n sagenb` prints\n\n```\nCRITICAL:root:cannot use the legacy notebook SageNB with Python 3\nThe legacy notebook does not work under Python 3; use the Jupyter notebook.\nSee https://wiki.sagemath.org/Python3-Switch\n```\nThe branch here prints something similar, just a bit less grammatical ;)",
    "created_at": "2020-06-17T17:40:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542152",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:36'></a>
Oh, and with the branch at #29885, running `sage -n sagenb` prints

```
CRITICAL:root:cannot use the legacy notebook SageNB with Python 3
The legacy notebook does not work under Python 3; use the Jupyter notebook.
See https://wiki.sagemath.org/Python3-Switch
```
The branch here prints something similar, just a bit less grammatical ;)



---

archive/issue_comments_542153.json:
```json
{
    "body": "<a id='comment:37'></a>\nOne more thing:\n\n> it could just open the export-to-Jupyter page by default\n\n\nthis has been the standard behavior for a while. At #29885, I am proposing changing this to make running the Jupyter notebook the default behavior. We should probably continue the notebook discussion at #29885.",
    "created_at": "2020-06-17T17:41:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542153",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:37'></a>
One more thing:

> it could just open the export-to-Jupyter page by default


this has been the standard behavior for a while. At #29885, I am proposing changing this to make running the Jupyter notebook the default behavior. We should probably continue the notebook discussion at #29885.



---

archive/issue_comments_542154.json:
```json
{
    "body": "<a id='comment:38'></a>\n> We should probably continue the notebook discussion at #29885.\n\n\nSure, it's not a big deal in any case.",
    "created_at": "2020-06-17T17:46:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542154",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:38'></a>
> We should probably continue the notebook discussion at #29885.


Sure, it's not a big deal in any case.



---

archive/issue_comments_542155.json:
```json
{
    "body": "<a id='comment:39'></a>\nShould #29884 be a dependency for this ticket, or are we also going to manually fix `src/doc/en/reference/repl/options.rst`?",
    "created_at": "2020-06-17T17:46:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542155",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:39'></a>
Should #29884 be a dependency for this ticket, or are we also going to manually fix `src/doc/en/reference/repl/options.rst`?



---

archive/issue_comments_542156.json:
```json
{
    "body": "<a id='comment:40'></a>\nReplying to [jhpalmieri](#comment%3A39):\n> Should #29884 be a dependency for this ticket, or are we also going to manually fix `src/doc/en/reference/repl/options.rst`?\n\n\nI'll work on the automatic generation in #29884 now. \nIf you could check if anything from ``options.rst`` should be added to the help text, that would be helpful.",
    "created_at": "2020-06-17T18:37:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542156",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:40'></a>
Replying to [jhpalmieri](#comment%3A39):
> Should #29884 be a dependency for this ticket, or are we also going to manually fix `src/doc/en/reference/repl/options.rst`?


I'll work on the automatic generation in #29884 now. 
If you could check if anything from ``options.rst`` should be added to the help text, that would be helpful.



---

archive/issue_comments_542157.json:
```json
{
    "body": "<a id='comment:41'></a>\n#29884 is ready now",
    "created_at": "2020-06-17T18:58:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542157",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:41'></a>
#29884 is ready now



---

archive/issue_comments_542158.json:
```json
{
    "body": "**Changing branch** from \"[u/jhpalmieri/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution)\" to \"[u/mkoeppe/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution)\".",
    "created_at": "2020-06-17T19:05:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542158",
    "user": "https://github.com/mkoeppe"
}
```

**Changing branch** from "[u/jhpalmieri/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution)" to "[u/mkoeppe/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution)".



---

archive/issue_comments_542159.json:
```json
{
    "body": "<a id='comment:43'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb9dcdcae8915a3a135accff500dc7e1c332d27d\">fb9dcdc</a></td><td><code>src/bin/sage: Move parts of the help message to sage-site</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/885092e77b06b6d616297edd8ac1a37db9113cc6\">885092e</a></td><td><code>src/doc/bootstrap: Generate src/doc/en/reference/repl/options.txt</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ecc84042fbdc77eabb23dc33954658ca3e5b276\">1ecc840</a></td><td><code>Merge branch 't/29884/src_doc_bootstrap__generate_src_doc_en_reference_repl_options_rst' into t/29111/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution</code></td></tr></table>\n",
    "created_at": "2020-06-17T19:05:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542159",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:43'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb9dcdcae8915a3a135accff500dc7e1c332d27d">fb9dcdc</a></td><td><code>src/bin/sage: Move parts of the help message to sage-site</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/885092e77b06b6d616297edd8ac1a37db9113cc6">885092e</a></td><td><code>src/doc/bootstrap: Generate src/doc/en/reference/repl/options.txt</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ecc84042fbdc77eabb23dc33954658ca3e5b276">1ecc840</a></td><td><code>Merge branch 't/29884/src_doc_bootstrap__generate_src_doc_en_reference_repl_options_rst' into t/29111/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution</code></td></tr></table>




---

archive/issue_comments_542160.json:
```json
{
    "body": "**Changing commit** from \"[08569132d2b8dfd54a4446df7da200d303ad9ce1](https://github.com/sagemath/sagetrac-mirror/commit/08569132d2b8dfd54a4446df7da200d303ad9ce1)\" to \"[1ecc84042fbdc77eabb23dc33954658ca3e5b276](https://github.com/sagemath/sagetrac-mirror/commit/1ecc84042fbdc77eabb23dc33954658ca3e5b276)\".",
    "created_at": "2020-06-17T19:05:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542160",
    "user": "https://github.com/mkoeppe"
}
```

**Changing commit** from "[08569132d2b8dfd54a4446df7da200d303ad9ce1](https://github.com/sagemath/sagetrac-mirror/commit/08569132d2b8dfd54a4446df7da200d303ad9ce1)" to "[1ecc84042fbdc77eabb23dc33954658ca3e5b276](https://github.com/sagemath/sagetrac-mirror/commit/1ecc84042fbdc77eabb23dc33954658ca3e5b276)".



---

archive/issue_comments_542161.json:
```json
{
    "body": "**Changing dependencies** from \"#29878, #29289\" to \"#29878, #29289, #29884\".",
    "created_at": "2020-06-17T19:05:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542161",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#29878, #29289" to "#29878, #29289, #29884".



---

archive/issue_comments_542162.json:
```json
{
    "body": "<a id='comment:44'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6ba580b6523280f1510a200ef519f61b512bbaf2\">6ba580b</a></td><td><code>src/doc/en/reference/repl/options.rst: Replace copypasta by include of generated file options.txt</code></td></tr></table>\n",
    "created_at": "2020-06-17T19:08:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542162",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:44'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6ba580b6523280f1510a200ef519f61b512bbaf2">6ba580b</a></td><td><code>src/doc/en/reference/repl/options.rst: Replace copypasta by include of generated file options.txt</code></td></tr></table>




---

archive/issue_comments_542163.json:
```json
{
    "body": "**Changing commit** from \"[1ecc84042fbdc77eabb23dc33954658ca3e5b276](https://github.com/sagemath/sagetrac-mirror/commit/1ecc84042fbdc77eabb23dc33954658ca3e5b276)\" to \"[6ba580b6523280f1510a200ef519f61b512bbaf2](https://github.com/sagemath/sagetrac-mirror/commit/6ba580b6523280f1510a200ef519f61b512bbaf2)\".",
    "created_at": "2020-06-17T19:08:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542163",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1ecc84042fbdc77eabb23dc33954658ca3e5b276](https://github.com/sagemath/sagetrac-mirror/commit/1ecc84042fbdc77eabb23dc33954658ca3e5b276)" to "[6ba580b6523280f1510a200ef519f61b512bbaf2](https://github.com/sagemath/sagetrac-mirror/commit/6ba580b6523280f1510a200ef519f61b512bbaf2)".



---

archive/issue_comments_542164.json:
```json
{
    "body": "<a id='comment:45'></a>\nReplying to [mkoeppe](#comment%3A40):\n> Replying to [jhpalmieri](#comment%3A39):\n> > Should #29884 be a dependency for this ticket, or are we also going to manually fix `src/doc/en/reference/repl/options.rst`?\n\n> \n> I'll work on the automatic generation in #29884 now. \n> If you could check if anything from `options.rst` should be added to the help text, that would be helpful. \n\n\nI tend to like the extra details `options.rst` more than what is printed by `sage --advanced`. Would it be too verbose if we used (more or less) the current `options.rst` for the output to `sage --advanced`?\n\nI would also organize it differently, distinguishing the options that are not available in distros.",
    "created_at": "2020-06-17T19:57:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542164",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:45'></a>
Replying to [mkoeppe](#comment%3A40):
> Replying to [jhpalmieri](#comment%3A39):
> > Should #29884 be a dependency for this ticket, or are we also going to manually fix `src/doc/en/reference/repl/options.rst`?

> 
> I'll work on the automatic generation in #29884 now. 
> If you could check if anything from `options.rst` should be added to the help text, that would be helpful. 


I tend to like the extra details `options.rst` more than what is printed by `sage --advanced`. Would it be too verbose if we used (more or less) the current `options.rst` for the output to `sage --advanced`?

I would also organize it differently, distinguishing the options that are not available in distros.



---

archive/issue_comments_542165.json:
```json
{
    "body": "<a id='comment:46'></a>\nReplying to [jhpalmieri](#comment%3A45):\n> Replying to [mkoeppe](#comment%3A40):\n> > Replying to [jhpalmieri](#comment%3A39):\n> > > Should #29884 be a dependency for this ticket, or are we also going to manually fix `src/doc/en/reference/repl/options.rst`?\n\n> > \n> > I'll work on the automatic generation in #29884 now. \n> > If you could check if anything from `options.rst` should be added to the help text, that would be helpful. \n\n> \n> I tend to like the extra details `options.rst` more than what is printed by `sage --advanced`. Would it be too verbose if we used (more or less) the current `options.rst` for the output to `sage --advanced`?\n\n\nSounds good to me.\n\n> I would also organize it differently, distinguishing the options that are not available in distros.\n\n\nRight, that would be done by moving these into the `sage-site` function `usage_advanced`. They are printed below the ones from `sage -advanced`.",
    "created_at": "2020-06-17T20:09:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542165",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:46'></a>
Replying to [jhpalmieri](#comment%3A45):
> Replying to [mkoeppe](#comment%3A40):
> > Replying to [jhpalmieri](#comment%3A39):
> > > Should #29884 be a dependency for this ticket, or are we also going to manually fix `src/doc/en/reference/repl/options.rst`?

> > 
> > I'll work on the automatic generation in #29884 now. 
> > If you could check if anything from `options.rst` should be added to the help text, that would be helpful. 

> 
> I tend to like the extra details `options.rst` more than what is printed by `sage --advanced`. Would it be too verbose if we used (more or less) the current `options.rst` for the output to `sage --advanced`?


Sounds good to me.

> I would also organize it differently, distinguishing the options that are not available in distros.


Right, that would be done by moving these into the `sage-site` function `usage_advanced`. They are printed below the ones from `sage -advanced`.



---

archive/issue_comments_542166.json:
```json
{
    "body": "**Changing author** from \"Matthias Koeppe\" to \"Matthias Koeppe, John Palmieri\".",
    "created_at": "2020-06-17T21:14:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542166",
    "user": "https://github.com/mkoeppe"
}
```

**Changing author** from "Matthias Koeppe" to "Matthias Koeppe, John Palmieri".



---

archive/issue_comments_542167.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution)\" to \"[u/jhpalmieri/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution)\".",
    "created_at": "2020-06-17T22:48:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542167",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing branch** from "[u/mkoeppe/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution)" to "[u/jhpalmieri/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution)".



---

archive/issue_comments_542168.json:
```json
{
    "body": "**Changing commit** from \"[6ba580b6523280f1510a200ef519f61b512bbaf2](https://github.com/sagemath/sagetrac-mirror/commit/6ba580b6523280f1510a200ef519f61b512bbaf2)\" to \"[4b303a215c8b6df3cecb57621f19afc7e65ab567](https://github.com/sagemath/sagetrac-mirror/commit/4b303a215c8b6df3cecb57621f19afc7e65ab567)\".",
    "created_at": "2020-06-17T22:52:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542168",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing commit** from "[6ba580b6523280f1510a200ef519f61b512bbaf2](https://github.com/sagemath/sagetrac-mirror/commit/6ba580b6523280f1510a200ef519f61b512bbaf2)" to "[4b303a215c8b6df3cecb57621f19afc7e65ab567](https://github.com/sagemath/sagetrac-mirror/commit/4b303a215c8b6df3cecb57621f19afc7e65ab567)".



---

archive/issue_comments_542169.json:
```json
{
    "body": "<a id='comment:49'></a>\nHere are some proposed changes to `sage --advanced`. I have a strong preference for two hyphens in `sage --long-option` over `sage -long-option`. I don't object to Sage parsing the two the same way, but I think we should advertise the two-hyphen version. (If we had a different argument parser, then `sage -info` would be interpreted as `sage -i -n -f -o`, whereas `sage --info` is less ambiguous.)\n\nI wasn't sure how to divide everything between the two files, but it's another draft to work with.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b303a215c8b6df3cecb57621f19afc7e65ab567\">4b303a2</a></td><td><code>trac 29111: revising \"sage --advanced\" message.</code></td></tr></table>\n",
    "created_at": "2020-06-17T22:52:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542169",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:49'></a>
Here are some proposed changes to `sage --advanced`. I have a strong preference for two hyphens in `sage --long-option` over `sage -long-option`. I don't object to Sage parsing the two the same way, but I think we should advertise the two-hyphen version. (If we had a different argument parser, then `sage -info` would be interpreted as `sage -i -n -f -o`, whereas `sage --info` is less ambiguous.)

I wasn't sure how to divide everything between the two files, but it's another draft to work with.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b303a215c8b6df3cecb57621f19afc7e65ab567">4b303a2</a></td><td><code>trac 29111: revising "sage --advanced" message.</code></td></tr></table>




---

archive/issue_comments_542170.json:
```json
{
    "body": "<a id='comment:50'></a>\nOther comments: `--fix-pkg-checksums` was deprecated, so I removed it from the help string. `--gap3` does not need to be in the basic `sage -h` message: it comes from an experimental package. For me, `sage -?` doesn't work, because the shell tries to parse `?`. So I removed that from the `sage -h` message.",
    "created_at": "2020-06-17T22:56:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542170",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:50'></a>
Other comments: `--fix-pkg-checksums` was deprecated, so I removed it from the help string. `--gap3` does not need to be in the basic `sage -h` message: it comes from an experimental package. For me, `sage -?` doesn't work, because the shell tries to parse `?`. So I removed that from the `sage -h` message.



---

archive/issue_comments_542171.json:
```json
{
    "body": "<a id='comment:51'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/611b8d626b0f370830689e6c038287fb2c0a5ea6\">611b8d6</a></td><td><code>trac 29111: revising \"sage --advanced\" message.</code></td></tr></table>\n",
    "created_at": "2020-06-17T22:56:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542171",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:51'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/611b8d626b0f370830689e6c038287fb2c0a5ea6">611b8d6</a></td><td><code>trac 29111: revising "sage --advanced" message.</code></td></tr></table>




---

archive/issue_comments_542172.json:
```json
{
    "body": "**Changing commit** from \"[4b303a215c8b6df3cecb57621f19afc7e65ab567](https://github.com/sagemath/sagetrac-mirror/commit/4b303a215c8b6df3cecb57621f19afc7e65ab567)\" to \"[611b8d626b0f370830689e6c038287fb2c0a5ea6](https://github.com/sagemath/sagetrac-mirror/commit/611b8d626b0f370830689e6c038287fb2c0a5ea6)\".",
    "created_at": "2020-06-17T22:56:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542172",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[4b303a215c8b6df3cecb57621f19afc7e65ab567](https://github.com/sagemath/sagetrac-mirror/commit/4b303a215c8b6df3cecb57621f19afc7e65ab567)" to "[611b8d626b0f370830689e6c038287fb2c0a5ea6](https://github.com/sagemath/sagetrac-mirror/commit/611b8d626b0f370830689e6c038287fb2c0a5ea6)".



---

archive/issue_comments_542173.json:
```json
{
    "body": "<a id='comment:52'></a>\nI agree with these changes.\n\nSome comments on `sage --advanced`:\n\n1) I think `--grep ...--search_doc` should go to `src/bin/sage`, conditionalized on `$SAGE_SRC`\n\n2) I think `--gdb*, `--python*`, --ipython*`, `--pip`, and perhaps `--jupyter*`  should go to `src/bin/sage`\n\n3) Also `--sh` (but NOT `--buildsh`) and `--cleaner` should go to `src/bin/sage`",
    "created_at": "2020-06-18T00:18:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542173",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:52'></a>
I agree with these changes.

Some comments on `sage --advanced`:

1) I think `--grep ...--search_doc` should go to `src/bin/sage`, conditionalized on `$SAGE_SRC`

2) I think `--gdb*, `--python*`, --ipython*`, `--pip`, and perhaps `--jupyter*`  should go to `src/bin/sage`

3) Also `--sh` (but NOT `--buildsh`) and `--cleaner` should go to `src/bin/sage`



---

archive/issue_comments_542174.json:
```json
{
    "body": "<a id='comment:53'></a>\nIt is very close to something I am willing to ship out of the box in Gentoo. I will mostly echo @mkoeppe last comment. (2) and (3) are totally acceptable in distros. I certainly can run under `gdb` for example, in fact it is bizarre that `gdb` is treated differently from `valgrind` et al. (1) in the way suggested is acceptable.\n\nAlso, I think you have an alignment problem in `src/bin/sage` right now.\n\n```\n+    echo \"  --dumpversion        -- print brief Sage version\"\n+    echo \"  --preparse file.sage -- preparse \\\"file.sage\\\", and produce\"\n+    echo \"                          the corresponding Python file\"\n+    echo \"                          \\\"file.sage.py\\\"\"\n+    echo \"  -q                   -- quiet; start with no banner\"\n+    echo \"  --min                -- do not populate global namespace\"\n+    echo \"                          (must be first option)\"\n+    echo \"   --nodotsage          -- run Sage without using the user's\"\n+    echo \"                          .sage directory: create and use a temporary\"\n+    echo \"                          .sage directory instead.\"\n+    echo \"   --gthread, --qthread, --q4thread, --wthread, --pylab\"\n+    echo \"                        -- pass the option through to IPython\"\n```\n`--nodotsage` and `--gthread` are one space further to the left than `-q` and `--min`.",
    "created_at": "2020-06-18T01:30:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542174",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:53'></a>
It is very close to something I am willing to ship out of the box in Gentoo. I will mostly echo @mkoeppe last comment. (2) and (3) are totally acceptable in distros. I certainly can run under `gdb` for example, in fact it is bizarre that `gdb` is treated differently from `valgrind` et al. (1) in the way suggested is acceptable.

Also, I think you have an alignment problem in `src/bin/sage` right now.

```
+    echo "  --dumpversion        -- print brief Sage version"
+    echo "  --preparse file.sage -- preparse \"file.sage\", and produce"
+    echo "                          the corresponding Python file"
+    echo "                          \"file.sage.py\""
+    echo "  -q                   -- quiet; start with no banner"
+    echo "  --min                -- do not populate global namespace"
+    echo "                          (must be first option)"
+    echo "   --nodotsage          -- run Sage without using the user's"
+    echo "                          .sage directory: create and use a temporary"
+    echo "                          .sage directory instead."
+    echo "   --gthread, --qthread, --q4thread, --wthread, --pylab"
+    echo "                        -- pass the option through to IPython"
```
`--nodotsage` and `--gthread` are one space further to the left than `-q` and `--min`.



---

archive/issue_comments_542175.json:
```json
{
    "body": "<a id='comment:54'></a>\nIs there a reason for this difference in the `sage` script?\n\n```\nusage() {\n...\n        exec \"$SAGE_ROOT/build/bin/sage-site\" \"-h\"\n...\n```\nvs\n\n```\nusage_advanced() {\n...\n       \"$SAGE_ROOT/build/bin/sage-site\" \"--advanced\"\n...\n```",
    "created_at": "2020-06-18T03:27:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542175",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:54'></a>
Is there a reason for this difference in the `sage` script?

```
usage() {
...
        exec "$SAGE_ROOT/build/bin/sage-site" "-h"
...
```
vs

```
usage_advanced() {
...
       "$SAGE_ROOT/build/bin/sage-site" "--advanced"
...
```



---

archive/issue_comments_542176.json:
```json
{
    "body": "<a id='comment:55'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/073577b867f440b139ceb26fa6fddf5df5c3b93a\">073577b</a></td><td><code>trac 29111: more reorganization of \"sage --advanced\" message</code></td></tr></table>\n",
    "created_at": "2020-06-18T03:31:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542176",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:55'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/073577b867f440b139ceb26fa6fddf5df5c3b93a">073577b</a></td><td><code>trac 29111: more reorganization of "sage --advanced" message</code></td></tr></table>




---

archive/issue_comments_542177.json:
```json
{
    "body": "**Changing commit** from \"[611b8d626b0f370830689e6c038287fb2c0a5ea6](https://github.com/sagemath/sagetrac-mirror/commit/611b8d626b0f370830689e6c038287fb2c0a5ea6)\" to \"[073577b867f440b139ceb26fa6fddf5df5c3b93a](https://github.com/sagemath/sagetrac-mirror/commit/073577b867f440b139ceb26fa6fddf5df5c3b93a)\".",
    "created_at": "2020-06-18T03:31:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542177",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[611b8d626b0f370830689e6c038287fb2c0a5ea6](https://github.com/sagemath/sagetrac-mirror/commit/611b8d626b0f370830689e6c038287fb2c0a5ea6)" to "[073577b867f440b139ceb26fa6fddf5df5c3b93a](https://github.com/sagemath/sagetrac-mirror/commit/073577b867f440b139ceb26fa6fddf5df5c3b93a)".



---

archive/issue_comments_542178.json:
```json
{
    "body": "<a id='comment:56'></a>\nReplying to [jhpalmieri](#comment%3A54):\n> Is there a reason for this difference in the `sage` script?\n> \n> ```\n> usage() {\n> ...\n>         exec \"$SAGE_ROOT/build/bin/sage-site\" \"-h\"\n> ...\n> ```\n> vs\n> \n> ```\n> usage_advanced() {\n> ...\n>        \"$SAGE_ROOT/build/bin/sage-site\" \"--advanced\"\n> ...\n> ```\n\n\nFYI: I changed both to use `exec`. Feel free to change back if this is wrong.",
    "created_at": "2020-06-18T03:31:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542178",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:56'></a>
Replying to [jhpalmieri](#comment%3A54):
> Is there a reason for this difference in the `sage` script?
> 
> ```
> usage() {
> ...
>         exec "$SAGE_ROOT/build/bin/sage-site" "-h"
> ...
> ```
> vs
> 
> ```
> usage_advanced() {
> ...
>        "$SAGE_ROOT/build/bin/sage-site" "--advanced"
> ...
> ```


FYI: I changed both to use `exec`. Feel free to change back if this is wrong.



---

archive/issue_comments_542179.json:
```json
{
    "body": "**Changing commit** from \"[073577b867f440b139ceb26fa6fddf5df5c3b93a](https://github.com/sagemath/sagetrac-mirror/commit/073577b867f440b139ceb26fa6fddf5df5c3b93a)\" to \"[c8daf8054418491abbc2e147aad024a8eb98c00c](https://github.com/sagemath/sagetrac-mirror/commit/c8daf8054418491abbc2e147aad024a8eb98c00c)\".",
    "created_at": "2020-06-18T03:34:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542179",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[073577b867f440b139ceb26fa6fddf5df5c3b93a](https://github.com/sagemath/sagetrac-mirror/commit/073577b867f440b139ceb26fa6fddf5df5c3b93a)" to "[c8daf8054418491abbc2e147aad024a8eb98c00c](https://github.com/sagemath/sagetrac-mirror/commit/c8daf8054418491abbc2e147aad024a8eb98c00c)".



---

archive/issue_comments_542180.json:
```json
{
    "body": "<a id='comment:57'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c8daf8054418491abbc2e147aad024a8eb98c00c\">c8daf80</a></td><td><code>trac 29111: delete sage-fix-pkg-checksums</code></td></tr></table>\n",
    "created_at": "2020-06-18T03:34:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542180",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:57'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c8daf8054418491abbc2e147aad024a8eb98c00c">c8daf80</a></td><td><code>trac 29111: delete sage-fix-pkg-checksums</code></td></tr></table>




---

archive/issue_comments_542181.json:
```json
{
    "body": "<a id='comment:58'></a>\n`sage-fix-pkg-checksums` was deprecated four years ago (#19984), so I deleted it.",
    "created_at": "2020-06-18T03:34:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542181",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:58'></a>
`sage-fix-pkg-checksums` was deprecated four years ago (#19984), so I deleted it.



---

archive/issue_comments_542182.json:
```json
{
    "body": "**Changing commit** from \"[c8daf8054418491abbc2e147aad024a8eb98c00c](https://github.com/sagemath/sagetrac-mirror/commit/c8daf8054418491abbc2e147aad024a8eb98c00c)\" to \"[5c3ced6afb74de327f067145a49a5506a9a54ea1](https://github.com/sagemath/sagetrac-mirror/commit/5c3ced6afb74de327f067145a49a5506a9a54ea1)\".",
    "created_at": "2020-06-18T03:38:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542182",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c8daf8054418491abbc2e147aad024a8eb98c00c](https://github.com/sagemath/sagetrac-mirror/commit/c8daf8054418491abbc2e147aad024a8eb98c00c)" to "[5c3ced6afb74de327f067145a49a5506a9a54ea1](https://github.com/sagemath/sagetrac-mirror/commit/5c3ced6afb74de327f067145a49a5506a9a54ea1)".



---

archive/issue_comments_542183.json:
```json
{
    "body": "<a id='comment:59'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5c3ced6afb74de327f067145a49a5506a9a54ea1\">5c3ced6</a></td><td><code>trac 29111: delete sage-fix-pkg-checksums</code></td></tr></table>\n",
    "created_at": "2020-06-18T03:38:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542183",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:59'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5c3ced6afb74de327f067145a49a5506a9a54ea1">5c3ced6</a></td><td><code>trac 29111: delete sage-fix-pkg-checksums</code></td></tr></table>




---

archive/issue_comments_542184.json:
```json
{
    "body": "<a id='comment:60'></a>\nOne last thing I should have commented on earlier\n\n```\n+    echo \"  -bn [...], --build-and-notebook [...]\"\n+    echo \"                      -- build the Sage library (as by running \\\"sage -b\\\")\"\n+    echo \"                         and then start the notebook\"\n```\nis currently in `src/bin/sage` but really any `-b` options belong to `sage-site` and nowhere else.",
    "created_at": "2020-06-18T04:10:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542184",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:60'></a>
One last thing I should have commented on earlier

```
+    echo "  -bn [...], --build-and-notebook [...]"
+    echo "                      -- build the Sage library (as by running \"sage -b\")"
+    echo "                         and then start the notebook"
```
is currently in `src/bin/sage` but really any `-b` options belong to `sage-site` and nowhere else.



---

archive/issue_comments_542185.json:
```json
{
    "body": "<a id='comment:61'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/684138996fc44134dc18d2e8761eecc8caafb39e\">6841389</a></td><td><code>trac 29111: re \"sage --advanced\" message:</code></td></tr></table>\n",
    "created_at": "2020-06-18T04:44:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542185",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:61'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/684138996fc44134dc18d2e8761eecc8caafb39e">6841389</a></td><td><code>trac 29111: re "sage --advanced" message:</code></td></tr></table>




---

archive/issue_comments_542186.json:
```json
{
    "body": "**Changing commit** from \"[5c3ced6afb74de327f067145a49a5506a9a54ea1](https://github.com/sagemath/sagetrac-mirror/commit/5c3ced6afb74de327f067145a49a5506a9a54ea1)\" to \"[684138996fc44134dc18d2e8761eecc8caafb39e](https://github.com/sagemath/sagetrac-mirror/commit/684138996fc44134dc18d2e8761eecc8caafb39e)\".",
    "created_at": "2020-06-18T04:44:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542186",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5c3ced6afb74de327f067145a49a5506a9a54ea1](https://github.com/sagemath/sagetrac-mirror/commit/5c3ced6afb74de327f067145a49a5506a9a54ea1)" to "[684138996fc44134dc18d2e8761eecc8caafb39e](https://github.com/sagemath/sagetrac-mirror/commit/684138996fc44134dc18d2e8761eecc8caafb39e)".



---

archive/issue_comments_542187.json:
```json
{
    "body": "<a id='comment:62'></a>\nReplying to [fbissey](#comment%3A60):\n> One last thing I should have commented on earlier\n> \n> ```\n> +    echo \"  -bn [...], --build-and-notebook [...]\"\n> +    echo \"                      -- build the Sage library (as by running \\\"sage -b\\\")\"\n> +    echo \"                         and then start the notebook\"\n> ```\n> is currently in `src/bin/sage` but really any `-b` options belong to `sage-site` and nowhere else.\n\n\nOkay, moved, but on the other hand, I think that the `coverage` options belong with doctesting, so I moved those from `sage-site` to `sage`.",
    "created_at": "2020-06-18T04:47:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542187",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:62'></a>
Replying to [fbissey](#comment%3A60):
> One last thing I should have commented on earlier
> 
> ```
> +    echo "  -bn [...], --build-and-notebook [...]"
> +    echo "                      -- build the Sage library (as by running \"sage -b\")"
> +    echo "                         and then start the notebook"
> ```
> is currently in `src/bin/sage` but really any `-b` options belong to `sage-site` and nowhere else.


Okay, moved, but on the other hand, I think that the `coverage` options belong with doctesting, so I moved those from `sage-site` to `sage`.



---

archive/issue_comments_542188.json:
```json
{
    "body": "<a id='comment:63'></a>\nReplying to [jhpalmieri](#comment%3A58):\n> `sage-fix-pkg-checksums` was deprecated four years ago (#19984), so I deleted it.\n\nExcellent!",
    "created_at": "2020-06-18T04:50:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542188",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:63'></a>
Replying to [jhpalmieri](#comment%3A58):
> `sage-fix-pkg-checksums` was deprecated four years ago (#19984), so I deleted it.

Excellent!



---

archive/issue_comments_542189.json:
```json
{
    "body": "<a id='comment:64'></a>\nReplying to [jhpalmieri](#comment%3A62):\n> Okay, moved, but on the other hand, I think that the `coverage` options belong with doctesting, so I moved those from `sage-site` to `sage`.\n\n\nNever shipped them before, they don't look harmful but it is more development focused than a test suite is. A test suite is run by anyone who wants to check that their install has a certain level of \"sanity\". coverage is really a tool for devs that look for something to do.\n\nIn any case that's not super harmful unlike `-b`.",
    "created_at": "2020-06-18T04:56:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542189",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:64'></a>
Replying to [jhpalmieri](#comment%3A62):
> Okay, moved, but on the other hand, I think that the `coverage` options belong with doctesting, so I moved those from `sage-site` to `sage`.


Never shipped them before, they don't look harmful but it is more development focused than a test suite is. A test suite is run by anyone who wants to check that their install has a certain level of "sanity". coverage is really a tool for devs that look for something to do.

In any case that's not super harmful unlike `-b`.



---

archive/issue_comments_542190.json:
```json
{
    "body": "<a id='comment:65'></a>\nReplying to [jhpalmieri](#comment%3A56):\n> FYI: I changed both to use `exec`. Feel free to change back if this is wrong.\n\n\nThat's fine. In a previous version, `-advanced` printed a line after returning from `sage-site`. That's no longer needed.",
    "created_at": "2020-06-18T04:57:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542190",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:65'></a>
Replying to [jhpalmieri](#comment%3A56):
> FYI: I changed both to use `exec`. Feel free to change back if this is wrong.


That's fine. In a previous version, `-advanced` printed a line after returning from `sage-site`. That's no longer needed.



---

archive/issue_comments_542191.json:
```json
{
    "body": "<a id='comment:66'></a>\nReplying to [fbissey](#comment%3A64):\n> Replying to [jhpalmieri](#comment%3A62):\n> > Okay, moved, but on the other hand, I think that the `coverage` options belong with doctesting, so I moved those from `sage-site` to `sage`.\n\n> \n> Never shipped them before, they don't look harmful but it is more development focused than a test suite is. A test suite is run by anyone who wants to check that their install has a certain level of \"sanity\". coverage is really a tool for devs that look for something to do.\n\n\nNote that like `sage -t`, also `sage -coverage` can be run on user code, not just on Sage sources.",
    "created_at": "2020-06-18T05:01:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542191",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:66'></a>
Replying to [fbissey](#comment%3A64):
> Replying to [jhpalmieri](#comment%3A62):
> > Okay, moved, but on the other hand, I think that the `coverage` options belong with doctesting, so I moved those from `sage-site` to `sage`.

> 
> Never shipped them before, they don't look harmful but it is more development focused than a test suite is. A test suite is run by anyone who wants to check that their install has a certain level of "sanity". coverage is really a tool for devs that look for something to do.


Note that like `sage -t`, also `sage -coverage` can be run on user code, not just on Sage sources.



---

archive/issue_comments_542192.json:
```json
{
    "body": "<a id='comment:67'></a>\nReplying to [mkoeppe](#comment%3A66):\n> Replying to [fbissey](#comment%3A64):\n> > Replying to [jhpalmieri](#comment%3A62):\n> > > Okay, moved, but on the other hand, I think that the `coverage` options belong with doctesting, so I moved those from `sage-site` to `sage`.\n\n> > \n> > Never shipped them before, they don't look harmful but it is more development focused than a test suite is. A test suite is run by anyone who wants to check that their install has a certain level of \"sanity\". coverage is really a tool for devs that look for something to do.\n\n> \n> Note that like `sage -t`, also `sage -coverage` can be run on user code, not just on Sage sources.\n\n\nRight, that was my thought, too. And then it didn't make sense to separate `coverage` and `coverageall`.",
    "created_at": "2020-06-18T05:03:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542192",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:67'></a>
Replying to [mkoeppe](#comment%3A66):
> Replying to [fbissey](#comment%3A64):
> > Replying to [jhpalmieri](#comment%3A62):
> > > Okay, moved, but on the other hand, I think that the `coverage` options belong with doctesting, so I moved those from `sage-site` to `sage`.

> > 
> > Never shipped them before, they don't look harmful but it is more development focused than a test suite is. A test suite is run by anyone who wants to check that their install has a certain level of "sanity". coverage is really a tool for devs that look for something to do.

> 
> Note that like `sage -t`, also `sage -coverage` can be run on user code, not just on Sage sources.


Right, that was my thought, too. And then it didn't make sense to separate `coverage` and `coverageall`.



---

archive/issue_comments_542193.json:
```json
{
    "body": "<a id='comment:68'></a>\nIt is fine. I will ship those two then. It makes sense.",
    "created_at": "2020-06-18T05:04:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542193",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:68'></a>
It is fine. I will ship those two then. It makes sense.



---

archive/issue_comments_542194.json:
```json
{
    "body": "**Reviewer:** Matthias Koeppe, ...",
    "created_at": "2020-06-18T06:44:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542194",
    "user": "https://github.com/mkoeppe"
}
```

**Reviewer:** Matthias Koeppe, ...



---

archive/issue_comments_542195.json:
```json
{
    "body": "<a id='comment:69'></a>\nLooks great to me. Let's get this in.",
    "created_at": "2020-06-18T06:44:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542195",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:69'></a>
Looks great to me. Let's get this in.



---

archive/issue_comments_542196.json:
```json
{
    "body": "<a id='comment:70'></a>\nI have a few more questions:\n\n- I would like to delete the `-rsyncdist` option. Can we also delete `sage-rsyncdist`? The file itself says \"NOTE: This script is of little use after the git transition and will be deleted eventually.\"\n\n- Is it worth moving handling of `-gap` et al. to `sage-site`, which is where they are documented?\n\n- A comment: it would be nice to move `sage --sdist` handling to `sage-site`, but then we have to duplicate `maybe_sage_location`, so it's probably not worth it. Although then we could move `sage -b` handling, too. This can be done later, if someone feels motivated.",
    "created_at": "2020-06-18T17:50:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542196",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:70'></a>
I have a few more questions:

- I would like to delete the `-rsyncdist` option. Can we also delete `sage-rsyncdist`? The file itself says "NOTE: This script is of little use after the git transition and will be deleted eventually."

- Is it worth moving handling of `-gap` et al. to `sage-site`, which is where they are documented?

- A comment: it would be nice to move `sage --sdist` handling to `sage-site`, but then we have to duplicate `maybe_sage_location`, so it's probably not worth it. Although then we could move `sage -b` handling, too. This can be done later, if someone feels motivated.



---

archive/issue_comments_542197.json:
```json
{
    "body": "<a id='comment:71'></a>\nReplying to [jhpalmieri](#comment%3A70):\n> - I would like to delete the `-rsyncdist` option. Can we also delete `sage-rsyncdist`? The file itself says \"NOTE: This script is of little use after the git transition and will be deleted eventually.\"\n\n\nSure, let's get rid of it. There are a number of references to what looks like old-style SPKGs in this script. It was updated last in 2013. So it is likely outdated and broken already.\n\n> - Is it worth moving handling of `-gap` et al. to `sage-site`, which is where they are documented?\n\n\nYes, good idea, please go ahead.\n\n> - A comment: it would be nice to move `sage --sdist` handling to `sage-site`, but then we have to duplicate `maybe_sage_location`, so it's probably not worth it. Although then we could move `sage -b` handling, too. This can be done later, if someone feels motivated.\n\n\nI would suggest to do these in a follow-up ticket. Likewise, for the option handling for `sage -i` that would really belong to `sage-site`; this is complicated by the fact that `sage-env` must not be sourced before `sage-spkg` is executed.",
    "created_at": "2020-06-18T18:20:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542197",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:71'></a>
Replying to [jhpalmieri](#comment%3A70):
> - I would like to delete the `-rsyncdist` option. Can we also delete `sage-rsyncdist`? The file itself says "NOTE: This script is of little use after the git transition and will be deleted eventually."


Sure, let's get rid of it. There are a number of references to what looks like old-style SPKGs in this script. It was updated last in 2013. So it is likely outdated and broken already.

> - Is it worth moving handling of `-gap` et al. to `sage-site`, which is where they are documented?


Yes, good idea, please go ahead.

> - A comment: it would be nice to move `sage --sdist` handling to `sage-site`, but then we have to duplicate `maybe_sage_location`, so it's probably not worth it. Although then we could move `sage -b` handling, too. This can be done later, if someone feels motivated.


I would suggest to do these in a follow-up ticket. Likewise, for the option handling for `sage -i` that would really belong to `sage-site`; this is complicated by the fact that `sage-env` must not be sourced before `sage-spkg` is executed.



---

archive/issue_comments_542198.json:
```json
{
    "body": "<a id='comment:72'></a>\nHere's a problem: I currently have for the `sage --advanced` message\n\n```\n    if [ -n \"$SAGE_SRC\" -a -d \"$SAGE_SRC\" ]; then\n        echo \"  --grep [options] <string>\"\n        ...\n```\nAt this point, `sage-env` hasn't been run. Can I change `$SAGE_SRC` to `$SAGE_ROOT/src`? Failing this, we can move this part of the help message to `sage-site`.",
    "created_at": "2020-06-18T18:47:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542198",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:72'></a>
Here's a problem: I currently have for the `sage --advanced` message

```
    if [ -n "$SAGE_SRC" -a -d "$SAGE_SRC" ]; then
        echo "  --grep [options] <string>"
        ...
```
At this point, `sage-env` hasn't been run. Can I change `$SAGE_SRC` to `$SAGE_ROOT/src`? Failing this, we can move this part of the help message to `sage-site`.



---

archive/issue_comments_542199.json:
```json
{
    "body": "<a id='comment:73'></a>\nThe intention of using `SAGE_SRC` from `sage-env` here is that packagers would leave it undefined if they do not package a distribution.\n\nHow about moving the handling of `-h`, `-advanced` below the sourcing of `sage-env`?",
    "created_at": "2020-06-18T18:51:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542199",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:73'></a>
The intention of using `SAGE_SRC` from `sage-env` here is that packagers would leave it undefined if they do not package a distribution.

How about moving the handling of `-h`, `-advanced` below the sourcing of `sage-env`?



---

archive/issue_comments_542200.json:
```json
{
    "body": "**Changing commit** from \"[684138996fc44134dc18d2e8761eecc8caafb39e](https://github.com/sagemath/sagetrac-mirror/commit/684138996fc44134dc18d2e8761eecc8caafb39e)\" to \"[778fcd5817ce3f5455f3b7e34a3b362280cd6a7d](https://github.com/sagemath/sagetrac-mirror/commit/778fcd5817ce3f5455f3b7e34a3b362280cd6a7d)\".",
    "created_at": "2020-06-18T18:55:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542200",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[684138996fc44134dc18d2e8761eecc8caafb39e](https://github.com/sagemath/sagetrac-mirror/commit/684138996fc44134dc18d2e8761eecc8caafb39e)" to "[778fcd5817ce3f5455f3b7e34a3b362280cd6a7d](https://github.com/sagemath/sagetrac-mirror/commit/778fcd5817ce3f5455f3b7e34a3b362280cd6a7d)".



---

archive/issue_comments_542201.json:
```json
{
    "body": "<a id='comment:74'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/778fcd5817ce3f5455f3b7e34a3b362280cd6a7d\">778fcd5</a></td><td><code>trac 29111: more tinkering. Fix doctests in tests/cmdline.py.</code></td></tr></table>\n",
    "created_at": "2020-06-18T18:55:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542201",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:74'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/778fcd5817ce3f5455f3b7e34a3b362280cd6a7d">778fcd5</a></td><td><code>trac 29111: more tinkering. Fix doctests in tests/cmdline.py.</code></td></tr></table>




---

archive/issue_comments_542202.json:
```json
{
    "body": "<a id='comment:75'></a>\nI used `SAGE_ROOT/src`, but of course this can be changed. There were a few failing doctests  in `tests/cmdline.py` (mainly because of rewordings in the documentation), now fixed.",
    "created_at": "2020-06-18T18:56:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542202",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:75'></a>
I used `SAGE_ROOT/src`, but of course this can be changed. There were a few failing doctests  in `tests/cmdline.py` (mainly because of rewordings in the documentation), now fixed.



---

archive/issue_comments_542203.json:
```json
{
    "body": "<a id='comment:76'></a>\nAnd now I'm confused about `sage -p`. This was being actively tested in `tests/cmdline.py`:\n\n```\n    Test ``sage --info [packages]`` and the equivalent\n    ``sage -p --info --info [packages]`` (the doubling of ``--info``\n    is intentional, that option should be idempotent)::\n```\nDo we indeed remove it?",
    "created_at": "2020-06-18T19:02:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542203",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:76'></a>
And now I'm confused about `sage -p`. This was being actively tested in `tests/cmdline.py`:

```
    Test ``sage --info [packages]`` and the equivalent
    ``sage -p --info --info [packages]`` (the doubling of ``--info``
    is intentional, that option should be idempotent)::
```
Do we indeed remove it?



---

archive/issue_comments_542204.json:
```json
{
    "body": "<a id='comment:77'></a>\nReplying to [jhpalmieri](#comment%3A75):\n> I used `SAGE_ROOT/src`\n\n\nFine. Note `[ -n \"$SAGE_ROOT/src\" ]` is always true, so it can be simplified",
    "created_at": "2020-06-18T19:07:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542204",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:77'></a>
Replying to [jhpalmieri](#comment%3A75):
> I used `SAGE_ROOT/src`


Fine. Note `[ -n "$SAGE_ROOT/src" ]` is always true, so it can be simplified



---

archive/issue_comments_542205.json:
```json
{
    "body": "<a id='comment:78'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3cfb60cc0207109d2a64c41933f3cc7c0c5a6d34\">3cfb60c</a></td><td><code>trac 29111: more tinkering. Fix doctests in tests/cmdline.py.</code></td></tr></table>\n",
    "created_at": "2020-06-18T20:13:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542205",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:78'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3cfb60cc0207109d2a64c41933f3cc7c0c5a6d34">3cfb60c</a></td><td><code>trac 29111: more tinkering. Fix doctests in tests/cmdline.py.</code></td></tr></table>




---

archive/issue_comments_542206.json:
```json
{
    "body": "**Changing commit** from \"[778fcd5817ce3f5455f3b7e34a3b362280cd6a7d](https://github.com/sagemath/sagetrac-mirror/commit/778fcd5817ce3f5455f3b7e34a3b362280cd6a7d)\" to \"[3cfb60cc0207109d2a64c41933f3cc7c0c5a6d34](https://github.com/sagemath/sagetrac-mirror/commit/3cfb60cc0207109d2a64c41933f3cc7c0c5a6d34)\".",
    "created_at": "2020-06-18T20:13:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542206",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[778fcd5817ce3f5455f3b7e34a3b362280cd6a7d](https://github.com/sagemath/sagetrac-mirror/commit/778fcd5817ce3f5455f3b7e34a3b362280cd6a7d)" to "[3cfb60cc0207109d2a64c41933f3cc7c0c5a6d34](https://github.com/sagemath/sagetrac-mirror/commit/3cfb60cc0207109d2a64c41933f3cc7c0c5a6d34)".



---

archive/issue_comments_542207.json:
```json
{
    "body": "<a id='comment:79'></a>\nReplying to [mkoeppe](#comment%3A77):\n> Replying to [jhpalmieri](#comment%3A75):\n> > I used `SAGE_ROOT/src`\n\n> \n> Fine. Note `[ -n \"$SAGE_ROOT/src\" ]` is always true, so it can be simplified\n\n\nSorry, I missed this before pushing the branch. I've moved `usage_advanced` to after sourcing sage-env. Now `--grep` et al. show up in the message for me. I've also restored `sage -p`: I don't think this is the ticket to debate whether to remove it, that should be done on another ticket. (Admittedly, now it is no longer listed in `sage -h` or `sage --advanced`, so either it should be listed or it should be removed. But I don't know which way to go with it.)",
    "created_at": "2020-06-18T20:16:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542207",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:79'></a>
Replying to [mkoeppe](#comment%3A77):
> Replying to [jhpalmieri](#comment%3A75):
> > I used `SAGE_ROOT/src`

> 
> Fine. Note `[ -n "$SAGE_ROOT/src" ]` is always true, so it can be simplified


Sorry, I missed this before pushing the branch. I've moved `usage_advanced` to after sourcing sage-env. Now `--grep` et al. show up in the message for me. I've also restored `sage -p`: I don't think this is the ticket to debate whether to remove it, that should be done on another ticket. (Admittedly, now it is no longer listed in `sage -h` or `sage --advanced`, so either it should be listed or it should be removed. But I don't know which way to go with it.)



---

archive/issue_comments_542208.json:
```json
{
    "body": "<a id='comment:80'></a>\nI also did a lot of reorganizing of the `sage` script, trying to group the different options into sensible ways. The patch is a bit of a mess, so the file itself might be easier to browse through for changes.",
    "created_at": "2020-06-18T20:18:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542208",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:80'></a>
I also did a lot of reorganizing of the `sage` script, trying to group the different options into sensible ways. The patch is a bit of a mess, so the file itself might be easier to browse through for changes.



---

archive/issue_comments_542209.json:
```json
{
    "body": "<a id='comment:81'></a>\nReplying to [jhpalmieri](#comment%3A79):\n> I've also restored `sage -p`: I don't think this is the ticket to debate whether to remove it, that should be done on another ticket. \n\n\nIt was removed in #29289, a dependency of this ticket.",
    "created_at": "2020-06-18T21:00:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542209",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:81'></a>
Replying to [jhpalmieri](#comment%3A79):
> I've also restored `sage -p`: I don't think this is the ticket to debate whether to remove it, that should be done on another ticket. 


It was removed in #29289, a dependency of this ticket.



---

archive/issue_comments_542210.json:
```json
{
    "body": "**Changing commit** from \"[3cfb60cc0207109d2a64c41933f3cc7c0c5a6d34](https://github.com/sagemath/sagetrac-mirror/commit/3cfb60cc0207109d2a64c41933f3cc7c0c5a6d34)\" to \"[9c28ee4551def34545d1cc603e7db2d11bb6802a](https://github.com/sagemath/sagetrac-mirror/commit/9c28ee4551def34545d1cc603e7db2d11bb6802a)\".",
    "created_at": "2020-06-18T21:15:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542210",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[3cfb60cc0207109d2a64c41933f3cc7c0c5a6d34](https://github.com/sagemath/sagetrac-mirror/commit/3cfb60cc0207109d2a64c41933f3cc7c0c5a6d34)" to "[9c28ee4551def34545d1cc603e7db2d11bb6802a](https://github.com/sagemath/sagetrac-mirror/commit/9c28ee4551def34545d1cc603e7db2d11bb6802a)".



---

archive/issue_comments_542211.json:
```json
{
    "body": "<a id='comment:82'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9c28ee4551def34545d1cc603e7db2d11bb6802a\">9c28ee4</a></td><td><code>trac 29111: more tinkering. Fix doctests in tests/cmdline.py.</code></td></tr></table>\n",
    "created_at": "2020-06-18T21:15:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542211",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:82'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9c28ee4551def34545d1cc603e7db2d11bb6802a">9c28ee4</a></td><td><code>trac 29111: more tinkering. Fix doctests in tests/cmdline.py.</code></td></tr></table>




---

archive/issue_comments_542212.json:
```json
{
    "body": "<a id='comment:83'></a>\nI've tried to undo my changes to `sage -p`.",
    "created_at": "2020-06-18T21:19:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542212",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:83'></a>
I've tried to undo my changes to `sage -p`.



---

archive/issue_comments_542213.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2020-06-18T22:34:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542213",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_542214.json:
```json
{
    "body": "**Changing branch** from \"[u/jhpalmieri/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution)\" to \"[u/mkoeppe/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution)\".",
    "created_at": "2020-06-19T05:39:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542214",
    "user": "https://github.com/mkoeppe"
}
```

**Changing branch** from "[u/jhpalmieri/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution)" to "[u/mkoeppe/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution)".



---

archive/issue_comments_542215.json:
```json
{
    "body": "<a id='comment:86'></a>\nRebased on top of the new version of #29289\n\n---\n**Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/225dbb4d0cbe408ec8d02d1d88b76dce43d72bc5\">225dbb4</a></td><td><code>src/bin/sage: Move option -fix-pkg-checksums to sage-site</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/df1cd8afec7f229c41c2c3c3cae306655cf3896c\">df1cd8a</a></td><td><code>trac 29111: remove --inotebook, references to sagenb</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/55c568000cf2afaff5f4051f5032a6a6d73bb4b9\">55c5680</a></td><td><code>src/bin/sage: Move parts of the help message to sage-site</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/05ba86a78bb8eed7dbe3c019189c32437243d652\">05ba86a</a></td><td><code>Merge branch 't/29884/src_doc_bootstrap__generate_src_doc_en_reference_repl_options_rst' into t/29111/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72c7e231b1436d890ea2e9f89c6b20544f13f9b2\">72c7e23</a></td><td><code>src/doc/en/reference/repl/options.rst: Replace copypasta by include of generated file options.txt</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e9a883deca57b2525a5ec5ff774388cc6aa5530b\">e9a883d</a></td><td><code>trac 29111: revising \"sage --advanced\" message.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5dca42151e1c25299dec00c77e83e01dc55d619c\">5dca421</a></td><td><code>trac 29111: more reorganization of \"sage --advanced\" message</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8f0ee05503a86f49997300ab43b800d1bde9430a\">8f0ee05</a></td><td><code>trac 29111: delete sage-fix-pkg-checksums</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/21fc23144edff0d061271cb1ce91824bedfeb1f1\">21fc231</a></td><td><code>trac 29111: re \"sage --advanced\" message:</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/875940dea7853575e42f567759bcaa5392d6c5b3\">875940d</a></td><td><code>trac 29111: more tinkering. Fix doctests in tests/cmdline.py.</code></td></tr></table>\n",
    "created_at": "2020-06-19T05:40:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542215",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:86'></a>
Rebased on top of the new version of #29289

---
**Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/225dbb4d0cbe408ec8d02d1d88b76dce43d72bc5">225dbb4</a></td><td><code>src/bin/sage: Move option -fix-pkg-checksums to sage-site</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/df1cd8afec7f229c41c2c3c3cae306655cf3896c">df1cd8a</a></td><td><code>trac 29111: remove --inotebook, references to sagenb</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/55c568000cf2afaff5f4051f5032a6a6d73bb4b9">55c5680</a></td><td><code>src/bin/sage: Move parts of the help message to sage-site</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/05ba86a78bb8eed7dbe3c019189c32437243d652">05ba86a</a></td><td><code>Merge branch 't/29884/src_doc_bootstrap__generate_src_doc_en_reference_repl_options_rst' into t/29111/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72c7e231b1436d890ea2e9f89c6b20544f13f9b2">72c7e23</a></td><td><code>src/doc/en/reference/repl/options.rst: Replace copypasta by include of generated file options.txt</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e9a883deca57b2525a5ec5ff774388cc6aa5530b">e9a883d</a></td><td><code>trac 29111: revising "sage --advanced" message.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5dca42151e1c25299dec00c77e83e01dc55d619c">5dca421</a></td><td><code>trac 29111: more reorganization of "sage --advanced" message</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8f0ee05503a86f49997300ab43b800d1bde9430a">8f0ee05</a></td><td><code>trac 29111: delete sage-fix-pkg-checksums</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/21fc23144edff0d061271cb1ce91824bedfeb1f1">21fc231</a></td><td><code>trac 29111: re "sage --advanced" message:</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/875940dea7853575e42f567759bcaa5392d6c5b3">875940d</a></td><td><code>trac 29111: more tinkering. Fix doctests in tests/cmdline.py.</code></td></tr></table>




---

archive/issue_comments_542216.json:
```json
{
    "body": "**Changing commit** from \"[9c28ee4551def34545d1cc603e7db2d11bb6802a](https://github.com/sagemath/sagetrac-mirror/commit/9c28ee4551def34545d1cc603e7db2d11bb6802a)\" to \"[875940dea7853575e42f567759bcaa5392d6c5b3](https://github.com/sagemath/sagetrac-mirror/commit/875940dea7853575e42f567759bcaa5392d6c5b3)\".",
    "created_at": "2020-06-19T05:40:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542216",
    "user": "https://github.com/mkoeppe"
}
```

**Changing commit** from "[9c28ee4551def34545d1cc603e7db2d11bb6802a](https://github.com/sagemath/sagetrac-mirror/commit/9c28ee4551def34545d1cc603e7db2d11bb6802a)" to "[875940dea7853575e42f567759bcaa5392d6c5b3](https://github.com/sagemath/sagetrac-mirror/commit/875940dea7853575e42f567759bcaa5392d6c5b3)".



---

archive/issue_comments_542217.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2020-06-19T05:46:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542217",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_542218.json:
```json
{
    "body": "<a id='comment:88'></a>\nBy the way, `sage-site` -- is this a good name for this script?",
    "created_at": "2020-06-19T05:48:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542218",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:88'></a>
By the way, `sage-site` -- is this a good name for this script?



---

archive/issue_comments_542219.json:
```json
{
    "body": "<a id='comment:89'></a>\nReplying to [mkoeppe](#comment%3A88):\n> By the way, `sage-site` -- is this a good name for this script?\n\n\nI can't think of anything better.",
    "created_at": "2020-06-19T17:55:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542219",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:89'></a>
Replying to [mkoeppe](#comment%3A88):
> By the way, `sage-site` -- is this a good name for this script?


I can't think of anything better.



---

archive/issue_comments_542220.json:
```json
{
    "body": "**Changing reviewer** from \"Matthias Koeppe, ...\" to \"Matthias Koeppe, John Palmieri, ...\".",
    "created_at": "2020-06-19T17:55:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542220",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing reviewer** from "Matthias Koeppe, ..." to "Matthias Koeppe, John Palmieri, ...".



---

archive/issue_comments_542221.json:
```json
{
    "body": "<a id='comment:91'></a>\n@kiwifb, could you take another look so we can finalize this ticket?",
    "created_at": "2020-06-21T00:01:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542221",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:91'></a>
@kiwifb, could you take another look so we can finalize this ticket?



---

archive/issue_comments_542222.json:
```json
{
    "body": "<a id='comment:92'></a>\nReplying to [mkoeppe](#comment%3A91):\n> @kiwifb, could you take another look so we can finalize this ticket?\n\n\nI'll have a look after my lunch.",
    "created_at": "2020-06-21T00:05:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542222",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:92'></a>
Replying to [mkoeppe](#comment%3A91):
> @kiwifb, could you take another look so we can finalize this ticket?


I'll have a look after my lunch.



---

archive/issue_comments_542223.json:
```json
{
    "body": "<a id='comment:93'></a>\nOK, so I am having this look over, mainly at `sage` and what is now called `sage-site`. And I have to say splitting the stuff is not easy and subject to controversy so what I say is not going to be the final word on the matter.\n\nThis branch version of `sage` still execute numerous options that are not listed in the sage menu but that would be displayed by `sage-site`.\n* `--upgrade`\n* `--buildsh`\n* `-i`\n* `-f`\n* the function `build_sage` (I would have thought it belonged to `sage-site`)\n* same with `maybe_sage_location`\n* all `-b` options\nI recognise that some of these may have to live there for technical reason. Splitting `--sh` and `--buildsh` for example would lead to code duplication - unless someone also does some refactoring. But as it is now, they could be accidentally called from a sage-on-distro shipping this file. If they have to stay there, we should get a check on `SAGE_ROOT` before executing them and display some error message if it is not defined. Like \"not available in this distribution of sagemath\".\n\nConversely I thought calling on sage's version of various packages (`gap`, `singular`, `maxima`, etc...) was to stay in the main `sage` script rather than move to `sage-site`. They usually execute normally with system installed packages and may be required for running some user scripts.",
    "created_at": "2020-06-21T01:50:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542223",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:93'></a>
OK, so I am having this look over, mainly at `sage` and what is now called `sage-site`. And I have to say splitting the stuff is not easy and subject to controversy so what I say is not going to be the final word on the matter.

This branch version of `sage` still execute numerous options that are not listed in the sage menu but that would be displayed by `sage-site`.
* `--upgrade`
* `--buildsh`
* `-i`
* `-f`
* the function `build_sage` (I would have thought it belonged to `sage-site`)
* same with `maybe_sage_location`
* all `-b` options
I recognise that some of these may have to live there for technical reason. Splitting `--sh` and `--buildsh` for example would lead to code duplication - unless someone also does some refactoring. But as it is now, they could be accidentally called from a sage-on-distro shipping this file. If they have to stay there, we should get a check on `SAGE_ROOT` before executing them and display some error message if it is not defined. Like "not available in this distribution of sagemath".

Conversely I thought calling on sage's version of various packages (`gap`, `singular`, `maxima`, etc...) was to stay in the main `sage` script rather than move to `sage-site`. They usually execute normally with system installed packages and may be required for running some user scripts.



---

archive/issue_comments_542224.json:
```json
{
    "body": "<a id='comment:94'></a>\nReplying to [fbissey](#comment%3A93):\n> This branch version of `sage` still execute numerous options that are not listed in the sage menu but that would be displayed by `sage-site`. [...]\n> I recognise that some of these may have to live there for technical reason. \n\n\nRight, this ticket is certainly not meant as the final word on splitting the script. \nBut by splitting the help strings on this ticket, we define the interface, and this is to me the most important part.  The patch is already huge, and it is best to do further refactoring and refinements in narrower follow-up tickets.\n\n> as it is now, they could be accidentally called from a sage-on-distro shipping this file. If they have to stay there, we should get a check on `SAGE_ROOT` before executing them and display some error message if it is not defined. Like \"not available in this distribution of sagemath\".\n\n\nThis sounds like a good idea, but I would also prefer to do this on a follow-up ticket.\n\n> Conversely I thought calling on sage's version of various packages (`gap`, `singular`, `maxima`, etc...) was to stay in the main `sage` script rather than move to `sage-site`. They usually execute normally with system installed packages and may be required for running some user scripts.\n\n\nIt would be fine with me to move them back to `sage`.",
    "created_at": "2020-06-21T02:03:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542224",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:94'></a>
Replying to [fbissey](#comment%3A93):
> This branch version of `sage` still execute numerous options that are not listed in the sage menu but that would be displayed by `sage-site`. [...]
> I recognise that some of these may have to live there for technical reason. 


Right, this ticket is certainly not meant as the final word on splitting the script. 
But by splitting the help strings on this ticket, we define the interface, and this is to me the most important part.  The patch is already huge, and it is best to do further refactoring and refinements in narrower follow-up tickets.

> as it is now, they could be accidentally called from a sage-on-distro shipping this file. If they have to stay there, we should get a check on `SAGE_ROOT` before executing them and display some error message if it is not defined. Like "not available in this distribution of sagemath".


This sounds like a good idea, but I would also prefer to do this on a follow-up ticket.

> Conversely I thought calling on sage's version of various packages (`gap`, `singular`, `maxima`, etc...) was to stay in the main `sage` script rather than move to `sage-site`. They usually execute normally with system installed packages and may be required for running some user scripts.


It would be fine with me to move them back to `sage`.



---

archive/issue_comments_542225.json:
```json
{
    "body": "<a id='comment:95'></a>\nReplying to [mkoeppe](#comment%3A94):\n> Replying to [fbissey](#comment%3A93):\n> > This branch version of `sage` still execute numerous options that are not listed in the sage menu but that would be displayed by `sage-site`. [...]\n> > I recognise that some of these may have to live there for technical reason. \n\n> \n> Right, this ticket is certainly not meant as the final word on splitting the script. \n> But by splitting the help strings on this ticket, we define the interface, and this is to me the most important part.  The patch is already huge, and it is best to do further refactoring and refinements in narrower follow-up tickets.\n> \n\n\nI am OK with that. Let's get the interface where we want it then.\n\n> > as it is now, they could be accidentally called from a sage-on-distro shipping this file. If they have to stay there, we should get a check on `SAGE_ROOT` before executing them and display some error message if it is not defined. Like \"not available in this distribution of sagemath\".\n\n> \n> This sounds like a good idea, but I would also prefer to do this on a follow-up ticket.\n> \n\n\nThis is acceptable. 9.2 is not getting anywhere very fast :) To put things in perspective I was thinking of having a function rather than writing a very similar piece of code all over the place.\n\n> > Conversely I thought calling on sage's version of various packages (`gap`, `singular`, `maxima`, etc...) was to stay in the main `sage` script rather than move to `sage-site`. They usually execute normally with system installed packages and may be required for running some user scripts.\n\n> \n> It would be fine with me to move them back to `sage`.\n> \n\n\nRight, since we want to set the interface right we have to decide if this is something that is important for the distribution to support. On one side, it just works like it is, on the other side it is redundant with calling the application directly. The only interesting point is whether there are scripts out there that needs this for compatibility. \n\nThese direct calls to various applications could also be replaced by `sage --sh $app`, `sage --sh` was actually developed some time after those direct calls were put in place (IIRC). So a migration path could be suggested and they could be deprecated. That would be yet another follow up ticket.",
    "created_at": "2020-06-21T02:31:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542225",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:95'></a>
Replying to [mkoeppe](#comment%3A94):
> Replying to [fbissey](#comment%3A93):
> > This branch version of `sage` still execute numerous options that are not listed in the sage menu but that would be displayed by `sage-site`. [...]
> > I recognise that some of these may have to live there for technical reason. 

> 
> Right, this ticket is certainly not meant as the final word on splitting the script. 
> But by splitting the help strings on this ticket, we define the interface, and this is to me the most important part.  The patch is already huge, and it is best to do further refactoring and refinements in narrower follow-up tickets.
> 


I am OK with that. Let's get the interface where we want it then.

> > as it is now, they could be accidentally called from a sage-on-distro shipping this file. If they have to stay there, we should get a check on `SAGE_ROOT` before executing them and display some error message if it is not defined. Like "not available in this distribution of sagemath".

> 
> This sounds like a good idea, but I would also prefer to do this on a follow-up ticket.
> 


This is acceptable. 9.2 is not getting anywhere very fast :) To put things in perspective I was thinking of having a function rather than writing a very similar piece of code all over the place.

> > Conversely I thought calling on sage's version of various packages (`gap`, `singular`, `maxima`, etc...) was to stay in the main `sage` script rather than move to `sage-site`. They usually execute normally with system installed packages and may be required for running some user scripts.

> 
> It would be fine with me to move them back to `sage`.
> 


Right, since we want to set the interface right we have to decide if this is something that is important for the distribution to support. On one side, it just works like it is, on the other side it is redundant with calling the application directly. The only interesting point is whether there are scripts out there that needs this for compatibility. 

These direct calls to various applications could also be replaced by `sage --sh $app`, `sage --sh` was actually developed some time after those direct calls were put in place (IIRC). So a migration path could be suggested and they could be deprecated. That would be yet another follow up ticket.



---

archive/issue_comments_542226.json:
```json
{
    "body": "<a id='comment:96'></a>\nReplying to [fbissey](#comment%3A95):\n> > > Conversely I thought calling on sage's version of various packages (`gap`, `singular`, `maxima`, etc...) was to stay in the main `sage` script rather than move to `sage-site`. They usually execute normally with system installed packages and may be required for running some user scripts.\n\n> > \n> > It would be fine with me to move them back to `sage`.\n> > \n\n> \n> Right, since we want to set the interface right we have to decide if this is something that is important for the distribution to support. On one side, it just works like it is, on the other side it is redundant with calling the application directly. The only interesting point is whether there are scripts out there that needs this for compatibility. \n> \n> These direct calls to various applications could also be replaced by `sage --sh $app`, `sage --sh` was actually developed some time after those direct calls were put in place (IIRC). \n\n\nThanks for the context.\n\n> So a migration path could be suggested and they could be deprecated. That would be yet another follow up ticket.\n\n\nI agree. We should go in this direction by deprecating these shortcuts `sage -$app` first. That would be a separate ticket.\n\nSo for this ticket, I will move them back into the `sage` script unless @jhpalmieri objects.",
    "created_at": "2020-06-21T02:59:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542226",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:96'></a>
Replying to [fbissey](#comment%3A95):
> > > Conversely I thought calling on sage's version of various packages (`gap`, `singular`, `maxima`, etc...) was to stay in the main `sage` script rather than move to `sage-site`. They usually execute normally with system installed packages and may be required for running some user scripts.

> > 
> > It would be fine with me to move them back to `sage`.
> > 

> 
> Right, since we want to set the interface right we have to decide if this is something that is important for the distribution to support. On one side, it just works like it is, on the other side it is redundant with calling the application directly. The only interesting point is whether there are scripts out there that needs this for compatibility. 
> 
> These direct calls to various applications could also be replaced by `sage --sh $app`, `sage --sh` was actually developed some time after those direct calls were put in place (IIRC). 


Thanks for the context.

> So a migration path could be suggested and they could be deprecated. That would be yet another follow up ticket.


I agree. We should go in this direction by deprecating these shortcuts `sage -$app` first. That would be a separate ticket.

So for this ticket, I will move them back into the `sage` script unless @jhpalmieri objects.



---

archive/issue_comments_542227.json:
```json
{
    "body": "<a id='comment:97'></a>\nGo ahead, I don't have strong feelings about it.\n\nI also like the idea of testing `SAGE_ROOT` before executing `sage -b` etc. But doing it on a followup ticket is fine.",
    "created_at": "2020-06-21T05:04:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542227",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:97'></a>
Go ahead, I don't have strong feelings about it.

I also like the idea of testing `SAGE_ROOT` before executing `sage -b` etc. But doing it on a followup ticket is fine.



---

archive/issue_comments_542228.json:
```json
{
    "body": "**Changing commit** from \"[875940dea7853575e42f567759bcaa5392d6c5b3](https://github.com/sagemath/sagetrac-mirror/commit/875940dea7853575e42f567759bcaa5392d6c5b3)\" to \"[4a3d36eb78976d31d9d27623712b2af7b6b74006](https://github.com/sagemath/sagetrac-mirror/commit/4a3d36eb78976d31d9d27623712b2af7b6b74006)\".",
    "created_at": "2020-06-21T05:40:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542228",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[875940dea7853575e42f567759bcaa5392d6c5b3](https://github.com/sagemath/sagetrac-mirror/commit/875940dea7853575e42f567759bcaa5392d6c5b3)" to "[4a3d36eb78976d31d9d27623712b2af7b6b74006](https://github.com/sagemath/sagetrac-mirror/commit/4a3d36eb78976d31d9d27623712b2af7b6b74006)".



---

archive/issue_comments_542229.json:
```json
{
    "body": "<a id='comment:98'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4a3d36eb78976d31d9d27623712b2af7b6b74006\">4a3d36e</a></td><td><code>Move 'sage -app' back to src/bin/sage</code></td></tr></table>\n",
    "created_at": "2020-06-21T05:40:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542229",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:98'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4a3d36eb78976d31d9d27623712b2af7b6b74006">4a3d36e</a></td><td><code>Move 'sage -app' back to src/bin/sage</code></td></tr></table>




---

archive/issue_comments_542230.json:
```json
{
    "body": "<a id='comment:99'></a>\ndone, please check if you have a chance",
    "created_at": "2020-06-21T05:40:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542230",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:99'></a>
done, please check if you have a chance



---

archive/issue_comments_542231.json:
```json
{
    "body": "<a id='comment:0'></a>\nWhat is `sage --axiom` supposed to do? What package installs an `axiom` executable?",
    "created_at": "2020-06-21T22:41:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542231",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:0'></a>
What is `sage --axiom` supposed to do? What package installs an `axiom` executable?



---

archive/issue_comments_542232.json:
```json
{
    "body": "<a id='comment:1'></a>\nDid we drop the packaging of `axiom`? http://axiom.axiom-developer.org/",
    "created_at": "2020-06-21T22:44:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542232",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:1'></a>
Did we drop the packaging of `axiom`? http://axiom.axiom-developer.org/



---

archive/issue_comments_542233.json:
```json
{
    "body": "<a id='comment:2'></a>\nNot as a new-style package, and I couldn't find the website with old-style packages. Does it still exist?",
    "created_at": "2020-06-21T23:03:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542233",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:2'></a>
Not as a new-style package, and I couldn't find the website with old-style packages. Does it still exist?



---

archive/issue_comments_542234.json:
```json
{
    "body": "<a id='comment:3'></a>\nThere is here http://old.files.sagemath.org/spkg/archive/ which I could go from here http://files.sagemath.org/spkg/",
    "created_at": "2020-06-21T23:07:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542234",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:3'></a>
There is here http://old.files.sagemath.org/spkg/archive/ which I could go from here http://files.sagemath.org/spkg/



---

archive/issue_comments_542235.json:
```json
{
    "body": "<a id='comment:4'></a>\nOh, so it's from 2007?!",
    "created_at": "2020-06-21T23:10:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542235",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:4'></a>
Oh, so it's from 2007?!



---

archive/issue_comments_542236.json:
```json
{
    "body": "<a id='comment:5'></a>\nSee #29930 for a discussion of `sage --gap` and friends.",
    "created_at": "2020-06-21T23:10:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542236",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:5'></a>
See #29930 for a discussion of `sage --gap` and friends.



---

archive/issue_comments_542237.json:
```json
{
    "body": "<a id='comment:6'></a>\nThe Sage `axiom` package requires `clisp`. I changed the `spkg-install` file to use `ecl` instead, but it failed. I am going to out on a limb and suggest that no one is using this spkg with a recent version of Sage.",
    "created_at": "2020-06-21T23:15:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542237",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:6'></a>
The Sage `axiom` package requires `clisp`. I changed the `spkg-install` file to use `ecl` instead, but it failed. I am going to out on a limb and suggest that no one is using this spkg with a recent version of Sage.



---

archive/issue_comments_542238.json:
```json
{
    "body": "<a id='comment:7'></a>\nYou have my full support to remove this piece of cruft.",
    "created_at": "2020-06-21T23:17:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542238",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:7'></a>
You have my full support to remove this piece of cruft.



---

archive/issue_comments_542239.json:
```json
{
    "body": "<a id='comment:8'></a>\nDoes perhaps `fricas` install itself under the name `axiom`?",
    "created_at": "2020-06-22T05:18:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542239",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
Does perhaps `fricas` install itself under the name `axiom`?



---

archive/issue_comments_542240.json:
```json
{
    "body": "<a id='comment:9'></a>\nGood idea. From http://fricas.sourceforge.net/history.html, it looks like FriCAS is a fork of Axiom, but I just installed it, and it doesn't install `axiom` (at least not in `SAGE_ROOT/local/bin`, nor is `axiom` listed in its package manifest). It installs `fricas` and `efricas`, so we could eventually add those, but it's not like anyone's been clamoring for them.",
    "created_at": "2020-06-22T05:35:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542240",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:9'></a>
Good idea. From http://fricas.sourceforge.net/history.html, it looks like FriCAS is a fork of Axiom, but I just installed it, and it doesn't install `axiom` (at least not in `SAGE_ROOT/local/bin`, nor is `axiom` listed in its package manifest). It installs `fricas` and `efricas`, so we could eventually add those, but it's not like anyone's been clamoring for them.



---

archive/issue_comments_542241.json:
```json
{
    "body": "<a id='comment:0'></a>\nThen let's just drop `sage --axiom`. Good catch!",
    "created_at": "2020-06-22T05:46:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542241",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:0'></a>
Then let's just drop `sage --axiom`. Good catch!



---

archive/issue_comments_542242.json:
```json
{
    "body": "<a id='comment:1'></a>\nis axiom package an old-style one?\n\nIt's probably very outdated. also, my impression is that fricas fork is the most active of all the forks of the original axiom forks.\nThe others are http://www.axiom-developer.org/ (axiom) and http://www.open-axiom.org/links.html (OpenAxiom)",
    "created_at": "2020-06-22T06:03:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542242",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:1'></a>
is axiom package an old-style one?

It's probably very outdated. also, my impression is that fricas fork is the most active of all the forks of the original axiom forks.
The others are http://www.axiom-developer.org/ (axiom) and http://www.open-axiom.org/links.html (OpenAxiom)



---

archive/issue_comments_542243.json:
```json
{
    "body": "<a id='comment:2'></a>\nThat's right, there is no new-style `axiom` package.",
    "created_at": "2020-06-22T17:42:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542243",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
That's right, there is no new-style `axiom` package.



---

archive/issue_comments_542244.json:
```json
{
    "body": "**Changing commit** from \"[4a3d36eb78976d31d9d27623712b2af7b6b74006](https://github.com/sagemath/sagetrac-mirror/commit/4a3d36eb78976d31d9d27623712b2af7b6b74006)\" to \"[3a0193c9f0a12407ac3708fea6d70c9b72d4f864](https://github.com/sagemath/sagetrac-mirror/commit/3a0193c9f0a12407ac3708fea6d70c9b72d4f864)\".",
    "created_at": "2020-06-22T17:44:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542244",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[4a3d36eb78976d31d9d27623712b2af7b6b74006](https://github.com/sagemath/sagetrac-mirror/commit/4a3d36eb78976d31d9d27623712b2af7b6b74006)" to "[3a0193c9f0a12407ac3708fea6d70c9b72d4f864](https://github.com/sagemath/sagetrac-mirror/commit/3a0193c9f0a12407ac3708fea6d70c9b72d4f864)".



---

archive/issue_comments_542245.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a0193c9f0a12407ac3708fea6d70c9b72d4f864\">3a0193c</a></td><td><code>src/bin/sage: Remove handling of 'sage -axiom'</code></td></tr></table>\n",
    "created_at": "2020-06-22T17:44:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542245",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a0193c9f0a12407ac3708fea6d70c9b72d4f864">3a0193c</a></td><td><code>src/bin/sage: Remove handling of 'sage -axiom'</code></td></tr></table>




---

archive/issue_comments_542246.json:
```json
{
    "body": "<a id='comment:4'></a>\nDone. Needs review",
    "created_at": "2020-06-22T17:45:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542246",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
Done. Needs review



---

archive/issue_comments_542247.json:
```json
{
    "body": "<a id='comment:5'></a>\nI'm happy with everything. Who else would like to weigh in?",
    "created_at": "2020-06-22T18:52:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542247",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:5'></a>
I'm happy with everything. Who else would like to weigh in?



---

archive/issue_comments_542248.json:
```json
{
    "body": "**Changing reviewer** from \"Matthias Koeppe, John Palmieri, ...\" to \"Matthias Koeppe, John Palmieri, Fran\u00e7ois Bissey\".",
    "created_at": "2020-06-23T20:04:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542248",
    "user": "https://github.com/mkoeppe"
}
```

**Changing reviewer** from "Matthias Koeppe, John Palmieri, ..." to "Matthias Koeppe, John Palmieri, Fran√ßois Bissey".



---

archive/issue_comments_542249.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2020-06-23T20:46:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542249",
    "user": "https://github.com/kiwifb"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_542250.json:
```json
{
    "body": "<a id='comment:7'></a>\nSorry, I was busy and forgot about it. We have reached an agreement with what goes in and what's next. I think we have bashed it enough and it is ready to go.",
    "created_at": "2020-06-23T20:46:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542250",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:7'></a>
Sorry, I was busy and forgot about it. We have reached an agreement with what goes in and what's next. I think we have bashed it enough and it is ready to go.



---

archive/issue_comments_542251.json:
```json
{
    "body": "<a id='comment:8'></a>\nThanks!",
    "created_at": "2020-06-23T21:11:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542251",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
Thanks!



---

archive/issue_comments_542252.json:
```json
{
    "body": "<a id='comment:9'></a>\n<thumbs up emoji>",
    "created_at": "2020-06-23T21:44:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542252",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:9'></a>
<thumbs up emoji>



---

archive/issue_comments_542253.json:
```json
{
    "body": "<a id='comment:0'></a>\nFollow-ups: \n- #21559: Install `src/bin` scripts by sagelib's `setup.py`, not `make`\n- #29930: Change handling of `sage --APP`",
    "created_at": "2020-06-23T21:50:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542253",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:0'></a>
Follow-ups: 
- #21559: Install `src/bin` scripts by sagelib's `setup.py`, not `make`
- #29930: Change handling of `sage --APP`



---

archive/issue_comments_542254.json:
```json
{
    "body": "<a id='comment:1'></a>\nMerge confilct",
    "created_at": "2020-07-08T22:50:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542254",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:1'></a>
Merge confilct



---

archive/issue_comments_542255.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2020-07-08T22:50:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542255",
    "user": "https://github.com/vbraun"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_542256.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c8bab39ca0c44333484007cc0f4778016c01ab0c\">c8bab39</a></td><td><code>Merge tag '9.2.beta4' into t/29111/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution</code></td></tr></table>\n",
    "created_at": "2020-07-08T22:59:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542256",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c8bab39ca0c44333484007cc0f4778016c01ab0c">c8bab39</a></td><td><code>Merge tag '9.2.beta4' into t/29111/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution</code></td></tr></table>




---

archive/issue_comments_542257.json:
```json
{
    "body": "**Changing commit** from \"[3a0193c9f0a12407ac3708fea6d70c9b72d4f864](https://github.com/sagemath/sagetrac-mirror/commit/3a0193c9f0a12407ac3708fea6d70c9b72d4f864)\" to \"[c8bab39ca0c44333484007cc0f4778016c01ab0c](https://github.com/sagemath/sagetrac-mirror/commit/c8bab39ca0c44333484007cc0f4778016c01ab0c)\".",
    "created_at": "2020-07-08T22:59:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542257",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[3a0193c9f0a12407ac3708fea6d70c9b72d4f864](https://github.com/sagemath/sagetrac-mirror/commit/3a0193c9f0a12407ac3708fea6d70c9b72d4f864)" to "[c8bab39ca0c44333484007cc0f4778016c01ab0c](https://github.com/sagemath/sagetrac-mirror/commit/c8bab39ca0c44333484007cc0f4778016c01ab0c)".



---

archive/issue_comments_542258.json:
```json
{
    "body": "**Changing commit** from \"[c8bab39ca0c44333484007cc0f4778016c01ab0c](https://github.com/sagemath/sagetrac-mirror/commit/c8bab39ca0c44333484007cc0f4778016c01ab0c)\" to \"[39536716aef05e8953bdc50038c49e5959ffdb6a](https://github.com/sagemath/sagetrac-mirror/commit/39536716aef05e8953bdc50038c49e5959ffdb6a)\".",
    "created_at": "2020-07-08T22:59:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542258",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c8bab39ca0c44333484007cc0f4778016c01ab0c](https://github.com/sagemath/sagetrac-mirror/commit/c8bab39ca0c44333484007cc0f4778016c01ab0c)" to "[39536716aef05e8953bdc50038c49e5959ffdb6a](https://github.com/sagemath/sagetrac-mirror/commit/39536716aef05e8953bdc50038c49e5959ffdb6a)".



---

archive/issue_comments_542259.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/39536716aef05e8953bdc50038c49e5959ffdb6a\">3953671</a></td><td><code>Merge tag '9.2.beta4' into t/29111/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution</code></td></tr></table>\n",
    "created_at": "2020-07-08T22:59:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542259",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/39536716aef05e8953bdc50038c49e5959ffdb6a">3953671</a></td><td><code>Merge tag '9.2.beta4' into t/29111/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution</code></td></tr></table>




---

archive/issue_comments_542260.json:
```json
{
    "body": "**Changing status** from needs_work to positive_review.",
    "created_at": "2020-07-08T23:00:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542260",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_work to positive_review.



---

archive/issue_events_083049.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-07-10T19:34:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29111#event-83049"
}
```



---

archive/issue_comments_542261.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution)\" to \"[39536716aef05e8953bdc50038c49e5959ffdb6a](https://github.com/sagemath/sagetrac-mirror/commit/39536716aef05e8953bdc50038c49e5959ffdb6a)\".",
    "created_at": "2020-07-10T19:34:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542261",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/mkoeppe/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution)" to "[39536716aef05e8953bdc50038c49e5959ffdb6a](https://github.com/sagemath/sagetrac-mirror/commit/39536716aef05e8953bdc50038c49e5959ffdb6a)".



---

archive/issue_comments_542262.json:
```json
{
    "body": "**Changing commit** from \"[39536716aef05e8953bdc50038c49e5959ffdb6a](https://github.com/sagemath/sagetrac-mirror/commit/39536716aef05e8953bdc50038c49e5959ffdb6a)\" to \"\".",
    "created_at": "2022-04-25T02:25:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542262",
    "user": "https://github.com/mkoeppe"
}
```

**Changing commit** from "[39536716aef05e8953bdc50038c49e5959ffdb6a](https://github.com/sagemath/sagetrac-mirror/commit/39536716aef05e8953bdc50038c49e5959ffdb6a)" to "".



---

archive/issue_comments_542263.json:
```json
{
    "body": "<a id='comment:6'></a>\nFollow-up in #33753",
    "created_at": "2022-04-25T02:25:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29111",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29111#issuecomment-542263",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
Follow-up in #33753
