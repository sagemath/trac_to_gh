# Issue 29325: Set up permutahedron with both Vrep and Hrep (if backend supports it)

archive/issues_029088.json:
```json
{
    "assignees": [],
    "body": "We set up the permutahedron with both Vrepresenation and Hrepresentation, if the backend supports it.\n\nIf the backend supports precomputed data (currently `field`) this is much faster. Otherwise, this is a bit faster, as the Hrepresentation seems to be the better choice.\n\nBefore this ticket:\n\n```\nsage: %timeit P = polytopes.permutahedron(6)  # using ppl\n10 loops, best of 5: 56.5 ms per loop\nsage: %timeit P = polytopes.permutahedron(7)  # using ppl\n1 loop, best of 5: 1.57 s per loop\n```\n\nWith this ticket:\n\n```\nsage: %timeit P = polytopes.permutahedron(6)  # using ppl\n10 loops, best of 5: 34.2 ms per loop\nsage: %timeit P = polytopes.permutahedron(7)  # using ppl\n1 loop, best of 5: 1.04 s per loop\nsage: %time P = polytopes.permutahedron(8, backend='field')\nCPU times: user 587 ms, sys: 20 ms, total: 607 ms\nWall time: 607 ms\nsage: %time P = polytopes.permutahedron(9, backend='field')\nCPU times: user 5.08 s, sys: 248 ms, total: 5.33 s\nWall time: 5.33 s\n```\n\nNote that `field` is much slower than `ppl` before this ticket and the timings are therefore omitted.\n\nAs the order of Vrepresentation and Hrepresentation changes, a lot of tests need to be fixed.\n\nCC:  @jplab @LaisRast\n\nKeywords: **polytopes, precomputed data, permutahedron**\n\nBranch/Commit: **[`577e736`](https://github.com/sagemath/sagetrac-mirror/commit/577e73606401e23f2677ddf553ecf9dfbebf3a4a)**\n\nReviewer: **Jean-Philippe Labb\u00e9, Matthias Koeppe**\n\nAuthor: **Jonathan Kliem**\n\nComponent: **geometry**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29325_\n\n",
    "closed_at": "2020-08-15T09:41:43Z",
    "created_at": "2020-03-13T15:15:59Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20geometry",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Set up permutahedron with both Vrep and Hrep (if backend supports it)",
    "type": "issue",
    "updated_at": "2020-08-15T09:41:43Z",
    "url": "https://github.com/sagemath/sage/issues/29325",
    "user": "https://github.com/kliem"
}
```
We set up the permutahedron with both Vrepresenation and Hrepresentation, if the backend supports it.

If the backend supports precomputed data (currently `field`) this is much faster. Otherwise, this is a bit faster, as the Hrepresentation seems to be the better choice.

Before this ticket:

```
sage: %timeit P = polytopes.permutahedron(6)  # using ppl
10 loops, best of 5: 56.5 ms per loop
sage: %timeit P = polytopes.permutahedron(7)  # using ppl
1 loop, best of 5: 1.57 s per loop
```

With this ticket:

```
sage: %timeit P = polytopes.permutahedron(6)  # using ppl
10 loops, best of 5: 34.2 ms per loop
sage: %timeit P = polytopes.permutahedron(7)  # using ppl
1 loop, best of 5: 1.04 s per loop
sage: %time P = polytopes.permutahedron(8, backend='field')
CPU times: user 587 ms, sys: 20 ms, total: 607 ms
Wall time: 607 ms
sage: %time P = polytopes.permutahedron(9, backend='field')
CPU times: user 5.08 s, sys: 248 ms, total: 5.33 s
Wall time: 5.33 s
```

Note that `field` is much slower than `ppl` before this ticket and the timings are therefore omitted.

As the order of Vrepresentation and Hrepresentation changes, a lot of tests need to be fixed.

CC:  @jplab @LaisRast

Keywords: **polytopes, precomputed data, permutahedron**

Branch/Commit: **[`577e736`](https://github.com/sagemath/sagetrac-mirror/commit/577e73606401e23f2677ddf553ecf9dfbebf3a4a)**

Reviewer: **Jean-Philippe Labbé, Matthias Koeppe**

Author: **Jonathan Kliem**

Component: **geometry**

_Issue created by migration from https://trac.sagemath.org/ticket/29325_





---

archive/issue_events_403189.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-03-13T15:15:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29325#event-403189"
}
```



---

archive/issue_events_403190.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-03-13T15:15:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20geometry",
    "label_color": "0000ff",
    "label_name": "c: geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29325#event-403190"
}
```



---

archive/issue_events_403191.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-03-13T15:15:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29325#event-403191"
}
```



---

archive/issue_events_403192.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-03-13T15:15:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29325#event-403192"
}
```



---

archive/issue_comments_460095.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/33e4490969d998fb1aa51a99a518cda2f1a776f5\"><code>33e4490</code></a></td><td><code>set up permutahedron with precomputed data</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/32708d4b75de2341bd9d809d40d60a2b46cf7027\"><code>32708d4</code></a></td><td><code>fixing failing doctests due to reordering</code></td></tr></table>\n",
    "created_at": "2020-03-13T15:29:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29325#issuecomment-460095",
    "user": "https://github.com/kliem"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/33e4490969d998fb1aa51a99a518cda2f1a776f5"><code>33e4490</code></a></td><td><code>set up permutahedron with precomputed data</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/32708d4b75de2341bd9d809d40d60a2b46cf7027"><code>32708d4</code></a></td><td><code>fixing failing doctests due to reordering</code></td></tr></table>




---

archive/issue_events_403193.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-03-13T15:29:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29325#event-403193"
}
```



---

archive/issue_comments_460096.json:
```json
{
    "body": "Commit: **[`32708d4`](https://github.com/sagemath/sagetrac-mirror/commit/32708d4b75de2341bd9d809d40d60a2b46cf7027)**",
    "created_at": "2020-03-13T15:29:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29325#issuecomment-460096",
    "user": "https://github.com/kliem"
}
```

Commit: **[`32708d4`](https://github.com/sagemath/sagetrac-mirror/commit/32708d4b75de2341bd9d809d40d60a2b46cf7027)**



---

archive/issue_comments_460097.json:
```json
{
    "body": "Branch: **[public/29325](https://github.com/sagemath/sagetrac-mirror/tree/public/29325)**",
    "created_at": "2020-03-13T15:29:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29325#issuecomment-460097",
    "user": "https://github.com/kliem"
}
```

Branch: **[public/29325](https://github.com/sagemath/sagetrac-mirror/tree/public/29325)**



---

archive/issue_comments_460098.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nBatch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.",
    "created_at": "2020-04-14T19:41:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29325#issuecomment-460098",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2" align="right">comment:2</div>

Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.



---

archive/issue_events_403194.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29325#event-403194"
}
```



---

archive/issue_events_403195.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29325#event-403195"
}
```



---

archive/issue_comments_460099.json:
```json
{
    "body": "Changed commit from **[`32708d4`](https://github.com/sagemath/sagetrac-mirror/commit/32708d4b75de2341bd9d809d40d60a2b46cf7027)** to **[`3174e62`](https://github.com/sagemath/sagetrac-mirror/commit/3174e62c2d5b0a66eee1204303eb3d90191697bc)**",
    "created_at": "2020-04-24T05:53:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29325#issuecomment-460099",
    "user": "https://github.com/kliem"
}
```

Changed commit from **[`32708d4`](https://github.com/sagemath/sagetrac-mirror/commit/32708d4b75de2341bd9d809d40d60a2b46cf7027)** to **[`3174e62`](https://github.com/sagemath/sagetrac-mirror/commit/3174e62c2d5b0a66eee1204303eb3d90191697bc)**



---

archive/issue_comments_460100.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/24f2a4a851e5eeedc92673a269bca8ef9b769b20\"><code>24f2a4a</code></a></td><td><code>set up permutahedron with precomputed data</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3174e62c2d5b0a66eee1204303eb3d90191697bc\"><code>3174e62</code></a></td><td><code>fixing failing doctests due to reordering</code></td></tr></table>\n",
    "created_at": "2020-04-24T05:53:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29325#issuecomment-460100",
    "user": "https://github.com/kliem"
}
```

<div id="comment:3"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/24f2a4a851e5eeedc92673a269bca8ef9b769b20"><code>24f2a4a</code></a></td><td><code>set up permutahedron with precomputed data</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3174e62c2d5b0a66eee1204303eb3d90191697bc"><code>3174e62</code></a></td><td><code>fixing failing doctests due to reordering</code></td></tr></table>




---

archive/issue_comments_460101.json:
```json
{
    "body": "Changed branch from **[public/29325](https://github.com/sagemath/sagetrac-mirror/tree/public/29325)** to **[public/29325-reb2](https://github.com/sagemath/sagetrac-mirror/tree/public/29325-reb2)**",
    "created_at": "2020-04-24T05:53:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29325#issuecomment-460101",
    "user": "https://github.com/kliem"
}
```

Changed branch from **[public/29325](https://github.com/sagemath/sagetrac-mirror/tree/public/29325)** to **[public/29325-reb2](https://github.com/sagemath/sagetrac-mirror/tree/public/29325-reb2)**



---

archive/issue_events_403196.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2020-05-11T13:08:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29325#event-403196"
}
```



---

archive/issue_events_403197.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2020-05-11T13:08:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29325#event-403197"
}
```



---

archive/issue_comments_460102.json:
```json
{
    "body": "Reviewer: **Jean-Philippe Labb\u00e9**",
    "created_at": "2020-05-11T13:08:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29325#issuecomment-460102",
    "user": "https://github.com/jplab"
}
```

Reviewer: **Jean-Philippe Labbé**



---

archive/issue_comments_460103.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThese timings are interesting. Perhaps it would be good to add them to the documentation of the function? Since the backend `field` performs well but isn't the default, it would be good to give this information in the documentation.",
    "created_at": "2020-05-11T13:08:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29325#issuecomment-460103",
    "user": "https://github.com/jplab"
}
```

<div id="comment:4" align="right">comment:4</div>

These timings are interesting. Perhaps it would be good to add them to the documentation of the function? Since the backend `field` performs well but isn't the default, it would be good to give this information in the documentation.



---

archive/issue_comments_460104.json:
```json
{
    "body": "Changed branch from **[public/29325-reb2](https://github.com/sagemath/sagetrac-mirror/tree/public/29325-reb2)** to **[public/29325-reb3](https://github.com/sagemath/sagetrac-mirror/tree/public/29325-reb3)**",
    "created_at": "2020-05-11T14:00:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29325#issuecomment-460104",
    "user": "https://github.com/kliem"
}
```

Changed branch from **[public/29325-reb2](https://github.com/sagemath/sagetrac-mirror/tree/public/29325-reb2)** to **[public/29325-reb3](https://github.com/sagemath/sagetrac-mirror/tree/public/29325-reb3)**



---

archive/issue_comments_460105.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ddb39af5f7bc9d331ab1c903ffb3c097bb4023e8\"><code>ddb39af</code></a></td><td><code>set up permutahedron with precomputed data</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d2e7489483492829a2d4a37bd13b222dbda25d7\"><code>5d2e748</code></a></td><td><code>fixing failing doctests due to reordering</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dd259d7daea827b547a70459c0850e41e5c0c1d0\"><code>dd259d7</code></a></td><td><code>tuple -> generator</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/37f8c0d29581cc5568925c9b1f567ef4b3463c81\"><code>37f8c0d</code></a></td><td><code>documentated that backend field is fast</code></td></tr></table>\n",
    "created_at": "2020-05-11T14:00:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29325#issuecomment-460105",
    "user": "https://github.com/kliem"
}
```

<div id="comment:5"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ddb39af5f7bc9d331ab1c903ffb3c097bb4023e8"><code>ddb39af</code></a></td><td><code>set up permutahedron with precomputed data</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d2e7489483492829a2d4a37bd13b222dbda25d7"><code>5d2e748</code></a></td><td><code>fixing failing doctests due to reordering</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dd259d7daea827b547a70459c0850e41e5c0c1d0"><code>dd259d7</code></a></td><td><code>tuple -> generator</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/37f8c0d29581cc5568925c9b1f567ef4b3463c81"><code>37f8c0d</code></a></td><td><code>documentated that backend field is fast</code></td></tr></table>




---

archive/issue_events_403198.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-05-11T14:00:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29325#event-403198"
}
```



---

archive/issue_events_403199.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-05-11T14:00:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29325#event-403199"
}
```



---

archive/issue_comments_460106.json:
```json
{
    "body": "Changed commit from **[`3174e62`](https://github.com/sagemath/sagetrac-mirror/commit/3174e62c2d5b0a66eee1204303eb3d90191697bc)** to **[`37f8c0d`](https://github.com/sagemath/sagetrac-mirror/commit/37f8c0d29581cc5568925c9b1f567ef4b3463c81)**",
    "created_at": "2020-05-11T14:00:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29325#issuecomment-460106",
    "user": "https://github.com/kliem"
}
```

Changed commit from **[`3174e62`](https://github.com/sagemath/sagetrac-mirror/commit/3174e62c2d5b0a66eee1204303eb3d90191697bc)** to **[`37f8c0d`](https://github.com/sagemath/sagetrac-mirror/commit/37f8c0d29581cc5568925c9b1f567ef4b3463c81)**



---

archive/issue_comments_460107.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nFailing doctests, see patchbot:\n\n```\nsage -t --long src/doc/en/thematic_tutorials/geometry/tips.rst\n**********************************************************************\nFile \"src/doc/en/thematic_tutorials/geometry/tips.rst\", line 110, in doc.en.thematic_tutorials.geometry.tips\nFailed example:\n    print(P.Hrepresentation_str(style='<='))\nExpected:\n    -x0 - x1 - x2 == -6\n          x1 + x2 <=  5\n               x2 <=  3\n               x1 <=  3\n              -x1 <= -1\n         -x1 - x2 <= -3\n              -x2 <= -1\nGot:\n    -x0 - x1 - x2 == -6 \n         -x0 - x1 <= -3 \n          x0 + x1 <=  5 \n              -x1 <= -1 \n               x0 <=  3 \n              -x0 <= -1 \n               x1 <=  3 \n**********************************************************************\nFile \"src/doc/en/thematic_tutorials/geometry/tips.rst\", line 118, in doc.en.thematic_tutorials.geometry.tips\nFailed example:\n    print(P.Hrepresentation_str(style='positive'))\nExpected:\n    x0 + x1 + x2 == 6\n               5 >= x1 + x2\n               3 >= x2\n               3 >= x1\n              x1 >= 1\n         x1 + x2 >= 3\n              x2 >= 1\nGot:\n    x0 + x1 + x2 == 6      \n         x0 + x1 >= 3      \n               5 >= x0 + x1\n              x1 >= 1      \n               3 >= x0     \n              x0 >= 1      \n               3 >= x1     \n**********************************************************************\n```\n\n```\n----------------------------------------------------------------------\nsage -t --long src/sage/schemes/cyclic_covers/charpoly_frobenius.py  # 1 doctest failed\nsage -t --long src/sage/geometry/polyhedron/library.py  # Bad exit: 1\nsage -t --long src/doc/en/thematic_tutorials/geometry/tips.rst  # 2 doctests failed\n----------------------------------------------------------------------\n```",
    "created_at": "2020-05-12T11:44:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29325#issuecomment-460107",
    "user": "https://github.com/jplab"
}
```

<div id="comment:6" align="right">comment:6</div>

Failing doctests, see patchbot:

```
sage -t --long src/doc/en/thematic_tutorials/geometry/tips.rst
**********************************************************************
File "src/doc/en/thematic_tutorials/geometry/tips.rst", line 110, in doc.en.thematic_tutorials.geometry.tips
Failed example:
    print(P.Hrepresentation_str(style='<='))
Expected:
    -x0 - x1 - x2 == -6
          x1 + x2 <=  5
               x2 <=  3
               x1 <=  3
              -x1 <= -1
         -x1 - x2 <= -3
              -x2 <= -1
Got:
    -x0 - x1 - x2 == -6 
         -x0 - x1 <= -3 
          x0 + x1 <=  5 
              -x1 <= -1 
               x0 <=  3 
              -x0 <= -1 
               x1 <=  3 
**********************************************************************
File "src/doc/en/thematic_tutorials/geometry/tips.rst", line 118, in doc.en.thematic_tutorials.geometry.tips
Failed example:
    print(P.Hrepresentation_str(style='positive'))
Expected:
    x0 + x1 + x2 == 6
               5 >= x1 + x2
               3 >= x2
               3 >= x1
              x1 >= 1
         x1 + x2 >= 3
              x2 >= 1
Got:
    x0 + x1 + x2 == 6      
         x0 + x1 >= 3      
               5 >= x0 + x1
              x1 >= 1      
               3 >= x0     
              x0 >= 1      
               3 >= x1     
**********************************************************************
```

```
----------------------------------------------------------------------
sage -t --long src/sage/schemes/cyclic_covers/charpoly_frobenius.py  # 1 doctest failed
sage -t --long src/sage/geometry/polyhedron/library.py  # Bad exit: 1
sage -t --long src/doc/en/thematic_tutorials/geometry/tips.rst  # 2 doctests failed
----------------------------------------------------------------------
```



---

archive/issue_events_403200.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2020-05-12T11:44:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29325#event-403200"
}
```



---

archive/issue_events_403201.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2020-05-12T11:44:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29325#event-403201"
}
```



---

archive/issue_comments_460108.json:
```json
{
    "body": "Changed commit from **[`37f8c0d`](https://github.com/sagemath/sagetrac-mirror/commit/37f8c0d29581cc5568925c9b1f567ef4b3463c81)** to **[`29bb85b`](https://github.com/sagemath/sagetrac-mirror/commit/29bb85b913d6583327bef43bbfb8202fa71760b4)**",
    "created_at": "2020-05-12T12:33:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29325#issuecomment-460108",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`37f8c0d`](https://github.com/sagemath/sagetrac-mirror/commit/37f8c0d29581cc5568925c9b1f567ef4b3463c81)** to **[`29bb85b`](https://github.com/sagemath/sagetrac-mirror/commit/29bb85b913d6583327bef43bbfb8202fa71760b4)**



---

archive/issue_comments_460109.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/29bb85b913d6583327bef43bbfb8202fa71760b4\"><code>29bb85b</code></a></td><td><code>fix doctests</code></td></tr></table>\n",
    "created_at": "2020-05-12T12:33:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29325#issuecomment-460109",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/29bb85b913d6583327bef43bbfb8202fa71760b4"><code>29bb85b</code></a></td><td><code>fix doctests</code></td></tr></table>




---

archive/issue_comments_460110.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nAs for the bad exit it appears that memory consumption is highly unstable during doctesting.\nI can make it pass with 2400 MB and default is 3300 MB, so I would expect this to work anywhere, but I guess this is not the case. (And 2400 MB is much over what causes a bad exit for S\u00e9bastien Labb\u00e9).\n\nI guess I just mark it as not tested. The examples are more for documentation than for testing.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/29bb85b913d6583327bef43bbfb8202fa71760b4\"><code>29bb85b</code></a></td><td><code>fix doctests</code></td></tr></table>\n",
    "created_at": "2020-05-12T12:33:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29325#issuecomment-460110",
    "user": "https://github.com/kliem"
}
```

<div id="comment:8" align="right">comment:8</div>

As for the bad exit it appears that memory consumption is highly unstable during doctesting.
I can make it pass with 2400 MB and default is 3300 MB, so I would expect this to work anywhere, but I guess this is not the case. (And 2400 MB is much over what causes a bad exit for Sébastien Labbé).

I guess I just mark it as not tested. The examples are more for documentation than for testing.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/29bb85b913d6583327bef43bbfb8202fa71760b4"><code>29bb85b</code></a></td><td><code>fix doctests</code></td></tr></table>




---

archive/issue_events_403202.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-05-12T12:34:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29325#event-403202"
}
```



---

archive/issue_events_403203.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-05-12T12:34:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29325#event-403203"
}
```



---

archive/issue_comments_460111.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\n\"not tested\" seems like the right choice for this.",
    "created_at": "2020-07-04T19:31:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29325#issuecomment-460111",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:10" align="right">comment:10</div>

"not tested" seems like the right choice for this.



---

archive/issue_comments_460112.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nNeeds rebase",
    "created_at": "2020-08-11T17:22:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29325#issuecomment-460112",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:11" align="right">comment:11</div>

Needs rebase



---

archive/issue_events_403204.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-11T17:22:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29325#event-403204"
}
```



---

archive/issue_events_403205.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-11T17:22:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29325#event-403205"
}
```



---

archive/issue_comments_460113.json:
```json
{
    "body": "Changed commit from **[`29bb85b`](https://github.com/sagemath/sagetrac-mirror/commit/29bb85b913d6583327bef43bbfb8202fa71760b4)** to **[`577e736`](https://github.com/sagemath/sagetrac-mirror/commit/577e73606401e23f2677ddf553ecf9dfbebf3a4a)**",
    "created_at": "2020-08-11T22:17:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29325#issuecomment-460113",
    "user": "https://github.com/kliem"
}
```

Changed commit from **[`29bb85b`](https://github.com/sagemath/sagetrac-mirror/commit/29bb85b913d6583327bef43bbfb8202fa71760b4)** to **[`577e736`](https://github.com/sagemath/sagetrac-mirror/commit/577e73606401e23f2677ddf553ecf9dfbebf3a4a)**



---

archive/issue_events_403206.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-08-11T22:17:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29325#event-403206"
}
```



---

archive/issue_events_403207.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-08-11T22:17:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29325#event-403207"
}
```



---

archive/issue_comments_460114.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/56d95ebb53978e2eb2b06ef1f6c265a0a74c121e\"><code>56d95eb</code></a></td><td><code>set up permutahedron with precomputed data</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2325e66b6c653c3eb32e9d958918bf1cd8bffaf1\"><code>2325e66</code></a></td><td><code>fixing failing doctests due to reordering</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa1afe86bd8c0669635439c1773f6a28ab907def\"><code>aa1afe8</code></a></td><td><code>tuple -> generator</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b28e9802dc55a004cc5b7ebb127273f3d856a3ad\"><code>b28e980</code></a></td><td><code>documentated that backend field is fast</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1bfcf5d8cf83d9ca62b5dbced66666fb5f07062c\"><code>1bfcf5d</code></a></td><td><code>fix doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/577e73606401e23f2677ddf553ecf9dfbebf3a4a\"><code>577e736</code></a></td><td><code>use test suite to check precomputed data</code></td></tr></table>\n",
    "created_at": "2020-08-11T22:17:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29325#issuecomment-460114",
    "user": "https://github.com/kliem"
}
```

<div id="comment:13"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/56d95ebb53978e2eb2b06ef1f6c265a0a74c121e"><code>56d95eb</code></a></td><td><code>set up permutahedron with precomputed data</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2325e66b6c653c3eb32e9d958918bf1cd8bffaf1"><code>2325e66</code></a></td><td><code>fixing failing doctests due to reordering</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa1afe86bd8c0669635439c1773f6a28ab907def"><code>aa1afe8</code></a></td><td><code>tuple -> generator</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b28e9802dc55a004cc5b7ebb127273f3d856a3ad"><code>b28e980</code></a></td><td><code>documentated that backend field is fast</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1bfcf5d8cf83d9ca62b5dbced66666fb5f07062c"><code>1bfcf5d</code></a></td><td><code>fix doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/577e73606401e23f2677ddf553ecf9dfbebf3a4a"><code>577e736</code></a></td><td><code>use test suite to check precomputed data</code></td></tr></table>




---

archive/issue_comments_460115.json:
```json
{
    "body": "Changed branch from **[public/29325-reb3](https://github.com/sagemath/sagetrac-mirror/tree/public/29325-reb3)** to **[public/29325-reb4](https://github.com/sagemath/sagetrac-mirror/tree/public/29325-reb4)**",
    "created_at": "2020-08-11T22:17:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29325#issuecomment-460115",
    "user": "https://github.com/kliem"
}
```

Changed branch from **[public/29325-reb3](https://github.com/sagemath/sagetrac-mirror/tree/public/29325-reb3)** to **[public/29325-reb4](https://github.com/sagemath/sagetrac-mirror/tree/public/29325-reb4)**



---

archive/issue_comments_460116.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nthese doctests that seem to depend on an unspecified order of enumeration... is there not a better way of testing this, for example by sorting...?",
    "created_at": "2020-08-12T05:15:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29325#issuecomment-460116",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:14" align="right">comment:14</div>

these doctests that seem to depend on an unspecified order of enumeration... is there not a better way of testing this, for example by sorting...?



---

archive/issue_comments_460117.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThere is only a few doctests that can be fixed by sorting. The face iterator really behaves different with different order and the indices are all shuffled.",
    "created_at": "2020-08-12T06:07:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29325#issuecomment-460117",
    "user": "https://github.com/kliem"
}
```

<div id="comment:15" align="right">comment:15</div>

There is only a few doctests that can be fixed by sorting. The face iterator really behaves different with different order and the indices are all shuffled.



---

archive/issue_comments_460118.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nAnd the first ones cannot be fixed by this either. Looks like `ppl` picks a different representative for the inequalities (that are modulo an equation).",
    "created_at": "2020-08-12T06:09:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29325#issuecomment-460118",
    "user": "https://github.com/kliem"
}
```

<div id="comment:16" align="right">comment:16</div>

And the first ones cannot be fixed by this either. Looks like `ppl` picks a different representative for the inequalities (that are modulo an equation).



---

archive/issue_events_403208.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-12T22:53:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29325#event-403208"
}
```



---

archive/issue_events_403209.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-12T22:53:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29325#event-403209"
}
```



---

archive/issue_comments_460119.json:
```json
{
    "body": "Changed reviewer from **Jean-Philippe Labb\u00e9** to **Jean-Philippe Labb\u00e9, Matthias Koeppe**",
    "created_at": "2020-08-12T22:53:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29325#issuecomment-460119",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **Jean-Philippe Labbé** to **Jean-Philippe Labbé, Matthias Koeppe**



---

archive/issue_comments_460120.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nOk then",
    "created_at": "2020-08-12T22:53:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29325#issuecomment-460120",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:18" align="right">comment:18</div>

Ok then



---

archive/issue_comments_460121.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nThank you.",
    "created_at": "2020-08-13T05:23:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29325#issuecomment-460121",
    "user": "https://github.com/kliem"
}
```

<div id="comment:19" align="right">comment:19</div>

Thank you.



---

archive/issue_events_403210.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-15T09:41:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29325#event-403210"
}
```



---

archive/issue_events_403211.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "b4a8c5745bf6e3133c1b95cdb54391f25a90857b",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-08-15T09:41:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29325#event-403211"
}
```



---

archive/issue_comments_460122.json:
```json
{
    "body": "Changed branch from **[public/29325-reb4](https://github.com/sagemath/sagetrac-mirror/tree/public/29325-reb4)** to **[`577e736`](https://github.com/sagemath/sagetrac-mirror/commit/577e73606401e23f2677ddf553ecf9dfbebf3a4a)**",
    "created_at": "2020-08-15T09:41:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29325#issuecomment-460122",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/29325-reb4](https://github.com/sagemath/sagetrac-mirror/tree/public/29325-reb4)** to **[`577e736`](https://github.com/sagemath/sagetrac-mirror/commit/577e73606401e23f2677ddf553ecf9dfbebf3a4a)**
