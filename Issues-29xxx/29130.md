# Issue 29130: Add nix package information, extend dockerfile generator to nix

archive/issues_028893.json:
```json
{
    "body": "This extends #29053, where it is done for debian/fedora/conda/arch.\n\nhttps://hub.docker.com/r/nixos/nix/\n\nhttps://wiki.sagemath.org/Distribution#Nix\n\nTo test: \n\n```\n  tox -e docker-nixos-minimal\n  tox -e docker-nixos-standard\n```\n\n\n\nCC:  @timokau @dimpase @kliem\n\nBranch/Commit: d4b2af2e29d691ec4af6828c9b2fd6a5516ed063\n\nReviewer: Jonathan Kliem\n\nAuthor: Matthias Koeppe\n\nDependencies: #30044\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29130\n\n",
    "closed_at": "2020-08-30T08:39:20Z",
    "created_at": "2020-01-31T23:45:36Z",
    "labels": [
        "component: build"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Add nix package information, extend dockerfile generator to nix",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29130",
    "user": "https://github.com/mkoeppe"
}
```
This extends #29053, where it is done for debian/fedora/conda/arch.

https://hub.docker.com/r/nixos/nix/

https://wiki.sagemath.org/Distribution#Nix

To test: 

```
  tox -e docker-nixos-minimal
  tox -e docker-nixos-standard
```



CC:  @timokau @dimpase @kliem

Branch/Commit: d4b2af2e29d691ec4af6828c9b2fd6a5516ed063

Reviewer: Jonathan Kliem

Author: Matthias Koeppe

Dependencies: #30044

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29130





---

archive/issue_comments_560783.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n This extends #29053, where it is done for debian/fedora/conda/arch.\n+\n+https://hub.docker.com/r/nixos/nix/\n``````\n",
    "created_at": "2020-02-01T01:08:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560783",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 This extends #29053, where it is done for debian/fedora/conda/arch.
+
+https://hub.docker.com/r/nixos/nix/
``````




---

archive/issue_comments_560784.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n This extends #29053, where it is done for debian/fedora/conda/arch.\n \n https://hub.docker.com/r/nixos/nix/\n+\n+https://wiki.sagemath.org/Distribution#Nix\n``````\n",
    "created_at": "2020-02-01T01:11:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560784",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 This extends #29053, where it is done for debian/fedora/conda/arch.
 
 https://hub.docker.com/r/nixos/nix/
+
+https://wiki.sagemath.org/Distribution#Nix
``````




---

archive/issue_comments_560785.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/add_nix_package_information__extend_dockerfile_generator_to_nix\"",
    "created_at": "2020-03-10T02:45:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560785",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/add_nix_package_information__extend_dockerfile_generator_to_nix"



---

archive/issue_comments_560786.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2020-03-10T02:53:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560786",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_560787.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-03-10T02:53:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560787",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_560788.json:
```json
{
    "body": "Changing commit from \"\" to \"a3d21cea9412afa40a5b3a2fc059032285f79c1b\"",
    "created_at": "2020-03-10T02:53:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560788",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "a3d21cea9412afa40a5b3a2fc059032285f79c1b"



---

archive/issue_comments_560789.json:
```json
{
    "body": "<a id='comment:4'></a>\nThis defines `docker-nixos-minimal`.\n\nFor `docker-nixos-standard`, need to add many package equivalences to `build/pkgs/*/distros/nix.txt`\n\n---\nNew commits:\n|                                                                                                                                          |                                                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------|\n|[a3d21ce](https://github.com/sagemath/sagetrac-mirror/commit/a3d21cea9412afa40a5b3a2fc059032285f79c1b)|`Add Dockerfile generator, basic package information for nix`|",
    "created_at": "2020-03-10T02:53:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560789",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
This defines `docker-nixos-minimal`.

For `docker-nixos-standard`, need to add many package equivalences to `build/pkgs/*/distros/nix.txt`

---
New commits:
|                                                                                                                                          |                                                             |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------|
|[a3d21ce](https://github.com/sagemath/sagetrac-mirror/commit/a3d21cea9412afa40a5b3a2fc059032285f79c1b)|`Add Dockerfile generator, basic package information for nix`|



---

archive/issue_comments_560790.json:
```json
{
    "body": "<a id='comment:5'></a>\nRegarding the package equivalents: All packages sage needs should be listed at the start of one of those files:\n\n- https://github.com/NixOS/nixpkgs/blob/master/pkgs/applications/science/math/sage/env-locations.nix\n- https://github.com/NixOS/nixpkgs/blob/master/pkgs/applications/science/math/sage/sagedoc.nix\n- https://github.com/NixOS/nixpkgs/blob/master/pkgs/applications/science/math/sage/sagelib.nix\n- https://github.com/NixOS/nixpkgs/blob/master/pkgs/applications/science/math/sage/sage-env.nix\n\nOne caveat is that if you want to use system python packages, you either need to add them to PYTHONPATH manually or install them as a single python environment. That means instead of installing\n`python3`, `numpy`, `scipy`\nseparately, you'd install the \"package\" (or environment) `python3.withPackages (ps: with ps; [numpy scipy])`.\n\nI'm happy to help by explaining things, though I won't take the lead on this for now since sage-the-distribution isn't high priority for me right now (I have my hands full keeping the nix package running).",
    "created_at": "2020-03-10T13:03:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560790",
    "user": "https://github.com/timokau"
}
```

<a id='comment:5'></a>
Regarding the package equivalents: All packages sage needs should be listed at the start of one of those files:

- https://github.com/NixOS/nixpkgs/blob/master/pkgs/applications/science/math/sage/env-locations.nix
- https://github.com/NixOS/nixpkgs/blob/master/pkgs/applications/science/math/sage/sagedoc.nix
- https://github.com/NixOS/nixpkgs/blob/master/pkgs/applications/science/math/sage/sagelib.nix
- https://github.com/NixOS/nixpkgs/blob/master/pkgs/applications/science/math/sage/sage-env.nix

One caveat is that if you want to use system python packages, you either need to add them to PYTHONPATH manually or install them as a single python environment. That means instead of installing
`python3`, `numpy`, `scipy`
separately, you'd install the "package" (or environment) `python3.withPackages (ps: with ps; [numpy scipy])`.

I'm happy to help by explaining things, though I won't take the lead on this for now since sage-the-distribution isn't high priority for me right now (I have my hands full keeping the nix package running).



---

archive/issue_comments_560791.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [gh-timokau](#comment%3A5):\n> Regarding the package equivalents: All packages sage needs should be listed at the start of one of those files:\n> \n> - https://github.com/NixOS/nixpkgs/blob/master/pkgs/applications/science/math/sage/env-locations.nix\n> - https://github.com/NixOS/nixpkgs/blob/master/pkgs/applications/science/math/sage/sagedoc.nix\n> - https://github.com/NixOS/nixpkgs/blob/master/pkgs/applications/science/math/sage/sagelib.nix\n> - https://github.com/NixOS/nixpkgs/blob/master/pkgs/applications/science/math/sage/sage-env.nix\n\n\nThanks.\n\n> One caveat is that if you want to use system python packages, ...\n\n\nFor now, we are not taking care of any Python packages.",
    "created_at": "2020-03-17T03:47:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560791",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
Replying to [gh-timokau](#comment%3A5):
> Regarding the package equivalents: All packages sage needs should be listed at the start of one of those files:
> 
> - https://github.com/NixOS/nixpkgs/blob/master/pkgs/applications/science/math/sage/env-locations.nix
> - https://github.com/NixOS/nixpkgs/blob/master/pkgs/applications/science/math/sage/sagedoc.nix
> - https://github.com/NixOS/nixpkgs/blob/master/pkgs/applications/science/math/sage/sagelib.nix
> - https://github.com/NixOS/nixpkgs/blob/master/pkgs/applications/science/math/sage/sage-env.nix


Thanks.

> One caveat is that if you want to use system python packages, ...


For now, we are not taking care of any Python packages.



---

archive/issue_comments_560792.json:
```json
{
    "body": "<a id='comment:7'></a>\npushing these forward to 9.2",
    "created_at": "2020-04-14T06:38:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560792",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
pushing these forward to 9.2



---

archive/issue_events_091299.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T06:38:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29130#event-91299"
}
```



---

archive/issue_comments_560793.json:
```json
{
    "body": "<a id='comment:8'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------|\n|[b88ec28](https://github.com/sagemath/sagetrac-mirror/commit/b88ec280cdc0a5cc4968a837819ac7601937309c)|`Add Dockerfile generator, basic package information for nix`|",
    "created_at": "2020-06-15T20:57:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560793",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------|
|[b88ec28](https://github.com/sagemath/sagetrac-mirror/commit/b88ec280cdc0a5cc4968a837819ac7601937309c)|`Add Dockerfile generator, basic package information for nix`|



---

archive/issue_comments_560794.json:
```json
{
    "body": "Changing commit from \"a3d21cea9412afa40a5b3a2fc059032285f79c1b\" to \"b88ec280cdc0a5cc4968a837819ac7601937309c\"",
    "created_at": "2020-06-15T20:57:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560794",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a3d21cea9412afa40a5b3a2fc059032285f79c1b" to "b88ec280cdc0a5cc4968a837819ac7601937309c"



---

archive/issue_comments_560795.json:
```json
{
    "body": "<a id='comment:9'></a>\nRebased on 9.2.beta1",
    "created_at": "2020-06-15T20:58:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560795",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
Rebased on 9.2.beta1



---

archive/issue_comments_560796.json:
```json
{
    "body": "<a id='comment:10'></a>\nStarting points for people who want to help with this:\n\n- \u200bhttps://doc.sagemath.org/html/en/developer/portability_testing.html\n- \u200bhttps://researchseminars.org/talk/SageDays109/7/",
    "created_at": "2020-06-15T20:59:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560796",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>
Starting points for people who want to help with this:

- ​https://doc.sagemath.org/html/en/developer/portability_testing.html
- ​https://researchseminars.org/talk/SageDays109/7/



---

archive/issue_comments_560797.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-07-02T22:31:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560797",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_560798.json:
```json
{
    "body": "Changing commit from \"b88ec280cdc0a5cc4968a837819ac7601937309c\" to \"cf4ff83aa12ebf411ba0c3f44b68a0be242080a0\"",
    "created_at": "2020-08-11T17:56:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560798",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b88ec280cdc0a5cc4968a837819ac7601937309c" to "cf4ff83aa12ebf411ba0c3f44b68a0be242080a0"



---

archive/issue_comments_560799.json:
```json
{
    "body": "<a id='comment:12'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n|                                                                                                                                           |                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------|\n|[49bdc21](https://github.com/sagemath/sagetrac-mirror/commit/49bdc21c067cdcbc78995c0356aa6dd9090a6752)|`tox.ini: Add voidlinux`|\n|[e01c37d](https://github.com/sagemath/sagetrac-mirror/commit/e01c37dae7968358fbdd1e51c09ce77cd4a6f023)|`build/pkgs/void-bootstrap.txt: New`|\n|[0faf817](https://github.com/sagemath/sagetrac-mirror/commit/0faf817d3cff061ab08b46916f4ec654ede2ef80)|`build/bin/write-dockerfile.sh [voidlinux]: Fix typo`|\n|[bc5c2db](https://github.com/sagemath/sagetrac-mirror/commit/bc5c2dbd8e979b6780e13e1a246aefdc6fed8dfe)|`Merge branch 't/30064/fix_tox_docker_builds_broken_by__29884' into t/30044/tox_ini__test_on_voidlinux`|\n|[8043c9c](https://github.com/sagemath/sagetrac-mirror/commit/8043c9c4adc2d2848d0ef585f88a0d537fc13793)|`build/pkgs/void-bootstrap.txt: Add gettext-devel`|\n|[f2fe15b](https://github.com/sagemath/sagetrac-mirror/commit/f2fe15b984b97bcfcebd08da842d3c48c3e899f0)|`Merge tag '9.2.beta5' into t/30044/tox_ini__test_on_voidlinux`|\n|[83c240e](https://github.com/sagemath/sagetrac-mirror/commit/83c240e58cb5315be4349fbcafffb7f8cc8c034e)|`Add more voidlinux packages`|\n|[9f4a232](https://github.com/sagemath/sagetrac-mirror/commit/9f4a232aee35913b1134063171a64dc9914c0f95)|`Add voidlinux package for giac`|\n|[d43730c](https://github.com/sagemath/sagetrac-mirror/commit/d43730cdbe9bb09b1045ba16daad841f83419642)|`remove glib2 (typo?)`|\n|[cf4ff83](https://github.com/sagemath/sagetrac-mirror/commit/cf4ff83aa12ebf411ba0c3f44b68a0be242080a0)|`Merge branch 't/30044/tox_ini__test_on_voidlinux' into t/29130/add_nix_package_information__extend_dockerfile_generator_to_nix`|",
    "created_at": "2020-08-11T17:56:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560799",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
|                                                                                                                                           |                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------|
|[49bdc21](https://github.com/sagemath/sagetrac-mirror/commit/49bdc21c067cdcbc78995c0356aa6dd9090a6752)|`tox.ini: Add voidlinux`|
|[e01c37d](https://github.com/sagemath/sagetrac-mirror/commit/e01c37dae7968358fbdd1e51c09ce77cd4a6f023)|`build/pkgs/void-bootstrap.txt: New`|
|[0faf817](https://github.com/sagemath/sagetrac-mirror/commit/0faf817d3cff061ab08b46916f4ec654ede2ef80)|`build/bin/write-dockerfile.sh [voidlinux]: Fix typo`|
|[bc5c2db](https://github.com/sagemath/sagetrac-mirror/commit/bc5c2dbd8e979b6780e13e1a246aefdc6fed8dfe)|`Merge branch 't/30064/fix_tox_docker_builds_broken_by__29884' into t/30044/tox_ini__test_on_voidlinux`|
|[8043c9c](https://github.com/sagemath/sagetrac-mirror/commit/8043c9c4adc2d2848d0ef585f88a0d537fc13793)|`build/pkgs/void-bootstrap.txt: Add gettext-devel`|
|[f2fe15b](https://github.com/sagemath/sagetrac-mirror/commit/f2fe15b984b97bcfcebd08da842d3c48c3e899f0)|`Merge tag '9.2.beta5' into t/30044/tox_ini__test_on_voidlinux`|
|[83c240e](https://github.com/sagemath/sagetrac-mirror/commit/83c240e58cb5315be4349fbcafffb7f8cc8c034e)|`Add more voidlinux packages`|
|[9f4a232](https://github.com/sagemath/sagetrac-mirror/commit/9f4a232aee35913b1134063171a64dc9914c0f95)|`Add voidlinux package for giac`|
|[d43730c](https://github.com/sagemath/sagetrac-mirror/commit/d43730cdbe9bb09b1045ba16daad841f83419642)|`remove glib2 (typo?)`|
|[cf4ff83](https://github.com/sagemath/sagetrac-mirror/commit/cf4ff83aa12ebf411ba0c3f44b68a0be242080a0)|`Merge branch 't/30044/tox_ini__test_on_voidlinux' into t/29130/add_nix_package_information__extend_dockerfile_generator_to_nix`|



---

archive/issue_comments_560800.json:
```json
{
    "body": "<a id='comment:13'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n|[bfb52be](https://github.com/sagemath/sagetrac-mirror/commit/bfb52be69eb3fef071f4e018cb6f9b2ce87727cb)|`build/bin/write-dockerfile.sh [nix]: Fixup`|",
    "created_at": "2020-08-11T18:43:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560800",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
|[bfb52be](https://github.com/sagemath/sagetrac-mirror/commit/bfb52be69eb3fef071f4e018cb6f9b2ce87727cb)|`build/bin/write-dockerfile.sh [nix]: Fixup`|



---

archive/issue_comments_560801.json:
```json
{
    "body": "Changing commit from \"cf4ff83aa12ebf411ba0c3f44b68a0be242080a0\" to \"bfb52be69eb3fef071f4e018cb6f9b2ce87727cb\"",
    "created_at": "2020-08-11T18:43:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560801",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "cf4ff83aa12ebf411ba0c3f44b68a0be242080a0" to "bfb52be69eb3fef071f4e018cb6f9b2ce87727cb"



---

archive/issue_comments_560802.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#30044\"",
    "created_at": "2020-08-11T18:44:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560802",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#30044"



---

archive/issue_comments_560803.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,3 +3,7 @@\n https://hub.docker.com/r/nixos/nix/\n \n https://wiki.sagemath.org/Distribution#Nix\n+\n+To test: `tox -e docker-nixos-standard`\n+\n+\n``````\n",
    "created_at": "2020-08-11T18:44:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560803",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,3 +3,7 @@
 https://hub.docker.com/r/nixos/nix/
 
 https://wiki.sagemath.org/Distribution#Nix
+
+To test: `tox -e docker-nixos-standard`
+
+
``````




---

archive/issue_comments_560804.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,6 +4,11 @@\n \n https://wiki.sagemath.org/Distribution#Nix\n \n-To test: `tox -e docker-nixos-standard`\n+To test: \n+\n+```\n+  tox -e docker-nixos-minimal\n+  tox -e docker-nixos-standard\n+```\n \n \n``````\n",
    "created_at": "2020-08-11T18:49:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560804",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,6 +4,11 @@
 
 https://wiki.sagemath.org/Distribution#Nix
 
-To test: `tox -e docker-nixos-standard`
+To test: 
+
+```
+  tox -e docker-nixos-minimal
+  tox -e docker-nixos-standard
+```
 
 
``````




---

archive/issue_comments_560805.json:
```json
{
    "body": "<a id='comment:16'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|\n|[15cd368](https://github.com/sagemath/sagetrac-mirror/commit/15cd368cf600d05fc0a98107f7efcca89f1ff127)|`build/pkgs/*/distros/nix.txt: Add from sagelib.nix`|",
    "created_at": "2020-08-11T18:56:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560805",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|
|[15cd368](https://github.com/sagemath/sagetrac-mirror/commit/15cd368cf600d05fc0a98107f7efcca89f1ff127)|`build/pkgs/*/distros/nix.txt: Add from sagelib.nix`|



---

archive/issue_comments_560806.json:
```json
{
    "body": "Changing commit from \"bfb52be69eb3fef071f4e018cb6f9b2ce87727cb\" to \"15cd368cf600d05fc0a98107f7efcca89f1ff127\"",
    "created_at": "2020-08-11T18:56:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560806",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "bfb52be69eb3fef071f4e018cb6f9b2ce87727cb" to "15cd368cf600d05fc0a98107f7efcca89f1ff127"



---

archive/issue_comments_560807.json:
```json
{
    "body": "Changing commit from \"15cd368cf600d05fc0a98107f7efcca89f1ff127\" to \"7c9bf8203abf1e9f01d6371934cb5761a206b5fd\"",
    "created_at": "2020-08-11T19:02:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560807",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "15cd368cf600d05fc0a98107f7efcca89f1ff127" to "7c9bf8203abf1e9f01d6371934cb5761a206b5fd"



---

archive/issue_comments_560808.json:
```json
{
    "body": "<a id='comment:17'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------|\n|[7c9bf82](https://github.com/sagemath/sagetrac-mirror/commit/7c9bf8203abf1e9f01d6371934cb5761a206b5fd)|`build/pkgs/*/distros/nix.txt: Add from sage-env.nix`|",
    "created_at": "2020-08-11T19:02:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560808",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------|
|[7c9bf82](https://github.com/sagemath/sagetrac-mirror/commit/7c9bf8203abf1e9f01d6371934cb5761a206b5fd)|`build/pkgs/*/distros/nix.txt: Add from sage-env.nix`|



---

archive/issue_comments_560809.json:
```json
{
    "body": "Changing commit from \"7c9bf8203abf1e9f01d6371934cb5761a206b5fd\" to \"0a639c4a399c4e58777d9f51e5e06fbd04b0e937\"",
    "created_at": "2020-08-11T19:50:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560809",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7c9bf8203abf1e9f01d6371934cb5761a206b5fd" to "0a639c4a399c4e58777d9f51e5e06fbd04b0e937"



---

archive/issue_comments_560810.json:
```json
{
    "body": "<a id='comment:18'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------|\n|[0a639c4](https://github.com/sagemath/sagetrac-mirror/commit/0a639c4a399c4e58777d9f51e5e06fbd04b0e937)|`build/pkgs/r/distros/nix.txt: rWrapper does not exist, use R`|",
    "created_at": "2020-08-11T19:50:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560810",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------|
|[0a639c4](https://github.com/sagemath/sagetrac-mirror/commit/0a639c4a399c4e58777d9f51e5e06fbd04b0e937)|`build/pkgs/r/distros/nix.txt: rWrapper does not exist, use R`|



---

archive/issue_comments_560811.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-08-11T19:51:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560811",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_560812.json:
```json
{
    "body": "<a id='comment:20'></a>\nLet's get this in please",
    "created_at": "2020-08-24T17:10:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560812",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'></a>
Let's get this in please



---

archive/issue_comments_560813.json:
```json
{
    "body": "<a id='comment:21'></a>\nI'm running a few tests here: https://github.com/kliem/sage/pull/24/checks",
    "created_at": "2020-08-24T20:31:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560813",
    "user": "https://github.com/kliem"
}
```

<a id='comment:21'></a>
I'm running a few tests here: https://github.com/kliem/sage/pull/24/checks



---

archive/issue_comments_560814.json:
```json
{
    "body": "<a id='comment:22'></a>\npython3 isn't picked up, which isn't very surprising by the above comment. I guess this can be done in a future ticket.\n\nIt is not recognized that gcc contains a fortran compiler. But that is maybe also a future ticket.\n\n`libgd` fails to install, which is somewhat unfortunate as we could simply add the package `freetype` to the system, couldn't we?",
    "created_at": "2020-08-25T05:06:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560814",
    "user": "https://github.com/kliem"
}
```

<a id='comment:22'></a>
python3 isn't picked up, which isn't very surprising by the above comment. I guess this can be done in a future ticket.

It is not recognized that gcc contains a fortran compiler. But that is maybe also a future ticket.

`libgd` fails to install, which is somewhat unfortunate as we could simply add the package `freetype` to the system, couldn't we?



---

archive/issue_comments_560815.json:
```json
{
    "body": "<a id='comment:23'></a>\nThis is pretty much good to go. I think only the last point should be handled here, shouldn't it?",
    "created_at": "2020-08-25T18:57:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560815",
    "user": "https://github.com/kliem"
}
```

<a id='comment:23'></a>
This is pretty much good to go. I think only the last point should be handled here, shouldn't it?



---

archive/issue_comments_560816.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Jonathan Kliem\"",
    "created_at": "2020-08-26T06:28:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560816",
    "user": "https://github.com/kliem"
}
```

Changing reviewer from "" to "Jonathan Kliem"



---

archive/issue_comments_560817.json:
```json
{
    "body": "Changing commit from \"0a639c4a399c4e58777d9f51e5e06fbd04b0e937\" to \"d4b2af2e29d691ec4af6828c9b2fd6a5516ed063\"",
    "created_at": "2020-08-26T06:28:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560817",
    "user": "https://github.com/kliem"
}
```

Changing commit from "0a639c4a399c4e58777d9f51e5e06fbd04b0e937" to "d4b2af2e29d691ec4af6828c9b2fd6a5516ed063"



---

archive/issue_comments_560818.json:
```json
{
    "body": "<a id='comment:24'></a>\nI added freetype. If you agree, this is a positive review.\n\n---\nNew commits:\n|                                                                                                                                          |                                                                                                                                          |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------|\n|[b10493c](https://github.com/sagemath/sagetrac-mirror/commit/b10493cc619dde1e2d589a94e512a857a47eb90e)|`Merge branch 'u/mkoeppe/add_nix_package_information__extend_dockerfile_generator_to_nix' of git://trac.sagemath.org/sage into test_29130`|\n|[d4b2af2](https://github.com/sagemath/sagetrac-mirror/commit/d4b2af2e29d691ec4af6828c9b2fd6a5516ed063)|`reviewer commit`|",
    "created_at": "2020-08-26T06:28:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560818",
    "user": "https://github.com/kliem"
}
```

<a id='comment:24'></a>
I added freetype. If you agree, this is a positive review.

---
New commits:
|                                                                                                                                          |                                                                                                                                          |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------|
|[b10493c](https://github.com/sagemath/sagetrac-mirror/commit/b10493cc619dde1e2d589a94e512a857a47eb90e)|`Merge branch 'u/mkoeppe/add_nix_package_information__extend_dockerfile_generator_to_nix' of git://trac.sagemath.org/sage into test_29130`|
|[d4b2af2](https://github.com/sagemath/sagetrac-mirror/commit/d4b2af2e29d691ec4af6828c9b2fd6a5516ed063)|`reviewer commit`|



---

archive/issue_comments_560819.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/add_nix_package_information__extend_dockerfile_generator_to_nix\" to \"u/gh-kliem/add_nix_package_information__extend_dockerfile_generator_to_nix\"",
    "created_at": "2020-08-26T06:28:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560819",
    "user": "https://github.com/kliem"
}
```

Changing branch from "u/mkoeppe/add_nix_package_information__extend_dockerfile_generator_to_nix" to "u/gh-kliem/add_nix_package_information__extend_dockerfile_generator_to_nix"



---

archive/issue_comments_560820.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-08-26T15:25:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560820",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_560821.json:
```json
{
    "body": "<a id='comment:25'></a>\nThank you!",
    "created_at": "2020-08-26T15:25:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560821",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'></a>
Thank you!



---

archive/issue_comments_560822.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-08-30T08:39:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560822",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_091300.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-30T08:39:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29130#event-91300"
}
```



---

archive/issue_comments_560823.json:
```json
{
    "body": "Changing branch from \"u/gh-kliem/add_nix_package_information__extend_dockerfile_generator_to_nix\" to \"d4b2af2e29d691ec4af6828c9b2fd6a5516ed063\"",
    "created_at": "2020-08-30T08:39:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29130#issuecomment-560823",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/gh-kliem/add_nix_package_information__extend_dockerfile_generator_to_nix" to "d4b2af2e29d691ec4af6828c9b2fd6a5516ed063"
