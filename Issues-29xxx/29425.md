# Issue 29425: Upgrade NumPy to 1.18.5, scipy to 1.4.1, add pybind11 package

archive/issues_029188.json:
```json
{
    "body": "Follow-up from the update of numpy to 1.16.6 (#29429):\n\nWe update \n- NumPy to the latest release, 1.18.5\n- scipy to latest release, 1.4.1.\n(latest as of 2020-06-05; both versions (and also the upcoming numpy 1.19) support python >= 3.6)\n\n\n\nDepends on #29480\n\n**CC:**  @isuruf @dimpase @jdemeyer @embray @slel @vbraun\n\n**Branch:** [u/mkoeppe/trac/local_conda_forge_macos_standard__build_error_with_numpy](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/trac/local_conda_forge_macos_standard__build_error_with_numpy)\n\n**Commit:** [56a6fe17708622cf6066629e7a5eeb2baead5508](https://github.com/sagemath/sagetrac-mirror/commit/56a6fe17708622cf6066629e7a5eeb2baead5508)\n\n**Reviewer:** Isuru Fernando, Dima Pasechnik\n\n**Author:** Matthias Koeppe\n\nIssue created by migration from https://trac.sagemath.org/ticket/29425\n\n",
    "closed_at": "2020-06-20T06:24:41Z",
    "created_at": "2020-03-29T14:47:04Z",
    "labels": [
        "component: porting",
        "bug",
        "duplicate"
    ],
    "title": "Upgrade NumPy to 1.18.5, scipy to 1.4.1, add pybind11 package",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/29425",
    "user": "https://github.com/mkoeppe"
}
```
Follow-up from the update of numpy to 1.16.6 (#29429):

We update 
- NumPy to the latest release, 1.18.5
- scipy to latest release, 1.4.1.
(latest as of 2020-06-05; both versions (and also the upcoming numpy 1.19) support python >= 3.6)



Depends on #29480

**CC:**  @isuruf @dimpase @jdemeyer @embray @slel @vbraun

**Branch:** [u/mkoeppe/trac/local_conda_forge_macos_standard__build_error_with_numpy](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/trac/local_conda_forge_macos_standard__build_error_with_numpy)

**Commit:** [56a6fe17708622cf6066629e7a5eeb2baead5508](https://github.com/sagemath/sagetrac-mirror/commit/56a6fe17708622cf6066629e7a5eeb2baead5508)

**Reviewer:** Isuru Fernando, Dima Pasechnik

**Author:** Matthias Koeppe

Issue created by migration from https://trac.sagemath.org/ticket/29425





---

archive/issue_comments_465100.json:
```json
{
    "body": "<a id='comment:1'></a>\nCan you try setting `NPY_DISTUTILS_APPEND_FLAGS=1` in the numpy build script?",
    "created_at": "2020-03-29T20:02:55Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465100",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:1'></a>
Can you try setting `NPY_DISTUTILS_APPEND_FLAGS=1` in the numpy build script?



---

archive/issue_comments_465101.json:
```json
{
    "body": "<a id='comment:2'></a>\nThis didn't make a difference",
    "created_at": "2020-03-29T22:30:54Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465101",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
This didn't make a difference



---

archive/issue_comments_465102.json:
```json
{
    "body": "<a id='comment:3'></a>\nUpgrading numpy to 1.18.2 fixes it; but this will require a Cython upgrade too",
    "created_at": "2020-03-30T00:29:48Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465102",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>
Upgrading numpy to 1.18.2 fixes it; but this will require a Cython upgrade too



---

archive/issue_comments_465103.json:
```json
{
    "body": "**Branch:** [u/mkoeppe/local_conda_forge_macos_standard__build_error_with_numpy](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/local_conda_forge_macos_standard__build_error_with_numpy)",
    "created_at": "2020-03-30T00:48:13Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465103",
    "user": "https://github.com/mkoeppe"
}
```

**Branch:** [u/mkoeppe/local_conda_forge_macos_standard__build_error_with_numpy](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/local_conda_forge_macos_standard__build_error_with_numpy)



---

archive/issue_comments_465104.json:
```json
{
    "body": "**Commit:** [6170b87af113609a593e422428ccfcdddab36c22](https://github.com/sagemath/sagetrac-mirror/commit/6170b87af113609a593e422428ccfcdddab36c22)",
    "created_at": "2020-03-30T00:54:43Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465104",
    "user": "https://github.com/mkoeppe"
}
```

**Commit:** [6170b87af113609a593e422428ccfcdddab36c22](https://github.com/sagemath/sagetrac-mirror/commit/6170b87af113609a593e422428ccfcdddab36c22)



---

archive/issue_comments_465105.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -9,9 +9,17 @@\n ValueError: Could not lock sequences (None)\n ```\n \n+This comes from the depth of NumPy's code that tries to determine ABI by inspecting some compiled code (https://github.com/numpy/numpy/blob/master/numpy/core/setup_common.py).\n+\n+An update of NumPy to latest release, 1.18.2 (which requires updating Cython to at least 0.29.14) fixes it.\n+We update Cython to latest release, 0.29.16\n+\n+\n This can be tested with #29415:\n \n ```\n   tox -e local-conda-forge-macos-standard\n ```\n \n+\n+\n``````\n",
    "created_at": "2020-03-30T00:54:43Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465105",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -9,9 +9,17 @@
 ValueError: Could not lock sequences (None)
 ```
 
+This comes from the depth of NumPy's code that tries to determine ABI by inspecting some compiled code (https://github.com/numpy/numpy/blob/master/numpy/core/setup_common.py).
+
+An update of NumPy to latest release, 1.18.2 (which requires updating Cython to at least 0.29.14) fixes it.
+We update Cython to latest release, 0.29.16
+
+
 This can be tested with #29415:
 
 ```
   tox -e local-conda-forge-macos-standard
 ```
 
+
+
``````




---

archive/issue_comments_465106.json:
```json
{
    "body": "**Author:** Matthias Koeppe",
    "created_at": "2020-03-30T00:54:43Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465106",
    "user": "https://github.com/mkoeppe"
}
```

**Author:** Matthias Koeppe



---

archive/issue_comments_465107.json:
```json
{
    "body": "<a id='comment:5'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/adf988df950e3ca71235dbf8fa083bf4b9469abc\">adf988d</a></td><td><code>build/pkgs/cython: Update to 0.29.16</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6170b87af113609a593e422428ccfcdddab36c22\">6170b87</a></td><td><code>build/pkgs/numpy: Update numpy to 1.18.2, back out numpy-1.10.2-no-hardcode-blas.patch (does not apply)</code></td></tr></table>\n",
    "created_at": "2020-03-30T00:54:43Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465107",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/adf988df950e3ca71235dbf8fa083bf4b9469abc">adf988d</a></td><td><code>build/pkgs/cython: Update to 0.29.16</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6170b87af113609a593e422428ccfcdddab36c22">6170b87</a></td><td><code>build/pkgs/numpy: Update numpy to 1.18.2, back out numpy-1.10.2-no-hardcode-blas.patch (does not apply)</code></td></tr></table>




---

archive/issue_events_261936.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-30T00:54:43Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "rename": {
        "from": "local-conda-forge-macos-standard: Build error with numpy",
        "to": "Upgrade Cython to 0.29.16, NumPy to 1.18.2 to fix numpy build error on local-conda-forge-macos-standard"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261936"
}
```



---

archive/issue_events_261937.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-30T01:10:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261937"
}
```



---

archive/issue_comments_465108.json:
```json
{
    "body": "<a id='comment:7'></a>\nTests run at https://github.com/mkoeppe/sage/actions/runs/66127777",
    "created_at": "2020-03-30T01:10:56Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465108",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
Tests run at https://github.com/mkoeppe/sage/actions/runs/66127777



---

archive/issue_comments_465109.json:
```json
{
    "body": "<a id='comment:8'></a>\nCython URL can be set to `https://pypi.io/packages/source/C/Cython/Cython-VERSION.tar.gz`",
    "created_at": "2020-03-30T01:12:45Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465109",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:8'></a>
Cython URL can be set to `https://pypi.io/packages/source/C/Cython/Cython-VERSION.tar.gz`



---

archive/issue_comments_465110.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/078a653c12a328ef2f87e1b5711ee90a082ce715\">078a653</a></td><td><code>build/pkgs/cython/checksums.ini: Use predictable URL for upstream_url pattern</code></td></tr></table>\n",
    "created_at": "2020-03-30T01:58:41Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465110",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/078a653c12a328ef2f87e1b5711ee90a082ce715">078a653</a></td><td><code>build/pkgs/cython/checksums.ini: Use predictable URL for upstream_url pattern</code></td></tr></table>




---

archive/issue_comments_465111.json:
```json
{
    "body": "**Changing commit** from \"[6170b87af113609a593e422428ccfcdddab36c22](https://github.com/sagemath/sagetrac-mirror/commit/6170b87af113609a593e422428ccfcdddab36c22)\" to \"[078a653c12a328ef2f87e1b5711ee90a082ce715](https://github.com/sagemath/sagetrac-mirror/commit/078a653c12a328ef2f87e1b5711ee90a082ce715)\".",
    "created_at": "2020-03-30T01:58:41Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465111",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[6170b87af113609a593e422428ccfcdddab36c22](https://github.com/sagemath/sagetrac-mirror/commit/6170b87af113609a593e422428ccfcdddab36c22)" to "[078a653c12a328ef2f87e1b5711ee90a082ce715](https://github.com/sagemath/sagetrac-mirror/commit/078a653c12a328ef2f87e1b5711ee90a082ce715)".



---

archive/issue_comments_465112.json:
```json
{
    "body": "<a id='comment:10'></a>\nThanks!",
    "created_at": "2020-03-30T01:58:50Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465112",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>
Thanks!



---

archive/issue_comments_465113.json:
```json
{
    "body": "**Reviewer:** Isuru Fernando",
    "created_at": "2020-03-30T02:06:30Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465113",
    "user": "https://github.com/isuruf"
}
```

**Reviewer:** Isuru Fernando



---

archive/issue_events_261938.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2020-03-30T02:06:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261938"
}
```



---

archive/issue_events_261939.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2020-03-30T02:06:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261939"
}
```



---

archive/issue_events_261940.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-30T12:19:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261940"
}
```



---

archive/issue_events_261941.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-30T12:19:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261941"
}
```



---

archive/issue_comments_465114.json:
```json
{
    "body": "<a id='comment:12'></a>\nBreaks py2 builds\n\n```\nTraceback (most recent call last):\n  File \"setup.py\", line 32, in <module>\n    raise RuntimeError(\"Python version >= 3.5 required.\")\nRuntimeError: Python version >= 3.5 required.\n}}",
    "created_at": "2020-03-30T12:19:06Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465114",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>
Breaks py2 builds

```
Traceback (most recent call last):
  File "setup.py", line 32, in <module>
    raise RuntimeError("Python version >= 3.5 required.")
RuntimeError: Python version >= 3.5 required.
}}



---

archive/issue_events_261942.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-30T12:27:54Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261942"
}
```



---

archive/issue_events_261943.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-30T12:27:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261943"
}
```



---

archive/issue_comments_465115.json:
```json
{
    "body": "<a id='comment:13'></a>\nSetting milestone to 9.2, which is presumably the first py3-only release",
    "created_at": "2020-03-30T12:27:54Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465115",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>
Setting milestone to 9.2, which is presumably the first py3-only release



---

archive/issue_events_261944.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-30T12:27:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261944"
}
```



---

archive/issue_events_261945.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-30T12:27:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261945"
}
```



---

archive/issue_comments_465116.json:
```json
{
    "body": "<a id='comment:14'></a>\nI'll check whether an update to NumPy 1.16.6 (supports py2) also fixes the problem.",
    "created_at": "2020-03-30T12:33:55Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465116",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>
I'll check whether an update to NumPy 1.16.6 (supports py2) also fixes the problem.



---

archive/issue_comments_465117.json:
```json
{
    "body": "<a id='comment:15'></a>\nThat is #29429 - Upgrade numpy to 1.16.6 (last release supporting py2)",
    "created_at": "2020-03-30T22:52:44Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465117",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>
That is #29429 - Upgrade numpy to 1.16.6 (last release supporting py2)



---

archive/issue_events_261946.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-31T13:17:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "critical",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261946"
}
```



---

archive/issue_comments_465118.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,25 +1,6 @@\n-numpy build fails on macOS with conda-forge (https://github.com/mkoeppe/sage/runs/542501526)\n+Follow-up from the update of numpy to 1.16.6 (#29429):\n \n-```\n-Traceback (most recent call last):\n-  File \"numpy/core/setup_common.py\", line 241, in check_long_double_representation\n-    ltype = long_double_representation(pyod(obj))\n-  File \"numpy/core/setup_common.py\", line 401, in long_double_representation\n-    raise ValueError(\"Could not lock sequences (%s)\" % saw)\n-ValueError: Could not lock sequences (None)\n-```\n-\n-This comes from the depth of NumPy's code that tries to determine ABI by inspecting some compiled code (https://github.com/numpy/numpy/blob/master/numpy/core/setup_common.py).\n-\n-An update of NumPy to latest release, 1.18.2 (which requires updating Cython to at least 0.29.14) fixes it.\n+We update NumPy to the latest release, 1.18.2 (which requires updating Cython to at least 0.29.14).\n We update Cython to latest release, 0.29.16\n \n \n-This can be tested with #29415:\n-\n-```\n-  tox -e local-conda-forge-macos-standard\n-```\n-\n-\n-\n``````\n",
    "created_at": "2020-03-31T13:17:42Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465118",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,25 +1,6 @@
-numpy build fails on macOS with conda-forge (https://github.com/mkoeppe/sage/runs/542501526)
+Follow-up from the update of numpy to 1.16.6 (#29429):
 
-```
-Traceback (most recent call last):
-  File "numpy/core/setup_common.py", line 241, in check_long_double_representation
-    ltype = long_double_representation(pyod(obj))
-  File "numpy/core/setup_common.py", line 401, in long_double_representation
-    raise ValueError("Could not lock sequences (%s)" % saw)
-ValueError: Could not lock sequences (None)
-```
-
-This comes from the depth of NumPy's code that tries to determine ABI by inspecting some compiled code (https://github.com/numpy/numpy/blob/master/numpy/core/setup_common.py).
-
-An update of NumPy to latest release, 1.18.2 (which requires updating Cython to at least 0.29.14) fixes it.
+We update NumPy to the latest release, 1.18.2 (which requires updating Cython to at least 0.29.14).
 We update Cython to latest release, 0.29.16
 
 
-This can be tested with #29415:
-
-```
-  tox -e local-conda-forge-macos-standard
-```
-
-
-
``````




---

archive/issue_events_261947.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-31T13:17:42Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "rename": {
        "from": "Upgrade Cython to 0.29.16, NumPy to 1.18.2 to fix numpy build error on local-conda-forge-macos-standard",
        "to": "Upgrade Cython to 0.29.16, NumPy to 1.18.2 [py3 only!]"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261947"
}
```



---

archive/issue_comments_465119.json:
```json
{
    "body": "**Dependencies:** dropping py2 support",
    "created_at": "2020-03-31T13:17:42Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465119",
    "user": "https://github.com/mkoeppe"
}
```

**Dependencies:** dropping py2 support



---

archive/issue_comments_465120.json:
```json
{
    "body": "**Work Issues:** rebase on top of #29480, #29429",
    "created_at": "2020-04-08T20:58:20Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465120",
    "user": "https://github.com/mkoeppe"
}
```

**Work Issues:** rebase on top of #29480, #29429



---

archive/issue_events_261948.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-08T20:58:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261948"
}
```



---

archive/issue_events_261949.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-08T20:58:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261949"
}
```



---

archive/issue_comments_465121.json:
```json
{
    "body": "**Changing dependencies** from \"dropping py2 support\" to \"dropping py2 support,  #29480, #29429\".",
    "created_at": "2020-04-08T20:58:20Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465121",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "dropping py2 support" to "dropping py2 support,  #29480, #29429".



---

archive/issue_comments_465122.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,6 +1,4 @@\n Follow-up from the update of numpy to 1.16.6 (#29429):\n \n-We update NumPy to the latest release, 1.18.2 (which requires updating Cython to at least 0.29.14).\n-We update Cython to latest release, 0.29.16\n+We update NumPy to the latest release, 1.18.2 (which requires updating Cython to at least 0.29.14 - #29480).\n \n-\n``````\n",
    "created_at": "2020-04-08T20:59:28Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465122",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,6 +1,4 @@
 Follow-up from the update of numpy to 1.16.6 (#29429):
 
-We update NumPy to the latest release, 1.18.2 (which requires updating Cython to at least 0.29.14).
-We update Cython to latest release, 0.29.16
+We update NumPy to the latest release, 1.18.2 (which requires updating Cython to at least 0.29.14 - #29480).
 
-
``````




---

archive/issue_events_261950.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-08T20:59:28Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "rename": {
        "from": "Upgrade Cython to 0.29.16, NumPy to 1.18.2 [py3 only!]",
        "to": "Upgrade NumPy to 1.18.2 [py3 only!]"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261950"
}
```



---

archive/issue_events_261951.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-10T18:59:32Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "rename": {
        "from": "Upgrade NumPy to 1.18.2 [py3 only!]",
        "to": "Upgrade NumPy to 1.18.4 [py3 only!]"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261951"
}
```



---

archive/issue_events_261952.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-10T19:00:17Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "rename": {
        "from": "Upgrade NumPy to 1.18.4 [py3 only!]",
        "to": "Upgrade NumPy to 1.18.4, scipy to 1.4.1 [py3 only!]"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261952"
}
```



---

archive/issue_comments_465123.json:
```json
{
    "body": "**Changing commit** from \"[078a653c12a328ef2f87e1b5711ee90a082ce715](https://github.com/sagemath/sagetrac-mirror/commit/078a653c12a328ef2f87e1b5711ee90a082ce715)\" to \"[204213debcb838ff4253ccd7f9ca40552a5b3bdb](https://github.com/sagemath/sagetrac-mirror/commit/204213debcb838ff4253ccd7f9ca40552a5b3bdb)\".",
    "created_at": "2020-05-10T20:11:52Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465123",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[078a653c12a328ef2f87e1b5711ee90a082ce715](https://github.com/sagemath/sagetrac-mirror/commit/078a653c12a328ef2f87e1b5711ee90a082ce715)" to "[204213debcb838ff4253ccd7f9ca40552a5b3bdb](https://github.com/sagemath/sagetrac-mirror/commit/204213debcb838ff4253ccd7f9ca40552a5b3bdb)".



---

archive/issue_comments_465124.json:
```json
{
    "body": "<a id='comment:21'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a5c17a86af01597655d6a99d0f2b68793048253d\">a5c17a8</a></td><td><code>build/pkgs/cython: Update to 0.29.16</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c7cc999e75ebcb3cff0c976cdf8010c8831589f3\">c7cc999</a></td><td><code>build/pkgs/cython/checksums.ini: Use predictable URL for upstream_url pattern</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d54b715814ca3dfb8f5c6421f3a101e30bf14945\">d54b715</a></td><td><code>Update Cython to 0.29.17</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5958d38ac53fa56c3728bd0af40a512891bdb674\">5958d38</a></td><td><code>build/pkgs/numpy: Update numpy to 1.18.2, back out numpy-1.10.2-no-hardcode-blas.patch (does not apply)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0075bebc3d5f544a2e052fd490ee7ee0977aa1e8\">0075beb</a></td><td><code>Update numpy to 1.18.4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/204213debcb838ff4253ccd7f9ca40552a5b3bdb\">204213d</a></td><td><code>Update scipy to 1.4.1</code></td></tr></table>\n",
    "created_at": "2020-05-10T20:11:52Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465124",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a5c17a86af01597655d6a99d0f2b68793048253d">a5c17a8</a></td><td><code>build/pkgs/cython: Update to 0.29.16</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c7cc999e75ebcb3cff0c976cdf8010c8831589f3">c7cc999</a></td><td><code>build/pkgs/cython/checksums.ini: Use predictable URL for upstream_url pattern</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d54b715814ca3dfb8f5c6421f3a101e30bf14945">d54b715</a></td><td><code>Update Cython to 0.29.17</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5958d38ac53fa56c3728bd0af40a512891bdb674">5958d38</a></td><td><code>build/pkgs/numpy: Update numpy to 1.18.2, back out numpy-1.10.2-no-hardcode-blas.patch (does not apply)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0075bebc3d5f544a2e052fd490ee7ee0977aa1e8">0075beb</a></td><td><code>Update numpy to 1.18.4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/204213debcb838ff4253ccd7f9ca40552a5b3bdb">204213d</a></td><td><code>Update scipy to 1.4.1</code></td></tr></table>




---

archive/issue_events_261953.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-10T20:12:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261953"
}
```



---

archive/issue_events_261954.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-10T20:12:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261954"
}
```



---

archive/issue_comments_465125.json:
```json
{
    "body": "<a id='comment:22'></a>\n(untested)",
    "created_at": "2020-05-10T20:12:48Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465125",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:22'></a>
(untested)



---

archive/issue_comments_465126.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,5 @@\n Follow-up from the update of numpy to 1.16.6 (#29429):\n \n-We update NumPy to the latest release, 1.18.2 (which requires updating Cython to at least 0.29.14 - #29480).\n+We update NumPy to the latest release, 1.18.4 (which requires updating Cython to at least 0.29.14 - #29480)\n+and scipy to latest release, 1.4.1.\n \n``````\n",
    "created_at": "2020-05-10T20:12:48Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465126",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,5 @@
 Follow-up from the update of numpy to 1.16.6 (#29429):
 
-We update NumPy to the latest release, 1.18.2 (which requires updating Cython to at least 0.29.14 - #29480).
+We update NumPy to the latest release, 1.18.4 (which requires updating Cython to at least 0.29.14 - #29480)
+and scipy to latest release, 1.4.1.
 
``````




---

archive/issue_comments_465127.json:
```json
{
    "body": "**Changing dependencies** from \"dropping py2 support,  #29480, #29429\" to \"dropping py2 support, #29480\".",
    "created_at": "2020-05-10T20:13:07Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465127",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "dropping py2 support,  #29480, #29429" to "dropping py2 support, #29480".



---

archive/issue_comments_465128.json:
```json
{
    "body": "**Changing work issues** from \"rebase on top of #29480, #29429\" to \"\".",
    "created_at": "2020-05-10T20:13:18Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465128",
    "user": "https://github.com/mkoeppe"
}
```

**Changing work issues** from "rebase on top of #29480, #29429" to "".



---

archive/issue_comments_465129.json:
```json
{
    "body": "<a id='comment:25'></a>\nI am trying to use it. I had a first problem, it did not download the required version of cython, solved by downloading and putting it in upstream. The same happened for numpy, but it does not look for the package in upstream and failed. By some reason, giac also fail with a message like \"undefined reference to `__gmpn_add_nc'\"",
    "created_at": "2020-05-13T15:04:43Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465129",
    "user": "https://github.com/enriqueartal"
}
```

<a id='comment:25'></a>
I am trying to use it. I had a first problem, it did not download the required version of cython, solved by downloading and putting it in upstream. The same happened for numpy, but it does not look for the package in upstream and failed. By some reason, giac also fail with a message like "undefined reference to `__gmpn_add_nc'"



---

archive/issue_comments_465130.json:
```json
{
    "body": "<a id='comment:26'></a>\nTo enable automatic downloads, use `./configure --enable-download-from-upstream-url`.",
    "created_at": "2020-05-13T19:53:11Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465130",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>
To enable automatic downloads, use `./configure --enable-download-from-upstream-url`.



---

archive/issue_comments_465131.json:
```json
{
    "body": "<a id='comment:27'></a>\nThe giac build failure - is this in a build from scratch?",
    "created_at": "2020-05-13T19:54:05Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465131",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>
The giac build failure - is this in a build from scratch?



---

archive/issue_comments_465132.json:
```json
{
    "body": "<a id='comment:28'></a>\nNo, maybe it is a problem of mixing gcc9 and gcc10\n\nReplying to [mkoeppe](#comment%3A27):\n> The giac build failure - is this in a build from scratch?\n",
    "created_at": "2020-05-13T21:50:08Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465132",
    "user": "https://github.com/enriqueartal"
}
```

<a id='comment:28'></a>
No, maybe it is a problem of mixing gcc9 and gcc10

Replying to [mkoeppe](#comment%3A27):
> The giac build failure - is this in a build from scratch?




---

archive/issue_comments_465133.json:
```json
{
    "body": "<a id='comment:29'></a>\nBoth numpy and scipy can be reached, but the following problem appears. If solved, I will try to build from scratch.\n\nInstalling scipy-1.4.1\nDownload error on https://pypi.org/simple/pybind11/: [Errno 110] Connection timed out -- Some packages may not be found!\nCouldn't find index page for 'pybind11' (maybe misspelled?)",
    "created_at": "2020-05-14T13:45:17Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465133",
    "user": "https://github.com/enriqueartal"
}
```

<a id='comment:29'></a>
Both numpy and scipy can be reached, but the following problem appears. If solved, I will try to build from scratch.

Installing scipy-1.4.1
Download error on https://pypi.org/simple/pybind11/: [Errno 110] Connection timed out -- Some packages may not be found!
Couldn't find index page for 'pybind11' (maybe misspelled?)



---

archive/issue_events_261955.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-14T18:22:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261955"
}
```



---

archive/issue_events_261956.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-14T18:22:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261956"
}
```



---

archive/issue_comments_465134.json:
```json
{
    "body": "<a id='comment:30'></a>\nThanks for catching this. This is an additional dependency that we need to ship.\nhttps://github.com/scipy/scipy/blob/master/pyproject.toml",
    "created_at": "2020-05-14T18:22:47Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465134",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:30'></a>
Thanks for catching this. This is an additional dependency that we need to ship.
https://github.com/scipy/scipy/blob/master/pyproject.toml



---

archive/issue_comments_465135.json:
```json
{
    "body": "**Changing commit** from \"[204213debcb838ff4253ccd7f9ca40552a5b3bdb](https://github.com/sagemath/sagetrac-mirror/commit/204213debcb838ff4253ccd7f9ca40552a5b3bdb)\" to \"[14bcb1f25653b3baf78b1523913be0dc73257a95](https://github.com/sagemath/sagetrac-mirror/commit/14bcb1f25653b3baf78b1523913be0dc73257a95)\".",
    "created_at": "2020-05-14T19:04:00Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465135",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[204213debcb838ff4253ccd7f9ca40552a5b3bdb](https://github.com/sagemath/sagetrac-mirror/commit/204213debcb838ff4253ccd7f9ca40552a5b3bdb)" to "[14bcb1f25653b3baf78b1523913be0dc73257a95](https://github.com/sagemath/sagetrac-mirror/commit/14bcb1f25653b3baf78b1523913be0dc73257a95)".



---

archive/issue_comments_465136.json:
```json
{
    "body": "<a id='comment:31'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/14bcb1f25653b3baf78b1523913be0dc73257a95\">14bcb1f</a></td><td><code>build/pkgs/pybind11: New, dependency of scipy</code></td></tr></table>\n",
    "created_at": "2020-05-14T19:04:00Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465136",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/14bcb1f25653b3baf78b1523913be0dc73257a95">14bcb1f</a></td><td><code>build/pkgs/pybind11: New, dependency of scipy</code></td></tr></table>




---

archive/issue_events_261957.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-14T19:04:46Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "rename": {
        "from": "Upgrade NumPy to 1.18.4, scipy to 1.4.1 [py3 only!]",
        "to": "Upgrade NumPy to 1.18.4, scipy to 1.4.1, add pybind11 package [py3 only!]"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261957"
}
```



---

archive/issue_events_261958.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-14T19:04:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261958"
}
```



---

archive/issue_events_261959.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-14T19:04:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261959"
}
```



---

archive/issue_comments_465137.json:
```json
{
    "body": "<a id='comment:34'></a>\nI compiled from scratch using gcc10. Besides the expected  failures of palp and sympow, these are the last lines of the log of scipy. \n\n\n    error: Command \"gfortran -Wall -g -ffixed-form -fno-second-underscore -fPIC -fPIC -O3 -funroll-loops -Iscipy/sparse/linalg/eigen/arpack/ARPACK/SRC -I/home/artal/sage/local/lib/python3.7/site-packages/numpy/core/include -c -c scipy/sparse/linalg/eigen/arpack/ARPACK/SRC/dsaitr.f -o build/temp.linux-x86_64-3.7/scipy/sparse/linalg/eigen/arpack/ARPACK/SRC/dsaitr.o\" failed with exit status 1\n    Running setup.py install for scipy: finished with status 'error'\nCleaning up...\n  Removing source in /tmp/pip-req-build-yghxywzq\nRemoved build tracker '/tmp/pip-req-tracker-maw6u14m'\nCommand \"/home/artal/sage/local/bin/python3 -u -c \"import setuptools, tokenize;__file__='/tmp/pip-req-build-yghxywzq/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, `__file__`, 'exec'))\" --no-user-cfg install --record /tmp/pip-record-axtqqq0z/install-record.txt --single-version-externally-managed --root /home/artal/sage/local/var/tmp/sage/build/scipy-1.4.1/inst --compile\" failed with error code 1 in /tmp/pip-req-build-yghxywzq/\nException information:\nTraceback (most recent call last):\n  File \"/home/artal/sage/local/lib/python3.7/site-packages/pip/_internal/cli/base_command.py\", line 143, in main\n    status = self.run(options, args)\n  File \"/home/artal/sage/local/lib/python3.7/site-packages/pip/_internal/commands/install.py\", line 366, in run\n    use_user_site=options.use_user_site,\n  File \"/home/artal/sage/local/lib/python3.7/site-packages/pip/_internal/req/__init__.py\", line 49, in install_given_reqs\n    **kwargs\n  File \"/home/artal/sage/local/lib/python3.7/site-packages/pip/_internal/req/req_install.py\", line 791, in install\n    spinner=spinner,\n  File \"/home/artal/sage/local/lib/python3.7/site-packages/pip/_internal/utils/misc.py\", line 705, in call_subprocess\n    % (command_desc, proc.returncode, cwd))\npip._internal.exceptions.InstallationError: Command \"/home/artal/sage/local/bin/python3 -u -c \"import setuptools, tokenize;__file__='/tmp/pip-req-build-yghxywzq/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, `__file__`, 'exec'))\" --no-user-cfg install --record /tmp/pip-record-axtqqq0z/install-record.txt --single-version-externally-managed --root /home/artal/sage/local/var/tmp/sage/build/scipy-1.4.1/inst --compile\" failed with error code 1 in /tmp/pip-req-build-yghxywzq/\nError: installing with pip3 failed",
    "created_at": "2020-05-15T18:49:11Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465137",
    "user": "https://github.com/enriqueartal"
}
```

<a id='comment:34'></a>
I compiled from scratch using gcc10. Besides the expected  failures of palp and sympow, these are the last lines of the log of scipy. 


    error: Command "gfortran -Wall -g -ffixed-form -fno-second-underscore -fPIC -fPIC -O3 -funroll-loops -Iscipy/sparse/linalg/eigen/arpack/ARPACK/SRC -I/home/artal/sage/local/lib/python3.7/site-packages/numpy/core/include -c -c scipy/sparse/linalg/eigen/arpack/ARPACK/SRC/dsaitr.f -o build/temp.linux-x86_64-3.7/scipy/sparse/linalg/eigen/arpack/ARPACK/SRC/dsaitr.o" failed with exit status 1
    Running setup.py install for scipy: finished with status 'error'
Cleaning up...
  Removing source in /tmp/pip-req-build-yghxywzq
Removed build tracker '/tmp/pip-req-tracker-maw6u14m'
Command "/home/artal/sage/local/bin/python3 -u -c "import setuptools, tokenize;__file__='/tmp/pip-req-build-yghxywzq/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\r\n', '\n');f.close();exec(compile(code, `__file__`, 'exec'))" --no-user-cfg install --record /tmp/pip-record-axtqqq0z/install-record.txt --single-version-externally-managed --root /home/artal/sage/local/var/tmp/sage/build/scipy-1.4.1/inst --compile" failed with error code 1 in /tmp/pip-req-build-yghxywzq/
Exception information:
Traceback (most recent call last):
  File "/home/artal/sage/local/lib/python3.7/site-packages/pip/_internal/cli/base_command.py", line 143, in main
    status = self.run(options, args)
  File "/home/artal/sage/local/lib/python3.7/site-packages/pip/_internal/commands/install.py", line 366, in run
    use_user_site=options.use_user_site,
  File "/home/artal/sage/local/lib/python3.7/site-packages/pip/_internal/req/__init__.py", line 49, in install_given_reqs
    **kwargs
  File "/home/artal/sage/local/lib/python3.7/site-packages/pip/_internal/req/req_install.py", line 791, in install
    spinner=spinner,
  File "/home/artal/sage/local/lib/python3.7/site-packages/pip/_internal/utils/misc.py", line 705, in call_subprocess
    % (command_desc, proc.returncode, cwd))
pip._internal.exceptions.InstallationError: Command "/home/artal/sage/local/bin/python3 -u -c "import setuptools, tokenize;__file__='/tmp/pip-req-build-yghxywzq/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\r\n', '\n');f.close();exec(compile(code, `__file__`, 'exec'))" --no-user-cfg install --record /tmp/pip-record-axtqqq0z/install-record.txt --single-version-externally-managed --root /home/artal/sage/local/var/tmp/sage/build/scipy-1.4.1/inst --compile" failed with error code 1 in /tmp/pip-req-build-yghxywzq/
Error: installing with pip3 failed



---

archive/issue_comments_465138.json:
```json
{
    "body": "<a id='comment:35'></a>\nwhat's the status of here? are we really waiting for gcc10 starting to work?",
    "created_at": "2020-05-29T09:12:21Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465138",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:35'></a>
what's the status of here? are we really waiting for gcc10 starting to work?



---

archive/issue_comments_465139.json:
```json
{
    "body": "<a id='comment:36'></a>\nNo, just waiting for review of this ticket and its dependency #29480.",
    "created_at": "2020-05-29T15:01:25Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465139",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:36'></a>
No, just waiting for review of this ticket and its dependency #29480.



---

archive/issue_comments_465140.json:
```json
{
    "body": "<a id='comment:37'></a>\nI get doctest errors due to\n\n```\nDeprecationWarning: scipy.array is deprecated and will be removed in SciPy 2.0.0, use numpy.array instead\n```\nnamely, \n\n```\nsage -t --warn-long 76.6 src/sage/graphs/generic_graph.py\n**********************************************************************\nFile \"src/sage/graphs/generic_graph.py\", line 9789, in sage.graphs.generic_graph.GenericGraph.?\nFailed example:\n    G.pagerank(algorithm=\"Scipy\") # abs tol 1e-9\nExpected:\n    {1: 0.16112205885619563,\n     2: 0.1619531043247219,\n     3: 0.16112205885619563,\n     4: 0.2374999999999999,\n     5: 0.17775588228760858,\n     6: 0.100546895675278}\nGot:\n    doctest:warning\n....\n      File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/sage/doctest/forker.py\", line 1104, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.graphs.generic_graph.GenericGraph.?[7]>\", line 1, in <module>\n        G.pagerank(algorithm=\"Scipy\") # abs tol 1e-9\n      File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/sage/graphs/generic_graph.py\", line 9880, in pagerank\n        dangling=dangling)\n      File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/networkx/algorithms/link_analysis/pagerank_alg.py\", line 429, in pagerank_scipy\n        S = scipy.array(M.sum(axis=1)).flatten()\n      File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/scipy/_lib/deprecation.py\", line 19, in call\n        stacklevel=stacklevel)\n      File \"/usr/lib64/python3.7/warnings.py\", line 110, in _showwarnmsg\n        msg.file, msg.line)\n    :\n    DeprecationWarning: scipy.array is deprecated and will be removed in SciPy 2.0.0, use numpy.array instead\n```\n\nit seems that these warnings are coming from scipy itself, or from networkx\n(which in turn calls scipy).\n\nLet me see if upgrading networkx helps.",
    "created_at": "2020-05-29T17:30:02Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465140",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:37'></a>
I get doctest errors due to

```
DeprecationWarning: scipy.array is deprecated and will be removed in SciPy 2.0.0, use numpy.array instead
```
namely, 

```
sage -t --warn-long 76.6 src/sage/graphs/generic_graph.py
**********************************************************************
File "src/sage/graphs/generic_graph.py", line 9789, in sage.graphs.generic_graph.GenericGraph.?
Failed example:
    G.pagerank(algorithm="Scipy") # abs tol 1e-9
Expected:
    {1: 0.16112205885619563,
     2: 0.1619531043247219,
     3: 0.16112205885619563,
     4: 0.2374999999999999,
     5: 0.17775588228760858,
     6: 0.100546895675278}
Got:
    doctest:warning
....
      File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/sage/doctest/forker.py", line 1104, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.graphs.generic_graph.GenericGraph.?[7]>", line 1, in <module>
        G.pagerank(algorithm="Scipy") # abs tol 1e-9
      File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/sage/graphs/generic_graph.py", line 9880, in pagerank
        dangling=dangling)
      File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/networkx/algorithms/link_analysis/pagerank_alg.py", line 429, in pagerank_scipy
        S = scipy.array(M.sum(axis=1)).flatten()
      File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/scipy/_lib/deprecation.py", line 19, in call
        stacklevel=stacklevel)
      File "/usr/lib64/python3.7/warnings.py", line 110, in _showwarnmsg
        msg.file, msg.line)
    :
    DeprecationWarning: scipy.array is deprecated and will be removed in SciPy 2.0.0, use numpy.array instead
```

it seems that these warnings are coming from scipy itself, or from networkx
(which in turn calls scipy).

Let me see if upgrading networkx helps.



---

archive/issue_comments_465141.json:
```json
{
    "body": "<a id='comment:38'></a>\nNo, with networkx 2.4 one still gets these warnings, but they are fixed upstream, just not yet released, see \nhttps://github.com/networkx/networkx/commit/ea19baaff252468f5a911260430e057393d9637d",
    "created_at": "2020-05-29T17:41:22Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465141",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:38'></a>
No, with networkx 2.4 one still gets these warnings, but they are fixed upstream, just not yet released, see 
https://github.com/networkx/networkx/commit/ea19baaff252468f5a911260430e057393d9637d



---

archive/issue_comments_465142.json:
```json
{
    "body": "<a id='comment:39'></a>\nSo we can patch networkx, or modify doctests, or suppress warning somehow (for the latter, I vaguely remember it's possible, but can't find it in docs)",
    "created_at": "2020-05-29T17:44:20Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465142",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:39'></a>
So we can patch networkx, or modify doctests, or suppress warning somehow (for the latter, I vaguely remember it's possible, but can't find it in docs)



---

archive/issue_comments_465143.json:
```json
{
    "body": "<a id='comment:40'></a>\nFiltering out doctest warnings was done on one of the recent glpk tickets",
    "created_at": "2020-05-29T22:16:15Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465143",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:40'></a>
Filtering out doctest warnings was done on one of the recent glpk tickets



---

archive/issue_comments_465144.json:
```json
{
    "body": "**Changing dependencies** from \"dropping py2 support, #29480\" to \"dropping py2 support, #29480, #29766\".",
    "created_at": "2020-05-30T22:23:45Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465144",
    "user": "https://github.com/dimpase"
}
```

**Changing dependencies** from "dropping py2 support, #29480" to "dropping py2 support, #29480, #29766".



---

archive/issue_comments_465145.json:
```json
{
    "body": "**Changing reviewer** from \"Isuru Fernando\" to \"Isuru Fernando, Dima Pasechnik\".",
    "created_at": "2020-05-30T22:23:45Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465145",
    "user": "https://github.com/dimpase"
}
```

**Changing reviewer** from "Isuru Fernando" to "Isuru Fernando, Dima Pasechnik".



---

archive/issue_events_261960.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-05-30T22:23:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261960"
}
```



---

archive/issue_events_261961.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-05-30T22:23:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261961"
}
```



---

archive/issue_comments_465146.json:
```json
{
    "body": "<a id='comment:41'></a>\nReplying to [mkoeppe](#comment%3A40):\n> Filtering out doctest warnings was done on one of the recent glpk tickets\n\nI don't know how to filter multiline warnings with python backtraces.\n\nOK, I've opened #29766 to fix this. This one is good to go, modulo the latter.",
    "created_at": "2020-05-30T22:23:45Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465146",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:41'></a>
Replying to [mkoeppe](#comment%3A40):
> Filtering out doctest warnings was done on one of the recent glpk tickets

I don't know how to filter multiline warnings with python backtraces.

OK, I've opened #29766 to fix this. This one is good to go, modulo the latter.



---

archive/issue_comments_465147.json:
```json
{
    "body": "**Changing dependencies** from \"dropping py2 support, #29480, #29766\" to \"#29480, #29766\".",
    "created_at": "2020-05-31T23:14:41Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465147",
    "user": "https://github.com/vbraun"
}
```

**Changing dependencies** from "dropping py2 support, #29480, #29766" to "#29480, #29766".



---

archive/issue_comments_465148.json:
```json
{
    "body": "**Changing dependencies** from \"#29480, #29766\" to \"#29480\".",
    "created_at": "2020-06-01T10:11:10Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465148",
    "user": "https://github.com/dimpase"
}
```

**Changing dependencies** from "#29480, #29766" to "#29480".



---

archive/issue_comments_465149.json:
```json
{
    "body": "**Changing commit** from \"[14bcb1f25653b3baf78b1523913be0dc73257a95](https://github.com/sagemath/sagetrac-mirror/commit/14bcb1f25653b3baf78b1523913be0dc73257a95)\" to \"\".",
    "created_at": "2020-06-01T10:11:10Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465149",
    "user": "https://github.com/dimpase"
}
```

**Changing commit** from "[14bcb1f25653b3baf78b1523913be0dc73257a95](https://github.com/sagemath/sagetrac-mirror/commit/14bcb1f25653b3baf78b1523913be0dc73257a95)" to "".



---

archive/issue_comments_465150.json:
```json
{
    "body": "<a id='comment:43'></a>\ndrop the networkx dependency with the latest patch (and rebase over latest beta).",
    "created_at": "2020-06-01T10:11:10Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465150",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:43'></a>
drop the networkx dependency with the latest patch (and rebase over latest beta).



---

archive/issue_comments_465151.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/local_conda_forge_macos_standard__build_error_with_numpy](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/local_conda_forge_macos_standard__build_error_with_numpy)\" to \"[u/dimpase/local_conda_forge_macos_standard__build_error_with_numpy](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/local_conda_forge_macos_standard__build_error_with_numpy)\".",
    "created_at": "2020-06-01T10:11:10Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465151",
    "user": "https://github.com/dimpase"
}
```

**Changing branch** from "[u/mkoeppe/local_conda_forge_macos_standard__build_error_with_numpy](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/local_conda_forge_macos_standard__build_error_with_numpy)" to "[u/dimpase/local_conda_forge_macos_standard__build_error_with_numpy](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/local_conda_forge_macos_standard__build_error_with_numpy)".



---

archive/issue_comments_465152.json:
```json
{
    "body": "**Changing branch** from \"[u/dimpase/local_conda_forge_macos_standard__build_error_with_numpy](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/local_conda_forge_macos_standard__build_error_with_numpy)\" to \"[u/dimpase/trac/local_conda_forge_macos_standard__build_error_with_numpy](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/trac/local_conda_forge_macos_standard__build_error_with_numpy)\".",
    "created_at": "2020-06-01T10:11:59Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465152",
    "user": "https://github.com/dimpase"
}
```

**Changing branch** from "[u/dimpase/local_conda_forge_macos_standard__build_error_with_numpy](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/local_conda_forge_macos_standard__build_error_with_numpy)" to "[u/dimpase/trac/local_conda_forge_macos_standard__build_error_with_numpy](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/trac/local_conda_forge_macos_standard__build_error_with_numpy)".



---

archive/issue_comments_465153.json:
```json
{
    "body": "<a id='comment:44'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9a3617dc36f7808981de972dcb08b1612eaaa85f\">9a3617d</a></td><td><code>build/pkgs/cython: Update to 0.29.16</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4a606b61bef5de1276d97e2e6e1b73b1c65a33de\">4a606b6</a></td><td><code>build/pkgs/cython/checksums.ini: Use predictable URL for upstream_url pattern</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e9a7cb085a705dae2113e5ea8c876d54adcf4e99\">e9a7cb0</a></td><td><code>Update Cython to 0.29.17</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/15911cb9ac22f66fe1786e98ef06d9664c04a3e4\">15911cb</a></td><td><code>build/pkgs/numpy: Update numpy to 1.18.2, back out numpy-1.10.2-no-hardcode-blas.patch (does not apply)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96e7a41f2079c580acab899c4dabfd9b9552ab38\">96e7a41</a></td><td><code>Update numpy to 1.18.4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/78b49077cc924e5657fc70a86425682de58999e6\">78b4907</a></td><td><code>Update scipy to 1.4.1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/54595b0db66d0ad14f96273b12190fb241429612\">54595b0</a></td><td><code>build/pkgs/pybind11: New, dependency of scipy</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c005562fed79e91883fa808237f5d52ceb024fd3\">c005562</a></td><td><code>suppress scipy deprecation warnings</code></td></tr></table>\n",
    "created_at": "2020-06-01T10:11:59Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465153",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:44'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9a3617dc36f7808981de972dcb08b1612eaaa85f">9a3617d</a></td><td><code>build/pkgs/cython: Update to 0.29.16</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4a606b61bef5de1276d97e2e6e1b73b1c65a33de">4a606b6</a></td><td><code>build/pkgs/cython/checksums.ini: Use predictable URL for upstream_url pattern</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e9a7cb085a705dae2113e5ea8c876d54adcf4e99">e9a7cb0</a></td><td><code>Update Cython to 0.29.17</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/15911cb9ac22f66fe1786e98ef06d9664c04a3e4">15911cb</a></td><td><code>build/pkgs/numpy: Update numpy to 1.18.2, back out numpy-1.10.2-no-hardcode-blas.patch (does not apply)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96e7a41f2079c580acab899c4dabfd9b9552ab38">96e7a41</a></td><td><code>Update numpy to 1.18.4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/78b49077cc924e5657fc70a86425682de58999e6">78b4907</a></td><td><code>Update scipy to 1.4.1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/54595b0db66d0ad14f96273b12190fb241429612">54595b0</a></td><td><code>build/pkgs/pybind11: New, dependency of scipy</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c005562fed79e91883fa808237f5d52ceb024fd3">c005562</a></td><td><code>suppress scipy deprecation warnings</code></td></tr></table>




---

archive/issue_comments_465154.json:
```json
{
    "body": "**Commit:** [c005562fed79e91883fa808237f5d52ceb024fd3](https://github.com/sagemath/sagetrac-mirror/commit/c005562fed79e91883fa808237f5d52ceb024fd3)",
    "created_at": "2020-06-01T10:11:59Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465154",
    "user": "https://github.com/dimpase"
}
```

**Commit:** [c005562fed79e91883fa808237f5d52ceb024fd3](https://github.com/sagemath/sagetrac-mirror/commit/c005562fed79e91883fa808237f5d52ceb024fd3)



---

archive/issue_comments_465155.json:
```json
{
    "body": "<a id='comment:45'></a>\nReplying to [mkoeppe](#comment%3A40):\n> Filtering out doctest warnings was done on one of the recent glpk tickets\n\n\nadded the last commit to suppress the warning in the proper Pythonic way. The rest stays (mod rebase)",
    "created_at": "2020-06-01T10:13:35Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465155",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:45'></a>
Replying to [mkoeppe](#comment%3A40):
> Filtering out doctest warnings was done on one of the recent glpk tickets


added the last commit to suppress the warning in the proper Pythonic way. The rest stays (mod rebase)



---

archive/issue_comments_465156.json:
```json
{
    "body": "<a id='comment:46'></a>\nI'm getting various test failures",
    "created_at": "2020-06-04T22:03:39Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465156",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:46'></a>
I'm getting various test failures



---

archive/issue_events_261962.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-06-04T22:03:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261962"
}
```



---

archive/issue_events_261963.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-06-04T22:03:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261963"
}
```



---

archive/issue_comments_465157.json:
```json
{
    "body": "<a id='comment:47'></a>\nAn upgrade ticket like this really needs to be run on the [GitHub](GitHub) test infrastructure...",
    "created_at": "2020-06-04T22:21:17Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465157",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:47'></a>
An upgrade ticket like this really needs to be run on the [GitHub](GitHub) test infrastructure...



---

archive/issue_comments_465158.json:
```json
{
    "body": "<a id='comment:48'></a>\nrunning GH Actions test here https://github.com/dimpase/sage/pull/9",
    "created_at": "2020-06-04T22:39:07Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465158",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:48'></a>
running GH Actions test here https://github.com/dimpase/sage/pull/9



---

archive/issue_comments_465159.json:
```json
{
    "body": "<a id='comment:49'></a>\nReplying to [mkoeppe](#comment%3A47):\n> An upgrade ticket like this really needs to be run on the [GitHub](GitHub) test infrastructure...\n\nUnfortunately there seem to be problems with runner setups, e.g. here \nhttps://github.com/dimpase/sage/runs/740349791?check_suite_focus=true\n- this is `docker (archlinux-latest, standard-gcc_spkg)`\nI see\n\n```\n2020-06-04T22:39:01.9688082Z Suggested packages:\n2020-06-04T22:39:01.9688790Z   python3-pytest python-setuptools-doc\n```\nand a lot of \n\n```\n2020-06-05T03:08:41.2134392Z Failure: ModuleNotFoundError (No module named 'pytest') ... ERROR\n```\nwhich seems to suggest that `python3-pytest` is a requirement.\n\nDo you know how to fix this?\n\n(there are other errors pointing at internal problems of runners)\n\nCan we easily extend setup to use our own runners?",
    "created_at": "2020-06-05T13:09:18Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465159",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:49'></a>
Replying to [mkoeppe](#comment%3A47):
> An upgrade ticket like this really needs to be run on the [GitHub](GitHub) test infrastructure...

Unfortunately there seem to be problems with runner setups, e.g. here 
https://github.com/dimpase/sage/runs/740349791?check_suite_focus=true
- this is `docker (archlinux-latest, standard-gcc_spkg)`
I see

```
2020-06-04T22:39:01.9688082Z Suggested packages:
2020-06-04T22:39:01.9688790Z   python3-pytest python-setuptools-doc
```
and a lot of 

```
2020-06-05T03:08:41.2134392Z Failure: ModuleNotFoundError (No module named 'pytest') ... ERROR
```
which seems to suggest that `python3-pytest` is a requirement.

Do you know how to fix this?

(there are other errors pointing at internal problems of runners)

Can we easily extend setup to use our own runners?



---

archive/issue_comments_465160.json:
```json
{
    "body": "<a id='comment:50'></a>\nApparently, running the testsuite of networkx requires pytest. Let's discuss this on #29766.\n\nI don't think this has anything to do with [GitHub](GitHub).",
    "created_at": "2020-06-06T04:38:00Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465160",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:50'></a>
Apparently, running the testsuite of networkx requires pytest. Let's discuss this on #29766.

I don't think this has anything to do with [GitHub](GitHub).



---

archive/issue_comments_465161.json:
```json
{
    "body": "<a id='comment:51'></a>\nIn the meantime, numpy 1.18.5 has appeared",
    "created_at": "2020-06-06T05:25:49Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465161",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:51'></a>
In the meantime, numpy 1.18.5 has appeared



---

archive/issue_comments_465162.json:
```json
{
    "body": "**Changing branch** from \"[u/dimpase/trac/local_conda_forge_macos_standard__build_error_with_numpy](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/trac/local_conda_forge_macos_standard__build_error_with_numpy)\" to \"[u/mkoeppe/trac/local_conda_forge_macos_standard__build_error_with_numpy](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/trac/local_conda_forge_macos_standard__build_error_with_numpy)\".",
    "created_at": "2020-06-06T05:28:10Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465162",
    "user": "https://github.com/mkoeppe"
}
```

**Changing branch** from "[u/dimpase/trac/local_conda_forge_macos_standard__build_error_with_numpy](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/trac/local_conda_forge_macos_standard__build_error_with_numpy)" to "[u/mkoeppe/trac/local_conda_forge_macos_standard__build_error_with_numpy](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/trac/local_conda_forge_macos_standard__build_error_with_numpy)".



---

archive/issue_comments_465163.json:
```json
{
    "body": "**Changing commit** from \"[c005562fed79e91883fa808237f5d52ceb024fd3](https://github.com/sagemath/sagetrac-mirror/commit/c005562fed79e91883fa808237f5d52ceb024fd3)\" to \"[56a6fe17708622cf6066629e7a5eeb2baead5508](https://github.com/sagemath/sagetrac-mirror/commit/56a6fe17708622cf6066629e7a5eeb2baead5508)\".",
    "created_at": "2020-06-06T05:34:32Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465163",
    "user": "https://github.com/mkoeppe"
}
```

**Changing commit** from "[c005562fed79e91883fa808237f5d52ceb024fd3](https://github.com/sagemath/sagetrac-mirror/commit/c005562fed79e91883fa808237f5d52ceb024fd3)" to "[56a6fe17708622cf6066629e7a5eeb2baead5508](https://github.com/sagemath/sagetrac-mirror/commit/56a6fe17708622cf6066629e7a5eeb2baead5508)".



---

archive/issue_comments_465164.json:
```json
{
    "body": "<a id='comment:53'></a>\nTests (with #29766) run at https://github.com/mkoeppe/sage/pull/38/checks\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/56a6fe17708622cf6066629e7a5eeb2baead5508\">56a6fe1</a></td><td><code>build/pkgs/numpy: Update to 1.18.5</code></td></tr></table>\n",
    "created_at": "2020-06-06T05:34:32Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465164",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:53'></a>
Tests (with #29766) run at https://github.com/mkoeppe/sage/pull/38/checks

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/56a6fe17708622cf6066629e7a5eeb2baead5508">56a6fe1</a></td><td><code>build/pkgs/numpy: Update to 1.18.5</code></td></tr></table>




---

archive/issue_comments_465165.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,5 +1,8 @@\n Follow-up from the update of numpy to 1.16.6 (#29429):\n \n-We update NumPy to the latest release, 1.18.4 (which requires updating Cython to at least 0.29.14 - #29480)\n-and scipy to latest release, 1.4.1.\n+We update \n+- NumPy to the latest release, 1.18.5\n+- scipy to latest release, 1.4.1.\n+(latest as of 2020-06-05; both versions (and also the upcoming numpy 1.19) support python >= 3.6)\n \n+\n``````\n",
    "created_at": "2020-06-06T05:36:52Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465165",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,5 +1,8 @@
 Follow-up from the update of numpy to 1.16.6 (#29429):
 
-We update NumPy to the latest release, 1.18.4 (which requires updating Cython to at least 0.29.14 - #29480)
-and scipy to latest release, 1.4.1.
+We update 
+- NumPy to the latest release, 1.18.5
+- scipy to latest release, 1.4.1.
+(latest as of 2020-06-05; both versions (and also the upcoming numpy 1.19) support python >= 3.6)
 
+
``````




---

archive/issue_events_261964.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-06-06T05:36:52Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "rename": {
        "from": "Upgrade NumPy to 1.18.4, scipy to 1.4.1, add pybind11 package [py3 only!]",
        "to": "Upgrade NumPy to 1.18.5, scipy to 1.4.1, add pybind11 package"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261964"
}
```



---

archive/issue_events_261965.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-06-06T05:37:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261965"
}
```



---

archive/issue_events_261966.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-06-06T05:37:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261966"
}
```



---

archive/issue_comments_465166.json:
```json
{
    "body": "<a id='comment:56'></a>\nCan this ticket be tested successfully by itself or only as part of the `networkx` upgrade in #29766?  If the latter, then let's close this ticket and merge it into #29766.",
    "created_at": "2020-06-06T18:54:55Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465166",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:56'></a>
Can this ticket be tested successfully by itself or only as part of the `networkx` upgrade in #29766?  If the latter, then let's close this ticket and merge it into #29766.



---

archive/issue_comments_465167.json:
```json
{
    "body": "<a id='comment:57'></a>\nReplying to [mkoeppe](#comment%3A56):\n> Can this ticket be tested successfully by itself or only as part of the `networkx` upgrade in #29766?  If the latter, then let's close this ticket and merge it into #29766.\n\n\nno, this one does not need #29766",
    "created_at": "2020-06-06T20:57:13Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465167",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:57'></a>
Replying to [mkoeppe](#comment%3A56):
> Can this ticket be tested successfully by itself or only as part of the `networkx` upgrade in #29766?  If the latter, then let's close this ticket and merge it into #29766.


no, this one does not need #29766



---

archive/issue_comments_465168.json:
```json
{
    "body": "<a id='comment:58'></a>\nOK, running a new test without #29766 at https://github.com/mkoeppe/sage/pull/39/checks",
    "created_at": "2020-06-06T21:39:03Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465168",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:58'></a>
OK, running a new test without #29766 at https://github.com/mkoeppe/sage/pull/39/checks



---

archive/issue_comments_465169.json:
```json
{
    "body": "<a id='comment:59'></a>\nReplying to [dimpase](#comment%3A57):\n> Replying to [mkoeppe](#comment%3A56):\n> > Can this ticket be tested successfully by itself or only as part of the `networkx` upgrade in #29766?  If the latter, then let's close this ticket and merge it into #29766.\n\n> \n> no, this one does not need #29766\n\n\nActually, on `ubuntu-xenial-standard` (https://github.com/mkoeppe/sage/runs/745921419), I see lots of failures from the `networkx` testsuite such as this one:\n\n```\nFile \"/sage/local/var/tmp/sage/build/networkx-2.2/src/networkx/drawing/nx_pylab.py\", line 249, in networkx.drawing.nx_pylab.draw_networkx\nFailed example:\n    nx.draw(G)\nException raised:\n    Traceback (most recent call last):\n      File \"/sage/local/lib/python3.7/doctest.py\", line 1329, in __run\n        compileflags, 1), test.globs)\n      File \"<doctest networkx.drawing.nx_pylab.draw_networkx[1]>\", line 1, in <module>\n        nx.draw(G)\n      File \"/sage/local/var/tmp/sage/build/networkx-2.2/src/networkx/drawing/nx_pylab.py\", line 126, in draw\n        draw_networkx(G, pos=pos, ax=ax, **kwds)\n      File \"/sage/local/var/tmp/sage/build/networkx-2.2/src/networkx/drawing/nx_pylab.py\", line 278, in draw_networkx\n        edge_collection = draw_networkx_edges(G, pos, arrows=arrows, **kwds)\n      File \"/sage/local/var/tmp/sage/build/networkx-2.2/src/networkx/drawing/nx_pylab.py\", line 611, in draw_networkx_edges\n        if cb.is_numlike(alpha):\n    AttributeError: module 'matplotlib.cbook' has no attribute 'is_numlike'\n```",
    "created_at": "2020-06-07T02:57:46Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465169",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:59'></a>
Replying to [dimpase](#comment%3A57):
> Replying to [mkoeppe](#comment%3A56):
> > Can this ticket be tested successfully by itself or only as part of the `networkx` upgrade in #29766?  If the latter, then let's close this ticket and merge it into #29766.

> 
> no, this one does not need #29766


Actually, on `ubuntu-xenial-standard` (https://github.com/mkoeppe/sage/runs/745921419), I see lots of failures from the `networkx` testsuite such as this one:

```
File "/sage/local/var/tmp/sage/build/networkx-2.2/src/networkx/drawing/nx_pylab.py", line 249, in networkx.drawing.nx_pylab.draw_networkx
Failed example:
    nx.draw(G)
Exception raised:
    Traceback (most recent call last):
      File "/sage/local/lib/python3.7/doctest.py", line 1329, in __run
        compileflags, 1), test.globs)
      File "<doctest networkx.drawing.nx_pylab.draw_networkx[1]>", line 1, in <module>
        nx.draw(G)
      File "/sage/local/var/tmp/sage/build/networkx-2.2/src/networkx/drawing/nx_pylab.py", line 126, in draw
        draw_networkx(G, pos=pos, ax=ax, **kwds)
      File "/sage/local/var/tmp/sage/build/networkx-2.2/src/networkx/drawing/nx_pylab.py", line 278, in draw_networkx
        edge_collection = draw_networkx_edges(G, pos, arrows=arrows, **kwds)
      File "/sage/local/var/tmp/sage/build/networkx-2.2/src/networkx/drawing/nx_pylab.py", line 611, in draw_networkx_edges
        if cb.is_numlike(alpha):
    AttributeError: module 'matplotlib.cbook' has no attribute 'is_numlike'
```



---

archive/issue_events_261967.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-06-07T03:03:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261967"
}
```



---

archive/issue_comments_465170.json:
```json
{
    "body": "<a id='comment:60'></a>\nTherefore, let's close this ticket and continue on #29766.",
    "created_at": "2020-06-07T03:03:52Z",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-465170",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:60'></a>
Therefore, let's close this ticket and continue on #29766.



---

archive/issue_events_261968.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-06-11T22:54:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261968"
}
```



---

archive/issue_events_261969.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-06-11T22:54:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261969"
}
```



---

archive/issue_events_261970.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-06-20T06:24:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "duplicate",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261970"
}
```



---

archive/issue_events_261971.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-06-20T06:24:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261971"
}
```



---

archive/issue_events_261972.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-06-20T06:24:41Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-261972"
}
```
