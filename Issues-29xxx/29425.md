# Issue 29425: Upgrade NumPy to 1.18.5, scipy to 1.4.1, add pybind11 package

archive/issues_029188.json:
```json
{
    "assignees": [],
    "body": "Follow-up from the update of numpy to 1.16.6 (#29429):\n\nWe update \n- NumPy to the latest release, 1.18.5\n- scipy to latest release, 1.4.1.\n(latest as of 2020-06-05; both versions (and also the upcoming numpy 1.19) support python >= 3.6)\n\n\n\nDepends on #29480\n\nCC:  @isuruf @dimpase @jdemeyer @embray @slel @vbraun\n\nBranch/Commit: **[u/mkoeppe/trac/local_conda_forge_macos_standard__build_error_with_numpy](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/trac/local_conda_forge_macos_standard__build_error_with_numpy) @ [`56a6fe1`](https://github.com/sagemath/sagetrac-mirror/commit/56a6fe17708622cf6066629e7a5eeb2baead5508)**\n\nReviewer: **Isuru Fernando, Dima Pasechnik**\n\nAuthor: **Matthias Koeppe**\n\nComponent: **porting**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29425_\n\n",
    "closed_at": "2020-06-20T06:24:41Z",
    "created_at": "2020-03-29T14:47:04Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20porting",
        "https://github.com/sagemath/sage/labels/duplicate"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade NumPy to 1.18.5, scipy to 1.4.1, add pybind11 package",
    "type": "issue",
    "updated_at": "2020-06-20T06:24:41Z",
    "url": "https://github.com/sagemath/sage/issues/29425",
    "user": "https://github.com/mkoeppe"
}
```
Follow-up from the update of numpy to 1.16.6 (#29429):

We update 
- NumPy to the latest release, 1.18.5
- scipy to latest release, 1.4.1.
(latest as of 2020-06-05; both versions (and also the upcoming numpy 1.19) support python >= 3.6)



Depends on #29480

CC:  @isuruf @dimpase @jdemeyer @embray @slel @vbraun

Branch/Commit: **[u/mkoeppe/trac/local_conda_forge_macos_standard__build_error_with_numpy](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/trac/local_conda_forge_macos_standard__build_error_with_numpy) @ [`56a6fe1`](https://github.com/sagemath/sagetrac-mirror/commit/56a6fe17708622cf6066629e7a5eeb2baead5508)**

Reviewer: **Isuru Fernando, Dima Pasechnik**

Author: **Matthias Koeppe**

Component: **porting**

_Issue created by migration from https://trac.sagemath.org/ticket/29425_





---

archive/issue_events_401608.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-29T14:47:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401608"
}
```



---

archive/issue_events_401609.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-29T14:47:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20porting",
    "label_color": "0000b0",
    "label_name": "c: porting",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401609"
}
```



---

archive/issue_events_401610.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-29T14:47:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
    "label_color": "ff7700",
    "label_name": "p: critical / 2",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401610"
}
```



---

archive/issue_events_401611.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-29T14:47:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401611"
}
```



---

archive/issue_comments_462238.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nCan you try setting `NPY_DISTUTILS_APPEND_FLAGS=1` in the numpy build script?",
    "created_at": "2020-03-29T20:02:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462238",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:1" align="right">comment:1</div>

Can you try setting `NPY_DISTUTILS_APPEND_FLAGS=1` in the numpy build script?



---

archive/issue_comments_462239.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThis didn't make a difference",
    "created_at": "2020-03-29T22:30:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462239",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2" align="right">comment:2</div>

This didn't make a difference



---

archive/issue_comments_462240.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nUpgrading numpy to 1.18.2 fixes it; but this will require a Cython upgrade too",
    "created_at": "2020-03-30T00:29:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462240",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3" align="right">comment:3</div>

Upgrading numpy to 1.18.2 fixes it; but this will require a Cython upgrade too



---

archive/issue_comments_462241.json:
```json
{
    "body": "Branch: **[u/mkoeppe/local_conda_forge_macos_standard__build_error_with_numpy](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/local_conda_forge_macos_standard__build_error_with_numpy)**",
    "created_at": "2020-03-30T00:48:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462241",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/local_conda_forge_macos_standard__build_error_with_numpy](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/local_conda_forge_macos_standard__build_error_with_numpy)**



---

archive/issue_comments_462242.json:
```json
{
    "body": "Commit: **[`6170b87`](https://github.com/sagemath/sagetrac-mirror/commit/6170b87af113609a593e422428ccfcdddab36c22)**",
    "created_at": "2020-03-30T00:54:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462242",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`6170b87`](https://github.com/sagemath/sagetrac-mirror/commit/6170b87af113609a593e422428ccfcdddab36c22)**



---

archive/issue_comments_462243.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,9 +9,17 @@\n ValueError: Could not lock sequences (None)\n ```\n \n+This comes from the depth of NumPy's code that tries to determine ABI by inspecting some compiled code (https://github.com/numpy/numpy/blob/master/numpy/core/setup_common.py).\n+\n+An update of NumPy to latest release, 1.18.2 (which requires updating Cython to at least 0.29.14) fixes it.\n+We update Cython to latest release, 0.29.16\n+\n+\n This can be tested with #29415:\n \n ```\n   tox -e local-conda-forge-macos-standard\n ```\n \n+\n+\n``````\n",
    "created_at": "2020-03-30T00:54:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462243",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,9 +9,17 @@
 ValueError: Could not lock sequences (None)
 ```
 
+This comes from the depth of NumPy's code that tries to determine ABI by inspecting some compiled code (https://github.com/numpy/numpy/blob/master/numpy/core/setup_common.py).
+
+An update of NumPy to latest release, 1.18.2 (which requires updating Cython to at least 0.29.14) fixes it.
+We update Cython to latest release, 0.29.16
+
+
 This can be tested with #29415:
 
 ```
   tox -e local-conda-forge-macos-standard
 ```
 
+
+
``````




---

archive/issue_comments_462244.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2020-03-30T00:54:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462244",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_comments_462245.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/adf988df950e3ca71235dbf8fa083bf4b9469abc\"><code>adf988d</code></a></td><td><code>build/pkgs/cython: Update to 0.29.16</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6170b87af113609a593e422428ccfcdddab36c22\"><code>6170b87</code></a></td><td><code>build/pkgs/numpy: Update numpy to 1.18.2, back out numpy-1.10.2-no-hardcode-blas.patch (does not apply)</code></td></tr></table>\n",
    "created_at": "2020-03-30T00:54:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462245",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:5"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/adf988df950e3ca71235dbf8fa083bf4b9469abc"><code>adf988d</code></a></td><td><code>build/pkgs/cython: Update to 0.29.16</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6170b87af113609a593e422428ccfcdddab36c22"><code>6170b87</code></a></td><td><code>build/pkgs/numpy: Update numpy to 1.18.2, back out numpy-1.10.2-no-hardcode-blas.patch (does not apply)</code></td></tr></table>




---

archive/issue_events_401612.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-30T00:54:43Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "title_is": "Upgrade Cython to 0.29.16, NumPy to 1.18.2 to fix numpy build error on local-conda-forge-macos-standard",
    "title_was": "local-conda-forge-macos-standard: Build error with numpy",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401612"
}
```



---

archive/issue_events_401613.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-30T01:10:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401613"
}
```



---

archive/issue_comments_462246.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nTests run at https://github.com/mkoeppe/sage/actions/runs/66127777",
    "created_at": "2020-03-30T01:10:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462246",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

Tests run at https://github.com/mkoeppe/sage/actions/runs/66127777



---

archive/issue_comments_462247.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nCython URL can be set to `https://pypi.io/packages/source/C/Cython/Cython-VERSION.tar.gz`",
    "created_at": "2020-03-30T01:12:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462247",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:8" align="right">comment:8</div>

Cython URL can be set to `https://pypi.io/packages/source/C/Cython/Cython-VERSION.tar.gz`



---

archive/issue_comments_462248.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/078a653c12a328ef2f87e1b5711ee90a082ce715\"><code>078a653</code></a></td><td><code>build/pkgs/cython/checksums.ini: Use predictable URL for upstream_url pattern</code></td></tr></table>\n",
    "created_at": "2020-03-30T01:58:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462248",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/078a653c12a328ef2f87e1b5711ee90a082ce715"><code>078a653</code></a></td><td><code>build/pkgs/cython/checksums.ini: Use predictable URL for upstream_url pattern</code></td></tr></table>




---

archive/issue_comments_462249.json:
```json
{
    "body": "Changed commit from **[`6170b87`](https://github.com/sagemath/sagetrac-mirror/commit/6170b87af113609a593e422428ccfcdddab36c22)** to **[`078a653`](https://github.com/sagemath/sagetrac-mirror/commit/078a653c12a328ef2f87e1b5711ee90a082ce715)**",
    "created_at": "2020-03-30T01:58:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462249",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6170b87`](https://github.com/sagemath/sagetrac-mirror/commit/6170b87af113609a593e422428ccfcdddab36c22)** to **[`078a653`](https://github.com/sagemath/sagetrac-mirror/commit/078a653c12a328ef2f87e1b5711ee90a082ce715)**



---

archive/issue_comments_462250.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nThanks!",
    "created_at": "2020-03-30T01:58:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462250",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:10" align="right">comment:10</div>

Thanks!



---

archive/issue_comments_462251.json:
```json
{
    "body": "Reviewer: **Isuru Fernando**",
    "created_at": "2020-03-30T02:06:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462251",
    "user": "https://github.com/isuruf"
}
```

Reviewer: **Isuru Fernando**



---

archive/issue_events_401614.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2020-03-30T02:06:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401614"
}
```



---

archive/issue_events_401615.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2020-03-30T02:06:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401615"
}
```



---

archive/issue_events_401616.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-30T12:19:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401616"
}
```



---

archive/issue_events_401617.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-30T12:19:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401617"
}
```



---

archive/issue_comments_462252.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nBreaks py2 builds\n\n```\nTraceback (most recent call last):\n  File \"setup.py\", line 32, in <module>\n    raise RuntimeError(\"Python version >= 3.5 required.\")\nRuntimeError: Python version >= 3.5 required.\n}}",
    "created_at": "2020-03-30T12:19:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462252",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:12" align="right">comment:12</div>

Breaks py2 builds

```
Traceback (most recent call last):
  File "setup.py", line 32, in <module>
    raise RuntimeError("Python version >= 3.5 required.")
RuntimeError: Python version >= 3.5 required.
}}



---

archive/issue_events_401618.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-30T12:27:54Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401618"
}
```



---

archive/issue_events_401619.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-30T12:27:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401619"
}
```



---

archive/issue_comments_462253.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nSetting milestone to 9.2, which is presumably the first py3-only release",
    "created_at": "2020-03-30T12:27:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462253",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:13" align="right">comment:13</div>

Setting milestone to 9.2, which is presumably the first py3-only release



---

archive/issue_events_401620.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-30T12:27:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401620"
}
```



---

archive/issue_events_401621.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-30T12:27:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401621"
}
```



---

archive/issue_comments_462254.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI'll check whether an update to NumPy 1.16.6 (supports py2) also fixes the problem.",
    "created_at": "2020-03-30T12:33:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462254",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:14" align="right">comment:14</div>

I'll check whether an update to NumPy 1.16.6 (supports py2) also fixes the problem.



---

archive/issue_comments_462255.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThat is #29429 - Upgrade numpy to 1.16.6 (last release supporting py2)",
    "created_at": "2020-03-30T22:52:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462255",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:15" align="right">comment:15</div>

That is #29429 - Upgrade numpy to 1.16.6 (last release supporting py2)



---

archive/issue_events_401622.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-31T13:17:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
    "label_color": "ff7700",
    "label_name": "p: critical / 2",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401622"
}
```



---

archive/issue_events_401623.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-31T13:17:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401623"
}
```



---

archive/issue_comments_462256.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,25 +1,6 @@\n-numpy build fails on macOS with conda-forge (https://github.com/mkoeppe/sage/runs/542501526)\n+Follow-up from the update of numpy to 1.16.6 (#29429):\n \n-```\n-Traceback (most recent call last):\n-  File \"numpy/core/setup_common.py\", line 241, in check_long_double_representation\n-    ltype = long_double_representation(pyod(obj))\n-  File \"numpy/core/setup_common.py\", line 401, in long_double_representation\n-    raise ValueError(\"Could not lock sequences (%s)\" % saw)\n-ValueError: Could not lock sequences (None)\n-```\n-\n-This comes from the depth of NumPy's code that tries to determine ABI by inspecting some compiled code (https://github.com/numpy/numpy/blob/master/numpy/core/setup_common.py).\n-\n-An update of NumPy to latest release, 1.18.2 (which requires updating Cython to at least 0.29.14) fixes it.\n+We update NumPy to the latest release, 1.18.2 (which requires updating Cython to at least 0.29.14).\n We update Cython to latest release, 0.29.16\n \n \n-This can be tested with #29415:\n-\n-```\n-  tox -e local-conda-forge-macos-standard\n-```\n-\n-\n-\n``````\n",
    "created_at": "2020-03-31T13:17:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462256",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,25 +1,6 @@
-numpy build fails on macOS with conda-forge (https://github.com/mkoeppe/sage/runs/542501526)
+Follow-up from the update of numpy to 1.16.6 (#29429):
 
-```
-Traceback (most recent call last):
-  File "numpy/core/setup_common.py", line 241, in check_long_double_representation
-    ltype = long_double_representation(pyod(obj))
-  File "numpy/core/setup_common.py", line 401, in long_double_representation
-    raise ValueError("Could not lock sequences (%s)" % saw)
-ValueError: Could not lock sequences (None)
-```
-
-This comes from the depth of NumPy's code that tries to determine ABI by inspecting some compiled code (https://github.com/numpy/numpy/blob/master/numpy/core/setup_common.py).
-
-An update of NumPy to latest release, 1.18.2 (which requires updating Cython to at least 0.29.14) fixes it.
+We update NumPy to the latest release, 1.18.2 (which requires updating Cython to at least 0.29.14).
 We update Cython to latest release, 0.29.16
 
 
-This can be tested with #29415:
-
-```
-  tox -e local-conda-forge-macos-standard
-```
-
-
-
``````




---

archive/issue_events_401624.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-31T13:17:42Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "title_is": "Upgrade Cython to 0.29.16, NumPy to 1.18.2 [py3 only!]",
    "title_was": "Upgrade Cython to 0.29.16, NumPy to 1.18.2 to fix numpy build error on local-conda-forge-macos-standard",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401624"
}
```



---

archive/issue_comments_462257.json:
```json
{
    "body": "Dependencies: **dropping py2 support**",
    "created_at": "2020-03-31T13:17:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462257",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **dropping py2 support**



---

archive/issue_comments_462258.json:
```json
{
    "body": "Work Issues: **rebase on top of #29480, #29429**",
    "created_at": "2020-04-08T20:58:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462258",
    "user": "https://github.com/mkoeppe"
}
```

Work Issues: **rebase on top of #29480, #29429**



---

archive/issue_events_401625.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-08T20:58:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401625"
}
```



---

archive/issue_events_401626.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-08T20:58:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401626"
}
```



---

archive/issue_comments_462259.json:
```json
{
    "body": "Changed dependencies from **dropping py2 support** to **dropping py2 support,  #29480, #29429**",
    "created_at": "2020-04-08T20:58:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462259",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **dropping py2 support** to **dropping py2 support,  #29480, #29429**



---

archive/issue_comments_462260.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,4 @@\n Follow-up from the update of numpy to 1.16.6 (#29429):\n \n-We update NumPy to the latest release, 1.18.2 (which requires updating Cython to at least 0.29.14).\n-We update Cython to latest release, 0.29.16\n+We update NumPy to the latest release, 1.18.2 (which requires updating Cython to at least 0.29.14 - #29480).\n \n-\n``````\n",
    "created_at": "2020-04-08T20:59:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462260",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,4 @@
 Follow-up from the update of numpy to 1.16.6 (#29429):
 
-We update NumPy to the latest release, 1.18.2 (which requires updating Cython to at least 0.29.14).
-We update Cython to latest release, 0.29.16
+We update NumPy to the latest release, 1.18.2 (which requires updating Cython to at least 0.29.14 - #29480).
 
-
``````




---

archive/issue_events_401627.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-08T20:59:28Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "title_is": "Upgrade NumPy to 1.18.2 [py3 only!]",
    "title_was": "Upgrade Cython to 0.29.16, NumPy to 1.18.2 [py3 only!]",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401627"
}
```



---

archive/issue_events_401628.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-10T18:59:32Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "title_is": "Upgrade NumPy to 1.18.4 [py3 only!]",
    "title_was": "Upgrade NumPy to 1.18.2 [py3 only!]",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401628"
}
```



---

archive/issue_events_401629.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-10T19:00:17Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "title_is": "Upgrade NumPy to 1.18.4, scipy to 1.4.1 [py3 only!]",
    "title_was": "Upgrade NumPy to 1.18.4 [py3 only!]",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401629"
}
```



---

archive/issue_comments_462261.json:
```json
{
    "body": "Changed commit from **[`078a653`](https://github.com/sagemath/sagetrac-mirror/commit/078a653c12a328ef2f87e1b5711ee90a082ce715)** to **[`204213d`](https://github.com/sagemath/sagetrac-mirror/commit/204213debcb838ff4253ccd7f9ca40552a5b3bdb)**",
    "created_at": "2020-05-10T20:11:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462261",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`078a653`](https://github.com/sagemath/sagetrac-mirror/commit/078a653c12a328ef2f87e1b5711ee90a082ce715)** to **[`204213d`](https://github.com/sagemath/sagetrac-mirror/commit/204213debcb838ff4253ccd7f9ca40552a5b3bdb)**



---

archive/issue_comments_462262.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a5c17a86af01597655d6a99d0f2b68793048253d\"><code>a5c17a8</code></a></td><td><code>build/pkgs/cython: Update to 0.29.16</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c7cc999e75ebcb3cff0c976cdf8010c8831589f3\"><code>c7cc999</code></a></td><td><code>build/pkgs/cython/checksums.ini: Use predictable URL for upstream_url pattern</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d54b715814ca3dfb8f5c6421f3a101e30bf14945\"><code>d54b715</code></a></td><td><code>Update Cython to 0.29.17</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5958d38ac53fa56c3728bd0af40a512891bdb674\"><code>5958d38</code></a></td><td><code>build/pkgs/numpy: Update numpy to 1.18.2, back out numpy-1.10.2-no-hardcode-blas.patch (does not apply)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0075bebc3d5f544a2e052fd490ee7ee0977aa1e8\"><code>0075beb</code></a></td><td><code>Update numpy to 1.18.4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/204213debcb838ff4253ccd7f9ca40552a5b3bdb\"><code>204213d</code></a></td><td><code>Update scipy to 1.4.1</code></td></tr></table>\n",
    "created_at": "2020-05-10T20:11:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462262",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a5c17a86af01597655d6a99d0f2b68793048253d"><code>a5c17a8</code></a></td><td><code>build/pkgs/cython: Update to 0.29.16</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c7cc999e75ebcb3cff0c976cdf8010c8831589f3"><code>c7cc999</code></a></td><td><code>build/pkgs/cython/checksums.ini: Use predictable URL for upstream_url pattern</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d54b715814ca3dfb8f5c6421f3a101e30bf14945"><code>d54b715</code></a></td><td><code>Update Cython to 0.29.17</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5958d38ac53fa56c3728bd0af40a512891bdb674"><code>5958d38</code></a></td><td><code>build/pkgs/numpy: Update numpy to 1.18.2, back out numpy-1.10.2-no-hardcode-blas.patch (does not apply)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0075bebc3d5f544a2e052fd490ee7ee0977aa1e8"><code>0075beb</code></a></td><td><code>Update numpy to 1.18.4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/204213debcb838ff4253ccd7f9ca40552a5b3bdb"><code>204213d</code></a></td><td><code>Update scipy to 1.4.1</code></td></tr></table>




---

archive/issue_events_401630.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-10T20:12:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401630"
}
```



---

archive/issue_events_401631.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-10T20:12:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401631"
}
```



---

archive/issue_comments_462263.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\n(untested)",
    "created_at": "2020-05-10T20:12:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462263",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:22" align="right">comment:22</div>

(untested)



---

archive/issue_comments_462264.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,5 @@\n Follow-up from the update of numpy to 1.16.6 (#29429):\n \n-We update NumPy to the latest release, 1.18.2 (which requires updating Cython to at least 0.29.14 - #29480).\n+We update NumPy to the latest release, 1.18.4 (which requires updating Cython to at least 0.29.14 - #29480)\n+and scipy to latest release, 1.4.1.\n \n``````\n",
    "created_at": "2020-05-10T20:12:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462264",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,5 @@
 Follow-up from the update of numpy to 1.16.6 (#29429):
 
-We update NumPy to the latest release, 1.18.2 (which requires updating Cython to at least 0.29.14 - #29480).
+We update NumPy to the latest release, 1.18.4 (which requires updating Cython to at least 0.29.14 - #29480)
+and scipy to latest release, 1.4.1.
 
``````




---

archive/issue_comments_462265.json:
```json
{
    "body": "Changed dependencies from **dropping py2 support,  #29480, #29429** to **dropping py2 support, #29480**",
    "created_at": "2020-05-10T20:13:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462265",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **dropping py2 support,  #29480, #29429** to **dropping py2 support, #29480**



---

archive/issue_comments_462266.json:
```json
{
    "body": "Changed work issues from **rebase on top of #29480, #29429** to none",
    "created_at": "2020-05-10T20:13:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462266",
    "user": "https://github.com/mkoeppe"
}
```

Changed work issues from **rebase on top of #29480, #29429** to none



---

archive/issue_comments_462267.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nI am trying to use it. I had a first problem, it did not download the required version of cython, solved by downloading and putting it in upstream. The same happened for numpy, but it does not look for the package in upstream and failed. By some reason, giac also fail with a message like \"undefined reference to `__gmpn_add_nc'\"",
    "created_at": "2020-05-13T15:04:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462267",
    "user": "https://github.com/enriqueartal"
}
```

<div id="comment:25" align="right">comment:25</div>

I am trying to use it. I had a first problem, it did not download the required version of cython, solved by downloading and putting it in upstream. The same happened for numpy, but it does not look for the package in upstream and failed. By some reason, giac also fail with a message like "undefined reference to `__gmpn_add_nc'"



---

archive/issue_comments_462268.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nTo enable automatic downloads, use `./configure --enable-download-from-upstream-url`.",
    "created_at": "2020-05-13T19:53:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462268",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:26" align="right">comment:26</div>

To enable automatic downloads, use `./configure --enable-download-from-upstream-url`.



---

archive/issue_comments_462269.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nThe giac build failure - is this in a build from scratch?",
    "created_at": "2020-05-13T19:54:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462269",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:27" align="right">comment:27</div>

The giac build failure - is this in a build from scratch?



---

archive/issue_comments_462270.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nNo, maybe it is a problem of mixing gcc9 and gcc10\n\nReplying to [@mkoeppe](#comment%3A27):\n> The giac build failure - is this in a build from scratch?",
    "created_at": "2020-05-13T21:50:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462270",
    "user": "https://github.com/enriqueartal"
}
```

<div id="comment:28" align="right">comment:28</div>

No, maybe it is a problem of mixing gcc9 and gcc10

Replying to [@mkoeppe](#comment%3A27):
> The giac build failure - is this in a build from scratch?



---

archive/issue_comments_462271.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nBoth numpy and scipy can be reached, but the following problem appears. If solved, I will try to build from scratch.\n\nInstalling scipy-1.4.1\nDownload error on https://pypi.org/simple/pybind11/: [Errno 110] Connection timed out -- Some packages may not be found!\nCouldn't find index page for 'pybind11' (maybe misspelled?)",
    "created_at": "2020-05-14T13:45:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462271",
    "user": "https://github.com/enriqueartal"
}
```

<div id="comment:29" align="right">comment:29</div>

Both numpy and scipy can be reached, but the following problem appears. If solved, I will try to build from scratch.

Installing scipy-1.4.1
Download error on https://pypi.org/simple/pybind11/: [Errno 110] Connection timed out -- Some packages may not be found!
Couldn't find index page for 'pybind11' (maybe misspelled?)



---

archive/issue_events_401632.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-14T18:22:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401632"
}
```



---

archive/issue_events_401633.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-14T18:22:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401633"
}
```



---

archive/issue_comments_462272.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nThanks for catching this. This is an additional dependency that we need to ship.\nhttps://github.com/scipy/scipy/blob/master/pyproject.toml",
    "created_at": "2020-05-14T18:22:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462272",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:30" align="right">comment:30</div>

Thanks for catching this. This is an additional dependency that we need to ship.
https://github.com/scipy/scipy/blob/master/pyproject.toml



---

archive/issue_comments_462273.json:
```json
{
    "body": "Changed commit from **[`204213d`](https://github.com/sagemath/sagetrac-mirror/commit/204213debcb838ff4253ccd7f9ca40552a5b3bdb)** to **[`14bcb1f`](https://github.com/sagemath/sagetrac-mirror/commit/14bcb1f25653b3baf78b1523913be0dc73257a95)**",
    "created_at": "2020-05-14T19:04:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462273",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`204213d`](https://github.com/sagemath/sagetrac-mirror/commit/204213debcb838ff4253ccd7f9ca40552a5b3bdb)** to **[`14bcb1f`](https://github.com/sagemath/sagetrac-mirror/commit/14bcb1f25653b3baf78b1523913be0dc73257a95)**



---

archive/issue_comments_462274.json:
```json
{
    "body": "<div id=\"comment:31\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/14bcb1f25653b3baf78b1523913be0dc73257a95\"><code>14bcb1f</code></a></td><td><code>build/pkgs/pybind11: New, dependency of scipy</code></td></tr></table>\n",
    "created_at": "2020-05-14T19:04:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462274",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:31"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/14bcb1f25653b3baf78b1523913be0dc73257a95"><code>14bcb1f</code></a></td><td><code>build/pkgs/pybind11: New, dependency of scipy</code></td></tr></table>




---

archive/issue_events_401634.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-14T19:04:46Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "title_is": "Upgrade NumPy to 1.18.4, scipy to 1.4.1, add pybind11 package [py3 only!]",
    "title_was": "Upgrade NumPy to 1.18.4, scipy to 1.4.1 [py3 only!]",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401634"
}
```



---

archive/issue_events_401635.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-14T19:04:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401635"
}
```



---

archive/issue_events_401636.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-14T19:04:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401636"
}
```



---

archive/issue_comments_462275.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nI compiled from scratch using gcc10. Besides the expected  failures of palp and sympow, these are the last lines of the log of scipy. \n\n\n    error: Command \"gfortran -Wall -g -ffixed-form -fno-second-underscore -fPIC -fPIC -O3 -funroll-loops -Iscipy/sparse/linalg/eigen/arpack/ARPACK/SRC -I/home/artal/sage/local/lib/python3.7/site-packages/numpy/core/include -c -c scipy/sparse/linalg/eigen/arpack/ARPACK/SRC/dsaitr.f -o build/temp.linux-x86_64-3.7/scipy/sparse/linalg/eigen/arpack/ARPACK/SRC/dsaitr.o\" failed with exit status 1\n    Running setup.py install for scipy: finished with status 'error'\nCleaning up...\n  Removing source in /tmp/pip-req-build-yghxywzq\nRemoved build tracker '/tmp/pip-req-tracker-maw6u14m'\nCommand \"/home/artal/sage/local/bin/python3 -u -c \"import setuptools, tokenize;__file__='/tmp/pip-req-build-yghxywzq/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, `__file__`, 'exec'))\" --no-user-cfg install --record /tmp/pip-record-axtqqq0z/install-record.txt --single-version-externally-managed --root /home/artal/sage/local/var/tmp/sage/build/scipy-1.4.1/inst --compile\" failed with error code 1 in /tmp/pip-req-build-yghxywzq/\nException information:\nTraceback (most recent call last):\n  File \"/home/artal/sage/local/lib/python3.7/site-packages/pip/_internal/cli/base_command.py\", line 143, in main\n    status = self.run(options, args)\n  File \"/home/artal/sage/local/lib/python3.7/site-packages/pip/_internal/commands/install.py\", line 366, in run\n    use_user_site=options.use_user_site,\n  File \"/home/artal/sage/local/lib/python3.7/site-packages/pip/_internal/req/__init__.py\", line 49, in install_given_reqs\n    **kwargs\n  File \"/home/artal/sage/local/lib/python3.7/site-packages/pip/_internal/req/req_install.py\", line 791, in install\n    spinner=spinner,\n  File \"/home/artal/sage/local/lib/python3.7/site-packages/pip/_internal/utils/misc.py\", line 705, in call_subprocess\n    % (command_desc, proc.returncode, cwd))\npip._internal.exceptions.InstallationError: Command \"/home/artal/sage/local/bin/python3 -u -c \"import setuptools, tokenize;__file__='/tmp/pip-req-build-yghxywzq/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, `__file__`, 'exec'))\" --no-user-cfg install --record /tmp/pip-record-axtqqq0z/install-record.txt --single-version-externally-managed --root /home/artal/sage/local/var/tmp/sage/build/scipy-1.4.1/inst --compile\" failed with error code 1 in /tmp/pip-req-build-yghxywzq/\nError: installing with pip3 failed",
    "created_at": "2020-05-15T18:49:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462275",
    "user": "https://github.com/enriqueartal"
}
```

<div id="comment:34" align="right">comment:34</div>

I compiled from scratch using gcc10. Besides the expected  failures of palp and sympow, these are the last lines of the log of scipy. 


    error: Command "gfortran -Wall -g -ffixed-form -fno-second-underscore -fPIC -fPIC -O3 -funroll-loops -Iscipy/sparse/linalg/eigen/arpack/ARPACK/SRC -I/home/artal/sage/local/lib/python3.7/site-packages/numpy/core/include -c -c scipy/sparse/linalg/eigen/arpack/ARPACK/SRC/dsaitr.f -o build/temp.linux-x86_64-3.7/scipy/sparse/linalg/eigen/arpack/ARPACK/SRC/dsaitr.o" failed with exit status 1
    Running setup.py install for scipy: finished with status 'error'
Cleaning up...
  Removing source in /tmp/pip-req-build-yghxywzq
Removed build tracker '/tmp/pip-req-tracker-maw6u14m'
Command "/home/artal/sage/local/bin/python3 -u -c "import setuptools, tokenize;__file__='/tmp/pip-req-build-yghxywzq/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\r\n', '\n');f.close();exec(compile(code, `__file__`, 'exec'))" --no-user-cfg install --record /tmp/pip-record-axtqqq0z/install-record.txt --single-version-externally-managed --root /home/artal/sage/local/var/tmp/sage/build/scipy-1.4.1/inst --compile" failed with error code 1 in /tmp/pip-req-build-yghxywzq/
Exception information:
Traceback (most recent call last):
  File "/home/artal/sage/local/lib/python3.7/site-packages/pip/_internal/cli/base_command.py", line 143, in main
    status = self.run(options, args)
  File "/home/artal/sage/local/lib/python3.7/site-packages/pip/_internal/commands/install.py", line 366, in run
    use_user_site=options.use_user_site,
  File "/home/artal/sage/local/lib/python3.7/site-packages/pip/_internal/req/__init__.py", line 49, in install_given_reqs
    **kwargs
  File "/home/artal/sage/local/lib/python3.7/site-packages/pip/_internal/req/req_install.py", line 791, in install
    spinner=spinner,
  File "/home/artal/sage/local/lib/python3.7/site-packages/pip/_internal/utils/misc.py", line 705, in call_subprocess
    % (command_desc, proc.returncode, cwd))
pip._internal.exceptions.InstallationError: Command "/home/artal/sage/local/bin/python3 -u -c "import setuptools, tokenize;__file__='/tmp/pip-req-build-yghxywzq/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\r\n', '\n');f.close();exec(compile(code, `__file__`, 'exec'))" --no-user-cfg install --record /tmp/pip-record-axtqqq0z/install-record.txt --single-version-externally-managed --root /home/artal/sage/local/var/tmp/sage/build/scipy-1.4.1/inst --compile" failed with error code 1 in /tmp/pip-req-build-yghxywzq/
Error: installing with pip3 failed



---

archive/issue_comments_462276.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nwhat's the status of here? are we really waiting for gcc10 starting to work?",
    "created_at": "2020-05-29T09:12:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462276",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:35" align="right">comment:35</div>

what's the status of here? are we really waiting for gcc10 starting to work?



---

archive/issue_comments_462277.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nNo, just waiting for review of this ticket and its dependency #29480.",
    "created_at": "2020-05-29T15:01:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462277",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:36" align="right">comment:36</div>

No, just waiting for review of this ticket and its dependency #29480.



---

archive/issue_comments_462278.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nI get doctest errors due to\n\n```\nDeprecationWarning: scipy.array is deprecated and will be removed in SciPy 2.0.0, use numpy.array instead\n```\nnamely, \n\n```\nsage -t --warn-long 76.6 src/sage/graphs/generic_graph.py\n**********************************************************************\nFile \"src/sage/graphs/generic_graph.py\", line 9789, in sage.graphs.generic_graph.GenericGraph.?\nFailed example:\n    G.pagerank(algorithm=\"Scipy\") # abs tol 1e-9\nExpected:\n    {1: 0.16112205885619563,\n     2: 0.1619531043247219,\n     3: 0.16112205885619563,\n     4: 0.2374999999999999,\n     5: 0.17775588228760858,\n     6: 0.100546895675278}\nGot:\n    doctest:warning\n....\n      File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/sage/doctest/forker.py\", line 1104, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.graphs.generic_graph.GenericGraph.?[7]>\", line 1, in <module>\n        G.pagerank(algorithm=\"Scipy\") # abs tol 1e-9\n      File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/sage/graphs/generic_graph.py\", line 9880, in pagerank\n        dangling=dangling)\n      File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/networkx/algorithms/link_analysis/pagerank_alg.py\", line 429, in pagerank_scipy\n        S = scipy.array(M.sum(axis=1)).flatten()\n      File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/scipy/_lib/deprecation.py\", line 19, in call\n        stacklevel=stacklevel)\n      File \"/usr/lib64/python3.7/warnings.py\", line 110, in _showwarnmsg\n        msg.file, msg.line)\n    :\n    DeprecationWarning: scipy.array is deprecated and will be removed in SciPy 2.0.0, use numpy.array instead\n```\n\nit seems that these warnings are coming from scipy itself, or from networkx\n(which in turn calls scipy).\n\nLet me see if upgrading networkx helps.",
    "created_at": "2020-05-29T17:30:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462278",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:37" align="right">comment:37</div>

I get doctest errors due to

```
DeprecationWarning: scipy.array is deprecated and will be removed in SciPy 2.0.0, use numpy.array instead
```
namely, 

```
sage -t --warn-long 76.6 src/sage/graphs/generic_graph.py
**********************************************************************
File "src/sage/graphs/generic_graph.py", line 9789, in sage.graphs.generic_graph.GenericGraph.?
Failed example:
    G.pagerank(algorithm="Scipy") # abs tol 1e-9
Expected:
    {1: 0.16112205885619563,
     2: 0.1619531043247219,
     3: 0.16112205885619563,
     4: 0.2374999999999999,
     5: 0.17775588228760858,
     6: 0.100546895675278}
Got:
    doctest:warning
....
      File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/sage/doctest/forker.py", line 1104, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.graphs.generic_graph.GenericGraph.?[7]>", line 1, in <module>
        G.pagerank(algorithm="Scipy") # abs tol 1e-9
      File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/sage/graphs/generic_graph.py", line 9880, in pagerank
        dangling=dangling)
      File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/networkx/algorithms/link_analysis/pagerank_alg.py", line 429, in pagerank_scipy
        S = scipy.array(M.sum(axis=1)).flatten()
      File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.7/site-packages/scipy/_lib/deprecation.py", line 19, in call
        stacklevel=stacklevel)
      File "/usr/lib64/python3.7/warnings.py", line 110, in _showwarnmsg
        msg.file, msg.line)
    :
    DeprecationWarning: scipy.array is deprecated and will be removed in SciPy 2.0.0, use numpy.array instead
```

it seems that these warnings are coming from scipy itself, or from networkx
(which in turn calls scipy).

Let me see if upgrading networkx helps.



---

archive/issue_comments_462279.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nNo, with networkx 2.4 one still gets these warnings, but they are fixed upstream, just not yet released, see \nhttps://github.com/networkx/networkx/commit/ea19baaff252468f5a911260430e057393d9637d",
    "created_at": "2020-05-29T17:41:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462279",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:38" align="right">comment:38</div>

No, with networkx 2.4 one still gets these warnings, but they are fixed upstream, just not yet released, see 
https://github.com/networkx/networkx/commit/ea19baaff252468f5a911260430e057393d9637d



---

archive/issue_comments_462280.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nSo we can patch networkx, or modify doctests, or suppress warning somehow (for the latter, I vaguely remember it's possible, but can't find it in docs)",
    "created_at": "2020-05-29T17:44:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462280",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:39" align="right">comment:39</div>

So we can patch networkx, or modify doctests, or suppress warning somehow (for the latter, I vaguely remember it's possible, but can't find it in docs)



---

archive/issue_comments_462281.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nFiltering out doctest warnings was done on one of the recent glpk tickets",
    "created_at": "2020-05-29T22:16:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462281",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:40" align="right">comment:40</div>

Filtering out doctest warnings was done on one of the recent glpk tickets



---

archive/issue_comments_462282.json:
```json
{
    "body": "Changed dependencies from **dropping py2 support, #29480** to **dropping py2 support, #29480, #29766**",
    "created_at": "2020-05-30T22:23:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462282",
    "user": "https://github.com/dimpase"
}
```

Changed dependencies from **dropping py2 support, #29480** to **dropping py2 support, #29480, #29766**



---

archive/issue_comments_462283.json:
```json
{
    "body": "Changed reviewer from **Isuru Fernando** to **Isuru Fernando, Dima Pasechnik**",
    "created_at": "2020-05-30T22:23:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462283",
    "user": "https://github.com/dimpase"
}
```

Changed reviewer from **Isuru Fernando** to **Isuru Fernando, Dima Pasechnik**



---

archive/issue_events_401637.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-05-30T22:23:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401637"
}
```



---

archive/issue_events_401638.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-05-30T22:23:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401638"
}
```



---

archive/issue_comments_462284.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nReplying to [@mkoeppe](#comment%3A40):\n> Filtering out doctest warnings was done on one of the recent glpk tickets\n\nI don't know how to filter multiline warnings with python backtraces.\n\nOK, I've opened #29766 to fix this. This one is good to go, modulo the latter.",
    "created_at": "2020-05-30T22:23:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462284",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:41" align="right">comment:41</div>

Replying to [@mkoeppe](#comment%3A40):
> Filtering out doctest warnings was done on one of the recent glpk tickets

I don't know how to filter multiline warnings with python backtraces.

OK, I've opened #29766 to fix this. This one is good to go, modulo the latter.



---

archive/issue_comments_462285.json:
```json
{
    "body": "Changed dependencies from **dropping py2 support, #29480, #29766** to **#29480, #29766**",
    "created_at": "2020-05-31T23:14:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462285",
    "user": "https://github.com/vbraun"
}
```

Changed dependencies from **dropping py2 support, #29480, #29766** to **#29480, #29766**



---

archive/issue_comments_462286.json:
```json
{
    "body": "Changed dependencies from **#29480, #29766** to **#29480**",
    "created_at": "2020-06-01T10:11:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462286",
    "user": "https://github.com/dimpase"
}
```

Changed dependencies from **#29480, #29766** to **#29480**



---

archive/issue_comments_462287.json:
```json
{
    "body": "Changed commit from **[`14bcb1f`](https://github.com/sagemath/sagetrac-mirror/commit/14bcb1f25653b3baf78b1523913be0dc73257a95)** to none",
    "created_at": "2020-06-01T10:11:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462287",
    "user": "https://github.com/dimpase"
}
```

Changed commit from **[`14bcb1f`](https://github.com/sagemath/sagetrac-mirror/commit/14bcb1f25653b3baf78b1523913be0dc73257a95)** to none



---

archive/issue_comments_462288.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\ndrop the networkx dependency with the latest patch (and rebase over latest beta).",
    "created_at": "2020-06-01T10:11:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462288",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:43" align="right">comment:43</div>

drop the networkx dependency with the latest patch (and rebase over latest beta).



---

archive/issue_comments_462289.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/local_conda_forge_macos_standard__build_error_with_numpy](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/local_conda_forge_macos_standard__build_error_with_numpy)** to **[u/dimpase/local_conda_forge_macos_standard__build_error_with_numpy](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/local_conda_forge_macos_standard__build_error_with_numpy)**",
    "created_at": "2020-06-01T10:11:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462289",
    "user": "https://github.com/dimpase"
}
```

Changed branch from **[u/mkoeppe/local_conda_forge_macos_standard__build_error_with_numpy](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/local_conda_forge_macos_standard__build_error_with_numpy)** to **[u/dimpase/local_conda_forge_macos_standard__build_error_with_numpy](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/local_conda_forge_macos_standard__build_error_with_numpy)**



---

archive/issue_comments_462290.json:
```json
{
    "body": "Changed branch from **[u/dimpase/local_conda_forge_macos_standard__build_error_with_numpy](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/local_conda_forge_macos_standard__build_error_with_numpy)** to **[u/dimpase/trac/local_conda_forge_macos_standard__build_error_with_numpy](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/trac/local_conda_forge_macos_standard__build_error_with_numpy)**",
    "created_at": "2020-06-01T10:11:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462290",
    "user": "https://github.com/dimpase"
}
```

Changed branch from **[u/dimpase/local_conda_forge_macos_standard__build_error_with_numpy](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/local_conda_forge_macos_standard__build_error_with_numpy)** to **[u/dimpase/trac/local_conda_forge_macos_standard__build_error_with_numpy](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/trac/local_conda_forge_macos_standard__build_error_with_numpy)**



---

archive/issue_comments_462291.json:
```json
{
    "body": "<div id=\"comment:44\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9a3617dc36f7808981de972dcb08b1612eaaa85f\"><code>9a3617d</code></a></td><td><code>build/pkgs/cython: Update to 0.29.16</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4a606b61bef5de1276d97e2e6e1b73b1c65a33de\"><code>4a606b6</code></a></td><td><code>build/pkgs/cython/checksums.ini: Use predictable URL for upstream_url pattern</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e9a7cb085a705dae2113e5ea8c876d54adcf4e99\"><code>e9a7cb0</code></a></td><td><code>Update Cython to 0.29.17</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/15911cb9ac22f66fe1786e98ef06d9664c04a3e4\"><code>15911cb</code></a></td><td><code>build/pkgs/numpy: Update numpy to 1.18.2, back out numpy-1.10.2-no-hardcode-blas.patch (does not apply)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96e7a41f2079c580acab899c4dabfd9b9552ab38\"><code>96e7a41</code></a></td><td><code>Update numpy to 1.18.4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/78b49077cc924e5657fc70a86425682de58999e6\"><code>78b4907</code></a></td><td><code>Update scipy to 1.4.1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/54595b0db66d0ad14f96273b12190fb241429612\"><code>54595b0</code></a></td><td><code>build/pkgs/pybind11: New, dependency of scipy</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c005562fed79e91883fa808237f5d52ceb024fd3\"><code>c005562</code></a></td><td><code>suppress scipy deprecation warnings</code></td></tr></table>\n",
    "created_at": "2020-06-01T10:11:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462291",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:44"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9a3617dc36f7808981de972dcb08b1612eaaa85f"><code>9a3617d</code></a></td><td><code>build/pkgs/cython: Update to 0.29.16</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4a606b61bef5de1276d97e2e6e1b73b1c65a33de"><code>4a606b6</code></a></td><td><code>build/pkgs/cython/checksums.ini: Use predictable URL for upstream_url pattern</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e9a7cb085a705dae2113e5ea8c876d54adcf4e99"><code>e9a7cb0</code></a></td><td><code>Update Cython to 0.29.17</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/15911cb9ac22f66fe1786e98ef06d9664c04a3e4"><code>15911cb</code></a></td><td><code>build/pkgs/numpy: Update numpy to 1.18.2, back out numpy-1.10.2-no-hardcode-blas.patch (does not apply)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96e7a41f2079c580acab899c4dabfd9b9552ab38"><code>96e7a41</code></a></td><td><code>Update numpy to 1.18.4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/78b49077cc924e5657fc70a86425682de58999e6"><code>78b4907</code></a></td><td><code>Update scipy to 1.4.1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/54595b0db66d0ad14f96273b12190fb241429612"><code>54595b0</code></a></td><td><code>build/pkgs/pybind11: New, dependency of scipy</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c005562fed79e91883fa808237f5d52ceb024fd3"><code>c005562</code></a></td><td><code>suppress scipy deprecation warnings</code></td></tr></table>




---

archive/issue_comments_462292.json:
```json
{
    "body": "Commit: **[`c005562`](https://github.com/sagemath/sagetrac-mirror/commit/c005562fed79e91883fa808237f5d52ceb024fd3)**",
    "created_at": "2020-06-01T10:11:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462292",
    "user": "https://github.com/dimpase"
}
```

Commit: **[`c005562`](https://github.com/sagemath/sagetrac-mirror/commit/c005562fed79e91883fa808237f5d52ceb024fd3)**



---

archive/issue_comments_462293.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nReplying to [@mkoeppe](#comment%3A40):\n> Filtering out doctest warnings was done on one of the recent glpk tickets\n\nadded the last commit to suppress the warning in the proper Pythonic way. The rest stays (mod rebase)",
    "created_at": "2020-06-01T10:13:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462293",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:45" align="right">comment:45</div>

Replying to [@mkoeppe](#comment%3A40):
> Filtering out doctest warnings was done on one of the recent glpk tickets

added the last commit to suppress the warning in the proper Pythonic way. The rest stays (mod rebase)



---

archive/issue_comments_462294.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nI'm getting various test failures",
    "created_at": "2020-06-04T22:03:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462294",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:46" align="right">comment:46</div>

I'm getting various test failures



---

archive/issue_events_401639.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-06-04T22:03:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401639"
}
```



---

archive/issue_events_401640.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-06-04T22:03:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401640"
}
```



---

archive/issue_comments_462295.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nAn upgrade ticket like this really needs to be run on the [GitHub](../wiki/GitHub) test infrastructure...",
    "created_at": "2020-06-04T22:21:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462295",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:47" align="right">comment:47</div>

An upgrade ticket like this really needs to be run on the [GitHub](../wiki/GitHub) test infrastructure...



---

archive/issue_comments_462296.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nrunning GH Actions test here https://github.com/dimpase/sage/pull/9",
    "created_at": "2020-06-04T22:39:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462296",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:48" align="right">comment:48</div>

running GH Actions test here https://github.com/dimpase/sage/pull/9



---

archive/issue_comments_462297.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nReplying to [@mkoeppe](#comment%3A47):\n> An upgrade ticket like this really needs to be run on the [GitHub](../wiki/GitHub) test infrastructure...\n\nUnfortunately there seem to be problems with runner setups, e.g. here \nhttps://github.com/dimpase/sage/runs/740349791?check_suite_focus=true\n- this is `docker (archlinux-latest, standard-gcc_spkg)`\nI see\n\n```\n2020-06-04T22:39:01.9688082Z Suggested packages:\n2020-06-04T22:39:01.9688790Z   python3-pytest python-setuptools-doc\n```\nand a lot of \n\n```\n2020-06-05T03:08:41.2134392Z Failure: ModuleNotFoundError (No module named 'pytest') ... ERROR\n```\nwhich seems to suggest that `python3-pytest` is a requirement.\n\nDo you know how to fix this?\n\n(there are other errors pointing at internal problems of runners)\n\nCan we easily extend setup to use our own runners?",
    "created_at": "2020-06-05T13:09:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462297",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:49" align="right">comment:49</div>

Replying to [@mkoeppe](#comment%3A47):
> An upgrade ticket like this really needs to be run on the [GitHub](../wiki/GitHub) test infrastructure...

Unfortunately there seem to be problems with runner setups, e.g. here 
https://github.com/dimpase/sage/runs/740349791?check_suite_focus=true
- this is `docker (archlinux-latest, standard-gcc_spkg)`
I see

```
2020-06-04T22:39:01.9688082Z Suggested packages:
2020-06-04T22:39:01.9688790Z   python3-pytest python-setuptools-doc
```
and a lot of 

```
2020-06-05T03:08:41.2134392Z Failure: ModuleNotFoundError (No module named 'pytest') ... ERROR
```
which seems to suggest that `python3-pytest` is a requirement.

Do you know how to fix this?

(there are other errors pointing at internal problems of runners)

Can we easily extend setup to use our own runners?



---

archive/issue_comments_462298.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nApparently, running the testsuite of networkx requires pytest. Let's discuss this on #29766.\n\nI don't think this has anything to do with [GitHub](../wiki/GitHub).",
    "created_at": "2020-06-06T04:38:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462298",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:50" align="right">comment:50</div>

Apparently, running the testsuite of networkx requires pytest. Let's discuss this on #29766.

I don't think this has anything to do with [GitHub](../wiki/GitHub).



---

archive/issue_comments_462299.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nIn the meantime, numpy 1.18.5 has appeared",
    "created_at": "2020-06-06T05:25:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462299",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:51" align="right">comment:51</div>

In the meantime, numpy 1.18.5 has appeared



---

archive/issue_comments_462300.json:
```json
{
    "body": "Changed branch from **[u/dimpase/trac/local_conda_forge_macos_standard__build_error_with_numpy](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/trac/local_conda_forge_macos_standard__build_error_with_numpy)** to **[u/mkoeppe/trac/local_conda_forge_macos_standard__build_error_with_numpy](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/trac/local_conda_forge_macos_standard__build_error_with_numpy)**",
    "created_at": "2020-06-06T05:28:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462300",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/dimpase/trac/local_conda_forge_macos_standard__build_error_with_numpy](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/trac/local_conda_forge_macos_standard__build_error_with_numpy)** to **[u/mkoeppe/trac/local_conda_forge_macos_standard__build_error_with_numpy](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/trac/local_conda_forge_macos_standard__build_error_with_numpy)**



---

archive/issue_comments_462301.json:
```json
{
    "body": "Changed commit from **[`c005562`](https://github.com/sagemath/sagetrac-mirror/commit/c005562fed79e91883fa808237f5d52ceb024fd3)** to **[`56a6fe1`](https://github.com/sagemath/sagetrac-mirror/commit/56a6fe17708622cf6066629e7a5eeb2baead5508)**",
    "created_at": "2020-06-06T05:34:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462301",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[`c005562`](https://github.com/sagemath/sagetrac-mirror/commit/c005562fed79e91883fa808237f5d52ceb024fd3)** to **[`56a6fe1`](https://github.com/sagemath/sagetrac-mirror/commit/56a6fe17708622cf6066629e7a5eeb2baead5508)**



---

archive/issue_comments_462302.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nTests (with #29766) run at https://github.com/mkoeppe/sage/pull/38/checks\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/56a6fe17708622cf6066629e7a5eeb2baead5508\"><code>56a6fe1</code></a></td><td><code>build/pkgs/numpy: Update to 1.18.5</code></td></tr></table>\n",
    "created_at": "2020-06-06T05:34:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462302",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:53" align="right">comment:53</div>

Tests (with #29766) run at https://github.com/mkoeppe/sage/pull/38/checks

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/56a6fe17708622cf6066629e7a5eeb2baead5508"><code>56a6fe1</code></a></td><td><code>build/pkgs/numpy: Update to 1.18.5</code></td></tr></table>




---

archive/issue_comments_462303.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,8 @@\n Follow-up from the update of numpy to 1.16.6 (#29429):\n \n-We update NumPy to the latest release, 1.18.4 (which requires updating Cython to at least 0.29.14 - #29480)\n-and scipy to latest release, 1.4.1.\n+We update \n+- NumPy to the latest release, 1.18.5\n+- scipy to latest release, 1.4.1.\n+(latest as of 2020-06-05; both versions (and also the upcoming numpy 1.19) support python >= 3.6)\n \n+\n``````\n",
    "created_at": "2020-06-06T05:36:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462303",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,8 @@
 Follow-up from the update of numpy to 1.16.6 (#29429):
 
-We update NumPy to the latest release, 1.18.4 (which requires updating Cython to at least 0.29.14 - #29480)
-and scipy to latest release, 1.4.1.
+We update 
+- NumPy to the latest release, 1.18.5
+- scipy to latest release, 1.4.1.
+(latest as of 2020-06-05; both versions (and also the upcoming numpy 1.19) support python >= 3.6)
 
+
``````




---

archive/issue_events_401641.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-06-06T05:36:52Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "title_is": "Upgrade NumPy to 1.18.5, scipy to 1.4.1, add pybind11 package",
    "title_was": "Upgrade NumPy to 1.18.4, scipy to 1.4.1, add pybind11 package [py3 only!]",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401641"
}
```



---

archive/issue_events_401642.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-06-06T05:37:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401642"
}
```



---

archive/issue_events_401643.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-06-06T05:37:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401643"
}
```



---

archive/issue_comments_462304.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nCan this ticket be tested successfully by itself or only as part of the `networkx` upgrade in #29766?  If the latter, then let's close this ticket and merge it into #29766.",
    "created_at": "2020-06-06T18:54:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462304",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:56" align="right">comment:56</div>

Can this ticket be tested successfully by itself or only as part of the `networkx` upgrade in #29766?  If the latter, then let's close this ticket and merge it into #29766.



---

archive/issue_comments_462305.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nReplying to [@mkoeppe](#comment%3A56):\n> Can this ticket be tested successfully by itself or only as part of the `networkx` upgrade in #29766?  If the latter, then let's close this ticket and merge it into #29766.\n\nno, this one does not need #29766",
    "created_at": "2020-06-06T20:57:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462305",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:57" align="right">comment:57</div>

Replying to [@mkoeppe](#comment%3A56):
> Can this ticket be tested successfully by itself or only as part of the `networkx` upgrade in #29766?  If the latter, then let's close this ticket and merge it into #29766.

no, this one does not need #29766



---

archive/issue_comments_462306.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nOK, running a new test without #29766 at https://github.com/mkoeppe/sage/pull/39/checks",
    "created_at": "2020-06-06T21:39:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462306",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:58" align="right">comment:58</div>

OK, running a new test without #29766 at https://github.com/mkoeppe/sage/pull/39/checks



---

archive/issue_comments_462307.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nReplying to [@dimpase](#comment%3A57):\n> Replying to [@mkoeppe](#comment%3A56):\n> > Can this ticket be tested successfully by itself or only as part of the `networkx` upgrade in #29766?  If the latter, then let's close this ticket and merge it into #29766.\n\n> \n> no, this one does not need #29766\n\nActually, on `ubuntu-xenial-standard` (https://github.com/mkoeppe/sage/runs/745921419), I see lots of failures from the `networkx` testsuite such as this one:\n\n```\nFile \"/sage/local/var/tmp/sage/build/networkx-2.2/src/networkx/drawing/nx_pylab.py\", line 249, in networkx.drawing.nx_pylab.draw_networkx\nFailed example:\n    nx.draw(G)\nException raised:\n    Traceback (most recent call last):\n      File \"/sage/local/lib/python3.7/doctest.py\", line 1329, in __run\n        compileflags, 1), test.globs)\n      File \"<doctest networkx.drawing.nx_pylab.draw_networkx[1]>\", line 1, in <module>\n        nx.draw(G)\n      File \"/sage/local/var/tmp/sage/build/networkx-2.2/src/networkx/drawing/nx_pylab.py\", line 126, in draw\n        draw_networkx(G, pos=pos, ax=ax, **kwds)\n      File \"/sage/local/var/tmp/sage/build/networkx-2.2/src/networkx/drawing/nx_pylab.py\", line 278, in draw_networkx\n        edge_collection = draw_networkx_edges(G, pos, arrows=arrows, **kwds)\n      File \"/sage/local/var/tmp/sage/build/networkx-2.2/src/networkx/drawing/nx_pylab.py\", line 611, in draw_networkx_edges\n        if cb.is_numlike(alpha):\n    AttributeError: module 'matplotlib.cbook' has no attribute 'is_numlike'\n```",
    "created_at": "2020-06-07T02:57:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462307",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:59" align="right">comment:59</div>

Replying to [@dimpase](#comment%3A57):
> Replying to [@mkoeppe](#comment%3A56):
> > Can this ticket be tested successfully by itself or only as part of the `networkx` upgrade in #29766?  If the latter, then let's close this ticket and merge it into #29766.

> 
> no, this one does not need #29766

Actually, on `ubuntu-xenial-standard` (https://github.com/mkoeppe/sage/runs/745921419), I see lots of failures from the `networkx` testsuite such as this one:

```
File "/sage/local/var/tmp/sage/build/networkx-2.2/src/networkx/drawing/nx_pylab.py", line 249, in networkx.drawing.nx_pylab.draw_networkx
Failed example:
    nx.draw(G)
Exception raised:
    Traceback (most recent call last):
      File "/sage/local/lib/python3.7/doctest.py", line 1329, in __run
        compileflags, 1), test.globs)
      File "<doctest networkx.drawing.nx_pylab.draw_networkx[1]>", line 1, in <module>
        nx.draw(G)
      File "/sage/local/var/tmp/sage/build/networkx-2.2/src/networkx/drawing/nx_pylab.py", line 126, in draw
        draw_networkx(G, pos=pos, ax=ax, **kwds)
      File "/sage/local/var/tmp/sage/build/networkx-2.2/src/networkx/drawing/nx_pylab.py", line 278, in draw_networkx
        edge_collection = draw_networkx_edges(G, pos, arrows=arrows, **kwds)
      File "/sage/local/var/tmp/sage/build/networkx-2.2/src/networkx/drawing/nx_pylab.py", line 611, in draw_networkx_edges
        if cb.is_numlike(alpha):
    AttributeError: module 'matplotlib.cbook' has no attribute 'is_numlike'
```



---

archive/issue_events_401644.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-06-07T03:03:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401644"
}
```



---

archive/issue_comments_462308.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nTherefore, let's close this ticket and continue on #29766.",
    "created_at": "2020-06-07T03:03:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29425#issuecomment-462308",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:60" align="right">comment:60</div>

Therefore, let's close this ticket and continue on #29766.



---

archive/issue_events_401645.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-06-11T22:54:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401645"
}
```



---

archive/issue_events_401646.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-06-11T22:54:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401646"
}
```



---

archive/issue_events_401647.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-06-20T06:24:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401647"
}
```



---

archive/issue_events_401648.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-06-20T06:24:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "https://github.com/sagemath/sage/labels/duplicate",
    "label_color": "c6c6c6",
    "label_name": "duplicate",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401648"
}
```



---

archive/issue_events_401649.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-06-20T06:24:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401649"
}
```



---

archive/issue_events_401650.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-06-20T06:24:41Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29425",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29425#event-401650"
}
```
