# Issue 29673: spkg-configure.m4 for sympow

archive/issues_029436.json:
```json
{
    "body": "this should be easy, just binaries (and possibly data, tbd)\n\nin Debian it's `sympow` and (maybe needed) `sympow-data`\n\n**CC:**  @orlitzky @mkoeppe @isuruf\n\n**Branch:** [99ebe047c653cccc930d667876f8c7782138d6eb](https://github.com/sagemath/sagetrac-mirror/commit/99ebe047c653cccc930d667876f8c7782138d6eb)\n\n**Reviewer:** Michael Orlitzky\n\n**Author:** Dima Pasechnik\n\nIssue created by migration from https://trac.sagemath.org/ticket/29673\n\n",
    "closed_at": "2020-06-03T22:32:11Z",
    "created_at": "2020-05-10T19:34:24Z",
    "labels": [
        "component: build: configure",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "spkg-configure.m4 for sympow",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29673",
    "user": "https://github.com/dimpase"
}
```
this should be easy, just binaries (and possibly data, tbd)

in Debian it's `sympow` and (maybe needed) `sympow-data`

**CC:**  @orlitzky @mkoeppe @isuruf

**Branch:** [99ebe047c653cccc930d667876f8c7782138d6eb](https://github.com/sagemath/sagetrac-mirror/commit/99ebe047c653cccc930d667876f8c7782138d6eb)

**Reviewer:** Michael Orlitzky

**Author:** Dima Pasechnik

Issue created by migration from https://trac.sagemath.org/ticket/29673





---

archive/issue_comments_555125.json:
```json
{
    "body": "**Commit:** [2113187d27646192083d29925b2873bdee0e6096](https://github.com/sagemath/sagetrac-mirror/commit/2113187d27646192083d29925b2873bdee0e6096)",
    "created_at": "2020-05-10T22:49:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29673#issuecomment-555125",
    "user": "https://github.com/dimpase"
}
```

**Commit:** [2113187d27646192083d29925b2873bdee0e6096](https://github.com/sagemath/sagetrac-mirror/commit/2113187d27646192083d29925b2873bdee0e6096)



---

archive/issue_comments_555126.json:
```json
{
    "body": "<a id='comment:1'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2113187d27646192083d29925b2873bdee0e6096\">2113187</a></td><td><code>spkg-configure for sympow</code></td></tr></table>\n",
    "created_at": "2020-05-10T22:49:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29673#issuecomment-555126",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:1'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2113187d27646192083d29925b2873bdee0e6096">2113187</a></td><td><code>spkg-configure for sympow</code></td></tr></table>




---

archive/issue_comments_555127.json:
```json
{
    "body": "**Author:** Dima Pasechnik",
    "created_at": "2020-05-10T22:49:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29673#issuecomment-555127",
    "user": "https://github.com/dimpase"
}
```

**Author:** Dima Pasechnik



---

archive/issue_comments_555128.json:
```json
{
    "body": "**Branch:** [u/dimpase/packages/sympowconfig](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/sympowconfig)",
    "created_at": "2020-05-10T22:49:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29673#issuecomment-555128",
    "user": "https://github.com/dimpase"
}
```

**Branch:** [u/dimpase/packages/sympowconfig](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/sympowconfig)



---

archive/issue_comments_555129.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2020-05-10T22:49:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29673#issuecomment-555129",
    "user": "https://github.com/dimpase"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_555130.json:
```json
{
    "body": "<a id='comment:3'></a>\nWorks for me with the sympow fork. As of five minutes ago, this is `sci-mathematics/sympow` in Gentoo. Can you add that to gentoo.txt?\n\nMy only other question is why you settled on testing `$ac_cv_path_SYMPOW` instead of just `$SYMPOW`? The name of that cache variable is documented, so it should work just as well, but it was surprising to me.",
    "created_at": "2020-05-18T01:11:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29673#issuecomment-555130",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:3'></a>
Works for me with the sympow fork. As of five minutes ago, this is `sci-mathematics/sympow` in Gentoo. Can you add that to gentoo.txt?

My only other question is why you settled on testing `$ac_cv_path_SYMPOW` instead of just `$SYMPOW`? The name of that cache variable is documented, so it should work just as well, but it was surprising to me.



---

archive/issue_comments_555131.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f36ccbacf404a18426830932f3835458c7141206\">f36ccba</a></td><td><code>spkg-configure for sympow</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/99ebe047c653cccc930d667876f8c7782138d6eb\">99ebe04</a></td><td><code>add gentoo package name</code></td></tr></table>\n",
    "created_at": "2020-05-18T10:05:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29673#issuecomment-555131",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f36ccbacf404a18426830932f3835458c7141206">f36ccba</a></td><td><code>spkg-configure for sympow</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/99ebe047c653cccc930d667876f8c7782138d6eb">99ebe04</a></td><td><code>add gentoo package name</code></td></tr></table>




---

archive/issue_comments_555132.json:
```json
{
    "body": "**Changing commit** from \"[2113187d27646192083d29925b2873bdee0e6096](https://github.com/sagemath/sagetrac-mirror/commit/2113187d27646192083d29925b2873bdee0e6096)\" to \"[99ebe047c653cccc930d667876f8c7782138d6eb](https://github.com/sagemath/sagetrac-mirror/commit/99ebe047c653cccc930d667876f8c7782138d6eb)\".",
    "created_at": "2020-05-18T10:05:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29673#issuecomment-555132",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[2113187d27646192083d29925b2873bdee0e6096](https://github.com/sagemath/sagetrac-mirror/commit/2113187d27646192083d29925b2873bdee0e6096)" to "[99ebe047c653cccc930d667876f8c7782138d6eb](https://github.com/sagemath/sagetrac-mirror/commit/99ebe047c653cccc930d667876f8c7782138d6eb)".



---

archive/issue_comments_555133.json:
```json
{
    "body": "<a id='comment:5'></a>\nAdded gentoo info.\n\nRegarding `SYMPOW` vs `ac_cv_path_SYMPOW`, the latter seems to be what we normally use in many other spkg-configure.m4 files.\n\nIt appears that using `SYMPOW` is more hacky, e.g. if it's set then the test is not carried out, etc. E.g. if it's set to something not in PATH, it will probably not be found later on by sagelib.",
    "created_at": "2020-05-18T10:11:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29673#issuecomment-555133",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:5'></a>
Added gentoo info.

Regarding `SYMPOW` vs `ac_cv_path_SYMPOW`, the latter seems to be what we normally use in many other spkg-configure.m4 files.

It appears that using `SYMPOW` is more hacky, e.g. if it's set then the test is not carried out, etc. E.g. if it's set to something not in PATH, it will probably not be found later on by sagelib.



---

archive/issue_comments_555134.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [dimpase](#comment%3A5):\n> \n> It appears that using `SYMPOW` is more hacky, e.g. if it's set then the test is not carried out, etc. E.g. if it's set to something not in PATH, it will probably not be found later on by sagelib.\n> \n\n\nYou mean if the user exports `SYMPOW=\"junk or some non-PATH location\"`? I think the only reason `ac_cv_path_SYMPOW` avoids that same problem is because of the ugly variable name. Instead of `SYMPOW` we could use e.g. `SAGE_SYMPOW_PATH` or something like that to the same end.\n\nIn another life, we could make overrides work with e.g. `--with-sympow=/home/mjo/bin/sympow` but I think we all have better things to do right now.",
    "created_at": "2020-05-18T11:40:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29673#issuecomment-555134",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:6'></a>
Replying to [dimpase](#comment%3A5):
> 
> It appears that using `SYMPOW` is more hacky, e.g. if it's set then the test is not carried out, etc. E.g. if it's set to something not in PATH, it will probably not be found later on by sagelib.
> 


You mean if the user exports `SYMPOW="junk or some non-PATH location"`? I think the only reason `ac_cv_path_SYMPOW` avoids that same problem is because of the ugly variable name. Instead of `SYMPOW` we could use e.g. `SAGE_SYMPOW_PATH` or something like that to the same end.

In another life, we could make overrides work with e.g. `--with-sympow=/home/mjo/bin/sympow` but I think we all have better things to do right now.



---

archive/issue_comments_555135.json:
```json
{
    "body": "**Reviewer:** Michael Orlitzky",
    "created_at": "2020-05-18T11:42:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29673#issuecomment-555135",
    "user": "https://github.com/orlitzky"
}
```

**Reviewer:** Michael Orlitzky



---

archive/issue_comments_555136.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2020-05-18T11:42:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29673#issuecomment-555136",
    "user": "https://github.com/orlitzky"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_555137.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [mjo](#comment%3A6):\n> Replying to [dimpase](#comment%3A5):\n> > \n> > It appears that using `SYMPOW` is more hacky, e.g. if it's set then the test is not carried out, etc. E.g. if it's set to something not in PATH, it will probably not be found later on by sagelib.\n> > \n\n> \n> You mean if the user exports `SYMPOW=\"junk or some non-PATH location\"`? I think the only reason `ac_cv_path_SYMPOW` avoids that same problem is because of the ugly variable name. Instead of `SYMPOW` we could use e.g. `SAGE_SYMPOW_PATH` or something like that to the same end.\n\n\nAutoconf docs are silent on what happens if `ac_cv_path_SYMPOW` is pre-set, so it appears to be more robust.\n\nThanks for review!",
    "created_at": "2020-05-18T11:57:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29673#issuecomment-555137",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:8'></a>
Replying to [mjo](#comment%3A6):
> Replying to [dimpase](#comment%3A5):
> > 
> > It appears that using `SYMPOW` is more hacky, e.g. if it's set then the test is not carried out, etc. E.g. if it's set to something not in PATH, it will probably not be found later on by sagelib.
> > 

> 
> You mean if the user exports `SYMPOW="junk or some non-PATH location"`? I think the only reason `ac_cv_path_SYMPOW` avoids that same problem is because of the ugly variable name. Instead of `SYMPOW` we could use e.g. `SAGE_SYMPOW_PATH` or something like that to the same end.


Autoconf docs are silent on what happens if `ac_cv_path_SYMPOW` is pre-set, so it appears to be more robust.

Thanks for review!



---

archive/issue_comments_555138.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [dimpase](#comment%3A8):\n> \n> Autoconf docs are silent on what happens if `ac_cv_path_SYMPOW` is pre-set, so it appears to be more robust.\n\n\nI can't find any explicit docs, but as a cache variable, it does what you'd expect: the configure script first tests the value of `ac_cv_path_SYMPOW`, and if it's set, its value gets used in lieu of the check:\n\n```\nif ${ac_cv_path_SYMPOW+:} false; then :\n  $as_echo_n \"(cached) \" >&6\nelse\n  # the check gets run and ac_cv_path_SYMPOW is populated\nfi\nSYMPOW=$ac_cv_path_SYMPOW\n```",
    "created_at": "2020-05-18T12:15:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29673#issuecomment-555138",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:9'></a>
Replying to [dimpase](#comment%3A8):
> 
> Autoconf docs are silent on what happens if `ac_cv_path_SYMPOW` is pre-set, so it appears to be more robust.


I can't find any explicit docs, but as a cache variable, it does what you'd expect: the configure script first tests the value of `ac_cv_path_SYMPOW`, and if it's set, its value gets used in lieu of the check:

```
if ${ac_cv_path_SYMPOW+:} false; then :
  $as_echo_n "(cached) " >&6
else
  # the check gets run and ac_cv_path_SYMPOW is populated
fi
SYMPOW=$ac_cv_path_SYMPOW
```



---

archive/issue_events_085308.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-06-03T22:32:11Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29673",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29673#event-85308"
}
```



---

archive/issue_comments_555139.json:
```json
{
    "body": "**Changing branch** from \"[u/dimpase/packages/sympowconfig](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/sympowconfig)\" to \"[99ebe047c653cccc930d667876f8c7782138d6eb](https://github.com/sagemath/sagetrac-mirror/commit/99ebe047c653cccc930d667876f8c7782138d6eb)\".",
    "created_at": "2020-06-03T22:32:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29673#issuecomment-555139",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/dimpase/packages/sympowconfig](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/sympowconfig)" to "[99ebe047c653cccc930d667876f8c7782138d6eb](https://github.com/sagemath/sagetrac-mirror/commit/99ebe047c653cccc930d667876f8c7782138d6eb)".



---

archive/issue_comments_555140.json:
```json
{
    "body": "**Changing commit** from \"[99ebe047c653cccc930d667876f8c7782138d6eb](https://github.com/sagemath/sagetrac-mirror/commit/99ebe047c653cccc930d667876f8c7782138d6eb)\" to \"\".",
    "created_at": "2020-07-14T22:38:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29673#issuecomment-555140",
    "user": "https://github.com/mkoeppe"
}
```

**Changing commit** from "[99ebe047c653cccc930d667876f8c7782138d6eb](https://github.com/sagemath/sagetrac-mirror/commit/99ebe047c653cccc930d667876f8c7782138d6eb)" to "".



---

archive/issue_comments_555141.json:
```json
{
    "body": "<a id='comment:11'></a>\nFollow-up: It looks like this accepts a broken sympow on fedora-32 - #3360",
    "created_at": "2020-07-14T22:38:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29673#issuecomment-555141",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>
Follow-up: It looks like this accepts a broken sympow on fedora-32 - #3360



---

archive/issue_comments_555142.json:
```json
{
    "body": "<a id='comment:12'></a>\nAlso with `sympow` on `ubuntu-bionic-standard` (https://github.com/mkoeppe/sage/runs/867730944)",
    "created_at": "2020-07-14T22:42:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29673#issuecomment-555142",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>
Also with `sympow` on `ubuntu-bionic-standard` (https://github.com/mkoeppe/sage/runs/867730944)



---

archive/issue_comments_555143.json:
```json
{
    "body": "<a id='comment:13'></a>\nalso `fedora-28-standard` (https://github.com/mkoeppe/sage/runs/867731144)",
    "created_at": "2020-07-14T22:44:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29673#issuecomment-555143",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>
also `fedora-28-standard` (https://github.com/mkoeppe/sage/runs/867731144)



---

archive/issue_comments_555144.json:
```json
{
    "body": "<a id='comment:14'></a>\nI've opened #30147 (Fix `spkg-configure.m4` for `sympow`) for this.\nPlease fix!",
    "created_at": "2020-07-14T22:47:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29673",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29673#issuecomment-555144",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>
I've opened #30147 (Fix `spkg-configure.m4` for `sympow`) for this.
Please fix!
