# Issue 29285: Unbreak the build when pyenv is present

archive/issues_029048.json:
```json
{
    "assignees": [],
    "body": "The build fails when [pyenv](https://github.com/pyenv/pyenv) is present, as reported in  [report](https://groups.google.com/d/msg/sage-devel/-cGmntUHXqE/Pw02KLksCgAJ) and also in #32749/#33103.\n\nWe fix it by rejecting the pyenv shims for `sage-bootstrap-python`.\n\nTickets:\n- #29461 sage --gdb not working\n- #32531: `SAGE_ROOT/tox.ini`: Add variants that provision a system python using `pyenv`\n\nCC:  @embray @mkoeppe @slel @tobiasdiez @jhpalmieri\n\nBranch/Commit: **[376932f](https://github.com/sagemath/sagetrac-mirror/commit/376932f6933c7c210dc169d5682489f454229c66)**\n\nReviewer: **John Palmieri**\n\nAuthor: **Matthias Koeppe**\n\nComponent: **build: configure**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29285_\n\n",
    "closed_at": "2022-01-18T22:01:21Z",
    "created_at": "2020-03-06T14:53:42Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build%3A%20configure",
        "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Unbreak the build when pyenv is present",
    "type": "issue",
    "updated_at": "2022-01-18T22:01:21Z",
    "url": "https://github.com/sagemath/sage/issues/29285",
    "user": "https://github.com/dimpase"
}
```
The build fails when [pyenv](https://github.com/pyenv/pyenv) is present, as reported in  [report](https://groups.google.com/d/msg/sage-devel/-cGmntUHXqE/Pw02KLksCgAJ) and also in #32749/#33103.

We fix it by rejecting the pyenv shims for `sage-bootstrap-python`.

Tickets:
- #29461 sage --gdb not working
- #32531: `SAGE_ROOT/tox.ini`: Add variants that provision a system python using `pyenv`

CC:  @embray @mkoeppe @slel @tobiasdiez @jhpalmieri

Branch/Commit: **[376932f](https://github.com/sagemath/sagetrac-mirror/commit/376932f6933c7c210dc169d5682489f454229c66)**

Reviewer: **John Palmieri**

Author: **Matthias Koeppe**

Component: **build: configure**

_Issue created by migration from https://trac.sagemath.org/ticket/29285_





---

archive/issue_events_402611.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-03-06T14:53:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29285#event-402611"
}
```



---

archive/issue_events_402612.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-03-06T14:53:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build%3A%20configure",
    "label_color": "000080",
    "label_name": "c: build: configure",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29285#event-402612"
}
```



---

archive/issue_events_402613.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-03-06T14:53:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29285#event-402613"
}
```



---

archive/issue_events_402614.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-03-06T14:53:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29285#event-402614"
}
```



---

archive/issue_comments_459322.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nWho's doing something with pyenv?\n\nI don't think we need to provide work-arounds for every conceivable user environment misconfiguration.",
    "created_at": "2020-03-06T14:55:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29285#issuecomment-459322",
    "user": "https://github.com/embray"
}
```

<div id="comment:1" align="right">comment:1</div>

Who's doing something with pyenv?

I don't think we need to provide work-arounds for every conceivable user environment misconfiguration.



---

archive/issue_comments_459323.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nReplying to [@embray](#comment:1):\n> Who's doing something with pyenv?\n\nhttps://dblp.org/pers/k/Kruppa:Alexander.html\n\n> I don't think we need to provide work-arounds for every conceivable user environment misconfiguration.",
    "created_at": "2020-03-06T15:01:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29285#issuecomment-459323",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:2" align="right">comment:2</div>

Replying to [@embray](#comment:1):
> Who's doing something with pyenv?

https://dblp.org/pers/k/Kruppa:Alexander.html

> I don't think we need to provide work-arounds for every conceivable user environment misconfiguration.



---

archive/issue_comments_459324.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nPyenv creates major issues with packages sometimes, I can imagine what Sagemath might be going about. My easiest fix would be symlinking the two paths together which allows communication, between your bin and other paths, it did work for me when I was trying simple builds, of course now I use Sagemath as an application separately.\n\nPyenv is popular with MacOs users, so this will definitely need a fix",
    "created_at": "2020-03-20T17:44:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29285#issuecomment-459324",
    "user": "https://github.com/Shlokatadistance"
}
```

<div id="comment:3" align="right">comment:3</div>

Pyenv creates major issues with packages sometimes, I can imagine what Sagemath might be going about. My easiest fix would be symlinking the two paths together which allows communication, between your bin and other paths, it did work for me when I was trying simple builds, of course now I use Sagemath as an application separately.

Pyenv is popular with MacOs users, so this will definitely need a fix



---

archive/issue_comments_459325.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nIn fact, the breaking of the path isn't something restricted to Sage, it existed with pip too, where pip was not able to define the paths correctly for the packages to go in",
    "created_at": "2020-03-21T20:19:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29285#issuecomment-459325",
    "user": "https://github.com/Shlokatadistance"
}
```

<div id="comment:4" align="right">comment:4</div>

In fact, the breaking of the path isn't something restricted to Sage, it existed with pip too, where pip was not able to define the paths correctly for the packages to go in



---

archive/issue_comments_459326.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,6 @@\n we had seen at least one [report](https://groups.google.com/d/msg/sage-devel/-cGmntUHXqE/Pw02KLksCgAJ) where [pyenv](https://github.com/pyenv/pyenv) broke the build, as pyenv'd Python prepends stuff like `/usr/bin` into `PATH`. \n \n It might be a good idea to check this at configure time.\n+\n+Tickets:\n+- #29461 sage --gdb not working\n``````\n",
    "created_at": "2020-04-04T15:40:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29285#issuecomment-459326",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,6 @@
 we had seen at least one [report](https://groups.google.com/d/msg/sage-devel/-cGmntUHXqE/Pw02KLksCgAJ) where [pyenv](https://github.com/pyenv/pyenv) broke the build, as pyenv'd Python prepends stuff like `/usr/bin` into `PATH`. 
 
 It might be a good idea to check this at configure time.
+
+Tickets:
+- #29461 sage --gdb not working
``````




---

archive/issue_events_402615.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-04T15:40:24Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "title_is": "Meta-ticket: pyenv",
    "title_was": "avoid getting into pyenv trap",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29285#event-402615"
}
```



---

archive/issue_comments_459327.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@embray](#comment:1):\n> Who's doing something with pyenv?\n\nI do. Because I tried installing a standalone cygdb on Arch Linux for 3 days and only succeeded when I used pyenv, because I wanted two different python versions on my machine: A normal one and one compiled with --with-pydebug. Achieving this without pyenv is very hard (on Arch Linux).\n> \n> I don't think we need to provide work-arounds for every conceivable user environment misconfiguration.\n\nIf it is too hard or not possible to make sagemath work with pyenv that is ok. But there should be  a good error message, because no one looks at the message:\n\n```\nImportError: /home/volker/.pyenv/versions/3.8.1-debug/lib/python3.8/lib-dynload/math.cpython-38d-x86_64-linux-gnu.so: undefined symbol: PyFloat_Type\n/tmp/tmppfahgne0:19: Error in sourced command file:\nError while executing Python code.\n/home/volker/Sync/git/sage/src/bin/sage-gdb-commands:1: Error in sourced command file:\n```\nAnd thinks: \"Ok, it looks like I need to uninstall pyenv.\" An error message similar to this:\n\"It looks like you installed pyenv. Sagemath is incompatible with pyenv. Please uninstall pyenv.\"\ncan save someone hours of work. If mkoeppe hadn't added me to the Cc, I would be going through the source code of sagemath right now to find the error. That would have costed me multiple days.\n\nIn General, I think it is really important that misconfigurations result in nice error messages.\n\nNote: My issue can be found here: #29461",
    "created_at": "2020-04-04T17:13:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29285#issuecomment-459327",
    "user": "https://github.com/Volker-Weissmann"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@embray](#comment:1):
> Who's doing something with pyenv?

I do. Because I tried installing a standalone cygdb on Arch Linux for 3 days and only succeeded when I used pyenv, because I wanted two different python versions on my machine: A normal one and one compiled with --with-pydebug. Achieving this without pyenv is very hard (on Arch Linux).
> 
> I don't think we need to provide work-arounds for every conceivable user environment misconfiguration.

If it is too hard or not possible to make sagemath work with pyenv that is ok. But there should be  a good error message, because no one looks at the message:

```
ImportError: /home/volker/.pyenv/versions/3.8.1-debug/lib/python3.8/lib-dynload/math.cpython-38d-x86_64-linux-gnu.so: undefined symbol: PyFloat_Type
/tmp/tmppfahgne0:19: Error in sourced command file:
Error while executing Python code.
/home/volker/Sync/git/sage/src/bin/sage-gdb-commands:1: Error in sourced command file:
```
And thinks: "Ok, it looks like I need to uninstall pyenv." An error message similar to this:
"It looks like you installed pyenv. Sagemath is incompatible with pyenv. Please uninstall pyenv."
can save someone hours of work. If mkoeppe hadn't added me to the Cc, I would be going through the source code of sagemath right now to find the error. That would have costed me multiple days.

In General, I think it is really important that misconfigurations result in nice error messages.

Note: My issue can be found here: #29461



---

archive/issue_events_402616.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T06:20:59Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29285#event-402616"
}
```



---

archive/issue_events_402617.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T06:20:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29285#event-402617"
}
```



---

archive/issue_events_402618.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29285#event-402618"
}
```



---

archive/issue_events_402619.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29285#event-402619"
}
```



---

archive/issue_comments_459328.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI'm checking this with the up to date pyenv, and it seems that the issue with the PATH is no longer. Currently building latest beta with python 3.9-dev from pyenv on Debian stable, will report the results.",
    "created_at": "2021-01-06T12:42:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29285#issuecomment-459328",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:9" align="right">comment:9</div>

I'm checking this with the up to date pyenv, and it seems that the issue with the PATH is no longer. Currently building latest beta with python 3.9-dev from pyenv on Debian stable, will report the results.



---

archive/issue_comments_459329.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI was able to successfully install Sage using python 3.9 from pyenv (installed following\nhttps://github.com/pyenv/pyenv#basic-github-checkout) on Debian 10.\n\nPerhaps one should check this on Homebrew, but it seems it's OK.",
    "created_at": "2021-01-06T22:23:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29285#issuecomment-459329",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:10" align="right">comment:10</div>

I was able to successfully install Sage using python 3.9 from pyenv (installed following
https://github.com/pyenv/pyenv#basic-github-checkout) on Debian 10.

Perhaps one should check this on Homebrew, but it seems it's OK.



---

archive/issue_events_402620.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-01-06T22:23:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29285#event-402620"
}
```



---

archive/issue_events_402621.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-01-06T22:23:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29285#event-402621"
}
```



---

archive/issue_events_402622.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-01-06T22:23:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29285#event-402622"
}
```



---

archive/issue_events_402623.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-01-06T22:23:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29285#event-402623"
}
```



---

archive/issue_comments_459330.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nCan be fixed as worksforme, that is.",
    "created_at": "2021-01-06T22:27:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29285#issuecomment-459330",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:11" align="right">comment:11</div>

Can be fixed as worksforme, that is.



---

archive/issue_comments_459331.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nLet us close this if nobody objects.",
    "created_at": "2021-08-19T22:36:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29285#issuecomment-459331",
    "user": "https://github.com/slel"
}
```

<div id="comment:12" align="right">comment:12</div>

Let us close this if nobody objects.



---

archive/issue_events_402624.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2021-08-19T22:36:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29285#event-402624"
}
```



---

archive/issue_events_402625.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2021-08-19T22:36:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29285#event-402625"
}
```



---

archive/issue_comments_459332.json:
```json
{
    "body": "Reviewer: **Samuel Leli\u00e8vre**",
    "created_at": "2021-08-19T22:36:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29285#issuecomment-459332",
    "user": "https://github.com/slel"
}
```

Reviewer: **Samuel Lelièvre**



---

archive/issue_events_402626.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-26T02:08:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29285#event-402626"
}
```



---

archive/issue_events_402627.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-26T02:08:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29285#event-402627"
}
```



---

archive/issue_events_402628.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-24T17:28:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29285#event-402628"
}
```



---

archive/issue_comments_459333.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nNew issues with pyenv reported in #32749.",
    "created_at": "2021-10-24T17:28:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29285#issuecomment-459333",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:14" align="right">comment:14</div>

New issues with pyenv reported in #32749.



---

archive/issue_events_402629.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-24T17:28:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29285#event-402629"
}
```



---

archive/issue_comments_459334.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,3 +4,4 @@\n \n Tickets:\n - #29461 sage --gdb not working\n+- #32531: `SAGE_ROOT/tox.ini`: Add variants that provision a system python using `pyenv`\n``````\n",
    "created_at": "2021-10-24T17:30:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29285#issuecomment-459334",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,3 +4,4 @@
 
 Tickets:
 - #29461 sage --gdb not working
+- #32531: `SAGE_ROOT/tox.ini`: Add variants that provision a system python using `pyenv`
``````




---

archive/issue_events_402630.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:11:26Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29285#event-402630"
}
```



---

archive/issue_events_402631.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:11:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29285#event-402631"
}
```



---

archive/issue_comments_459335.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,8 @@\n we had seen at least one [report](https://groups.google.com/d/msg/sage-devel/-cGmntUHXqE/Pw02KLksCgAJ) where [pyenv](https://github.com/pyenv/pyenv) broke the build, as pyenv'd Python prepends stuff like `/usr/bin` into `PATH`. \n+\n+It is documented in \n+https://github.com/pyenv/pyenv#managing-virtual-environments\n+that `pyenv` breaks everything regarding `venv`s. \n \n It might be a good idea to check this at configure time.\n \n``````\n",
    "created_at": "2022-01-01T23:48:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29285#issuecomment-459335",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,8 @@
 we had seen at least one [report](https://groups.google.com/d/msg/sage-devel/-cGmntUHXqE/Pw02KLksCgAJ) where [pyenv](https://github.com/pyenv/pyenv) broke the build, as pyenv'd Python prepends stuff like `/usr/bin` into `PATH`. 
+
+It is documented in 
+https://github.com/pyenv/pyenv#managing-virtual-environments
+that `pyenv` breaks everything regarding `venv`s. 
 
 It might be a good idea to check this at configure time.
 
``````




---

archive/issue_events_402632.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-01T23:50:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29285#event-402632"
}
```



---

archive/issue_events_402633.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-01T23:50:46Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29285#event-402633"
}
```



---

archive/issue_events_402634.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-01T23:50:46Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29285#event-402634"
}
```



---

archive/issue_events_402635.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-01T23:50:46Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "title_is": "Unbreak the build when pyenv is present",
    "title_was": "Meta-ticket: pyenv",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29285#event-402635"
}
```



---

archive/issue_comments_459336.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nTest on macOS with `pyenv` from homebrew:\n\n```\n$ brew install pyenv\n$ pyenv install 3.7.8\n$ eval \"$(pyenv init --path)\"\n$ echo $PATH\n/Users/mkoeppe/.pyenv/shims:/Users/mkoeppe/miniconda3/condabin:/Users/mkoeppe/bin:/usr/local/bin:/Users/mkoeppe/google-cloud-sdk/bin:/Users/mkoeppe/perl5/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/TeX/texbin:/opt/X11/bin\n$ pyenv global 3.7.8\n$ ./configure --enable-download-from-upstream-url --with-python=python3\n```\n(`--with-python=python3` is needed here because otherwise we reject it as misconfigured - see [#32531 comment:3](https://github.com/sagemath/sage/issues/32531#comment:3))\n\npip's self-installation gets tricked into installing in the wrong place:\n\n```\n[pip-21.3.1] Using pip 21.3.1 from /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/var/lib/sage/venv-python3.7/var/tmp/sage/build/pip-21.3.1/src/src/pip (python 3.7)\n[pip-21.3.1] Looking in links: /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/var/lib/sage/venv-python3.7/var/lib/sage/wheels\n[pip-21.3.1] Processing /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/var/lib/sage/venv-python3.7/var/tmp/sage/build/pip-21.3.1/inst/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/var/lib/sage/venv-python3.7/var/lib/sage/wheels/pip-21.3.1-py3-none-any.whl\n[pip-21.3.1] Installing collected packages: pip\n[pip-21.3.1]   changing mode of /Users/mkoeppe/.pyenv/versions/3.7.8/bin/pip to 755\n[pip-21.3.1]   changing mode of /Users/mkoeppe/.pyenv/versions/3.7.8/bin/pip3 to 755\n[pip-21.3.1]   changing mode of /Users/mkoeppe/.pyenv/versions/3.7.8/bin/pip3.7 to 755\n[pip-21.3.1] Successfully installed pip-21.3.1\n[pip-21.3.1] \n```",
    "created_at": "2022-01-02T01:00:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29285#issuecomment-459336",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:19" align="right">comment:19</div>

Test on macOS with `pyenv` from homebrew:

```
$ brew install pyenv
$ pyenv install 3.7.8
$ eval "$(pyenv init --path)"
$ echo $PATH
/Users/mkoeppe/.pyenv/shims:/Users/mkoeppe/miniconda3/condabin:/Users/mkoeppe/bin:/usr/local/bin:/Users/mkoeppe/google-cloud-sdk/bin:/Users/mkoeppe/perl5/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/TeX/texbin:/opt/X11/bin
$ pyenv global 3.7.8
$ ./configure --enable-download-from-upstream-url --with-python=python3
```
(`--with-python=python3` is needed here because otherwise we reject it as misconfigured - see [#32531 comment:3](https://github.com/sagemath/sage/issues/32531#comment:3))

pip's self-installation gets tricked into installing in the wrong place:

```
[pip-21.3.1] Using pip 21.3.1 from /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/var/lib/sage/venv-python3.7/var/tmp/sage/build/pip-21.3.1/src/src/pip (python 3.7)
[pip-21.3.1] Looking in links: /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/var/lib/sage/venv-python3.7/var/lib/sage/wheels
[pip-21.3.1] Processing /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/var/lib/sage/venv-python3.7/var/tmp/sage/build/pip-21.3.1/inst/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/var/lib/sage/venv-python3.7/var/lib/sage/wheels/pip-21.3.1-py3-none-any.whl
[pip-21.3.1] Installing collected packages: pip
[pip-21.3.1]   changing mode of /Users/mkoeppe/.pyenv/versions/3.7.8/bin/pip to 755
[pip-21.3.1]   changing mode of /Users/mkoeppe/.pyenv/versions/3.7.8/bin/pip3 to 755
[pip-21.3.1]   changing mode of /Users/mkoeppe/.pyenv/versions/3.7.8/bin/pip3.7 to 755
[pip-21.3.1] Successfully installed pip-21.3.1
[pip-21.3.1] 
```



---

archive/issue_comments_459337.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\n`sage-pip-install -> sage-flock -> sage-bootstrap-python -> $HOME/.pyenv/shims -> $HOME/.pyenv/versions/3.7.8/bin/python3`; the `python3` shim manipulates PATH. \n\n```\n(sage-buildsh) mkoeppe@egret:pip-21.3.1$ python3 -c 'import os; print(os.environ[\"PATH\"])'\n/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/bin:/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/libexec/ccache:/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/build/bin:/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/var/lib/sage/venv-python3.7/bin:/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/bin:/Users/mkoeppe/.pyenv/shims:/Users/mkoeppe/miniconda3/condabin:/Users/mkoeppe/bin:/usr/local/bin:/Users/mkoeppe/google-cloud-sdk/bin:/Users/mkoeppe/perl5/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/TeX/texbin:/opt/X11/bin\n(sage-buildsh) mkoeppe@egret:pip-21.3.1$ sage-bootstrap-python -c 'import os; print(os.environ[\"PATH\"])'\n/Users/mkoeppe/.pyenv/versions/3.7.8/bin:/usr/local/Cellar/pyenv/2.2.3/libexec:/usr/local/Cellar/pyenv/2.2.3/plugins/python-build/bin:/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/bin:/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/libexec/ccache:/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/build/bin:/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/var/lib/sage/venv-python3.7/bin:/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/bin:/Users/mkoeppe/.pyenv/shims:/Users/mkoeppe/miniconda3/condabin:/Users/mkoeppe/bin:/usr/local/bin:/Users/mkoeppe/google-cloud-sdk/bin:/Users/mkoeppe/perl5/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/TeX/texbin:/opt/X11/bin\n```",
    "created_at": "2022-01-02T01:38:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29285#issuecomment-459337",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:20" align="right">comment:20</div>

`sage-pip-install -> sage-flock -> sage-bootstrap-python -> $HOME/.pyenv/shims -> $HOME/.pyenv/versions/3.7.8/bin/python3`; the `python3` shim manipulates PATH. 

```
(sage-buildsh) mkoeppe@egret:pip-21.3.1$ python3 -c 'import os; print(os.environ["PATH"])'
/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/bin:/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/libexec/ccache:/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/build/bin:/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/var/lib/sage/venv-python3.7/bin:/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/bin:/Users/mkoeppe/.pyenv/shims:/Users/mkoeppe/miniconda3/condabin:/Users/mkoeppe/bin:/usr/local/bin:/Users/mkoeppe/google-cloud-sdk/bin:/Users/mkoeppe/perl5/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/TeX/texbin:/opt/X11/bin
(sage-buildsh) mkoeppe@egret:pip-21.3.1$ sage-bootstrap-python -c 'import os; print(os.environ["PATH"])'
/Users/mkoeppe/.pyenv/versions/3.7.8/bin:/usr/local/Cellar/pyenv/2.2.3/libexec:/usr/local/Cellar/pyenv/2.2.3/plugins/python-build/bin:/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/bin:/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/libexec/ccache:/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/build/bin:/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/var/lib/sage/venv-python3.7/bin:/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/bin:/Users/mkoeppe/.pyenv/shims:/Users/mkoeppe/miniconda3/condabin:/Users/mkoeppe/bin:/usr/local/bin:/Users/mkoeppe/google-cloud-sdk/bin:/Users/mkoeppe/perl5/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/TeX/texbin:/opt/X11/bin
```



---

archive/issue_comments_459338.json:
```json
{
    "body": "Branch: **[u/mkoeppe/unbreak_the_build_when_pyenv_is_present](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/unbreak_the_build_when_pyenv_is_present)**",
    "created_at": "2022-01-02T01:56:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29285#issuecomment-459338",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/unbreak_the_build_when_pyenv_is_present](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/unbreak_the_build_when_pyenv_is_present)**



---

archive/issue_comments_459339.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,10 +1,6 @@\n-we had seen at least one [report](https://groups.google.com/d/msg/sage-devel/-cGmntUHXqE/Pw02KLksCgAJ) where [pyenv](https://github.com/pyenv/pyenv) broke the build, as pyenv'd Python prepends stuff like `/usr/bin` into `PATH`. \n+The build fails when [pyenv](https://github.com/pyenv/pyenv) is present, as reported in  [report](https://groups.google.com/d/msg/sage-devel/-cGmntUHXqE/Pw02KLksCgAJ) and also in #32749/#33103.\n \n-It is documented in \n-https://github.com/pyenv/pyenv#managing-virtual-environments\n-that `pyenv` breaks everything regarding `venv`s. \n-\n-It might be a good idea to check this at configure time.\n+We fix it by rejecting the pyenv shims for `sage-bootstrap-python`.\n \n Tickets:\n - #29461 sage --gdb not working\n``````\n",
    "created_at": "2022-01-02T01:59:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29285#issuecomment-459339",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,10 +1,6 @@
-we had seen at least one [report](https://groups.google.com/d/msg/sage-devel/-cGmntUHXqE/Pw02KLksCgAJ) where [pyenv](https://github.com/pyenv/pyenv) broke the build, as pyenv'd Python prepends stuff like `/usr/bin` into `PATH`. 
+The build fails when [pyenv](https://github.com/pyenv/pyenv) is present, as reported in  [report](https://groups.google.com/d/msg/sage-devel/-cGmntUHXqE/Pw02KLksCgAJ) and also in #32749/#33103.
 
-It is documented in 
-https://github.com/pyenv/pyenv#managing-virtual-environments
-that `pyenv` breaks everything regarding `venv`s. 
-
-It might be a good idea to check this at configure time.
+We fix it by rejecting the pyenv shims for `sage-bootstrap-python`.
 
 Tickets:
 - #29461 sage --gdb not working
``````




---

archive/issue_events_402636.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-02T01:59:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29285#event-402636"
}
```



---

archive/issue_comments_459340.json:
```json
{
    "body": "Commit: **[376932f](https://github.com/sagemath/sagetrac-mirror/commit/376932f6933c7c210dc169d5682489f454229c66)**",
    "created_at": "2022-01-02T01:59:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29285#issuecomment-459340",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[376932f](https://github.com/sagemath/sagetrac-mirror/commit/376932f6933c7c210dc169d5682489f454229c66)**



---

archive/issue_comments_459341.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2022-01-02T01:59:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29285#issuecomment-459341",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_comments_459342.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/376932f6933c7c210dc169d5682489f454229c66\">376932f</a></td><td><code>build/bin/sage-bootstrap-python: Reject pyenv shims</code></td></tr></table>\n",
    "created_at": "2022-01-02T01:59:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29285#issuecomment-459342",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:22"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/376932f6933c7c210dc169d5682489f454229c66">376932f</a></td><td><code>build/bin/sage-bootstrap-python: Reject pyenv shims</code></td></tr></table>




---

archive/issue_comments_459343.json:
```json
{
    "body": "Changed reviewer from **Samuel Leli\u00e8vre** to none",
    "created_at": "2022-01-02T01:59:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29285#issuecomment-459343",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **Samuel Lelièvre** to none



---

archive/issue_comments_459344.json:
```json
{
    "body": "Reviewer: **https://github.com/mkoeppe/sage/runs/4682227249?check_suite_focus=true**",
    "created_at": "2022-01-02T02:19:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29285#issuecomment-459344",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **https://github.com/mkoeppe/sage/runs/4682227249?check_suite_focus=true**



---

archive/issue_comments_459345.json:
```json
{
    "body": "Changed reviewer from **https://github.com/mkoeppe/sage/runs/4682227249?check_suite_focus=true** to **https://github.com/mkoeppe/sage/runs/4682289891?check_suite_focus=true**",
    "created_at": "2022-01-02T02:31:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29285#issuecomment-459345",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **https://github.com/mkoeppe/sage/runs/4682227249?check_suite_focus=true** to **https://github.com/mkoeppe/sage/runs/4682289891?check_suite_focus=true**



---

archive/issue_comments_459346.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nLet's get this into 9.5 please",
    "created_at": "2022-01-02T18:38:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29285#issuecomment-459346",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:25" align="right">comment:25</div>

Let's get this into 9.5 please



---

archive/issue_comments_459347.json:
```json
{
    "body": "Changed reviewer from **https://github.com/mkoeppe/sage/runs/4682289891?check_suite_focus=true** to **John Palmieri**",
    "created_at": "2022-01-04T00:24:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29285#issuecomment-459347",
    "user": "https://github.com/jhpalmieri"
}
```

Changed reviewer from **https://github.com/mkoeppe/sage/runs/4682289891?check_suite_focus=true** to **John Palmieri**



---

archive/issue_comments_459348.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nWorks for me on OS X with homebrew's pyenv: without this branch, sage-bootstrap runs the \"wrong\" python3, while with this branch, it runs the right python3.",
    "created_at": "2022-01-04T00:24:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29285#issuecomment-459348",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:28" align="right">comment:28</div>

Works for me on OS X with homebrew's pyenv: without this branch, sage-bootstrap runs the "wrong" python3, while with this branch, it runs the right python3.



---

archive/issue_events_402637.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-01-04T00:24:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29285#event-402637"
}
```



---

archive/issue_events_402638.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-01-04T00:24:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29285#event-402638"
}
```



---

archive/issue_comments_459349.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nThank you!",
    "created_at": "2022-01-04T00:52:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29285#issuecomment-459349",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:29" align="right">comment:29</div>

Thank you!



---

archive/issue_events_402639.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-17T21:12:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29285#event-402639"
}
```



---

archive/issue_events_402640.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-17T21:12:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "label": "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p: 1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29285#event-402640"
}
```



---

archive/issue_comments_459350.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/unbreak_the_build_when_pyenv_is_present](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/unbreak_the_build_when_pyenv_is_present)** to **[376932f](https://github.com/sagemath/sagetrac-mirror/commit/376932f6933c7c210dc169d5682489f454229c66)**",
    "created_at": "2022-01-18T22:01:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29285#issuecomment-459350",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/unbreak_the_build_when_pyenv_is_present](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/unbreak_the_build_when_pyenv_is_present)** to **[376932f](https://github.com/sagemath/sagetrac-mirror/commit/376932f6933c7c210dc169d5682489f454229c66)**



---

archive/issue_events_402641.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-01-18T22:01:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29285#event-402641"
}
```



---

archive/issue_events_402642.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "8a05f2e79d515ee3f99b3a5f42d760ef6b06b53b",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-01-18T22:01:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29285",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29285#event-402642"
}
```
