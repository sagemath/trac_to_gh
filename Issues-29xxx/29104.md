# Issue 29104: Add to tox.ini some homebrew toxenvs (with a fresh install not in /usr/local), add homebrew packages

archive/issues_028867.json:
```json
{
    "body": "#29053 adds `tox.ini` to support testing the sage distribution in isolated environments via docker.\n\nThis ticket adds toxenvs `local-homebrew-macos-{minimal,standard}` for testing with (best-effort) isolated installations of homebrew on macOS (not using docker).\n\nTo test:\n\n```\n    brew install tox\n    tox -e local-homebrew-macos-standard\n```\n\nSee comments in tox.ini for more examples.\n\nAn example run of that is here: https://github.com/mkoeppe/sage/actions/runs/32812271\n\n\nCC:  @dimpase @jhpalmieri @mwageringel @vbraun @tscrim\n\nBranch/Commit: dfce7d4b3d771aaaa7b3d198ff2b1e3eeb2120fc\n\nReviewer: Dima Pasechnik, John Palmieri\n\nAuthor: Matthias Koeppe\n\nDependencies: #29335, #29361\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29104\n\n",
    "closed_at": "2020-03-29T00:24:12Z",
    "created_at": "2020-01-29T15:48:19Z",
    "labels": [
        "component: porting"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "Add to tox.ini some homebrew toxenvs (with a fresh install not in /usr/local), add homebrew packages",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29104",
    "user": "https://github.com/mkoeppe"
}
```
#29053 adds `tox.ini` to support testing the sage distribution in isolated environments via docker.

This ticket adds toxenvs `local-homebrew-macos-{minimal,standard}` for testing with (best-effort) isolated installations of homebrew on macOS (not using docker).

To test:

```
    brew install tox
    tox -e local-homebrew-macos-standard
```

See comments in tox.ini for more examples.

An example run of that is here: https://github.com/mkoeppe/sage/actions/runs/32812271


CC:  @dimpase @jhpalmieri @mwageringel @vbraun @tscrim

Branch/Commit: dfce7d4b3d771aaaa7b3d198ff2b1e3eeb2120fc

Reviewer: Dima Pasechnik, John Palmieri

Author: Matthias Koeppe

Dependencies: #29335, #29361

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29104





---

archive/issue_comments_559786.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/tox-homebrew\"",
    "created_at": "2020-01-29T19:02:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559786",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/tox-homebrew"



---

archive/issue_comments_559787.json:
```json
{
    "body": "<a id='comment:2'></a>\nLast 10 new commits:\n|                                                                                                                                          |                                                                   |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------|\n|[7e59a6f](https://github.com/sagemath/sagetrac-mirror/commit/7e59a6f4ff8384348e44772369c94b65d88f34b9)|`build/bin/write-dockerfile.sh: Add commands to activate conda env`|\n|[2ad9a97](https://github.com/sagemath/sagetrac-mirror/commit/2ad9a975b3fab72a39d5e0f262fe322655b0ad3c)|`Merge tag '9.1.beta2' into t/29053/installation_manual__generate__apt_get_install__and__yum_install__lines_from_build_pkgs_at___bootstrap_time`|\n|[9fca230](https://github.com/sagemath/sagetrac-mirror/commit/9fca2309c95314fa6c948ddddf9b63f1b4d18f8c)|`add doc`|\n|[f6cbb8a](https://github.com/sagemath/sagetrac-mirror/commit/f6cbb8a2abd149a84d2c11bfeb38db614e6de70e)|`add centos-{7,8`}|\n|[c651058](https://github.com/sagemath/sagetrac-mirror/commit/c6510581b956e47ae58ca6876fa8f152915244dc)|`on centos, IGNORE_MISSING_SYSTEM_PACKAGES=yes`|\n|[98edff6](https://github.com/sagemath/sagetrac-mirror/commit/98edff6be135e9b3c3cd0ef8adfde4e5fff3ac90)|`Add build/pkgs/gfortran/distros/fedora.txt`|\n|[843ca76](https://github.com/sagemath/sagetrac-mirror/commit/843ca764bdbf9385aed1b69b7928b91871363ee9)|`build/pkgs/fedora.txt: Add python3`|\n|[bd6a545](https://github.com/sagemath/sagetrac-mirror/commit/bd6a5457b27b498115ed43171b38a129ba5de50d)|`tox.ini: Add debian stretch, put sid last`|\n|[23c6334](https://github.com/sagemath/sagetrac-mirror/commit/23c6334cf2927a4d917a27b3963471e8242d86a3)|`build/pkgs/openblas/distros/arch.txt: Add lapack, cblas`|\n|[fca6654](https://github.com/sagemath/sagetrac-mirror/commit/fca66540d85d7989d84c8551793f029533a8232d)|`tox.ini: Add toxenvs local-homebrew-macos-minimal, local-homebrew-macos-standard`|",
    "created_at": "2020-01-29T19:05:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559787",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
Last 10 new commits:
|                                                                                                                                          |                                                                   |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------|
|[7e59a6f](https://github.com/sagemath/sagetrac-mirror/commit/7e59a6f4ff8384348e44772369c94b65d88f34b9)|`build/bin/write-dockerfile.sh: Add commands to activate conda env`|
|[2ad9a97](https://github.com/sagemath/sagetrac-mirror/commit/2ad9a975b3fab72a39d5e0f262fe322655b0ad3c)|`Merge tag '9.1.beta2' into t/29053/installation_manual__generate__apt_get_install__and__yum_install__lines_from_build_pkgs_at___bootstrap_time`|
|[9fca230](https://github.com/sagemath/sagetrac-mirror/commit/9fca2309c95314fa6c948ddddf9b63f1b4d18f8c)|`add doc`|
|[f6cbb8a](https://github.com/sagemath/sagetrac-mirror/commit/f6cbb8a2abd149a84d2c11bfeb38db614e6de70e)|`add centos-{7,8`}|
|[c651058](https://github.com/sagemath/sagetrac-mirror/commit/c6510581b956e47ae58ca6876fa8f152915244dc)|`on centos, IGNORE_MISSING_SYSTEM_PACKAGES=yes`|
|[98edff6](https://github.com/sagemath/sagetrac-mirror/commit/98edff6be135e9b3c3cd0ef8adfde4e5fff3ac90)|`Add build/pkgs/gfortran/distros/fedora.txt`|
|[843ca76](https://github.com/sagemath/sagetrac-mirror/commit/843ca764bdbf9385aed1b69b7928b91871363ee9)|`build/pkgs/fedora.txt: Add python3`|
|[bd6a545](https://github.com/sagemath/sagetrac-mirror/commit/bd6a5457b27b498115ed43171b38a129ba5de50d)|`tox.ini: Add debian stretch, put sid last`|
|[23c6334](https://github.com/sagemath/sagetrac-mirror/commit/23c6334cf2927a4d917a27b3963471e8242d86a3)|`build/pkgs/openblas/distros/arch.txt: Add lapack, cblas`|
|[fca6654](https://github.com/sagemath/sagetrac-mirror/commit/fca66540d85d7989d84c8551793f029533a8232d)|`tox.ini: Add toxenvs local-homebrew-macos-minimal, local-homebrew-macos-standard`|



---

archive/issue_comments_559788.json:
```json
{
    "body": "Changing commit from \"\" to \"fca66540d85d7989d84c8551793f029533a8232d\"",
    "created_at": "2020-01-29T19:05:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559788",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "fca66540d85d7989d84c8551793f029533a8232d"



---

archive/issue_comments_559789.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n #29053 adds `tox.ini` to support testing the sage distribution in isolated environments via docker.\n \n-This ticket adds a toxenv for testing with an isolated installation of homebrew on macOS (not using docker).\n+This ticket adds toxenvs local-homebrew-macos-{minimal,standard} for testing with isolated installations of homebrew on macOS (not using docker).\n \n \n``````\n",
    "created_at": "2020-01-29T19:06:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559789",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 #29053 adds `tox.ini` to support testing the sage distribution in isolated environments via docker.
 
-This ticket adds a toxenv for testing with an isolated installation of homebrew on macOS (not using docker).
+This ticket adds toxenvs local-homebrew-macos-{minimal,standard} for testing with isolated installations of homebrew on macOS (not using docker).
 
 
``````




---

archive/issue_events_091220.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "rename": {
        "from": "Add to tox.ini a homebrew toxenv (with a fresh install not in /usr/local)",
        "to": "Add to tox.ini some homebrew toxenvs (with a fresh install not in /usr/local)"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29104#event-91220"
}
```



---

archive/issue_comments_559790.json:
```json
{
    "body": "Changing commit from \"fca66540d85d7989d84c8551793f029533a8232d\" to \"e0e8a4c7be40336fa140195a213f9edf3075f6ee\"",
    "created_at": "2020-01-29T20:01:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559790",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "fca66540d85d7989d84c8551793f029533a8232d" to "e0e8a4c7be40336fa140195a213f9edf3075f6ee"



---

archive/issue_comments_559791.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------|\n|[e0e8a4c](https://github.com/sagemath/sagetrac-mirror/commit/e0e8a4c7be40336fa140195a213f9edf3075f6ee)|`tox.ini [local-homebrew]: Fixup PATH, PKG_CONFIG_PATH, set LDFLAGS, CPPFLAGS; [local-direct]: New`|",
    "created_at": "2020-01-29T20:01:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559791",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------|
|[e0e8a4c](https://github.com/sagemath/sagetrac-mirror/commit/e0e8a4c7be40336fa140195a213f9edf3075f6ee)|`tox.ini [local-homebrew]: Fixup PATH, PKG_CONFIG_PATH, set LDFLAGS, CPPFLAGS; [local-direct]: New`|



---

archive/issue_comments_559792.json:
```json
{
    "body": "Changing commit from \"e0e8a4c7be40336fa140195a213f9edf3075f6ee\" to \"16ca88f3423ea20dcb164cd1e7b5bc0283fcec0b\"",
    "created_at": "2020-01-29T20:11:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559792",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e0e8a4c7be40336fa140195a213f9edf3075f6ee" to "16ca88f3423ea20dcb164cd1e7b5bc0283fcec0b"



---

archive/issue_comments_559793.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[16ca88f](https://github.com/sagemath/sagetrac-mirror/commit/16ca88f3423ea20dcb164cd1e7b5bc0283fcec0b)|`tox.ini: Use {envlogdir}; use ln -sf`|",
    "created_at": "2020-01-29T20:11:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559793",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[16ca88f](https://github.com/sagemath/sagetrac-mirror/commit/16ca88f3423ea20dcb164cd1e7b5bc0283fcec0b)|`tox.ini: Use {envlogdir}; use ln -sf`|



---

archive/issue_comments_559794.json:
```json
{
    "body": "Changing commit from \"16ca88f3423ea20dcb164cd1e7b5bc0283fcec0b\" to \"6a1803dae669007dcc7005448a1e578bcc950656\"",
    "created_at": "2020-01-29T21:15:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559794",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "16ca88f3423ea20dcb164cd1e7b5bc0283fcec0b" to "6a1803dae669007dcc7005448a1e578bcc950656"



---

archive/issue_comments_559795.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[6a1803d](https://github.com/sagemath/sagetrac-mirror/commit/6a1803dae669007dcc7005448a1e578bcc950656)|`tox.ini [local]: First build the base-toolchain`|",
    "created_at": "2020-01-29T21:15:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559795",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[6a1803d](https://github.com/sagemath/sagetrac-mirror/commit/6a1803dae669007dcc7005448a1e578bcc950656)|`tox.ini [local]: First build the base-toolchain`|



---

archive/issue_comments_559796.json:
```json
{
    "body": "Changing commit from \"6a1803dae669007dcc7005448a1e578bcc950656\" to \"4b72987e58ff284f57f04d4fbb5fed8f39beb36d\"",
    "created_at": "2020-01-30T04:33:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559796",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6a1803dae669007dcc7005448a1e578bcc950656" to "4b72987e58ff284f57f04d4fbb5fed8f39beb36d"



---

archive/issue_comments_559797.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------|\n|[4b72987](https://github.com/sagemath/sagetrac-mirror/commit/4b72987e58ff284f57f04d4fbb5fed8f39beb36d)|`tox.ini [local-homebrew]: Set PATH earlier and set ACLOCAL_PATH for bootstrapping`|",
    "created_at": "2020-01-30T04:33:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559797",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------|
|[4b72987](https://github.com/sagemath/sagetrac-mirror/commit/4b72987e58ff284f57f04d4fbb5fed8f39beb36d)|`tox.ini [local-homebrew]: Set PATH earlier and set ACLOCAL_PATH for bootstrapping`|



---

archive/issue_comments_559798.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,6 @@\n #29053 adds `tox.ini` to support testing the sage distribution in isolated environments via docker.\n \n-This ticket adds toxenvs local-homebrew-macos-{minimal,standard} for testing with isolated installations of homebrew on macOS (not using docker).\n+This ticket adds toxenvs `local-homebrew-macos-{minimal,standard}` for testing with (best-effort) isolated installations of homebrew on macOS (not using docker).\n \n+An example run of that is here: https://github.com/mkoeppe/sage/actions/runs/32812271\n \n``````\n",
    "created_at": "2020-01-30T04:35:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559798",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,6 @@
 #29053 adds `tox.ini` to support testing the sage distribution in isolated environments via docker.
 
-This ticket adds toxenvs local-homebrew-macos-{minimal,standard} for testing with isolated installations of homebrew on macOS (not using docker).
+This ticket adds toxenvs `local-homebrew-macos-{minimal,standard}` for testing with (best-effort) isolated installations of homebrew on macOS (not using docker).
 
+An example run of that is here: https://github.com/mkoeppe/sage/actions/runs/32812271
 
``````




---

archive/issue_comments_559799.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-01-30T04:35:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559799",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_559800.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2020-01-30T04:35:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559800",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_559801.json:
```json
{
    "body": "<a id='comment:10'></a>\nIs this ticket MacOS-specific?",
    "created_at": "2020-02-05T17:52:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559801",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:10'></a>
Is this ticket MacOS-specific?



---

archive/issue_comments_559802.json:
```json
{
    "body": "<a id='comment:11'></a>\nHmm, I haven\u2019t tried linuxbrew. Might be worth checking",
    "created_at": "2020-02-05T18:32:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559802",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>
Hmm, I haven’t tried linuxbrew. Might be worth checking



---

archive/issue_comments_559803.json:
```json
{
    "body": "<a id='comment:12'></a>\nI'll fire up my vintage OSX 10.13 macbookair...",
    "created_at": "2020-02-05T18:34:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559803",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:12'></a>
I'll fire up my vintage OSX 10.13 macbookair...



---

archive/issue_comments_559804.json:
```json
{
    "body": "Changing commit from \"4b72987e58ff284f57f04d4fbb5fed8f39beb36d\" to \"2141b7536c5b99a26d16568dcc0d734518bebc58\"",
    "created_at": "2020-02-06T14:26:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559804",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4b72987e58ff284f57f04d4fbb5fed8f39beb36d" to "2141b7536c5b99a26d16568dcc0d734518bebc58"



---

archive/issue_comments_559805.json:
```json
{
    "body": "<a id='comment:13'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[2141b75](https://github.com/sagemath/sagetrac-mirror/commit/2141b7536c5b99a26d16568dcc0d734518bebc58)|`Merge tag '9.1.beta3' into t/29104/tox-homebrew`|",
    "created_at": "2020-02-06T14:26:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559805",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[2141b75](https://github.com/sagemath/sagetrac-mirror/commit/2141b7536c5b99a26d16568dcc0d734518bebc58)|`Merge tag '9.1.beta3' into t/29104/tox-homebrew`|



---

archive/issue_comments_559806.json:
```json
{
    "body": "<a id='comment:14'></a>\nI tried this:\n\n```\ntox -p auto -e local-homebrew-macos-standard\n```\nand got\n\n```\n...\n[sagelib-9.1.beta2] user\t0m10.244s\n[sagelib-9.1.beta2] sys\t0m3.812s\n\nreal\t0m16.288s\nuser\t0m10.956s\nsys\t0m4.047s\nSage build/upgrade complete!\n\u2714 OK local-homebrew-macos-standard in 1 minute, 14.362 seconds\n_________________________________________________________________________________________________ summary __________________________________________________________________________________________________\n  local-homebrew-macos-standard: commands succeeded\n  congratulations :)\n```\n\nnot tests were run, it seems, is this normal?",
    "created_at": "2020-02-07T21:44:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559806",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:14'></a>
I tried this:

```
tox -p auto -e local-homebrew-macos-standard
```
and got

```
...
[sagelib-9.1.beta2] user	0m10.244s
[sagelib-9.1.beta2] sys	0m3.812s

real	0m16.288s
user	0m10.956s
sys	0m4.047s
Sage build/upgrade complete!
✔ OK local-homebrew-macos-standard in 1 minute, 14.362 seconds
_________________________________________________________________________________________________ summary __________________________________________________________________________________________________
  local-homebrew-macos-standard: commands succeeded
  congratulations :)
```

not tests were run, it seems, is this normal?



---

archive/issue_comments_559807.json:
```json
{
    "body": "<a id='comment:15'></a>\nThe default packages set in `tox.ini` are only `fflas_ffpack scipy r`, and those (and their dependencies) are checked.\nI don't know why it's actually building sagelib, but I hope to fix bizarre build behavior like this in #29113.",
    "created_at": "2020-02-08T22:44:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559807",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>
The default packages set in `tox.ini` are only `fflas_ffpack scipy r`, and those (and their dependencies) are checked.
I don't know why it's actually building sagelib, but I hope to fix bizarre build behavior like this in #29113.



---

archive/issue_comments_559808.json:
```json
{
    "body": "Changing dependencies from \"#29053\" to \"\"",
    "created_at": "2020-02-10T00:12:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559808",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29053" to ""



---

archive/issue_comments_559809.json:
```json
{
    "body": "Changing commit from \"2141b7536c5b99a26d16568dcc0d734518bebc58\" to \"4eb201b75f75fbbe526b84de9b52f2ba0ea3ef0e\"",
    "created_at": "2020-02-16T20:44:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559809",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2141b7536c5b99a26d16568dcc0d734518bebc58" to "4eb201b75f75fbbe526b84de9b52f2ba0ea3ef0e"



---

archive/issue_comments_559810.json:
```json
{
    "body": "<a id='comment:17'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[4eb201b](https://github.com/sagemath/sagetrac-mirror/commit/4eb201b75f75fbbe526b84de9b52f2ba0ea3ef0e)|`Merge tag '9.1.beta4' into t/29104/tox-homebrew`|",
    "created_at": "2020-02-16T20:44:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559810",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[4eb201b](https://github.com/sagemath/sagetrac-mirror/commit/4eb201b75f75fbbe526b84de9b52f2ba0ea3ef0e)|`Merge tag '9.1.beta4' into t/29104/tox-homebrew`|



---

archive/issue_comments_559811.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-03-04T00:55:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559811",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_559812.json:
```json
{
    "body": "Changing work_issues from \"\" to \"rebase\"",
    "created_at": "2020-03-04T00:55:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559812",
    "user": "https://github.com/mkoeppe"
}
```

Changing work_issues from "" to "rebase"



---

archive/issue_comments_559813.json:
```json
{
    "body": "Changing commit from \"4eb201b75f75fbbe526b84de9b52f2ba0ea3ef0e\" to \"7155e7993248fcf6db057e46779ab08cd1670833\"",
    "created_at": "2020-03-08T20:53:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559813",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4eb201b75f75fbbe526b84de9b52f2ba0ea3ef0e" to "7155e7993248fcf6db057e46779ab08cd1670833"



---

archive/issue_comments_559814.json:
```json
{
    "body": "<a id='comment:19'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[7155e79](https://github.com/sagemath/sagetrac-mirror/commit/7155e7993248fcf6db057e46779ab08cd1670833)|`Merge tag '9.1.beta7' into t/29104/tox-homebrew`|",
    "created_at": "2020-03-08T20:53:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559814",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[7155e79](https://github.com/sagemath/sagetrac-mirror/commit/7155e7993248fcf6db057e46779ab08cd1670833)|`Merge tag '9.1.beta7' into t/29104/tox-homebrew`|



---

archive/issue_comments_559815.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-03-08T20:54:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559815",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_559816.json:
```json
{
    "body": "<a id='comment:21'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------|\n|[d7a2e72](https://github.com/sagemath/sagetrac-mirror/commit/d7a2e726c10e58fac83b7c419973e53f92e9444f)|`Fixup merge`|",
    "created_at": "2020-03-08T21:02:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559816",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------|
|[d7a2e72](https://github.com/sagemath/sagetrac-mirror/commit/d7a2e726c10e58fac83b7c419973e53f92e9444f)|`Fixup merge`|



---

archive/issue_comments_559817.json:
```json
{
    "body": "Changing commit from \"7155e7993248fcf6db057e46779ab08cd1670833\" to \"d7a2e726c10e58fac83b7c419973e53f92e9444f\"",
    "created_at": "2020-03-08T21:02:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559817",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7155e7993248fcf6db057e46779ab08cd1670833" to "d7a2e726c10e58fac83b7c419973e53f92e9444f"



---

archive/issue_comments_559818.json:
```json
{
    "body": "Changing work_issues from \"rebase\" to \"\"",
    "created_at": "2020-03-08T21:04:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559818",
    "user": "https://github.com/mkoeppe"
}
```

Changing work_issues from "rebase" to ""



---

archive/issue_comments_559819.json:
```json
{
    "body": "<a id='comment:23'></a>\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n|                                                                                                                                           |                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|\n|[3103055](https://github.com/sagemath/sagetrac-mirror/commit/31030557a5b692d3b1761b64ea1fc4874b3ea654)|`m4ri must use png on gentoo`|\n|[1b48aa1](https://github.com/sagemath/sagetrac-mirror/commit/1b48aa12f5f1566022f67eb0ace593ce62769fe8)|`Merge tag '9.1.beta7' into t/29273/packages/r_packages_in_distros`|\n|[0fc301c](https://github.com/sagemath/sagetrac-mirror/commit/0fc301cc5df3af4e4bd07a4761be3434946b8a4d)|`Add build/pkgs/{libgd|m4ri|ninja_build|perl_term_readline_gnu|yasm}/distros/*.txt - from repology`|\n|[f7785ce](https://github.com/sagemath/sagetrac-mirror/commit/f7785ce08e9335db8ecb817396097362032e65be)|`build/pkgs/fedora.txt: Add diffutils`|\n|[6d2bbd8](https://github.com/sagemath/sagetrac-mirror/commit/6d2bbd8fb8e36270f16844f5ff9c2071c75f0ff3)|`build/pkgs/arch.txt: Add 'which'`|\n|[0aa90c1](https://github.com/sagemath/sagetrac-mirror/commit/0aa90c12bb74cfc0bd045f6f189ddc4dbc2732da)|`build/pkgs/debian.txt: Add ca-certificates`|\n|[c49acdc](https://github.com/sagemath/sagetrac-mirror/commit/c49acdce35a9d834e8525f5612c6f778f01a12a0)|`Merge tag '9.1.beta7' into t/29129/add_more_system_packages_to_build_pkgs_spkg_distros_`|\n|[0f704d0](https://github.com/sagemath/sagetrac-mirror/commit/0f704d03e5aaa1c6e34212f009bec4a50e2cbffa)|`Merge branch 't/29129/add_more_system_packages_to_build_pkgs_spkg_distros_' into t/29273/packages/r_packages_in_distros`|\n|[f8097c4](https://github.com/sagemath/sagetrac-mirror/commit/f8097c4ccec68ed85e39d7e29a460b1fe4e9ce81)|`Merge branch 'u/mkoeppe/packages/r_packages_in_distros' of git://trac.sagemath.org/sage into t/29104/tox-homebrew`|\n|[9e9f4c7](https://github.com/sagemath/sagetrac-mirror/commit/9e9f4c7f852c7b6f18d44e950a84317bd1de9c6b)|`Add distros/homebrew.txt for many packages, and some more distros/*.txt`|",
    "created_at": "2020-03-11T19:35:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559819",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>
Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
|                                                                                                                                           |                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|
|[3103055](https://github.com/sagemath/sagetrac-mirror/commit/31030557a5b692d3b1761b64ea1fc4874b3ea654)|`m4ri must use png on gentoo`|
|[1b48aa1](https://github.com/sagemath/sagetrac-mirror/commit/1b48aa12f5f1566022f67eb0ace593ce62769fe8)|`Merge tag '9.1.beta7' into t/29273/packages/r_packages_in_distros`|
|[0fc301c](https://github.com/sagemath/sagetrac-mirror/commit/0fc301cc5df3af4e4bd07a4761be3434946b8a4d)|`Add build/pkgs/{libgd|m4ri|ninja_build|perl_term_readline_gnu|yasm}/distros/*.txt - from repology`|
|[f7785ce](https://github.com/sagemath/sagetrac-mirror/commit/f7785ce08e9335db8ecb817396097362032e65be)|`build/pkgs/fedora.txt: Add diffutils`|
|[6d2bbd8](https://github.com/sagemath/sagetrac-mirror/commit/6d2bbd8fb8e36270f16844f5ff9c2071c75f0ff3)|`build/pkgs/arch.txt: Add 'which'`|
|[0aa90c1](https://github.com/sagemath/sagetrac-mirror/commit/0aa90c12bb74cfc0bd045f6f189ddc4dbc2732da)|`build/pkgs/debian.txt: Add ca-certificates`|
|[c49acdc](https://github.com/sagemath/sagetrac-mirror/commit/c49acdce35a9d834e8525f5612c6f778f01a12a0)|`Merge tag '9.1.beta7' into t/29129/add_more_system_packages_to_build_pkgs_spkg_distros_`|
|[0f704d0](https://github.com/sagemath/sagetrac-mirror/commit/0f704d03e5aaa1c6e34212f009bec4a50e2cbffa)|`Merge branch 't/29129/add_more_system_packages_to_build_pkgs_spkg_distros_' into t/29273/packages/r_packages_in_distros`|
|[f8097c4](https://github.com/sagemath/sagetrac-mirror/commit/f8097c4ccec68ed85e39d7e29a460b1fe4e9ce81)|`Merge branch 'u/mkoeppe/packages/r_packages_in_distros' of git://trac.sagemath.org/sage into t/29104/tox-homebrew`|
|[9e9f4c7](https://github.com/sagemath/sagetrac-mirror/commit/9e9f4c7f852c7b6f18d44e950a84317bd1de9c6b)|`Add distros/homebrew.txt for many packages, and some more distros/*.txt`|



---

archive/issue_comments_559820.json:
```json
{
    "body": "Changing commit from \"d7a2e726c10e58fac83b7c419973e53f92e9444f\" to \"9e9f4c7f852c7b6f18d44e950a84317bd1de9c6b\"",
    "created_at": "2020-03-11T19:35:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559820",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d7a2e726c10e58fac83b7c419973e53f92e9444f" to "9e9f4c7f852c7b6f18d44e950a84317bd1de9c6b"



---

archive/issue_comments_559821.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#29273\"",
    "created_at": "2020-03-11T19:36:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559821",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#29273"



---

archive/issue_events_091221.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "rename": {
        "from": "Add to tox.ini some homebrew toxenvs (with a fresh install not in /usr/local)",
        "to": "Add to tox.ini some homebrew toxenvs (with a fresh install not in /usr/local), add homebrew packages"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29104#event-91221"
}
```



---

archive/issue_comments_559822.json:
```json
{
    "body": "<a id='comment:26'></a>\n- mpc should be `libmpc`\n- `tachyon` does not seem to be the package we use\n- `pari` cannot currently be used by Sage because the pari packages are not in Homebrew\n- `glpk` 4.65 should not be used by Sage as long as it is not patched by Homebrew, see #24824\n\nI also have these Homebrew packages installed:\n\n```\ncmake freetype gcc git libpng pcre pkg-config openssl xz zeromq\n```\nSome of these might already be installed automatically as dependencies of others.\n\nAdditionally there are:\n\n```\nsagemath/science/flint sagemath/science/arb\n```\nThough, I am not sure about how `flint` in homebrew-core is different from this one.",
    "created_at": "2020-03-11T20:35:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559822",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:26'></a>
- mpc should be `libmpc`
- `tachyon` does not seem to be the package we use
- `pari` cannot currently be used by Sage because the pari packages are not in Homebrew
- `glpk` 4.65 should not be used by Sage as long as it is not patched by Homebrew, see #24824

I also have these Homebrew packages installed:

```
cmake freetype gcc git libpng pcre pkg-config openssl xz zeromq
```
Some of these might already be installed automatically as dependencies of others.

Additionally there are:

```
sagemath/science/flint sagemath/science/arb
```
Though, I am not sure about how `flint` in homebrew-core is different from this one.



---

archive/issue_comments_559823.json:
```json
{
    "body": "<a id='comment:27'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|\n|[e8d1fef](https://github.com/sagemath/sagetrac-mirror/commit/e8d1fef3818fd1d78f83df31ae237061ea089f92)|`Add build/pkgs/homebrew*.txt`|",
    "created_at": "2020-03-11T20:37:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559823",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|
|[e8d1fef](https://github.com/sagemath/sagetrac-mirror/commit/e8d1fef3818fd1d78f83df31ae237061ea089f92)|`Add build/pkgs/homebrew*.txt`|



---

archive/issue_comments_559824.json:
```json
{
    "body": "Changing commit from \"9e9f4c7f852c7b6f18d44e950a84317bd1de9c6b\" to \"e8d1fef3818fd1d78f83df31ae237061ea089f92\"",
    "created_at": "2020-03-11T20:37:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559824",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9e9f4c7f852c7b6f18d44e950a84317bd1de9c6b" to "e8d1fef3818fd1d78f83df31ae237061ea089f92"



---

archive/issue_comments_559825.json:
```json
{
    "body": "Changing commit from \"e8d1fef3818fd1d78f83df31ae237061ea089f92\" to \"242f684eac3c9a71e9562c56554a0b2cdf9e297e\"",
    "created_at": "2020-03-11T20:55:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559825",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e8d1fef3818fd1d78f83df31ae237061ea089f92" to "242f684eac3c9a71e9562c56554a0b2cdf9e297e"



---

archive/issue_comments_559826.json:
```json
{
    "body": "<a id='comment:28'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|\n|[242f684](https://github.com/sagemath/sagetrac-mirror/commit/242f684eac3c9a71e9562c56554a0b2cdf9e297e)|`Add/fix build/pkgs/*/homebrew.txt - from gh-mwageringel`|",
    "created_at": "2020-03-11T20:55:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559826",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|
|[242f684](https://github.com/sagemath/sagetrac-mirror/commit/242f684eac3c9a71e9562c56554a0b2cdf9e297e)|`Add/fix build/pkgs/*/homebrew.txt - from gh-mwageringel`|



---

archive/issue_comments_559827.json:
```json
{
    "body": "<a id='comment:29'></a>\nhttps://github.com/sagemath/homebrew-science/commits/master\n\nadds NTL support for flint, and also ensbles TLS.\n\nwe can cook up more of these formulae, theain obstacle for me there was that they ate in Ruby.\n\n---\nNew commits:\n|                                                                                                                                          |                                                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|\n|[242f684](https://github.com/sagemath/sagetrac-mirror/commit/242f684eac3c9a71e9562c56554a0b2cdf9e297e)|`Add/fix build/pkgs/*/homebrew.txt - from gh-mwageringel`|",
    "created_at": "2020-03-11T20:56:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559827",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:29'></a>
https://github.com/sagemath/homebrew-science/commits/master

adds NTL support for flint, and also ensbles TLS.

we can cook up more of these formulae, theain obstacle for me there was that they ate in Ruby.

---
New commits:
|                                                                                                                                          |                                                         |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|
|[242f684](https://github.com/sagemath/sagetrac-mirror/commit/242f684eac3c9a71e9562c56554a0b2cdf9e297e)|`Add/fix build/pkgs/*/homebrew.txt - from gh-mwageringel`|



---

archive/issue_comments_559828.json:
```json
{
    "body": "<a id='comment:30'></a>\n\n```\n==> Installing sagemath/science/arb\n==> Downloading https://homebrew.bintray.com/bottles-science/arb-2.16.0.sierra.bottle.tar.gz\n##O=#  #                                                                      \ncurl: (22) The requested URL returned error: 404 Not Found\nError: Failed to download resource \"arb\"\nDownload failed: https://homebrew.bintray.com/bottles-science/arb-2.16.0.sierra.bottle.tar.gz\nWarning: Bottle installation failed: building from source.\n==> Downloading https://github.com/fredrik-johansson/arb/archive/2.16.0.tar.gz\n==> Downloading from https://codeload.github.com/fredrik-johansson/arb/tar.gz/2.16.0\n######################################################################## 100.0%\n```",
    "created_at": "2020-03-11T21:06:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559828",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:30'></a>

```
==> Installing sagemath/science/arb
==> Downloading https://homebrew.bintray.com/bottles-science/arb-2.16.0.sierra.bottle.tar.gz
##O=#  #                                                                      
curl: (22) The requested URL returned error: 404 Not Found
Error: Failed to download resource "arb"
Download failed: https://homebrew.bintray.com/bottles-science/arb-2.16.0.sierra.bottle.tar.gz
Warning: Bottle installation failed: building from source.
==> Downloading https://github.com/fredrik-johansson/arb/archive/2.16.0.tar.gz
==> Downloading from https://codeload.github.com/fredrik-johansson/arb/tar.gz/2.16.0
######################################################################## 100.0%
```



---

archive/issue_comments_559829.json:
```json
{
    "body": "<a id='comment:31'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|\n|[2449c39](https://github.com/sagemath/sagetrac-mirror/commit/2449c395aad510ffc430416a06f2182b6dc0ba7c)|`tox.ini: Get homebrew packages from *homebrew*.txt`|",
    "created_at": "2020-03-11T21:07:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559829",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|
|[2449c39](https://github.com/sagemath/sagetrac-mirror/commit/2449c395aad510ffc430416a06f2182b6dc0ba7c)|`tox.ini: Get homebrew packages from *homebrew*.txt`|



---

archive/issue_comments_559830.json:
```json
{
    "body": "Changing commit from \"242f684eac3c9a71e9562c56554a0b2cdf9e297e\" to \"2449c395aad510ffc430416a06f2182b6dc0ba7c\"",
    "created_at": "2020-03-11T21:07:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559830",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "242f684eac3c9a71e9562c56554a0b2cdf9e297e" to "2449c395aad510ffc430416a06f2182b6dc0ba7c"



---

archive/issue_comments_559831.json:
```json
{
    "body": "<a id='comment:32'></a>\nReplying to [mkoeppe](#comment%3A30):\n> {{{\n> ==> Installing sagemath/science/arb\n> ==> Downloading https://homebrew.bintray.com/bottles-science/arb-2.16.0.sierra.bottle.tar.gz\n> ##O=#  #                                                                      \n> curl: (22) The requested URL returned error: 404 Not Found\n> Error: Failed to download resource \"arb\"\n> Download failed: https://homebrew.bintray.com/bottles-science/arb-2.16.0.sierra.bottle.tar.gz\n> Warning: Bottle installation failed: building from source.\n> ==> Downloading https://github.com/fredrik-johansson/arb/archive/2.16.0.tar.gz\n> ==> Downloading from https://codeload.github.com/fredrik-johansson/arb/tar.gz/2.16.0\n> ######################################################################## 100.0%\n> }}}\n\nyes, this is expected. No binaries.",
    "created_at": "2020-03-11T21:10:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559831",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:32'></a>
Replying to [mkoeppe](#comment%3A30):
> {{{
> ==> Installing sagemath/science/arb
> ==> Downloading https://homebrew.bintray.com/bottles-science/arb-2.16.0.sierra.bottle.tar.gz
> ##O=#  #                                                                      
> curl: (22) The requested URL returned error: 404 Not Found
> Error: Failed to download resource "arb"
> Download failed: https://homebrew.bintray.com/bottles-science/arb-2.16.0.sierra.bottle.tar.gz
> Warning: Bottle installation failed: building from source.
> ==> Downloading https://github.com/fredrik-johansson/arb/archive/2.16.0.tar.gz
> ==> Downloading from https://codeload.github.com/fredrik-johansson/arb/tar.gz/2.16.0
> ######################################################################## 100.0%
> }}}

yes, this is expected. No binaries.



---

archive/issue_comments_559832.json:
```json
{
    "body": "<a id='comment:33'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|\n|[188994a](https://github.com/sagemath/sagetrac-mirror/commit/188994aa353dd4533f701aa986a24c1ac2cad860)|`tox.ini: Use brew upgrade after brew install`|",
    "created_at": "2020-03-11T21:29:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559832",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|
|[188994a](https://github.com/sagemath/sagetrac-mirror/commit/188994aa353dd4533f701aa986a24c1ac2cad860)|`tox.ini: Use brew upgrade after brew install`|



---

archive/issue_comments_559833.json:
```json
{
    "body": "Changing commit from \"2449c395aad510ffc430416a06f2182b6dc0ba7c\" to \"188994aa353dd4533f701aa986a24c1ac2cad860\"",
    "created_at": "2020-03-11T21:29:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559833",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2449c395aad510ffc430416a06f2182b6dc0ba7c" to "188994aa353dd4533f701aa986a24c1ac2cad860"



---

archive/issue_comments_559834.json:
```json
{
    "body": "Changing commit from \"188994aa353dd4533f701aa986a24c1ac2cad860\" to \"6df5104b1ed9ad4e41857cfd522ab31170b95268\"",
    "created_at": "2020-03-11T21:59:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559834",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "188994aa353dd4533f701aa986a24c1ac2cad860" to "6df5104b1ed9ad4e41857cfd522ab31170b95268"



---

archive/issue_comments_559835.json:
```json
{
    "body": "<a id='comment:34'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[6df5104](https://github.com/sagemath/sagetrac-mirror/commit/6df5104b1ed9ad4e41857cfd522ab31170b95268)|`tox.ini [local-homebrew]: Add to PKG_CONFIG_PATH`|",
    "created_at": "2020-03-11T21:59:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559835",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[6df5104](https://github.com/sagemath/sagetrac-mirror/commit/6df5104b1ed9ad4e41857cfd522ab31170b95268)|`tox.ini [local-homebrew]: Add to PKG_CONFIG_PATH`|



---

archive/issue_comments_559836.json:
```json
{
    "body": "<a id='comment:35'></a>\n\n```\nChecking whether SageMath should install SPKG openblas...\nchecking BLAS library... openblas\nchecking whether any of gfortran is installed or will be installed as SPKG... no\nchecking for openblas >= 0.2.20... yes\nchecking for library containing cblas_dgemm... no\nchecking for cblas... no\nchecking for library containing ... no\nchecking for lapack... no\nconfigure: no suitable system package found for SPKG openblas\n```\nThe tests for `cblas_dgemm` etc. do not seem to use `OPENBLAS_LIBS` at all!",
    "created_at": "2020-03-11T22:15:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559836",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:35'></a>

```
Checking whether SageMath should install SPKG openblas...
checking BLAS library... openblas
checking whether any of gfortran is installed or will be installed as SPKG... no
checking for openblas >= 0.2.20... yes
checking for library containing cblas_dgemm... no
checking for cblas... no
checking for library containing ... no
checking for lapack... no
configure: no suitable system package found for SPKG openblas
```
The tests for `cblas_dgemm` etc. do not seem to use `OPENBLAS_LIBS` at all!



---

archive/issue_comments_559837.json:
```json
{
    "body": "<a id='comment:36'></a>\nReplying to [dimpase](#comment%3A29):\n> https://github.com/sagemath/homebrew-science/commits/master\n> \n> adds NTL support for flint, and also ensbles TLS.\n> \n> we can cook up more of these formulae, theain obstacle for me there was that they ate in Ruby.\n\n\nThere seems to be a conflict between `flint` and `sagemath/science/flint`, as `sagemath/science/arb` installs `flint` from homebrew-core as a dependency (which has been added to Homebrew very recently). I am using\n\n```\nbrew install sagemath/science/flint\nbrew install --ignore-dependencies sagemath/science/arb\n```\nas a workaround now, but the arb formula probably needs to be updated.",
    "created_at": "2020-03-11T22:49:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559837",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:36'></a>
Replying to [dimpase](#comment%3A29):
> https://github.com/sagemath/homebrew-science/commits/master
> 
> adds NTL support for flint, and also ensbles TLS.
> 
> we can cook up more of these formulae, theain obstacle for me there was that they ate in Ruby.


There seems to be a conflict between `flint` and `sagemath/science/flint`, as `sagemath/science/arb` installs `flint` from homebrew-core as a dependency (which has been added to Homebrew very recently). I am using

```
brew install sagemath/science/flint
brew install --ignore-dependencies sagemath/science/arb
```
as a workaround now, but the arb formula probably needs to be updated.



---

archive/issue_comments_559838.json:
```json
{
    "body": "<a id='comment:37'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------|\n|[c9d5564](https://github.com/sagemath/sagetrac-mirror/commit/c9d5564c2b4cc4b68748c370211956984d2c986e)|`build/pkgs/openblas/spkg-configure.m4: Use OPENBLAS_{LIBS,CFLAGS} while checking for cblas/lapack functions`|",
    "created_at": "2020-03-11T23:03:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559838",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:37'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------|
|[c9d5564](https://github.com/sagemath/sagetrac-mirror/commit/c9d5564c2b4cc4b68748c370211956984d2c986e)|`build/pkgs/openblas/spkg-configure.m4: Use OPENBLAS_{LIBS,CFLAGS} while checking for cblas/lapack functions`|



---

archive/issue_comments_559839.json:
```json
{
    "body": "Changing commit from \"6df5104b1ed9ad4e41857cfd522ab31170b95268\" to \"c9d5564c2b4cc4b68748c370211956984d2c986e\"",
    "created_at": "2020-03-11T23:03:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559839",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6df5104b1ed9ad4e41857cfd522ab31170b95268" to "c9d5564c2b4cc4b68748c370211956984d2c986e"



---

archive/issue_comments_559840.json:
```json
{
    "body": "<a id='comment:38'></a>\nThis line (introduced in #29071):\n\n```\n        AC_FC_FREEFORM([AC_FC_FUNC([dgeqrf])])\n```\nis not executed at all because `AC_FC_FREEFORM` is `AC_DEFUN_ONCE` and is called already in `gfortran/spkg-configure.m4`\n\nAs a result:\n\n```\nChecking whether SageMath should install SPKG openblas...\nchecking BLAS library... openblas\nchecking whether any of gfortran is installed or will be installed as SPKG... no\nchecking for openblas >= 0.2.20... yes\nchecking for cblas_dgemm... yes\nchecking for ... no\nchecking for lapack... no\nconfigure: no suitable system package found for SPKG openblas\n```",
    "created_at": "2020-03-11T23:10:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559840",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:38'></a>
This line (introduced in #29071):

```
        AC_FC_FREEFORM([AC_FC_FUNC([dgeqrf])])
```
is not executed at all because `AC_FC_FREEFORM` is `AC_DEFUN_ONCE` and is called already in `gfortran/spkg-configure.m4`

As a result:

```
Checking whether SageMath should install SPKG openblas...
checking BLAS library... openblas
checking whether any of gfortran is installed or will be installed as SPKG... no
checking for openblas >= 0.2.20... yes
checking for cblas_dgemm... yes
checking for ... no
checking for lapack... no
configure: no suitable system package found for SPKG openblas
```



---

archive/issue_comments_559841.json:
```json
{
    "body": "Changing commit from \"c9d5564c2b4cc4b68748c370211956984d2c986e\" to \"52ef59ed13d878e1a0de0bec999a9d23a442ca6f\"",
    "created_at": "2020-03-11T23:45:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559841",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c9d5564c2b4cc4b68748c370211956984d2c986e" to "52ef59ed13d878e1a0de0bec999a9d23a442ca6f"



---

archive/issue_comments_559842.json:
```json
{
    "body": "<a id='comment:39'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------|\n|[52ef59e](https://github.com/sagemath/sagetrac-mirror/commit/52ef59ed13d878e1a0de0bec999a9d23a442ca6f)|`build/pkgs/openblas/spkg-configure.m4: Do not use AC_FC_FUNC.`|",
    "created_at": "2020-03-11T23:45:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559842",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------|
|[52ef59e](https://github.com/sagemath/sagetrac-mirror/commit/52ef59ed13d878e1a0de0bec999a9d23a442ca6f)|`build/pkgs/openblas/spkg-configure.m4: Do not use AC_FC_FUNC.`|



---

archive/issue_comments_559843.json:
```json
{
    "body": "<a id='comment:40'></a>\nNot accepted by configure yet: `glpk`, `r`",
    "created_at": "2020-03-11T23:53:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559843",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:40'></a>
Not accepted by configure yet: `glpk`, `r`



---

archive/issue_comments_559844.json:
```json
{
    "body": "<a id='comment:41'></a>\n(resolved)",
    "created_at": "2020-03-11T23:55:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559844",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:41'></a>
(resolved)



---

archive/issue_comments_559845.json:
```json
{
    "body": "<a id='comment:42'></a>\nReplying to [git](#comment%3A39):\n> Branch pushed to git repo; I updated commit sha1. New commits:\n> |                                                                                                                                           |                                                               |\n> |-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------|\n> |[52ef59e](https://github.com/sagemath/sagetrac-mirror/commit/52ef59ed13d878e1a0de0bec999a9d23a442ca6f)|`build/pkgs/openblas/spkg-configure.m4: Do not use AC_FC_FUNC.`|\n\n\nwhy? If `AC_FC_FREEFORM` can only be called once, we can move\nthe call to `AC_FC_FUNC` to the very place it's called.\nHow about\n\n```diff\n--- a/build/pkgs/gfortran/spkg-configure.m4\n+++ b/build/pkgs/gfortran/spkg-configure.m4\n@@ -6,7 +6,10 @@ SAGE_SPKG_CONFIGURE([gfortran], [\n     # This helps verify the compiler works too, so if some idiot sets FC to\n     # /usr/bin/ls, we will at least know it's not a working Fortran\n     # compiler.\n-    AC_FC_FREEFORM([SAGE_HAVE_FC_FREEFORM=yes], [\n+    AC_FC_FREEFORM([\n+        SAGE_HAVE_FC_FREEFORM=yes\n+        AC_FC_FUNC([dgeqrf])\n+       ], [\n        AC_MSG_NOTICE([Your Fortran compiler does not accept free-format source code])\n         AC_MSG_NOTICE([which means the compiler is either seriously broken, or])\n         AC_MSG_NOTICE([is too old to build Sage.])\ndiff --git a/build/pkgs/openblas/spkg-configure.m4 b/build/pkgs/openblas/spkg-configure.m4\nindex c37db649be..ecc7540ee9 100644\n--- a/build/pkgs/openblas/spkg-configure.m4\n+++ b/build/pkgs/openblas/spkg-configure.m4\n@@ -9,7 +9,6 @@ SAGE_SPKG_CONFIGURE([openblas], [\n              dnl openblas does not work as cblas; try to use system's cblas as is\n              PKG_CHECK_MODULES([CBLAS], [cblas], [], [sage_spkg_install_openblas=yes])\n           ])\n-       AC_FC_FREEFORM([AC_FC_FUNC([dgeqrf])])\n        AC_SEARCH_LIBS([$dgeqrf], [openblas], [dnl openblas works as lapack\n              sage_install_lapack_pc=yes\n              ], [\n```",
    "created_at": "2020-03-11T23:58:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559845",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:42'></a>
Replying to [git](#comment%3A39):
> Branch pushed to git repo; I updated commit sha1. New commits:
> |                                                                                                                                           |                                                               |
> |-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------|
> |[52ef59e](https://github.com/sagemath/sagetrac-mirror/commit/52ef59ed13d878e1a0de0bec999a9d23a442ca6f)|`build/pkgs/openblas/spkg-configure.m4: Do not use AC_FC_FUNC.`|


why? If `AC_FC_FREEFORM` can only be called once, we can move
the call to `AC_FC_FUNC` to the very place it's called.
How about

```diff
--- a/build/pkgs/gfortran/spkg-configure.m4
+++ b/build/pkgs/gfortran/spkg-configure.m4
@@ -6,7 +6,10 @@ SAGE_SPKG_CONFIGURE([gfortran], [
     # This helps verify the compiler works too, so if some idiot sets FC to
     # /usr/bin/ls, we will at least know it's not a working Fortran
     # compiler.
-    AC_FC_FREEFORM([SAGE_HAVE_FC_FREEFORM=yes], [
+    AC_FC_FREEFORM([
+        SAGE_HAVE_FC_FREEFORM=yes
+        AC_FC_FUNC([dgeqrf])
+       ], [
        AC_MSG_NOTICE([Your Fortran compiler does not accept free-format source code])
         AC_MSG_NOTICE([which means the compiler is either seriously broken, or])
         AC_MSG_NOTICE([is too old to build Sage.])
diff --git a/build/pkgs/openblas/spkg-configure.m4 b/build/pkgs/openblas/spkg-configure.m4
index c37db649be..ecc7540ee9 100644
--- a/build/pkgs/openblas/spkg-configure.m4
+++ b/build/pkgs/openblas/spkg-configure.m4
@@ -9,7 +9,6 @@ SAGE_SPKG_CONFIGURE([openblas], [
              dnl openblas does not work as cblas; try to use system's cblas as is
              PKG_CHECK_MODULES([CBLAS], [cblas], [], [sage_spkg_install_openblas=yes])
           ])
-       AC_FC_FREEFORM([AC_FC_FUNC([dgeqrf])])
        AC_SEARCH_LIBS([$dgeqrf], [openblas], [dnl openblas works as lapack
              sage_install_lapack_pc=yes
              ], [
```



---

archive/issue_comments_559846.json:
```json
{
    "body": "<a id='comment:43'></a>\nOK... let me try",
    "created_at": "2020-03-12T00:00:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559846",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:43'></a>
OK... let me try



---

archive/issue_comments_559847.json:
```json
{
    "body": "<a id='comment:44'></a>\nReplying to [mkoeppe](#comment%3A43):\n> OK... let me try\n\n\nit appears to work with gfortan etc installed:\n\n```\n-----------------------------------------------------------------------------\nChecking whether SageMath should install SPKG openblas...\nchecking BLAS library... openblas\nchecking whether any of gfortran is installed or will be installed as SPKG... no\nchecking for OPENBLAS... yes\nchecking for library containing cblas_dgemm... -lopenblas\nchecking for library containing dgeqrf_... none required\nconfigure: will use system package and not install SPKG openblas\n```\n\nbut perhaps it would be throwing up a surprise if there wasn't any.",
    "created_at": "2020-03-12T00:07:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559847",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:44'></a>
Replying to [mkoeppe](#comment%3A43):
> OK... let me try


it appears to work with gfortan etc installed:

```
-----------------------------------------------------------------------------
Checking whether SageMath should install SPKG openblas...
checking BLAS library... openblas
checking whether any of gfortran is installed or will be installed as SPKG... no
checking for OPENBLAS... yes
checking for library containing cblas_dgemm... -lopenblas
checking for library containing dgeqrf_... none required
configure: will use system package and not install SPKG openblas
```

but perhaps it would be throwing up a surprise if there wasn't any.



---

archive/issue_comments_559848.json:
```json
{
    "body": "<a id='comment:45'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------|\n|[f049b9b](https://github.com/sagemath/sagetrac-mirror/commit/f049b9b4311cd38fec8deba2410916d28a4d8732)|`Revert \"build/pkgs/openblas/spkg-configure.m4: Do not use AC_FC_FUNC.\"`|\n|[9dd3776](https://github.com/sagemath/sagetrac-mirror/commit/9dd37760062337ca4e97263c713d8a46880644b8)|`Move AC_FC_FUNC([dgeqrf]) from openblas/spkg-configure.m4 to gfortran/spkg-configure.m4`|",
    "created_at": "2020-03-12T00:11:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559848",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:45'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------|
|[f049b9b](https://github.com/sagemath/sagetrac-mirror/commit/f049b9b4311cd38fec8deba2410916d28a4d8732)|`Revert "build/pkgs/openblas/spkg-configure.m4: Do not use AC_FC_FUNC."`|
|[9dd3776](https://github.com/sagemath/sagetrac-mirror/commit/9dd37760062337ca4e97263c713d8a46880644b8)|`Move AC_FC_FUNC([dgeqrf]) from openblas/spkg-configure.m4 to gfortran/spkg-configure.m4`|



---

archive/issue_comments_559849.json:
```json
{
    "body": "Changing commit from \"52ef59ed13d878e1a0de0bec999a9d23a442ca6f\" to \"9dd37760062337ca4e97263c713d8a46880644b8\"",
    "created_at": "2020-03-12T00:11:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559849",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "52ef59ed13d878e1a0de0bec999a9d23a442ca6f" to "9dd37760062337ca4e97263c713d8a46880644b8"



---

archive/issue_comments_559850.json:
```json
{
    "body": "Changing commit from \"9dd37760062337ca4e97263c713d8a46880644b8\" to \"886ca2f0392764055804e44597dc38125bd93e9c\"",
    "created_at": "2020-03-12T00:26:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559850",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9dd37760062337ca4e97263c713d8a46880644b8" to "886ca2f0392764055804e44597dc38125bd93e9c"



---

archive/issue_comments_559851.json:
```json
{
    "body": "<a id='comment:46'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|\n|[886ca2f](https://github.com/sagemath/sagetrac-mirror/commit/886ca2f0392764055804e44597dc38125bd93e9c)|`tox.ini [homebrew]: make build`|",
    "created_at": "2020-03-12T00:26:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559851",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:46'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|
|[886ca2f](https://github.com/sagemath/sagetrac-mirror/commit/886ca2f0392764055804e44597dc38125bd93e9c)|`tox.ini [homebrew]: make build`|



---

archive/issue_comments_559852.json:
```json
{
    "body": "<a id='comment:47'></a>\nmatplotlib install fails:\n\n```\n    REQUIRED DEPENDENCIES AND EXTENSIONS\n                     numpy: yes [not found. pip may install it below.]\n          install_requires: yes [handled by setuptools]\n                    libagg: yes [pkg-config information for 'libagg' could not\n                            be found. Using local copy.]\n                  freetype: yes [version 2.10.1]\n                       png: no  [The C/C++ header for libpng (png.h) could not\n                            be found.  You may need to install the development\n                            package.]\n                     qhull: yes [pkg-config information for 'libqhull' could not\n                            be found. Using local copy.]\n...\n                            * The following required packages can not be built:\n                            * png\n                            * Try installing png with `brew install libpng` and\n                            * pkg-config with `brew install pkg-config`\nCleaning up...\n\n  }}}",
    "created_at": "2020-03-12T00:44:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559852",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:47'></a>
matplotlib install fails:

```
    REQUIRED DEPENDENCIES AND EXTENSIONS
                     numpy: yes [not found. pip may install it below.]
          install_requires: yes [handled by setuptools]
                    libagg: yes [pkg-config information for 'libagg' could not
                            be found. Using local copy.]
                  freetype: yes [version 2.10.1]
                       png: no  [The C/C++ header for libpng (png.h) could not
                            be found.  You may need to install the development
                            package.]
                     qhull: yes [pkg-config information for 'libqhull' could not
                            be found. Using local copy.]
...
                            * The following required packages can not be built:
                            * png
                            * Try installing png with `brew install libpng` and
                            * pkg-config with `brew install pkg-config`
Cleaning up...

  }}}



---

archive/issue_comments_559853.json:
```json
{
    "body": "<a id='comment:48'></a>\ncysignals testsuite fails:\n\n```\n  [cysignals-1.10.2]   ulimit 2>/dev/null -s 1024; sage-python23 -B rundoctests.py src/cysignals/*.pyx\n  [cysignals-1.10.2]   Doctesting 5 files.\n  [cysignals-1.10.2]   Traceback (most recent call last):\n  [cysignals-1.10.2]     File \"rundoctests.py\", line 74, in <module>\n  [cysignals-1.10.2]       resource.setrlimit(resource.RLIMIT_STACK, (stacksize, stacksize))\n  [cysignals-1.10.2]   ValueError: current limit exceeds maximum limit\n  [cysignals-1.10.2]   make[4]: *** [check-doctest] Error 1\n  [cysignals-1.10.2]   cd example && sage-python23 setup.py clean build\n }}}",
    "created_at": "2020-03-12T00:47:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559853",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:48'></a>
cysignals testsuite fails:

```
  [cysignals-1.10.2]   ulimit 2>/dev/null -s 1024; sage-python23 -B rundoctests.py src/cysignals/*.pyx
  [cysignals-1.10.2]   Doctesting 5 files.
  [cysignals-1.10.2]   Traceback (most recent call last):
  [cysignals-1.10.2]     File "rundoctests.py", line 74, in <module>
  [cysignals-1.10.2]       resource.setrlimit(resource.RLIMIT_STACK, (stacksize, stacksize))
  [cysignals-1.10.2]   ValueError: current limit exceeds maximum limit
  [cysignals-1.10.2]   make[4]: *** [check-doctest] Error 1
  [cysignals-1.10.2]   cd example && sage-python23 setup.py clean build
 }}}



---

archive/issue_comments_559854.json:
```json
{
    "body": "<a id='comment:49'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------|\n|[fdeced3](https://github.com/sagemath/sagetrac-mirror/commit/fdeced384747b6d387450d0b87e623056f6a9522)|`Add zlib`|\n|[185dbbb](https://github.com/sagemath/sagetrac-mirror/commit/185dbbb346e7bea59d6108e2ca8e3b33cb734d03)|`tox.ini [local]: Disable testsuites for some packages`|",
    "created_at": "2020-03-12T02:23:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559854",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:49'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |          |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------|
|[fdeced3](https://github.com/sagemath/sagetrac-mirror/commit/fdeced384747b6d387450d0b87e623056f6a9522)|`Add zlib`|
|[185dbbb](https://github.com/sagemath/sagetrac-mirror/commit/185dbbb346e7bea59d6108e2ca8e3b33cb734d03)|`tox.ini [local]: Disable testsuites for some packages`|



---

archive/issue_comments_559855.json:
```json
{
    "body": "Changing commit from \"886ca2f0392764055804e44597dc38125bd93e9c\" to \"185dbbb346e7bea59d6108e2ca8e3b33cb734d03\"",
    "created_at": "2020-03-12T02:23:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559855",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "886ca2f0392764055804e44597dc38125bd93e9c" to "185dbbb346e7bea59d6108e2ca8e3b33cb734d03"



---

archive/issue_comments_559856.json:
```json
{
    "body": "Changing commit from \"185dbbb346e7bea59d6108e2ca8e3b33cb734d03\" to \"6750bf1d0bbe58b4ec5526af2fb50361e489a42e\"",
    "created_at": "2020-03-12T02:35:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559856",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "185dbbb346e7bea59d6108e2ca8e3b33cb734d03" to "6750bf1d0bbe58b4ec5526af2fb50361e489a42e"



---

archive/issue_comments_559857.json:
```json
{
    "body": "<a id='comment:50'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|\n|[6750bf1](https://github.com/sagemath/sagetrac-mirror/commit/6750bf1d0bbe58b4ec5526af2fb50361e489a42e)|`tox.ini [local]: Disable linbox testsuite`|",
    "created_at": "2020-03-12T02:35:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559857",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:50'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|
|[6750bf1](https://github.com/sagemath/sagetrac-mirror/commit/6750bf1d0bbe58b4ec5526af2fb50361e489a42e)|`tox.ini [local]: Disable linbox testsuite`|



---

archive/issue_comments_559858.json:
```json
{
    "body": "<a id='comment:51'></a>\nReady for review.",
    "created_at": "2020-03-12T02:46:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559858",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:51'></a>
Ready for review.



---

archive/issue_comments_559859.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-03-12T03:26:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559859",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_559860.json:
```json
{
    "body": "<a id='comment:53'></a>\nThe AC_FC_FUNC business broke all `-minimal` targets\n(https://github.com/mkoeppe/sage/actions/runs/54084841)",
    "created_at": "2020-03-12T03:43:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559860",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:53'></a>
The AC_FC_FUNC business broke all `-minimal` targets
(https://github.com/mkoeppe/sage/actions/runs/54084841)



---

archive/issue_comments_559861.json:
```json
{
    "body": "Changing commit from \"6750bf1d0bbe58b4ec5526af2fb50361e489a42e\" to \"071e0b33470bc6fc13296052a831d84d85d4a530\"",
    "created_at": "2020-03-12T03:53:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559861",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6750bf1d0bbe58b4ec5526af2fb50361e489a42e" to "071e0b33470bc6fc13296052a831d84d85d4a530"



---

archive/issue_comments_559862.json:
```json
{
    "body": "<a id='comment:54'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|\n|[9f486ef](https://github.com/sagemath/sagetrac-mirror/commit/9f486efbf1421ad1ca08db1159a37566d93c8ae4)|`Revert \"Move AC_FC_FUNC([dgeqrf]) from openblas/spkg-configure.m4 to gfortran/spkg-configure.m4\"`|\n|[071e0b3](https://github.com/sagemath/sagetrac-mirror/commit/071e0b33470bc6fc13296052a831d84d85d4a530)|`Revert \"Revert \"build/pkgs/openblas/spkg-configure.m4: Do not use AC_FC_FUNC.\"\"`|",
    "created_at": "2020-03-12T03:53:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559862",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:54'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|
|[9f486ef](https://github.com/sagemath/sagetrac-mirror/commit/9f486efbf1421ad1ca08db1159a37566d93c8ae4)|`Revert "Move AC_FC_FUNC([dgeqrf]) from openblas/spkg-configure.m4 to gfortran/spkg-configure.m4"`|
|[071e0b3](https://github.com/sagemath/sagetrac-mirror/commit/071e0b33470bc6fc13296052a831d84d85d4a530)|`Revert "Revert "build/pkgs/openblas/spkg-configure.m4: Do not use AC_FC_FUNC.""`|



---

archive/issue_comments_559863.json:
```json
{
    "body": "<a id='comment:55'></a>\nNew tests at https://github.com/mkoeppe/sage/actions/runs/54093138",
    "created_at": "2020-03-12T03:58:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559863",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:55'></a>
New tests at https://github.com/mkoeppe/sage/actions/runs/54093138



---

archive/issue_comments_559864.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-03-12T03:58:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559864",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_559865.json:
```json
{
    "body": "<a id='comment:57'></a>\nNeeds review",
    "created_at": "2020-03-12T16:12:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559865",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:57'></a>
Needs review



---

archive/issue_comments_559866.json:
```json
{
    "body": "<a id='comment:58'></a>\nBoth `homebrew-macos-minimal` (logs: https://github.com/mkoeppe/sage/suites/515691370/artifacts/2830410) and `homebrew-macos-standard` (logs: https://github.com/mkoeppe/sage/suites/515691370/artifacts/2830411)  now build correctly all the way to `sagelib`.",
    "created_at": "2020-03-13T21:09:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559866",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:58'></a>
Both `homebrew-macos-minimal` (logs: https://github.com/mkoeppe/sage/suites/515691370/artifacts/2830410) and `homebrew-macos-standard` (logs: https://github.com/mkoeppe/sage/suites/515691370/artifacts/2830411)  now build correctly all the way to `sagelib`.



---

archive/issue_comments_559867.json:
```json
{
    "body": "<a id='comment:59'></a>\nSome doctest failures similar to this:\n\n```\nFile \"src/sage/structure/element.pyx\", line 3945, in sage.structure.element.EuclideanDomainElement._mod_\nFailed example:\n    cython('''\n    from sage.structure.element cimport EuclideanDomainElement\n    cdef class MyElt(EuclideanDomainElement):\n        def quo_rem(self, other):\n            return self._parent.var('quo,rem')\n    ''')\nExpected nothing\nGot:\n    ld: warning: directory not found for option '-L/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-minimal/homebrew/opt/readline/lib'\n```",
    "created_at": "2020-03-13T23:40:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559867",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:59'></a>
Some doctest failures similar to this:

```
File "src/sage/structure/element.pyx", line 3945, in sage.structure.element.EuclideanDomainElement._mod_
Failed example:
    cython('''
    from sage.structure.element cimport EuclideanDomainElement
    cdef class MyElt(EuclideanDomainElement):
        def quo_rem(self, other):
            return self._parent.var('quo,rem')
    ''')
Expected nothing
Got:
    ld: warning: directory not found for option '-L/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-minimal/homebrew/opt/readline/lib'
```



---

archive/issue_comments_559868.json:
```json
{
    "body": "<a id='comment:60'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------|\n|[d1eb116](https://github.com/sagemath/sagetrac-mirror/commit/d1eb116499937578c84f3b27097bf4d3f4194b2f)|`tox.ini: Move homebrew environment settings to script .homebrew-build-env`|",
    "created_at": "2020-03-14T20:21:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559868",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:60'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------|
|[d1eb116](https://github.com/sagemath/sagetrac-mirror/commit/d1eb116499937578c84f3b27097bf4d3f4194b2f)|`tox.ini: Move homebrew environment settings to script .homebrew-build-env`|



---

archive/issue_comments_559869.json:
```json
{
    "body": "Changing commit from \"071e0b33470bc6fc13296052a831d84d85d4a530\" to \"d1eb116499937578c84f3b27097bf4d3f4194b2f\"",
    "created_at": "2020-03-14T20:21:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559869",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "071e0b33470bc6fc13296052a831d84d85d4a530" to "d1eb116499937578c84f3b27097bf4d3f4194b2f"



---

archive/issue_comments_559870.json:
```json
{
    "body": "<a id='comment:61'></a>\nReplying to [mkoeppe](#comment%3A59):\n> Some doctest failures similar to this: [...readline...]\n\nThese are now fixed. Very few remaining doctest failures and timeouts for `homebrew-macos-minimal` (https://github.com/mkoeppe/sage/runs/508217498):\n\n```\nsage -t src/sage/interfaces/gap.py  # 1 doctest failed\nsage -t src/sage/manifolds/differentiable/degenerate_submanifold.py  # Timed out\nsage -t src/sage/manifolds/differentiable/tensorfield.py  # Timed out\nsage -t src/sage/plot/plot3d/base.pyx  # Timed out\nsage -t src/sage/plot/plot3d/implicit_plot3d.py  # Timed out\nsage -t src/sage/plot/plot3d/parametric_plot3d.py  # Timed out\nsage -t src/sage/plot/plot3d/plot3d.py  # Timed out\nsage -t src/sage/plot/plot3d/shapes.pyx  # Timed out\nsage -t src/sage/rings/padics/padic_lattice_element.py  # 3 doctests failed\nsage -t src/sage/plot/plot3d/shapes2.py  # Timed out\nsage -t src/sage/rings/function_field/function_field.py  # Timed out\nsage -t src/sage/schemes/elliptic_curves/ell_number_field.py  # Timed out\n```\n\n`homebrew-macos-standard` (https://github.com/mkoeppe/sage/runs/508217500) has many more doctest failures.\nLooks like there is some problem with singular.\nSome messages from singular:   `univariate factorization depends on NTL(missing)`\n\nIn that build, Sage is using the homebrew NTL:\n\n```\nChecking whether SageMath should install SPKG ntl...\nchecking installing gmp/mpir? ... no\nchecking NTL/ZZ.h usability... yes\nchecking NTL/ZZ.h presence... yes\nchecking for NTL/ZZ.h... yes\nchecking whether we can link a program using NTL... yes\nchecking NTL version >= 10.3... 11.4.3\nconfigure: will use system package and not install SPKG ntl\nusing ntl library from the system\n```\n... but Singular does not find it ....\n\n```\nchecking for NTL >= 5.0... not found\nconfigure: WARNING: Unable to find NTL (which is strongly recommended) on your machine: please use --with-ntl=PATH_TO_DIR_CONTAINING_LIB_AND_INCLUDE (see also ./configure --help if you do not understand what we are talking about)\n```",
    "created_at": "2020-03-15T03:36:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559870",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:61'></a>
Replying to [mkoeppe](#comment%3A59):
> Some doctest failures similar to this: [...readline...]

These are now fixed. Very few remaining doctest failures and timeouts for `homebrew-macos-minimal` (https://github.com/mkoeppe/sage/runs/508217498):

```
sage -t src/sage/interfaces/gap.py  # 1 doctest failed
sage -t src/sage/manifolds/differentiable/degenerate_submanifold.py  # Timed out
sage -t src/sage/manifolds/differentiable/tensorfield.py  # Timed out
sage -t src/sage/plot/plot3d/base.pyx  # Timed out
sage -t src/sage/plot/plot3d/implicit_plot3d.py  # Timed out
sage -t src/sage/plot/plot3d/parametric_plot3d.py  # Timed out
sage -t src/sage/plot/plot3d/plot3d.py  # Timed out
sage -t src/sage/plot/plot3d/shapes.pyx  # Timed out
sage -t src/sage/rings/padics/padic_lattice_element.py  # 3 doctests failed
sage -t src/sage/plot/plot3d/shapes2.py  # Timed out
sage -t src/sage/rings/function_field/function_field.py  # Timed out
sage -t src/sage/schemes/elliptic_curves/ell_number_field.py  # Timed out
```

`homebrew-macos-standard` (https://github.com/mkoeppe/sage/runs/508217500) has many more doctest failures.
Looks like there is some problem with singular.
Some messages from singular:   `univariate factorization depends on NTL(missing)`

In that build, Sage is using the homebrew NTL:

```
Checking whether SageMath should install SPKG ntl...
checking installing gmp/mpir? ... no
checking NTL/ZZ.h usability... yes
checking NTL/ZZ.h presence... yes
checking for NTL/ZZ.h... yes
checking whether we can link a program using NTL... yes
checking NTL version >= 10.3... 11.4.3
configure: will use system package and not install SPKG ntl
using ntl library from the system
```
... but Singular does not find it ....

```
checking for NTL >= 5.0... not found
configure: WARNING: Unable to find NTL (which is strongly recommended) on your machine: please use --with-ntl=PATH_TO_DIR_CONTAINING_LIB_AND_INCLUDE (see also ./configure --help if you do not understand what we are talking about)
```



---

archive/issue_comments_559871.json:
```json
{
    "body": "Changing dependencies from \"#29273\" to \"#29273, #29335\"",
    "created_at": "2020-03-15T04:54:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559871",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29273" to "#29273, #29335"



---

archive/issue_comments_559872.json:
```json
{
    "body": "Changing commit from \"d1eb116499937578c84f3b27097bf4d3f4194b2f\" to \"6410c1e02cf69213efe2e888bd63c1d1856cc135\"",
    "created_at": "2020-03-15T04:58:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559872",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d1eb116499937578c84f3b27097bf4d3f4194b2f" to "6410c1e02cf69213efe2e888bd63c1d1856cc135"



---

archive/issue_comments_559873.json:
```json
{
    "body": "<a id='comment:63'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------|\n|[50f62c7](https://github.com/sagemath/sagetrac-mirror/commit/50f62c7a4cfea5343903f6b83cad22fde7bb8553)|`build/pkgs/singular: Add patches to accept system NTL in nonstandard locations`|\n|[6410c1e](https://github.com/sagemath/sagetrac-mirror/commit/6410c1e02cf69213efe2e888bd63c1d1856cc135)|`Merge branch 't/29335/always_find_sage_ntl_prefix_and_call_singular_configure_with_it' into t/29104/tox-homebrew`|",
    "created_at": "2020-03-15T04:58:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559873",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:63'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------|
|[50f62c7](https://github.com/sagemath/sagetrac-mirror/commit/50f62c7a4cfea5343903f6b83cad22fde7bb8553)|`build/pkgs/singular: Add patches to accept system NTL in nonstandard locations`|
|[6410c1e](https://github.com/sagemath/sagetrac-mirror/commit/6410c1e02cf69213efe2e888bd63c1d1856cc135)|`Merge branch 't/29335/always_find_sage_ntl_prefix_and_call_singular_configure_with_it' into t/29104/tox-homebrew`|



---

archive/issue_comments_559874.json:
```json
{
    "body": "<a id='comment:64'></a>\nNew tests at https://github.com/mkoeppe/sage/actions/runs/55944733",
    "created_at": "2020-03-15T05:00:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559874",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:64'></a>
New tests at https://github.com/mkoeppe/sage/actions/runs/55944733



---

archive/issue_comments_559875.json:
```json
{
    "body": "<a id='comment:65'></a>\nWith #29335 merged, Singular finds homebrew's NTL but then I get the following linker error (https://github.com/mkoeppe/sage/runs/508693083):\n\n```\n  [singular-4.1.1p2.p0]   ld: illegal thread local variable reference to regular symbol __ZN3NTL13ErrorCallbackE for architecture x86_64\n  [singular-4.1.1p2.p0]   clang: error: linker command failed with exit code 1 (use -v to see invocation)\n  [singular-4.1.1p2.p0]   make[8]: *** [libSingular.la] Error 1\n```",
    "created_at": "2020-03-15T15:50:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559875",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:65'></a>
With #29335 merged, Singular finds homebrew's NTL but then I get the following linker error (https://github.com/mkoeppe/sage/runs/508693083):

```
  [singular-4.1.1p2.p0]   ld: illegal thread local variable reference to regular symbol __ZN3NTL13ErrorCallbackE for architecture x86_64
  [singular-4.1.1p2.p0]   clang: error: linker command failed with exit code 1 (use -v to see invocation)
  [singular-4.1.1p2.p0]   make[8]: *** [libSingular.la] Error 1
```



---

archive/issue_comments_559876.json:
```json
{
    "body": "<a id='comment:66'></a>\nthis is about absence of coherence on TLS between Singular and Flint.",
    "created_at": "2020-03-15T15:56:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559876",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:66'></a>
this is about absence of coherence on TLS between Singular and Flint.



---

archive/issue_comments_559877.json:
```json
{
    "body": "<a id='comment:67'></a>\nReplying to [dimpase](#comment%3A66):\n> this is about absence of coherence on TLS between Singular and Flint.\n\nOK, is there a way to enable use of TLS with Singular?",
    "created_at": "2020-03-15T18:37:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559877",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:67'></a>
Replying to [dimpase](#comment%3A66):
> this is about absence of coherence on TLS between Singular and Flint.

OK, is there a way to enable use of TLS with Singular?



---

archive/issue_comments_559878.json:
```json
{
    "body": "<a id='comment:68'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------|\n|[96553db](https://github.com/sagemath/sagetrac-mirror/commit/96553db01783fcd6c86e451b0b16b4bcb88140f7)|`build/pkgs/ntl/spkg-configure.m4: Check for NTL configuration`|\n|[ec5cd78](https://github.com/sagemath/sagetrac-mirror/commit/ec5cd78603542b57f58f4ae0d43ba41151a55ab6)|`Merge branch 't/29339/fix_ntl_spkg_configure_m4_so_it_rejects_ntls_built_with_ntl_threads__without_ntl_gmp_lip__without_ntl_gf2x_lib' into t/29104/tox-homebrew`|",
    "created_at": "2020-03-15T18:52:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559878",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:68'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------|
|[96553db](https://github.com/sagemath/sagetrac-mirror/commit/96553db01783fcd6c86e451b0b16b4bcb88140f7)|`build/pkgs/ntl/spkg-configure.m4: Check for NTL configuration`|
|[ec5cd78](https://github.com/sagemath/sagetrac-mirror/commit/ec5cd78603542b57f58f4ae0d43ba41151a55ab6)|`Merge branch 't/29339/fix_ntl_spkg_configure_m4_so_it_rejects_ntls_built_with_ntl_threads__without_ntl_gmp_lip__without_ntl_gf2x_lib' into t/29104/tox-homebrew`|



---

archive/issue_comments_559879.json:
```json
{
    "body": "Changing commit from \"6410c1e02cf69213efe2e888bd63c1d1856cc135\" to \"ec5cd78603542b57f58f4ae0d43ba41151a55ab6\"",
    "created_at": "2020-03-15T18:52:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559879",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6410c1e02cf69213efe2e888bd63c1d1856cc135" to "ec5cd78603542b57f58f4ae0d43ba41151a55ab6"



---

archive/issue_comments_559880.json:
```json
{
    "body": "Changing dependencies from \"#29273, #29335\" to \"#29273, #29335, #29339\"",
    "created_at": "2020-03-15T23:47:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559880",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29273, #29335" to "#29273, #29335, #29339"



---

archive/issue_comments_559881.json:
```json
{
    "body": "<a id='comment:70'></a>\nBuild logs for `homebrew-macos-standard` at https://github.com/mkoeppe/sage/runs/511533264",
    "created_at": "2020-03-16T19:13:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559881",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:70'></a>
Build logs for `homebrew-macos-standard` at https://github.com/mkoeppe/sage/runs/511533264



---

archive/issue_comments_559882.json:
```json
{
    "body": "Changing commit from \"ec5cd78603542b57f58f4ae0d43ba41151a55ab6\" to \"6d2f6e1fc67097613f08f326a43a6749073e7bd0\"",
    "created_at": "2020-03-16T19:13:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559882",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ec5cd78603542b57f58f4ae0d43ba41151a55ab6" to "6d2f6e1fc67097613f08f326a43a6749073e7bd0"



---

archive/issue_comments_559883.json:
```json
{
    "body": "<a id='comment:71'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n|[c3bc092](https://github.com/sagemath/sagetrac-mirror/commit/c3bc092ba9e7bea69092085b65231212f0367f6d)|`Remove tests for NTL_GMP_LIP, NTL_GF2X_LIB`|\n|[6d2f6e1](https://github.com/sagemath/sagetrac-mirror/commit/6d2f6e1fc67097613f08f326a43a6749073e7bd0)|`Merge branch 't/29339/fix_ntl_spkg_configure_m4_so_it_rejects_ntls_built_with_ntl_threads__without_ntl_gmp_lip__without_ntl_gf2x_lib' into t/29104/tox-homebrew`|",
    "created_at": "2020-03-16T19:13:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559883",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:71'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
|[c3bc092](https://github.com/sagemath/sagetrac-mirror/commit/c3bc092ba9e7bea69092085b65231212f0367f6d)|`Remove tests for NTL_GMP_LIP, NTL_GF2X_LIB`|
|[6d2f6e1](https://github.com/sagemath/sagetrac-mirror/commit/6d2f6e1fc67097613f08f326a43a6749073e7bd0)|`Merge branch 't/29339/fix_ntl_spkg_configure_m4_so_it_rejects_ntls_built_with_ntl_threads__without_ntl_gmp_lip__without_ntl_gf2x_lib' into t/29104/tox-homebrew`|



---

archive/issue_comments_559884.json:
```json
{
    "body": "<a id='comment:72'></a>\nReplying to [mkoeppe](#comment%3A70):\n> Build logs for `homebrew-macos-standard` at https://github.com/mkoeppe/sage/runs/511533264\n\n{{{\n  [sagelib-9.1.beta7]   ld: illegal thread local variable reference to regular symbol __ZN3NTL20ZZXFac_InitNumPrimesE for architecture x86_64\n  [sagelib-9.1.beta7]   clang: error: linker command failed with exit code 1 (use -v to see invocation)\n}}}",
    "created_at": "2020-03-16T20:12:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559884",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:72'></a>
Replying to [mkoeppe](#comment%3A70):
> Build logs for `homebrew-macos-standard` at https://github.com/mkoeppe/sage/runs/511533264

{{{
  [sagelib-9.1.beta7]   ld: illegal thread local variable reference to regular symbol __ZN3NTL20ZZXFac_InitNumPrimesE for architecture x86_64
  [sagelib-9.1.beta7]   clang: error: linker command failed with exit code 1 (use -v to see invocation)
}}}



---

archive/issue_comments_559885.json:
```json
{
    "body": "<a id='comment:73'></a>\nI guess this means that another library is picking up the system installation of NTL...",
    "created_at": "2020-03-16T20:40:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559885",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:73'></a>
I guess this means that another library is picking up the system installation of NTL...



---

archive/issue_comments_559886.json:
```json
{
    "body": "Changing commit from \"6d2f6e1fc67097613f08f326a43a6749073e7bd0\" to \"14e9f1270e7706e9d771ff33efe259e135fa9ec4\"",
    "created_at": "2020-03-16T20:43:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559886",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6d2f6e1fc67097613f08f326a43a6749073e7bd0" to "14e9f1270e7706e9d771ff33efe259e135fa9ec4"



---

archive/issue_comments_559887.json:
```json
{
    "body": "<a id='comment:74'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[14e9f12](https://github.com/sagemath/sagetrac-mirror/commit/14e9f1270e7706e9d771ff33efe259e135fa9ec4)|`build/pkgs/ntl/distros/homebrew.txt: Remove ntl`|",
    "created_at": "2020-03-16T20:43:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559887",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:74'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[14e9f12](https://github.com/sagemath/sagetrac-mirror/commit/14e9f1270e7706e9d771ff33efe259e135fa9ec4)|`build/pkgs/ntl/distros/homebrew.txt: Remove ntl`|



---

archive/issue_comments_559888.json:
```json
{
    "body": "<a id='comment:75'></a>\nNew test: https://github.com/mkoeppe/sage/runs/512132585",
    "created_at": "2020-03-16T20:44:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559888",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:75'></a>
New test: https://github.com/mkoeppe/sage/runs/512132585



---

archive/issue_comments_559889.json:
```json
{
    "body": "<a id='comment:76'></a>\nReplying to [gh-mwageringel](#comment%3A36):\n> There seems to be a conflict between `flint` and `sagemath/science/flint`, as `sagemath/science/arb` installs `flint` from homebrew-core as a dependency (which has been added to Homebrew very recently). I am using\n> \n> ```\n> brew install sagemath/science/flint\n> brew install --ignore-dependencies sagemath/science/arb\n> ```\n> as a workaround now, but the arb formula probably needs to be updated.\n\n\nAs can be seen in the build logs above, `sagemath/science/arb` installs `flint` from homebrew-core as a dependency. Later, `sagemath/science/flint` is installed only because of `brew upgrade`. This only seems to work because of the coincidence that `sagemath/science/flint` has a higher version number than `flint`, currently. However, `sagemath/science/arb` is only compiled with `flint` (without ntl support) \u2013 it is not recompiled after installing `sagemath/science/flint`.\n\nI have opened a [pull request](https://github.com/sagemath/homebrew-science/pull/1) to resolve this.",
    "created_at": "2020-03-16T20:47:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559889",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:76'></a>
Replying to [gh-mwageringel](#comment%3A36):
> There seems to be a conflict between `flint` and `sagemath/science/flint`, as `sagemath/science/arb` installs `flint` from homebrew-core as a dependency (which has been added to Homebrew very recently). I am using
> 
> ```
> brew install sagemath/science/flint
> brew install --ignore-dependencies sagemath/science/arb
> ```
> as a workaround now, but the arb formula probably needs to be updated.


As can be seen in the build logs above, `sagemath/science/arb` installs `flint` from homebrew-core as a dependency. Later, `sagemath/science/flint` is installed only because of `brew upgrade`. This only seems to work because of the coincidence that `sagemath/science/flint` has a higher version number than `flint`, currently. However, `sagemath/science/arb` is only compiled with `flint` (without ntl support) – it is not recompiled after installing `sagemath/science/flint`.

I have opened a [pull request](https://github.com/sagemath/homebrew-science/pull/1) to resolve this.



---

archive/issue_comments_559890.json:
```json
{
    "body": "<a id='comment:77'></a>\nReplying to [mkoeppe](#comment%3A75):\n> New test: https://github.com/mkoeppe/sage/runs/512132585\n\n\nIf you remove ntl, you probably also need to remove flint and arb, as they depend on it.",
    "created_at": "2020-03-16T20:55:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559890",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:77'></a>
Replying to [mkoeppe](#comment%3A75):
> New test: https://github.com/mkoeppe/sage/runs/512132585


If you remove ntl, you probably also need to remove flint and arb, as they depend on it.



---

archive/issue_comments_559891.json:
```json
{
    "body": "Changing commit from \"14e9f1270e7706e9d771ff33efe259e135fa9ec4\" to \"70e161bdd3f29ae1b25dffab08829a20e2c53e5c\"",
    "created_at": "2020-03-16T21:12:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559891",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "14e9f1270e7706e9d771ff33efe259e135fa9ec4" to "70e161bdd3f29ae1b25dffab08829a20e2c53e5c"



---

archive/issue_comments_559892.json:
```json
{
    "body": "<a id='comment:78'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n|[70e161b](https://github.com/sagemath/sagetrac-mirror/commit/70e161bdd3f29ae1b25dffab08829a20e2c53e5c)|`Remove use of homebrew packages flint, arb`|",
    "created_at": "2020-03-16T21:12:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559892",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:78'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
|[70e161b](https://github.com/sagemath/sagetrac-mirror/commit/70e161bdd3f29ae1b25dffab08829a20e2c53e5c)|`Remove use of homebrew packages flint, arb`|



---

archive/issue_comments_559893.json:
```json
{
    "body": "<a id='comment:79'></a>\nThank you!",
    "created_at": "2020-03-16T21:23:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559893",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:79'></a>
Thank you!



---

archive/issue_comments_559894.json:
```json
{
    "body": "<a id='comment:80'></a>\nNew tests at https://github.com/mkoeppe/sage/runs/512243289",
    "created_at": "2020-03-16T21:27:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559894",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:80'></a>
New tests at https://github.com/mkoeppe/sage/runs/512243289



---

archive/issue_comments_559895.json:
```json
{
    "body": "<a id='comment:81'></a>\nI had no idea that a ticket about homebrew would be touching fedora-related stuff, and in this I essentially created a duplicate of that work on #29352\n\nIt's much better to create separate tickets for unrelated problems - not the least as it gives them a chance of being discovered.",
    "created_at": "2020-03-18T02:06:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559895",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:81'></a>
I had no idea that a ticket about homebrew would be touching fedora-related stuff, and in this I essentially created a duplicate of that work on #29352

It's much better to create separate tickets for unrelated problems - not the least as it gives them a chance of being discovered.



---

archive/issue_comments_559896.json:
```json
{
    "body": "<a id='comment:82'></a>\nOK. What can I do to facilitate review?",
    "created_at": "2020-03-18T02:32:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559896",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:82'></a>
OK. What can I do to facilitate review?



---

archive/issue_comments_559897.json:
```json
{
    "body": "<a id='comment:83'></a>\nI cannot review MacOS-related things - I don't have access to the needed OS.\nBut I would be happy to look at the other things that got silently bundled here.",
    "created_at": "2020-03-18T02:37:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559897",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:83'></a>
I cannot review MacOS-related things - I don't have access to the needed OS.
But I would be happy to look at the other things that got silently bundled here.



---

archive/issue_comments_559898.json:
```json
{
    "body": "<a id='comment:84'></a>\nOK, then let me move the fedora.txt files to #29352\nand the other linux .txt files to a new ticket.",
    "created_at": "2020-03-18T02:40:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559898",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:84'></a>
OK, then let me move the fedora.txt files to #29352
and the other linux .txt files to a new ticket.



---

archive/issue_comments_559899.json:
```json
{
    "body": "<a id='comment:85'></a>\nReplying to [mkoeppe](#comment%3A84):\n> OK, then let me move the fedora.txt files to #29352\n> and the other linux .txt files to a new ticket.\n\nActually, as noted on #29352, most of the files were added in #29273.",
    "created_at": "2020-03-18T16:45:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559899",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:85'></a>
Replying to [mkoeppe](#comment%3A84):
> OK, then let me move the fedora.txt files to #29352
> and the other linux .txt files to a new ticket.

Actually, as noted on #29352, most of the files were added in #29273.



---

archive/issue_comments_559900.json:
```json
{
    "body": "<a id='comment:86'></a>\n`@`gh-mwageringel Would you be able to review this ticket?",
    "created_at": "2020-03-18T16:46:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559900",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:86'></a>
`@`gh-mwageringel Would you be able to review this ticket?



---

archive/issue_comments_559901.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,5 +2,12 @@\n \n This ticket adds toxenvs `local-homebrew-macos-{minimal,standard}` for testing with (best-effort) isolated installations of homebrew on macOS (not using docker).\n \n+To test:\n+\n+```\n+    brew install tox\n+    tox -e local-homebrew-macos-standard\n+```\n+\n An example run of that is here: https://github.com/mkoeppe/sage/actions/runs/32812271\n \n``````\n",
    "created_at": "2020-03-18T16:48:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559901",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,5 +2,12 @@
 
 This ticket adds toxenvs `local-homebrew-macos-{minimal,standard}` for testing with (best-effort) isolated installations of homebrew on macOS (not using docker).
 
+To test:
+
+```
+    brew install tox
+    tox -e local-homebrew-macos-standard
+```
+
 An example run of that is here: https://github.com/mkoeppe/sage/actions/runs/32812271
 
``````




---

archive/issue_comments_559902.json:
```json
{
    "body": "<a id='comment:88'></a>\nReplying to [mkoeppe](#comment%3A86):\n> `@`gh-mwageringel Would you be able to review this ticket?\n\nYes, I will look into that. Though, I only have access to macOS 10.13.6.",
    "created_at": "2020-03-18T17:10:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559902",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:88'></a>
Replying to [mkoeppe](#comment%3A86):
> `@`gh-mwageringel Would you be able to review this ticket?

Yes, I will look into that. Though, I only have access to macOS 10.13.6.



---

archive/issue_comments_559903.json:
```json
{
    "body": "<a id='comment:89'></a>\nTests ran at https://github.com/mkoeppe/sage/actions/runs/57924835\n\n`local-homebrew-macos-minimal` (https://github.com/mkoeppe/sage/runs/515508463) and `local-homebrew-macos-standard` (https://github.com/mkoeppe/sage/runs/515508474): \n\nAll packages (except for experimental package `polymake`) build, doctests:\n\n```\n----------------------------------------------------------------------\nsage -t src/sage/game_theory/normal_form_game.py  # 5 doctests failed\nsage -t src/sage/dynamics/arithmetic_dynamics/projective_ds.py  # Timed out\nsage -t src/sage/interfaces/gap.py  # 1 doctest failed\nsage -t src/sage/knots/link.py  # 1 doctest failed\nsage -t src/sage/manifolds/differentiable/degenerate_submanifold.py  # Timed out\nsage -t src/sage/manifolds/differentiable/tensorfield.py  # Timed out\nsage -t src/sage/plot/plot3d/base.pyx  # Timed out\nsage -t src/sage/plot/plot3d/implicit_plot3d.py  # Timed out\nsage -t src/sage/plot/plot3d/parametric_plot3d.py  # Timed out\nsage -t src/sage/plot/plot3d/plot3d.py  # Timed out\nsage -t src/sage/plot/plot3d/shapes.pyx  # Timed out\nsage -t src/sage/rings/padics/padic_lattice_element.py  # 3 doctests failed\nsage -t src/sage/plot/plot3d/shapes2.py  # Timed out\nsage -t src/sage/rings/function_field/function_field.py  # Timed out\nsage -t src/sage/schemes/elliptic_curves/ell_number_field.py  # Timed out\n----------------------------------------------------------------------\n```",
    "created_at": "2020-03-18T17:13:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559903",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:89'></a>
Tests ran at https://github.com/mkoeppe/sage/actions/runs/57924835

`local-homebrew-macos-minimal` (https://github.com/mkoeppe/sage/runs/515508463) and `local-homebrew-macos-standard` (https://github.com/mkoeppe/sage/runs/515508474): 

All packages (except for experimental package `polymake`) build, doctests:

```
----------------------------------------------------------------------
sage -t src/sage/game_theory/normal_form_game.py  # 5 doctests failed
sage -t src/sage/dynamics/arithmetic_dynamics/projective_ds.py  # Timed out
sage -t src/sage/interfaces/gap.py  # 1 doctest failed
sage -t src/sage/knots/link.py  # 1 doctest failed
sage -t src/sage/manifolds/differentiable/degenerate_submanifold.py  # Timed out
sage -t src/sage/manifolds/differentiable/tensorfield.py  # Timed out
sage -t src/sage/plot/plot3d/base.pyx  # Timed out
sage -t src/sage/plot/plot3d/implicit_plot3d.py  # Timed out
sage -t src/sage/plot/plot3d/parametric_plot3d.py  # Timed out
sage -t src/sage/plot/plot3d/plot3d.py  # Timed out
sage -t src/sage/plot/plot3d/shapes.pyx  # Timed out
sage -t src/sage/rings/padics/padic_lattice_element.py  # 3 doctests failed
sage -t src/sage/plot/plot3d/shapes2.py  # Timed out
sage -t src/sage/rings/function_field/function_field.py  # Timed out
sage -t src/sage/schemes/elliptic_curves/ell_number_field.py  # Timed out
----------------------------------------------------------------------
```



---

archive/issue_comments_559904.json:
```json
{
    "body": "<a id='comment:90'></a>\nReplying to [gh-mwageringel](#comment%3A88):\n> Replying to [mkoeppe](#comment%3A86):\n> > `@`gh-mwageringel Would you be able to review this ticket?\n\n> Yes, I will look into that. \nThanks!\n\n> Though, I only have access to macOS 10.13.6.\n\nThat's actually great, for some broader coverage. I'm testing on 10.15.3, and also the [GitHub](GitHub) runners are on Catalina.",
    "created_at": "2020-03-18T17:15:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559904",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:90'></a>
Replying to [gh-mwageringel](#comment%3A88):
> Replying to [mkoeppe](#comment%3A86):
> > `@`gh-mwageringel Would you be able to review this ticket?

> Yes, I will look into that. 
Thanks!

> Though, I only have access to macOS 10.13.6.

That's actually great, for some broader coverage. I'm testing on 10.15.3, and also the [GitHub](GitHub) runners are on Catalina.



---

archive/issue_comments_559905.json:
```json
{
    "body": "<a id='comment:91'></a>\nlots of timeouts in tests, probably an overloaded host, or too aggressive parallelisation.",
    "created_at": "2020-03-18T18:15:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559905",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:91'></a>
lots of timeouts in tests, probably an overloaded host, or too aggressive parallelisation.



---

archive/issue_comments_559906.json:
```json
{
    "body": "<a id='comment:92'></a>\nYes, this is using 12 threads",
    "created_at": "2020-03-18T18:21:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559906",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:92'></a>
Yes, this is using 12 threads



---

archive/issue_comments_559907.json:
```json
{
    "body": "<a id='comment:93'></a>\nI'm in the middle of trying this. A few comments:\n\n- patch: this should use homebrew's patch\n- pcre: same\n- boost: is there a way to convince Sage to use homebrew's boost as a replacement for boost-cropped? (See #29100?)\n- ntl: being discussed on another ticket, but my Sage builds on OS X regularly use homebrew's ntl without problems.",
    "created_at": "2020-03-18T18:44:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559907",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:93'></a>
I'm in the middle of trying this. A few comments:

- patch: this should use homebrew's patch
- pcre: same
- boost: is there a way to convince Sage to use homebrew's boost as a replacement for boost-cropped? (See #29100?)
- ntl: being discussed on another ticket, but my Sage builds on OS X regularly use homebrew's ntl without problems.



---

archive/issue_comments_559908.json:
```json
{
    "body": "<a id='comment:94'></a>\nDefaulting to 12 threads seems like a bad idea. Shouldn't the user be able to configure this?",
    "created_at": "2020-03-18T18:48:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559908",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:94'></a>
Defaulting to 12 threads seems like a bad idea. Shouldn't the user be able to configure this?



---

archive/issue_comments_559909.json:
```json
{
    "body": "<a id='comment:95'></a>\nI presume Github Actions run on a real Mac hardware, and 12 threads is probably only meaningful on a rather high end host, used exclusively.",
    "created_at": "2020-03-18T18:52:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559909",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:95'></a>
I presume Github Actions run on a real Mac hardware, and 12 threads is probably only meaningful on a rather high end host, used exclusively.



---

archive/issue_comments_559910.json:
```json
{
    "body": "<a id='comment:96'></a>\nntl failed to build. This is on OS X 10.15.3.\n\n```\nmake setup3\ng++ -std=gnu++11 -I../include -I.  -O2 -g  -fno-common -march=native -L/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.1.beta7/.tox/local-homebrew-macos-standard/local/lib -Wl,-rpath,/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.1.beta7/.tox/local-homebrew-macos-standard/local/lib -L/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.1.beta7/.tox/local-homebrew-macos-standard/homebrew/opt/readline/lib -L/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.1.beta7/.tox/local-homebrew-macos-standard/homebrew/lib  -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.1.beta7/.tox/local-homebrew-macos-standard/local/include  -o gen_gmp_aux gen_gmp_aux.cpp -L/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.1.beta7/.tox/local-homebrew-macos-standard/local/lib  -lgmp  -lm\n./gen_gmp_aux > ../include/NTL/gmp_aux.h \nNTL_GMP_LIP flag set\nGMP version check (6.1.2/6.2.0)\n*** version number mismatch: inconsistency between gmp.h and libgmp\n/bin/sh: line 1: 18441 Abort trap: 6           ./gen_gmp_aux > ../include/NTL/gmp_aux.h\nmake[5]: *** [setup3] Error 134\nmake[4]: *** [setup-phase] Error 2\nmake[4]: Target `all' not remade because of errors.\n```",
    "created_at": "2020-03-18T18:54:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559910",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:96'></a>
ntl failed to build. This is on OS X 10.15.3.

```
make setup3
g++ -std=gnu++11 -I../include -I.  -O2 -g  -fno-common -march=native -L/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.1.beta7/.tox/local-homebrew-macos-standard/local/lib -Wl,-rpath,/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.1.beta7/.tox/local-homebrew-macos-standard/local/lib -L/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.1.beta7/.tox/local-homebrew-macos-standard/homebrew/opt/readline/lib -L/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.1.beta7/.tox/local-homebrew-macos-standard/homebrew/lib  -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.1.beta7/.tox/local-homebrew-macos-standard/local/include  -o gen_gmp_aux gen_gmp_aux.cpp -L/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.1.beta7/.tox/local-homebrew-macos-standard/local/lib  -lgmp  -lm
./gen_gmp_aux > ../include/NTL/gmp_aux.h 
NTL_GMP_LIP flag set
GMP version check (6.1.2/6.2.0)
*** version number mismatch: inconsistency between gmp.h and libgmp
/bin/sh: line 1: 18441 Abort trap: 6           ./gen_gmp_aux > ../include/NTL/gmp_aux.h
make[5]: *** [setup3] Error 134
make[4]: *** [setup-phase] Error 2
make[4]: Target `all' not remade because of errors.
```



---

archive/issue_comments_559911.json:
```json
{
    "body": "<a id='comment:97'></a>\nReplying to [jhpalmieri](#comment%3A96):\n> ntl failed to build. This is on OS X 10.15.3.\n\n\nThis happens when you have a different (older) version of gmp in your /usr/local homebrew.\nThe isolation is unfortunately not perfect. Badly written configure scripts of packages pick up stuff from /usr/local",
    "created_at": "2020-03-18T18:57:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559911",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:97'></a>
Replying to [jhpalmieri](#comment%3A96):
> ntl failed to build. This is on OS X 10.15.3.


This happens when you have a different (older) version of gmp in your /usr/local homebrew.
The isolation is unfortunately not perfect. Badly written configure scripts of packages pick up stuff from /usr/local



---

archive/issue_comments_559912.json:
```json
{
    "body": "<a id='comment:98'></a>\nReplying to [jhpalmieri](#comment%3A94):\n> Defaulting to 12 threads seems like a bad idea. Shouldn't the user be able to configure this?\n\nGood idea. WIll do",
    "created_at": "2020-03-18T18:58:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559912",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:98'></a>
Replying to [jhpalmieri](#comment%3A94):
> Defaulting to 12 threads seems like a bad idea. Shouldn't the user be able to configure this?

Good idea. WIll do



---

archive/issue_comments_559913.json:
```json
{
    "body": "<a id='comment:99'></a>\nReplying to [dimpase](#comment%3A95):\n> I presume Github Actions run on a real Mac hardware, and 12 threads is probably only meaningful on a rather high end host, used exclusively.\n\nWell, for the build I'm using high parallelization on purpose in order to catch possible parallelization bugs in the scripts.",
    "created_at": "2020-03-18T18:59:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559913",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:99'></a>
Replying to [dimpase](#comment%3A95):
> I presume Github Actions run on a real Mac hardware, and 12 threads is probably only meaningful on a rather high end host, used exclusively.

Well, for the build I'm using high parallelization on purpose in order to catch possible parallelization bugs in the scripts.



---

archive/issue_comments_559914.json:
```json
{
    "body": "Changing dependencies from \"#29273, #29335, #29339\" to \"#29273, #29335, #29339, #29361\"",
    "created_at": "2020-03-18T19:00:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559914",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29273, #29335, #29339" to "#29273, #29335, #29339, #29361"



---

archive/issue_comments_559915.json:
```json
{
    "body": "Changing commit from \"70e161bdd3f29ae1b25dffab08829a20e2c53e5c\" to \"11f77293e372d29e01b6525e1fb1948c4d855f04\"",
    "created_at": "2020-03-18T19:28:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559915",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "70e161bdd3f29ae1b25dffab08829a20e2c53e5c" to "11f77293e372d29e01b6525e1fb1948c4d855f04"



---

archive/issue_comments_559916.json:
```json
{
    "body": "<a id='comment:1'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n|[11f7729](https://github.com/sagemath/sagetrac-mirror/commit/11f77293e372d29e01b6525e1fb1948c4d855f04)|`build/pkgs/patch/distros/homebrew.txt: New`|",
    "created_at": "2020-03-18T19:28:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559916",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
|[11f7729](https://github.com/sagemath/sagetrac-mirror/commit/11f77293e372d29e01b6525e1fb1948c4d855f04)|`build/pkgs/patch/distros/homebrew.txt: New`|



---

archive/issue_comments_559917.json:
```json
{
    "body": "<a id='comment:102'></a>\nReplying to [jhpalmieri](#comment%3A93):\n> I'm in the middle of trying this. A few comments:\n> \n> - pcre: same\n\n\nThis one actually works for me (both locally and on the [GitHub](GitHub) runner). Please post the logs if it doesn't work for you",
    "created_at": "2020-03-18T19:33:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559917",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:102'></a>
Replying to [jhpalmieri](#comment%3A93):
> I'm in the middle of trying this. A few comments:
> 
> - pcre: same


This one actually works for me (both locally and on the [GitHub](GitHub) runner). Please post the logs if it doesn't work for you



---

archive/issue_comments_559918.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|\n|[93a0421](https://github.com/sagemath/sagetrac-mirror/commit/93a0421c7789a1ac278386f9643d87b9768a5e69)|`build/pkgs/boost*/distros/homebrew.txt: New`|",
    "created_at": "2020-03-18T19:42:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559918",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|
|[93a0421](https://github.com/sagemath/sagetrac-mirror/commit/93a0421c7789a1ac278386f9643d87b9768a5e69)|`build/pkgs/boost*/distros/homebrew.txt: New`|



---

archive/issue_comments_559919.json:
```json
{
    "body": "Changing commit from \"11f77293e372d29e01b6525e1fb1948c4d855f04\" to \"93a0421c7789a1ac278386f9643d87b9768a5e69\"",
    "created_at": "2020-03-18T19:42:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559919",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "11f77293e372d29e01b6525e1fb1948c4d855f04" to "93a0421c7789a1ac278386f9643d87b9768a5e69"



---

archive/issue_comments_559920.json:
```json
{
    "body": "<a id='comment:104'></a>\nReplying to [mkoeppe](#comment%3A102):\n> Replying to [jhpalmieri](#comment%3A93):\n> > I'm in the middle of trying this. A few comments:\n> > \n> > - pcre: same\n \n> \n> This one actually works for me (both locally and on the [GitHub](GitHub) runner). Please post the logs if it doesn't work for you\n\n\nSorry, it looks okay to me. I must have misread config.log.",
    "created_at": "2020-03-18T19:45:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559920",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:104'></a>
Replying to [mkoeppe](#comment%3A102):
> Replying to [jhpalmieri](#comment%3A93):
> > I'm in the middle of trying this. A few comments:
> > 
> > - pcre: same
 
> 
> This one actually works for me (both locally and on the [GitHub](GitHub) runner). Please post the logs if it doesn't work for you


Sorry, it looks okay to me. I must have misread config.log.



---

archive/issue_comments_559921.json:
```json
{
    "body": "<a id='comment:5'></a>\nFlint fails to build for me. I ran `brew upgrade`, cleaned everything out, and tried again, and it still fails.\n\n```\ng++ -std=gnu++11 -fPIC -fno-common -pedantic -Wall -O2 -funroll-loops -g -mpopcnt  -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.1.beta7/.tox/local-homebrew-macos-standard/local/var/tmp/sage/build/flint-2.5.2.p5/src -I/usr/local/include -I/usr/local/include -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.1.beta7/.tox/local-homebrew-macos-standard/local/include -c interfaces/NTL-interface.cpp -o build/interfaces/NTL-interface.lo\nld: illegal thread local variable reference to regular symbol __ZN3NTL8ZZ_pInfoE for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake[6]: *** [libflint-13.5.2.dylib] Error 1\nmake[6]: Target `shared' not remade because of errors.\nmake[5]: *** [library] Error 2\nmake[5]: Target `all' not remade because of errors.\nmake[4]: *** [verbose] Error 2\n```",
    "created_at": "2020-03-18T22:33:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559921",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:5'></a>
Flint fails to build for me. I ran `brew upgrade`, cleaned everything out, and tried again, and it still fails.

```
g++ -std=gnu++11 -fPIC -fno-common -pedantic -Wall -O2 -funroll-loops -g -mpopcnt  -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.1.beta7/.tox/local-homebrew-macos-standard/local/var/tmp/sage/build/flint-2.5.2.p5/src -I/usr/local/include -I/usr/local/include -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.1.beta7/.tox/local-homebrew-macos-standard/local/include -c interfaces/NTL-interface.cpp -o build/interfaces/NTL-interface.lo
ld: illegal thread local variable reference to regular symbol __ZN3NTL8ZZ_pInfoE for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make[6]: *** [libflint-13.5.2.dylib] Error 1
make[6]: Target `shared' not remade because of errors.
make[5]: *** [library] Error 2
make[5]: Target `all' not remade because of errors.
make[4]: *** [verbose] Error 2
```



---

archive/issue_comments_559922.json:
```json
{
    "body": "<a id='comment:6'></a>\nIs homebrew ntl installed on this system?",
    "created_at": "2020-03-18T22:35:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559922",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
Is homebrew ntl installed on this system?



---

archive/issue_comments_559923.json:
```json
{
    "body": "<a id='comment:7'></a>\n(in /usr/local)",
    "created_at": "2020-03-18T22:36:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559923",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
(in /usr/local)



---

archive/issue_comments_559924.json:
```json
{
    "body": "<a id='comment:108'></a>\nReplying to [mkoeppe](#comment%3A106):\n> Is homebrew ntl installed on this system?\n\n\nYes. Do I need to delete it?\n\nBy the way, should `prefix` be added to `.gitignore`?",
    "created_at": "2020-03-18T22:39:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559924",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:108'></a>
Replying to [mkoeppe](#comment%3A106):
> Is homebrew ntl installed on this system?


Yes. Do I need to delete it?

By the way, should `prefix` be added to `.gitignore`?



---

archive/issue_comments_559925.json:
```json
{
    "body": "<a id='comment:109'></a>\nReplying to [jhpalmieri](#comment%3A108):\n> Replying to [mkoeppe](#comment%3A106):\n> > Is homebrew ntl installed on this system?\n\n> \n> Yes. Do I need to delete it?\n\n\nPlease try if this helps.\nIf it does, we should fix something in the FLINT build scripts\n\n> By the way, should `prefix` be added to `.gitignore`?\n\n\nYes, will do.",
    "created_at": "2020-03-18T22:42:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559925",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:109'></a>
Replying to [jhpalmieri](#comment%3A108):
> Replying to [mkoeppe](#comment%3A106):
> > Is homebrew ntl installed on this system?

> 
> Yes. Do I need to delete it?


Please try if this helps.
If it does, we should fix something in the FLINT build scripts

> By the way, should `prefix` be added to `.gitignore`?


Yes, will do.



---

archive/issue_comments_559926.json:
```json
{
    "body": "<a id='comment:0'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------|\n|[4c653c2](https://github.com/sagemath/sagetrac-mirror/commit/4c653c2759eb404f9a51baf52c260468276ea720)|`.gitignore: Add prefix`|",
    "created_at": "2020-03-18T22:43:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559926",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:0'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------|
|[4c653c2](https://github.com/sagemath/sagetrac-mirror/commit/4c653c2759eb404f9a51baf52c260468276ea720)|`.gitignore: Add prefix`|



---

archive/issue_comments_559927.json:
```json
{
    "body": "Changing commit from \"93a0421c7789a1ac278386f9643d87b9768a5e69\" to \"4c653c2759eb404f9a51baf52c260468276ea720\"",
    "created_at": "2020-03-18T22:43:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559927",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "93a0421c7789a1ac278386f9643d87b9768a5e69" to "4c653c2759eb404f9a51baf52c260468276ea720"



---

archive/issue_comments_559928.json:
```json
{
    "body": "<a id='comment:1'></a>\nIs there a command like `make distclean` that will get rid of the stuff that Sage has built but keep the homebrew stuff? I don't really want to wait for gcc to build again. (`make distclean` doesn't touch `prefix`.)",
    "created_at": "2020-03-18T22:47:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559928",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:1'></a>
Is there a command like `make distclean` that will get rid of the stuff that Sage has built but keep the homebrew stuff? I don't really want to wait for gcc to build again. (`make distclean` doesn't touch `prefix`.)



---

archive/issue_comments_559929.json:
```json
{
    "body": "<a id='comment:2'></a>\nAt the moment, nothing better than `rm -rf prefix/*`",
    "created_at": "2020-03-18T22:55:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559929",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
At the moment, nothing better than `rm -rf prefix/*`



---

archive/issue_comments_559930.json:
```json
{
    "body": "<a id='comment:113'></a>\nReplying to [mkoeppe](#comment%3A109):\n> Replying to [jhpalmieri](#comment%3A108):\n> > Replying to [mkoeppe](#comment%3A106):\n> > > Is homebrew ntl installed on this system?\n\n> > \n> > Yes. Do I need to delete it?\n  \n> \n> Please try if this helps.\n> If it does, we should fix something in the FLINT build scripts\n\n\nAfter doing `brew uninstall ntl`, flint now builds.",
    "created_at": "2020-03-19T00:31:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559930",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:113'></a>
Replying to [mkoeppe](#comment%3A109):
> Replying to [jhpalmieri](#comment%3A108):
> > Replying to [mkoeppe](#comment%3A106):
> > > Is homebrew ntl installed on this system?

> > 
> > Yes. Do I need to delete it?
  
> 
> Please try if this helps.
> If it does, we should fix something in the FLINT build scripts


After doing `brew uninstall ntl`, flint now builds.



---

archive/issue_comments_559931.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n|                                                                                                                                           |                                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|\n|[2625a64](https://github.com/sagemath/sagetrac-mirror/commit/2625a64d8bb5241e7c11d6403825312084a14b68)|`tox.ini [homebrew]: make build`|\n|[cf83af6](https://github.com/sagemath/sagetrac-mirror/commit/cf83af6a9f5ea1124bfb54f9987555fb04a4dbac)|`Add zlib`|\n|[14a3dab](https://github.com/sagemath/sagetrac-mirror/commit/14a3dab69bfd3a6b42c8ebff679b184551762e8d)|`tox.ini [local]: Disable testsuites for some packages`|\n|[2553b5a](https://github.com/sagemath/sagetrac-mirror/commit/2553b5ae76e23f01cfbc249898b7c017f501d198)|`tox.ini [local]: Disable linbox testsuite`|\n|[2f79c76](https://github.com/sagemath/sagetrac-mirror/commit/2f79c76cb49a9e321ecde23c12068e0086c748c1)|`tox.ini: Move homebrew environment settings to script .homebrew-build-env`|\n|[77d5c11](https://github.com/sagemath/sagetrac-mirror/commit/77d5c114348c00e9c6429f69b4180e8cbe26439c)|`build/pkgs/ntl/distros/homebrew.txt: Remove ntl`|\n|[4ec80e2](https://github.com/sagemath/sagetrac-mirror/commit/4ec80e2e08ac0b00ad82ca514b848235e37f825c)|`Remove use of homebrew packages flint, arb`|\n|[54c803b](https://github.com/sagemath/sagetrac-mirror/commit/54c803b9278e1feb2a12b99ab9cabe3452e16e3b)|`build/pkgs/patch/distros/homebrew.txt: New`|\n|[2ce6e6c](https://github.com/sagemath/sagetrac-mirror/commit/2ce6e6cc236c934e04e3412433ce25f91fe936ae)|`build/pkgs/boost*/distros/homebrew.txt: New`|\n|[467160c](https://github.com/sagemath/sagetrac-mirror/commit/467160cdc8402124b21c5dee60386dee03f18b67)|`.gitignore: Add prefix`|",
    "created_at": "2020-03-19T19:18:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559931",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
|                                                                                                                                           |                                |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|
|[2625a64](https://github.com/sagemath/sagetrac-mirror/commit/2625a64d8bb5241e7c11d6403825312084a14b68)|`tox.ini [homebrew]: make build`|
|[cf83af6](https://github.com/sagemath/sagetrac-mirror/commit/cf83af6a9f5ea1124bfb54f9987555fb04a4dbac)|`Add zlib`|
|[14a3dab](https://github.com/sagemath/sagetrac-mirror/commit/14a3dab69bfd3a6b42c8ebff679b184551762e8d)|`tox.ini [local]: Disable testsuites for some packages`|
|[2553b5a](https://github.com/sagemath/sagetrac-mirror/commit/2553b5ae76e23f01cfbc249898b7c017f501d198)|`tox.ini [local]: Disable linbox testsuite`|
|[2f79c76](https://github.com/sagemath/sagetrac-mirror/commit/2f79c76cb49a9e321ecde23c12068e0086c748c1)|`tox.ini: Move homebrew environment settings to script .homebrew-build-env`|
|[77d5c11](https://github.com/sagemath/sagetrac-mirror/commit/77d5c114348c00e9c6429f69b4180e8cbe26439c)|`build/pkgs/ntl/distros/homebrew.txt: Remove ntl`|
|[4ec80e2](https://github.com/sagemath/sagetrac-mirror/commit/4ec80e2e08ac0b00ad82ca514b848235e37f825c)|`Remove use of homebrew packages flint, arb`|
|[54c803b](https://github.com/sagemath/sagetrac-mirror/commit/54c803b9278e1feb2a12b99ab9cabe3452e16e3b)|`build/pkgs/patch/distros/homebrew.txt: New`|
|[2ce6e6c](https://github.com/sagemath/sagetrac-mirror/commit/2ce6e6cc236c934e04e3412433ce25f91fe936ae)|`build/pkgs/boost*/distros/homebrew.txt: New`|
|[467160c](https://github.com/sagemath/sagetrac-mirror/commit/467160cdc8402124b21c5dee60386dee03f18b67)|`.gitignore: Add prefix`|



---

archive/issue_comments_559932.json:
```json
{
    "body": "Changing commit from \"4c653c2759eb404f9a51baf52c260468276ea720\" to \"467160cdc8402124b21c5dee60386dee03f18b67\"",
    "created_at": "2020-03-19T19:18:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559932",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4c653c2759eb404f9a51baf52c260468276ea720" to "467160cdc8402124b21c5dee60386dee03f18b67"



---

archive/issue_comments_559933.json:
```json
{
    "body": "Changing dependencies from \"#29273, #29335, #29339, #29361\" to \"#29335, #29361\"",
    "created_at": "2020-03-19T19:19:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559933",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29273, #29335, #29339, #29361" to "#29335, #29361"



---

archive/issue_comments_559934.json:
```json
{
    "body": "<a id='comment:5'></a>\nRebased - no longer on top of #29339.",
    "created_at": "2020-03-19T19:19:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559934",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>
Rebased - no longer on top of #29339.



---

archive/issue_comments_559935.json:
```json
{
    "body": "<a id='comment:6'></a>\nExcept for the issue with FLINT not building with a pre-existing NTL, it works for me.",
    "created_at": "2020-03-19T22:55:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559935",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:6'></a>
Except for the issue with FLINT not building with a pre-existing NTL, it works for me.



---

archive/issue_comments_559936.json:
```json
{
    "body": "<a id='comment:7'></a>\nLet's fix the FLINT issue on a follow-up ticket.",
    "created_at": "2020-03-19T23:02:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559936",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
Let's fix the FLINT issue on a follow-up ticket.



---

archive/issue_comments_559937.json:
```json
{
    "body": "<a id='comment:118'></a>\nReplying to [mkoeppe](#comment%3A98):\n> Replying to [jhpalmieri](#comment%3A94):\n> > Defaulting to 12 threads seems like a bad idea. Shouldn't the user be able to configure this?\n\n> Good idea. WIll do\nI'll do this in #29146",
    "created_at": "2020-03-20T02:58:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559937",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:118'></a>
Replying to [mkoeppe](#comment%3A98):
> Replying to [jhpalmieri](#comment%3A94):
> > Defaulting to 12 threads seems like a bad idea. Shouldn't the user be able to configure this?

> Good idea. WIll do
I'll do this in #29146



---

archive/issue_comments_559938.json:
```json
{
    "body": "<a id='comment:119'></a>\nReplying to [mkoeppe](#comment%3A117):\n> Let's fix the FLINT issue on a follow-up ticket.\n\nThis issue is probably the same as #27708/#28409.",
    "created_at": "2020-03-20T03:09:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559938",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:119'></a>
Replying to [mkoeppe](#comment%3A117):
> Let's fix the FLINT issue on a follow-up ticket.

This issue is probably the same as #27708/#28409.



---

archive/issue_comments_559939.json:
```json
{
    "body": "<a id='comment:0'></a>\nReady for review",
    "created_at": "2020-03-20T03:09:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559939",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:0'></a>
Ready for review



---

archive/issue_comments_559940.json:
```json
{
    "body": "<a id='comment:121'></a>\nReplying to [mkoeppe](#comment%3A99):\n> Replying to [dimpase](#comment%3A95):\n> > I presume Github Actions run on a real Mac hardware, and 12 threads is probably only meaningful on a rather high end host, used exclusively.\n\n> Well, for the build I'm using high parallelization on purpose in order to catch possible parallelization bugs in the scripts.\n\nOne can split building into `make built` and `make ptest`, with the latter, much more memory hungry, run with lower value of `-j`.",
    "created_at": "2020-03-20T04:26:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559940",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:121'></a>
Replying to [mkoeppe](#comment%3A99):
> Replying to [dimpase](#comment%3A95):
> > I presume Github Actions run on a real Mac hardware, and 12 threads is probably only meaningful on a rather high end host, used exclusively.

> Well, for the build I'm using high parallelization on purpose in order to catch possible parallelization bugs in the scripts.

One can split building into `make built` and `make ptest`, with the latter, much more memory hungry, run with lower value of `-j`.



---

archive/issue_comments_559941.json:
```json
{
    "body": "<a id='comment:2'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------|\n|[dfce7d4](https://github.com/sagemath/sagetrac-mirror/commit/dfce7d4b3d771aaaa7b3d198ff2b1e3eeb2120fc)|`tox.ini [local]: Pass MAKE environment variable, do not default to 'make -j12', change default target to 'build', add doc`|",
    "created_at": "2020-03-20T16:01:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559941",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------|
|[dfce7d4](https://github.com/sagemath/sagetrac-mirror/commit/dfce7d4b3d771aaaa7b3d198ff2b1e3eeb2120fc)|`tox.ini [local]: Pass MAKE environment variable, do not default to 'make -j12', change default target to 'build', add doc`|



---

archive/issue_comments_559942.json:
```json
{
    "body": "Changing commit from \"467160cdc8402124b21c5dee60386dee03f18b67\" to \"dfce7d4b3d771aaaa7b3d198ff2b1e3eeb2120fc\"",
    "created_at": "2020-03-20T16:01:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559942",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "467160cdc8402124b21c5dee60386dee03f18b67" to "dfce7d4b3d771aaaa7b3d198ff2b1e3eeb2120fc"



---

archive/issue_comments_559943.json:
```json
{
    "body": "<a id='comment:3'></a>\nOK I've made it more configurable already on this ticket.\nAnd I have added documentation",
    "created_at": "2020-03-20T16:02:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559943",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>
OK I've made it more configurable already on this ticket.
And I have added documentation



---

archive/issue_comments_559944.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,5 +9,7 @@\n     tox -e local-homebrew-macos-standard\n ```\n \n+See comments in tox.ini for more examples.\n+\n An example run of that is here: https://github.com/mkoeppe/sage/actions/runs/32812271\n \n``````\n",
    "created_at": "2020-03-20T16:03:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559944",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,5 +9,7 @@
     tox -e local-homebrew-macos-standard
 ```
 
+See comments in tox.ini for more examples.
+
 An example run of that is here: https://github.com/mkoeppe/sage/actions/runs/32812271
 
``````




---

archive/issue_comments_559945.json:
```json
{
    "body": "<a id='comment:5'></a>\n`@`gh-mwageringel, `@`dimpase: do you think more needs to be done here, or can we proceed with a positive review? I'm happy with it.",
    "created_at": "2020-03-20T18:40:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559945",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:5'></a>
`@`gh-mwageringel, `@`dimpase: do you think more needs to be done here, or can we proceed with a positive review? I'm happy with it.



---

archive/issue_comments_559946.json:
```json
{
    "body": "<a id='comment:6'></a>\nI'm 8 timezones away from my MacOS machine. \n\nI'd like more details/pointers on how the Github Actions testing is done - for  [this](https://github.com/mkoeppe/sage/runs/416298393?check_suite_focus=true) looks to me like \"all sufficiently advanced technology is indistinguishable from magic\" kind of thing :-)",
    "created_at": "2020-03-20T18:48:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559946",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:6'></a>
I'm 8 timezones away from my MacOS machine. 

I'd like more details/pointers on how the Github Actions testing is done - for  [this](https://github.com/mkoeppe/sage/runs/416298393?check_suite_focus=true) looks to me like "all sufficiently advanced technology is indistinguishable from magic" kind of thing :-)



---

archive/issue_comments_559947.json:
```json
{
    "body": "<a id='comment:7'></a>\nThis ticket does no [GitHub](GitHub) Actions testing. This is all introduced in #29087.",
    "created_at": "2020-03-20T19:12:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559947",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
This ticket does no [GitHub](GitHub) Actions testing. This is all introduced in #29087.



---

archive/issue_comments_559948.json:
```json
{
    "body": "<a id='comment:8'></a>\nhow does one get the data I linked in[comment:126](#comment%3A126) then?",
    "created_at": "2020-03-20T19:26:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559948",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:8'></a>
how does one get the data I linked in[comment:126](#comment%3A126) then?



---

archive/issue_comments_559949.json:
```json
{
    "body": "<a id='comment:9'></a>\nBy merging #29087 and pushing the branch to a [GitHub](GitHub) repository.",
    "created_at": "2020-03-20T19:29:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559949",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
By merging #29087 and pushing the branch to a [GitHub](GitHub) repository.



---

archive/issue_comments_559950.json:
```json
{
    "body": "<a id='comment:0'></a>\nIf the [GitHub](GitHub) Actions interface is overwhelming, just download the \"Artifacts\". They are tar.gz files of build logs.",
    "created_at": "2020-03-20T19:30:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559950",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:0'></a>
If the [GitHub](GitHub) Actions interface is overwhelming, just download the "Artifacts". They are tar.gz files of build logs.



---

archive/issue_comments_559951.json:
```json
{
    "body": "<a id='comment:131'></a>\nReplying to [mkoeppe](#comment%3A129):\n> By merging #29087 and pushing the branch to a [GitHub](GitHub) repository.\n\n\nyes,but that's  how one triggers this - I'm asking rather about how stuff works, inside. Locally and then somehow pushing the logs to [GitHub](GitHub)?",
    "created_at": "2020-03-20T19:35:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559951",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:131'></a>
Replying to [mkoeppe](#comment%3A129):
> By merging #29087 and pushing the branch to a [GitHub](GitHub) repository.


yes,but that's  how one triggers this - I'm asking rather about how stuff works, inside. Locally and then somehow pushing the logs to [GitHub](GitHub)?



---

archive/issue_comments_559952.json:
```json
{
    "body": "<a id='comment:2'></a>\nI don't push logs to [GitHub](GitHub). \n\n#29087 adds `.github/workflows/tox.yml` (https://git.sagemath.org/sage.git/diff/.github/workflows/tox.yml?id=576a18834a16ff05cd6894172a55e86bcc95d407&id2=be1e22c441d9332fd0bf4a3066e1964deddaf8c7) which gets run on every commit pushed to [GitHub](GitHub) and on every pull request. \n\nThe job `tox-local-homebrew-macos` defined in that file provisions a macOS host, checks out the branch and runs `tox -e local-homebrew-macos-standard` there. Then it packages up logs and makes them available as an artifact.",
    "created_at": "2020-03-20T19:42:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559952",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
I don't push logs to [GitHub](GitHub). 

#29087 adds `.github/workflows/tox.yml` (https://git.sagemath.org/sage.git/diff/.github/workflows/tox.yml?id=576a18834a16ff05cd6894172a55e86bcc95d407&id2=be1e22c441d9332fd0bf4a3066e1964deddaf8c7) which gets run on every commit pushed to [GitHub](GitHub) and on every pull request. 

The job `tox-local-homebrew-macos` defined in that file provisions a macOS host, checks out the branch and runs `tox -e local-homebrew-macos-standard` there. Then it packages up logs and makes them available as an artifact.



---

archive/issue_comments_559953.json:
```json
{
    "body": "<a id='comment:3'></a>\nand where is that MacOS host getting provisioned?",
    "created_at": "2020-03-20T19:52:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559953",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:3'></a>
and where is that MacOS host getting provisioned?



---

archive/issue_comments_559954.json:
```json
{
    "body": "<a id='comment:4'></a>\nGitHub takes care of that, I think it's using Azure.",
    "created_at": "2020-03-20T19:54:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559954",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
GitHub takes care of that, I think it's using Azure.



---

archive/issue_comments_559955.json:
```json
{
    "body": "<a id='comment:135'></a>\nReplying to [jhpalmieri](#comment%3A125):\n> `@`gh-mwageringel, `@`dimpase: do you think more needs to be done here, or can we proceed with a positive review? I'm happy with it.\n\n\nI have not tested this locally, but as you have done that, I am happy with this too.\n\nOne last question though: As far as I can see, readline is not installed into /usr/local. Why do you not run into conflicts with macOS's system \"readline\"/libedit, as in #29000?",
    "created_at": "2020-03-20T22:05:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559955",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:135'></a>
Replying to [jhpalmieri](#comment%3A125):
> `@`gh-mwageringel, `@`dimpase: do you think more needs to be done here, or can we proceed with a positive review? I'm happy with it.


I have not tested this locally, but as you have done that, I am happy with this too.

One last question though: As far as I can see, readline is not installed into /usr/local. Why do you not run into conflicts with macOS's system "readline"/libedit, as in #29000?



---

archive/issue_comments_559956.json:
```json
{
    "body": "<a id='comment:6'></a>\nThese tests use their own homebrew installation in a prefix `.tox/local-homebrew-macos-standard/homebrew/`, and sets up environment variables using the new script `.homebrew-build-env`. This sets LDFLAGS and CPPFLAGS for the readline installed into `opt` under the homebrew prefix.",
    "created_at": "2020-03-20T22:20:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559956",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
These tests use their own homebrew installation in a prefix `.tox/local-homebrew-macos-standard/homebrew/`, and sets up environment variables using the new script `.homebrew-build-env`. This sets LDFLAGS and CPPFLAGS for the readline installed into `opt` under the homebrew prefix.



---

archive/issue_comments_559957.json:
```json
{
    "body": "<a id='comment:7'></a>\nThe problem in #29000 occured despite passing LDFLAGS and CPPFLAGS to `configure`, so I guess setting these also during `make` would avoid that problem, as a workaround.",
    "created_at": "2020-03-20T22:31:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559957",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:7'></a>
The problem in #29000 occured despite passing LDFLAGS and CPPFLAGS to `configure`, so I guess setting these also during `make` would avoid that problem, as a workaround.



---

archive/issue_comments_559958.json:
```json
{
    "body": "<a id='comment:8'></a>\nI think the problem description of #29000 needs some more precision.",
    "created_at": "2020-03-20T22:33:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559958",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
I think the problem description of #29000 needs some more precision.



---

archive/issue_comments_559959.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-03-21T02:10:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559959",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_559960.json:
```json
{
    "body": "<a id='comment:9'></a>\nOK, looks good to me.",
    "created_at": "2020-03-21T02:10:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559960",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:9'></a>
OK, looks good to me.



---

archive/issue_comments_559961.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Dima Pasechnik, John Palmieri\"",
    "created_at": "2020-03-21T02:10:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559961",
    "user": "https://github.com/dimpase"
}
```

Changing reviewer from "" to "Dima Pasechnik, John Palmieri"



---

archive/issue_comments_559962.json:
```json
{
    "body": "<a id='comment:0'></a>\nThanks everyone!",
    "created_at": "2020-03-21T02:16:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559962",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:0'></a>
Thanks everyone!



---

archive/issue_comments_559963.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-03-29T00:24:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559963",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_559964.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/tox-homebrew\" to \"dfce7d4b3d771aaaa7b3d198ff2b1e3eeb2120fc\"",
    "created_at": "2020-03-29T00:24:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29104#issuecomment-559964",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/tox-homebrew" to "dfce7d4b3d771aaaa7b3d198ff2b1e3eeb2120fc"



---

archive/issue_events_091222.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-03-29T00:24:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29104",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29104#event-91222"
}
```
