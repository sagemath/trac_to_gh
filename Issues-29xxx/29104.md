# Issue 29104: Add to tox.ini some homebrew toxenvs (with a fresh install not in /usr/local), add homebrew packages

archive/issues_028867.json:
```json
{
    "assignees": [],
    "body": "#29053 adds `tox.ini` to support testing the sage distribution in isolated environments via docker.\n\nThis ticket adds toxenvs `local-homebrew-macos-{minimal,standard}` for testing with (best-effort) isolated installations of homebrew on macOS (not using docker).\n\nTo test:\n\n```\n    brew install tox\n    tox -e local-homebrew-macos-standard\n```\n\nSee comments in tox.ini for more examples.\n\nAn example run of that is here: https://github.com/mkoeppe/sage/actions/runs/32812271\n\n\nDepends on #29335\nDepends on #29361\n\nCC:  @dimpase @jhpalmieri @mwageringel @vbraun @tscrim\n\nBranch/Commit: **[`dfce7d4`](https://github.com/sagemath/sagetrac-mirror/commit/dfce7d4b3d771aaaa7b3d198ff2b1e3eeb2120fc)**\n\nReviewer: **Dima Pasechnik, John Palmieri**\n\nAuthor: **Matthias Koeppe**\n\nComponent: **porting**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29104_\n\n",
    "closed_at": "2020-03-29T00:24:12Z",
    "created_at": "2020-01-29T15:48:19Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20porting",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Add to tox.ini some homebrew toxenvs (with a fresh install not in /usr/local), add homebrew packages",
    "type": "issue",
    "updated_at": "2020-03-29T00:24:12Z",
    "url": "https://github.com/sagemath/sage/issues/29104",
    "user": "https://github.com/mkoeppe"
}
```
#29053 adds `tox.ini` to support testing the sage distribution in isolated environments via docker.

This ticket adds toxenvs `local-homebrew-macos-{minimal,standard}` for testing with (best-effort) isolated installations of homebrew on macOS (not using docker).

To test:

```
    brew install tox
    tox -e local-homebrew-macos-standard
```

See comments in tox.ini for more examples.

An example run of that is here: https://github.com/mkoeppe/sage/actions/runs/32812271


Depends on #29335
Depends on #29361

CC:  @dimpase @jhpalmieri @mwageringel @vbraun @tscrim

Branch/Commit: **[`dfce7d4`](https://github.com/sagemath/sagetrac-mirror/commit/dfce7d4b3d771aaaa7b3d198ff2b1e3eeb2120fc)**

Reviewer: **Dima Pasechnik, John Palmieri**

Author: **Matthias Koeppe**

Component: **porting**

_Issue created by migration from https://trac.sagemath.org/ticket/29104_





---

archive/issue_events_397007.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-01-29T15:48:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29104#event-397007"
}
```



---

archive/issue_events_397008.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-01-29T15:48:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20porting",
    "label_color": "0000b0",
    "label_name": "c: porting",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29104#event-397008"
}
```



---

archive/issue_events_397009.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-01-29T15:48:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29104#event-397009"
}
```



---

archive/issue_events_397010.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-01-29T15:48:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29104#event-397010"
}
```



---

archive/issue_comments_455655.json:
```json
{
    "body": "Branch: **[u/mkoeppe/tox-homebrew](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/tox-homebrew)**",
    "created_at": "2020-01-29T19:02:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455655",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/tox-homebrew](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/tox-homebrew)**



---

archive/issue_comments_455656.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7e59a6f4ff8384348e44772369c94b65d88f34b9\"><code>7e59a6f</code></a></td><td><code>build/bin/write-dockerfile.sh: Add commands to activate conda env</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ad9a975b3fab72a39d5e0f262fe322655b0ad3c\"><code>2ad9a97</code></a></td><td><code>Merge tag '9.1.beta2' into t/29053/installation_manual__generate__apt_get_install__and__yum_install__lines_from_build_pkgs_at___bootstrap_time</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9fca2309c95314fa6c948ddddf9b63f1b4d18f8c\"><code>9fca230</code></a></td><td><code>add doc</code></td></tr><tr><td><code>[f6cbb8a](https://github.com/sagemath/sagetrac-mirror/commit/f6cbb8a2abd149a84d2c11bfeb38db614e6de70e)</code></td><td><code>`add centos-{7,8`}</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c6510581b956e47ae58ca6876fa8f152915244dc\"><code>c651058</code></a></td><td><code>on centos, IGNORE_MISSING_SYSTEM_PACKAGES=yes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/98edff6be135e9b3c3cd0ef8adfde4e5fff3ac90\"><code>98edff6</code></a></td><td><code>Add build/pkgs/gfortran/distros/fedora.txt</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/843ca764bdbf9385aed1b69b7928b91871363ee9\"><code>843ca76</code></a></td><td><code>build/pkgs/fedora.txt: Add python3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd6a5457b27b498115ed43171b38a129ba5de50d\"><code>bd6a545</code></a></td><td><code>tox.ini: Add debian stretch, put sid last</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/23c6334cf2927a4d917a27b3963471e8242d86a3\"><code>23c6334</code></a></td><td><code>build/pkgs/openblas/distros/arch.txt: Add lapack, cblas</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fca66540d85d7989d84c8551793f029533a8232d\"><code>fca6654</code></a></td><td><code>tox.ini: Add toxenvs local-homebrew-macos-minimal, local-homebrew-macos-standard</code></td></tr></table>\n",
    "created_at": "2020-01-29T19:05:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455656",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2" align="right">comment:2</div>

Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7e59a6f4ff8384348e44772369c94b65d88f34b9"><code>7e59a6f</code></a></td><td><code>build/bin/write-dockerfile.sh: Add commands to activate conda env</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ad9a975b3fab72a39d5e0f262fe322655b0ad3c"><code>2ad9a97</code></a></td><td><code>Merge tag '9.1.beta2' into t/29053/installation_manual__generate__apt_get_install__and__yum_install__lines_from_build_pkgs_at___bootstrap_time</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9fca2309c95314fa6c948ddddf9b63f1b4d18f8c"><code>9fca230</code></a></td><td><code>add doc</code></td></tr><tr><td><code>[f6cbb8a](https://github.com/sagemath/sagetrac-mirror/commit/f6cbb8a2abd149a84d2c11bfeb38db614e6de70e)</code></td><td><code>`add centos-{7,8`}</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c6510581b956e47ae58ca6876fa8f152915244dc"><code>c651058</code></a></td><td><code>on centos, IGNORE_MISSING_SYSTEM_PACKAGES=yes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/98edff6be135e9b3c3cd0ef8adfde4e5fff3ac90"><code>98edff6</code></a></td><td><code>Add build/pkgs/gfortran/distros/fedora.txt</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/843ca764bdbf9385aed1b69b7928b91871363ee9"><code>843ca76</code></a></td><td><code>build/pkgs/fedora.txt: Add python3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd6a5457b27b498115ed43171b38a129ba5de50d"><code>bd6a545</code></a></td><td><code>tox.ini: Add debian stretch, put sid last</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/23c6334cf2927a4d917a27b3963471e8242d86a3"><code>23c6334</code></a></td><td><code>build/pkgs/openblas/distros/arch.txt: Add lapack, cblas</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fca66540d85d7989d84c8551793f029533a8232d"><code>fca6654</code></a></td><td><code>tox.ini: Add toxenvs local-homebrew-macos-minimal, local-homebrew-macos-standard</code></td></tr></table>




---

archive/issue_comments_455657.json:
```json
{
    "body": "Commit: **[`fca6654`](https://github.com/sagemath/sagetrac-mirror/commit/fca66540d85d7989d84c8551793f029533a8232d)**",
    "created_at": "2020-01-29T19:05:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455657",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`fca6654`](https://github.com/sagemath/sagetrac-mirror/commit/fca66540d85d7989d84c8551793f029533a8232d)**



---

archive/issue_comments_455658.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n #29053 adds `tox.ini` to support testing the sage distribution in isolated environments via docker.\n \n-This ticket adds a toxenv for testing with an isolated installation of homebrew on macOS (not using docker).\n+This ticket adds toxenvs local-homebrew-macos-{minimal,standard} for testing with isolated installations of homebrew on macOS (not using docker).\n \n \n``````\n",
    "created_at": "2020-01-29T19:06:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455658",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 #29053 adds `tox.ini` to support testing the sage distribution in isolated environments via docker.
 
-This ticket adds a toxenv for testing with an isolated installation of homebrew on macOS (not using docker).
+This ticket adds toxenvs local-homebrew-macos-{minimal,standard} for testing with isolated installations of homebrew on macOS (not using docker).
 
 
``````




---

archive/issue_events_397011.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-01-29T19:06:03Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "title_is": "Add to tox.ini some homebrew toxenvs (with a fresh install not in /usr/local)",
    "title_was": "Add to tox.ini a homebrew toxenv (with a fresh install not in /usr/local)",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29104#event-397011"
}
```



---

archive/issue_comments_455659.json:
```json
{
    "body": "Changed commit from **[`fca6654`](https://github.com/sagemath/sagetrac-mirror/commit/fca66540d85d7989d84c8551793f029533a8232d)** to **[`e0e8a4c`](https://github.com/sagemath/sagetrac-mirror/commit/e0e8a4c7be40336fa140195a213f9edf3075f6ee)**",
    "created_at": "2020-01-29T20:01:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455659",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fca6654`](https://github.com/sagemath/sagetrac-mirror/commit/fca66540d85d7989d84c8551793f029533a8232d)** to **[`e0e8a4c`](https://github.com/sagemath/sagetrac-mirror/commit/e0e8a4c7be40336fa140195a213f9edf3075f6ee)**



---

archive/issue_comments_455660.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e0e8a4c7be40336fa140195a213f9edf3075f6ee\"><code>e0e8a4c</code></a></td><td><code>tox.ini [local-homebrew]: Fixup PATH, PKG_CONFIG_PATH, set LDFLAGS, CPPFLAGS; [local-direct]: New</code></td></tr></table>\n",
    "created_at": "2020-01-29T20:01:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455660",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e0e8a4c7be40336fa140195a213f9edf3075f6ee"><code>e0e8a4c</code></a></td><td><code>tox.ini [local-homebrew]: Fixup PATH, PKG_CONFIG_PATH, set LDFLAGS, CPPFLAGS; [local-direct]: New</code></td></tr></table>




---

archive/issue_comments_455661.json:
```json
{
    "body": "Changed commit from **[`e0e8a4c`](https://github.com/sagemath/sagetrac-mirror/commit/e0e8a4c7be40336fa140195a213f9edf3075f6ee)** to **[`16ca88f`](https://github.com/sagemath/sagetrac-mirror/commit/16ca88f3423ea20dcb164cd1e7b5bc0283fcec0b)**",
    "created_at": "2020-01-29T20:11:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455661",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e0e8a4c`](https://github.com/sagemath/sagetrac-mirror/commit/e0e8a4c7be40336fa140195a213f9edf3075f6ee)** to **[`16ca88f`](https://github.com/sagemath/sagetrac-mirror/commit/16ca88f3423ea20dcb164cd1e7b5bc0283fcec0b)**



---

archive/issue_comments_455662.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/16ca88f3423ea20dcb164cd1e7b5bc0283fcec0b\"><code>16ca88f</code></a></td><td><code>tox.ini: Use {envlogdir}; use ln -sf</code></td></tr></table>\n",
    "created_at": "2020-01-29T20:11:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455662",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/16ca88f3423ea20dcb164cd1e7b5bc0283fcec0b"><code>16ca88f</code></a></td><td><code>tox.ini: Use {envlogdir}; use ln -sf</code></td></tr></table>




---

archive/issue_comments_455663.json:
```json
{
    "body": "Changed commit from **[`16ca88f`](https://github.com/sagemath/sagetrac-mirror/commit/16ca88f3423ea20dcb164cd1e7b5bc0283fcec0b)** to **[`6a1803d`](https://github.com/sagemath/sagetrac-mirror/commit/6a1803dae669007dcc7005448a1e578bcc950656)**",
    "created_at": "2020-01-29T21:15:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455663",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`16ca88f`](https://github.com/sagemath/sagetrac-mirror/commit/16ca88f3423ea20dcb164cd1e7b5bc0283fcec0b)** to **[`6a1803d`](https://github.com/sagemath/sagetrac-mirror/commit/6a1803dae669007dcc7005448a1e578bcc950656)**



---

archive/issue_comments_455664.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a1803dae669007dcc7005448a1e578bcc950656\"><code>6a1803d</code></a></td><td><code>tox.ini [local]: First build the base-toolchain</code></td></tr></table>\n",
    "created_at": "2020-01-29T21:15:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455664",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a1803dae669007dcc7005448a1e578bcc950656"><code>6a1803d</code></a></td><td><code>tox.ini [local]: First build the base-toolchain</code></td></tr></table>




---

archive/issue_comments_455665.json:
```json
{
    "body": "Changed commit from **[`6a1803d`](https://github.com/sagemath/sagetrac-mirror/commit/6a1803dae669007dcc7005448a1e578bcc950656)** to **[`4b72987`](https://github.com/sagemath/sagetrac-mirror/commit/4b72987e58ff284f57f04d4fbb5fed8f39beb36d)**",
    "created_at": "2020-01-30T04:33:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455665",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6a1803d`](https://github.com/sagemath/sagetrac-mirror/commit/6a1803dae669007dcc7005448a1e578bcc950656)** to **[`4b72987`](https://github.com/sagemath/sagetrac-mirror/commit/4b72987e58ff284f57f04d4fbb5fed8f39beb36d)**



---

archive/issue_comments_455666.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b72987e58ff284f57f04d4fbb5fed8f39beb36d\"><code>4b72987</code></a></td><td><code>tox.ini [local-homebrew]: Set PATH earlier and set ACLOCAL_PATH for bootstrapping</code></td></tr></table>\n",
    "created_at": "2020-01-30T04:33:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455666",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b72987e58ff284f57f04d4fbb5fed8f39beb36d"><code>4b72987</code></a></td><td><code>tox.ini [local-homebrew]: Set PATH earlier and set ACLOCAL_PATH for bootstrapping</code></td></tr></table>




---

archive/issue_comments_455667.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,6 @@\n #29053 adds `tox.ini` to support testing the sage distribution in isolated environments via docker.\n \n-This ticket adds toxenvs local-homebrew-macos-{minimal,standard} for testing with isolated installations of homebrew on macOS (not using docker).\n+This ticket adds toxenvs `local-homebrew-macos-{minimal,standard}` for testing with (best-effort) isolated installations of homebrew on macOS (not using docker).\n \n+An example run of that is here: https://github.com/mkoeppe/sage/actions/runs/32812271\n \n``````\n",
    "created_at": "2020-01-30T04:35:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455667",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,6 @@
 #29053 adds `tox.ini` to support testing the sage distribution in isolated environments via docker.
 
-This ticket adds toxenvs local-homebrew-macos-{minimal,standard} for testing with isolated installations of homebrew on macOS (not using docker).
+This ticket adds toxenvs `local-homebrew-macos-{minimal,standard}` for testing with (best-effort) isolated installations of homebrew on macOS (not using docker).
 
+An example run of that is here: https://github.com/mkoeppe/sage/actions/runs/32812271
 
``````




---

archive/issue_events_397012.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-01-30T04:35:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29104#event-397012"
}
```



---

archive/issue_comments_455668.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2020-01-30T04:35:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455668",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_comments_455669.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nIs this ticket MacOS-specific?",
    "created_at": "2020-02-05T17:52:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455669",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:10" align="right">comment:10</div>

Is this ticket MacOS-specific?



---

archive/issue_comments_455670.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nHmm, I haven\u2019t tried linuxbrew. Might be worth checking",
    "created_at": "2020-02-05T18:32:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455670",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:11" align="right">comment:11</div>

Hmm, I haven’t tried linuxbrew. Might be worth checking



---

archive/issue_comments_455671.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI'll fire up my vintage OSX 10.13 macbookair...",
    "created_at": "2020-02-05T18:34:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455671",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:12" align="right">comment:12</div>

I'll fire up my vintage OSX 10.13 macbookair...



---

archive/issue_comments_455672.json:
```json
{
    "body": "Changed commit from **[`4b72987`](https://github.com/sagemath/sagetrac-mirror/commit/4b72987e58ff284f57f04d4fbb5fed8f39beb36d)** to **[`2141b75`](https://github.com/sagemath/sagetrac-mirror/commit/2141b7536c5b99a26d16568dcc0d734518bebc58)**",
    "created_at": "2020-02-06T14:26:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455672",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4b72987`](https://github.com/sagemath/sagetrac-mirror/commit/4b72987e58ff284f57f04d4fbb5fed8f39beb36d)** to **[`2141b75`](https://github.com/sagemath/sagetrac-mirror/commit/2141b7536c5b99a26d16568dcc0d734518bebc58)**



---

archive/issue_comments_455673.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2141b7536c5b99a26d16568dcc0d734518bebc58\"><code>2141b75</code></a></td><td><code>Merge tag '9.1.beta3' into t/29104/tox-homebrew</code></td></tr></table>\n",
    "created_at": "2020-02-06T14:26:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455673",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2141b7536c5b99a26d16568dcc0d734518bebc58"><code>2141b75</code></a></td><td><code>Merge tag '9.1.beta3' into t/29104/tox-homebrew</code></td></tr></table>




---

archive/issue_comments_455674.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI tried this:\n\n```\ntox -p auto -e local-homebrew-macos-standard\n```\nand got\n\n```\n...\n[sagelib-9.1.beta2] user\t0m10.244s\n[sagelib-9.1.beta2] sys\t0m3.812s\n\nreal\t0m16.288s\nuser\t0m10.956s\nsys\t0m4.047s\nSage build/upgrade complete!\n\u2714 OK local-homebrew-macos-standard in 1 minute, 14.362 seconds\n_________________________________________________________________________________________________ summary __________________________________________________________________________________________________\n  local-homebrew-macos-standard: commands succeeded\n  congratulations :)\n```\n\nnot tests were run, it seems, is this normal?",
    "created_at": "2020-02-07T21:44:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455674",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:14" align="right">comment:14</div>

I tried this:

```
tox -p auto -e local-homebrew-macos-standard
```
and got

```
...
[sagelib-9.1.beta2] user	0m10.244s
[sagelib-9.1.beta2] sys	0m3.812s

real	0m16.288s
user	0m10.956s
sys	0m4.047s
Sage build/upgrade complete!
✔ OK local-homebrew-macos-standard in 1 minute, 14.362 seconds
_________________________________________________________________________________________________ summary __________________________________________________________________________________________________
  local-homebrew-macos-standard: commands succeeded
  congratulations :)
```

not tests were run, it seems, is this normal?



---

archive/issue_comments_455675.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThe default packages set in `tox.ini` are only `fflas_ffpack scipy r`, and those (and their dependencies) are checked.\nI don't know why it's actually building sagelib, but I hope to fix bizarre build behavior like this in #29113.",
    "created_at": "2020-02-08T22:44:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455675",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:15" align="right">comment:15</div>

The default packages set in `tox.ini` are only `fflas_ffpack scipy r`, and those (and their dependencies) are checked.
I don't know why it's actually building sagelib, but I hope to fix bizarre build behavior like this in #29113.



---

archive/issue_comments_455676.json:
```json
{
    "body": "Changed dependencies from **#29053** to none",
    "created_at": "2020-02-10T00:12:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455676",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#29053** to none



---

archive/issue_comments_455677.json:
```json
{
    "body": "Changed commit from **[`2141b75`](https://github.com/sagemath/sagetrac-mirror/commit/2141b7536c5b99a26d16568dcc0d734518bebc58)** to **[`4eb201b`](https://github.com/sagemath/sagetrac-mirror/commit/4eb201b75f75fbbe526b84de9b52f2ba0ea3ef0e)**",
    "created_at": "2020-02-16T20:44:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455677",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2141b75`](https://github.com/sagemath/sagetrac-mirror/commit/2141b7536c5b99a26d16568dcc0d734518bebc58)** to **[`4eb201b`](https://github.com/sagemath/sagetrac-mirror/commit/4eb201b75f75fbbe526b84de9b52f2ba0ea3ef0e)**



---

archive/issue_comments_455678.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4eb201b75f75fbbe526b84de9b52f2ba0ea3ef0e\"><code>4eb201b</code></a></td><td><code>Merge tag '9.1.beta4' into t/29104/tox-homebrew</code></td></tr></table>\n",
    "created_at": "2020-02-16T20:44:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455678",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4eb201b75f75fbbe526b84de9b52f2ba0ea3ef0e"><code>4eb201b</code></a></td><td><code>Merge tag '9.1.beta4' into t/29104/tox-homebrew</code></td></tr></table>




---

archive/issue_events_397013.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-04T00:55:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29104#event-397013"
}
```



---

archive/issue_events_397014.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-04T00:55:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29104#event-397014"
}
```



---

archive/issue_comments_455679.json:
```json
{
    "body": "Work Issues: **rebase**",
    "created_at": "2020-03-04T00:55:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455679",
    "user": "https://github.com/mkoeppe"
}
```

Work Issues: **rebase**



---

archive/issue_comments_455680.json:
```json
{
    "body": "Changed commit from **[`4eb201b`](https://github.com/sagemath/sagetrac-mirror/commit/4eb201b75f75fbbe526b84de9b52f2ba0ea3ef0e)** to **[`7155e79`](https://github.com/sagemath/sagetrac-mirror/commit/7155e7993248fcf6db057e46779ab08cd1670833)**",
    "created_at": "2020-03-08T20:53:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455680",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4eb201b`](https://github.com/sagemath/sagetrac-mirror/commit/4eb201b75f75fbbe526b84de9b52f2ba0ea3ef0e)** to **[`7155e79`](https://github.com/sagemath/sagetrac-mirror/commit/7155e7993248fcf6db057e46779ab08cd1670833)**



---

archive/issue_comments_455681.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7155e7993248fcf6db057e46779ab08cd1670833\"><code>7155e79</code></a></td><td><code>Merge tag '9.1.beta7' into t/29104/tox-homebrew</code></td></tr></table>\n",
    "created_at": "2020-03-08T20:53:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455681",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7155e7993248fcf6db057e46779ab08cd1670833"><code>7155e79</code></a></td><td><code>Merge tag '9.1.beta7' into t/29104/tox-homebrew</code></td></tr></table>




---

archive/issue_events_397015.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-08T20:54:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29104#event-397015"
}
```



---

archive/issue_events_397016.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-08T20:54:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29104#event-397016"
}
```



---

archive/issue_comments_455682.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7a2e726c10e58fac83b7c419973e53f92e9444f\"><code>d7a2e72</code></a></td><td><code>Fixup merge</code></td></tr></table>\n",
    "created_at": "2020-03-08T21:02:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455682",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7a2e726c10e58fac83b7c419973e53f92e9444f"><code>d7a2e72</code></a></td><td><code>Fixup merge</code></td></tr></table>




---

archive/issue_comments_455683.json:
```json
{
    "body": "Changed commit from **[`7155e79`](https://github.com/sagemath/sagetrac-mirror/commit/7155e7993248fcf6db057e46779ab08cd1670833)** to **[`d7a2e72`](https://github.com/sagemath/sagetrac-mirror/commit/d7a2e726c10e58fac83b7c419973e53f92e9444f)**",
    "created_at": "2020-03-08T21:02:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455683",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7155e79`](https://github.com/sagemath/sagetrac-mirror/commit/7155e7993248fcf6db057e46779ab08cd1670833)** to **[`d7a2e72`](https://github.com/sagemath/sagetrac-mirror/commit/d7a2e726c10e58fac83b7c419973e53f92e9444f)**



---

archive/issue_comments_455684.json:
```json
{
    "body": "Changed work issues from **rebase** to none",
    "created_at": "2020-03-08T21:04:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455684",
    "user": "https://github.com/mkoeppe"
}
```

Changed work issues from **rebase** to none



---

archive/issue_comments_455685.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/31030557a5b692d3b1761b64ea1fc4874b3ea654\"><code>3103055</code></a></td><td><code>m4ri must use png on gentoo</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b48aa12f5f1566022f67eb0ace593ce62769fe8\"><code>1b48aa1</code></a></td><td><code>Merge tag '9.1.beta7' into t/29273/packages/r_packages_in_distros</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0fc301cc5df3af4e4bd07a4761be3434946b8a4d\"><code>0fc301c</code></a></td><td><code>Add build/pkgs/{libgd|m4ri|ninja_build|perl_term_readline_gnu|yasm}/distros/*.txt - from repology</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f7785ce08e9335db8ecb817396097362032e65be\"><code>f7785ce</code></a></td><td><code>build/pkgs/fedora.txt: Add diffutils</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d2bbd8fb8e36270f16844f5ff9c2071c75f0ff3\"><code>6d2bbd8</code></a></td><td><code>build/pkgs/arch.txt: Add 'which'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0aa90c12bb74cfc0bd045f6f189ddc4dbc2732da\"><code>0aa90c1</code></a></td><td><code>build/pkgs/debian.txt: Add ca-certificates</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c49acdce35a9d834e8525f5612c6f778f01a12a0\"><code>c49acdc</code></a></td><td><code>Merge tag '9.1.beta7' into t/29129/add_more_system_packages_to_build_pkgs_spkg_distros_</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0f704d03e5aaa1c6e34212f009bec4a50e2cbffa\"><code>0f704d0</code></a></td><td><code>Merge branch 't/29129/add_more_system_packages_to_build_pkgs_spkg_distros_' into t/29273/packages/r_packages_in_distros</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f8097c4ccec68ed85e39d7e29a460b1fe4e9ce81\"><code>f8097c4</code></a></td><td><code>Merge branch 'u/mkoeppe/packages/r_packages_in_distros' of git://trac.sagemath.org/sage into t/29104/tox-homebrew</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9e9f4c7f852c7b6f18d44e950a84317bd1de9c6b\"><code>9e9f4c7</code></a></td><td><code>Add distros/homebrew.txt for many packages, and some more distros/*.txt</code></td></tr></table>\n",
    "created_at": "2020-03-11T19:35:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455685",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/31030557a5b692d3b1761b64ea1fc4874b3ea654"><code>3103055</code></a></td><td><code>m4ri must use png on gentoo</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b48aa12f5f1566022f67eb0ace593ce62769fe8"><code>1b48aa1</code></a></td><td><code>Merge tag '9.1.beta7' into t/29273/packages/r_packages_in_distros</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0fc301cc5df3af4e4bd07a4761be3434946b8a4d"><code>0fc301c</code></a></td><td><code>Add build/pkgs/{libgd|m4ri|ninja_build|perl_term_readline_gnu|yasm}/distros/*.txt - from repology</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f7785ce08e9335db8ecb817396097362032e65be"><code>f7785ce</code></a></td><td><code>build/pkgs/fedora.txt: Add diffutils</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d2bbd8fb8e36270f16844f5ff9c2071c75f0ff3"><code>6d2bbd8</code></a></td><td><code>build/pkgs/arch.txt: Add 'which'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0aa90c12bb74cfc0bd045f6f189ddc4dbc2732da"><code>0aa90c1</code></a></td><td><code>build/pkgs/debian.txt: Add ca-certificates</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c49acdce35a9d834e8525f5612c6f778f01a12a0"><code>c49acdc</code></a></td><td><code>Merge tag '9.1.beta7' into t/29129/add_more_system_packages_to_build_pkgs_spkg_distros_</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0f704d03e5aaa1c6e34212f009bec4a50e2cbffa"><code>0f704d0</code></a></td><td><code>Merge branch 't/29129/add_more_system_packages_to_build_pkgs_spkg_distros_' into t/29273/packages/r_packages_in_distros</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f8097c4ccec68ed85e39d7e29a460b1fe4e9ce81"><code>f8097c4</code></a></td><td><code>Merge branch 'u/mkoeppe/packages/r_packages_in_distros' of git://trac.sagemath.org/sage into t/29104/tox-homebrew</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9e9f4c7f852c7b6f18d44e950a84317bd1de9c6b"><code>9e9f4c7</code></a></td><td><code>Add distros/homebrew.txt for many packages, and some more distros/*.txt</code></td></tr></table>




---

archive/issue_comments_455686.json:
```json
{
    "body": "Changed commit from **[`d7a2e72`](https://github.com/sagemath/sagetrac-mirror/commit/d7a2e726c10e58fac83b7c419973e53f92e9444f)** to **[`9e9f4c7`](https://github.com/sagemath/sagetrac-mirror/commit/9e9f4c7f852c7b6f18d44e950a84317bd1de9c6b)**",
    "created_at": "2020-03-11T19:35:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455686",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d7a2e72`](https://github.com/sagemath/sagetrac-mirror/commit/d7a2e726c10e58fac83b7c419973e53f92e9444f)** to **[`9e9f4c7`](https://github.com/sagemath/sagetrac-mirror/commit/9e9f4c7f852c7b6f18d44e950a84317bd1de9c6b)**



---

archive/issue_comments_455687.json:
```json
{
    "body": "Dependencies: **#29273**",
    "created_at": "2020-03-11T19:36:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455687",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#29273**



---

archive/issue_events_397017.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-11T19:36:39Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "title_is": "Add to tox.ini some homebrew toxenvs (with a fresh install not in /usr/local), add homebrew packages",
    "title_was": "Add to tox.ini some homebrew toxenvs (with a fresh install not in /usr/local)",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29104#event-397017"
}
```



---

archive/issue_comments_455688.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\n- mpc should be `libmpc`\n- `tachyon` does not seem to be the package we use\n- `pari` cannot currently be used by Sage because the pari packages are not in Homebrew\n- `glpk` 4.65 should not be used by Sage as long as it is not patched by Homebrew, see #24824\n\nI also have these Homebrew packages installed:\n\n```\ncmake freetype gcc git libpng pcre pkg-config openssl xz zeromq\n```\nSome of these might already be installed automatically as dependencies of others.\n\nAdditionally there are:\n\n```\nsagemath/science/flint sagemath/science/arb\n```\nThough, I am not sure about how `flint` in homebrew-core is different from this one.",
    "created_at": "2020-03-11T20:35:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455688",
    "user": "https://github.com/mwageringel"
}
```

<div id="comment:26" align="right">comment:26</div>

- mpc should be `libmpc`
- `tachyon` does not seem to be the package we use
- `pari` cannot currently be used by Sage because the pari packages are not in Homebrew
- `glpk` 4.65 should not be used by Sage as long as it is not patched by Homebrew, see #24824

I also have these Homebrew packages installed:

```
cmake freetype gcc git libpng pcre pkg-config openssl xz zeromq
```
Some of these might already be installed automatically as dependencies of others.

Additionally there are:

```
sagemath/science/flint sagemath/science/arb
```
Though, I am not sure about how `flint` in homebrew-core is different from this one.



---

archive/issue_comments_455689.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e8d1fef3818fd1d78f83df31ae237061ea089f92\"><code>e8d1fef</code></a></td><td><code>Add build/pkgs/homebrew*.txt</code></td></tr></table>\n",
    "created_at": "2020-03-11T20:37:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455689",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e8d1fef3818fd1d78f83df31ae237061ea089f92"><code>e8d1fef</code></a></td><td><code>Add build/pkgs/homebrew*.txt</code></td></tr></table>




---

archive/issue_comments_455690.json:
```json
{
    "body": "Changed commit from **[`9e9f4c7`](https://github.com/sagemath/sagetrac-mirror/commit/9e9f4c7f852c7b6f18d44e950a84317bd1de9c6b)** to **[`e8d1fef`](https://github.com/sagemath/sagetrac-mirror/commit/e8d1fef3818fd1d78f83df31ae237061ea089f92)**",
    "created_at": "2020-03-11T20:37:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455690",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9e9f4c7`](https://github.com/sagemath/sagetrac-mirror/commit/9e9f4c7f852c7b6f18d44e950a84317bd1de9c6b)** to **[`e8d1fef`](https://github.com/sagemath/sagetrac-mirror/commit/e8d1fef3818fd1d78f83df31ae237061ea089f92)**



---

archive/issue_comments_455691.json:
```json
{
    "body": "Changed commit from **[`e8d1fef`](https://github.com/sagemath/sagetrac-mirror/commit/e8d1fef3818fd1d78f83df31ae237061ea089f92)** to **[`242f684`](https://github.com/sagemath/sagetrac-mirror/commit/242f684eac3c9a71e9562c56554a0b2cdf9e297e)**",
    "created_at": "2020-03-11T20:55:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455691",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e8d1fef`](https://github.com/sagemath/sagetrac-mirror/commit/e8d1fef3818fd1d78f83df31ae237061ea089f92)** to **[`242f684`](https://github.com/sagemath/sagetrac-mirror/commit/242f684eac3c9a71e9562c56554a0b2cdf9e297e)**



---

archive/issue_comments_455692.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/242f684eac3c9a71e9562c56554a0b2cdf9e297e\"><code>242f684</code></a></td><td><code>Add/fix build/pkgs/*/homebrew.txt - from gh-mwageringel</code></td></tr></table>\n",
    "created_at": "2020-03-11T20:55:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455692",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/242f684eac3c9a71e9562c56554a0b2cdf9e297e"><code>242f684</code></a></td><td><code>Add/fix build/pkgs/*/homebrew.txt - from gh-mwageringel</code></td></tr></table>




---

archive/issue_comments_455693.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nhttps://github.com/sagemath/homebrew-science/commits/master\n\nadds NTL support for flint, and also ensbles TLS.\n\nwe can cook up more of these formulae, theain obstacle for me there was that they ate in Ruby.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/242f684eac3c9a71e9562c56554a0b2cdf9e297e\"><code>242f684</code></a></td><td><code>Add/fix build/pkgs/*/homebrew.txt - from gh-mwageringel</code></td></tr></table>\n",
    "created_at": "2020-03-11T20:56:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455693",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:29" align="right">comment:29</div>

https://github.com/sagemath/homebrew-science/commits/master

adds NTL support for flint, and also ensbles TLS.

we can cook up more of these formulae, theain obstacle for me there was that they ate in Ruby.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/242f684eac3c9a71e9562c56554a0b2cdf9e297e"><code>242f684</code></a></td><td><code>Add/fix build/pkgs/*/homebrew.txt - from gh-mwageringel</code></td></tr></table>




---

archive/issue_comments_455694.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\n\n```\n==> Installing sagemath/science/arb\n==> Downloading https://homebrew.bintray.com/bottles-science/arb-2.16.0.sierra.bottle.tar.gz\n##O=#  #                                                                      \ncurl: (22) The requested URL returned error: 404 Not Found\nError: Failed to download resource \"arb\"\nDownload failed: https://homebrew.bintray.com/bottles-science/arb-2.16.0.sierra.bottle.tar.gz\nWarning: Bottle installation failed: building from source.\n==> Downloading https://github.com/fredrik-johansson/arb/archive/2.16.0.tar.gz\n==> Downloading from https://codeload.github.com/fredrik-johansson/arb/tar.gz/2.16.0\n######################################################################## 100.0%\n```",
    "created_at": "2020-03-11T21:06:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455694",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:30" align="right">comment:30</div>


```
==> Installing sagemath/science/arb
==> Downloading https://homebrew.bintray.com/bottles-science/arb-2.16.0.sierra.bottle.tar.gz
##O=#  #                                                                      
curl: (22) The requested URL returned error: 404 Not Found
Error: Failed to download resource "arb"
Download failed: https://homebrew.bintray.com/bottles-science/arb-2.16.0.sierra.bottle.tar.gz
Warning: Bottle installation failed: building from source.
==> Downloading https://github.com/fredrik-johansson/arb/archive/2.16.0.tar.gz
==> Downloading from https://codeload.github.com/fredrik-johansson/arb/tar.gz/2.16.0
######################################################################## 100.0%
```



---

archive/issue_comments_455695.json:
```json
{
    "body": "<div id=\"comment:31\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2449c395aad510ffc430416a06f2182b6dc0ba7c\"><code>2449c39</code></a></td><td><code>tox.ini: Get homebrew packages from *homebrew*.txt</code></td></tr></table>\n",
    "created_at": "2020-03-11T21:07:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455695",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:31"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2449c395aad510ffc430416a06f2182b6dc0ba7c"><code>2449c39</code></a></td><td><code>tox.ini: Get homebrew packages from *homebrew*.txt</code></td></tr></table>




---

archive/issue_comments_455696.json:
```json
{
    "body": "Changed commit from **[`242f684`](https://github.com/sagemath/sagetrac-mirror/commit/242f684eac3c9a71e9562c56554a0b2cdf9e297e)** to **[`2449c39`](https://github.com/sagemath/sagetrac-mirror/commit/2449c395aad510ffc430416a06f2182b6dc0ba7c)**",
    "created_at": "2020-03-11T21:07:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455696",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`242f684`](https://github.com/sagemath/sagetrac-mirror/commit/242f684eac3c9a71e9562c56554a0b2cdf9e297e)** to **[`2449c39`](https://github.com/sagemath/sagetrac-mirror/commit/2449c395aad510ffc430416a06f2182b6dc0ba7c)**



---

archive/issue_comments_455697.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@mkoeppe](#comment%3A30):\n> \n> ```\n> ==> Installing sagemath/science/arb\n> ==> Downloading https://homebrew.bintray.com/bottles-science/arb-2.16.0.sierra.bottle.tar.gz\n> ##O=#  #                                                                      \n> curl: (22) The requested URL returned error: 404 Not Found\n> Error: Failed to download resource \"arb\"\n> Download failed: https://homebrew.bintray.com/bottles-science/arb-2.16.0.sierra.bottle.tar.gz\n> Warning: Bottle installation failed: building from source.\n> ==> Downloading https://github.com/fredrik-johansson/arb/archive/2.16.0.tar.gz\n> ==> Downloading from https://codeload.github.com/fredrik-johansson/arb/tar.gz/2.16.0\n> ######################################################################## 100.0%\n> ```\n\nyes, this is expected. No binaries.",
    "created_at": "2020-03-11T21:10:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455697",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@mkoeppe](#comment%3A30):
> 
> ```
> ==> Installing sagemath/science/arb
> ==> Downloading https://homebrew.bintray.com/bottles-science/arb-2.16.0.sierra.bottle.tar.gz
> ##O=#  #                                                                      
> curl: (22) The requested URL returned error: 404 Not Found
> Error: Failed to download resource "arb"
> Download failed: https://homebrew.bintray.com/bottles-science/arb-2.16.0.sierra.bottle.tar.gz
> Warning: Bottle installation failed: building from source.
> ==> Downloading https://github.com/fredrik-johansson/arb/archive/2.16.0.tar.gz
> ==> Downloading from https://codeload.github.com/fredrik-johansson/arb/tar.gz/2.16.0
> ######################################################################## 100.0%
> ```

yes, this is expected. No binaries.



---

archive/issue_comments_455698.json:
```json
{
    "body": "<div id=\"comment:33\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/188994aa353dd4533f701aa986a24c1ac2cad860\"><code>188994a</code></a></td><td><code>tox.ini: Use brew upgrade after brew install</code></td></tr></table>\n",
    "created_at": "2020-03-11T21:29:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455698",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/188994aa353dd4533f701aa986a24c1ac2cad860"><code>188994a</code></a></td><td><code>tox.ini: Use brew upgrade after brew install</code></td></tr></table>




---

archive/issue_comments_455699.json:
```json
{
    "body": "Changed commit from **[`2449c39`](https://github.com/sagemath/sagetrac-mirror/commit/2449c395aad510ffc430416a06f2182b6dc0ba7c)** to **[`188994a`](https://github.com/sagemath/sagetrac-mirror/commit/188994aa353dd4533f701aa986a24c1ac2cad860)**",
    "created_at": "2020-03-11T21:29:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455699",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2449c39`](https://github.com/sagemath/sagetrac-mirror/commit/2449c395aad510ffc430416a06f2182b6dc0ba7c)** to **[`188994a`](https://github.com/sagemath/sagetrac-mirror/commit/188994aa353dd4533f701aa986a24c1ac2cad860)**



---

archive/issue_comments_455700.json:
```json
{
    "body": "Changed commit from **[`188994a`](https://github.com/sagemath/sagetrac-mirror/commit/188994aa353dd4533f701aa986a24c1ac2cad860)** to **[`6df5104`](https://github.com/sagemath/sagetrac-mirror/commit/6df5104b1ed9ad4e41857cfd522ab31170b95268)**",
    "created_at": "2020-03-11T21:59:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455700",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`188994a`](https://github.com/sagemath/sagetrac-mirror/commit/188994aa353dd4533f701aa986a24c1ac2cad860)** to **[`6df5104`](https://github.com/sagemath/sagetrac-mirror/commit/6df5104b1ed9ad4e41857cfd522ab31170b95268)**



---

archive/issue_comments_455701.json:
```json
{
    "body": "<div id=\"comment:34\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6df5104b1ed9ad4e41857cfd522ab31170b95268\"><code>6df5104</code></a></td><td><code>tox.ini [local-homebrew]: Add to PKG_CONFIG_PATH</code></td></tr></table>\n",
    "created_at": "2020-03-11T21:59:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455701",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:34"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6df5104b1ed9ad4e41857cfd522ab31170b95268"><code>6df5104</code></a></td><td><code>tox.ini [local-homebrew]: Add to PKG_CONFIG_PATH</code></td></tr></table>




---

archive/issue_comments_455702.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\n\n```\nChecking whether SageMath should install SPKG openblas...\nchecking BLAS library... openblas\nchecking whether any of gfortran is installed or will be installed as SPKG... no\nchecking for openblas >= 0.2.20... yes\nchecking for library containing cblas_dgemm... no\nchecking for cblas... no\nchecking for library containing ... no\nchecking for lapack... no\nconfigure: no suitable system package found for SPKG openblas\n```\nThe tests for `cblas_dgemm` etc. do not seem to use `OPENBLAS_LIBS` at all!",
    "created_at": "2020-03-11T22:15:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455702",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:35" align="right">comment:35</div>


```
Checking whether SageMath should install SPKG openblas...
checking BLAS library... openblas
checking whether any of gfortran is installed or will be installed as SPKG... no
checking for openblas >= 0.2.20... yes
checking for library containing cblas_dgemm... no
checking for cblas... no
checking for library containing ... no
checking for lapack... no
configure: no suitable system package found for SPKG openblas
```
The tests for `cblas_dgemm` etc. do not seem to use `OPENBLAS_LIBS` at all!



---

archive/issue_comments_455703.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@dimpase](#comment%3A29):\n> https://github.com/sagemath/homebrew-science/commits/master\n> \n> adds NTL support for flint, and also ensbles TLS.\n> \n> we can cook up more of these formulae, theain obstacle for me there was that they ate in Ruby.\n\nThere seems to be a conflict between `flint` and `sagemath/science/flint`, as `sagemath/science/arb` installs `flint` from homebrew-core as a dependency (which has been added to Homebrew very recently). I am using\n\n```\nbrew install sagemath/science/flint\nbrew install --ignore-dependencies sagemath/science/arb\n```\nas a workaround now, but the arb formula probably needs to be updated.",
    "created_at": "2020-03-11T22:49:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455703",
    "user": "https://github.com/mwageringel"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@dimpase](#comment%3A29):
> https://github.com/sagemath/homebrew-science/commits/master
> 
> adds NTL support for flint, and also ensbles TLS.
> 
> we can cook up more of these formulae, theain obstacle for me there was that they ate in Ruby.

There seems to be a conflict between `flint` and `sagemath/science/flint`, as `sagemath/science/arb` installs `flint` from homebrew-core as a dependency (which has been added to Homebrew very recently). I am using

```
brew install sagemath/science/flint
brew install --ignore-dependencies sagemath/science/arb
```
as a workaround now, but the arb formula probably needs to be updated.



---

archive/issue_comments_455704.json:
```json
{
    "body": "<div id=\"comment:37\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c9d5564c2b4cc4b68748c370211956984d2c986e\"><code>c9d5564</code></a></td><td><code>build/pkgs/openblas/spkg-configure.m4: Use OPENBLAS_{LIBS,CFLAGS} while checking for cblas/lapack functions</code></td></tr></table>\n",
    "created_at": "2020-03-11T23:03:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455704",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:37"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c9d5564c2b4cc4b68748c370211956984d2c986e"><code>c9d5564</code></a></td><td><code>build/pkgs/openblas/spkg-configure.m4: Use OPENBLAS_{LIBS,CFLAGS} while checking for cblas/lapack functions</code></td></tr></table>




---

archive/issue_comments_455705.json:
```json
{
    "body": "Changed commit from **[`6df5104`](https://github.com/sagemath/sagetrac-mirror/commit/6df5104b1ed9ad4e41857cfd522ab31170b95268)** to **[`c9d5564`](https://github.com/sagemath/sagetrac-mirror/commit/c9d5564c2b4cc4b68748c370211956984d2c986e)**",
    "created_at": "2020-03-11T23:03:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455705",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6df5104`](https://github.com/sagemath/sagetrac-mirror/commit/6df5104b1ed9ad4e41857cfd522ab31170b95268)** to **[`c9d5564`](https://github.com/sagemath/sagetrac-mirror/commit/c9d5564c2b4cc4b68748c370211956984d2c986e)**



---

archive/issue_comments_455706.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nThis line (introduced in #29071):\n\n```\n        AC_FC_FREEFORM([AC_FC_FUNC([dgeqrf])])\n```\nis not executed at all because `AC_FC_FREEFORM` is `AC_DEFUN_ONCE` and is called already in `gfortran/spkg-configure.m4`\n\nAs a result:\n\n```\nChecking whether SageMath should install SPKG openblas...\nchecking BLAS library... openblas\nchecking whether any of gfortran is installed or will be installed as SPKG... no\nchecking for openblas >= 0.2.20... yes\nchecking for cblas_dgemm... yes\nchecking for ... no\nchecking for lapack... no\nconfigure: no suitable system package found for SPKG openblas\n```",
    "created_at": "2020-03-11T23:10:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455706",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:38" align="right">comment:38</div>

This line (introduced in #29071):

```
        AC_FC_FREEFORM([AC_FC_FUNC([dgeqrf])])
```
is not executed at all because `AC_FC_FREEFORM` is `AC_DEFUN_ONCE` and is called already in `gfortran/spkg-configure.m4`

As a result:

```
Checking whether SageMath should install SPKG openblas...
checking BLAS library... openblas
checking whether any of gfortran is installed or will be installed as SPKG... no
checking for openblas >= 0.2.20... yes
checking for cblas_dgemm... yes
checking for ... no
checking for lapack... no
configure: no suitable system package found for SPKG openblas
```



---

archive/issue_comments_455707.json:
```json
{
    "body": "Changed commit from **[`c9d5564`](https://github.com/sagemath/sagetrac-mirror/commit/c9d5564c2b4cc4b68748c370211956984d2c986e)** to **[`52ef59e`](https://github.com/sagemath/sagetrac-mirror/commit/52ef59ed13d878e1a0de0bec999a9d23a442ca6f)**",
    "created_at": "2020-03-11T23:45:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455707",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c9d5564`](https://github.com/sagemath/sagetrac-mirror/commit/c9d5564c2b4cc4b68748c370211956984d2c986e)** to **[`52ef59e`](https://github.com/sagemath/sagetrac-mirror/commit/52ef59ed13d878e1a0de0bec999a9d23a442ca6f)**



---

archive/issue_comments_455708.json:
```json
{
    "body": "<div id=\"comment:39\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/52ef59ed13d878e1a0de0bec999a9d23a442ca6f\"><code>52ef59e</code></a></td><td><code>build/pkgs/openblas/spkg-configure.m4: Do not use AC_FC_FUNC.</code></td></tr></table>\n",
    "created_at": "2020-03-11T23:45:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455708",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:39"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/52ef59ed13d878e1a0de0bec999a9d23a442ca6f"><code>52ef59e</code></a></td><td><code>build/pkgs/openblas/spkg-configure.m4: Do not use AC_FC_FUNC.</code></td></tr></table>




---

archive/issue_comments_455709.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nNot accepted by configure yet: `glpk`, `r`",
    "created_at": "2020-03-11T23:53:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455709",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:40" align="right">comment:40</div>

Not accepted by configure yet: `glpk`, `r`



---

archive/issue_comments_455710.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\n(resolved)",
    "created_at": "2020-03-11T23:55:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455710",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:41" align="right">comment:41</div>

(resolved)



---

archive/issue_comments_455711.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nReplying to [@sagetrac-git](#comment%3A39):\n> Branch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/52ef59ed13d878e1a0de0bec999a9d23a442ca6f\"><code>52ef59e</code></a></td><td><code>build/pkgs/openblas/spkg-configure.m4: Do not use AC_FC_FUNC.</code></td></tr></table>\n\nwhy? If `AC_FC_FREEFORM` can only be called once, we can move\nthe call to `AC_FC_FUNC` to the very place it's called.\nHow about\n\n```diff\n--- a/build/pkgs/gfortran/spkg-configure.m4\n+++ b/build/pkgs/gfortran/spkg-configure.m4\n@@ -6,7 +6,10 @@ SAGE_SPKG_CONFIGURE([gfortran], [\n     # This helps verify the compiler works too, so if some idiot sets FC to\n     # /usr/bin/ls, we will at least know it's not a working Fortran\n     # compiler.\n-    AC_FC_FREEFORM([SAGE_HAVE_FC_FREEFORM=yes], [\n+    AC_FC_FREEFORM([\n+        SAGE_HAVE_FC_FREEFORM=yes\n+        AC_FC_FUNC([dgeqrf])\n+       ], [\n        AC_MSG_NOTICE([Your Fortran compiler does not accept free-format source code])\n         AC_MSG_NOTICE([which means the compiler is either seriously broken, or])\n         AC_MSG_NOTICE([is too old to build Sage.])\ndiff --git a/build/pkgs/openblas/spkg-configure.m4 b/build/pkgs/openblas/spkg-configure.m4\nindex c37db649be..ecc7540ee9 100644\n--- a/build/pkgs/openblas/spkg-configure.m4\n+++ b/build/pkgs/openblas/spkg-configure.m4\n@@ -9,7 +9,6 @@ SAGE_SPKG_CONFIGURE([openblas], [\n              dnl openblas does not work as cblas; try to use system's cblas as is\n              PKG_CHECK_MODULES([CBLAS], [cblas], [], [sage_spkg_install_openblas=yes])\n           ])\n-       AC_FC_FREEFORM([AC_FC_FUNC([dgeqrf])])\n        AC_SEARCH_LIBS([$dgeqrf], [openblas], [dnl openblas works as lapack\n              sage_install_lapack_pc=yes\n              ], [\n```",
    "created_at": "2020-03-11T23:58:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455711",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:42" align="right">comment:42</div>

Replying to [@sagetrac-git](#comment%3A39):
> Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/52ef59ed13d878e1a0de0bec999a9d23a442ca6f"><code>52ef59e</code></a></td><td><code>build/pkgs/openblas/spkg-configure.m4: Do not use AC_FC_FUNC.</code></td></tr></table>

why? If `AC_FC_FREEFORM` can only be called once, we can move
the call to `AC_FC_FUNC` to the very place it's called.
How about

```diff
--- a/build/pkgs/gfortran/spkg-configure.m4
+++ b/build/pkgs/gfortran/spkg-configure.m4
@@ -6,7 +6,10 @@ SAGE_SPKG_CONFIGURE([gfortran], [
     # This helps verify the compiler works too, so if some idiot sets FC to
     # /usr/bin/ls, we will at least know it's not a working Fortran
     # compiler.
-    AC_FC_FREEFORM([SAGE_HAVE_FC_FREEFORM=yes], [
+    AC_FC_FREEFORM([
+        SAGE_HAVE_FC_FREEFORM=yes
+        AC_FC_FUNC([dgeqrf])
+       ], [
        AC_MSG_NOTICE([Your Fortran compiler does not accept free-format source code])
         AC_MSG_NOTICE([which means the compiler is either seriously broken, or])
         AC_MSG_NOTICE([is too old to build Sage.])
diff --git a/build/pkgs/openblas/spkg-configure.m4 b/build/pkgs/openblas/spkg-configure.m4
index c37db649be..ecc7540ee9 100644
--- a/build/pkgs/openblas/spkg-configure.m4
+++ b/build/pkgs/openblas/spkg-configure.m4
@@ -9,7 +9,6 @@ SAGE_SPKG_CONFIGURE([openblas], [
              dnl openblas does not work as cblas; try to use system's cblas as is
              PKG_CHECK_MODULES([CBLAS], [cblas], [], [sage_spkg_install_openblas=yes])
           ])
-       AC_FC_FREEFORM([AC_FC_FUNC([dgeqrf])])
        AC_SEARCH_LIBS([$dgeqrf], [openblas], [dnl openblas works as lapack
              sage_install_lapack_pc=yes
              ], [
```



---

archive/issue_comments_455712.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nOK... let me try",
    "created_at": "2020-03-12T00:00:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455712",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:43" align="right">comment:43</div>

OK... let me try



---

archive/issue_comments_455713.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nReplying to [@mkoeppe](#comment%3A43):\n> OK... let me try\n\nit appears to work with gfortan etc installed:\n\n```\n-----------------------------------------------------------------------------\nChecking whether SageMath should install SPKG openblas...\nchecking BLAS library... openblas\nchecking whether any of gfortran is installed or will be installed as SPKG... no\nchecking for OPENBLAS... yes\nchecking for library containing cblas_dgemm... -lopenblas\nchecking for library containing dgeqrf_... none required\nconfigure: will use system package and not install SPKG openblas\n```\n\nbut perhaps it would be throwing up a surprise if there wasn't any.",
    "created_at": "2020-03-12T00:07:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455713",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:44" align="right">comment:44</div>

Replying to [@mkoeppe](#comment%3A43):
> OK... let me try

it appears to work with gfortan etc installed:

```
-----------------------------------------------------------------------------
Checking whether SageMath should install SPKG openblas...
checking BLAS library... openblas
checking whether any of gfortran is installed or will be installed as SPKG... no
checking for OPENBLAS... yes
checking for library containing cblas_dgemm... -lopenblas
checking for library containing dgeqrf_... none required
configure: will use system package and not install SPKG openblas
```

but perhaps it would be throwing up a surprise if there wasn't any.



---

archive/issue_comments_455714.json:
```json
{
    "body": "<div id=\"comment:45\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f049b9b4311cd38fec8deba2410916d28a4d8732\"><code>f049b9b</code></a></td><td><code>Revert \"build/pkgs/openblas/spkg-configure.m4: Do not use AC_FC_FUNC.\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9dd37760062337ca4e97263c713d8a46880644b8\"><code>9dd3776</code></a></td><td><code>Move AC_FC_FUNC([dgeqrf]) from openblas/spkg-configure.m4 to gfortran/spkg-configure.m4</code></td></tr></table>\n",
    "created_at": "2020-03-12T00:11:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455714",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:45"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f049b9b4311cd38fec8deba2410916d28a4d8732"><code>f049b9b</code></a></td><td><code>Revert "build/pkgs/openblas/spkg-configure.m4: Do not use AC_FC_FUNC."</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9dd37760062337ca4e97263c713d8a46880644b8"><code>9dd3776</code></a></td><td><code>Move AC_FC_FUNC([dgeqrf]) from openblas/spkg-configure.m4 to gfortran/spkg-configure.m4</code></td></tr></table>




---

archive/issue_comments_455715.json:
```json
{
    "body": "Changed commit from **[`52ef59e`](https://github.com/sagemath/sagetrac-mirror/commit/52ef59ed13d878e1a0de0bec999a9d23a442ca6f)** to **[`9dd3776`](https://github.com/sagemath/sagetrac-mirror/commit/9dd37760062337ca4e97263c713d8a46880644b8)**",
    "created_at": "2020-03-12T00:11:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455715",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`52ef59e`](https://github.com/sagemath/sagetrac-mirror/commit/52ef59ed13d878e1a0de0bec999a9d23a442ca6f)** to **[`9dd3776`](https://github.com/sagemath/sagetrac-mirror/commit/9dd37760062337ca4e97263c713d8a46880644b8)**



---

archive/issue_comments_455716.json:
```json
{
    "body": "Changed commit from **[`9dd3776`](https://github.com/sagemath/sagetrac-mirror/commit/9dd37760062337ca4e97263c713d8a46880644b8)** to **[`886ca2f`](https://github.com/sagemath/sagetrac-mirror/commit/886ca2f0392764055804e44597dc38125bd93e9c)**",
    "created_at": "2020-03-12T00:26:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455716",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9dd3776`](https://github.com/sagemath/sagetrac-mirror/commit/9dd37760062337ca4e97263c713d8a46880644b8)** to **[`886ca2f`](https://github.com/sagemath/sagetrac-mirror/commit/886ca2f0392764055804e44597dc38125bd93e9c)**



---

archive/issue_comments_455717.json:
```json
{
    "body": "<div id=\"comment:46\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/886ca2f0392764055804e44597dc38125bd93e9c\"><code>886ca2f</code></a></td><td><code>tox.ini [homebrew]: make build</code></td></tr></table>\n",
    "created_at": "2020-03-12T00:26:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455717",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:46"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/886ca2f0392764055804e44597dc38125bd93e9c"><code>886ca2f</code></a></td><td><code>tox.ini [homebrew]: make build</code></td></tr></table>




---

archive/issue_comments_455718.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nmatplotlib install fails:\n\n```\n    REQUIRED DEPENDENCIES AND EXTENSIONS\n                     numpy: yes [not found. pip may install it below.]\n          install_requires: yes [handled by setuptools]\n                    libagg: yes [pkg-config information for 'libagg' could not\n                            be found. Using local copy.]\n                  freetype: yes [version 2.10.1]\n                       png: no  [The C/C++ header for libpng (png.h) could not\n                            be found.  You may need to install the development\n                            package.]\n                     qhull: yes [pkg-config information for 'libqhull' could not\n                            be found. Using local copy.]\n...\n                            * The following required packages can not be built:\n                            * png\n                            * Try installing png with `brew install libpng` and\n                            * pkg-config with `brew install pkg-config`\nCleaning up...\n\n  ```",
    "created_at": "2020-03-12T00:44:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455718",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:47" align="right">comment:47</div>

matplotlib install fails:

```
    REQUIRED DEPENDENCIES AND EXTENSIONS
                     numpy: yes [not found. pip may install it below.]
          install_requires: yes [handled by setuptools]
                    libagg: yes [pkg-config information for 'libagg' could not
                            be found. Using local copy.]
                  freetype: yes [version 2.10.1]
                       png: no  [The C/C++ header for libpng (png.h) could not
                            be found.  You may need to install the development
                            package.]
                     qhull: yes [pkg-config information for 'libqhull' could not
                            be found. Using local copy.]
...
                            * The following required packages can not be built:
                            * png
                            * Try installing png with `brew install libpng` and
                            * pkg-config with `brew install pkg-config`
Cleaning up...

  ```



---

archive/issue_comments_455719.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\ncysignals testsuite fails:\n\n```\n  [cysignals-1.10.2]   ulimit 2>/dev/null -s 1024; sage-python23 -B rundoctests.py src/cysignals/*.pyx\n  [cysignals-1.10.2]   Doctesting 5 files.\n  [cysignals-1.10.2]   Traceback (most recent call last):\n  [cysignals-1.10.2]     File \"rundoctests.py\", line 74, in <module>\n  [cysignals-1.10.2]       resource.setrlimit(resource.RLIMIT_STACK, (stacksize, stacksize))\n  [cysignals-1.10.2]   ValueError: current limit exceeds maximum limit\n  [cysignals-1.10.2]   make[4]: *** [check-doctest] Error 1\n  [cysignals-1.10.2]   cd example && sage-python23 setup.py clean build\n ```",
    "created_at": "2020-03-12T00:47:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455719",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:48" align="right">comment:48</div>

cysignals testsuite fails:

```
  [cysignals-1.10.2]   ulimit 2>/dev/null -s 1024; sage-python23 -B rundoctests.py src/cysignals/*.pyx
  [cysignals-1.10.2]   Doctesting 5 files.
  [cysignals-1.10.2]   Traceback (most recent call last):
  [cysignals-1.10.2]     File "rundoctests.py", line 74, in <module>
  [cysignals-1.10.2]       resource.setrlimit(resource.RLIMIT_STACK, (stacksize, stacksize))
  [cysignals-1.10.2]   ValueError: current limit exceeds maximum limit
  [cysignals-1.10.2]   make[4]: *** [check-doctest] Error 1
  [cysignals-1.10.2]   cd example && sage-python23 setup.py clean build
 ```



---

archive/issue_comments_455720.json:
```json
{
    "body": "<div id=\"comment:49\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fdeced384747b6d387450d0b87e623056f6a9522\"><code>fdeced3</code></a></td><td><code>Add zlib</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/185dbbb346e7bea59d6108e2ca8e3b33cb734d03\"><code>185dbbb</code></a></td><td><code>tox.ini [local]: Disable testsuites for some packages</code></td></tr></table>\n",
    "created_at": "2020-03-12T02:23:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455720",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:49"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fdeced384747b6d387450d0b87e623056f6a9522"><code>fdeced3</code></a></td><td><code>Add zlib</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/185dbbb346e7bea59d6108e2ca8e3b33cb734d03"><code>185dbbb</code></a></td><td><code>tox.ini [local]: Disable testsuites for some packages</code></td></tr></table>




---

archive/issue_comments_455721.json:
```json
{
    "body": "Changed commit from **[`886ca2f`](https://github.com/sagemath/sagetrac-mirror/commit/886ca2f0392764055804e44597dc38125bd93e9c)** to **[`185dbbb`](https://github.com/sagemath/sagetrac-mirror/commit/185dbbb346e7bea59d6108e2ca8e3b33cb734d03)**",
    "created_at": "2020-03-12T02:23:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455721",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`886ca2f`](https://github.com/sagemath/sagetrac-mirror/commit/886ca2f0392764055804e44597dc38125bd93e9c)** to **[`185dbbb`](https://github.com/sagemath/sagetrac-mirror/commit/185dbbb346e7bea59d6108e2ca8e3b33cb734d03)**



---

archive/issue_comments_455722.json:
```json
{
    "body": "Changed commit from **[`185dbbb`](https://github.com/sagemath/sagetrac-mirror/commit/185dbbb346e7bea59d6108e2ca8e3b33cb734d03)** to **[`6750bf1`](https://github.com/sagemath/sagetrac-mirror/commit/6750bf1d0bbe58b4ec5526af2fb50361e489a42e)**",
    "created_at": "2020-03-12T02:35:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455722",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`185dbbb`](https://github.com/sagemath/sagetrac-mirror/commit/185dbbb346e7bea59d6108e2ca8e3b33cb734d03)** to **[`6750bf1`](https://github.com/sagemath/sagetrac-mirror/commit/6750bf1d0bbe58b4ec5526af2fb50361e489a42e)**



---

archive/issue_comments_455723.json:
```json
{
    "body": "<div id=\"comment:50\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6750bf1d0bbe58b4ec5526af2fb50361e489a42e\"><code>6750bf1</code></a></td><td><code>tox.ini [local]: Disable linbox testsuite</code></td></tr></table>\n",
    "created_at": "2020-03-12T02:35:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455723",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:50"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6750bf1d0bbe58b4ec5526af2fb50361e489a42e"><code>6750bf1</code></a></td><td><code>tox.ini [local]: Disable linbox testsuite</code></td></tr></table>




---

archive/issue_comments_455724.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nReady for review.",
    "created_at": "2020-03-12T02:46:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455724",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:51" align="right">comment:51</div>

Ready for review.



---

archive/issue_events_397018.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-12T03:26:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29104#event-397018"
}
```



---

archive/issue_events_397019.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-12T03:26:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29104#event-397019"
}
```



---

archive/issue_comments_455725.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nThe AC_FC_FUNC business broke all `-minimal` targets\n(https://github.com/mkoeppe/sage/actions/runs/54084841)",
    "created_at": "2020-03-12T03:43:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455725",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:53" align="right">comment:53</div>

The AC_FC_FUNC business broke all `-minimal` targets
(https://github.com/mkoeppe/sage/actions/runs/54084841)



---

archive/issue_comments_455726.json:
```json
{
    "body": "Changed commit from **[`6750bf1`](https://github.com/sagemath/sagetrac-mirror/commit/6750bf1d0bbe58b4ec5526af2fb50361e489a42e)** to **[`071e0b3`](https://github.com/sagemath/sagetrac-mirror/commit/071e0b33470bc6fc13296052a831d84d85d4a530)**",
    "created_at": "2020-03-12T03:53:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455726",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6750bf1`](https://github.com/sagemath/sagetrac-mirror/commit/6750bf1d0bbe58b4ec5526af2fb50361e489a42e)** to **[`071e0b3`](https://github.com/sagemath/sagetrac-mirror/commit/071e0b33470bc6fc13296052a831d84d85d4a530)**



---

archive/issue_comments_455727.json:
```json
{
    "body": "<div id=\"comment:54\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9f486efbf1421ad1ca08db1159a37566d93c8ae4\"><code>9f486ef</code></a></td><td><code>Revert \"Move AC_FC_FUNC([dgeqrf]) from openblas/spkg-configure.m4 to gfortran/spkg-configure.m4\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/071e0b33470bc6fc13296052a831d84d85d4a530\"><code>071e0b3</code></a></td><td><code>Revert \"Revert \"build/pkgs/openblas/spkg-configure.m4: Do not use AC_FC_FUNC.\"\"</code></td></tr></table>\n",
    "created_at": "2020-03-12T03:53:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455727",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:54"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9f486efbf1421ad1ca08db1159a37566d93c8ae4"><code>9f486ef</code></a></td><td><code>Revert "Move AC_FC_FUNC([dgeqrf]) from openblas/spkg-configure.m4 to gfortran/spkg-configure.m4"</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/071e0b33470bc6fc13296052a831d84d85d4a530"><code>071e0b3</code></a></td><td><code>Revert "Revert "build/pkgs/openblas/spkg-configure.m4: Do not use AC_FC_FUNC.""</code></td></tr></table>




---

archive/issue_comments_455728.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nNew tests at https://github.com/mkoeppe/sage/actions/runs/54093138",
    "created_at": "2020-03-12T03:58:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455728",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:55" align="right">comment:55</div>

New tests at https://github.com/mkoeppe/sage/actions/runs/54093138



---

archive/issue_events_397020.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-12T03:58:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29104#event-397020"
}
```



---

archive/issue_events_397021.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-12T03:58:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29104#event-397021"
}
```



---

archive/issue_comments_455729.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nNeeds review",
    "created_at": "2020-03-12T16:12:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455729",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:57" align="right">comment:57</div>

Needs review



---

archive/issue_comments_455730.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nBoth `homebrew-macos-minimal` (logs: https://github.com/mkoeppe/sage/suites/515691370/artifacts/2830410) and `homebrew-macos-standard` (logs: https://github.com/mkoeppe/sage/suites/515691370/artifacts/2830411)  now build correctly all the way to `sagelib`.",
    "created_at": "2020-03-13T21:09:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455730",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:58" align="right">comment:58</div>

Both `homebrew-macos-minimal` (logs: https://github.com/mkoeppe/sage/suites/515691370/artifacts/2830410) and `homebrew-macos-standard` (logs: https://github.com/mkoeppe/sage/suites/515691370/artifacts/2830411)  now build correctly all the way to `sagelib`.



---

archive/issue_comments_455731.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nSome doctest failures similar to this:\n\n```\nFile \"src/sage/structure/element.pyx\", line 3945, in sage.structure.element.EuclideanDomainElement._mod_\nFailed example:\n    cython('''\n    from sage.structure.element cimport EuclideanDomainElement\n    cdef class MyElt(EuclideanDomainElement):\n        def quo_rem(self, other):\n            return self._parent.var('quo,rem')\n    ''')\nExpected nothing\nGot:\n    ld: warning: directory not found for option '-L/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-minimal/homebrew/opt/readline/lib'\n```",
    "created_at": "2020-03-13T23:40:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455731",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:59" align="right">comment:59</div>

Some doctest failures similar to this:

```
File "src/sage/structure/element.pyx", line 3945, in sage.structure.element.EuclideanDomainElement._mod_
Failed example:
    cython('''
    from sage.structure.element cimport EuclideanDomainElement
    cdef class MyElt(EuclideanDomainElement):
        def quo_rem(self, other):
            return self._parent.var('quo,rem')
    ''')
Expected nothing
Got:
    ld: warning: directory not found for option '-L/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-minimal/homebrew/opt/readline/lib'
```



---

archive/issue_comments_455732.json:
```json
{
    "body": "<div id=\"comment:60\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d1eb116499937578c84f3b27097bf4d3f4194b2f\"><code>d1eb116</code></a></td><td><code>tox.ini: Move homebrew environment settings to script .homebrew-build-env</code></td></tr></table>\n",
    "created_at": "2020-03-14T20:21:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455732",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:60"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d1eb116499937578c84f3b27097bf4d3f4194b2f"><code>d1eb116</code></a></td><td><code>tox.ini: Move homebrew environment settings to script .homebrew-build-env</code></td></tr></table>




---

archive/issue_comments_455733.json:
```json
{
    "body": "Changed commit from **[`071e0b3`](https://github.com/sagemath/sagetrac-mirror/commit/071e0b33470bc6fc13296052a831d84d85d4a530)** to **[`d1eb116`](https://github.com/sagemath/sagetrac-mirror/commit/d1eb116499937578c84f3b27097bf4d3f4194b2f)**",
    "created_at": "2020-03-14T20:21:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455733",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`071e0b3`](https://github.com/sagemath/sagetrac-mirror/commit/071e0b33470bc6fc13296052a831d84d85d4a530)** to **[`d1eb116`](https://github.com/sagemath/sagetrac-mirror/commit/d1eb116499937578c84f3b27097bf4d3f4194b2f)**



---

archive/issue_comments_455734.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nReplying to [@mkoeppe](#comment%3A59):\n> Some doctest failures similar to this: [...readline...]\n\nThese are now fixed. Very few remaining doctest failures and timeouts for `homebrew-macos-minimal` (https://github.com/mkoeppe/sage/runs/508217498):\n\n```\nsage -t src/sage/interfaces/gap.py  # 1 doctest failed\nsage -t src/sage/manifolds/differentiable/degenerate_submanifold.py  # Timed out\nsage -t src/sage/manifolds/differentiable/tensorfield.py  # Timed out\nsage -t src/sage/plot/plot3d/base.pyx  # Timed out\nsage -t src/sage/plot/plot3d/implicit_plot3d.py  # Timed out\nsage -t src/sage/plot/plot3d/parametric_plot3d.py  # Timed out\nsage -t src/sage/plot/plot3d/plot3d.py  # Timed out\nsage -t src/sage/plot/plot3d/shapes.pyx  # Timed out\nsage -t src/sage/rings/padics/padic_lattice_element.py  # 3 doctests failed\nsage -t src/sage/plot/plot3d/shapes2.py  # Timed out\nsage -t src/sage/rings/function_field/function_field.py  # Timed out\nsage -t src/sage/schemes/elliptic_curves/ell_number_field.py  # Timed out\n```\n\n`homebrew-macos-standard` (https://github.com/mkoeppe/sage/runs/508217500) has many more doctest failures.\nLooks like there is some problem with singular.\nSome messages from singular:   `univariate factorization depends on NTL(missing)`\n\nIn that build, Sage is using the homebrew NTL:\n\n```\nChecking whether SageMath should install SPKG ntl...\nchecking installing gmp/mpir? ... no\nchecking NTL/ZZ.h usability... yes\nchecking NTL/ZZ.h presence... yes\nchecking for NTL/ZZ.h... yes\nchecking whether we can link a program using NTL... yes\nchecking NTL version >= 10.3... 11.4.3\nconfigure: will use system package and not install SPKG ntl\nusing ntl library from the system\n```\n... but Singular does not find it ....\n\n```\nchecking for NTL >= 5.0... not found\nconfigure: WARNING: Unable to find NTL (which is strongly recommended) on your machine: please use --with-ntl=PATH_TO_DIR_CONTAINING_LIB_AND_INCLUDE (see also ./configure --help if you do not understand what we are talking about)\n```",
    "created_at": "2020-03-15T03:36:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455734",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:61" align="right">comment:61</div>

Replying to [@mkoeppe](#comment%3A59):
> Some doctest failures similar to this: [...readline...]

These are now fixed. Very few remaining doctest failures and timeouts for `homebrew-macos-minimal` (https://github.com/mkoeppe/sage/runs/508217498):

```
sage -t src/sage/interfaces/gap.py  # 1 doctest failed
sage -t src/sage/manifolds/differentiable/degenerate_submanifold.py  # Timed out
sage -t src/sage/manifolds/differentiable/tensorfield.py  # Timed out
sage -t src/sage/plot/plot3d/base.pyx  # Timed out
sage -t src/sage/plot/plot3d/implicit_plot3d.py  # Timed out
sage -t src/sage/plot/plot3d/parametric_plot3d.py  # Timed out
sage -t src/sage/plot/plot3d/plot3d.py  # Timed out
sage -t src/sage/plot/plot3d/shapes.pyx  # Timed out
sage -t src/sage/rings/padics/padic_lattice_element.py  # 3 doctests failed
sage -t src/sage/plot/plot3d/shapes2.py  # Timed out
sage -t src/sage/rings/function_field/function_field.py  # Timed out
sage -t src/sage/schemes/elliptic_curves/ell_number_field.py  # Timed out
```

`homebrew-macos-standard` (https://github.com/mkoeppe/sage/runs/508217500) has many more doctest failures.
Looks like there is some problem with singular.
Some messages from singular:   `univariate factorization depends on NTL(missing)`

In that build, Sage is using the homebrew NTL:

```
Checking whether SageMath should install SPKG ntl...
checking installing gmp/mpir? ... no
checking NTL/ZZ.h usability... yes
checking NTL/ZZ.h presence... yes
checking for NTL/ZZ.h... yes
checking whether we can link a program using NTL... yes
checking NTL version >= 10.3... 11.4.3
configure: will use system package and not install SPKG ntl
using ntl library from the system
```
... but Singular does not find it ....

```
checking for NTL >= 5.0... not found
configure: WARNING: Unable to find NTL (which is strongly recommended) on your machine: please use --with-ntl=PATH_TO_DIR_CONTAINING_LIB_AND_INCLUDE (see also ./configure --help if you do not understand what we are talking about)
```



---

archive/issue_comments_455735.json:
```json
{
    "body": "Changed dependencies from **#29273** to **#29273, #29335**",
    "created_at": "2020-03-15T04:54:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455735",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#29273** to **#29273, #29335**



---

archive/issue_comments_455736.json:
```json
{
    "body": "Changed commit from **[`d1eb116`](https://github.com/sagemath/sagetrac-mirror/commit/d1eb116499937578c84f3b27097bf4d3f4194b2f)** to **[`6410c1e`](https://github.com/sagemath/sagetrac-mirror/commit/6410c1e02cf69213efe2e888bd63c1d1856cc135)**",
    "created_at": "2020-03-15T04:58:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455736",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d1eb116`](https://github.com/sagemath/sagetrac-mirror/commit/d1eb116499937578c84f3b27097bf4d3f4194b2f)** to **[`6410c1e`](https://github.com/sagemath/sagetrac-mirror/commit/6410c1e02cf69213efe2e888bd63c1d1856cc135)**



---

archive/issue_comments_455737.json:
```json
{
    "body": "<div id=\"comment:63\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/50f62c7a4cfea5343903f6b83cad22fde7bb8553\"><code>50f62c7</code></a></td><td><code>build/pkgs/singular: Add patches to accept system NTL in nonstandard locations</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6410c1e02cf69213efe2e888bd63c1d1856cc135\"><code>6410c1e</code></a></td><td><code>Merge branch 't/29335/always_find_sage_ntl_prefix_and_call_singular_configure_with_it' into t/29104/tox-homebrew</code></td></tr></table>\n",
    "created_at": "2020-03-15T04:58:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455737",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:63"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/50f62c7a4cfea5343903f6b83cad22fde7bb8553"><code>50f62c7</code></a></td><td><code>build/pkgs/singular: Add patches to accept system NTL in nonstandard locations</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6410c1e02cf69213efe2e888bd63c1d1856cc135"><code>6410c1e</code></a></td><td><code>Merge branch 't/29335/always_find_sage_ntl_prefix_and_call_singular_configure_with_it' into t/29104/tox-homebrew</code></td></tr></table>




---

archive/issue_comments_455738.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nNew tests at https://github.com/mkoeppe/sage/actions/runs/55944733",
    "created_at": "2020-03-15T05:00:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455738",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:64" align="right">comment:64</div>

New tests at https://github.com/mkoeppe/sage/actions/runs/55944733



---

archive/issue_comments_455739.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nWith #29335 merged, Singular finds homebrew's NTL but then I get the following linker error (https://github.com/mkoeppe/sage/runs/508693083):\n\n```\n  [singular-4.1.1p2.p0]   ld: illegal thread local variable reference to regular symbol __ZN3NTL13ErrorCallbackE for architecture x86_64\n  [singular-4.1.1p2.p0]   clang: error: linker command failed with exit code 1 (use -v to see invocation)\n  [singular-4.1.1p2.p0]   make[8]: *** [libSingular.la] Error 1\n```",
    "created_at": "2020-03-15T15:50:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455739",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:65" align="right">comment:65</div>

With #29335 merged, Singular finds homebrew's NTL but then I get the following linker error (https://github.com/mkoeppe/sage/runs/508693083):

```
  [singular-4.1.1p2.p0]   ld: illegal thread local variable reference to regular symbol __ZN3NTL13ErrorCallbackE for architecture x86_64
  [singular-4.1.1p2.p0]   clang: error: linker command failed with exit code 1 (use -v to see invocation)
  [singular-4.1.1p2.p0]   make[8]: *** [libSingular.la] Error 1
```



---

archive/issue_comments_455740.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nthis is about absence of coherence on TLS between Singular and Flint.",
    "created_at": "2020-03-15T15:56:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455740",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:66" align="right">comment:66</div>

this is about absence of coherence on TLS between Singular and Flint.



---

archive/issue_comments_455741.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nReplying to [@dimpase](#comment%3A66):\n> this is about absence of coherence on TLS between Singular and Flint.\n\nOK, is there a way to enable use of TLS with Singular?",
    "created_at": "2020-03-15T18:37:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455741",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:67" align="right">comment:67</div>

Replying to [@dimpase](#comment%3A66):
> this is about absence of coherence on TLS between Singular and Flint.

OK, is there a way to enable use of TLS with Singular?



---

archive/issue_comments_455742.json:
```json
{
    "body": "<div id=\"comment:68\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96553db01783fcd6c86e451b0b16b4bcb88140f7\"><code>96553db</code></a></td><td><code>build/pkgs/ntl/spkg-configure.m4: Check for NTL configuration</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec5cd78603542b57f58f4ae0d43ba41151a55ab6\"><code>ec5cd78</code></a></td><td><code>Merge branch 't/29339/fix_ntl_spkg_configure_m4_so_it_rejects_ntls_built_with_ntl_threads__without_ntl_gmp_lip__without_ntl_gf2x_lib' into t/29104/tox-homebrew</code></td></tr></table>\n",
    "created_at": "2020-03-15T18:52:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455742",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:68"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96553db01783fcd6c86e451b0b16b4bcb88140f7"><code>96553db</code></a></td><td><code>build/pkgs/ntl/spkg-configure.m4: Check for NTL configuration</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec5cd78603542b57f58f4ae0d43ba41151a55ab6"><code>ec5cd78</code></a></td><td><code>Merge branch 't/29339/fix_ntl_spkg_configure_m4_so_it_rejects_ntls_built_with_ntl_threads__without_ntl_gmp_lip__without_ntl_gf2x_lib' into t/29104/tox-homebrew</code></td></tr></table>




---

archive/issue_comments_455743.json:
```json
{
    "body": "Changed commit from **[`6410c1e`](https://github.com/sagemath/sagetrac-mirror/commit/6410c1e02cf69213efe2e888bd63c1d1856cc135)** to **[`ec5cd78`](https://github.com/sagemath/sagetrac-mirror/commit/ec5cd78603542b57f58f4ae0d43ba41151a55ab6)**",
    "created_at": "2020-03-15T18:52:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455743",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6410c1e`](https://github.com/sagemath/sagetrac-mirror/commit/6410c1e02cf69213efe2e888bd63c1d1856cc135)** to **[`ec5cd78`](https://github.com/sagemath/sagetrac-mirror/commit/ec5cd78603542b57f58f4ae0d43ba41151a55ab6)**



---

archive/issue_comments_455744.json:
```json
{
    "body": "Changed dependencies from **#29273, #29335** to **#29273, #29335, #29339**",
    "created_at": "2020-03-15T23:47:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455744",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#29273, #29335** to **#29273, #29335, #29339**



---

archive/issue_comments_455745.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nBuild logs for `homebrew-macos-standard` at https://github.com/mkoeppe/sage/runs/511533264",
    "created_at": "2020-03-16T19:13:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455745",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:70" align="right">comment:70</div>

Build logs for `homebrew-macos-standard` at https://github.com/mkoeppe/sage/runs/511533264



---

archive/issue_comments_455746.json:
```json
{
    "body": "Changed commit from **[`ec5cd78`](https://github.com/sagemath/sagetrac-mirror/commit/ec5cd78603542b57f58f4ae0d43ba41151a55ab6)** to **[`6d2f6e1`](https://github.com/sagemath/sagetrac-mirror/commit/6d2f6e1fc67097613f08f326a43a6749073e7bd0)**",
    "created_at": "2020-03-16T19:13:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455746",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ec5cd78`](https://github.com/sagemath/sagetrac-mirror/commit/ec5cd78603542b57f58f4ae0d43ba41151a55ab6)** to **[`6d2f6e1`](https://github.com/sagemath/sagetrac-mirror/commit/6d2f6e1fc67097613f08f326a43a6749073e7bd0)**



---

archive/issue_comments_455747.json:
```json
{
    "body": "<div id=\"comment:71\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c3bc092ba9e7bea69092085b65231212f0367f6d\"><code>c3bc092</code></a></td><td><code>Remove tests for NTL_GMP_LIP, NTL_GF2X_LIB</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d2f6e1fc67097613f08f326a43a6749073e7bd0\"><code>6d2f6e1</code></a></td><td><code>Merge branch 't/29339/fix_ntl_spkg_configure_m4_so_it_rejects_ntls_built_with_ntl_threads__without_ntl_gmp_lip__without_ntl_gf2x_lib' into t/29104/tox-homebrew</code></td></tr></table>\n",
    "created_at": "2020-03-16T19:13:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455747",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:71"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c3bc092ba9e7bea69092085b65231212f0367f6d"><code>c3bc092</code></a></td><td><code>Remove tests for NTL_GMP_LIP, NTL_GF2X_LIB</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d2f6e1fc67097613f08f326a43a6749073e7bd0"><code>6d2f6e1</code></a></td><td><code>Merge branch 't/29339/fix_ntl_spkg_configure_m4_so_it_rejects_ntls_built_with_ntl_threads__without_ntl_gmp_lip__without_ntl_gf2x_lib' into t/29104/tox-homebrew</code></td></tr></table>




---

archive/issue_comments_455748.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nReplying to [@mkoeppe](#comment%3A70):\n> Build logs for `homebrew-macos-standard` at https://github.com/mkoeppe/sage/runs/511533264\n\n\n```\n  [sagelib-9.1.beta7]   ld: illegal thread local variable reference to regular symbol __ZN3NTL20ZZXFac_InitNumPrimesE for architecture x86_64\n  [sagelib-9.1.beta7]   clang: error: linker command failed with exit code 1 (use -v to see invocation)\n```",
    "created_at": "2020-03-16T20:12:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455748",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:72" align="right">comment:72</div>

Replying to [@mkoeppe](#comment%3A70):
> Build logs for `homebrew-macos-standard` at https://github.com/mkoeppe/sage/runs/511533264


```
  [sagelib-9.1.beta7]   ld: illegal thread local variable reference to regular symbol __ZN3NTL20ZZXFac_InitNumPrimesE for architecture x86_64
  [sagelib-9.1.beta7]   clang: error: linker command failed with exit code 1 (use -v to see invocation)
```



---

archive/issue_comments_455749.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nI guess this means that another library is picking up the system installation of NTL...",
    "created_at": "2020-03-16T20:40:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455749",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:73" align="right">comment:73</div>

I guess this means that another library is picking up the system installation of NTL...



---

archive/issue_comments_455750.json:
```json
{
    "body": "Changed commit from **[`6d2f6e1`](https://github.com/sagemath/sagetrac-mirror/commit/6d2f6e1fc67097613f08f326a43a6749073e7bd0)** to **[`14e9f12`](https://github.com/sagemath/sagetrac-mirror/commit/14e9f1270e7706e9d771ff33efe259e135fa9ec4)**",
    "created_at": "2020-03-16T20:43:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455750",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6d2f6e1`](https://github.com/sagemath/sagetrac-mirror/commit/6d2f6e1fc67097613f08f326a43a6749073e7bd0)** to **[`14e9f12`](https://github.com/sagemath/sagetrac-mirror/commit/14e9f1270e7706e9d771ff33efe259e135fa9ec4)**



---

archive/issue_comments_455751.json:
```json
{
    "body": "<div id=\"comment:74\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/14e9f1270e7706e9d771ff33efe259e135fa9ec4\"><code>14e9f12</code></a></td><td><code>build/pkgs/ntl/distros/homebrew.txt: Remove ntl</code></td></tr></table>\n",
    "created_at": "2020-03-16T20:43:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455751",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:74"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/14e9f1270e7706e9d771ff33efe259e135fa9ec4"><code>14e9f12</code></a></td><td><code>build/pkgs/ntl/distros/homebrew.txt: Remove ntl</code></td></tr></table>




---

archive/issue_comments_455752.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nNew test: https://github.com/mkoeppe/sage/runs/512132585",
    "created_at": "2020-03-16T20:44:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455752",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:75" align="right">comment:75</div>

New test: https://github.com/mkoeppe/sage/runs/512132585



---

archive/issue_comments_455753.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nReplying to [@mwageringel](#comment%3A36):\n> There seems to be a conflict between `flint` and `sagemath/science/flint`, as `sagemath/science/arb` installs `flint` from homebrew-core as a dependency (which has been added to Homebrew very recently). I am using\n> \n> ```\n> brew install sagemath/science/flint\n> brew install --ignore-dependencies sagemath/science/arb\n> ```\n> as a workaround now, but the arb formula probably needs to be updated.\n\nAs can be seen in the build logs above, `sagemath/science/arb` installs `flint` from homebrew-core as a dependency. Later, `sagemath/science/flint` is installed only because of `brew upgrade`. This only seems to work because of the coincidence that `sagemath/science/flint` has a higher version number than `flint`, currently. However, `sagemath/science/arb` is only compiled with `flint` (without ntl support) \u2013 it is not recompiled after installing `sagemath/science/flint`.\n\nI have opened a [pull request](https://github.com/sagemath/homebrew-science/pull/1) to resolve this.",
    "created_at": "2020-03-16T20:47:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455753",
    "user": "https://github.com/mwageringel"
}
```

<div id="comment:76" align="right">comment:76</div>

Replying to [@mwageringel](#comment%3A36):
> There seems to be a conflict between `flint` and `sagemath/science/flint`, as `sagemath/science/arb` installs `flint` from homebrew-core as a dependency (which has been added to Homebrew very recently). I am using
> 
> ```
> brew install sagemath/science/flint
> brew install --ignore-dependencies sagemath/science/arb
> ```
> as a workaround now, but the arb formula probably needs to be updated.

As can be seen in the build logs above, `sagemath/science/arb` installs `flint` from homebrew-core as a dependency. Later, `sagemath/science/flint` is installed only because of `brew upgrade`. This only seems to work because of the coincidence that `sagemath/science/flint` has a higher version number than `flint`, currently. However, `sagemath/science/arb` is only compiled with `flint` (without ntl support) – it is not recompiled after installing `sagemath/science/flint`.

I have opened a [pull request](https://github.com/sagemath/homebrew-science/pull/1) to resolve this.



---

archive/issue_comments_455754.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nReplying to [@mkoeppe](#comment%3A75):\n> New test: https://github.com/mkoeppe/sage/runs/512132585\n\nIf you remove ntl, you probably also need to remove flint and arb, as they depend on it.",
    "created_at": "2020-03-16T20:55:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455754",
    "user": "https://github.com/mwageringel"
}
```

<div id="comment:77" align="right">comment:77</div>

Replying to [@mkoeppe](#comment%3A75):
> New test: https://github.com/mkoeppe/sage/runs/512132585

If you remove ntl, you probably also need to remove flint and arb, as they depend on it.



---

archive/issue_comments_455755.json:
```json
{
    "body": "Changed commit from **[`14e9f12`](https://github.com/sagemath/sagetrac-mirror/commit/14e9f1270e7706e9d771ff33efe259e135fa9ec4)** to **[`70e161b`](https://github.com/sagemath/sagetrac-mirror/commit/70e161bdd3f29ae1b25dffab08829a20e2c53e5c)**",
    "created_at": "2020-03-16T21:12:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455755",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`14e9f12`](https://github.com/sagemath/sagetrac-mirror/commit/14e9f1270e7706e9d771ff33efe259e135fa9ec4)** to **[`70e161b`](https://github.com/sagemath/sagetrac-mirror/commit/70e161bdd3f29ae1b25dffab08829a20e2c53e5c)**



---

archive/issue_comments_455756.json:
```json
{
    "body": "<div id=\"comment:78\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/70e161bdd3f29ae1b25dffab08829a20e2c53e5c\"><code>70e161b</code></a></td><td><code>Remove use of homebrew packages flint, arb</code></td></tr></table>\n",
    "created_at": "2020-03-16T21:12:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455756",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:78"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/70e161bdd3f29ae1b25dffab08829a20e2c53e5c"><code>70e161b</code></a></td><td><code>Remove use of homebrew packages flint, arb</code></td></tr></table>




---

archive/issue_comments_455757.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\nThank you!",
    "created_at": "2020-03-16T21:23:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455757",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:79" align="right">comment:79</div>

Thank you!



---

archive/issue_comments_455758.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">comment:80</div>\n\nNew tests at https://github.com/mkoeppe/sage/runs/512243289",
    "created_at": "2020-03-16T21:27:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455758",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:80" align="right">comment:80</div>

New tests at https://github.com/mkoeppe/sage/runs/512243289



---

archive/issue_comments_455759.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nI had no idea that a ticket about homebrew would be touching fedora-related stuff, and in this I essentially created a duplicate of that work on #29352\n\nIt's much better to create separate tickets for unrelated problems - not the least as it gives them a chance of being discovered.",
    "created_at": "2020-03-18T02:06:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455759",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:81" align="right">comment:81</div>

I had no idea that a ticket about homebrew would be touching fedora-related stuff, and in this I essentially created a duplicate of that work on #29352

It's much better to create separate tickets for unrelated problems - not the least as it gives them a chance of being discovered.



---

archive/issue_comments_455760.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\nOK. What can I do to facilitate review?",
    "created_at": "2020-03-18T02:32:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455760",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:82" align="right">comment:82</div>

OK. What can I do to facilitate review?



---

archive/issue_comments_455761.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">comment:83</div>\n\nI cannot review MacOS-related things - I don't have access to the needed OS.\nBut I would be happy to look at the other things that got silently bundled here.",
    "created_at": "2020-03-18T02:37:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455761",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:83" align="right">comment:83</div>

I cannot review MacOS-related things - I don't have access to the needed OS.
But I would be happy to look at the other things that got silently bundled here.



---

archive/issue_comments_455762.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\nOK, then let me move the fedora.txt files to #29352\nand the other linux .txt files to a new ticket.",
    "created_at": "2020-03-18T02:40:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455762",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:84" align="right">comment:84</div>

OK, then let me move the fedora.txt files to #29352
and the other linux .txt files to a new ticket.



---

archive/issue_comments_455763.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\nReplying to [@mkoeppe](#comment%3A84):\n> OK, then let me move the fedora.txt files to #29352\n> and the other linux .txt files to a new ticket.\n\nActually, as noted on #29352, most of the files were added in #29273.",
    "created_at": "2020-03-18T16:45:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455763",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:85" align="right">comment:85</div>

Replying to [@mkoeppe](#comment%3A84):
> OK, then let me move the fedora.txt files to #29352
> and the other linux .txt files to a new ticket.

Actually, as noted on #29352, most of the files were added in #29273.



---

archive/issue_comments_455764.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">comment:86</div>\n\n@mwageringel Would you be able to review this ticket?",
    "created_at": "2020-03-18T16:46:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455764",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:86" align="right">comment:86</div>

@mwageringel Would you be able to review this ticket?



---

archive/issue_comments_455765.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,5 +2,12 @@\n \n This ticket adds toxenvs `local-homebrew-macos-{minimal,standard}` for testing with (best-effort) isolated installations of homebrew on macOS (not using docker).\n \n+To test:\n+\n+```\n+    brew install tox\n+    tox -e local-homebrew-macos-standard\n+```\n+\n An example run of that is here: https://github.com/mkoeppe/sage/actions/runs/32812271\n \n``````\n",
    "created_at": "2020-03-18T16:48:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455765",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,5 +2,12 @@
 
 This ticket adds toxenvs `local-homebrew-macos-{minimal,standard}` for testing with (best-effort) isolated installations of homebrew on macOS (not using docker).
 
+To test:
+
+```
+    brew install tox
+    tox -e local-homebrew-macos-standard
+```
+
 An example run of that is here: https://github.com/mkoeppe/sage/actions/runs/32812271
 
``````




---

archive/issue_comments_455766.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">comment:88</div>\n\nReplying to [@mkoeppe](#comment%3A86):\n> @mwageringel Would you be able to review this ticket?\n\nYes, I will look into that. Though, I only have access to macOS 10.13.6.",
    "created_at": "2020-03-18T17:10:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455766",
    "user": "https://github.com/mwageringel"
}
```

<div id="comment:88" align="right">comment:88</div>

Replying to [@mkoeppe](#comment%3A86):
> @mwageringel Would you be able to review this ticket?

Yes, I will look into that. Though, I only have access to macOS 10.13.6.



---

archive/issue_comments_455767.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">comment:89</div>\n\nTests ran at https://github.com/mkoeppe/sage/actions/runs/57924835\n\n`local-homebrew-macos-minimal` (https://github.com/mkoeppe/sage/runs/515508463) and `local-homebrew-macos-standard` (https://github.com/mkoeppe/sage/runs/515508474): \n\nAll packages (except for experimental package `polymake`) build, doctests:\n\n```\n----------------------------------------------------------------------\nsage -t src/sage/game_theory/normal_form_game.py  # 5 doctests failed\nsage -t src/sage/dynamics/arithmetic_dynamics/projective_ds.py  # Timed out\nsage -t src/sage/interfaces/gap.py  # 1 doctest failed\nsage -t src/sage/knots/link.py  # 1 doctest failed\nsage -t src/sage/manifolds/differentiable/degenerate_submanifold.py  # Timed out\nsage -t src/sage/manifolds/differentiable/tensorfield.py  # Timed out\nsage -t src/sage/plot/plot3d/base.pyx  # Timed out\nsage -t src/sage/plot/plot3d/implicit_plot3d.py  # Timed out\nsage -t src/sage/plot/plot3d/parametric_plot3d.py  # Timed out\nsage -t src/sage/plot/plot3d/plot3d.py  # Timed out\nsage -t src/sage/plot/plot3d/shapes.pyx  # Timed out\nsage -t src/sage/rings/padics/padic_lattice_element.py  # 3 doctests failed\nsage -t src/sage/plot/plot3d/shapes2.py  # Timed out\nsage -t src/sage/rings/function_field/function_field.py  # Timed out\nsage -t src/sage/schemes/elliptic_curves/ell_number_field.py  # Timed out\n----------------------------------------------------------------------\n```",
    "created_at": "2020-03-18T17:13:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455767",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:89" align="right">comment:89</div>

Tests ran at https://github.com/mkoeppe/sage/actions/runs/57924835

`local-homebrew-macos-minimal` (https://github.com/mkoeppe/sage/runs/515508463) and `local-homebrew-macos-standard` (https://github.com/mkoeppe/sage/runs/515508474): 

All packages (except for experimental package `polymake`) build, doctests:

```
----------------------------------------------------------------------
sage -t src/sage/game_theory/normal_form_game.py  # 5 doctests failed
sage -t src/sage/dynamics/arithmetic_dynamics/projective_ds.py  # Timed out
sage -t src/sage/interfaces/gap.py  # 1 doctest failed
sage -t src/sage/knots/link.py  # 1 doctest failed
sage -t src/sage/manifolds/differentiable/degenerate_submanifold.py  # Timed out
sage -t src/sage/manifolds/differentiable/tensorfield.py  # Timed out
sage -t src/sage/plot/plot3d/base.pyx  # Timed out
sage -t src/sage/plot/plot3d/implicit_plot3d.py  # Timed out
sage -t src/sage/plot/plot3d/parametric_plot3d.py  # Timed out
sage -t src/sage/plot/plot3d/plot3d.py  # Timed out
sage -t src/sage/plot/plot3d/shapes.pyx  # Timed out
sage -t src/sage/rings/padics/padic_lattice_element.py  # 3 doctests failed
sage -t src/sage/plot/plot3d/shapes2.py  # Timed out
sage -t src/sage/rings/function_field/function_field.py  # Timed out
sage -t src/sage/schemes/elliptic_curves/ell_number_field.py  # Timed out
----------------------------------------------------------------------
```



---

archive/issue_comments_455768.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">comment:90</div>\n\nReplying to [@mwageringel](#comment%3A88):\n> Replying to [@mkoeppe](#comment%3A86):\n> > @mwageringel Would you be able to review this ticket?\n\n> Yes, I will look into that. \n\nThanks!\n\n> Though, I only have access to macOS 10.13.6.\n\nThat's actually great, for some broader coverage. I'm testing on 10.15.3, and also the [GitHub](../wiki/GitHub) runners are on Catalina.",
    "created_at": "2020-03-18T17:15:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455768",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:90" align="right">comment:90</div>

Replying to [@mwageringel](#comment%3A88):
> Replying to [@mkoeppe](#comment%3A86):
> > @mwageringel Would you be able to review this ticket?

> Yes, I will look into that. 

Thanks!

> Though, I only have access to macOS 10.13.6.

That's actually great, for some broader coverage. I'm testing on 10.15.3, and also the [GitHub](../wiki/GitHub) runners are on Catalina.



---

archive/issue_comments_455769.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">comment:91</div>\n\nlots of timeouts in tests, probably an overloaded host, or too aggressive parallelisation.",
    "created_at": "2020-03-18T18:15:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455769",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:91" align="right">comment:91</div>

lots of timeouts in tests, probably an overloaded host, or too aggressive parallelisation.



---

archive/issue_comments_455770.json:
```json
{
    "body": "<div id=\"comment:92\" align=\"right\">comment:92</div>\n\nYes, this is using 12 threads",
    "created_at": "2020-03-18T18:21:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455770",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:92" align="right">comment:92</div>

Yes, this is using 12 threads



---

archive/issue_comments_455771.json:
```json
{
    "body": "<div id=\"comment:93\" align=\"right\">comment:93</div>\n\nI'm in the middle of trying this. A few comments:\n\n- patch: this should use homebrew's patch\n- pcre: same\n- boost: is there a way to convince Sage to use homebrew's boost as a replacement for boost-cropped? (See #29100?)\n- ntl: being discussed on another ticket, but my Sage builds on OS X regularly use homebrew's ntl without problems.",
    "created_at": "2020-03-18T18:44:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455771",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:93" align="right">comment:93</div>

I'm in the middle of trying this. A few comments:

- patch: this should use homebrew's patch
- pcre: same
- boost: is there a way to convince Sage to use homebrew's boost as a replacement for boost-cropped? (See #29100?)
- ntl: being discussed on another ticket, but my Sage builds on OS X regularly use homebrew's ntl without problems.



---

archive/issue_comments_455772.json:
```json
{
    "body": "<div id=\"comment:94\" align=\"right\">comment:94</div>\n\nDefaulting to 12 threads seems like a bad idea. Shouldn't the user be able to configure this?",
    "created_at": "2020-03-18T18:48:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455772",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:94" align="right">comment:94</div>

Defaulting to 12 threads seems like a bad idea. Shouldn't the user be able to configure this?



---

archive/issue_comments_455773.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">comment:95</div>\n\nI presume Github Actions run on a real Mac hardware, and 12 threads is probably only meaningful on a rather high end host, used exclusively.",
    "created_at": "2020-03-18T18:52:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455773",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:95" align="right">comment:95</div>

I presume Github Actions run on a real Mac hardware, and 12 threads is probably only meaningful on a rather high end host, used exclusively.



---

archive/issue_comments_455774.json:
```json
{
    "body": "<div id=\"comment:96\" align=\"right\">comment:96</div>\n\nntl failed to build. This is on OS X 10.15.3.\n\n```\nmake setup3\ng++ -std=gnu++11 -I../include -I.  -O2 -g  -fno-common -march=native -L/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.1.beta7/.tox/local-homebrew-macos-standard/local/lib -Wl,-rpath,/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.1.beta7/.tox/local-homebrew-macos-standard/local/lib -L/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.1.beta7/.tox/local-homebrew-macos-standard/homebrew/opt/readline/lib -L/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.1.beta7/.tox/local-homebrew-macos-standard/homebrew/lib  -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.1.beta7/.tox/local-homebrew-macos-standard/local/include  -o gen_gmp_aux gen_gmp_aux.cpp -L/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.1.beta7/.tox/local-homebrew-macos-standard/local/lib  -lgmp  -lm\n./gen_gmp_aux > ../include/NTL/gmp_aux.h \nNTL_GMP_LIP flag set\nGMP version check (6.1.2/6.2.0)\n*** version number mismatch: inconsistency between gmp.h and libgmp\n/bin/sh: line 1: 18441 Abort trap: 6           ./gen_gmp_aux > ../include/NTL/gmp_aux.h\nmake[5]: *** [setup3] Error 134\nmake[4]: *** [setup-phase] Error 2\nmake[4]: Target `all' not remade because of errors.\n```",
    "created_at": "2020-03-18T18:54:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455774",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:96" align="right">comment:96</div>

ntl failed to build. This is on OS X 10.15.3.

```
make setup3
g++ -std=gnu++11 -I../include -I.  -O2 -g  -fno-common -march=native -L/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.1.beta7/.tox/local-homebrew-macos-standard/local/lib -Wl,-rpath,/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.1.beta7/.tox/local-homebrew-macos-standard/local/lib -L/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.1.beta7/.tox/local-homebrew-macos-standard/homebrew/opt/readline/lib -L/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.1.beta7/.tox/local-homebrew-macos-standard/homebrew/lib  -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.1.beta7/.tox/local-homebrew-macos-standard/local/include  -o gen_gmp_aux gen_gmp_aux.cpp -L/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.1.beta7/.tox/local-homebrew-macos-standard/local/lib  -lgmp  -lm
./gen_gmp_aux > ../include/NTL/gmp_aux.h 
NTL_GMP_LIP flag set
GMP version check (6.1.2/6.2.0)
*** version number mismatch: inconsistency between gmp.h and libgmp
/bin/sh: line 1: 18441 Abort trap: 6           ./gen_gmp_aux > ../include/NTL/gmp_aux.h
make[5]: *** [setup3] Error 134
make[4]: *** [setup-phase] Error 2
make[4]: Target `all' not remade because of errors.
```



---

archive/issue_comments_455775.json:
```json
{
    "body": "<div id=\"comment:97\" align=\"right\">comment:97</div>\n\nReplying to [@jhpalmieri](#comment%3A96):\n> ntl failed to build. This is on OS X 10.15.3.\n\nThis happens when you have a different (older) version of gmp in your /usr/local homebrew.\nThe isolation is unfortunately not perfect. Badly written configure scripts of packages pick up stuff from /usr/local",
    "created_at": "2020-03-18T18:57:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455775",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:97" align="right">comment:97</div>

Replying to [@jhpalmieri](#comment%3A96):
> ntl failed to build. This is on OS X 10.15.3.

This happens when you have a different (older) version of gmp in your /usr/local homebrew.
The isolation is unfortunately not perfect. Badly written configure scripts of packages pick up stuff from /usr/local



---

archive/issue_comments_455776.json:
```json
{
    "body": "<div id=\"comment:98\" align=\"right\">comment:98</div>\n\nReplying to [@jhpalmieri](#comment%3A94):\n> Defaulting to 12 threads seems like a bad idea. Shouldn't the user be able to configure this?\n\nGood idea. WIll do",
    "created_at": "2020-03-18T18:58:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455776",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:98" align="right">comment:98</div>

Replying to [@jhpalmieri](#comment%3A94):
> Defaulting to 12 threads seems like a bad idea. Shouldn't the user be able to configure this?

Good idea. WIll do



---

archive/issue_comments_455777.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">comment:99</div>\n\nReplying to [@dimpase](#comment%3A95):\n> I presume Github Actions run on a real Mac hardware, and 12 threads is probably only meaningful on a rather high end host, used exclusively.\n\nWell, for the build I'm using high parallelization on purpose in order to catch possible parallelization bugs in the scripts.",
    "created_at": "2020-03-18T18:59:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455777",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:99" align="right">comment:99</div>

Replying to [@dimpase](#comment%3A95):
> I presume Github Actions run on a real Mac hardware, and 12 threads is probably only meaningful on a rather high end host, used exclusively.

Well, for the build I'm using high parallelization on purpose in order to catch possible parallelization bugs in the scripts.



---

archive/issue_comments_455778.json:
```json
{
    "body": "Changed dependencies from **#29273, #29335, #29339** to **#29273, #29335, #29339, #29361**",
    "created_at": "2020-03-18T19:00:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455778",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#29273, #29335, #29339** to **#29273, #29335, #29339, #29361**



---

archive/issue_comments_455779.json:
```json
{
    "body": "Changed commit from **[`70e161b`](https://github.com/sagemath/sagetrac-mirror/commit/70e161bdd3f29ae1b25dffab08829a20e2c53e5c)** to **[`11f7729`](https://github.com/sagemath/sagetrac-mirror/commit/11f77293e372d29e01b6525e1fb1948c4d855f04)**",
    "created_at": "2020-03-18T19:28:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455779",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`70e161b`](https://github.com/sagemath/sagetrac-mirror/commit/70e161bdd3f29ae1b25dffab08829a20e2c53e5c)** to **[`11f7729`](https://github.com/sagemath/sagetrac-mirror/commit/11f77293e372d29e01b6525e1fb1948c4d855f04)**



---

archive/issue_comments_455780.json:
```json
{
    "body": "<div id=\"comment:101\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11f77293e372d29e01b6525e1fb1948c4d855f04\"><code>11f7729</code></a></td><td><code>build/pkgs/patch/distros/homebrew.txt: New</code></td></tr></table>\n",
    "created_at": "2020-03-18T19:28:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455780",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:101"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11f77293e372d29e01b6525e1fb1948c4d855f04"><code>11f7729</code></a></td><td><code>build/pkgs/patch/distros/homebrew.txt: New</code></td></tr></table>




---

archive/issue_comments_455781.json:
```json
{
    "body": "<div id=\"comment:102\" align=\"right\">comment:102</div>\n\nReplying to [@jhpalmieri](#comment%3A93):\n> I'm in the middle of trying this. A few comments:\n> \n> - pcre: same\n\nThis one actually works for me (both locally and on the [GitHub](../wiki/GitHub) runner). Please post the logs if it doesn't work for you",
    "created_at": "2020-03-18T19:33:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455781",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:102" align="right">comment:102</div>

Replying to [@jhpalmieri](#comment%3A93):
> I'm in the middle of trying this. A few comments:
> 
> - pcre: same

This one actually works for me (both locally and on the [GitHub](../wiki/GitHub) runner). Please post the logs if it doesn't work for you



---

archive/issue_comments_455782.json:
```json
{
    "body": "<div id=\"comment:103\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/93a0421c7789a1ac278386f9643d87b9768a5e69\"><code>93a0421</code></a></td><td><code>build/pkgs/boost*/distros/homebrew.txt: New</code></td></tr></table>\n",
    "created_at": "2020-03-18T19:42:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455782",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:103"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/93a0421c7789a1ac278386f9643d87b9768a5e69"><code>93a0421</code></a></td><td><code>build/pkgs/boost*/distros/homebrew.txt: New</code></td></tr></table>




---

archive/issue_comments_455783.json:
```json
{
    "body": "Changed commit from **[`11f7729`](https://github.com/sagemath/sagetrac-mirror/commit/11f77293e372d29e01b6525e1fb1948c4d855f04)** to **[`93a0421`](https://github.com/sagemath/sagetrac-mirror/commit/93a0421c7789a1ac278386f9643d87b9768a5e69)**",
    "created_at": "2020-03-18T19:42:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455783",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`11f7729`](https://github.com/sagemath/sagetrac-mirror/commit/11f77293e372d29e01b6525e1fb1948c4d855f04)** to **[`93a0421`](https://github.com/sagemath/sagetrac-mirror/commit/93a0421c7789a1ac278386f9643d87b9768a5e69)**



---

archive/issue_comments_455784.json:
```json
{
    "body": "<div id=\"comment:104\" align=\"right\">comment:104</div>\n\nReplying to [@mkoeppe](#comment%3A102):\n> Replying to [@jhpalmieri](#comment%3A93):\n> > I'm in the middle of trying this. A few comments:\n> > \n> > - pcre: same\n\n> \n> This one actually works for me (both locally and on the [GitHub](../wiki/GitHub) runner). Please post the logs if it doesn't work for you\n\nSorry, it looks okay to me. I must have misread config.log.",
    "created_at": "2020-03-18T19:45:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455784",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:104" align="right">comment:104</div>

Replying to [@mkoeppe](#comment%3A102):
> Replying to [@jhpalmieri](#comment%3A93):
> > I'm in the middle of trying this. A few comments:
> > 
> > - pcre: same

> 
> This one actually works for me (both locally and on the [GitHub](../wiki/GitHub) runner). Please post the logs if it doesn't work for you

Sorry, it looks okay to me. I must have misread config.log.



---

archive/issue_comments_455785.json:
```json
{
    "body": "<div id=\"comment:105\" align=\"right\">comment:105</div>\n\nFlint fails to build for me. I ran `brew upgrade`, cleaned everything out, and tried again, and it still fails.\n\n```\ng++ -std=gnu++11 -fPIC -fno-common -pedantic -Wall -O2 -funroll-loops -g -mpopcnt  -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.1.beta7/.tox/local-homebrew-macos-standard/local/var/tmp/sage/build/flint-2.5.2.p5/src -I/usr/local/include -I/usr/local/include -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.1.beta7/.tox/local-homebrew-macos-standard/local/include -c interfaces/NTL-interface.cpp -o build/interfaces/NTL-interface.lo\nld: illegal thread local variable reference to regular symbol __ZN3NTL8ZZ_pInfoE for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake[6]: *** [libflint-13.5.2.dylib] Error 1\nmake[6]: Target `shared' not remade because of errors.\nmake[5]: *** [library] Error 2\nmake[5]: Target `all' not remade because of errors.\nmake[4]: *** [verbose] Error 2\n```",
    "created_at": "2020-03-18T22:33:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455785",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:105" align="right">comment:105</div>

Flint fails to build for me. I ran `brew upgrade`, cleaned everything out, and tried again, and it still fails.

```
g++ -std=gnu++11 -fPIC -fno-common -pedantic -Wall -O2 -funroll-loops -g -mpopcnt  -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.1.beta7/.tox/local-homebrew-macos-standard/local/var/tmp/sage/build/flint-2.5.2.p5/src -I/usr/local/include -I/usr/local/include -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.1.beta7/.tox/local-homebrew-macos-standard/local/include -c interfaces/NTL-interface.cpp -o build/interfaces/NTL-interface.lo
ld: illegal thread local variable reference to regular symbol __ZN3NTL8ZZ_pInfoE for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make[6]: *** [libflint-13.5.2.dylib] Error 1
make[6]: Target `shared' not remade because of errors.
make[5]: *** [library] Error 2
make[5]: Target `all' not remade because of errors.
make[4]: *** [verbose] Error 2
```



---

archive/issue_comments_455786.json:
```json
{
    "body": "<div id=\"comment:106\" align=\"right\">comment:106</div>\n\nIs homebrew ntl installed on this system?",
    "created_at": "2020-03-18T22:35:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455786",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:106" align="right">comment:106</div>

Is homebrew ntl installed on this system?



---

archive/issue_comments_455787.json:
```json
{
    "body": "<div id=\"comment:107\" align=\"right\">comment:107</div>\n\n(in /usr/local)",
    "created_at": "2020-03-18T22:36:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455787",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:107" align="right">comment:107</div>

(in /usr/local)



---

archive/issue_comments_455788.json:
```json
{
    "body": "<div id=\"comment:108\" align=\"right\">comment:108</div>\n\nReplying to [@mkoeppe](#comment%3A106):\n> Is homebrew ntl installed on this system?\n\nYes. Do I need to delete it?\n\nBy the way, should `prefix` be added to `.gitignore`?",
    "created_at": "2020-03-18T22:39:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455788",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:108" align="right">comment:108</div>

Replying to [@mkoeppe](#comment%3A106):
> Is homebrew ntl installed on this system?

Yes. Do I need to delete it?

By the way, should `prefix` be added to `.gitignore`?



---

archive/issue_comments_455789.json:
```json
{
    "body": "<div id=\"comment:109\" align=\"right\">comment:109</div>\n\nReplying to [@jhpalmieri](#comment%3A108):\n> Replying to [@mkoeppe](#comment%3A106):\n> > Is homebrew ntl installed on this system?\n\n> \n> Yes. Do I need to delete it?\n\nPlease try if this helps.\nIf it does, we should fix something in the FLINT build scripts\n\n> By the way, should `prefix` be added to `.gitignore`?\n\nYes, will do.",
    "created_at": "2020-03-18T22:42:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455789",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:109" align="right">comment:109</div>

Replying to [@jhpalmieri](#comment%3A108):
> Replying to [@mkoeppe](#comment%3A106):
> > Is homebrew ntl installed on this system?

> 
> Yes. Do I need to delete it?

Please try if this helps.
If it does, we should fix something in the FLINT build scripts

> By the way, should `prefix` be added to `.gitignore`?

Yes, will do.



---

archive/issue_comments_455790.json:
```json
{
    "body": "<div id=\"comment:110\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4c653c2759eb404f9a51baf52c260468276ea720\"><code>4c653c2</code></a></td><td><code>.gitignore: Add prefix</code></td></tr></table>\n",
    "created_at": "2020-03-18T22:43:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455790",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:110"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4c653c2759eb404f9a51baf52c260468276ea720"><code>4c653c2</code></a></td><td><code>.gitignore: Add prefix</code></td></tr></table>




---

archive/issue_comments_455791.json:
```json
{
    "body": "Changed commit from **[`93a0421`](https://github.com/sagemath/sagetrac-mirror/commit/93a0421c7789a1ac278386f9643d87b9768a5e69)** to **[`4c653c2`](https://github.com/sagemath/sagetrac-mirror/commit/4c653c2759eb404f9a51baf52c260468276ea720)**",
    "created_at": "2020-03-18T22:43:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455791",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`93a0421`](https://github.com/sagemath/sagetrac-mirror/commit/93a0421c7789a1ac278386f9643d87b9768a5e69)** to **[`4c653c2`](https://github.com/sagemath/sagetrac-mirror/commit/4c653c2759eb404f9a51baf52c260468276ea720)**



---

archive/issue_comments_455792.json:
```json
{
    "body": "<div id=\"comment:111\" align=\"right\">comment:111</div>\n\nIs there a command like `make distclean` that will get rid of the stuff that Sage has built but keep the homebrew stuff? I don't really want to wait for gcc to build again. (`make distclean` doesn't touch `prefix`.)",
    "created_at": "2020-03-18T22:47:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455792",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:111" align="right">comment:111</div>

Is there a command like `make distclean` that will get rid of the stuff that Sage has built but keep the homebrew stuff? I don't really want to wait for gcc to build again. (`make distclean` doesn't touch `prefix`.)



---

archive/issue_comments_455793.json:
```json
{
    "body": "<div id=\"comment:112\" align=\"right\">comment:112</div>\n\nAt the moment, nothing better than `rm -rf prefix/*`",
    "created_at": "2020-03-18T22:55:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455793",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:112" align="right">comment:112</div>

At the moment, nothing better than `rm -rf prefix/*`



---

archive/issue_comments_455794.json:
```json
{
    "body": "<div id=\"comment:113\" align=\"right\">comment:113</div>\n\nReplying to [@mkoeppe](#comment%3A109):\n> Replying to [@jhpalmieri](#comment%3A108):\n> > Replying to [@mkoeppe](#comment%3A106):\n> > > Is homebrew ntl installed on this system?\n\n> > \n> > Yes. Do I need to delete it?\n\n> \n> Please try if this helps.\n> If it does, we should fix something in the FLINT build scripts\n\nAfter doing `brew uninstall ntl`, flint now builds.",
    "created_at": "2020-03-19T00:31:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455794",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:113" align="right">comment:113</div>

Replying to [@mkoeppe](#comment%3A109):
> Replying to [@jhpalmieri](#comment%3A108):
> > Replying to [@mkoeppe](#comment%3A106):
> > > Is homebrew ntl installed on this system?

> > 
> > Yes. Do I need to delete it?

> 
> Please try if this helps.
> If it does, we should fix something in the FLINT build scripts

After doing `brew uninstall ntl`, flint now builds.



---

archive/issue_comments_455795.json:
```json
{
    "body": "<div id=\"comment:114\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2625a64d8bb5241e7c11d6403825312084a14b68\"><code>2625a64</code></a></td><td><code>tox.ini [homebrew]: make build</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cf83af6a9f5ea1124bfb54f9987555fb04a4dbac\"><code>cf83af6</code></a></td><td><code>Add zlib</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/14a3dab69bfd3a6b42c8ebff679b184551762e8d\"><code>14a3dab</code></a></td><td><code>tox.ini [local]: Disable testsuites for some packages</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2553b5ae76e23f01cfbc249898b7c017f501d198\"><code>2553b5a</code></a></td><td><code>tox.ini [local]: Disable linbox testsuite</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2f79c76cb49a9e321ecde23c12068e0086c748c1\"><code>2f79c76</code></a></td><td><code>tox.ini: Move homebrew environment settings to script .homebrew-build-env</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/77d5c114348c00e9c6429f69b4180e8cbe26439c\"><code>77d5c11</code></a></td><td><code>build/pkgs/ntl/distros/homebrew.txt: Remove ntl</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4ec80e2e08ac0b00ad82ca514b848235e37f825c\"><code>4ec80e2</code></a></td><td><code>Remove use of homebrew packages flint, arb</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/54c803b9278e1feb2a12b99ab9cabe3452e16e3b\"><code>54c803b</code></a></td><td><code>build/pkgs/patch/distros/homebrew.txt: New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ce6e6cc236c934e04e3412433ce25f91fe936ae\"><code>2ce6e6c</code></a></td><td><code>build/pkgs/boost*/distros/homebrew.txt: New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/467160cdc8402124b21c5dee60386dee03f18b67\"><code>467160c</code></a></td><td><code>.gitignore: Add prefix</code></td></tr></table>\n",
    "created_at": "2020-03-19T19:18:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455795",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:114"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2625a64d8bb5241e7c11d6403825312084a14b68"><code>2625a64</code></a></td><td><code>tox.ini [homebrew]: make build</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cf83af6a9f5ea1124bfb54f9987555fb04a4dbac"><code>cf83af6</code></a></td><td><code>Add zlib</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/14a3dab69bfd3a6b42c8ebff679b184551762e8d"><code>14a3dab</code></a></td><td><code>tox.ini [local]: Disable testsuites for some packages</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2553b5ae76e23f01cfbc249898b7c017f501d198"><code>2553b5a</code></a></td><td><code>tox.ini [local]: Disable linbox testsuite</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2f79c76cb49a9e321ecde23c12068e0086c748c1"><code>2f79c76</code></a></td><td><code>tox.ini: Move homebrew environment settings to script .homebrew-build-env</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/77d5c114348c00e9c6429f69b4180e8cbe26439c"><code>77d5c11</code></a></td><td><code>build/pkgs/ntl/distros/homebrew.txt: Remove ntl</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4ec80e2e08ac0b00ad82ca514b848235e37f825c"><code>4ec80e2</code></a></td><td><code>Remove use of homebrew packages flint, arb</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/54c803b9278e1feb2a12b99ab9cabe3452e16e3b"><code>54c803b</code></a></td><td><code>build/pkgs/patch/distros/homebrew.txt: New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ce6e6cc236c934e04e3412433ce25f91fe936ae"><code>2ce6e6c</code></a></td><td><code>build/pkgs/boost*/distros/homebrew.txt: New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/467160cdc8402124b21c5dee60386dee03f18b67"><code>467160c</code></a></td><td><code>.gitignore: Add prefix</code></td></tr></table>




---

archive/issue_comments_455796.json:
```json
{
    "body": "Changed commit from **[`4c653c2`](https://github.com/sagemath/sagetrac-mirror/commit/4c653c2759eb404f9a51baf52c260468276ea720)** to **[`467160c`](https://github.com/sagemath/sagetrac-mirror/commit/467160cdc8402124b21c5dee60386dee03f18b67)**",
    "created_at": "2020-03-19T19:18:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455796",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4c653c2`](https://github.com/sagemath/sagetrac-mirror/commit/4c653c2759eb404f9a51baf52c260468276ea720)** to **[`467160c`](https://github.com/sagemath/sagetrac-mirror/commit/467160cdc8402124b21c5dee60386dee03f18b67)**



---

archive/issue_comments_455797.json:
```json
{
    "body": "Changed dependencies from **#29273, #29335, #29339, #29361** to **#29335, #29361**",
    "created_at": "2020-03-19T19:19:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455797",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#29273, #29335, #29339, #29361** to **#29335, #29361**



---

archive/issue_comments_455798.json:
```json
{
    "body": "<div id=\"comment:115\" align=\"right\">comment:115</div>\n\nRebased - no longer on top of #29339.",
    "created_at": "2020-03-19T19:19:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455798",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:115" align="right">comment:115</div>

Rebased - no longer on top of #29339.



---

archive/issue_comments_455799.json:
```json
{
    "body": "<div id=\"comment:116\" align=\"right\">comment:116</div>\n\nExcept for the issue with FLINT not building with a pre-existing NTL, it works for me.",
    "created_at": "2020-03-19T22:55:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455799",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:116" align="right">comment:116</div>

Except for the issue with FLINT not building with a pre-existing NTL, it works for me.



---

archive/issue_comments_455800.json:
```json
{
    "body": "<div id=\"comment:117\" align=\"right\">comment:117</div>\n\nLet's fix the FLINT issue on a follow-up ticket.",
    "created_at": "2020-03-19T23:02:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455800",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:117" align="right">comment:117</div>

Let's fix the FLINT issue on a follow-up ticket.



---

archive/issue_comments_455801.json:
```json
{
    "body": "<div id=\"comment:118\" align=\"right\">comment:118</div>\n\nReplying to [@mkoeppe](#comment%3A98):\n> Replying to [@jhpalmieri](#comment%3A94):\n> > Defaulting to 12 threads seems like a bad idea. Shouldn't the user be able to configure this?\n\n> Good idea. WIll do\n\nI'll do this in #29146",
    "created_at": "2020-03-20T02:58:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455801",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:118" align="right">comment:118</div>

Replying to [@mkoeppe](#comment%3A98):
> Replying to [@jhpalmieri](#comment%3A94):
> > Defaulting to 12 threads seems like a bad idea. Shouldn't the user be able to configure this?

> Good idea. WIll do

I'll do this in #29146



---

archive/issue_comments_455802.json:
```json
{
    "body": "<div id=\"comment:119\" align=\"right\">comment:119</div>\n\nReplying to [@mkoeppe](#comment%3A117):\n> Let's fix the FLINT issue on a follow-up ticket.\n\nThis issue is probably the same as #27708/#28409.",
    "created_at": "2020-03-20T03:09:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455802",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:119" align="right">comment:119</div>

Replying to [@mkoeppe](#comment%3A117):
> Let's fix the FLINT issue on a follow-up ticket.

This issue is probably the same as #27708/#28409.



---

archive/issue_comments_455803.json:
```json
{
    "body": "<div id=\"comment:120\" align=\"right\">comment:120</div>\n\nReady for review",
    "created_at": "2020-03-20T03:09:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455803",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:120" align="right">comment:120</div>

Ready for review



---

archive/issue_comments_455804.json:
```json
{
    "body": "<div id=\"comment:121\" align=\"right\">comment:121</div>\n\nReplying to [@mkoeppe](#comment%3A99):\n> Replying to [@dimpase](#comment%3A95):\n> > I presume Github Actions run on a real Mac hardware, and 12 threads is probably only meaningful on a rather high end host, used exclusively.\n\n> Well, for the build I'm using high parallelization on purpose in order to catch possible parallelization bugs in the scripts.\n\nOne can split building into `make built` and `make ptest`, with the latter, much more memory hungry, run with lower value of `-j`.",
    "created_at": "2020-03-20T04:26:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455804",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:121" align="right">comment:121</div>

Replying to [@mkoeppe](#comment%3A99):
> Replying to [@dimpase](#comment%3A95):
> > I presume Github Actions run on a real Mac hardware, and 12 threads is probably only meaningful on a rather high end host, used exclusively.

> Well, for the build I'm using high parallelization on purpose in order to catch possible parallelization bugs in the scripts.

One can split building into `make built` and `make ptest`, with the latter, much more memory hungry, run with lower value of `-j`.



---

archive/issue_comments_455805.json:
```json
{
    "body": "<div id=\"comment:122\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dfce7d4b3d771aaaa7b3d198ff2b1e3eeb2120fc\"><code>dfce7d4</code></a></td><td><code>tox.ini [local]: Pass MAKE environment variable, do not default to 'make -j12', change default target to 'build', add doc</code></td></tr></table>\n",
    "created_at": "2020-03-20T16:01:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455805",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:122"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dfce7d4b3d771aaaa7b3d198ff2b1e3eeb2120fc"><code>dfce7d4</code></a></td><td><code>tox.ini [local]: Pass MAKE environment variable, do not default to 'make -j12', change default target to 'build', add doc</code></td></tr></table>




---

archive/issue_comments_455806.json:
```json
{
    "body": "Changed commit from **[`467160c`](https://github.com/sagemath/sagetrac-mirror/commit/467160cdc8402124b21c5dee60386dee03f18b67)** to **[`dfce7d4`](https://github.com/sagemath/sagetrac-mirror/commit/dfce7d4b3d771aaaa7b3d198ff2b1e3eeb2120fc)**",
    "created_at": "2020-03-20T16:01:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455806",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`467160c`](https://github.com/sagemath/sagetrac-mirror/commit/467160cdc8402124b21c5dee60386dee03f18b67)** to **[`dfce7d4`](https://github.com/sagemath/sagetrac-mirror/commit/dfce7d4b3d771aaaa7b3d198ff2b1e3eeb2120fc)**



---

archive/issue_comments_455807.json:
```json
{
    "body": "<div id=\"comment:123\" align=\"right\">comment:123</div>\n\nOK I've made it more configurable already on this ticket.\nAnd I have added documentation",
    "created_at": "2020-03-20T16:02:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455807",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:123" align="right">comment:123</div>

OK I've made it more configurable already on this ticket.
And I have added documentation



---

archive/issue_comments_455808.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,5 +9,7 @@\n     tox -e local-homebrew-macos-standard\n ```\n \n+See comments in tox.ini for more examples.\n+\n An example run of that is here: https://github.com/mkoeppe/sage/actions/runs/32812271\n \n``````\n",
    "created_at": "2020-03-20T16:03:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455808",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,5 +9,7 @@
     tox -e local-homebrew-macos-standard
 ```
 
+See comments in tox.ini for more examples.
+
 An example run of that is here: https://github.com/mkoeppe/sage/actions/runs/32812271
 
``````




---

archive/issue_comments_455809.json:
```json
{
    "body": "<div id=\"comment:125\" align=\"right\">comment:125</div>\n\n@mwageringel, @dimpase: do you think more needs to be done here, or can we proceed with a positive review? I'm happy with it.",
    "created_at": "2020-03-20T18:40:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455809",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:125" align="right">comment:125</div>

@mwageringel, @dimpase: do you think more needs to be done here, or can we proceed with a positive review? I'm happy with it.



---

archive/issue_comments_455810.json:
```json
{
    "body": "<div id=\"comment:126\" align=\"right\">comment:126</div>\n\nI'm 8 timezones away from my MacOS machine. \n\nI'd like more details/pointers on how the Github Actions testing is done - for  [this](https://github.com/mkoeppe/sage/runs/416298393?check_suite_focus=true) looks to me like \"all sufficiently advanced technology is indistinguishable from magic\" kind of thing :-)",
    "created_at": "2020-03-20T18:48:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455810",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:126" align="right">comment:126</div>

I'm 8 timezones away from my MacOS machine. 

I'd like more details/pointers on how the Github Actions testing is done - for  [this](https://github.com/mkoeppe/sage/runs/416298393?check_suite_focus=true) looks to me like "all sufficiently advanced technology is indistinguishable from magic" kind of thing :-)



---

archive/issue_comments_455811.json:
```json
{
    "body": "<div id=\"comment:127\" align=\"right\">comment:127</div>\n\nThis ticket does no [GitHub](../wiki/GitHub) Actions testing. This is all introduced in #29087.",
    "created_at": "2020-03-20T19:12:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455811",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:127" align="right">comment:127</div>

This ticket does no [GitHub](../wiki/GitHub) Actions testing. This is all introduced in #29087.



---

archive/issue_comments_455812.json:
```json
{
    "body": "<div id=\"comment:128\" align=\"right\">comment:128</div>\n\nhow does one get the data I linked in [comment:126](#comment%3A126) then?",
    "created_at": "2020-03-20T19:26:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455812",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:128" align="right">comment:128</div>

how does one get the data I linked in [comment:126](#comment%3A126) then?



---

archive/issue_comments_455813.json:
```json
{
    "body": "<div id=\"comment:129\" align=\"right\">comment:129</div>\n\nBy merging #29087 and pushing the branch to a [GitHub](../wiki/GitHub) repository.",
    "created_at": "2020-03-20T19:29:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455813",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:129" align="right">comment:129</div>

By merging #29087 and pushing the branch to a [GitHub](../wiki/GitHub) repository.



---

archive/issue_comments_455814.json:
```json
{
    "body": "<div id=\"comment:130\" align=\"right\">comment:130</div>\n\nIf the [GitHub](../wiki/GitHub) Actions interface is overwhelming, just download the \"Artifacts\". They are tar.gz files of build logs.",
    "created_at": "2020-03-20T19:30:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455814",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:130" align="right">comment:130</div>

If the [GitHub](../wiki/GitHub) Actions interface is overwhelming, just download the "Artifacts". They are tar.gz files of build logs.



---

archive/issue_comments_455815.json:
```json
{
    "body": "<div id=\"comment:131\" align=\"right\">comment:131</div>\n\nReplying to [@mkoeppe](#comment%3A129):\n> By merging #29087 and pushing the branch to a [GitHub](../wiki/GitHub) repository.\n\nyes,but that's  how one triggers this - I'm asking rather about how stuff works, inside. Locally and then somehow pushing the logs to [GitHub](../wiki/GitHub)?",
    "created_at": "2020-03-20T19:35:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455815",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:131" align="right">comment:131</div>

Replying to [@mkoeppe](#comment%3A129):
> By merging #29087 and pushing the branch to a [GitHub](../wiki/GitHub) repository.

yes,but that's  how one triggers this - I'm asking rather about how stuff works, inside. Locally and then somehow pushing the logs to [GitHub](../wiki/GitHub)?



---

archive/issue_comments_455816.json:
```json
{
    "body": "<div id=\"comment:132\" align=\"right\">comment:132</div>\n\nI don't push logs to [GitHub](../wiki/GitHub). \n\n#29087 adds `.github/workflows/tox.yml` (https://github.com/sagemath/sagetrac-mirror/blob/576a18834a16ff05cd6894172a55e86bcc95d407/.github/workflows/tox.yml&id2=be1e22c441d9332fd0bf4a3066e1964deddaf8c7) which gets run on every commit pushed to [GitHub](../wiki/GitHub) and on every pull request. \n\nThe job `tox-local-homebrew-macos` defined in that file provisions a macOS host, checks out the branch and runs `tox -e local-homebrew-macos-standard` there. Then it packages up logs and makes them available as an artifact.",
    "created_at": "2020-03-20T19:42:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455816",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:132" align="right">comment:132</div>

I don't push logs to [GitHub](../wiki/GitHub). 

#29087 adds `.github/workflows/tox.yml` (https://github.com/sagemath/sagetrac-mirror/blob/576a18834a16ff05cd6894172a55e86bcc95d407/.github/workflows/tox.yml&id2=be1e22c441d9332fd0bf4a3066e1964deddaf8c7) which gets run on every commit pushed to [GitHub](../wiki/GitHub) and on every pull request. 

The job `tox-local-homebrew-macos` defined in that file provisions a macOS host, checks out the branch and runs `tox -e local-homebrew-macos-standard` there. Then it packages up logs and makes them available as an artifact.



---

archive/issue_comments_455817.json:
```json
{
    "body": "<div id=\"comment:133\" align=\"right\">comment:133</div>\n\nand where is that MacOS host getting provisioned?",
    "created_at": "2020-03-20T19:52:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455817",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:133" align="right">comment:133</div>

and where is that MacOS host getting provisioned?



---

archive/issue_comments_455818.json:
```json
{
    "body": "<div id=\"comment:134\" align=\"right\">comment:134</div>\n\nGitHub takes care of that, I think it's using Azure.",
    "created_at": "2020-03-20T19:54:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455818",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:134" align="right">comment:134</div>

GitHub takes care of that, I think it's using Azure.



---

archive/issue_comments_455819.json:
```json
{
    "body": "<div id=\"comment:135\" align=\"right\">comment:135</div>\n\nReplying to [@jhpalmieri](#comment%3A125):\n> @mwageringel, @dimpase: do you think more needs to be done here, or can we proceed with a positive review? I'm happy with it.\n\nI have not tested this locally, but as you have done that, I am happy with this too.\n\nOne last question though: As far as I can see, readline is not installed into /usr/local. Why do you not run into conflicts with macOS's system \"readline\"/libedit, as in #29000?",
    "created_at": "2020-03-20T22:05:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455819",
    "user": "https://github.com/mwageringel"
}
```

<div id="comment:135" align="right">comment:135</div>

Replying to [@jhpalmieri](#comment%3A125):
> @mwageringel, @dimpase: do you think more needs to be done here, or can we proceed with a positive review? I'm happy with it.

I have not tested this locally, but as you have done that, I am happy with this too.

One last question though: As far as I can see, readline is not installed into /usr/local. Why do you not run into conflicts with macOS's system "readline"/libedit, as in #29000?



---

archive/issue_comments_455820.json:
```json
{
    "body": "<div id=\"comment:136\" align=\"right\">comment:136</div>\n\nThese tests use their own homebrew installation in a prefix `.tox/local-homebrew-macos-standard/homebrew/`, and sets up environment variables using the new script `.homebrew-build-env`. This sets LDFLAGS and CPPFLAGS for the readline installed into `opt` under the homebrew prefix.",
    "created_at": "2020-03-20T22:20:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455820",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:136" align="right">comment:136</div>

These tests use their own homebrew installation in a prefix `.tox/local-homebrew-macos-standard/homebrew/`, and sets up environment variables using the new script `.homebrew-build-env`. This sets LDFLAGS and CPPFLAGS for the readline installed into `opt` under the homebrew prefix.



---

archive/issue_comments_455821.json:
```json
{
    "body": "<div id=\"comment:137\" align=\"right\">comment:137</div>\n\nThe problem in #29000 occured despite passing LDFLAGS and CPPFLAGS to `configure`, so I guess setting these also during `make` would avoid that problem, as a workaround.",
    "created_at": "2020-03-20T22:31:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455821",
    "user": "https://github.com/mwageringel"
}
```

<div id="comment:137" align="right">comment:137</div>

The problem in #29000 occured despite passing LDFLAGS and CPPFLAGS to `configure`, so I guess setting these also during `make` would avoid that problem, as a workaround.



---

archive/issue_comments_455822.json:
```json
{
    "body": "<div id=\"comment:138\" align=\"right\">comment:138</div>\n\nI think the problem description of #29000 needs some more precision.",
    "created_at": "2020-03-20T22:33:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455822",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:138" align="right">comment:138</div>

I think the problem description of #29000 needs some more precision.



---

archive/issue_events_397022.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-03-21T02:10:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29104#event-397022"
}
```



---

archive/issue_events_397023.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-03-21T02:10:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29104#event-397023"
}
```



---

archive/issue_comments_455823.json:
```json
{
    "body": "<div id=\"comment:139\" align=\"right\">comment:139</div>\n\nOK, looks good to me.",
    "created_at": "2020-03-21T02:10:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455823",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:139" align="right">comment:139</div>

OK, looks good to me.



---

archive/issue_comments_455824.json:
```json
{
    "body": "Reviewer: **Dima Pasechnik, John Palmieri**",
    "created_at": "2020-03-21T02:10:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455824",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Dima Pasechnik, John Palmieri**



---

archive/issue_comments_455825.json:
```json
{
    "body": "<div id=\"comment:140\" align=\"right\">comment:140</div>\n\nThanks everyone!",
    "created_at": "2020-03-21T02:16:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455825",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:140" align="right">comment:140</div>

Thanks everyone!



---

archive/issue_comments_455826.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/tox-homebrew](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/tox-homebrew)** to **[`dfce7d4`](https://github.com/sagemath/sagetrac-mirror/commit/dfce7d4b3d771aaaa7b3d198ff2b1e3eeb2120fc)**",
    "created_at": "2020-03-29T00:24:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29104#issuecomment-455826",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/tox-homebrew](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/tox-homebrew)** to **[`dfce7d4`](https://github.com/sagemath/sagetrac-mirror/commit/dfce7d4b3d771aaaa7b3d198ff2b1e3eeb2120fc)**



---

archive/issue_events_397024.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-03-29T00:24:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29104#event-397024"
}
```



---

archive/issue_events_397025.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "1f44f2204ce9c8d001e05e8bf5effcc3ac569db3",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-03-29T00:24:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29104",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29104#event-397025"
}
```
