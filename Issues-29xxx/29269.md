# Issue 29269: Add call to cliquer with custom cliques sizes

archive/issues_029032.json:
```json
{
    "body": "Currently only maximum/maximal cliques can be obtained by calling cliquer functions. With this change custom cliques can be obtained with cliquer.\n\nKeywords: cliquer, graphs\n\nBranch/Commit: e1774f7b7b655503e640448d99d6e01e769df069\n\nReviewer: David Coudert\n\nAuthor: Jakub Jab\u0142o\u0144ski, Jonathan Kliem\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29269\n\n",
    "closed_at": "2020-05-02T21:57:59Z",
    "created_at": "2020-03-02T20:23:38Z",
    "labels": [
        "component: graph theory",
        "trivial"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "Add call to cliquer with custom cliques sizes",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29269",
    "user": "https://github.com/Fightlapa"
}
```
Currently only maximum/maximal cliques can be obtained by calling cliquer functions. With this change custom cliques can be obtained with cliquer.

Keywords: cliquer, graphs

Branch/Commit: e1774f7b7b655503e640448d99d6e01e769df069

Reviewer: David Coudert

Author: Jakub Jabłoński, Jonathan Kliem

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29269





---

archive/issue_comments_410399.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-03T19:16:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410399",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_410400.json:
```json
{
    "body": "<a id='comment:4'></a>Code could be reused, as this is almost copy-paste of another function. But if it will be fine, will do that and push \"clean\" version.",
    "created_at": "2020-03-03T19:18:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410400",
    "user": "https://github.com/Fightlapa"
}
```

<a id='comment:4'></a>Code could be reused, as this is almost copy-paste of another function. But if it will be fine, will do that and push "clean" version.



---

archive/issue_comments_410401.json:
```json
{
    "body": "<a id='comment:5'></a>Welcome to Sagemath.\n\nYou could add tests of corner cases, like small graphs (empty, 1 or 2 vertices), disconnected graphs and graphs with multiple edges.\n\nHave you tested the code on a large graph to see what it supports ?\n\nAlso, you will have to improve the coding style (see https://www.python.org/dev/peps/pep-0008/) and ensure that comments are formatted in 80 columns mode.",
    "created_at": "2020-03-03T23:45:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410401",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:5'></a>Welcome to Sagemath.

You could add tests of corner cases, like small graphs (empty, 1 or 2 vertices), disconnected graphs and graphs with multiple edges.

Have you tested the code on a large graph to see what it supports ?

Also, you will have to improve the coding style (see https://www.python.org/dev/peps/pep-0008/) and ensure that comments are formatted in 80 columns mode.



---

archive/issue_events_074447.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2020-03-03T23:45:31Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29269#event-74447"
}
```



---

archive/issue_comments_410402.json:
```json
{
    "body": "<a id='comment:6'></a>I'm still testing it. I see already one wrong result. I'm investigating it now.",
    "created_at": "2020-03-05T16:05:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410402",
    "user": "https://github.com/Fightlapa"
}
```

<a id='comment:6'></a>I'm still testing it. I see already one wrong result. I'm investigating it now.



---

archive/issue_comments_410403.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-05T17:06:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410403",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_410404.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-03-05T21:34:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410404",
    "user": "https://github.com/Fightlapa"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_410405.json:
```json
{
    "body": "<a id='comment:9'></a>a few comments\n- first line of method `all_cliques`\n\n```diff\n+    Return the vertex sets of *ALL* the complete subgraphs.\n+    Returns the vertex sets of *ALL* the complete subgraphs.\n```\n- add an `INPUT` block with the description of input parameters\n- `if not graph.order():` -> `if not graph:`\n- I don't understand this case `if min_size == 0 and max_size > 0:`. Not documented\n- I suggest to free the graph right after the `sig_off`\n- Could you improve the presentation of the code in `cl.c` and add some documentation. \n\nI don't know if it is possible, but it would be much better if we could turn this method into an iterator. If the number of cliques to report is large, we may have a segfault. Not clear if the design of cliquer allows that.",
    "created_at": "2020-03-06T08:18:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410405",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:9'></a>a few comments
- first line of method `all_cliques`

```diff
+    Return the vertex sets of *ALL* the complete subgraphs.
+    Returns the vertex sets of *ALL* the complete subgraphs.
```
- add an `INPUT` block with the description of input parameters
- `if not graph.order():` -> `if not graph:`
- I don't understand this case `if min_size == 0 and max_size > 0:`. Not documented
- I suggest to free the graph right after the `sig_off`
- Could you improve the presentation of the code in `cl.c` and add some documentation. 

I don't know if it is possible, but it would be much better if we could turn this method into an iterator. If the number of cliques to report is large, we may have a segfault. Not clear if the design of cliquer allows that.



---

archive/issue_comments_410406.json:
```json
{
    "body": "<a id='comment:10'></a>According the documentation of cliquer (https://users.aalto.fi/~pat/cliquer.html), it seems possible to avoid storing all cliques (re-entrant methods). So it seems possible to make an iterator, but I don't know how complex it is to do so.",
    "created_at": "2020-03-07T10:22:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410406",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:10'></a>According the documentation of cliquer (https://users.aalto.fi/~pat/cliquer.html), it seems possible to avoid storing all cliques (re-entrant methods). So it seems possible to make an iterator, but I don't know how complex it is to do so.



---

archive/issue_comments_410407.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-07T11:17:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410407",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_410408.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-07T11:19:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410408",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_410409.json:
```json
{
    "body": "<a id='comment:13'></a>Sorry for those messy commits. Anyway, it's my first time with Cython, I'm not also that familiar with c++. I think I'm not capable of making iterator out of it.",
    "created_at": "2020-03-07T11:24:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410409",
    "user": "https://github.com/Fightlapa"
}
```

<a id='comment:13'></a>Sorry for those messy commits. Anyway, it's my first time with Cython, I'm not also that familiar with c++. I think I'm not capable of making iterator out of it.



---

archive/issue_comments_410410.json:
```json
{
    "body": "<a id='comment:14'></a>- The documentation is unclear on whether you search for cliques with number of vertices or edges between min and max, or if you consider the weight of the cliques. Please clarify\n- if the default value of `min_size` is 0, it must be set if the input, that is `def all_cliques(graph, min_size=0, max_size=0):`\n- alignement (and text) of input parameters\n\n```diff\n-    - ``min_size`` -- Search for cliques with weight at least N. If N=0,\n-                      searches for maximum weight clique (default).\n+    - ``min_size`` -- integer (default: 0); minimum size of the cliques to report.\n+      When set to 0 (default), searched for a maximum weight clique.\n```\n- add doctests for the default case of the parameters\n- don't sorted cliques at the end\n- also, could change the branch name to something like `public/graphs/29269_all_cliques` (i.e., use in a new branch). When the branch is in `public/`, I can push review commit, which is usually faster for me.\n\n- concerning the iterator, for the moment you can at least make method `all_cliques` yield cliques instead of returning a full list. Then we will have to find a way to make method `sage_find_all_clique` re-entrant, and so avoid to store all cliques.",
    "created_at": "2020-03-08T13:45:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410410",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:14'></a>- The documentation is unclear on whether you search for cliques with number of vertices or edges between min and max, or if you consider the weight of the cliques. Please clarify
- if the default value of `min_size` is 0, it must be set if the input, that is `def all_cliques(graph, min_size=0, max_size=0):`
- alignement (and text) of input parameters

```diff
-    - ``min_size`` -- Search for cliques with weight at least N. If N=0,
-                      searches for maximum weight clique (default).
+    - ``min_size`` -- integer (default: 0); minimum size of the cliques to report.
+      When set to 0 (default), searched for a maximum weight clique.
```
- add doctests for the default case of the parameters
- don't sorted cliques at the end
- also, could change the branch name to something like `public/graphs/29269_all_cliques` (i.e., use in a new branch). When the branch is in `public/`, I can push review commit, which is usually faster for me.

- concerning the iterator, for the moment you can at least make method `all_cliques` yield cliques instead of returning a full list. Then we will have to find a way to make method `sage_find_all_clique` re-entrant, and so avoid to store all cliques.



---

archive/issue_comments_410411.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-10T12:00:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410411",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_410412.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-10T14:59:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410412",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_410413.json:
```json
{
    "body": "<a id='comment:18'></a>I rebased the ticket on last beta and did a few review edits. Please check them.\n\nI remains to expose this iterator in `graph.py`.",
    "created_at": "2020-03-10T15:00:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410413",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:18'></a>I rebased the ticket on last beta and did a few review edits. Please check them.

I remains to expose this iterator in `graph.py`.



---

archive/issue_comments_410414.json:
```json
{
    "body": "<a id='comment:19'></a>Okay. Does it mean this change is fine for now?",
    "created_at": "2020-03-10T15:27:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410414",
    "user": "https://github.com/Fightlapa"
}
```

<a id='comment:19'></a>Okay. Does it mean this change is fine for now?



---

archive/issue_comments_410415.json:
```json
{
    "body": "<a id='comment:20'></a>You still have to expose the method in graph.py (check at the bottom of the file to see how. And you can also do further improvements if you have some in mind. You can also investigate the re-entrant capability of cliquer, at least to understand how to use it and discuss what we can do with it.",
    "created_at": "2020-03-10T15:37:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410415",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:20'></a>You still have to expose the method in graph.py (check at the bottom of the file to see how. And you can also do further improvements if you have some in mind. You can also investigate the re-entrant capability of cliquer, at least to understand how to use it and discuss what we can do with it.



---

archive/issue_comments_410416.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-10T17:59:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410416",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_410417.json:
```json
{
    "body": "<a id='comment:22'></a>In terms of making it re-entrant my first idea is (not ideal):\nMaking use of global variables, which are currently reseted per call.\nIt would require to save last graph pointer on which was call made, other parameters and saving counter.\nThen each call with same graph and other parameters would just progress to next clique and return only one, while increasing counter.\n\nDrawbacks - only 1 instance of iteration is possible, nested call on same graph with same parameters will use same counter and won't be detected as something different. Generally, it's bad solution, but I'm not familiar with C and don't know the possibilities.\n\nOr maybe I'm wrong about how the code is executed.",
    "created_at": "2020-03-10T18:07:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410417",
    "user": "https://github.com/Fightlapa"
}
```

<a id='comment:22'></a>In terms of making it re-entrant my first idea is (not ideal):
Making use of global variables, which are currently reseted per call.
It would require to save last graph pointer on which was call made, other parameters and saving counter.
Then each call with same graph and other parameters would just progress to next clique and return only one, while increasing counter.

Drawbacks - only 1 instance of iteration is possible, nested call on same graph with same parameters will use same counter and won't be detected as something different. Generally, it's bad solution, but I'm not familiar with C and don't know the possibilities.

Or maybe I'm wrong about how the code is executed.



---

archive/issue_comments_410418.json:
```json
{
    "body": "<a id='comment:23'></a>I don't know either how to do it and don't have time now to investigate. It's mentioned in a todo block.\n\nPlease check the (small) error reported by the patchbot.",
    "created_at": "2020-03-11T15:01:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410418",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:23'></a>I don't know either how to do it and don't have time now to investigate. It's mentioned in a todo block.

Please check the (small) error reported by the patchbot.



---

archive/issue_comments_410419.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-12T16:47:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410419",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_410420.json:
```json
{
    "body": "<a id='comment:25'></a>For reentering something as this might be useful:\n\nInstead of the loop\n\n```\nfor (j = 0; j < sage_clique_count; j++)\n```\nyou can pass a pointer to to `j` to the function\n\n```\nint sage_find_all_clique(graph_t *g, int **list, int min_size, int max_size, int* j)\n```\nOn the first call `j` can be initiated to `-1` and therefore the function knows that it should initialize. Then on each further call it can just obtain partial list for `j` and return its length. If the length is `-1` this means that the iterator is exhausted.\n\nOne more thing. It would be nice if indices for counting are consistent. A few lines before you use `i` for the exact same thing. It makes it a bit easier to read if it's always `sage_clique_list[j]` or `sage_clique_list[i]`.",
    "created_at": "2020-03-25T08:36:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410420",
    "user": "https://github.com/kliem"
}
```

<a id='comment:25'></a>For reentering something as this might be useful:

Instead of the loop

```
for (j = 0; j < sage_clique_count; j++)
```
you can pass a pointer to to `j` to the function

```
int sage_find_all_clique(graph_t *g, int **list, int min_size, int max_size, int* j)
```
On the first call `j` can be initiated to `-1` and therefore the function knows that it should initialize. Then on each further call it can just obtain partial list for `j` and return its length. If the length is `-1` this means that the iterator is exhausted.

One more thing. It would be nice if indices for counting are consistent. A few lines before you use `i` for the exact same thing. It makes it a bit easier to read if it's always `sage_clique_list[j]` or `sage_clique_list[i]`.



---

archive/issue_comments_410421.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2020-03-25T08:36:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410421",
    "user": "https://github.com/kliem"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_410422.json:
```json
{
    "body": "<a id='comment:26'></a>Thank you for the explanation.\n\nWe will certainly have to build an object to encapsulate this and so make sure that we properly release memory when the iterator is no longer use.",
    "created_at": "2020-03-25T09:48:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410422",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:26'></a>Thank you for the explanation.

We will certainly have to build an object to encapsulate this and so make sure that we properly release memory when the iterator is no longer use.



---

archive/issue_comments_410423.json:
```json
{
    "body": "<a id='comment:27'></a>I see the problem.\n\nI believe the class `MemoryAllocator` (`from sage.ext.memory_allocator cimport MemoryAllocator`) should be used here. It should definitely be used to allocate `list_of_vertices`, because there is no guarantee that we ever reach `sig_free(list_of_vertices)`. If we revisit `sage_find_all_clique` for each clique, we can even allocate `list_of_vertices` right from the start, as it only needs to fit one clique.\n\nInstead of calling `set_free`, we can also let `MemoryAllocator` take care of it (but thats somewhat a hack). We probably need a preparation function as well. This preparation functions sets up `sage_clique_list` and takes care that for each clique `s` the pointer `&s[-1]` is stored in `MemoryAllocator`.\n\nThen when the iterator is destroyed then so is the `MemoryAllocator`, which takes care of all the rest.\n\nAm I making any sense?\n\nHere are some code snippets to explain what I mean:\n\nIn `all_cliques`:\n\n```\ncdef void** clique_memory\ncdef MemoryAllocator mem = MemoryAllocator()\ncdef int* list_of_vertices = <int*> mem.alloc_array(max_size, sizeof(int))\ncdef int num_cliques = initialize_sage_find_all_clique(g, &clique_memory, min_size, max_size)\nmem.resize(num_cliques + 1)\nfor i in range(num_cliques):\n    mem.pointers[mem.n] = clique_memory[i]\n    mem.n += 1\nsig_free(clique_memory)\n```\n\nNow all the memory is stored in `mem` and will be free automatically, if the iterator is interrupted.\n\nThe function `initialize_sage_find_all_clique` could look something like this:\n\n```diff\n+int initialize_sage_find_all_clique(graph_t *g,void **list, int min_size, int max_size){\n+  sage_reset_global_variables();\n+  quiet++;\n+  maximal = FALSE;\n+  int i, j, l;\n+\n+  clique_options *opts = sage_init_clique_opt();\n+  clique_unweighted_find_all(g, min_size, max_size, maximal, opts);\n+  free(opts);\n+\n+  int size = 0;\n+  *list = malloc(sizeof(void *) * sage_clique_count);\n+  for (i = 0; i < sage_clique_count; i++) {\n+    list[i] = &(sage_clique_list[i][-1]);\n+  }\n+  return sage_clique_count",
    "created_at": "2020-03-25T10:59:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410423",
    "user": "https://github.com/kliem"
}
```

<a id='comment:27'></a>I see the problem.

I believe the class `MemoryAllocator` (`from sage.ext.memory_allocator cimport MemoryAllocator`) should be used here. It should definitely be used to allocate `list_of_vertices`, because there is no guarantee that we ever reach `sig_free(list_of_vertices)`. If we revisit `sage_find_all_clique` for each clique, we can even allocate `list_of_vertices` right from the start, as it only needs to fit one clique.

Instead of calling `set_free`, we can also let `MemoryAllocator` take care of it (but thats somewhat a hack). We probably need a preparation function as well. This preparation functions sets up `sage_clique_list` and takes care that for each clique `s` the pointer `&s[-1]` is stored in `MemoryAllocator`.

Then when the iterator is destroyed then so is the `MemoryAllocator`, which takes care of all the rest.

Am I making any sense?

Here are some code snippets to explain what I mean:

In `all_cliques`:

```
cdef void** clique_memory
cdef MemoryAllocator mem = MemoryAllocator()
cdef int* list_of_vertices = <int*> mem.alloc_array(max_size, sizeof(int))
cdef int num_cliques = initialize_sage_find_all_clique(g, &clique_memory, min_size, max_size)
mem.resize(num_cliques + 1)
for i in range(num_cliques):
    mem.pointers[mem.n] = clique_memory[i]
    mem.n += 1
sig_free(clique_memory)
```

Now all the memory is stored in `mem` and will be free automatically, if the iterator is interrupted.

The function `initialize_sage_find_all_clique` could look something like this:

```diff
+int initialize_sage_find_all_clique(graph_t *g,void **list, int min_size, int max_size){
+  sage_reset_global_variables();
+  quiet++;
+  maximal = FALSE;
+  int i, j, l;
+
+  clique_options *opts = sage_init_clique_opt();
+  clique_unweighted_find_all(g, min_size, max_size, maximal, opts);
+  free(opts);
+
+  int size = 0;
+  *list = malloc(sizeof(void *) * sage_clique_count);
+  for (i = 0; i < sage_clique_count; i++) {
+    list[i] = &(sage_clique_list[i][-1]);
+  }
+  return sage_clique_count



---

archive/issue_comments_410424.json:
```json
{
    "body": "<a id='comment:28'></a>Yes, this is the idea, and all that inside a small class with a constructor, a destructor and a method `__iter__`.\n\nMy only question is whether we can have several calls to cliquer at the same time, that is if we can have to instances of the proposed iterator at the same time.",
    "created_at": "2020-03-25T11:57:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410424",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:28'></a>Yes, this is the idea, and all that inside a small class with a constructor, a destructor and a method `__iter__`.

My only question is whether we can have several calls to cliquer at the same time, that is if we can have to instances of the proposed iterator at the same time.



---

archive/issue_comments_410425.json:
```json
{
    "body": "<a id='comment:29'></a>I don't think that is a problem to have multiple instances arround. But we would have to rewrite parts of `cliquer/cl.c`.\n\nI like the idea of a small class better. Then the `__dealloc__` method could call the corresponding c-functions that take care of the destruction and we wouldn't need such a hack anymore.",
    "created_at": "2020-03-25T14:24:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410425",
    "user": "https://github.com/kliem"
}
```

<a id='comment:29'></a>I don't think that is a problem to have multiple instances arround. But we would have to rewrite parts of `cliquer/cl.c`.

I like the idea of a small class better. Then the `__dealloc__` method could call the corresponding c-functions that take care of the destruction and we wouldn't need such a hack anymore.



---

archive/issue_comments_410426.json:
```json
{
    "body": "<a id='comment:30'></a>1. now we must decide if we implement this in this ticket, or if we first finalize this ticket, and then open a new ticket, based on this one, to implement the proposed changes. I have no clear opinion on that.\n\n2. I noticed that the current branch contains some modifications of `graph.py` that are not related to this ticket. In general, we should not do that in order to avoid possible conflicts with other tickets.",
    "created_at": "2020-03-25T18:15:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410426",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:30'></a>1. now we must decide if we implement this in this ticket, or if we first finalize this ticket, and then open a new ticket, based on this one, to implement the proposed changes. I have no clear opinion on that.

2. I noticed that the current branch contains some modifications of `graph.py` that are not related to this ticket. In general, we should not do that in order to avoid possible conflicts with other tickets.



---

archive/issue_comments_410427.json:
```json
{
    "body": "<a id='comment:31'></a>Replying to [comment:30 dcoudert]:\n> 1. now we must decide if we implement this in this ticket, or if we first finalize this ticket, and then open a new ticket, based on this one, to implement the proposed changes. I have no clear opinion on that.\n\n\nI would vote for leaving this for another ticket. It looks to me like all the functions need some work. E.g. there are `sig_on`/`sig_off` statements everywhere in `cliquer.pyx` and there is no care taken that the deallocation is done in case of interrupt. I believe this should be done in a `try`/`finally` matter, such that the deallocation is done whether not the code is interrupted. Maybe I'm also misunderstanding things.\n\nSo if we put `list_of_vertices` in a `MemoryAllocator` so that `list_of_vertices` is freed automatically if the iterated is disposed of, I would be fine with it.\n> \n> 2. I noticed that the current branch contains some modifications of `graph.py` that are not related to this ticket. In general, we should not do that in order to avoid possible conflicts with other tickets.\n  \n>",
    "created_at": "2020-03-26T09:44:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410427",
    "user": "https://github.com/kliem"
}
```

<a id='comment:31'></a>Replying to [comment:30 dcoudert]:
> 1. now we must decide if we implement this in this ticket, or if we first finalize this ticket, and then open a new ticket, based on this one, to implement the proposed changes. I have no clear opinion on that.


I would vote for leaving this for another ticket. It looks to me like all the functions need some work. E.g. there are `sig_on`/`sig_off` statements everywhere in `cliquer.pyx` and there is no care taken that the deallocation is done in case of interrupt. I believe this should be done in a `try`/`finally` matter, such that the deallocation is done whether not the code is interrupted. Maybe I'm also misunderstanding things.

So if we put `list_of_vertices` in a `MemoryAllocator` so that `list_of_vertices` is freed automatically if the iterated is disposed of, I would be fine with it.
> 
> 2. I noticed that the current branch contains some modifications of `graph.py` that are not related to this ticket. In general, we should not do that in order to avoid possible conflicts with other tickets.
  
>



---

archive/issue_comments_410428.json:
```json
{
    "body": "<a id='comment:32'></a>In the current implementation, `list_of_vertices` is allocated in `cl.c`. Therefore, I don't see how to put it inside a `MemoryAllocator`.\nHowever, we can do something like that:\n\n```diff\n-    for i in range(size):\n-        if list_of_vertices[i] != -1:\n-            c.append(int_to_vertex[list_of_vertices[i]])\n-        else:\n-            yield c\n-            c = []\n-\n+    try:\n+        for i in range(size):\n+            if list_of_vertices[i] != -1:\n+                c.append(int_to_vertex[list_of_vertices[i]])\n+            else:\n+                yield c\n+                c = []\n+    finally:\n+        sig_free(list_of_vertices)\n```",
    "created_at": "2020-03-26T10:29:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410428",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:32'></a>In the current implementation, `list_of_vertices` is allocated in `cl.c`. Therefore, I don't see how to put it inside a `MemoryAllocator`.
However, we can do something like that:

```diff
-    for i in range(size):
-        if list_of_vertices[i] != -1:
-            c.append(int_to_vertex[list_of_vertices[i]])
-        else:
-            yield c
-            c = []
-
+    try:
+        for i in range(size):
+            if list_of_vertices[i] != -1:
+                c.append(int_to_vertex[list_of_vertices[i]])
+            else:
+                yield c
+                c = []
+    finally:
+        sig_free(list_of_vertices)
```



---

archive/issue_comments_410429.json:
```json
{
    "body": "<a id='comment:33'></a>We do the following right after `graph_free(g)`:\n\n```\ncdef MemoryAllocator mem = MemoryAllocator()\nmem.resize(mem.n + 1)\nmem.pointers[mem.n] = list_of_vertices\nmem.n += 1\n```\nThis should do the job. It's not a nice solutions, but it should at least avoid a memory leak in most use cases. Still a keyboard interrupt most likely creates a memory leak, but I think that is a problem for all of those functions.",
    "created_at": "2020-03-26T10:39:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410429",
    "user": "https://github.com/kliem"
}
```

<a id='comment:33'></a>We do the following right after `graph_free(g)`:

```
cdef MemoryAllocator mem = MemoryAllocator()
mem.resize(mem.n + 1)
mem.pointers[mem.n] = list_of_vertices
mem.n += 1
```
This should do the job. It's not a nice solutions, but it should at least avoid a memory leak in most use cases. Still a keyboard interrupt most likely creates a memory leak, but I think that is a problem for all of those functions.



---

archive/issue_comments_410430.json:
```json
{
    "body": "<a id='comment:34'></a>Are you sure that the memory allocator destructor is effectively called in case of keyboard interrupt ? At least I tried the solution I proposed and the finally statement is always called.",
    "created_at": "2020-03-26T10:44:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410430",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:34'></a>Are you sure that the memory allocator destructor is effectively called in case of keyboard interrupt ? At least I tried the solution I proposed and the finally statement is always called.



---

archive/issue_comments_410431.json:
```json
{
    "body": "<a id='comment:35'></a>I just tried your solutions and it works just fine and is much simpler anyway:\n\n```\nsage: cython('''\n....: def foo():\n....:     try:\n....:         while True: yield 1\n....:     finally:\n....:         print('hello')\n....: ''')\nsage: it = foo()\nsage: next(it)\n1\nsage: del it\nhello\n```\n\nSo I propose changing the code like this:\n\n```\n    try:\n        try:\n            sig_on()\n            size = sage_find_all_clique(g, &list_of_vertices, min_size, max_size)\n            sig_off()\n        finally:\n            graph_free(g)\n        cdef list c = []\n        for i in range(size):\n            if list_of_vertices[i] != -1:\n                c.append(int_to_vertex[list_of_vertices[i]])\n            else:\n                yield c\n                c = []\n    finally:\n        if list_of_vertices:  # maybe computation was interrupted before allocating `list_of_vertices`\n            sig_free(list_of_vertices)\n```\n\nWith a little more effort we could even ensure that `sage_clique_list` is freed even if the calculation is interrupted.",
    "created_at": "2020-03-26T10:50:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410431",
    "user": "https://github.com/kliem"
}
```

<a id='comment:35'></a>I just tried your solutions and it works just fine and is much simpler anyway:

```
sage: cython('''
....: def foo():
....:     try:
....:         while True: yield 1
....:     finally:
....:         print('hello')
....: ''')
sage: it = foo()
sage: next(it)
1
sage: del it
hello
```

So I propose changing the code like this:

```
    try:
        try:
            sig_on()
            size = sage_find_all_clique(g, &list_of_vertices, min_size, max_size)
            sig_off()
        finally:
            graph_free(g)
        cdef list c = []
        for i in range(size):
            if list_of_vertices[i] != -1:
                c.append(int_to_vertex[list_of_vertices[i]])
            else:
                yield c
                c = []
    finally:
        if list_of_vertices:  # maybe computation was interrupted before allocating `list_of_vertices`
            sig_free(list_of_vertices)
```

With a little more effort we could even ensure that `sage_clique_list` is freed even if the calculation is interrupted.



---

archive/issue_comments_410432.json:
```json
{
    "body": "<a id='comment:36'></a>+1 for propose change. The branch is public, so we can implement it, except if gh-Fightlapa is willing to do it.\n\nConcerning `sage_clique_list`, it's much more tricky as it is in C, not C++. Some solutions are proposed here\nhttps://stackoverflow.com/questions/10586003/try-catch-statements-in-c. But we should wait for another ticket, and try to turn the code to c++ to enable the use of proper try-catch-finally statements.",
    "created_at": "2020-03-26T11:05:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410432",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:36'></a>+1 for propose change. The branch is public, so we can implement it, except if gh-Fightlapa is willing to do it.

Concerning `sage_clique_list`, it's much more tricky as it is in C, not C++. Some solutions are proposed here
https://stackoverflow.com/questions/10586003/try-catch-statements-in-c. But we should wait for another ticket, and try to turn the code to c++ to enable the use of proper try-catch-finally statements.



---

archive/issue_comments_410433.json:
```json
{
    "body": "<a id='comment:37'></a>Ok, I can do it. According to your suggestion, I would get rid of the last commit that fixed some pyflakes issues in graphes.py that have nothing to do with the current ticket.\n\nI was thinking about a second function that deallocates `sage_clique_list`, but that should probably be left to a second ticket.\n\n+1 for going to C++ in another ticket. As you already mentioned before, it would be good to have more than one `sage_clique_list` around and that sounds very much like a class.",
    "created_at": "2020-03-26T11:17:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410433",
    "user": "https://github.com/kliem"
}
```

<a id='comment:37'></a>Ok, I can do it. According to your suggestion, I would get rid of the last commit that fixed some pyflakes issues in graphes.py that have nothing to do with the current ticket.

I was thinking about a second function that deallocates `sage_clique_list`, but that should probably be left to a second ticket.

+1 for going to C++ in another ticket. As you already mentioned before, it would be good to have more than one `sage_clique_list` around and that sounds very much like a class.



---

archive/issue_comments_410434.json:
```json
{
    "body": "<a id='comment:38'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-03-26T11:41:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410434",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:38'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_410435.json:
```json
{
    "body": "<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-26T11:54:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410435",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_410436.json:
```json
{
    "body": "<a id='comment:40'></a>Done.",
    "created_at": "2020-03-26T11:56:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410436",
    "user": "https://github.com/kliem"
}
```

<a id='comment:40'></a>Done.



---

archive/issue_comments_410437.json:
```json
{
    "body": "<a id='comment:41'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-26T12:09:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410437",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:41'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_410438.json:
```json
{
    "body": "<a id='comment:42'></a>a small review commit to avoid using variable `size` uninitialized.\n\nIf OK for you, you can set this ticket to positive review on my behalf. Don't forget to add your name as co-author.",
    "created_at": "2020-03-26T12:11:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410438",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:42'></a>a small review commit to avoid using variable `size` uninitialized.

If OK for you, you can set this ticket to positive review on my behalf. Don't forget to add your name as co-author.



---

archive/issue_comments_410439.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-03-26T12:13:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410439",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_410440.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2020-04-16T22:35:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410440",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_410441.json:
```json
{
    "body": "<a id='comment:44'></a>The \"Dependencies\" field must be a list of trac tickets",
    "created_at": "2020-04-16T22:35:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410441",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:44'></a>The "Dependencies" field must be a list of trac tickets



---

archive/issue_comments_410442.json:
```json
{
    "body": "<a id='comment:45'></a>Sorry, missed that. That's obsolete as cliquer is a standard package.",
    "created_at": "2020-04-17T05:59:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410442",
    "user": "https://github.com/kliem"
}
```

<a id='comment:45'></a>Sorry, missed that. That's obsolete as cliquer is a standard package.



---

archive/issue_comments_410443.json:
```json
{
    "body": "Changing status from needs_info to positive_review.",
    "created_at": "2020-04-17T05:59:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410443",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_info to positive_review.



---

archive/issue_comments_410444.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-04-18T08:41:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410444",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_410445.json:
```json
{
    "body": "<a id='comment:46'></a>Merge conflict, please fix",
    "created_at": "2020-04-18T08:41:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410445",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:46'></a>Merge conflict, please fix



---

archive/issue_comments_410446.json:
```json
{
    "body": "<a id='comment:47'></a>this might be due to #29518. So let's wait for next release to see what's the conflict.",
    "created_at": "2020-04-18T09:55:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410446",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:47'></a>this might be due to #29518. So let's wait for next release to see what's the conflict.



---

archive/issue_comments_410447.json:
```json
{
    "body": "<a id='comment:49'></a>Replying to [comment:47 dcoudert]:\n> this might be due to #29518. So let's wait for next release to see what's the conflict.\n\n\nThat's exactly the problem. Doesn't make sense to add a function to a lazy import that will be removed soon. And it should be a method of a graph, this is where it belongs.",
    "created_at": "2020-04-25T20:44:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410447",
    "user": "https://github.com/kliem"
}
```

<a id='comment:49'></a>Replying to [comment:47 dcoudert]:
> this might be due to #29518. So let's wait for next release to see what's the conflict.


That's exactly the problem. Doesn't make sense to add a function to a lazy import that will be removed soon. And it should be a method of a graph, this is where it belongs.



---

archive/issue_comments_410448.json:
```json
{
    "body": "<a id='comment:50'></a>New commits:",
    "created_at": "2020-04-25T20:44:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410448",
    "user": "https://github.com/kliem"
}
```

<a id='comment:50'></a>New commits:



---

archive/issue_comments_410449.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-04-25T20:47:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410449",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_410450.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-04-26T12:56:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410450",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_410451.json:
```json
{
    "body": "<a id='comment:52'></a>LGTM.",
    "created_at": "2020-04-26T12:56:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410451",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:52'></a>LGTM.



---

archive/issue_comments_410452.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-05-02T21:57:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29269#issuecomment-410452",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_074448.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-05-02T21:57:59Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29269",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29269#event-74448"
}
```
