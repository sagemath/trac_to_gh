# Issue 29269: Add call to cliquer with custom cliques sizes

archive/issues_029032.json:
```json
{
    "assignees": [],
    "body": "Currently only maximum/maximal cliques can be obtained by calling cliquer functions. With this change custom cliques can be obtained with cliquer.\n\nKeywords: **cliquer, graphs**\n\nBranch/Commit: **[e1774f7](https://github.com/sagemath/sagetrac-mirror/commit/e1774f7b7b655503e640448d99d6e01e769df069)**\n\nReviewer: **David Coudert**\n\nAuthor: **Jakub Jab\u0142o\u0144ski, Jonathan Kliem**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29269_\n\n",
    "closed_at": "2020-05-02T21:57:59Z",
    "created_at": "2020-03-02T20:23:38Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p5%20%E2%80%93%20trivial",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Add call to cliquer with custom cliques sizes",
    "type": "issue",
    "updated_at": "2020-05-02T21:57:59Z",
    "url": "https://github.com/sagemath/sage/issues/29269",
    "user": "https://github.com/Fightlapa"
}
```
Currently only maximum/maximal cliques can be obtained by calling cliquer functions. With this change custom cliques can be obtained with cliquer.

Keywords: **cliquer, graphs**

Branch/Commit: **[e1774f7](https://github.com/sagemath/sagetrac-mirror/commit/e1774f7b7b655503e640448d99d6e01e769df069)**

Reviewer: **David Coudert**

Author: **Jakub Jabłoński, Jonathan Kliem**

_Issue created by migration from https://trac.sagemath.org/ticket/29269_





---

archive/issue_events_384151.json:
```json
{
    "actor": "https://github.com/Fightlapa",
    "created_at": "2020-03-02T20:23:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29269#event-384151"
}
```



---

archive/issue_events_384152.json:
```json
{
    "actor": "https://github.com/Fightlapa",
    "created_at": "2020-03-02T20:23:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "component: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29269#event-384152"
}
```



---

archive/issue_events_384153.json:
```json
{
    "actor": "https://github.com/Fightlapa",
    "created_at": "2020-03-02T20:23:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "label": "https://github.com/sagemath/sage/labels/p5%20%E2%80%93%20trivial",
    "label_color": "fff9e5",
    "label_name": "p5 \u2013 trivial",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29269#event-384153"
}
```



---

archive/issue_comments_461904.json:
```json
{
    "body": "Changed author from **Fightlapa** to **Jakub Jab\u0142o\u0144ski**",
    "created_at": "2020-03-02T20:31:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461904",
    "user": "https://github.com/Fightlapa"
}
```

Changed author from **Fightlapa** to **Jakub Jabłoński**



---

archive/issue_comments_461905.json:
```json
{
    "body": "Changed branch from **[cliquer_custom_size](https://github.com/sagemath/sagetrac-mirror/tree/cliquer_custom_size)** to **[public/cliquer_custom_size](https://github.com/sagemath/sagetrac-mirror/tree/public/cliquer_custom_size)**",
    "created_at": "2020-03-03T19:16:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461905",
    "user": "https://github.com/Fightlapa"
}
```

Changed branch from **[cliquer_custom_size](https://github.com/sagemath/sagetrac-mirror/tree/cliquer_custom_size)** to **[public/cliquer_custom_size](https://github.com/sagemath/sagetrac-mirror/tree/public/cliquer_custom_size)**



---

archive/issue_comments_461906.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f085c771a0a98a2d3aca9e046c29eaac6611c5fa\">f085c77</a></td><td><code>Added new function to get induced cliques of custom size in graph</code></td></tr></table>\n",
    "created_at": "2020-03-03T19:16:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461906",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:3'>Comment 3:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f085c771a0a98a2d3aca9e046c29eaac6611c5fa">f085c77</a></td><td><code>Added new function to get induced cliques of custom size in graph</code></td></tr></table>




---

archive/issue_comments_461907.json:
```json
{
    "body": "Commit: **[f085c77](https://github.com/sagemath/sagetrac-mirror/commit/f085c771a0a98a2d3aca9e046c29eaac6611c5fa)**",
    "created_at": "2020-03-03T19:16:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461907",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[f085c77](https://github.com/sagemath/sagetrac-mirror/commit/f085c771a0a98a2d3aca9e046c29eaac6611c5fa)**



---

archive/issue_comments_461908.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nCode could be reused, as this is almost copy-paste of another function. But if it will be fine, will do that and push \"clean\" version.",
    "created_at": "2020-03-03T19:18:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461908",
    "user": "https://github.com/Fightlapa"
}
```

<a id='comment:4'>Comment 4:</a>
Code could be reused, as this is almost copy-paste of another function. But if it will be fine, will do that and push "clean" version.



---

archive/issue_comments_461909.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nWelcome to Sagemath.\n\nYou could add tests of corner cases, like small graphs (empty, 1 or 2 vertices), disconnected graphs and graphs with multiple edges.\n\nHave you tested the code on a large graph to see what it supports ?\n\nAlso, you will have to improve the coding style (see https://www.python.org/dev/peps/pep-0008/) and ensure that comments are formatted in 80 columns mode.",
    "created_at": "2020-03-03T23:45:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461909",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:5'>Comment 5:</a>
Welcome to Sagemath.

You could add tests of corner cases, like small graphs (empty, 1 or 2 vertices), disconnected graphs and graphs with multiple edges.

Have you tested the code on a large graph to see what it supports ?

Also, you will have to improve the coding style (see https://www.python.org/dev/peps/pep-0008/) and ensure that comments are formatted in 80 columns mode.



---

archive/issue_events_384154.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2020-03-03T23:45:31Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29269#event-384154"
}
```



---

archive/issue_events_384155.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2020-03-03T23:45:31Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29269#event-384155"
}
```



---

archive/issue_comments_461910.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nI'm still testing it. I see already one wrong result. I'm investigating it now.",
    "created_at": "2020-03-05T16:05:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461910",
    "user": "https://github.com/Fightlapa"
}
```

<a id='comment:6'>Comment 6:</a>
I'm still testing it. I see already one wrong result. I'm investigating it now.



---

archive/issue_comments_461911.json:
```json
{
    "body": "Changed commit from **[f085c77](https://github.com/sagemath/sagetrac-mirror/commit/f085c771a0a98a2d3aca9e046c29eaac6611c5fa)** to **[78d65d0](https://github.com/sagemath/sagetrac-mirror/commit/78d65d05b36bd8708781621a7591c4d32f3c23eb)**",
    "created_at": "2020-03-05T17:06:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461911",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f085c77](https://github.com/sagemath/sagetrac-mirror/commit/f085c771a0a98a2d3aca9e046c29eaac6611c5fa)** to **[78d65d0](https://github.com/sagemath/sagetrac-mirror/commit/78d65d05b36bd8708781621a7591c4d32f3c23eb)**



---

archive/issue_comments_461912.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/78d65d05b36bd8708781621a7591c4d32f3c23eb\">78d65d0</a></td><td><code>Fixed array size in cliquer. Added doctests</code></td></tr></table>\n",
    "created_at": "2020-03-05T17:06:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461912",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:7'>Comment 7:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/78d65d05b36bd8708781621a7591c4d32f3c23eb">78d65d0</a></td><td><code>Fixed array size in cliquer. Added doctests</code></td></tr></table>




---

archive/issue_events_384156.json:
```json
{
    "actor": "https://github.com/Fightlapa",
    "created_at": "2020-03-05T21:34:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29269#event-384156"
}
```



---

archive/issue_comments_461913.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\na few comments\n- first line of method `all_cliques`\n\n```diff\n+    Return the vertex sets of *ALL* the complete subgraphs.\n+    Returns the vertex sets of *ALL* the complete subgraphs.\n```\n- add an `INPUT` block with the description of input parameters\n- `if not graph.order():` -> `if not graph:`\n- I don't understand this case `if min_size == 0 and max_size > 0:`. Not documented\n- I suggest to free the graph right after the `sig_off`\n- Could you improve the presentation of the code in `cl.c` and add some documentation. \n\nI don't know if it is possible, but it would be much better if we could turn this method into an iterator. If the number of cliques to report is large, we may have a segfault. Not clear if the design of cliquer allows that.",
    "created_at": "2020-03-06T08:18:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461913",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:9'>Comment 9:</a>
a few comments
- first line of method `all_cliques`

```diff
+    Return the vertex sets of *ALL* the complete subgraphs.
+    Returns the vertex sets of *ALL* the complete subgraphs.
```
- add an `INPUT` block with the description of input parameters
- `if not graph.order():` -> `if not graph:`
- I don't understand this case `if min_size == 0 and max_size > 0:`. Not documented
- I suggest to free the graph right after the `sig_off`
- Could you improve the presentation of the code in `cl.c` and add some documentation. 

I don't know if it is possible, but it would be much better if we could turn this method into an iterator. If the number of cliques to report is large, we may have a segfault. Not clear if the design of cliquer allows that.



---

archive/issue_comments_461914.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nAccording the documentation of cliquer (https://users.aalto.fi/~pat/cliquer.html), it seems possible to avoid storing all cliques (re-entrant methods). So it seems possible to make an iterator, but I don't know how complex it is to do so.",
    "created_at": "2020-03-07T10:22:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461914",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:10'>Comment 10:</a>
According the documentation of cliquer (https://users.aalto.fi/~pat/cliquer.html), it seems possible to avoid storing all cliques (re-entrant methods). So it seems possible to make an iterator, but I don't know how complex it is to do so.



---

archive/issue_comments_461915.json:
```json
{
    "body": "Changed commit from **[78d65d0](https://github.com/sagemath/sagetrac-mirror/commit/78d65d05b36bd8708781621a7591c4d32f3c23eb)** to **[f70a90d](https://github.com/sagemath/sagetrac-mirror/commit/f70a90d305d291476bfeaad56ff7efef81172485)**",
    "created_at": "2020-03-07T11:17:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461915",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[78d65d0](https://github.com/sagemath/sagetrac-mirror/commit/78d65d05b36bd8708781621a7591c4d32f3c23eb)** to **[f70a90d](https://github.com/sagemath/sagetrac-mirror/commit/f70a90d305d291476bfeaad56ff7efef81172485)**



---

archive/issue_comments_461916.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f70a90d305d291476bfeaad56ff7efef81172485\">f70a90d</a></td><td><code>Added input description and made minor refactoring</code></td></tr></table>\n",
    "created_at": "2020-03-07T11:17:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461916",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:11'>Comment 11:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f70a90d305d291476bfeaad56ff7efef81172485">f70a90d</a></td><td><code>Added input description and made minor refactoring</code></td></tr></table>




---

archive/issue_comments_461917.json:
```json
{
    "body": "Changed commit from **[f70a90d](https://github.com/sagemath/sagetrac-mirror/commit/f70a90d305d291476bfeaad56ff7efef81172485)** to **[60a8166](https://github.com/sagemath/sagetrac-mirror/commit/60a816686586c67c3912a4ef634f5f1abd8f217d)**",
    "created_at": "2020-03-07T11:19:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461917",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f70a90d](https://github.com/sagemath/sagetrac-mirror/commit/f70a90d305d291476bfeaad56ff7efef81172485)** to **[60a8166](https://github.com/sagemath/sagetrac-mirror/commit/60a816686586c67c3912a4ef634f5f1abd8f217d)**



---

archive/issue_comments_461918.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/60a816686586c67c3912a4ef634f5f1abd8f217d\">60a8166</a></td><td><code>Added missing characters in input description</code></td></tr></table>\n",
    "created_at": "2020-03-07T11:19:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461918",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:12'>Comment 12:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/60a816686586c67c3912a4ef634f5f1abd8f217d">60a8166</a></td><td><code>Added missing characters in input description</code></td></tr></table>




---

archive/issue_comments_461919.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nSorry for those messy commits. Anyway, it's my first time with Cython, I'm not also that familiar with c++. I think I'm not capable of making iterator out of it.",
    "created_at": "2020-03-07T11:24:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461919",
    "user": "https://github.com/Fightlapa"
}
```

<a id='comment:13'>Comment 13:</a>
Sorry for those messy commits. Anyway, it's my first time with Cython, I'm not also that familiar with c++. I think I'm not capable of making iterator out of it.



---

archive/issue_comments_461920.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\n- The documentation is unclear on whether you search for cliques with number of vertices or edges between min and max, or if you consider the weight of the cliques. Please clarify\n- if the default value of `min_size` is 0, it must be set if the input, that is `def all_cliques(graph, min_size=0, max_size=0):`\n- alignement (and text) of input parameters\n\n```diff\n-    - ``min_size`` -- Search for cliques with weight at least N. If N=0,\n-                      searches for maximum weight clique (default).\n+    - ``min_size`` -- integer (default: 0); minimum size of the cliques to report.\n+      When set to 0 (default), searched for a maximum weight clique.\n```\n- add doctests for the default case of the parameters\n- don't sorted cliques at the end\n- also, could change the branch name to something like `public/graphs/29269_all_cliques` (i.e., use in a new branch). When the branch is in `public/`, I can push review commit, which is usually faster for me.\n\n- concerning the iterator, for the moment you can at least make method `all_cliques` yield cliques instead of returning a full list. Then we will have to find a way to make method `sage_find_all_clique` re-entrant, and so avoid to store all cliques.",
    "created_at": "2020-03-08T13:45:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461920",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:14'>Comment 14:</a>
- The documentation is unclear on whether you search for cliques with number of vertices or edges between min and max, or if you consider the weight of the cliques. Please clarify
- if the default value of `min_size` is 0, it must be set if the input, that is `def all_cliques(graph, min_size=0, max_size=0):`
- alignement (and text) of input parameters

```diff
-    - ``min_size`` -- Search for cliques with weight at least N. If N=0,
-                      searches for maximum weight clique (default).
+    - ``min_size`` -- integer (default: 0); minimum size of the cliques to report.
+      When set to 0 (default), searched for a maximum weight clique.
```
- add doctests for the default case of the parameters
- don't sorted cliques at the end
- also, could change the branch name to something like `public/graphs/29269_all_cliques` (i.e., use in a new branch). When the branch is in `public/`, I can push review commit, which is usually faster for me.

- concerning the iterator, for the moment you can at least make method `all_cliques` yield cliques instead of returning a full list. Then we will have to find a way to make method `sage_find_all_clique` re-entrant, and so avoid to store all cliques.



---

archive/issue_comments_461921.json:
```json
{
    "body": "Changed commit from **[60a8166](https://github.com/sagemath/sagetrac-mirror/commit/60a816686586c67c3912a4ef634f5f1abd8f217d)** to none",
    "created_at": "2020-03-10T11:57:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461921",
    "user": "https://github.com/Fightlapa"
}
```

Changed commit from **[60a8166](https://github.com/sagemath/sagetrac-mirror/commit/60a816686586c67c3912a4ef634f5f1abd8f217d)** to none



---

archive/issue_comments_461922.json:
```json
{
    "body": "Changed branch from **[public/cliquer_custom_size](https://github.com/sagemath/sagetrac-mirror/tree/public/cliquer_custom_size)** to **[public/graphs/29269_all_cliques](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/29269_all_cliques)**",
    "created_at": "2020-03-10T11:57:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461922",
    "user": "https://github.com/Fightlapa"
}
```

Changed branch from **[public/cliquer_custom_size](https://github.com/sagemath/sagetrac-mirror/tree/public/cliquer_custom_size)** to **[public/graphs/29269_all_cliques](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/29269_all_cliques)**



---

archive/issue_comments_461923.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f085c771a0a98a2d3aca9e046c29eaac6611c5fa\">f085c77</a></td><td><code>Added new function to get induced cliques of custom size in graph</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/78d65d05b36bd8708781621a7591c4d32f3c23eb\">78d65d0</a></td><td><code>Fixed array size in cliquer. Added doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f70a90d305d291476bfeaad56ff7efef81172485\">f70a90d</a></td><td><code>Added input description and made minor refactoring</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/60a816686586c67c3912a4ef634f5f1abd8f217d\">60a8166</a></td><td><code>Added missing characters in input description</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d39990dbf209342da32b33ecdfdb30ffcdd0804b\">d39990d</a></td><td><code>Changed all_cliques to iterator</code></td></tr></table>\n",
    "created_at": "2020-03-10T12:00:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461923",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:16'>Comment 16:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f085c771a0a98a2d3aca9e046c29eaac6611c5fa">f085c77</a></td><td><code>Added new function to get induced cliques of custom size in graph</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/78d65d05b36bd8708781621a7591c4d32f3c23eb">78d65d0</a></td><td><code>Fixed array size in cliquer. Added doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f70a90d305d291476bfeaad56ff7efef81172485">f70a90d</a></td><td><code>Added input description and made minor refactoring</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/60a816686586c67c3912a4ef634f5f1abd8f217d">60a8166</a></td><td><code>Added missing characters in input description</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d39990dbf209342da32b33ecdfdb30ffcdd0804b">d39990d</a></td><td><code>Changed all_cliques to iterator</code></td></tr></table>




---

archive/issue_comments_461924.json:
```json
{
    "body": "Commit: **[d39990d](https://github.com/sagemath/sagetrac-mirror/commit/d39990dbf209342da32b33ecdfdb30ffcdd0804b)**",
    "created_at": "2020-03-10T12:00:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461924",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[d39990d](https://github.com/sagemath/sagetrac-mirror/commit/d39990dbf209342da32b33ecdfdb30ffcdd0804b)**



---

archive/issue_comments_461925.json:
```json
{
    "body": "Changed commit from **[d39990d](https://github.com/sagemath/sagetrac-mirror/commit/d39990dbf209342da32b33ecdfdb30ffcdd0804b)** to **[2859b26](https://github.com/sagemath/sagetrac-mirror/commit/2859b26251cb028e9f81d482fb828a1c1fd225ff)**",
    "created_at": "2020-03-10T14:59:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461925",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d39990d](https://github.com/sagemath/sagetrac-mirror/commit/d39990dbf209342da32b33ecdfdb30ffcdd0804b)** to **[2859b26](https://github.com/sagemath/sagetrac-mirror/commit/2859b26251cb028e9f81d482fb828a1c1fd225ff)**



---

archive/issue_comments_461926.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a7559be6cc75e56c0189cf44212d71eb3e6b43f1\">a7559be</a></td><td><code>trac #: Merged with 9.1.beta7</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2859b26251cb028e9f81d482fb828a1c1fd225ff\">2859b26</a></td><td><code>trac #29269: review commit</code></td></tr></table>\n",
    "created_at": "2020-03-10T14:59:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461926",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:17'>Comment 17:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a7559be6cc75e56c0189cf44212d71eb3e6b43f1">a7559be</a></td><td><code>trac #: Merged with 9.1.beta7</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2859b26251cb028e9f81d482fb828a1c1fd225ff">2859b26</a></td><td><code>trac #29269: review commit</code></td></tr></table>




---

archive/issue_comments_461927.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nI rebased the ticket on last beta and did a few review edits. Please check them.\n\nI remains to expose this iterator in `graph.py`.",
    "created_at": "2020-03-10T15:00:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461927",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:18'>Comment 18:</a>
I rebased the ticket on last beta and did a few review edits. Please check them.

I remains to expose this iterator in `graph.py`.



---

archive/issue_comments_461928.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nOkay. Does it mean this change is fine for now?",
    "created_at": "2020-03-10T15:27:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461928",
    "user": "https://github.com/Fightlapa"
}
```

<a id='comment:19'>Comment 19:</a>
Okay. Does it mean this change is fine for now?



---

archive/issue_comments_461929.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nYou still have to expose the method in graph.py (check at the bottom of the file to see how. And you can also do further improvements if you have some in mind. You can also investigate the re-entrant capability of cliquer, at least to understand how to use it and discuss what we can do with it.",
    "created_at": "2020-03-10T15:37:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461929",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:20'>Comment 20:</a>
You still have to expose the method in graph.py (check at the bottom of the file to see how. And you can also do further improvements if you have some in mind. You can also investigate the re-entrant capability of cliquer, at least to understand how to use it and discuss what we can do with it.



---

archive/issue_comments_461930.json:
```json
{
    "body": "Changed commit from **[2859b26](https://github.com/sagemath/sagetrac-mirror/commit/2859b26251cb028e9f81d482fb828a1c1fd225ff)** to **[787b0fa](https://github.com/sagemath/sagetrac-mirror/commit/787b0fa4ed87eb03d8fa955bdc129198eaeeac84)**",
    "created_at": "2020-03-10T17:59:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461930",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2859b26](https://github.com/sagemath/sagetrac-mirror/commit/2859b26251cb028e9f81d482fb828a1c1fd225ff)** to **[787b0fa](https://github.com/sagemath/sagetrac-mirror/commit/787b0fa4ed87eb03d8fa955bdc129198eaeeac84)**



---

archive/issue_comments_461931.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/787b0fa4ed87eb03d8fa955bdc129198eaeeac84\">787b0fa</a></td><td><code>Exposed all_cliques in graphs.py</code></td></tr></table>\n",
    "created_at": "2020-03-10T17:59:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461931",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:21'>Comment 21:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/787b0fa4ed87eb03d8fa955bdc129198eaeeac84">787b0fa</a></td><td><code>Exposed all_cliques in graphs.py</code></td></tr></table>




---

archive/issue_comments_461932.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nIn terms of making it re-entrant my first idea is (not ideal):\nMaking use of global variables, which are currently reseted per call.\nIt would require to save last graph pointer on which was call made, other parameters and saving counter.\nThen each call with same graph and other parameters would just progress to next clique and return only one, while increasing counter.\n\nDrawbacks - only 1 instance of iteration is possible, nested call on same graph with same parameters will use same counter and won't be detected as something different. Generally, it's bad solution, but I'm not familiar with C and don't know the possibilities.\n\nOr maybe I'm wrong about how the code is executed.",
    "created_at": "2020-03-10T18:07:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461932",
    "user": "https://github.com/Fightlapa"
}
```

<a id='comment:22'>Comment 22:</a>
In terms of making it re-entrant my first idea is (not ideal):
Making use of global variables, which are currently reseted per call.
It would require to save last graph pointer on which was call made, other parameters and saving counter.
Then each call with same graph and other parameters would just progress to next clique and return only one, while increasing counter.

Drawbacks - only 1 instance of iteration is possible, nested call on same graph with same parameters will use same counter and won't be detected as something different. Generally, it's bad solution, but I'm not familiar with C and don't know the possibilities.

Or maybe I'm wrong about how the code is executed.



---

archive/issue_comments_461933.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nI don't know either how to do it and don't have time now to investigate. It's mentioned in a todo block.\n\nPlease check the (small) error reported by the patchbot.",
    "created_at": "2020-03-11T15:01:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461933",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:23'>Comment 23:</a>
I don't know either how to do it and don't have time now to investigate. It's mentioned in a todo block.

Please check the (small) error reported by the patchbot.



---

archive/issue_comments_461934.json:
```json
{
    "body": "Changed commit from **[787b0fa](https://github.com/sagemath/sagetrac-mirror/commit/787b0fa4ed87eb03d8fa955bdc129198eaeeac84)** to **[eb1fb7f](https://github.com/sagemath/sagetrac-mirror/commit/eb1fb7fefac88e41c1ab6181073265019ff489ee)**",
    "created_at": "2020-03-12T16:47:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461934",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[787b0fa](https://github.com/sagemath/sagetrac-mirror/commit/787b0fa4ed87eb03d8fa955bdc129198eaeeac84)** to **[eb1fb7f](https://github.com/sagemath/sagetrac-mirror/commit/eb1fb7fefac88e41c1ab6181073265019ff489ee)**



---

archive/issue_comments_461935.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eb1fb7fefac88e41c1ab6181073265019ff489ee\">eb1fb7f</a></td><td><code>pyflakes error fix</code></td></tr></table>\n",
    "created_at": "2020-03-12T16:47:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461935",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:24'>Comment 24:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eb1fb7fefac88e41c1ab6181073265019ff489ee">eb1fb7f</a></td><td><code>pyflakes error fix</code></td></tr></table>




---

archive/issue_comments_461936.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nFor reentering something as this might be useful:\n\nInstead of the loop\n\n```\nfor (j = 0; j < sage_clique_count; j++)\n```\nyou can pass a pointer to to `j` to the function\n\n```\nint sage_find_all_clique(graph_t *g, int **list, int min_size, int max_size, int* j)\n```\nOn the first call `j` can be initiated to `-1` and therefore the function knows that it should initialize. Then on each further call it can just obtain partial list for `j` and return its length. If the length is `-1` this means that the iterator is exhausted.\n\nOne more thing. It would be nice if indices for counting are consistent. A few lines before you use `i` for the exact same thing. It makes it a bit easier to read if it's always `sage_clique_list[j]` or `sage_clique_list[i]`.",
    "created_at": "2020-03-25T08:36:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461936",
    "user": "https://github.com/kliem"
}
```

<a id='comment:25'>Comment 25:</a>
For reentering something as this might be useful:

Instead of the loop

```
for (j = 0; j < sage_clique_count; j++)
```
you can pass a pointer to to `j` to the function

```
int sage_find_all_clique(graph_t *g, int **list, int min_size, int max_size, int* j)
```
On the first call `j` can be initiated to `-1` and therefore the function knows that it should initialize. Then on each further call it can just obtain partial list for `j` and return its length. If the length is `-1` this means that the iterator is exhausted.

One more thing. It would be nice if indices for counting are consistent. A few lines before you use `i` for the exact same thing. It makes it a bit easier to read if it's always `sage_clique_list[j]` or `sage_clique_list[i]`.



---

archive/issue_events_384157.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-03-25T08:36:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29269#event-384157"
}
```



---

archive/issue_comments_461937.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nThank you for the explanation.\n\nWe will certainly have to build an object to encapsulate this and so make sure that we properly release memory when the iterator is no longer use.",
    "created_at": "2020-03-25T09:48:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461937",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:26'>Comment 26:</a>
Thank you for the explanation.

We will certainly have to build an object to encapsulate this and so make sure that we properly release memory when the iterator is no longer use.



---

archive/issue_comments_461938.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nI see the problem.\n\nI believe the class `MemoryAllocator` (`from sage.ext.memory_allocator cimport MemoryAllocator`) should be used here. It should definitely be used to allocate `list_of_vertices`, because there is no guarantee that we ever reach `sig_free(list_of_vertices)`. If we revisit `sage_find_all_clique` for each clique, we can even allocate `list_of_vertices` right from the start, as it only needs to fit one clique.\n\nInstead of calling `set_free`, we can also let `MemoryAllocator` take care of it (but thats somewhat a hack). We probably need a preparation function as well. This preparation functions sets up `sage_clique_list` and takes care that for each clique `s` the pointer `&s[-1]` is stored in `MemoryAllocator`.\n\nThen when the iterator is destroyed then so is the `MemoryAllocator`, which takes care of all the rest.\n\nAm I making any sense?\n\nHere are some code snippets to explain what I mean:\n\nIn `all_cliques`:\n\n```\ncdef void** clique_memory\ncdef MemoryAllocator mem = MemoryAllocator()\ncdef int* list_of_vertices = <int*> mem.alloc_array(max_size, sizeof(int))\ncdef int num_cliques = initialize_sage_find_all_clique(g, &clique_memory, min_size, max_size)\nmem.resize(num_cliques + 1)\nfor i in range(num_cliques):\n    mem.pointers[mem.n] = clique_memory[i]\n    mem.n += 1\nsig_free(clique_memory)\n```\n\nNow all the memory is stored in `mem` and will be free automatically, if the iterator is interrupted.\n\nThe function `initialize_sage_find_all_clique` could look something like this:\n\n```diff\n+int initialize_sage_find_all_clique(graph_t *g,void **list, int min_size, int max_size){\n+  sage_reset_global_variables();\n+  quiet++;\n+  maximal = FALSE;\n+  int i, j, l;\n+\n+  clique_options *opts = sage_init_clique_opt();\n+  clique_unweighted_find_all(g, min_size, max_size, maximal, opts);\n+  free(opts);\n+\n+  int size = 0;\n+  *list = malloc(sizeof(void *) * sage_clique_count);\n+  for (i = 0; i < sage_clique_count; i++) {\n+    list[i] = &(sage_clique_list[i][-1]);\n+  }\n+  return sage_clique_count",
    "created_at": "2020-03-25T10:59:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461938",
    "user": "https://github.com/kliem"
}
```

<a id='comment:27'>Comment 27:</a>
I see the problem.

I believe the class `MemoryAllocator` (`from sage.ext.memory_allocator cimport MemoryAllocator`) should be used here. It should definitely be used to allocate `list_of_vertices`, because there is no guarantee that we ever reach `sig_free(list_of_vertices)`. If we revisit `sage_find_all_clique` for each clique, we can even allocate `list_of_vertices` right from the start, as it only needs to fit one clique.

Instead of calling `set_free`, we can also let `MemoryAllocator` take care of it (but thats somewhat a hack). We probably need a preparation function as well. This preparation functions sets up `sage_clique_list` and takes care that for each clique `s` the pointer `&s[-1]` is stored in `MemoryAllocator`.

Then when the iterator is destroyed then so is the `MemoryAllocator`, which takes care of all the rest.

Am I making any sense?

Here are some code snippets to explain what I mean:

In `all_cliques`:

```
cdef void** clique_memory
cdef MemoryAllocator mem = MemoryAllocator()
cdef int* list_of_vertices = <int*> mem.alloc_array(max_size, sizeof(int))
cdef int num_cliques = initialize_sage_find_all_clique(g, &clique_memory, min_size, max_size)
mem.resize(num_cliques + 1)
for i in range(num_cliques):
    mem.pointers[mem.n] = clique_memory[i]
    mem.n += 1
sig_free(clique_memory)
```

Now all the memory is stored in `mem` and will be free automatically, if the iterator is interrupted.

The function `initialize_sage_find_all_clique` could look something like this:

```diff
+int initialize_sage_find_all_clique(graph_t *g,void **list, int min_size, int max_size){
+  sage_reset_global_variables();
+  quiet++;
+  maximal = FALSE;
+  int i, j, l;
+
+  clique_options *opts = sage_init_clique_opt();
+  clique_unweighted_find_all(g, min_size, max_size, maximal, opts);
+  free(opts);
+
+  int size = 0;
+  *list = malloc(sizeof(void *) * sage_clique_count);
+  for (i = 0; i < sage_clique_count; i++) {
+    list[i] = &(sage_clique_list[i][-1]);
+  }
+  return sage_clique_count



---

archive/issue_comments_461939.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nYes, this is the idea, and all that inside a small class with a constructor, a destructor and a method `__iter__`.\n\nMy only question is whether we can have several calls to cliquer at the same time, that is if we can have to instances of the proposed iterator at the same time.",
    "created_at": "2020-03-25T11:57:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461939",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:28'>Comment 28:</a>
Yes, this is the idea, and all that inside a small class with a constructor, a destructor and a method `__iter__`.

My only question is whether we can have several calls to cliquer at the same time, that is if we can have to instances of the proposed iterator at the same time.



---

archive/issue_comments_461940.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nI don't think that is a problem to have multiple instances arround. But we would have to rewrite parts of `cliquer/cl.c`.\n\nI like the idea of a small class better. Then the `__dealloc__` method could call the corresponding c-functions that take care of the destruction and we wouldn't need such a hack anymore.",
    "created_at": "2020-03-25T14:24:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461940",
    "user": "https://github.com/kliem"
}
```

<a id='comment:29'>Comment 29:</a>
I don't think that is a problem to have multiple instances arround. But we would have to rewrite parts of `cliquer/cl.c`.

I like the idea of a small class better. Then the `__dealloc__` method could call the corresponding c-functions that take care of the destruction and we wouldn't need such a hack anymore.



---

archive/issue_comments_461941.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\n1. now we must decide if we implement this in this ticket, or if we first finalize this ticket, and then open a new ticket, based on this one, to implement the proposed changes. I have no clear opinion on that.\n\n2. I noticed that the current branch contains some modifications of `graph.py` that are not related to this ticket. In general, we should not do that in order to avoid possible conflicts with other tickets.",
    "created_at": "2020-03-25T18:15:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461941",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:30'>Comment 30:</a>
1. now we must decide if we implement this in this ticket, or if we first finalize this ticket, and then open a new ticket, based on this one, to implement the proposed changes. I have no clear opinion on that.

2. I noticed that the current branch contains some modifications of `graph.py` that are not related to this ticket. In general, we should not do that in order to avoid possible conflicts with other tickets.



---

archive/issue_comments_461942.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\nReplying to [@dcoudert](#comment%3A30):\n> 1. now we must decide if we implement this in this ticket, or if we first finalize this ticket, and then open a new ticket, based on this one, to implement the proposed changes. I have no clear opinion on that.\n\nI would vote for leaving this for another ticket. It looks to me like all the functions need some work. E.g. there are `sig_on`/`sig_off` statements everywhere in `cliquer.pyx` and there is no care taken that the deallocation is done in case of interrupt. I believe this should be done in a `try`/`finally` matter, such that the deallocation is done whether not the code is interrupted. Maybe I'm also misunderstanding things.\n\nSo if we put `list_of_vertices` in a `MemoryAllocator` so that `list_of_vertices` is freed automatically if the iterated is disposed of, I would be fine with it.\n> \n> 2. I noticed that the current branch contains some modifications of `graph.py` that are not related to this ticket. In general, we should not do that in order to avoid possible conflicts with other tickets.\n\n>",
    "created_at": "2020-03-26T09:44:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461942",
    "user": "https://github.com/kliem"
}
```

<a id='comment:31'>Comment 31:</a>
Replying to [@dcoudert](#comment%3A30):
> 1. now we must decide if we implement this in this ticket, or if we first finalize this ticket, and then open a new ticket, based on this one, to implement the proposed changes. I have no clear opinion on that.

I would vote for leaving this for another ticket. It looks to me like all the functions need some work. E.g. there are `sig_on`/`sig_off` statements everywhere in `cliquer.pyx` and there is no care taken that the deallocation is done in case of interrupt. I believe this should be done in a `try`/`finally` matter, such that the deallocation is done whether not the code is interrupted. Maybe I'm also misunderstanding things.

So if we put `list_of_vertices` in a `MemoryAllocator` so that `list_of_vertices` is freed automatically if the iterated is disposed of, I would be fine with it.
> 
> 2. I noticed that the current branch contains some modifications of `graph.py` that are not related to this ticket. In general, we should not do that in order to avoid possible conflicts with other tickets.

>



---

archive/issue_comments_461943.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nIn the current implementation, `list_of_vertices` is allocated in `cl.c`. Therefore, I don't see how to put it inside a `MemoryAllocator`.\nHowever, we can do something like that:\n\n```diff\n-    for i in range(size):\n-        if list_of_vertices[i] != -1:\n-            c.append(int_to_vertex[list_of_vertices[i]])\n-        else:\n-            yield c\n-            c = []\n-\n+    try:\n+        for i in range(size):\n+            if list_of_vertices[i] != -1:\n+                c.append(int_to_vertex[list_of_vertices[i]])\n+            else:\n+                yield c\n+                c = []\n+    finally:\n+        sig_free(list_of_vertices)\n```",
    "created_at": "2020-03-26T10:29:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461943",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:32'>Comment 32:</a>
In the current implementation, `list_of_vertices` is allocated in `cl.c`. Therefore, I don't see how to put it inside a `MemoryAllocator`.
However, we can do something like that:

```diff
-    for i in range(size):
-        if list_of_vertices[i] != -1:
-            c.append(int_to_vertex[list_of_vertices[i]])
-        else:
-            yield c
-            c = []
-
+    try:
+        for i in range(size):
+            if list_of_vertices[i] != -1:
+                c.append(int_to_vertex[list_of_vertices[i]])
+            else:
+                yield c
+                c = []
+    finally:
+        sig_free(list_of_vertices)
```



---

archive/issue_comments_461944.json:
```json
{
    "body": "<a id='comment:33'>Comment 33:</a>\nWe do the following right after `graph_free(g)`:\n\n```\ncdef MemoryAllocator mem = MemoryAllocator()\nmem.resize(mem.n + 1)\nmem.pointers[mem.n] = list_of_vertices\nmem.n += 1\n```\nThis should do the job. It's not a nice solutions, but it should at least avoid a memory leak in most use cases. Still a keyboard interrupt most likely creates a memory leak, but I think that is a problem for all of those functions.",
    "created_at": "2020-03-26T10:39:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461944",
    "user": "https://github.com/kliem"
}
```

<a id='comment:33'>Comment 33:</a>
We do the following right after `graph_free(g)`:

```
cdef MemoryAllocator mem = MemoryAllocator()
mem.resize(mem.n + 1)
mem.pointers[mem.n] = list_of_vertices
mem.n += 1
```
This should do the job. It's not a nice solutions, but it should at least avoid a memory leak in most use cases. Still a keyboard interrupt most likely creates a memory leak, but I think that is a problem for all of those functions.



---

archive/issue_comments_461945.json:
```json
{
    "body": "<a id='comment:34'>Comment 34:</a>\nAre you sure that the memory allocator destructor is effectively called in case of keyboard interrupt ? At least I tried the solution I proposed and the finally statement is always called.",
    "created_at": "2020-03-26T10:44:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461945",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:34'>Comment 34:</a>
Are you sure that the memory allocator destructor is effectively called in case of keyboard interrupt ? At least I tried the solution I proposed and the finally statement is always called.



---

archive/issue_comments_461946.json:
```json
{
    "body": "<a id='comment:35'>Comment 35:</a>\nI just tried your solutions and it works just fine and is much simpler anyway:\n\n```\nsage: cython('''\n....: def foo():\n....:     try:\n....:         while True: yield 1\n....:     finally:\n....:         print('hello')\n....: ''')\nsage: it = foo()\nsage: next(it)\n1\nsage: del it\nhello\n```\n\nSo I propose changing the code like this:\n\n```\n    try:\n        try:\n            sig_on()\n            size = sage_find_all_clique(g, &list_of_vertices, min_size, max_size)\n            sig_off()\n        finally:\n            graph_free(g)\n        cdef list c = []\n        for i in range(size):\n            if list_of_vertices[i] != -1:\n                c.append(int_to_vertex[list_of_vertices[i]])\n            else:\n                yield c\n                c = []\n    finally:\n        if list_of_vertices:  # maybe computation was interrupted before allocating `list_of_vertices`\n            sig_free(list_of_vertices)\n```\n\nWith a little more effort we could even ensure that `sage_clique_list` is freed even if the calculation is interrupted.",
    "created_at": "2020-03-26T10:50:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461946",
    "user": "https://github.com/kliem"
}
```

<a id='comment:35'>Comment 35:</a>
I just tried your solutions and it works just fine and is much simpler anyway:

```
sage: cython('''
....: def foo():
....:     try:
....:         while True: yield 1
....:     finally:
....:         print('hello')
....: ''')
sage: it = foo()
sage: next(it)
1
sage: del it
hello
```

So I propose changing the code like this:

```
    try:
        try:
            sig_on()
            size = sage_find_all_clique(g, &list_of_vertices, min_size, max_size)
            sig_off()
        finally:
            graph_free(g)
        cdef list c = []
        for i in range(size):
            if list_of_vertices[i] != -1:
                c.append(int_to_vertex[list_of_vertices[i]])
            else:
                yield c
                c = []
    finally:
        if list_of_vertices:  # maybe computation was interrupted before allocating `list_of_vertices`
            sig_free(list_of_vertices)
```

With a little more effort we could even ensure that `sage_clique_list` is freed even if the calculation is interrupted.



---

archive/issue_comments_461947.json:
```json
{
    "body": "<a id='comment:36'>Comment 36:</a>\n+1 for propose change. The branch is public, so we can implement it, except if gh-Fightlapa is willing to do it.\n\nConcerning `sage_clique_list`, it's much more tricky as it is in C, not C++. Some solutions are proposed here\nhttps://stackoverflow.com/questions/10586003/try-catch-statements-in-c. But we should wait for another ticket, and try to turn the code to c++ to enable the use of proper try-catch-finally statements.",
    "created_at": "2020-03-26T11:05:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461947",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:36'>Comment 36:</a>
+1 for propose change. The branch is public, so we can implement it, except if gh-Fightlapa is willing to do it.

Concerning `sage_clique_list`, it's much more tricky as it is in C, not C++. Some solutions are proposed here
https://stackoverflow.com/questions/10586003/try-catch-statements-in-c. But we should wait for another ticket, and try to turn the code to c++ to enable the use of proper try-catch-finally statements.



---

archive/issue_comments_461948.json:
```json
{
    "body": "<a id='comment:37'>Comment 37:</a>\nOk, I can do it. According to your suggestion, I would get rid of the last commit that fixed some pyflakes issues in graphes.py that have nothing to do with the current ticket.\n\nI was thinking about a second function that deallocates `sage_clique_list`, but that should probably be left to a second ticket.\n\n+1 for going to C++ in another ticket. As you already mentioned before, it would be good to have more than one `sage_clique_list` around and that sounds very much like a class.",
    "created_at": "2020-03-26T11:17:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461948",
    "user": "https://github.com/kliem"
}
```

<a id='comment:37'>Comment 37:</a>
Ok, I can do it. According to your suggestion, I would get rid of the last commit that fixed some pyflakes issues in graphes.py that have nothing to do with the current ticket.

I was thinking about a second function that deallocates `sage_clique_list`, but that should probably be left to a second ticket.

+1 for going to C++ in another ticket. As you already mentioned before, it would be good to have more than one `sage_clique_list` around and that sounds very much like a class.



---

archive/issue_comments_461949.json:
```json
{
    "body": "<a id='comment:38'>Comment 38:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-03-26T11:41:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461949",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:38'>Comment 38:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_461950.json:
```json
{
    "body": "Changed commit from **[eb1fb7f](https://github.com/sagemath/sagetrac-mirror/commit/eb1fb7fefac88e41c1ab6181073265019ff489ee)** to **[787b0fa](https://github.com/sagemath/sagetrac-mirror/commit/787b0fa4ed87eb03d8fa955bdc129198eaeeac84)**",
    "created_at": "2020-03-26T11:41:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461950",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[eb1fb7f](https://github.com/sagemath/sagetrac-mirror/commit/eb1fb7fefac88e41c1ab6181073265019ff489ee)** to **[787b0fa](https://github.com/sagemath/sagetrac-mirror/commit/787b0fa4ed87eb03d8fa955bdc129198eaeeac84)**



---

archive/issue_comments_461951.json:
```json
{
    "body": "Changed commit from **[787b0fa](https://github.com/sagemath/sagetrac-mirror/commit/787b0fa4ed87eb03d8fa955bdc129198eaeeac84)** to **[bfc3290](https://github.com/sagemath/sagetrac-mirror/commit/bfc32904ce75d997d2fa3679fe46ee7a6c315cf8)**",
    "created_at": "2020-03-26T11:54:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461951",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[787b0fa](https://github.com/sagemath/sagetrac-mirror/commit/787b0fa4ed87eb03d8fa955bdc129198eaeeac84)** to **[bfc3290](https://github.com/sagemath/sagetrac-mirror/commit/bfc32904ce75d997d2fa3679fe46ee7a6c315cf8)**



---

archive/issue_comments_461952.json:
```json
{
    "body": "<a id='comment:39'>Comment 39:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bfc32904ce75d997d2fa3679fe46ee7a6c315cf8\">bfc3290</a></td><td><code>moving deallocations to finally blocks</code></td></tr></table>\n",
    "created_at": "2020-03-26T11:54:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461952",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:39'>Comment 39:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bfc32904ce75d997d2fa3679fe46ee7a6c315cf8">bfc3290</a></td><td><code>moving deallocations to finally blocks</code></td></tr></table>




---

archive/issue_comments_461953.json:
```json
{
    "body": "<a id='comment:40'>Comment 40:</a>\nDone.",
    "created_at": "2020-03-26T11:56:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461953",
    "user": "https://github.com/kliem"
}
```

<a id='comment:40'>Comment 40:</a>
Done.



---

archive/issue_comments_461954.json:
```json
{
    "body": "<a id='comment:41'>Comment 41:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf4e52da92da09f18ea793059fb78b5eaf9bc096\">bf4e52d</a></td><td><code>trac #29269: review commit</code></td></tr></table>\n",
    "created_at": "2020-03-26T12:09:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461954",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:41'>Comment 41:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf4e52da92da09f18ea793059fb78b5eaf9bc096">bf4e52d</a></td><td><code>trac #29269: review commit</code></td></tr></table>




---

archive/issue_comments_461955.json:
```json
{
    "body": "Changed commit from **[bfc3290](https://github.com/sagemath/sagetrac-mirror/commit/bfc32904ce75d997d2fa3679fe46ee7a6c315cf8)** to **[bf4e52d](https://github.com/sagemath/sagetrac-mirror/commit/bf4e52da92da09f18ea793059fb78b5eaf9bc096)**",
    "created_at": "2020-03-26T12:09:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461955",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[bfc3290](https://github.com/sagemath/sagetrac-mirror/commit/bfc32904ce75d997d2fa3679fe46ee7a6c315cf8)** to **[bf4e52d](https://github.com/sagemath/sagetrac-mirror/commit/bf4e52da92da09f18ea793059fb78b5eaf9bc096)**



---

archive/issue_comments_461956.json:
```json
{
    "body": "Reviewer: **David Coudert**",
    "created_at": "2020-03-26T12:11:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461956",
    "user": "https://github.com/dcoudert"
}
```

Reviewer: **David Coudert**



---

archive/issue_comments_461957.json:
```json
{
    "body": "<a id='comment:42'>Comment 42:</a>\na small review commit to avoid using variable `size` uninitialized.\n\nIf OK for you, you can set this ticket to positive review on my behalf. Don't forget to add your name as co-author.",
    "created_at": "2020-03-26T12:11:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461957",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:42'>Comment 42:</a>
a small review commit to avoid using variable `size` uninitialized.

If OK for you, you can set this ticket to positive review on my behalf. Don't forget to add your name as co-author.



---

archive/issue_events_384158.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-03-26T12:13:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29269#event-384158"
}
```



---

archive/issue_events_384159.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-03-26T12:13:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29269#event-384159"
}
```



---

archive/issue_comments_461958.json:
```json
{
    "body": "Changed author from **Jakub Jab\u0142o\u0144ski** to **Jakub Jab\u0142o\u0144ski, Jonathan Kliem**",
    "created_at": "2020-03-26T12:13:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461958",
    "user": "https://github.com/kliem"
}
```

Changed author from **Jakub Jabłoński** to **Jakub Jabłoński, Jonathan Kliem**



---

archive/issue_events_384160.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-16T22:35:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29269#event-384160"
}
```



---

archive/issue_events_384161.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-16T22:35:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29269#event-384161"
}
```



---

archive/issue_comments_461959.json:
```json
{
    "body": "<a id='comment:44'>Comment 44:</a>\nThe \"Dependencies\" field must be a list of trac tickets",
    "created_at": "2020-04-16T22:35:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461959",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:44'>Comment 44:</a>
The "Dependencies" field must be a list of trac tickets



---

archive/issue_comments_461960.json:
```json
{
    "body": "Changed dependencies from **cliquer** to none",
    "created_at": "2020-04-17T05:59:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461960",
    "user": "https://github.com/kliem"
}
```

Changed dependencies from **cliquer** to none



---

archive/issue_comments_461961.json:
```json
{
    "body": "<a id='comment:45'>Comment 45:</a>\nSorry, missed that. That's obsolete as cliquer is a standard package.",
    "created_at": "2020-04-17T05:59:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461961",
    "user": "https://github.com/kliem"
}
```

<a id='comment:45'>Comment 45:</a>
Sorry, missed that. That's obsolete as cliquer is a standard package.



---

archive/issue_events_384162.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-04-17T05:59:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29269#event-384162"
}
```



---

archive/issue_events_384163.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-04-17T05:59:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29269#event-384163"
}
```



---

archive/issue_events_384164.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-18T08:41:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29269#event-384164"
}
```



---

archive/issue_events_384165.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-18T08:41:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29269#event-384165"
}
```



---

archive/issue_comments_461962.json:
```json
{
    "body": "<a id='comment:46'>Comment 46:</a>\nMerge conflict, please fix",
    "created_at": "2020-04-18T08:41:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461962",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:46'>Comment 46:</a>
Merge conflict, please fix



---

archive/issue_comments_461963.json:
```json
{
    "body": "<a id='comment:47'>Comment 47:</a>\nthis might be due to #29518. So let's wait for next release to see what's the conflict.",
    "created_at": "2020-04-18T09:55:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461963",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:47'>Comment 47:</a>
this might be due to #29518. So let's wait for next release to see what's the conflict.



---

archive/issue_comments_461964.json:
```json
{
    "body": "Changed branch from **[public/graphs/29269_all_cliques](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/29269_all_cliques)** to **[public/29269_reb](https://github.com/sagemath/sagetrac-mirror/tree/public/29269_reb)**",
    "created_at": "2020-04-25T20:43:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461964",
    "user": "https://github.com/kliem"
}
```

Changed branch from **[public/graphs/29269_all_cliques](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/29269_all_cliques)** to **[public/29269_reb](https://github.com/sagemath/sagetrac-mirror/tree/public/29269_reb)**



---

archive/issue_comments_461965.json:
```json
{
    "body": "Changed commit from **[bf4e52d](https://github.com/sagemath/sagetrac-mirror/commit/bf4e52da92da09f18ea793059fb78b5eaf9bc096)** to none",
    "created_at": "2020-04-25T20:43:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461965",
    "user": "https://github.com/kliem"
}
```

Changed commit from **[bf4e52d](https://github.com/sagemath/sagetrac-mirror/commit/bf4e52da92da09f18ea793059fb78b5eaf9bc096)** to none



---

archive/issue_comments_461966.json:
```json
{
    "body": "<a id='comment:49'>Comment 49:</a>\nReplying to [@dcoudert](#comment%3A47):\n> this might be due to #29518. So let's wait for next release to see what's the conflict.\n\nThat's exactly the problem. Doesn't make sense to add a function to a lazy import that will be removed soon. And it should be a method of a graph, this is where it belongs.",
    "created_at": "2020-04-25T20:44:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461966",
    "user": "https://github.com/kliem"
}
```

<a id='comment:49'>Comment 49:</a>
Replying to [@dcoudert](#comment%3A47):
> this might be due to #29518. So let's wait for next release to see what's the conflict.

That's exactly the problem. Doesn't make sense to add a function to a lazy import that will be removed soon. And it should be a method of a graph, this is where it belongs.



---

archive/issue_comments_461967.json:
```json
{
    "body": "Commit: **[e1774f7](https://github.com/sagemath/sagetrac-mirror/commit/e1774f7b7b655503e640448d99d6e01e769df069)**",
    "created_at": "2020-04-25T20:44:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461967",
    "user": "https://github.com/kliem"
}
```

Commit: **[e1774f7](https://github.com/sagemath/sagetrac-mirror/commit/e1774f7b7b655503e640448d99d6e01e769df069)**



---

archive/issue_comments_461968.json:
```json
{
    "body": "Changed branch from **[public/29269_reb](https://github.com/sagemath/sagetrac-mirror/tree/public/29269_reb)** to **[public/29269-reb](https://github.com/sagemath/sagetrac-mirror/tree/public/29269-reb)**",
    "created_at": "2020-04-25T20:44:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461968",
    "user": "https://github.com/kliem"
}
```

Changed branch from **[public/29269_reb](https://github.com/sagemath/sagetrac-mirror/tree/public/29269_reb)** to **[public/29269-reb](https://github.com/sagemath/sagetrac-mirror/tree/public/29269-reb)**



---

archive/issue_comments_461969.json:
```json
{
    "body": "<a id='comment:50'>Comment 50:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a3a61cbee6fb05d8b9118f436c8e6985f145a85d\">a3a61cb</a></td><td><code>Added new function to get induced cliques of custom size in graph</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2d5c2e864b900856f40de4e9cc61799cbe220de1\">2d5c2e8</a></td><td><code>Fixed array size in cliquer. Added doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c0532ced654ca7d267859de74d9868b91be868c0\">c0532ce</a></td><td><code>Added input description and made minor refactoring</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f0f1bcca65fe455c8644495b10f4887fffc42a57\">f0f1bcc</a></td><td><code>Added missing characters in input description</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/029814ee393e451c53104f661f6a41f25eefde94\">029814e</a></td><td><code>Changed all_cliques to iterator</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7b1e302284881f29fbc85cb36b556009c1e7231f\">7b1e302</a></td><td><code>trac #29269: review commit</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ac669191d6edb4c919fff7b59459037ab7241003\">ac66919</a></td><td><code>Exposed all_cliques in graphs.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/732fbaf6f0cc1be1a40925f1feb35a9af69a7b32\">732fbaf</a></td><td><code>moving deallocations to finally blocks</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e1774f7b7b655503e640448d99d6e01e769df069\">e1774f7</a></td><td><code>trac #29269: review commit</code></td></tr></table>\n",
    "created_at": "2020-04-25T20:44:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461969",
    "user": "https://github.com/kliem"
}
```

<a id='comment:50'>Comment 50:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a3a61cbee6fb05d8b9118f436c8e6985f145a85d">a3a61cb</a></td><td><code>Added new function to get induced cliques of custom size in graph</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2d5c2e864b900856f40de4e9cc61799cbe220de1">2d5c2e8</a></td><td><code>Fixed array size in cliquer. Added doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c0532ced654ca7d267859de74d9868b91be868c0">c0532ce</a></td><td><code>Added input description and made minor refactoring</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f0f1bcca65fe455c8644495b10f4887fffc42a57">f0f1bcc</a></td><td><code>Added missing characters in input description</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/029814ee393e451c53104f661f6a41f25eefde94">029814e</a></td><td><code>Changed all_cliques to iterator</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7b1e302284881f29fbc85cb36b556009c1e7231f">7b1e302</a></td><td><code>trac #29269: review commit</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ac669191d6edb4c919fff7b59459037ab7241003">ac66919</a></td><td><code>Exposed all_cliques in graphs.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/732fbaf6f0cc1be1a40925f1feb35a9af69a7b32">732fbaf</a></td><td><code>moving deallocations to finally blocks</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e1774f7b7b655503e640448d99d6e01e769df069">e1774f7</a></td><td><code>trac #29269: review commit</code></td></tr></table>




---

archive/issue_events_384166.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-04-25T20:47:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29269#event-384166"
}
```



---

archive/issue_events_384167.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-04-25T20:47:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29269#event-384167"
}
```



---

archive/issue_events_384168.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2020-04-26T12:56:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29269#event-384168"
}
```



---

archive/issue_events_384169.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2020-04-26T12:56:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29269#event-384169"
}
```



---

archive/issue_comments_461970.json:
```json
{
    "body": "<a id='comment:52'>Comment 52:</a>\nLGTM.",
    "created_at": "2020-04-26T12:56:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461970",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:52'>Comment 52:</a>
LGTM.



---

archive/issue_comments_461971.json:
```json
{
    "body": "Changed branch from **[public/29269-reb](https://github.com/sagemath/sagetrac-mirror/tree/public/29269-reb)** to **[e1774f7](https://github.com/sagemath/sagetrac-mirror/commit/e1774f7b7b655503e640448d99d6e01e769df069)**",
    "created_at": "2020-05-02T21:57:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29269#issuecomment-461971",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/29269-reb](https://github.com/sagemath/sagetrac-mirror/tree/public/29269-reb)** to **[e1774f7](https://github.com/sagemath/sagetrac-mirror/commit/e1774f7b7b655503e640448d99d6e01e769df069)**



---

archive/issue_events_384170.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-05-02T21:57:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29269#event-384170"
}
```



---

archive/issue_events_384171.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "1302e46472c992ec56e296926c99688d5e2f7a72",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-05-02T21:57:59Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29269",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29269#event-384171"
}
```
