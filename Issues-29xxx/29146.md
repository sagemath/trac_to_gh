# Issue 29146: Meta-ticket: Refactor and improve system package related scripts, tox.ini, build/bin/write_dockerfile.sh

archive/issues_028909.json:
```json
{
    "body": "Improvements to low-level system packages scripts:\n- #30861, #30865, #30947, #30951, #30968: Refactor system package code in `tox.ini`, `build/bin/write_dockerfile.sh` by extending and using `sage_bootstrap`\n- #33873: Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` \n- #29041 sage_bootstrap: Add command \"sage -package list --output={install-requires,requirements,pipfile,debian,....}\"\n- #33860 sage-package: Add commands \"dependencies\", \"trees\"\n\nImprovements to the system package database:\n- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap\n- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`\n\nImprovements to `tox docker`:\n- #29536 Make docker images from [GitHub](GitHub) CI workflow and regular Sage Docker images interoperable\n- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache\n- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)\n- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached\n- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)\n- setenv/passenv SAGE_SERVER\n- Remove `TARGETS_PRE`/`TARGETS` distinction: Instead leave a stamp file and exit from make with an error to trigger the ADD of src/; for example, add `sagelib` dependency on `$(SAGE_SRC)/sage`, and add the rule to Makefile:\n\n```\n$(SAGE_SRC)/sage:\n\ttouch .need_src; exit 1\n```\n- use environment variable `MAKE` for docker builds as well, instead of asking users to pass the `USE_MAKEFLAGS` variable\n\nImprovements to `tox local`:\n- #31216: tox.ini (local): Add environment variables to skip system package installs, mechanism for a local interactive shell\n- #31064: `ci-cygwin*.yml`: delegate to `tox`, add more stages, use more specific `SAGE_LOCAL`\n- #21469: Enable VPATH builds (several independent build trees connected to one source tree)\n- #29416: tox.ini: Add local-copy\n- the complicated rule for the commands of `local` consists entirely of workarounds for things that should really be fixed/improved in our `Makefile`s:\n   - #30721: `build/make/Makefile.in`: `base-toolchain` should be a dependency of every non-base, non-toolchain package\n   - #32785: `tox.ini` and `build/bin/write-dockerfile.sh` use better defaults for `SAGE_CHECK_PACKAGES`; this should be moved to `build/make/Makefile.in` (`SAGE_CHECK_PACKAGES_DEFAULT_yes`).\n   - #31535 New make targets \"sagelib-sdist\", \"sage_docbuild-sdist\", ... and \"sagelib-tox-...\", ...\nOther improvements to `tox.ini`:\n- #32764: Make `tox -p auto` and `tox --listenvs` useful again (it does not understand the nested braces)\n- #31574: `tox.ini`, `build/bin/write-dockerfile.sh`: Do not use `make -k` by default\n\nImprovements to auto-generated parts of the manuals:\n- #29558 Autogenerated parts of installation guide\n- #29557 Add script package `_recommended` and generate \"recommended system packages\" info\n\nImprovements for messages at the end of a `./configure` run:\n- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated\n- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense\n- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed\n- #30624: Improve wording and formatting of configure's recommendation message\n- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately\n- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)\n- #32060 `configure`: Change defaults to `--with-system-gcc=force`, `--with-system-python3=force`\n- #29586: Improve configure's recommendations\n- #30863: refine definition of variable SAGE_NEED_SYSTEM_PACKAGES in m4/sage_spkg_collect.m4\n\nTickets regarding `sage_bootstrap`:\n- #20023 `sage_bootstrap`: Remove Python 2.6 support\n- #20104 `sage --package`: Add commands `list :standard:`, `update-latest` (for packages from PyPI), `upload`\n- #29919 Restore \"huge\" package type\n\nSee also: \n- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages\n\n\nCC:  @embray @vbraun @dimpase @jhpalmieri @sheerluck @slel @tobiasdiez @seblabbe\n\nBranch: u/mkoeppe/meta_ticket__refactor_and_improve_system_package_related_scripts__tox_ini__build_bin_write_dockerfile_sh\n\nStatus: new\n\nDependencies: #29417\n\nCommit: fd9b928d573b6740a9aadb1dca04a066d268cc26\n\nIssue created by migration from https://trac.sagemath.org/ticket/29146\n\n",
    "created_at": "2020-02-03T14:05:35Z",
    "labels": [
        "component: build",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Meta-ticket: Refactor and improve system package related scripts, tox.ini, build/bin/write_dockerfile.sh",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29146",
    "user": "https://github.com/mkoeppe"
}
```
Improvements to low-level system packages scripts:
- #30861, #30865, #30947, #30951, #30968: Refactor system package code in `tox.ini`, `build/bin/write_dockerfile.sh` by extending and using `sage_bootstrap`
- #33873: Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` 
- #29041 sage_bootstrap: Add command "sage -package list --output={install-requires,requirements,pipfile,debian,....}"
- #33860 sage-package: Add commands "dependencies", "trees"

Improvements to the system package database:
- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap
- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`

Improvements to `tox docker`:
- #29536 Make docker images from [GitHub](GitHub) CI workflow and regular Sage Docker images interoperable
- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache
- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)
- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached
- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)
- setenv/passenv SAGE_SERVER
- Remove `TARGETS_PRE`/`TARGETS` distinction: Instead leave a stamp file and exit from make with an error to trigger the ADD of src/; for example, add `sagelib` dependency on `$(SAGE_SRC)/sage`, and add the rule to Makefile:

```
$(SAGE_SRC)/sage:
	touch .need_src; exit 1
```
- use environment variable `MAKE` for docker builds as well, instead of asking users to pass the `USE_MAKEFLAGS` variable

Improvements to `tox local`:
- #31216: tox.ini (local): Add environment variables to skip system package installs, mechanism for a local interactive shell
- #31064: `ci-cygwin*.yml`: delegate to `tox`, add more stages, use more specific `SAGE_LOCAL`
- #21469: Enable VPATH builds (several independent build trees connected to one source tree)
- #29416: tox.ini: Add local-copy
- the complicated rule for the commands of `local` consists entirely of workarounds for things that should really be fixed/improved in our `Makefile`s:
   - #30721: `build/make/Makefile.in`: `base-toolchain` should be a dependency of every non-base, non-toolchain package
   - #32785: `tox.ini` and `build/bin/write-dockerfile.sh` use better defaults for `SAGE_CHECK_PACKAGES`; this should be moved to `build/make/Makefile.in` (`SAGE_CHECK_PACKAGES_DEFAULT_yes`).
   - #31535 New make targets "sagelib-sdist", "sage_docbuild-sdist", ... and "sagelib-tox-...", ...
Other improvements to `tox.ini`:
- #32764: Make `tox -p auto` and `tox --listenvs` useful again (it does not understand the nested braces)
- #31574: `tox.ini`, `build/bin/write-dockerfile.sh`: Do not use `make -k` by default

Improvements to auto-generated parts of the manuals:
- #29558 Autogenerated parts of installation guide
- #29557 Add script package `_recommended` and generate "recommended system packages" info

Improvements for messages at the end of a `./configure` run:
- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated
- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense
- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed
- #30624: Improve wording and formatting of configure's recommendation message
- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately
- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)
- #32060 `configure`: Change defaults to `--with-system-gcc=force`, `--with-system-python3=force`
- #29586: Improve configure's recommendations
- #30863: refine definition of variable SAGE_NEED_SYSTEM_PACKAGES in m4/sage_spkg_collect.m4

Tickets regarding `sage_bootstrap`:
- #20023 `sage_bootstrap`: Remove Python 2.6 support
- #20104 `sage --package`: Add commands `list :standard:`, `update-latest` (for packages from PyPI), `upload`
- #29919 Restore "huge" package type

See also: 
- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages


CC:  @embray @vbraun @dimpase @jhpalmieri @sheerluck @slel @tobiasdiez @seblabbe

Branch: u/mkoeppe/meta_ticket__refactor_and_improve_system_package_related_scripts__tox_ini__build_bin_write_dockerfile_sh

Status: new

Dependencies: #29417

Commit: fd9b928d573b6740a9aadb1dca04a066d268cc26

Issue created by migration from https://trac.sagemath.org/ticket/29146





---

archive/issue_comments_435783.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -3,6 +3,10 @@\n - instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.\n - helper scripts for extracting lists of packages according to criteria\n - possibly, by extending and using `sage_bootstrap`\n+\n+Also:\n+- distribution-specific commands such as `apt-get install` are in both `build/bin/write_dockerfile.sh` and `build/bin/sage-spkg`. This could be unified as well, or be obtained from another text file etc.\n+\n \n Comment: 1\n \n```\n",
    "created_at": "2020-02-05T20:19:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435783",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -3,6 +3,10 @@
 - instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.
 - helper scripts for extracting lists of packages according to criteria
 - possibly, by extending and using `sage_bootstrap`
+
+Also:
+- distribution-specific commands such as `apt-get install` are in both `build/bin/write_dockerfile.sh` and `build/bin/sage-spkg`. This could be unified as well, or be obtained from another text file etc.
+
 
 Comment: 1
 
```




---

archive/issue_comments_435784.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,12 @@\n+`build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.\n+\n+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.\n+- helper scripts for extracting lists of packages according to criteria\n+- possibly, by extending and using `sage_bootstrap`\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+\n+Also:\n+- distribution-specific commands such as `apt-get install` are in both `build/bin/write_dockerfile.sh` and `build/bin/sage-spkg`. This could be unified as well, or be obtained from another text file etc.\n \n \n Comment: 1\n```\n",
    "created_at": "2020-02-06T20:16:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435784",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,12 @@
+`build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.
+
+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.
+- helper scripts for extracting lists of packages according to criteria
+- possibly, by extending and using `sage_bootstrap`
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+
+Also:
+- distribution-specific commands such as `apt-get install` are in both `build/bin/write_dockerfile.sh` and `build/bin/sage-spkg`. This could be unified as well, or be obtained from another text file etc.
 
 
 Comment: 1
```




---

archive/issue_comments_435785.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,12 @@\n+`build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.\n+\n+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.\n+- helper scripts for extracting lists of packages according to criteria\n+- possibly, by extending and using `sage_bootstrap`\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+\n+Also:\n+- distribution-specific commands such as `apt-get install` are in both `build/bin/write_dockerfile.sh` and `build/bin/sage-spkg`. This could be unified as well, or be obtained from another text file etc., by using/extending `build/bin/sage-print-system-package-command` from #26964\n \n \n Comment: 1\n```\n",
    "created_at": "2020-02-09T22:40:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435785",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,12 @@
+`build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.
+
+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.
+- helper scripts for extracting lists of packages according to criteria
+- possibly, by extending and using `sage_bootstrap`
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+
+Also:
+- distribution-specific commands such as `apt-get install` are in both `build/bin/write_dockerfile.sh` and `build/bin/sage-spkg`. This could be unified as well, or be obtained from another text file etc., by using/extending `build/bin/sage-print-system-package-command` from #26964
 
 
 Comment: 1
```




---

archive/issue_comments_435786.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,13 @@\n+`build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.\n+\n+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.\n+- helper scripts for extracting lists of packages according to criteria\n+- possibly, by extending and using `sage_bootstrap`\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+- cache Docker images with system packages installed \n+\n+Also:\n+- distribution-specific commands such as `apt-get install` are in both `build/bin/write_dockerfile.sh` and `build/bin/sage-spkg`. This could be unified as well, or be obtained from another text file etc., by using/extending `build/bin/sage-print-system-package-command` from #26964\n \n \n Comment: 1\n```\n",
    "created_at": "2020-03-09T16:24:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435786",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,13 @@
+`build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.
+
+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.
+- helper scripts for extracting lists of packages according to criteria
+- possibly, by extending and using `sage_bootstrap`
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+- cache Docker images with system packages installed 
+
+Also:
+- distribution-specific commands such as `apt-get install` are in both `build/bin/write_dockerfile.sh` and `build/bin/sage-spkg`. This could be unified as well, or be obtained from another text file etc., by using/extending `build/bin/sage-print-system-package-command` from #26964
 
 
 Comment: 1
```




---

archive/issue_comments_435787.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,13 @@\n+`build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.\n+\n+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.\n+- helper scripts for extracting lists of packages according to criteria\n+- possibly, by extending and using `sage_bootstrap`\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache\n+\n+Also:\n+- distribution-specific commands such as `apt-get install` are in both `build/bin/write_dockerfile.sh` and `build/bin/sage-spkg`. This could be unified as well, or be obtained from another text file etc., by using/extending `build/bin/sage-print-system-package-command` from #26964\n \n \n Comment: 1\n```\n",
    "created_at": "2020-03-14T21:43:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435787",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,13 @@
+`build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.
+
+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.
+- helper scripts for extracting lists of packages according to criteria
+- possibly, by extending and using `sage_bootstrap`
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache
+
+Also:
+- distribution-specific commands such as `apt-get install` are in both `build/bin/write_dockerfile.sh` and `build/bin/sage-spkg`. This could be unified as well, or be obtained from another text file etc., by using/extending `build/bin/sage-print-system-package-command` from #26964
 
 
 Comment: 1
```




---

archive/issue_comments_435788.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,16 @@\n+`build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.\n+\n+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.\n+- helper scripts for extracting lists of packages according to criteria\n+- possibly, by extending and using `sage_bootstrap`\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache\n+\n+tox.ini:\n+- Add user option for configuring number of threads used \n+\n+Also:\n+- distribution-specific commands such as `apt-get install` are in both `build/bin/write_dockerfile.sh` and `build/bin/sage-spkg`. This could be unified as well, or be obtained from another text file etc., by using/extending `build/bin/sage-print-system-package-command` from #26964\n \n \n Comment: 1\n```\n",
    "created_at": "2020-03-20T02:57:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435788",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,16 @@
+`build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.
+
+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.
+- helper scripts for extracting lists of packages according to criteria
+- possibly, by extending and using `sage_bootstrap`
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache
+
+tox.ini:
+- Add user option for configuring number of threads used 
+
+Also:
+- distribution-specific commands such as `apt-get install` are in both `build/bin/write_dockerfile.sh` and `build/bin/sage-spkg`. This could be unified as well, or be obtained from another text file etc., by using/extending `build/bin/sage-print-system-package-command` from #26964
 
 
 Comment: 1
```




---

archive/issue_comments_435789.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,17 @@\n+`build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.\n+\n+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.\n+- helper scripts for extracting lists of packages according to criteria\n+- possibly, by extending and using `sage_bootstrap`\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache\n+- define shell quoting in debian .txt, handle options correctly when installing packages one by one \n+\n+tox.ini:\n+- Add user option for configuring number of threads used \n+\n+Also:\n+- distribution-specific commands such as `apt-get install` are in both `build/bin/write_dockerfile.sh` and `build/bin/sage-spkg`. This could be unified as well, or be obtained from another text file etc., by using/extending `build/bin/sage-print-system-package-command` from #26964\n \n \n Comment: 1\n```\n",
    "created_at": "2020-03-22T09:30:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435789",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,17 @@
+`build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.
+
+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.
+- helper scripts for extracting lists of packages according to criteria
+- possibly, by extending and using `sage_bootstrap`
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache
+- define shell quoting in debian .txt, handle options correctly when installing packages one by one 
+
+tox.ini:
+- Add user option for configuring number of threads used 
+
+Also:
+- distribution-specific commands such as `apt-get install` are in both `build/bin/write_dockerfile.sh` and `build/bin/sage-spkg`. This could be unified as well, or be obtained from another text file etc., by using/extending `build/bin/sage-print-system-package-command` from #26964
 
 
 Comment: 1
```




---

archive/issue_comments_435790.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,23 @@\n+`build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.\n+\n+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.\n+- helper scripts for extracting lists of packages according to criteria\n+- possibly, by extending and using `sage_bootstrap`\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache\n+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one \n+\n+tox.ini:\n+- Add user option for configuring number of threads used \n+\n+Also:\n+- distribution-specific commands such as `apt-get install` are in both `build/bin/write_dockerfile.sh` and `build/bin/sage-spkg`. This could be unified as well, or be obtained from another text file etc., by using/extending `build/bin/sage-print-system-package-command` from #26964\n+\n+Related:\n+- #29363 - At the end of configure, indicate which optional/experimental packages are configured to be installed\n+- #29372 - At the end of configure, show installation hints for disabled optional packages separately\n+- #29087 - Add [GitHub](GitHub) Actions workflow for testing the build on various Linux distributions via docker; macOS with homebrew; and Windows (cygwin)\n+- #29401 - Add documentation of tox and [GitHub](GitHub) actions workflow to developer's manual\n \n \n Comment: 1\n```\n",
    "created_at": "2020-03-29T04:07:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435790",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,23 @@
+`build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.
+
+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.
+- helper scripts for extracting lists of packages according to criteria
+- possibly, by extending and using `sage_bootstrap`
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache
+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one 
+
+tox.ini:
+- Add user option for configuring number of threads used 
+
+Also:
+- distribution-specific commands such as `apt-get install` are in both `build/bin/write_dockerfile.sh` and `build/bin/sage-spkg`. This could be unified as well, or be obtained from another text file etc., by using/extending `build/bin/sage-print-system-package-command` from #26964
+
+Related:
+- #29363 - At the end of configure, indicate which optional/experimental packages are configured to be installed
+- #29372 - At the end of configure, show installation hints for disabled optional packages separately
+- #29087 - Add [GitHub](GitHub) Actions workflow for testing the build on various Linux distributions via docker; macOS with homebrew; and Windows (cygwin)
+- #29401 - Add documentation of tox and [GitHub](GitHub) actions workflow to developer's manual
 
 
 Comment: 1
```




---

archive/issue_comments_435791.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,24 @@\n+`build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.\n+\n+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.\n+- helper scripts for extracting lists of packages according to criteria\n+- possibly, by extending and using `sage_bootstrap`\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache\n+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one \n+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)\n+\n+tox.ini:\n+- Add user option for configuring number of threads used \n+\n+Also:\n+- distribution-specific commands such as `apt-get install` are in both `build/bin/write_dockerfile.sh` and `build/bin/sage-spkg`. This could be unified as well, or be obtained from another text file etc., by using/extending `build/bin/sage-print-system-package-command` from #26964\n+\n+Related:\n+- #29363 - At the end of configure, indicate which optional/experimental packages are configured to be installed\n+- #29372 - At the end of configure, show installation hints for disabled optional packages separately\n+- #29087 - Add [GitHub](GitHub) Actions workflow for testing the build on various Linux distributions via docker; macOS with homebrew; and Windows (cygwin)\n+- #29401 - Add documentation of tox and [GitHub](GitHub) actions workflow to developer's manual\n \n \n Comment: 1\n```\n",
    "created_at": "2020-03-29T04:08:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435791",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,24 @@
+`build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.
+
+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.
+- helper scripts for extracting lists of packages according to criteria
+- possibly, by extending and using `sage_bootstrap`
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache
+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one 
+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)
+
+tox.ini:
+- Add user option for configuring number of threads used 
+
+Also:
+- distribution-specific commands such as `apt-get install` are in both `build/bin/write_dockerfile.sh` and `build/bin/sage-spkg`. This could be unified as well, or be obtained from another text file etc., by using/extending `build/bin/sage-print-system-package-command` from #26964
+
+Related:
+- #29363 - At the end of configure, indicate which optional/experimental packages are configured to be installed
+- #29372 - At the end of configure, show installation hints for disabled optional packages separately
+- #29087 - Add [GitHub](GitHub) Actions workflow for testing the build on various Linux distributions via docker; macOS with homebrew; and Windows (cygwin)
+- #29401 - Add documentation of tox and [GitHub](GitHub) actions workflow to developer's manual
 
 
 Comment: 1
```




---

archive/issue_events_073947.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-09T23:16:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29146#event-73947"
}
```



---

archive/issue_comments_435792.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,25 @@\n+`build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.\n+\n+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.\n+- helper scripts for extracting lists of packages according to criteria\n+- possibly, by extending and using `sage_bootstrap`\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache\n+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one \n+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)\n+\n+tox.ini:\n+- Add user option for configuring number of threads used \n+\n+Also:\n+- distribution-specific commands such as `apt-get install` are in both `build/bin/write_dockerfile.sh` and `build/bin/sage-spkg`. This could be unified as well, or be obtained from another text file etc., by using/extending `build/bin/sage-print-system-package-command` from #26964\n+\n+Related:\n+- #29417 - has various improvements already \n+- #29363 - At the end of configure, indicate which optional/experimental packages are configured to be installed\n+- #29372 - At the end of configure, show installation hints for disabled optional packages separately\n+- #29087 - Add [GitHub](GitHub) Actions workflow for testing the build on various Linux distributions via docker; macOS with homebrew; and Windows (cygwin)\n+- #29401 - Add documentation of tox and [GitHub](GitHub) actions workflow to developer's manual\n \n \n Comment: 1\n```\n",
    "created_at": "2020-04-09T23:16:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435792",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,25 @@
+`build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.
+
+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.
+- helper scripts for extracting lists of packages according to criteria
+- possibly, by extending and using `sage_bootstrap`
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache
+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one 
+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)
+
+tox.ini:
+- Add user option for configuring number of threads used 
+
+Also:
+- distribution-specific commands such as `apt-get install` are in both `build/bin/write_dockerfile.sh` and `build/bin/sage-spkg`. This could be unified as well, or be obtained from another text file etc., by using/extending `build/bin/sage-print-system-package-command` from #26964
+
+Related:
+- #29417 - has various improvements already 
+- #29363 - At the end of configure, indicate which optional/experimental packages are configured to be installed
+- #29372 - At the end of configure, show installation hints for disabled optional packages separately
+- #29087 - Add [GitHub](GitHub) Actions workflow for testing the build on various Linux distributions via docker; macOS with homebrew; and Windows (cygwin)
+- #29401 - Add documentation of tox and [GitHub](GitHub) actions workflow to developer's manual
 
 
 Comment: 1
```




---

archive/issue_comments_435793.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,25 @@\n+`build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.\n+\n+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.\n+- helper scripts for extracting lists of packages according to criteria\n+- possibly, by extending and using `sage_bootstrap`\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache\n+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one \n+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)\n+\n+tox.ini:\n+- Obtain image from container of failing builds. Move&improve code from tox.yml. Use `docker ps --filter label=.... ` to look up the image more reliably (https://docs.docker.com/engine/reference/commandline/ps/)\n+\n+Also:\n+- distribution-specific commands such as `apt-get install` are in both `build/bin/write_dockerfile.sh` and `build/bin/sage-spkg`. This could be unified as well, or be obtained from another text file etc., by using/extending `build/bin/sage-print-system-package-command` from #26964\n+\n+Related:\n+- #29417 - has various improvements already \n+- #29363 - At the end of configure, indicate which optional/experimental packages are configured to be installed\n+- #29372 - At the end of configure, show installation hints for disabled optional packages separately\n+- #29087 - Add [GitHub](GitHub) Actions workflow for testing the build on various Linux distributions via docker; macOS with homebrew; and Windows (cygwin)\n+- #29401 - Add documentation of tox and [GitHub](GitHub) actions workflow to developer's manual\n \n \n Comment: 1\n```\n",
    "created_at": "2020-04-22T00:26:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435793",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,25 @@
+`build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.
+
+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.
+- helper scripts for extracting lists of packages according to criteria
+- possibly, by extending and using `sage_bootstrap`
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache
+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one 
+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)
+
+tox.ini:
+- Obtain image from container of failing builds. Move&improve code from tox.yml. Use `docker ps --filter label=.... ` to look up the image more reliably (https://docs.docker.com/engine/reference/commandline/ps/)
+
+Also:
+- distribution-specific commands such as `apt-get install` are in both `build/bin/write_dockerfile.sh` and `build/bin/sage-spkg`. This could be unified as well, or be obtained from another text file etc., by using/extending `build/bin/sage-print-system-package-command` from #26964
+
+Related:
+- #29417 - has various improvements already 
+- #29363 - At the end of configure, indicate which optional/experimental packages are configured to be installed
+- #29372 - At the end of configure, show installation hints for disabled optional packages separately
+- #29087 - Add [GitHub](GitHub) Actions workflow for testing the build on various Linux distributions via docker; macOS with homebrew; and Windows (cygwin)
+- #29401 - Add documentation of tox and [GitHub](GitHub) actions workflow to developer's manual
 
 
 Comment: 1
```




---

archive/issue_comments_435794.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,27 @@\n+`build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.\n+\n+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.\n+- helper scripts for extracting lists of packages according to criteria\n+- possibly, by extending and using `sage_bootstrap`\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache\n+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one \n+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)\n+\n+tox.ini:\n+- Obtain image from container of failing builds. Move&improve code from tox.yml. Use `docker ps --filter label=.... ` to look up the image more reliably (https://docs.docker.com/engine/reference/commandline/ps/)\n+\n+Also:\n+- distribution-specific commands such as `apt-get install` are in both `build/bin/write_dockerfile.sh` and `build/bin/sage-spkg`. This could be unified as well, or be obtained from another text file etc., by using/extending `build/bin/sage-print-system-package-command` from #26964\n+\n+Related:\n+- #29417 - has various improvements already \n+- #29087 - Add [GitHub](GitHub) Actions workflow for testing the build on various Linux distributions via docker; macOS with homebrew; and Windows (cygwin)\n+- #29401 - Add documentation of tox and [GitHub](GitHub) actions workflow to developer's manual\n+\n+Wishlist items:\n+- #29363 - At the end of configure, indicate which optional/experimental packages are configured to be installed\n+- #29372 - At the end of configure, show installation hints for disabled optional packages separately\n \n \n Comment: 1\n```\n",
    "created_at": "2020-04-25T17:53:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435794",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,27 @@
+`build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.
+
+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.
+- helper scripts for extracting lists of packages according to criteria
+- possibly, by extending and using `sage_bootstrap`
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache
+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one 
+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)
+
+tox.ini:
+- Obtain image from container of failing builds. Move&improve code from tox.yml. Use `docker ps --filter label=.... ` to look up the image more reliably (https://docs.docker.com/engine/reference/commandline/ps/)
+
+Also:
+- distribution-specific commands such as `apt-get install` are in both `build/bin/write_dockerfile.sh` and `build/bin/sage-spkg`. This could be unified as well, or be obtained from another text file etc., by using/extending `build/bin/sage-print-system-package-command` from #26964
+
+Related:
+- #29417 - has various improvements already 
+- #29087 - Add [GitHub](GitHub) Actions workflow for testing the build on various Linux distributions via docker; macOS with homebrew; and Windows (cygwin)
+- #29401 - Add documentation of tox and [GitHub](GitHub) actions workflow to developer's manual
+
+Wishlist items:
+- #29363 - At the end of configure, indicate which optional/experimental packages are configured to be installed
+- #29372 - At the end of configure, show installation hints for disabled optional packages separately
 
 
 Comment: 1
```




---

archive/issue_comments_435795.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,27 @@\n+`build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.\n+\n+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.\n+- helper scripts for extracting lists of packages according to criteria\n+- possibly, by extending and using `sage_bootstrap`\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache\n+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one \n+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)\n+\n+tox.ini:\n+- Obtain image from container of failing builds. Move&improve code from tox.yml. Use `docker ps --filter label=.... ` to look up the image more reliably (https://docs.docker.com/engine/reference/commandline/ps/)\n+\n+Also:\n+- distribution-specific commands such as `apt-get install` are in both `build/bin/write_dockerfile.sh` and `build/bin/sage-spkg`. This could be unified as well, or be obtained from another text file etc., by using/extending `build/bin/sage-print-system-package-command` from #26964\n+\n+Related:\n+- #29417 - has various improvements already \n+- #29087 - Add [GitHub](GitHub) Actions workflow for testing the build on various Linux distributions via docker; macOS with homebrew; and Windows (cygwin)\n+- #29401 - Add documentation of tox and [GitHub](GitHub) actions workflow to developer's manual\n+\n+Wishlist items for messages at the end of configure:\n+- #29363 - At the end of configure, indicate which optional/experimental packages are configured to be installed\n+- #29372 - At the end of configure, show installation hints for disabled optional packages separately\n \n \n Comment: 1\n```\n",
    "created_at": "2020-04-25T17:54:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435795",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,27 @@
+`build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.
+
+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.
+- helper scripts for extracting lists of packages according to criteria
+- possibly, by extending and using `sage_bootstrap`
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache
+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one 
+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)
+
+tox.ini:
+- Obtain image from container of failing builds. Move&improve code from tox.yml. Use `docker ps --filter label=.... ` to look up the image more reliably (https://docs.docker.com/engine/reference/commandline/ps/)
+
+Also:
+- distribution-specific commands such as `apt-get install` are in both `build/bin/write_dockerfile.sh` and `build/bin/sage-spkg`. This could be unified as well, or be obtained from another text file etc., by using/extending `build/bin/sage-print-system-package-command` from #26964
+
+Related:
+- #29417 - has various improvements already 
+- #29087 - Add [GitHub](GitHub) Actions workflow for testing the build on various Linux distributions via docker; macOS with homebrew; and Windows (cygwin)
+- #29401 - Add documentation of tox and [GitHub](GitHub) actions workflow to developer's manual
+
+Wishlist items for messages at the end of configure:
+- #29363 - At the end of configure, indicate which optional/experimental packages are configured to be installed
+- #29372 - At the end of configure, show installation hints for disabled optional packages separately
 
 
 Comment: 1
```




---

archive/issue_comments_435796.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,31 @@\n+`build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.\n+\n+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.\n+- helper scripts for extracting lists of packages according to criteria\n+- possibly, by extending and using `sage_bootstrap`\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache\n+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one \n+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)\n+\n+tox.ini:\n+- Obtain image from container of failing builds. Move&improve code from tox.yml. Use `docker ps --filter label=.... ` to look up the image more reliably (https://docs.docker.com/engine/reference/commandline/ps/)\n+\n+Also:\n+- distribution-specific commands such as `apt-get install` are in both `build/bin/write_dockerfile.sh` and `build/bin/sage-spkg`. This could be unified as well, or be obtained from another text file etc., by using/extending `build/bin/sage-print-system-package-command` from #26964\n+\n+Related:\n+- #29417 - has various improvements already \n+- #29087 - Add [GitHub](GitHub) Actions workflow for testing the build on various Linux distributions via docker; macOS with homebrew; and Windows (cygwin)\n+- #29401 - Add documentation of tox and [GitHub](GitHub) actions workflow to developer's manual\n+\n+Improvements to auto-generated parts of the manuals:\n+- #29558 Autogenerated parts of installation guide\n+\n+Improvements for messages at the end of a `./configure` run:\n+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated\n+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed\n+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately\n \n \n Comment: 1\n```\n",
    "created_at": "2020-04-25T18:08:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435796",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,31 @@
+`build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.
+
+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.
+- helper scripts for extracting lists of packages according to criteria
+- possibly, by extending and using `sage_bootstrap`
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache
+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one 
+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)
+
+tox.ini:
+- Obtain image from container of failing builds. Move&improve code from tox.yml. Use `docker ps --filter label=.... ` to look up the image more reliably (https://docs.docker.com/engine/reference/commandline/ps/)
+
+Also:
+- distribution-specific commands such as `apt-get install` are in both `build/bin/write_dockerfile.sh` and `build/bin/sage-spkg`. This could be unified as well, or be obtained from another text file etc., by using/extending `build/bin/sage-print-system-package-command` from #26964
+
+Related:
+- #29417 - has various improvements already 
+- #29087 - Add [GitHub](GitHub) Actions workflow for testing the build on various Linux distributions via docker; macOS with homebrew; and Windows (cygwin)
+- #29401 - Add documentation of tox and [GitHub](GitHub) actions workflow to developer's manual
+
+Improvements to auto-generated parts of the manuals:
+- #29558 Autogenerated parts of installation guide
+
+Improvements for messages at the end of a `./configure` run:
+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated
+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed
+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately
 
 
 Comment: 1
```




---

archive/issue_comments_435797.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,31 @@\n+`build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.\n+\n+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.\n+- helper scripts for extracting lists of packages according to criteria\n+- possibly, by extending and using `sage_bootstrap`\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache\n+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one \n+\n+tox.ini:\n+- Obtain image from container of failing builds. Move&improve code from tox.yml. Use `docker ps --filter label=.... ` to look up the image more reliably (https://docs.docker.com/engine/reference/commandline/ps/)\n+\n+Also:\n+- distribution-specific commands such as `apt-get install` are in both `build/bin/write_dockerfile.sh` and `build/bin/sage-spkg`. This could be unified as well, or be obtained from another text file etc., by using/extending `build/bin/sage-print-system-package-command` from #26964\n+\n+Related:\n+- #29417 - has various improvements already \n+- #29087 - Add [GitHub](GitHub) Actions workflow for testing the build on various Linux distributions via docker; macOS with homebrew; and Windows (cygwin)\n+- #29401 - Add documentation of tox and [GitHub](GitHub) actions workflow to developer's manual\n+\n+Improvements to auto-generated parts of the manuals:\n+- #29558 Autogenerated parts of installation guide\n+\n+Improvements for messages at the end of a `./configure` run:\n+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated\n+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed\n+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately\n+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)\n \n \n Comment: 1\n```\n",
    "created_at": "2020-04-25T18:16:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435797",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,31 @@
+`build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.
+
+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.
+- helper scripts for extracting lists of packages according to criteria
+- possibly, by extending and using `sage_bootstrap`
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache
+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one 
+
+tox.ini:
+- Obtain image from container of failing builds. Move&improve code from tox.yml. Use `docker ps --filter label=.... ` to look up the image more reliably (https://docs.docker.com/engine/reference/commandline/ps/)
+
+Also:
+- distribution-specific commands such as `apt-get install` are in both `build/bin/write_dockerfile.sh` and `build/bin/sage-spkg`. This could be unified as well, or be obtained from another text file etc., by using/extending `build/bin/sage-print-system-package-command` from #26964
+
+Related:
+- #29417 - has various improvements already 
+- #29087 - Add [GitHub](GitHub) Actions workflow for testing the build on various Linux distributions via docker; macOS with homebrew; and Windows (cygwin)
+- #29401 - Add documentation of tox and [GitHub](GitHub) actions workflow to developer's manual
+
+Improvements to auto-generated parts of the manuals:
+- #29558 Autogenerated parts of installation guide
+
+Improvements for messages at the end of a `./configure` run:
+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated
+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed
+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately
+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)
 
 
 Comment: 1
```




---

archive/issue_comments_435798.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,35 @@\n+Improvements to low-level system packages scripts:\n+- `build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.\n+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.\n+- helper scripts for extracting lists of packages according to criteria\n+- possibly, by extending and using `sage_bootstrap`\n+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` \n+\n+Improvements to the system package database:\n+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`\n+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap\n+\n+Improvements to `tox docker`:\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache\n+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)\n+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)\n+\n+Improvements to `tox local`:\n+- \n+\n+Improvements to auto-generated parts of the manuals:\n+- #29558 Autogenerated parts of installation guide\n+- #29557 Add script package `_recommended` and generate \"recommended system packages\" info\n+\n+Improvements for messages at the end of a `./configure` run:\n+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated\n+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed\n+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately\n+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)\n+\n+See also: \n+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages\n \n \n Comment: 1\n```\n",
    "created_at": "2020-04-25T18:42:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435798",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,35 @@
+Improvements to low-level system packages scripts:
+- `build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.
+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.
+- helper scripts for extracting lists of packages according to criteria
+- possibly, by extending and using `sage_bootstrap`
+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` 
+
+Improvements to the system package database:
+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`
+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap
+
+Improvements to `tox docker`:
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache
+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)
+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)
+
+Improvements to `tox local`:
+- 
+
+Improvements to auto-generated parts of the manuals:
+- #29558 Autogenerated parts of installation guide
+- #29557 Add script package `_recommended` and generate "recommended system packages" info
+
+Improvements for messages at the end of a `./configure` run:
+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated
+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed
+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately
+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)
+
+See also: 
+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages
 
 
 Comment: 1
```




---

archive/issue_comments_435799.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,39 @@\n+Improvements to low-level system packages scripts:\n+- `build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.\n+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.\n+- helper scripts for extracting lists of packages according to criteria\n+- possibly, by extending and using `sage_bootstrap`\n+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` \n+\n+Improvements to the system package database:\n+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`\n+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap\n+\n+Improvements to `tox docker`:\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache\n+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)\n+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)\n+\n+Improvements to `tox local`:\n+- #29416: tox.ini: Add local-copy\n+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)\n+\n+Other improvements to `tox.ini`:\n+- Make `tox -p auto` useful again (it does not understand the nested braces)\n+\n+Improvements to auto-generated parts of the manuals:\n+- #29558 Autogenerated parts of installation guide\n+- #29557 Add script package `_recommended` and generate \"recommended system packages\" info\n+\n+Improvements for messages at the end of a `./configure` run:\n+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated\n+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed\n+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately\n+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)\n+\n+See also: \n+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages\n \n \n Comment: 1\n```\n",
    "created_at": "2020-04-25T18:45:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435799",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,39 @@
+Improvements to low-level system packages scripts:
+- `build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.
+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.
+- helper scripts for extracting lists of packages according to criteria
+- possibly, by extending and using `sage_bootstrap`
+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` 
+
+Improvements to the system package database:
+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`
+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap
+
+Improvements to `tox docker`:
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache
+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)
+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)
+
+Improvements to `tox local`:
+- #29416: tox.ini: Add local-copy
+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)
+
+Other improvements to `tox.ini`:
+- Make `tox -p auto` useful again (it does not understand the nested braces)
+
+Improvements to auto-generated parts of the manuals:
+- #29558 Autogenerated parts of installation guide
+- #29557 Add script package `_recommended` and generate "recommended system packages" info
+
+Improvements for messages at the end of a `./configure` run:
+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated
+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed
+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately
+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)
+
+See also: 
+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages
 
 
 Comment: 1
```




---

archive/issue_comments_435800.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,40 @@\n+Improvements to low-level system packages scripts:\n+- `build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.\n+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.\n+- helper scripts for extracting lists of packages according to criteria\n+- possibly, by extending and using `sage_bootstrap`\n+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` \n+\n+Improvements to the system package database:\n+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`\n+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap\n+\n+Improvements to `tox docker`:\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache\n+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)\n+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)\n+\n+Improvements to `tox local`:\n+- #29416: tox.ini: Add local-copy\n+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)\n+\n+Other improvements to `tox.ini`:\n+- Make `tox -p auto` useful again (it does not understand the nested braces)\n+\n+Improvements to auto-generated parts of the manuals:\n+- #29558 Autogenerated parts of installation guide\n+- #29557 Add script package `_recommended` and generate \"recommended system packages\" info\n+\n+Improvements for messages at the end of a `./configure` run:\n+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated\n+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense\n+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed\n+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately\n+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)\n+\n+See also: \n+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages\n \n \n Comment: 1\n```\n",
    "created_at": "2020-04-25T22:51:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435800",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,40 @@
+Improvements to low-level system packages scripts:
+- `build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.
+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.
+- helper scripts for extracting lists of packages according to criteria
+- possibly, by extending and using `sage_bootstrap`
+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` 
+
+Improvements to the system package database:
+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`
+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap
+
+Improvements to `tox docker`:
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache
+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)
+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)
+
+Improvements to `tox local`:
+- #29416: tox.ini: Add local-copy
+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)
+
+Other improvements to `tox.ini`:
+- Make `tox -p auto` useful again (it does not understand the nested braces)
+
+Improvements to auto-generated parts of the manuals:
+- #29558 Autogenerated parts of installation guide
+- #29557 Add script package `_recommended` and generate "recommended system packages" info
+
+Improvements for messages at the end of a `./configure` run:
+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated
+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense
+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed
+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately
+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)
+
+See also: 
+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages
 
 
 Comment: 1
```




---

archive/issue_comments_435801.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,41 @@\n+Improvements to low-level system packages scripts:\n+- `build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.\n+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.\n+- helper scripts for extracting lists of packages according to criteria\n+- possibly, by extending and using `sage_bootstrap`\n+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` \n+\n+Improvements to the system package database:\n+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`\n+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap\n+\n+Improvements to `tox docker`:\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache\n+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)\n+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)\n+\n+Improvements to `tox local`:\n+- #29416: tox.ini: Add local-copy\n+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)\n+\n+Other improvements to `tox.ini`:\n+- Make `tox -p auto` useful again (it does not understand the nested braces)\n+\n+Improvements to auto-generated parts of the manuals:\n+- #29558 Autogenerated parts of installation guide\n+- #29557 Add script package `_recommended` and generate \"recommended system packages\" info\n+\n+Improvements for messages at the end of a `./configure` run:\n+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated\n+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense\n+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed\n+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately\n+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)\n+- #29586: Improve configure's recommendations\n+\n+See also: \n+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages\n \n \n Comment: 1\n```\n",
    "created_at": "2020-04-26T03:47:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435801",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,41 @@
+Improvements to low-level system packages scripts:
+- `build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.
+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.
+- helper scripts for extracting lists of packages according to criteria
+- possibly, by extending and using `sage_bootstrap`
+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` 
+
+Improvements to the system package database:
+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`
+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap
+
+Improvements to `tox docker`:
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache
+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)
+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)
+
+Improvements to `tox local`:
+- #29416: tox.ini: Add local-copy
+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)
+
+Other improvements to `tox.ini`:
+- Make `tox -p auto` useful again (it does not understand the nested braces)
+
+Improvements to auto-generated parts of the manuals:
+- #29558 Autogenerated parts of installation guide
+- #29557 Add script package `_recommended` and generate "recommended system packages" info
+
+Improvements for messages at the end of a `./configure` run:
+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated
+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense
+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed
+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately
+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)
+- #29586: Improve configure's recommendations
+
+See also: 
+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages
 
 
 Comment: 1
```




---

archive/issue_comments_435802.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,42 @@\n+Improvements to low-level system packages scripts:\n+- `build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.\n+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.\n+- helper scripts for extracting lists of packages according to criteria\n+- possibly, by extending and using `sage_bootstrap`\n+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` \n+\n+Improvements to the system package database:\n+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`\n+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap\n+\n+Improvements to `tox docker`:\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache\n+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)\n+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached\n+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)\n+\n+Improvements to `tox local`:\n+- #29416: tox.ini: Add local-copy\n+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)\n+\n+Other improvements to `tox.ini`:\n+- Make `tox -p auto` useful again (it does not understand the nested braces)\n+\n+Improvements to auto-generated parts of the manuals:\n+- #29558 Autogenerated parts of installation guide\n+- #29557 Add script package `_recommended` and generate \"recommended system packages\" info\n+\n+Improvements for messages at the end of a `./configure` run:\n+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated\n+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense\n+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed\n+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately\n+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)\n+- #29586: Improve configure's recommendations\n+\n+See also: \n+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages\n \n \n Comment: 1\n```\n",
    "created_at": "2020-04-27T05:10:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435802",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,42 @@
+Improvements to low-level system packages scripts:
+- `build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.
+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.
+- helper scripts for extracting lists of packages according to criteria
+- possibly, by extending and using `sage_bootstrap`
+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` 
+
+Improvements to the system package database:
+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`
+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap
+
+Improvements to `tox docker`:
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache
+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)
+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached
+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)
+
+Improvements to `tox local`:
+- #29416: tox.ini: Add local-copy
+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)
+
+Other improvements to `tox.ini`:
+- Make `tox -p auto` useful again (it does not understand the nested braces)
+
+Improvements to auto-generated parts of the manuals:
+- #29558 Autogenerated parts of installation guide
+- #29557 Add script package `_recommended` and generate "recommended system packages" info
+
+Improvements for messages at the end of a `./configure` run:
+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated
+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense
+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed
+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately
+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)
+- #29586: Improve configure's recommendations
+
+See also: 
+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages
 
 
 Comment: 1
```




---

archive/issue_comments_435803.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,43 @@\n+Improvements to low-level system packages scripts:\n+- `build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.\n+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.\n+- helper scripts for extracting lists of packages according to criteria\n+- possibly, by extending and using `sage_bootstrap`\n+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` \n+\n+Improvements to the system package database:\n+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`\n+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap\n+\n+Improvements to `tox docker`:\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache\n+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)\n+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached\n+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)\n+- setenv/passenv SAGE_SERVER\n+\n+Improvements to `tox local`:\n+- #29416: tox.ini: Add local-copy\n+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)\n+\n+Other improvements to `tox.ini`:\n+- Make `tox -p auto` useful again (it does not understand the nested braces)\n+\n+Improvements to auto-generated parts of the manuals:\n+- #29558 Autogenerated parts of installation guide\n+- #29557 Add script package `_recommended` and generate \"recommended system packages\" info\n+\n+Improvements for messages at the end of a `./configure` run:\n+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated\n+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense\n+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed\n+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately\n+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)\n+- #29586: Improve configure's recommendations\n+\n+See also: \n+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages\n \n \n Comment: 1\n```\n",
    "created_at": "2020-04-28T00:12:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435803",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,43 @@
+Improvements to low-level system packages scripts:
+- `build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.
+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.
+- helper scripts for extracting lists of packages according to criteria
+- possibly, by extending and using `sage_bootstrap`
+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` 
+
+Improvements to the system package database:
+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`
+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap
+
+Improvements to `tox docker`:
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache
+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)
+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached
+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)
+- setenv/passenv SAGE_SERVER
+
+Improvements to `tox local`:
+- #29416: tox.ini: Add local-copy
+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)
+
+Other improvements to `tox.ini`:
+- Make `tox -p auto` useful again (it does not understand the nested braces)
+
+Improvements to auto-generated parts of the manuals:
+- #29558 Autogenerated parts of installation guide
+- #29557 Add script package `_recommended` and generate "recommended system packages" info
+
+Improvements for messages at the end of a `./configure` run:
+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated
+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense
+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed
+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately
+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)
+- #29586: Improve configure's recommendations
+
+See also: 
+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages
 
 
 Comment: 1
```




---

archive/issue_comments_435804.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,44 @@\n+Improvements to low-level system packages scripts:\n+- `build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.\n+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.\n+- helper scripts for extracting lists of packages according to criteria\n+- possibly, by extending and using `sage_bootstrap`\n+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` \n+\n+Improvements to the system package database:\n+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`\n+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap\n+\n+Improvements to `tox docker`:\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache\n+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)\n+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached\n+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)\n+- setenv/passenv SAGE_SERVER\n+- Remove TARGETS_PRE/TARGETS distinction: Instead exit from make with a distinctive error code to trigger the ADD of src/\n+\n+Improvements to `tox local`:\n+- #29416: tox.ini: Add local-copy\n+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)\n+\n+Other improvements to `tox.ini`:\n+- Make `tox -p auto` useful again (it does not understand the nested braces)\n+\n+Improvements to auto-generated parts of the manuals:\n+- #29558 Autogenerated parts of installation guide\n+- #29557 Add script package `_recommended` and generate \"recommended system packages\" info\n+\n+Improvements for messages at the end of a `./configure` run:\n+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated\n+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense\n+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed\n+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately\n+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)\n+- #29586: Improve configure's recommendations\n+\n+See also: \n+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages\n \n \n Comment: 1\n```\n",
    "created_at": "2020-04-28T17:26:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435804",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,44 @@
+Improvements to low-level system packages scripts:
+- `build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.
+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.
+- helper scripts for extracting lists of packages according to criteria
+- possibly, by extending and using `sage_bootstrap`
+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` 
+
+Improvements to the system package database:
+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`
+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap
+
+Improvements to `tox docker`:
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache
+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)
+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached
+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)
+- setenv/passenv SAGE_SERVER
+- Remove TARGETS_PRE/TARGETS distinction: Instead exit from make with a distinctive error code to trigger the ADD of src/
+
+Improvements to `tox local`:
+- #29416: tox.ini: Add local-copy
+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)
+
+Other improvements to `tox.ini`:
+- Make `tox -p auto` useful again (it does not understand the nested braces)
+
+Improvements to auto-generated parts of the manuals:
+- #29558 Autogenerated parts of installation guide
+- #29557 Add script package `_recommended` and generate "recommended system packages" info
+
+Improvements for messages at the end of a `./configure` run:
+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated
+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense
+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed
+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately
+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)
+- #29586: Improve configure's recommendations
+
+See also: 
+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages
 
 
 Comment: 1
```




---

archive/issue_comments_435805.json:
```json
{
    "body": "<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-05-15T19:43:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435805",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_435806.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,49 @@\n+Improvements to low-level system packages scripts:\n+- `build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.\n+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.\n+- helper scripts for extracting lists of packages according to criteria\n+- possibly, by extending and using `sage_bootstrap`\n+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` \n+\n+Improvements to the system package database:\n+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`\n+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap\n+\n+Improvements to `tox docker`:\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache\n+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)\n+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached\n+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)\n+- setenv/passenv SAGE_SERVER\n+- Remove TARGETS_PRE/TARGETS distinction: Instead exit from make with a distinctive error code to trigger the ADD of src/\n+\n+Improvements to `tox local`:\n+- #29416: tox.ini: Add local-copy\n+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)\n+\n+Other improvements to `tox.ini`:\n+- Make `tox -p auto` useful again (it does not understand the nested braces)\n+\n+Improvements to auto-generated parts of the manuals:\n+- #29558 Autogenerated parts of installation guide\n+- #29557 Add script package `_recommended` and generate \"recommended system packages\" info\n+\n+Improvements for messages at the end of a `./configure` run:\n+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated\n+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense\n+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed\n+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately\n+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)\n+- #29586: Improve configure's recommendations\n+\n+Tickets regarding `sage_bootstrap`:\n+- #29919 Restore \"huge\" package type\n+- #20023 `sage_bootstrap`: Remove Python 2.6 support\n+- #20104 `sage --package`: Add commands `list :standard:`, `update-latest` (for packages from PyPI), `upload`\n+\n+See also: \n+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages\n \n \n Comment: 1\n```\n",
    "created_at": "2020-06-20T17:27:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435806",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,49 @@
+Improvements to low-level system packages scripts:
+- `build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved.
+- instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.
+- helper scripts for extracting lists of packages according to criteria
+- possibly, by extending and using `sage_bootstrap`
+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` 
+
+Improvements to the system package database:
+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`
+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap
+
+Improvements to `tox docker`:
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache
+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)
+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached
+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)
+- setenv/passenv SAGE_SERVER
+- Remove TARGETS_PRE/TARGETS distinction: Instead exit from make with a distinctive error code to trigger the ADD of src/
+
+Improvements to `tox local`:
+- #29416: tox.ini: Add local-copy
+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)
+
+Other improvements to `tox.ini`:
+- Make `tox -p auto` useful again (it does not understand the nested braces)
+
+Improvements to auto-generated parts of the manuals:
+- #29558 Autogenerated parts of installation guide
+- #29557 Add script package `_recommended` and generate "recommended system packages" info
+
+Improvements for messages at the end of a `./configure` run:
+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated
+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense
+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed
+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately
+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)
+- #29586: Improve configure's recommendations
+
+Tickets regarding `sage_bootstrap`:
+- #29919 Restore "huge" package type
+- #20023 `sage_bootstrap`: Remove Python 2.6 support
+- #20104 `sage --package`: Add commands `list :standard:`, `update-latest` (for packages from PyPI), `upload`
+
+See also: 
+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages
 
 
 Comment: 1
```




---

archive/issue_events_073948.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-13T17:11:30Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29146#event-73948"
}
```



---

archive/issue_events_073949.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-13T17:11:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29146#event-73949"
}
```



---

archive/issue_comments_435807.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,49 @@\n+Improvements to low-level system packages scripts:\n+- `build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved. #30861\n+   - instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.\n+   - helper scripts for extracting lists of packages according to criteria\n+   - possibly, by extending and using `sage_bootstrap`\n+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` \n+\n+Improvements to the system package database:\n+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`\n+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap\n+\n+Improvements to `tox docker`:\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache\n+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)\n+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached\n+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)\n+- setenv/passenv SAGE_SERVER\n+- Remove TARGETS_PRE/TARGETS distinction: Instead exit from make with a distinctive error code to trigger the ADD of src/\n+\n+Improvements to `tox local`:\n+- #29416: tox.ini: Add local-copy\n+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)\n+\n+Other improvements to `tox.ini`:\n+- Make `tox -p auto` useful again (it does not understand the nested braces)\n+\n+Improvements to auto-generated parts of the manuals:\n+- #29558 Autogenerated parts of installation guide\n+- #29557 Add script package `_recommended` and generate \"recommended system packages\" info\n+\n+Improvements for messages at the end of a `./configure` run:\n+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated\n+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense\n+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed\n+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately\n+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)\n+- #29586: Improve configure's recommendations\n+\n+Tickets regarding `sage_bootstrap`:\n+- #29919 Restore \"huge\" package type\n+- #20023 `sage_bootstrap`: Remove Python 2.6 support\n+- #20104 `sage --package`: Add commands `list :standard:`, `update-latest` (for packages from PyPI), `upload`\n+\n+See also: \n+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages\n \n \n Comment: 1\n```\n",
    "created_at": "2020-11-03T23:29:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435807",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,49 @@
+Improvements to low-level system packages scripts:
+- `build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved. #30861
+   - instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.
+   - helper scripts for extracting lists of packages according to criteria
+   - possibly, by extending and using `sage_bootstrap`
+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` 
+
+Improvements to the system package database:
+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`
+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap
+
+Improvements to `tox docker`:
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache
+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)
+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached
+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)
+- setenv/passenv SAGE_SERVER
+- Remove TARGETS_PRE/TARGETS distinction: Instead exit from make with a distinctive error code to trigger the ADD of src/
+
+Improvements to `tox local`:
+- #29416: tox.ini: Add local-copy
+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)
+
+Other improvements to `tox.ini`:
+- Make `tox -p auto` useful again (it does not understand the nested braces)
+
+Improvements to auto-generated parts of the manuals:
+- #29558 Autogenerated parts of installation guide
+- #29557 Add script package `_recommended` and generate "recommended system packages" info
+
+Improvements for messages at the end of a `./configure` run:
+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated
+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense
+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed
+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately
+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)
+- #29586: Improve configure's recommendations
+
+Tickets regarding `sage_bootstrap`:
+- #29919 Restore "huge" package type
+- #20023 `sage_bootstrap`: Remove Python 2.6 support
+- #20104 `sage --package`: Add commands `list :standard:`, `update-latest` (for packages from PyPI), `upload`
+
+See also: 
+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages
 
 
 Comment: 1
```




---

archive/issue_comments_435808.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,50 @@\n+Improvements to low-level system packages scripts:\n+- `build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved. #30861\n+   - instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.\n+   - helper scripts for extracting lists of packages according to criteria\n+   - possibly, by extending and using `sage_bootstrap`\n+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` \n+\n+Improvements to the system package database:\n+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`\n+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap\n+\n+Improvements to `tox docker`:\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache\n+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)\n+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached\n+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)\n+- setenv/passenv SAGE_SERVER\n+- Remove TARGETS_PRE/TARGETS distinction: Instead exit from make with a distinctive error code to trigger the ADD of src/\n+\n+Improvements to `tox local`:\n+- #29416: tox.ini: Add local-copy\n+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)\n+\n+Other improvements to `tox.ini`:\n+- Make `tox -p auto` useful again (it does not understand the nested braces)\n+\n+Improvements to auto-generated parts of the manuals:\n+- #29558 Autogenerated parts of installation guide\n+- #29557 Add script package `_recommended` and generate \"recommended system packages\" info\n+\n+Improvements for messages at the end of a `./configure` run:\n+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated\n+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense\n+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed\n+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately\n+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)\n+- #29586: Improve configure's recommendations\n+- #30863: refine definition of variable SAGE_NEED_SYSTEM_PACKAGES in m4/sage_spkg_collect.m4\n+\n+Tickets regarding `sage_bootstrap`:\n+- #29919 Restore \"huge\" package type\n+- #20023 `sage_bootstrap`: Remove Python 2.6 support\n+- #20104 `sage --package`: Add commands `list :standard:`, `update-latest` (for packages from PyPI), `upload`\n+\n+See also: \n+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages\n \n \n Comment: 1\n```\n",
    "created_at": "2020-11-04T20:23:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435808",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,50 @@
+Improvements to low-level system packages scripts:
+- `build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved. #30861
+   - instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.
+   - helper scripts for extracting lists of packages according to criteria
+   - possibly, by extending and using `sage_bootstrap`
+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` 
+
+Improvements to the system package database:
+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`
+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap
+
+Improvements to `tox docker`:
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache
+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)
+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached
+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)
+- setenv/passenv SAGE_SERVER
+- Remove TARGETS_PRE/TARGETS distinction: Instead exit from make with a distinctive error code to trigger the ADD of src/
+
+Improvements to `tox local`:
+- #29416: tox.ini: Add local-copy
+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)
+
+Other improvements to `tox.ini`:
+- Make `tox -p auto` useful again (it does not understand the nested braces)
+
+Improvements to auto-generated parts of the manuals:
+- #29558 Autogenerated parts of installation guide
+- #29557 Add script package `_recommended` and generate "recommended system packages" info
+
+Improvements for messages at the end of a `./configure` run:
+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated
+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense
+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed
+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately
+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)
+- #29586: Improve configure's recommendations
+- #30863: refine definition of variable SAGE_NEED_SYSTEM_PACKAGES in m4/sage_spkg_collect.m4
+
+Tickets regarding `sage_bootstrap`:
+- #29919 Restore "huge" package type
+- #20023 `sage_bootstrap`: Remove Python 2.6 support
+- #20104 `sage --package`: Add commands `list :standard:`, `update-latest` (for packages from PyPI), `upload`
+
+See also: 
+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages
 
 
 Comment: 1
```




---

archive/issue_comments_435809.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,50 @@\n+Improvements to low-level system packages scripts:\n+- `build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved. #30861, #30865\n+   - instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.\n+   - helper scripts for extracting lists of packages according to criteria\n+   - possibly, by extending and using `sage_bootstrap`\n+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` \n+\n+Improvements to the system package database:\n+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`\n+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap\n+\n+Improvements to `tox docker`:\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache\n+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)\n+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached\n+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)\n+- setenv/passenv SAGE_SERVER\n+- Remove TARGETS_PRE/TARGETS distinction: Instead exit from make with a distinctive error code to trigger the ADD of src/\n+\n+Improvements to `tox local`:\n+- #29416: tox.ini: Add local-copy\n+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)\n+\n+Other improvements to `tox.ini`:\n+- Make `tox -p auto` useful again (it does not understand the nested braces)\n+\n+Improvements to auto-generated parts of the manuals:\n+- #29558 Autogenerated parts of installation guide\n+- #29557 Add script package `_recommended` and generate \"recommended system packages\" info\n+\n+Improvements for messages at the end of a `./configure` run:\n+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated\n+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense\n+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed\n+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately\n+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)\n+- #29586: Improve configure's recommendations\n+- #30863: refine definition of variable SAGE_NEED_SYSTEM_PACKAGES in m4/sage_spkg_collect.m4\n+\n+Tickets regarding `sage_bootstrap`:\n+- #29919 Restore \"huge\" package type\n+- #20023 `sage_bootstrap`: Remove Python 2.6 support\n+- #20104 `sage --package`: Add commands `list :standard:`, `update-latest` (for packages from PyPI), `upload`\n+\n+See also: \n+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages\n \n \n Comment: 1\n```\n",
    "created_at": "2020-11-04T22:01:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435809",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,50 @@
+Improvements to low-level system packages scripts:
+- `build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved. #30861, #30865
+   - instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.
+   - helper scripts for extracting lists of packages according to criteria
+   - possibly, by extending and using `sage_bootstrap`
+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` 
+
+Improvements to the system package database:
+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`
+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap
+
+Improvements to `tox docker`:
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache
+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)
+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached
+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)
+- setenv/passenv SAGE_SERVER
+- Remove TARGETS_PRE/TARGETS distinction: Instead exit from make with a distinctive error code to trigger the ADD of src/
+
+Improvements to `tox local`:
+- #29416: tox.ini: Add local-copy
+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)
+
+Other improvements to `tox.ini`:
+- Make `tox -p auto` useful again (it does not understand the nested braces)
+
+Improvements to auto-generated parts of the manuals:
+- #29558 Autogenerated parts of installation guide
+- #29557 Add script package `_recommended` and generate "recommended system packages" info
+
+Improvements for messages at the end of a `./configure` run:
+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated
+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense
+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed
+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately
+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)
+- #29586: Improve configure's recommendations
+- #30863: refine definition of variable SAGE_NEED_SYSTEM_PACKAGES in m4/sage_spkg_collect.m4
+
+Tickets regarding `sage_bootstrap`:
+- #29919 Restore "huge" package type
+- #20023 `sage_bootstrap`: Remove Python 2.6 support
+- #20104 `sage --package`: Add commands `list :standard:`, `update-latest` (for packages from PyPI), `upload`
+
+See also: 
+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages
 
 
 Comment: 1
```




---

archive/issue_comments_435810.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,51 @@\n+Improvements to low-level system packages scripts:\n+- `build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved. #30861, #30865\n+   - instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.\n+   - helper scripts for extracting lists of packages according to criteria\n+   - possibly, by extending and using `sage_bootstrap`\n+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` \n+\n+Improvements to the system package database:\n+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`\n+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap\n+\n+Improvements to `tox docker`:\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache\n+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)\n+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached\n+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)\n+- setenv/passenv SAGE_SERVER\n+- Remove TARGETS_PRE/TARGETS distinction: Instead exit from make with a distinctive error code to trigger the ADD of src/\n+\n+Improvements to `tox local`:\n+- #29416: tox.ini: Add local-copy\n+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)\n+\n+Other improvements to `tox.ini`:\n+- Make `tox -p auto` useful again (it does not understand the nested braces)\n+\n+Improvements to auto-generated parts of the manuals:\n+- #29558 Autogenerated parts of installation guide\n+- #29557 Add script package `_recommended` and generate \"recommended system packages\" info\n+\n+Improvements for messages at the end of a `./configure` run:\n+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated\n+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense\n+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed\n+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately\n+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)\n+- #29586: Improve configure's recommendations\n+- #30624: Improve wording and formatting of configure's recommendation message\n+- #30863: refine definition of variable SAGE_NEED_SYSTEM_PACKAGES in m4/sage_spkg_collect.m4\n+\n+Tickets regarding `sage_bootstrap`:\n+- #29919 Restore \"huge\" package type\n+- #20023 `sage_bootstrap`: Remove Python 2.6 support\n+- #20104 `sage --package`: Add commands `list :standard:`, `update-latest` (for packages from PyPI), `upload`\n+\n+See also: \n+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages\n \n \n Comment: 1\n```\n",
    "created_at": "2020-11-17T02:47:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435810",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,51 @@
+Improvements to low-level system packages scripts:
+- `build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved. #30861, #30865
+   - instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.
+   - helper scripts for extracting lists of packages according to criteria
+   - possibly, by extending and using `sage_bootstrap`
+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` 
+
+Improvements to the system package database:
+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`
+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap
+
+Improvements to `tox docker`:
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache
+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)
+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached
+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)
+- setenv/passenv SAGE_SERVER
+- Remove TARGETS_PRE/TARGETS distinction: Instead exit from make with a distinctive error code to trigger the ADD of src/
+
+Improvements to `tox local`:
+- #29416: tox.ini: Add local-copy
+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)
+
+Other improvements to `tox.ini`:
+- Make `tox -p auto` useful again (it does not understand the nested braces)
+
+Improvements to auto-generated parts of the manuals:
+- #29558 Autogenerated parts of installation guide
+- #29557 Add script package `_recommended` and generate "recommended system packages" info
+
+Improvements for messages at the end of a `./configure` run:
+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated
+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense
+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed
+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately
+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)
+- #29586: Improve configure's recommendations
+- #30624: Improve wording and formatting of configure's recommendation message
+- #30863: refine definition of variable SAGE_NEED_SYSTEM_PACKAGES in m4/sage_spkg_collect.m4
+
+Tickets regarding `sage_bootstrap`:
+- #29919 Restore "huge" package type
+- #20023 `sage_bootstrap`: Remove Python 2.6 support
+- #20104 `sage --package`: Add commands `list :standard:`, `update-latest` (for packages from PyPI), `upload`
+
+See also: 
+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages
 
 
 Comment: 1
```




---

archive/issue_comments_435811.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,51 @@\n+Improvements to low-level system packages scripts:\n+- `build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved. #30861, #30865, #30947, #30951, #30968\n+   - instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.\n+   - helper scripts for extracting lists of packages according to criteria\n+   - possibly, by extending and using `sage_bootstrap`\n+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` \n+\n+Improvements to the system package database:\n+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`\n+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap\n+\n+Improvements to `tox docker`:\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache\n+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)\n+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached\n+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)\n+- setenv/passenv SAGE_SERVER\n+- Remove TARGETS_PRE/TARGETS distinction: Instead exit from make with a distinctive error code to trigger the ADD of src/\n+\n+Improvements to `tox local`:\n+- #29416: tox.ini: Add local-copy\n+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)\n+\n+Other improvements to `tox.ini`:\n+- Make `tox -p auto` useful again (it does not understand the nested braces)\n+\n+Improvements to auto-generated parts of the manuals:\n+- #29558 Autogenerated parts of installation guide\n+- #29557 Add script package `_recommended` and generate \"recommended system packages\" info\n+\n+Improvements for messages at the end of a `./configure` run:\n+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated\n+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense\n+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed\n+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately\n+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)\n+- #29586: Improve configure's recommendations\n+- #30624: Improve wording and formatting of configure's recommendation message\n+- #30863: refine definition of variable SAGE_NEED_SYSTEM_PACKAGES in m4/sage_spkg_collect.m4\n+\n+Tickets regarding `sage_bootstrap`:\n+- #29919 Restore \"huge\" package type\n+- #20023 `sage_bootstrap`: Remove Python 2.6 support\n+- #20104 `sage --package`: Add commands `list :standard:`, `update-latest` (for packages from PyPI), `upload`\n+\n+See also: \n+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages\n \n \n Comment: 1\n```\n",
    "created_at": "2020-11-29T20:31:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435811",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,51 @@
+Improvements to low-level system packages scripts:
+- `build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved. #30861, #30865, #30947, #30951, #30968
+   - instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.
+   - helper scripts for extracting lists of packages according to criteria
+   - possibly, by extending and using `sage_bootstrap`
+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` 
+
+Improvements to the system package database:
+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`
+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap
+
+Improvements to `tox docker`:
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache
+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)
+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached
+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)
+- setenv/passenv SAGE_SERVER
+- Remove TARGETS_PRE/TARGETS distinction: Instead exit from make with a distinctive error code to trigger the ADD of src/
+
+Improvements to `tox local`:
+- #29416: tox.ini: Add local-copy
+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)
+
+Other improvements to `tox.ini`:
+- Make `tox -p auto` useful again (it does not understand the nested braces)
+
+Improvements to auto-generated parts of the manuals:
+- #29558 Autogenerated parts of installation guide
+- #29557 Add script package `_recommended` and generate "recommended system packages" info
+
+Improvements for messages at the end of a `./configure` run:
+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated
+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense
+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed
+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately
+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)
+- #29586: Improve configure's recommendations
+- #30624: Improve wording and formatting of configure's recommendation message
+- #30863: refine definition of variable SAGE_NEED_SYSTEM_PACKAGES in m4/sage_spkg_collect.m4
+
+Tickets regarding `sage_bootstrap`:
+- #29919 Restore "huge" package type
+- #20023 `sage_bootstrap`: Remove Python 2.6 support
+- #20104 `sage --package`: Add commands `list :standard:`, `update-latest` (for packages from PyPI), `upload`
+
+See also: 
+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages
 
 
 Comment: 1
```




---

archive/issue_comments_435812.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,53 @@\n+Improvements to low-level system packages scripts:\n+- `build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved. #30861, #30865, #30947, #30951, #30968\n+   - instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.\n+   - helper scripts for extracting lists of packages according to criteria\n+   - possibly, by extending and using `sage_bootstrap`\n+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` \n+\n+Improvements to the system package database:\n+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`\n+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap\n+\n+Improvements to `tox docker`:\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache\n+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)\n+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached\n+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)\n+- setenv/passenv SAGE_SERVER\n+- Remove TARGETS_PRE/TARGETS distinction: Instead exit from make with a distinctive error code to trigger the ADD of src/\n+\n+Improvements to `tox local`:\n+- #29416: tox.ini: Add local-copy\n+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)\n+- #31216: tox.ini (local): Add environment variables to skip system package installs, mechanism for a local interactive shell\n+- #31064: `ci-cygwin*.yml`: delegate to `tox`, add more stages, use more specific `SAGE_LOCAL`\n+\n+Other improvements to `tox.ini`:\n+- Make `tox -p auto` and `tox --listenvs` useful again (it does not understand the nested braces)\n+\n+Improvements to auto-generated parts of the manuals:\n+- #29558 Autogenerated parts of installation guide\n+- #29557 Add script package `_recommended` and generate \"recommended system packages\" info\n+\n+Improvements for messages at the end of a `./configure` run:\n+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated\n+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense\n+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed\n+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately\n+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)\n+- #29586: Improve configure's recommendations\n+- #30624: Improve wording and formatting of configure's recommendation message\n+- #30863: refine definition of variable SAGE_NEED_SYSTEM_PACKAGES in m4/sage_spkg_collect.m4\n+\n+Tickets regarding `sage_bootstrap`:\n+- #29919 Restore \"huge\" package type\n+- #20023 `sage_bootstrap`: Remove Python 2.6 support\n+- #20104 `sage --package`: Add commands `list :standard:`, `update-latest` (for packages from PyPI), `upload`\n+\n+See also: \n+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages\n \n \n Comment: 1\n```\n",
    "created_at": "2021-01-10T00:19:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435812",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,53 @@
+Improvements to low-level system packages scripts:
+- `build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved. #30861, #30865, #30947, #30951, #30968
+   - instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.
+   - helper scripts for extracting lists of packages according to criteria
+   - possibly, by extending and using `sage_bootstrap`
+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` 
+
+Improvements to the system package database:
+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`
+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap
+
+Improvements to `tox docker`:
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache
+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)
+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached
+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)
+- setenv/passenv SAGE_SERVER
+- Remove TARGETS_PRE/TARGETS distinction: Instead exit from make with a distinctive error code to trigger the ADD of src/
+
+Improvements to `tox local`:
+- #29416: tox.ini: Add local-copy
+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)
+- #31216: tox.ini (local): Add environment variables to skip system package installs, mechanism for a local interactive shell
+- #31064: `ci-cygwin*.yml`: delegate to `tox`, add more stages, use more specific `SAGE_LOCAL`
+
+Other improvements to `tox.ini`:
+- Make `tox -p auto` and `tox --listenvs` useful again (it does not understand the nested braces)
+
+Improvements to auto-generated parts of the manuals:
+- #29558 Autogenerated parts of installation guide
+- #29557 Add script package `_recommended` and generate "recommended system packages" info
+
+Improvements for messages at the end of a `./configure` run:
+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated
+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense
+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed
+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately
+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)
+- #29586: Improve configure's recommendations
+- #30624: Improve wording and formatting of configure's recommendation message
+- #30863: refine definition of variable SAGE_NEED_SYSTEM_PACKAGES in m4/sage_spkg_collect.m4
+
+Tickets regarding `sage_bootstrap`:
+- #29919 Restore "huge" package type
+- #20023 `sage_bootstrap`: Remove Python 2.6 support
+- #20104 `sage --package`: Add commands `list :standard:`, `update-latest` (for packages from PyPI), `upload`
+
+See also: 
+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages
 
 
 Comment: 1
```




---

archive/issue_comments_435813.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,56 @@\n+Improvements to low-level system packages scripts:\n+- `build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved. #30861, #30865, #30947, #30951, #30968\n+   - instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.\n+   - helper scripts for extracting lists of packages according to criteria\n+   - possibly, by extending and using `sage_bootstrap`\n+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` \n+\n+Improvements to the system package database:\n+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`\n+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap\n+\n+Improvements to `tox docker`:\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache\n+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)\n+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached\n+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)\n+- setenv/passenv SAGE_SERVER\n+- Remove TARGETS_PRE/TARGETS distinction: Instead exit from make with a distinctive error code to trigger the ADD of src/\n+\n+Improvements to `tox local`:\n+- #29416: tox.ini: Add local-copy\n+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)\n+- #31216: tox.ini (local): Add environment variables to skip system package installs, mechanism for a local interactive shell\n+- #31064: `ci-cygwin*.yml`: delegate to `tox`, add more stages, use more specific `SAGE_LOCAL`\n+- the complicated rule for the commands of `local` consists entirely of workarounds for things that should really be fixed/improved in our `Makefile`s:\n+   - #30721: `build/make/Makefile.in`: `base-toolchain` should be a dependency of every non-base, non-toolchain package\n+   - `tox.ini` and `build/bin/write-dockerfile.sh` use better defaults for `SAGE_CHECK_PACKAGES`; this should be moved to `build/make/Makefile.in` (`SAGE_CHECK_PACKAGES_DEFAULT_yes`).\n+\n+Other improvements to `tox.ini`:\n+- Make `tox -p auto` and `tox --listenvs` useful again (it does not understand the nested braces)\n+\n+Improvements to auto-generated parts of the manuals:\n+- #29558 Autogenerated parts of installation guide\n+- #29557 Add script package `_recommended` and generate \"recommended system packages\" info\n+\n+Improvements for messages at the end of a `./configure` run:\n+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated\n+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense\n+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed\n+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately\n+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)\n+- #29586: Improve configure's recommendations\n+- #30624: Improve wording and formatting of configure's recommendation message\n+- #30863: refine definition of variable SAGE_NEED_SYSTEM_PACKAGES in m4/sage_spkg_collect.m4\n+\n+Tickets regarding `sage_bootstrap`:\n+- #29919 Restore \"huge\" package type\n+- #20023 `sage_bootstrap`: Remove Python 2.6 support\n+- #20104 `sage --package`: Add commands `list :standard:`, `update-latest` (for packages from PyPI), `upload`\n+\n+See also: \n+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages\n \n \n Comment: 1\n```\n",
    "created_at": "2021-01-10T00:24:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435813",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,56 @@
+Improvements to low-level system packages scripts:
+- `build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved. #30861, #30865, #30947, #30951, #30968
+   - instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.
+   - helper scripts for extracting lists of packages according to criteria
+   - possibly, by extending and using `sage_bootstrap`
+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` 
+
+Improvements to the system package database:
+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`
+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap
+
+Improvements to `tox docker`:
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache
+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)
+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached
+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)
+- setenv/passenv SAGE_SERVER
+- Remove TARGETS_PRE/TARGETS distinction: Instead exit from make with a distinctive error code to trigger the ADD of src/
+
+Improvements to `tox local`:
+- #29416: tox.ini: Add local-copy
+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)
+- #31216: tox.ini (local): Add environment variables to skip system package installs, mechanism for a local interactive shell
+- #31064: `ci-cygwin*.yml`: delegate to `tox`, add more stages, use more specific `SAGE_LOCAL`
+- the complicated rule for the commands of `local` consists entirely of workarounds for things that should really be fixed/improved in our `Makefile`s:
+   - #30721: `build/make/Makefile.in`: `base-toolchain` should be a dependency of every non-base, non-toolchain package
+   - `tox.ini` and `build/bin/write-dockerfile.sh` use better defaults for `SAGE_CHECK_PACKAGES`; this should be moved to `build/make/Makefile.in` (`SAGE_CHECK_PACKAGES_DEFAULT_yes`).
+
+Other improvements to `tox.ini`:
+- Make `tox -p auto` and `tox --listenvs` useful again (it does not understand the nested braces)
+
+Improvements to auto-generated parts of the manuals:
+- #29558 Autogenerated parts of installation guide
+- #29557 Add script package `_recommended` and generate "recommended system packages" info
+
+Improvements for messages at the end of a `./configure` run:
+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated
+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense
+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed
+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately
+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)
+- #29586: Improve configure's recommendations
+- #30624: Improve wording and formatting of configure's recommendation message
+- #30863: refine definition of variable SAGE_NEED_SYSTEM_PACKAGES in m4/sage_spkg_collect.m4
+
+Tickets regarding `sage_bootstrap`:
+- #29919 Restore "huge" package type
+- #20023 `sage_bootstrap`: Remove Python 2.6 support
+- #20104 `sage --package`: Add commands `list :standard:`, `update-latest` (for packages from PyPI), `upload`
+
+See also: 
+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages
 
 
 Comment: 1
```




---

archive/issue_comments_435814.json:
```json
{
    "body": "<a id='comment:39'></a>Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-24T02:04:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435814",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:39'></a>Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_073950.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T02:04:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29146#event-73950"
}
```



---

archive/issue_events_073951.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T02:04:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29146#event-73951"
}
```



---

archive/issue_comments_435815.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,61 @@\n+Improvements to low-level system packages scripts:\n+- `build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved. #30861, #30865, #30947, #30951, #30968\n+   - instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.\n+   - helper scripts for extracting lists of packages according to criteria\n+   - possibly, by extending and using `sage_bootstrap`\n+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` \n+\n+Improvements to the system package database:\n+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`\n+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap\n+\n+Improvements to `tox docker`:\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache\n+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)\n+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached\n+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)\n+- setenv/passenv SAGE_SERVER\n+- Remove `TARGETS_PRE`/`TARGETS` distinction: Instead exit from make with a distinctive error code to trigger the ADD of src/; for example, add `sagelib` dependency on `$(SAGE_SRC)/sage`, and add the rule to Makefile:\n+\n+```\n+$(SAGE_SRC)/sage:\n+\texit 76\n+```\n+\n+Improvements to `tox local`:\n+- #29416: tox.ini: Add local-copy\n+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)\n+- #31216: tox.ini (local): Add environment variables to skip system package installs, mechanism for a local interactive shell\n+- #31064: `ci-cygwin*.yml`: delegate to `tox`, add more stages, use more specific `SAGE_LOCAL`\n+- the complicated rule for the commands of `local` consists entirely of workarounds for things that should really be fixed/improved in our `Makefile`s:\n+   - #30721: `build/make/Makefile.in`: `base-toolchain` should be a dependency of every non-base, non-toolchain package\n+   - `tox.ini` and `build/bin/write-dockerfile.sh` use better defaults for `SAGE_CHECK_PACKAGES`; this should be moved to `build/make/Makefile.in` (`SAGE_CHECK_PACKAGES_DEFAULT_yes`).\n+\n+Other improvements to `tox.ini`:\n+- Make `tox -p auto` and `tox --listenvs` useful again (it does not understand the nested braces)\n+\n+Improvements to auto-generated parts of the manuals:\n+- #29558 Autogenerated parts of installation guide\n+- #29557 Add script package `_recommended` and generate \"recommended system packages\" info\n+\n+Improvements for messages at the end of a `./configure` run:\n+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated\n+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense\n+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed\n+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately\n+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)\n+- #29586: Improve configure's recommendations\n+- #30624: Improve wording and formatting of configure's recommendation message\n+- #30863: refine definition of variable SAGE_NEED_SYSTEM_PACKAGES in m4/sage_spkg_collect.m4\n+\n+Tickets regarding `sage_bootstrap`:\n+- #29919 Restore \"huge\" package type\n+- #20023 `sage_bootstrap`: Remove Python 2.6 support\n+- #20104 `sage --package`: Add commands `list :standard:`, `update-latest` (for packages from PyPI), `upload`\n+\n+See also: \n+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages\n \n \n Comment: 1\n```\n",
    "created_at": "2021-03-28T05:06:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435815",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,61 @@
+Improvements to low-level system packages scripts:
+- `build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved. #30861, #30865, #30947, #30951, #30968
+   - instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.
+   - helper scripts for extracting lists of packages according to criteria
+   - possibly, by extending and using `sage_bootstrap`
+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` 
+
+Improvements to the system package database:
+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`
+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap
+
+Improvements to `tox docker`:
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache
+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)
+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached
+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)
+- setenv/passenv SAGE_SERVER
+- Remove `TARGETS_PRE`/`TARGETS` distinction: Instead exit from make with a distinctive error code to trigger the ADD of src/; for example, add `sagelib` dependency on `$(SAGE_SRC)/sage`, and add the rule to Makefile:
+
+```
+$(SAGE_SRC)/sage:
+	exit 76
+```
+
+Improvements to `tox local`:
+- #29416: tox.ini: Add local-copy
+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)
+- #31216: tox.ini (local): Add environment variables to skip system package installs, mechanism for a local interactive shell
+- #31064: `ci-cygwin*.yml`: delegate to `tox`, add more stages, use more specific `SAGE_LOCAL`
+- the complicated rule for the commands of `local` consists entirely of workarounds for things that should really be fixed/improved in our `Makefile`s:
+   - #30721: `build/make/Makefile.in`: `base-toolchain` should be a dependency of every non-base, non-toolchain package
+   - `tox.ini` and `build/bin/write-dockerfile.sh` use better defaults for `SAGE_CHECK_PACKAGES`; this should be moved to `build/make/Makefile.in` (`SAGE_CHECK_PACKAGES_DEFAULT_yes`).
+
+Other improvements to `tox.ini`:
+- Make `tox -p auto` and `tox --listenvs` useful again (it does not understand the nested braces)
+
+Improvements to auto-generated parts of the manuals:
+- #29558 Autogenerated parts of installation guide
+- #29557 Add script package `_recommended` and generate "recommended system packages" info
+
+Improvements for messages at the end of a `./configure` run:
+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated
+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense
+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed
+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately
+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)
+- #29586: Improve configure's recommendations
+- #30624: Improve wording and formatting of configure's recommendation message
+- #30863: refine definition of variable SAGE_NEED_SYSTEM_PACKAGES in m4/sage_spkg_collect.m4
+
+Tickets regarding `sage_bootstrap`:
+- #29919 Restore "huge" package type
+- #20023 `sage_bootstrap`: Remove Python 2.6 support
+- #20104 `sage --package`: Add commands `list :standard:`, `update-latest` (for packages from PyPI), `upload`
+
+See also: 
+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages
 
 
 Comment: 1
```




---

archive/issue_comments_435816.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,61 @@\n+Improvements to low-level system packages scripts:\n+- `build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved. #30861, #30865, #30947, #30951, #30968\n+   - instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.\n+   - helper scripts for extracting lists of packages according to criteria\n+   - possibly, by extending and using `sage_bootstrap`\n+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` \n+\n+Improvements to the system package database:\n+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`\n+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap\n+\n+Improvements to `tox docker`:\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache\n+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)\n+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached\n+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)\n+- setenv/passenv SAGE_SERVER\n+- Remove `TARGETS_PRE`/`TARGETS` distinction: Instead leave a stamp file and exit from make with an error to trigger the ADD of src/; for example, add `sagelib` dependency on `$(SAGE_SRC)/sage`, and add the rule to Makefile:\n+\n+```\n+$(SAGE_SRC)/sage:\n+\ttouch .need_src; exit 1\n+```\n+\n+Improvements to `tox local`:\n+- #29416: tox.ini: Add local-copy\n+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)\n+- #31216: tox.ini (local): Add environment variables to skip system package installs, mechanism for a local interactive shell\n+- #31064: `ci-cygwin*.yml`: delegate to `tox`, add more stages, use more specific `SAGE_LOCAL`\n+- the complicated rule for the commands of `local` consists entirely of workarounds for things that should really be fixed/improved in our `Makefile`s:\n+   - #30721: `build/make/Makefile.in`: `base-toolchain` should be a dependency of every non-base, non-toolchain package\n+   - `tox.ini` and `build/bin/write-dockerfile.sh` use better defaults for `SAGE_CHECK_PACKAGES`; this should be moved to `build/make/Makefile.in` (`SAGE_CHECK_PACKAGES_DEFAULT_yes`).\n+\n+Other improvements to `tox.ini`:\n+- Make `tox -p auto` and `tox --listenvs` useful again (it does not understand the nested braces)\n+\n+Improvements to auto-generated parts of the manuals:\n+- #29558 Autogenerated parts of installation guide\n+- #29557 Add script package `_recommended` and generate \"recommended system packages\" info\n+\n+Improvements for messages at the end of a `./configure` run:\n+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated\n+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense\n+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed\n+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately\n+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)\n+- #29586: Improve configure's recommendations\n+- #30624: Improve wording and formatting of configure's recommendation message\n+- #30863: refine definition of variable SAGE_NEED_SYSTEM_PACKAGES in m4/sage_spkg_collect.m4\n+\n+Tickets regarding `sage_bootstrap`:\n+- #29919 Restore \"huge\" package type\n+- #20023 `sage_bootstrap`: Remove Python 2.6 support\n+- #20104 `sage --package`: Add commands `list :standard:`, `update-latest` (for packages from PyPI), `upload`\n+\n+See also: \n+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages\n \n \n Comment: 1\n```\n",
    "created_at": "2021-03-28T05:09:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435816",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,61 @@
+Improvements to low-level system packages scripts:
+- `build/bin/write_dockerfile.sh`, introduced in #29053, determines lists of system packages in a rather crude way. This should be improved. #30861, #30865, #30947, #30951, #30968
+   - instead of passing `TYPE_PATTERN` to `build/bin/write_dockerfile.sh`, do the work in `tox.ini`.
+   - helper scripts for extracting lists of packages according to criteria
+   - possibly, by extending and using `sage_bootstrap`
+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` 
+
+Improvements to the system package database:
+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`
+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap
+
+Improvements to `tox docker`:
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache
+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)
+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached
+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)
+- setenv/passenv SAGE_SERVER
+- Remove `TARGETS_PRE`/`TARGETS` distinction: Instead leave a stamp file and exit from make with an error to trigger the ADD of src/; for example, add `sagelib` dependency on `$(SAGE_SRC)/sage`, and add the rule to Makefile:
+
+```
+$(SAGE_SRC)/sage:
+	touch .need_src; exit 1
+```
+
+Improvements to `tox local`:
+- #29416: tox.ini: Add local-copy
+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)
+- #31216: tox.ini (local): Add environment variables to skip system package installs, mechanism for a local interactive shell
+- #31064: `ci-cygwin*.yml`: delegate to `tox`, add more stages, use more specific `SAGE_LOCAL`
+- the complicated rule for the commands of `local` consists entirely of workarounds for things that should really be fixed/improved in our `Makefile`s:
+   - #30721: `build/make/Makefile.in`: `base-toolchain` should be a dependency of every non-base, non-toolchain package
+   - `tox.ini` and `build/bin/write-dockerfile.sh` use better defaults for `SAGE_CHECK_PACKAGES`; this should be moved to `build/make/Makefile.in` (`SAGE_CHECK_PACKAGES_DEFAULT_yes`).
+
+Other improvements to `tox.ini`:
+- Make `tox -p auto` and `tox --listenvs` useful again (it does not understand the nested braces)
+
+Improvements to auto-generated parts of the manuals:
+- #29558 Autogenerated parts of installation guide
+- #29557 Add script package `_recommended` and generate "recommended system packages" info
+
+Improvements for messages at the end of a `./configure` run:
+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated
+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense
+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed
+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately
+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)
+- #29586: Improve configure's recommendations
+- #30624: Improve wording and formatting of configure's recommendation message
+- #30863: refine definition of variable SAGE_NEED_SYSTEM_PACKAGES in m4/sage_spkg_collect.m4
+
+Tickets regarding `sage_bootstrap`:
+- #29919 Restore "huge" package type
+- #20023 `sage_bootstrap`: Remove Python 2.6 support
+- #20104 `sage --package`: Add commands `list :standard:`, `update-latest` (for packages from PyPI), `upload`
+
+See also: 
+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages
 
 
 Comment: 1
```




---

archive/issue_comments_435817.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,61 @@\n+Improvements to low-level system packages scripts:\n+- #30861, #30865, #30947, #30951, #30968: Refactor system package code in `tox.ini`, `build/bin/write_dockerfile.sh` by extending and using `sage_bootstrap`\n+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` \n+\n+Improvements to the system package database:\n+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`\n+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap\n+\n+Improvements to `tox docker`:\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache\n+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)\n+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached\n+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)\n+- setenv/passenv SAGE_SERVER\n+- Remove `TARGETS_PRE`/`TARGETS` distinction: Instead leave a stamp file and exit from make with an error to trigger the ADD of src/; for example, add `sagelib` dependency on `$(SAGE_SRC)/sage`, and add the rule to Makefile:\n+\n+```\n+$(SAGE_SRC)/sage:\n+\ttouch .need_src; exit 1\n+```\n+- use environment variable `MAKE` for docker builds as well, instead of asking users to pass the `USE_MAKEFLAGS` variable\n+\n+Improvements to `tox local`:\n+- #29416: tox.ini: Add local-copy\n+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)\n+- #31216: tox.ini (local): Add environment variables to skip system package installs, mechanism for a local interactive shell\n+- #31064: `ci-cygwin*.yml`: delegate to `tox`, add more stages, use more specific `SAGE_LOCAL`\n+- the complicated rule for the commands of `local` consists entirely of workarounds for things that should really be fixed/improved in our `Makefile`s:\n+   - #30721: `build/make/Makefile.in`: `base-toolchain` should be a dependency of every non-base, non-toolchain package\n+   - `tox.ini` and `build/bin/write-dockerfile.sh` use better defaults for `SAGE_CHECK_PACKAGES`; this should be moved to `build/make/Makefile.in` (`SAGE_CHECK_PACKAGES_DEFAULT_yes`).\n+\n+Other improvements to `tox.ini`:\n+- Make `tox -p auto` and `tox --listenvs` useful again (it does not understand the nested braces)\n+- #31574: `tox.ini`, `build/bin/write-dockerfile.sh`: Do not use `make -k` by default\n+- \n+\n+Improvements to auto-generated parts of the manuals:\n+- #29558 Autogenerated parts of installation guide\n+- #29557 Add script package `_recommended` and generate \"recommended system packages\" info\n+\n+Improvements for messages at the end of a `./configure` run:\n+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated\n+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense\n+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed\n+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately\n+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)\n+- #29586: Improve configure's recommendations\n+- #30624: Improve wording and formatting of configure's recommendation message\n+- #30863: refine definition of variable SAGE_NEED_SYSTEM_PACKAGES in m4/sage_spkg_collect.m4\n+\n+Tickets regarding `sage_bootstrap`:\n+- #29919 Restore \"huge\" package type\n+- #20023 `sage_bootstrap`: Remove Python 2.6 support\n+- #20104 `sage --package`: Add commands `list :standard:`, `update-latest` (for packages from PyPI), `upload`\n+\n+See also: \n+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages\n \n \n Comment: 1\n```\n",
    "created_at": "2021-03-28T18:38:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435817",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,61 @@
+Improvements to low-level system packages scripts:
+- #30861, #30865, #30947, #30951, #30968: Refactor system package code in `tox.ini`, `build/bin/write_dockerfile.sh` by extending and using `sage_bootstrap`
+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` 
+
+Improvements to the system package database:
+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`
+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap
+
+Improvements to `tox docker`:
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache
+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)
+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached
+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)
+- setenv/passenv SAGE_SERVER
+- Remove `TARGETS_PRE`/`TARGETS` distinction: Instead leave a stamp file and exit from make with an error to trigger the ADD of src/; for example, add `sagelib` dependency on `$(SAGE_SRC)/sage`, and add the rule to Makefile:
+
+```
+$(SAGE_SRC)/sage:
+	touch .need_src; exit 1
+```
+- use environment variable `MAKE` for docker builds as well, instead of asking users to pass the `USE_MAKEFLAGS` variable
+
+Improvements to `tox local`:
+- #29416: tox.ini: Add local-copy
+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)
+- #31216: tox.ini (local): Add environment variables to skip system package installs, mechanism for a local interactive shell
+- #31064: `ci-cygwin*.yml`: delegate to `tox`, add more stages, use more specific `SAGE_LOCAL`
+- the complicated rule for the commands of `local` consists entirely of workarounds for things that should really be fixed/improved in our `Makefile`s:
+   - #30721: `build/make/Makefile.in`: `base-toolchain` should be a dependency of every non-base, non-toolchain package
+   - `tox.ini` and `build/bin/write-dockerfile.sh` use better defaults for `SAGE_CHECK_PACKAGES`; this should be moved to `build/make/Makefile.in` (`SAGE_CHECK_PACKAGES_DEFAULT_yes`).
+
+Other improvements to `tox.ini`:
+- Make `tox -p auto` and `tox --listenvs` useful again (it does not understand the nested braces)
+- #31574: `tox.ini`, `build/bin/write-dockerfile.sh`: Do not use `make -k` by default
+- 
+
+Improvements to auto-generated parts of the manuals:
+- #29558 Autogenerated parts of installation guide
+- #29557 Add script package `_recommended` and generate "recommended system packages" info
+
+Improvements for messages at the end of a `./configure` run:
+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated
+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense
+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed
+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately
+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)
+- #29586: Improve configure's recommendations
+- #30624: Improve wording and formatting of configure's recommendation message
+- #30863: refine definition of variable SAGE_NEED_SYSTEM_PACKAGES in m4/sage_spkg_collect.m4
+
+Tickets regarding `sage_bootstrap`:
+- #29919 Restore "huge" package type
+- #20023 `sage_bootstrap`: Remove Python 2.6 support
+- #20104 `sage --package`: Add commands `list :standard:`, `update-latest` (for packages from PyPI), `upload`
+
+See also: 
+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages
 
 
 Comment: 1
```




---

archive/issue_comments_435818.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,61 @@\n+Improvements to low-level system packages scripts:\n+- #30861, #30865, #30947, #30951, #30968: Refactor system package code in `tox.ini`, `build/bin/write_dockerfile.sh` by extending and using `sage_bootstrap`\n+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` \n+\n+Improvements to the system package database:\n+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap\n+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`\n+\n+Improvements to `tox docker`:\n+- #29536 Make docker images from [GitHub](GitHub) CI workflow and regular Sage Docker images interoperable\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache\n+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)\n+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached\n+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)\n+- setenv/passenv SAGE_SERVER\n+- Remove `TARGETS_PRE`/`TARGETS` distinction: Instead leave a stamp file and exit from make with an error to trigger the ADD of src/; for example, add `sagelib` dependency on `$(SAGE_SRC)/sage`, and add the rule to Makefile:\n+\n+```\n+$(SAGE_SRC)/sage:\n+\ttouch .need_src; exit 1\n+```\n+- use environment variable `MAKE` for docker builds as well, instead of asking users to pass the `USE_MAKEFLAGS` variable\n+\n+Improvements to `tox local`:\n+- #31216: tox.ini (local): Add environment variables to skip system package installs, mechanism for a local interactive shell\n+- #31064: `ci-cygwin*.yml`: delegate to `tox`, add more stages, use more specific `SAGE_LOCAL`\n+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)\n+- #29416: tox.ini: Add local-copy\n+- the complicated rule for the commands of `local` consists entirely of workarounds for things that should really be fixed/improved in our `Makefile`s:\n+   - #30721: `build/make/Makefile.in`: `base-toolchain` should be a dependency of every non-base, non-toolchain package\n+   - `tox.ini` and `build/bin/write-dockerfile.sh` use better defaults for `SAGE_CHECK_PACKAGES`; this should be moved to `build/make/Makefile.in` (`SAGE_CHECK_PACKAGES_DEFAULT_yes`).\n+   - #31535 New make targets \"sagelib-sdist\", \"sage_docbuild-sdist\", ... and \"sagelib-tox-...\", ...\n+Other improvements to `tox.ini`:\n+- Make `tox -p auto` and `tox --listenvs` useful again (it does not understand the nested braces)\n+- #31574: `tox.ini`, `build/bin/write-dockerfile.sh`: Do not use `make -k` by default\n+\n+Improvements to auto-generated parts of the manuals:\n+- #29558 Autogenerated parts of installation guide\n+- #29557 Add script package `_recommended` and generate \"recommended system packages\" info\n+\n+Improvements for messages at the end of a `./configure` run:\n+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated\n+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense\n+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed\n+- #30624: Improve wording and formatting of configure's recommendation message\n+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately\n+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)\n+- #29586: Improve configure's recommendations\n+- #30863: refine definition of variable SAGE_NEED_SYSTEM_PACKAGES in m4/sage_spkg_collect.m4\n+\n+Tickets regarding `sage_bootstrap`:\n+- #20023 `sage_bootstrap`: Remove Python 2.6 support\n+- #20104 `sage --package`: Add commands `list :standard:`, `update-latest` (for packages from PyPI), `upload`\n+- #29919 Restore \"huge\" package type\n+\n+See also: \n+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages\n \n \n Comment: 1\n```\n",
    "created_at": "2021-03-28T19:51:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435818",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,61 @@
+Improvements to low-level system packages scripts:
+- #30861, #30865, #30947, #30951, #30968: Refactor system package code in `tox.ini`, `build/bin/write_dockerfile.sh` by extending and using `sage_bootstrap`
+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` 
+
+Improvements to the system package database:
+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap
+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`
+
+Improvements to `tox docker`:
+- #29536 Make docker images from [GitHub](GitHub) CI workflow and regular Sage Docker images interoperable
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache
+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)
+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached
+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)
+- setenv/passenv SAGE_SERVER
+- Remove `TARGETS_PRE`/`TARGETS` distinction: Instead leave a stamp file and exit from make with an error to trigger the ADD of src/; for example, add `sagelib` dependency on `$(SAGE_SRC)/sage`, and add the rule to Makefile:
+
+```
+$(SAGE_SRC)/sage:
+	touch .need_src; exit 1
+```
+- use environment variable `MAKE` for docker builds as well, instead of asking users to pass the `USE_MAKEFLAGS` variable
+
+Improvements to `tox local`:
+- #31216: tox.ini (local): Add environment variables to skip system package installs, mechanism for a local interactive shell
+- #31064: `ci-cygwin*.yml`: delegate to `tox`, add more stages, use more specific `SAGE_LOCAL`
+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)
+- #29416: tox.ini: Add local-copy
+- the complicated rule for the commands of `local` consists entirely of workarounds for things that should really be fixed/improved in our `Makefile`s:
+   - #30721: `build/make/Makefile.in`: `base-toolchain` should be a dependency of every non-base, non-toolchain package
+   - `tox.ini` and `build/bin/write-dockerfile.sh` use better defaults for `SAGE_CHECK_PACKAGES`; this should be moved to `build/make/Makefile.in` (`SAGE_CHECK_PACKAGES_DEFAULT_yes`).
+   - #31535 New make targets "sagelib-sdist", "sage_docbuild-sdist", ... and "sagelib-tox-...", ...
+Other improvements to `tox.ini`:
+- Make `tox -p auto` and `tox --listenvs` useful again (it does not understand the nested braces)
+- #31574: `tox.ini`, `build/bin/write-dockerfile.sh`: Do not use `make -k` by default
+
+Improvements to auto-generated parts of the manuals:
+- #29558 Autogenerated parts of installation guide
+- #29557 Add script package `_recommended` and generate "recommended system packages" info
+
+Improvements for messages at the end of a `./configure` run:
+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated
+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense
+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed
+- #30624: Improve wording and formatting of configure's recommendation message
+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately
+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)
+- #29586: Improve configure's recommendations
+- #30863: refine definition of variable SAGE_NEED_SYSTEM_PACKAGES in m4/sage_spkg_collect.m4
+
+Tickets regarding `sage_bootstrap`:
+- #20023 `sage_bootstrap`: Remove Python 2.6 support
+- #20104 `sage --package`: Add commands `list :standard:`, `update-latest` (for packages from PyPI), `upload`
+- #29919 Restore "huge" package type
+
+See also: 
+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages
 
 
 Comment: 1
```




---

archive/issue_comments_435819.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,62 @@\n+Improvements to low-level system packages scripts:\n+- #30861, #30865, #30947, #30951, #30968: Refactor system package code in `tox.ini`, `build/bin/write_dockerfile.sh` by extending and using `sage_bootstrap`\n+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` \n+\n+Improvements to the system package database:\n+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap\n+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`\n+\n+Improvements to `tox docker`:\n+- #29536 Make docker images from [GitHub](GitHub) CI workflow and regular Sage Docker images interoperable\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache\n+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)\n+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached\n+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)\n+- setenv/passenv SAGE_SERVER\n+- Remove `TARGETS_PRE`/`TARGETS` distinction: Instead leave a stamp file and exit from make with an error to trigger the ADD of src/; for example, add `sagelib` dependency on `$(SAGE_SRC)/sage`, and add the rule to Makefile:\n+\n+```\n+$(SAGE_SRC)/sage:\n+\ttouch .need_src; exit 1\n+```\n+- use environment variable `MAKE` for docker builds as well, instead of asking users to pass the `USE_MAKEFLAGS` variable\n+\n+Improvements to `tox local`:\n+- #31216: tox.ini (local): Add environment variables to skip system package installs, mechanism for a local interactive shell\n+- #31064: `ci-cygwin*.yml`: delegate to `tox`, add more stages, use more specific `SAGE_LOCAL`\n+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)\n+- #29416: tox.ini: Add local-copy\n+- the complicated rule for the commands of `local` consists entirely of workarounds for things that should really be fixed/improved in our `Makefile`s:\n+   - #30721: `build/make/Makefile.in`: `base-toolchain` should be a dependency of every non-base, non-toolchain package\n+   - `tox.ini` and `build/bin/write-dockerfile.sh` use better defaults for `SAGE_CHECK_PACKAGES`; this should be moved to `build/make/Makefile.in` (`SAGE_CHECK_PACKAGES_DEFAULT_yes`).\n+   - #31535 New make targets \"sagelib-sdist\", \"sage_docbuild-sdist\", ... and \"sagelib-tox-...\", ...\n+Other improvements to `tox.ini`:\n+- Make `tox -p auto` and `tox --listenvs` useful again (it does not understand the nested braces)\n+- #31574: `tox.ini`, `build/bin/write-dockerfile.sh`: Do not use `make -k` by default\n+\n+Improvements to auto-generated parts of the manuals:\n+- #29558 Autogenerated parts of installation guide\n+- #29557 Add script package `_recommended` and generate \"recommended system packages\" info\n+\n+Improvements for messages at the end of a `./configure` run:\n+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated\n+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense\n+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed\n+- #30624: Improve wording and formatting of configure's recommendation message\n+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately\n+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)\n+- #32060 `configure`: Change defaults to `--with-system-gcc=force`, `--with-system-python3=force`\n+- #29586: Improve configure's recommendations\n+- #30863: refine definition of variable SAGE_NEED_SYSTEM_PACKAGES in m4/sage_spkg_collect.m4\n+\n+Tickets regarding `sage_bootstrap`:\n+- #20023 `sage_bootstrap`: Remove Python 2.6 support\n+- #20104 `sage --package`: Add commands `list :standard:`, `update-latest` (for packages from PyPI), `upload`\n+- #29919 Restore \"huge\" package type\n+\n+See also: \n+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages\n \n \n Comment: 1\n```\n",
    "created_at": "2021-06-25T18:32:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435819",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,62 @@
+Improvements to low-level system packages scripts:
+- #30861, #30865, #30947, #30951, #30968: Refactor system package code in `tox.ini`, `build/bin/write_dockerfile.sh` by extending and using `sage_bootstrap`
+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` 
+
+Improvements to the system package database:
+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap
+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`
+
+Improvements to `tox docker`:
+- #29536 Make docker images from [GitHub](GitHub) CI workflow and regular Sage Docker images interoperable
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache
+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)
+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached
+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)
+- setenv/passenv SAGE_SERVER
+- Remove `TARGETS_PRE`/`TARGETS` distinction: Instead leave a stamp file and exit from make with an error to trigger the ADD of src/; for example, add `sagelib` dependency on `$(SAGE_SRC)/sage`, and add the rule to Makefile:
+
+```
+$(SAGE_SRC)/sage:
+	touch .need_src; exit 1
+```
+- use environment variable `MAKE` for docker builds as well, instead of asking users to pass the `USE_MAKEFLAGS` variable
+
+Improvements to `tox local`:
+- #31216: tox.ini (local): Add environment variables to skip system package installs, mechanism for a local interactive shell
+- #31064: `ci-cygwin*.yml`: delegate to `tox`, add more stages, use more specific `SAGE_LOCAL`
+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)
+- #29416: tox.ini: Add local-copy
+- the complicated rule for the commands of `local` consists entirely of workarounds for things that should really be fixed/improved in our `Makefile`s:
+   - #30721: `build/make/Makefile.in`: `base-toolchain` should be a dependency of every non-base, non-toolchain package
+   - `tox.ini` and `build/bin/write-dockerfile.sh` use better defaults for `SAGE_CHECK_PACKAGES`; this should be moved to `build/make/Makefile.in` (`SAGE_CHECK_PACKAGES_DEFAULT_yes`).
+   - #31535 New make targets "sagelib-sdist", "sage_docbuild-sdist", ... and "sagelib-tox-...", ...
+Other improvements to `tox.ini`:
+- Make `tox -p auto` and `tox --listenvs` useful again (it does not understand the nested braces)
+- #31574: `tox.ini`, `build/bin/write-dockerfile.sh`: Do not use `make -k` by default
+
+Improvements to auto-generated parts of the manuals:
+- #29558 Autogenerated parts of installation guide
+- #29557 Add script package `_recommended` and generate "recommended system packages" info
+
+Improvements for messages at the end of a `./configure` run:
+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated
+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense
+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed
+- #30624: Improve wording and formatting of configure's recommendation message
+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately
+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)
+- #32060 `configure`: Change defaults to `--with-system-gcc=force`, `--with-system-python3=force`
+- #29586: Improve configure's recommendations
+- #30863: refine definition of variable SAGE_NEED_SYSTEM_PACKAGES in m4/sage_spkg_collect.m4
+
+Tickets regarding `sage_bootstrap`:
+- #20023 `sage_bootstrap`: Remove Python 2.6 support
+- #20104 `sage --package`: Add commands `list :standard:`, `update-latest` (for packages from PyPI), `upload`
+- #29919 Restore "huge" package type
+
+See also: 
+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages
 
 
 Comment: 1
```




---

archive/issue_events_073952.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:16:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29146#event-73952"
}
```



---

archive/issue_events_073953.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:16:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29146#event-73953"
}
```



---

archive/issue_comments_435820.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,62 @@\n+Improvements to low-level system packages scripts:\n+- #30861, #30865, #30947, #30951, #30968: Refactor system package code in `tox.ini`, `build/bin/write_dockerfile.sh` by extending and using `sage_bootstrap`\n+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` \n+\n+Improvements to the system package database:\n+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap\n+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`\n+\n+Improvements to `tox docker`:\n+- #29536 Make docker images from [GitHub](GitHub) CI workflow and regular Sage Docker images interoperable\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache\n+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)\n+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached\n+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)\n+- setenv/passenv SAGE_SERVER\n+- Remove `TARGETS_PRE`/`TARGETS` distinction: Instead leave a stamp file and exit from make with an error to trigger the ADD of src/; for example, add `sagelib` dependency on `$(SAGE_SRC)/sage`, and add the rule to Makefile:\n+\n+```\n+$(SAGE_SRC)/sage:\n+\ttouch .need_src; exit 1\n+```\n+- use environment variable `MAKE` for docker builds as well, instead of asking users to pass the `USE_MAKEFLAGS` variable\n+\n+Improvements to `tox local`:\n+- #31216: tox.ini (local): Add environment variables to skip system package installs, mechanism for a local interactive shell\n+- #31064: `ci-cygwin*.yml`: delegate to `tox`, add more stages, use more specific `SAGE_LOCAL`\n+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)\n+- #29416: tox.ini: Add local-copy\n+- the complicated rule for the commands of `local` consists entirely of workarounds for things that should really be fixed/improved in our `Makefile`s:\n+   - #30721: `build/make/Makefile.in`: `base-toolchain` should be a dependency of every non-base, non-toolchain package\n+   - `tox.ini` and `build/bin/write-dockerfile.sh` use better defaults for `SAGE_CHECK_PACKAGES`; this should be moved to `build/make/Makefile.in` (`SAGE_CHECK_PACKAGES_DEFAULT_yes`).\n+   - #31535 New make targets \"sagelib-sdist\", \"sage_docbuild-sdist\", ... and \"sagelib-tox-...\", ...\n+Other improvements to `tox.ini`:\n+- #32764: Make `tox -p auto` and `tox --listenvs` useful again (it does not understand the nested braces)\n+- #31574: `tox.ini`, `build/bin/write-dockerfile.sh`: Do not use `make -k` by default\n+\n+Improvements to auto-generated parts of the manuals:\n+- #29558 Autogenerated parts of installation guide\n+- #29557 Add script package `_recommended` and generate \"recommended system packages\" info\n+\n+Improvements for messages at the end of a `./configure` run:\n+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated\n+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense\n+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed\n+- #30624: Improve wording and formatting of configure's recommendation message\n+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately\n+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)\n+- #32060 `configure`: Change defaults to `--with-system-gcc=force`, `--with-system-python3=force`\n+- #29586: Improve configure's recommendations\n+- #30863: refine definition of variable SAGE_NEED_SYSTEM_PACKAGES in m4/sage_spkg_collect.m4\n+\n+Tickets regarding `sage_bootstrap`:\n+- #20023 `sage_bootstrap`: Remove Python 2.6 support\n+- #20104 `sage --package`: Add commands `list :standard:`, `update-latest` (for packages from PyPI), `upload`\n+- #29919 Restore \"huge\" package type\n+\n+See also: \n+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages\n \n \n Comment: 1\n```\n",
    "created_at": "2021-10-25T15:52:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435820",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,62 @@
+Improvements to low-level system packages scripts:
+- #30861, #30865, #30947, #30951, #30968: Refactor system package code in `tox.ini`, `build/bin/write_dockerfile.sh` by extending and using `sage_bootstrap`
+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` 
+
+Improvements to the system package database:
+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap
+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`
+
+Improvements to `tox docker`:
+- #29536 Make docker images from [GitHub](GitHub) CI workflow and regular Sage Docker images interoperable
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache
+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)
+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached
+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)
+- setenv/passenv SAGE_SERVER
+- Remove `TARGETS_PRE`/`TARGETS` distinction: Instead leave a stamp file and exit from make with an error to trigger the ADD of src/; for example, add `sagelib` dependency on `$(SAGE_SRC)/sage`, and add the rule to Makefile:
+
+```
+$(SAGE_SRC)/sage:
+	touch .need_src; exit 1
+```
+- use environment variable `MAKE` for docker builds as well, instead of asking users to pass the `USE_MAKEFLAGS` variable
+
+Improvements to `tox local`:
+- #31216: tox.ini (local): Add environment variables to skip system package installs, mechanism for a local interactive shell
+- #31064: `ci-cygwin*.yml`: delegate to `tox`, add more stages, use more specific `SAGE_LOCAL`
+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)
+- #29416: tox.ini: Add local-copy
+- the complicated rule for the commands of `local` consists entirely of workarounds for things that should really be fixed/improved in our `Makefile`s:
+   - #30721: `build/make/Makefile.in`: `base-toolchain` should be a dependency of every non-base, non-toolchain package
+   - `tox.ini` and `build/bin/write-dockerfile.sh` use better defaults for `SAGE_CHECK_PACKAGES`; this should be moved to `build/make/Makefile.in` (`SAGE_CHECK_PACKAGES_DEFAULT_yes`).
+   - #31535 New make targets "sagelib-sdist", "sage_docbuild-sdist", ... and "sagelib-tox-...", ...
+Other improvements to `tox.ini`:
+- #32764: Make `tox -p auto` and `tox --listenvs` useful again (it does not understand the nested braces)
+- #31574: `tox.ini`, `build/bin/write-dockerfile.sh`: Do not use `make -k` by default
+
+Improvements to auto-generated parts of the manuals:
+- #29558 Autogenerated parts of installation guide
+- #29557 Add script package `_recommended` and generate "recommended system packages" info
+
+Improvements for messages at the end of a `./configure` run:
+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated
+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense
+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed
+- #30624: Improve wording and formatting of configure's recommendation message
+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately
+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)
+- #32060 `configure`: Change defaults to `--with-system-gcc=force`, `--with-system-python3=force`
+- #29586: Improve configure's recommendations
+- #30863: refine definition of variable SAGE_NEED_SYSTEM_PACKAGES in m4/sage_spkg_collect.m4
+
+Tickets regarding `sage_bootstrap`:
+- #20023 `sage_bootstrap`: Remove Python 2.6 support
+- #20104 `sage --package`: Add commands `list :standard:`, `update-latest` (for packages from PyPI), `upload`
+- #29919 Restore "huge" package type
+
+See also: 
+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages
 
 
 Comment: 1
```




---

archive/issue_comments_435821.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,62 @@\n+Improvements to low-level system packages scripts:\n+- #30861, #30865, #30947, #30951, #30968: Refactor system package code in `tox.ini`, `build/bin/write_dockerfile.sh` by extending and using `sage_bootstrap`\n+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` \n+\n+Improvements to the system package database:\n+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap\n+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`\n+\n+Improvements to `tox docker`:\n+- #29536 Make docker images from [GitHub](GitHub) CI workflow and regular Sage Docker images interoperable\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache\n+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)\n+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached\n+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)\n+- setenv/passenv SAGE_SERVER\n+- Remove `TARGETS_PRE`/`TARGETS` distinction: Instead leave a stamp file and exit from make with an error to trigger the ADD of src/; for example, add `sagelib` dependency on `$(SAGE_SRC)/sage`, and add the rule to Makefile:\n+\n+```\n+$(SAGE_SRC)/sage:\n+\ttouch .need_src; exit 1\n+```\n+- use environment variable `MAKE` for docker builds as well, instead of asking users to pass the `USE_MAKEFLAGS` variable\n+\n+Improvements to `tox local`:\n+- #31216: tox.ini (local): Add environment variables to skip system package installs, mechanism for a local interactive shell\n+- #31064: `ci-cygwin*.yml`: delegate to `tox`, add more stages, use more specific `SAGE_LOCAL`\n+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)\n+- #29416: tox.ini: Add local-copy\n+- the complicated rule for the commands of `local` consists entirely of workarounds for things that should really be fixed/improved in our `Makefile`s:\n+   - #30721: `build/make/Makefile.in`: `base-toolchain` should be a dependency of every non-base, non-toolchain package\n+   - #32785: `tox.ini` and `build/bin/write-dockerfile.sh` use better defaults for `SAGE_CHECK_PACKAGES`; this should be moved to `build/make/Makefile.in` (`SAGE_CHECK_PACKAGES_DEFAULT_yes`).\n+   - #31535 New make targets \"sagelib-sdist\", \"sage_docbuild-sdist\", ... and \"sagelib-tox-...\", ...\n+Other improvements to `tox.ini`:\n+- #32764: Make `tox -p auto` and `tox --listenvs` useful again (it does not understand the nested braces)\n+- #31574: `tox.ini`, `build/bin/write-dockerfile.sh`: Do not use `make -k` by default\n+\n+Improvements to auto-generated parts of the manuals:\n+- #29558 Autogenerated parts of installation guide\n+- #29557 Add script package `_recommended` and generate \"recommended system packages\" info\n+\n+Improvements for messages at the end of a `./configure` run:\n+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated\n+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense\n+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed\n+- #30624: Improve wording and formatting of configure's recommendation message\n+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately\n+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)\n+- #32060 `configure`: Change defaults to `--with-system-gcc=force`, `--with-system-python3=force`\n+- #29586: Improve configure's recommendations\n+- #30863: refine definition of variable SAGE_NEED_SYSTEM_PACKAGES in m4/sage_spkg_collect.m4\n+\n+Tickets regarding `sage_bootstrap`:\n+- #20023 `sage_bootstrap`: Remove Python 2.6 support\n+- #20104 `sage --package`: Add commands `list :standard:`, `update-latest` (for packages from PyPI), `upload`\n+- #29919 Restore \"huge\" package type\n+\n+See also: \n+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages\n \n \n Comment: 1\n```\n",
    "created_at": "2021-10-28T06:11:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435821",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,62 @@
+Improvements to low-level system packages scripts:
+- #30861, #30865, #30947, #30951, #30968: Refactor system package code in `tox.ini`, `build/bin/write_dockerfile.sh` by extending and using `sage_bootstrap`
+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` 
+
+Improvements to the system package database:
+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap
+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`
+
+Improvements to `tox docker`:
+- #29536 Make docker images from [GitHub](GitHub) CI workflow and regular Sage Docker images interoperable
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache
+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)
+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached
+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)
+- setenv/passenv SAGE_SERVER
+- Remove `TARGETS_PRE`/`TARGETS` distinction: Instead leave a stamp file and exit from make with an error to trigger the ADD of src/; for example, add `sagelib` dependency on `$(SAGE_SRC)/sage`, and add the rule to Makefile:
+
+```
+$(SAGE_SRC)/sage:
+	touch .need_src; exit 1
+```
+- use environment variable `MAKE` for docker builds as well, instead of asking users to pass the `USE_MAKEFLAGS` variable
+
+Improvements to `tox local`:
+- #31216: tox.ini (local): Add environment variables to skip system package installs, mechanism for a local interactive shell
+- #31064: `ci-cygwin*.yml`: delegate to `tox`, add more stages, use more specific `SAGE_LOCAL`
+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)
+- #29416: tox.ini: Add local-copy
+- the complicated rule for the commands of `local` consists entirely of workarounds for things that should really be fixed/improved in our `Makefile`s:
+   - #30721: `build/make/Makefile.in`: `base-toolchain` should be a dependency of every non-base, non-toolchain package
+   - #32785: `tox.ini` and `build/bin/write-dockerfile.sh` use better defaults for `SAGE_CHECK_PACKAGES`; this should be moved to `build/make/Makefile.in` (`SAGE_CHECK_PACKAGES_DEFAULT_yes`).
+   - #31535 New make targets "sagelib-sdist", "sage_docbuild-sdist", ... and "sagelib-tox-...", ...
+Other improvements to `tox.ini`:
+- #32764: Make `tox -p auto` and `tox --listenvs` useful again (it does not understand the nested braces)
+- #31574: `tox.ini`, `build/bin/write-dockerfile.sh`: Do not use `make -k` by default
+
+Improvements to auto-generated parts of the manuals:
+- #29558 Autogenerated parts of installation guide
+- #29557 Add script package `_recommended` and generate "recommended system packages" info
+
+Improvements for messages at the end of a `./configure` run:
+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated
+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense
+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed
+- #30624: Improve wording and formatting of configure's recommendation message
+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately
+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)
+- #32060 `configure`: Change defaults to `--with-system-gcc=force`, `--with-system-python3=force`
+- #29586: Improve configure's recommendations
+- #30863: refine definition of variable SAGE_NEED_SYSTEM_PACKAGES in m4/sage_spkg_collect.m4
+
+Tickets regarding `sage_bootstrap`:
+- #20023 `sage_bootstrap`: Remove Python 2.6 support
+- #20104 `sage --package`: Add commands `list :standard:`, `update-latest` (for packages from PyPI), `upload`
+- #29919 Restore "huge" package type
+
+See also: 
+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages
 
 
 Comment: 1
```




---

archive/issue_events_073954.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:11:26Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29146#event-73954"
}
```



---

archive/issue_events_073955.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:11:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29146#event-73955"
}
```



---

archive/issue_events_073956.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-07T00:07:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29146#event-73956"
}
```



---

archive/issue_events_073957.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-07T00:07:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29146#event-73957"
}
```



---

archive/issue_comments_435822.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,64 @@\n+Improvements to low-level system packages scripts:\n+- #30861, #30865, #30947, #30951, #30968: Refactor system package code in `tox.ini`, `build/bin/write_dockerfile.sh` by extending and using `sage_bootstrap`\n+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` \n+- #29041 sage_bootstrap: Add command \"sage -package list --output={install-requires,requirements,pipfile,debian,....}\"\n+- #33860 sage-package: Add commands \"dependencies\", \"trees\"\n+\n+Improvements to the system package database:\n+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap\n+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`\n+\n+Improvements to `tox docker`:\n+- #29536 Make docker images from [GitHub](GitHub) CI workflow and regular Sage Docker images interoperable\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache\n+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)\n+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached\n+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)\n+- setenv/passenv SAGE_SERVER\n+- Remove `TARGETS_PRE`/`TARGETS` distinction: Instead leave a stamp file and exit from make with an error to trigger the ADD of src/; for example, add `sagelib` dependency on `$(SAGE_SRC)/sage`, and add the rule to Makefile:\n+\n+```\n+$(SAGE_SRC)/sage:\n+\ttouch .need_src; exit 1\n+```\n+- use environment variable `MAKE` for docker builds as well, instead of asking users to pass the `USE_MAKEFLAGS` variable\n+\n+Improvements to `tox local`:\n+- #31216: tox.ini (local): Add environment variables to skip system package installs, mechanism for a local interactive shell\n+- #31064: `ci-cygwin*.yml`: delegate to `tox`, add more stages, use more specific `SAGE_LOCAL`\n+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)\n+- #29416: tox.ini: Add local-copy\n+- the complicated rule for the commands of `local` consists entirely of workarounds for things that should really be fixed/improved in our `Makefile`s:\n+   - #30721: `build/make/Makefile.in`: `base-toolchain` should be a dependency of every non-base, non-toolchain package\n+   - #32785: `tox.ini` and `build/bin/write-dockerfile.sh` use better defaults for `SAGE_CHECK_PACKAGES`; this should be moved to `build/make/Makefile.in` (`SAGE_CHECK_PACKAGES_DEFAULT_yes`).\n+   - #31535 New make targets \"sagelib-sdist\", \"sage_docbuild-sdist\", ... and \"sagelib-tox-...\", ...\n+Other improvements to `tox.ini`:\n+- #32764: Make `tox -p auto` and `tox --listenvs` useful again (it does not understand the nested braces)\n+- #31574: `tox.ini`, `build/bin/write-dockerfile.sh`: Do not use `make -k` by default\n+\n+Improvements to auto-generated parts of the manuals:\n+- #29558 Autogenerated parts of installation guide\n+- #29557 Add script package `_recommended` and generate \"recommended system packages\" info\n+\n+Improvements for messages at the end of a `./configure` run:\n+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated\n+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense\n+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed\n+- #30624: Improve wording and formatting of configure's recommendation message\n+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately\n+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)\n+- #32060 `configure`: Change defaults to `--with-system-gcc=force`, `--with-system-python3=force`\n+- #29586: Improve configure's recommendations\n+- #30863: refine definition of variable SAGE_NEED_SYSTEM_PACKAGES in m4/sage_spkg_collect.m4\n+\n+Tickets regarding `sage_bootstrap`:\n+- #20023 `sage_bootstrap`: Remove Python 2.6 support\n+- #20104 `sage --package`: Add commands `list :standard:`, `update-latest` (for packages from PyPI), `upload`\n+- #29919 Restore \"huge\" package type\n+\n+See also: \n+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages\n \n \n Comment: 1\n```\n",
    "created_at": "2022-05-17T05:40:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435822",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,64 @@
+Improvements to low-level system packages scripts:
+- #30861, #30865, #30947, #30951, #30968: Refactor system package code in `tox.ini`, `build/bin/write_dockerfile.sh` by extending and using `sage_bootstrap`
+- Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` 
+- #29041 sage_bootstrap: Add command "sage -package list --output={install-requires,requirements,pipfile,debian,....}"
+- #33860 sage-package: Add commands "dependencies", "trees"
+
+Improvements to the system package database:
+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap
+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`
+
+Improvements to `tox docker`:
+- #29536 Make docker images from [GitHub](GitHub) CI workflow and regular Sage Docker images interoperable
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache
+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)
+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached
+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)
+- setenv/passenv SAGE_SERVER
+- Remove `TARGETS_PRE`/`TARGETS` distinction: Instead leave a stamp file and exit from make with an error to trigger the ADD of src/; for example, add `sagelib` dependency on `$(SAGE_SRC)/sage`, and add the rule to Makefile:
+
+```
+$(SAGE_SRC)/sage:
+	touch .need_src; exit 1
+```
+- use environment variable `MAKE` for docker builds as well, instead of asking users to pass the `USE_MAKEFLAGS` variable
+
+Improvements to `tox local`:
+- #31216: tox.ini (local): Add environment variables to skip system package installs, mechanism for a local interactive shell
+- #31064: `ci-cygwin*.yml`: delegate to `tox`, add more stages, use more specific `SAGE_LOCAL`
+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)
+- #29416: tox.ini: Add local-copy
+- the complicated rule for the commands of `local` consists entirely of workarounds for things that should really be fixed/improved in our `Makefile`s:
+   - #30721: `build/make/Makefile.in`: `base-toolchain` should be a dependency of every non-base, non-toolchain package
+   - #32785: `tox.ini` and `build/bin/write-dockerfile.sh` use better defaults for `SAGE_CHECK_PACKAGES`; this should be moved to `build/make/Makefile.in` (`SAGE_CHECK_PACKAGES_DEFAULT_yes`).
+   - #31535 New make targets "sagelib-sdist", "sage_docbuild-sdist", ... and "sagelib-tox-...", ...
+Other improvements to `tox.ini`:
+- #32764: Make `tox -p auto` and `tox --listenvs` useful again (it does not understand the nested braces)
+- #31574: `tox.ini`, `build/bin/write-dockerfile.sh`: Do not use `make -k` by default
+
+Improvements to auto-generated parts of the manuals:
+- #29558 Autogenerated parts of installation guide
+- #29557 Add script package `_recommended` and generate "recommended system packages" info
+
+Improvements for messages at the end of a `./configure` run:
+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated
+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense
+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed
+- #30624: Improve wording and formatting of configure's recommendation message
+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately
+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)
+- #32060 `configure`: Change defaults to `--with-system-gcc=force`, `--with-system-python3=force`
+- #29586: Improve configure's recommendations
+- #30863: refine definition of variable SAGE_NEED_SYSTEM_PACKAGES in m4/sage_spkg_collect.m4
+
+Tickets regarding `sage_bootstrap`:
+- #20023 `sage_bootstrap`: Remove Python 2.6 support
+- #20104 `sage --package`: Add commands `list :standard:`, `update-latest` (for packages from PyPI), `upload`
+- #29919 Restore "huge" package type
+
+See also: 
+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages
 
 
 Comment: 1
```




---

archive/issue_comments_435823.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,64 @@\n+Improvements to low-level system packages scripts:\n+- #30861, #30865, #30947, #30951, #30968: Refactor system package code in `tox.ini`, `build/bin/write_dockerfile.sh` by extending and using `sage_bootstrap`\n+- #33873: Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` \n+- #29041 sage_bootstrap: Add command \"sage -package list --output={install-requires,requirements,pipfile,debian,....}\"\n+- #33860 sage-package: Add commands \"dependencies\", \"trees\"\n+\n+Improvements to the system package database:\n+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap\n+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`\n+\n+Improvements to `tox docker`:\n+- #29536 Make docker images from [GitHub](GitHub) CI workflow and regular Sage Docker images interoperable\n+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)\n+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache\n+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)\n+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached\n+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)\n+- setenv/passenv SAGE_SERVER\n+- Remove `TARGETS_PRE`/`TARGETS` distinction: Instead leave a stamp file and exit from make with an error to trigger the ADD of src/; for example, add `sagelib` dependency on `$(SAGE_SRC)/sage`, and add the rule to Makefile:\n+\n+```\n+$(SAGE_SRC)/sage:\n+\ttouch .need_src; exit 1\n+```\n+- use environment variable `MAKE` for docker builds as well, instead of asking users to pass the `USE_MAKEFLAGS` variable\n+\n+Improvements to `tox local`:\n+- #31216: tox.ini (local): Add environment variables to skip system package installs, mechanism for a local interactive shell\n+- #31064: `ci-cygwin*.yml`: delegate to `tox`, add more stages, use more specific `SAGE_LOCAL`\n+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)\n+- #29416: tox.ini: Add local-copy\n+- the complicated rule for the commands of `local` consists entirely of workarounds for things that should really be fixed/improved in our `Makefile`s:\n+   - #30721: `build/make/Makefile.in`: `base-toolchain` should be a dependency of every non-base, non-toolchain package\n+   - #32785: `tox.ini` and `build/bin/write-dockerfile.sh` use better defaults for `SAGE_CHECK_PACKAGES`; this should be moved to `build/make/Makefile.in` (`SAGE_CHECK_PACKAGES_DEFAULT_yes`).\n+   - #31535 New make targets \"sagelib-sdist\", \"sage_docbuild-sdist\", ... and \"sagelib-tox-...\", ...\n+Other improvements to `tox.ini`:\n+- #32764: Make `tox -p auto` and `tox --listenvs` useful again (it does not understand the nested braces)\n+- #31574: `tox.ini`, `build/bin/write-dockerfile.sh`: Do not use `make -k` by default\n+\n+Improvements to auto-generated parts of the manuals:\n+- #29558 Autogenerated parts of installation guide\n+- #29557 Add script package `_recommended` and generate \"recommended system packages\" info\n+\n+Improvements for messages at the end of a `./configure` run:\n+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated\n+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense\n+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed\n+- #30624: Improve wording and formatting of configure's recommendation message\n+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately\n+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)\n+- #32060 `configure`: Change defaults to `--with-system-gcc=force`, `--with-system-python3=force`\n+- #29586: Improve configure's recommendations\n+- #30863: refine definition of variable SAGE_NEED_SYSTEM_PACKAGES in m4/sage_spkg_collect.m4\n+\n+Tickets regarding `sage_bootstrap`:\n+- #20023 `sage_bootstrap`: Remove Python 2.6 support\n+- #20104 `sage --package`: Add commands `list :standard:`, `update-latest` (for packages from PyPI), `upload`\n+- #29919 Restore \"huge\" package type\n+\n+See also: \n+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages\n \n \n Comment: 1\n```\n",
    "created_at": "2022-05-20T03:43:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29146#issuecomment-435823",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,64 @@
+Improvements to low-level system packages scripts:
+- #30861, #30865, #30947, #30951, #30968: Refactor system package code in `tox.ini`, `build/bin/write_dockerfile.sh` by extending and using `sage_bootstrap`
+- #33873: Extend `build/bin/sage-print-system-package-command` so that it can provide all distribution-specific commands such as `apt-get install` for `build/bin/write_dockerfile.sh` 
+- #29041 sage_bootstrap: Add command "sage -package list --output={install-requires,requirements,pipfile,debian,....}"
+- #33860 sage-package: Add commands "dependencies", "trees"
+
+Improvements to the system package database:
+- #29124 Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap
+- define shell quoting in files like `debian.txt`, handle options correctly when installing packages one by one, fix up passing installation options when `IGNORE_MISSING_PACKAGES=yes`
+
+Improvements to `tox docker`:
+- #29536 Make docker images from [GitHub](GitHub) CI workflow and regular Sage Docker images interoperable
+- optionally create a script for `docker run` instead of a `Dockerfile` (this gives more flexibility for multiarch - see #29143)
+- cache Docker images with system packages installed ... https://github.com/marketplace/actions/build-docker-images-using-cache
+- move log extraction code from tox.yml to tox.ini (#29530 did some preparation already)
+- system package installation should retry a few times when installation errors because of network errors occur. In particular for docker because an incomplete step will be cached
+- Make obtaining image from container of failing builds more robust: Use LABEL commands in dockerfiles, use `docker ps --filter label=.... ` to look up the container (https://docs.docker.com/engine/reference/commandline/ps/)
+- setenv/passenv SAGE_SERVER
+- Remove `TARGETS_PRE`/`TARGETS` distinction: Instead leave a stamp file and exit from make with an error to trigger the ADD of src/; for example, add `sagelib` dependency on `$(SAGE_SRC)/sage`, and add the rule to Makefile:
+
+```
+$(SAGE_SRC)/sage:
+	touch .need_src; exit 1
+```
+- use environment variable `MAKE` for docker builds as well, instead of asking users to pass the `USE_MAKEFLAGS` variable
+
+Improvements to `tox local`:
+- #31216: tox.ini (local): Add environment variables to skip system package installs, mechanism for a local interactive shell
+- #31064: `ci-cygwin*.yml`: delegate to `tox`, add more stages, use more specific `SAGE_LOCAL`
+- #21469: Enable VPATH builds (several independent build trees connected to one source tree)
+- #29416: tox.ini: Add local-copy
+- the complicated rule for the commands of `local` consists entirely of workarounds for things that should really be fixed/improved in our `Makefile`s:
+   - #30721: `build/make/Makefile.in`: `base-toolchain` should be a dependency of every non-base, non-toolchain package
+   - #32785: `tox.ini` and `build/bin/write-dockerfile.sh` use better defaults for `SAGE_CHECK_PACKAGES`; this should be moved to `build/make/Makefile.in` (`SAGE_CHECK_PACKAGES_DEFAULT_yes`).
+   - #31535 New make targets "sagelib-sdist", "sage_docbuild-sdist", ... and "sagelib-tox-...", ...
+Other improvements to `tox.ini`:
+- #32764: Make `tox -p auto` and `tox --listenvs` useful again (it does not understand the nested braces)
+- #31574: `tox.ini`, `build/bin/write-dockerfile.sh`: Do not use `make -k` by default
+
+Improvements to auto-generated parts of the manuals:
+- #29558 Autogenerated parts of installation guide
+- #29557 Add script package `_recommended` and generate "recommended system packages" info
+
+Improvements for messages at the end of a `./configure` run:
+- #29560 `sage-guess-package-system`: Ignore conda if no environment is activated
+- Perhaps `sage-guess-package-system` should report several package systems such as `conda ubuntu` or `homebrew cpan` when that makes sense
+- #29363 - At the end of `configure`, indicate which optional/experimental packages are configured to be installed
+- #30624: Improve wording and formatting of configure's recommendation message
+- #29372 - At the end of `configure`, show installation hints for disabled optional packages separately
+- Hints after ./configure: maybe sort and remove duplicates (https://groups.google.com/d/msg/sage-devel/EWTVN-Fmc8w/y9933Zo1AQAJ)
+- #32060 `configure`: Change defaults to `--with-system-gcc=force`, `--with-system-python3=force`
+- #29586: Improve configure's recommendations
+- #30863: refine definition of variable SAGE_NEED_SYSTEM_PACKAGES in m4/sage_spkg_collect.m4
+
+Tickets regarding `sage_bootstrap`:
+- #20023 `sage_bootstrap`: Remove Python 2.6 support
+- #20104 `sage --package`: Add commands `list :standard:`, `update-latest` (for packages from PyPI), `upload`
+- #29919 Restore "huge" package type
+
+See also: 
+- #29060 Meta-ticket: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages
 
 
 Comment: 1
```




---

archive/issue_events_073958.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29146#event-73958"
}
```



---

archive/issue_events_073959.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29146",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29146#event-73959"
}
```
