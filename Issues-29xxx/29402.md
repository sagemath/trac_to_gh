# Issue 29402: When SAGE_CHECK=warn, print warnings for failed test suites

archive/issues_029165.json:
```json
{
    "body": "Followup to #29301: when running `make` with SAGE_CHECK=\"warn\", we should print out a message summarizing the failed test suites.\n\n\nCC:  @mkoeppe\n\nBranch/Commit: e6e40ebec68fe3dd92966d740d0018c60f117c7a\n\nReviewer: Matthias Koeppe\n\nAuthor: John Palmieri\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29402\n\n",
    "closed_at": "2020-04-05T08:30:19Z",
    "created_at": "2020-03-24T21:34:53Z",
    "labels": [
        "component: build",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "When SAGE_CHECK=warn, print warnings for failed test suites",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29402",
    "user": "https://github.com/jhpalmieri"
}
```
Followup to #29301: when running `make` with SAGE_CHECK="warn", we should print out a message summarizing the failed test suites.


CC:  @mkoeppe

Branch/Commit: e6e40ebec68fe3dd92966d740d0018c60f117c7a

Reviewer: Matthias Koeppe

Author: John Palmieri

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29402





---

archive/issue_comments_566695.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jhpalmieri/print_warnings_after_building\"",
    "created_at": "2020-03-24T21:36:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29402#issuecomment-566695",
    "user": "https://github.com/jhpalmieri"
}
```

Changing branch from "" to "u/jhpalmieri/print_warnings_after_building"



---

archive/issue_comments_566696.json:
```json
{
    "body": "<a id='comment:2'></a>\nHere is an attempt. Also trying to remove some code duplication.\n\n---\nNew commits:\n|                                                                                                                                          |                                                                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|\n|[781c276](https://github.com/sagemath/sagetrac-mirror/commit/781c27640ff7515478fc63743c8055d55f651c32)|`trac 29402: summarize test suite failures after \"make\" with SAGE_CHECK=warn`|",
    "created_at": "2020-03-24T21:36:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29402#issuecomment-566696",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:2'></a>
Here is an attempt. Also trying to remove some code duplication.

---
New commits:
|                                                                                                                                          |                                                                             |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|
|[781c276](https://github.com/sagemath/sagetrac-mirror/commit/781c27640ff7515478fc63743c8055d55f651c32)|`trac 29402: summarize test suite failures after "make" with SAGE_CHECK=warn`|



---

archive/issue_comments_566697.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-03-24T21:36:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29402#issuecomment-566697",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_566698.json:
```json
{
    "body": "Changing commit from \"\" to \"781c27640ff7515478fc63743c8055d55f651c32\"",
    "created_at": "2020-03-24T21:36:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29402#issuecomment-566698",
    "user": "https://github.com/jhpalmieri"
}
```

Changing commit from "" to "781c27640ff7515478fc63743c8055d55f651c32"



---

archive/issue_comments_566699.json:
```json
{
    "body": "<a id='comment:3'></a>\nIt would be better if the message \"Warning: the following package(s) may have failed their test suites\" were only printed if look_for_errors finds a log file with a failing test suite",
    "created_at": "2020-03-26T14:55:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29402#issuecomment-566699",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>
It would be better if the message "Warning: the following package(s) may have failed their test suites" were only printed if look_for_errors finds a log file with a failing test suite



---

archive/issue_comments_566700.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------|\n|[e6e40eb](https://github.com/sagemath/sagetrac-mirror/commit/e6e40ebec68fe3dd92966d740d0018c60f117c7a)|`trac 29402: print warnings after building only if there are warnings.`|",
    "created_at": "2020-03-26T17:17:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29402#issuecomment-566700",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------|
|[e6e40eb](https://github.com/sagemath/sagetrac-mirror/commit/e6e40ebec68fe3dd92966d740d0018c60f117c7a)|`trac 29402: print warnings after building only if there are warnings.`|



---

archive/issue_comments_566701.json:
```json
{
    "body": "Changing commit from \"781c27640ff7515478fc63743c8055d55f651c32\" to \"e6e40ebec68fe3dd92966d740d0018c60f117c7a\"",
    "created_at": "2020-03-26T17:17:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29402#issuecomment-566701",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "781c27640ff7515478fc63743c8055d55f651c32" to "e6e40ebec68fe3dd92966d740d0018c60f117c7a"



---

archive/issue_comments_566702.json:
```json
{
    "body": "<a id='comment:5'></a>\nOkay, how about this?",
    "created_at": "2020-03-26T17:17:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29402#issuecomment-566702",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:5'></a>
Okay, how about this?



---

archive/issue_comments_566703.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Matthias Koeppe\"",
    "created_at": "2020-03-27T13:42:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29402#issuecomment-566703",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "" to "Matthias Koeppe"



---

archive/issue_comments_566704.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-03-27T13:42:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29402#issuecomment-566704",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_566705.json:
```json
{
    "body": "<a id='comment:6'></a>\nThis seems to work well, thanks for working on it.\n\n```\n...\nSAGE_CHECK=warn, so scanning the log files. This may take a few seconds.\n\n* package:         yasm-1.3.0.p0\n  last build time: Mar 13 21:06\n  log file:        /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/logs/pkgs/yasm-1.3.0.p0.log\n```",
    "created_at": "2020-03-27T13:42:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29402#issuecomment-566705",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
This seems to work well, thanks for working on it.

```
...
SAGE_CHECK=warn, so scanning the log files. This may take a few seconds.

* package:         yasm-1.3.0.p0
  last build time: Mar 13 21:06
  log file:        /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/logs/pkgs/yasm-1.3.0.p0.log
```



---

archive/issue_comments_566706.json:
```json
{
    "body": "<a id='comment:7'></a>\nAnd the refactoring of the script is also very nice. Thanks!",
    "created_at": "2020-03-27T13:43:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29402#issuecomment-566706",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
And the refactoring of the script is also very nice. Thanks!



---

archive/issue_comments_566707.json:
```json
{
    "body": "<a id='comment:8'></a>\nGreat, thanks!",
    "created_at": "2020-03-27T16:14:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29402#issuecomment-566707",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:8'></a>
Great, thanks!



---

archive/issue_events_092438.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-05T08:30:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29402",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29402#event-92438"
}
```



---

archive/issue_comments_566708.json:
```json
{
    "body": "Changing branch from \"u/jhpalmieri/print_warnings_after_building\" to \"e6e40ebec68fe3dd92966d740d0018c60f117c7a\"",
    "created_at": "2020-04-05T08:30:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29402#issuecomment-566708",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/jhpalmieri/print_warnings_after_building" to "e6e40ebec68fe3dd92966d740d0018c60f117c7a"



---

archive/issue_comments_566709.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-04-05T08:30:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29402#issuecomment-566709",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
