# Issue 29402: When SAGE_CHECK=warn, print warnings for failed test suites

archive/issues_029165.json:
```json
{
    "assignees": [],
    "body": "Followup to #29301: when running `make` with SAGE_CHECK=\"warn\", we should print out a message summarizing the failed test suites.\n\n\nCC:  @mkoeppe\n\nBranch/Commit: **[`e6e40eb`](https://github.com/sagemath/sagetrac-mirror/commit/e6e40ebec68fe3dd92966d740d0018c60f117c7a)**\n\nReviewer: **Matthias Koeppe**\n\nAuthor: **John Palmieri**\n\nComponent: **build**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29402_\n\n",
    "closed_at": "2020-04-05T08:30:19Z",
    "created_at": "2020-03-24T21:34:53Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build",
        "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "When SAGE_CHECK=warn, print warnings for failed test suites",
    "type": "issue",
    "updated_at": "2020-04-05T08:30:19Z",
    "url": "https://github.com/sagemath/sage/issues/29402",
    "user": "https://github.com/jhpalmieri"
}
```
Followup to #29301: when running `make` with SAGE_CHECK="warn", we should print out a message summarizing the failed test suites.


CC:  @mkoeppe

Branch/Commit: **[`e6e40eb`](https://github.com/sagemath/sagetrac-mirror/commit/e6e40ebec68fe3dd92966d740d0018c60f117c7a)**

Reviewer: **Matthias Koeppe**

Author: **John Palmieri**

Component: **build**

_Issue created by migration from https://trac.sagemath.org/ticket/29402_





---

archive/issue_events_404291.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2020-03-24T21:34:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29402",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29402#event-404291"
}
```



---

archive/issue_events_404292.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2020-03-24T21:34:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29402",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "000080",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29402#event-404292"
}
```



---

archive/issue_events_404293.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2020-03-24T21:34:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29402",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29402#event-404293"
}
```



---

archive/issue_events_404294.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2020-03-24T21:34:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29402",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29402#event-404294"
}
```



---

archive/issue_comments_461647.json:
```json
{
    "body": "Branch: **[u/jhpalmieri/print_warnings_after_building](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/print_warnings_after_building)**",
    "created_at": "2020-03-24T21:36:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29402#issuecomment-461647",
    "user": "https://github.com/jhpalmieri"
}
```

Branch: **[u/jhpalmieri/print_warnings_after_building](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/print_warnings_after_building)**



---

archive/issue_comments_461648.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nHere is an attempt. Also trying to remove some code duplication.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/781c27640ff7515478fc63743c8055d55f651c32\"><code>781c276</code></a></td><td><code>trac 29402: summarize test suite failures after \"make\" with SAGE_CHECK=warn</code></td></tr></table>\n",
    "created_at": "2020-03-24T21:36:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29402#issuecomment-461648",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:2" align="right">comment:2</div>

Here is an attempt. Also trying to remove some code duplication.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/781c27640ff7515478fc63743c8055d55f651c32"><code>781c276</code></a></td><td><code>trac 29402: summarize test suite failures after "make" with SAGE_CHECK=warn</code></td></tr></table>




---

archive/issue_events_404295.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2020-03-24T21:36:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29402",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29402#event-404295"
}
```



---

archive/issue_comments_461649.json:
```json
{
    "body": "Commit: **[`781c276`](https://github.com/sagemath/sagetrac-mirror/commit/781c27640ff7515478fc63743c8055d55f651c32)**",
    "created_at": "2020-03-24T21:36:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29402#issuecomment-461649",
    "user": "https://github.com/jhpalmieri"
}
```

Commit: **[`781c276`](https://github.com/sagemath/sagetrac-mirror/commit/781c27640ff7515478fc63743c8055d55f651c32)**



---

archive/issue_comments_461650.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nIt would be better if the message \"Warning: the following package(s) may have failed their test suites\" were only printed if look_for_errors finds a log file with a failing test suite",
    "created_at": "2020-03-26T14:55:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29402#issuecomment-461650",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3" align="right">comment:3</div>

It would be better if the message "Warning: the following package(s) may have failed their test suites" were only printed if look_for_errors finds a log file with a failing test suite



---

archive/issue_comments_461651.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e6e40ebec68fe3dd92966d740d0018c60f117c7a\"><code>e6e40eb</code></a></td><td><code>trac 29402: print warnings after building only if there are warnings.</code></td></tr></table>\n",
    "created_at": "2020-03-26T17:17:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29402#issuecomment-461651",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e6e40ebec68fe3dd92966d740d0018c60f117c7a"><code>e6e40eb</code></a></td><td><code>trac 29402: print warnings after building only if there are warnings.</code></td></tr></table>




---

archive/issue_comments_461652.json:
```json
{
    "body": "Changed commit from **[`781c276`](https://github.com/sagemath/sagetrac-mirror/commit/781c27640ff7515478fc63743c8055d55f651c32)** to **[`e6e40eb`](https://github.com/sagemath/sagetrac-mirror/commit/e6e40ebec68fe3dd92966d740d0018c60f117c7a)**",
    "created_at": "2020-03-26T17:17:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29402#issuecomment-461652",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`781c276`](https://github.com/sagemath/sagetrac-mirror/commit/781c27640ff7515478fc63743c8055d55f651c32)** to **[`e6e40eb`](https://github.com/sagemath/sagetrac-mirror/commit/e6e40ebec68fe3dd92966d740d0018c60f117c7a)**



---

archive/issue_comments_461653.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nOkay, how about this?",
    "created_at": "2020-03-26T17:17:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29402#issuecomment-461653",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:5" align="right">comment:5</div>

Okay, how about this?



---

archive/issue_comments_461654.json:
```json
{
    "body": "Reviewer: **Matthias Koeppe**",
    "created_at": "2020-03-27T13:42:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29402#issuecomment-461654",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Matthias Koeppe**



---

archive/issue_events_404296.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-27T13:42:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29402",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29402#event-404296"
}
```



---

archive/issue_events_404297.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-27T13:42:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29402",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29402#event-404297"
}
```



---

archive/issue_comments_461655.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThis seems to work well, thanks for working on it.\n\n```\n...\nSAGE_CHECK=warn, so scanning the log files. This may take a few seconds.\n\n* package:         yasm-1.3.0.p0\n  last build time: Mar 13 21:06\n  log file:        /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/logs/pkgs/yasm-1.3.0.p0.log\n```",
    "created_at": "2020-03-27T13:42:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29402#issuecomment-461655",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">comment:6</div>

This seems to work well, thanks for working on it.

```
...
SAGE_CHECK=warn, so scanning the log files. This may take a few seconds.

* package:         yasm-1.3.0.p0
  last build time: Mar 13 21:06
  log file:        /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/logs/pkgs/yasm-1.3.0.p0.log
```



---

archive/issue_comments_461656.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nAnd the refactoring of the script is also very nice. Thanks!",
    "created_at": "2020-03-27T13:43:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29402#issuecomment-461656",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

And the refactoring of the script is also very nice. Thanks!



---

archive/issue_comments_461657.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nGreat, thanks!",
    "created_at": "2020-03-27T16:14:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29402#issuecomment-461657",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:8" align="right">comment:8</div>

Great, thanks!



---

archive/issue_events_404298.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-05T08:30:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29402",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29402#event-404298"
}
```



---

archive/issue_events_404299.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "d35985fd5c67fb5e37104b038e6760ad215589c0",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-04-05T08:30:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29402",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29402#event-404299"
}
```



---

archive/issue_comments_461658.json:
```json
{
    "body": "Changed branch from **[u/jhpalmieri/print_warnings_after_building](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/print_warnings_after_building)** to **[`e6e40eb`](https://github.com/sagemath/sagetrac-mirror/commit/e6e40ebec68fe3dd92966d740d0018c60f117c7a)**",
    "created_at": "2020-04-05T08:30:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29402#issuecomment-461658",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jhpalmieri/print_warnings_after_building](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/print_warnings_after_building)** to **[`e6e40eb`](https://github.com/sagemath/sagetrac-mirror/commit/e6e40ebec68fe3dd92966d740d0018c60f117c7a)**
