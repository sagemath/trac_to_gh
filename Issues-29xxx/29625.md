# Issue 29625: support for weighted term orders in normal_basis

archive/issues_029388.json:
```json
{
    "body": "As a follow-up to #29543, this ticket changes the `normal_basis` method of ideals to handle the case of weighted term orders.\n\nWith this change, the degree of the monomials in the normal basis is taken with respect to the weighted degree (which agrees with Sage's notion of degree).\n\n```\nsage: R.<x,y,z> = PolynomialRing(QQ, order=TermOrder('wdegrevlex', (1, 2, 3)))\nsage: I = R.ideal(x*y^2 + x^5, z*y + x^3*y)\nsage: I.normal_basis(degree=9)\n[x^2*y^2*z, x^3*z^2, x*y*z^2, z^3]\nsage: all(f.degree() == 9 for f in _)\nTrue\n```\n\nThis also came up in an [Ask SageMath question](https://ask.sagemath.org/question/47623).\n\nThe implementation uses the Singular function [weightKB](https://www.singular.uni-kl.de/Manual/4-1-2/sing_377.htm#SEC417).\n\n\nCC:  @kwankyu @tscrim @heluani\n\nKeywords: singular\n\nBranch/Commit: f0604bdabdea49d78d8312615b3722f4566702b4\n\nReviewer: Travis Scrimshaw\n\nAuthor: Markus Wageringel\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29625\n\n",
    "closed_at": "2020-05-04T06:40:36Z",
    "created_at": "2020-04-30T19:39:24Z",
    "labels": [
        "component: commutative algebra",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "support for weighted term orders in normal_basis",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29625",
    "user": "https://github.com/mwageringel"
}
```
As a follow-up to #29543, this ticket changes the `normal_basis` method of ideals to handle the case of weighted term orders.

With this change, the degree of the monomials in the normal basis is taken with respect to the weighted degree (which agrees with Sage's notion of degree).

```
sage: R.<x,y,z> = PolynomialRing(QQ, order=TermOrder('wdegrevlex', (1, 2, 3)))
sage: I = R.ideal(x*y^2 + x^5, z*y + x^3*y)
sage: I.normal_basis(degree=9)
[x^2*y^2*z, x^3*z^2, x*y*z^2, z^3]
sage: all(f.degree() == 9 for f in _)
True
```

This also came up in an [Ask SageMath question](https://ask.sagemath.org/question/47623).

The implementation uses the Singular function [weightKB](https://www.singular.uni-kl.de/Manual/4-1-2/sing_377.htm#SEC417).


CC:  @kwankyu @tscrim @heluani

Keywords: singular

Branch/Commit: f0604bdabdea49d78d8312615b3722f4566702b4

Reviewer: Travis Scrimshaw

Author: Markus Wageringel

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29625





---

archive/issue_comments_580434.json:
```json
{
    "body": "Changing author from \"\" to \"Markus Wageringel\"",
    "created_at": "2020-04-30T19:45:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29625#issuecomment-580434",
    "user": "https://github.com/mwageringel"
}
```

Changing author from "" to "Markus Wageringel"



---

archive/issue_comments_580435.json:
```json
{
    "body": "Changing commit from \"\" to \"f0604bdabdea49d78d8312615b3722f4566702b4\"",
    "created_at": "2020-04-30T19:45:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29625#issuecomment-580435",
    "user": "https://github.com/mwageringel"
}
```

Changing commit from "" to "f0604bdabdea49d78d8312615b3722f4566702b4"



---

archive/issue_comments_580436.json:
```json
{
    "body": "Changing branch from \"\" to \"u/gh-mwageringel/29625\"",
    "created_at": "2020-04-30T19:45:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29625#issuecomment-580436",
    "user": "https://github.com/mwageringel"
}
```

Changing branch from "" to "u/gh-mwageringel/29625"



---

archive/issue_comments_580437.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                                                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------|\n|[f0604bd](https://github.com/sagemath/sagetrac-mirror/commit/f0604bdabdea49d78d8312615b3722f4566702b4)|`29625: support weighted term orders in normal_basis`|",
    "created_at": "2020-04-30T19:45:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29625#issuecomment-580437",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                                                     |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------|
|[f0604bd](https://github.com/sagemath/sagetrac-mirror/commit/f0604bdabdea49d78d8312615b3722f4566702b4)|`29625: support weighted term orders in normal_basis`|



---

archive/issue_comments_580438.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-04-30T19:45:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29625#issuecomment-580438",
    "user": "https://github.com/mwageringel"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_580439.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-05-01T02:47:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29625#issuecomment-580439",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_580440.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2020-05-01T02:47:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29625#issuecomment-580440",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_580441.json:
```json
{
    "body": "<a id='comment:2'></a>\nLGTM.",
    "created_at": "2020-05-01T02:47:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29625#issuecomment-580441",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:2'></a>
LGTM.



---

archive/issue_comments_580442.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-05-04T06:40:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29625#issuecomment-580442",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_580443.json:
```json
{
    "body": "Changing branch from \"u/gh-mwageringel/29625\" to \"f0604bdabdea49d78d8312615b3722f4566702b4\"",
    "created_at": "2020-05-04T06:40:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29625#issuecomment-580443",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/gh-mwageringel/29625" to "f0604bdabdea49d78d8312615b3722f4566702b4"



---

archive/issue_events_085439.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-05-04T06:40:36Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29625",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29625#event-85439"
}
```



---

archive/issue_events_085440.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-04T20:06:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29625",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29625#event-85440"
}
```
