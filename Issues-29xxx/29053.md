# Issue 29053: Add debian/fedora/arch/conda package information to build/pkgs, generate Dockerfiles and installation help; add tox.ini

archive/issues_028816.json:
```json
{
    "body": "https://doc.sagemath.org/html/en/installation/source.html#linux-recommended-installation\ngives `apt-get install` and `yum install` command lines to install system packages that will be recognized by `build/pkgs/SPKG/spkg-configure.m4`.\n\nSeveral packages are missing, see comments in\nhttps://trac.sagemath.org/attachment/ticket/27824/Dockerfile-ubuntu-minimal\n\nThis ticket puts this information on a per-package basis into `build/pkgs/SPKG/distros/debian.txt`, `.../fedora.txt`, `.../arch.txt` for the following purposes:\n- `sage -info SPKG` prints out this information.\n- Provide a `tox.ini` that generates and runs `Dockerfile`s that test the installation on various systems. Example (running 3 builds in parallel):\n   {{{\n   $ tox -p auto -e archlinux-latest,ubuntu-focal-minimal,debian-buster-maximal\n\u2838\n   }}}\n\nIncidental change on this ticket:\n- Mark `gfortran` as a `type=standard` package. It is a prereq of standard package `numpy`. Its status as a `type=optional` package predates the clarifications brought by the development of the `spkg-configure.m4` mechanism (#27330).\n\n---\n\nPossible follow-up and related tickets:\n- #29087 - Add a [GitHub](GitHub) workflow that runs this automatically, with many parallel jobs.\n- Also the `apt-cyg` command lines at https://trac.sagemath.org/wiki/Cygwin64Port could be generated in the same way.\n- #26964: Aggregate and format it (during `./bootstrap`) to produce the command lines shown in the manual. This ticket already prepares it by moving these command lines into separate `.txt` files.\n- #29041: at `./bootstrap` time, generate `src/requirements.txt`, `src/constraints.txt`, `src/setup.cfg` `[install_requires]` from `build/pkgs`\n- #28745: Add `SAGE_ROOT/environment.yml` for `conda env create -f`.\n- Add to tox.ini a conda run (either with a fresh environment or fresh conda install) without docker - to test with macOS conda\n- Add to tox.ini a homebrew run (with a fresh install not in /usr/local)\n\nResources:\n- https://repology.org/\n\n\nCC:  @dimpase @embray @antonio-rojas @isuruf @timokau\n\nReviewer: Dima Pasechnik\n\nAuthor: Matthias Koeppe\n\nBranch: 23c6334cf2927a4d917a27b3963471e8242d86a3\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29053\n\n",
    "closed_at": "2020-01-31T23:49:34Z",
    "created_at": "2020-01-20T15:02:23Z",
    "labels": [
        "component: build"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "Add debian/fedora/arch/conda package information to build/pkgs, generate Dockerfiles and installation help; add tox.ini",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29053",
    "user": "https://github.com/mkoeppe"
}
```
https://doc.sagemath.org/html/en/installation/source.html#linux-recommended-installation
gives `apt-get install` and `yum install` command lines to install system packages that will be recognized by `build/pkgs/SPKG/spkg-configure.m4`.

Several packages are missing, see comments in
https://trac.sagemath.org/attachment/ticket/27824/Dockerfile-ubuntu-minimal

This ticket puts this information on a per-package basis into `build/pkgs/SPKG/distros/debian.txt`, `.../fedora.txt`, `.../arch.txt` for the following purposes:
- `sage -info SPKG` prints out this information.
- Provide a `tox.ini` that generates and runs `Dockerfile`s that test the installation on various systems. Example (running 3 builds in parallel):
   {{{
   $ tox -p auto -e archlinux-latest,ubuntu-focal-minimal,debian-buster-maximal
⠸
   }}}

Incidental change on this ticket:
- Mark `gfortran` as a `type=standard` package. It is a prereq of standard package `numpy`. Its status as a `type=optional` package predates the clarifications brought by the development of the `spkg-configure.m4` mechanism (#27330).

---

Possible follow-up and related tickets:
- #29087 - Add a [GitHub](GitHub) workflow that runs this automatically, with many parallel jobs.
- Also the `apt-cyg` command lines at https://trac.sagemath.org/wiki/Cygwin64Port could be generated in the same way.
- #26964: Aggregate and format it (during `./bootstrap`) to produce the command lines shown in the manual. This ticket already prepares it by moving these command lines into separate `.txt` files.
- #29041: at `./bootstrap` time, generate `src/requirements.txt`, `src/constraints.txt`, `src/setup.cfg` `[install_requires]` from `build/pkgs`
- #28745: Add `SAGE_ROOT/environment.yml` for `conda env create -f`.
- Add to tox.ini a conda run (either with a fresh environment or fresh conda install) without docker - to test with macOS conda
- Add to tox.ini a homebrew run (with a fresh install not in /usr/local)

Resources:
- https://repology.org/


CC:  @dimpase @embray @antonio-rojas @isuruf @timokau

Reviewer: Dima Pasechnik

Author: Matthias Koeppe

Branch: 23c6334cf2927a4d917a27b3963471e8242d86a3

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29053





---

archive/issue_comments_433741.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-21T03:53:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433741",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433742.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-25T03:27:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433742",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433743.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-25T04:10:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433743",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433744.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-25T04:31:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433744",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433745.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -6,7 +6,14 @@\n \n We propose to put this information on a per-package basis into \\`build/pkgs/SPKG/apt\\`, \\`.../yum\\` or similarly named files and to aggregate it during \\`./bootstrap\\` to produce the command lines shown in the manual.\n \n+In addition, \\`sage -info SPKG\\` prints out this information.\n+\n (Similar to #29041.)\n+\n+\n+\n+\n+\n \n Comment: 1\n \n```\n",
    "created_at": "2020-01-25T04:32:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433745",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -6,7 +6,14 @@
 
 We propose to put this information on a per-package basis into \`build/pkgs/SPKG/apt\`, \`.../yum\` or similarly named files and to aggregate it during \`./bootstrap\` to produce the command lines shown in the manual.
 
+In addition, \`sage -info SPKG\` prints out this information.
+
 (Similar to #29041.)
+
+
+
+
+
 
 Comment: 1
 
```




---

archive/issue_comments_433746.json:
```json
{
    "body": "<a id='comment:7'></a>how do you generate these per package?\n\nby the way, Arch has namewise\na naming scheme close to Gentoo and Homebrew.",
    "created_at": "2020-01-25T07:41:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433746",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:7'></a>how do you generate these per package?

by the way, Arch has namewise
a naming scheme close to Gentoo and Homebrew.



---

archive/issue_comments_433747.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:7 dimpase]:\n> how do you generate these per package?\n\n\nI created these files by manual copy-paste from the installation manual.",
    "created_at": "2020-01-25T13:53:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433747",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>Replying to [comment:7 dimpase]:
> how do you generate these per package?


I created these files by manual copy-paste from the installation manual.



---

archive/issue_comments_433748.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-25T18:03:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433748",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433749.json:
```json
{
    "body": "Changing component from documentation to build.",
    "created_at": "2020-01-25T18:07:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433749",
    "user": "https://github.com/mkoeppe"
}
```

Changing component from documentation to build.



---

archive/issue_comments_433750.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,20 @@\n+https://doc.sagemath.org/html/en/installation/source.html#linux-recommended-installation\n+gives \\`apt-get install\\` and \\`yum install\\` command lines to install system packages that will be recognized by \\`build/pkgs/SPKG/spkg-configure.m4\\`.\n+\n+Several packages are missing, see comments in\n+https://trac.sagemath.org/attachment/ticket/27824/Dockerfile-ubuntu-minimal\n+\n+We propose to put this information on a per-package basis into \\`build/pkgs/SPKG/apt\\`, \\`.../yum\\` or similarly named files for the following purposes:\n+- Provide a \\`tox.ini\\` that generates and runs \\`Dockerfile\\`s that test the installation on various systems\n+- Aggregate and format it (during \\`./bootstrap\\`) to produce the command lines shown in the manual.\n+\n+In addition, \\`sage -info SPKG\\` prints out this information.\n+\n+(Similar to #29041.)\n+\n+\n+\n+\n \n \n Comment: 1\n```\n",
    "created_at": "2020-01-25T18:07:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433750",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,20 @@
+https://doc.sagemath.org/html/en/installation/source.html#linux-recommended-installation
+gives \`apt-get install\` and \`yum install\` command lines to install system packages that will be recognized by \`build/pkgs/SPKG/spkg-configure.m4\`.
+
+Several packages are missing, see comments in
+https://trac.sagemath.org/attachment/ticket/27824/Dockerfile-ubuntu-minimal
+
+We propose to put this information on a per-package basis into \`build/pkgs/SPKG/apt\`, \`.../yum\` or similarly named files for the following purposes:
+- Provide a \`tox.ini\` that generates and runs \`Dockerfile\`s that test the installation on various systems
+- Aggregate and format it (during \`./bootstrap\`) to produce the command lines shown in the manual.
+
+In addition, \`sage -info SPKG\` prints out this information.
+
+(Similar to #29041.)
+
+
+
+
 
 
 Comment: 1
```




---

archive/issue_comments_433751.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,20 @@\n+https://doc.sagemath.org/html/en/installation/source.html#linux-recommended-installation\n+gives \\`apt-get install\\` and \\`yum install\\` command lines to install system packages that will be recognized by \\`build/pkgs/SPKG/spkg-configure.m4\\`.\n+\n+Several packages are missing, see comments in\n+https://trac.sagemath.org/attachment/ticket/27824/Dockerfile-ubuntu-minimal\n+\n+This ticket puts this information on a per-package basis into \\`build/pkgs/SPKG/debian.txt\\`, \\`.../fedora.txt\\` for the following purposes:\n+- Provide a \\`tox.ini\\` that generates and runs \\`Dockerfile\\`s that test the installation on various systems\n+- Aggregate and format it (during \\`./bootstrap\\`) to produce the command lines shown in the manual.\n+\n+In addition, \\`sage -info SPKG\\` prints out this information.\n+\n+(Similar to #29041.)\n+\n+\n+\n+\n \n \n Comment: 1\n```\n",
    "created_at": "2020-01-25T18:08:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433751",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,20 @@
+https://doc.sagemath.org/html/en/installation/source.html#linux-recommended-installation
+gives \`apt-get install\` and \`yum install\` command lines to install system packages that will be recognized by \`build/pkgs/SPKG/spkg-configure.m4\`.
+
+Several packages are missing, see comments in
+https://trac.sagemath.org/attachment/ticket/27824/Dockerfile-ubuntu-minimal
+
+This ticket puts this information on a per-package basis into \`build/pkgs/SPKG/debian.txt\`, \`.../fedora.txt\` for the following purposes:
+- Provide a \`tox.ini\` that generates and runs \`Dockerfile\`s that test the installation on various systems
+- Aggregate and format it (during \`./bootstrap\`) to produce the command lines shown in the manual.
+
+In addition, \`sage -info SPKG\` prints out this information.
+
+(Similar to #29041.)
+
+
+
+
 
 
 Comment: 1
```




---

archive/issue_comments_433752.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,21 @@\n+https://doc.sagemath.org/html/en/installation/source.html#linux-recommended-installation\n+gives \\`apt-get install\\` and \\`yum install\\` command lines to install system packages that will be recognized by \\`build/pkgs/SPKG/spkg-configure.m4\\`.\n+\n+Several packages are missing, see comments in\n+https://trac.sagemath.org/attachment/ticket/27824/Dockerfile-ubuntu-minimal\n+\n+This ticket puts this information on a per-package basis into \\`build/pkgs/SPKG/debian.txt\\`, \\`.../fedora.txt\\` for the following purposes:\n+- Provide a \\`tox.ini\\` that generates and runs \\`Dockerfile\\`s that test the installation on various systems\n+- Aggregate and format it (during \\`./bootstrap\\`) to produce the command lines shown in the manual.\n+\n+In addition, \\`sage -info SPKG\\` prints out this information.\n+\n+(Similar to #29041.)\n+\n+Also the apt-cyg command lines at https://trac.sagemath.org/wiki/Cygwin64Port could be generated in the same way.\n+\n+\n+\n \n \n Comment: 1\n```\n",
    "created_at": "2020-01-25T19:18:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433752",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,21 @@
+https://doc.sagemath.org/html/en/installation/source.html#linux-recommended-installation
+gives \`apt-get install\` and \`yum install\` command lines to install system packages that will be recognized by \`build/pkgs/SPKG/spkg-configure.m4\`.
+
+Several packages are missing, see comments in
+https://trac.sagemath.org/attachment/ticket/27824/Dockerfile-ubuntu-minimal
+
+This ticket puts this information on a per-package basis into \`build/pkgs/SPKG/debian.txt\`, \`.../fedora.txt\` for the following purposes:
+- Provide a \`tox.ini\` that generates and runs \`Dockerfile\`s that test the installation on various systems
+- Aggregate and format it (during \`./bootstrap\`) to produce the command lines shown in the manual.
+
+In addition, \`sage -info SPKG\` prints out this information.
+
+(Similar to #29041.)
+
+Also the apt-cyg command lines at https://trac.sagemath.org/wiki/Cygwin64Port could be generated in the same way.
+
+
+
 
 
 Comment: 1
```




---

archive/issue_comments_433753.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-26T00:01:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433753",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433754.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-26T00:19:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433754",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433755.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-01-26T00:35:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433755",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_433756.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,26 @@\n+https://doc.sagemath.org/html/en/installation/source.html#linux-recommended-installation\n+gives \\`apt-get install\\` and \\`yum install\\` command lines to install system packages that will be recognized by \\`build/pkgs/SPKG/spkg-configure.m4\\`.\n+\n+Several packages are missing, see comments in\n+https://trac.sagemath.org/attachment/ticket/27824/Dockerfile-ubuntu-minimal\n+\n+This ticket puts this information on a per-package basis into \\`build/pkgs/SPKG/debian.txt\\`, \\`.../fedora.txt\\` for the following purposes:\n+- \\`sage -info SPKG\\` prints out this information.\n+- Provide a \\`tox.ini\\` that generates and runs \\`Dockerfile\\`s that test the installation on various systems. Example (running 3 builds in parallel):\n+   {{{\n+   $ tox -p auto -e archlinux-latest,ubuntu-focal-minimal,debian-buster-maximal\n+\u2838\n+   }}}\n+- TBD: Aggregate and format it (during \\`./bootstrap\\`) to produce the command lines shown in the manual.\n+\n+\n+\n+(Similar to #29041.)\n+\n+Also the apt-cyg command lines at https://trac.sagemath.org/wiki/Cygwin64Port could be generated in the same way.\n+\n+\n+\n \n \n Comment: 1\n```\n",
    "created_at": "2020-01-26T01:14:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433756",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,26 @@
+https://doc.sagemath.org/html/en/installation/source.html#linux-recommended-installation
+gives \`apt-get install\` and \`yum install\` command lines to install system packages that will be recognized by \`build/pkgs/SPKG/spkg-configure.m4\`.
+
+Several packages are missing, see comments in
+https://trac.sagemath.org/attachment/ticket/27824/Dockerfile-ubuntu-minimal
+
+This ticket puts this information on a per-package basis into \`build/pkgs/SPKG/debian.txt\`, \`.../fedora.txt\` for the following purposes:
+- \`sage -info SPKG\` prints out this information.
+- Provide a \`tox.ini\` that generates and runs \`Dockerfile\`s that test the installation on various systems. Example (running 3 builds in parallel):
+   {{{
+   $ tox -p auto -e archlinux-latest,ubuntu-focal-minimal,debian-buster-maximal
+⠸
+   }}}
+- TBD: Aggregate and format it (during \`./bootstrap\`) to produce the command lines shown in the manual.
+
+
+
+(Similar to #29041.)
+
+Also the apt-cyg command lines at https://trac.sagemath.org/wiki/Cygwin64Port could be generated in the same way.
+
+
+
 
 
 Comment: 1
```




---

archive/issue_comments_433757.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-26T02:10:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433757",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433758.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-26T02:20:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433758",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433759.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-26T04:08:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433759",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433760.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-26T04:33:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433760",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433761.json:
```json
{
    "body": "<a id='comment:22'></a>gf2x 1.3.0 is also on Arch, so you can add it (package name `gf2x`). It'll work after #29081 is merged.",
    "created_at": "2020-01-26T12:01:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433761",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:22'></a>gf2x 1.3.0 is also on Arch, so you can add it (package name `gf2x`). It'll work after #29081 is merged.



---

archive/issue_comments_433762.json:
```json
{
    "body": "<a id='comment:23'></a>You've changed `build/pkgs/gfortran/type` to `standard` - is this intentional?",
    "created_at": "2020-01-26T12:09:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433762",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:23'></a>You've changed `build/pkgs/gfortran/type` to `standard` - is this intentional?



---

archive/issue_comments_433763.json:
```json
{
    "body": "<a id='comment:24'></a>Replying to [comment:23 dimpase]:\n> You've changed `build/pkgs/gfortran/type` to `standard` - is this intentional?\n\nYes - it's an intended correction.",
    "created_at": "2020-01-26T14:55:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433763",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'></a>Replying to [comment:23 dimpase]:
> You've changed `build/pkgs/gfortran/type` to `standard` - is this intentional?

Yes - it's an intended correction.



---

archive/issue_comments_433764.json:
```json
{
    "body": "<a id='comment:25'></a>Replying to [comment:24 mkoeppe]:\n> Replying to [comment:23 dimpase]:\n> > You've changed `build/pkgs/gfortran/type` to `standard` - is this intentional?\n\n> Yes - it's an intended correction.\n\ncan this be documented - ideally both here and in the commit message?\n\nI guess it was `optional` just as it predated the `spkg-configure.m4` machinery, and it was not fixed then, right?",
    "created_at": "2020-01-26T15:36:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433764",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:25'></a>Replying to [comment:24 mkoeppe]:
> Replying to [comment:23 dimpase]:
> > You've changed `build/pkgs/gfortran/type` to `standard` - is this intentional?

> Yes - it's an intended correction.

can this be documented - ideally both here and in the commit message?

I guess it was `optional` just as it predated the `spkg-configure.m4` machinery, and it was not fixed then, right?



---

archive/issue_comments_433765.json:
```json
{
    "body": "<a id='comment:26'></a>Replying to [comment:25 dimpase]:\n> Replying to [comment:24 mkoeppe]:\n> > Replying to [comment:23 dimpase]:\n> > > You've changed `build/pkgs/gfortran/type` to `standard` - is this intentional?\n\n> > Yes - it's an intended correction.\n> \n> can this be documented - ideally both here and in the commit message?\n\n\nThe commit message already says:\n\n```\n\u200b97b09de\tMake gfortran a standard package - it is a prereq of standard package numpy\n```\n> I guess it was `optional` just as it predated the `spkg-configure.m4` machinery, and it was not fixed then, right?\n\n\nYes, I agree with this theory.",
    "created_at": "2020-01-26T15:39:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433765",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>Replying to [comment:25 dimpase]:
> Replying to [comment:24 mkoeppe]:
> > Replying to [comment:23 dimpase]:
> > > You've changed `build/pkgs/gfortran/type` to `standard` - is this intentional?

> > Yes - it's an intended correction.
> 
> can this be documented - ideally both here and in the commit message?


The commit message already says:

```
​97b09de	Make gfortran a standard package - it is a prereq of standard package numpy
```
> I guess it was `optional` just as it predated the `spkg-configure.m4` machinery, and it was not fixed then, right?


Yes, I agree with this theory.



---

archive/issue_comments_433766.json:
```json
{
    "body": "<a id='comment:27'></a>I've added a comment on the ticket summary.",
    "created_at": "2020-01-26T15:45:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433766",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>I've added a comment on the ticket summary.



---

archive/issue_comments_433767.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,29 @@\n+https://doc.sagemath.org/html/en/installation/source.html#linux-recommended-installation\n+gives \\`apt-get install\\` and \\`yum install\\` command lines to install system packages that will be recognized by \\`build/pkgs/SPKG/spkg-configure.m4\\`.\n+\n+Several packages are missing, see comments in\n+https://trac.sagemath.org/attachment/ticket/27824/Dockerfile-ubuntu-minimal\n+\n+This ticket puts this information on a per-package basis into \\`build/pkgs/SPKG/debian.txt\\`, \\`.../fedora.txt\\`, \\`.../arch.txt\\` for the following purposes:\n+- \\`sage -info SPKG\\` prints out this information.\n+- Provide a \\`tox.ini\\` that generates and runs \\`Dockerfile\\`s that test the installation on various systems. Example (running 3 builds in parallel):\n+   {{{\n+   $ tox -p auto -e archlinux-latest,ubuntu-focal-minimal,debian-buster-maximal\n+\u2838\n+   }}}\n+\n+Incidental change on this ticket:\n+- Mark \\`gfortran\\` as a \\`type=standard\\` package. It is a prereq of standard package numpy. Its status as a \\`type=optional\\` package predates the clarifications brought by the development of the \\`spkg-configure.m4\\` mechanism (#27330).\n+\n+---\n+\n+Possible follow-up and related tickets:\n+- Also the apt-cyg command lines at https://trac.sagemath.org/wiki/Cygwin64Port could be generated in the same way.\n+- Aggregate and format it (during \\`./bootstrap\\`) to produce the command lines shown in the manual. This ticket already prepares it by moving these command lines into separate .txt files.\n+- #29041: at \\`./bootstrap\\` time, generate \\`src/requirements.txt\\`, \\`src/constraints.txt\\`, \\`src/setup.cfg\\` \\`[install_requires]\\` from \\`build/pkgs\\`\n+\n+Resources:\n+- https://repology.org/\n \n \n Comment: 1\n```\n",
    "created_at": "2020-01-26T15:45:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433767",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,29 @@
+https://doc.sagemath.org/html/en/installation/source.html#linux-recommended-installation
+gives \`apt-get install\` and \`yum install\` command lines to install system packages that will be recognized by \`build/pkgs/SPKG/spkg-configure.m4\`.
+
+Several packages are missing, see comments in
+https://trac.sagemath.org/attachment/ticket/27824/Dockerfile-ubuntu-minimal
+
+This ticket puts this information on a per-package basis into \`build/pkgs/SPKG/debian.txt\`, \`.../fedora.txt\`, \`.../arch.txt\` for the following purposes:
+- \`sage -info SPKG\` prints out this information.
+- Provide a \`tox.ini\` that generates and runs \`Dockerfile\`s that test the installation on various systems. Example (running 3 builds in parallel):
+   {{{
+   $ tox -p auto -e archlinux-latest,ubuntu-focal-minimal,debian-buster-maximal
+⠸
+   }}}
+
+Incidental change on this ticket:
+- Mark \`gfortran\` as a \`type=standard\` package. It is a prereq of standard package numpy. Its status as a \`type=optional\` package predates the clarifications brought by the development of the \`spkg-configure.m4\` mechanism (#27330).
+
+---
+
+Possible follow-up and related tickets:
+- Also the apt-cyg command lines at https://trac.sagemath.org/wiki/Cygwin64Port could be generated in the same way.
+- Aggregate and format it (during \`./bootstrap\`) to produce the command lines shown in the manual. This ticket already prepares it by moving these command lines into separate .txt files.
+- #29041: at \`./bootstrap\` time, generate \`src/requirements.txt\`, \`src/constraints.txt\`, \`src/setup.cfg\` \`[install_requires]\` from \`build/pkgs\`
+
+Resources:
+- https://repology.org/
 
 
 Comment: 1
```




---

archive/issue_comments_433768.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,30 @@\n+https://doc.sagemath.org/html/en/installation/source.html#linux-recommended-installation\n+gives \\`apt-get install\\` and \\`yum install\\` command lines to install system packages that will be recognized by \\`build/pkgs/SPKG/spkg-configure.m4\\`.\n+\n+Several packages are missing, see comments in\n+https://trac.sagemath.org/attachment/ticket/27824/Dockerfile-ubuntu-minimal\n+\n+This ticket puts this information on a per-package basis into \\`build/pkgs/SPKG/debian.txt\\`, \\`.../fedora.txt\\`, \\`.../arch.txt\\` for the following purposes:\n+- \\`sage -info SPKG\\` prints out this information.\n+- Provide a \\`tox.ini\\` that generates and runs \\`Dockerfile\\`s that test the installation on various systems. Example (running 3 builds in parallel):\n+   {{{\n+   $ tox -p auto -e archlinux-latest,ubuntu-focal-minimal,debian-buster-maximal\n+\u2838\n+   }}}\n+\n+Incidental change on this ticket:\n+- Mark \\`gfortran\\` as a \\`type=standard\\` package. It is a prereq of standard package \\`numpy\\`. Its status as a \\`type=optional\\` package predates the clarifications brought by the development of the \\`spkg-configure.m4\\` mechanism (#27330).\n+\n+---\n+\n+Possible follow-up and related tickets:\n+- Also the \\`apt-cyg\\` command lines at https://trac.sagemath.org/wiki/Cygwin64Port could be generated in the same way.\n+- Aggregate and format it (during \\`./bootstrap\\`) to produce the command lines shown in the manual. This ticket already prepares it by moving these command lines into separate \\`.txt\\` files.\n+- #29041: at \\`./bootstrap\\` time, generate \\`src/requirements.txt\\`, \\`src/constraints.txt\\`, \\`src/setup.cfg\\` \\`[install_requires]\\` from \\`build/pkgs\\`\n+- #28745: Add \\`SAGE_ROOT/environment.yml\\` for \\`conda env create -f\\`.\n+\n+Resources:\n+- https://repology.org/\n \n \n Comment: 1\n```\n",
    "created_at": "2020-01-26T15:47:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433768",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,30 @@
+https://doc.sagemath.org/html/en/installation/source.html#linux-recommended-installation
+gives \`apt-get install\` and \`yum install\` command lines to install system packages that will be recognized by \`build/pkgs/SPKG/spkg-configure.m4\`.
+
+Several packages are missing, see comments in
+https://trac.sagemath.org/attachment/ticket/27824/Dockerfile-ubuntu-minimal
+
+This ticket puts this information on a per-package basis into \`build/pkgs/SPKG/debian.txt\`, \`.../fedora.txt\`, \`.../arch.txt\` for the following purposes:
+- \`sage -info SPKG\` prints out this information.
+- Provide a \`tox.ini\` that generates and runs \`Dockerfile\`s that test the installation on various systems. Example (running 3 builds in parallel):
+   {{{
+   $ tox -p auto -e archlinux-latest,ubuntu-focal-minimal,debian-buster-maximal
+⠸
+   }}}
+
+Incidental change on this ticket:
+- Mark \`gfortran\` as a \`type=standard\` package. It is a prereq of standard package \`numpy\`. Its status as a \`type=optional\` package predates the clarifications brought by the development of the \`spkg-configure.m4\` mechanism (#27330).
+
+---
+
+Possible follow-up and related tickets:
+- Also the \`apt-cyg\` command lines at https://trac.sagemath.org/wiki/Cygwin64Port could be generated in the same way.
+- Aggregate and format it (during \`./bootstrap\`) to produce the command lines shown in the manual. This ticket already prepares it by moving these command lines into separate \`.txt\` files.
+- #29041: at \`./bootstrap\` time, generate \`src/requirements.txt\`, \`src/constraints.txt\`, \`src/setup.cfg\` \`[install_requires]\` from \`build/pkgs\`
+- #28745: Add \`SAGE_ROOT/environment.yml\` for \`conda env create -f\`.
+
+Resources:
+- https://repology.org/
 
 
 Comment: 1
```




---

archive/issue_comments_433769.json:
```json
{
    "body": "<a id='comment:29'></a>Can you use just one file? Or put them into a new folder inside?",
    "created_at": "2020-01-26T15:51:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433769",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:29'></a>Can you use just one file? Or put them into a new folder inside?



---

archive/issue_comments_433770.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-26T16:00:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433770",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433771.json:
```json
{
    "body": "<a id='comment:31'></a>Replying to [comment:29 isuruf]:\n> Can you use just one file? Or put them into a new folder inside?\n\n\nGood suggestion, I'll put them into a new subfolder. \n\nI'm also looking for a good solution for distro versioning. For example, ubuntu before bionic is missing many packages",
    "created_at": "2020-01-26T16:01:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433771",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:31'></a>Replying to [comment:29 isuruf]:
> Can you use just one file? Or put them into a new folder inside?


Good suggestion, I'll put them into a new subfolder. 

I'm also looking for a good solution for distro versioning. For example, ubuntu before bionic is missing many packages



---

archive/issue_comments_433772.json:
```json
{
    "body": "<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-26T16:13:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433772",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433773.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,30 @@\n+https://doc.sagemath.org/html/en/installation/source.html#linux-recommended-installation\n+gives \\`apt-get install\\` and \\`yum install\\` command lines to install system packages that will be recognized by \\`build/pkgs/SPKG/spkg-configure.m4\\`.\n+\n+Several packages are missing, see comments in\n+https://trac.sagemath.org/attachment/ticket/27824/Dockerfile-ubuntu-minimal\n+\n+This ticket puts this information on a per-package basis into \\`build/pkgs/SPKG/distros/debian.txt\\`, \\`.../fedora.txt\\`, \\`.../arch.txt\\` for the following purposes:\n+- \\`sage -info SPKG\\` prints out this information.\n+- Provide a \\`tox.ini\\` that generates and runs \\`Dockerfile\\`s that test the installation on various systems. Example (running 3 builds in parallel):\n+   {{{\n+   $ tox -p auto -e archlinux-latest,ubuntu-focal-minimal,debian-buster-maximal\n+\u2838\n+   }}}\n+\n+Incidental change on this ticket:\n+- Mark \\`gfortran\\` as a \\`type=standard\\` package. It is a prereq of standard package \\`numpy\\`. Its status as a \\`type=optional\\` package predates the clarifications brought by the development of the \\`spkg-configure.m4\\` mechanism (#27330).\n+\n+---\n+\n+Possible follow-up and related tickets:\n+- Also the \\`apt-cyg\\` command lines at https://trac.sagemath.org/wiki/Cygwin64Port could be generated in the same way.\n+- Aggregate and format it (during \\`./bootstrap\\`) to produce the command lines shown in the manual. This ticket already prepares it by moving these command lines into separate \\`.txt\\` files.\n+- #29041: at \\`./bootstrap\\` time, generate \\`src/requirements.txt\\`, \\`src/constraints.txt\\`, \\`src/setup.cfg\\` \\`[install_requires]\\` from \\`build/pkgs\\`\n+- #28745: Add \\`SAGE_ROOT/environment.yml\\` for \\`conda env create -f\\`.\n+\n+Resources:\n+- https://repology.org/\n \n \n Comment: 1\n```\n",
    "created_at": "2020-01-26T16:14:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433773",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,30 @@
+https://doc.sagemath.org/html/en/installation/source.html#linux-recommended-installation
+gives \`apt-get install\` and \`yum install\` command lines to install system packages that will be recognized by \`build/pkgs/SPKG/spkg-configure.m4\`.
+
+Several packages are missing, see comments in
+https://trac.sagemath.org/attachment/ticket/27824/Dockerfile-ubuntu-minimal
+
+This ticket puts this information on a per-package basis into \`build/pkgs/SPKG/distros/debian.txt\`, \`.../fedora.txt\`, \`.../arch.txt\` for the following purposes:
+- \`sage -info SPKG\` prints out this information.
+- Provide a \`tox.ini\` that generates and runs \`Dockerfile\`s that test the installation on various systems. Example (running 3 builds in parallel):
+   {{{
+   $ tox -p auto -e archlinux-latest,ubuntu-focal-minimal,debian-buster-maximal
+⠸
+   }}}
+
+Incidental change on this ticket:
+- Mark \`gfortran\` as a \`type=standard\` package. It is a prereq of standard package \`numpy\`. Its status as a \`type=optional\` package predates the clarifications brought by the development of the \`spkg-configure.m4\` mechanism (#27330).
+
+---
+
+Possible follow-up and related tickets:
+- Also the \`apt-cyg\` command lines at https://trac.sagemath.org/wiki/Cygwin64Port could be generated in the same way.
+- Aggregate and format it (during \`./bootstrap\`) to produce the command lines shown in the manual. This ticket already prepares it by moving these command lines into separate \`.txt\` files.
+- #29041: at \`./bootstrap\` time, generate \`src/requirements.txt\`, \`src/constraints.txt\`, \`src/setup.cfg\` \`[install_requires]\` from \`build/pkgs\`
+- #28745: Add \`SAGE_ROOT/environment.yml\` for \`conda env create -f\`.
+
+Resources:
+- https://repology.org/
 
 
 Comment: 1
```




---

archive/issue_comments_433774.json:
```json
{
    "body": "<a id='comment:34'></a>Added conda as well. We can generate the environment.yml from this.\n\n---\nNew commits:",
    "created_at": "2020-01-26T17:08:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433774",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:34'></a>Added conda as well. We can generate the environment.yml from this.

---
New commits:



---

archive/issue_comments_433775.json:
```json
{
    "body": "<a id='comment:35'></a>There are some packages here that don't have `spkg-configure.m4`. Should those be removed?",
    "created_at": "2020-01-26T17:10:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433775",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:35'></a>There are some packages here that don't have `spkg-configure.m4`. Should those be removed?



---

archive/issue_comments_433776.json:
```json
{
    "body": "<a id='comment:36'></a>Did you use a script to generate `src/doc/en/installation/fedora.txt`?",
    "created_at": "2020-01-26T17:16:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433776",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:36'></a>Did you use a script to generate `src/doc/en/installation/fedora.txt`?



---

archive/issue_comments_433777.json:
```json
{
    "body": "<a id='comment:37'></a>Replying to [comment:35 isuruf]:\n> There are some packages here that don't have `spkg-configure.m4`. Should those be removed?\n\nNo, that's OK and good preparation for when that is added. \nI'll update the scripts to only use packages that do have spkg-configure.m4`.",
    "created_at": "2020-01-26T17:20:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433777",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:37'></a>Replying to [comment:35 isuruf]:
> There are some packages here that don't have `spkg-configure.m4`. Should those be removed?

No, that's OK and good preparation for when that is added. 
I'll update the scripts to only use packages that do have spkg-configure.m4`.



---

archive/issue_comments_433778.json:
```json
{
    "body": "<a id='comment:38'></a>Replying to [comment:34 isuruf]:\n> Added conda as well. We can generate the environment.yml from this.\n> \n> ---\n> New commits:\n> |                                                                                                                                          |               |\n> |------------------------------------------------------------------------------------------------------------------------------------------|---------------|\n> |[1cfa89b](https://git.sagemath.org/sage.git/commit?id=1cfa89b91b766030c361ef0e04474b7a4a639258)|`Add conda.txt`|\n\n\nGreat! Thanks very much",
    "created_at": "2020-01-26T17:21:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433778",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:38'></a>Replying to [comment:34 isuruf]:
> Added conda as well. We can generate the environment.yml from this.
> 
> ---
> New commits:
> |                                                                                                                                          |               |
> |------------------------------------------------------------------------------------------------------------------------------------------|---------------|
> |[1cfa89b](https://git.sagemath.org/sage.git/commit?id=1cfa89b91b766030c361ef0e04474b7a4a639258)|`Add conda.txt`|


Great! Thanks very much



---

archive/issue_comments_433779.json:
```json
{
    "body": "<a id='comment:39'></a>Replying to [comment:36 isuruf]:\n> Did you use a script to generate `src/doc/en/installation/fedora.txt`?\n\nNo, not yet. This is only taken out from the manual. I haven't written the formatting script yet.",
    "created_at": "2020-01-26T17:22:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433779",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:39'></a>Replying to [comment:36 isuruf]:
> Did you use a script to generate `src/doc/en/installation/fedora.txt`?

No, not yet. This is only taken out from the manual. I haven't written the formatting script yet.



---

archive/issue_comments_433780.json:
```json
{
    "body": "<a id='comment:41'></a>More changes at https://github.com/mkoeppe/sage/commits/test-29053-on-29051\n\n---\nNew commits:",
    "created_at": "2020-01-27T05:15:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433780",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:41'></a>More changes at https://github.com/mkoeppe/sage/commits/test-29053-on-29051

---
New commits:



---

archive/issue_comments_433781.json:
```json
{
    "body": "<a id='comment:42'></a>`@`isuruf: Compiling python3 on conda-forge gives me an error that looks like it's related to ffi - https://github.com/mkoeppe/sage/runs/410329852",
    "created_at": "2020-01-27T15:27:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433781",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:42'></a>`@`isuruf: Compiling python3 on conda-forge gives me an error that looks like it's related to ffi - https://github.com/mkoeppe/sage/runs/410329852



---

archive/issue_comments_433782.json:
```json
{
    "body": "<a id='comment:43'></a>Arch package sage-data-elliptic_curves corresponds to Sage's elliptic_curves, not to the optional database_cremona_ellcurve",
    "created_at": "2020-01-27T15:32:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433782",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:43'></a>Arch package sage-data-elliptic_curves corresponds to Sage's elliptic_curves, not to the optional database_cremona_ellcurve



---

archive/issue_comments_433783.json:
```json
{
    "body": "<a id='comment:44'></a>Replying to [comment:42 mkoeppe]:\n> `@`isuruf: Compiling python3 on conda-forge gives me an error that looks like it's related to ffi - https://github.com/mkoeppe/sage/runs/410329852\n\n\nLooks like you are not activating the conda environment.",
    "created_at": "2020-01-27T16:16:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433783",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:44'></a>Replying to [comment:42 mkoeppe]:
> `@`isuruf: Compiling python3 on conda-forge gives me an error that looks like it's related to ffi - https://github.com/mkoeppe/sage/runs/410329852


Looks like you are not activating the conda environment.



---

archive/issue_comments_433784.json:
```json
{
    "body": "<a id='comment:45'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-27T16:30:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433784",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:45'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433785.json:
```json
{
    "body": "<a id='comment:46'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-27T16:32:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433785",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:46'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433786.json:
```json
{
    "body": "<a id='comment:47'></a>Replying to [comment:43 arojas]:\n> Arch package sage-data-elliptic_curves corresponds to Sage's elliptic_curves, not to the optional database_cremona_ellcurve\n\nThank you! Fixed.",
    "created_at": "2020-01-27T16:32:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433786",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:47'></a>Replying to [comment:43 arojas]:
> Arch package sage-data-elliptic_curves corresponds to Sage's elliptic_curves, not to the optional database_cremona_ellcurve

Thank you! Fixed.



---

archive/issue_comments_433787.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,31 @@\n+https://doc.sagemath.org/html/en/installation/source.html#linux-recommended-installation\n+gives \\`apt-get install\\` and \\`yum install\\` command lines to install system packages that will be recognized by \\`build/pkgs/SPKG/spkg-configure.m4\\`.\n+\n+Several packages are missing, see comments in\n+https://trac.sagemath.org/attachment/ticket/27824/Dockerfile-ubuntu-minimal\n+\n+This ticket puts this information on a per-package basis into \\`build/pkgs/SPKG/distros/debian.txt\\`, \\`.../fedora.txt\\`, \\`.../arch.txt\\` for the following purposes:\n+- \\`sage -info SPKG\\` prints out this information.\n+- Provide a \\`tox.ini\\` that generates and runs \\`Dockerfile\\`s that test the installation on various systems. Example (running 3 builds in parallel):\n+   {{{\n+   $ tox -p auto -e archlinux-latest,ubuntu-focal-minimal,debian-buster-maximal\n+\u2838\n+   }}}\n+\n+Incidental change on this ticket:\n+- Mark \\`gfortran\\` as a \\`type=standard\\` package. It is a prereq of standard package \\`numpy\\`. Its status as a \\`type=optional\\` package predates the clarifications brought by the development of the \\`spkg-configure.m4\\` mechanism (#27330).\n+\n+---\n+\n+Possible follow-up and related tickets:\n+- #29087 - Add a [GitHub](GitHub) workflow that runs this automatically, with many parallel jobs.\n+- Also the \\`apt-cyg\\` command lines at https://trac.sagemath.org/wiki/Cygwin64Port could be generated in the same way.\n+- Aggregate and format it (during \\`./bootstrap\\`) to produce the command lines shown in the manual. This ticket already prepares it by moving these command lines into separate \\`.txt\\` files.\n+- #29041: at \\`./bootstrap\\` time, generate \\`src/requirements.txt\\`, \\`src/constraints.txt\\`, \\`src/setup.cfg\\` \\`[install_requires]\\` from \\`build/pkgs\\`\n+- #28745: Add \\`SAGE_ROOT/environment.yml\\` for \\`conda env create -f\\`.\n+\n+Resources:\n+- https://repology.org/\n \n \n Comment: 1\n```\n",
    "created_at": "2020-01-27T17:21:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433787",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,31 @@
+https://doc.sagemath.org/html/en/installation/source.html#linux-recommended-installation
+gives \`apt-get install\` and \`yum install\` command lines to install system packages that will be recognized by \`build/pkgs/SPKG/spkg-configure.m4\`.
+
+Several packages are missing, see comments in
+https://trac.sagemath.org/attachment/ticket/27824/Dockerfile-ubuntu-minimal
+
+This ticket puts this information on a per-package basis into \`build/pkgs/SPKG/distros/debian.txt\`, \`.../fedora.txt\`, \`.../arch.txt\` for the following purposes:
+- \`sage -info SPKG\` prints out this information.
+- Provide a \`tox.ini\` that generates and runs \`Dockerfile\`s that test the installation on various systems. Example (running 3 builds in parallel):
+   {{{
+   $ tox -p auto -e archlinux-latest,ubuntu-focal-minimal,debian-buster-maximal
+⠸
+   }}}
+
+Incidental change on this ticket:
+- Mark \`gfortran\` as a \`type=standard\` package. It is a prereq of standard package \`numpy\`. Its status as a \`type=optional\` package predates the clarifications brought by the development of the \`spkg-configure.m4\` mechanism (#27330).
+
+---
+
+Possible follow-up and related tickets:
+- #29087 - Add a [GitHub](GitHub) workflow that runs this automatically, with many parallel jobs.
+- Also the \`apt-cyg\` command lines at https://trac.sagemath.org/wiki/Cygwin64Port could be generated in the same way.
+- Aggregate and format it (during \`./bootstrap\`) to produce the command lines shown in the manual. This ticket already prepares it by moving these command lines into separate \`.txt\` files.
+- #29041: at \`./bootstrap\` time, generate \`src/requirements.txt\`, \`src/constraints.txt\`, \`src/setup.cfg\` \`[install_requires]\` from \`build/pkgs\`
+- #28745: Add \`SAGE_ROOT/environment.yml\` for \`conda env create -f\`.
+
+Resources:
+- https://repology.org/
 
 
 Comment: 1
```




---

archive/issue_comments_433788.json:
```json
{
    "body": "<a id='comment:49'></a>Ready for review.",
    "created_at": "2020-01-27T17:23:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433788",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:49'></a>Ready for review.



---

archive/issue_comments_433789.json:
```json
{
    "body": "<a id='comment:50'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-27T19:30:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433789",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:50'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433790.json:
```json
{
    "body": "<a id='comment:51'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-27T22:59:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433790",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:51'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433791.json:
```json
{
    "body": "<a id='comment:52'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-27T23:13:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433791",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:52'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433792.json:
```json
{
    "body": "<a id='comment:53'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-28T00:30:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433792",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:53'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433793.json:
```json
{
    "body": "<a id='comment:54'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-28T02:00:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433793",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:54'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433794.json:
```json
{
    "body": "<a id='comment:56'></a>Replying to [comment:44 isuruf]:\n> Replying to [comment:42 mkoeppe]:\n> > `@`isuruf: Compiling python3 on conda-forge gives me an error that looks like it's related to ffi - https://github.com/mkoeppe/sage/runs/410329852\n\n> \n> Looks like you are not activating the conda environment.\n\nThank you! That helped.\nBut now (https://github.com/mkoeppe/sage/runs/412042067), still in the python3 build, I am hitting again #29012:\n\n```\nTesting importing of various modules...\nctypes module imported OK\nmath module imported OK\nhashlib module imported OK\nTraceback (most recent call last):\n  File \"<string>\", line 1, in <module>\n  File \"/sage/local/var/tmp/sage/build/python3-3.7.3.p1/src/Lib/crypt.py\", line 3, in <module>\n    import _crypt\nModuleNotFoundError: No module named '_crypt'\ncrypt module failed to import\n```",
    "created_at": "2020-01-28T02:05:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433794",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:56'></a>Replying to [comment:44 isuruf]:
> Replying to [comment:42 mkoeppe]:
> > `@`isuruf: Compiling python3 on conda-forge gives me an error that looks like it's related to ffi - https://github.com/mkoeppe/sage/runs/410329852

> 
> Looks like you are not activating the conda environment.

Thank you! That helped.
But now (https://github.com/mkoeppe/sage/runs/412042067), still in the python3 build, I am hitting again #29012:

```
Testing importing of various modules...
ctypes module imported OK
math module imported OK
hashlib module imported OK
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/sage/local/var/tmp/sage/build/python3-3.7.3.p1/src/Lib/crypt.py", line 3, in <module>
    import _crypt
ModuleNotFoundError: No module named '_crypt'
crypt module failed to import
```



---

archive/issue_comments_433795.json:
```json
{
    "body": "<a id='comment:57'></a>Looks like python's setup.py doesn't find the conda compiler's sysroot. https://github.com/python/cpython/blob/v3.7.3/setup.py#L867",
    "created_at": "2020-01-28T03:14:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433795",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:57'></a>Looks like python's setup.py doesn't find the conda compiler's sysroot. https://github.com/python/cpython/blob/v3.7.3/setup.py#L867



---

archive/issue_comments_433796.json:
```json
{
    "body": "<a id='comment:58'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-28T12:27:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433796",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:58'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433797.json:
```json
{
    "body": "<a id='comment:59'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-28T23:04:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433797",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:59'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433798.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,33 @@\n+https://doc.sagemath.org/html/en/installation/source.html#linux-recommended-installation\n+gives \\`apt-get install\\` and \\`yum install\\` command lines to install system packages that will be recognized by \\`build/pkgs/SPKG/spkg-configure.m4\\`.\n+\n+Several packages are missing, see comments in\n+https://trac.sagemath.org/attachment/ticket/27824/Dockerfile-ubuntu-minimal\n+\n+This ticket puts this information on a per-package basis into \\`build/pkgs/SPKG/distros/debian.txt\\`, \\`.../fedora.txt\\`, \\`.../arch.txt\\` for the following purposes:\n+- \\`sage -info SPKG\\` prints out this information.\n+- Provide a \\`tox.ini\\` that generates and runs \\`Dockerfile\\`s that test the installation on various systems. Example (running 3 builds in parallel):\n+   {{{\n+   $ tox -p auto -e archlinux-latest,ubuntu-focal-minimal,debian-buster-maximal\n+\u2838\n+   }}}\n+\n+Incidental change on this ticket:\n+- Mark \\`gfortran\\` as a \\`type=standard\\` package. It is a prereq of standard package \\`numpy\\`. Its status as a \\`type=optional\\` package predates the clarifications brought by the development of the \\`spkg-configure.m4\\` mechanism (#27330).\n+\n+---\n+\n+Possible follow-up and related tickets:\n+- #29087 - Add a [GitHub](GitHub) workflow that runs this automatically, with many parallel jobs.\n+- Also the \\`apt-cyg\\` command lines at https://trac.sagemath.org/wiki/Cygwin64Port could be generated in the same way.\n+- Aggregate and format it (during \\`./bootstrap\\`) to produce the command lines shown in the manual. This ticket already prepares it by moving these command lines into separate \\`.txt\\` files.\n+- #29041: at \\`./bootstrap\\` time, generate \\`src/requirements.txt\\`, \\`src/constraints.txt\\`, \\`src/setup.cfg\\` \\`[install_requires]\\` from \\`build/pkgs\\`\n+- #28745: Add \\`SAGE_ROOT/environment.yml\\` for \\`conda env create -f\\`.\n+- Add to tox.ini a conda run (either with a fresh environment or fresh conda install) without docker - to test with macOS conda\n+- Add to tox.ini a homebrew run (with a fresh install not in /usr/local)\n+\n+Resources:\n+- https://repology.org/\n \n \n Comment: 1\n```\n",
    "created_at": "2020-01-29T15:31:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433798",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,33 @@
+https://doc.sagemath.org/html/en/installation/source.html#linux-recommended-installation
+gives \`apt-get install\` and \`yum install\` command lines to install system packages that will be recognized by \`build/pkgs/SPKG/spkg-configure.m4\`.
+
+Several packages are missing, see comments in
+https://trac.sagemath.org/attachment/ticket/27824/Dockerfile-ubuntu-minimal
+
+This ticket puts this information on a per-package basis into \`build/pkgs/SPKG/distros/debian.txt\`, \`.../fedora.txt\`, \`.../arch.txt\` for the following purposes:
+- \`sage -info SPKG\` prints out this information.
+- Provide a \`tox.ini\` that generates and runs \`Dockerfile\`s that test the installation on various systems. Example (running 3 builds in parallel):
+   {{{
+   $ tox -p auto -e archlinux-latest,ubuntu-focal-minimal,debian-buster-maximal
+⠸
+   }}}
+
+Incidental change on this ticket:
+- Mark \`gfortran\` as a \`type=standard\` package. It is a prereq of standard package \`numpy\`. Its status as a \`type=optional\` package predates the clarifications brought by the development of the \`spkg-configure.m4\` mechanism (#27330).
+
+---
+
+Possible follow-up and related tickets:
+- #29087 - Add a [GitHub](GitHub) workflow that runs this automatically, with many parallel jobs.
+- Also the \`apt-cyg\` command lines at https://trac.sagemath.org/wiki/Cygwin64Port could be generated in the same way.
+- Aggregate and format it (during \`./bootstrap\`) to produce the command lines shown in the manual. This ticket already prepares it by moving these command lines into separate \`.txt\` files.
+- #29041: at \`./bootstrap\` time, generate \`src/requirements.txt\`, \`src/constraints.txt\`, \`src/setup.cfg\` \`[install_requires]\` from \`build/pkgs\`
+- #28745: Add \`SAGE_ROOT/environment.yml\` for \`conda env create -f\`.
+- Add to tox.ini a conda run (either with a fresh environment or fresh conda install) without docker - to test with macOS conda
+- Add to tox.ini a homebrew run (with a fresh install not in /usr/local)
+
+Resources:
+- https://repology.org/
 
 
 Comment: 1
```




---

archive/issue_comments_433799.json:
```json
{
    "body": "<a id='comment:62'></a>there are no `distros/` for `boost_cropped/` for some reason.\n(I've added these on #29100)",
    "created_at": "2020-01-29T19:44:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433799",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:62'></a>there are no `distros/` for `boost_cropped/` for some reason.
(I've added these on #29100)



---

archive/issue_comments_433800.json:
```json
{
    "body": "<a id='comment:63'></a>looks OK to me.",
    "created_at": "2020-01-29T21:48:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433800",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:63'></a>looks OK to me.



---

archive/issue_comments_433801.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-01-29T21:49:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433801",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_433802.json:
```json
{
    "body": "<a id='comment:65'></a>Thank you!",
    "created_at": "2020-01-29T21:59:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433802",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:65'></a>Thank you!



---

archive/issue_comments_433803.json:
```json
{
    "body": "<a id='comment:66'></a>What's suprising to me is that these GH Actions don't time out, as these builds take quite a while...",
    "created_at": "2020-01-31T22:58:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433803",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:66'></a>What's suprising to me is that these GH Actions don't time out, as these builds take quite a while...



---

archive/issue_comments_433804.json:
```json
{
    "body": "<a id='comment:67'></a>It's quite generous - it provides  6 hours per job and up to 20 Jobs in parallel.",
    "created_at": "2020-01-31T23:03:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433804",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:67'></a>It's quite generous - it provides  6 hours per job and up to 20 Jobs in parallel.



---

archive/issue_events_073646.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-01-31T23:49:34Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29053#event-73646"
}
```



---

archive/issue_comments_433805.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-01-31T23:49:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433805",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_433806.json:
```json
{
    "body": "<a id='comment:69'></a>added follow-up ticket to the description",
    "created_at": "2020-02-01T15:04:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433806",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:69'></a>added follow-up ticket to the description



---

archive/issue_comments_433807.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,33 @@\n+https://doc.sagemath.org/html/en/installation/source.html#linux-recommended-installation\n+gives \\`apt-get install\\` and \\`yum install\\` command lines to install system packages that will be recognized by \\`build/pkgs/SPKG/spkg-configure.m4\\`.\n+\n+Several packages are missing, see comments in\n+https://trac.sagemath.org/attachment/ticket/27824/Dockerfile-ubuntu-minimal\n+\n+This ticket puts this information on a per-package basis into \\`build/pkgs/SPKG/distros/debian.txt\\`, \\`.../fedora.txt\\`, \\`.../arch.txt\\` for the following purposes:\n+- \\`sage -info SPKG\\` prints out this information.\n+- Provide a \\`tox.ini\\` that generates and runs \\`Dockerfile\\`s that test the installation on various systems. Example (running 3 builds in parallel):\n+   {{{\n+   $ tox -p auto -e archlinux-latest,ubuntu-focal-minimal,debian-buster-maximal\n+\u2838\n+   }}}\n+\n+Incidental change on this ticket:\n+- Mark \\`gfortran\\` as a \\`type=standard\\` package. It is a prereq of standard package \\`numpy\\`. Its status as a \\`type=optional\\` package predates the clarifications brought by the development of the \\`spkg-configure.m4\\` mechanism (#27330).\n+\n+---\n+\n+Possible follow-up and related tickets:\n+- #29087 - Add a [GitHub](GitHub) workflow that runs this automatically, with many parallel jobs.\n+- Also the \\`apt-cyg\\` command lines at https://trac.sagemath.org/wiki/Cygwin64Port could be generated in the same way.\n+- #26964: Aggregate and format it (during \\`./bootstrap\\`) to produce the command lines shown in the manual. This ticket already prepares it by moving these command lines into separate \\`.txt\\` files.\n+- #29041: at \\`./bootstrap\\` time, generate \\`src/requirements.txt\\`, \\`src/constraints.txt\\`, \\`src/setup.cfg\\` \\`[install_requires]\\` from \\`build/pkgs\\`\n+- #28745: Add \\`SAGE_ROOT/environment.yml\\` for \\`conda env create -f\\`.\n+- Add to tox.ini a conda run (either with a fresh environment or fresh conda install) without docker - to test with macOS conda\n+- Add to tox.ini a homebrew run (with a fresh install not in /usr/local)\n+\n+Resources:\n+- https://repology.org/\n \n \n Comment: 1\n```\n",
    "created_at": "2020-02-01T15:04:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433807",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,33 @@
+https://doc.sagemath.org/html/en/installation/source.html#linux-recommended-installation
+gives \`apt-get install\` and \`yum install\` command lines to install system packages that will be recognized by \`build/pkgs/SPKG/spkg-configure.m4\`.
+
+Several packages are missing, see comments in
+https://trac.sagemath.org/attachment/ticket/27824/Dockerfile-ubuntu-minimal
+
+This ticket puts this information on a per-package basis into \`build/pkgs/SPKG/distros/debian.txt\`, \`.../fedora.txt\`, \`.../arch.txt\` for the following purposes:
+- \`sage -info SPKG\` prints out this information.
+- Provide a \`tox.ini\` that generates and runs \`Dockerfile\`s that test the installation on various systems. Example (running 3 builds in parallel):
+   {{{
+   $ tox -p auto -e archlinux-latest,ubuntu-focal-minimal,debian-buster-maximal
+⠸
+   }}}
+
+Incidental change on this ticket:
+- Mark \`gfortran\` as a \`type=standard\` package. It is a prereq of standard package \`numpy\`. Its status as a \`type=optional\` package predates the clarifications brought by the development of the \`spkg-configure.m4\` mechanism (#27330).
+
+---
+
+Possible follow-up and related tickets:
+- #29087 - Add a [GitHub](GitHub) workflow that runs this automatically, with many parallel jobs.
+- Also the \`apt-cyg\` command lines at https://trac.sagemath.org/wiki/Cygwin64Port could be generated in the same way.
+- #26964: Aggregate and format it (during \`./bootstrap\`) to produce the command lines shown in the manual. This ticket already prepares it by moving these command lines into separate \`.txt\` files.
+- #29041: at \`./bootstrap\` time, generate \`src/requirements.txt\`, \`src/constraints.txt\`, \`src/setup.cfg\` \`[install_requires]\` from \`build/pkgs\`
+- #28745: Add \`SAGE_ROOT/environment.yml\` for \`conda env create -f\`.
+- Add to tox.ini a conda run (either with a fresh environment or fresh conda install) without docker - to test with macOS conda
+- Add to tox.ini a homebrew run (with a fresh install not in /usr/local)
+
+Resources:
+- https://repology.org/
 
 
 Comment: 1
```




---

archive/issue_comments_433808.json:
```json
{
    "body": "<a id='comment:71'></a>Somehow missed this in the fervor over other issues, but this kicks ass, thank you!  I'll open a ticket to adding cygwin to this as well.  repology.org also just recently added Cygwin.",
    "created_at": "2020-02-05T11:51:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433808",
    "user": "https://github.com/embray"
}
```

<a id='comment:71'></a>Somehow missed this in the fervor over other issues, but this kicks ass, thank you!  I'll open a ticket to adding cygwin to this as well.  repology.org also just recently added Cygwin.



---

archive/issue_comments_433809.json:
```json
{
    "body": "<a id='comment:72'></a>One thing I might suggest is that rather than having the distro-specific commands hard-coded in `sage-spkg`, they could go in a text file or something, with the option to override and/or add support for other distros without having to patch sage-spkg.\n\nThat could be done in a follow-up though.",
    "created_at": "2020-02-05T11:52:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433809",
    "user": "https://github.com/embray"
}
```

<a id='comment:72'></a>One thing I might suggest is that rather than having the distro-specific commands hard-coded in `sage-spkg`, they could go in a text file or something, with the option to override and/or add support for other distros without having to patch sage-spkg.

That could be done in a follow-up though.



---

archive/issue_comments_433810.json:
```json
{
    "body": "<a id='comment:73'></a>Replying to [comment:71 embray]:\n> Somehow missed this in the fervor over other issues, but this kicks ass, thank you!  I'll open a ticket to adding cygwin to this as well.  repology.org also just recently added Cygwin.\n\n\nsee, mkoeppe practically buried me under his tickets, and then came you with #29118 :P",
    "created_at": "2020-02-05T13:32:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433810",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:73'></a>Replying to [comment:71 embray]:
> Somehow missed this in the fervor over other issues, but this kicks ass, thank you!  I'll open a ticket to adding cygwin to this as well.  repology.org also just recently added Cygwin.


see, mkoeppe practically buried me under his tickets, and then came you with #29118 :P



---

archive/issue_comments_433811.json:
```json
{
    "body": "<a id='comment:74'></a>Replying to [comment:71 embray]:\n>  I'll open a ticket to adding cygwin to this as well.  repology.org also just recently added Cygwin.\n\n\nThe cygwin ticket is #29106 (Add cygwin package information). It would be great if also corresponding CI scripts could be added, to help elevate the cygwin platform to a first class target for sage.",
    "created_at": "2020-02-05T13:41:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433811",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:74'></a>Replying to [comment:71 embray]:
>  I'll open a ticket to adding cygwin to this as well.  repology.org also just recently added Cygwin.


The cygwin ticket is #29106 (Add cygwin package information). It would be great if also corresponding CI scripts could be added, to help elevate the cygwin platform to a first class target for sage.



---

archive/issue_comments_433812.json:
```json
{
    "body": "<a id='comment:75'></a>Replying to [comment:72 embray]:\n> One thing I might suggest is that rather than having the distro-specific commands hard-coded in `sage-spkg`, they could go in a text file or something, with the option to override and/or add support for other distros without having to patch sage-spkg.\n> \n> That could be done in a follow-up though.\n\n\nThanks, I have added this suggestion to #29146, which already has a number of ideas for improvements.",
    "created_at": "2020-02-05T20:20:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433812",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:75'></a>Replying to [comment:72 embray]:
> One thing I might suggest is that rather than having the distro-specific commands hard-coded in `sage-spkg`, they could go in a text file or something, with the option to override and/or add support for other distros without having to patch sage-spkg.
> 
> That could be done in a follow-up though.


Thanks, I have added this suggestion to #29146, which already has a number of ideas for improvements.



---

archive/issue_comments_433813.json:
```json
{
    "body": "<a id='comment:77'></a>(sorry, pushed to the wrong ticket by accident)",
    "created_at": "2020-02-16T18:14:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433813",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:77'></a>(sorry, pushed to the wrong ticket by accident)



---

archive/issue_comments_433814.json:
```json
{
    "body": "<a id='comment:78'></a>Somehow in recent merges I experienced failure to build the documentation in sage-on-gentoo. It seems the `literalinclude` are causing me trouble.\n\n```\n[installat] The HTML pages are in ../../build_doc/html/en/installation.\nError building the documentation.\nTraceback (most recent call last):\n  File \"sage_setup/docbuild/__main__.py\", line 2, in <module>\n    main()\n  File \"/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_7/sage_setup/docbuild/__init__.py\", line 1720, in main\n    builder()\n  File \"/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_7/sage_setup/docbuild/__init__.py\", line 336, in _wrapper\n    build_many(build_other_doc, L)\n  File \"/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_7/sage_setup/docbuild/__init__.py\", line 280, in build_many\n    _build_many(target, args, processes=NUM_THREADS)\n  File \"/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_7/sage_setup/docbuild/utils.py\", line 283, in build_many\n    raise worker_exc.original_exception\nOSError: /dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_7/doc/en/installation/source.rst:228: WARNING: Include file '/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_7/doc/en/installation/debian.txt' not found or reading it failed\n```\nI am thinking of removing the installation instruction from sage-on-gentoo but I am curious at what could have caused this. Especially when you consider that it started happening sometime after this ticket was merged. My last successful build of volker's branch is dated 20th of February and would corresponding to the first merging attempt of #21785.",
    "created_at": "2020-02-28T01:32:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433814",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:78'></a>Somehow in recent merges I experienced failure to build the documentation in sage-on-gentoo. It seems the `literalinclude` are causing me trouble.

```
[installat] The HTML pages are in ../../build_doc/html/en/installation.
Error building the documentation.
Traceback (most recent call last):
  File "sage_setup/docbuild/__main__.py", line 2, in <module>
    main()
  File "/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_7/sage_setup/docbuild/__init__.py", line 1720, in main
    builder()
  File "/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_7/sage_setup/docbuild/__init__.py", line 336, in _wrapper
    build_many(build_other_doc, L)
  File "/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_7/sage_setup/docbuild/__init__.py", line 280, in build_many
    _build_many(target, args, processes=NUM_THREADS)
  File "/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_7/sage_setup/docbuild/utils.py", line 283, in build_many
    raise worker_exc.original_exception
OSError: /dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_7/doc/en/installation/source.rst:228: WARNING: Include file '/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_7/doc/en/installation/debian.txt' not found or reading it failed
```
I am thinking of removing the installation instruction from sage-on-gentoo but I am curious at what could have caused this. Especially when you consider that it started happening sometime after this ticket was merged. My last successful build of volker's branch is dated 20th of February and would corresponding to the first merging attempt of #21785.



---

archive/issue_comments_433815.json:
```json
{
    "body": "<a id='comment:79'></a>Replying to [comment:78 fbissey]:\n> Somehow in recent merges I experienced failure to build the documentation in sage-on-gentoo. It seems the `literalinclude` are causing me trouble.\n> \n> ```\n> [installat] The HTML pages are in ../../build_doc/html/en/installation.\n> Error building the documentation.\n> ...\n> OSError: /dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_7/doc/en/installation/source.rst:228: WARNING: Include file '/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_7/doc/en/installation/debian.txt' not found or reading it failed\n> ```\n\n\nYes, as of #26964, these files are being generated by `bootstrap` and are not sources in the git tree any more.\n\nDistributors should build either from a bootstrapped source tree or from a sagelib sdist (see  ticket #21516 - Fix sagelib sdist (src/setup.py sdist); which needs help).\n\n> I am thinking of removing the installation instruction from sage-on-gentoo \n\n\nYes, there's no point in shipping the installation manual with a distribution package.",
    "created_at": "2020-02-28T01:43:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433815",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:79'></a>Replying to [comment:78 fbissey]:
> Somehow in recent merges I experienced failure to build the documentation in sage-on-gentoo. It seems the `literalinclude` are causing me trouble.
> 
> ```
> [installat] The HTML pages are in ../../build_doc/html/en/installation.
> Error building the documentation.
> ...
> OSError: /dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_7/doc/en/installation/source.rst:228: WARNING: Include file '/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_7/doc/en/installation/debian.txt' not found or reading it failed
> ```


Yes, as of #26964, these files are being generated by `bootstrap` and are not sources in the git tree any more.

Distributors should build either from a bootstrapped source tree or from a sagelib sdist (see  ticket #21516 - Fix sagelib sdist (src/setup.py sdist); which needs help).

> I am thinking of removing the installation instruction from sage-on-gentoo 


Yes, there's no point in shipping the installation manual with a distribution package.



---

archive/issue_comments_433816.json:
```json
{
    "body": "<a id='comment:80'></a>I see, a sagelib sdist is a good development as it makes it more like a regular python package I guess. But right now I am missing the ability to build sagelib directly from git head. Thanks for explanation.",
    "created_at": "2020-02-28T01:52:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433816",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:80'></a>I see, a sagelib sdist is a good development as it makes it more like a regular python package I guess. But right now I am missing the ability to build sagelib directly from git head. Thanks for explanation.



---

archive/issue_comments_433817.json:
```json
{
    "body": "<a id='comment:81'></a>This has missed \t`build/pkgs/r/` from #28884.\nI've opened #29273 to deal with it.",
    "created_at": "2020-03-03T11:23:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433817",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:81'></a>This has missed 	`build/pkgs/r/` from #28884.
I've opened #29273 to deal with it.



---

archive/issue_comments_433818.json:
```json
{
    "body": "<a id='comment:82'></a>Replying to [comment:56 mkoeppe]:\n> Replying to [comment:44 isuruf]:\n> > Replying to [comment:42 mkoeppe]:\n> > > `@`isuruf: Compiling python3 on conda-forge gives me an error that looks like it's related to ffi - https://github.com/mkoeppe/sage/runs/410329852\n\n> > \n> > Looks like you are not activating the conda environment.\n\n> Thank you! That helped.\n> But now (https://github.com/mkoeppe/sage/runs/412042067), still in the python3 build, I am hitting again #29012:\n> \n> ```\n> Testing importing of various modules...\n> ctypes module imported OK\n> math module imported OK\n> hashlib module imported OK\n> Traceback (most recent call last):\n>   File \"<string>\", line 1, in <module>\n>   File \"/sage/local/var/tmp/sage/build/python3-3.7.3.p1/src/Lib/crypt.py\", line 3, in <module>\n>     import _crypt\n> ModuleNotFoundError: No module named '_crypt'\n> crypt module failed to import\n> ```\n\n\nThis patch might help https://github.com/conda-forge/python-feedstock/blob/master/recipe/patches/0014-Fix-cross-compilation-on-Debian-based-distros.patch",
    "created_at": "2020-03-11T16:59:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29053",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29053#issuecomment-433818",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:82'></a>Replying to [comment:56 mkoeppe]:
> Replying to [comment:44 isuruf]:
> > Replying to [comment:42 mkoeppe]:
> > > `@`isuruf: Compiling python3 on conda-forge gives me an error that looks like it's related to ffi - https://github.com/mkoeppe/sage/runs/410329852

> > 
> > Looks like you are not activating the conda environment.

> Thank you! That helped.
> But now (https://github.com/mkoeppe/sage/runs/412042067), still in the python3 build, I am hitting again #29012:
> 
> ```
> Testing importing of various modules...
> ctypes module imported OK
> math module imported OK
> hashlib module imported OK
> Traceback (most recent call last):
>   File "<string>", line 1, in <module>
>   File "/sage/local/var/tmp/sage/build/python3-3.7.3.p1/src/Lib/crypt.py", line 3, in <module>
>     import _crypt
> ModuleNotFoundError: No module named '_crypt'
> crypt module failed to import
> ```


This patch might help https://github.com/conda-forge/python-feedstock/blob/master/recipe/patches/0014-Fix-cross-compilation-on-Debian-based-distros.patch
