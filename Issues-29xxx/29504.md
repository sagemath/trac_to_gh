# Issue 29504: ./configure + homebrew: recommend the script .homebrew-build-env

archive/issues_029267.json:
```json
{
    "assignees": [],
    "body": "When homebrew is detected, the \"hints\" at the end of running `./configure` should suggest running the script `.homebrew-build-env`.\n\n[Marking it as critical because it has the potential of reducing the number of support questions for release 9.1]\n\nCC:  @mkoeppe @dimpase @dcoudert\n\nBranch/Commit: **[ec64fb6](https://github.com/sagemath/sagetrac-mirror/commit/ec64fb68a864c9fb5ca58432140601c6f6bdb161)**\n\nReviewer: **John Palmieri**\n\nAuthor: **Matthias Koeppe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29504_\n\n",
    "closed_at": "2020-04-16T22:33:39Z",
    "created_at": "2020-04-13T21:15:10Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20build%3A%20configure",
        "https://github.com/sagemath/sage/labels/p1%20%E2%80%93%20blocker",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "./configure + homebrew: recommend the script .homebrew-build-env",
    "type": "issue",
    "updated_at": "2020-04-16T22:33:39Z",
    "url": "https://github.com/sagemath/sage/issues/29504",
    "user": "https://github.com/jhpalmieri"
}
```
When homebrew is detected, the "hints" at the end of running `./configure` should suggest running the script `.homebrew-build-env`.

[Marking it as critical because it has the potential of reducing the number of support questions for release 9.1]

CC:  @mkoeppe @dimpase @dcoudert

Branch/Commit: **[ec64fb6](https://github.com/sagemath/sagetrac-mirror/commit/ec64fb68a864c9fb5ca58432140601c6f6bdb161)**

Reviewer: **John Palmieri**

Author: **Matthias Koeppe**

_Issue created by migration from https://trac.sagemath.org/ticket/29504_





---

archive/issue_events_374107.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2020-04-13T21:15:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29504#event-374107"
}
```



---

archive/issue_events_374108.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2020-04-13T21:15:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20build%3A%20configure",
    "label_color": "000080",
    "label_name": "component: build: configure",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29504#event-374108"
}
```



---

archive/issue_events_374109.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2020-04-13T21:15:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29504#event-374109"
}
```



---

archive/issue_events_374110.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2020-04-13T21:15:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29504#event-374110"
}
```



---

archive/issue_comments_466882.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nQuestions: \n\n- should `.homebrew-build-env` have a `#!...` line at the top?\n- with zsh, the new default shell on OS X, `. .homebrew-build-env` fails, but `source .homebrew-build-env` works. Do we always suggest `source .homebrew...`, or is there a reason to suggest `. .homebrew...`, for example when using bash? With zsh:\n\n```\n% . .homebrew-build-env     \n.: no such file or directory: .homebrew-build-env\n```\n I guess in zsh, the correct invocation with `.` would be `. ./.homebrew-...`: you have to specify the path.",
    "created_at": "2020-04-13T21:22:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466882",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:1'>Comment 1:</a>
Questions: 

- should `.homebrew-build-env` have a `#!...` line at the top?
- with zsh, the new default shell on OS X, `. .homebrew-build-env` fails, but `source .homebrew-build-env` works. Do we always suggest `source .homebrew...`, or is there a reason to suggest `. .homebrew...`, for example when using bash? With zsh:

```
% . .homebrew-build-env     
.: no such file or directory: .homebrew-build-env
```
 I guess in zsh, the correct invocation with `.` would be `. ./.homebrew-...`: you have to specify the path.



---

archive/issue_comments_466883.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nReplying to [@jhpalmieri](#comment%3A1):\n> Questions: \n> \n> - should `.homebrew-build-env` have a `#!...` line at the top?\n> - with zsh, the new default shell on OS X, `. .homebrew-build-env` fails, but `source .homebrew-build-env` works. Do we always suggest `source .homebrew...`, or is there a reason to suggest `. .homebrew...`, for example when using bash? With zsh:\n> \n> ```\n> % . .homebrew-build-env     \n> .: no such file or directory: .homebrew-build-env\n> ```\n>  I guess in zsh, the correct invocation with `.` would be `. ./.homebrew-...`: you have to specify the path.\n\nGood idea. We should recommend `source ./.homebrew-build-env` then.\n\nNo `#!` because it must be sourced, not executed",
    "created_at": "2020-04-13T23:31:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466883",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'>Comment 2:</a>
Replying to [@jhpalmieri](#comment%3A1):
> Questions: 
> 
> - should `.homebrew-build-env` have a `#!...` line at the top?
> - with zsh, the new default shell on OS X, `. .homebrew-build-env` fails, but `source .homebrew-build-env` works. Do we always suggest `source .homebrew...`, or is there a reason to suggest `. .homebrew...`, for example when using bash? With zsh:
> 
> ```
> % . .homebrew-build-env     
> .: no such file or directory: .homebrew-build-env
> ```
>  I guess in zsh, the correct invocation with `.` would be `. ./.homebrew-...`: you have to specify the path.

Good idea. We should recommend `source ./.homebrew-build-env` then.

No `#!` because it must be sourced, not executed



---

archive/issue_comments_466884.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nReferences: \n\n_ environment variables - What is the difference between '.' and 'source' in shells? - Unix & Linux Stack Exchange\nhttps://unix.stackexchange.com/questions/58514/what-is-the-difference-between-and-source-in-shells\n\nbash - running script with \". \" and with \"source \" - Unix & Linux Stack Exchange\nhttps://unix.stackexchange.com/questions/17815/running-script-with-and-with-source",
    "created_at": "2020-04-13T23:38:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466884",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'>Comment 3:</a>
References: 

_ environment variables - What is the difference between '.' and 'source' in shells? - Unix & Linux Stack Exchange
https://unix.stackexchange.com/questions/58514/what-is-the-difference-between-and-source-in-shells

bash - running script with ". " and with "source " - Unix & Linux Stack Exchange
https://unix.stackexchange.com/questions/17815/running-script-with-and-with-source



---

archive/issue_comments_466885.json:
```json
{
    "body": "Branch: **[u/mkoeppe/__configure___homebrew__recommend_the_script__homebrew_build_env](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/__configure___homebrew__recommend_the_script__homebrew_build_env)**",
    "created_at": "2020-04-14T00:08:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466885",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/__configure___homebrew__recommend_the_script__homebrew_build_env](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/__configure___homebrew__recommend_the_script__homebrew_build_env)**



---

archive/issue_events_374111.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T00:09:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29504#event-374111"
}
```



---

archive/issue_comments_466886.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1bb30bfb69cf269fe1de5d251a4b82c7f23a083c\">1bb30bf</a></td><td><code>build/bin/sage-print-system-package-command [homebrew]: Advertise .homebrew-build-env</code></td></tr></table>\n",
    "created_at": "2020-04-14T00:09:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466886",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'>Comment 5:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1bb30bfb69cf269fe1de5d251a4b82c7f23a083c">1bb30bf</a></td><td><code>build/bin/sage-print-system-package-command [homebrew]: Advertise .homebrew-build-env</code></td></tr></table>




---

archive/issue_comments_466887.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2020-04-14T00:09:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466887",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_events_374112.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T00:09:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29504#event-374112"
}
```



---

archive/issue_events_374113.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T00:09:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "label": "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29504#event-374113"
}
```



---

archive/issue_comments_466888.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,3 @@\n When homebrew is detected, the \"hints\" at the end of running `./configure` should suggest running the script `.homebrew-build-env`.\n \n+[Marking it as critical because it has the potential of reducing the number of support questions for release 9.1]\n``````\n",
    "created_at": "2020-04-14T00:09:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466888",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,3 @@
 When homebrew is detected, the "hints" at the end of running `./configure` should suggest running the script `.homebrew-build-env`.
 
+[Marking it as critical because it has the potential of reducing the number of support questions for release 9.1]
``````




---

archive/issue_comments_466889.json:
```json
{
    "body": "Commit: **[1bb30bf](https://github.com/sagemath/sagetrac-mirror/commit/1bb30bfb69cf269fe1de5d251a4b82c7f23a083c)**",
    "created_at": "2020-04-14T00:09:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466889",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[1bb30bf](https://github.com/sagemath/sagetrac-mirror/commit/1bb30bfb69cf269fe1de5d251a4b82c7f23a083c)**



---

archive/issue_comments_466890.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nThank you for working on this, but this only prints the message if there are uninstalled homebrew packages. Otherwise, this code gets executed before the message has a chance to be printed:\n\n```\nif [ -z \"$system_packages\" ]; then\n    # No command needed to install nothing\n    exit 0\nfi\n```",
    "created_at": "2020-04-14T02:12:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466890",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:6'>Comment 6:</a>
Thank you for working on this, but this only prints the message if there are uninstalled homebrew packages. Otherwise, this code gets executed before the message has a chance to be printed:

```
if [ -z "$system_packages" ]; then
    # No command needed to install nothing
    exit 0
fi
```



---

archive/issue_comments_466891.json:
```json
{
    "body": "Replying to [ticket:29504 jhpalmieri]:\n> When homebrew is detected, the \"hints\" at the end of running `./configure` should suggest running the script `.homebrew-build-env`.\n\nIf one sources this file, one would always need to make sure that it is sourced whenever one runs `make` or `sage -b`, right? If so, the hint should mention this. Still, I would probably forget about it sooner or later and end up with a broken build.",
    "created_at": "2020-04-14T16:38:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466891",
    "user": "https://github.com/mwageringel"
}
```

Replying to [ticket:29504 jhpalmieri]:
> When homebrew is detected, the "hints" at the end of running `./configure` should suggest running the script `.homebrew-build-env`.

If one sources this file, one would always need to make sure that it is sourced whenever one runs `make` or `sage -b`, right? If so, the hint should mention this. Still, I would probably forget about it sooner or later and end up with a broken build.



---

archive/issue_comments_466892.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nReplying to [@mwageringel](#comment%3A7):\n> Replying to [ticket:29504 jhpalmieri]:\n> > When homebrew is detected, the \"hints\" at the end of running `./configure` should suggest running the script `.homebrew-build-env`.\n\n> \n> If one sources this file, one would always need to make sure that it is sourced whenever one runs `make` or `sage -b`, right? If so, the hint should mention this. Still, I would probably forget about it sooner or later and end up with a broken build.\n\nAre you suggesting deleting the file altogether, or automatically running it every time?",
    "created_at": "2020-04-14T16:55:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466892",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:8'>Comment 8:</a>
Replying to [@mwageringel](#comment%3A7):
> Replying to [ticket:29504 jhpalmieri]:
> > When homebrew is detected, the "hints" at the end of running `./configure` should suggest running the script `.homebrew-build-env`.

> 
> If one sources this file, one would always need to make sure that it is sourced whenever one runs `make` or `sage -b`, right? If so, the hint should mention this. Still, I would probably forget about it sooner or later and end up with a broken build.

Are you suggesting deleting the file altogether, or automatically running it every time?



---

archive/issue_comments_466893.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nReplying to [@jhpalmieri](#comment%3A8):\n> Are you suggesting deleting the file altogether, or automatically running it every time?\n\nI am not suggesting to delete it, as it is used by the tox system, but, if my understanding is correct, then it certainly seems less error-prone if Sage could be configured to source it during the build process.",
    "created_at": "2020-04-14T17:16:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466893",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:9'>Comment 9:</a>
Replying to [@jhpalmieri](#comment%3A8):
> Are you suggesting deleting the file altogether, or automatically running it every time?

I am not suggesting to delete it, as it is used by the tox system, but, if my understanding is correct, then it certainly seems less error-prone if Sage could be configured to source it during the build process.



---

archive/issue_comments_466894.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec64fb68a864c9fb5ca58432140601c6f6bdb161\">ec64fb6</a></td><td><code>configure: Always output the homebrew env hint on homebrew</code></td></tr></table>\n",
    "created_at": "2020-04-14T20:57:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466894",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:10'>Comment 10:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec64fb68a864c9fb5ca58432140601c6f6bdb161">ec64fb6</a></td><td><code>configure: Always output the homebrew env hint on homebrew</code></td></tr></table>




---

archive/issue_comments_466895.json:
```json
{
    "body": "Changed commit from **[1bb30bf](https://github.com/sagemath/sagetrac-mirror/commit/1bb30bfb69cf269fe1de5d251a4b82c7f23a083c)** to **[ec64fb6](https://github.com/sagemath/sagetrac-mirror/commit/ec64fb68a864c9fb5ca58432140601c6f6bdb161)**",
    "created_at": "2020-04-14T20:57:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466895",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1bb30bf](https://github.com/sagemath/sagetrac-mirror/commit/1bb30bfb69cf269fe1de5d251a4b82c7f23a083c)** to **[ec64fb6](https://github.com/sagemath/sagetrac-mirror/commit/ec64fb68a864c9fb5ca58432140601c6f6bdb161)**



---

archive/issue_comments_466896.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nHow about this version?\n\n```\nconfigure: notice: the following SPKGs did not find equivalent system packages: cbc gp2c libsemigroups ninja_build pari_elldata pari_galpol pari_nftables pari_seadata perl_term_readline_gnu\nchecking for the package system in use... homebrew\nconfigure: hint: installing the following system packages is recommended and may avoid building some of the above SPKGs from source:\nconfigure:   $ brew install ninja\n# Afterwards: \n# To automatically take care of homebrew messages regarding \n# keg-only packages for the current shell session:\n# $ source /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.homebrew-build-env\n# Add this to your shell profile if you want it to persist between shell sessions.\nconfigure: After installation, re-run configure using:\nconfigure:   $ ./config.status --recheck && ./config.status\n```",
    "created_at": "2020-04-14T20:58:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466896",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'>Comment 11:</a>
How about this version?

```
configure: notice: the following SPKGs did not find equivalent system packages: cbc gp2c libsemigroups ninja_build pari_elldata pari_galpol pari_nftables pari_seadata perl_term_readline_gnu
checking for the package system in use... homebrew
configure: hint: installing the following system packages is recommended and may avoid building some of the above SPKGs from source:
configure:   $ brew install ninja
# Afterwards: 
# To automatically take care of homebrew messages regarding 
# keg-only packages for the current shell session:
# $ source /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.homebrew-build-env
# Add this to your shell profile if you want it to persist between shell sessions.
configure: After installation, re-run configure using:
configure:   $ ./config.status --recheck && ./config.status
```



---

archive/issue_comments_466897.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nReplying to [@mwageringel](#comment%3A9):\n> ...  if Sage could be configured to source it during the build process.\n\nI would like to keep all interactions with the system package manager on the level of hints issued to the user.\nThe user should be in charge of their environment.",
    "created_at": "2020-04-14T21:01:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466897",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'>Comment 12:</a>
Replying to [@mwageringel](#comment%3A9):
> ...  if Sage could be configured to source it during the build process.

I would like to keep all interactions with the system package manager on the level of hints issued to the user.
The user should be in charge of their environment.



---

archive/issue_comments_466898.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nMy initial reaction is that this won't work, since I have multiple Sage builds in different directories, but then I realized that the same script `.homebrew-build-env` works in all of those directories at the same time. So this would be fine with me.\n\nThe other option would be that running `source .homebrew-build-env` once would change the configuration so that future builds within that directory would automatically have `PKG_CONFIG_PATH`, etc., keep the same values. I think that's what `@`gh-mwageringel was suggesting.",
    "created_at": "2020-04-14T21:04:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466898",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:13'>Comment 13:</a>
My initial reaction is that this won't work, since I have multiple Sage builds in different directories, but then I realized that the same script `.homebrew-build-env` works in all of those directories at the same time. So this would be fine with me.

The other option would be that running `source .homebrew-build-env` once would change the configuration so that future builds within that directory would automatically have `PKG_CONFIG_PATH`, etc., keep the same values. I think that's what `@`gh-mwageringel was suggesting.



---

archive/issue_comments_466899.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nReplying to [@jhpalmieri](#comment%3A13):\n> The other option would be that running `source .homebrew-build-env` once would change the configuration so that future builds within that directory would automatically have `PKG_CONFIG_PATH`, etc., keep the same values. I think that's what `@`gh-mwageringel was suggesting.\n\nOK, I think this would actually be best handled via #29507 rather than making it homebrew-specific. Something for 9.2.",
    "created_at": "2020-04-14T21:39:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466899",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'>Comment 14:</a>
Replying to [@jhpalmieri](#comment%3A13):
> The other option would be that running `source .homebrew-build-env` once would change the configuration so that future builds within that directory would automatically have `PKG_CONFIG_PATH`, etc., keep the same values. I think that's what `@`gh-mwageringel was suggesting.

OK, I think this would actually be best handled via #29507 rather than making it homebrew-specific. Something for 9.2.



---

archive/issue_comments_466900.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nI would suggest waiting until #29507 is resolved, instead of adding this message now and then possibly changing it after #29507. (But if others feel strongly that it should go in now, I won't object. I like the wording in [comment:11](#comment%3A11).)",
    "created_at": "2020-04-15T02:17:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466900",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:15'>Comment 15:</a>
I would suggest waiting until #29507 is resolved, instead of adding this message now and then possibly changing it after #29507. (But if others feel strongly that it should go in now, I won't object. I like the wording in [comment:11](#comment%3A11).)



---

archive/issue_comments_466901.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nThe only thing that would change with the #29507 is the last sentence; and it won't be a problem if users have already put this line in their shell profiles.\n\nSo I would be in favor of getting this into 9.1. Otherwise, this will be an FAQ on sage-support",
    "created_at": "2020-04-15T02:37:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466901",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'>Comment 16:</a>
The only thing that would change with the #29507 is the last sentence; and it won't be a problem if users have already put this line in their shell profiles.

So I would be in favor of getting this into 9.1. Otherwise, this will be an FAQ on sage-support



---

archive/issue_events_374114.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-15T03:24:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "label": "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29504#event-374114"
}
```



---

archive/issue_events_374115.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-15T03:24:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "label": "https://github.com/sagemath/sage/labels/p1%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29504#event-374115"
}
```



---

archive/issue_comments_466902.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nReplying to [@mkoeppe](#comment%3A16):\n> The only thing that would change with the #29507 is the last sentence; and it won't be a problem if users have already put this line in their shell profiles.\n> \n> So I would be in favor of getting this into 9.1. Otherwise, this will be an FAQ on sage-support\n\nOkay. I think it will still be an FAQ, since people are not in the habit of running `./configure` before running `make`.\n\nI still don't see the message at the end of `./configure`, though, when I have installed all of the recommended packages:\n\n```\n$ ./configure\n...\nconfigure: notice: the following SPKGs did not find equivalent system packages: cbc gp2c libsemigroups pari_elldata pari_galpol pari_nftables pari_seadata perl_term_readline_gnu\nchecking for the package system in use... homebrew\nconfigure: No equivalent system packages for homebrew are known to Sage\n$\n```",
    "created_at": "2020-04-15T17:24:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466902",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:19'>Comment 19:</a>
Replying to [@mkoeppe](#comment%3A16):
> The only thing that would change with the #29507 is the last sentence; and it won't be a problem if users have already put this line in their shell profiles.
> 
> So I would be in favor of getting this into 9.1. Otherwise, this will be an FAQ on sage-support

Okay. I think it will still be an FAQ, since people are not in the habit of running `./configure` before running `make`.

I still don't see the message at the end of `./configure`, though, when I have installed all of the recommended packages:

```
$ ./configure
...
configure: notice: the following SPKGs did not find equivalent system packages: cbc gp2c libsemigroups pari_elldata pari_galpol pari_nftables pari_seadata perl_term_readline_gnu
checking for the package system in use... homebrew
configure: No equivalent system packages for homebrew are known to Sage
$
```



---

archive/issue_comments_466903.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nI tried and saw the message at the end of `./configure`.\n\nBy the way, for some reason I made a `make distclean`, and its first action was to run `./configure`...  and again after typing `make`.",
    "created_at": "2020-04-15T17:28:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466903",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:20'>Comment 20:</a>
I tried and saw the message at the end of `./configure`.

By the way, for some reason I made a `make distclean`, and its first action was to run `./configure`...  and again after typing `make`.



---

archive/issue_comments_466904.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nReplying to [@mkoeppe](#comment%3A12):\n> Replying to [@mwageringel](#comment%3A9):\n> > ...  if Sage could be configured to source it during the build process.\n\n> \n> I would like to keep all interactions with the system package manager on the level of hints issued to the user.\n> The user should be in charge of their environment.\n\nOk, fair enough. The new message is better indeed. Adding the `source` statement to one's shell profile has the potential to cause problems when compiling things outside of Sage I believe, as there must be a reason these packages are keg-only, so hopefully only users who understand the consequences of that (not me) do that.",
    "created_at": "2020-04-15T17:41:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466904",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:21'>Comment 21:</a>
Replying to [@mkoeppe](#comment%3A12):
> Replying to [@mwageringel](#comment%3A9):
> > ...  if Sage could be configured to source it during the build process.

> 
> I would like to keep all interactions with the system package manager on the level of hints issued to the user.
> The user should be in charge of their environment.

Ok, fair enough. The new message is better indeed. Adding the `source` statement to one's shell profile has the potential to cause problems when compiling things outside of Sage I believe, as there must be a reason these packages are keg-only, so hopefully only users who understand the consequences of that (not me) do that.



---

archive/issue_comments_466905.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nReplying to [@dcoudert](#comment%3A20):\n> By the way, for some reason I made a `make distclean`, and its first action was to run `./configure`...  and again after typing `make`.\n\nWe have two tickets for reducing the number of times that `configure` gets run: #29460 (Run configure less often) and #29310 (\"make distclean\" should not run \"./configure\")",
    "created_at": "2020-04-15T17:47:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466905",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:22'>Comment 22:</a>
Replying to [@dcoudert](#comment%3A20):
> By the way, for some reason I made a `make distclean`, and its first action was to run `./configure`...  and again after typing `make`.

We have two tickets for reducing the number of times that `configure` gets run: #29460 (Run configure less often) and #29310 ("make distclean" should not run "./configure")



---

archive/issue_comments_466906.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nThank you so much ! :))",
    "created_at": "2020-04-15T17:49:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466906",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:23'>Comment 23:</a>
Thank you so much ! :))



---

archive/issue_comments_466907.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nReplying to [@jhpalmieri](#comment%3A19):\n> I still don't see the message at the end of `./configure`, though, when I have installed all of the recommended packages:\n\nRight, sorry, there's one more place to fix",
    "created_at": "2020-04-15T17:49:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466907",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'>Comment 24:</a>
Replying to [@jhpalmieri](#comment%3A19):
> I still don't see the message at the end of `./configure`, though, when I have installed all of the recommended packages:

Right, sorry, there's one more place to fix



---

archive/issue_comments_466908.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nwhat is this `gettext` in `for l in gettext; do` in `.homebrew-build-env` ?\nI'm confused.",
    "created_at": "2020-04-15T17:50:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466908",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:25'>Comment 25:</a>
what is this `gettext` in `for l in gettext; do` in `.homebrew-build-env` ?
I'm confused.



---

archive/issue_comments_466909.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nReplying to [@dimpase](#comment%3A25):\n> what is this `gettext` in `for l in gettext; do` in `.homebrew-build-env` ?\n> I'm confused.\n\nThe loop runs once with `l` equal to `\"gettext\"`, right? I assume it's written like this in case more packages eventually need to be treated the same way.",
    "created_at": "2020-04-15T17:52:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466909",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:26'>Comment 26:</a>
Replying to [@dimpase](#comment%3A25):
> what is this `gettext` in `for l in gettext; do` in `.homebrew-build-env` ?
> I'm confused.

The loop runs once with `l` equal to `"gettext"`, right? I assume it's written like this in case more packages eventually need to be treated the same way.



---

archive/issue_comments_466910.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nReplying to [@jhpalmieri](#comment%3A26):\n> Replying to [@dimpase](#comment%3A25):\n> > what is this `gettext` in `for l in gettext; do` in `.homebrew-build-env` ?\n> > I'm confused.\n\n> \n> The loop runs once with `l` equal to `\"gettext\"`, right? I assume it's written like this in case more packages eventually need to be treated the same way.\n\nThat's right.",
    "created_at": "2020-04-15T17:53:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466910",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'>Comment 27:</a>
Replying to [@jhpalmieri](#comment%3A26):
> Replying to [@dimpase](#comment%3A25):
> > what is this `gettext` in `for l in gettext; do` in `.homebrew-build-env` ?
> > I'm confused.

> 
> The loop runs once with `l` equal to `"gettext"`, right? I assume it's written like this in case more packages eventually need to be treated the same way.

That's right.



---

archive/issue_comments_466911.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nReplying to [@jhpalmieri](#comment%3A19):\n> I still don't see the message at the end of `./configure`, though, when I have installed all of the recommended packages:\n> \n> ```\n> $ ./configure\n> ...\n> configure: notice: the following SPKGs did not find equivalent system packages: cbc gp2c libsemigroups pari_elldata pari_galpol pari_nftables pari_seadata perl_term_readline_gnu\n> checking for the package system in use... homebrew\n> configure: No equivalent system packages for homebrew are known to Sage\n> $\n> ```\n\nWait... why do you want to see a message here? Everything is in order",
    "created_at": "2020-04-15T17:54:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466911",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:28'>Comment 28:</a>
Replying to [@jhpalmieri](#comment%3A19):
> I still don't see the message at the end of `./configure`, though, when I have installed all of the recommended packages:
> 
> ```
> $ ./configure
> ...
> configure: notice: the following SPKGs did not find equivalent system packages: cbc gp2c libsemigroups pari_elldata pari_galpol pari_nftables pari_seadata perl_term_readline_gnu
> checking for the package system in use... homebrew
> configure: No equivalent system packages for homebrew are known to Sage
> $
> ```

Wait... why do you want to see a message here? Everything is in order



---

archive/issue_comments_466912.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nReplying to [@mkoeppe](#comment%3A27):\n> Replying to [@jhpalmieri](#comment%3A26):\n> > Replying to [@dimpase](#comment%3A25):\n> > > what is this `gettext` in `for l in gettext; do` in `.homebrew-build-env` ?\n> > > I'm confused.\n\n> > \n> > The loop runs once with `l` equal to `\"gettext\"`, right? I assume it's written like this in case more packages eventually need to be treated the same way.\n\n> That's right.\n\nthanks. That was too creative for me :-)",
    "created_at": "2020-04-15T17:59:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466912",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:29'>Comment 29:</a>
Replying to [@mkoeppe](#comment%3A27):
> Replying to [@jhpalmieri](#comment%3A26):
> > Replying to [@dimpase](#comment%3A25):
> > > what is this `gettext` in `for l in gettext; do` in `.homebrew-build-env` ?
> > > I'm confused.

> > 
> > The loop runs once with `l` equal to `"gettext"`, right? I assume it's written like this in case more packages eventually need to be treated the same way.

> That's right.

thanks. That was too creative for me :-)



---

archive/issue_comments_466913.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nReplying to [@jhpalmieri](#comment%3A19):\n> I think it will still be an FAQ, since people are not in the habit of running `./configure` before running `make`.\n\nWell, we could do #29316 (Require ./configure before make)...\n\nAt least we should make sure that `./configure` appears in all build instructions. We changed some in #29496 (Update README.md and Installation Guide) already, but there are more",
    "created_at": "2020-04-15T18:01:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466913",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:30'>Comment 30:</a>
Replying to [@jhpalmieri](#comment%3A19):
> I think it will still be an FAQ, since people are not in the habit of running `./configure` before running `make`.

Well, we could do #29316 (Require ./configure before make)...

At least we should make sure that `./configure` appears in all build instructions. We changed some in #29496 (Update README.md and Installation Guide) already, but there are more



---

archive/issue_comments_466914.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\nReplying to [@mkoeppe](#comment%3A28):\n> Wait... why do you want to see a message here? Everything is in order\n\nThat's a fair question. Maybe I don't need to see the message? Are we convinced that if `./configure` finds everything, then all of Sage's packages will also find everything? (It turns out that I had run `source .homebrew-...` earlier in that shell session, which is why `./configure` was happy.)\n\nA minor point: when I see the message, I see\n\n```\n# Afterwards: \n# To automatically take care of homebrew messages regarding \n# keg-only packages for the current shell session:\n# $ source ./.homebrew-build-env\n# Add this to your shell profile if you want it to persist between shell sessions.\n```\nIt would be nice if it gave an absolute path so I could cut and paste it into my shell profile. But this is not a big deal: someone who has been installing homebrew packages probably knows enough to change this. But would this change be helpful?\n\n```diff\ndiff --git a/build/bin/sage-print-system-package-command b/build/bin/sage-print-system-package-command\nindex 7802d447df..ee3d3c0c5b 100755\n--- a/build/bin/sage-print-system-package-command\n+++ b/build/bin/sage-print-system-package-command\n@@ -45,7 +45,7 @@ case $system:$command in\n     homebrew*:install)\n         echo \"# To automatically take care of homebrew messages regarding \"\n         echo \"# keg-only packages for the current shell session:\"\n-        [ -n \"$SAGE_ROOT\" ] || SAGE_ROOT=.\n+        [ -n \"$SAGE_ROOT\" ] || SAGE_ROOT=`pwd`\n         echo \"# $ source $SAGE_ROOT/.homebrew-build-env\"\n         echo \"# Add this to your shell profile if you want it to persist between shell sessions.\"\n         ;;\n```",
    "created_at": "2020-04-15T18:19:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466914",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:31'>Comment 31:</a>
Replying to [@mkoeppe](#comment%3A28):
> Wait... why do you want to see a message here? Everything is in order

That's a fair question. Maybe I don't need to see the message? Are we convinced that if `./configure` finds everything, then all of Sage's packages will also find everything? (It turns out that I had run `source .homebrew-...` earlier in that shell session, which is why `./configure` was happy.)

A minor point: when I see the message, I see

```
# Afterwards: 
# To automatically take care of homebrew messages regarding 
# keg-only packages for the current shell session:
# $ source ./.homebrew-build-env
# Add this to your shell profile if you want it to persist between shell sessions.
```
It would be nice if it gave an absolute path so I could cut and paste it into my shell profile. But this is not a big deal: someone who has been installing homebrew packages probably knows enough to change this. But would this change be helpful?

```diff
diff --git a/build/bin/sage-print-system-package-command b/build/bin/sage-print-system-package-command
index 7802d447df..ee3d3c0c5b 100755
--- a/build/bin/sage-print-system-package-command
+++ b/build/bin/sage-print-system-package-command
@@ -45,7 +45,7 @@ case $system:$command in
     homebrew*:install)
         echo "# To automatically take care of homebrew messages regarding "
         echo "# keg-only packages for the current shell session:"
-        [ -n "$SAGE_ROOT" ] || SAGE_ROOT=.
+        [ -n "$SAGE_ROOT" ] || SAGE_ROOT=`pwd`
         echo "# $ source $SAGE_ROOT/.homebrew-build-env"
         echo "# Add this to your shell profile if you want it to persist between shell sessions."
         ;;
```



---

archive/issue_comments_466915.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nReplying to [@jhpalmieri](#comment%3A31):\n> A minor point: when I see the message, I see\n> \n> ```\n> # Afterwards: \n> # To automatically take care of homebrew messages regarding \n> # keg-only packages for the current shell session:\n> # $ source ./.homebrew-build-env\n> # Add this to your shell profile if you want it to persist between shell sessions.\n> ```\n> It would be nice if it gave an absolute path so I could cut and paste it into my shell profile. But this is not a big deal: someone who has been installing homebrew packages probably knows enough to change this. But would this change be helpful?\n\nDid you run bootstrap? There is already a change that does that",
    "created_at": "2020-04-15T18:49:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466915",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:32'>Comment 32:</a>
Replying to [@jhpalmieri](#comment%3A31):
> A minor point: when I see the message, I see
> 
> ```
> # Afterwards: 
> # To automatically take care of homebrew messages regarding 
> # keg-only packages for the current shell session:
> # $ source ./.homebrew-build-env
> # Add this to your shell profile if you want it to persist between shell sessions.
> ```
> It would be nice if it gave an absolute path so I could cut and paste it into my shell profile. But this is not a big deal: someone who has been installing homebrew packages probably knows enough to change this. But would this change be helpful?

Did you run bootstrap? There is already a change that does that



---

archive/issue_comments_466916.json:
```json
{
    "body": "<a id='comment:33'>Comment 33:</a>\nRunning bootstrap fixes it. When does that need to be run? The only information I see says to run it if `./configure` doesn't exist.",
    "created_at": "2020-04-15T18:56:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466916",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:33'>Comment 33:</a>
Running bootstrap fixes it. When does that need to be run? The only information I see says to run it if `./configure` doesn't exist.



---

archive/issue_comments_466917.json:
```json
{
    "body": "<a id='comment:34'>Comment 34:</a>\nReplying to [@jhpalmieri](#comment%3A31):\n> Replying to [@mkoeppe](#comment%3A28):\n> > Wait... why do you want to see a message here? Everything is in order\n\n> \n> That's a fair question. Maybe I don't need to see the message? Are we convinced that if `./configure` finds everything, then all of Sage's packages will also find everything? \n\nThis strong statement is not true because of #29448 (configure finds libpng but matplotlib does not) and perhaps also #27205 (Sage ignores libs from pkgconfig).\n\nBut a weaker statement is true: The set of settings that I make in `.homebrew-build-env` is minimal so that configure finds everything.",
    "created_at": "2020-04-15T18:58:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466917",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:34'>Comment 34:</a>
Replying to [@jhpalmieri](#comment%3A31):
> Replying to [@mkoeppe](#comment%3A28):
> > Wait... why do you want to see a message here? Everything is in order

> 
> That's a fair question. Maybe I don't need to see the message? Are we convinced that if `./configure` finds everything, then all of Sage's packages will also find everything? 

This strong statement is not true because of #29448 (configure finds libpng but matplotlib does not) and perhaps also #27205 (Sage ignores libs from pkgconfig).

But a weaker statement is true: The set of settings that I make in `.homebrew-build-env` is minimal so that configure finds everything.



---

archive/issue_comments_466918.json:
```json
{
    "body": "<a id='comment:35'>Comment 35:</a>\nReplying to [@jhpalmieri](#comment%3A33):\n> Running bootstrap fixes it. When does that need to be run? The only information I see says to run it if `./configure` doesn't exist.\n\nYou only need to run it on the ticket because the configure tarball is not current.",
    "created_at": "2020-04-15T18:58:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466918",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:35'>Comment 35:</a>
Replying to [@jhpalmieri](#comment%3A33):
> Running bootstrap fixes it. When does that need to be run? The only information I see says to run it if `./configure` doesn't exist.

You only need to run it on the ticket because the configure tarball is not current.



---

archive/issue_comments_466919.json:
```json
{
    "body": "<a id='comment:36'>Comment 36:</a>\nOkay, let's proceed with this. Thank you for being so patient with all of my questions.",
    "created_at": "2020-04-15T19:28:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466919",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:36'>Comment 36:</a>
Okay, let's proceed with this. Thank you for being so patient with all of my questions.



---

archive/issue_events_374116.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2020-04-15T19:28:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29504#event-374116"
}
```



---

archive/issue_events_374117.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2020-04-15T19:28:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29504#event-374117"
}
```



---

archive/issue_comments_466920.json:
```json
{
    "body": "Reviewer: **John Palmieri**",
    "created_at": "2020-04-15T19:28:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466920",
    "user": "https://github.com/jhpalmieri"
}
```

Reviewer: **John Palmieri**



---

archive/issue_comments_466921.json:
```json
{
    "body": "<a id='comment:38'>Comment 38:</a>\nThank you!",
    "created_at": "2020-04-15T21:00:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466921",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:38'>Comment 38:</a>
Thank you!



---

archive/issue_comments_466922.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/__configure___homebrew__recommend_the_script__homebrew_build_env](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/__configure___homebrew__recommend_the_script__homebrew_build_env)** to **[ec64fb6](https://github.com/sagemath/sagetrac-mirror/commit/ec64fb68a864c9fb5ca58432140601c6f6bdb161)**",
    "created_at": "2020-04-16T22:33:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-466922",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/__configure___homebrew__recommend_the_script__homebrew_build_env](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/__configure___homebrew__recommend_the_script__homebrew_build_env)** to **[ec64fb6](https://github.com/sagemath/sagetrac-mirror/commit/ec64fb68a864c9fb5ca58432140601c6f6bdb161)**



---

archive/issue_events_374118.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-16T22:33:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29504#event-374118"
}
```



---

archive/issue_events_374119.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "47960151f14dd49a7bedf7ec6e6c2a6fce3c4534",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-04-16T22:33:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29504#event-374119"
}
```
