# Issue 29504: ./configure + homebrew: recommend the script .homebrew-build-env

archive/issues_029267.json:
```json
{
    "assignees": [],
    "body": "When homebrew is detected, the \"hints\" at the end of running `./configure` should suggest running the script `.homebrew-build-env`.\n\n[Marking it as critical because it has the potential of reducing the number of support questions for release 9.1]\n\nCC:  @mkoeppe @dimpase @dcoudert\n\nBranch/Commit: **[`ec64fb6`](https://github.com/sagemath/sagetrac-mirror/commit/ec64fb68a864c9fb5ca58432140601c6f6bdb161)**\n\nReviewer: **John Palmieri**\n\nAuthor: **Matthias Koeppe**\n\nComponent: **build: configure**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29504_\n\n",
    "closed_at": "2020-04-16T22:33:39Z",
    "created_at": "2020-04-13T21:15:10Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build%3A%20configure",
        "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "./configure + homebrew: recommend the script .homebrew-build-env",
    "type": "issue",
    "updated_at": "2020-04-16T22:33:39Z",
    "url": "https://github.com/sagemath/sage/issues/29504",
    "user": "https://github.com/jhpalmieri"
}
```
When homebrew is detected, the "hints" at the end of running `./configure` should suggest running the script `.homebrew-build-env`.

[Marking it as critical because it has the potential of reducing the number of support questions for release 9.1]

CC:  @mkoeppe @dimpase @dcoudert

Branch/Commit: **[`ec64fb6`](https://github.com/sagemath/sagetrac-mirror/commit/ec64fb68a864c9fb5ca58432140601c6f6bdb161)**

Reviewer: **John Palmieri**

Author: **Matthias Koeppe**

Component: **build: configure**

_Issue created by migration from https://trac.sagemath.org/ticket/29504_





---

archive/issue_events_402760.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2020-04-13T21:15:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29504#event-402760"
}
```



---

archive/issue_events_402761.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2020-04-13T21:15:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build%3A%20configure",
    "label_color": "0000b0",
    "label_name": "c: build: configure",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29504#event-402761"
}
```



---

archive/issue_events_402762.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2020-04-13T21:15:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29504#event-402762"
}
```



---

archive/issue_events_402763.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2020-04-13T21:15:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29504#event-402763"
}
```



---

archive/issue_comments_463836.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nQuestions: \n\n- should `.homebrew-build-env` have a `#!...` line at the top?\n- with zsh, the new default shell on OS X, `. .homebrew-build-env` fails, but `source .homebrew-build-env` works. Do we always suggest `source .homebrew...`, or is there a reason to suggest `. .homebrew...`, for example when using bash? With zsh:\n\n```\n% . .homebrew-build-env     \n.: no such file or directory: .homebrew-build-env\n```\n I guess in zsh, the correct invocation with `.` would be `. ./.homebrew-...`: you have to specify the path.",
    "created_at": "2020-04-13T21:22:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463836",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:1" align="right">comment:1</div>

Questions: 

- should `.homebrew-build-env` have a `#!...` line at the top?
- with zsh, the new default shell on OS X, `. .homebrew-build-env` fails, but `source .homebrew-build-env` works. Do we always suggest `source .homebrew...`, or is there a reason to suggest `. .homebrew...`, for example when using bash? With zsh:

```
% . .homebrew-build-env     
.: no such file or directory: .homebrew-build-env
```
 I guess in zsh, the correct invocation with `.` would be `. ./.homebrew-...`: you have to specify the path.



---

archive/issue_comments_463837.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nReplying to [@jhpalmieri](#comment%3A1):\n> Questions: \n> \n> - should `.homebrew-build-env` have a `#!...` line at the top?\n> - with zsh, the new default shell on OS X, `. .homebrew-build-env` fails, but `source .homebrew-build-env` works. Do we always suggest `source .homebrew...`, or is there a reason to suggest `. .homebrew...`, for example when using bash? With zsh:\n> \n> ```\n> % . .homebrew-build-env     \n> .: no such file or directory: .homebrew-build-env\n> ```\n>  I guess in zsh, the correct invocation with `.` would be `. ./.homebrew-...`: you have to specify the path.\n\nGood idea. We should recommend `source ./.homebrew-build-env` then.\n\nNo `#!` because it must be sourced, not executed",
    "created_at": "2020-04-13T23:31:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463837",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2" align="right">comment:2</div>

Replying to [@jhpalmieri](#comment%3A1):
> Questions: 
> 
> - should `.homebrew-build-env` have a `#!...` line at the top?
> - with zsh, the new default shell on OS X, `. .homebrew-build-env` fails, but `source .homebrew-build-env` works. Do we always suggest `source .homebrew...`, or is there a reason to suggest `. .homebrew...`, for example when using bash? With zsh:
> 
> ```
> % . .homebrew-build-env     
> .: no such file or directory: .homebrew-build-env
> ```
>  I guess in zsh, the correct invocation with `.` would be `. ./.homebrew-...`: you have to specify the path.

Good idea. We should recommend `source ./.homebrew-build-env` then.

No `#!` because it must be sourced, not executed



---

archive/issue_comments_463838.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nReferences: \n\n_ environment variables - What is the difference between '.' and 'source' in shells? - Unix & Linux Stack Exchange\nhttps://unix.stackexchange.com/questions/58514/what-is-the-difference-between-and-source-in-shells\n\nbash - running script with \". \" and with \"source \" - Unix & Linux Stack Exchange\nhttps://unix.stackexchange.com/questions/17815/running-script-with-and-with-source",
    "created_at": "2020-04-13T23:38:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463838",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3" align="right">comment:3</div>

References: 

_ environment variables - What is the difference between '.' and 'source' in shells? - Unix & Linux Stack Exchange
https://unix.stackexchange.com/questions/58514/what-is-the-difference-between-and-source-in-shells

bash - running script with ". " and with "source " - Unix & Linux Stack Exchange
https://unix.stackexchange.com/questions/17815/running-script-with-and-with-source



---

archive/issue_comments_463839.json:
```json
{
    "body": "Branch: **[u/mkoeppe/__configure___homebrew__recommend_the_script__homebrew_build_env](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/__configure___homebrew__recommend_the_script__homebrew_build_env)**",
    "created_at": "2020-04-14T00:08:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463839",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/__configure___homebrew__recommend_the_script__homebrew_build_env](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/__configure___homebrew__recommend_the_script__homebrew_build_env)**



---

archive/issue_events_402764.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T00:09:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29504#event-402764"
}
```



---

archive/issue_comments_463840.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1bb30bfb69cf269fe1de5d251a4b82c7f23a083c\"><code>1bb30bf</code></a></td><td><code>build/bin/sage-print-system-package-command [homebrew]: Advertise .homebrew-build-env</code></td></tr></table>\n",
    "created_at": "2020-04-14T00:09:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463840",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:5"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1bb30bfb69cf269fe1de5d251a4b82c7f23a083c"><code>1bb30bf</code></a></td><td><code>build/bin/sage-print-system-package-command [homebrew]: Advertise .homebrew-build-env</code></td></tr></table>




---

archive/issue_comments_463841.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2020-04-14T00:09:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463841",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_events_402765.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T00:09:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29504#event-402765"
}
```



---

archive/issue_events_402766.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T00:09:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
    "label_color": "ff7700",
    "label_name": "p: critical / 2",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29504#event-402766"
}
```



---

archive/issue_comments_463842.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,3 @@\n When homebrew is detected, the \"hints\" at the end of running `./configure` should suggest running the script `.homebrew-build-env`.\n \n+[Marking it as critical because it has the potential of reducing the number of support questions for release 9.1]\n``````\n",
    "created_at": "2020-04-14T00:09:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463842",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,3 @@
 When homebrew is detected, the "hints" at the end of running `./configure` should suggest running the script `.homebrew-build-env`.
 
+[Marking it as critical because it has the potential of reducing the number of support questions for release 9.1]
``````




---

archive/issue_comments_463843.json:
```json
{
    "body": "Commit: **[`1bb30bf`](https://github.com/sagemath/sagetrac-mirror/commit/1bb30bfb69cf269fe1de5d251a4b82c7f23a083c)**",
    "created_at": "2020-04-14T00:09:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463843",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`1bb30bf`](https://github.com/sagemath/sagetrac-mirror/commit/1bb30bfb69cf269fe1de5d251a4b82c7f23a083c)**



---

archive/issue_comments_463844.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThank you for working on this, but this only prints the message if there are uninstalled homebrew packages. Otherwise, this code gets executed before the message has a chance to be printed:\n\n```\nif [ -z \"$system_packages\" ]; then\n    # No command needed to install nothing\n    exit 0\nfi\n```",
    "created_at": "2020-04-14T02:12:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463844",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:6" align="right">comment:6</div>

Thank you for working on this, but this only prints the message if there are uninstalled homebrew packages. Otherwise, this code gets executed before the message has a chance to be printed:

```
if [ -z "$system_packages" ]; then
    # No command needed to install nothing
    exit 0
fi
```



---

archive/issue_comments_463845.json:
```json
{
    "body": "Replying to [ticket:29504 jhpalmieri]:\n> When homebrew is detected, the \"hints\" at the end of running `./configure` should suggest running the script `.homebrew-build-env`.\n\nIf one sources this file, one would always need to make sure that it is sourced whenever one runs `make` or `sage -b`, right? If so, the hint should mention this. Still, I would probably forget about it sooner or later and end up with a broken build.",
    "created_at": "2020-04-14T16:38:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463845",
    "user": "https://github.com/mwageringel"
}
```

Replying to [ticket:29504 jhpalmieri]:
> When homebrew is detected, the "hints" at the end of running `./configure` should suggest running the script `.homebrew-build-env`.

If one sources this file, one would always need to make sure that it is sourced whenever one runs `make` or `sage -b`, right? If so, the hint should mention this. Still, I would probably forget about it sooner or later and end up with a broken build.



---

archive/issue_comments_463846.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@mwageringel](#comment%3A7):\n> Replying to [ticket:29504 jhpalmieri]:\n> > When homebrew is detected, the \"hints\" at the end of running `./configure` should suggest running the script `.homebrew-build-env`.\n\n> \n> If one sources this file, one would always need to make sure that it is sourced whenever one runs `make` or `sage -b`, right? If so, the hint should mention this. Still, I would probably forget about it sooner or later and end up with a broken build.\n\nAre you suggesting deleting the file altogether, or automatically running it every time?",
    "created_at": "2020-04-14T16:55:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463846",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@mwageringel](#comment%3A7):
> Replying to [ticket:29504 jhpalmieri]:
> > When homebrew is detected, the "hints" at the end of running `./configure` should suggest running the script `.homebrew-build-env`.

> 
> If one sources this file, one would always need to make sure that it is sourced whenever one runs `make` or `sage -b`, right? If so, the hint should mention this. Still, I would probably forget about it sooner or later and end up with a broken build.

Are you suggesting deleting the file altogether, or automatically running it every time?



---

archive/issue_comments_463847.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@jhpalmieri](#comment%3A8):\n> Are you suggesting deleting the file altogether, or automatically running it every time?\n\nI am not suggesting to delete it, as it is used by the tox system, but, if my understanding is correct, then it certainly seems less error-prone if Sage could be configured to source it during the build process.",
    "created_at": "2020-04-14T17:16:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463847",
    "user": "https://github.com/mwageringel"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@jhpalmieri](#comment%3A8):
> Are you suggesting deleting the file altogether, or automatically running it every time?

I am not suggesting to delete it, as it is used by the tox system, but, if my understanding is correct, then it certainly seems less error-prone if Sage could be configured to source it during the build process.



---

archive/issue_comments_463848.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec64fb68a864c9fb5ca58432140601c6f6bdb161\"><code>ec64fb6</code></a></td><td><code>configure: Always output the homebrew env hint on homebrew</code></td></tr></table>\n",
    "created_at": "2020-04-14T20:57:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463848",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec64fb68a864c9fb5ca58432140601c6f6bdb161"><code>ec64fb6</code></a></td><td><code>configure: Always output the homebrew env hint on homebrew</code></td></tr></table>




---

archive/issue_comments_463849.json:
```json
{
    "body": "Changed commit from **[`1bb30bf`](https://github.com/sagemath/sagetrac-mirror/commit/1bb30bfb69cf269fe1de5d251a4b82c7f23a083c)** to **[`ec64fb6`](https://github.com/sagemath/sagetrac-mirror/commit/ec64fb68a864c9fb5ca58432140601c6f6bdb161)**",
    "created_at": "2020-04-14T20:57:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463849",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1bb30bf`](https://github.com/sagemath/sagetrac-mirror/commit/1bb30bfb69cf269fe1de5d251a4b82c7f23a083c)** to **[`ec64fb6`](https://github.com/sagemath/sagetrac-mirror/commit/ec64fb68a864c9fb5ca58432140601c6f6bdb161)**



---

archive/issue_comments_463850.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nHow about this version?\n\n```\nconfigure: notice: the following SPKGs did not find equivalent system packages: cbc gp2c libsemigroups ninja_build pari_elldata pari_galpol pari_nftables pari_seadata perl_term_readline_gnu\nchecking for the package system in use... homebrew\nconfigure: hint: installing the following system packages is recommended and may avoid building some of the above SPKGs from source:\nconfigure:   $ brew install ninja\n# Afterwards: \n# To automatically take care of homebrew messages regarding \n# keg-only packages for the current shell session:\n# $ source /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.homebrew-build-env\n# Add this to your shell profile if you want it to persist between shell sessions.\nconfigure: After installation, re-run configure using:\nconfigure:   $ ./config.status --recheck && ./config.status\n```",
    "created_at": "2020-04-14T20:58:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463850",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:11" align="right">comment:11</div>

How about this version?

```
configure: notice: the following SPKGs did not find equivalent system packages: cbc gp2c libsemigroups ninja_build pari_elldata pari_galpol pari_nftables pari_seadata perl_term_readline_gnu
checking for the package system in use... homebrew
configure: hint: installing the following system packages is recommended and may avoid building some of the above SPKGs from source:
configure:   $ brew install ninja
# Afterwards: 
# To automatically take care of homebrew messages regarding 
# keg-only packages for the current shell session:
# $ source /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.homebrew-build-env
# Add this to your shell profile if you want it to persist between shell sessions.
configure: After installation, re-run configure using:
configure:   $ ./config.status --recheck && ./config.status
```



---

archive/issue_comments_463851.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@mwageringel](#comment%3A9):\n> ...  if Sage could be configured to source it during the build process.\n\nI would like to keep all interactions with the system package manager on the level of hints issued to the user.\nThe user should be in charge of their environment.",
    "created_at": "2020-04-14T21:01:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463851",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@mwageringel](#comment%3A9):
> ...  if Sage could be configured to source it during the build process.

I would like to keep all interactions with the system package manager on the level of hints issued to the user.
The user should be in charge of their environment.



---

archive/issue_comments_463852.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nMy initial reaction is that this won't work, since I have multiple Sage builds in different directories, but then I realized that the same script `.homebrew-build-env` works in all of those directories at the same time. So this would be fine with me.\n\nThe other option would be that running `source .homebrew-build-env` once would change the configuration so that future builds within that directory would automatically have `PKG_CONFIG_PATH`, etc., keep the same values. I think that's what @mwageringel was suggesting.",
    "created_at": "2020-04-14T21:04:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463852",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:13" align="right">comment:13</div>

My initial reaction is that this won't work, since I have multiple Sage builds in different directories, but then I realized that the same script `.homebrew-build-env` works in all of those directories at the same time. So this would be fine with me.

The other option would be that running `source .homebrew-build-env` once would change the configuration so that future builds within that directory would automatically have `PKG_CONFIG_PATH`, etc., keep the same values. I think that's what @mwageringel was suggesting.



---

archive/issue_comments_463853.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@jhpalmieri](#comment%3A13):\n> The other option would be that running `source .homebrew-build-env` once would change the configuration so that future builds within that directory would automatically have `PKG_CONFIG_PATH`, etc., keep the same values. I think that's what @mwageringel was suggesting.\n\nOK, I think this would actually be best handled via #29507 rather than making it homebrew-specific. Something for 9.2.",
    "created_at": "2020-04-14T21:39:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463853",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@jhpalmieri](#comment%3A13):
> The other option would be that running `source .homebrew-build-env` once would change the configuration so that future builds within that directory would automatically have `PKG_CONFIG_PATH`, etc., keep the same values. I think that's what @mwageringel was suggesting.

OK, I think this would actually be best handled via #29507 rather than making it homebrew-specific. Something for 9.2.



---

archive/issue_comments_463854.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nI would suggest waiting until #29507 is resolved, instead of adding this message now and then possibly changing it after #29507. (But if others feel strongly that it should go in now, I won't object. I like the wording in [comment:11](#comment%3A11).)",
    "created_at": "2020-04-15T02:17:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463854",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:15" align="right">comment:15</div>

I would suggest waiting until #29507 is resolved, instead of adding this message now and then possibly changing it after #29507. (But if others feel strongly that it should go in now, I won't object. I like the wording in [comment:11](#comment%3A11).)



---

archive/issue_comments_463855.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nThe only thing that would change with the #29507 is the last sentence; and it won't be a problem if users have already put this line in their shell profiles.\n\nSo I would be in favor of getting this into 9.1. Otherwise, this will be an FAQ on sage-support",
    "created_at": "2020-04-15T02:37:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463855",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:16" align="right">comment:16</div>

The only thing that would change with the #29507 is the last sentence; and it won't be a problem if users have already put this line in their shell profiles.

So I would be in favor of getting this into 9.1. Otherwise, this will be an FAQ on sage-support



---

archive/issue_events_402767.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-15T03:24:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
    "label_color": "ff7700",
    "label_name": "p: critical / 2",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29504#event-402767"
}
```



---

archive/issue_events_402768.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-15T03:24:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
    "label_color": "ff0000",
    "label_name": "p: blocker / 1",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29504#event-402768"
}
```



---

archive/issue_comments_463856.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@mkoeppe](#comment%3A16):\n> The only thing that would change with the #29507 is the last sentence; and it won't be a problem if users have already put this line in their shell profiles.\n> \n> So I would be in favor of getting this into 9.1. Otherwise, this will be an FAQ on sage-support\n\nOkay. I think it will still be an FAQ, since people are not in the habit of running `./configure` before running `make`.\n\nI still don't see the message at the end of `./configure`, though, when I have installed all of the recommended packages:\n\n```\n$ ./configure\n...\nconfigure: notice: the following SPKGs did not find equivalent system packages: cbc gp2c libsemigroups pari_elldata pari_galpol pari_nftables pari_seadata perl_term_readline_gnu\nchecking for the package system in use... homebrew\nconfigure: No equivalent system packages for homebrew are known to Sage\n$\n```",
    "created_at": "2020-04-15T17:24:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463856",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@mkoeppe](#comment%3A16):
> The only thing that would change with the #29507 is the last sentence; and it won't be a problem if users have already put this line in their shell profiles.
> 
> So I would be in favor of getting this into 9.1. Otherwise, this will be an FAQ on sage-support

Okay. I think it will still be an FAQ, since people are not in the habit of running `./configure` before running `make`.

I still don't see the message at the end of `./configure`, though, when I have installed all of the recommended packages:

```
$ ./configure
...
configure: notice: the following SPKGs did not find equivalent system packages: cbc gp2c libsemigroups pari_elldata pari_galpol pari_nftables pari_seadata perl_term_readline_gnu
checking for the package system in use... homebrew
configure: No equivalent system packages for homebrew are known to Sage
$
```



---

archive/issue_comments_463857.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nI tried and saw the message at the end of `./configure`.\n\nBy the way, for some reason I made a `make distclean`, and its first action was to run `./configure`...  and again after typing `make`.",
    "created_at": "2020-04-15T17:28:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463857",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:20" align="right">comment:20</div>

I tried and saw the message at the end of `./configure`.

By the way, for some reason I made a `make distclean`, and its first action was to run `./configure`...  and again after typing `make`.



---

archive/issue_comments_463858.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@mkoeppe](#comment%3A12):\n> Replying to [@mwageringel](#comment%3A9):\n> > ...  if Sage could be configured to source it during the build process.\n\n> \n> I would like to keep all interactions with the system package manager on the level of hints issued to the user.\n> The user should be in charge of their environment.\n\nOk, fair enough. The new message is better indeed. Adding the `source` statement to one's shell profile has the potential to cause problems when compiling things outside of Sage I believe, as there must be a reason these packages are keg-only, so hopefully only users who understand the consequences of that (not me) do that.",
    "created_at": "2020-04-15T17:41:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463858",
    "user": "https://github.com/mwageringel"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@mkoeppe](#comment%3A12):
> Replying to [@mwageringel](#comment%3A9):
> > ...  if Sage could be configured to source it during the build process.

> 
> I would like to keep all interactions with the system package manager on the level of hints issued to the user.
> The user should be in charge of their environment.

Ok, fair enough. The new message is better indeed. Adding the `source` statement to one's shell profile has the potential to cause problems when compiling things outside of Sage I believe, as there must be a reason these packages are keg-only, so hopefully only users who understand the consequences of that (not me) do that.



---

archive/issue_comments_463859.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@dcoudert](#comment%3A20):\n> By the way, for some reason I made a `make distclean`, and its first action was to run `./configure`...  and again after typing `make`.\n\nWe have two tickets for reducing the number of times that `configure` gets run: #29460 (Run configure less often) and #29310 (\"make distclean\" should not run \"./configure\")",
    "created_at": "2020-04-15T17:47:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463859",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@dcoudert](#comment%3A20):
> By the way, for some reason I made a `make distclean`, and its first action was to run `./configure`...  and again after typing `make`.

We have two tickets for reducing the number of times that `configure` gets run: #29460 (Run configure less often) and #29310 ("make distclean" should not run "./configure")



---

archive/issue_comments_463860.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThank you so much ! :))",
    "created_at": "2020-04-15T17:49:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463860",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:23" align="right">comment:23</div>

Thank you so much ! :))



---

archive/issue_comments_463861.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@jhpalmieri](#comment%3A19):\n> I still don't see the message at the end of `./configure`, though, when I have installed all of the recommended packages:\n\nRight, sorry, there's one more place to fix",
    "created_at": "2020-04-15T17:49:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463861",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@jhpalmieri](#comment%3A19):
> I still don't see the message at the end of `./configure`, though, when I have installed all of the recommended packages:

Right, sorry, there's one more place to fix



---

archive/issue_comments_463862.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nwhat is this `gettext` in `for l in gettext; do` in `.homebrew-build-env` ?\nI'm confused.",
    "created_at": "2020-04-15T17:50:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463862",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:25" align="right">comment:25</div>

what is this `gettext` in `for l in gettext; do` in `.homebrew-build-env` ?
I'm confused.



---

archive/issue_comments_463863.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@dimpase](#comment%3A25):\n> what is this `gettext` in `for l in gettext; do` in `.homebrew-build-env` ?\n> I'm confused.\n\nThe loop runs once with `l` equal to `\"gettext\"`, right? I assume it's written like this in case more packages eventually need to be treated the same way.",
    "created_at": "2020-04-15T17:52:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463863",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@dimpase](#comment%3A25):
> what is this `gettext` in `for l in gettext; do` in `.homebrew-build-env` ?
> I'm confused.

The loop runs once with `l` equal to `"gettext"`, right? I assume it's written like this in case more packages eventually need to be treated the same way.



---

archive/issue_comments_463864.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@jhpalmieri](#comment%3A26):\n> Replying to [@dimpase](#comment%3A25):\n> > what is this `gettext` in `for l in gettext; do` in `.homebrew-build-env` ?\n> > I'm confused.\n\n> \n> The loop runs once with `l` equal to `\"gettext\"`, right? I assume it's written like this in case more packages eventually need to be treated the same way.\n\nThat's right.",
    "created_at": "2020-04-15T17:53:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463864",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@jhpalmieri](#comment%3A26):
> Replying to [@dimpase](#comment%3A25):
> > what is this `gettext` in `for l in gettext; do` in `.homebrew-build-env` ?
> > I'm confused.

> 
> The loop runs once with `l` equal to `"gettext"`, right? I assume it's written like this in case more packages eventually need to be treated the same way.

That's right.



---

archive/issue_comments_463865.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@jhpalmieri](#comment%3A19):\n> I still don't see the message at the end of `./configure`, though, when I have installed all of the recommended packages:\n> \n> ```\n> $ ./configure\n> ...\n> configure: notice: the following SPKGs did not find equivalent system packages: cbc gp2c libsemigroups pari_elldata pari_galpol pari_nftables pari_seadata perl_term_readline_gnu\n> checking for the package system in use... homebrew\n> configure: No equivalent system packages for homebrew are known to Sage\n> $\n> ```\n\nWait... why do you want to see a message here? Everything is in order",
    "created_at": "2020-04-15T17:54:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463865",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@jhpalmieri](#comment%3A19):
> I still don't see the message at the end of `./configure`, though, when I have installed all of the recommended packages:
> 
> ```
> $ ./configure
> ...
> configure: notice: the following SPKGs did not find equivalent system packages: cbc gp2c libsemigroups pari_elldata pari_galpol pari_nftables pari_seadata perl_term_readline_gnu
> checking for the package system in use... homebrew
> configure: No equivalent system packages for homebrew are known to Sage
> $
> ```

Wait... why do you want to see a message here? Everything is in order



---

archive/issue_comments_463866.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nReplying to [@mkoeppe](#comment%3A27):\n> Replying to [@jhpalmieri](#comment%3A26):\n> > Replying to [@dimpase](#comment%3A25):\n> > > what is this `gettext` in `for l in gettext; do` in `.homebrew-build-env` ?\n> > > I'm confused.\n\n> > \n> > The loop runs once with `l` equal to `\"gettext\"`, right? I assume it's written like this in case more packages eventually need to be treated the same way.\n\n> That's right.\n\nthanks. That was too creative for me :-)",
    "created_at": "2020-04-15T17:59:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463866",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:29" align="right">comment:29</div>

Replying to [@mkoeppe](#comment%3A27):
> Replying to [@jhpalmieri](#comment%3A26):
> > Replying to [@dimpase](#comment%3A25):
> > > what is this `gettext` in `for l in gettext; do` in `.homebrew-build-env` ?
> > > I'm confused.

> > 
> > The loop runs once with `l` equal to `"gettext"`, right? I assume it's written like this in case more packages eventually need to be treated the same way.

> That's right.

thanks. That was too creative for me :-)



---

archive/issue_comments_463867.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@jhpalmieri](#comment%3A19):\n> I think it will still be an FAQ, since people are not in the habit of running `./configure` before running `make`.\n\nWell, we could do #29316 (Require ./configure before make)...\n\nAt least we should make sure that `./configure` appears in all build instructions. We changed some in #29496 (Update README.md and Installation Guide) already, but there are more",
    "created_at": "2020-04-15T18:01:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463867",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@jhpalmieri](#comment%3A19):
> I think it will still be an FAQ, since people are not in the habit of running `./configure` before running `make`.

Well, we could do #29316 (Require ./configure before make)...

At least we should make sure that `./configure` appears in all build instructions. We changed some in #29496 (Update README.md and Installation Guide) already, but there are more



---

archive/issue_comments_463868.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@mkoeppe](#comment%3A28):\n> Wait... why do you want to see a message here? Everything is in order\n\nThat's a fair question. Maybe I don't need to see the message? Are we convinced that if `./configure` finds everything, then all of Sage's packages will also find everything? (It turns out that I had run `source .homebrew-...` earlier in that shell session, which is why `./configure` was happy.)\n\nA minor point: when I see the message, I see\n\n```\n# Afterwards: \n# To automatically take care of homebrew messages regarding \n# keg-only packages for the current shell session:\n# $ source ./.homebrew-build-env\n# Add this to your shell profile if you want it to persist between shell sessions.\n```\nIt would be nice if it gave an absolute path so I could cut and paste it into my shell profile. But this is not a big deal: someone who has been installing homebrew packages probably knows enough to change this. But would this change be helpful?\n\n```diff\ndiff --git a/build/bin/sage-print-system-package-command b/build/bin/sage-print-system-package-command\nindex 7802d447df..ee3d3c0c5b 100755\n--- a/build/bin/sage-print-system-package-command\n+++ b/build/bin/sage-print-system-package-command\n@@ -45,7 +45,7 @@ case $system:$command in\n     homebrew*:install)\n         echo \"# To automatically take care of homebrew messages regarding \"\n         echo \"# keg-only packages for the current shell session:\"\n-        [ -n \"$SAGE_ROOT\" ] || SAGE_ROOT=.\n+        [ -n \"$SAGE_ROOT\" ] || SAGE_ROOT=`pwd`\n         echo \"# $ source $SAGE_ROOT/.homebrew-build-env\"\n         echo \"# Add this to your shell profile if you want it to persist between shell sessions.\"\n         ;;\n```",
    "created_at": "2020-04-15T18:19:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463868",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@mkoeppe](#comment%3A28):
> Wait... why do you want to see a message here? Everything is in order

That's a fair question. Maybe I don't need to see the message? Are we convinced that if `./configure` finds everything, then all of Sage's packages will also find everything? (It turns out that I had run `source .homebrew-...` earlier in that shell session, which is why `./configure` was happy.)

A minor point: when I see the message, I see

```
# Afterwards: 
# To automatically take care of homebrew messages regarding 
# keg-only packages for the current shell session:
# $ source ./.homebrew-build-env
# Add this to your shell profile if you want it to persist between shell sessions.
```
It would be nice if it gave an absolute path so I could cut and paste it into my shell profile. But this is not a big deal: someone who has been installing homebrew packages probably knows enough to change this. But would this change be helpful?

```diff
diff --git a/build/bin/sage-print-system-package-command b/build/bin/sage-print-system-package-command
index 7802d447df..ee3d3c0c5b 100755
--- a/build/bin/sage-print-system-package-command
+++ b/build/bin/sage-print-system-package-command
@@ -45,7 +45,7 @@ case $system:$command in
     homebrew*:install)
         echo "# To automatically take care of homebrew messages regarding "
         echo "# keg-only packages for the current shell session:"
-        [ -n "$SAGE_ROOT" ] || SAGE_ROOT=.
+        [ -n "$SAGE_ROOT" ] || SAGE_ROOT=`pwd`
         echo "# $ source $SAGE_ROOT/.homebrew-build-env"
         echo "# Add this to your shell profile if you want it to persist between shell sessions."
         ;;
```



---

archive/issue_comments_463869.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@jhpalmieri](#comment%3A31):\n> A minor point: when I see the message, I see\n> \n> ```\n> # Afterwards: \n> # To automatically take care of homebrew messages regarding \n> # keg-only packages for the current shell session:\n> # $ source ./.homebrew-build-env\n> # Add this to your shell profile if you want it to persist between shell sessions.\n> ```\n> It would be nice if it gave an absolute path so I could cut and paste it into my shell profile. But this is not a big deal: someone who has been installing homebrew packages probably knows enough to change this. But would this change be helpful?\n\nDid you run bootstrap? There is already a change that does that",
    "created_at": "2020-04-15T18:49:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463869",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@jhpalmieri](#comment%3A31):
> A minor point: when I see the message, I see
> 
> ```
> # Afterwards: 
> # To automatically take care of homebrew messages regarding 
> # keg-only packages for the current shell session:
> # $ source ./.homebrew-build-env
> # Add this to your shell profile if you want it to persist between shell sessions.
> ```
> It would be nice if it gave an absolute path so I could cut and paste it into my shell profile. But this is not a big deal: someone who has been installing homebrew packages probably knows enough to change this. But would this change be helpful?

Did you run bootstrap? There is already a change that does that



---

archive/issue_comments_463870.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nRunning bootstrap fixes it. When does that need to be run? The only information I see says to run it if `./configure` doesn't exist.",
    "created_at": "2020-04-15T18:56:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463870",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:33" align="right">comment:33</div>

Running bootstrap fixes it. When does that need to be run? The only information I see says to run it if `./configure` doesn't exist.



---

archive/issue_comments_463871.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nReplying to [@jhpalmieri](#comment%3A31):\n> Replying to [@mkoeppe](#comment%3A28):\n> > Wait... why do you want to see a message here? Everything is in order\n\n> \n> That's a fair question. Maybe I don't need to see the message? Are we convinced that if `./configure` finds everything, then all of Sage's packages will also find everything? \n\nThis strong statement is not true because of #29448 (configure finds libpng but matplotlib does not) and perhaps also #27205 (Sage ignores libs from pkgconfig).\n\nBut a weaker statement is true: The set of settings that I make in `.homebrew-build-env` is minimal so that configure finds everything.",
    "created_at": "2020-04-15T18:58:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463871",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:34" align="right">comment:34</div>

Replying to [@jhpalmieri](#comment%3A31):
> Replying to [@mkoeppe](#comment%3A28):
> > Wait... why do you want to see a message here? Everything is in order

> 
> That's a fair question. Maybe I don't need to see the message? Are we convinced that if `./configure` finds everything, then all of Sage's packages will also find everything? 

This strong statement is not true because of #29448 (configure finds libpng but matplotlib does not) and perhaps also #27205 (Sage ignores libs from pkgconfig).

But a weaker statement is true: The set of settings that I make in `.homebrew-build-env` is minimal so that configure finds everything.



---

archive/issue_comments_463872.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@jhpalmieri](#comment%3A33):\n> Running bootstrap fixes it. When does that need to be run? The only information I see says to run it if `./configure` doesn't exist.\n\nYou only need to run it on the ticket because the configure tarball is not current.",
    "created_at": "2020-04-15T18:58:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463872",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@jhpalmieri](#comment%3A33):
> Running bootstrap fixes it. When does that need to be run? The only information I see says to run it if `./configure` doesn't exist.

You only need to run it on the ticket because the configure tarball is not current.



---

archive/issue_comments_463873.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nOkay, let's proceed with this. Thank you for being so patient with all of my questions.",
    "created_at": "2020-04-15T19:28:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463873",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:36" align="right">comment:36</div>

Okay, let's proceed with this. Thank you for being so patient with all of my questions.



---

archive/issue_events_402769.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2020-04-15T19:28:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29504#event-402769"
}
```



---

archive/issue_events_402770.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2020-04-15T19:28:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29504#event-402770"
}
```



---

archive/issue_comments_463874.json:
```json
{
    "body": "Reviewer: **John Palmieri**",
    "created_at": "2020-04-15T19:28:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463874",
    "user": "https://github.com/jhpalmieri"
}
```

Reviewer: **John Palmieri**



---

archive/issue_comments_463875.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nThank you!",
    "created_at": "2020-04-15T21:00:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463875",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:38" align="right">comment:38</div>

Thank you!



---

archive/issue_comments_463876.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/__configure___homebrew__recommend_the_script__homebrew_build_env](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/__configure___homebrew__recommend_the_script__homebrew_build_env)** to **[`ec64fb6`](https://github.com/sagemath/sagetrac-mirror/commit/ec64fb68a864c9fb5ca58432140601c6f6bdb161)**",
    "created_at": "2020-04-16T22:33:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29504#issuecomment-463876",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/__configure___homebrew__recommend_the_script__homebrew_build_env](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/__configure___homebrew__recommend_the_script__homebrew_build_env)** to **[`ec64fb6`](https://github.com/sagemath/sagetrac-mirror/commit/ec64fb68a864c9fb5ca58432140601c6f6bdb161)**



---

archive/issue_events_402771.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-16T22:33:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29504#event-402771"
}
```



---

archive/issue_events_402772.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "47960151f14dd49a7bedf7ec6e6c2a6fce3c4534",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-04-16T22:33:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29504",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29504#event-402772"
}
```
