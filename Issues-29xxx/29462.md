# Issue 29462: Reject nauty version < 2.6

archive/issues_029225.json:
```json
{
    "body": "We get the following failure on some systems, see e.g. [https://github.com/kliem/sage-test-27122/runs/558808988](https://github.com/kliem/sage-test-27122/runs/558808988):\n\n```\nFile \"src/sage/graphs/digraph_generators.py\", line 600, in sage.graphs.digraph_generators.DiGraphGenerators.nauty_directg\nFailed example:\n    dgs[0]\nException raised:\n    Traceback (most recent call last):\n      File \"/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1123, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.graphs.digraph_generators.DiGraphGenerators.nauty_directg[3]>\", line 1, in <module>\n        dgs[Integer(0)]\n    IndexError: list index out of range\n**********************************************************************\nFile \"src/sage/graphs/digraph_generators.py\", line 602, in sage.graphs.digraph_generators.DiGraphGenerators.nauty_directg\nFailed example:\n    dgs[0]._bit_vector()\nException raised:\n    Traceback (most recent call last):\n      File \"/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1123, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.graphs.digraph_generators.DiGraphGenerators.nauty_directg[4]>\", line 1, in <module>\n        dgs[Integer(0)]._bit_vector()\n    IndexError: list index out of range\n```\n\nThe problem is that we use digraph6, a format which is not supported by nauty previous to 2.6 according to\n\n[http://users.cecs.anu.edu.au/~bdm/nauty/changes24-26.txt](http://users.cecs.anu.edu.au/~bdm/nauty/changes24-26.txt)\n\nCC:  @mkoeppe @orlitzky @dimpase\n\nKeywords: nauty, digraph6\n\nBranch/Commit: 642fbc00bda68d0d63d9e062e7ee4259cd2b4c28\n\nReviewer: Jonathan Kliem\n\nAuthor: Michael Orlitzky\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29462\n\n",
    "closed_at": "2020-04-09T22:44:18Z",
    "created_at": "2020-04-04T09:26:35Z",
    "labels": [
        "component: packages: standard",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "Reject nauty version < 2.6",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29462",
    "user": "https://github.com/kliem"
}
```
We get the following failure on some systems, see e.g. [https://github.com/kliem/sage-test-27122/runs/558808988](https://github.com/kliem/sage-test-27122/runs/558808988):

```
File "src/sage/graphs/digraph_generators.py", line 600, in sage.graphs.digraph_generators.DiGraphGenerators.nauty_directg
Failed example:
    dgs[0]
Exception raised:
    Traceback (most recent call last):
      File "/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.graphs.digraph_generators.DiGraphGenerators.nauty_directg[3]>", line 1, in <module>
        dgs[Integer(0)]
    IndexError: list index out of range
**********************************************************************
File "src/sage/graphs/digraph_generators.py", line 602, in sage.graphs.digraph_generators.DiGraphGenerators.nauty_directg
Failed example:
    dgs[0]._bit_vector()
Exception raised:
    Traceback (most recent call last):
      File "/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.graphs.digraph_generators.DiGraphGenerators.nauty_directg[4]>", line 1, in <module>
        dgs[Integer(0)]._bit_vector()
    IndexError: list index out of range
```

The problem is that we use digraph6, a format which is not supported by nauty previous to 2.6 according to

[http://users.cecs.anu.edu.au/~bdm/nauty/changes24-26.txt](http://users.cecs.anu.edu.au/~bdm/nauty/changes24-26.txt)

CC:  @mkoeppe @orlitzky @dimpase

Keywords: nauty, digraph6

Branch/Commit: 642fbc00bda68d0d63d9e062e7ee4259cd2b4c28

Reviewer: Jonathan Kliem

Author: Michael Orlitzky

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29462





---

archive/issue_comments_575640.json:
```json
{
    "body": "Changing commit from \"\" to \"642fbc00bda68d0d63d9e062e7ee4259cd2b4c28\"",
    "created_at": "2020-04-04T11:54:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29462#issuecomment-575640",
    "user": "https://github.com/orlitzky"
}
```

Changing commit from "" to "642fbc00bda68d0d63d9e062e7ee4259cd2b4c28"



---

archive/issue_comments_575641.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-04-04T11:54:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29462#issuecomment-575641",
    "user": "https://github.com/orlitzky"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_575642.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2020-04-04T11:54:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29462#issuecomment-575642",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_575643.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mjo/ticket/29462\"",
    "created_at": "2020-04-04T11:54:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29462#issuecomment-575643",
    "user": "https://github.com/orlitzky"
}
```

Changing branch from "" to "u/mjo/ticket/29462"



---

archive/issue_comments_575644.json:
```json
{
    "body": "Changing author from \"\" to \"Michael Orlitzky\"",
    "created_at": "2020-04-04T11:54:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29462#issuecomment-575644",
    "user": "https://github.com/orlitzky"
}
```

Changing author from "" to "Michael Orlitzky"



---

archive/issue_comments_575645.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Jonathan Kliem\"",
    "created_at": "2020-04-04T12:50:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29462#issuecomment-575645",
    "user": "https://github.com/kliem"
}
```

Changing reviewer from "" to "Jonathan Kliem"



---

archive/issue_comments_575646.json:
```json
{
    "body": "<a id='comment:3'></a>I would say it is good to go. Does anyone think this needs testing?\n\nI checked that indeed `converseg` doesn't show up in version 2.5b9 but it is there in version 2.6.",
    "created_at": "2020-04-04T12:50:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29462#issuecomment-575646",
    "user": "https://github.com/kliem"
}
```

<a id='comment:3'></a>I would say it is good to go. Does anyone think this needs testing?

I checked that indeed `converseg` doesn't show up in version 2.5b9 but it is there in version 2.6.



---

archive/issue_comments_575647.json:
```json
{
    "body": "<a id='comment:4'></a>I just started a test #29462, #29442, #29440, #29272, #29445.\n\n[https://github.com/kliem/sage-test-27122/actions/runs/70559675](https://github.com/kliem/sage-test-27122/actions/runs/70559675)\n\nI'll put it on positive review, if this works as desired.",
    "created_at": "2020-04-04T13:17:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29462#issuecomment-575647",
    "user": "https://github.com/kliem"
}
```

<a id='comment:4'></a>I just started a test #29462, #29442, #29440, #29272, #29445.

[https://github.com/kliem/sage-test-27122/actions/runs/70559675](https://github.com/kliem/sage-test-27122/actions/runs/70559675)

I'll put it on positive review, if this works as desired.



---

archive/issue_comments_575648.json:
```json
{
    "body": "<a id='comment:5'></a>Ok. Works.\n\nE.g. nauty is being rejected on ubuntu-xenial, so that the doctest passes. But it is accepted by ubuntu-bionic.",
    "created_at": "2020-04-05T06:22:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29462#issuecomment-575648",
    "user": "https://github.com/kliem"
}
```

<a id='comment:5'></a>Ok. Works.

E.g. nauty is being rejected on ubuntu-xenial, so that the doctest passes. But it is accepted by ubuntu-bionic.



---

archive/issue_comments_575649.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-04-05T06:22:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29462#issuecomment-575649",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_575650.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-04-09T22:44:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29462#issuecomment-575650",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_075094.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-09T22:44:18Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29462",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29462#event-75094"
}
```



---

archive/issue_comments_575651.json:
```json
{
    "body": "Changing branch from \"u/mjo/ticket/29462\" to \"642fbc00bda68d0d63d9e062e7ee4259cd2b4c28\"",
    "created_at": "2020-04-09T22:44:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29462#issuecomment-575651",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mjo/ticket/29462" to "642fbc00bda68d0d63d9e062e7ee4259cd2b4c28"
