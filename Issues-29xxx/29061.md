# Issue 29061: Upgrade to symmetrica-3.0.1

archive/issues_028824.json:
```json
{
    "body": "I tagged a new release of symmetrica with all of the build/crash fixes from over the years:\n\n* https://gitlab.com/sagemath/symmetrica/-/releases\n* https://gitlab.com/sagemath/symmetrica/uploads/b3d8e1ad5ab2449c30bbc3147e7a5e53/symmetrica-3.0.1.tar.xz\n\nA standard ./configure && make && make install should suffice, with no patching.\n\n\nCC:  @antonio-rojas @kiwifb @saraedum @timokau\n\nBranch/Commit: 68ee17e4e1a52e4988623dda05fbc2d1ab27c975\n\nReviewer: Matthias Koeppe\n\nAuthor: Michael Orlitzky, Dima Pasechnik\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29061\n\n",
    "closed_at": "2020-09-30T22:30:28Z",
    "created_at": "2020-01-21T16:18:57Z",
    "labels": [
        "component: packages: standard",
        "blocker"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Upgrade to symmetrica-3.0.1",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29061",
    "user": "https://github.com/orlitzky"
}
```
I tagged a new release of symmetrica with all of the build/crash fixes from over the years:

* https://gitlab.com/sagemath/symmetrica/-/releases
* https://gitlab.com/sagemath/symmetrica/uploads/b3d8e1ad5ab2449c30bbc3147e7a5e53/symmetrica-3.0.1.tar.xz

A standard ./configure && make && make install should suffice, with no patching.


CC:  @antonio-rojas @kiwifb @saraedum @timokau

Branch/Commit: 68ee17e4e1a52e4988623dda05fbc2d1ab27c975

Reviewer: Matthias Koeppe

Author: Michael Orlitzky, Dima Pasechnik

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29061





---

archive/issue_comments_433935.json:
```json
{
    "body": "<a id='comment:2'></a>The README states \"The original developers of symmetrica at the University of Bayreuth are no longer active, but symmetrica is still in use in [SageMath](SageMath) and elsewhere\". Is there some source to this claim? Did anyone ever try contacting upstream?",
    "created_at": "2020-03-10T11:58:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29061#issuecomment-433935",
    "user": "https://github.com/timokau"
}
```

<a id='comment:2'></a>The README states "The original developers of symmetrica at the University of Bayreuth are no longer active, but symmetrica is still in use in [SageMath](SageMath) and elsewhere". Is there some source to this claim? Did anyone ever try contacting upstream?



---

archive/issue_comments_433936.json:
```json
{
    "body": "<a id='comment:3'></a>Replying to [comment:2 gh-timokau]:\n> The README states \"The original developers of symmetrica at the University of Bayreuth are no longer active, but symmetrica is still in use in [SageMath](SageMath) and elsewhere\". Is there some source to this claim? Did anyone ever try contacting upstream?\n\n\nYes, the primary maintainer passed away a few years ago and as far as I know there is no one else at Bayreuth working on symmetrica. A colleague of his, Michael Kiermaier, has given us his blessing insofar as is possible. And the other distribution maintainers are on board.",
    "created_at": "2020-03-10T13:11:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29061#issuecomment-433936",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:3'></a>Replying to [comment:2 gh-timokau]:
> The README states "The original developers of symmetrica at the University of Bayreuth are no longer active, but symmetrica is still in use in [SageMath](SageMath) and elsewhere". Is there some source to this claim? Did anyone ever try contacting upstream?


Yes, the primary maintainer passed away a few years ago and as far as I know there is no one else at Bayreuth working on symmetrica. A colleague of his, Michael Kiermaier, has given us his blessing insofar as is possible. And the other distribution maintainers are on board.



---

archive/issue_comments_433937.json:
```json
{
    "body": "<a id='comment:4'></a>Ah, now I remember the [sage-devel discussion](https://groups.google.com/d/msg/sage-devel/AE2rFtJxO-c/GgXibjI-BAAJ). That is sad to hear. Thanks for clarifying.",
    "created_at": "2020-03-10T13:15:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29061#issuecomment-433937",
    "user": "https://github.com/timokau"
}
```

<a id='comment:4'></a>Ah, now I remember the [sage-devel discussion](https://groups.google.com/d/msg/sage-devel/AE2rFtJxO-c/GgXibjI-BAAJ). That is sad to hear. Thanks for clarifying.



---

archive/issue_comments_433938.json:
```json
{
    "body": "<a id='comment:5'></a>Is there anything in the new release that provides version information to programs linking to the library?",
    "created_at": "2020-04-18T16:28:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29061#issuecomment-433938",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>Is there anything in the new release that provides version information to programs linking to the library?



---

archive/issue_comments_433939.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:5 mkoeppe]:\n> Is there anything in the new release that provides version information to programs linking to the library?\n\n\nYou can detect this exact version by looking at the soname (which was bumped) or some of the files we rearranged. We also took a few things out of the public API that were there by mistake (and so can be detected).\n\nBut long term, this is the way to go: https://gitlab.com/sagemath/symmetrica/-/issues/10",
    "created_at": "2020-04-19T16:16:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29061#issuecomment-433939",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:6'></a>Replying to [comment:5 mkoeppe]:
> Is there anything in the new release that provides version information to programs linking to the library?


You can detect this exact version by looking at the soname (which was bumped) or some of the files we rearranged. We also took a few things out of the public API that were there by mistake (and so can be detected).

But long term, this is the way to go: https://gitlab.com/sagemath/symmetrica/-/issues/10



---

archive/issue_events_073680.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-19T22:13:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29061",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29061#event-73680"
}
```



---

archive/issue_comments_433940.json:
```json
{
    "body": "Changing priority from major to blocker.",
    "created_at": "2020-09-19T07:56:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29061#issuecomment-433940",
    "user": "https://github.com/dimpase"
}
```

Changing priority from major to blocker.



---

archive/issue_comments_433941.json:
```json
{
    "body": "<a id='comment:8'></a>here is a branch, please test.\nIt builds with SAGE_CHECK=yes on macOS 10.15 with Xcode 12.\n\n---\nNew commits:",
    "created_at": "2020-09-19T07:56:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29061#issuecomment-433941",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:8'></a>here is a branch, please test.
It builds with SAGE_CHECK=yes on macOS 10.15 with Xcode 12.

---
New commits:



---

archive/issue_comments_433942.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-09-19T07:56:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29061#issuecomment-433942",
    "user": "https://github.com/dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_433943.json:
```json
{
    "body": "<a id='comment:9'></a>also works on Fedora 30 - but for some reason I need to download the tarball mentioned in checksum.ini manually.",
    "created_at": "2020-09-19T08:24:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29061#issuecomment-433943",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:9'></a>also works on Fedora 30 - but for some reason I need to download the tarball mentioned in checksum.ini manually.



---

archive/issue_comments_433944.json:
```json
{
    "body": "<a id='comment:10'></a>`CFLAGS=\"-O2\"` should suffice. The preprocessor definitions are made automatically now in `src/Makefile.am`:\n\n```\n# -DFAST disables some runtime checks in src/macro.h to speed things up.\n#\n# -DALLTRUE defines a bunch of other constants in def.h that ultimately\n# enable every symmetrica \"subsystem.\"\nlibsymmetrica_la_CPPFLAGS = -DFAST -DALLTRUE\n```\n\nThe `cd src` can also be dropped. Right now, `src` is the only subdirectory with a test suite, but `make check` at the top level runs is what runs them all.",
    "created_at": "2020-09-19T14:39:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29061#issuecomment-433944",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:10'></a>`CFLAGS="-O2"` should suffice. The preprocessor definitions are made automatically now in `src/Makefile.am`:

```
# -DFAST disables some runtime checks in src/macro.h to speed things up.
#
# -DALLTRUE defines a bunch of other constants in def.h that ultimately
# enable every symmetrica "subsystem."
libsymmetrica_la_CPPFLAGS = -DFAST -DALLTRUE
```

The `cd src` can also be dropped. Right now, `src` is the only subdirectory with a test suite, but `make check` at the top level runs is what runs them all.



---

archive/issue_comments_433945.json:
```json
{
    "body": "<a id='comment:11'></a>please add commits as you see fit.",
    "created_at": "2020-09-19T15:34:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29061#issuecomment-433945",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:11'></a>please add commits as you see fit.



---

archive/issue_comments_433946.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:9 dimpase]:\n> also works on Fedora 30 - but for some reason I need to download the tarball mentioned in checksum.ini manually.\n\nWe had the same problems on another upgrade ticket that used a gitlab URL. Perhaps best to put the tarball somewhere else to allow for automatic testing...",
    "created_at": "2020-09-19T20:16:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29061#issuecomment-433946",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>Replying to [comment:9 dimpase]:
> also works on Fedora 30 - but for some reason I need to download the tarball mentioned in checksum.ini manually.

We had the same problems on another upgrade ticket that used a gitlab URL. Perhaps best to put the tarball somewhere else to allow for automatic testing...



---

archive/issue_comments_433947.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-20T07:41:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29061#issuecomment-433947",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433948.json:
```json
{
    "body": "<a id='comment:14'></a>OK, this location for tarball works",
    "created_at": "2020-09-20T08:14:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29061#issuecomment-433948",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:14'></a>OK, this location for tarball works



---

archive/issue_comments_433949.json:
```json
{
    "body": "<a id='comment:15'></a>This works for me, too, with Xcode 12.",
    "created_at": "2020-09-20T16:40:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29061#issuecomment-433949",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:15'></a>This works for me, too, with Xcode 12.



---

archive/issue_comments_433950.json:
```json
{
    "body": "<a id='comment:16'></a>Works for me on Ubuntu 18.",
    "created_at": "2020-09-21T23:32:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29061#issuecomment-433950",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:16'></a>Works for me on Ubuntu 18.



---

archive/issue_comments_433951.json:
```json
{
    "body": "<a id='comment:17'></a>As usual, this should be run on GH Actions.",
    "created_at": "2020-09-22T13:59:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29061#issuecomment-433951",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>As usual, this should be run on GH Actions.



---

archive/issue_comments_433952.json:
```json
{
    "body": "<a id='comment:18'></a>tests run on https://github.com/dimpase/sage/pull/17",
    "created_at": "2020-09-22T15:44:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29061#issuecomment-433952",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:18'></a>tests run on https://github.com/dimpase/sage/pull/17



---

archive/issue_comments_433953.json:
```json
{
    "body": "<a id='comment:19'></a>Patches don't apply - see for example https://github.com/mkoeppe/sage/runs/1152418779",
    "created_at": "2020-09-23T04:11:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29061#issuecomment-433953",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:19'></a>Patches don't apply - see for example https://github.com/mkoeppe/sage/runs/1152418779



---

archive/issue_comments_433954.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-09-23T04:11:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29061#issuecomment-433954",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_433955.json:
```json
{
    "body": "<a id='comment:20'></a>What patches? The branch removes all of them.",
    "created_at": "2020-09-23T05:22:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29061#issuecomment-433955",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:20'></a>What patches? The branch removes all of them.



---

archive/issue_comments_433956.json:
```json
{
    "body": "<a id='comment:21'></a>Oh, don't use both #30608 and this ticket, use just this one. If this one gets positively reviewed, that one can be closed as invalid. If this one runs into problems or takes too long to get reviewed on enough platforms, then #30608 will be a stopgap.",
    "created_at": "2020-09-23T05:24:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29061#issuecomment-433956",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:21'></a>Oh, don't use both #30608 and this ticket, use just this one. If this one gets positively reviewed, that one can be closed as invalid. If this one runs into problems or takes too long to get reviewed on enough platforms, then #30608 will be a stopgap.



---

archive/issue_comments_433957.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-09-23T05:25:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29061#issuecomment-433957",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_433958.json:
```json
{
    "body": "<a id='comment:23'></a>Replying to [comment:21 jhpalmieri]:\n> Oh, don't use both #30608 and this ticket, use just this one. If this one gets positively reviewed, that one can be closed as invalid. If this one runs into problems or takes too long to get reviewed on enough platforms, then #30608 will be a stopgap.\n\n\nAh, my mistake, sorry for the noise. I had merged all the Xcode 12 related tickets that were in positive review or needs review status.",
    "created_at": "2020-09-23T11:25:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29061#issuecomment-433958",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'></a>Replying to [comment:21 jhpalmieri]:
> Oh, don't use both #30608 and this ticket, use just this one. If this one gets positively reviewed, that one can be closed as invalid. If this one runs into problems or takes too long to get reviewed on enough platforms, then #30608 will be a stopgap.


Ah, my mistake, sorry for the noise. I had merged all the Xcode 12 related tickets that were in positive review or needs review status.



---

archive/issue_comments_433959.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-09-24T00:02:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29061#issuecomment-433959",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_073681.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-09-30T22:30:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29061",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29061#event-73681"
}
```



---

archive/issue_comments_433960.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-09-30T22:30:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29061#issuecomment-433960",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
