# Issue 29422: DiFUB  algorithm for diameter of real (unweighed) directed graphs

archive/issues_029185.json:
```json
{
    "body": " Implemented the algorithm described in \nhttps://courses.cs.ut.ee/MTAT.03.238/2014_fall/uploads/Main/diameter.pdf\nfor unweighed directed real graphs.\n\n\n```\nEpinions social network\nsage: %time m.diameter(algorithm=\"DiFUB\")\nCPU times: user 304 ms, sys: 4.02 ms, total: 308 ms\nWall time: 305 ms\n16\n\nsage: %time m.diameter()\nCPU times: user 28min 55s, sys: 35.4 ms, total: 28min 55s\nWall time: 28min 55s\n16\n\n\nEnron\nsage: %time m.diameter(algorithm=\"DiFUB\")\nCPU times: user 208 ms, sys: 0 ns, total: 208 ms\nWall time: 207 ms\n13\nsage: %time m.diameter()\nCPU times: user 27.2 s, sys: 35.9 ms, total: 27.2 s\nWall time: 27.2 s\n13\n\nslashdot\nsage: %time m.diameter(algorithm=\"DiFUB\")\nCPU times: user 221 ms, sys: 1 \u00b5s, total: 221 ms\nWall time: 220 ms\n15\nsage: %time m.diameter()\nCPU times: user 24.8 s, sys: 3.97 ms, total: 24.8 s\nWall time: 24.8 s\n15\n\nNotre Dame\nsage: %time m.diameter(algorithm=\"DiFUB\")\nCPU times: user 218 ms, sys: 5 \u00b5s, total: 218 ms\nWall time: 218 ms\n93\nsage: %time m.diameter()\nCPU times: user 43.4 s, sys: 3.98 ms, total: 43.4 s\nWall time: 43.4 s\n93\n```\n\n\n\nCC:  @dcoudert\n\nKeywords: gsoc2020\n\nReviewer: David Coudert\n\nAuthor: Madhav Wagle, Vipul Gupta\n\nBranch: ed9e4241760f8a8c636593523e372e4f4907e7b6\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29422\n\n",
    "closed_at": "2020-07-10T19:34:21Z",
    "created_at": "2020-03-27T23:15:45Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "DiFUB  algorithm for diameter of real (unweighed) directed graphs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29422",
    "user": "https://github.com/ArchitWagle"
}
```
 Implemented the algorithm described in 
https://courses.cs.ut.ee/MTAT.03.238/2014_fall/uploads/Main/diameter.pdf
for unweighed directed real graphs.


```
Epinions social network
sage: %time m.diameter(algorithm="DiFUB")
CPU times: user 304 ms, sys: 4.02 ms, total: 308 ms
Wall time: 305 ms
16

sage: %time m.diameter()
CPU times: user 28min 55s, sys: 35.4 ms, total: 28min 55s
Wall time: 28min 55s
16


Enron
sage: %time m.diameter(algorithm="DiFUB")
CPU times: user 208 ms, sys: 0 ns, total: 208 ms
Wall time: 207 ms
13
sage: %time m.diameter()
CPU times: user 27.2 s, sys: 35.9 ms, total: 27.2 s
Wall time: 27.2 s
13

slashdot
sage: %time m.diameter(algorithm="DiFUB")
CPU times: user 221 ms, sys: 1 µs, total: 221 ms
Wall time: 220 ms
15
sage: %time m.diameter()
CPU times: user 24.8 s, sys: 3.97 ms, total: 24.8 s
Wall time: 24.8 s
15

Notre Dame
sage: %time m.diameter(algorithm="DiFUB")
CPU times: user 218 ms, sys: 5 µs, total: 218 ms
Wall time: 218 ms
93
sage: %time m.diameter()
CPU times: user 43.4 s, sys: 3.98 ms, total: 43.4 s
Wall time: 43.4 s
93
```



CC:  @dcoudert

Keywords: gsoc2020

Reviewer: David Coudert

Author: Madhav Wagle, Vipul Gupta

Branch: ed9e4241760f8a8c636593523e372e4f4907e7b6

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29422





---

archive/issue_comments_440309.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2020-03-27T23:34:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29422#issuecomment-440309",
    "user": "https://github.com/ArchitWagle"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_440310.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to graph theory.",
    "created_at": "2020-03-27T23:34:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29422#issuecomment-440310",
    "user": "https://github.com/ArchitWagle"
}
```

Changing component from PLEASE CHANGE to graph theory.



---

archive/issue_comments_440311.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,52 @@\n+ Implemented the algorithm described in \n+https://courses.cs.ut.ee/MTAT.03.238/2014_fall/uploads/Main/diameter.pdf\n+for unweighed directed real graphs.\n+\n+\n+```\n+Epinions social network\n+sage: %time m.diameter(algorithm=\"DiFUB\")\n+CPU times: user 304 ms, sys: 4.02 ms, total: 308 ms\n+Wall time: 305 ms\n+16\n+\n+sage: %time m.diameter()\n+CPU times: user 28min 55s, sys: 35.4 ms, total: 28min 55s\n+Wall time: 28min 55s\n+16\n+\n+\n+Enron\n+sage: %time m.diameter(algorithm=\"DiFUB\")\n+CPU times: user 208 ms, sys: 0 ns, total: 208 ms\n+Wall time: 207 ms\n+13\n+sage: %time m.diameter()\n+CPU times: user 27.2 s, sys: 35.9 ms, total: 27.2 s\n+Wall time: 27.2 s\n+13\n+\n+slashdot\n+sage: %time m.diameter(algorithm=\"DiFUB\")\n+CPU times: user 221 ms, sys: 1 \u00b5s, total: 221 ms\n+Wall time: 220 ms\n+15\n+sage: %time m.diameter()\n+CPU times: user 24.8 s, sys: 3.97 ms, total: 24.8 s\n+Wall time: 24.8 s\n+15\n+\n+Notre Dame\n+sage: %time m.diameter(algorithm=\"DiFUB\")\n+CPU times: user 218 ms, sys: 5 \u00b5s, total: 218 ms\n+Wall time: 218 ms\n+93\n+sage: %time m.diameter()\n+CPU times: user 43.4 s, sys: 3.98 ms, total: 43.4 s\n+Wall time: 43.4 s\n+93\n+```\n+\n \n \n Comment: 1\n``````\n",
    "created_at": "2020-03-27T23:34:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29422#issuecomment-440311",
    "user": "https://github.com/ArchitWagle"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,52 @@
+ Implemented the algorithm described in 
+https://courses.cs.ut.ee/MTAT.03.238/2014_fall/uploads/Main/diameter.pdf
+for unweighed directed real graphs.
+
+
+```
+Epinions social network
+sage: %time m.diameter(algorithm="DiFUB")
+CPU times: user 304 ms, sys: 4.02 ms, total: 308 ms
+Wall time: 305 ms
+16
+
+sage: %time m.diameter()
+CPU times: user 28min 55s, sys: 35.4 ms, total: 28min 55s
+Wall time: 28min 55s
+16
+
+
+Enron
+sage: %time m.diameter(algorithm="DiFUB")
+CPU times: user 208 ms, sys: 0 ns, total: 208 ms
+Wall time: 207 ms
+13
+sage: %time m.diameter()
+CPU times: user 27.2 s, sys: 35.9 ms, total: 27.2 s
+Wall time: 27.2 s
+13
+
+slashdot
+sage: %time m.diameter(algorithm="DiFUB")
+CPU times: user 221 ms, sys: 1 µs, total: 221 ms
+Wall time: 220 ms
+15
+sage: %time m.diameter()
+CPU times: user 24.8 s, sys: 3.97 ms, total: 24.8 s
+Wall time: 24.8 s
+15
+
+Notre Dame
+sage: %time m.diameter(algorithm="DiFUB")
+CPU times: user 218 ms, sys: 5 µs, total: 218 ms
+Wall time: 218 ms
+93
+sage: %time m.diameter()
+CPU times: user 43.4 s, sys: 3.98 ms, total: 43.4 s
+Wall time: 43.4 s
+93
+```
+
 
 
 Comment: 1
``````




---

archive/issue_comments_440312.json:
```json
{
    "body": "Changing keywords from \"\" to \"gsoc, diameter,DiFUB\".",
    "created_at": "2020-03-27T23:34:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29422#issuecomment-440312",
    "user": "https://github.com/ArchitWagle"
}
```

Changing keywords from "" to "gsoc, diameter,DiFUB".



---

archive/issue_comments_440313.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-03-27T23:34:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29422#issuecomment-440313",
    "user": "https://github.com/ArchitWagle"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_440314.json:
```json
{
    "body": "<a id='comment:3'></a>Please note that I have implemented `2dsweep` algorithm for lower bound on diameter computation of unweighted directed graph in ticket #29351(positive reviewed), which might be useful for you. You can have a look at it and hopefully use it here to avoid any merge conflict.\\\\\nRegards\\\\\nVipul",
    "created_at": "2020-03-28T16:34:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29422#issuecomment-440314",
    "user": "https://github.com/vipul79321"
}
```

<a id='comment:3'></a>Please note that I have implemented `2dsweep` algorithm for lower bound on diameter computation of unweighted directed graph in ticket #29351(positive reviewed), which might be useful for you. You can have a look at it and hopefully use it here to avoid any merge conflict.\\
Regards\\
Vipul



---

archive/issue_comments_440315.json:
```json
{
    "body": "<a id='comment:4'></a>Replying to [comment:3 gh-vipul79321]:\n> Please note that I have implemented `2dsweep` algorithm for lower bound on diameter computation of unweighted directed graph in ticket #29351(positive reviewed), which might be useful for you. You can have a look at it and hopefully use it here to avoid any merge conflict.\\\\\n> Regards\\\\\n> Vipul\n\n\nSure, The implementation of 2dsweep at #29351 is cleaner. I will use it over here.\nRegards,\nMadhav Wagle",
    "created_at": "2020-03-28T17:26:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29422#issuecomment-440315",
    "user": "https://github.com/ArchitWagle"
}
```

<a id='comment:4'></a>Replying to [comment:3 gh-vipul79321]:
> Please note that I have implemented `2dsweep` algorithm for lower bound on diameter computation of unweighted directed graph in ticket #29351(positive reviewed), which might be useful for you. You can have a look at it and hopefully use it here to avoid any merge conflict.\\
> Regards\\
> Vipul


Sure, The implementation of 2dsweep at #29351 is cleaner. I will use it over here.
Regards,
Madhav Wagle



---

archive/issue_comments_440316.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2020-03-28T20:45:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29422#issuecomment-440316",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_440317.json:
```json
{
    "body": "<a id='comment:6'></a>The code functionality, formatting, and test cases look good.\n\nHowever, building the documentation using the command:\n\n```\n ./sage --docbuild 'reference/graphs' html\n```\n\nreturns that the citations [Broder2000] and [CGLM2014] are not found.",
    "created_at": "2020-03-29T20:58:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29422#issuecomment-440317",
    "user": "https://github.com/puzzleweaver"
}
```

<a id='comment:6'></a>The code functionality, formatting, and test cases look good.

However, building the documentation using the command:

```
 ./sage --docbuild 'reference/graphs' html
```

returns that the citations [Broder2000] and [CGLM2014] are not found.



---

archive/issue_comments_440318.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-03-29T20:58:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29422#issuecomment-440318",
    "user": "https://github.com/puzzleweaver"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_440319.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-29T21:38:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29422#issuecomment-440319",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_440320.json:
```json
{
    "body": "<a id='comment:8'></a>When adding references, you sometimes have to `make doc-clean` and rebuild all the full documentation.\n\nIf I understand well, you have rebased the ticket on #28351, right ? If so, you must add the dependency in the appropriate field.\n\nPlease use the memory allocator, as is done in 2Dsweep. This way, allocated arrays will be freed before returning the result. You also have to ensure that you free the bit sets.\n\nInstead of `tmp = max([simple_BFS(g, j, distances, NULL, waiting_list, seen) for j in Bb[i]])`, you should make a for loop to stop iteration if the diameter is proved.\n\nMore generally, I don't understand why you use `Bf` and `Bb`. The waiting list gives you the order of the vertices. The last vertex in waiting list is at largest distance from the source. So you have to iterate from last to first vertex.",
    "created_at": "2020-03-31T11:12:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29422#issuecomment-440320",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:8'></a>When adding references, you sometimes have to `make doc-clean` and rebuild all the full documentation.

If I understand well, you have rebased the ticket on #28351, right ? If so, you must add the dependency in the appropriate field.

Please use the memory allocator, as is done in 2Dsweep. This way, allocated arrays will be freed before returning the result. You also have to ensure that you free the bit sets.

Instead of `tmp = max([simple_BFS(g, j, distances, NULL, waiting_list, seen) for j in Bb[i]])`, you should make a for loop to stop iteration if the diameter is proved.

More generally, I don't understand why you use `Bf` and `Bb`. The waiting list gives you the order of the vertices. The last vertex in waiting list is at largest distance from the source. So you have to iterate from last to first vertex.



---

archive/issue_comments_440321.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [comment:8 dcoudert]:\n\n> If I understand well, you have rebased the ticket on #28351, right ? If so, you must add the dependency in the appropriate field.\n> \n> Please use the memory allocator, as is done in 2Dsweep. This way, allocated arrays will be freed before returning the result. You also have to ensure that you free the bit sets.\n> \n\n\\\\\nSure, I will make all the above changes \\\\ \n\\\\\n\n> Instead of `tmp = max([simple_BFS(g, j, distances, NULL, waiting_list, seen) for j in Bb[i]])`, you should make a for loop to stop iteration if the diameter is proved.\n> \n> More generally, I don't understand why you use `Bf` and `Bb`. The waiting list gives you the order of the vertices. The last vertex in waiting list is at largest distance from the source. So you have to iterate from last to first vertex.\n> \n\n\\\\\nI did the stuff with the `Bf` and `Bb` for my implementation to resemble the pseudo code mentioned in  https://courses.cs.ut.ee/MTAT.03.238/2014_fall/uploads/Main/diameter.pdf. \n\\\\\nBut I will try to do it using the reversed waiting list, since that would also be consistent with the existing undirected iFUB implementation in sage.\n\n\\\\ Thanks for the suggestions,\\\\\nMadhav",
    "created_at": "2020-03-31T21:23:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29422#issuecomment-440321",
    "user": "https://github.com/ArchitWagle"
}
```

<a id='comment:9'></a>Replying to [comment:8 dcoudert]:

> If I understand well, you have rebased the ticket on #28351, right ? If so, you must add the dependency in the appropriate field.
> 
> Please use the memory allocator, as is done in 2Dsweep. This way, allocated arrays will be freed before returning the result. You also have to ensure that you free the bit sets.
> 

\\
Sure, I will make all the above changes \\ 
\\

> Instead of `tmp = max([simple_BFS(g, j, distances, NULL, waiting_list, seen) for j in Bb[i]])`, you should make a for loop to stop iteration if the diameter is proved.
> 
> More generally, I don't understand why you use `Bf` and `Bb`. The waiting list gives you the order of the vertices. The last vertex in waiting list is at largest distance from the source. So you have to iterate from last to first vertex.
> 

\\
I did the stuff with the `Bf` and `Bb` for my implementation to resemble the pseudo code mentioned in  https://courses.cs.ut.ee/MTAT.03.238/2014_fall/uploads/Main/diameter.pdf. 
\\
But I will try to do it using the reversed waiting list, since that would also be consistent with the existing undirected iFUB implementation in sage.

\\ Thanks for the suggestions,\\
Madhav



---

archive/issue_comments_440322.json:
```json
{
    "body": "<a id='comment:11'></a>Replying to [comment:8 dcoudert]:\n> \n> Instead of `tmp = max([simple_BFS(g, j, distances, NULL, waiting_list, seen) for j in Bb[i]])`, you should make a for loop to stop iteration if the diameter is proved.\n> \n\nBut the \n\n> More generally, I don't understand why you use `Bf` and `Bb`. The waiting list gives you the order of the vertices. The last vertex in waiting list is at largest distance from the source. So you have to iterate from last to first vertex.\n> \n\n\\\\\nI tried it using just the waiting list only\n\n```\n    eccb_m = simple_BFS(g_rev, m, layer_1, NULL, waiting_list, seen)\n    for i in range(n):\n        order_1[i] = waiting_list[n - i - 1]\n        \n\n    eccf_m = simple_BFS(g, m, layer_2, NULL, waiting_list, seen)\n    for i in range(n):\n        order_2[i] = waiting_list[n - i - 1]\n\n    i = 0\n    LB = max(LB,eccf_m,eccb_m)\n    \n    while(layer_1[order_1[i]]+layer_2[order_2[i]] > LB and i<n ):\n        tmp =  simple_BFS(g, order_1[i], distances, NULL, waiting_list, seen)\n        tmp_1=  simple_BFS(g_rev, order_2[i], distances, NULL, waiting_list, seen)\n        i+=1\n        LB = max(tmp,tmp_1,LB)        \n```\n\nAnd although the above code is giving correct answers, there is a degradation in performance compared to my previous approach(more bfs calls on an average).\n\nregards, \\\\\nMadhav",
    "created_at": "2020-04-01T15:02:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29422#issuecomment-440322",
    "user": "https://github.com/ArchitWagle"
}
```

<a id='comment:11'></a>Replying to [comment:8 dcoudert]:
> 
> Instead of `tmp = max([simple_BFS(g, j, distances, NULL, waiting_list, seen) for j in Bb[i]])`, you should make a for loop to stop iteration if the diameter is proved.
> 

But the 

> More generally, I don't understand why you use `Bf` and `Bb`. The waiting list gives you the order of the vertices. The last vertex in waiting list is at largest distance from the source. So you have to iterate from last to first vertex.
> 

\\
I tried it using just the waiting list only

```
    eccb_m = simple_BFS(g_rev, m, layer_1, NULL, waiting_list, seen)
    for i in range(n):
        order_1[i] = waiting_list[n - i - 1]
        

    eccf_m = simple_BFS(g, m, layer_2, NULL, waiting_list, seen)
    for i in range(n):
        order_2[i] = waiting_list[n - i - 1]

    i = 0
    LB = max(LB,eccf_m,eccb_m)
    
    while(layer_1[order_1[i]]+layer_2[order_2[i]] > LB and i<n ):
        tmp =  simple_BFS(g, order_1[i], distances, NULL, waiting_list, seen)
        tmp_1=  simple_BFS(g_rev, order_2[i], distances, NULL, waiting_list, seen)
        i+=1
        LB = max(tmp,tmp_1,LB)        
```

And although the above code is giving correct answers, there is a degradation in performance compared to my previous approach(more bfs calls on an average).

regards, \\
Madhav



---

archive/issue_comments_440323.json:
```json
{
    "body": "<a id='comment:12'></a>The \"error\" is that you do BFS from vertices that may be at different forward/backward distances from m. That's the interest of using Bf and Bb. However, an alternative is to do something like that (not completely sure of the bounds).\n\n```\nd = max(eccb_m, eccf_m)\ni1 = 0\ni2 = 0\nwhile (layer_1[order_1[i1]]+layer_2[order_2[i2]] > LB and d > 0):\n    if ib < n and layer_1[order_1[i1]] >= d:\n        LB = max(LB, simple_BFS(g, order_1[i1], distances, NULL, waiting_list, seen))\n        i1 += 1\n    if i2 < n and layer_1[order_2[i2]] >= d:\n        LB = max(LB, simple_BFS(g, order_2[i2], distances, NULL, waiting_list, seen))\n        i2 += 1\n    if ib < n and layer_1[order_1[i1]] < d and  i2 < n and layer_1[order_2[i2]] < d:\n        d -= 1\n```",
    "created_at": "2020-04-02T08:45:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29422#issuecomment-440323",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:12'></a>The "error" is that you do BFS from vertices that may be at different forward/backward distances from m. That's the interest of using Bf and Bb. However, an alternative is to do something like that (not completely sure of the bounds).

```
d = max(eccb_m, eccf_m)
i1 = 0
i2 = 0
while (layer_1[order_1[i1]]+layer_2[order_2[i2]] > LB and d > 0):
    if ib < n and layer_1[order_1[i1]] >= d:
        LB = max(LB, simple_BFS(g, order_1[i1], distances, NULL, waiting_list, seen))
        i1 += 1
    if i2 < n and layer_1[order_2[i2]] >= d:
        LB = max(LB, simple_BFS(g, order_2[i2], distances, NULL, waiting_list, seen))
        i2 += 1
    if ib < n and layer_1[order_1[i1]] < d and  i2 < n and layer_1[order_2[i2]] < d:
        d -= 1
```



---

archive/issue_comments_440324.json:
```json
{
    "body": "<a id='comment:13'></a>Replying to [comment:12 dcoudert]:\n> The \"error\" is that you do BFS from vertices that may be at different forward/backward distances from m. That's the interest of using Bf and Bb. However, an alternative is to do something like that (not completely sure of the bounds).\n> \n> ```\n> d = max(eccb_m, eccf_m)\n> i1 = 0\n> i2 = 0\n> while (layer_1[order_1[i1]]+layer_2[order_2[i2]] > LB and d > 0):\n>     if ib < n and layer_1[order_1[i1]] >= d:\n>         LB = max(LB, simple_BFS(g, order_1[i1], distances, NULL, waiting_list, seen))\n>         i1 += 1\n>     if i2 < n and layer_1[order_2[i2]] >= d:\n>         LB = max(LB, simple_BFS(g, order_2[i2], distances, NULL, waiting_list, seen))\n>         i2 += 1\n>     if ib < n and layer_1[order_1[i1]] < d and  i2 < n and layer_1[order_2[i2]] < d:\n>         d -= 1\n> ```\n\n\nOh ok, I will try the level wise approach without the Bf, Bb then.\nregards,\nMadhav Wagle",
    "created_at": "2020-04-02T09:37:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29422#issuecomment-440324",
    "user": "https://github.com/ArchitWagle"
}
```

<a id='comment:13'></a>Replying to [comment:12 dcoudert]:
> The "error" is that you do BFS from vertices that may be at different forward/backward distances from m. That's the interest of using Bf and Bb. However, an alternative is to do something like that (not completely sure of the bounds).
> 
> ```
> d = max(eccb_m, eccf_m)
> i1 = 0
> i2 = 0
> while (layer_1[order_1[i1]]+layer_2[order_2[i2]] > LB and d > 0):
>     if ib < n and layer_1[order_1[i1]] >= d:
>         LB = max(LB, simple_BFS(g, order_1[i1], distances, NULL, waiting_list, seen))
>         i1 += 1
>     if i2 < n and layer_1[order_2[i2]] >= d:
>         LB = max(LB, simple_BFS(g, order_2[i2], distances, NULL, waiting_list, seen))
>         i2 += 1
>     if ib < n and layer_1[order_1[i1]] < d and  i2 < n and layer_1[order_2[i2]] < d:
>         d -= 1
> ```


Oh ok, I will try the level wise approach without the Bf, Bb then.
regards,
Madhav Wagle



---

archive/issue_events_074994.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29422#event-74994"
}
```



---

archive/issue_comments_440325.json:
```json
{
    "body": "<a id='comment:14'></a>Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.",
    "created_at": "2020-04-14T19:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29422#issuecomment-440325",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.



---

archive/issue_comments_440326.json:
```json
{
    "body": "Changing keywords from \"gsoc, diameter,DiFUB\" to \"gsoc2020\".",
    "created_at": "2020-06-27T06:51:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29422#issuecomment-440326",
    "user": "https://github.com/vipul79321"
}
```

Changing keywords from "gsoc, diameter,DiFUB" to "gsoc2020".



---

archive/issue_comments_440327.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-06-27T06:51:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29422#issuecomment-440327",
    "user": "https://github.com/vipul79321"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_440328.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-27T06:51:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29422#issuecomment-440328",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_440329.json:
```json
{
    "body": "<a id='comment:17'></a>I have added DiFUB method for unweighted Directed graphs.\n\nI am kind of uncertain about algorithm's description in code's comments. Please have a look at it.\n\nAny suggestion will be helpful :)",
    "created_at": "2020-06-27T06:54:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29422#issuecomment-440329",
    "user": "https://github.com/vipul79321"
}
```

<a id='comment:17'></a>I have added DiFUB method for unweighted Directed graphs.

I am kind of uncertain about algorithm's description in code's comments. Please have a look at it.

Any suggestion will be helpful :)



---

archive/issue_comments_440330.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-27T12:05:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29422#issuecomment-440330",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_440331.json:
```json
{
    "body": "<a id='comment:19'></a>It remains to expose the algorithm in `digraph.py` and do some tests to ensure that nothing is forgotten.",
    "created_at": "2020-06-27T12:13:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29422#issuecomment-440331",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:19'></a>It remains to expose the algorithm in `digraph.py` and do some tests to ensure that nothing is forgotten.



---

archive/issue_comments_440332.json:
```json
{
    "body": "<a id='comment:20'></a>Replying to [comment:19 dcoudert]:\n> It remains to expose the algorithm in `digraph.py` and do some tests to ensure that nothing is forgotten.\n\n\nshall we work on its weighted version too, it will also require weighted version of 2Dsweep?",
    "created_at": "2020-06-29T07:12:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29422#issuecomment-440332",
    "user": "https://github.com/vipul79321"
}
```

<a id='comment:20'></a>Replying to [comment:19 dcoudert]:
> It remains to expose the algorithm in `digraph.py` and do some tests to ensure that nothing is forgotten.


shall we work on its weighted version too, it will also require weighted version of 2Dsweep?



---

archive/issue_comments_440333.json:
```json
{
    "body": "<a id='comment:21'></a>The weighted version can be done in another ticket.\n\nThe patchbot reports a small issue. Please check.",
    "created_at": "2020-06-29T07:48:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29422#issuecomment-440333",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:21'></a>The weighted version can be done in another ticket.

The patchbot reports a small issue. Please check.



---

archive/issue_comments_440334.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-30T08:00:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29422#issuecomment-440334",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_440335.json:
```json
{
    "body": "<a id='comment:23'></a>Replying to [comment:21 dcoudert]:\n> The weighted version can be done in another ticket.\n\nok\n> \n> The patchbot reports a small issue. Please check.\n\nDone",
    "created_at": "2020-06-30T08:02:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29422#issuecomment-440335",
    "user": "https://github.com/vipul79321"
}
```

<a id='comment:23'></a>Replying to [comment:21 dcoudert]:
> The weighted version can be done in another ticket.

ok
> 
> The patchbot reports a small issue. Please check.

Done



---

archive/issue_comments_440336.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-06-30T08:35:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29422#issuecomment-440336",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_440337.json:
```json
{
    "body": "<a id='comment:24'></a>LGTM.",
    "created_at": "2020-06-30T08:35:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29422#issuecomment-440337",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:24'></a>LGTM.



---

archive/issue_comments_440338.json:
```json
{
    "body": "<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2020-07-06T17:13:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29422#issuecomment-440338",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_440339.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2020-07-06T17:13:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29422#issuecomment-440339",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_440340.json:
```json
{
    "body": "<a id='comment:26'></a>Replying to [comment:25 git]:\n> Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n> |                                                                                                                                           |                      |\n> |-------------------------------------------------------------------------------------------------------------------------------------------|----------------------|\n> |[ed9e424](https://git.sagemath.org/sage.git/commit/?id=ed9e4241760f8a8c636593523e372e4f4907e7b6)|`patchbot issue fixed`|\n\n\nFixed minor issue.",
    "created_at": "2020-07-06T17:15:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29422#issuecomment-440340",
    "user": "https://github.com/vipul79321"
}
```

<a id='comment:26'></a>Replying to [comment:25 git]:
> Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
> |                                                                                                                                           |                      |
> |-------------------------------------------------------------------------------------------------------------------------------------------|----------------------|
> |[ed9e424](https://git.sagemath.org/sage.git/commit/?id=ed9e4241760f8a8c636593523e372e4f4907e7b6)|`patchbot issue fixed`|


Fixed minor issue.



---

archive/issue_comments_440341.json:
```json
{
    "body": "<a id='comment:27'></a>LGTM",
    "created_at": "2020-07-07T08:16:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29422#issuecomment-440341",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:27'></a>LGTM



---

archive/issue_comments_440342.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-07-07T08:16:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29422#issuecomment-440342",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_440343.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-07-10T19:34:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29422#issuecomment-440343",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_074995.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-07-10T19:34:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29422#event-74995"
}
```



---

archive/issue_comments_440344.json:
```json
{
    "body": "<a id='comment:29'></a>Corrected my name :)",
    "created_at": "2021-03-13T05:05:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29422#issuecomment-440344",
    "user": "https://github.com/ArchitWagle"
}
```

<a id='comment:29'></a>Corrected my name :)
