# Issue 29042: Sort dictionaries for doctests independent of ipythons pretty print

archive/issues_028805.json:
```json
{
    "assignees": [],
    "body": "This is a prerequisite for #28197 - ipython does no longer honor the DICT_IS_ORDERED variable since 7.10 [1].\n\n[1] https://github.com/ipython/ipython/commit/dffa2c33dea3ecc09256a66a6ddbc876ce0629a9\n\nFor doctesting we overwrite the default pretty print function for dictionaries to sort the keys and behave exactly as before.\n\nCC:  @jhpalmieri @dimpase @tscrim @antonio-rojas\n\nBranch/Commit: **[68b10e1](https://github.com/sagemath/sagetrac-mirror/commit/68b10e1e6665892edad775e6b9b18e93afc3d637)**\n\nReviewer: **Fran\u00e7ois Bissey**\n\nAuthor: **Jonathan Kliem, Antonio Rojas**\n\nComponent: **refactoring**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29042_\n\n",
    "closed_at": "2020-06-21T22:37:31Z",
    "created_at": "2020-01-18T23:11:28Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/refactoring",
        "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Sort dictionaries for doctests independent of ipythons pretty print",
    "type": "issue",
    "updated_at": "2020-06-21T22:37:31Z",
    "url": "https://github.com/sagemath/sage/issues/29042",
    "user": "https://github.com/antonio-rojas"
}
```
This is a prerequisite for #28197 - ipython does no longer honor the DICT_IS_ORDERED variable since 7.10 [1].

[1] https://github.com/ipython/ipython/commit/dffa2c33dea3ecc09256a66a6ddbc876ce0629a9

For doctesting we overwrite the default pretty print function for dictionaries to sort the keys and behave exactly as before.

CC:  @jhpalmieri @dimpase @tscrim @antonio-rojas

Branch/Commit: **[68b10e1](https://github.com/sagemath/sagetrac-mirror/commit/68b10e1e6665892edad775e6b9b18e93afc3d637)**

Reviewer: **François Bissey**

Author: **Jonathan Kliem, Antonio Rojas**

Component: **refactoring**

_Issue created by migration from https://trac.sagemath.org/ticket/29042_





---

archive/issue_events_399095.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2020-01-18T23:11:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29042#event-399095"
}
```



---

archive/issue_events_399096.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2020-01-18T23:11:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29042#event-399096"
}
```



---

archive/issue_comments_454339.json:
```json
{
    "body": "Branch: **[u/arojas/remove_sorting_of_dicts](https://github.com/sagemath/sagetrac-mirror/tree/u/arojas/remove_sorting_of_dicts)**",
    "created_at": "2020-01-18T23:12:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454339",
    "user": "https://github.com/antonio-rojas"
}
```

Branch: **[u/arojas/remove_sorting_of_dicts](https://github.com/sagemath/sagetrac-mirror/tree/u/arojas/remove_sorting_of_dicts)**



---

archive/issue_comments_454340.json:
```json
{
    "body": "Author: **Antonio Rojas**",
    "created_at": "2020-01-18T23:15:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454340",
    "user": "https://github.com/antonio-rojas"
}
```

Author: **Antonio Rojas**



---

archive/issue_comments_454341.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,4 @@\n+This is a prerequisite for #28197 - ipython does no longer honor the DICT_IS_ORDERED variable since 7.10 [1] so tests output needs to be updated. This will break the affected doctests (but not functionality) on python2\n \n+\n+[1] https://github.com/ipython/ipython/commit/dffa2c33dea3ecc09256a66a6ddbc876ce0629a9\n``````\n",
    "created_at": "2020-01-18T23:15:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454341",
    "user": "https://github.com/antonio-rojas"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,4 @@
+This is a prerequisite for #28197 - ipython does no longer honor the DICT_IS_ORDERED variable since 7.10 [1] so tests output needs to be updated. This will break the affected doctests (but not functionality) on python2
 
+
+[1] https://github.com/ipython/ipython/commit/dffa2c33dea3ecc09256a66a6ddbc876ce0629a9
``````




---

archive/issue_comments_454342.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/264d83a88a5c661bfbf89366ec65b2f510c7eecb\">264d83a</a></td><td><code>Remove dict sorting and update doctests</code></td></tr></table>\n",
    "created_at": "2020-01-18T23:15:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454342",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/264d83a88a5c661bfbf89366ec65b2f510c7eecb">264d83a</a></td><td><code>Remove dict sorting and update doctests</code></td></tr></table>




---

archive/issue_events_399097.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2020-01-18T23:15:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29042#event-399097"
}
```



---

archive/issue_comments_454343.json:
```json
{
    "body": "Commit: **[264d83a](https://github.com/sagemath/sagetrac-mirror/commit/264d83a88a5c661bfbf89366ec65b2f510c7eecb)**",
    "created_at": "2020-01-18T23:15:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454343",
    "user": "https://github.com/antonio-rojas"
}
```

Commit: **[264d83a](https://github.com/sagemath/sagetrac-mirror/commit/264d83a88a5c661bfbf89366ec65b2f510c7eecb)**



---

archive/issue_events_399098.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2020-01-18T23:15:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "label": "https://github.com/sagemath/sage/labels/refactoring",
    "label_color": "696969",
    "label_name": "refactoring",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29042#event-399098"
}
```



---

archive/issue_comments_454344.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThis is going to be quite fragile, because now you're encoding a rather arbitrary dictionary order into the doctests, where no order matters (in py3 it's probably insertion order; a change in code somewhere that changes insertion order would break tests again!).\n\nWhy not introduce a little utility function `print_dict_sorted` that recovers the sorted dictionaries? It would amount to\n\n```\nsorted( D.items(), key=lambda t:t[0])\n```\nbut with an appropriate routine you could print the result in a more dict-compatible way so that you can fix each doctest with a single-line edit.\n\nThat way you end up with a more future-proof fix, and it makes total sense to insert such a print routine at least into the doctest namespace (but then almost by necessity also in the interactive namespace)",
    "created_at": "2020-01-19T00:44:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454344",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:3" align="right">comment:3</div>

This is going to be quite fragile, because now you're encoding a rather arbitrary dictionary order into the doctests, where no order matters (in py3 it's probably insertion order; a change in code somewhere that changes insertion order would break tests again!).

Why not introduce a little utility function `print_dict_sorted` that recovers the sorted dictionaries? It would amount to

```
sorted( D.items(), key=lambda t:t[0])
```
but with an appropriate routine you could print the result in a more dict-compatible way so that you can fix each doctest with a single-line edit.

That way you end up with a more future-proof fix, and it makes total sense to insert such a print routine at least into the doctest namespace (but then almost by necessity also in the interactive namespace)



---

archive/issue_comments_454345.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nSounds reasonable but that's beyond my ability, so someone else will have to do it.",
    "created_at": "2020-01-25T13:09:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454345",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:4" align="right">comment:4</div>

Sounds reasonable but that's beyond my ability, so someone else will have to do it.



---

archive/issue_comments_454346.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThe idiom `sorted(D.items())` is already used in several places in the doctests. Alternatively,\n\n```\nsage: from pprint import pprint\nsage: pprint(D)\n```\ncould be used to print a dict sorted by keys, which also seems to take care of nested dictionaries.\n\nOn the other hand, if one really wants to keep the sorted output of dicts in general, another solution would be to add a displayhook during doctests that imitates what is currently done by IPython. This would be more robust than using `pprint` everywhere, as it is likely that new doctests depending on insertion order would be introduced in the long run otherwise.",
    "created_at": "2020-01-25T21:02:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454346",
    "user": "https://github.com/mwageringel"
}
```

<div id="comment:5" align="right">comment:5</div>

The idiom `sorted(D.items())` is already used in several places in the doctests. Alternatively,

```
sage: from pprint import pprint
sage: pprint(D)
```
could be used to print a dict sorted by keys, which also seems to take care of nested dictionaries.

On the other hand, if one really wants to keep the sorted output of dicts in general, another solution would be to add a displayhook during doctests that imitates what is currently done by IPython. This would be more robust than using `pprint` everywhere, as it is likely that new doctests depending on insertion order would be introduced in the long run otherwise.



---

archive/issue_comments_454347.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@mwageringel](#comment:5):\n> The idiom `sorted(D.items())` is already used in several places in the doctests. Alternatively,\n> \n> ```\n> sage: from pprint import pprint\n> sage: pprint(D)\n> ```\n> could be used to print a dict sorted by keys, which also seems to take care of nested dictionaries\n\nThanks for the suggestion! The routine I was thinking about already exists!. I think in \"examples\" doctests, the `pprint` is a little more desirable, because its output looks like a dictionary: reading the example with the printed output barely has any additional cognitive load. For that purpose, it might be worth considering to inject `pprint` in the global namespace by default. I think it serves a real purpose now that IPython dict printing is no longer sorted.\n\n> On the other hand, if one really wants to keep the sorted output of dicts in general, another solution would be to add a displayhook during doctests that imitates what is currently done by IPython. This would be more robust than using `pprint` everywhere, as it is likely that new doctests depending on insertion order would be introduced in the long run otherwise.\n\nTrue, but that would cause a deviation between doctest output and the output that the actual example in the command line would give. The `IPython` reason for dispensing with sorting dictionaries is a good one, so I would not be in favour of bringing back that hook in general.\n\nI also think that there are legitimate reasons to make doctests that do print the dict in the \"Py3\" order, for instance if used to compare with the iteration order. In those cases it would be possible to formulate the doctests differently, no doubt, but I would rather not preempt such use. I think putting up with having to use `pprint` is reasonable, with the price that it's a magnet for fragile doctests (but in reality, doctests for lots of more complicated routines are hard to make non-fragile. By comparison I think the dict issue is relatively mild.",
    "created_at": "2020-01-26T04:15:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454347",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@mwageringel](#comment:5):
> The idiom `sorted(D.items())` is already used in several places in the doctests. Alternatively,
> 
> ```
> sage: from pprint import pprint
> sage: pprint(D)
> ```
> could be used to print a dict sorted by keys, which also seems to take care of nested dictionaries

Thanks for the suggestion! The routine I was thinking about already exists!. I think in "examples" doctests, the `pprint` is a little more desirable, because its output looks like a dictionary: reading the example with the printed output barely has any additional cognitive load. For that purpose, it might be worth considering to inject `pprint` in the global namespace by default. I think it serves a real purpose now that IPython dict printing is no longer sorted.

> On the other hand, if one really wants to keep the sorted output of dicts in general, another solution would be to add a displayhook during doctests that imitates what is currently done by IPython. This would be more robust than using `pprint` everywhere, as it is likely that new doctests depending on insertion order would be introduced in the long run otherwise.

True, but that would cause a deviation between doctest output and the output that the actual example in the command line would give. The `IPython` reason for dispensing with sorting dictionaries is a good one, so I would not be in favour of bringing back that hook in general.

I also think that there are legitimate reasons to make doctests that do print the dict in the "Py3" order, for instance if used to compare with the iteration order. In those cases it would be possible to formulate the doctests differently, no doubt, but I would rather not preempt such use. I think putting up with having to use `pprint` is reasonable, with the price that it's a magnet for fragile doctests (but in reality, doctests for lots of more complicated routines are hard to make non-fragile. By comparison I think the dict issue is relatively mild.



---

archive/issue_comments_454348.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@nbruin](#comment:6):\n> For that purpose, it might be worth considering to inject `pprint` in the global namespace by default. I think it serves a real purpose now that IPython dict printing is no longer sorted.\n\nIn that case, rather than injecting `pprint`, it might be better to improve the pretty print function that already exists in the global namespace, for example by adding a new keyword `pretty_print(D, sort=True)`. IMO, this makes it clearer why the pretty printing is used. This is synonymous to `show(D, sort=True)`.\n\n> True, but that would cause a deviation between doctest output and the output that the actual example in the command line would give. The `IPython` reason for dispensing with sorting dictionaries is a good one, so I would not be in favour of bringing back that hook in general.\n\nThis deviation already exists, as the IPython sorting of dicts is only active during doctests. That said though, I do not have a strong preference for either solution \u2013 though I agree it is generally desirable to keep doctest output as close as possible to the actual output.",
    "created_at": "2020-01-26T17:11:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454348",
    "user": "https://github.com/mwageringel"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@nbruin](#comment:6):
> For that purpose, it might be worth considering to inject `pprint` in the global namespace by default. I think it serves a real purpose now that IPython dict printing is no longer sorted.

In that case, rather than injecting `pprint`, it might be better to improve the pretty print function that already exists in the global namespace, for example by adding a new keyword `pretty_print(D, sort=True)`. IMO, this makes it clearer why the pretty printing is used. This is synonymous to `show(D, sort=True)`.

> True, but that would cause a deviation between doctest output and the output that the actual example in the command line would give. The `IPython` reason for dispensing with sorting dictionaries is a good one, so I would not be in favour of bringing back that hook in general.

This deviation already exists, as the IPython sorting of dicts is only active during doctests. That said though, I do not have a strong preference for either solution – though I agree it is generally desirable to keep doctest output as close as possible to the actual output.



---

archive/issue_comments_454349.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@mwageringel](#comment:7):\n\n> In that case, rather than injecting `pprint`, it might be better to improve the pretty print function that already exists in the global namespace, for example by adding a new keyword `pretty_print(D, sort=True)`. IMO, this makes it clearer why the pretty printing is used. This is synonymous to `show(D, sort=True)`.\n\nIt seems pretty_print aims at a different target: its default is latex output in the command line (that's a bad default), and in general \"this function chooses the highest-quality output supported by the user interface\", so that doesn't quite hit the goals of doctests (which should be concise and human-readable).\n\nIf we do\n\n```\ndm = get_display_manager()\ndm.preferences.text='plain'\n```\nwe end up with better results for our doctesting purposes. But that would be worse than `from pprint import pprint`.",
    "created_at": "2020-01-27T02:43:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454349",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@mwageringel](#comment:7):

> In that case, rather than injecting `pprint`, it might be better to improve the pretty print function that already exists in the global namespace, for example by adding a new keyword `pretty_print(D, sort=True)`. IMO, this makes it clearer why the pretty printing is used. This is synonymous to `show(D, sort=True)`.

It seems pretty_print aims at a different target: its default is latex output in the command line (that's a bad default), and in general "this function chooses the highest-quality output supported by the user interface", so that doesn't quite hit the goals of doctests (which should be concise and human-readable).

If we do

```
dm = get_display_manager()
dm.preferences.text='plain'
```
we end up with better results for our doctesting purposes. But that would be worse than `from pprint import pprint`.



---

archive/issue_comments_454350.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@nbruin](#comment:8):\n> It seems pretty_print aims at a different target: its default is latex output in the command line (that's a bad default), and in general \"this function chooses the highest-quality output supported by the user interface\", so that doesn't quite hit the goals of doctests (which should be concise and human-readable).\n\nI fail to see the rationale behind defaulting to latex, or the intended use case of `pretty_print`. Making a distinction between `%display plain` and `%display None` is bizarre and seems wrong to me. The usual REPL output at least does not make such a distinction (implemented in `sage.repl.rich_output.display_manager.DisplayManager._preferred_text_formatter`).\n\nShould we add `pprint` to the global namespace then? I am not sure this is the best thing to do, but it seems practical. Or just add explicit `from pprint import pprint` statements in the doctests?",
    "created_at": "2020-01-27T18:43:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454350",
    "user": "https://github.com/mwageringel"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@nbruin](#comment:8):
> It seems pretty_print aims at a different target: its default is latex output in the command line (that's a bad default), and in general "this function chooses the highest-quality output supported by the user interface", so that doesn't quite hit the goals of doctests (which should be concise and human-readable).

I fail to see the rationale behind defaulting to latex, or the intended use case of `pretty_print`. Making a distinction between `%display plain` and `%display None` is bizarre and seems wrong to me. The usual REPL output at least does not make such a distinction (implemented in `sage.repl.rich_output.display_manager.DisplayManager._preferred_text_formatter`).

Should we add `pprint` to the global namespace then? I am not sure this is the best thing to do, but it seems practical. Or just add explicit `from pprint import pprint` statements in the doctests?



---

archive/issue_comments_454351.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nIt seems to me that it would be good to discuss this at sage-devel, because it affects all developers.\n\nLet me add that it is unclear to me what the best solution is.  Initially, I liked the idea of `pretty_print(D, sort=True)`.  I think that yet another pretty print function is a bad idea, I find the existence of `show`, `pretty_print`, `ascii_art`, `.pp()` and possibly others confusing enough.",
    "created_at": "2020-01-27T21:32:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454351",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:10" align="right">comment:10</div>

It seems to me that it would be good to discuss this at sage-devel, because it affects all developers.

Let me add that it is unclear to me what the best solution is.  Initially, I liked the idea of `pretty_print(D, sort=True)`.  I think that yet another pretty print function is a bad idea, I find the existence of `show`, `pretty_print`, `ascii_art`, `.pp()` and possibly others confusing enough.



---

archive/issue_comments_454352.json:
```json
{
    "body": "Changed commit from **[264d83a](https://github.com/sagemath/sagetrac-mirror/commit/264d83a88a5c661bfbf89366ec65b2f510c7eecb)** to **[adcc477](https://github.com/sagemath/sagetrac-mirror/commit/adcc47704f9f6725634c671746633a1a1aed663c)**",
    "created_at": "2020-02-03T07:49:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454352",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[264d83a](https://github.com/sagemath/sagetrac-mirror/commit/264d83a88a5c661bfbf89366ec65b2f510c7eecb)** to **[adcc477](https://github.com/sagemath/sagetrac-mirror/commit/adcc47704f9f6725634c671746633a1a1aed663c)**



---

archive/issue_comments_454353.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f75b41f6e9f64a06da7cec5d8340582cd6bc6c4b\">f75b41f</a></td><td><code>Merge branch 'develop' of git://git.sagemath.org/sage into t/29042/remove_sorting_of_dicts</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/adcc47704f9f6725634c671746633a1a1aed663c\">adcc477</a></td><td><code>Fix two new tests in ring_extension.pyx</code></td></tr></table>\n",
    "created_at": "2020-02-03T07:49:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454353",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f75b41f6e9f64a06da7cec5d8340582cd6bc6c4b">f75b41f</a></td><td><code>Merge branch 'develop' of git://git.sagemath.org/sage into t/29042/remove_sorting_of_dicts</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/adcc47704f9f6725634c671746633a1a1aed663c">adcc477</a></td><td><code>Fix two new tests in ring_extension.pyx</code></td></tr></table>




---

archive/issue_comments_454354.json:
```json
{
    "body": "Changed commit from **[adcc477](https://github.com/sagemath/sagetrac-mirror/commit/adcc47704f9f6725634c671746633a1a1aed663c)** to **[1f82c67](https://github.com/sagemath/sagetrac-mirror/commit/1f82c673d1420074b0b9073593d6ab4bc01d7049)**",
    "created_at": "2020-03-02T21:05:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454354",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[adcc477](https://github.com/sagemath/sagetrac-mirror/commit/adcc47704f9f6725634c671746633a1a1aed663c)** to **[1f82c67](https://github.com/sagemath/sagetrac-mirror/commit/1f82c673d1420074b0b9073593d6ab4bc01d7049)**



---

archive/issue_comments_454355.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/81c03c73b04c3f0d9e7647ca4f8dd0a320902686\">81c03c7</a></td><td><code>Merge branch 'develop' of git://git.sagemath.org/sage into t/29042/remove_sorting_of_dicts</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1f82c673d1420074b0b9073593d6ab4bc01d7049\">1f82c67</a></td><td><code>Sync with develop</code></td></tr></table>\n",
    "created_at": "2020-03-02T21:05:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454355",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/81c03c73b04c3f0d9e7647ca4f8dd0a320902686">81c03c7</a></td><td><code>Merge branch 'develop' of git://git.sagemath.org/sage into t/29042/remove_sorting_of_dicts</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1f82c673d1420074b0b9073593d6ab4bc01d7049">1f82c67</a></td><td><code>Sync with develop</code></td></tr></table>




---

archive/issue_comments_454356.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5c36c8761ea119c93dd7ae89a61eb4c16da9995a\">5c36c87</a></td><td><code>Merge 9.1.beta7</code></td></tr></table>\n",
    "created_at": "2020-03-08T18:09:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454356",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5c36c8761ea119c93dd7ae89a61eb4c16da9995a">5c36c87</a></td><td><code>Merge 9.1.beta7</code></td></tr></table>




---

archive/issue_comments_454357.json:
```json
{
    "body": "Changed commit from **[1f82c67](https://github.com/sagemath/sagetrac-mirror/commit/1f82c673d1420074b0b9073593d6ab4bc01d7049)** to **[5c36c87](https://github.com/sagemath/sagetrac-mirror/commit/5c36c8761ea119c93dd7ae89a61eb4c16da9995a)**",
    "created_at": "2020-03-08T18:09:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454357",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1f82c67](https://github.com/sagemath/sagetrac-mirror/commit/1f82c673d1420074b0b9073593d6ab4bc01d7049)** to **[5c36c87](https://github.com/sagemath/sagetrac-mirror/commit/5c36c8761ea119c93dd7ae89a61eb4c16da9995a)**



---

archive/issue_comments_454358.json:
```json
{
    "body": "Changed commit from **[5c36c87](https://github.com/sagemath/sagetrac-mirror/commit/5c36c8761ea119c93dd7ae89a61eb4c16da9995a)** to **[71427f1](https://github.com/sagemath/sagetrac-mirror/commit/71427f10863614bb7130822715ebb201ec087aa6)**",
    "created_at": "2020-03-11T21:29:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454358",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5c36c87](https://github.com/sagemath/sagetrac-mirror/commit/5c36c8761ea119c93dd7ae89a61eb4c16da9995a)** to **[71427f1](https://github.com/sagemath/sagetrac-mirror/commit/71427f10863614bb7130822715ebb201ec087aa6)**



---

archive/issue_comments_454359.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/71427f10863614bb7130822715ebb201ec087aa6\">71427f1</a></td><td><code>Update for 9.1.beta7</code></td></tr></table>\n",
    "created_at": "2020-03-11T21:29:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454359",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/71427f10863614bb7130822715ebb201ec087aa6">71427f1</a></td><td><code>Update for 9.1.beta7</code></td></tr></table>




---

archive/issue_comments_454360.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThis needs rebasing. My own thinking is that calling the structure dictionary lead humans to have an expectation for it to be ordered the way the physical object is. In fact we have look up tables which are very handy for the computer to manipulate but not necessarily  meant for full display. In most case sorting doesn't matter objectively. \n\nSo I am not sure we should compare whole dictionaries for doctests. Size of the dictionary and some key elements should be enough.",
    "created_at": "2020-03-29T01:55:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454360",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:15" align="right">comment:15</div>

This needs rebasing. My own thinking is that calling the structure dictionary lead humans to have an expectation for it to be ordered the way the physical object is. In fact we have look up tables which are very handy for the computer to manipulate but not necessarily  meant for full display. In most case sorting doesn't matter objectively. 

So I am not sure we should compare whole dictionaries for doctests. Size of the dictionary and some key elements should be enough.



---

archive/issue_comments_454361.json:
```json
{
    "body": "Changed commit from **[71427f1](https://github.com/sagemath/sagetrac-mirror/commit/71427f10863614bb7130822715ebb201ec087aa6)** to **[a86697a](https://github.com/sagemath/sagetrac-mirror/commit/a86697aa41c0f45abb25fd589db90bae61e57268)**",
    "created_at": "2020-03-29T08:26:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454361",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[71427f1](https://github.com/sagemath/sagetrac-mirror/commit/71427f10863614bb7130822715ebb201ec087aa6)** to **[a86697a](https://github.com/sagemath/sagetrac-mirror/commit/a86697aa41c0f45abb25fd589db90bae61e57268)**



---

archive/issue_comments_454362.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/55e6360ccd6f1be94ac8a25e7339453d7900dde8\">55e6360</a></td><td><code>Merge branch 'develop' of git://git.sagemath.org/sage into t/29042/remove_sorting_of_dicts</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a86697aa41c0f45abb25fd589db90bae61e57268\">a86697a</a></td><td><code>Merge branch 'develop' of git://git.sagemath.org/sage into t/29042/remove_sorting_of_dicts</code></td></tr></table>\n",
    "created_at": "2020-03-29T08:26:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454362",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/55e6360ccd6f1be94ac8a25e7339453d7900dde8">55e6360</a></td><td><code>Merge branch 'develop' of git://git.sagemath.org/sage into t/29042/remove_sorting_of_dicts</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a86697aa41c0f45abb25fd589db90bae61e57268">a86697a</a></td><td><code>Merge branch 'develop' of git://git.sagemath.org/sage into t/29042/remove_sorting_of_dicts</code></td></tr></table>




---

archive/issue_comments_454363.json:
```json
{
    "body": "Changed commit from **[a86697a](https://github.com/sagemath/sagetrac-mirror/commit/a86697aa41c0f45abb25fd589db90bae61e57268)** to **[7ba1e5f](https://github.com/sagemath/sagetrac-mirror/commit/7ba1e5f4df14e81521e6a03e6bfe887612e2b56d)**",
    "created_at": "2020-03-29T14:17:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454363",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a86697a](https://github.com/sagemath/sagetrac-mirror/commit/a86697aa41c0f45abb25fd589db90bae61e57268)** to **[7ba1e5f](https://github.com/sagemath/sagetrac-mirror/commit/7ba1e5f4df14e81521e6a03e6bfe887612e2b56d)**



---

archive/issue_comments_454364.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ba1e5f4df14e81521e6a03e6bfe887612e2b56d\">7ba1e5f</a></td><td><code>Fix new tests in 9.1.beta9</code></td></tr></table>\n",
    "created_at": "2020-03-29T14:17:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454364",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ba1e5f4df14e81521e6a03e6bfe887612e2b56d">7ba1e5f</a></td><td><code>Fix new tests in 9.1.beta9</code></td></tr></table>




---

archive/issue_comments_454365.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@kiwifb](#comment:15):\n> My own thinking is that calling the structure dictionary lead humans to have an expectation for it to be ordered the way the physical object is. In fact we have look up tables which are very handy for the computer to manipulate but not necessarily  meant for full display. In most case sorting doesn't matter objectively. \n> \n> So I am not sure we should compare whole dictionaries for doctests. Size of the dictionary and some key elements should be enough.\n\nI agree that generally doctests should be focussed on testing very specific things rather than entire dictionaries. Rewriting all these doctests case-by-case so that dictionaries are not printed anymore seems like a huge task though.\n\nAs the current patch also seems to fail with 32-bit, it still seems to me that the simplest approach to move forward with this is to extend `pretty_print` by a sort keyword. A first step for this is #29136, needing review, which stops `pretty_print` from outputting latex on the command line.\n\nFor reference, this problem was discussed in this [thread on devel](https://groups.google.com/d/msg/sage-devel/fXrv4JC6NEI/LwIcVb5EEwAJ) and there does not seem to be much disagreement about this.",
    "created_at": "2020-04-05T14:22:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454365",
    "user": "https://github.com/mwageringel"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@kiwifb](#comment:15):
> My own thinking is that calling the structure dictionary lead humans to have an expectation for it to be ordered the way the physical object is. In fact we have look up tables which are very handy for the computer to manipulate but not necessarily  meant for full display. In most case sorting doesn't matter objectively. 
> 
> So I am not sure we should compare whole dictionaries for doctests. Size of the dictionary and some key elements should be enough.

I agree that generally doctests should be focussed on testing very specific things rather than entire dictionaries. Rewriting all these doctests case-by-case so that dictionaries are not printed anymore seems like a huge task though.

As the current patch also seems to fail with 32-bit, it still seems to me that the simplest approach to move forward with this is to extend `pretty_print` by a sort keyword. A first step for this is #29136, needing review, which stops `pretty_print` from outputting latex on the command line.

For reference, this problem was discussed in this [thread on devel](https://groups.google.com/d/msg/sage-devel/fXrv4JC6NEI/LwIcVb5EEwAJ) and there does not seem to be much disagreement about this.



---

archive/issue_comments_454366.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/330ccd89d86e9c802a0cb38e4a55e74f61eaee59\">330ccd8</a></td><td><code>Merge branch 'develop' of git://git.sagemath.org/sage into t/29042/remove_sorting_of_dicts</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9e306eeaab6bc96bba73a496f962ff302f971995\">9e306ee</a></td><td><code>Sync with 9.1.rc0</code></td></tr></table>\n",
    "created_at": "2020-04-13T15:37:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454366",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/330ccd89d86e9c802a0cb38e4a55e74f61eaee59">330ccd8</a></td><td><code>Merge branch 'develop' of git://git.sagemath.org/sage into t/29042/remove_sorting_of_dicts</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9e306eeaab6bc96bba73a496f962ff302f971995">9e306ee</a></td><td><code>Sync with 9.1.rc0</code></td></tr></table>




---

archive/issue_comments_454367.json:
```json
{
    "body": "Changed commit from **[7ba1e5f](https://github.com/sagemath/sagetrac-mirror/commit/7ba1e5f4df14e81521e6a03e6bfe887612e2b56d)** to **[9e306ee](https://github.com/sagemath/sagetrac-mirror/commit/9e306eeaab6bc96bba73a496f962ff302f971995)**",
    "created_at": "2020-04-13T15:37:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454367",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7ba1e5f](https://github.com/sagemath/sagetrac-mirror/commit/7ba1e5f4df14e81521e6a03e6bfe887612e2b56d)** to **[9e306ee](https://github.com/sagemath/sagetrac-mirror/commit/9e306eeaab6bc96bba73a496f962ff302f971995)**



---

archive/issue_comments_454368.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nBatch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.",
    "created_at": "2020-04-14T19:41:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454368",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:20" align="right">comment:20</div>

Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.



---

archive/issue_events_399099.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29042#event-399099"
}
```



---

archive/issue_events_399100.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29042#event-399100"
}
```



---

archive/issue_comments_454369.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4abe82e19f8f2308ff3b693476f34d1e99f6f8bf\">4abe82e</a></td><td><code>Merge branch 'develop' of git://git.sagemath.org/sage into t/29042/remove_sorting_of_dicts</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/be2afb969b72fd6db3ac7977f35b76f0df70731a\">be2afb9</a></td><td><code>Rebase for 9.1.rc1</code></td></tr></table>\n",
    "created_at": "2020-04-23T16:26:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454369",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4abe82e19f8f2308ff3b693476f34d1e99f6f8bf">4abe82e</a></td><td><code>Merge branch 'develop' of git://git.sagemath.org/sage into t/29042/remove_sorting_of_dicts</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/be2afb969b72fd6db3ac7977f35b76f0df70731a">be2afb9</a></td><td><code>Rebase for 9.1.rc1</code></td></tr></table>




---

archive/issue_comments_454370.json:
```json
{
    "body": "Changed commit from **[9e306ee](https://github.com/sagemath/sagetrac-mirror/commit/9e306eeaab6bc96bba73a496f962ff302f971995)** to **[be2afb9](https://github.com/sagemath/sagetrac-mirror/commit/be2afb969b72fd6db3ac7977f35b76f0df70731a)**",
    "created_at": "2020-04-23T16:26:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454370",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9e306ee](https://github.com/sagemath/sagetrac-mirror/commit/9e306eeaab6bc96bba73a496f962ff302f971995)** to **[be2afb9](https://github.com/sagemath/sagetrac-mirror/commit/be2afb969b72fd6db3ac7977f35b76f0df70731a)**



---

archive/issue_comments_454371.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nIs there really not a better way to do these doctest updates that can be agreed on? Using `sorted(D.items())` as suggested early on this ticket seems much more reasonable",
    "created_at": "2020-04-23T16:33:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454371",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:22" align="right">comment:22</div>

Is there really not a better way to do these doctest updates that can be agreed on? Using `sorted(D.items())` as suggested early on this ticket seems much more reasonable



---

archive/issue_comments_454372.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e2980ee2998b0bbe73d68e2c911a2f616de945ed\">e2980ee</a></td><td><code>Merge branch 'develop' of git://git.sagemath.org/sage into t/29042/remove_sorting_of_dicts</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a28a1dbfd8bfd51a947a7dae78cf4e2c05bee67f\">a28a1db</a></td><td><code>Merge branch 'develop' of git://git.sagemath.org/sage into t/29042/remove_sorting_of_dicts</code></td></tr></table>\n",
    "created_at": "2020-05-05T07:02:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454372",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e2980ee2998b0bbe73d68e2c911a2f616de945ed">e2980ee</a></td><td><code>Merge branch 'develop' of git://git.sagemath.org/sage into t/29042/remove_sorting_of_dicts</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a28a1dbfd8bfd51a947a7dae78cf4e2c05bee67f">a28a1db</a></td><td><code>Merge branch 'develop' of git://git.sagemath.org/sage into t/29042/remove_sorting_of_dicts</code></td></tr></table>




---

archive/issue_comments_454373.json:
```json
{
    "body": "Changed commit from **[be2afb9](https://github.com/sagemath/sagetrac-mirror/commit/be2afb969b72fd6db3ac7977f35b76f0df70731a)** to **[a28a1db](https://github.com/sagemath/sagetrac-mirror/commit/a28a1dbfd8bfd51a947a7dae78cf4e2c05bee67f)**",
    "created_at": "2020-05-05T07:02:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454373",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[be2afb9](https://github.com/sagemath/sagetrac-mirror/commit/be2afb969b72fd6db3ac7977f35b76f0df70731a)** to **[a28a1db](https://github.com/sagemath/sagetrac-mirror/commit/a28a1dbfd8bfd51a947a7dae78cf4e2c05bee67f)**



---

archive/issue_comments_454374.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@mkoeppe](#comment:22):\n> Is there really not a better way to do these doctest updates that can be agreed on? Using `sorted(D.items())` as suggested early on this ticket seems much more reasonable\n\nIt is a quite economical way to do things. But we have to document somewhere how dictionaries have to tested going forward. As far as I can see people still want or keep testing full dictionaries. Which leaves two options\n* `sorted` if we are sure it does the job in every case\n* since we are typing the whole dictionary anyway, create a `expected_dict` populated with expected value and compare it to the result dictionary we get. I would hope dictionary comparison doesn't care about sorting.",
    "created_at": "2020-05-22T08:21:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454374",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@mkoeppe](#comment:22):
> Is there really not a better way to do these doctest updates that can be agreed on? Using `sorted(D.items())` as suggested early on this ticket seems much more reasonable

It is a quite economical way to do things. But we have to document somewhere how dictionaries have to tested going forward. As far as I can see people still want or keep testing full dictionaries. Which leaves two options
* `sorted` if we are sure it does the job in every case
* since we are typing the whole dictionary anyway, create a `expected_dict` populated with expected value and compare it to the result dictionary we get. I would hope dictionary comparison doesn't care about sorting.



---

archive/issue_comments_454375.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nAnd I think we may want to remove that one altogether\n\n```\nFile \"/usr/lib/python3.7/site-packages/sage/repl/display/pretty_print.py\", line 85, in sage.repl.display.pretty_print.SagePrettyPrinter.__init__\nFailed example:\n    dict(zzz=123, aaa=99, xab=10)    # sorted by keys\nExpected:\n    {'aaa': 99, 'xab': 10, 'zzz': 123}\nGot:\n    {'zzz': 123, 'aaa': 99, 'xab': 10}\n```\nWhich comes from\n\n```\n        IPython pretty printers::\n\n            sage: set({1, 2, 3})\n            {1, 2, 3}\n            sage: dict(zzz=123, aaa=99, xab=10)    # sorted by keys\n            {'aaa': 99, 'xab': 10, 'zzz': 123}\n```\nPretty print no more.",
    "created_at": "2020-05-22T08:42:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454375",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:27" align="right">comment:27</div>

And I think we may want to remove that one altogether

```
File "/usr/lib/python3.7/site-packages/sage/repl/display/pretty_print.py", line 85, in sage.repl.display.pretty_print.SagePrettyPrinter.__init__
Failed example:
    dict(zzz=123, aaa=99, xab=10)    # sorted by keys
Expected:
    {'aaa': 99, 'xab': 10, 'zzz': 123}
Got:
    {'zzz': 123, 'aaa': 99, 'xab': 10}
```
Which comes from

```
        IPython pretty printers::

            sage: set({1, 2, 3})
            {1, 2, 3}
            sage: dict(zzz=123, aaa=99, xab=10)    # sorted by keys
            {'aaa': 99, 'xab': 10, 'zzz': 123}
```
Pretty print no more.



---

archive/issue_comments_454376.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nI am looking at some stuff in .rst file. It is both doctests and documentation. For example in `doc/en/prep/Advanced-2DPlotting.rst`\n\n```\nHere are the options for contour plots.\n\n- They are given as an \"attribute\" \\- no parentheses \\- of the\n  ``contour_plot`` object.\n\n- They are given as a dictionary (see :ref:`the programming tutorial\n  <Advanced>`).\n\n::\n\n    sage: contour_plot.options\n    {'aspect_ratio': 1,\n     'axes': False,\n     'colorbar': False,\n     'contours': None,\n     'fill': True,\n     'frame': True,\n     'labels': False,\n     'legend_label': None,\n     'linestyles': None,\n     'linewidths': None,\n     'plot_points': 100,\n     'region': None}\n```\nthe documentation aspect doesn't really care about the sorting. It is just displaying. But this is doctested as well which does. Using an `expected_dict` variable doesn't make sense in this context. If we use `sorted` we have to make a note about it in the documentation that it is just to make presentation consistent. If we just reproduce the output, the order may change unexpectedly.",
    "created_at": "2020-05-22T09:50:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454376",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:28" align="right">comment:28</div>

I am looking at some stuff in .rst file. It is both doctests and documentation. For example in `doc/en/prep/Advanced-2DPlotting.rst`

```
Here are the options for contour plots.

- They are given as an "attribute" \- no parentheses \- of the
  ``contour_plot`` object.

- They are given as a dictionary (see :ref:`the programming tutorial
  <Advanced>`).

::

    sage: contour_plot.options
    {'aspect_ratio': 1,
     'axes': False,
     'colorbar': False,
     'contours': None,
     'fill': True,
     'frame': True,
     'labels': False,
     'legend_label': None,
     'linestyles': None,
     'linewidths': None,
     'plot_points': 100,
     'region': None}
```
the documentation aspect doesn't really care about the sorting. It is just displaying. But this is doctested as well which does. Using an `expected_dict` variable doesn't make sense in this context. If we use `sorted` we have to make a note about it in the documentation that it is just to make presentation consistent. If we just reproduce the output, the order may change unexpectedly.



---

archive/issue_comments_454377.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nMaybe we should just label that as \"random\".",
    "created_at": "2020-05-22T17:30:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454377",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:29" align="right">comment:29</div>

Maybe we should just label that as "random".



---

archive/issue_comments_454378.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@jhpalmieri](#comment:29):\n> Maybe we should just label that as \"random\".\n\nI thought about that. Does it show in generated html/pdf?",
    "created_at": "2020-05-22T20:05:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454378",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@jhpalmieri](#comment:29):
> Maybe we should just label that as "random".

I thought about that. Does it show in generated html/pdf?



---

archive/issue_comments_454379.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@kiwifb](#comment:30):\n> Replying to [@jhpalmieri](#comment:29):\n> > Maybe we should just label that as \"random\".\n\n> \n> I thought about that. Does it show in generated html/pdf?\n\nIt does. We could add a remark beforehand: `The following is marked \"random\" because Python may print dictionaries in an unpredictable order`. I think I've done this sort of thing with other doctests tagged `random`.",
    "created_at": "2020-05-22T21:14:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454379",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@kiwifb](#comment:30):
> Replying to [@jhpalmieri](#comment:29):
> > Maybe we should just label that as "random".

> 
> I thought about that. Does it show in generated html/pdf?

It does. We could add a remark beforehand: `The following is marked "random" because Python may print dictionaries in an unpredictable order`. I think I've done this sort of thing with other doctests tagged `random`.



---

archive/issue_comments_454380.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nThe problem is that it also accepts something like `2` as being equal. I am -1 a strong on marking things as `# random` and instead replacing them with more meaningful doctests (like comparing the result to a fixed dictionary, or getting specific values in the result, etc.).",
    "created_at": "2020-05-23T00:50:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454380",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:32" align="right">comment:32</div>

The problem is that it also accepts something like `2` as being equal. I am -1 a strong on marking things as `# random` and instead replacing them with more meaningful doctests (like comparing the result to a fixed dictionary, or getting specific values in the result, etc.).



---

archive/issue_comments_454381.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@tscrim](#comment:32):\n> The problem is that it also accepts something like `2` as being equal. \n\nYou are losing me here. Can you expand?\n\n> I am -1 a strong on marking things as `# random` and instead replacing them with more meaningful doctests (like comparing the result to a fixed dictionary, or getting specific values in the result, etc.).\n\nWe are talking about only putting `random` in specific documentation where it doesn't matter and ordering would look weird. But even there I would agree on getting as specific as possible to avoid having to do it. For example, in the same file as [comment:28](#comment:28) and after it we have\n\n```\nsage: contour_plot.options[\"fill\"]=False\nsage: contour_plot.options\n{'aspect_ratio': 1,\n 'axes': False,\n 'colorbar': False,\n 'contours': None,\n 'fill': False,\n 'frame': True,\n 'labels': False,\n 'legend_label': None,\n 'linestyles': None,\n 'linewidths': None,\n 'plot_points': 100,\n 'region': None}\n```\nWhere we could look specifically at the concerned dictionary element. But the one in [comment:28](#comment:28) is part of an exposition of a feature. It feels ridicule to compare the output or to to artificially order it as opposed to just mentioning that the elements are not always in that order.\n\nWe have to use some common sense on what is appropriate and what isn't.",
    "created_at": "2020-05-23T01:16:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454381",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@tscrim](#comment:32):
> The problem is that it also accepts something like `2` as being equal. 

You are losing me here. Can you expand?

> I am -1 a strong on marking things as `# random` and instead replacing them with more meaningful doctests (like comparing the result to a fixed dictionary, or getting specific values in the result, etc.).

We are talking about only putting `random` in specific documentation where it doesn't matter and ordering would look weird. But even there I would agree on getting as specific as possible to avoid having to do it. For example, in the same file as [comment:28](#comment:28) and after it we have

```
sage: contour_plot.options["fill"]=False
sage: contour_plot.options
{'aspect_ratio': 1,
 'axes': False,
 'colorbar': False,
 'contours': None,
 'fill': False,
 'frame': True,
 'labels': False,
 'legend_label': None,
 'linestyles': None,
 'linewidths': None,
 'plot_points': 100,
 'region': None}
```
Where we could look specifically at the concerned dictionary element. But the one in [comment:28](#comment:28) is part of an exposition of a feature. It feels ridicule to compare the output or to to artificially order it as opposed to just mentioning that the elements are not always in that order.

We have to use some common sense on what is appropriate and what isn't.



---

archive/issue_comments_454382.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nReplying to [@kiwifb](#comment:33):\n> Replying to [@tscrim](#comment:32):\n> > The problem is that it also accepts something like `2` as being equal. \n\n> \n> You are losing me here. Can you expand?\n\nIf you have\n\n```\nsage: foo  # random\n2 + 2\n```\nthis also will pass even if `foo` is a `dict` or `'fish'` (i.e. I can make `2 + 2 = 'fish'`).\n\n> > I am -1 a strong on marking things as `# random` and instead replacing them with more meaningful doctests (like comparing the result to a fixed dictionary, or getting specific values in the result, etc.).\n\n> \n> We are talking about only putting `random` in specific documentation where it doesn't matter and ordering would look weird. But even there I would agree on getting as specific as possible to avoid having to do it. For example, in the same file as [comment:28](#comment:28)\n\nAh, I see. I misinterpreted what you were asking about. I was thinking it was being made as a more broad statement. Sorry.\n\n> Where we could look specifically at the concerned dictionary element. But the one in [comment:28](#comment:28) is part of an exposition of a feature. It feels ridicule to compare the output or to to artificially order it as opposed to just mentioning that the elements are not always in that order.\n> \n> We have to use some common sense on what is appropriate and what isn't.\n\nI guess in this case because it is meant to be for an illustrative purpose that it is fine for a `# random` with an explanation.",
    "created_at": "2020-05-23T02:11:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454382",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:34" align="right">comment:34</div>

Replying to [@kiwifb](#comment:33):
> Replying to [@tscrim](#comment:32):
> > The problem is that it also accepts something like `2` as being equal. 

> 
> You are losing me here. Can you expand?

If you have

```
sage: foo  # random
2 + 2
```
this also will pass even if `foo` is a `dict` or `'fish'` (i.e. I can make `2 + 2 = 'fish'`).

> > I am -1 a strong on marking things as `# random` and instead replacing them with more meaningful doctests (like comparing the result to a fixed dictionary, or getting specific values in the result, etc.).

> 
> We are talking about only putting `random` in specific documentation where it doesn't matter and ordering would look weird. But even there I would agree on getting as specific as possible to avoid having to do it. For example, in the same file as [comment:28](#comment:28)

Ah, I see. I misinterpreted what you were asking about. I was thinking it was being made as a more broad statement. Sorry.

> Where we could look specifically at the concerned dictionary element. But the one in [comment:28](#comment:28) is part of an exposition of a feature. It feels ridicule to compare the output or to to artificially order it as opposed to just mentioning that the elements are not always in that order.
> 
> We have to use some common sense on what is appropriate and what isn't.

I guess in this case because it is meant to be for an illustrative purpose that it is fine for a `# random` with an explanation.



---

archive/issue_comments_454383.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nYes, I was only talking about this specific doctest, not all of these. I think we're in agreement, but to make it explicit: my approach is to try to understand what the doctest is testing. If it's merely illustrative, I don't mind tagging it with `random`. This is especially true if the same functionality is tested robustly elsewhere, although to be honest, I didn't check that in this case. Of course a `random` tag is no good if you're actually trying to test the output.",
    "created_at": "2020-05-23T03:30:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454383",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:35" align="right">comment:35</div>

Yes, I was only talking about this specific doctest, not all of these. I think we're in agreement, but to make it explicit: my approach is to try to understand what the doctest is testing. If it's merely illustrative, I don't mind tagging it with `random`. This is especially true if the same functionality is tested robustly elsewhere, although to be honest, I didn't check that in this case. Of course a `random` tag is no good if you're actually trying to test the output.



---

archive/issue_comments_454384.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nIt is much tougher than I expected. What do you do with cases like that?\n\n```\nRepresentatives of all divisor classes with nontrivial homology::\n\n    sage: p = S.betti_complexes()\n    sage: p[0]\n    [{0: -8, 1: 5, 2: 4, 3: 1},\n     Simplicial complex with vertex set (1, 2, 3) and facets {(3,), (1, 2)}]\n```\nin `src/doc/en/thematic_tutorials/sandpile.rst`.  A list with a dictionary as an element and I don't want to destroy the exposition element.",
    "created_at": "2020-05-23T09:11:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454384",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:36" align="right">comment:36</div>

It is much tougher than I expected. What do you do with cases like that?

```
Representatives of all divisor classes with nontrivial homology::

    sage: p = S.betti_complexes()
    sage: p[0]
    [{0: -8, 1: 5, 2: 4, 3: 1},
     Simplicial complex with vertex set (1, 2, 3) and facets {(3,), (1, 2)}]
```
in `src/doc/en/thematic_tutorials/sandpile.rst`.  A list with a dictionary as an element and I don't want to destroy the exposition element.



---

archive/issue_comments_454385.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\n\n```\nsage: from pprint import pprint\nsage: pprint(p[0])\n[{0: -8, 1: 5, 2: 4, 3: 1},\n Simplicial complex with vertex set (1, 2, 3) and facets {(3,), (1, 2)}]\n```",
    "created_at": "2020-05-23T09:22:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454385",
    "user": "https://github.com/mwageringel"
}
```

<div id="comment:37" align="right">comment:37</div>


```
sage: from pprint import pprint
sage: pprint(p[0])
[{0: -8, 1: 5, 2: 4, 3: 1},
 Simplicial complex with vertex set (1, 2, 3) and facets {(3,), (1, 2)}]
```



---

archive/issue_comments_454386.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nYes, it is probably best here. And while they weren't apparently broken by ipython >= 7.10 there are other instances in that file that probably should be `pprint`-ed.",
    "created_at": "2020-05-23T09:27:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454386",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:38" align="right">comment:38</div>

Yes, it is probably best here. And while they weren't apparently broken by ipython >= 7.10 there are other instances in that file that probably should be `pprint`-ed.



---

archive/issue_comments_454387.json:
```json
{
    "body": "Changed commit from **[a28a1db](https://github.com/sagemath/sagetrac-mirror/commit/a28a1dbfd8bfd51a947a7dae78cf4e2c05bee67f)** to **[2594a80](https://github.com/sagemath/sagetrac-mirror/commit/2594a80ff25b466400b2f117b21d48b1aff73879)**",
    "created_at": "2020-05-23T10:28:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454387",
    "user": "https://github.com/kiwifb"
}
```

Changed commit from **[a28a1db](https://github.com/sagemath/sagetrac-mirror/commit/a28a1dbfd8bfd51a947a7dae78cf4e2c05bee67f)** to **[2594a80](https://github.com/sagemath/sagetrac-mirror/commit/2594a80ff25b466400b2f117b21d48b1aff73879)**



---

archive/issue_comments_454388.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nAttaching a WIP branch for people to comment on. I tried to use an appropriate method depending on the context. The branch focuses on the `.rst` files under `src/doc` with the idea that they may present a good sample of issues.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/016d82f6a16eab6fec30bd96c181870af2c6320d\">016d82f</a></td><td><code>In this tutorial, we can precisely follow the insertion order of the dictionaries.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2594a80ff25b466400b2f117b21d48b1aff73879\">2594a80</a></td><td><code>Deal with dictionaries with pprint, sorted or other as appropriate.</code></td></tr></table>\n",
    "created_at": "2020-05-23T10:28:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454388",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:39" align="right">comment:39</div>

Attaching a WIP branch for people to comment on. I tried to use an appropriate method depending on the context. The branch focuses on the `.rst` files under `src/doc` with the idea that they may present a good sample of issues.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/016d82f6a16eab6fec30bd96c181870af2c6320d">016d82f</a></td><td><code>In this tutorial, we can precisely follow the insertion order of the dictionaries.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2594a80ff25b466400b2f117b21d48b1aff73879">2594a80</a></td><td><code>Deal with dictionaries with pprint, sorted or other as appropriate.</code></td></tr></table>




---

archive/issue_comments_454389.json:
```json
{
    "body": "Changed branch from **[u/arojas/remove_sorting_of_dicts](https://github.com/sagemath/sagetrac-mirror/tree/u/arojas/remove_sorting_of_dicts)** to **[u/fbissey/dictionaries](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/dictionaries)**",
    "created_at": "2020-05-23T10:28:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454389",
    "user": "https://github.com/kiwifb"
}
```

Changed branch from **[u/arojas/remove_sorting_of_dicts](https://github.com/sagemath/sagetrac-mirror/tree/u/arojas/remove_sorting_of_dicts)** to **[u/fbissey/dictionaries](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/dictionaries)**



---

archive/issue_comments_454390.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nI have not as much time to deal with this as I thought. If someone wants to take over or go back to arojas' branch, it is fine by me.",
    "created_at": "2020-06-01T09:46:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454390",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:41" align="right">comment:41</div>

I have not as much time to deal with this as I thought. If someone wants to take over or go back to arojas' branch, it is fine by me.



---

archive/issue_comments_454391.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nI am maintaining the patch downstream anyway, so I can push it here for other packagers  to use it until someone makes a decision on this (I'm not planning to work on implementing a different solution myself)",
    "created_at": "2020-06-01T09:59:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454391",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:42" align="right">comment:42</div>

I am maintaining the patch downstream anyway, so I can push it here for other packagers  to use it until someone makes a decision on this (I'm not planning to work on implementing a different solution myself)



---

archive/issue_comments_454392.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nAlso, I don't see the need to give a final solution to this *now*. We could just merge my patch to unblock the ipython upgrade, and keep this open to implement a different solution when someone has time/willingness to work on it.\n\nEDIT: Actually, I forgot about 32-bit, so it seems the patch can't be merged as-is anyway",
    "created_at": "2020-06-01T10:03:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454392",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:43" align="right">comment:43</div>

Also, I don't see the need to give a final solution to this *now*. We could just merge my patch to unblock the ipython upgrade, and keep this open to implement a different solution when someone has time/willingness to work on it.

EDIT: Actually, I forgot about 32-bit, so it seems the patch can't be merged as-is anyway



---

archive/issue_comments_454393.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nDarn 32-bit. I otherwise agree with you. We can make this better at a later stage.",
    "created_at": "2020-06-01T10:50:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454393",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:44" align="right">comment:44</div>

Darn 32-bit. I otherwise agree with you. We can make this better at a later stage.



---

archive/issue_comments_454394.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nI don't quite understand what this ticket is about:\n` This will break the affected doctests (but not functionality) on python2`\n\n9.2 has nothing to do with python2. We can break it, why not?",
    "created_at": "2020-06-01T11:28:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454394",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:45" align="right">comment:45</div>

I don't quite understand what this ticket is about:
` This will break the affected doctests (but not functionality) on python2`

9.2 has nothing to do with python2. We can break it, why not?



---

archive/issue_comments_454395.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nReplying to [@dimpase](#comment:45):\n> I don't quite understand what this ticket is about:\n> ` This will break the affected doctests (but not functionality) on python2`\n> \n> 9.2 has nothing to do with python2. We can break it, why not?\n\nThis was opened in January",
    "created_at": "2020-06-01T11:31:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454395",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:46" align="right">comment:46</div>

Replying to [@dimpase](#comment:45):
> I don't quite understand what this ticket is about:
> ` This will break the affected doctests (but not functionality) on python2`
> 
> 9.2 has nothing to do with python2. We can break it, why not?

This was opened in January



---

archive/issue_comments_454396.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nis anything needed here for py3 ?",
    "created_at": "2020-06-01T11:50:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454396",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:47" align="right">comment:47</div>

is anything needed here for py3 ?



---

archive/issue_comments_454397.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nYes - this is meant to fix the breakage that will happen in tests when upgrading ipython. \"This will break the affected doctests (but not functionality) on python2\" refers to the proposed patch at the time.",
    "created_at": "2020-06-01T11:52:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454397",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:48" align="right">comment:48</div>

Yes - this is meant to fix the breakage that will happen in tests when upgrading ipython. "This will break the affected doctests (but not functionality) on python2" refers to the proposed patch at the time.



---

archive/issue_comments_454398.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nCould someone knowledgeable about the ticket please amend its description?",
    "created_at": "2020-06-01T11:56:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454398",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:49" align="right">comment:49</div>

Could someone knowledgeable about the ticket please amend its description?



---

archive/issue_comments_454399.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-This is a prerequisite for #28197 - ipython does no longer honor the DICT_IS_ORDERED variable since 7.10 [1] so tests output needs to be updated. This will break the affected doctests (but not functionality) on python2\n+This is a prerequisite for #28197 - ipython does no longer honor the DICT_IS_ORDERED variable since 7.10 [1] so tests output needs to be updated.\n \n \n [1] https://github.com/ipython/ipython/commit/dffa2c33dea3ecc09256a66a6ddbc876ce0629a9\n``````\n",
    "created_at": "2020-06-01T12:08:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454399",
    "user": "https://github.com/antonio-rojas"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-This is a prerequisite for #28197 - ipython does no longer honor the DICT_IS_ORDERED variable since 7.10 [1] so tests output needs to be updated. This will break the affected doctests (but not functionality) on python2
+This is a prerequisite for #28197 - ipython does no longer honor the DICT_IS_ORDERED variable since 7.10 [1] so tests output needs to be updated.
 
 
 [1] https://github.com/ipython/ipython/commit/dffa2c33dea3ecc09256a66a6ddbc876ce0629a9
``````




---

archive/issue_comments_454400.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nMaybe removing the sorting of dictionaries isn't necessary. We can just overwrite the pretty print function during testing:\n\n```diff\n+++ b/src/sage/doctest/forker.py\n@@ -61,6 +61,7 @@ from .parsing import SageOutputChecker, pre_hash, get_source\n from sage.repl.user_globals import set_globals\n from sage.cpython.atexit import restore_atexit\n from sage.cpython.string import bytes_to_str, str_to_bytes\n+import IPython.lib.pretty\n \n \n # All doctests run as if the following future imports are present\n@@ -86,6 +87,27 @@ _OSError_SUBCLASSES = [\n        exc is not OSError\n ]\n \n+def _sorted_dict_pprinter_factory(start, end):\n+    \"\"\"\n+    Factory that returns a pprint function used by the default pprint of\n+    dicts and dict proxies.\n+    \"\"\"\n+    def inner(obj, p, cycle):\n+        if cycle:\n+            return p.text('{...}')\n+        step = len(start)\n+        p.begin_group(step, start)\n+        keys = obj.keys()\n+        keys = IPython.lib.pretty._sorted_for_pprint(keys)\n+        for idx, key in p._enumerate(keys):\n+            if idx:\n+                p.text(',')\n+                p.breakable()\n+            p.pretty(key)\n+            p.text(': ')\n+            p.pretty(obj[key])\n+        p.end_group(step, end)\n+    return inner\n \n \n def init_sage():\n@@ -185,11 +207,11 @@ def init_sage():\n     # IPython's pretty printer sorts the repr of dicts by their keys by default\n     # (or their keys' str() if they are not otherwise orderable).  However, it\n     # disables this for CPython 3.6+ opting to instead display dicts' \"natural\"\n-    # insertion order, which is preserved in those versions).  This makes for\n-    # inconsistent results with Python 2 tests that return dicts, so here we\n-    # force the Python 2 style dict printing\n-    import IPython.lib.pretty\n-    IPython.lib.pretty.DICT_IS_ORDERED = False\n+    # insertion order, which is preserved in those versions).\n+    # However, this order is random in some instances.\n+    # Also code changes may change the order, but the result stays correct.\n+    # So we force sorting the dictionary.\n+    IPython.lib.pretty.for_type(dict, _sorted_dict_pprinter_factory('{', '}'))\n \n     # Switch on extra debugging\n     from sage.structure.debug_options import debug\n```\n\nThis appears to do the job. I'm testing the entire library now.",
    "created_at": "2020-06-05T09:03:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454400",
    "user": "https://github.com/kliem"
}
```

<div id="comment:51" align="right">comment:51</div>

Maybe removing the sorting of dictionaries isn't necessary. We can just overwrite the pretty print function during testing:

```diff
+++ b/src/sage/doctest/forker.py
@@ -61,6 +61,7 @@ from .parsing import SageOutputChecker, pre_hash, get_source
 from sage.repl.user_globals import set_globals
 from sage.cpython.atexit import restore_atexit
 from sage.cpython.string import bytes_to_str, str_to_bytes
+import IPython.lib.pretty
 
 
 # All doctests run as if the following future imports are present
@@ -86,6 +87,27 @@ _OSError_SUBCLASSES = [
        exc is not OSError
 ]
 
+def _sorted_dict_pprinter_factory(start, end):
+    """
+    Factory that returns a pprint function used by the default pprint of
+    dicts and dict proxies.
+    """
+    def inner(obj, p, cycle):
+        if cycle:
+            return p.text('{...}')
+        step = len(start)
+        p.begin_group(step, start)
+        keys = obj.keys()
+        keys = IPython.lib.pretty._sorted_for_pprint(keys)
+        for idx, key in p._enumerate(keys):
+            if idx:
+                p.text(',')
+                p.breakable()
+            p.pretty(key)
+            p.text(': ')
+            p.pretty(obj[key])
+        p.end_group(step, end)
+    return inner
 
 
 def init_sage():
@@ -185,11 +207,11 @@ def init_sage():
     # IPython's pretty printer sorts the repr of dicts by their keys by default
     # (or their keys' str() if they are not otherwise orderable).  However, it
     # disables this for CPython 3.6+ opting to instead display dicts' "natural"
-    # insertion order, which is preserved in those versions).  This makes for
-    # inconsistent results with Python 2 tests that return dicts, so here we
-    # force the Python 2 style dict printing
-    import IPython.lib.pretty
-    IPython.lib.pretty.DICT_IS_ORDERED = False
+    # insertion order, which is preserved in those versions).
+    # However, this order is random in some instances.
+    # Also code changes may change the order, but the result stays correct.
+    # So we force sorting the dictionary.
+    IPython.lib.pretty.for_type(dict, _sorted_dict_pprinter_factory('{', '}'))
 
     # Switch on extra debugging
     from sage.structure.debug_options import debug
```

This appears to do the job. I'm testing the entire library now.



---

archive/issue_comments_454401.json:
```json
{
    "body": "Changed commit from **[2594a80](https://github.com/sagemath/sagetrac-mirror/commit/2594a80ff25b466400b2f117b21d48b1aff73879)** to **[68b10e1](https://github.com/sagemath/sagetrac-mirror/commit/68b10e1e6665892edad775e6b9b18e93afc3d637)**",
    "created_at": "2020-06-05T10:48:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454401",
    "user": "https://github.com/kliem"
}
```

Changed commit from **[2594a80](https://github.com/sagemath/sagetrac-mirror/commit/2594a80ff25b466400b2f117b21d48b1aff73879)** to **[68b10e1](https://github.com/sagemath/sagetrac-mirror/commit/68b10e1e6665892edad775e6b9b18e93afc3d637)**



---

archive/issue_comments_454402.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,5 @@\n-This is a prerequisite for #28197 - ipython does no longer honor the DICT_IS_ORDERED variable since 7.10 [1] so tests output needs to be updated.\n-\n+This is a prerequisite for #28197 - ipython does no longer honor the DICT_IS_ORDERED variable since 7.10 [1].\n \n [1] https://github.com/ipython/ipython/commit/dffa2c33dea3ecc09256a66a6ddbc876ce0629a9\n+\n+For doctesting we overwrite the default pretty print function for dictionaries to sort the keys and behave exactly as before.\n``````\n",
    "created_at": "2020-06-05T10:48:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454402",
    "user": "https://github.com/kliem"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,5 @@
-This is a prerequisite for #28197 - ipython does no longer honor the DICT_IS_ORDERED variable since 7.10 [1] so tests output needs to be updated.
-
+This is a prerequisite for #28197 - ipython does no longer honor the DICT_IS_ORDERED variable since 7.10 [1].
 
 [1] https://github.com/ipython/ipython/commit/dffa2c33dea3ecc09256a66a6ddbc876ce0629a9
+
+For doctesting we overwrite the default pretty print function for dictionaries to sort the keys and behave exactly as before.
``````




---

archive/issue_comments_454403.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\n`sage -t --long --all` passes for me with this branch.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/68b10e1e6665892edad775e6b9b18e93afc3d637\">68b10e1</a></td><td><code>keep dictionaries ordered for doctesting</code></td></tr></table>\n",
    "created_at": "2020-06-05T10:48:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454403",
    "user": "https://github.com/kliem"
}
```

<div id="comment:52" align="right">comment:52</div>

`sage -t --long --all` passes for me with this branch.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/68b10e1e6665892edad775e6b9b18e93afc3d637">68b10e1</a></td><td><code>keep dictionaries ordered for doctesting</code></td></tr></table>




---

archive/issue_comments_454404.json:
```json
{
    "body": "Changed author from **Antonio Rojas** to **Jonathan Kliem, Antonio Rojas**",
    "created_at": "2020-06-05T10:48:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454404",
    "user": "https://github.com/kliem"
}
```

Changed author from **Antonio Rojas** to **Jonathan Kliem, Antonio Rojas**



---

archive/issue_events_399101.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-05T10:48:53Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "title_is": "Sort dictionaries for doctests independent of ipythons pretty print",
    "title_was": "Remove sorting of dicts",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29042#event-399101"
}
```



---

archive/issue_comments_454405.json:
```json
{
    "body": "Changed branch from **[u/fbissey/dictionaries](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/dictionaries)** to **[public/29042](https://github.com/sagemath/sagetrac-mirror/tree/public/29042)**",
    "created_at": "2020-06-05T10:48:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454405",
    "user": "https://github.com/kliem"
}
```

Changed branch from **[u/fbissey/dictionaries](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/dictionaries)** to **[public/29042](https://github.com/sagemath/sagetrac-mirror/tree/public/29042)**



---

archive/issue_events_399102.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-05T10:48:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29042#event-399102"
}
```



---

archive/issue_comments_454406.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nI can do some testing tomorrow. It looks so much simpler.",
    "created_at": "2020-06-05T11:05:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454406",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:53" align="right">comment:53</div>

I can do some testing tomorrow. It looks so much simpler.



---

archive/issue_comments_454407.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nI was suprised how easy this actually is. Took me a number of hours to figure out though.",
    "created_at": "2020-06-05T12:38:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454407",
    "user": "https://github.com/kliem"
}
```

<div id="comment:54" align="right">comment:54</div>

I was suprised how easy this actually is. Took me a number of hours to figure out though.



---

archive/issue_comments_454408.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nDoes this need new iPython?",
    "created_at": "2020-06-05T12:45:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454408",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:55" align="right">comment:55</div>

Does this need new iPython?



---

archive/issue_comments_454409.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nNo, I didn't upgrade and it worked for me.\n\nThe function `_sorted_for_pprint` that it uses requires iPython at least 5:\n\nhttps://github.com/ipython/ipython/blob/5.x/IPython/lib/pretty.py\n\nIf that is a problem or if this is ever removed, we can just copy paste this tiny function.\n\nThe function `for_type` has been in their since IPython version 1. So I hope that it is somewhat stable.",
    "created_at": "2020-06-05T12:54:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454409",
    "user": "https://github.com/kliem"
}
```

<div id="comment:56" align="right">comment:56</div>

No, I didn't upgrade and it worked for me.

The function `_sorted_for_pprint` that it uses requires iPython at least 5:

https://github.com/ipython/ipython/blob/5.x/IPython/lib/pretty.py

If that is a problem or if this is ever removed, we can just copy paste this tiny function.

The function `for_type` has been in their since IPython version 1. So I hope that it is somewhat stable.



---

archive/issue_comments_454410.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nWorks for me. That's one of the things I would like to see merged soon.",
    "created_at": "2020-06-06T03:27:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454410",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:57" align="right">comment:57</div>

Works for me. That's one of the things I would like to see merged soon.



---

archive/issue_events_399103.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2020-06-06T03:27:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29042#event-399103"
}
```



---

archive/issue_events_399104.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2020-06-06T03:27:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29042#event-399104"
}
```



---

archive/issue_comments_454411.json:
```json
{
    "body": "Reviewer: **Fran\u00e7ois Bissey**",
    "created_at": "2020-06-06T03:27:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454411",
    "user": "https://github.com/kiwifb"
}
```

Reviewer: **François Bissey**



---

archive/issue_comments_454412.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nThank you.",
    "created_at": "2020-06-06T07:42:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454412",
    "user": "https://github.com/kliem"
}
```

<div id="comment:58" align="right">comment:58</div>

Thank you.



---

archive/issue_events_399105.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-06-06T09:30:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29042#event-399105"
}
```



---

archive/issue_events_399106.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-06-06T09:30:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29042#event-399106"
}
```



---

archive/issue_comments_454413.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nhopefully it simplifies the thankless task of allowing multiple versions of pari/gp, etc.",
    "created_at": "2020-06-06T09:30:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454413",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:59" align="right">comment:59</div>

hopefully it simplifies the thankless task of allowing multiple versions of pari/gp, etc.



---

archive/issue_events_399107.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-06-21T22:37:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29042#event-399107"
}
```



---

archive/issue_events_399108.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "119b6d8c5a28193336790919b10c378cde7f89d7",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-06-21T22:37:31Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29042#event-399108"
}
```



---

archive/issue_comments_454414.json:
```json
{
    "body": "Changed branch from **[public/29042](https://github.com/sagemath/sagetrac-mirror/tree/public/29042)** to **[68b10e1](https://github.com/sagemath/sagetrac-mirror/commit/68b10e1e6665892edad775e6b9b18e93afc3d637)**",
    "created_at": "2020-06-21T22:37:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29042#issuecomment-454414",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/29042](https://github.com/sagemath/sagetrac-mirror/tree/public/29042)** to **[68b10e1](https://github.com/sagemath/sagetrac-mirror/commit/68b10e1e6665892edad775e6b9b18e93afc3d637)**
