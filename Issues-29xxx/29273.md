# Issue 29273: add system packages info for R and others

archive/issues_029036.json:
```json
{
    "body": "this is a followup to #29053 which missed packages mentioned on #28884, and also some gentoo, arch, fedora, debian packages\n\n\nCC:  @mkoeppe @kiwifb @orlitzky\n\nReviewer: Matthias Koeppe\n\nAuthor: Dima Pasechnik\n\nBranch: 0f704d03e5aaa1c6e34212f009bec4a50e2cbffa\n\nDependencies: #29129\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29273\n\n",
    "closed_at": "2020-03-11T23:46:18Z",
    "created_at": "2020-03-03T11:23:02Z",
    "labels": [
        "component: build",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "add system packages info for R and others",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29273",
    "user": "https://github.com/dimpase"
}
```
this is a followup to #29053 which missed packages mentioned on #28884, and also some gentoo, arch, fedora, debian packages


CC:  @mkoeppe @kiwifb @orlitzky

Reviewer: Matthias Koeppe

Author: Dima Pasechnik

Branch: 0f704d03e5aaa1c6e34212f009bec4a50e2cbffa

Dependencies: #29129

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29273





---

archive/issue_comments_410480.json:
```json
{
    "body": "<a id='comment:1'></a>See also #29129",
    "created_at": "2020-03-03T12:07:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410480",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'></a>See also #29129



---

archive/issue_comments_410481.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2020-03-03T12:38:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410481",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_410482.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-03-03T12:38:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410482",
    "user": "https://github.com/dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_410483.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-03T23:01:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410483",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_410484.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-03T23:54:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410484",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_410485.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-03-03T23:57:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410485",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_410486.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-03-04T00:03:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410486",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_410487.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-04T00:10:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410487",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_410488.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-04T00:25:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410488",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_410489.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-03-04T09:45:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410489",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_410490.json:
```json
{
    "body": "<a id='comment:13'></a>rebased over 9.1.beta6",
    "created_at": "2020-03-04T09:49:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410490",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:13'></a>rebased over 9.1.beta6



---

archive/issue_comments_410491.json:
```json
{
    "body": "<a id='comment:14'></a>I am getting concerned that a rather unusual feature of gentoo may need additional description. The useflags. While packages in binary distro are built with all possible options [and when that is not possible either the best sets or variants of the package are offered] in Gentoo we leave the end user to choose a number of options by themselves. So not only do I want a package list, I want the option to go with it. Like for `pari`, we really want to use the gmp option (although I think it would just be slower in that case) and the doc option [not negotiable I even spent time making sure the doc was usable for cypari and sage when when it was part of it]. \n\nA list of useflags for Gentoo is at https://github.com/cschwan/sage-on-gentoo/blob/master/package.use/sage - some of the packages - pplpy, pynac and lcalc - are not in the main gentoo tree, only in the sage-on-gentoo overlay.",
    "created_at": "2020-03-04T09:59:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410491",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:14'></a>I am getting concerned that a rather unusual feature of gentoo may need additional description. The useflags. While packages in binary distro are built with all possible options [and when that is not possible either the best sets or variants of the package are offered] in Gentoo we leave the end user to choose a number of options by themselves. So not only do I want a package list, I want the option to go with it. Like for `pari`, we really want to use the gmp option (although I think it would just be slower in that case) and the doc option [not negotiable I even spent time making sure the doc was usable for cypari and sage when when it was part of it]. 

A list of useflags for Gentoo is at https://github.com/cschwan/sage-on-gentoo/blob/master/package.use/sage - some of the packages - pplpy, pynac and lcalc - are not in the main gentoo tree, only in the sage-on-gentoo overlay.



---

archive/issue_comments_410492.json:
```json
{
    "body": "<a id='comment:15'></a>perhaps there should be an extra optional datapoint for each gentoo package, the needed useflags, and then the installation advice would be generated by combining these flags into one list somehow?",
    "created_at": "2020-03-04T10:25:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410492",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:15'></a>perhaps there should be an extra optional datapoint for each gentoo package, the needed useflags, and then the installation advice would be generated by combining these flags into one list somehow?



---

archive/issue_comments_410493.json:
```json
{
    "body": "<a id='comment:16'></a>by the way, could you people, fbissey or mjo, update  `sci-mathematics/gfan` to 0.6.2?\nIt's currently only 0.5, too old, in Gentoo.\n\nI've filed https://bugs.gentoo.org/711492 to track this.",
    "created_at": "2020-03-04T10:36:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410493",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:16'></a>by the way, could you people, fbissey or mjo, update  `sci-mathematics/gfan` to 0.6.2?
It's currently only 0.5, too old, in Gentoo.

I've filed https://bugs.gentoo.org/711492 to track this.



---

archive/issue_comments_410494.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-04T10:45:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410494",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_410495.json:
```json
{
    "body": "<a id='comment:18'></a>Replying to [comment:15 dimpase]:\n> perhaps there should be an extra optional datapoint for each gentoo package, the needed useflags, and then the installation advice would be generated by combining these flags into one list somehow? \n\n\nSounds good. Same format as a \"package.use\" file?",
    "created_at": "2020-03-04T10:56:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410495",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>Replying to [comment:15 dimpase]:
> perhaps there should be an extra optional datapoint for each gentoo package, the needed useflags, and then the installation advice would be generated by combining these flags into one list somehow? 


Sounds good. Same format as a "package.use" file?



---

archive/issue_comments_410496.json:
```json
{
    "body": "<a id='comment:19'></a>I've also filed https://bugs.gentoo.org/711498 to request m4rie to be packaged in Gentoo.",
    "created_at": "2020-03-04T11:12:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410496",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:19'></a>I've also filed https://bugs.gentoo.org/711498 to request m4rie to be packaged in Gentoo.



---

archive/issue_comments_410497.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-04T13:37:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410497",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_410498.json:
```json
{
    "body": "<a id='comment:21'></a>The dependency syntax for Gentoo includes the USE flags in square brackets after the package name, like `media-libs/gd[jpeg,png]`. I noticed that we're going to need that information, but I'm not sure where/how these text files are meant to be displayed to the end user, so I'm not sure of \"dependency\" format or package.use format is better.\n\nOne idea I had was that, until all of sage is packaged, maybe we could have people create a local package set called `@`sagemath:\n\nhttps://wiki.gentoo.org/wiki/Package_sets\n\nIf gentoo.txt contains entries like `media-libs/gd[jpeg,png]`, then we could tell users to `cat build/pkgs/*/distros/gentoo.txt > /etc/portage/sets/sagemath` and then `emerge --autounmask-use --autounmask-write `@`sagemath` would automatically add those flags to package.use before installing the associated packages. That lets us use dependency syntax, and portage takes care of turning it into package.use entries.\n\nThat's how I'm keeping track of my system-sage packages for now. Package sets are a bad substitute for a meta package, but they're easier for non-technical users to create and manage.\n\nOTOH, it may be simpler with package.use format to just specify a list of USE flags that works. Saying \"we need this and this and this... you figure it out\" is elegant, but experience has taught me that sometimes you just need to be able to tell the computer to \"shut up and use this.\"",
    "created_at": "2020-03-04T14:37:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410498",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:21'></a>The dependency syntax for Gentoo includes the USE flags in square brackets after the package name, like `media-libs/gd[jpeg,png]`. I noticed that we're going to need that information, but I'm not sure where/how these text files are meant to be displayed to the end user, so I'm not sure of "dependency" format or package.use format is better.

One idea I had was that, until all of sage is packaged, maybe we could have people create a local package set called `@`sagemath:

https://wiki.gentoo.org/wiki/Package_sets

If gentoo.txt contains entries like `media-libs/gd[jpeg,png]`, then we could tell users to `cat build/pkgs/*/distros/gentoo.txt > /etc/portage/sets/sagemath` and then `emerge --autounmask-use --autounmask-write `@`sagemath` would automatically add those flags to package.use before installing the associated packages. That lets us use dependency syntax, and portage takes care of turning it into package.use entries.

That's how I'm keeping track of my system-sage packages for now. Package sets are a bad substitute for a meta package, but they're easier for non-technical users to create and manage.

OTOH, it may be simpler with package.use format to just specify a list of USE flags that works. Saying "we need this and this and this... you figure it out" is elegant, but experience has taught me that sometimes you just need to be able to tell the computer to "shut up and use this."



---

archive/issue_comments_410499.json:
```json
{
    "body": "<a id='comment:22'></a>Replying to [comment:21 mjo]:\n> I noticed that we're going to need that information, but I'm not sure where/how these text files are meant to be displayed to the end user, so I'm not sure of \"dependency\" format or package.use format is better.\n\n\nIdeally, we will provide a script that formats a command line that the user can run directly. Similar to the `apt-get` lines shown in the Sage installation manual (formatted automatically as of #26964). See also #27351 (At end of configure, suggest a list of system packages to install) -- which should ideally also format a command line.\n\n> [...] Saying \"we need this and this and this... you figure it out\" is elegant, but experience has taught me that sometimes you just need to be able to tell the computer to \"shut up and use this.\"\n\n\nIndeed.",
    "created_at": "2020-03-04T14:44:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410499",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:22'></a>Replying to [comment:21 mjo]:
> I noticed that we're going to need that information, but I'm not sure where/how these text files are meant to be displayed to the end user, so I'm not sure of "dependency" format or package.use format is better.


Ideally, we will provide a script that formats a command line that the user can run directly. Similar to the `apt-get` lines shown in the Sage installation manual (formatted automatically as of #26964). See also #27351 (At end of configure, suggest a list of system packages to install) -- which should ideally also format a command line.

> [...] Saying "we need this and this and this... you figure it out" is elegant, but experience has taught me that sometimes you just need to be able to tell the computer to "shut up and use this."


Indeed.



---

archive/issue_comments_410500.json:
```json
{
    "body": "<a id='comment:23'></a>Replying to [comment:21 mjo]:\n> The dependency syntax for Gentoo includes the USE flags in square brackets after the package name, like `media-libs/gd[jpeg,png]`.\n\n\nSounds like this would be a better match for our gentoo.txt files than the package.use format.",
    "created_at": "2020-03-04T14:47:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410500",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'></a>Replying to [comment:21 mjo]:
> The dependency syntax for Gentoo includes the USE flags in square brackets after the package name, like `media-libs/gd[jpeg,png]`.


Sounds like this would be a better match for our gentoo.txt files than the package.use format.



---

archive/issue_comments_410501.json:
```json
{
    "body": "<a id='comment:24'></a>Does this syntax allow for things like `foo/bar[baz/oz, buz/biz]`, i.e. with dependencies names spelled in full ?\n\nThere could also be non-dependency USE flags needed for configuration, but if the latter works it hopefully covers most of our needs.",
    "created_at": "2020-03-04T19:04:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410501",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:24'></a>Does this syntax allow for things like `foo/bar[baz/oz, buz/biz]`, i.e. with dependencies names spelled in full ?

There could also be non-dependency USE flags needed for configuration, but if the latter works it hopefully covers most of our needs.



---

archive/issue_comments_410502.json:
```json
{
    "body": "<a id='comment:25'></a>Replying to [comment:24 dimpase]:\n> Does this syntax allow for things like `foo/bar[baz/oz, buz/biz]`, i.e. with dependencies names spelled in full ?\n> \n> There could also be non-dependency USE flags needed for configuration, but if the latter works it hopefully covers most of our needs.\n>  \n\n\nThe things inside the square brackets are the names of USE flags, not packages. So `foo/bar[baz,buz]` says that we need the package `foo/bar` built with both `USE=baz` and `USE=buz` set. Sometimes the USE flag names match up with package names, but ideally (and in general) they won't.",
    "created_at": "2020-03-05T03:28:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410502",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:25'></a>Replying to [comment:24 dimpase]:
> Does this syntax allow for things like `foo/bar[baz/oz, buz/biz]`, i.e. with dependencies names spelled in full ?
> 
> There could also be non-dependency USE flags needed for configuration, but if the latter works it hopefully covers most of our needs.
>  


The things inside the square brackets are the names of USE flags, not packages. So `foo/bar[baz,buz]` says that we need the package `foo/bar` built with both `USE=baz` and `USE=buz` set. Sometimes the USE flag names match up with package names, but ideally (and in general) they won't.



---

archive/issue_comments_410503.json:
```json
{
    "body": "<a id='comment:26'></a>Let's handle the fine points of Gentoo setup on a follow-up ticket.",
    "created_at": "2020-03-05T13:18:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410503",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:26'></a>Let's handle the fine points of Gentoo setup on a follow-up ticket.



---

archive/issue_comments_410504.json:
```json
{
    "body": "<a id='comment:27'></a>I don't know how to check any of the gentoo things (see #29105).",
    "created_at": "2020-03-05T20:19:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410504",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>I don't know how to check any of the gentoo things (see #29105).



---

archive/issue_comments_410505.json:
```json
{
    "body": "<a id='comment:28'></a>I am checking Gentoo things. The problem is that Gentoo is very fluid.",
    "created_at": "2020-03-05T20:28:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410505",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:28'></a>I am checking Gentoo things. The problem is that Gentoo is very fluid.



---

archive/issue_comments_410506.json:
```json
{
    "body": "<a id='comment:29'></a>Replying to [comment:28 dimpase]:\n> The problem is that Gentoo is very fluid.\n\n\nExactly because of that I want to define an environment using Docker so that the statement \"it works on gentoo\" is well-defined.",
    "created_at": "2020-03-05T20:33:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410506",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'></a>Replying to [comment:28 dimpase]:
> The problem is that Gentoo is very fluid.


Exactly because of that I want to define an environment using Docker so that the statement "it works on gentoo" is well-defined.



---

archive/issue_comments_410507.json:
```json
{
    "body": "<a id='comment:30'></a>Replying to [comment:27 mkoeppe]:\n> I don't know how to check any of the gentoo things (see #29105).\n\n\nget the list of packages from all these gentoo.txt files, and run, as root,\n\n`emerge --ask <this list>` \n\ne.g. `emerge --ask dev-lang/python foo/bar baz`\n\nthis is interactive, and you either will get an error, or a prompt inviting you to start the installation. cf https://wiki.gentoo.org/wiki/Gentoo_Cheat_Sheet etc\n\n(I don't have any machines ready to run docker, kernel options aren't right; I'll try on lxc using one of images here https://us.images.linuxcontainers.org/)",
    "created_at": "2020-03-05T21:24:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410507",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:30'></a>Replying to [comment:27 mkoeppe]:
> I don't know how to check any of the gentoo things (see #29105).


get the list of packages from all these gentoo.txt files, and run, as root,

`emerge --ask <this list>` 

e.g. `emerge --ask dev-lang/python foo/bar baz`

this is interactive, and you either will get an error, or a prompt inviting you to start the installation. cf https://wiki.gentoo.org/wiki/Gentoo_Cheat_Sheet etc

(I don't have any machines ready to run docker, kernel options aren't right; I'll try on lxc using one of images here https://us.images.linuxcontainers.org/)



---

archive/issue_comments_410508.json:
```json
{
    "body": "<a id='comment:31'></a>An alternative would be to merge this as is (checking non-gentoo things), and deal with gentoo on a separate ticket, which might take a while.",
    "created_at": "2020-03-05T21:28:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410508",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:31'></a>An alternative would be to merge this as is (checking non-gentoo things), and deal with gentoo on a separate ticket, which might take a while.



---

archive/issue_comments_410509.json:
```json
{
    "body": "<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-05T23:11:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410509",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_410510.json:
```json
{
    "body": "<a id='comment:33'></a>In addition to the fix in the last commit,\non the lxc gentoo/current image I picked on https://uk.images.linuxcontainers.org/, I needed to add\n\n``` \nsci-mathematics/arb\nsci-mathematics/flint\nsci-mathematics/cliquer\nsci-libs/m4ri\nsci-mathematics/planarity\nmedia-gfx/tachyon\n```\nto `/etc/portage/package.keywords`, as these packages are masked with `~amd64`.\nPerhaps there is a quicker way to accomplish this.\n\n`givaro` needed  agreeing to a license treatment, i.e.\n\n```\n# required by sci-libs/givaro (argument)\n>=sci-libs/givaro-4.1.1 CeCILL-B\n```\nadded to `/etc/portage/package.license`.\nAnd, naturally, `etc-update` had to be run a number of times, resulting in\n`/etc/portage/package.use/zz-autounmask` getting\n\n```\n# package.use# required by sci-mathematics/flint[ntl] (argument)\n>=sci-mathematics/flint-2.5.2-r1 ntl\n# required by dev-lang/R-3.4.1::gentoo\n# required by dev-lang/R (argument)\n>=sys-libs/zlib-1.2.11-r2 minizip\n# required by m4ri[png] (argument)\n>=sci-libs/m4ri-20200115 png\n```\nafter this, the build with all the `gentoo.txt`-mentioned packages started.\n\nThus, perhaps, installation instructions can have \ncommands like `run, as root`:\n\n```\ncat $SAGE_ROOT/build/portage/package.keywords >> /etc/portage/package.keywords\n```",
    "created_at": "2020-03-05T23:30:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410510",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:33'></a>In addition to the fix in the last commit,
on the lxc gentoo/current image I picked on https://uk.images.linuxcontainers.org/, I needed to add

``` 
sci-mathematics/arb
sci-mathematics/flint
sci-mathematics/cliquer
sci-libs/m4ri
sci-mathematics/planarity
media-gfx/tachyon
```
to `/etc/portage/package.keywords`, as these packages are masked with `~amd64`.
Perhaps there is a quicker way to accomplish this.

`givaro` needed  agreeing to a license treatment, i.e.

```
# required by sci-libs/givaro (argument)
>=sci-libs/givaro-4.1.1 CeCILL-B
```
added to `/etc/portage/package.license`.
And, naturally, `etc-update` had to be run a number of times, resulting in
`/etc/portage/package.use/zz-autounmask` getting

```
# package.use# required by sci-mathematics/flint[ntl] (argument)
>=sci-mathematics/flint-2.5.2-r1 ntl
# required by dev-lang/R-3.4.1::gentoo
# required by dev-lang/R (argument)
>=sys-libs/zlib-1.2.11-r2 minizip
# required by m4ri[png] (argument)
>=sci-libs/m4ri-20200115 png
```
after this, the build with all the `gentoo.txt`-mentioned packages started.

Thus, perhaps, installation instructions can have 
commands like `run, as root`:

```
cat $SAGE_ROOT/build/portage/package.keywords >> /etc/portage/package.keywords
```



---

archive/issue_comments_410511.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-03-06T02:19:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410511",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_410512.json:
```json
{
    "body": "<a id='comment:34'></a>Looks good to me. Tests at https://github.com/mkoeppe/sage/actions/runs/50456287",
    "created_at": "2020-03-06T02:19:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410512",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:34'></a>Looks good to me. Tests at https://github.com/mkoeppe/sage/actions/runs/50456287



---

archive/issue_comments_410513.json:
```json
{
    "body": "<a id='comment:35'></a>Replying to [comment:31 dimpase]:\n> deal with gentoo on a separate ticket, which might take a while.\n\n\nLet's use #29105 (Extend dockerfile generator to gentoo) for that.",
    "created_at": "2020-03-06T02:24:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410513",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:35'></a>Replying to [comment:31 dimpase]:
> deal with gentoo on a separate ticket, which might take a while.


Let's use #29105 (Extend dockerfile generator to gentoo) for that.



---

archive/issue_comments_410514.json:
```json
{
    "body": "<a id='comment:36'></a>Replying to [comment:33 dimpase]:\n> ... Thus, perhaps, installation instructions can have \n> commands like `run, as root`:\n> \n> ```\n> cat $SAGE_ROOT/build/portage/package.keywords >> /etc/portage/package.keywords\n> ```\n\n\nSounds OK to me.",
    "created_at": "2020-03-06T02:25:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410514",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:36'></a>Replying to [comment:33 dimpase]:
> ... Thus, perhaps, installation instructions can have 
> commands like `run, as root`:
> 
> ```
> cat $SAGE_ROOT/build/portage/package.keywords >> /etc/portage/package.keywords
> ```


Sounds OK to me.



---

archive/issue_comments_410515.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2020-03-06T10:42:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410515",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_410516.json:
```json
{
    "body": "<a id='comment:37'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2020-03-06T10:42:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410516",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:37'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_410517.json:
```json
{
    "body": "<a id='comment:38'></a>The gentoo.txt files still need work, as the current configuration pulls in wrong blas/lapack, and llvm/clang (sic!), something we definitely don't want.",
    "created_at": "2020-03-06T10:47:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410517",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:38'></a>The gentoo.txt files still need work, as the current configuration pulls in wrong blas/lapack, and llvm/clang (sic!), something we definitely don't want.



---

archive/issue_comments_410518.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-03-06T10:47:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410518",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_410519.json:
```json
{
    "body": "<a id='comment:40'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2020-03-06T15:12:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410519",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:40'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_410520.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2020-03-06T15:12:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410520",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_410521.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-03-06T16:41:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410521",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_410522.json:
```json
{
    "body": "<a id='comment:41'></a>OK, I should stop fiddling with this. Gentoo stuff needs moar workz.",
    "created_at": "2020-03-06T16:41:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410522",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:41'></a>OK, I should stop fiddling with this. Gentoo stuff needs moar workz.



---

archive/issue_comments_410523.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-03-08T22:14:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410523",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_410524.json:
```json
{
    "body": "<a id='comment:42'></a>Merge conflict",
    "created_at": "2020-03-08T22:14:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410524",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:42'></a>Merge conflict



---

archive/issue_comments_410525.json:
```json
{
    "body": "<a id='comment:44'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-03-08T22:19:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410525",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:44'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_410526.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2020-03-08T22:19:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410526",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_410527.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-03-08T22:28:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410527",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_410528.json:
```json
{
    "body": "<a id='comment:46'></a>Merge conflict",
    "created_at": "2020-03-08T22:28:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410528",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:46'></a>Merge conflict



---

archive/issue_comments_410529.json:
```json
{
    "body": "<a id='comment:47'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-09T00:49:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410529",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:47'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_410530.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2020-03-09T00:50:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410530",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_events_074464.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-03-11T23:46:18Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29273#event-74464"
}
```



---

archive/issue_comments_410531.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-03-11T23:46:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410531",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_410532.json:
```json
{
    "body": "<a id='comment:50'></a>a followup on #29352",
    "created_at": "2020-03-17T18:38:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29273#issuecomment-410532",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:50'></a>a followup on #29352
