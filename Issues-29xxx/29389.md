# Issue 29389: Adjust eclib spkg-configure.m4 - to fix documentation build error on fedora-31-standard

archive/issues_029152.json:
```json
{
    "body": "On `fedora-31-standard` (https://github.com/mkoeppe/sage/runs/524868604):\n\n```\nChecking whether SageMath should install SPKG eclib...\nchecking installing ntl or pari? ... checking eclib/types.h usability... yes\nchecking eclib/types.h presence... yes\nchecking for eclib/types.h... yes\nchecking whether we can link and run a program using eclib... yes; use eclib from the system\nconfigure: will use system package and not install SPKG eclib\n....\n  [dochtml]     File \"/sage/local/lib/python3.7/site-packages/sage_setup/docbuild/utils.py\", line 283, in build_many\n  [dochtml]       raise worker_exc.original_exception\n  [dochtml]   OSError: WARNING: autodoc: failed to import module 'homspace' from module 'sage.libs.eclib'; the following exception was raised:\n  [dochtml] Full log file: logs/dochtml.log\n```\n\n\n\nCC:  @dimpase @JohnCremona @orlitzky\n\nBranch/Commit: [68df2f248ec1cb6df283ad67ff03c9389e160338](https://github.com/sagemath/sagetrac-mirror/commit/68df2f248ec1cb6df283ad67ff03c9389e160338)\n\nReviewer: Michael Orlitzky\n\nAuthor: Matthias Koeppe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29389\n\n",
    "closed_at": "2020-04-09T22:45:07Z",
    "created_at": "2020-03-22T15:34:28Z",
    "labels": [
        "component: build: configure",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "Adjust eclib spkg-configure.m4 - to fix documentation build error on fedora-31-standard",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29389",
    "user": "https://github.com/mkoeppe"
}
```
On `fedora-31-standard` (https://github.com/mkoeppe/sage/runs/524868604):

```
Checking whether SageMath should install SPKG eclib...
checking installing ntl or pari? ... checking eclib/types.h usability... yes
checking eclib/types.h presence... yes
checking for eclib/types.h... yes
checking whether we can link and run a program using eclib... yes; use eclib from the system
configure: will use system package and not install SPKG eclib
....
  [dochtml]     File "/sage/local/lib/python3.7/site-packages/sage_setup/docbuild/utils.py", line 283, in build_many
  [dochtml]       raise worker_exc.original_exception
  [dochtml]   OSError: WARNING: autodoc: failed to import module 'homspace' from module 'sage.libs.eclib'; the following exception was raised:
  [dochtml] Full log file: logs/dochtml.log
```



CC:  @dimpase @JohnCremona @orlitzky

Branch/Commit: [68df2f248ec1cb6df283ad67ff03c9389e160338](https://github.com/sagemath/sagetrac-mirror/commit/68df2f248ec1cb6df283ad67ff03c9389e160338)

Reviewer: Michael Orlitzky

Author: Matthias Koeppe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29389





---

archive/issue_comments_574441.json:
```json
{
    "body": "<a id='comment:1'></a>\nIs this the same as #28943?",
    "created_at": "2020-03-22T15:56:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29389#issuecomment-574441",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'></a>
Is this the same as #28943?



---

archive/issue_comments_574442.json:
```json
{
    "body": "<a id='comment:2'></a>\nthis looks different to me. \n\nJohn, is this kind of error familiar to you?",
    "created_at": "2020-03-23T02:50:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29389#issuecomment-574442",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:2'></a>
this looks different to me. 

John, is this kind of error familiar to you?



---

archive/issue_comments_574443.json:
```json
{
    "body": "<a id='comment:3'></a>\nIt is not familiar to me.  The log shows that a system eclib is being used so how does Sage know what code it is using?",
    "created_at": "2020-03-23T08:13:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29389#issuecomment-574443",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:3'></a>
It is not familiar to me.  The log shows that a system eclib is being used so how does Sage know what code it is using?



---

archive/issue_comments_574444.json:
```json
{
    "body": "<a id='comment:5'></a>\nAccording to the log it is using the following packages:\n\n```\n eclib                                  x86_64  20190909-1.fc31                    fedora   \n eclib-devel                            x86_64  20190909-1.fc31                    fedora    \n```",
    "created_at": "2020-03-29T03:05:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29389#issuecomment-574444",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>
According to the log it is using the following packages:

```
 eclib                                  x86_64  20190909-1.fc31                    fedora   
 eclib-devel                            x86_64  20190909-1.fc31                    fedora    
```



---

archive/issue_events_084513.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/29389",
    "rename": {
        "from": "Fix eclib spkg-configure.m4",
        "to": "Adjust eclib spkg-configure.m4 - to fix documentation build error on fedora-31-standard"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29389#event-84513"
}
```



---

archive/issue_comments_574445.json:
```json
{
    "body": "<a id='comment:7'></a>\nMore detail: \n\n```\n[dochtml]   [libs     ] WARNING: autodoc: failed to import module 'homspace' from module 'sage.libs.eclib'; the following exception was raised:\n  [dochtml]   [libs     ] /lib64/libec.so.6: undefined symbol: hmod_mat_clear\n  [dochtml]   [libs     ] WARNING: autodoc: failed to import module 'interface' from module 'sage.libs.eclib'; the following exception was raised:\n  [dochtml]   [libs     ] /lib64/libec.so.6: undefined symbol: hmod_mat_clear\n  [dochtml]   [libs     ] WARNING: autodoc: failed to import module 'mat' from module 'sage.libs.eclib'; the following exception was raised:\n  [dochtml]   [libs     ] /lib64/libec.so.6: undefined symbol: hmod_mat_clear\n  [dochtml]   [libs     ] WARNING: autodoc: failed to import module 'mwrank' from module 'sage.libs.eclib'; the following exception was raised:\n  [dochtml]   [libs     ] /lib64/libec.so.6: undefined symbol: hmod_mat_clear\n  [dochtml]   [libs     ] WARNING: autodoc: failed to import module 'newforms' from module 'sage.libs.eclib'; the following exception was raised:\n  [dochtml]   [libs     ] /lib64/libec.so.6: undefined symbol: hmod_mat_clear\n```",
    "created_at": "2020-04-02T12:24:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29389#issuecomment-574445",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
More detail: 

```
[dochtml]   [libs     ] WARNING: autodoc: failed to import module 'homspace' from module 'sage.libs.eclib'; the following exception was raised:
  [dochtml]   [libs     ] /lib64/libec.so.6: undefined symbol: hmod_mat_clear
  [dochtml]   [libs     ] WARNING: autodoc: failed to import module 'interface' from module 'sage.libs.eclib'; the following exception was raised:
  [dochtml]   [libs     ] /lib64/libec.so.6: undefined symbol: hmod_mat_clear
  [dochtml]   [libs     ] WARNING: autodoc: failed to import module 'mat' from module 'sage.libs.eclib'; the following exception was raised:
  [dochtml]   [libs     ] /lib64/libec.so.6: undefined symbol: hmod_mat_clear
  [dochtml]   [libs     ] WARNING: autodoc: failed to import module 'mwrank' from module 'sage.libs.eclib'; the following exception was raised:
  [dochtml]   [libs     ] /lib64/libec.so.6: undefined symbol: hmod_mat_clear
  [dochtml]   [libs     ] WARNING: autodoc: failed to import module 'newforms' from module 'sage.libs.eclib'; the following exception was raised:
  [dochtml]   [libs     ] /lib64/libec.so.6: undefined symbol: hmod_mat_clear
```



---

archive/issue_comments_574446.json:
```json
{
    "body": "<a id='comment:8'></a>\nThis seems to be due to a conflict between system library and sage library flint.",
    "created_at": "2020-04-06T05:11:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29389#issuecomment-574446",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
This seems to be due to a conflict between system library and sage library flint.



---

archive/issue_comments_574447.json:
```json
{
    "body": "Branch: [u/mkoeppe/adjust_eclib_spkg_configure_m4___to_fix_documentation_build_error_on_fedora_31_standard](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/adjust_eclib_spkg_configure_m4___to_fix_documentation_build_error_on_fedora_31_standard)",
    "created_at": "2020-04-06T05:17:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29389#issuecomment-574447",
    "user": "https://github.com/mkoeppe"
}
```

Branch: [u/mkoeppe/adjust_eclib_spkg_configure_m4___to_fix_documentation_build_error_on_fedora_31_standard](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/adjust_eclib_spkg_configure_m4___to_fix_documentation_build_error_on_fedora_31_standard)



---

archive/issue_comments_574448.json:
```json
{
    "body": "<a id='comment:10'></a>\nNew commits:\n|                                                                                                                                          |                                                                    |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------|\n|[68df2f2](https://github.com/sagemath/sagetrac-mirror/commit/68df2f248ec1cb6df283ad67ff03c9389e160338)|`build/pkgs/eclib/spkg-configure.m4: Add missing depcheck for flint`|",
    "created_at": "2020-04-06T05:19:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29389#issuecomment-574448",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>
New commits:
|                                                                                                                                          |                                                                    |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------|
|[68df2f2](https://github.com/sagemath/sagetrac-mirror/commit/68df2f248ec1cb6df283ad67ff03c9389e160338)|`build/pkgs/eclib/spkg-configure.m4: Add missing depcheck for flint`|



---

archive/issue_comments_574449.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-04-06T05:19:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29389#issuecomment-574449",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_574450.json:
```json
{
    "body": "Author: Matthias Koeppe",
    "created_at": "2020-04-06T05:19:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29389#issuecomment-574450",
    "user": "https://github.com/mkoeppe"
}
```

Author: Matthias Koeppe



---

archive/issue_comments_574451.json:
```json
{
    "body": "Commit: [68df2f248ec1cb6df283ad67ff03c9389e160338](https://github.com/sagemath/sagetrac-mirror/commit/68df2f248ec1cb6df283ad67ff03c9389e160338)",
    "created_at": "2020-04-06T05:19:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29389#issuecomment-574451",
    "user": "https://github.com/mkoeppe"
}
```

Commit: [68df2f248ec1cb6df283ad67ff03c9389e160338](https://github.com/sagemath/sagetrac-mirror/commit/68df2f248ec1cb6df283ad67ff03c9389e160338)



---

archive/issue_comments_574452.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-04-06T12:50:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29389#issuecomment-574452",
    "user": "https://github.com/orlitzky"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_574453.json:
```json
{
    "body": "Reviewer: Michael Orlitzky",
    "created_at": "2020-04-06T12:50:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29389#issuecomment-574453",
    "user": "https://github.com/orlitzky"
}
```

Reviewer: Michael Orlitzky



---

archive/issue_comments_574454.json:
```json
{
    "body": "<a id='comment:12'></a>\nThanks!",
    "created_at": "2020-04-06T15:59:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29389#issuecomment-574454",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>
Thanks!



---

archive/issue_comments_574455.json:
```json
{
    "body": "Changing branch from \"[u/mkoeppe/adjust_eclib_spkg_configure_m4___to_fix_documentation_build_error_on_fedora_31_standard](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/adjust_eclib_spkg_configure_m4___to_fix_documentation_build_error_on_fedora_31_standard)\" to \"[68df2f248ec1cb6df283ad67ff03c9389e160338](https://github.com/sagemath/sagetrac-mirror/commit/68df2f248ec1cb6df283ad67ff03c9389e160338)\"",
    "created_at": "2020-04-09T22:45:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29389#issuecomment-574455",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "[u/mkoeppe/adjust_eclib_spkg_configure_m4___to_fix_documentation_build_error_on_fedora_31_standard](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/adjust_eclib_spkg_configure_m4___to_fix_documentation_build_error_on_fedora_31_standard)" to "[68df2f248ec1cb6df283ad67ff03c9389e160338](https://github.com/sagemath/sagetrac-mirror/commit/68df2f248ec1cb6df283ad67ff03c9389e160338)"



---

archive/issue_events_084514.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-09T22:45:07Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29389",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29389#event-84514"
}
```



---

archive/issue_comments_574456.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-04-09T22:45:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29389#issuecomment-574456",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
