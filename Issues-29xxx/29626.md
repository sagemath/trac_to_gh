# Issue 29626: Remove ./configure --enable-SPKG options for pip packages (for which this is not implemented)

archive/issues_029389.json:
```json
{
    "assignees": [],
    "body": "As reported in https://groups.google.com/d/msg/sage-release/6hBUt5i9FLs/RM-2eCdcBgAJ:\n\n```\nIt seems that if I do\n\n./configure  --enable-beautifulsoup4\n\nor\n\n./configure  --enable-pyopenssl\n\nI get\n\nmake[3]: ***  Aucune r\u00e8gle pour fabriquer la cible \u00ab /home/slabbe/GitBox/sage/local/var/lib\n/sage/installed/beautifulsoup4-none \u00bb, n\u00e9cessaire pour \u00ab all-sage \u00bb. Arr\u00eat.\nmake[3]: *** Attente des t\u00e2ches non termin\u00e9es....\n...\n\nmake[3]: ***  Aucune r\u00e8gle pour fabriquer la cible \u00ab /home/slabbe/GitBox/sage/local/var/lib/sage/installed/pyopenssl-none \u00bb, n\u00e9cessaire pour \u00ab all-sage \u00bb. Arr\u00eat.\n...\n\nand make stops with an error.\n```\n\nWe remove these options as a quick fix for 9.1.  Follow-up could be in #29097.\n\n\n\nCC:  @seblabbe @dimpase @jhpalmieri @orlitzky\n\nBranch/Commit: **[`2bb7d75`](https://github.com/sagemath/sagetrac-mirror/commit/2bb7d75c67511452639cd3a25eebaada6f6a27f7)**\n\nReviewer: **S\u00e9bastien Labb\u00e9, John Palmieri**\n\nAuthor: **Matthias Koeppe**\n\nComponent: **build: configure**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29626_\n\n",
    "closed_at": "2020-05-04T06:41:05Z",
    "created_at": "2020-04-30T19:41:16Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build%3A%20configure",
        "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Remove ./configure --enable-SPKG options for pip packages (for which this is not implemented)",
    "type": "issue",
    "updated_at": "2020-05-04T06:41:05Z",
    "url": "https://github.com/sagemath/sage/issues/29626",
    "user": "https://github.com/mkoeppe"
}
```
As reported in https://groups.google.com/d/msg/sage-release/6hBUt5i9FLs/RM-2eCdcBgAJ:

```
It seems that if I do

./configure  --enable-beautifulsoup4

or

./configure  --enable-pyopenssl

I get

make[3]: ***  Aucune règle pour fabriquer la cible « /home/slabbe/GitBox/sage/local/var/lib
/sage/installed/beautifulsoup4-none », nécessaire pour « all-sage ». Arrêt.
make[3]: *** Attente des tâches non terminées....
...

make[3]: ***  Aucune règle pour fabriquer la cible « /home/slabbe/GitBox/sage/local/var/lib/sage/installed/pyopenssl-none », nécessaire pour « all-sage ». Arrêt.
...

and make stops with an error.
```

We remove these options as a quick fix for 9.1.  Follow-up could be in #29097.



CC:  @seblabbe @dimpase @jhpalmieri @orlitzky

Branch/Commit: **[`2bb7d75`](https://github.com/sagemath/sagetrac-mirror/commit/2bb7d75c67511452639cd3a25eebaada6f6a27f7)**

Reviewer: **Sébastien Labbé, John Palmieri**

Author: **Matthias Koeppe**

Component: **build: configure**

_Issue created by migration from https://trac.sagemath.org/ticket/29626_





---

archive/issue_events_404523.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-30T19:41:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29626#event-404523"
}
```



---

archive/issue_events_404524.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-30T19:41:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build%3A%20configure",
    "label_color": "0000b0",
    "label_name": "c: build: configure",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29626#event-404524"
}
```



---

archive/issue_events_404525.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-30T19:41:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
    "label_color": "ff7700",
    "label_name": "p: critical / 2",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29626#event-404525"
}
```



---

archive/issue_events_404526.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-30T19:41:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29626#event-404526"
}
```



---

archive/issue_comments_466289.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nRelated to #29113 and #29481, I'm guessing. See also [#29418 comment:23](https://github.com/sagemath/sage/issues/29418#comment:23).",
    "created_at": "2020-04-30T22:28:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466289",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:1" align="right">comment:1</div>

Related to #29113 and #29481, I'm guessing. See also [#29418 comment:23](https://github.com/sagemath/sage/issues/29418#comment:23).



---

archive/issue_comments_466290.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nIt's trying to use a target that does exist for the case of pip packages. See macro `PIP_PACKAGE_templ` in `build/make/Makefile.in`",
    "created_at": "2020-04-30T23:37:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466290",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2" align="right">comment:2</div>

It's trying to use a target that does exist for the case of pip packages. See macro `PIP_PACKAGE_templ` in `build/make/Makefile.in`



---

archive/issue_comments_466291.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nSee also #29097, which needs to touch the same bits of the Makefile",
    "created_at": "2020-04-30T23:42:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466291",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3" align="right">comment:3</div>

See also #29097, which needs to touch the same bits of the Makefile



---

archive/issue_comments_466292.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nFor 9.1 a quick fix could be to disable the `--enable-SPKG` options for pip packages.",
    "created_at": "2020-05-01T00:17:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466292",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:4" align="right">comment:4</div>

For 9.1 a quick fix could be to disable the `--enable-SPKG` options for pip packages.



---

archive/issue_comments_466293.json:
```json
{
    "body": "Branch: **[u/mkoeppe/__configure___enable_spkg_does_not_work_for_optional_pip_packages](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/__configure___enable_spkg_does_not_work_for_optional_pip_packages)**",
    "created_at": "2020-05-01T00:42:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466293",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/__configure___enable_spkg_does_not_work_for_optional_pip_packages](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/__configure___enable_spkg_does_not_work_for_optional_pip_packages)**



---

archive/issue_comments_466294.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2020-05-01T00:44:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466294",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_events_404527.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-01T00:44:09Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "title_is": "Remove ./configure --enable-SPKG options for pip packages (for which this is not implemented)",
    "title_was": "./configure --enable-SPKG does not work for optional pip packages",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29626#event-404527"
}
```



---

archive/issue_events_404528.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-01T00:44:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29626#event-404528"
}
```



---

archive/issue_comments_466295.json:
```json
{
    "body": "Commit: **[`4d912a5`](https://github.com/sagemath/sagetrac-mirror/commit/4d912a5bbfb774326b237b87a1eb8919926b532b)**",
    "created_at": "2020-05-01T00:44:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466295",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`4d912a5`](https://github.com/sagemath/sagetrac-mirror/commit/4d912a5bbfb774326b237b87a1eb8919926b532b)**



---

archive/issue_comments_466296.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4d912a5bbfb774326b237b87a1eb8919926b532b\"><code>4d912a5</code></a></td><td><code>No --enable-spkg options for pip packages</code></td></tr></table>\n",
    "created_at": "2020-05-01T00:44:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466296",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4d912a5bbfb774326b237b87a1eb8919926b532b"><code>4d912a5</code></a></td><td><code>No --enable-spkg options for pip packages</code></td></tr></table>




---

archive/issue_comments_466297.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -21,3 +21,7 @@\n \n and make stops with an error.\n ```\n+\n+We remove these options as a quick fix for 9.1.  Follow-up could be in #29097.\n+\n+\n``````\n",
    "created_at": "2020-05-01T00:44:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466297",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -21,3 +21,7 @@
 
 and make stops with an error.
 ```
+
+We remove these options as a quick fix for 9.1.  Follow-up could be in #29097.
+
+
``````




---

archive/issue_comments_466298.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI suggest also removing this message in `src/bin/sage`:\n\n```\n    if [ -n \"$ENABLE_ARGS\" ]; then\n        echo >&2 \"Hint: These optional/experimental packages can also be configured\"\n        echo >&2 \"to be installed by passing$ENABLE_ARGS to ./configure\"\n    fi\n```\nOr make it conditional on the type of package, but that seems a bit involved.",
    "created_at": "2020-05-01T03:50:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466298",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:7" align="right">comment:7</div>

I suggest also removing this message in `src/bin/sage`:

```
    if [ -n "$ENABLE_ARGS" ]; then
        echo >&2 "Hint: These optional/experimental packages can also be configured"
        echo >&2 "to be installed by passing$ENABLE_ARGS to ./configure"
    fi
```
Or make it conditional on the type of package, but that seems a bit involved.



---

archive/issue_comments_466299.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nWhat is standard `./configure` behavior regarding bad flags? I see\n\n```\n$ ./configure --enable-pyflakes\nconfigure: WARNING: unrecognized options: --enable-pyflakes\n```\nand then the warning message gets swept off the screen by all of the other messages. Should this be printed as part of a summary? Or do we assume that a user who knows enough to try something like this also knows enough to pay attention?",
    "created_at": "2020-05-01T03:55:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466299",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:8" align="right">comment:8</div>

What is standard `./configure` behavior regarding bad flags? I see

```
$ ./configure --enable-pyflakes
configure: WARNING: unrecognized options: --enable-pyflakes
```
and then the warning message gets swept off the screen by all of the other messages. Should this be printed as part of a summary? Or do we assume that a user who knows enough to try something like this also knows enough to pay attention?



---

archive/issue_comments_466300.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d09cf4caafee9c44a833aa41b06ca38620f5b49\"><code>9d09cf4</code></a></td><td><code>src/bin/sage: Remove hints recommending ./configure --enable-SPKG</code></td></tr></table>\n",
    "created_at": "2020-05-01T04:03:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466300",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d09cf4caafee9c44a833aa41b06ca38620f5b49"><code>9d09cf4</code></a></td><td><code>src/bin/sage: Remove hints recommending ./configure --enable-SPKG</code></td></tr></table>




---

archive/issue_comments_466301.json:
```json
{
    "body": "Changed commit from **[`4d912a5`](https://github.com/sagemath/sagetrac-mirror/commit/4d912a5bbfb774326b237b87a1eb8919926b532b)** to **[`9d09cf4`](https://github.com/sagemath/sagetrac-mirror/commit/9d09cf4caafee9c44a833aa41b06ca38620f5b49)**",
    "created_at": "2020-05-01T04:03:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466301",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4d912a5`](https://github.com/sagemath/sagetrac-mirror/commit/4d912a5bbfb774326b237b87a1eb8919926b532b)** to **[`9d09cf4`](https://github.com/sagemath/sagetrac-mirror/commit/9d09cf4caafee9c44a833aa41b06ca38620f5b49)**



---

archive/issue_comments_466302.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@jhpalmieri](#comment%3A7):\n> I suggest also removing this message in `src/bin/sage`:\n> \n> ```\n>     if [ -n \"$ENABLE_ARGS\" ]; then\n>         echo >&2 \"Hint: These optional/experimental packages can also be configured\"\n>         echo >&2 \"to be installed by passing$ENABLE_ARGS to ./configure\"\n>     fi\n> ```\n\nDone. Let's revisit this in the next release cycle.\n\n> Or make it conditional on the type of package, but that seems a bit involved.\n\nI agree, too complicated",
    "created_at": "2020-05-01T04:05:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466302",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@jhpalmieri](#comment%3A7):
> I suggest also removing this message in `src/bin/sage`:
> 
> ```
>     if [ -n "$ENABLE_ARGS" ]; then
>         echo >&2 "Hint: These optional/experimental packages can also be configured"
>         echo >&2 "to be installed by passing$ENABLE_ARGS to ./configure"
>     fi
> ```

Done. Let's revisit this in the next release cycle.

> Or make it conditional on the type of package, but that seems a bit involved.

I agree, too complicated



---

archive/issue_comments_466303.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@jhpalmieri](#comment%3A8):\n> What is standard `./configure` behavior regarding bad flags? I see\n> \n> ```\n> $ ./configure --enable-pyflakes\n> configure: WARNING: unrecognized options: --enable-pyflakes\n> ```\n> and then the warning message gets swept off the screen by all of the other messages. Should this be printed as part of a summary? Or do we assume that a user who knows enough to try something like this also knows enough to pay attention?\n\nThat's normal and this part is not really configurable in autoconf.\n\nOne can disable these warning using `--disable-option-checking`, but I don't think there is an option to change these warnings to errors.",
    "created_at": "2020-05-01T04:07:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466303",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@jhpalmieri](#comment%3A8):
> What is standard `./configure` behavior regarding bad flags? I see
> 
> ```
> $ ./configure --enable-pyflakes
> configure: WARNING: unrecognized options: --enable-pyflakes
> ```
> and then the warning message gets swept off the screen by all of the other messages. Should this be printed as part of a summary? Or do we assume that a user who knows enough to try something like this also knows enough to pay attention?

That's normal and this part is not really configurable in autoconf.

One can disable these warning using `--disable-option-checking`, but I don't think there is an option to change these warnings to errors.



---

archive/issue_comments_466304.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nRegarding the new message in `sage_spkg_collect.m4`: `sage -i PKG` and `make PKG` both seem to work, and so does `sage --pip install PKG`. Is there any reason to prefer any of these? (Well, `sage -i PKG` does other stuff, too, so that one isn't as good, in my opinion.)",
    "created_at": "2020-05-01T04:15:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466304",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:12" align="right">comment:12</div>

Regarding the new message in `sage_spkg_collect.m4`: `sage -i PKG` and `make PKG` both seem to work, and so does `sage --pip install PKG`. Is there any reason to prefer any of these? (Well, `sage -i PKG` does other stuff, too, so that one isn't as good, in my opinion.)



---

archive/issue_comments_466305.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nIn fact, I would prefer `make PKG`, since it works with a fresh tarball, whereas `sage --pip install PKG` doesn't do what I want: since I'm using the system Python, it installs the package in the system location, not in SAGE_ROOT/local/...  `make PKG` installs in the correct place.",
    "created_at": "2020-05-01T04:58:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466305",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:13" align="right">comment:13</div>

In fact, I would prefer `make PKG`, since it works with a fresh tarball, whereas `sage --pip install PKG` doesn't do what I want: since I'm using the system Python, it installs the package in the system location, not in SAGE_ROOT/local/...  `make PKG` installs in the correct place.



---

archive/issue_comments_466306.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nThanks for catching this. That's an important point",
    "created_at": "2020-05-01T05:08:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466306",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:14" align="right">comment:14</div>

Thanks for catching this. That's an important point



---

archive/issue_comments_466307.json:
```json
{
    "body": "Changed commit from **[`9d09cf4`](https://github.com/sagemath/sagetrac-mirror/commit/9d09cf4caafee9c44a833aa41b06ca38620f5b49)** to **[`2bb7d75`](https://github.com/sagemath/sagetrac-mirror/commit/2bb7d75c67511452639cd3a25eebaada6f6a27f7)**",
    "created_at": "2020-05-01T05:16:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466307",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9d09cf4`](https://github.com/sagemath/sagetrac-mirror/commit/9d09cf4caafee9c44a833aa41b06ca38620f5b49)** to **[`2bb7d75`](https://github.com/sagemath/sagetrac-mirror/commit/2bb7d75c67511452639cd3a25eebaada6f6a27f7)**



---

archive/issue_comments_466308.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2bb7d75c67511452639cd3a25eebaada6f6a27f7\"><code>2bb7d75</code></a></td><td><code>m4/sage_spkg_collect.m4: Recommend 'sage -i' to install pip packages</code></td></tr></table>\n",
    "created_at": "2020-05-01T05:16:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466308",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2bb7d75c67511452639cd3a25eebaada6f6a27f7"><code>2bb7d75</code></a></td><td><code>m4/sage_spkg_collect.m4: Recommend 'sage -i' to install pip packages</code></td></tr></table>




---

archive/issue_comments_466309.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@jhpalmieri](#comment%3A13):\n> In fact, I would prefer `make PKG`, since it works with a fresh tarball, whereas `sage --pip install PKG` doesn't do what I want: since I'm using the system Python, it installs the package in the system location, not in SAGE_ROOT/local/...  `make PKG` installs in the correct place.\n\nI have created a separate isssue for this: #29627 (\"sage -pip\" should never install into the system Python's site-packages)",
    "created_at": "2020-05-01T05:20:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466309",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@jhpalmieri](#comment%3A13):
> In fact, I would prefer `make PKG`, since it works with a fresh tarball, whereas `sage --pip install PKG` doesn't do what I want: since I'm using the system Python, it installs the package in the system location, not in SAGE_ROOT/local/...  `make PKG` installs in the correct place.

I have created a separate isssue for this: #29627 ("sage -pip" should never install into the system Python's site-packages)



---

archive/issue_comments_466310.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nI am using `sage -i PKG` in the message instead of `make PKG` because I'm not sure if we should advertise the latter.",
    "created_at": "2020-05-01T05:22:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466310",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:17" align="right">comment:17</div>

I am using `sage -i PKG` in the message instead of `make PKG` because I'm not sure if we should advertise the latter.



---

archive/issue_comments_466311.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\n(`sage -i` is already documented.)",
    "created_at": "2020-05-01T05:22:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466311",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:18" align="right">comment:18</div>

(`sage -i` is already documented.)



---

archive/issue_comments_466312.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@mkoeppe](#comment%3A17):\n> I am using `sage -i PKG` in the message instead of `make PKG` because I'm not sure if we should advertise the latter.\n\nI thought it's the plan to move to using `make` instead of `sage -i`",
    "created_at": "2020-05-01T07:43:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466312",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@mkoeppe](#comment%3A17):
> I am using `sage -i PKG` in the message instead of `make PKG` because I'm not sure if we should advertise the latter.

I thought it's the plan to move to using `make` instead of `sage -i`



---

archive/issue_comments_466313.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nI can't reproduce the problem this ticket is meant to solve.",
    "created_at": "2020-05-01T08:24:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466313",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:20" align="right">comment:20</div>

I can't reproduce the problem this ticket is meant to solve.



---

archive/issue_comments_466314.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@dimpase](#comment%3A20):\n> I can't reproduce the problem this ticket is meant to solve.\n\nTo be honest, I was using configure with other options. Let me try again the minimal example... On my working installation of 9.1.rc2, if I do:\n\n```\n./configure  --enable-pyopenssl\nmake\n```\n\nI get\n\n```\nmake[3]: ***  Aucune r\u00e8gle pour fabriquer la cible \u00ab\u00a0/home/slabbe/GitBox/sage/local/var/lib/sage/installed/pyopenssl-none\u00a0\u00bb, n\u00e9cessaire pour \u00ab\u00a0all-sage\u00a0\u00bb. Arr\u00eat.\nmake[3]\u00a0: on quitte le r\u00e9pertoire \u00ab\u00a0/home/slabbe/GitBox/sage/build/make\u00a0\u00bb\nMakefile:1841\u00a0: la recette pour la cible \u00ab\u00a0all-start\u00a0\u00bb a \u00e9chou\u00e9e\nmake[2]: *** [all-start] Erreur 2\nmake[2]\u00a0: on quitte le r\u00e9pertoire \u00ab\u00a0/home/slabbe/GitBox/sage/build/make\u00a0\u00bb\n\nreal\t1m40.559s\nuser\t1m29.896s\nsys\t0m10.192s\n***************************************************************\nError building Sage.\n\nThe following package(s) may have failed to build (not necessarily\nduring this run of 'make all-start'):\n\nIt is safe to delete any log files and build directories, but they\ncontain information that is helpful for debugging build problems.\nWARNING: If you now run 'make' again, the build directory of the\nsame version of the package will, by default, be deleted. Set the\nenvironment variable SAGE_KEEP_BUILT_SPKGS=yes to prevent this.\n\nMakefile:31\u00a0: la recette pour la cible \u00ab\u00a0all-start\u00a0\u00bb a \u00e9chou\u00e9e\nmake[1]: *** [all-start] Erreur 1\nmake[1]\u00a0: on quitte le r\u00e9pertoire \u00ab\u00a0/home/slabbe/GitBox/sage\u00a0\u00bb\nMakefile:13\u00a0: la recette pour la cible \u00ab\u00a0all\u00a0\u00bb a \u00e9chou\u00e9e\nmake: *** [all] Erreur 2\n```\n\nwhich confirms the issue on my machine.",
    "created_at": "2020-05-01T08:38:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466314",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@dimpase](#comment%3A20):
> I can't reproduce the problem this ticket is meant to solve.

To be honest, I was using configure with other options. Let me try again the minimal example... On my working installation of 9.1.rc2, if I do:

```
./configure  --enable-pyopenssl
make
```

I get

```
make[3]: ***  Aucune règle pour fabriquer la cible « /home/slabbe/GitBox/sage/local/var/lib/sage/installed/pyopenssl-none », nécessaire pour « all-sage ». Arrêt.
make[3] : on quitte le répertoire « /home/slabbe/GitBox/sage/build/make »
Makefile:1841 : la recette pour la cible « all-start » a échouée
make[2]: *** [all-start] Erreur 2
make[2] : on quitte le répertoire « /home/slabbe/GitBox/sage/build/make »

real	1m40.559s
user	1m29.896s
sys	0m10.192s
***************************************************************
Error building Sage.

The following package(s) may have failed to build (not necessarily
during this run of 'make all-start'):

It is safe to delete any log files and build directories, but they
contain information that is helpful for debugging build problems.
WARNING: If you now run 'make' again, the build directory of the
same version of the package will, by default, be deleted. Set the
environment variable SAGE_KEEP_BUILT_SPKGS=yes to prevent this.

Makefile:31 : la recette pour la cible « all-start » a échouée
make[1]: *** [all-start] Erreur 1
make[1] : on quitte le répertoire « /home/slabbe/GitBox/sage »
Makefile:13 : la recette pour la cible « all » a échouée
make: *** [all] Erreur 2
```

which confirms the issue on my machine.



---

archive/issue_comments_466315.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nNotice also that the list of `The following package(s) may have failed to build` is empty which is kind of weird and which made me search longer to discover the problem.",
    "created_at": "2020-05-01T08:40:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466315",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:22" align="right">comment:22</div>

Notice also that the list of `The following package(s) may have failed to build` is empty which is kind of weird and which made me search longer to discover the problem.



---

archive/issue_comments_466316.json:
```json
{
    "body": "Reviewer: **S\u00e9bastien Labb\u00e9**",
    "created_at": "2020-05-01T08:55:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466316",
    "user": "https://github.com/seblabbe"
}
```

Reviewer: **Sébastien Labbé**



---

archive/issue_comments_466317.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nWith the branch applied, I confirm that it is not documented anymore:\n\n```\n$ ./configure  --help | grep pyopenssl\n$ ./configure  --help | grep fricas\n  --enable-fricas={no|if_installed|yes}\n                          enable build and use of the optional package fricas\n                          package information: ./sage -info fricas\n  --disable-fricas        disable build and uninstall if previously installed\n                          by Sage in PREFIX; same as --enable-fricas=no\n```\n\nBut still, if I decide to do it, then\n\n```\n./configure  --enable-pyopenssl\n```\n\nprints the warning `configure: WARNING: unrecognized options: --enable-pyopenssl`\n\nAnd then\n\n```\nMAKE='make -j8' make\n```\nfinishes without error.\n\nAnd as expected, `pyopenssl` is not installed:\n\n```\n$ sage -optional | grep pyopenssl\npyopenssl...............................19.1.0 (not_installed)\n```\n\nTo me it is a positive review (for the behavior). I did not check the code itself. So I let John or Dima or someone else to change the status of the ticket to positive review if that part is good too.",
    "created_at": "2020-05-01T08:55:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466317",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:23" align="right">comment:23</div>

With the branch applied, I confirm that it is not documented anymore:

```
$ ./configure  --help | grep pyopenssl
$ ./configure  --help | grep fricas
  --enable-fricas={no|if_installed|yes}
                          enable build and use of the optional package fricas
                          package information: ./sage -info fricas
  --disable-fricas        disable build and uninstall if previously installed
                          by Sage in PREFIX; same as --enable-fricas=no
```

But still, if I decide to do it, then

```
./configure  --enable-pyopenssl
```

prints the warning `configure: WARNING: unrecognized options: --enable-pyopenssl`

And then

```
MAKE='make -j8' make
```
finishes without error.

And as expected, `pyopenssl` is not installed:

```
$ sage -optional | grep pyopenssl
pyopenssl...............................19.1.0 (not_installed)
```

To me it is a positive review (for the behavior). I did not check the code itself. So I let John or Dima or someone else to change the status of the ticket to positive review if that part is good too.



---

archive/issue_comments_466318.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@dimpase](#comment%3A19):\n> I thought it's the plan to move to using `make` instead of `sage -i`\n\nI also thought that (well read it from previous very involved developpers).",
    "created_at": "2020-05-01T09:00:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466318",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@dimpase](#comment%3A19):
> I thought it's the plan to move to using `make` instead of `sage -i`

I also thought that (well read it from previous very involved developpers).



---

archive/issue_comments_466319.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nI don't see how to obtain the message that tells me to `make pyopensl` or `sage -i pyopenssl` ?",
    "created_at": "2020-05-01T09:11:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466319",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:25" align="right">comment:25</div>

I don't see how to obtain the message that tells me to `make pyopensl` or `sage -i pyopenssl` ?



---

archive/issue_comments_466320.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nIt is displayed during the package summary at the end of the `./configure` run.",
    "created_at": "2020-05-01T15:25:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466320",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:26" align="right">comment:26</div>

It is displayed during the package summary at the end of the `./configure` run.



---

archive/issue_comments_466321.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@dimpase](#comment%3A19):\n> Replying to [@mkoeppe](#comment%3A17):\n> > I am using `sage -i PKG` in the message instead of `make PKG` because I'm not sure if we should advertise the latter.\n\n> \n> I thought it's the plan to move to using `make` instead of `sage -i`\n\nMy plan is to fully support `./configure --enable-PKG`. But this feature is not ready for pip packages for the 9.1 release.\n\nI don't know whose plan it was to make `make PKG` the advertised interface. There is no ticket that outlines this plan as far as I can see.",
    "created_at": "2020-05-01T15:27:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466321",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@dimpase](#comment%3A19):
> Replying to [@mkoeppe](#comment%3A17):
> > I am using `sage -i PKG` in the message instead of `make PKG` because I'm not sure if we should advertise the latter.

> 
> I thought it's the plan to move to using `make` instead of `sage -i`

My plan is to fully support `./configure --enable-PKG`. But this feature is not ready for pip packages for the 9.1 release.

I don't know whose plan it was to make `make PKG` the advertised interface. There is no ticket that outlines this plan as far as I can see.



---

archive/issue_events_404529.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2020-05-01T17:12:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29626#event-404529"
}
```



---

archive/issue_events_404530.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2020-05-01T17:12:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29626#event-404530"
}
```



---

archive/issue_comments_466322.json:
```json
{
    "body": "Changed reviewer from **S\u00e9bastien Labb\u00e9** to **S\u00e9bastien Labb\u00e9, John Palmieri**",
    "created_at": "2020-05-01T17:12:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466322",
    "user": "https://github.com/jhpalmieri"
}
```

Changed reviewer from **Sébastien Labbé** to **Sébastien Labbé, John Palmieri**



---

archive/issue_comments_466323.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nWe can leave it as is, but there is a significant difference between `sage -i PKG` and `make PKG`: the former installs the package (and its prereqs) and then builds all of Sage, while the second just installs the package (and its prereqs).",
    "created_at": "2020-05-01T17:12:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466323",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:28" align="right">comment:28</div>

We can leave it as is, but there is a significant difference between `sage -i PKG` and `make PKG`: the former installs the package (and its prereqs) and then builds all of Sage, while the second just installs the package (and its prereqs).



---

archive/issue_comments_466324.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nThat's right. Which is part of why I don't want to advertise `make PKG` to Sage users. It's for advanced developer use, I would say.",
    "created_at": "2020-05-01T17:14:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466324",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:29" align="right">comment:29</div>

That's right. Which is part of why I don't want to advertise `make PKG` to Sage users. It's for advanced developer use, I would say.



---

archive/issue_comments_466325.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nThanks for reviewing!",
    "created_at": "2020-05-01T17:17:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466325",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:30" align="right">comment:30</div>

Thanks for reviewing!



---

archive/issue_events_404531.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-05-04T06:41:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29626#event-404531"
}
```



---

archive/issue_events_404532.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "a4a63c8349296fb320ba1ee7bae8834afae4d640",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-05-04T06:41:05Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29626#event-404532"
}
```



---

archive/issue_comments_466326.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/__configure___enable_spkg_does_not_work_for_optional_pip_packages](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/__configure___enable_spkg_does_not_work_for_optional_pip_packages)** to **[`2bb7d75`](https://github.com/sagemath/sagetrac-mirror/commit/2bb7d75c67511452639cd3a25eebaada6f6a27f7)**",
    "created_at": "2020-05-04T06:41:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29626#issuecomment-466326",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/__configure___enable_spkg_does_not_work_for_optional_pip_packages](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/__configure___enable_spkg_does_not_work_for_optional_pip_packages)** to **[`2bb7d75`](https://github.com/sagemath/sagetrac-mirror/commit/2bb7d75c67511452639cd3a25eebaada6f6a27f7)**
