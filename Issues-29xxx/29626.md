# Issue 29626: Remove ./configure --enable-SPKG options for pip packages (for which this is not implemented)

archive/issues_029389.json:
```json
{
    "body": "As reported in https://groups.google.com/d/msg/sage-release/6hBUt5i9FLs/RM-2eCdcBgAJ:\n\n```\nIt seems that if I do\n\n./configure  --enable-beautifulsoup4\n\nor\n\n./configure  --enable-pyopenssl\n\nI get\n\nmake[3]: ***  Aucune r\u00e8gle pour fabriquer la cible \u00ab /home/slabbe/GitBox/sage/local/var/lib\n/sage/installed/beautifulsoup4-none \u00bb, n\u00e9cessaire pour \u00ab all-sage \u00bb. Arr\u00eat.\nmake[3]: *** Attente des t\u00e2ches non termin\u00e9es....\n...\n\nmake[3]: ***  Aucune r\u00e8gle pour fabriquer la cible \u00ab /home/slabbe/GitBox/sage/local/var/lib/sage/installed/pyopenssl-none \u00bb, n\u00e9cessaire pour \u00ab all-sage \u00bb. Arr\u00eat.\n...\n\nand make stops with an error.\n```\n\nWe remove these options as a quick fix for 9.1.  Follow-up could be in #29097.\n\n\n\n**CC:**  @seblabbe @dimpase @jhpalmieri @orlitzky\n\n**Branch/Commit:** [2bb7d75c67511452639cd3a25eebaada6f6a27f7](https://github.com/sagemath/sagetrac-mirror/commit/2bb7d75c67511452639cd3a25eebaada6f6a27f7)\n\n**Reviewer:** S\u00e9bastien Labb\u00e9, John Palmieri\n\n**Author:** Matthias Koeppe\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29626\n\n",
    "closed_at": "2020-05-04T06:41:05Z",
    "created_at": "2020-04-30T19:41:16Z",
    "labels": [
        "component: build: configure",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "Remove ./configure --enable-SPKG options for pip packages (for which this is not implemented)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29626",
    "user": "https://github.com/mkoeppe"
}
```
As reported in https://groups.google.com/d/msg/sage-release/6hBUt5i9FLs/RM-2eCdcBgAJ:

```
It seems that if I do

./configure  --enable-beautifulsoup4

or

./configure  --enable-pyopenssl

I get

make[3]: ***  Aucune règle pour fabriquer la cible « /home/slabbe/GitBox/sage/local/var/lib
/sage/installed/beautifulsoup4-none », nécessaire pour « all-sage ». Arrêt.
make[3]: *** Attente des tâches non terminées....
...

make[3]: ***  Aucune règle pour fabriquer la cible « /home/slabbe/GitBox/sage/local/var/lib/sage/installed/pyopenssl-none », nécessaire pour « all-sage ». Arrêt.
...

and make stops with an error.
```

We remove these options as a quick fix for 9.1.  Follow-up could be in #29097.



**CC:**  @seblabbe @dimpase @jhpalmieri @orlitzky

**Branch/Commit:** [2bb7d75c67511452639cd3a25eebaada6f6a27f7](https://github.com/sagemath/sagetrac-mirror/commit/2bb7d75c67511452639cd3a25eebaada6f6a27f7)

**Reviewer:** Sébastien Labbé, John Palmieri

**Author:** Matthias Koeppe

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/29626





---

archive/issue_comments_580444.json:
```json
{
    "body": "<a id='comment:1'></a>\nRelated to #29113 and #29481, I'm guessing. See alsoticket: ticket:29418#comment:23#comment:29418.",
    "created_at": "2020-04-30T22:28:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580444",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:1'></a>
Related to #29113 and #29481, I'm guessing. See alsoticket: ticket:29418#comment:23#comment:29418.



---

archive/issue_comments_580445.json:
```json
{
    "body": "<a id='comment:2'></a>\nIt's trying to use a target that does exist for the case of pip packages. See macro `PIP_PACKAGE_templ` in `build/make/Makefile.in`",
    "created_at": "2020-04-30T23:37:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580445",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
It's trying to use a target that does exist for the case of pip packages. See macro `PIP_PACKAGE_templ` in `build/make/Makefile.in`



---

archive/issue_comments_580446.json:
```json
{
    "body": "<a id='comment:3'></a>\nSee also #29097, which needs to touch the same bits of the Makefile",
    "created_at": "2020-04-30T23:42:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580446",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>
See also #29097, which needs to touch the same bits of the Makefile



---

archive/issue_comments_580447.json:
```json
{
    "body": "<a id='comment:4'></a>\nFor 9.1 a quick fix could be to disable the `--enable-SPKG` options for pip packages.",
    "created_at": "2020-05-01T00:17:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580447",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
For 9.1 a quick fix could be to disable the `--enable-SPKG` options for pip packages.



---

archive/issue_comments_580448.json:
```json
{
    "body": "**Branch:** [u/mkoeppe/__configure___enable_spkg_does_not_work_for_optional_pip_packages](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/__configure___enable_spkg_does_not_work_for_optional_pip_packages)",
    "created_at": "2020-05-01T00:42:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580448",
    "user": "https://github.com/mkoeppe"
}
```

**Branch:** [u/mkoeppe/__configure___enable_spkg_does_not_work_for_optional_pip_packages](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/__configure___enable_spkg_does_not_work_for_optional_pip_packages)



---

archive/issue_comments_580449.json:
```json
{
    "body": "**Author:** Matthias Koeppe",
    "created_at": "2020-05-01T00:44:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580449",
    "user": "https://github.com/mkoeppe"
}
```

**Author:** Matthias Koeppe



---

archive/issue_events_085441.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "rename": {
        "from": "./configure --enable-SPKG does not work for optional pip packages",
        "to": "Remove ./configure --enable-SPKG options for pip packages (for which this is not implemented)"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29626#event-85441"
}
```



---

archive/issue_comments_580450.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2020-05-01T00:44:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580450",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_580451.json:
```json
{
    "body": "**Commit:** [4d912a5bbfb774326b237b87a1eb8919926b532b](https://github.com/sagemath/sagetrac-mirror/commit/4d912a5bbfb774326b237b87a1eb8919926b532b)",
    "created_at": "2020-05-01T00:44:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580451",
    "user": "https://github.com/mkoeppe"
}
```

**Commit:** [4d912a5bbfb774326b237b87a1eb8919926b532b](https://github.com/sagemath/sagetrac-mirror/commit/4d912a5bbfb774326b237b87a1eb8919926b532b)



---

archive/issue_comments_580452.json:
```json
{
    "body": "<a id='comment:6'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4d912a5bbfb774326b237b87a1eb8919926b532b\">4d912a5</a></td><td><code>No --enable-spkg options for pip packages</code></td></tr></table>\n",
    "created_at": "2020-05-01T00:44:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580452",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4d912a5bbfb774326b237b87a1eb8919926b532b">4d912a5</a></td><td><code>No --enable-spkg options for pip packages</code></td></tr></table>




---

archive/issue_comments_580453.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -21,3 +21,7 @@\n \n and make stops with an error.\n ```\n+\n+We remove these options as a quick fix for 9.1.  Follow-up could be in #29097.\n+\n+\n``````\n",
    "created_at": "2020-05-01T00:44:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580453",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -21,3 +21,7 @@
 
 and make stops with an error.
 ```
+
+We remove these options as a quick fix for 9.1.  Follow-up could be in #29097.
+
+
``````




---

archive/issue_comments_580454.json:
```json
{
    "body": "<a id='comment:7'></a>\nI suggest also removing this message in `src/bin/sage`:\n\n```\n    if [ -n \"$ENABLE_ARGS\" ]; then\n        echo >&2 \"Hint: These optional/experimental packages can also be configured\"\n        echo >&2 \"to be installed by passing$ENABLE_ARGS to ./configure\"\n    fi\n```\nOr make it conditional on the type of package, but that seems a bit involved.",
    "created_at": "2020-05-01T03:50:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580454",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:7'></a>
I suggest also removing this message in `src/bin/sage`:

```
    if [ -n "$ENABLE_ARGS" ]; then
        echo >&2 "Hint: These optional/experimental packages can also be configured"
        echo >&2 "to be installed by passing$ENABLE_ARGS to ./configure"
    fi
```
Or make it conditional on the type of package, but that seems a bit involved.



---

archive/issue_comments_580455.json:
```json
{
    "body": "<a id='comment:8'></a>\nWhat is standard `./configure` behavior regarding bad flags? I see\n\n```\n$ ./configure --enable-pyflakes\nconfigure: WARNING: unrecognized options: --enable-pyflakes\n```\nand then the warning message gets swept off the screen by all of the other messages. Should this be printed as part of a summary? Or do we assume that a user who knows enough to try something like this also knows enough to pay attention?",
    "created_at": "2020-05-01T03:55:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580455",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:8'></a>
What is standard `./configure` behavior regarding bad flags? I see

```
$ ./configure --enable-pyflakes
configure: WARNING: unrecognized options: --enable-pyflakes
```
and then the warning message gets swept off the screen by all of the other messages. Should this be printed as part of a summary? Or do we assume that a user who knows enough to try something like this also knows enough to pay attention?



---

archive/issue_comments_580456.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d09cf4caafee9c44a833aa41b06ca38620f5b49\">9d09cf4</a></td><td><code>src/bin/sage: Remove hints recommending ./configure --enable-SPKG</code></td></tr></table>\n",
    "created_at": "2020-05-01T04:03:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580456",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d09cf4caafee9c44a833aa41b06ca38620f5b49">9d09cf4</a></td><td><code>src/bin/sage: Remove hints recommending ./configure --enable-SPKG</code></td></tr></table>




---

archive/issue_comments_580457.json:
```json
{
    "body": "**Changing commit** from \"[4d912a5bbfb774326b237b87a1eb8919926b532b](https://github.com/sagemath/sagetrac-mirror/commit/4d912a5bbfb774326b237b87a1eb8919926b532b)\" to \"[9d09cf4caafee9c44a833aa41b06ca38620f5b49](https://github.com/sagemath/sagetrac-mirror/commit/9d09cf4caafee9c44a833aa41b06ca38620f5b49)\".",
    "created_at": "2020-05-01T04:03:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580457",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[4d912a5bbfb774326b237b87a1eb8919926b532b](https://github.com/sagemath/sagetrac-mirror/commit/4d912a5bbfb774326b237b87a1eb8919926b532b)" to "[9d09cf4caafee9c44a833aa41b06ca38620f5b49](https://github.com/sagemath/sagetrac-mirror/commit/9d09cf4caafee9c44a833aa41b06ca38620f5b49)".



---

archive/issue_comments_580458.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [jhpalmieri](#comment%3A7):\n> I suggest also removing this message in `src/bin/sage`:\n> \n> ```\n>     if [ -n \"$ENABLE_ARGS\" ]; then\n>         echo >&2 \"Hint: These optional/experimental packages can also be configured\"\n>         echo >&2 \"to be installed by passing$ENABLE_ARGS to ./configure\"\n>     fi\n> ```\n\n\nDone. Let's revisit this in the next release cycle.\n\n> Or make it conditional on the type of package, but that seems a bit involved.\n\n\nI agree, too complicated",
    "created_at": "2020-05-01T04:05:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580458",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>
Replying to [jhpalmieri](#comment%3A7):
> I suggest also removing this message in `src/bin/sage`:
> 
> ```
>     if [ -n "$ENABLE_ARGS" ]; then
>         echo >&2 "Hint: These optional/experimental packages can also be configured"
>         echo >&2 "to be installed by passing$ENABLE_ARGS to ./configure"
>     fi
> ```


Done. Let's revisit this in the next release cycle.

> Or make it conditional on the type of package, but that seems a bit involved.


I agree, too complicated



---

archive/issue_comments_580459.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [jhpalmieri](#comment%3A8):\n> What is standard `./configure` behavior regarding bad flags? I see\n> \n> ```\n> $ ./configure --enable-pyflakes\n> configure: WARNING: unrecognized options: --enable-pyflakes\n> ```\n> and then the warning message gets swept off the screen by all of the other messages. Should this be printed as part of a summary? Or do we assume that a user who knows enough to try something like this also knows enough to pay attention?\n\n\nThat's normal and this part is not really configurable in autoconf.\n\nOne can disable these warning using `--disable-option-checking`, but I don't think there is an option to change these warnings to errors.",
    "created_at": "2020-05-01T04:07:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580459",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>
Replying to [jhpalmieri](#comment%3A8):
> What is standard `./configure` behavior regarding bad flags? I see
> 
> ```
> $ ./configure --enable-pyflakes
> configure: WARNING: unrecognized options: --enable-pyflakes
> ```
> and then the warning message gets swept off the screen by all of the other messages. Should this be printed as part of a summary? Or do we assume that a user who knows enough to try something like this also knows enough to pay attention?


That's normal and this part is not really configurable in autoconf.

One can disable these warning using `--disable-option-checking`, but I don't think there is an option to change these warnings to errors.



---

archive/issue_comments_580460.json:
```json
{
    "body": "<a id='comment:12'></a>\nRegarding the new message in `sage_spkg_collect.m4`: `sage -i PKG` and `make PKG` both seem to work, and so does `sage --pip install PKG`. Is there any reason to prefer any of these? (Well, `sage -i PKG` does other stuff, too, so that one isn't as good, in my opinion.)",
    "created_at": "2020-05-01T04:15:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580460",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:12'></a>
Regarding the new message in `sage_spkg_collect.m4`: `sage -i PKG` and `make PKG` both seem to work, and so does `sage --pip install PKG`. Is there any reason to prefer any of these? (Well, `sage -i PKG` does other stuff, too, so that one isn't as good, in my opinion.)



---

archive/issue_comments_580461.json:
```json
{
    "body": "<a id='comment:13'></a>\nIn fact, I would prefer `make PKG`, since it works with a fresh tarball, whereas `sage --pip install PKG` doesn't do what I want: since I'm using the system Python, it installs the package in the system location, not in SAGE_ROOT/local/...  `make PKG` installs in the correct place.",
    "created_at": "2020-05-01T04:58:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580461",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:13'></a>
In fact, I would prefer `make PKG`, since it works with a fresh tarball, whereas `sage --pip install PKG` doesn't do what I want: since I'm using the system Python, it installs the package in the system location, not in SAGE_ROOT/local/...  `make PKG` installs in the correct place.



---

archive/issue_comments_580462.json:
```json
{
    "body": "<a id='comment:14'></a>\nThanks for catching this. That's an important point",
    "created_at": "2020-05-01T05:08:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580462",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>
Thanks for catching this. That's an important point



---

archive/issue_comments_580463.json:
```json
{
    "body": "**Changing commit** from \"[9d09cf4caafee9c44a833aa41b06ca38620f5b49](https://github.com/sagemath/sagetrac-mirror/commit/9d09cf4caafee9c44a833aa41b06ca38620f5b49)\" to \"[2bb7d75c67511452639cd3a25eebaada6f6a27f7](https://github.com/sagemath/sagetrac-mirror/commit/2bb7d75c67511452639cd3a25eebaada6f6a27f7)\".",
    "created_at": "2020-05-01T05:16:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580463",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[9d09cf4caafee9c44a833aa41b06ca38620f5b49](https://github.com/sagemath/sagetrac-mirror/commit/9d09cf4caafee9c44a833aa41b06ca38620f5b49)" to "[2bb7d75c67511452639cd3a25eebaada6f6a27f7](https://github.com/sagemath/sagetrac-mirror/commit/2bb7d75c67511452639cd3a25eebaada6f6a27f7)".



---

archive/issue_comments_580464.json:
```json
{
    "body": "<a id='comment:15'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2bb7d75c67511452639cd3a25eebaada6f6a27f7\">2bb7d75</a></td><td><code>m4/sage_spkg_collect.m4: Recommend 'sage -i' to install pip packages</code></td></tr></table>\n",
    "created_at": "2020-05-01T05:16:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580464",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2bb7d75c67511452639cd3a25eebaada6f6a27f7">2bb7d75</a></td><td><code>m4/sage_spkg_collect.m4: Recommend 'sage -i' to install pip packages</code></td></tr></table>




---

archive/issue_comments_580465.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [jhpalmieri](#comment%3A13):\n> In fact, I would prefer `make PKG`, since it works with a fresh tarball, whereas `sage --pip install PKG` doesn't do what I want: since I'm using the system Python, it installs the package in the system location, not in SAGE_ROOT/local/...  `make PKG` installs in the correct place.\n\n\nI have created a separate isssue for this: #29627 (\"sage -pip\" should never install into the system Python's site-packages)",
    "created_at": "2020-05-01T05:20:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580465",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>
Replying to [jhpalmieri](#comment%3A13):
> In fact, I would prefer `make PKG`, since it works with a fresh tarball, whereas `sage --pip install PKG` doesn't do what I want: since I'm using the system Python, it installs the package in the system location, not in SAGE_ROOT/local/...  `make PKG` installs in the correct place.


I have created a separate isssue for this: #29627 ("sage -pip" should never install into the system Python's site-packages)



---

archive/issue_comments_580466.json:
```json
{
    "body": "<a id='comment:17'></a>\nI am using `sage -i PKG` in the message instead of `make PKG` because I'm not sure if we should advertise the latter.",
    "created_at": "2020-05-01T05:22:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580466",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>
I am using `sage -i PKG` in the message instead of `make PKG` because I'm not sure if we should advertise the latter.



---

archive/issue_comments_580467.json:
```json
{
    "body": "<a id='comment:18'></a>\n(`sage -i` is already documented.)",
    "created_at": "2020-05-01T05:22:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580467",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>
(`sage -i` is already documented.)



---

archive/issue_comments_580468.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [mkoeppe](#comment%3A17):\n> I am using `sage -i PKG` in the message instead of `make PKG` because I'm not sure if we should advertise the latter.\n\n\nI thought it's the plan to move to using `make` instead of `sage -i`",
    "created_at": "2020-05-01T07:43:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580468",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:19'></a>
Replying to [mkoeppe](#comment%3A17):
> I am using `sage -i PKG` in the message instead of `make PKG` because I'm not sure if we should advertise the latter.


I thought it's the plan to move to using `make` instead of `sage -i`



---

archive/issue_comments_580469.json:
```json
{
    "body": "<a id='comment:20'></a>\nI can't reproduce the problem this ticket is meant to solve.",
    "created_at": "2020-05-01T08:24:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580469",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:20'></a>
I can't reproduce the problem this ticket is meant to solve.



---

archive/issue_comments_580470.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [dimpase](#comment%3A20):\n> I can't reproduce the problem this ticket is meant to solve.\n\n\nTo be honest, I was using configure with other options. Let me try again the minimal example... On my working installation of 9.1.rc2, if I do:\n\n```\n./configure  --enable-pyopenssl\nmake\n```\n\nI get\n\n```\nmake[3]: ***  Aucune r\u00e8gle pour fabriquer la cible \u00ab\u00a0/home/slabbe/GitBox/sage/local/var/lib/sage/installed/pyopenssl-none\u00a0\u00bb, n\u00e9cessaire pour \u00ab\u00a0all-sage\u00a0\u00bb. Arr\u00eat.\nmake[3]\u00a0: on quitte le r\u00e9pertoire \u00ab\u00a0/home/slabbe/GitBox/sage/build/make\u00a0\u00bb\nMakefile:1841\u00a0: la recette pour la cible \u00ab\u00a0all-start\u00a0\u00bb a \u00e9chou\u00e9e\nmake[2]: *** [all-start] Erreur 2\nmake[2]\u00a0: on quitte le r\u00e9pertoire \u00ab\u00a0/home/slabbe/GitBox/sage/build/make\u00a0\u00bb\n\nreal\t1m40.559s\nuser\t1m29.896s\nsys\t0m10.192s\n***************************************************************\nError building Sage.\n\nThe following package(s) may have failed to build (not necessarily\nduring this run of 'make all-start'):\n\nIt is safe to delete any log files and build directories, but they\ncontain information that is helpful for debugging build problems.\nWARNING: If you now run 'make' again, the build directory of the\nsame version of the package will, by default, be deleted. Set the\nenvironment variable SAGE_KEEP_BUILT_SPKGS=yes to prevent this.\n\nMakefile:31\u00a0: la recette pour la cible \u00ab\u00a0all-start\u00a0\u00bb a \u00e9chou\u00e9e\nmake[1]: *** [all-start] Erreur 1\nmake[1]\u00a0: on quitte le r\u00e9pertoire \u00ab\u00a0/home/slabbe/GitBox/sage\u00a0\u00bb\nMakefile:13\u00a0: la recette pour la cible \u00ab\u00a0all\u00a0\u00bb a \u00e9chou\u00e9e\nmake: *** [all] Erreur 2\n```\n\nwhich confirms the issue on my machine.",
    "created_at": "2020-05-01T08:38:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580470",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:21'></a>
Replying to [dimpase](#comment%3A20):
> I can't reproduce the problem this ticket is meant to solve.


To be honest, I was using configure with other options. Let me try again the minimal example... On my working installation of 9.1.rc2, if I do:

```
./configure  --enable-pyopenssl
make
```

I get

```
make[3]: ***  Aucune règle pour fabriquer la cible « /home/slabbe/GitBox/sage/local/var/lib/sage/installed/pyopenssl-none », nécessaire pour « all-sage ». Arrêt.
make[3] : on quitte le répertoire « /home/slabbe/GitBox/sage/build/make »
Makefile:1841 : la recette pour la cible « all-start » a échouée
make[2]: *** [all-start] Erreur 2
make[2] : on quitte le répertoire « /home/slabbe/GitBox/sage/build/make »

real	1m40.559s
user	1m29.896s
sys	0m10.192s
***************************************************************
Error building Sage.

The following package(s) may have failed to build (not necessarily
during this run of 'make all-start'):

It is safe to delete any log files and build directories, but they
contain information that is helpful for debugging build problems.
WARNING: If you now run 'make' again, the build directory of the
same version of the package will, by default, be deleted. Set the
environment variable SAGE_KEEP_BUILT_SPKGS=yes to prevent this.

Makefile:31 : la recette pour la cible « all-start » a échouée
make[1]: *** [all-start] Erreur 1
make[1] : on quitte le répertoire « /home/slabbe/GitBox/sage »
Makefile:13 : la recette pour la cible « all » a échouée
make: *** [all] Erreur 2
```

which confirms the issue on my machine.



---

archive/issue_comments_580471.json:
```json
{
    "body": "<a id='comment:22'></a>\nNotice also that the list of `The following package(s) may have failed to build` is empty which is kind of weird and which made me search longer to discover the problem.",
    "created_at": "2020-05-01T08:40:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580471",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:22'></a>
Notice also that the list of `The following package(s) may have failed to build` is empty which is kind of weird and which made me search longer to discover the problem.



---

archive/issue_comments_580472.json:
```json
{
    "body": "**Reviewer:** S\u00e9bastien Labb\u00e9",
    "created_at": "2020-05-01T08:55:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580472",
    "user": "https://github.com/seblabbe"
}
```

**Reviewer:** Sébastien Labbé



---

archive/issue_comments_580473.json:
```json
{
    "body": "<a id='comment:23'></a>\nWith the branch applied, I confirm that it is not documented anymore:\n\n```\n$ ./configure  --help | grep pyopenssl\n$ ./configure  --help | grep fricas\n  --enable-fricas={no|if_installed|yes}\n                          enable build and use of the optional package fricas\n                          package information: ./sage -info fricas\n  --disable-fricas        disable build and uninstall if previously installed\n                          by Sage in PREFIX; same as --enable-fricas=no\n```\n\nBut still, if I decide to do it, then\n\n```\n./configure  --enable-pyopenssl\n```\n\nprints the warning `configure: WARNING: unrecognized options: --enable-pyopenssl`\n\nAnd then\n\n```\nMAKE='make -j8' make\n```\nfinishes without error.\n\nAnd as expected, `pyopenssl` is not installed:\n\n```\n$ sage -optional | grep pyopenssl\npyopenssl...............................19.1.0 (not_installed)\n```\n\nTo me it is a positive review (for the behavior). I did not check the code itself. So I let John or Dima or someone else to change the status of the ticket to positive review if that part is good too.",
    "created_at": "2020-05-01T08:55:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580473",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:23'></a>
With the branch applied, I confirm that it is not documented anymore:

```
$ ./configure  --help | grep pyopenssl
$ ./configure  --help | grep fricas
  --enable-fricas={no|if_installed|yes}
                          enable build and use of the optional package fricas
                          package information: ./sage -info fricas
  --disable-fricas        disable build and uninstall if previously installed
                          by Sage in PREFIX; same as --enable-fricas=no
```

But still, if I decide to do it, then

```
./configure  --enable-pyopenssl
```

prints the warning `configure: WARNING: unrecognized options: --enable-pyopenssl`

And then

```
MAKE='make -j8' make
```
finishes without error.

And as expected, `pyopenssl` is not installed:

```
$ sage -optional | grep pyopenssl
pyopenssl...............................19.1.0 (not_installed)
```

To me it is a positive review (for the behavior). I did not check the code itself. So I let John or Dima or someone else to change the status of the ticket to positive review if that part is good too.



---

archive/issue_comments_580474.json:
```json
{
    "body": "<a id='comment:24'></a>\nReplying to [dimpase](#comment%3A19):\n> I thought it's the plan to move to using `make` instead of `sage -i`\n\nI also thought that (well read it from previous very involved developpers).",
    "created_at": "2020-05-01T09:00:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580474",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:24'></a>
Replying to [dimpase](#comment%3A19):
> I thought it's the plan to move to using `make` instead of `sage -i`

I also thought that (well read it from previous very involved developpers).



---

archive/issue_comments_580475.json:
```json
{
    "body": "<a id='comment:25'></a>\nI don't see how to obtain the message that tells me to `make pyopensl` or `sage -i pyopenssl` ?",
    "created_at": "2020-05-01T09:11:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580475",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:25'></a>
I don't see how to obtain the message that tells me to `make pyopensl` or `sage -i pyopenssl` ?



---

archive/issue_comments_580476.json:
```json
{
    "body": "<a id='comment:26'></a>\nIt is displayed during the package summary at the end of the `./configure` run.",
    "created_at": "2020-05-01T15:25:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580476",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>
It is displayed during the package summary at the end of the `./configure` run.



---

archive/issue_comments_580477.json:
```json
{
    "body": "<a id='comment:27'></a>\nReplying to [dimpase](#comment%3A19):\n> Replying to [mkoeppe](#comment%3A17):\n> > I am using `sage -i PKG` in the message instead of `make PKG` because I'm not sure if we should advertise the latter.\n\n> \n> I thought it's the plan to move to using `make` instead of `sage -i`\n\n\nMy plan is to fully support `./configure --enable-PKG`. But this feature is not ready for pip packages for the 9.1 release.\n\nI don't know whose plan it was to make `make PKG` the advertised interface. There is no ticket that outlines this plan as far as I can see.",
    "created_at": "2020-05-01T15:27:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580477",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>
Replying to [dimpase](#comment%3A19):
> Replying to [mkoeppe](#comment%3A17):
> > I am using `sage -i PKG` in the message instead of `make PKG` because I'm not sure if we should advertise the latter.

> 
> I thought it's the plan to move to using `make` instead of `sage -i`


My plan is to fully support `./configure --enable-PKG`. But this feature is not ready for pip packages for the 9.1 release.

I don't know whose plan it was to make `make PKG` the advertised interface. There is no ticket that outlines this plan as far as I can see.



---

archive/issue_comments_580478.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2020-05-01T17:12:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580478",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_580479.json:
```json
{
    "body": "**Changing reviewer** from \"S\u00e9bastien Labb\u00e9\" to \"S\u00e9bastien Labb\u00e9, John Palmieri\".",
    "created_at": "2020-05-01T17:12:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580479",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing reviewer** from "Sébastien Labbé" to "Sébastien Labbé, John Palmieri".



---

archive/issue_comments_580480.json:
```json
{
    "body": "<a id='comment:28'></a>\nWe can leave it as is, but there is a significant difference between `sage -i PKG` and `make PKG`: the former installs the package (and its prereqs) and then builds all of Sage, while the second just installs the package (and its prereqs).",
    "created_at": "2020-05-01T17:12:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580480",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:28'></a>
We can leave it as is, but there is a significant difference between `sage -i PKG` and `make PKG`: the former installs the package (and its prereqs) and then builds all of Sage, while the second just installs the package (and its prereqs).



---

archive/issue_comments_580481.json:
```json
{
    "body": "<a id='comment:29'></a>\nThat's right. Which is part of why I don't want to advertise `make PKG` to Sage users. It's for advanced developer use, I would say.",
    "created_at": "2020-05-01T17:14:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580481",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'></a>
That's right. Which is part of why I don't want to advertise `make PKG` to Sage users. It's for advanced developer use, I would say.



---

archive/issue_comments_580482.json:
```json
{
    "body": "<a id='comment:30'></a>\nThanks for reviewing!",
    "created_at": "2020-05-01T17:17:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580482",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:30'></a>
Thanks for reviewing!



---

archive/issue_events_085442.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-05-04T06:41:05Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29626#event-85442"
}
```



---

archive/issue_comments_580483.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/__configure___enable_spkg_does_not_work_for_optional_pip_packages](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/__configure___enable_spkg_does_not_work_for_optional_pip_packages)\" to \"[2bb7d75c67511452639cd3a25eebaada6f6a27f7](https://github.com/sagemath/sagetrac-mirror/commit/2bb7d75c67511452639cd3a25eebaada6f6a27f7)\".",
    "created_at": "2020-05-04T06:41:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580483",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/mkoeppe/__configure___enable_spkg_does_not_work_for_optional_pip_packages](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/__configure___enable_spkg_does_not_work_for_optional_pip_packages)" to "[2bb7d75c67511452639cd3a25eebaada6f6a27f7](https://github.com/sagemath/sagetrac-mirror/commit/2bb7d75c67511452639cd3a25eebaada6f6a27f7)".



---

archive/issue_comments_580484.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2020-05-04T06:41:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29626",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29626#issuecomment-580484",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed
