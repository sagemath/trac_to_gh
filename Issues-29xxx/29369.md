# Issue 29369: spkg-configure.m4 for brial

archive/issues_029132.json:
```json
{
    "assignees": [
        "https://github.com/orlitzky"
    ],
    "body": "Nothing unusual here except that this is a C++ library with no pkg-config file, and that makes it a bit harder to search for. I've assumed that any version we find is acceptable, which probably is not quite true.\n\nCC:  @embray @kiwifb @mkoeppe @dimpase\n\nBranch: **[40a59a4](https://github.com/sagemath/sagetrac-mirror/commit/40a59a410b7be086264f09cbefe9c03cb94e5c77)**\n\nReviewer: **Matthias Koeppe, Dima Pasechnik**\n\nAuthor: **Michael Orlitzky**\n\nComponent: **build: configure**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29369_\n\n",
    "closed_at": "2020-04-05T08:30:35Z",
    "created_at": "2020-03-19T17:26:06Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build%3A%20configure",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "spkg-configure.m4 for brial",
    "type": "issue",
    "updated_at": "2020-08-11T00:16:52Z",
    "url": "https://github.com/sagemath/sage/issues/29369",
    "user": "https://github.com/orlitzky"
}
```
Nothing unusual here except that this is a C++ library with no pkg-config file, and that makes it a bit harder to search for. I've assumed that any version we find is acceptable, which probably is not quite true.

CC:  @embray @kiwifb @mkoeppe @dimpase

Branch: **[40a59a4](https://github.com/sagemath/sagetrac-mirror/commit/40a59a410b7be086264f09cbefe9c03cb94e5c77)**

Reviewer: **Matthias Koeppe, Dima Pasechnik**

Author: **Michael Orlitzky**

Component: **build: configure**

_Issue created by migration from https://trac.sagemath.org/ticket/29369_





---

archive/issue_events_403814.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2020-03-19T17:26:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29369#event-403814"
}
```



---

archive/issue_events_403815.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2020-03-19T17:26:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build%3A%20configure",
    "label_color": "000080",
    "label_name": "c: build: configure",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29369#event-403815"
}
```



---

archive/issue_events_403816.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2020-03-19T17:26:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29369#event-403816"
}
```



---

archive/issue_events_403817.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2020-03-19T17:26:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29369#event-403817"
}
```



---

archive/issue_events_403818.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2020-03-19T17:36:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29369#event-403818"
}
```



---

archive/issue_comments_461006.json:
```json
{
    "body": "Branch: **[u/mjo/ticket/29369](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/29369)**",
    "created_at": "2020-03-19T17:36:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461006",
    "user": "https://github.com/orlitzky"
}
```

Branch: **[u/mjo/ticket/29369](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/29369)**



---

archive/issue_comments_461007.json:
```json
{
    "body": "Author: **Michael Orlitzky**",
    "created_at": "2020-03-19T17:36:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461007",
    "user": "https://github.com/orlitzky"
}
```

Author: **Michael Orlitzky**



---

archive/issue_comments_461008.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI left off the libpng dependency, because I think brial needs it if and only if mr4i does. I also left off the python dependency, but maybe I shouldn't have?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8b45a14d19da41e95c26421964ed5a5fe8627bfc\">8b45a14</a></td><td><code>Trac #29369: clarify message from SAGE_SPKG_DEPCHECK.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b262c17edb2ee783141662503a24bf641d8a8abf\">b262c17</a></td><td><code>Trac #29369: new spkg-configure.m4 for brial.</code></td></tr></table>\n",
    "created_at": "2020-03-19T17:36:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461008",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:1" align="right">comment:1</div>

I left off the libpng dependency, because I think brial needs it if and only if mr4i does. I also left off the python dependency, but maybe I shouldn't have?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8b45a14d19da41e95c26421964ed5a5fe8627bfc">8b45a14</a></td><td><code>Trac #29369: clarify message from SAGE_SPKG_DEPCHECK.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b262c17edb2ee783141662503a24bf641d8a8abf">b262c17</a></td><td><code>Trac #29369: new spkg-configure.m4 for brial.</code></td></tr></table>




---

archive/issue_comments_461009.json:
```json
{
    "body": "Commit: **[b262c17](https://github.com/sagemath/sagetrac-mirror/commit/b262c17edb2ee783141662503a24bf641d8a8abf)**",
    "created_at": "2020-03-19T17:36:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461009",
    "user": "https://github.com/orlitzky"
}
```

Commit: **[b262c17](https://github.com/sagemath/sagetrac-mirror/commit/b262c17edb2ee783141662503a24bf641d8a8abf)**



---

archive/issue_comments_461010.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThis is a matter for another ticket but I think the python part should be merged into sage proper.\nA bit of history.\nPolyBoRi use to have its own python bindings. sage also had its own python bindings to PolyBoRi. The python part of PolyBoRI (now BRiAl) could work with either the PolyBoRI or sage bindings. In BRiAl we never bothered with porting the python bindings of PolyBoRi - they are not there anymore. I removed all bits that could have used the PolyBoRi bindings from what is now sage-brial in Gentoo. So at the moment\n* Brial is needed to build sage because sage builds binding to brial\n* sage-brial needs sage's binding at runtime to be usable\n* sage needs sage-brial at run time for some stuff\n\nI think sage-brial should just be merged in sage.",
    "created_at": "2020-03-19T19:03:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461010",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:2" align="right">comment:2</div>

This is a matter for another ticket but I think the python part should be merged into sage proper.
A bit of history.
PolyBoRi use to have its own python bindings. sage also had its own python bindings to PolyBoRi. The python part of PolyBoRI (now BRiAl) could work with either the PolyBoRI or sage bindings. In BRiAl we never bothered with porting the python bindings of PolyBoRi - they are not there anymore. I removed all bits that could have used the PolyBoRi bindings from what is now sage-brial in Gentoo. So at the moment
* Brial is needed to build sage because sage builds binding to brial
* sage-brial needs sage's binding at runtime to be usable
* sage needs sage-brial at run time for some stuff

I think sage-brial should just be merged in sage.



---

archive/issue_comments_461011.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\n`build/pkgs/brial/distros/` needs filling",
    "created_at": "2020-03-19T19:25:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461011",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3" align="right">comment:3</div>

`build/pkgs/brial/distros/` needs filling



---

archive/issue_comments_461012.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nAt the moment we cannot use python packages in the system python -- such as presumably the one of brial.\nSee #29023",
    "created_at": "2020-03-19T19:42:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461012",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:4" align="right">comment:4</div>

At the moment we cannot use python packages in the system python -- such as presumably the one of brial.
See #29023



---

archive/issue_events_403819.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2020-03-19T23:17:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29369#event-403819"
}
```



---

archive/issue_events_403820.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2020-03-19T23:17:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29369#event-403820"
}
```



---

archive/issue_comments_461013.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@kiwifb](#comment:2):\n> This is a matter for another ticket but I think the python part should be merged into sage proper.\n\nAh, I didn't realize that sage's brial is installing TWO things, both the C++ library and a python package. I've only detected the C++ library, so this will have to wait until something happens with python -- either adding support for system python modules, or just moving sage-brial into sage in this case.\n\n(I'm still running a ptestlong on this branch but presumably it will fail.)",
    "created_at": "2020-03-19T23:17:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461013",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@kiwifb](#comment:2):
> This is a matter for another ticket but I think the python part should be merged into sage proper.

Ah, I didn't realize that sage's brial is installing TWO things, both the C++ library and a python package. I've only detected the C++ library, so this will have to wait until something happens with python -- either adding support for system python modules, or just moving sage-brial into sage in this case.

(I'm still running a ptestlong on this branch but presumably it will fail.)



---

archive/issue_comments_461014.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\na less invasive option that moving sage-brial into sage would be to split the package into two parts, python and non-python (they may use the same tarball). Then the work done here is perfectly useful for brial proper, and sage-brial becomes another story.",
    "created_at": "2020-03-20T04:23:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461014",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:6" align="right">comment:6</div>

a less invasive option that moving sage-brial into sage would be to split the package into two parts, python and non-python (they may use the same tarball). Then the work done here is perfectly useful for brial proper, and sage-brial becomes another story.



---

archive/issue_comments_461015.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0a2745b940ddf231ef7f5f77d158e5aa396c5506\">0a2745b</a></td><td><code>Trac #29369: factor out brial's python module into a sage_brial package.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4c3c18c666929aacd4417babb45a7c8a5df04967\">4c3c18c</a></td><td><code>Trac #29369: fix installed_packages() doctest with system brial.</code></td></tr></table>\n",
    "created_at": "2020-03-26T13:02:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461015",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0a2745b940ddf231ef7f5f77d158e5aa396c5506">0a2745b</a></td><td><code>Trac #29369: factor out brial's python module into a sage_brial package.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4c3c18c666929aacd4417babb45a7c8a5df04967">4c3c18c</a></td><td><code>Trac #29369: fix installed_packages() doctest with system brial.</code></td></tr></table>




---

archive/issue_comments_461016.json:
```json
{
    "body": "Changed commit from **[b262c17](https://github.com/sagemath/sagetrac-mirror/commit/b262c17edb2ee783141662503a24bf641d8a8abf)** to **[4c3c18c](https://github.com/sagemath/sagetrac-mirror/commit/4c3c18c666929aacd4417babb45a7c8a5df04967)**",
    "created_at": "2020-03-26T13:02:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461016",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b262c17](https://github.com/sagemath/sagetrac-mirror/commit/b262c17edb2ee783141662503a24bf641d8a8abf)** to **[4c3c18c](https://github.com/sagemath/sagetrac-mirror/commit/4c3c18c666929aacd4417babb45a7c8a5df04967)**



---

archive/issue_events_403821.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2020-03-26T13:08:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29369#event-403821"
}
```



---

archive/issue_events_403822.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2020-03-26T13:08:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29369#event-403822"
}
```



---

archive/issue_comments_461017.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@dimpase](#comment:6):\n> a less invasive option that moving sage-brial into sage would be to split the package into two parts, python and non-python (they may use the same tarball). Then the work done here is perfectly useful for brial proper, and sage-brial becomes another story.\n\nYeah, for now this is the path of least resistance (although the whole thing can probably be copy/pasted into src/sage/libs/brial). I factored the python module out into a new standard sage_brial package and now everything looks OK.",
    "created_at": "2020-03-26T13:08:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461017",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@dimpase](#comment:6):
> a less invasive option that moving sage-brial into sage would be to split the package into two parts, python and non-python (they may use the same tarball). Then the work done here is perfectly useful for brial proper, and sage-brial becomes another story.

Yeah, for now this is the path of least resistance (although the whole thing can probably be copy/pasted into src/sage/libs/brial). I factored the python module out into a new standard sage_brial package and now everything looks OK.



---

archive/issue_comments_461018.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nhttps://repology.org/project/brial/versions",
    "created_at": "2020-03-26T18:39:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461018",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">comment:9</div>

https://repology.org/project/brial/versions



---

archive/issue_comments_461019.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nYou can throw an upgrade on top of my commits if you want, I just didn't feel like adding more variables to this ticket (especially since my goal is to never again use the SPKG in the first place).",
    "created_at": "2020-03-26T18:46:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461019",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:10" align="right">comment:10</div>

You can throw an upgrade on top of my commits if you want, I just didn't feel like adding more variables to this ticket (especially since my goal is to never again use the SPKG in the first place).



---

archive/issue_comments_461020.json:
```json
{
    "body": "Changed branch from **[u/mjo/ticket/29369](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/29369)** to **[u/mkoeppe/ticket/29369](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/ticket/29369)**",
    "created_at": "2020-03-26T18:51:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461020",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/mjo/ticket/29369](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/29369)** to **[u/mkoeppe/ticket/29369](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/ticket/29369)**



---

archive/issue_comments_461021.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c4f45b4b3cfc04e722d3c12c71fb639ece81c4c2\">c4f45b4</a></td><td><code>fix for debian</code></td></tr></table>\n",
    "created_at": "2020-03-26T19:13:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461021",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c4f45b4b3cfc04e722d3c12c71fb639ece81c4c2">c4f45b4</a></td><td><code>fix for debian</code></td></tr></table>




---

archive/issue_comments_461022.json:
```json
{
    "body": "Changed commit from **[4c3c18c](https://github.com/sagemath/sagetrac-mirror/commit/4c3c18c666929aacd4417babb45a7c8a5df04967)** to **[c4f45b4](https://github.com/sagemath/sagetrac-mirror/commit/c4f45b4b3cfc04e722d3c12c71fb639ece81c4c2)**",
    "created_at": "2020-03-26T19:13:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461022",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4c3c18c](https://github.com/sagemath/sagetrac-mirror/commit/4c3c18c666929aacd4417babb45a7c8a5df04967)** to **[c4f45b4](https://github.com/sagemath/sagetrac-mirror/commit/c4f45b4b3cfc04e722d3c12c71fb639ece81c4c2)**



---

archive/issue_comments_461023.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nTests run at https://github.com/mkoeppe/sage/actions/runs/64055444",
    "created_at": "2020-03-26T19:25:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461023",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:13" align="right">comment:13</div>

Tests run at https://github.com/mkoeppe/sage/actions/runs/64055444



---

archive/issue_comments_461024.json:
```json
{
    "body": "Reviewer: **Matthias Koeppe**",
    "created_at": "2020-03-26T19:25:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461024",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Matthias Koeppe**



---

archive/issue_comments_461025.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/94b22ed480852ca34a2a02edade8d00d160a9f00\">94b22ed</a></td><td><code>build/pkgs/{brial,sage_brial}: Add upstream_url</code></td></tr></table>\n",
    "created_at": "2020-03-26T20:51:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461025",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/94b22ed480852ca34a2a02edade8d00d160a9f00">94b22ed</a></td><td><code>build/pkgs/{brial,sage_brial}: Add upstream_url</code></td></tr></table>




---

archive/issue_comments_461026.json:
```json
{
    "body": "Changed commit from **[c4f45b4](https://github.com/sagemath/sagetrac-mirror/commit/c4f45b4b3cfc04e722d3c12c71fb639ece81c4c2)** to **[94b22ed](https://github.com/sagemath/sagetrac-mirror/commit/94b22ed480852ca34a2a02edade8d00d160a9f00)**",
    "created_at": "2020-03-26T20:51:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461026",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c4f45b4](https://github.com/sagemath/sagetrac-mirror/commit/c4f45b4b3cfc04e722d3c12c71fb639ece81c4c2)** to **[94b22ed](https://github.com/sagemath/sagetrac-mirror/commit/94b22ed480852ca34a2a02edade8d00d160a9f00)**



---

archive/issue_comments_461027.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nTesting at \u200bhttps://github.com/mkoeppe/sage/actions/runs/64126739",
    "created_at": "2020-03-26T21:18:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461027",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:16" align="right">comment:16</div>

Testing at ​https://github.com/mkoeppe/sage/actions/runs/64126739



---

archive/issue_comments_461028.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nOK, looks good. I'll wait for MacOS tests to finish.",
    "created_at": "2020-03-27T02:35:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461028",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:17" align="right">comment:17</div>

OK, looks good. I'll wait for MacOS tests to finish.



---

archive/issue_comments_461029.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nbetter macOS tests scheduled here: https://github.com/mkoeppe/sage/actions/runs/64318155\n(hopefully I fixed the broken parallelization of the build)",
    "created_at": "2020-03-27T04:02:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461029",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:18" align="right">comment:18</div>

better macOS tests scheduled here: https://github.com/mkoeppe/sage/actions/runs/64318155
(hopefully I fixed the broken parallelization of the build)



---

archive/issue_comments_461030.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nbrial's build or sage's one?",
    "created_at": "2020-03-27T04:07:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461030",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:19" align="right">comment:19</div>

brial's build or sage's one?



---

archive/issue_comments_461031.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nI gather it's Sage's builds using brial from Homebrew",
    "created_at": "2020-03-27T04:13:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461031",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:20" align="right">comment:20</div>

I gather it's Sage's builds using brial from Homebrew



---

archive/issue_comments_461032.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nsystem brial needs m4ri and boost, yet\n\n```\n2020-03-27T06:01:37.8676320Z Checking whether SageMath should install SPKG brial...\n2020-03-27T06:01:37.8715050Z checking whether any of boost m4ri is installed as or will be installed as SPKG... yes; install brial as well\n2020-03-27T06:01:37.8715730Z configure: no suitable system package found for SPKG brial\n```\n\nand then the build dies on pynac (not surprisingly)\n\nThe problem is in m4ri\n\n```\n2020-03-27T06:01:37.8106410Z Checking whether SageMath should install SPKG m4ri...\n2020-03-27T06:01:37.8144280Z checking whether any of libpng is installed as or will be installed as SPKG... no\n2020-03-27T06:01:37.8422490Z checking for m4ri >= 20140914... no\n2020-03-27T06:01:37.8673980Z configure: no suitable system package found for SPKG m4ri\n```\n\nthere is a non-standard location formula/installation availabe:\n\nhttps://github.com/brewsci/homebrew-science/blob/master/Formula/m4ri.rb",
    "created_at": "2020-03-27T08:18:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461032",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:21" align="right">comment:21</div>

system brial needs m4ri and boost, yet

```
2020-03-27T06:01:37.8676320Z Checking whether SageMath should install SPKG brial...
2020-03-27T06:01:37.8715050Z checking whether any of boost m4ri is installed as or will be installed as SPKG... yes; install brial as well
2020-03-27T06:01:37.8715730Z configure: no suitable system package found for SPKG brial
```

and then the build dies on pynac (not surprisingly)

The problem is in m4ri

```
2020-03-27T06:01:37.8106410Z Checking whether SageMath should install SPKG m4ri...
2020-03-27T06:01:37.8144280Z checking whether any of libpng is installed as or will be installed as SPKG... no
2020-03-27T06:01:37.8422490Z checking for m4ri >= 20140914... no
2020-03-27T06:01:37.8673980Z configure: no suitable system package found for SPKG m4ri
```

there is a non-standard location formula/installation availabe:

https://github.com/brewsci/homebrew-science/blob/master/Formula/m4ri.rb



---

archive/issue_comments_461033.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nlet's merge this, and fix for MacOS/Cygwin, if/as needed.",
    "created_at": "2020-03-27T08:26:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461033",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:22" align="right">comment:22</div>

let's merge this, and fix for MacOS/Cygwin, if/as needed.



---

archive/issue_comments_461034.json:
```json
{
    "body": "Changed reviewer from **Matthias Koeppe** to **Matthias Koeppe, Dima Pasechnik**",
    "created_at": "2020-03-27T08:26:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461034",
    "user": "https://github.com/dimpase"
}
```

Changed reviewer from **Matthias Koeppe** to **Matthias Koeppe, Dima Pasechnik**



---

archive/issue_events_403823.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-03-27T08:26:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29369#event-403823"
}
```



---

archive/issue_events_403824.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-03-27T08:26:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29369#event-403824"
}
```



---

archive/issue_events_403825.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-27T13:12:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29369#event-403825"
}
```



---

archive/issue_events_403826.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-27T13:12:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29369#event-403826"
}
```



---

archive/issue_comments_461035.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nBecause it depends on m4ri and we only accept very new versions of that, this only uses brial on very few system configurations.\n`ubuntu-eoan-python2` (https://github.com/mkoeppe/sage/runs/537774470), `ubuntu-focal` (https://github.com/mkoeppe/sage/runs/537774488) and `archlinux-latest-standard` (https://github.com/mkoeppe/sage/runs/537774841) work well.\nThe test failures on `debian-bullseye-standard` (https://github.com/mkoeppe/sage/runs/537774574) are probably unrelated.\n\nThere's no brial package for homebrew, so there's nothing to test.\n\nBut it does not find brial on `fedora-31-standard` (https://github.com/mkoeppe/sage/runs/537774738). Please take a look",
    "created_at": "2020-03-27T13:12:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461035",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:23" align="right">comment:23</div>

Because it depends on m4ri and we only accept very new versions of that, this only uses brial on very few system configurations.
`ubuntu-eoan-python2` (https://github.com/mkoeppe/sage/runs/537774470), `ubuntu-focal` (https://github.com/mkoeppe/sage/runs/537774488) and `archlinux-latest-standard` (https://github.com/mkoeppe/sage/runs/537774841) work well.
The test failures on `debian-bullseye-standard` (https://github.com/mkoeppe/sage/runs/537774574) are probably unrelated.

There's no brial package for homebrew, so there's nothing to test.

But it does not find brial on `fedora-31-standard` (https://github.com/mkoeppe/sage/runs/537774738). Please take a look



---

archive/issue_comments_461036.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@dimpase](#comment:21):\n> there is a non-standard location formula/installation availabe:\n> \n> https://github.com/brewsci/homebrew-science/blob/master/Formula/m4ri.rb\n\nhttps://github.com/brewsci/homebrew-science is unmaintained. Let's not use it.",
    "created_at": "2020-03-27T13:14:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461036",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@dimpase](#comment:21):
> there is a non-standard location formula/installation availabe:
> 
> https://github.com/brewsci/homebrew-science/blob/master/Formula/m4ri.rb

https://github.com/brewsci/homebrew-science is unmaintained. Let's not use it.



---

archive/issue_comments_461037.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@mkoeppe](#comment:23):\n> \n> But it does not find brial on `fedora-31-standard` (https://github.com/mkoeppe/sage/runs/537774738). Please take a look\n> \n\nIs brial-devel installed there?",
    "created_at": "2020-03-27T13:54:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461037",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@mkoeppe](#comment:23):
> 
> But it does not find brial on `fedora-31-standard` (https://github.com/mkoeppe/sage/runs/537774738). Please take a look
> 

Is brial-devel installed there?



---

archive/issue_comments_461038.json:
```json
{
    "body": "Changed commit from **[94b22ed](https://github.com/sagemath/sagetrac-mirror/commit/94b22ed480852ca34a2a02edade8d00d160a9f00)** to **[4ad36bd](https://github.com/sagemath/sagetrac-mirror/commit/4ad36bdea8a5a81df6324d16556984a4119d43ee)**",
    "created_at": "2020-03-27T14:29:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461038",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[94b22ed](https://github.com/sagemath/sagetrac-mirror/commit/94b22ed480852ca34a2a02edade8d00d160a9f00)** to **[4ad36bd](https://github.com/sagemath/sagetrac-mirror/commit/4ad36bdea8a5a81df6324d16556984a4119d43ee)**



---

archive/issue_comments_461039.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4ad36bdea8a5a81df6324d16556984a4119d43ee\">4ad36bd</a></td><td><code>build/pkgs/brial/distros/fedora.txt: Add brial-devel</code></td></tr></table>\n",
    "created_at": "2020-03-27T14:29:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461039",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4ad36bdea8a5a81df6324d16556984a4119d43ee">4ad36bd</a></td><td><code>build/pkgs/brial/distros/fedora.txt: Add brial-devel</code></td></tr></table>




---

archive/issue_comments_461040.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nAnother round of tests at https://github.com/mkoeppe/sage/actions/runs/64668026",
    "created_at": "2020-03-27T14:35:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461040",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:27" align="right">comment:27</div>

Another round of tests at https://github.com/mkoeppe/sage/actions/runs/64668026



---

archive/issue_comments_461041.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nfedora-28-standard (https://github.com/mkoeppe/sage/runs/539636819):\n\n```\n  [sagelib-9.1.beta8]   build/cythonized/sage/rings/polynomial/pbori.cpp:60026:55: error: use of deleted function \u2018polybori::BooleConstant& polybori::BooleConstant::operator=(polybori::BooleConstant&&)\u2019\n  [sagelib-9.1.beta8]      __pyx_v_self->_pbconst = BooleConstant(__pyx_v_value);\n  [sagelib-9.1.beta8]                                                          ^\n  [sagelib-9.1.beta8]   In file included from /usr/include/polybori/BoolePolynomial.h:42,\n  [sagelib-9.1.beta8]                    from /sage/src/sage/libs/polybori/pb_wrap.h:1,\n  [sagelib-9.1.beta8]                    from build/cythonized/sage/rings/polynomial/pbori.cpp:684:\n  [sagelib-9.1.beta8]   /usr/include/polybori/BooleConstant.h:40:7: note: \u2018polybori::BooleConstant& polybori::BooleConstant::operator=(polybori::BooleConstant&&)\u2019 is implicitly deleted because the default definition would be ill-formed:\n  [sagelib-9.1.beta8]    class BooleConstant:\n  [sagelib-9.1.beta8]          ^~~~~~~~~~~~~\n  [sagelib-9.1.beta8]   /usr/include/polybori/BooleConstant.h:40:7: error: non-static const member \u2018const bool polybori::BooleConstant::m_value\u2019, can\u2019t use default assignment operator\n  [sagelib-9.1.beta8]   error: command 'gcc' failed with exit status 1\n```",
    "created_at": "2020-03-27T19:09:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461041",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:28" align="right">comment:28</div>

fedora-28-standard (https://github.com/mkoeppe/sage/runs/539636819):

```
  [sagelib-9.1.beta8]   build/cythonized/sage/rings/polynomial/pbori.cpp:60026:55: error: use of deleted function ‘polybori::BooleConstant& polybori::BooleConstant::operator=(polybori::BooleConstant&&)’
  [sagelib-9.1.beta8]      __pyx_v_self->_pbconst = BooleConstant(__pyx_v_value);
  [sagelib-9.1.beta8]                                                          ^
  [sagelib-9.1.beta8]   In file included from /usr/include/polybori/BoolePolynomial.h:42,
  [sagelib-9.1.beta8]                    from /sage/src/sage/libs/polybori/pb_wrap.h:1,
  [sagelib-9.1.beta8]                    from build/cythonized/sage/rings/polynomial/pbori.cpp:684:
  [sagelib-9.1.beta8]   /usr/include/polybori/BooleConstant.h:40:7: note: ‘polybori::BooleConstant& polybori::BooleConstant::operator=(polybori::BooleConstant&&)’ is implicitly deleted because the default definition would be ill-formed:
  [sagelib-9.1.beta8]    class BooleConstant:
  [sagelib-9.1.beta8]          ^~~~~~~~~~~~~
  [sagelib-9.1.beta8]   /usr/include/polybori/BooleConstant.h:40:7: error: non-static const member ‘const bool polybori::BooleConstant::m_value’, can’t use default assignment operator
  [sagelib-9.1.beta8]   error: command 'gcc' failed with exit status 1
```



---

archive/issue_comments_461042.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nReplying to [@mkoeppe](#comment:28):\n> fedora-28-standard (https://github.com/mkoeppe/sage/runs/539636819):\n> \n> ```\n>   [sagelib-9.1.beta8]   build/cythonized/sage/rings/polynomial/pbori.cpp:60026:55: error: use of deleted function \u2018polybori::BooleConstant& polybori::BooleConstant::operator=(polybori::BooleConstant&&)\u2019\n> ...\n>   [sagelib-9.1.beta8]   error: command 'gcc' failed with exit status 1\n> ```\n\nSee, this is why I became a mathematician...",
    "created_at": "2020-03-27T20:09:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461042",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:29" align="right">comment:29</div>

Replying to [@mkoeppe](#comment:28):
> fedora-28-standard (https://github.com/mkoeppe/sage/runs/539636819):
> 
> ```
>   [sagelib-9.1.beta8]   build/cythonized/sage/rings/polynomial/pbori.cpp:60026:55: error: use of deleted function ‘polybori::BooleConstant& polybori::BooleConstant::operator=(polybori::BooleConstant&&)’
> ...
>   [sagelib-9.1.beta8]   error: command 'gcc' failed with exit status 1
> ```

See, this is why I became a mathematician...



---

archive/issue_comments_461043.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nRight, for the endless fun with other mathematicians' software...",
    "created_at": "2020-03-27T20:14:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461043",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:30" align="right">comment:30</div>

Right, for the endless fun with other mathematicians' software...



---

archive/issue_comments_461044.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/ticket/29369](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/ticket/29369)** to **[u/mjo/ticket/29369](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/29369)**",
    "created_at": "2020-03-28T00:53:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461044",
    "user": "https://github.com/orlitzky"
}
```

Changed branch from **[u/mkoeppe/ticket/29369](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/ticket/29369)** to **[u/mjo/ticket/29369](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/29369)**



---

archive/issue_comments_461045.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nThis one rejects brial-0.8.5.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/40a59a410b7be086264f09cbefe9c03cb94e5c77\">40a59a4</a></td><td><code>Trac #29369: detect only newish versions of brial.</code></td></tr></table>\n",
    "created_at": "2020-03-28T00:53:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461045",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:31" align="right">comment:31</div>

This one rejects brial-0.8.5.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/40a59a410b7be086264f09cbefe9c03cb94e5c77">40a59a4</a></td><td><code>Trac #29369: detect only newish versions of brial.</code></td></tr></table>




---

archive/issue_comments_461046.json:
```json
{
    "body": "Changed commit from **[4ad36bd](https://github.com/sagemath/sagetrac-mirror/commit/4ad36bdea8a5a81df6324d16556984a4119d43ee)** to **[40a59a4](https://github.com/sagemath/sagetrac-mirror/commit/40a59a410b7be086264f09cbefe9c03cb94e5c77)**",
    "created_at": "2020-03-28T00:53:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461046",
    "user": "https://github.com/orlitzky"
}
```

Changed commit from **[4ad36bd](https://github.com/sagemath/sagetrac-mirror/commit/4ad36bdea8a5a81df6324d16556984a4119d43ee)** to **[40a59a4](https://github.com/sagemath/sagetrac-mirror/commit/40a59a410b7be086264f09cbefe9c03cb94e5c77)**



---

archive/issue_events_403827.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2020-03-28T00:53:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29369#event-403827"
}
```



---

archive/issue_events_403828.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2020-03-28T00:53:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29369#event-403828"
}
```



---

archive/issue_comments_461047.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nAnd I am physicist, which would make me the practical one - except I do more theoretical physics, so some people would say I am a mathematician with the wrong clothes. So, would something upstream make your job easier? Like a .pc file :)\n\nI am upstream's maintainer after all. Pull requests welcome.",
    "created_at": "2020-03-28T00:58:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461047",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:32" align="right">comment:32</div>

And I am physicist, which would make me the practical one - except I do more theoretical physics, so some people would say I am a mathematician with the wrong clothes. So, would something upstream make your job easier? Like a .pc file :)

I am upstream's maintainer after all. Pull requests welcome.



---

archive/issue_comments_461048.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@kiwifb](#comment:32):\n> And I am physicist, which would make me the practical one - except I do more theoretical physics, so some people would say I am a mathematician with the wrong clothes. So, would something upstream make your job easier? Like a .pc file :)\n> \n> I am upstream's maintainer after all. Pull requests welcome.\n\nA `.pc` file will be invaluable the next time around, but here we need to detect the versions that have already shipped. I probably should have asked for help writing the test program, but it didn't look that hard until it was too late =)",
    "created_at": "2020-03-28T01:05:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461048",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@kiwifb](#comment:32):
> And I am physicist, which would make me the practical one - except I do more theoretical physics, so some people would say I am a mathematician with the wrong clothes. So, would something upstream make your job easier? Like a .pc file :)
> 
> I am upstream's maintainer after all. Pull requests welcome.

A `.pc` file will be invaluable the next time around, but here we need to detect the versions that have already shipped. I probably should have asked for help writing the test program, but it didn't look that hard until it was too late =)



---

archive/issue_comments_461049.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nTests run at https://github.com/mkoeppe/sage/actions/runs/65083365",
    "created_at": "2020-03-28T03:38:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461049",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:34" align="right">comment:34</div>

Tests run at https://github.com/mkoeppe/sage/actions/runs/65083365



---

archive/issue_comments_461050.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nNew tests at https://github.com/mkoeppe/sage/actions/runs/65346154",
    "created_at": "2020-03-28T16:11:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461050",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:35" align="right">comment:35</div>

New tests at https://github.com/mkoeppe/sage/actions/runs/65346154



---

archive/issue_events_403829.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-29T12:39:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29369#event-403829"
}
```



---

archive/issue_events_403830.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-29T12:39:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29369#event-403830"
}
```



---

archive/issue_comments_461051.json:
```json
{
    "body": "Changed branch from **[u/mjo/ticket/29369](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/29369)** to **[40a59a4](https://github.com/sagemath/sagetrac-mirror/commit/40a59a410b7be086264f09cbefe9c03cb94e5c77)**",
    "created_at": "2020-04-05T08:30:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461051",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mjo/ticket/29369](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/29369)** to **[40a59a4](https://github.com/sagemath/sagetrac-mirror/commit/40a59a410b7be086264f09cbefe9c03cb94e5c77)**



---

archive/issue_events_403831.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-05T08:30:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29369#event-403831"
}
```



---

archive/issue_events_403832.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "5759437aacf8d8f9d1c0971a2723c186a0cdef79",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-04-05T08:30:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29369#event-403832"
}
```



---

archive/issue_comments_461052.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nFollow-up: I see crashes in running doctests on `fedora-30-standard` (https://github.com/mkoeppe/sage/runs/572856797), which uses system brial 1.2.5-1\n\n```\nsage -t src/sage/rings/polynomial/multi_polynomial_sequence.py  # Killed due to abort\nsage -t src/sage/rings/polynomial/pbori.pyx  # Killed due to abort\nsage -t src/sage/rings/polynomial/polynomial_ring_constructor.py  # Killed due to abort\nsage -t src/sage/sat/boolean_polynomials.py  # Killed due to abort\nsage -t src/sage/sat/solvers/dimacs.py  # Killed due to abort\n```",
    "created_at": "2020-04-09T17:11:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461052",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:38" align="right">comment:38</div>

Follow-up: I see crashes in running doctests on `fedora-30-standard` (https://github.com/mkoeppe/sage/runs/572856797), which uses system brial 1.2.5-1

```
sage -t src/sage/rings/polynomial/multi_polynomial_sequence.py  # Killed due to abort
sage -t src/sage/rings/polynomial/pbori.pyx  # Killed due to abort
sage -t src/sage/rings/polynomial/polynomial_ring_constructor.py  # Killed due to abort
sage -t src/sage/sat/boolean_polynomials.py  # Killed due to abort
sage -t src/sage/sat/solvers/dimacs.py  # Killed due to abort
```



---

archive/issue_comments_461053.json:
```json
{
    "body": "Changed commit from **[40a59a4](https://github.com/sagemath/sagetrac-mirror/commit/40a59a410b7be086264f09cbefe9c03cb94e5c77)** to none",
    "created_at": "2020-04-09T17:11:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461053",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[40a59a4](https://github.com/sagemath/sagetrac-mirror/commit/40a59a410b7be086264f09cbefe9c03cb94e5c77)** to none



---

archive/issue_comments_461054.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nThis is now #29490",
    "created_at": "2020-04-09T21:56:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461054",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:39" align="right">comment:39</div>

This is now #29490



---

archive/issue_events_403833.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2020-04-28T02:43:28Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "subject": "https://github.com/dimpase",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29369#event-403833"
}
```



---

archive/issue_comments_461055.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nIn src/module_list.py there is \n\n```\nExtension('sage.rings.polynomial.pbori',\n...\n      depends = [SAGE_INC + \"/polybori/\" + hd + \".h\" for hd in [\"polybori\", \"config\"]],\n      extra_compile_args = m4ri_extra_compile_args),\n```\nwhich causes constant rebuilds with system package, as these headers are no longer in `SAGE_INC`. It's a minor annoyance, but still.",
    "created_at": "2020-04-28T03:10:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461055",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:41" align="right">comment:41</div>

In src/module_list.py there is 

```
Extension('sage.rings.polynomial.pbori',
...
      depends = [SAGE_INC + "/polybori/" + hd + ".h" for hd in ["polybori", "config"]],
      extra_compile_args = m4ri_extra_compile_args),
```
which causes constant rebuilds with system package, as these headers are no longer in `SAGE_INC`. It's a minor annoyance, but still.



---

archive/issue_comments_461056.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nReplying to [@kiwifb](#comment:2):\n> This is a matter for another ticket but I think the python part should be merged into sage proper.\n> [....] So at the moment\n> * Brial is needed to build sage because sage builds binding to brial\n> * sage-brial needs sage's binding at runtime to be usable\n> * sage needs sage-brial at run time for some stuff\n> \n> I think sage-brial should just be merged in sage.\n\nThis is now #30332",
    "created_at": "2020-08-11T00:16:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29369",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29369#issuecomment-461056",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:42" align="right">comment:42</div>

Replying to [@kiwifb](#comment:2):
> This is a matter for another ticket but I think the python part should be merged into sage proper.
> [....] So at the moment
> * Brial is needed to build sage because sage builds binding to brial
> * sage-brial needs sage's binding at runtime to be usable
> * sage needs sage-brial at run time for some stuff
> 
> I think sage-brial should just be merged in sage.

This is now #30332
