# Issue 29041: sage_bootstrap: Add command "sage -package list --output={install-requires,requirements,pipfile,debian,....}"

archive/issues_028804.json:
```json
{
    "body": "We extend the `sage_bootstrap` package to add the commands:\n- `sage -package list --output=install-requires PACKAGES...` (for #30913)\n- `sage -package list --output=requirements PACKAGES...`\n- `sage -package list --output=pipfile PACKAGES...`\n- `sage -package list --output=debian PACKAGE...` etc. (taking over the functionality of the shell script `build/bin/sage-get-system-packages`.)\n\nThey generate text output in the format of `setup.cfg [options] install_requires=`, `requirements.txt`, and `Pipfile`; or a list of system packages \n\n`bootstrap` can use these commands to generate these files for  `build/pkgs/sagelib/src/` or `src`.  They are deleted by `make bootstrap-clean`.\n\n---\n\nReferences: \n\n- https://pip.pypa.io/en/stable/user_guide/#requirements-files\n- https://pipenv-fork.readthedocs.io/en/latest/advanced.html\n- https://packaging.python.org/discussions/install-requires-vs-requirements/\n- https://pypi.org/project/install-requires/\n\n**CC:**  @seblabbe @dimpase @embray @vbraun @kiwifb @tobihan @tobiasdiez\n\n**Keywords:** sd111\n\nIssue created by migration from https://trac.sagemath.org/ticket/29041\n\n",
    "created_at": "2020-01-18T21:43:50Z",
    "labels": [
        "component: build",
        "enhancement",
        "needs work"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "title": "sage_bootstrap: Add command \"sage -package list --output={install-requires,requirements,pipfile,debian,....}\"",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/29041",
    "user": "https://github.com/mkoeppe"
}
```
We extend the `sage_bootstrap` package to add the commands:
- `sage -package list --output=install-requires PACKAGES...` (for #30913)
- `sage -package list --output=requirements PACKAGES...`
- `sage -package list --output=pipfile PACKAGES...`
- `sage -package list --output=debian PACKAGE...` etc. (taking over the functionality of the shell script `build/bin/sage-get-system-packages`.)

They generate text output in the format of `setup.cfg [options] install_requires=`, `requirements.txt`, and `Pipfile`; or a list of system packages 

`bootstrap` can use these commands to generate these files for  `build/pkgs/sagelib/src/` or `src`.  They are deleted by `make bootstrap-clean`.

---

References: 

- https://pip.pypa.io/en/stable/user_guide/#requirements-files
- https://pipenv-fork.readthedocs.io/en/latest/advanced.html
- https://packaging.python.org/discussions/install-requires-vs-requirements/
- https://pypi.org/project/install-requires/

**CC:**  @seblabbe @dimpase @embray @vbraun @kiwifb @tobihan @tobiasdiez

**Keywords:** sd111

Issue created by migration from https://trac.sagemath.org/ticket/29041





---

archive/issue_comments_456987.json:
```json
{
    "body": "**Branch:** [u/mkoeppe/at___bootstrap_time__generate_src_requirements_txt__src_constraints_txt__src_setup_cfg__install_requires__from_build_pkgs](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/at___bootstrap_time__generate_src_requirements_txt__src_constraints_txt__src_setup_cfg__install_requires__from_build_pkgs)",
    "created_at": "2020-01-19T01:06:18Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-456987",
    "user": "https://github.com/mkoeppe"
}
```

**Branch:** [u/mkoeppe/at___bootstrap_time__generate_src_requirements_txt__src_constraints_txt__src_setup_cfg__install_requires__from_build_pkgs](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/at___bootstrap_time__generate_src_requirements_txt__src_constraints_txt__src_setup_cfg__install_requires__from_build_pkgs)



---

archive/issue_events_257977.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-01-19T01:07:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-257977"
}
```



---

archive/issue_comments_456988.json:
```json
{
    "body": "**Commit:** [cfcc9fd4719a1bbba4bd763371fc6048c34d30ac](https://github.com/sagemath/sagetrac-mirror/commit/cfcc9fd4719a1bbba4bd763371fc6048c34d30ac)",
    "created_at": "2020-01-19T01:07:30Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-456988",
    "user": "https://github.com/mkoeppe"
}
```

**Commit:** [cfcc9fd4719a1bbba4bd763371fc6048c34d30ac](https://github.com/sagemath/sagetrac-mirror/commit/cfcc9fd4719a1bbba4bd763371fc6048c34d30ac)



---

archive/issue_comments_456989.json:
```json
{
    "body": "<a id='comment:2'></a>\nThis is what it could look like - just for a small handful of packages for now\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cfcc9fd4719a1bbba4bd763371fc6048c34d30ac\">cfcc9fd</a></td><td><code>bootstrap: generate src/requirements.txt, src/constraints.txt, src/setup.cfg [install_requires] from build/pkgs</code></td></tr></table>\n",
    "created_at": "2020-01-19T01:07:30Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-456989",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
This is what it could look like - just for a small handful of packages for now

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cfcc9fd4719a1bbba4bd763371fc6048c34d30ac">cfcc9fd</a></td><td><code>bootstrap: generate src/requirements.txt, src/constraints.txt, src/setup.cfg [install_requires] from build/pkgs</code></td></tr></table>




---

archive/issue_comments_456990.json:
```json
{
    "body": "<a id='comment:3'></a>\nThe `apt-get` line in the install manual could be generated in the same way.",
    "created_at": "2020-01-19T01:22:14Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-456990",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>
The `apt-get` line in the install manual could be generated in the same way.



---

archive/issue_comments_456991.json:
```json
{
    "body": "**Author:** Matthias Koeppe",
    "created_at": "2020-01-19T01:27:01Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-456991",
    "user": "https://github.com/mkoeppe"
}
```

**Author:** Matthias Koeppe



---

archive/issue_comments_456992.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [@mkoeppe](#comment%3A3):\n> The `apt-get` line in the install manual could be generated in the same way.\n\nThis is #29053.",
    "created_at": "2020-01-20T15:02:42Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-456992",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>
Replying to [@mkoeppe](#comment%3A3):
> The `apt-get` line in the install manual could be generated in the same way.

This is #29053.



---

archive/issue_comments_456993.json:
```json
{
    "body": "<a id='comment:6'></a>\nI see that only few packages, e.g. pillow, are mentioned in the branch. Are they there as an example?",
    "created_at": "2020-01-21T23:39:32Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-456993",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:6'></a>
I see that only few packages, e.g. pillow, are mentioned in the branch. Are they there as an example?



---

archive/issue_comments_456994.json:
```json
{
    "body": "<a id='comment:7'></a>\nYes, it's an initial example. More can be added on this ticket and/or on follow up tickets.\n\nIt may be the most efficient to first put this infrastructure (and the one for Debian) in place and then do invidual packages one by one to determine useful version bounds.",
    "created_at": "2020-01-21T23:45:42Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-456994",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
Yes, it's an initial example. More can be added on this ticket and/or on follow up tickets.

It may be the most efficient to first put this infrastructure (and the one for Debian) in place and then do invidual packages one by one to determine useful version bounds.



---

archive/issue_comments_456995.json:
```json
{
    "body": "<a id='comment:8'></a>\nhow is it going to play out with version constraints in spkg-configure.m4 files?",
    "created_at": "2020-01-21T23:51:16Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-456995",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:8'></a>
how is it going to play out with version constraints in spkg-configure.m4 files?



---

archive/issue_comments_456996.json:
```json
{
    "body": "<a id='comment:9'></a>\nSo far there are no `spkg-configure.m4` files for any Python packages, and I would hope there will be no need for them.",
    "created_at": "2020-01-21T23:56:20Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-456996",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
So far there are no `spkg-configure.m4` files for any Python packages, and I would hope there will be no need for them.



---

archive/issue_comments_456997.json:
```json
{
    "body": "<a id='comment:10'></a>\nBasically `sagelib-install-requires.txt` will play the same role for Python packages as `spkg-configure.m4` does for non-Python packages, \nand likewise `sagelib-requirements.txt` : `package-version.txt`.",
    "created_at": "2020-01-21T23:59:03Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-456997",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>
Basically `sagelib-install-requires.txt` will play the same role for Python packages as `spkg-configure.m4` does for non-Python packages, 
and likewise `sagelib-requirements.txt` : `package-version.txt`.



---

archive/issue_comments_456998.json:
```json
{
    "body": "<a id='comment:11'></a>\n@embray If you have time - this ticket is waiting for review.",
    "created_at": "2020-01-31T14:04:34Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-456998",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>
@embray If you have time - this ticket is waiting for review.



---

archive/issue_comments_456999.json:
```json
{
    "body": "<a id='comment:12'></a>\nSimilar to what I wrote on #26964, I don't think this should be done in the `bootstrap` script.  I don't want this script growing too far beyond its core purpose, which is simply to bootstrap the `configure` script.\n\nThis could be done by `configure` instead, using say a `requirements.txt.in`.",
    "created_at": "2020-02-05T11:50:06Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-456999",
    "user": "https://github.com/embray"
}
```

<a id='comment:12'></a>
Similar to what I wrote on #26964, I don't think this should be done in the `bootstrap` script.  I don't want this script growing too far beyond its core purpose, which is simply to bootstrap the `configure` script.

This could be done by `configure` instead, using say a `requirements.txt.in`.



---

archive/issue_events_257978.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2020-02-05T11:50:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-257978"
}
```



---

archive/issue_events_257979.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2020-02-05T11:50:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-257979"
}
```



---

archive/issue_comments_457000.json:
```json
{
    "body": "<a id='comment:13'></a>\nSee my comments on #26964.",
    "created_at": "2020-02-05T13:50:51Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-457000",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>
See my comments on #26964.



---

archive/issue_events_257980.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-02-05T18:45:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-257980"
}
```



---

archive/issue_events_257981.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-02-05T18:45:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-257981"
}
```



---

archive/issue_comments_457001.json:
```json
{
    "body": "**Dependencies:** #29233",
    "created_at": "2020-02-22T23:14:12Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-457001",
    "user": "https://github.com/mkoeppe"
}
```

**Dependencies:** #29233



---

archive/issue_comments_457002.json:
```json
{
    "body": "**Changing commit** from \"[cfcc9fd4719a1bbba4bd763371fc6048c34d30ac](https://github.com/sagemath/sagetrac-mirror/commit/cfcc9fd4719a1bbba4bd763371fc6048c34d30ac)\" to \"[4fb30a608cd8b54be4fb0cc1a5b397b85480e5c6](https://github.com/sagemath/sagetrac-mirror/commit/4fb30a608cd8b54be4fb0cc1a5b397b85480e5c6)\".",
    "created_at": "2020-02-22T23:21:14Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-457002",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[cfcc9fd4719a1bbba4bd763371fc6048c34d30ac](https://github.com/sagemath/sagetrac-mirror/commit/cfcc9fd4719a1bbba4bd763371fc6048c34d30ac)" to "[4fb30a608cd8b54be4fb0cc1a5b397b85480e5c6](https://github.com/sagemath/sagetrac-mirror/commit/4fb30a608cd8b54be4fb0cc1a5b397b85480e5c6)".



---

archive/issue_comments_457003.json:
```json
{
    "body": "<a id='comment:16'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0dc97dbb12fcde2981cc0a4ef4bbd4938b5e74dc\">0dc97db</a></td><td><code>Clean src/doc/en/installation/*.txt in bootstrap-clean, not misc-clean</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bae1a82e79d7130f228d2da377bf5328710fd1b0\">bae1a82</a></td><td><code>Merge branch 't/29233/bootstrap____make_distclean_broken' into t/29041/at___bootstrap_time__generate_src_requirements_txt__src_constraints_txt__src_setup_cfg__install_requires__from_build_pkgs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4fb30a608cd8b54be4fb0cc1a5b397b85480e5c6\">4fb30a6</a></td><td><code>bootstrap: Add src/constraints.txt etc. to configure tarball</code></td></tr></table>\n",
    "created_at": "2020-02-22T23:21:14Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-457003",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0dc97dbb12fcde2981cc0a4ef4bbd4938b5e74dc">0dc97db</a></td><td><code>Clean src/doc/en/installation/*.txt in bootstrap-clean, not misc-clean</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bae1a82e79d7130f228d2da377bf5328710fd1b0">bae1a82</a></td><td><code>Merge branch 't/29233/bootstrap____make_distclean_broken' into t/29041/at___bootstrap_time__generate_src_requirements_txt__src_constraints_txt__src_setup_cfg__install_requires__from_build_pkgs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4fb30a608cd8b54be4fb0cc1a5b397b85480e5c6">4fb30a6</a></td><td><code>bootstrap: Add src/constraints.txt etc. to configure tarball</code></td></tr></table>




---

archive/issue_comments_457004.json:
```json
{
    "body": "<a id='comment:17'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f147962f260f4ecf6872f3555111c9e8e300acea\">f147962</a></td><td><code>src/bootstrap: Make executable</code></td></tr></table>\n",
    "created_at": "2020-02-22T23:22:54Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-457004",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f147962f260f4ecf6872f3555111c9e8e300acea">f147962</a></td><td><code>src/bootstrap: Make executable</code></td></tr></table>




---

archive/issue_comments_457005.json:
```json
{
    "body": "**Changing commit** from \"[4fb30a608cd8b54be4fb0cc1a5b397b85480e5c6](https://github.com/sagemath/sagetrac-mirror/commit/4fb30a608cd8b54be4fb0cc1a5b397b85480e5c6)\" to \"[f147962f260f4ecf6872f3555111c9e8e300acea](https://github.com/sagemath/sagetrac-mirror/commit/f147962f260f4ecf6872f3555111c9e8e300acea)\".",
    "created_at": "2020-02-22T23:22:54Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-457005",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[4fb30a608cd8b54be4fb0cc1a5b397b85480e5c6](https://github.com/sagemath/sagetrac-mirror/commit/4fb30a608cd8b54be4fb0cc1a5b397b85480e5c6)" to "[f147962f260f4ecf6872f3555111c9e8e300acea](https://github.com/sagemath/sagetrac-mirror/commit/f147962f260f4ecf6872f3555111c9e8e300acea)".



---

archive/issue_comments_457006.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,3 +2,5 @@\n \n This is another step toward #21507 - Task ticket: Make sagelib a pip-installable Python source package, listed on PyPI\n \n+Like the files generated in #26964, they are generated at `bootstrap` time so that they are available when a source distribution is packaged. They are deleted by `make bootstrap-clean`.\n+\n``````\n",
    "created_at": "2020-02-22T23:25:26Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-457006",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,3 +2,5 @@
 
 This is another step toward #21507 - Task ticket: Make sagelib a pip-installable Python source package, listed on PyPI
 
+Like the files generated in #26964, they are generated at `bootstrap` time so that they are available when a source distribution is packaged. They are deleted by `make bootstrap-clean`.
+
``````




---

archive/issue_comments_457007.json:
```json
{
    "body": "<a id='comment:20'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/13088e302e305761994c04dca1d7b7d9d4b2f06d\">13088e3</a></td><td><code>Merge tag '9.1.beta6' into t/29041/at___bootstrap_time__generate_src_requirements_txt__src_constraints_txt__src_setup_cfg__install_requires__from_build_pkgs</code></td></tr></table>\n",
    "created_at": "2020-03-02T01:41:45Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-457007",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/13088e302e305761994c04dca1d7b7d9d4b2f06d">13088e3</a></td><td><code>Merge tag '9.1.beta6' into t/29041/at___bootstrap_time__generate_src_requirements_txt__src_constraints_txt__src_setup_cfg__install_requires__from_build_pkgs</code></td></tr></table>




---

archive/issue_comments_457008.json:
```json
{
    "body": "**Changing commit** from \"[f147962f260f4ecf6872f3555111c9e8e300acea](https://github.com/sagemath/sagetrac-mirror/commit/f147962f260f4ecf6872f3555111c9e8e300acea)\" to \"[13088e302e305761994c04dca1d7b7d9d4b2f06d](https://github.com/sagemath/sagetrac-mirror/commit/13088e302e305761994c04dca1d7b7d9d4b2f06d)\".",
    "created_at": "2020-03-02T01:41:45Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-457008",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f147962f260f4ecf6872f3555111c9e8e300acea](https://github.com/sagemath/sagetrac-mirror/commit/f147962f260f4ecf6872f3555111c9e8e300acea)" to "[13088e302e305761994c04dca1d7b7d9d4b2f06d](https://github.com/sagemath/sagetrac-mirror/commit/13088e302e305761994c04dca1d7b7d9d4b2f06d)".



---

archive/issue_comments_457009.json:
```json
{
    "body": "<a id='comment:21'></a>\nNeeds review",
    "created_at": "2020-03-06T16:54:43Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-457009",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'></a>
Needs review



---

archive/issue_events_257982.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-15T17:10:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-257982"
}
```



---

archive/issue_events_257983.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-15T17:10:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-257983"
}
```



---

archive/issue_events_257984.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-09T23:03:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-257984"
}
```



---

archive/issue_events_257985.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-09T23:03:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-257985"
}
```



---

archive/issue_comments_457010.json:
```json
{
    "body": "**Changing dependencies** from \"#29233\" to \"#29233, #28925\".",
    "created_at": "2020-06-10T21:42:24Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-457010",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#29233" to "#29233, #28925".



---

archive/issue_events_257986.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-06-14T19:57:31Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-257986"
}
```



---

archive/issue_events_257987.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-06-14T19:57:31Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-257987"
}
```



---

archive/issue_events_257988.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-06-27T19:04:38Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "rename": {
        "from": "at ./bootstrap time, generate src/requirements.txt, src/constraints.txt, src/setup.cfg [install_requires] from build/pkgs",
        "to": "at ./bootstrap time, generate build/pkgs/sagelib/src/requirements.txt, constraints.txt, setup.cfg [install_requires] from build/pkgs"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-257988"
}
```



---

archive/issue_comments_457011.json:
```json
{
    "body": "**Work Issues:** redo on top of #29950",
    "created_at": "2020-06-27T19:05:46Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-457011",
    "user": "https://github.com/mkoeppe"
}
```

**Work Issues:** redo on top of #29950



---

archive/issue_comments_457012.json:
```json
{
    "body": "**Changing dependencies** from \"#29233, #28925\" to \"#29950\".",
    "created_at": "2020-06-27T19:05:46Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-457012",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#29233, #28925" to "#29950".



---

archive/issue_comments_457013.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,3 +4,12 @@\n \n Like the files generated in #26964, they are generated at `bootstrap` time so that they are available when a source distribution is packaged. They are deleted by `make bootstrap-clean`.\n \n+The files would be generated either in `build/pkgs/sagelib/src/` or in `src`.\n+\n+---\n+\n+References: \n+\n+https://pipenv-fork.readthedocs.io/en/latest/advanced.html\n+\n+\n``````\n",
    "created_at": "2020-09-07T18:17:38Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-457013",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,3 +4,12 @@
 
 Like the files generated in #26964, they are generated at `bootstrap` time so that they are available when a source distribution is packaged. They are deleted by `make bootstrap-clean`.
 
+The files would be generated either in `build/pkgs/sagelib/src/` or in `src`.
+
+---
+
+References: 
+
+https://pipenv-fork.readthedocs.io/en/latest/advanced.html
+
+
``````




---

archive/issue_events_257989.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-07T18:17:38Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "rename": {
        "from": "at ./bootstrap time, generate build/pkgs/sagelib/src/requirements.txt, constraints.txt, setup.cfg [install_requires] from build/pkgs",
        "to": "at ./bootstrap time, generate requirements.txt, constraints.txt, setup.cfg [install_requires], Pipfile from build/pkgs"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-257989"
}
```



---

archive/issue_comments_457014.json:
```json
{
    "body": "<a id='comment:30'></a>\nAnother approach would be to maintain an independent pipfile/requirements.txt in src/ and have automatic checks to make sure that the sage packages provide the required packages with a suitable version.\n\nReason: I feel like sage-lib should be independent of sage-distribution as much as possible.\n\nMore practical reason: pipenv works very nicely on Windows, and my hope is to use it without having to use `sage make` beforehand. So one simply clones the code, starts the virtual env with pipenv and gets an editiable install of sage for easy development. But for this the pipfile needs to be there without running the bootstrap command. (The alternative would be to rewrite the bootstrap cmd in a OS-independent way, say using powershell.)",
    "created_at": "2020-09-16T08:50:32Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-457014",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:30'></a>
Another approach would be to maintain an independent pipfile/requirements.txt in src/ and have automatic checks to make sure that the sage packages provide the required packages with a suitable version.

Reason: I feel like sage-lib should be independent of sage-distribution as much as possible.

More practical reason: pipenv works very nicely on Windows, and my hope is to use it without having to use `sage make` beforehand. So one simply clones the code, starts the virtual env with pipenv and gets an editiable install of sage for easy development. But for this the pipfile needs to be there without running the bootstrap command. (The alternative would be to rewrite the bootstrap cmd in a OS-independent way, say using powershell.)



---

archive/issue_comments_457015.json:
```json
{
    "body": "<a id='comment:31'></a>\nReplying to [@tobiasdiez](#comment%3A30):\n> Another approach would be to maintain an independent pipfile/requirements.txt in src/ and have automatic checks to make sure that the sage packages provide the required packages with a suitable version.\n> \n> Reason: I feel like sage-lib should be independent of sage-distribution as much as possible.\n\nI think the versions given by sage-the-distribution (`build/pkgs/*/package-version.txt`) should be considered as pinned versions, and information such as `requirements.txt` or `Pipfile`/`Pipfile.lock` should come from there in some way.\n\nThe allowed version ranges are currently not encoded anywhere. For non-Python packages have `spkg-configure.m4` (#27330), but this is obviously the wrong mechanism for Python packages.  setuptools has them in `setup.cfg [install_requires]`. \n\nI think I agree with you that this information does not necessarily have to be generated from (new) files in `build/pkgs/` but could be put directly into `src/`, such as `src/setup.cfg`. \n\n\n> More practical reason: pipenv works very nicely on Windows, and my hope is to use it without having to use `sage make` beforehand. So one simply clones the code, starts the virtual env with pipenv and gets an editiable install of sage for easy development.\n\nI think some steps are missing here - we don't have a native Windows build of many packages that Sage depends on. But I agree, after modularization (#29705) we should aim for getting a native Windows build of a Sage core at least.\n\n> But for this the pipfile needs to be there without running the bootstrap command. (The alternative would be to rewrite the bootstrap cmd in a OS-independent way, say using powershell.) \n\nNote that we have the `bootstrap -d` mechanism, which downloads a tarball of the files created by `bootstrap`.  This is how most users and developers get these files. We could look into creating a powershell version of `bootstrap -d`.",
    "created_at": "2020-09-16T17:07:46Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-457015",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:31'></a>
Replying to [@tobiasdiez](#comment%3A30):
> Another approach would be to maintain an independent pipfile/requirements.txt in src/ and have automatic checks to make sure that the sage packages provide the required packages with a suitable version.
> 
> Reason: I feel like sage-lib should be independent of sage-distribution as much as possible.

I think the versions given by sage-the-distribution (`build/pkgs/*/package-version.txt`) should be considered as pinned versions, and information such as `requirements.txt` or `Pipfile`/`Pipfile.lock` should come from there in some way.

The allowed version ranges are currently not encoded anywhere. For non-Python packages have `spkg-configure.m4` (#27330), but this is obviously the wrong mechanism for Python packages.  setuptools has them in `setup.cfg [install_requires]`. 

I think I agree with you that this information does not necessarily have to be generated from (new) files in `build/pkgs/` but could be put directly into `src/`, such as `src/setup.cfg`. 


> More practical reason: pipenv works very nicely on Windows, and my hope is to use it without having to use `sage make` beforehand. So one simply clones the code, starts the virtual env with pipenv and gets an editiable install of sage for easy development.

I think some steps are missing here - we don't have a native Windows build of many packages that Sage depends on. But I agree, after modularization (#29705) we should aim for getting a native Windows build of a Sage core at least.

> But for this the pipfile needs to be there without running the bootstrap command. (The alternative would be to rewrite the bootstrap cmd in a OS-independent way, say using powershell.) 

Note that we have the `bootstrap -d` mechanism, which downloads a tarball of the files created by `bootstrap`.  This is how most users and developers get these files. We could look into creating a powershell version of `bootstrap -d`.



---

archive/issue_comments_457016.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -10,6 +10,6 @@\n \n References: \n \n-https://pipenv-fork.readthedocs.io/en/latest/advanced.html\n+- https://pipenv-fork.readthedocs.io/en/latest/advanced.html\n+- https://packaging.python.org/discussions/install-requires-vs-requirements/\n \n-\n``````\n",
    "created_at": "2020-09-16T17:24:24Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-457016",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -10,6 +10,6 @@
 
 References: 
 
-https://pipenv-fork.readthedocs.io/en/latest/advanced.html
+- https://pipenv-fork.readthedocs.io/en/latest/advanced.html
+- https://packaging.python.org/discussions/install-requires-vs-requirements/
 
-
``````




---

archive/issue_comments_457017.json:
```json
{
    "body": "<a id='comment:33'></a>\nThere is also https://pypi.org/project/pipenv-to-requirements/ to generate the requirements file from a pipfile.",
    "created_at": "2020-09-28T10:38:37Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-457017",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:33'></a>
There is also https://pypi.org/project/pipenv-to-requirements/ to generate the requirements file from a pipfile.



---

archive/issue_comments_457018.json:
```json
{
    "body": "**Changing dependencies** from \"#29950\" to \"#30719\".",
    "created_at": "2020-10-04T22:00:23Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-457018",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#29950" to "#30719".



---

archive/issue_comments_457019.json:
```json
{
    "body": "**Changing author** from \"Matthias Koeppe\" to \"\".",
    "created_at": "2020-11-19T23:14:35Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-457019",
    "user": "https://github.com/mkoeppe"
}
```

**Changing author** from "Matthias Koeppe" to "".



---

archive/issue_comments_457020.json:
```json
{
    "body": "**Changing commit** from \"[13088e302e305761994c04dca1d7b7d9d4b2f06d](https://github.com/sagemath/sagetrac-mirror/commit/13088e302e305761994c04dca1d7b7d9d4b2f06d)\" to \"\".",
    "created_at": "2020-11-19T23:14:35Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-457020",
    "user": "https://github.com/mkoeppe"
}
```

**Changing commit** from "[13088e302e305761994c04dca1d7b7d9d4b2f06d](https://github.com/sagemath/sagetrac-mirror/commit/13088e302e305761994c04dca1d7b7d9d4b2f06d)" to "".



---

archive/issue_comments_457021.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/at___bootstrap_time__generate_src_requirements_txt__src_constraints_txt__src_setup_cfg__install_requires__from_build_pkgs](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/at___bootstrap_time__generate_src_requirements_txt__src_constraints_txt__src_setup_cfg__install_requires__from_build_pkgs)\" to \"\".",
    "created_at": "2020-11-19T23:14:35Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-457021",
    "user": "https://github.com/mkoeppe"
}
```

**Changing branch** from "[u/mkoeppe/at___bootstrap_time__generate_src_requirements_txt__src_constraints_txt__src_setup_cfg__install_requires__from_build_pkgs](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/at___bootstrap_time__generate_src_requirements_txt__src_constraints_txt__src_setup_cfg__install_requires__from_build_pkgs)" to "".



---

archive/issue_events_257990.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-19T23:14:35Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "rename": {
        "from": "at ./bootstrap time, generate requirements.txt, constraints.txt, setup.cfg [install_requires], Pipfile from build/pkgs",
        "to": "sage_bootstrap: Add command \"sage -package get-system-packages\", supporting systems \"install-requires\", \"requirements\", \"pipfile\""
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-257990"
}
```



---

archive/issue_comments_457022.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,15 +1,18 @@\n-https://pip.pypa.io/en/stable/user_guide/#requirements-files\n+We extend the `sage_bootstrap` package to add the commands:\n+- `sage -package get-system-packages install-requires PACKAGES...` (for #30913)\n+- `sage -package get-system-packages requirements PACKAGES...`\n+- `sage -package get-system-packages pipfile PACKAGES...`\n+(The functionality of the shell script `build/bin/sage-get-system-packages` can be merged into this command as well.)\n \n-This is another step toward #21507 - Task ticket: Make sagelib a pip-installable Python source package, listed on PyPI\n+They generate text files in the format of `setup.cfg [options] install_requires=`, `requirements.txt`, and `Pipfile`.\n \n-Like the files generated in #26964, they are generated at `bootstrap` time so that they are available when a source distribution is packaged. They are deleted by `make bootstrap-clean`.\n-\n-The files would be generated either in `build/pkgs/sagelib/src/` or in `src`.\n+`bootstrap` can use these commands to generate these files for  `build/pkgs/sagelib/src/` or `src`.  They are deleted by `make bootstrap-clean`.\n \n ---\n \n References: \n \n+- https://pip.pypa.io/en/stable/user_guide/#requirements-files\n - https://pipenv-fork.readthedocs.io/en/latest/advanced.html\n - https://packaging.python.org/discussions/install-requires-vs-requirements/\n \n``````\n",
    "created_at": "2020-11-19T23:14:35Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-457022",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,15 +1,18 @@
-https://pip.pypa.io/en/stable/user_guide/#requirements-files
+We extend the `sage_bootstrap` package to add the commands:
+- `sage -package get-system-packages install-requires PACKAGES...` (for #30913)
+- `sage -package get-system-packages requirements PACKAGES...`
+- `sage -package get-system-packages pipfile PACKAGES...`
+(The functionality of the shell script `build/bin/sage-get-system-packages` can be merged into this command as well.)
 
-This is another step toward #21507 - Task ticket: Make sagelib a pip-installable Python source package, listed on PyPI
+They generate text files in the format of `setup.cfg [options] install_requires=`, `requirements.txt`, and `Pipfile`.
 
-Like the files generated in #26964, they are generated at `bootstrap` time so that they are available when a source distribution is packaged. They are deleted by `make bootstrap-clean`.
-
-The files would be generated either in `build/pkgs/sagelib/src/` or in `src`.
+`bootstrap` can use these commands to generate these files for  `build/pkgs/sagelib/src/` or `src`.  They are deleted by `make bootstrap-clean`.
 
 ---
 
 References: 
 
+- https://pip.pypa.io/en/stable/user_guide/#requirements-files
 - https://pipenv-fork.readthedocs.io/en/latest/advanced.html
 - https://packaging.python.org/discussions/install-requires-vs-requirements/
 
``````




---

archive/issue_comments_457023.json:
```json
{
    "body": "**Changing dependencies** from \"#30719\" to \"#30719, #30865\".",
    "created_at": "2020-11-19T23:14:35Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-457023",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#30719" to "#30719, #30865".



---

archive/issue_comments_457024.json:
```json
{
    "body": "**Changing work issues** from \"redo on top of #29950\" to \"\".",
    "created_at": "2020-11-19T23:14:35Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-457024",
    "user": "https://github.com/mkoeppe"
}
```

**Changing work issues** from "redo on top of #29950" to "".



---

archive/issue_comments_457025.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,7 +4,7 @@\n - `sage -package get-system-packages pipfile PACKAGES...`\n (The functionality of the shell script `build/bin/sage-get-system-packages` can be merged into this command as well.)\n \n-They generate text files in the format of `setup.cfg [options] install_requires=`, `requirements.txt`, and `Pipfile`.\n+They generate text output in the format of `setup.cfg [options] install_requires=`, `requirements.txt`, and `Pipfile`.\n \n `bootstrap` can use these commands to generate these files for  `build/pkgs/sagelib/src/` or `src`.  They are deleted by `make bootstrap-clean`.\n \n``````\n",
    "created_at": "2020-11-19T23:14:57Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-457025",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,7 +4,7 @@
 - `sage -package get-system-packages pipfile PACKAGES...`
 (The functionality of the shell script `build/bin/sage-get-system-packages` can be merged into this command as well.)
 
-They generate text files in the format of `setup.cfg [options] install_requires=`, `requirements.txt`, and `Pipfile`.
+They generate text output in the format of `setup.cfg [options] install_requires=`, `requirements.txt`, and `Pipfile`.
 
 `bootstrap` can use these commands to generate these files for  `build/pkgs/sagelib/src/` or `src`.  They are deleted by `make bootstrap-clean`.
 
``````




---

archive/issue_comments_457026.json:
```json
{
    "body": "<a id='comment:37'></a>\nHoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111",
    "created_at": "2020-12-06T18:17:38Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-457026",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:37'></a>
Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111



---

archive/issue_comments_457027.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"sd111\".",
    "created_at": "2020-12-06T18:17:38Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-457027",
    "user": "https://github.com/mkoeppe"
}
```

**Changing keywords** from "" to "sd111".



---

archive/issue_comments_457028.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,10 +1,10 @@\n We extend the `sage_bootstrap` package to add the commands:\n-- `sage -package get-system-packages install-requires PACKAGES...` (for #30913)\n-- `sage -package get-system-packages requirements PACKAGES...`\n-- `sage -package get-system-packages pipfile PACKAGES...`\n-(The functionality of the shell script `build/bin/sage-get-system-packages` can be merged into this command as well.)\n+- `sage -package list --output=install-requires PACKAGES...` (for #30913)\n+- `sage -package list --output=requirements PACKAGES...`\n+- `sage -package list --output=pipfile PACKAGES...`\n+- `sage -package list --output=debian PACKAGE...` etc. (taking over the functionality of the shell script `build/bin/sage-get-system-packages`.)\n \n-They generate text output in the format of `setup.cfg [options] install_requires=`, `requirements.txt`, and `Pipfile`.\n+They generate text output in the format of `setup.cfg [options] install_requires=`, `requirements.txt`, and `Pipfile`; or a list of system packages \n \n `bootstrap` can use these commands to generate these files for  `build/pkgs/sagelib/src/` or `src`.  They are deleted by `make bootstrap-clean`.\n \n``````\n",
    "created_at": "2020-12-12T06:25:07Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-457028",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,10 +1,10 @@
 We extend the `sage_bootstrap` package to add the commands:
-- `sage -package get-system-packages install-requires PACKAGES...` (for #30913)
-- `sage -package get-system-packages requirements PACKAGES...`
-- `sage -package get-system-packages pipfile PACKAGES...`
-(The functionality of the shell script `build/bin/sage-get-system-packages` can be merged into this command as well.)
+- `sage -package list --output=install-requires PACKAGES...` (for #30913)
+- `sage -package list --output=requirements PACKAGES...`
+- `sage -package list --output=pipfile PACKAGES...`
+- `sage -package list --output=debian PACKAGE...` etc. (taking over the functionality of the shell script `build/bin/sage-get-system-packages`.)
 
-They generate text output in the format of `setup.cfg [options] install_requires=`, `requirements.txt`, and `Pipfile`.
+They generate text output in the format of `setup.cfg [options] install_requires=`, `requirements.txt`, and `Pipfile`; or a list of system packages 
 
 `bootstrap` can use these commands to generate these files for  `build/pkgs/sagelib/src/` or `src`.  They are deleted by `make bootstrap-clean`.
 
``````




---

archive/issue_events_257991.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-12T06:25:07Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "rename": {
        "from": "sage_bootstrap: Add command \"sage -package get-system-packages\", supporting systems \"install-requires\", \"requirements\", \"pipfile\"",
        "to": "sage_bootstrap: Add command \"sage -package list --output={install-requires,requirements,pipfile,debian,....}\""
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-257991"
}
```



---

archive/issue_comments_457029.json:
```json
{
    "body": "<a id='comment:39'></a>\nRewriting tools used in the bootstrap phase in Python would also be useful for developing on Windows",
    "created_at": "2020-12-12T21:05:13Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-457029",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:39'></a>
Rewriting tools used in the bootstrap phase in Python would also be useful for developing on Windows



---

archive/issue_comments_457030.json:
```json
{
    "body": "<a id='comment:40'></a>\nhmm, what is so problematic about Windows here? Even if one talks about native, non-cygwin, it is still perfectly possible to run bash etc.",
    "created_at": "2020-12-12T22:51:10Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-457030",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:40'></a>
hmm, what is so problematic about Windows here? Even if one talks about native, non-cygwin, it is still perfectly possible to run bash etc.



---

archive/issue_comments_457031.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -15,4 +15,4 @@\n - https://pip.pypa.io/en/stable/user_guide/#requirements-files\n - https://pipenv-fork.readthedocs.io/en/latest/advanced.html\n - https://packaging.python.org/discussions/install-requires-vs-requirements/\n-\n+- https://pypi.org/project/install-requires/\n``````\n",
    "created_at": "2020-12-28T19:15:38Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-457031",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -15,4 +15,4 @@
 - https://pip.pypa.io/en/stable/user_guide/#requirements-files
 - https://pipenv-fork.readthedocs.io/en/latest/advanced.html
 - https://packaging.python.org/discussions/install-requires-vs-requirements/
-
+- https://pypi.org/project/install-requires/
``````




---

archive/issue_comments_457032.json:
```json
{
    "body": "<a id='comment:42'></a>\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-457032",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:42'></a>
Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_257992.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-257992"
}
```



---

archive/issue_events_257993.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-257993"
}
```



---

archive/issue_comments_457033.json:
```json
{
    "body": "**Changing dependencies** from \"#30719, #30865\" to \"\".",
    "created_at": "2021-06-25T20:37:08Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-457033",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#30719, #30865" to "".



---

archive/issue_events_257994.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-257994"
}
```



---

archive/issue_events_257995.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-257995"
}
```



---

archive/issue_comments_457034.json:
```json
{
    "body": "<a id='comment:44'></a>\nSetting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-457034",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:44'></a>
Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_257996.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-257996"
}
```



---

archive/issue_events_257997.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-257997"
}
```



---

archive/issue_events_257998.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-257998"
}
```



---

archive/issue_events_257999.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-257999"
}
```



---

archive/issue_events_258000.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-258000"
}
```



---

archive/issue_events_258001.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-258001"
}
```
