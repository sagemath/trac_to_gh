# Issue 29102: fflas_ffpack installation error on new CPUs with old compilers

archive/issues_028865.json:
```json
{
    "assignees": [],
    "body": "As observed in #29084, \u200bfflas_ffpack compilation fails on a processor that supports AVX512 extensions with the default compiler on Ubuntu Trusty - gcc version 4.8.4 (Ubuntu 4.8.4-2ubuntu1~14.04.4).\n\nSee `ubuntu-trusty-minimal` run at \u200bhttps://github.com/mkoeppe/sage/runs/414021553\n\nAs noted in \u200bhttps://groups.google.com/d/msg/sage-release/eMQIlhglN98/bTwDGD9HBQAJ, this problem prevents Sage from build on other major platforms: `ubuntu-trusty-standard`, `debian-jessie-standard`, `centos-7-minimal/standard`.\n\n\nIn this ticket, we check which architecture flags are supported by the compiler, and disable the unsupported ones by passing options to the `configure` script of `fflas_ffpack`. (Because of bugs in fflas_ffpack's configuration scripts, the flags for individual AVX512 variants are not handled individually.)\n\n(Upstream indicates that they plan configuration changes in the longer term to address similar issues. Not the same upstream issue: https://github.com/linbox-team/fflas-ffpack/issues/284 (that's #29161).)\n\nRelated upstream issue: https://github.com/linbox-team/fflas-ffpack/issues/184\n\n\n\nCC:  @dimpase @antonio-rojas @timokau @kiwifb @vbraun @sagetrac-tmonteil\n\nBranch/Commit: **[d2f726a](https://github.com/sagemath/sagetrac-mirror/commit/d2f726ab38d4a737112d49ea35a743328afb73b7)**\n\nReviewer: **Volker Braun, Dima Pasechnik**\n\nAuthor: **Matthias Koeppe**\n\nComponent: **packages: standard**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29102_\n\n",
    "closed_at": "2020-03-25T22:48:53Z",
    "created_at": "2020-01-29T15:18:33Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "fflas_ffpack installation error on new CPUs with old compilers",
    "type": "issue",
    "updated_at": "2020-03-25T22:48:53Z",
    "url": "https://github.com/sagemath/sage/issues/29102",
    "user": "https://github.com/mkoeppe"
}
```
As observed in #29084, ​fflas_ffpack compilation fails on a processor that supports AVX512 extensions with the default compiler on Ubuntu Trusty - gcc version 4.8.4 (Ubuntu 4.8.4-2ubuntu1~14.04.4).

See `ubuntu-trusty-minimal` run at ​https://github.com/mkoeppe/sage/runs/414021553

As noted in ​https://groups.google.com/d/msg/sage-release/eMQIlhglN98/bTwDGD9HBQAJ, this problem prevents Sage from build on other major platforms: `ubuntu-trusty-standard`, `debian-jessie-standard`, `centos-7-minimal/standard`.


In this ticket, we check which architecture flags are supported by the compiler, and disable the unsupported ones by passing options to the `configure` script of `fflas_ffpack`. (Because of bugs in fflas_ffpack's configuration scripts, the flags for individual AVX512 variants are not handled individually.)

(Upstream indicates that they plan configuration changes in the longer term to address similar issues. Not the same upstream issue: https://github.com/linbox-team/fflas-ffpack/issues/284 (that's #29161).)

Related upstream issue: https://github.com/linbox-team/fflas-ffpack/issues/184



CC:  @dimpase @antonio-rojas @timokau @kiwifb @vbraun @sagetrac-tmonteil

Branch/Commit: **[d2f726a](https://github.com/sagemath/sagetrac-mirror/commit/d2f726ab38d4a737112d49ea35a743328afb73b7)**

Reviewer: **Volker Braun, Dima Pasechnik**

Author: **Matthias Koeppe**

Component: **packages: standard**

_Issue created by migration from https://trac.sagemath.org/ticket/29102_





---

archive/issue_events_399985.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-01-29T15:18:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29102#event-399985"
}
```



---

archive/issue_events_399986.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-01-29T15:18:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29102#event-399986"
}
```



---

archive/issue_events_399987.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-01-29T15:18:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29102#event-399987"
}
```



---

archive/issue_events_399988.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-01-29T15:18:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29102#event-399988"
}
```



---

archive/issue_comments_455734.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nSee also this thread on [sage-release](https://groups.google.com/d/msg/sage-release/x13Ug2AXNdE/0thZC21OFAAJ).",
    "created_at": "2020-01-29T17:34:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455734",
    "user": "https://github.com/mwageringel"
}
```

<div id="comment:1" align="right">comment:1</div>

See also this thread on [sage-release](https://groups.google.com/d/msg/sage-release/x13Ug2AXNdE/0thZC21OFAAJ).



---

archive/issue_comments_455735.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2020-02-06T20:40:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455735",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_comments_455736.json:
```json
{
    "body": "Dependencies: **#29052**",
    "created_at": "2020-02-06T20:40:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455736",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#29052**



---

archive/issue_comments_455737.json:
```json
{
    "body": "Branch: **[u/mkoeppe/fflas_ffpack_installation_error_on_new_cpus_with_old_compilers](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/fflas_ffpack_installation_error_on_new_cpus_with_old_compilers)**",
    "created_at": "2020-02-06T20:48:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455737",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/fflas_ffpack_installation_error_on_new_cpus_with_old_compilers](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/fflas_ffpack_installation_error_on_new_cpus_with_old_compilers)**



---

archive/issue_comments_455738.json:
```json
{
    "body": "Commit: **[1cce764](https://github.com/sagemath/sagetrac-mirror/commit/1cce764e78fccc709ce14d8702e9519a032e372c)**",
    "created_at": "2020-02-06T21:03:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455738",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[1cce764](https://github.com/sagemath/sagetrac-mirror/commit/1cce764e78fccc709ce14d8702e9519a032e372c)**



---

archive/issue_events_399989.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-02-06T21:03:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29102#event-399989"
}
```



---

archive/issue_comments_455739.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nTests run at https://github.com/mkoeppe/sage/actions/runs/35630769\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/52440602fe014c55523938a588abf7e37489764a\">5244060</a></td><td><code>Split out build/bin/sage-build-env-config from sage-env-config</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96b6c58635566e4fb9ad44f47b1466adfd9eb624\">96b6c58</a></td><td><code>src/bin/sage: Add -buildsh</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3491a9dfd0064de56abd0d552cfac6da8b6c9777\">3491a9d</a></td><td><code>build/make/deps, build/make.Makefile.in: Source build/bin/sage-build-env-config for building sagelib and for script packages</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11f67970eed56fc77743a26013bfcd4905f9c965\">11f6797</a></td><td><code>Document 'sage -buildsh' in the output of 'sage -advanced'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ecb6a8bf9050f079f743b8bb826450a12d5f75d3\">ecb6a8b</a></td><td><code>src/doc/en/reference/repl/options.rst: Document sage --buildsh</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1cce764e78fccc709ce14d8702e9519a032e372c\">1cce764</a></td><td><code>build/pkgs/fflas_ffpack: Disable arch flags that are not supported by the compiler</code></td></tr></table>\n",
    "created_at": "2020-02-06T21:03:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455739",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:4" align="right">comment:4</div>

Tests run at https://github.com/mkoeppe/sage/actions/runs/35630769

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/52440602fe014c55523938a588abf7e37489764a">5244060</a></td><td><code>Split out build/bin/sage-build-env-config from sage-env-config</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96b6c58635566e4fb9ad44f47b1466adfd9eb624">96b6c58</a></td><td><code>src/bin/sage: Add -buildsh</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3491a9dfd0064de56abd0d552cfac6da8b6c9777">3491a9d</a></td><td><code>build/make/deps, build/make.Makefile.in: Source build/bin/sage-build-env-config for building sagelib and for script packages</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11f67970eed56fc77743a26013bfcd4905f9c965">11f6797</a></td><td><code>Document 'sage -buildsh' in the output of 'sage -advanced'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ecb6a8bf9050f079f743b8bb826450a12d5f75d3">ecb6a8b</a></td><td><code>src/doc/en/reference/repl/options.rst: Document sage --buildsh</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1cce764e78fccc709ce14d8702e9519a032e372c">1cce764</a></td><td><code>build/pkgs/fflas_ffpack: Disable arch flags that are not supported by the compiler</code></td></tr></table>




---

archive/issue_comments_455740.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nAre those the only options not supported by gcc-4.8.2? My first thought was testing only those flags, and not stuff like `sse4`.",
    "created_at": "2020-02-06T21:08:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455740",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:5" align="right">comment:5</div>

Are those the only options not supported by gcc-4.8.2? My first thought was testing only those flags, and not stuff like `sse4`.



---

archive/issue_comments_455741.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI only took care of the `-mavx512*` flags because I knew that gcc-4.8.4 (as on Ubuntu trusty) does not have them. I threw in -mfma, -mfma4 because I was not familiar with them (though 4.8.4 supports them). All other flags are ancient and they are supported by 4.8.4.",
    "created_at": "2020-02-06T21:17:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455741",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">comment:6</div>

I only took care of the `-mavx512*` flags because I knew that gcc-4.8.4 (as on Ubuntu trusty) does not have them. I threw in -mfma, -mfma4 because I was not familiar with them (though 4.8.4 supports them). All other flags are ancient and they are supported by 4.8.4.



---

archive/issue_comments_455742.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nLooks good to me then, but I cannot review the commits from the dependencies. If they are OK, I agree with the stuff that specifically is here.",
    "created_at": "2020-02-06T21:21:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455742",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:7" align="right">comment:7</div>

Looks good to me then, but I cannot review the commits from the dependencies. If they are OK, I agree with the stuff that specifically is here.



---

archive/issue_comments_455743.json:
```json
{
    "body": "Changed commit from **[1cce764](https://github.com/sagemath/sagetrac-mirror/commit/1cce764e78fccc709ce14d8702e9519a032e372c)** to **[82509d1](https://github.com/sagemath/sagetrac-mirror/commit/82509d123567c0d653b17cbb1878585222c3b3d8)**",
    "created_at": "2020-02-06T21:48:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455743",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1cce764](https://github.com/sagemath/sagetrac-mirror/commit/1cce764e78fccc709ce14d8702e9519a032e372c)** to **[82509d1](https://github.com/sagemath/sagetrac-mirror/commit/82509d123567c0d653b17cbb1878585222c3b3d8)**



---

archive/issue_comments_455744.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/82509d123567c0d653b17cbb1878585222c3b3d8\">82509d1</a></td><td><code>Add AC_SUBST</code></td></tr></table>\n",
    "created_at": "2020-02-06T21:48:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455744",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/82509d123567c0d653b17cbb1878585222c3b3d8">82509d1</a></td><td><code>Add AC_SUBST</code></td></tr></table>




---

archive/issue_comments_455745.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,5 +5,8 @@\n `fflas_ffpack` configuration should check that the compiler actually supports the architecture flags that it wants to use.\n \n It should be checked whether upstream has a fix for this.\n-Not the same upstream issue: https://github.com/linbox-team/fflas-ffpack/issues/284\n+Not the same upstream issue: https://github.com/linbox-team/fflas-ffpack/issues/284 (that's #29161).\n \n+Related upstream issue: https://github.com/linbox-team/fflas-ffpack/issues/184\n+\n+\n``````\n",
    "created_at": "2020-02-06T22:57:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455745",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,5 +5,8 @@
 `fflas_ffpack` configuration should check that the compiler actually supports the architecture flags that it wants to use.
 
 It should be checked whether upstream has a fix for this.
-Not the same upstream issue: https://github.com/linbox-team/fflas-ffpack/issues/284
+Not the same upstream issue: https://github.com/linbox-team/fflas-ffpack/issues/284 (that's #29161).
 
+Related upstream issue: https://github.com/linbox-team/fflas-ffpack/issues/184
+
+
``````




---

archive/issue_comments_455746.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e0b620e43858a1af3eb4d67a80daeaaa7703b686\">e0b620e</a></td><td><code>fixup</code></td></tr></table>\n",
    "created_at": "2020-02-07T03:51:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455746",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e0b620e43858a1af3eb4d67a80daeaaa7703b686">e0b620e</a></td><td><code>fixup</code></td></tr></table>




---

archive/issue_comments_455747.json:
```json
{
    "body": "Changed commit from **[82509d1](https://github.com/sagemath/sagetrac-mirror/commit/82509d123567c0d653b17cbb1878585222c3b3d8)** to **[e0b620e](https://github.com/sagemath/sagetrac-mirror/commit/e0b620e43858a1af3eb4d67a80daeaaa7703b686)**",
    "created_at": "2020-02-07T03:51:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455747",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[82509d1](https://github.com/sagemath/sagetrac-mirror/commit/82509d123567c0d653b17cbb1878585222c3b3d8)** to **[e0b620e](https://github.com/sagemath/sagetrac-mirror/commit/e0b620e43858a1af3eb4d67a80daeaaa7703b686)**



---

archive/issue_comments_455748.json:
```json
{
    "body": "Changed commit from **[e0b620e](https://github.com/sagemath/sagetrac-mirror/commit/e0b620e43858a1af3eb4d67a80daeaaa7703b686)** to **[946a321](https://github.com/sagemath/sagetrac-mirror/commit/946a321a4e738e64453aec8d81d6da98e4f792d1)**",
    "created_at": "2020-02-08T03:52:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455748",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e0b620e](https://github.com/sagemath/sagetrac-mirror/commit/e0b620e43858a1af3eb4d67a80daeaaa7703b686)** to **[946a321](https://github.com/sagemath/sagetrac-mirror/commit/946a321a4e738e64453aec8d81d6da98e4f792d1)**



---

archive/issue_comments_455749.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/946a321a4e738e64453aec8d81d6da98e4f792d1\">946a321</a></td><td><code>Fixup quoting</code></td></tr></table>\n",
    "created_at": "2020-02-08T03:52:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455749",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/946a321a4e738e64453aec8d81d6da98e4f792d1">946a321</a></td><td><code>Fixup quoting</code></td></tr></table>




---

archive/issue_comments_455750.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nThis now actually works and fixes installation on `ubuntu-trusty-minimal` (https://github.com/mkoeppe/sage/runs/432608426?check_suite_focus=true).\n\nBut with this fix there's an error on `debian-jessie-standard` https://github.com/mkoeppe/sage/runs/432608838?check_suite_focus=true\nHere the compiler supports only one of the avx512 flags.",
    "created_at": "2020-02-08T04:05:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455750",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:12" align="right">comment:12</div>

This now actually works and fixes installation on `ubuntu-trusty-minimal` (https://github.com/mkoeppe/sage/runs/432608426?check_suite_focus=true).

But with this fix there's an error on `debian-jessie-standard` https://github.com/mkoeppe/sage/runs/432608838?check_suite_focus=true
Here the compiler supports only one of the avx512 flags.



---

archive/issue_comments_455751.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI'd just drop jessie, it's too much hassle to go to for something with EOL in 5 months\nhttps://wiki.debian.org/LTS/Jessie",
    "created_at": "2020-02-08T09:20:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455751",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:13" align="right">comment:13</div>

I'd just drop jessie, it's too much hassle to go to for something with EOL in 5 months
https://wiki.debian.org/LTS/Jessie



---

archive/issue_comments_455752.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI don't think this is how we should think about it. Shouldn't we rather be increasing the minimum accepted gcc version, and install our own gcc if too old?",
    "created_at": "2020-02-08T22:24:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455752",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:14" align="right">comment:14</div>

I don't think this is how we should think about it. Shouldn't we rather be increasing the minimum accepted gcc version, and install our own gcc if too old?



---

archive/issue_comments_455753.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nWell, it's possible, but newer gcc might not even get built with that old gcc.",
    "created_at": "2020-02-08T23:02:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455753",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:15" align="right">comment:15</div>

Well, it's possible, but newer gcc might not even get built with that old gcc.



---

archive/issue_comments_455754.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a0c3c5965b51f473a8a16c58ee3431505d05efa8\">a0c3c59</a></td><td><code>Fix \"--build-sh\" -> \"--buildsh\" in a comment</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c1f0e62472de3abb98300503cb588b127d181f42\">c1f0e62</a></td><td><code>Merge tag '9.1.beta4' into t/29052/create_build_bin_sage_build_env_and_call_it_from_build_make_deps__add_sage___buildsh</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0dc97dbb12fcde2981cc0a4ef4bbd4938b5e74dc\">0dc97db</a></td><td><code>Clean src/doc/en/installation/*.txt in bootstrap-clean, not misc-clean</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8bd4f532a5b42fdcb9f809c570d85b7c61c03910\">8bd4f53</a></td><td><code>Merge branch 't/29233/bootstrap____make_distclean_broken' into t/29052/create_build_bin_sage_build_env_and_call_it_from_build_make_deps__add_sage___buildsh</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d47aae3431f711b3ccba0bdfddf198acf18dc19\">5d47aae</a></td><td><code>Merge branch 't/29052/create_build_bin_sage_build_env_and_call_it_from_build_make_deps__add_sage___buildsh' into t/29102/fflas_ffpack_installation_error_on_new_cpus_with_old_compilers</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e17c0a5ee7d801c560657430480822fa8db47537\">e17c0a5</a></td><td><code>build/pkgs/fflas_ffpack/spkg-configure.m4: Disable all avx512 variants if the compiler does not support all of them</code></td></tr></table>\n",
    "created_at": "2020-02-24T07:43:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455754",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a0c3c5965b51f473a8a16c58ee3431505d05efa8">a0c3c59</a></td><td><code>Fix "--build-sh" -> "--buildsh" in a comment</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c1f0e62472de3abb98300503cb588b127d181f42">c1f0e62</a></td><td><code>Merge tag '9.1.beta4' into t/29052/create_build_bin_sage_build_env_and_call_it_from_build_make_deps__add_sage___buildsh</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0dc97dbb12fcde2981cc0a4ef4bbd4938b5e74dc">0dc97db</a></td><td><code>Clean src/doc/en/installation/*.txt in bootstrap-clean, not misc-clean</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8bd4f532a5b42fdcb9f809c570d85b7c61c03910">8bd4f53</a></td><td><code>Merge branch 't/29233/bootstrap____make_distclean_broken' into t/29052/create_build_bin_sage_build_env_and_call_it_from_build_make_deps__add_sage___buildsh</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d47aae3431f711b3ccba0bdfddf198acf18dc19">5d47aae</a></td><td><code>Merge branch 't/29052/create_build_bin_sage_build_env_and_call_it_from_build_make_deps__add_sage___buildsh' into t/29102/fflas_ffpack_installation_error_on_new_cpus_with_old_compilers</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e17c0a5ee7d801c560657430480822fa8db47537">e17c0a5</a></td><td><code>build/pkgs/fflas_ffpack/spkg-configure.m4: Disable all avx512 variants if the compiler does not support all of them</code></td></tr></table>




---

archive/issue_comments_455755.json:
```json
{
    "body": "Changed commit from **[946a321](https://github.com/sagemath/sagetrac-mirror/commit/946a321a4e738e64453aec8d81d6da98e4f792d1)** to **[e17c0a5](https://github.com/sagemath/sagetrac-mirror/commit/e17c0a5ee7d801c560657430480822fa8db47537)**",
    "created_at": "2020-02-24T07:43:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455755",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[946a321](https://github.com/sagemath/sagetrac-mirror/commit/946a321a4e738e64453aec8d81d6da98e4f792d1)** to **[e17c0a5](https://github.com/sagemath/sagetrac-mirror/commit/e17c0a5ee7d801c560657430480822fa8db47537)**



---

archive/issue_comments_455756.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nNow this is more robust and also works on `debian-jessie-standard`.\n\nSee https://github.com/mkoeppe/sage/actions/runs/44043380",
    "created_at": "2020-02-24T07:45:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455756",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:17" align="right">comment:17</div>

Now this is more robust and also works on `debian-jessie-standard`.

See https://github.com/mkoeppe/sage/actions/runs/44043380



---

archive/issue_comments_455757.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,10 +2,9 @@\n \n See `ubuntu-trusty-minimal` run at \u200bhttps://github.com/mkoeppe/sage/runs/414021553\n \n-`fflas_ffpack` configuration should check that the compiler actually supports the architecture flags that it wants to use.\n+In this ticket, we check which architecture flags are supported by the compiler, and disable the unsupported ones by passing options to the `configure` script of `fflas_ffpack`. \n \n-It should be checked whether upstream has a fix for this.\n-Not the same upstream issue: https://github.com/linbox-team/fflas-ffpack/issues/284 (that's #29161).\n+(Upstream indicates that they plan configuration changes in the longer term to address similar issues. Not the same upstream issue: https://github.com/linbox-team/fflas-ffpack/issues/284 (that's #29161).)\n \n Related upstream issue: https://github.com/linbox-team/fflas-ffpack/issues/184\n \n``````\n",
    "created_at": "2020-02-24T07:52:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455757",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,10 +2,9 @@
 
 See `ubuntu-trusty-minimal` run at ​https://github.com/mkoeppe/sage/runs/414021553
 
-`fflas_ffpack` configuration should check that the compiler actually supports the architecture flags that it wants to use.
+In this ticket, we check which architecture flags are supported by the compiler, and disable the unsupported ones by passing options to the `configure` script of `fflas_ffpack`. 
 
-It should be checked whether upstream has a fix for this.
-Not the same upstream issue: https://github.com/linbox-team/fflas-ffpack/issues/284 (that's #29161).
+(Upstream indicates that they plan configuration changes in the longer term to address similar issues. Not the same upstream issue: https://github.com/linbox-team/fflas-ffpack/issues/284 (that's #29161).)
 
 Related upstream issue: https://github.com/linbox-team/fflas-ffpack/issues/184
 
``````




---

archive/issue_comments_455758.json:
```json
{
    "body": "Changed commit from **[e17c0a5](https://github.com/sagemath/sagetrac-mirror/commit/e17c0a5ee7d801c560657430480822fa8db47537)** to **[5ead72f](https://github.com/sagemath/sagetrac-mirror/commit/5ead72fc3369b85f03445593732c103c363f811b)**",
    "created_at": "2020-02-27T04:15:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455758",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e17c0a5](https://github.com/sagemath/sagetrac-mirror/commit/e17c0a5ee7d801c560657430480822fa8db47537)** to **[5ead72f](https://github.com/sagemath/sagetrac-mirror/commit/5ead72fc3369b85f03445593732c103c363f811b)**



---

archive/issue_comments_455759.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ab9b09b39a4b5f8e73e88aba24aad78c2ff31d5\">2ab9b09</a></td><td><code>Move SAGE_PKG_CONFIG_PATH, SAGE_NAUTY_BINS_PREFIX back to src/bin/sage-env-config.in</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5ead72fc3369b85f03445593732c103c363f811b\">5ead72f</a></td><td><code>Merge branch 't/29052/create_build_bin_sage_build_env_and_call_it_from_build_make_deps__add_sage___buildsh' into t/29102/fflas_ffpack_installation_error_on_new_cpus_with_old_compilers</code></td></tr></table>\n",
    "created_at": "2020-02-27T04:15:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455759",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ab9b09b39a4b5f8e73e88aba24aad78c2ff31d5">2ab9b09</a></td><td><code>Move SAGE_PKG_CONFIG_PATH, SAGE_NAUTY_BINS_PREFIX back to src/bin/sage-env-config.in</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5ead72fc3369b85f03445593732c103c363f811b">5ead72f</a></td><td><code>Merge branch 't/29052/create_build_bin_sage_build_env_and_call_it_from_build_make_deps__add_sage___buildsh' into t/29102/fflas_ffpack_installation_error_on_new_cpus_with_old_compilers</code></td></tr></table>




---

archive/issue_comments_455760.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f6870ed273ec12224f3dcb34f273ce2b2fe5097e\">f6870ed</a></td><td><code>Merge tag '9.1.beta6' into t/29102/fflas_ffpack_installation_error_on_new_cpus_with_old_compilers</code></td></tr></table>\n",
    "created_at": "2020-03-02T01:36:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455760",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f6870ed273ec12224f3dcb34f273ce2b2fe5097e">f6870ed</a></td><td><code>Merge tag '9.1.beta6' into t/29102/fflas_ffpack_installation_error_on_new_cpus_with_old_compilers</code></td></tr></table>




---

archive/issue_comments_455761.json:
```json
{
    "body": "Changed commit from **[5ead72f](https://github.com/sagemath/sagetrac-mirror/commit/5ead72fc3369b85f03445593732c103c363f811b)** to **[f6870ed](https://github.com/sagemath/sagetrac-mirror/commit/f6870ed273ec12224f3dcb34f273ce2b2fe5097e)**",
    "created_at": "2020-03-02T01:36:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455761",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5ead72f](https://github.com/sagemath/sagetrac-mirror/commit/5ead72fc3369b85f03445593732c103c363f811b)** to **[f6870ed](https://github.com/sagemath/sagetrac-mirror/commit/f6870ed273ec12224f3dcb34f273ce2b2fe5097e)**



---

archive/issue_comments_455762.json:
```json
{
    "body": "Changed dependencies from **#29052** to none",
    "created_at": "2020-03-02T01:42:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455762",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#29052** to none



---

archive/issue_comments_455763.json:
```json
{
    "body": "Reviewer: **Volker Braun**",
    "created_at": "2020-03-02T23:28:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455763",
    "user": "https://github.com/vbraun"
}
```

Reviewer: **Volker Braun**



---

archive/issue_events_399990.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-03-02T23:28:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29102#event-399990"
}
```



---

archive/issue_events_399991.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-03-02T23:28:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29102#event-399991"
}
```



---

archive/issue_comments_455764.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nThanks!",
    "created_at": "2020-03-02T23:31:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455764",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:24" align="right">comment:24</div>

Thanks!



---

archive/issue_events_399992.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-03-03T23:21:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29102#event-399992"
}
```



---

archive/issue_events_399993.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-03-03T23:21:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29102#event-399993"
}
```



---

archive/issue_comments_455765.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/fflas_ffpack_installation_error_on_new_cpus_with_old_compilers](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/fflas_ffpack_installation_error_on_new_cpus_with_old_compilers)** to **[f6870ed](https://github.com/sagemath/sagetrac-mirror/commit/f6870ed273ec12224f3dcb34f273ce2b2fe5097e)**",
    "created_at": "2020-03-03T23:21:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455765",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/fflas_ffpack_installation_error_on_new_cpus_with_old_compilers](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/fflas_ffpack_installation_error_on_new_cpus_with_old_compilers)** to **[f6870ed](https://github.com/sagemath/sagetrac-mirror/commit/f6870ed273ec12224f3dcb34f273ce2b2fe5097e)**



---

archive/issue_comments_455766.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nThis breaks linbox on fresh builds:\n\n```\n-----------------------------------------------\nDefault path = /var/lib/buildbot/slave/sage2_git/build/local /usr /usr/local \nchecking whether to compile the drivers... no\n-----------------------------------------------\nchecking for pkg-config... /var/lib/buildbot/slave/sage2_git/build/local/bin/pkg-config\nchecking pkg-config is at least version 0.9.0... yes\nchecking for FFLAS_FFPACK... no\nconfigure: error: Package requirements (fflas-ffpack >= 2.4.0) were not met:\nPackage fflas-ffpack was not found in the pkg-config search path.\nPerhaps you should add the directory containing `fflas-ffpack.pc'\nto the PKG_CONFIG_PATH environment variable\nPackage 'fflas-ffpack', required by 'world', not found\nConsider adjusting the PKG_CONFIG_PATH environment variable if you\ninstalled software in a non-standard prefix.\nAlternatively, you may set the environment variables FFLAS_FFPACK_CFLAGS\nand FFLAS_FFPACK_LIBS to avoid the need to call pkg-config.\nSee the pkg-config man page for more details.\n********************************************************************************\n```",
    "created_at": "2020-03-07T21:18:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455766",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:26" align="right">comment:26</div>

This breaks linbox on fresh builds:

```
-----------------------------------------------
Default path = /var/lib/buildbot/slave/sage2_git/build/local /usr /usr/local 
checking whether to compile the drivers... no
-----------------------------------------------
checking for pkg-config... /var/lib/buildbot/slave/sage2_git/build/local/bin/pkg-config
checking pkg-config is at least version 0.9.0... yes
checking for FFLAS_FFPACK... no
configure: error: Package requirements (fflas-ffpack >= 2.4.0) were not met:
Package fflas-ffpack was not found in the pkg-config search path.
Perhaps you should add the directory containing `fflas-ffpack.pc'
to the PKG_CONFIG_PATH environment variable
Package 'fflas-ffpack', required by 'world', not found
Consider adjusting the PKG_CONFIG_PATH environment variable if you
installed software in a non-standard prefix.
Alternatively, you may set the environment variables FFLAS_FFPACK_CFLAGS
and FFLAS_FFPACK_LIBS to avoid the need to call pkg-config.
See the pkg-config man page for more details.
********************************************************************************
```



---

archive/issue_comments_455767.json:
```json
{
    "body": "Changed commit from **[f6870ed](https://github.com/sagemath/sagetrac-mirror/commit/f6870ed273ec12224f3dcb34f273ce2b2fe5097e)** to none",
    "created_at": "2020-03-07T21:18:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455767",
    "user": "https://github.com/vbraun"
}
```

Changed commit from **[f6870ed](https://github.com/sagemath/sagetrac-mirror/commit/f6870ed273ec12224f3dcb34f273ce2b2fe5097e)** to none



---

archive/issue_comments_455768.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nOn what system?",
    "created_at": "2020-03-07T21:19:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455768",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:27" align="right">comment:27</div>

On what system?



---

archive/issue_comments_455769.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nFull log please",
    "created_at": "2020-03-07T21:22:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455769",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:28" align="right">comment:28</div>

Full log please



---

archive/issue_comments_455770.json:
```json
{
    "body": "Changed branch from **[f6870ed](https://github.com/sagemath/sagetrac-mirror/commit/f6870ed273ec12224f3dcb34f273ce2b2fe5097e)** to **[u/mkoeppe/f6870ed273ec12224f3dcb34f273ce2b2fe5097e](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/f6870ed273ec12224f3dcb34f273ce2b2fe5097e)**",
    "created_at": "2020-03-09T01:09:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455770",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[f6870ed](https://github.com/sagemath/sagetrac-mirror/commit/f6870ed273ec12224f3dcb34f273ce2b2fe5097e)** to **[u/mkoeppe/f6870ed273ec12224f3dcb34f273ce2b2fe5097e](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/f6870ed273ec12224f3dcb34f273ce2b2fe5097e)**



---

archive/issue_comments_455771.json:
```json
{
    "body": "Commit: **[24192eb](https://github.com/sagemath/sagetrac-mirror/commit/24192eb55748a6b70d68d13552bcdbe0f20dab28)**",
    "created_at": "2020-03-09T01:10:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455771",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[24192eb](https://github.com/sagemath/sagetrac-mirror/commit/24192eb55748a6b70d68d13552bcdbe0f20dab28)**



---

archive/issue_comments_455772.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nTests at https://github.com/mkoeppe/sage/actions/runs/51973394\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1cce764e78fccc709ce14d8702e9519a032e372c\">1cce764</a></td><td><code>build/pkgs/fflas_ffpack: Disable arch flags that are not supported by the compiler</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/82509d123567c0d653b17cbb1878585222c3b3d8\">82509d1</a></td><td><code>Add AC_SUBST</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e0b620e43858a1af3eb4d67a80daeaaa7703b686\">e0b620e</a></td><td><code>fixup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/946a321a4e738e64453aec8d81d6da98e4f792d1\">946a321</a></td><td><code>Fixup quoting</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d47aae3431f711b3ccba0bdfddf198acf18dc19\">5d47aae</a></td><td><code>Merge branch 't/29052/create_build_bin_sage_build_env_and_call_it_from_build_make_deps__add_sage___buildsh' into t/29102/fflas_ffpack_installation_error_on_new_cpus_with_old_compilers</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e17c0a5ee7d801c560657430480822fa8db47537\">e17c0a5</a></td><td><code>build/pkgs/fflas_ffpack/spkg-configure.m4: Disable all avx512 variants if the compiler does not support all of them</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5ead72fc3369b85f03445593732c103c363f811b\">5ead72f</a></td><td><code>Merge branch 't/29052/create_build_bin_sage_build_env_and_call_it_from_build_make_deps__add_sage___buildsh' into t/29102/fflas_ffpack_installation_error_on_new_cpus_with_old_compilers</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f6870ed273ec12224f3dcb34f273ce2b2fe5097e\">f6870ed</a></td><td><code>Merge tag '9.1.beta6' into t/29102/fflas_ffpack_installation_error_on_new_cpus_with_old_compilers</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/24192eb55748a6b70d68d13552bcdbe0f20dab28\">24192eb</a></td><td><code>Merge tag '9.1.beta7' into t/29102/f6870ed273ec12224f3dcb34f273ce2b2fe5097e</code></td></tr></table>\n",
    "created_at": "2020-03-09T01:10:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455772",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:30" align="right">comment:30</div>

Tests at https://github.com/mkoeppe/sage/actions/runs/51973394

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1cce764e78fccc709ce14d8702e9519a032e372c">1cce764</a></td><td><code>build/pkgs/fflas_ffpack: Disable arch flags that are not supported by the compiler</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/82509d123567c0d653b17cbb1878585222c3b3d8">82509d1</a></td><td><code>Add AC_SUBST</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e0b620e43858a1af3eb4d67a80daeaaa7703b686">e0b620e</a></td><td><code>fixup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/946a321a4e738e64453aec8d81d6da98e4f792d1">946a321</a></td><td><code>Fixup quoting</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d47aae3431f711b3ccba0bdfddf198acf18dc19">5d47aae</a></td><td><code>Merge branch 't/29052/create_build_bin_sage_build_env_and_call_it_from_build_make_deps__add_sage___buildsh' into t/29102/fflas_ffpack_installation_error_on_new_cpus_with_old_compilers</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e17c0a5ee7d801c560657430480822fa8db47537">e17c0a5</a></td><td><code>build/pkgs/fflas_ffpack/spkg-configure.m4: Disable all avx512 variants if the compiler does not support all of them</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5ead72fc3369b85f03445593732c103c363f811b">5ead72f</a></td><td><code>Merge branch 't/29052/create_build_bin_sage_build_env_and_call_it_from_build_make_deps__add_sage___buildsh' into t/29102/fflas_ffpack_installation_error_on_new_cpus_with_old_compilers</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f6870ed273ec12224f3dcb34f273ce2b2fe5097e">f6870ed</a></td><td><code>Merge tag '9.1.beta6' into t/29102/fflas_ffpack_installation_error_on_new_cpus_with_old_compilers</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/24192eb55748a6b70d68d13552bcdbe0f20dab28">24192eb</a></td><td><code>Merge tag '9.1.beta7' into t/29102/f6870ed273ec12224f3dcb34f273ce2b2fe5097e</code></td></tr></table>




---

archive/issue_comments_455773.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nOK, I can reproduce the build error on `centos-8-standard`(https://github.com/mkoeppe/sage/runs/494058924, https://github.com/mkoeppe/sage/suites/507443973/artifacts/2680774)",
    "created_at": "2020-03-09T15:42:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455773",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:31" align="right">comment:31</div>

OK, I can reproduce the build error on `centos-8-standard`(https://github.com/mkoeppe/sage/runs/494058924, https://github.com/mkoeppe/sage/suites/507443973/artifacts/2680774)



---

archive/issue_comments_455774.json:
```json
{
    "body": "Changed commit from **[24192eb](https://github.com/sagemath/sagetrac-mirror/commit/24192eb55748a6b70d68d13552bcdbe0f20dab28)** to **[d0ac900](https://github.com/sagemath/sagetrac-mirror/commit/d0ac900e817536744a756dea0f08ddbdb0e38e5a)**",
    "created_at": "2020-03-09T19:18:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455774",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[24192eb](https://github.com/sagemath/sagetrac-mirror/commit/24192eb55748a6b70d68d13552bcdbe0f20dab28)** to **[d0ac900](https://github.com/sagemath/sagetrac-mirror/commit/d0ac900e817536744a756dea0f08ddbdb0e38e5a)**



---

archive/issue_comments_455775.json:
```json
{
    "body": "<div id=\"comment:32\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3863984ea963b4101583659999498e43748cddbb\">3863984</a></td><td><code>build/pkgs/fflas_ffpack/spkg-configure.m4: Set sage_spkg_install_fflas_ffpack=yes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d0ac900e817536744a756dea0f08ddbdb0e38e5a\">d0ac900</a></td><td><code>Merge tag '9.1.beta7' into t/29102/fflas_ffpack_installation_error_on_new_cpus_with_old_compilers</code></td></tr></table>\n",
    "created_at": "2020-03-09T19:18:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455775",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3863984ea963b4101583659999498e43748cddbb">3863984</a></td><td><code>build/pkgs/fflas_ffpack/spkg-configure.m4: Set sage_spkg_install_fflas_ffpack=yes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d0ac900e817536744a756dea0f08ddbdb0e38e5a">d0ac900</a></td><td><code>Merge tag '9.1.beta7' into t/29102/fflas_ffpack_installation_error_on_new_cpus_with_old_compilers</code></td></tr></table>




---

archive/issue_events_399994.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-09T19:19:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29102#event-399994"
}
```



---

archive/issue_comments_455776.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\n@vbraun Let's get this into the next beta please",
    "created_at": "2020-03-12T00:34:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455776",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:34" align="right">comment:34</div>

@vbraun Let's get this into the next beta please



---

archive/issue_comments_455777.json:
```json
{
    "body": "<div id=\"comment:35\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/be3c581869e78a31f51d44511461f06d5aafe1d8\">be3c581</a></td><td><code>Configure ARB_LIBRARY through sage_conf</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dcd755a741a2edc46683cfedb67de54cffec880f\">dcd755a</a></td><td><code>cosmetic change</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d141b1961b46c9f0ab671e4049e199a6a0196e5f\">d141b19</a></td><td><code>Merge branch 't/29305/move_arb_library_back_from_sage_build_env_config_to_sage_env_config' into t/29102/fflas_ffpack_installation_error_on_new_cpus_with_old_compilers</code></td></tr></table>\n",
    "created_at": "2020-03-15T23:55:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455777",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:35"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/be3c581869e78a31f51d44511461f06d5aafe1d8">be3c581</a></td><td><code>Configure ARB_LIBRARY through sage_conf</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dcd755a741a2edc46683cfedb67de54cffec880f">dcd755a</a></td><td><code>cosmetic change</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d141b1961b46c9f0ab671e4049e199a6a0196e5f">d141b19</a></td><td><code>Merge branch 't/29305/move_arb_library_back_from_sage_build_env_config_to_sage_env_config' into t/29102/fflas_ffpack_installation_error_on_new_cpus_with_old_compilers</code></td></tr></table>




---

archive/issue_comments_455778.json:
```json
{
    "body": "Changed commit from **[d0ac900](https://github.com/sagemath/sagetrac-mirror/commit/d0ac900e817536744a756dea0f08ddbdb0e38e5a)** to **[d141b19](https://github.com/sagemath/sagetrac-mirror/commit/d141b1961b46c9f0ab671e4049e199a6a0196e5f)**",
    "created_at": "2020-03-15T23:55:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455778",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d0ac900](https://github.com/sagemath/sagetrac-mirror/commit/d0ac900e817536744a756dea0f08ddbdb0e38e5a)** to **[d141b19](https://github.com/sagemath/sagetrac-mirror/commit/d141b1961b46c9f0ab671e4049e199a6a0196e5f)**



---

archive/issue_comments_455779.json:
```json
{
    "body": "Dependencies: **#29305**",
    "created_at": "2020-03-15T23:56:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455779",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#29305**



---

archive/issue_comments_455780.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nMerged #29305 to resolve a potential merge conflict",
    "created_at": "2020-03-15T23:56:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455780",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:37" align="right">comment:37</div>

Merged #29305 to resolve a potential merge conflict



---

archive/issue_comments_455781.json:
```json
{
    "body": "Changed commit from **[d141b19](https://github.com/sagemath/sagetrac-mirror/commit/d141b1961b46c9f0ab671e4049e199a6a0196e5f)** to **[d2f726a](https://github.com/sagemath/sagetrac-mirror/commit/d2f726ab38d4a737112d49ea35a743328afb73b7)**",
    "created_at": "2020-03-19T00:05:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455781",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d141b19](https://github.com/sagemath/sagetrac-mirror/commit/d141b1961b46c9f0ab671e4049e199a6a0196e5f)** to **[d2f726a](https://github.com/sagemath/sagetrac-mirror/commit/d2f726ab38d4a737112d49ea35a743328afb73b7)**



---

archive/issue_comments_455782.json:
```json
{
    "body": "<div id=\"comment:38\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d2f726ab38d4a737112d49ea35a743328afb73b7\">d2f726a</a></td><td><code>build/pkgs/fflas_ffpack: Disable arch flags that are not supported by the compiler</code></td></tr></table>\n",
    "created_at": "2020-03-19T00:05:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455782",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:38"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d2f726ab38d4a737112d49ea35a743328afb73b7">d2f726a</a></td><td><code>build/pkgs/fflas_ffpack: Disable arch flags that are not supported by the compiler</code></td></tr></table>




---

archive/issue_comments_455783.json:
```json
{
    "body": "Changed dependencies from **#29305** to none",
    "created_at": "2020-03-19T00:06:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455783",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#29305** to none



---

archive/issue_comments_455784.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nRebased/squashed on 9.1.beta8, needs review",
    "created_at": "2020-03-19T00:06:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455784",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:39" align="right">comment:39</div>

Rebased/squashed on 9.1.beta8, needs review



---

archive/issue_events_399995.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-21T13:10:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29102#event-399995"
}
```



---

archive/issue_events_399996.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-21T13:10:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29102#event-399996"
}
```



---

archive/issue_comments_455785.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nAnyone interested in completing the review of this ticket? As noted many times in sage-release, most recently in https://groups.google.com/d/msg/sage-release/eMQIlhglN98/bTwDGD9HBQAJ, this problem prevents Sage from build on major platforms: ubuntu-trusty-minimal/standard, debian-jessie-standard, centos-7-minimal/standard.",
    "created_at": "2020-03-21T13:10:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455785",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:41" align="right">comment:41</div>

Anyone interested in completing the review of this ticket? As noted many times in sage-release, most recently in https://groups.google.com/d/msg/sage-release/eMQIlhglN98/bTwDGD9HBQAJ, this problem prevents Sage from build on major platforms: ubuntu-trusty-minimal/standard, debian-jessie-standard, centos-7-minimal/standard.



---

archive/issue_comments_455786.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nTests run at https://github.com/mkoeppe/sage/actions/runs/60291174",
    "created_at": "2020-03-21T13:25:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455786",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:42" align="right">comment:42</div>

Tests run at https://github.com/mkoeppe/sage/actions/runs/60291174



---

archive/issue_comments_455787.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,7 +2,10 @@\n \n See `ubuntu-trusty-minimal` run at \u200bhttps://github.com/mkoeppe/sage/runs/414021553\n \n-In this ticket, we check which architecture flags are supported by the compiler, and disable the unsupported ones by passing options to the `configure` script of `fflas_ffpack`. \n+As noted in \u200bhttps://groups.google.com/d/msg/sage-release/eMQIlhglN98/bTwDGD9HBQAJ, this problem prevents Sage from build on other major platforms: `ubuntu-trusty-standard`, `debian-jessie-standard`, `centos-7-minimal/standard`.\n+\n+\n+In this ticket, we check which architecture flags are supported by the compiler, and disable the unsupported ones by passing options to the `configure` script of `fflas_ffpack`. (Because of bugs in fflas_ffpack's configuration scripts, the flags for individual AVX512 variants are not handled individually.)\n \n (Upstream indicates that they plan configuration changes in the longer term to address similar issues. Not the same upstream issue: https://github.com/linbox-team/fflas-ffpack/issues/284 (that's #29161).)\n \n``````\n",
    "created_at": "2020-03-21T13:25:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455787",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,7 +2,10 @@
 
 See `ubuntu-trusty-minimal` run at ​https://github.com/mkoeppe/sage/runs/414021553
 
-In this ticket, we check which architecture flags are supported by the compiler, and disable the unsupported ones by passing options to the `configure` script of `fflas_ffpack`. 
+As noted in ​https://groups.google.com/d/msg/sage-release/eMQIlhglN98/bTwDGD9HBQAJ, this problem prevents Sage from build on other major platforms: `ubuntu-trusty-standard`, `debian-jessie-standard`, `centos-7-minimal/standard`.
+
+
+In this ticket, we check which architecture flags are supported by the compiler, and disable the unsupported ones by passing options to the `configure` script of `fflas_ffpack`. (Because of bugs in fflas_ffpack's configuration scripts, the flags for individual AVX512 variants are not handled individually.)
 
 (Upstream indicates that they plan configuration changes in the longer term to address similar issues. Not the same upstream issue: https://github.com/linbox-team/fflas-ffpack/issues/284 (that's #29161).)
 
``````




---

archive/issue_comments_455788.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nThe tests are done. Needs review.",
    "created_at": "2020-03-22T02:19:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455788",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:43" align="right">comment:43</div>

The tests are done. Needs review.



---

archive/issue_comments_455789.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nAll tests fail. E.g. Debian tests fail due to `cannot find -larb` thing - perhaps this should be rebased on top of the corresponding ticket? \n\nFedora builds fail due to the inability to build numpy, probably related to *blas.pc issue.",
    "created_at": "2020-03-22T02:25:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455789",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:44" align="right">comment:44</div>

All tests fail. E.g. Debian tests fail due to `cannot find -larb` thing - perhaps this should be rebased on top of the corresponding ticket? 

Fedora builds fail due to the inability to build numpy, probably related to *blas.pc issue.



---

archive/issue_comments_455790.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nYes, they fail - because of unrelated issues. What is important is that the fflas_ffpack failures are gone!",
    "created_at": "2020-03-22T03:09:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455790",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:45" align="right">comment:45</div>

Yes, they fail - because of unrelated issues. What is important is that the fflas_ffpack failures are gone!



---

archive/issue_comments_455791.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nFor example, if you look at `ubuntu-trusty-minimal`, which had an fflas_ffpack failure, this now builds Sage correctly (https://github.com/mkoeppe/sage/runs/524022952) and runs its test suite:\n\n```\nsage -t src/sage/manifolds/differentiable/degenerate_submanifold.py  # Timed out\nsage -t src/sage/manifolds/differentiable/euclidean.py  # Timed out\nsage -t src/sage/manifolds/differentiable/metric.py  # Timed out\nsage -t src/sage/manifolds/differentiable/tensorfield.py  # Timed out\nsage -t src/sage/plot/plot.py  # Timed out\nsage -t src/sage/rings/padics/padic_lattice_element.py  # 3 doctests failed\nsage -t src/sage/rings/function_field/function_field.py  # Timed out\nsage -t src/sage/schemes/elliptic_curves/ell_number_field.py  # Timed out\n```",
    "created_at": "2020-03-22T03:12:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455791",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:46" align="right">comment:46</div>

For example, if you look at `ubuntu-trusty-minimal`, which had an fflas_ffpack failure, this now builds Sage correctly (https://github.com/mkoeppe/sage/runs/524022952) and runs its test suite:

```
sage -t src/sage/manifolds/differentiable/degenerate_submanifold.py  # Timed out
sage -t src/sage/manifolds/differentiable/euclidean.py  # Timed out
sage -t src/sage/manifolds/differentiable/metric.py  # Timed out
sage -t src/sage/manifolds/differentiable/tensorfield.py  # Timed out
sage -t src/sage/plot/plot.py  # Timed out
sage -t src/sage/rings/padics/padic_lattice_element.py  # 3 doctests failed
sage -t src/sage/rings/function_field/function_field.py  # Timed out
sage -t src/sage/schemes/elliptic_curves/ell_number_field.py  # Timed out
```



---

archive/issue_events_399997.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-03-22T06:27:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29102#event-399997"
}
```



---

archive/issue_events_399998.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-03-22T06:27:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29102#event-399998"
}
```



---

archive/issue_comments_455792.json:
```json
{
    "body": "Changed reviewer from **Volker Braun** to **Volker Braun, Dima Pasechnik**",
    "created_at": "2020-03-22T06:27:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455792",
    "user": "https://github.com/dimpase"
}
```

Changed reviewer from **Volker Braun** to **Volker Braun, Dima Pasechnik**



---

archive/issue_comments_455793.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nThank you!",
    "created_at": "2020-03-22T09:39:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455793",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:48" align="right">comment:48</div>

Thank you!



---

archive/issue_comments_455794.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/f6870ed273ec12224f3dcb34f273ce2b2fe5097e](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/f6870ed273ec12224f3dcb34f273ce2b2fe5097e)** to **[d2f726a](https://github.com/sagemath/sagetrac-mirror/commit/d2f726ab38d4a737112d49ea35a743328afb73b7)**",
    "created_at": "2020-03-25T22:48:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29102#issuecomment-455794",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/f6870ed273ec12224f3dcb34f273ce2b2fe5097e](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/f6870ed273ec12224f3dcb34f273ce2b2fe5097e)** to **[d2f726a](https://github.com/sagemath/sagetrac-mirror/commit/d2f726ab38d4a737112d49ea35a743328afb73b7)**



---

archive/issue_events_399999.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-03-25T22:48:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29102#event-399999"
}
```



---

archive/issue_events_400000.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "22ea385799f49b56f6b49dbd34a0d6887e7f88a3",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-03-25T22:48:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29102",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29102#event-400000"
}
```
