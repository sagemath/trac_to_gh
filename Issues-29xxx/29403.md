# Issue 29403: ci-cygwin.yml: Multi-stage build

archive/issues_029166.json:
```json
{
    "body": "The [GitHub](GitHub) workflow for cygwin does not fit into the 6-hour time limit.\nWe do a multi-stage build, saving and loading `local/` to/from build artifacts.\n\n\nCC:  @dimpase @embray @slel jpflori @tscrim @vbraun @kcrisman\n\nBranch/Commit: 27ddea32cbd2c93d98e0e67942dd6b3fbd9f3a1b\n\nReviewer: Dima Pasechnik\n\nAuthor: Matthias Koeppe\n\nDependencies: #29417, #29392\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29403\n\n",
    "closed_at": "2020-04-23T22:32:47Z",
    "created_at": "2020-03-25T01:55:07Z",
    "labels": [
        "component: porting: cygwin"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "ci-cygwin.yml: Multi-stage build",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29403",
    "user": "https://github.com/mkoeppe"
}
```
The [GitHub](GitHub) workflow for cygwin does not fit into the 6-hour time limit.
We do a multi-stage build, saving and loading `local/` to/from build artifacts.


CC:  @dimpase @embray @slel jpflori @tscrim @vbraun @kcrisman

Branch/Commit: 27ddea32cbd2c93d98e0e67942dd6b3fbd9f3a1b

Reviewer: Dima Pasechnik

Author: Matthias Koeppe

Dependencies: #29417, #29392

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29403





---

archive/issue_comments_574843.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/ci_cygwin_yml__multi_stage_build\"",
    "created_at": "2020-03-25T02:09:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574843",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/ci_cygwin_yml__multi_stage_build"



---

archive/issue_comments_574844.json:
```json
{
    "body": "Changing commit from \"\" to \"79bee2f55b707b8c2f83d17f1c4f18b010996024\"",
    "created_at": "2020-03-25T03:13:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574844",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "79bee2f55b707b8c2f83d17f1c4f18b010996024"



---

archive/issue_comments_574845.json:
```json
{
    "body": "<a id='comment:2'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|\n|[79bee2f](https://github.com/sagemath/sagetrac-mirror/commit/79bee2f55b707b8c2f83d17f1c4f18b010996024)|`ci-cygwin.yml: Remove sage-spkg -y -o`|",
    "created_at": "2020-03-25T03:13:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574845",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|
|[79bee2f](https://github.com/sagemath/sagetrac-mirror/commit/79bee2f55b707b8c2f83d17f1c4f18b010996024)|`ci-cygwin.yml: Remove sage-spkg -y -o`|



---

archive/issue_comments_574846.json:
```json
{
    "body": "Changing commit from \"79bee2f55b707b8c2f83d17f1c4f18b010996024\" to \"cef0d7382cd899ce2f04ab31f38c7137394b9ae0\"",
    "created_at": "2020-03-26T19:50:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574846",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "79bee2f55b707b8c2f83d17f1c4f18b010996024" to "cef0d7382cd899ce2f04ab31f38c7137394b9ae0"



---

archive/issue_comments_574847.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n|                                                                                                                                           |                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------|\n|[cd0a0ec](https://github.com/sagemath/sagetrac-mirror/commit/cd0a0ecd97719df1a1789e9853f72794938e85eb)|`handle symlinks`|\n|[5a387d0](https://github.com/sagemath/sagetrac-mirror/commit/5a387d0b7a919f0363d3461b8af16a4b06ae9b26)|`Use winsymlinks:native`|\n|[122f972](https://github.com/sagemath/sagetrac-mirror/commit/122f972ccdbc664b549aafa5a90e0b6f8115e923)|`Full targets`|\n|[424d86e](https://github.com/sagemath/sagetrac-mirror/commit/424d86ec1d2438d76595d2533fd484df5a039b73)|`prepare the final logs artifact`|\n|[f646274](https://github.com/sagemath/sagetrac-mirror/commit/f6462749253172f8f5ded76df334ea9c408cad08)|`store local/var/tmp/sage/build in logs artifact`|\n|[6924328](https://github.com/sagemath/sagetrac-mirror/commit/692432821010886f170c152db6035f9e52de4b86)|`stage 1`|\n|[97d3f86](https://github.com/sagemath/sagetrac-mirror/commit/97d3f866ce7074c64c7341e7685db4d092edf964)|`touch installation records to get same mtime`|\n|[5939bc7](https://github.com/sagemath/sagetrac-mirror/commit/5939bc7f69f440ec878982aab89a3b69342bef5a)|`Upload log artifact first`|\n|[59d20e0](https://github.com/sagemath/sagetrac-mirror/commit/59d20e057de2f5ff65cef545ae04ad857fbb932d)|`stage 4`|\n|[cef0d73](https://github.com/sagemath/sagetrac-mirror/commit/cef0d7382cd899ce2f04ab31f38c7137394b9ae0)|`more stages`|",
    "created_at": "2020-03-26T19:50:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574847",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
|                                                                                                                                           |                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------|
|[cd0a0ec](https://github.com/sagemath/sagetrac-mirror/commit/cd0a0ecd97719df1a1789e9853f72794938e85eb)|`handle symlinks`|
|[5a387d0](https://github.com/sagemath/sagetrac-mirror/commit/5a387d0b7a919f0363d3461b8af16a4b06ae9b26)|`Use winsymlinks:native`|
|[122f972](https://github.com/sagemath/sagetrac-mirror/commit/122f972ccdbc664b549aafa5a90e0b6f8115e923)|`Full targets`|
|[424d86e](https://github.com/sagemath/sagetrac-mirror/commit/424d86ec1d2438d76595d2533fd484df5a039b73)|`prepare the final logs artifact`|
|[f646274](https://github.com/sagemath/sagetrac-mirror/commit/f6462749253172f8f5ded76df334ea9c408cad08)|`store local/var/tmp/sage/build in logs artifact`|
|[6924328](https://github.com/sagemath/sagetrac-mirror/commit/692432821010886f170c152db6035f9e52de4b86)|`stage 1`|
|[97d3f86](https://github.com/sagemath/sagetrac-mirror/commit/97d3f866ce7074c64c7341e7685db4d092edf964)|`touch installation records to get same mtime`|
|[5939bc7](https://github.com/sagemath/sagetrac-mirror/commit/5939bc7f69f440ec878982aab89a3b69342bef5a)|`Upload log artifact first`|
|[59d20e0](https://github.com/sagemath/sagetrac-mirror/commit/59d20e057de2f5ff65cef545ae04ad857fbb932d)|`stage 4`|
|[cef0d73](https://github.com/sagemath/sagetrac-mirror/commit/cef0d7382cd899ce2f04ab31f38c7137394b9ae0)|`more stages`|



---

archive/issue_comments_574848.json:
```json
{
    "body": "<a id='comment:4'></a>\nSample run https://github.com/mkoeppe/sage/actions/runs/63708828",
    "created_at": "2020-03-26T19:52:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574848",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
Sample run https://github.com/mkoeppe/sage/actions/runs/63708828



---

archive/issue_comments_574849.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#29397\"",
    "created_at": "2020-03-26T20:07:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574849",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#29397"



---

archive/issue_comments_574850.json:
```json
{
    "body": "<a id='comment:6'></a>\nSomething is still triggering rebuilds of targets that have been built in a previous stage.",
    "created_at": "2020-03-29T03:03:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574850",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
Something is still triggering rebuilds of targets that have been built in a previous stage.



---

archive/issue_comments_574851.json:
```json
{
    "body": "<a id='comment:7'></a>\nI'd suspect it's the `toolchain` crud.",
    "created_at": "2020-03-29T03:14:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574851",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:7'></a>
I'd suspect it's the `toolchain` crud.



---

archive/issue_comments_574852.json:
```json
{
    "body": "Changing dependencies from \"#29397\" to \"\"",
    "created_at": "2020-03-29T04:29:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574852",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29397" to ""



---

archive/issue_comments_574853.json:
```json
{
    "body": "<a id='comment:9'></a>\nI'm running one test with MAKE=\"make --debug=verbose\" to see what's happening there",
    "created_at": "2020-03-29T04:29:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574853",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
I'm running one test with MAKE="make --debug=verbose" to see what's happening there



---

archive/issue_comments_574854.json:
```json
{
    "body": "Changing commit from \"cef0d7382cd899ce2f04ab31f38c7137394b9ae0\" to \"de50cf8fd0b06c8073f77f358af1f2be75b81bec\"",
    "created_at": "2020-03-30T22:38:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574854",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "cef0d7382cd899ce2f04ab31f38c7137394b9ae0" to "de50cf8fd0b06c8073f77f358af1f2be75b81bec"



---

archive/issue_comments_574855.json:
```json
{
    "body": "<a id='comment:11'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------|\n|[de50cf8](https://github.com/sagemath/sagetrac-mirror/commit/de50cf8fd0b06c8073f77f358af1f2be75b81bec)|`better touch`|",
    "created_at": "2020-03-30T22:38:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574855",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |              |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------|
|[de50cf8](https://github.com/sagemath/sagetrac-mirror/commit/de50cf8fd0b06c8073f77f358af1f2be75b81bec)|`better touch`|



---

archive/issue_comments_574856.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2020-03-30T22:48:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574856",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_574857.json:
```json
{
    "body": "<a id='comment:13'></a>\nThis works pretty well now.",
    "created_at": "2020-03-31T16:03:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574857",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>
This works pretty well now.



---

archive/issue_comments_574858.json:
```json
{
    "body": "<a id='comment:14'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|\n|[9db2311](https://github.com/sagemath/sagetrac-mirror/commit/9db2311c16c984d5dd99b570c8da12e5d6bc6df9)|`.github/workflows/ci-cygwin.yml: Edit targets`|\n|[9f38852](https://github.com/sagemath/sagetrac-mirror/commit/9f38852dbc749a52081da7dc6341b4cbe397012d)|`cygwin: Add minimal and standard-python2 builds`|",
    "created_at": "2020-04-04T14:53:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574858",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|
|[9db2311](https://github.com/sagemath/sagetrac-mirror/commit/9db2311c16c984d5dd99b570c8da12e5d6bc6df9)|`.github/workflows/ci-cygwin.yml: Edit targets`|
|[9f38852](https://github.com/sagemath/sagetrac-mirror/commit/9f38852dbc749a52081da7dc6341b4cbe397012d)|`cygwin: Add minimal and standard-python2 builds`|



---

archive/issue_comments_574859.json:
```json
{
    "body": "Changing commit from \"de50cf8fd0b06c8073f77f358af1f2be75b81bec\" to \"9f38852dbc749a52081da7dc6341b4cbe397012d\"",
    "created_at": "2020-04-04T14:53:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574859",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "de50cf8fd0b06c8073f77f358af1f2be75b81bec" to "9f38852dbc749a52081da7dc6341b4cbe397012d"



---

archive/issue_comments_574860.json:
```json
{
    "body": "<a id='comment:15'></a>\nNew failure mode: https://github.com/mkoeppe/sage/runs/560884908\n\n```\n\"/cygdrive/d/a/sage/sage/local/lib/python3.7/subprocess.py\", line 775, in __init__\n  [backports_abc-0.5]       restore_signals, start_new_session)\n  [backports_abc-0.5]     File \"/cygdrive/d/a/sage/sage/local/lib/python3.7/subprocess.py\", line 1453, in _execute_child\n  [backports_abc-0.5]       restore_signals, start_new_session, preexec_fn)\n  [backports_abc-0.5]   BlockingIOError: [Errno 11] Resource temporarily unavailable\n  [backports_abc-0.5]   Cleaning up...\n```",
    "created_at": "2020-04-05T02:43:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574860",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>
New failure mode: https://github.com/mkoeppe/sage/runs/560884908

```
"/cygdrive/d/a/sage/sage/local/lib/python3.7/subprocess.py", line 775, in __init__
  [backports_abc-0.5]       restore_signals, start_new_session)
  [backports_abc-0.5]     File "/cygdrive/d/a/sage/sage/local/lib/python3.7/subprocess.py", line 1453, in _execute_child
  [backports_abc-0.5]       restore_signals, start_new_session, preexec_fn)
  [backports_abc-0.5]   BlockingIOError: [Errno 11] Resource temporarily unavailable
  [backports_abc-0.5]   Cleaning up...
```



---

archive/issue_comments_574861.json:
```json
{
    "body": "<a id='comment:16'></a>\nhttps://github.com/mkoeppe/sage/runs/560884917\n\n```\nInstalling backports_abc-0.5\n      0 [main] python3.7 16471 child_info_fork::abort: address space needed by 'cyglzma-5.dll' (0x400000) is already occupied\nInstalling package backports_abc using pip3\n      0 [main] python3.7 16554 child_info_fork::abort: address space needed by 'cyglzma-5.dll' (0x400000) is already occupied\nIgnoring indexes: https://pypi.org/simple\n```",
    "created_at": "2020-04-05T02:45:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574861",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>
https://github.com/mkoeppe/sage/runs/560884917

```
Installing backports_abc-0.5
      0 [main] python3.7 16471 child_info_fork::abort: address space needed by 'cyglzma-5.dll' (0x400000) is already occupied
Installing package backports_abc using pip3
      0 [main] python3.7 16554 child_info_fork::abort: address space needed by 'cyglzma-5.dll' (0x400000) is already occupied
Ignoring indexes: https://pypi.org/simple
```



---

archive/issue_comments_574862.json:
```json
{
    "body": "<a id='comment:17'></a>\nhttps://github.com/mkoeppe/sage/runs/560884917\n\n```\n [r-3.6.2.p0]   gcc -I../../src/extra -I../../src/extra/xdr -I. -I../../src/include -I../../src/include -I/cygdrive/d/a/sage/sage/local/include  -I../../src/nmath -DHAVE_CONFIG_H   -fopenmp   -g -O2  -fPIC  -c version.c -o version.o\n  [r-3.6.2.p0]   sysutils.c:554:10: fatal error: iconv.h: No such file or directory\n  [r-3.6.2.p0]     554 | #include <iconv.h>\n  [r-3.6.2.p0]         |          ^~~~~~~~~\n  [r-3.6.2.p0]   compilation terminated.\n```",
    "created_at": "2020-04-05T02:47:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574862",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>
https://github.com/mkoeppe/sage/runs/560884917

```
 [r-3.6.2.p0]   gcc -I../../src/extra -I../../src/extra/xdr -I. -I../../src/include -I../../src/include -I/cygdrive/d/a/sage/sage/local/include  -I../../src/nmath -DHAVE_CONFIG_H   -fopenmp   -g -O2  -fPIC  -c version.c -o version.o
  [r-3.6.2.p0]   sysutils.c:554:10: fatal error: iconv.h: No such file or directory
  [r-3.6.2.p0]     554 | #include <iconv.h>
  [r-3.6.2.p0]         |          ^~~~~~~~~
  [r-3.6.2.p0]   compilation terminated.
```



---

archive/issue_comments_574863.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [mkoeppe](#comment%3A15):\n> New failure mode: https://github.com/mkoeppe/sage/runs/560884908\n> \n> ```\n> \"/cygdrive/d/a/sage/sage/local/lib/python3.7/subprocess.py\", line 775, in __init__\n>   [backports_abc-0.5]       restore_signals, start_new_session)\n>   [backports_abc-0.5]     File \"/cygdrive/d/a/sage/sage/local/lib/python3.7/subprocess.py\", line 1453, in _execute_child\n>   [backports_abc-0.5]       restore_signals, start_new_session, preexec_fn)\n>   [backports_abc-0.5]   BlockingIOError: [Errno 11] Resource temporarily unavailable\n>   [backports_abc-0.5]   Cleaning up...\n> ```\n\n\nwelcome to Cygwin rebase Hell. \nOne might need to call one of these `src/bin/sage-rebase*` (sacrificing a black chicken might be a pre-req).",
    "created_at": "2020-04-05T02:53:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574863",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:18'></a>
Replying to [mkoeppe](#comment%3A15):
> New failure mode: https://github.com/mkoeppe/sage/runs/560884908
> 
> ```
> "/cygdrive/d/a/sage/sage/local/lib/python3.7/subprocess.py", line 775, in __init__
>   [backports_abc-0.5]       restore_signals, start_new_session)
>   [backports_abc-0.5]     File "/cygdrive/d/a/sage/sage/local/lib/python3.7/subprocess.py", line 1453, in _execute_child
>   [backports_abc-0.5]       restore_signals, start_new_session, preexec_fn)
>   [backports_abc-0.5]   BlockingIOError: [Errno 11] Resource temporarily unavailable
>   [backports_abc-0.5]   Cleaning up...
> ```


welcome to Cygwin rebase Hell. 
One might need to call one of these `src/bin/sage-rebase*` (sacrificing a black chicken might be a pre-req).



---

archive/issue_comments_574864.json:
```json
{
    "body": "<a id='comment:20'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|\n|[62f4aa5](https://github.com/sagemath/sagetrac-mirror/commit/62f4aa5b8311175a63107eec7080e4eb397ddce1)|`build/pkgs/cygwin.txt: Add libiconv-devel`|\n|[0a53429](https://github.com/sagemath/sagetrac-mirror/commit/0a5342978268f8fe5dea76fa1e22529dffc5dea3)|`.github/workflows/ci-cygwin.yml: Call rebaseall after extracting SAGE_LOCAL archive`|",
    "created_at": "2020-04-08T14:41:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574864",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|
|[62f4aa5](https://github.com/sagemath/sagetrac-mirror/commit/62f4aa5b8311175a63107eec7080e4eb397ddce1)|`build/pkgs/cygwin.txt: Add libiconv-devel`|
|[0a53429](https://github.com/sagemath/sagetrac-mirror/commit/0a5342978268f8fe5dea76fa1e22529dffc5dea3)|`.github/workflows/ci-cygwin.yml: Call rebaseall after extracting SAGE_LOCAL archive`|



---

archive/issue_comments_574865.json:
```json
{
    "body": "Changing commit from \"9f38852dbc749a52081da7dc6341b4cbe397012d\" to \"0a5342978268f8fe5dea76fa1e22529dffc5dea3\"",
    "created_at": "2020-04-08T14:41:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574865",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9f38852dbc749a52081da7dc6341b4cbe397012d" to "0a5342978268f8fe5dea76fa1e22529dffc5dea3"



---

archive/issue_comments_574866.json:
```json
{
    "body": "<a id='comment:21'></a>\nIn https://github.com/mkoeppe/sage/runs/572730280 (cygwin-stage-ii-a (minimal)), despite rebasing in the \"Extract sage-local artifact\" step, I am still getting `_fork::abort: address space needed by 'cyglzma-5.dll' (0x400000) is already occupied` when building packages",
    "created_at": "2020-04-09T16:37:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574866",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'></a>
In https://github.com/mkoeppe/sage/runs/572730280 (cygwin-stage-ii-a (minimal)), despite rebasing in the "Extract sage-local artifact" step, I am still getting `_fork::abort: address space needed by 'cyglzma-5.dll' (0x400000) is already occupied` when building packages



---

archive/issue_comments_574867.json:
```json
{
    "body": "<a id='comment:23'></a>\n#29486 cygwin-standard: rpy2 fails to build",
    "created_at": "2020-04-09T16:51:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574867",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'></a>
#29486 cygwin-standard: rpy2 fails to build



---

archive/issue_comments_574868.json:
```json
{
    "body": "<a id='comment:24'></a>\ncygwin-stage-ii-b (minimal) times out -  https://github.com/mkoeppe/sage/runs/572730298 - may need to rebalance stages",
    "created_at": "2020-04-09T16:55:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574868",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'></a>
cygwin-stage-ii-b (minimal) times out -  https://github.com/mkoeppe/sage/runs/572730298 - may need to rebalance stages



---

archive/issue_comments_574869.json:
```json
{
    "body": "<a id='comment:25'></a>\nIn https://github.com/mkoeppe/sage/runs/572730287 (cygwin-stage-ii-a (standard)): matplotlib fails to build - numpy-related \n\n```\n     File \"/cygdrive/d/a/sage/sage/local/lib/python3.7/site-packages/numpy/matrixlib/__init__.py\", line 6, in <module>\n        from .defmatrix import *\n      File \"/cygdrive/d/a/sage/sage/local/lib/python3.7/site-packages/numpy/matrixlib/defmatrix.py\", line 13, in <module>\n        from numpy.linalg import matrix_power\n      File \"/cygdrive/d/a/sage/sage/local/lib/python3.7/site-packages/numpy/linalg/__init__.py\", line 51, in <module>\n        from .linalg import *\n      File \"/cygdrive/d/a/sage/sage/local/lib/python3.7/site-packages/numpy/linalg/linalg.py\", line 35, in <module>\n        from numpy.linalg import lapack_lite, _umath_linalg\n    ImportError: No such file or directory\n```",
    "created_at": "2020-04-09T17:00:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574869",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'></a>
In https://github.com/mkoeppe/sage/runs/572730287 (cygwin-stage-ii-a (standard)): matplotlib fails to build - numpy-related 

```
     File "/cygdrive/d/a/sage/sage/local/lib/python3.7/site-packages/numpy/matrixlib/__init__.py", line 6, in <module>
        from .defmatrix import *
      File "/cygdrive/d/a/sage/sage/local/lib/python3.7/site-packages/numpy/matrixlib/defmatrix.py", line 13, in <module>
        from numpy.linalg import matrix_power
      File "/cygdrive/d/a/sage/sage/local/lib/python3.7/site-packages/numpy/linalg/__init__.py", line 51, in <module>
        from .linalg import *
      File "/cygdrive/d/a/sage/sage/local/lib/python3.7/site-packages/numpy/linalg/linalg.py", line 35, in <module>
        from numpy.linalg import lapack_lite, _umath_linalg
    ImportError: No such file or directory
```



---

archive/issue_comments_574870.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-04-12T15:44:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574870",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_574871.json:
```json
{
    "body": "<a id='comment:27'></a>\nAnyone out there who is interested in cygwin?",
    "created_at": "2020-04-12T16:39:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574871",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>
Anyone out there who is interested in cygwin?



---

archive/issue_comments_574872.json:
```json
{
    "body": "<a id='comment:28'></a>\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n|                                                                                                                                           |           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------|\n|[4d2366b](https://github.com/sagemath/sagetrac-mirror/commit/4d2366b7a3bfbd403825893cf27cf9a8e1f6a263)|`tox fixup`|\n|[828394b](https://github.com/sagemath/sagetrac-mirror/commit/828394b7ec1bd86b31ad399b044161331dbd1837)|`.github/workflows/scan-logs.sh: Fixup regex`|\n|[a39ca99](https://github.com/sagemath/sagetrac-mirror/commit/a39ca9952e38e9844c2b3c00fc4d4a834437a050)|`.github/workflows/scan-logs.sh: Rewording for better display`|\n|[0a02589](https://github.com/sagemath/sagetrac-mirror/commit/0a02589e53b77da34219aad07e0d3c5b9b3b8244)|`tox.ini: Store successfully built docker tags in {toxenv}/Dockertags`|\n|[d209e8e](https://github.com/sagemath/sagetrac-mirror/commit/d209e8e39bda073587a493ca81bc7f4d209787d4)|`tox.yml: Retrieve logs from successful builds via {toxenv}/Dockertags`|\n|[f1858e7](https://github.com/sagemath/sagetrac-mirror/commit/f1858e73cb04ed9368d83925a68aa9aed42db8ee)|`.github/workflows/tox.yml: Pass TARGETS to tox so that errors in doc-html count as failures`|\n|[f9aca59](https://github.com/sagemath/sagetrac-mirror/commit/f9aca59f5fa10573179570f9e31d14715dad0060)|`.github/workflows/scan-logs.sh: Fixup regexp for scanning ptest.log`|\n|[b32e1bf](https://github.com/sagemath/sagetrac-mirror/commit/b32e1bf451eceb45ef874ddbbb4cc102fb22a396)|`.github/workflows/scan-logs.sh: Also catch errors of the form ImportError`|\n|[d94969c](https://github.com/sagemath/sagetrac-mirror/commit/d94969c9e1c62ddca2ce76b596f0889d9d2cb310)|`tox.ini: Quoting fix`|\n|[c08176e](https://github.com/sagemath/sagetrac-mirror/commit/c08176edeb5871de7d7548c91944f3a3eaa5038d)|`Merge branch 't/29417/tox-ci-minor-fixes' into t/29403/ci_cygwin_yml__multi_stage_build`|",
    "created_at": "2020-04-13T05:40:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574872",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>
Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
|                                                                                                                                           |           |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------|
|[4d2366b](https://github.com/sagemath/sagetrac-mirror/commit/4d2366b7a3bfbd403825893cf27cf9a8e1f6a263)|`tox fixup`|
|[828394b](https://github.com/sagemath/sagetrac-mirror/commit/828394b7ec1bd86b31ad399b044161331dbd1837)|`.github/workflows/scan-logs.sh: Fixup regex`|
|[a39ca99](https://github.com/sagemath/sagetrac-mirror/commit/a39ca9952e38e9844c2b3c00fc4d4a834437a050)|`.github/workflows/scan-logs.sh: Rewording for better display`|
|[0a02589](https://github.com/sagemath/sagetrac-mirror/commit/0a02589e53b77da34219aad07e0d3c5b9b3b8244)|`tox.ini: Store successfully built docker tags in {toxenv}/Dockertags`|
|[d209e8e](https://github.com/sagemath/sagetrac-mirror/commit/d209e8e39bda073587a493ca81bc7f4d209787d4)|`tox.yml: Retrieve logs from successful builds via {toxenv}/Dockertags`|
|[f1858e7](https://github.com/sagemath/sagetrac-mirror/commit/f1858e73cb04ed9368d83925a68aa9aed42db8ee)|`.github/workflows/tox.yml: Pass TARGETS to tox so that errors in doc-html count as failures`|
|[f9aca59](https://github.com/sagemath/sagetrac-mirror/commit/f9aca59f5fa10573179570f9e31d14715dad0060)|`.github/workflows/scan-logs.sh: Fixup regexp for scanning ptest.log`|
|[b32e1bf](https://github.com/sagemath/sagetrac-mirror/commit/b32e1bf451eceb45ef874ddbbb4cc102fb22a396)|`.github/workflows/scan-logs.sh: Also catch errors of the form ImportError`|
|[d94969c](https://github.com/sagemath/sagetrac-mirror/commit/d94969c9e1c62ddca2ce76b596f0889d9d2cb310)|`tox.ini: Quoting fix`|
|[c08176e](https://github.com/sagemath/sagetrac-mirror/commit/c08176edeb5871de7d7548c91944f3a3eaa5038d)|`Merge branch 't/29417/tox-ci-minor-fixes' into t/29403/ci_cygwin_yml__multi_stage_build`|



---

archive/issue_comments_574873.json:
```json
{
    "body": "Changing commit from \"0a5342978268f8fe5dea76fa1e22529dffc5dea3\" to \"c08176edeb5871de7d7548c91944f3a3eaa5038d\"",
    "created_at": "2020-04-13T05:40:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574873",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0a5342978268f8fe5dea76fa1e22529dffc5dea3" to "c08176edeb5871de7d7548c91944f3a3eaa5038d"



---

archive/issue_comments_574874.json:
```json
{
    "body": "<a id='comment:29'></a>\nMerged in #29417 to resolve merge conflicts",
    "created_at": "2020-04-13T05:40:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574874",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'></a>
Merged in #29417 to resolve merge conflicts



---

archive/issue_comments_574875.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#29417\"",
    "created_at": "2020-04-13T05:40:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574875",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#29417"



---

archive/issue_comments_574876.json:
```json
{
    "body": "<a id='comment:30'></a>\nAs far as I can tell, this is okay, but I am not enough of an expert to say definitively. I would appreciate a second opinion from someone who is more well-versed in the Sage build system to double-check.",
    "created_at": "2020-04-15T22:52:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574876",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:30'></a>
As far as I can tell, this is okay, but I am not enough of an expert to say definitively. I would appreciate a second opinion from someone who is more well-versed in the Sage build system to double-check.



---

archive/issue_comments_574877.json:
```json
{
    "body": "<a id='comment:31'></a>\nThe issue of comment 21 is not resolved yet",
    "created_at": "2020-04-15T23:01:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574877",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:31'></a>
The issue of comment 21 is not resolved yet



---

archive/issue_comments_574878.json:
```json
{
    "body": "<a id='comment:33'></a>\nAncient info on rebasing: https://groups.google.com/d/msg/sage-windows/ygK1kJm9p9w/x0ckGqo2ej4J",
    "created_at": "2020-04-17T03:38:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574878",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:33'></a>
Ancient info on rebasing: https://groups.google.com/d/msg/sage-windows/ygK1kJm9p9w/x0ckGqo2ej4J



---

archive/issue_comments_574879.json:
```json
{
    "body": "<a id='comment:34'></a>\nwell, yes, it was not clear whether rebasing must be done from outside of Cygwin shell, or not.\n\nI gather that we rebase within Cygwin.\n\nBy the way, it would be interesting to do testing  in Windows WSL...",
    "created_at": "2020-04-17T05:24:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574879",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:34'></a>
well, yes, it was not clear whether rebasing must be done from outside of Cygwin shell, or not.

I gather that we rebase within Cygwin.

By the way, it would be interesting to do testing  in Windows WSL...



---

archive/issue_comments_574880.json:
```json
{
    "body": "<a id='comment:35'></a>\nI'll give it another shot, doing exactly what is also done in sage-spkg",
    "created_at": "2020-04-17T06:31:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574880",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:35'></a>
I'll give it another shot, doing exactly what is also done in sage-spkg



---

archive/issue_comments_574881.json:
```json
{
    "body": "Changing commit from \"c08176edeb5871de7d7548c91944f3a3eaa5038d\" to \"ffdc97e0a8784971757c46eb8c3e8719e286b726\"",
    "created_at": "2020-04-17T06:52:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574881",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c08176edeb5871de7d7548c91944f3a3eaa5038d" to "ffdc97e0a8784971757c46eb8c3e8719e286b726"



---

archive/issue_comments_574882.json:
```json
{
    "body": "<a id='comment:36'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|\n|[faf0ed6](https://github.com/sagemath/sagetrac-mirror/commit/faf0ed6844c26f8f2c10f48ef28d10e1d6ad7a31)|`tox.ini: Another quoting fix`|\n|[aed3fb8](https://github.com/sagemath/sagetrac-mirror/commit/aed3fb8ac844d499696da2b164251d1b8afa4787)|`src/doc/en/developer/portability_testing.rst: Explain how to read [GitHub](GitHub) Actions page`|\n|[d39d627](https://github.com/sagemath/sagetrac-mirror/commit/d39d627cdf483437a2f7ee22bb5cd4603347f9d7)|`tox.yml [python3_xcode]: Install the package`|\n|[ba0c266](https://github.com/sagemath/sagetrac-mirror/commit/ba0c26646db41f60981f29d94797d0fbe9327e81)|`fixup`|\n|[9060d23](https://github.com/sagemath/sagetrac-mirror/commit/9060d237204d7a4ffadb7caf12baf0980d7c1e06)|`fixup`|\n|[b7bb418](https://github.com/sagemath/sagetrac-mirror/commit/b7bb418343ab34c77a10af6d0f725111ba780662)|`tox.yml [macos-python3_pythonorg]: Use sudo with installer`|\n|[4b19fdd](https://github.com/sagemath/sagetrac-mirror/commit/4b19fdddb58915430a203319d0386cabe1db7a70)|`Merge branch 't/29417/tox-ci-minor-fixes' into t/29403/ci_cygwin_yml__multi_stage_build`|\n|[55c8a48](https://github.com/sagemath/sagetrac-mirror/commit/55c8a48fa6990504afadb16486353f50874b381e)|`tox.yml: Use rebase.sh`|\n|[ffdc97e](https://github.com/sagemath/sagetrac-mirror/commit/ffdc97e0a8784971757c46eb8c3e8719e286b726)|`fixup merge`|",
    "created_at": "2020-04-17T06:52:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574882",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:36'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|
|[faf0ed6](https://github.com/sagemath/sagetrac-mirror/commit/faf0ed6844c26f8f2c10f48ef28d10e1d6ad7a31)|`tox.ini: Another quoting fix`|
|[aed3fb8](https://github.com/sagemath/sagetrac-mirror/commit/aed3fb8ac844d499696da2b164251d1b8afa4787)|`src/doc/en/developer/portability_testing.rst: Explain how to read [GitHub](GitHub) Actions page`|
|[d39d627](https://github.com/sagemath/sagetrac-mirror/commit/d39d627cdf483437a2f7ee22bb5cd4603347f9d7)|`tox.yml [python3_xcode]: Install the package`|
|[ba0c266](https://github.com/sagemath/sagetrac-mirror/commit/ba0c26646db41f60981f29d94797d0fbe9327e81)|`fixup`|
|[9060d23](https://github.com/sagemath/sagetrac-mirror/commit/9060d237204d7a4ffadb7caf12baf0980d7c1e06)|`fixup`|
|[b7bb418](https://github.com/sagemath/sagetrac-mirror/commit/b7bb418343ab34c77a10af6d0f725111ba780662)|`tox.yml [macos-python3_pythonorg]: Use sudo with installer`|
|[4b19fdd](https://github.com/sagemath/sagetrac-mirror/commit/4b19fdddb58915430a203319d0386cabe1db7a70)|`Merge branch 't/29417/tox-ci-minor-fixes' into t/29403/ci_cygwin_yml__multi_stage_build`|
|[55c8a48](https://github.com/sagemath/sagetrac-mirror/commit/55c8a48fa6990504afadb16486353f50874b381e)|`tox.yml: Use rebase.sh`|
|[ffdc97e](https://github.com/sagemath/sagetrac-mirror/commit/ffdc97e0a8784971757c46eb8c3e8719e286b726)|`fixup merge`|



---

archive/issue_comments_574883.json:
```json
{
    "body": "<a id='comment:37'></a>\nwith these multi-stage builds, where *.so get built at one place, and moved then somewhere esle, it could be that more rebasing is needed. In particular, I recall seeing and fixing rebase locations for Python modules being built.\n(Basically it was the issue that totally broke building Sage on Cygwin32, simply due to insufficient address space).",
    "created_at": "2020-04-17T07:27:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574883",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:37'></a>
with these multi-stage builds, where *.so get built at one place, and moved then somewhere esle, it could be that more rebasing is needed. In particular, I recall seeing and fixing rebase locations for Python modules being built.
(Basically it was the issue that totally broke building Sage on Cygwin32, simply due to insufficient address space).



---

archive/issue_comments_574884.json:
```json
{
    "body": "<a id='comment:38'></a>\nTesting at https://github.com/mkoeppe/sage/actions/runs/80516745",
    "created_at": "2020-04-17T07:30:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574884",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:38'></a>
Testing at https://github.com/mkoeppe/sage/actions/runs/80516745



---

archive/issue_comments_574885.json:
```json
{
    "body": "<a id='comment:39'></a>\nYes, I'm rebasing after unpacking `local` from the previous stages.",
    "created_at": "2020-04-17T07:31:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574885",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:39'></a>
Yes, I'm rebasing after unpacking `local` from the previous stages.



---

archive/issue_comments_574886.json:
```json
{
    "body": "<a id='comment:40'></a>\nI think it's working now, and we can see the real build errors again in `cygwin-standard`: matplotlib, rpy2, scipy (likely BLAS-related) https://github.com/mkoeppe/sage/runs/596536457",
    "created_at": "2020-04-17T21:19:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574886",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:40'></a>
I think it's working now, and we can see the real build errors again in `cygwin-standard`: matplotlib, rpy2, scipy (likely BLAS-related) https://github.com/mkoeppe/sage/runs/596536457



---

archive/issue_comments_574887.json:
```json
{
    "body": "Changing commit from \"ffdc97e0a8784971757c46eb8c3e8719e286b726\" to \"fc61002be19bf67d889c5e3262b1a7f5e6dec6dc\"",
    "created_at": "2020-04-17T23:45:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574887",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ffdc97e0a8784971757c46eb8c3e8719e286b726" to "fc61002be19bf67d889c5e3262b1a7f5e6dec6dc"



---

archive/issue_comments_574888.json:
```json
{
    "body": "<a id='comment:42'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|\n|[fc61002](https://github.com/sagemath/sagetrac-mirror/commit/fc61002be19bf67d889c5e3262b1a7f5e6dec6dc)|`ci-cygwin.yml: Package up SAGE_LOCAL/var/tmp/sage/build to avoid error with actions/upload-artifact`|",
    "created_at": "2020-04-17T23:45:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574888",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:42'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|
|[fc61002](https://github.com/sagemath/sagetrac-mirror/commit/fc61002be19bf67d889c5e3262b1a7f5e6dec6dc)|`ci-cygwin.yml: Package up SAGE_LOCAL/var/tmp/sage/build to avoid error with actions/upload-artifact`|



---

archive/issue_comments_574889.json:
```json
{
    "body": "<a id='comment:43'></a>\ntesting on https://github.com/dimpase/sage/actions/runs/81294070",
    "created_at": "2020-04-18T04:14:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574889",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:43'></a>
testing on https://github.com/dimpase/sage/actions/runs/81294070



---

archive/issue_comments_574890.json:
```json
{
    "body": "<a id='comment:44'></a>\nI cannot reproduce the matplotlib build error locally - even when I download and unpack stage-i-a and stage-i-b (standard) and configure against that.",
    "created_at": "2020-04-18T04:35:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574890",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:44'></a>
I cannot reproduce the matplotlib build error locally - even when I download and unpack stage-i-a and stage-i-b (standard) and configure against that.



---

archive/issue_comments_574891.json:
```json
{
    "body": "<a id='comment:45'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------|\n|[59ec460](https://github.com/sagemath/sagetrac-mirror/commit/59ec46022c49e35e90349f05812aff46c1166143)|`./configure --enable-experimental-packages --enable-download-from-upstream-url`|\n|[c9cf3cc](https://github.com/sagemath/sagetrac-mirror/commit/c9cf3cc586f2ef0d9c022cbc0e59cd035a48ab06)|`Merge branch 't/29392/__configure___enable_experimental_packages___enable_download_from_upstream_url' into t/29403/ci_cygwin_yml__multi_stage_build`|\n|[037f508](https://github.com/sagemath/sagetrac-mirror/commit/037f5085be90f4f225c30ce58e80ffdd89c0a882)|`tox.yml: Pass CONFIGURE_ARGS: --enable-experimental-packages --enable-download-from-upstream-url`|",
    "created_at": "2020-04-18T05:37:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574891",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:45'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------|
|[59ec460](https://github.com/sagemath/sagetrac-mirror/commit/59ec46022c49e35e90349f05812aff46c1166143)|`./configure --enable-experimental-packages --enable-download-from-upstream-url`|
|[c9cf3cc](https://github.com/sagemath/sagetrac-mirror/commit/c9cf3cc586f2ef0d9c022cbc0e59cd035a48ab06)|`Merge branch 't/29392/__configure___enable_experimental_packages___enable_download_from_upstream_url' into t/29403/ci_cygwin_yml__multi_stage_build`|
|[037f508](https://github.com/sagemath/sagetrac-mirror/commit/037f5085be90f4f225c30ce58e80ffdd89c0a882)|`tox.yml: Pass CONFIGURE_ARGS: --enable-experimental-packages --enable-download-from-upstream-url`|



---

archive/issue_comments_574892.json:
```json
{
    "body": "Changing commit from \"fc61002be19bf67d889c5e3262b1a7f5e6dec6dc\" to \"037f5085be90f4f225c30ce58e80ffdd89c0a882\"",
    "created_at": "2020-04-18T05:37:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574892",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "fc61002be19bf67d889c5e3262b1a7f5e6dec6dc" to "037f5085be90f4f225c30ce58e80ffdd89c0a882"



---

archive/issue_comments_574893.json:
```json
{
    "body": "Changing dependencies from \"#29417\" to \"#29417, #29392\"",
    "created_at": "2020-04-18T05:37:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574893",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29417" to "#29417, #29392"



---

archive/issue_comments_574894.json:
```json
{
    "body": "Changing commit from \"037f5085be90f4f225c30ce58e80ffdd89c0a882\" to \"998f02d703f4b0ed6127f3431874dbbc70d1f6c6\"",
    "created_at": "2020-04-18T05:40:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574894",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "037f5085be90f4f225c30ce58e80ffdd89c0a882" to "998f02d703f4b0ed6127f3431874dbbc70d1f6c6"



---

archive/issue_comments_574895.json:
```json
{
    "body": "<a id='comment:47'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------|\n|[998f02d](https://github.com/sagemath/sagetrac-mirror/commit/998f02d703f4b0ed6127f3431874dbbc70d1f6c6)|`ci-cygwin.yml: Fixup for: Package up SAGE_LOCAL/var/tmp/sage/build`|",
    "created_at": "2020-04-18T05:40:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574895",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:47'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------|
|[998f02d](https://github.com/sagemath/sagetrac-mirror/commit/998f02d703f4b0ed6127f3431874dbbc70d1f6c6)|`ci-cygwin.yml: Fixup for: Package up SAGE_LOCAL/var/tmp/sage/build`|



---

archive/issue_comments_574896.json:
```json
{
    "body": "Changing commit from \"998f02d703f4b0ed6127f3431874dbbc70d1f6c6\" to \"d6bf4b1db50e2e8ae7731a4246a6d2e8caa8b791\"",
    "created_at": "2020-04-18T07:08:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574896",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "998f02d703f4b0ed6127f3431874dbbc70d1f6c6" to "d6bf4b1db50e2e8ae7731a4246a6d2e8caa8b791"



---

archive/issue_comments_574897.json:
```json
{
    "body": "<a id='comment:48'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------|\n|[d6bf4b1](https://github.com/sagemath/sagetrac-mirror/commit/d6bf4b1db50e2e8ae7731a4246a6d2e8caa8b791)|`ci-cygwin.yml: Install standard system packages also for 'stndard-python2'`|",
    "created_at": "2020-04-18T07:08:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574897",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:48'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------|
|[d6bf4b1](https://github.com/sagemath/sagetrac-mirror/commit/d6bf4b1db50e2e8ae7731a4246a6d2e8caa8b791)|`ci-cygwin.yml: Install standard system packages also for 'stndard-python2'`|



---

archive/issue_comments_574898.json:
```json
{
    "body": "<a id='comment:49'></a>\nhow does one need to modify ~/.github/ to make GH Actions only run cygwin tests?",
    "created_at": "2020-04-18T09:37:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574898",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:49'></a>
how does one need to modify ~/.github/ to make GH Actions only run cygwin tests?



---

archive/issue_comments_574899.json:
```json
{
    "body": "<a id='comment:50'></a>\nReplying to [dimpase](#comment%3A49):\n> how does one need to modify ~/.github/ to make GH Actions only run cygwin tests?\n\n\nJust delete the file tox.yml",
    "created_at": "2020-04-18T15:57:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574899",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:50'></a>
Replying to [dimpase](#comment%3A49):
> how does one need to modify ~/.github/ to make GH Actions only run cygwin tests?


Just delete the file tox.yml



---

archive/issue_comments_574900.json:
```json
{
    "body": "<a id='comment:51'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------|\n|[2779e24](https://github.com/sagemath/sagetrac-mirror/commit/2779e2446a37b51e49906adc5d39dd459ab13c88)|`ci-cygwin.yml: Another fixup for: Package up SAGE_LOCAL/var/tmp/sage/build`|",
    "created_at": "2020-04-18T16:36:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574900",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:51'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------|
|[2779e24](https://github.com/sagemath/sagetrac-mirror/commit/2779e2446a37b51e49906adc5d39dd459ab13c88)|`ci-cygwin.yml: Another fixup for: Package up SAGE_LOCAL/var/tmp/sage/build`|



---

archive/issue_comments_574901.json:
```json
{
    "body": "Changing commit from \"d6bf4b1db50e2e8ae7731a4246a6d2e8caa8b791\" to \"2779e2446a37b51e49906adc5d39dd459ab13c88\"",
    "created_at": "2020-04-18T16:36:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574901",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d6bf4b1db50e2e8ae7731a4246a6d2e8caa8b791" to "2779e2446a37b51e49906adc5d39dd459ab13c88"



---

archive/issue_comments_574902.json:
```json
{
    "body": "Changing commit from \"2779e2446a37b51e49906adc5d39dd459ab13c88\" to \"27ddea32cbd2c93d98e0e67942dd6b3fbd9f3a1b\"",
    "created_at": "2020-04-19T03:30:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574902",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2779e2446a37b51e49906adc5d39dd459ab13c88" to "27ddea32cbd2c93d98e0e67942dd6b3fbd9f3a1b"



---

archive/issue_comments_574903.json:
```json
{
    "body": "<a id='comment:52'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|\n|[27ddea3](https://github.com/sagemath/sagetrac-mirror/commit/27ddea32cbd2c93d98e0e67942dd6b3fbd9f3a1b)|`build/bin/sage-logger: Back out an experimental change`|",
    "created_at": "2020-04-19T03:30:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574903",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:52'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|
|[27ddea3](https://github.com/sagemath/sagetrac-mirror/commit/27ddea32cbd2c93d98e0e67942dd6b3fbd9f3a1b)|`build/bin/sage-logger: Back out an experimental change`|



---

archive/issue_comments_574904.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Dima Pasechnik\"",
    "created_at": "2020-04-19T23:47:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574904",
    "user": "https://github.com/dimpase"
}
```

Changing reviewer from "" to "Dima Pasechnik"



---

archive/issue_comments_574905.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-04-19T23:47:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574905",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_574906.json:
```json
{
    "body": "<a id='comment:54'></a>\nThanks!",
    "created_at": "2020-04-20T00:30:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574906",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:54'></a>
Thanks!



---

archive/issue_events_084548.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-23T22:32:47Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29403#event-84548"
}
```



---

archive/issue_comments_574907.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-04-23T22:32:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574907",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_574908.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/ci_cygwin_yml__multi_stage_build\" to \"27ddea32cbd2c93d98e0e67942dd6b3fbd9f3a1b\"",
    "created_at": "2020-04-23T22:32:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29403",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29403#issuecomment-574908",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/ci_cygwin_yml__multi_stage_build" to "27ddea32cbd2c93d98e0e67942dd6b3fbd9f3a1b"
