# Issue 29171: Move giacpy_sage into sage source code

archive/issues_028934.json:
```json
{
    "body": "As discussed on [this sage-devel thread](https://groups.google.com/forum/#!topic/sage-devel/uYXGzG_py28), we propose to move the Cython code that used to be in the optional package `giacpy_sage` into `sage/libs/giac/`.\n\nCC:  @frederichan-IMJPRG @mwageringel @slel @kiwifb\n\nReviewer: Matthias Koeppe, Frederic Han, Dima Pasechnik\n\nAuthor: Vincent Delecroix, Matthias Koeppe, Frederic Han\n\nBranch: 911ddfbe2fd809473e82eaf0bac1a4c50858d161\n\nDependencies: #30277\n\nCommit: 911ddfbe2fd809473e82eaf0bac1a4c50858d161\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29171\n\n",
    "closed_at": "2020-08-23T17:51:11Z",
    "created_at": "2020-02-09T11:03:36Z",
    "labels": [
        "component: interfaces",
        "critical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Move giacpy_sage into sage source code",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29171",
    "user": "https://github.com/videlec"
}
```
As discussed on [this sage-devel thread](https://groups.google.com/forum/#!topic/sage-devel/uYXGzG_py28), we propose to move the Cython code that used to be in the optional package `giacpy_sage` into `sage/libs/giac/`.

CC:  @frederichan-IMJPRG @mwageringel @slel @kiwifb

Reviewer: Matthias Koeppe, Frederic Han, Dima Pasechnik

Author: Vincent Delecroix, Matthias Koeppe, Frederic Han

Branch: 911ddfbe2fd809473e82eaf0bac1a4c50858d161

Dependencies: #30277

Commit: 911ddfbe2fd809473e82eaf0bac1a4c50858d161

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29171





---

archive/issue_comments_409161.json:
```json
{
    "body": "<a id='comment:1'></a>New commits:",
    "created_at": "2020-02-09T11:05:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409161",
    "user": "https://github.com/videlec"
}
```

<a id='comment:1'></a>New commits:



---

archive/issue_comments_409162.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-02-09T11:06:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409162",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_409163.json:
```json
{
    "body": "<a id='comment:3'></a>Thank you.\nThe doc you want for a giac keyword (Ex: gbasis) is avaible like this:\n\n```\nsage: from sage.libs.giac.giac import *\nsage: libgiac.gbasis._help()\nsage: libgiac.gbasis._sage_doc_()\n```\nIndeed \n`libgiac.gbasis?` doesn't give the good help string. \nNB: you removed the def help(self):\nso now libgiac.gbasis.help()   crashes. You should also remove the property help or use _help in it.",
    "created_at": "2020-02-09T23:48:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409163",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:3'></a>Thank you.
The doc you want for a giac keyword (Ex: gbasis) is avaible like this:

```
sage: from sage.libs.giac.giac import *
sage: libgiac.gbasis._help()
sage: libgiac.gbasis._sage_doc_()
```
Indeed 
`libgiac.gbasis?` doesn't give the good help string. 
NB: you removed the def help(self):
so now libgiac.gbasis.help()   crashes. You should also remove the property help or use _help in it.



---

archive/issue_comments_409164.json:
```json
{
    "body": "<a id='comment:4'></a>NB: we should think about the new name you chose. Ex backward compatibility or confusions?\n\nEx: in the past I had often to say: \"This  already appears in giac, it doesn't come from giacpy_sage\".\ngiac is already the name of the C++ library, the name of the external giac program and the pexpect interface...",
    "created_at": "2020-02-10T00:06:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409164",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:4'></a>NB: we should think about the new name you chose. Ex backward compatibility or confusions?

Ex: in the past I had often to say: "This  already appears in giac, it doesn't come from giacpy_sage".
giac is already the name of the C++ library, the name of the external giac program and the pexpect interface...



---

archive/issue_events_074080.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29171#event-74080"
}
```



---

archive/issue_comments_409165.json:
```json
{
    "body": "<a id='comment:5'></a>Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.",
    "created_at": "2020-04-14T19:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409165",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.



---

archive/issue_comments_409166.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2020-08-10T02:30:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409166",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_comments_409167.json:
```json
{
    "body": "<a id='comment:8'></a>Currently `giacpy_sage` seems to try to support older Sage versions (see https://gitlab.math.univ-paris-diderot.fr/han/giacpy-sage/blob/master/setup.py). \n\nFrederic, is this something important to preserve, or is it fine to merge these files into Sage?",
    "created_at": "2020-08-10T17:57:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409167",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>Currently `giacpy_sage` seems to try to support older Sage versions (see https://gitlab.math.univ-paris-diderot.fr/han/giacpy-sage/blob/master/setup.py). 

Frederic, is this something important to preserve, or is it fine to merge these files into Sage?



---

archive/issue_comments_409168.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2020-08-10T18:41:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409168",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_409169.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [comment:8 mkoeppe]:\n> Currently `giacpy_sage` seems to try to support older Sage versions (see https://gitlab.math.univ-paris-diderot.fr/han/giacpy-sage/blob/master/setup.py). \n> \n> Frederic, is this something important to preserve, or is it fine to merge these files into Sage?\n> \n\nNo I think it this situation where giacpy_sage is not a package anymore it is not important to keep backward comptatibility. I think here it is better to just drop the giacpy_sage setup.py and let sage build it via the entry in module.py as vincent did in this branch.",
    "created_at": "2020-08-10T19:36:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409169",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:10'></a>Replying to [comment:8 mkoeppe]:
> Currently `giacpy_sage` seems to try to support older Sage versions (see https://gitlab.math.univ-paris-diderot.fr/han/giacpy-sage/blob/master/setup.py). 
> 
> Frederic, is this something important to preserve, or is it fine to merge these files into Sage?
> 

No I think it this situation where giacpy_sage is not a package anymore it is not important to keep backward comptatibility. I think here it is better to just drop the giacpy_sage setup.py and let sage build it via the entry in module.py as vincent did in this branch.



---

archive/issue_comments_409170.json:
```json
{
    "body": "<a id='comment:11'></a>Thanks for the quick reaction. Yes, we would just take the Cython files. \nPart of my question, I guess, was to make sure that there is no plan to continue development in https://gitlab.math.univ-paris-diderot.fr/han/giacpy-sage/ after we merge the Cython files into Sage. (That would be a fork and increase, not decrease, maintenance burden.)",
    "created_at": "2020-08-10T19:51:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409170",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>Thanks for the quick reaction. Yes, we would just take the Cython files. 
Part of my question, I guess, was to make sure that there is no plan to continue development in https://gitlab.math.univ-paris-diderot.fr/han/giacpy-sage/ after we merge the Cython files into Sage. (That would be a fork and increase, not decrease, maintenance burden.)



---

archive/issue_comments_409171.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-08-11T00:28:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409171",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_409172.json:
```json
{
    "body": "<a id='comment:14'></a>Rebased on 9.2.beta8",
    "created_at": "2020-08-11T00:28:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409172",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>Rebased on 9.2.beta8



---

archive/issue_comments_409173.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2020-08-11T01:15:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409173",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_409174.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2020-08-11T01:39:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409174",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_409175.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-11T01:52:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409175",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_409176.json:
```json
{
    "body": "<a id='comment:20'></a>\n```\n[sagelib-9.2.beta8] In file included from build/cythonized/sage/libs/giac/giac.cpp:7695:\n[sagelib-9.2.beta8] build/cythonized/sage/libs/giac/misc.h:104:12: error: implicit instantiation of undefined template 'std::__1::basic_ofstream<char, std::__1::char_traits<char> >'\n[sagelib-9.2.beta8]   ofstream of(filename.c_str());\n[sagelib-9.2.beta8]            ^\n[sagelib-9.2.beta8] /Library/Developer/CommandLineTools/usr/bin/../include/c++/v1/iosfwd:146:32: note: template is declared here\n[sagelib-9.2.beta8]     class _LIBCPP_TEMPLATE_VIS basic_ofstream;\n[sagelib-9.2.beta8]                                ^\n[sagelib-9.2.beta8] In file included from build/cythonized/sage/libs/giac/giac.cpp:7695:\n[sagelib-9.2.beta8] build/cythonized/sage/libs/giac/misc.h:110:12: error: implicit instantiation of undefined template 'std::__1::basic_ifstream<char, std::__1::char_traits<char> >'\n[sagelib-9.2.beta8]   ifstream f(filename.c_str());\n[sagelib-9.2.beta8]            ^\n[sagelib-9.2.beta8] /Library/Developer/CommandLineTools/usr/bin/../include/c++/v1/iosfwd:144:32: note: template is declared here\n[sagelib-9.2.beta8]     class _LIBCPP_TEMPLATE_VIS basic_ifstream;\n[sagelib-9.2.beta8]                                ^\n```",
    "created_at": "2020-08-11T01:52:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409176",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'></a>
```
[sagelib-9.2.beta8] In file included from build/cythonized/sage/libs/giac/giac.cpp:7695:
[sagelib-9.2.beta8] build/cythonized/sage/libs/giac/misc.h:104:12: error: implicit instantiation of undefined template 'std::__1::basic_ofstream<char, std::__1::char_traits<char> >'
[sagelib-9.2.beta8]   ofstream of(filename.c_str());
[sagelib-9.2.beta8]            ^
[sagelib-9.2.beta8] /Library/Developer/CommandLineTools/usr/bin/../include/c++/v1/iosfwd:146:32: note: template is declared here
[sagelib-9.2.beta8]     class _LIBCPP_TEMPLATE_VIS basic_ofstream;
[sagelib-9.2.beta8]                                ^
[sagelib-9.2.beta8] In file included from build/cythonized/sage/libs/giac/giac.cpp:7695:
[sagelib-9.2.beta8] build/cythonized/sage/libs/giac/misc.h:110:12: error: implicit instantiation of undefined template 'std::__1::basic_ifstream<char, std::__1::char_traits<char> >'
[sagelib-9.2.beta8]   ifstream f(filename.c_str());
[sagelib-9.2.beta8]            ^
[sagelib-9.2.beta8] /Library/Developer/CommandLineTools/usr/bin/../include/c++/v1/iosfwd:144:32: note: template is declared here
[sagelib-9.2.beta8]     class _LIBCPP_TEMPLATE_VIS basic_ifstream;
[sagelib-9.2.beta8]                                ^
```



---

archive/issue_comments_409177.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-11T01:55:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409177",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_409178.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-08-11T02:02:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409178",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_409179.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-11T02:33:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409179",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_409180.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-11T02:38:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409180",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_409181.json:
```json
{
    "body": "<a id='comment:25'></a>Several errors remain -- expert help is needed\n\n```\nsage -t --random-seed=0 src/sage/libs/giac/giac.pyx\n**********************************************************************\nFile \"src/sage/libs/giac/giac.pyx\", line 30, in sage.libs.giac.giac\nFailed example:\n    from sage.libs.giac.giac import *\nExpected nothing\nGot:\n    Help file /Applications/usr/share/giac/doc/fr/aide_cas not found\n    Added 0 synonyms\n**********************************************************************\nFile \"src/sage/libs/giac/giac.pyx\", line 980, in sage.libs.giac.giac.encstring23.GiacSetting.Pygen.__getitem__\nFailed example:\n    l[0]\nExpected:\n    Traceback (most recent call last):\n      File \"<stdin>\", line 1, in <module>\n    ...\n    IndexError: list index 0 out of range\nGot:\n    <BLANKLINE>\n    Traceback (most recent call last):\n      File \"sage/libs/giac/giac.pyx\", line 996, in sage.libs.giac.giac.Pygen.__getitem__ (build/cythonized/sage/libs/giac/giac.cpp:12218)\n        result=self.gptr[0][<int>i]\n    RuntimeError: Index outside range : 0, vector size is 0, syntax compatibility mode xcas\n     Error: Invalid dimension\n    <BLANKLINE>\n    During handling of the above exception, another exception occurred:\n    <BLANKLINE>\n    Traceback (most recent call last):\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 715, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1139, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.libs.giac.giac.encstring23.GiacSetting.Pygen.__getitem__[11]>\", line 1, in <module>\n        l[Integer(0)]\n      File \"sage/libs/giac/giac.pyx\", line 1000, in sage.libs.giac.giac.Pygen.__getitem__ (build/cythonized/sage/libs/giac/giac.cpp:12285)\n        raise RuntimeError\n    RuntimeError\n**********************************************************************\nFile \"src/sage/libs/giac/giac.pyx\", line 985, in sage.libs.giac.giac.encstring23.GiacSetting.Pygen.__getitem__\nFailed example:\n    sig_on_count() # check sig_on/off pairings (virtual doctest)\nExpected:\n    0\nGot:\n    1\n**********************************************************************\n```",
    "created_at": "2020-08-11T02:40:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409181",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'></a>Several errors remain -- expert help is needed

```
sage -t --random-seed=0 src/sage/libs/giac/giac.pyx
**********************************************************************
File "src/sage/libs/giac/giac.pyx", line 30, in sage.libs.giac.giac
Failed example:
    from sage.libs.giac.giac import *
Expected nothing
Got:
    Help file /Applications/usr/share/giac/doc/fr/aide_cas not found
    Added 0 synonyms
**********************************************************************
File "src/sage/libs/giac/giac.pyx", line 980, in sage.libs.giac.giac.encstring23.GiacSetting.Pygen.__getitem__
Failed example:
    l[0]
Expected:
    Traceback (most recent call last):
      File "<stdin>", line 1, in <module>
    ...
    IndexError: list index 0 out of range
Got:
    <BLANKLINE>
    Traceback (most recent call last):
      File "sage/libs/giac/giac.pyx", line 996, in sage.libs.giac.giac.Pygen.__getitem__ (build/cythonized/sage/libs/giac/giac.cpp:12218)
        result=self.gptr[0][<int>i]
    RuntimeError: Index outside range : 0, vector size is 0, syntax compatibility mode xcas
     Error: Invalid dimension
    <BLANKLINE>
    During handling of the above exception, another exception occurred:
    <BLANKLINE>
    Traceback (most recent call last):
      File "/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 715, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1139, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.libs.giac.giac.encstring23.GiacSetting.Pygen.__getitem__[11]>", line 1, in <module>
        l[Integer(0)]
      File "sage/libs/giac/giac.pyx", line 1000, in sage.libs.giac.giac.Pygen.__getitem__ (build/cythonized/sage/libs/giac/giac.cpp:12285)
        raise RuntimeError
    RuntimeError
**********************************************************************
File "src/sage/libs/giac/giac.pyx", line 985, in sage.libs.giac.giac.encstring23.GiacSetting.Pygen.__getitem__
Failed example:
    sig_on_count() # check sig_on/off pairings (virtual doctest)
Expected:
    0
Got:
    1
**********************************************************************
```



---

archive/issue_events_074081.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-12T20:34:02Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29171#event-74081"
}
```



---

archive/issue_events_074082.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-12T20:34:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29171#event-74082"
}
```



---

archive/issue_comments_409182.json:
```json
{
    "body": "<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-14T14:31:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409182",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_409183.json:
```json
{
    "body": "<a id='comment:28'></a>NB: the first time that giacpy is loaded the C++ library  outputs an OS dependant message so we need to put a `# random` flag in the doctests at the first import\n\nI have modified giacpy __len__ to work with 1.5.0.87 whatever if we patch it or not.",
    "created_at": "2020-08-14T14:49:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409183",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:28'></a>NB: the first time that giacpy is loaded the C++ library  outputs an OS dependant message so we need to put a `# random` flag in the doctests at the first import

I have modified giacpy __len__ to work with 1.5.0.87 whatever if we patch it or not.



---

archive/issue_comments_409184.json:
```json
{
    "body": "<a id='comment:29'></a>Does this also work with earlier 1.5.0.x? Then perhaps we can go forward with this ticket without the upgrade in #29552",
    "created_at": "2020-08-14T15:22:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409184",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'></a>Does this also work with earlier 1.5.0.x? Then perhaps we can go forward with this ticket without the upgrade in #29552



---

archive/issue_comments_409185.json:
```json
{
    "body": "<a id='comment:30'></a>Replying to [comment:4 frederichan]:\n> NB: we should think about the new name you chose. Ex backward compatibility or confusions?\n> \n> Ex: in the past I had often to say: \"This  already appears in giac, it doesn't come from giacpy_sage\".\n> giac is already the name of the C++ library, the name of the external giac program and the pexpect interface...\n\n\nSorry I missed this comment. Are you referring to the name of the module, `sage.libs.giac`?",
    "created_at": "2020-08-14T15:25:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409185",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:30'></a>Replying to [comment:4 frederichan]:
> NB: we should think about the new name you chose. Ex backward compatibility or confusions?
> 
> Ex: in the past I had often to say: "This  already appears in giac, it doesn't come from giacpy_sage".
> giac is already the name of the C++ library, the name of the external giac program and the pexpect interface...


Sorry I missed this comment. Are you referring to the name of the module, `sage.libs.giac`?



---

archive/issue_comments_409186.json:
```json
{
    "body": "<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-08-14T17:01:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409186",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_409187.json:
```json
{
    "body": "<a id='comment:32'></a>Replying to [comment:29 mkoeppe]:\n> Does this also work with earlier 1.5.0.x? Then perhaps we can go forward with this ticket without the upgrade in #29552\n\n\nOK, I have rebased it, dropping the merge of the upgrade ticket #29552.\n\nThis seems to work.",
    "created_at": "2020-08-14T17:02:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409187",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:32'></a>Replying to [comment:29 mkoeppe]:
> Does this also work with earlier 1.5.0.x? Then perhaps we can go forward with this ticket without the upgrade in #29552


OK, I have rebased it, dropping the merge of the upgrade ticket #29552.

This seems to work.



---

archive/issue_events_074083.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-14T17:02:11Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29171#event-74083"
}
```



---

archive/issue_events_074084.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-14T17:02:11Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29171#event-74084"
}
```



---

archive/issue_comments_409188.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-08-14T17:02:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409188",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_409189.json:
```json
{
    "body": "<a id='comment:36'></a>It would probably be good to add some docstrings, for example for `GiacInstance`...",
    "created_at": "2020-08-14T17:31:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409189",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:36'></a>It would probably be good to add some docstrings, for example for `GiacInstance`...



---

archive/issue_comments_409190.json:
```json
{
    "body": "<a id='comment:37'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2020-08-15T12:01:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409190",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:37'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_409191.json:
```json
{
    "body": "<a id='comment:38'></a>This seems to work well.\nWe need another reviewer on this ticket...",
    "created_at": "2020-08-15T21:20:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409191",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:38'></a>This seems to work well.
We need another reviewer on this ticket...



---

archive/issue_comments_409192.json:
```json
{
    "body": "<a id='comment:40'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-16T07:02:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409192",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:40'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_409193.json:
```json
{
    "body": "<a id='comment:41'></a>Can we import the  libgiac function from sage/libs/all.py such that it is avaiable in a similar way as libgap?\nthe problem if I add `lazy_import('sage.libs.giac.giac', 'libgiac')`\nis that the first time one type libgiac(2) the user might be confused by the loading message of the giac library:\n\n```\nsage: libgiac(2)                                                                                              \n// Giac share root-directory:/home/fred-dev/sage/develop/sage.new/local/share/giac/\n// Giac share root-directory:/home/fred-dev/sage/develop/sage.new/local/share/giac/\nHelp file /home/fred-dev/sage/develop/sage.new/local/share/giac/doc/fr/aide_cas not found\nAdded 0 synonyms\n2\n```\n\nis it better to not use lazy_import or to force the loading at startup  or just keep this message during the first use of libgiac?",
    "created_at": "2020-08-16T07:36:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409193",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:41'></a>Can we import the  libgiac function from sage/libs/all.py such that it is avaiable in a similar way as libgap?
the problem if I add `lazy_import('sage.libs.giac.giac', 'libgiac')`
is that the first time one type libgiac(2) the user might be confused by the loading message of the giac library:

```
sage: libgiac(2)                                                                                              
// Giac share root-directory:/home/fred-dev/sage/develop/sage.new/local/share/giac/
// Giac share root-directory:/home/fred-dev/sage/develop/sage.new/local/share/giac/
Help file /home/fred-dev/sage/develop/sage.new/local/share/giac/doc/fr/aide_cas not found
Added 0 synonyms
2
```

is it better to not use lazy_import or to force the loading at startup  or just keep this message during the first use of libgiac?



---

archive/issue_comments_409194.json:
```json
{
    "body": "<a id='comment:42'></a>I have used this file [https://gitlab.math.univ-paris-diderot.fr/han/giacpy-sage/blob/master/mkkeywords.py](https://gitlab.math.univ-paris-diderot.fr/han/giacpy-sage/blob/master/mkkeywords.py)  to create the auto-methods.pxi file. But I don't know where to put it.\nIt can be usefull for maintenance but it is not used by giacpy. Building auto-methods.pxi is quite long and too dangerous to be rebuilt on the fly. (not implementing a new giac keyword doesn\"t break the giacpy built but some new giac keywords often cause trouble)\n\nalso how should we deal with backward compatibility?\nExample: in snappy tree i see some: `from giacpy_sage import libgiac` here\n[https://bitbucket.org/mgoerner/snappy/src/default/dev/extended_ptolemy/giac_helper.py](https://bitbucket.org/mgoerner/snappy/src/default/dev/extended_ptolemy/giac_helper.py)",
    "created_at": "2020-08-16T08:48:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409194",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:42'></a>I have used this file [https://gitlab.math.univ-paris-diderot.fr/han/giacpy-sage/blob/master/mkkeywords.py](https://gitlab.math.univ-paris-diderot.fr/han/giacpy-sage/blob/master/mkkeywords.py)  to create the auto-methods.pxi file. But I don't know where to put it.
It can be usefull for maintenance but it is not used by giacpy. Building auto-methods.pxi is quite long and too dangerous to be rebuilt on the fly. (not implementing a new giac keyword doesn"t break the giacpy built but some new giac keywords often cause trouble)

also how should we deal with backward compatibility?
Example: in snappy tree i see some: `from giacpy_sage import libgiac` here
[https://bitbucket.org/mgoerner/snappy/src/default/dev/extended_ptolemy/giac_helper.py](https://bitbucket.org/mgoerner/snappy/src/default/dev/extended_ptolemy/giac_helper.py)



---

archive/issue_comments_409195.json:
```json
{
    "body": "<a id='comment:43'></a>Replying to [comment:42 frederichan]:\n> I have used this file [https://gitlab.math.univ-paris-diderot.fr/han/giacpy-sage/blob/master/mkkeywords.py](https://gitlab.math.univ-paris-diderot.fr/han/giacpy-sage/blob/master/mkkeywords.py)  to create the auto-methods.pxi file. But I don't know where to put it.\n> It can be usefull for maintenance but it is not used by giacpy. Building auto-methods.pxi is quite long and too dangerous to be rebuilt on the fly. (not implementing a new giac keyword doesn\"t break the giacpy built but some new giac keywords often cause trouble)\n\n\nI think `src/sage_setup/autogen/` is the right place for that. Include comments like the above that explain why it's not called automatically.",
    "created_at": "2020-08-16T12:57:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409195",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:43'></a>Replying to [comment:42 frederichan]:
> I have used this file [https://gitlab.math.univ-paris-diderot.fr/han/giacpy-sage/blob/master/mkkeywords.py](https://gitlab.math.univ-paris-diderot.fr/han/giacpy-sage/blob/master/mkkeywords.py)  to create the auto-methods.pxi file. But I don't know where to put it.
> It can be usefull for maintenance but it is not used by giacpy. Building auto-methods.pxi is quite long and too dangerous to be rebuilt on the fly. (not implementing a new giac keyword doesn"t break the giacpy built but some new giac keywords often cause trouble)


I think `src/sage_setup/autogen/` is the right place for that. Include comments like the above that explain why it's not called automatically.



---

archive/issue_comments_409196.json:
```json
{
    "body": "<a id='comment:44'></a>Replying to [comment:41 frederichan]:\n> Can we import the  libgiac function from sage/libs/all.py such that it is avaiable in a similar way as libgap?\n\n\nYes, this is a good idea - it would match `libgap` and `maxima_calculus`, which are available too.\n\n> the problem if I add `lazy_import('sage.libs.giac.giac', 'libgiac')`\n> is that the first time one type libgiac(2) the user might be confused by the loading message of the giac library [...]:\n\n\nThat's not a big problem. \n> sage: libgiac(2)                                                                                              \n> // Giac share root-directory:/home/fred-dev/sage/develop/sage.new/local/share/giac/\n> // Giac share root-directory:/home/fred-dev/sage/develop/sage.new/local/share/giac/\n\n\nPerhaps open an issue with upstream to reduce verbosity in library mode?\n\n> Help file /home/fred-dev/sage/develop/sage.new/local/share/giac/doc/fr/aide_cas not found\n\n\nThere's something wrong with our installation, as mentioned in #29552\n\n> is it better to not use lazy_import or to force the loading at startup \n\n\nNo, definitely not. We don't want to load it at startup.",
    "created_at": "2020-08-16T13:08:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409196",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:44'></a>Replying to [comment:41 frederichan]:
> Can we import the  libgiac function from sage/libs/all.py such that it is avaiable in a similar way as libgap?


Yes, this is a good idea - it would match `libgap` and `maxima_calculus`, which are available too.

> the problem if I add `lazy_import('sage.libs.giac.giac', 'libgiac')`
> is that the first time one type libgiac(2) the user might be confused by the loading message of the giac library [...]:


That's not a big problem. 
> sage: libgiac(2)                                                                                              
> // Giac share root-directory:/home/fred-dev/sage/develop/sage.new/local/share/giac/
> // Giac share root-directory:/home/fred-dev/sage/develop/sage.new/local/share/giac/


Perhaps open an issue with upstream to reduce verbosity in library mode?

> Help file /home/fred-dev/sage/develop/sage.new/local/share/giac/doc/fr/aide_cas not found


There's something wrong with our installation, as mentioned in #29552

> is it better to not use lazy_import or to force the loading at startup 


No, definitely not. We don't want to load it at startup.



---

archive/issue_comments_409197.json:
```json
{
    "body": "<a id='comment:45'></a>Replying to [comment:42 frederichan]:\n> also how should we deal with backward compatibility?\n> Example: in snappy tree i see some: `from giacpy_sage import libgiac` here\n> [https://bitbucket.org/mgoerner/snappy/src/default/dev/extended_ptolemy/giac_helper.py](https://bitbucket.org/mgoerner/snappy/src/default/dev/extended_ptolemy/giac_helper.py)\n\n\nI would suggest that we don't do anything, leaving it to the user libraries to add some try/except to their imports.",
    "created_at": "2020-08-16T13:17:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409197",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:45'></a>Replying to [comment:42 frederichan]:
> also how should we deal with backward compatibility?
> Example: in snappy tree i see some: `from giacpy_sage import libgiac` here
> [https://bitbucket.org/mgoerner/snappy/src/default/dev/extended_ptolemy/giac_helper.py](https://bitbucket.org/mgoerner/snappy/src/default/dev/extended_ptolemy/giac_helper.py)


I would suggest that we don't do anything, leaving it to the user libraries to add some try/except to their imports.



---

archive/issue_comments_409198.json:
```json
{
    "body": "<a id='comment:46'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-17T09:11:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409198",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:46'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_409199.json:
```json
{
    "body": "<a id='comment:47'></a>Ok so I have added giacpy-mkeywords.py in src/sage_setup/autogen and added a lazy import.\nabout the message\n`Help file /Applications/usr/share/giac/doc/en/aide_cas not found`\nI don't think that it is a broken installation. This text file have a builtin version in the library. I think it is only usefull if you want to overide the builtin version without recompiling giac.\nEx: if in icas I do `?smith` I have the same information as in share/giac/doc/aide_cas",
    "created_at": "2020-08-17T09:38:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409199",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:47'></a>Ok so I have added giacpy-mkeywords.py in src/sage_setup/autogen and added a lazy import.
about the message
`Help file /Applications/usr/share/giac/doc/en/aide_cas not found`
I don't think that it is a broken installation. This text file have a builtin version in the library. I think it is only usefull if you want to overide the builtin version without recompiling giac.
Ex: if in icas I do `?smith` I have the same information as in share/giac/doc/aide_cas



---

archive/issue_comments_409200.json:
```json
{
    "body": "<a id='comment:48'></a>Replying to [comment:47 frederichan]:\n> Ok so I have added giacpy-mkeywords.py in src/sage_setup/autogen and added a lazy import.\n\n\nLooks great.\n\n> about the message\n> `Help file /Applications/usr/share/giac/doc/en/aide_cas not found`\n> I don't think that it is a broken installation. This text file have a builtin version in the library. I think it is only usefull if you want to overide the builtin version without recompiling giac.\n> Ex: if in icas I do `?smith` I have the same information as in share/giac/doc/aide_cas \n\n\nThanks for the information. It's just that it looks like an error message, and moreover the path (`/Applications/usr...`) is really strange and is unrelated to the actual installation location of giac in sage.\n\nPerhaps upstream could add a way to suppress these messages?",
    "created_at": "2020-08-17T18:09:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409200",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:48'></a>Replying to [comment:47 frederichan]:
> Ok so I have added giacpy-mkeywords.py in src/sage_setup/autogen and added a lazy import.


Looks great.

> about the message
> `Help file /Applications/usr/share/giac/doc/en/aide_cas not found`
> I don't think that it is a broken installation. This text file have a builtin version in the library. I think it is only usefull if you want to overide the builtin version without recompiling giac.
> Ex: if in icas I do `?smith` I have the same information as in share/giac/doc/aide_cas 


Thanks for the information. It's just that it looks like an error message, and moreover the path (`/Applications/usr...`) is really strange and is unrelated to the actual installation location of giac in sage.

Perhaps upstream could add a way to suppress these messages?



---

archive/issue_comments_409201.json:
```json
{
    "body": "<a id='comment:49'></a>Ready for \"positive review\" from my side...",
    "created_at": "2020-08-17T18:10:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409201",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:49'></a>Ready for "positive review" from my side...



---

archive/issue_comments_409202.json:
```json
{
    "body": "<a id='comment:50'></a>So do I. (I know that there is room for improvement in the speed of evaluation of functions as vincent suggested in its first branch but it would not be a minor change. I'd rather in a first step keep things close to the giacpy_sage package to see if there are problems in the migration, and improve later with a list of functions that wants a direct implementation for speed.)",
    "created_at": "2020-08-18T09:44:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409202",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:50'></a>So do I. (I know that there is room for improvement in the speed of evaluation of functions as vincent suggested in its first branch but it would not be a minor change. I'd rather in a first step keep things close to the giacpy_sage package to see if there are problems in the migration, and improve later with a list of functions that wants a direct implementation for speed.)



---

archive/issue_comments_409203.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-08-18T13:32:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409203",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_409204.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-08-19T22:17:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409204",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_409205.json:
```json
{
    "body": "<a id='comment:52'></a>\n```\nsage -t --long --warn-long 60.7 --random-seed=0 src/sage/interfaces/giac.py\n**********************************************************************\nFile \"src/sage/interfaces/giac.py\", line 1002, in sage.interfaces.giac.GiacElement._latex_\nFailed example:\n    latex(gM)\nExpected:\n    \\left(\\begin{array}{cc}\n    1 & 2 \\\\\n    3 & 4\n    \\end{array}\\right)\nGot:\n    \\left[\\begin{array}{cc}1&2\\\\3&4\\end{array}\\right]\n**********************************************************************\n1 item had failures:\n   1 of   7 in sage.interfaces.giac.GiacElement._latex_\n    [172 tests, 1 failure, 2.47 s]\n----------------------------------------------------------------------\n```",
    "created_at": "2020-08-19T22:17:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409205",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:52'></a>
```
sage -t --long --warn-long 60.7 --random-seed=0 src/sage/interfaces/giac.py
**********************************************************************
File "src/sage/interfaces/giac.py", line 1002, in sage.interfaces.giac.GiacElement._latex_
Failed example:
    latex(gM)
Expected:
    \left(\begin{array}{cc}
    1 & 2 \\
    3 & 4
    \end{array}\right)
Got:
    \left[\begin{array}{cc}1&2\\3&4\end{array}\right]
**********************************************************************
1 item had failures:
   1 of   7 in sage.interfaces.giac.GiacElement._latex_
    [172 tests, 1 failure, 2.47 s]
----------------------------------------------------------------------
```



---

archive/issue_comments_409206.json:
```json
{
    "body": "<a id='comment:53'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-19T23:32:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409206",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:53'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_409207.json:
```json
{
    "body": "<a id='comment:54'></a>Cherry-picked one commit from #29541",
    "created_at": "2020-08-19T23:33:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409207",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:54'></a>Cherry-picked one commit from #29541



---

archive/issue_comments_409208.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-08-19T23:33:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409208",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_409209.json:
```json
{
    "body": "<a id='comment:55'></a>Quick review?",
    "created_at": "2020-08-20T13:38:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409209",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:55'></a>Quick review?



---

archive/issue_comments_409210.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-08-20T15:08:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409210",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_409211.json:
```json
{
    "body": "<a id='comment:56'></a>lgtm",
    "created_at": "2020-08-20T15:08:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409211",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:56'></a>lgtm



---

archive/issue_comments_409212.json:
```json
{
    "body": "<a id='comment:57'></a>Thanks",
    "created_at": "2020-08-20T18:26:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409212",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:57'></a>Thanks



---

archive/issue_events_074085.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-23T17:51:11Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29171#event-74085"
}
```



---

archive/issue_comments_409213.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-08-23T17:51:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29171#issuecomment-409213",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
