# Issue 29375: Clean up some _element_constructor_() methods

archive/issues_029138.json:
```json
{
    "body": "The coercion framework never calls `_element_constructor_()` methods without optional or keyword arguments on an input that is already in the correct parent.  This ticket removes some unnecessary checks for this case.\n\nI checked that (the branches of) the `if` statements removed by this ticket are never called by temporarily inserting `assert` statements.  In some other cases, I added doctests showing that the respective `if` statements cannot be removed (because the `_element_constructor_()` method has a optional or keyword arguments).\n\nThe deleted code in `multi_polynomial_libsingular` is no longer needed because these cases are handled by coercion maps from/via the base ring since #29247.\n\nCC:  @tscrim\n\nBranch/Commit: b5269455e861e119fdf9b9182a43a4dab232efaf\n\nReviewer: Fr\u00e9d\u00e9ric Chapoton, Travis Scrimshaw\n\nAuthor: Peter Bruin\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29375\n\n",
    "closed_at": "2020-03-25T22:48:33Z",
    "created_at": "2020-03-20T07:51:15Z",
    "labels": [
        "component: coercion"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "Clean up some _element_constructor_() methods",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29375",
    "user": "https://github.com/pjbruin"
}
```
The coercion framework never calls `_element_constructor_()` methods without optional or keyword arguments on an input that is already in the correct parent.  This ticket removes some unnecessary checks for this case.

I checked that (the branches of) the `if` statements removed by this ticket are never called by temporarily inserting `assert` statements.  In some other cases, I added doctests showing that the respective `if` statements cannot be removed (because the `_element_constructor_()` method has a optional or keyword arguments).

The deleted code in `multi_polynomial_libsingular` is no longer needed because these cases are handled by coercion maps from/via the base ring since #29247.

CC:  @tscrim

Branch/Commit: b5269455e861e119fdf9b9182a43a4dab232efaf

Reviewer: Frédéric Chapoton, Travis Scrimshaw

Author: Peter Bruin

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29375





---

archive/issue_comments_439317.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-03-20T07:53:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29375#issuecomment-439317",
    "user": "https://github.com/pjbruin"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_439318.json:
```json
{
    "body": "<a id='comment:2'></a>would you please fix the pyflakes warning from patchbot report ?",
    "created_at": "2020-03-20T11:16:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29375#issuecomment-439318",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>would you please fix the pyflakes warning from patchbot report ?



---

archive/issue_comments_439319.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-20T12:19:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29375#issuecomment-439319",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_439320.json:
```json
{
    "body": "<a id='comment:4'></a>Replying to [comment:2 chapoton]:\n> would you please fix the pyflakes warning from patchbot report ?\n\nDone, thanks.",
    "created_at": "2020-03-20T12:20:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29375#issuecomment-439320",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:4'></a>Replying to [comment:2 chapoton]:
> would you please fix the pyflakes warning from patchbot report ?

Done, thanks.



---

archive/issue_comments_439321.json:
```json
{
    "body": "<a id='comment:5'></a>looks good to me, and the bot is fully green.\n\nMaybe Travis, who knows better the coercion framework, could give his word ?",
    "created_at": "2020-03-20T13:26:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29375#issuecomment-439321",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'></a>looks good to me, and the bot is fully green.

Maybe Travis, who knows better the coercion framework, could give his word ?



---

archive/issue_comments_439322.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:5 chapoton]:\n> Maybe Travis, who knows better the coercion framework, could give his word ?\n\n\nYes, what is in the ticket description is correct (it is faster to do it there because it is Cython too). So +1 for doing this.",
    "created_at": "2020-03-20T21:36:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29375#issuecomment-439322",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:6'></a>Replying to [comment:5 chapoton]:
> Maybe Travis, who knows better the coercion framework, could give his word ?


Yes, what is in the ticket description is correct (it is faster to do it there because it is Cython too). So +1 for doing this.



---

archive/issue_comments_439323.json:
```json
{
    "body": "Changing type from task to enhancement.",
    "created_at": "2020-03-21T07:40:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29375#issuecomment-439323",
    "user": "https://github.com/fchapoton"
}
```

Changing type from task to enhancement.



---

archive/issue_comments_439324.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-03-21T07:40:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29375#issuecomment-439324",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_439325.json:
```json
{
    "body": "<a id='comment:7'></a>ok, then let it be.",
    "created_at": "2020-03-21T07:40:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29375#issuecomment-439325",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:7'></a>ok, then let it be.



---

archive/issue_events_074852.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-03-25T22:48:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29375",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29375#event-74852"
}
```



---

archive/issue_comments_439326.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-03-25T22:48:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29375#issuecomment-439326",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
