# Issue 29797: sage.misc.defaults.variable_names return tuple in all cases

archive/issues_029560.json:
```json
{
    "body": "sage.misc.defaults.variable_names and latex_variable_names return tuple if the number of variable names requested is bigger than 1 or 0 and a list if it's 1. This ticket fixes that. \n\nBranch/Commit: 725d4b5978a92f4ecf3b46911b16d0443c1af616\n\nReviewer: Travis Scrimshaw\n\nAuthor: Reimundo Heluani\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29797\n\n",
    "closed_at": "2020-06-27T09:26:24Z",
    "created_at": "2020-06-04T21:29:25Z",
    "labels": [
        "component: misc",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "sage.misc.defaults.variable_names return tuple in all cases",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29797",
    "user": "https://github.com/heluani"
}
```
sage.misc.defaults.variable_names and latex_variable_names return tuple if the number of variable names requested is bigger than 1 or 0 and a list if it's 1. This ticket fixes that. 

Branch/Commit: 725d4b5978a92f4ecf3b46911b16d0443c1af616

Reviewer: Travis Scrimshaw

Author: Reimundo Heluani

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29797





---

archive/issue_comments_584311.json:
```json
{
    "body": "Changing branch from \"\" to \"u/heluani/sage_misc_defaults_variable_names_return_tuple_in_all_cases\"",
    "created_at": "2020-06-04T21:30:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29797#issuecomment-584311",
    "user": "https://github.com/heluani"
}
```

Changing branch from "" to "u/heluani/sage_misc_defaults_variable_names_return_tuple_in_all_cases"



---

archive/issue_comments_584312.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2020-06-04T21:33:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29797#issuecomment-584312",
    "user": "https://github.com/heluani"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_584313.json:
```json
{
    "body": "Changing commit from \"\" to \"15704692e56d905577f721a4e0f53898f24e7107\"",
    "created_at": "2020-06-04T21:33:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29797#issuecomment-584313",
    "user": "https://github.com/heluani"
}
```

Changing commit from "" to "15704692e56d905577f721a4e0f53898f24e7107"



---

archive/issue_comments_584314.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-06-04T21:33:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29797#issuecomment-584314",
    "user": "https://github.com/heluani"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_584315.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to misc.",
    "created_at": "2020-06-04T21:33:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29797#issuecomment-584315",
    "user": "https://github.com/heluani"
}
```

Changing component from PLEASE CHANGE to misc.



---

archive/issue_comments_584316.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+sage.misc.defaults.variable_names and latex_variable_names return tuple if the number of variable names requested is bigger than 1 or 0 and a list if it's 1. This ticket fixes that. \n``````\n",
    "created_at": "2020-06-04T21:33:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29797#issuecomment-584316",
    "user": "https://github.com/heluani"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+sage.misc.defaults.variable_names and latex_variable_names return tuple if the number of variable names requested is bigger than 1 or 0 and a list if it's 1. This ticket fixes that. 
``````




---

archive/issue_comments_584317.json:
```json
{
    "body": "Changing author from \"\" to \"Reimundo Heluani\"",
    "created_at": "2020-06-04T21:33:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29797#issuecomment-584317",
    "user": "https://github.com/heluani"
}
```

Changing author from "" to "Reimundo Heluani"



---

archive/issue_comments_584318.json:
```json
{
    "body": "<a id='comment:3'></a>For safety:\n\n```diff\n def latex_variable_names(n, name=None):\n-    \"\"\"\n+    r\"\"\"\n     Converts a root string into a tuple of variable names by adding \n     numbers in sequence.\n```\n\nAlso, minor nitpick with the doc formatting:\n\n```diff\n-    - ``n`` a non-negative Integer. The number of variable names to \n-       output.\n-    - ``names`` a string (Default: ``None``); The root of the variable\n-      name. \n+    - ``n`` a non-negative Integer; the number of variable names to \n+       output\n+    - ``names`` a string (default: ``None``); the root of the variable\n+      name.\n```\nOnce changed, you can set a positive review on my behalf.",
    "created_at": "2020-06-05T00:15:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29797#issuecomment-584318",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:3'></a>For safety:

```diff
 def latex_variable_names(n, name=None):
-    """
+    r"""
     Converts a root string into a tuple of variable names by adding 
     numbers in sequence.
```

Also, minor nitpick with the doc formatting:

```diff
-    - ``n`` a non-negative Integer. The number of variable names to 
-       output.
-    - ``names`` a string (Default: ``None``); The root of the variable
-      name. 
+    - ``n`` a non-negative Integer; the number of variable names to 
+       output
+    - ``names`` a string (default: ``None``); the root of the variable
+      name.
```
Once changed, you can set a positive review on my behalf.



---

archive/issue_comments_584319.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2020-06-05T00:15:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29797#issuecomment-584319",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_584320.json:
```json
{
    "body": "<a id='comment:4'></a>Thanks for making the fix, but I think there are space characters at the ends of some lines (and a line with only spaces). Please get rid of those spaces. Also, since you are editing the file, please change `tuple([ ... ])` to `tuple( ... )` (twice, near the end of both functions), even though this is not your fault.",
    "created_at": "2020-06-05T01:36:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29797#issuecomment-584320",
    "user": "https://github.com/DaveWitteMorris"
}
```

<a id='comment:4'></a>Thanks for making the fix, but I think there are space characters at the ends of some lines (and a line with only spaces). Please get rid of those spaces. Also, since you are editing the file, please change `tuple([ ... ])` to `tuple( ... )` (twice, near the end of both functions), even though this is not your fault.



---

archive/issue_comments_584321.json:
```json
{
    "body": "<a id='comment:5'></a>Replying to [gh-DaveWitteMorris](#comment%3A4):\n> Also, since you are editing the file, please change `tuple([ ... ])` to `tuple( ... )` (twice, near the end of both functions), even though this is not your fault.\n\n\nI am -1 on this change because it is actually slower (surprisingly) to not have the inner list comprehension.",
    "created_at": "2020-06-05T01:43:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29797#issuecomment-584321",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>Replying to [gh-DaveWitteMorris](#comment%3A4):
> Also, since you are editing the file, please change `tuple([ ... ])` to `tuple( ... )` (twice, near the end of both functions), even though this is not your fault.


I am -1 on this change because it is actually slower (surprisingly) to not have the inner list comprehension.



---

archive/issue_comments_584322.json:
```json
{
    "body": "Changing commit from \"15704692e56d905577f721a4e0f53898f24e7107\" to \"725d4b5978a92f4ecf3b46911b16d0443c1af616\"",
    "created_at": "2020-06-05T02:19:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29797#issuecomment-584322",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "15704692e56d905577f721a4e0f53898f24e7107" to "725d4b5978a92f4ecf3b46911b16d0443c1af616"



---

archive/issue_comments_584323.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-06-05T02:19:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29797#issuecomment-584323",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_584324.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [tscrim](#comment%3A3):\n> \n> Once changed, you can set a positive review on my behalf.\n\nWas I suppose to make this change to 'positive review'?",
    "created_at": "2020-06-05T02:29:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29797#issuecomment-584324",
    "user": "https://github.com/heluani"
}
```

<a id='comment:7'></a>Replying to [tscrim](#comment%3A3):
> 
> Once changed, you can set a positive review on my behalf.

Was I suppose to make this change to 'positive review'?



---

archive/issue_comments_584325.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-06-05T02:29:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29797#issuecomment-584325",
    "user": "https://github.com/heluani"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_584326.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [tscrim](#comment%3A5):\n> I am -1 on this change because it is actually slower (surprisingly) to not have the inner list comprehension.\n\n\nIndeed! There's no \"tuple comprehension\" in python; just the possibility to make a tuple from an iterator. You can save the \"tuple\" by writing\n\n```\n(*[...],)\n```\nbut as far as I can see this has about the same performance as `tuple([...])` has. I guess the tuple constructor misses some of the optimizations of list comprehensions to build a list with beforehand-unknown-length. Passing a list into tuple gives the length beforehand, so it's easier to construct the tuple efficiently.",
    "created_at": "2020-06-05T03:02:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29797#issuecomment-584326",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:8'></a>Replying to [tscrim](#comment%3A5):
> I am -1 on this change because it is actually slower (surprisingly) to not have the inner list comprehension.


Indeed! There's no "tuple comprehension" in python; just the possibility to make a tuple from an iterator. You can save the "tuple" by writing

```
(*[...],)
```
but as far as I can see this has about the same performance as `tuple([...])` has. I guess the tuple constructor misses some of the optimizations of list comprehensions to build a list with beforehand-unknown-length. Passing a list into tuple gives the length beforehand, so it's easier to construct the tuple efficiently.



---

archive/issue_comments_584327.json:
```json
{
    "body": "<a id='comment:9'></a>OK, I stand corrected.  I made the suggestion because it was a reviewer comment on one of the patches I wrote, and made sense to me. (I did some quick tests on this case and I am usually not seeing any significant difference in performance, but `tuple([...])` does come out faster sometimes, and I can believe that it is a better general practice, even though it is counterintuitive.)",
    "created_at": "2020-06-05T03:14:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29797#issuecomment-584327",
    "user": "https://github.com/DaveWitteMorris"
}
```

<a id='comment:9'></a>OK, I stand corrected.  I made the suggestion because it was a reviewer comment on one of the patches I wrote, and made sense to me. (I did some quick tests on this case and I am usually not seeing any significant difference in performance, but `tuple([...])` does come out faster sometimes, and I can believe that it is a better general practice, even though it is counterintuitive.)



---

archive/issue_comments_584328.json:
```json
{
    "body": "Changing branch from \"u/heluani/sage_misc_defaults_variable_names_return_tuple_in_all_cases\" to \"725d4b5978a92f4ecf3b46911b16d0443c1af616\"",
    "created_at": "2020-06-27T09:26:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29797#issuecomment-584328",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/heluani/sage_misc_defaults_variable_names_return_tuple_in_all_cases" to "725d4b5978a92f4ecf3b46911b16d0443c1af616"



---

archive/issue_comments_584329.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-06-27T09:26:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29797#issuecomment-584329",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_076300.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-06-27T09:26:24Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29797",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29797#event-76300"
}
```
