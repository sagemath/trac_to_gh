# Issue 29797: sage.misc.defaults.variable_names return tuple in all cases

archive/issues_029560.json:
```json
{
    "assignees": [],
    "body": "sage.misc.defaults.variable_names and latex_variable_names return tuple if the number of variable names requested is bigger than 1 or 0 and a list if it's 1. This ticket fixes that. \n\nBranch/Commit: **[725d4b5](https://github.com/sagemath/sagetrac-mirror/commit/725d4b5978a92f4ecf3b46911b16d0443c1af616)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Reimundo Heluani**\n\nComponent: **misc**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29797_\n\n",
    "closed_at": "2020-06-27T09:26:24Z",
    "created_at": "2020-06-04T21:29:25Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "sage.misc.defaults.variable_names return tuple in all cases",
    "type": "issue",
    "updated_at": "2020-06-27T09:26:24Z",
    "url": "https://github.com/sagemath/sage/issues/29797",
    "user": "https://github.com/heluani"
}
```
sage.misc.defaults.variable_names and latex_variable_names return tuple if the number of variable names requested is bigger than 1 or 0 and a list if it's 1. This ticket fixes that. 

Branch/Commit: **[725d4b5](https://github.com/sagemath/sagetrac-mirror/commit/725d4b5978a92f4ecf3b46911b16d0443c1af616)**

Reviewer: **Travis Scrimshaw**

Author: **Reimundo Heluani**

Component: **misc**

_Issue created by migration from https://trac.sagemath.org/ticket/29797_





---

archive/issue_events_410118.json:
```json
{
    "actor": "https://github.com/heluani",
    "created_at": "2020-06-04T21:29:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29797",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29797#event-410118"
}
```



---

archive/issue_events_410119.json:
```json
{
    "actor": "https://github.com/heluani",
    "created_at": "2020-06-04T21:29:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29797",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29797#event-410119"
}
```



---

archive/issue_comments_470506.json:
```json
{
    "body": "Branch: **[u/heluani/sage_misc_defaults_variable_names_return_tuple_in_all_cases](https://github.com/sagemath/sagetrac-mirror/tree/u/heluani/sage_misc_defaults_variable_names_return_tuple_in_all_cases)**",
    "created_at": "2020-06-04T21:30:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29797#issuecomment-470506",
    "user": "https://github.com/heluani"
}
```

Branch: **[u/heluani/sage_misc_defaults_variable_names_return_tuple_in_all_cases](https://github.com/sagemath/sagetrac-mirror/tree/u/heluani/sage_misc_defaults_variable_names_return_tuple_in_all_cases)**



---

archive/issue_events_410120.json:
```json
{
    "actor": "https://github.com/heluani",
    "created_at": "2020-06-04T21:33:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29797",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29797#event-410120"
}
```



---

archive/issue_comments_470507.json:
```json
{
    "body": "Commit: **[1570469](https://github.com/sagemath/sagetrac-mirror/commit/15704692e56d905577f721a4e0f53898f24e7107)**",
    "created_at": "2020-06-04T21:33:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29797#issuecomment-470507",
    "user": "https://github.com/heluani"
}
```

Commit: **[1570469](https://github.com/sagemath/sagetrac-mirror/commit/15704692e56d905577f721a4e0f53898f24e7107)**



---

archive/issue_events_410121.json:
```json
{
    "actor": "https://github.com/heluani",
    "created_at": "2020-06-04T21:33:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29797",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29797#event-410121"
}
```



---

archive/issue_comments_470508.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+sage.misc.defaults.variable_names and latex_variable_names return tuple if the number of variable names requested is bigger than 1 or 0 and a list if it's 1. This ticket fixes that. \n``````\n",
    "created_at": "2020-06-04T21:33:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29797#issuecomment-470508",
    "user": "https://github.com/heluani"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+sage.misc.defaults.variable_names and latex_variable_names return tuple if the number of variable names requested is bigger than 1 or 0 and a list if it's 1. This ticket fixes that. 
``````




---

archive/issue_comments_470509.json:
```json
{
    "body": "Author: **Reimundo Heluani**",
    "created_at": "2020-06-04T21:33:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29797#issuecomment-470509",
    "user": "https://github.com/heluani"
}
```

Author: **Reimundo Heluani**



---

archive/issue_comments_470510.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nFor safety:\n\n```diff\n def latex_variable_names(n, name=None):\n-    \"\"\"\n+    r\"\"\"\n     Converts a root string into a tuple of variable names by adding \n     numbers in sequence.\n```\n\nAlso, minor nitpick with the doc formatting:\n\n```diff\n-    - ``n`` a non-negative Integer. The number of variable names to \n-       output.\n-    - ``names`` a string (Default: ``None``); The root of the variable\n-      name. \n+    - ``n`` a non-negative Integer; the number of variable names to \n+       output\n+    - ``names`` a string (default: ``None``); the root of the variable\n+      name.\n```\nOnce changed, you can set a positive review on my behalf.",
    "created_at": "2020-06-05T00:15:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29797#issuecomment-470510",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:3" align="right">comment:3</div>

For safety:

```diff
 def latex_variable_names(n, name=None):
-    """
+    r"""
     Converts a root string into a tuple of variable names by adding 
     numbers in sequence.
```

Also, minor nitpick with the doc formatting:

```diff
-    - ``n`` a non-negative Integer. The number of variable names to 
-       output.
-    - ``names`` a string (Default: ``None``); The root of the variable
-      name. 
+    - ``n`` a non-negative Integer; the number of variable names to 
+       output
+    - ``names`` a string (default: ``None``); the root of the variable
+      name.
```
Once changed, you can set a positive review on my behalf.



---

archive/issue_comments_470511.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2020-06-05T00:15:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29797#issuecomment-470511",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_470512.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThanks for making the fix, but I think there are space characters at the ends of some lines (and a line with only spaces). Please get rid of those spaces. Also, since you are editing the file, please change `tuple([ ... ])` to `tuple( ... )` (twice, near the end of both functions), even though this is not your fault.",
    "created_at": "2020-06-05T01:36:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29797#issuecomment-470512",
    "user": "https://github.com/DaveWitteMorris"
}
```

<div id="comment:4" align="right">comment:4</div>

Thanks for making the fix, but I think there are space characters at the ends of some lines (and a line with only spaces). Please get rid of those spaces. Also, since you are editing the file, please change `tuple([ ... ])` to `tuple( ... )` (twice, near the end of both functions), even though this is not your fault.



---

archive/issue_comments_470513.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@DaveWitteMorris](#comment:4):\n> Also, since you are editing the file, please change `tuple([ ... ])` to `tuple( ... )` (twice, near the end of both functions), even though this is not your fault.\n\nI am -1 on this change because it is actually slower (surprisingly) to not have the inner list comprehension.",
    "created_at": "2020-06-05T01:43:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29797#issuecomment-470513",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@DaveWitteMorris](#comment:4):
> Also, since you are editing the file, please change `tuple([ ... ])` to `tuple( ... )` (twice, near the end of both functions), even though this is not your fault.

I am -1 on this change because it is actually slower (surprisingly) to not have the inner list comprehension.



---

archive/issue_comments_470514.json:
```json
{
    "body": "Changed commit from **[1570469](https://github.com/sagemath/sagetrac-mirror/commit/15704692e56d905577f721a4e0f53898f24e7107)** to **[725d4b5](https://github.com/sagemath/sagetrac-mirror/commit/725d4b5978a92f4ecf3b46911b16d0443c1af616)**",
    "created_at": "2020-06-05T02:19:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29797#issuecomment-470514",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1570469](https://github.com/sagemath/sagetrac-mirror/commit/15704692e56d905577f721a4e0f53898f24e7107)** to **[725d4b5](https://github.com/sagemath/sagetrac-mirror/commit/725d4b5978a92f4ecf3b46911b16d0443c1af616)**



---

archive/issue_comments_470515.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/725d4b5978a92f4ecf3b46911b16d0443c1af616\">725d4b5</a></td><td><code>Changes requested by comments #3 and #4</code></td></tr></table>\n",
    "created_at": "2020-06-05T02:19:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29797#issuecomment-470515",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/725d4b5978a92f4ecf3b46911b16d0443c1af616">725d4b5</a></td><td><code>Changes requested by comments #3 and #4</code></td></tr></table>




---

archive/issue_comments_470516.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@tscrim](#comment:3):\n> \n> Once changed, you can set a positive review on my behalf.\n\nWas I suppose to make this change to 'positive review'?",
    "created_at": "2020-06-05T02:29:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29797#issuecomment-470516",
    "user": "https://github.com/heluani"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@tscrim](#comment:3):
> 
> Once changed, you can set a positive review on my behalf.

Was I suppose to make this change to 'positive review'?



---

archive/issue_events_410122.json:
```json
{
    "actor": "https://github.com/heluani",
    "created_at": "2020-06-05T02:29:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29797",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29797#event-410122"
}
```



---

archive/issue_events_410123.json:
```json
{
    "actor": "https://github.com/heluani",
    "created_at": "2020-06-05T02:29:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29797",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29797#event-410123"
}
```



---

archive/issue_comments_470517.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@tscrim](#comment:5):\n> I am -1 on this change because it is actually slower (surprisingly) to not have the inner list comprehension.\n\nIndeed! There's no \"tuple comprehension\" in python; just the possibility to make a tuple from an iterator. You can save the \"tuple\" by writing\n\n```\n(*[...],)\n```\nbut as far as I can see this has about the same performance as `tuple([...])` has. I guess the tuple constructor misses some of the optimizations of list comprehensions to build a list with beforehand-unknown-length. Passing a list into tuple gives the length beforehand, so it's easier to construct the tuple efficiently.",
    "created_at": "2020-06-05T03:02:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29797#issuecomment-470517",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@tscrim](#comment:5):
> I am -1 on this change because it is actually slower (surprisingly) to not have the inner list comprehension.

Indeed! There's no "tuple comprehension" in python; just the possibility to make a tuple from an iterator. You can save the "tuple" by writing

```
(*[...],)
```
but as far as I can see this has about the same performance as `tuple([...])` has. I guess the tuple constructor misses some of the optimizations of list comprehensions to build a list with beforehand-unknown-length. Passing a list into tuple gives the length beforehand, so it's easier to construct the tuple efficiently.



---

archive/issue_comments_470518.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nOK, I stand corrected.  I made the suggestion because it was a reviewer comment on one of the patches I wrote, and made sense to me. (I did some quick tests on this case and I am usually not seeing any significant difference in performance, but `tuple([...])` does come out faster sometimes, and I can believe that it is a better general practice, even though it is counterintuitive.)",
    "created_at": "2020-06-05T03:14:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29797#issuecomment-470518",
    "user": "https://github.com/DaveWitteMorris"
}
```

<div id="comment:9" align="right">comment:9</div>

OK, I stand corrected.  I made the suggestion because it was a reviewer comment on one of the patches I wrote, and made sense to me. (I did some quick tests on this case and I am usually not seeing any significant difference in performance, but `tuple([...])` does come out faster sometimes, and I can believe that it is a better general practice, even though it is counterintuitive.)



---

archive/issue_comments_470519.json:
```json
{
    "body": "Changed branch from **[u/heluani/sage_misc_defaults_variable_names_return_tuple_in_all_cases](https://github.com/sagemath/sagetrac-mirror/tree/u/heluani/sage_misc_defaults_variable_names_return_tuple_in_all_cases)** to **[725d4b5](https://github.com/sagemath/sagetrac-mirror/commit/725d4b5978a92f4ecf3b46911b16d0443c1af616)**",
    "created_at": "2020-06-27T09:26:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29797",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29797#issuecomment-470519",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/heluani/sage_misc_defaults_variable_names_return_tuple_in_all_cases](https://github.com/sagemath/sagetrac-mirror/tree/u/heluani/sage_misc_defaults_variable_names_return_tuple_in_all_cases)** to **[725d4b5](https://github.com/sagemath/sagetrac-mirror/commit/725d4b5978a92f4ecf3b46911b16d0443c1af616)**



---

archive/issue_events_410124.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-06-27T09:26:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29797",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29797#event-410124"
}
```



---

archive/issue_events_410125.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "de57048c4d50bfbd84fd9628671c4460cf280c30",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-06-27T09:26:24Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29797",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29797#event-410125"
}
```
