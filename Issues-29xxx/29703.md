# Issue 29703: Upgrade gcc to 10.3 (latest 10.x)

archive/issues_029466.json:
```json
{
    "assignees": [],
    "body": "Follow-up from #29674 (fedora-32: If gcc 10 is found, install gcc spkg; fix building gcc (9.2.0) spkg with gcc 10). As noted there, on many systems, building `--without-system-gcc` fails. \n\ngcc 10.3 was released 2021-04-08.\n\nPotentially helpful for `fedora-34` (released end of April 2021), which uses gcc 11, which our configure script rejects. \n\nWe also need a newer gcc to provide a gfortran for macOS builds (`homebrew-macos-minimal`, `macos-nohomebrew`) on Big Sur\n\nhomebrew:\n- uses this patch for GCC 10.2: https://raw.githubusercontent.com/Homebrew/formula-patches/6a83f36d/gcc/bigsur_2.patch\n- notes in https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/gcc.rb#L53: \"Patch for Big Sur, remove with GCC 10.3 - https://gcc.gnu.org/bugzilla/show_bug.cgi?id=98805\"\n\nmacports:\n- https://github.com/macports/macports-ports/commit/53ad57cd08c5971b5a92df34d84e62589bc006b4\n\nSee also:\n- https://gcc.gnu.org/gcc-10/changes.html\n- Attempted upgrade to 9.3.0: #29827 (abandoned)\n\n\nCC:  @zlscherr @jhpalmieri @dimpase @vbraun @kiwifb @enriqueartal\n\nBranch/Commit: **[22c050a](https://github.com/sagemath/sagetrac-mirror/commit/22c050ad6060bbb820b3acbeeebe1c3fa225e47a)**\n\nReviewer: **Dima Pasechnik**\n\nAuthor: **Matthias Koeppe**\n\nComponent: **packages: standard**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29703_\n\n",
    "closed_at": "2021-05-27T20:30:19Z",
    "created_at": "2020-05-17T18:22:27Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade gcc to 10.3 (latest 10.x)",
    "type": "issue",
    "updated_at": "2021-05-27T20:30:19Z",
    "url": "https://github.com/sagemath/sage/issues/29703",
    "user": "https://github.com/mkoeppe"
}
```
Follow-up from #29674 (fedora-32: If gcc 10 is found, install gcc spkg; fix building gcc (9.2.0) spkg with gcc 10). As noted there, on many systems, building `--without-system-gcc` fails. 

gcc 10.3 was released 2021-04-08.

Potentially helpful for `fedora-34` (released end of April 2021), which uses gcc 11, which our configure script rejects. 

We also need a newer gcc to provide a gfortran for macOS builds (`homebrew-macos-minimal`, `macos-nohomebrew`) on Big Sur

homebrew:
- uses this patch for GCC 10.2: https://raw.githubusercontent.com/Homebrew/formula-patches/6a83f36d/gcc/bigsur_2.patch
- notes in https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/gcc.rb#L53: "Patch for Big Sur, remove with GCC 10.3 - https://gcc.gnu.org/bugzilla/show_bug.cgi?id=98805"

macports:
- https://github.com/macports/macports-ports/commit/53ad57cd08c5971b5a92df34d84e62589bc006b4

See also:
- https://gcc.gnu.org/gcc-10/changes.html
- Attempted upgrade to 9.3.0: #29827 (abandoned)


CC:  @zlscherr @jhpalmieri @dimpase @vbraun @kiwifb @enriqueartal

Branch/Commit: **[22c050a](https://github.com/sagemath/sagetrac-mirror/commit/22c050ad6060bbb820b3acbeeebe1c3fa225e47a)**

Reviewer: **Dima Pasechnik**

Author: **Matthias Koeppe**

Component: **packages: standard**

_Issue created by migration from https://trac.sagemath.org/ticket/29703_





---

archive/issue_events_408699.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-17T18:22:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29703#event-408699"
}
```



---

archive/issue_events_408700.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-17T18:22:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29703#event-408700"
}
```



---

archive/issue_events_408701.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-17T18:22:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29703#event-408701"
}
```



---

archive/issue_events_408702.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-17T18:22:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29703#event-408702"
}
```



---

archive/issue_comments_468225.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,4 @@\n Follow-up from #29674 (fedora-32: If gcc 10 is found, install gcc spkg; fix building gcc (9.2.0) spkg with gcc 10). As noted there, on many systems, building `--without-system-gcc` fails. \n \n+Upgrade to 9.3.0: #29827 \n+\n``````\n",
    "created_at": "2020-06-09T05:30:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29703#issuecomment-468225",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,4 @@
 Follow-up from #29674 (fedora-32: If gcc 10 is found, install gcc spkg; fix building gcc (9.2.0) spkg with gcc 10). As noted there, on many systems, building `--without-system-gcc` fails. 
 
+Upgrade to 9.3.0: #29827 
+
``````




---

archive/issue_events_408703.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29703#event-408703"
}
```



---

archive/issue_events_408704.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29703#event-408704"
}
```



---

archive/issue_comments_468226.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n Follow-up from #29674 (fedora-32: If gcc 10 is found, install gcc spkg; fix building gcc (9.2.0) spkg with gcc 10). As noted there, on many systems, building `--without-system-gcc` fails. \n \n-Upgrade to 9.3.0: #29827 \n+- Attempted upgrade to 9.3.0: #29827 \n \n``````\n",
    "created_at": "2021-03-16T03:57:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29703#issuecomment-468226",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 Follow-up from #29674 (fedora-32: If gcc 10 is found, install gcc spkg; fix building gcc (9.2.0) spkg with gcc 10). As noted there, on many systems, building `--without-system-gcc` fails. 
 
-Upgrade to 9.3.0: #29827 
+- Attempted upgrade to 9.3.0: #29827 
 
``````




---

archive/issue_events_408705.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-16T03:57:44Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "title_is": "Upgrade gcc to latest 10.x, fix --without-system-gcc builds",
    "title_was": "Upgrade gcc to latest 9.x, fix --without-system-gcc builds",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29703#event-408705"
}
```



---

archive/issue_comments_468227.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,12 @@\n Follow-up from #29674 (fedora-32: If gcc 10 is found, install gcc spkg; fix building gcc (9.2.0) spkg with gcc 10). As noted there, on many systems, building `--without-system-gcc` fails. \n \n-- Attempted upgrade to 9.3.0: #29827 \n+We also need a newer gcc to provide a gfortran for macOS builds (`homebrew-macos-minimal`, `macos-nohomebrew`) on Big Sur\n \n+homebrew:\n+- uses this patch for GCC 10.2: https://raw.githubusercontent.com/Homebrew/formula-patches/6a83f36d/gcc/bigsur_2.patch\n+- notes in https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/gcc.rb#L53: \"Patch for Big Sur, remove with GCC 10.3 - https://gcc.gnu.org/bugzilla/show_bug.cgi?id=98805\"\n+\n+See also:\n+- https://gcc.gnu.org/gcc-10/changes.html\n+- Attempted upgrade to 9.3.0: #29827 (abandoned)\n+\n``````\n",
    "created_at": "2021-03-16T04:05:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29703#issuecomment-468227",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,12 @@
 Follow-up from #29674 (fedora-32: If gcc 10 is found, install gcc spkg; fix building gcc (9.2.0) spkg with gcc 10). As noted there, on many systems, building `--without-system-gcc` fails. 
 
-- Attempted upgrade to 9.3.0: #29827 
+We also need a newer gcc to provide a gfortran for macOS builds (`homebrew-macos-minimal`, `macos-nohomebrew`) on Big Sur
 
+homebrew:
+- uses this patch for GCC 10.2: https://raw.githubusercontent.com/Homebrew/formula-patches/6a83f36d/gcc/bigsur_2.patch
+- notes in https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/gcc.rb#L53: "Patch for Big Sur, remove with GCC 10.3 - https://gcc.gnu.org/bugzilla/show_bug.cgi?id=98805"
+
+See also:
+- https://gcc.gnu.org/gcc-10/changes.html
+- Attempted upgrade to 9.3.0: #29827 (abandoned)
+
``````




---

archive/issue_comments_468228.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,6 +6,9 @@\n - uses this patch for GCC 10.2: https://raw.githubusercontent.com/Homebrew/formula-patches/6a83f36d/gcc/bigsur_2.patch\n - notes in https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/gcc.rb#L53: \"Patch for Big Sur, remove with GCC 10.3 - https://gcc.gnu.org/bugzilla/show_bug.cgi?id=98805\"\n \n+macports:\n+- https://github.com/macports/macports-ports/commit/53ad57cd08c5971b5a92df34d84e62589bc006b4\n+\n See also:\n - https://gcc.gnu.org/gcc-10/changes.html\n - Attempted upgrade to 9.3.0: #29827 (abandoned)\n``````\n",
    "created_at": "2021-03-16T04:12:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29703#issuecomment-468228",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,6 +6,9 @@
 - uses this patch for GCC 10.2: https://raw.githubusercontent.com/Homebrew/formula-patches/6a83f36d/gcc/bigsur_2.patch
 - notes in https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/gcc.rb#L53: "Patch for Big Sur, remove with GCC 10.3 - https://gcc.gnu.org/bugzilla/show_bug.cgi?id=98805"
 
+macports:
+- https://github.com/macports/macports-ports/commit/53ad57cd08c5971b5a92df34d84e62589bc006b4
+
 See also:
 - https://gcc.gnu.org/gcc-10/changes.html
 - Attempted upgrade to 9.3.0: #29827 (abandoned)
``````




---

archive/issue_events_408706.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T02:04:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29703#event-408706"
}
```



---

archive/issue_events_408707.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T02:04:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29703#event-408707"
}
```



---

archive/issue_comments_468229.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nSage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-24T02:04:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29703#issuecomment-468229",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">comment:6</div>

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_408708.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-03T17:45:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29703#event-408708"
}
```



---

archive/issue_events_408709.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-03T17:45:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29703#event-408709"
}
```



---

archive/issue_comments_468230.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n Follow-up from #29674 (fedora-32: If gcc 10 is found, install gcc spkg; fix building gcc (9.2.0) spkg with gcc 10). As noted there, on many systems, building `--without-system-gcc` fails. \n+\n+Critical for `fedora-34` (released end of April 2021), which uses gcc 11, which our configure script rejects.\n \n We also need a newer gcc to provide a gfortran for macOS builds (`homebrew-macos-minimal`, `macos-nohomebrew`) on Big Sur\n \n``````\n",
    "created_at": "2021-05-03T17:47:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29703#issuecomment-468230",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,6 @@
 Follow-up from #29674 (fedora-32: If gcc 10 is found, install gcc spkg; fix building gcc (9.2.0) spkg with gcc 10). As noted there, on many systems, building `--without-system-gcc` fails. 
+
+Critical for `fedora-34` (released end of April 2021), which uses gcc 11, which our configure script rejects.
 
 We also need a newer gcc to provide a gfortran for macOS builds (`homebrew-macos-minimal`, `macos-nohomebrew`) on Big Sur
 
``````




---

archive/issue_events_408710.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-03T17:48:11Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "title_is": "Upgrade gcc to 10.3 (latest 10.x), fix --without-system-gcc builds",
    "title_was": "Upgrade gcc to latest 10.x, fix --without-system-gcc builds",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29703#event-408710"
}
```



---

archive/issue_comments_468231.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n Follow-up from #29674 (fedora-32: If gcc 10 is found, install gcc spkg; fix building gcc (9.2.0) spkg with gcc 10). As noted there, on many systems, building `--without-system-gcc` fails. \n+\n+gcc 10.3 was released 2021-04-08.\n \n Critical for `fedora-34` (released end of April 2021), which uses gcc 11, which our configure script rejects.\n \n``````\n",
    "created_at": "2021-05-03T17:48:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29703#issuecomment-468231",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,6 @@
 Follow-up from #29674 (fedora-32: If gcc 10 is found, install gcc spkg; fix building gcc (9.2.0) spkg with gcc 10). As noted there, on many systems, building `--without-system-gcc` fails. 
+
+gcc 10.3 was released 2021-04-08.
 
 Critical for `fedora-34` (released end of April 2021), which uses gcc 11, which our configure script rejects.
 
``````




---

archive/issue_comments_468232.json:
```json
{
    "body": "Branch: **[u/mkoeppe/upgrade_gcc_to_10_3__latest_10_x___fix___without_system_gcc_builds](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/upgrade_gcc_to_10_3__latest_10_x___fix___without_system_gcc_builds)**",
    "created_at": "2021-05-03T18:12:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29703#issuecomment-468232",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/upgrade_gcc_to_10_3__latest_10_x___fix___without_system_gcc_builds](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/upgrade_gcc_to_10_3__latest_10_x___fix___without_system_gcc_builds)**



---

archive/issue_comments_468233.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2021-05-03T18:12:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29703#issuecomment-468233",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_comments_468234.json:
```json
{
    "body": "Commit: **[22c050a](https://github.com/sagemath/sagetrac-mirror/commit/22c050ad6060bbb820b3acbeeebe1c3fa225e47a)**",
    "created_at": "2021-05-03T18:12:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29703#issuecomment-468234",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[22c050a](https://github.com/sagemath/sagetrac-mirror/commit/22c050ad6060bbb820b3acbeeebe1c3fa225e47a)**



---

archive/issue_events_408711.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-03T18:12:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29703#event-408711"
}
```



---

archive/issue_comments_468235.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/22c050ad6060bbb820b3acbeeebe1c3fa225e47a\">22c050a</a></td><td><code>build/pkgs/gcc: Update to 10.3.0</code></td></tr></table>\n",
    "created_at": "2021-05-03T18:12:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29703#issuecomment-468235",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:11"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/22c050ad6060bbb820b3acbeeebe1c3fa225e47a">22c050a</a></td><td><code>build/pkgs/gcc: Update to 10.3.0</code></td></tr></table>




---

archive/issue_comments_468236.json:
```json
{
    "body": "Reviewer: **https://github.com/mkoeppe/sage/actions/runs/807684403, https://github.com/mkoeppe/sage/actions/runs/807684401, https://github.com/mkoeppe/sage/actions/runs/807684408**",
    "created_at": "2021-05-03T18:15:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29703#issuecomment-468236",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **https://github.com/mkoeppe/sage/actions/runs/807684403, https://github.com/mkoeppe/sage/actions/runs/807684401, https://github.com/mkoeppe/sage/actions/runs/807684408**



---

archive/issue_events_408712.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-03T18:16:02Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29703#event-408712"
}
```



---

archive/issue_events_408713.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-03T18:16:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29703#event-408713"
}
```



---

archive/issue_comments_468237.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nlocal build (with `make gcc`) fails on `homebrew-macos`\n\n```\nIn file included from ../../src/gcc/gengtype.c:26:\n../../src/gcc/system.h:544:20: error: conflicting declaration of C function 'const char* strsignal(int)'\n  544 | extern const char *strsignal (int);\n      |                    ^~~~~~~~~\nIn file included from /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/var/tmp/sage/build/gcc-10.3.0/gcc-build/prev-x86_64-apple-darwin19.6.0/libstdc++-v3/include/cstring:42,\n                 from ../../src/gcc/system.h:235,\n                 from ../../src/gcc/gengtype.c:26:\n/Library/Developer/CommandLineTools/SDKs/MacOSX10.15.sdk/usr/include/string.h:134:7: note: previous declaration 'char* strsignal(int)'\n  134 | char *strsignal(int __sig);\n      |       ^~~~~~~~~\nmake[6]: *** [build/sort.o] Error 1\nmake[6]: *** [build/gengtype-parse.o] Error 1\nmake[6]: *** [build/gengenrtl.o] Error 1\n```\n\nBut it did not work with the previous version either.",
    "created_at": "2021-05-06T16:59:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29703#issuecomment-468237",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:14" align="right">comment:14</div>

local build (with `make gcc`) fails on `homebrew-macos`

```
In file included from ../../src/gcc/gengtype.c:26:
../../src/gcc/system.h:544:20: error: conflicting declaration of C function 'const char* strsignal(int)'
  544 | extern const char *strsignal (int);
      |                    ^~~~~~~~~
In file included from /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/var/tmp/sage/build/gcc-10.3.0/gcc-build/prev-x86_64-apple-darwin19.6.0/libstdc++-v3/include/cstring:42,
                 from ../../src/gcc/system.h:235,
                 from ../../src/gcc/gengtype.c:26:
/Library/Developer/CommandLineTools/SDKs/MacOSX10.15.sdk/usr/include/string.h:134:7: note: previous declaration 'char* strsignal(int)'
  134 | char *strsignal(int __sig);
      |       ^~~~~~~~~
make[6]: *** [build/sort.o] Error 1
make[6]: *** [build/gengtype-parse.o] Error 1
make[6]: *** [build/gengenrtl.o] Error 1
```

But it did not work with the previous version either.



---

archive/issue_comments_468238.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nLooking fine for Linux and macOS (`-minimal` configurations where we build `gfortran` from the spkg) - https://github.com/mkoeppe/sage/runs/2494424419",
    "created_at": "2021-05-06T17:07:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29703#issuecomment-468238",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:15" align="right">comment:15</div>

Looking fine for Linux and macOS (`-minimal` configurations where we build `gfortran` from the spkg) - https://github.com/mkoeppe/sage/runs/2494424419



---

archive/issue_events_408714.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-06T18:21:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29703#event-408714"
}
```



---

archive/issue_events_408715.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-06T18:21:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29703#event-408715"
}
```



---

archive/issue_comments_468239.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nHowever, this upgrade does NOT fix #31624 (fedora-34-standard: eclib, singular build failures with system ntl). https://github.com/mkoeppe/sage/runs/2494425736\n\nSo there is no urgency to this upgrade.",
    "created_at": "2021-05-06T18:21:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29703#issuecomment-468239",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:17" align="right">comment:17</div>

However, this upgrade does NOT fix #31624 (fedora-34-standard: eclib, singular build failures with system ntl). https://github.com/mkoeppe/sage/runs/2494425736

So there is no urgency to this upgrade.



---

archive/issue_events_408716.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-06T18:21:27Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29703#event-408716"
}
```



---

archive/issue_events_408717.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-06T18:21:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29703#event-408717"
}
```



---

archive/issue_comments_468240.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,7 +2,7 @@\n \n gcc 10.3 was released 2021-04-08.\n \n-Critical for `fedora-34` (released end of April 2021), which uses gcc 11, which our configure script rejects.\n+Potentially helpful for `fedora-34` (released end of April 2021), which uses gcc 11, which our configure script rejects. \n \n We also need a newer gcc to provide a gfortran for macOS builds (`homebrew-macos-minimal`, `macos-nohomebrew`) on Big Sur\n \n``````\n",
    "created_at": "2021-05-06T18:21:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29703#issuecomment-468240",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,7 +2,7 @@
 
 gcc 10.3 was released 2021-04-08.
 
-Critical for `fedora-34` (released end of April 2021), which uses gcc 11, which our configure script rejects.
+Potentially helpful for `fedora-34` (released end of April 2021), which uses gcc 11, which our configure script rejects. 
 
 We also need a newer gcc to provide a gfortran for macOS builds (`homebrew-macos-minimal`, `macos-nohomebrew`) on Big Sur
 
``````




---

archive/issue_comments_468241.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\n... unless this helps with Big Sur?",
    "created_at": "2021-05-06T18:22:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29703#issuecomment-468241",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:18" align="right">comment:18</div>

... unless this helps with Big Sur?



---

archive/issue_comments_468242.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nlet's not duplicate the efforts of Homebree and Conda...",
    "created_at": "2021-05-06T20:27:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29703#issuecomment-468242",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:19" align="right">comment:19</div>

let's not duplicate the efforts of Homebree and Conda...



---

archive/issue_comments_468243.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nIn any case... needs review",
    "created_at": "2021-05-07T17:04:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29703#issuecomment-468243",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:20" align="right">comment:20</div>

In any case... needs review



---

archive/issue_events_408718.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-05-08T09:17:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29703#event-408718"
}
```



---

archive/issue_events_408719.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-05-08T09:17:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29703#event-408719"
}
```



---

archive/issue_comments_468244.json:
```json
{
    "body": "Changed reviewer from **https://github.com/mkoeppe/sage/actions/runs/807684403, https://github.com/mkoeppe/sage/actions/runs/807684401, https://github.com/mkoeppe/sage/actions/runs/807684408** to **Dima Pasechnik**",
    "created_at": "2021-05-08T09:17:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29703#issuecomment-468244",
    "user": "https://github.com/dimpase"
}
```

Changed reviewer from **https://github.com/mkoeppe/sage/actions/runs/807684403, https://github.com/mkoeppe/sage/actions/runs/807684401, https://github.com/mkoeppe/sage/actions/runs/807684408** to **Dima Pasechnik**



---

archive/issue_comments_468245.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\ngood to get rid of patches.",
    "created_at": "2021-05-08T09:17:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29703#issuecomment-468245",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:21" align="right">comment:21</div>

good to get rid of patches.



---

archive/issue_events_408720.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-08T15:47:37Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "title_is": "Upgrade gcc to 10.3 (latest 10.x)",
    "title_was": "Upgrade gcc to 10.3 (latest 10.x), fix --without-system-gcc builds",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29703#event-408720"
}
```



---

archive/issue_comments_468246.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThanks",
    "created_at": "2021-05-08T15:47:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29703#issuecomment-468246",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:23" align="right">comment:23</div>

Thanks



---

archive/issue_comments_468247.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@dimpase](#comment:19):\n> let's not duplicate the efforts of Homebree and Conda...\n\n\nAnd here we go. Our Sage 9.3 does not build with Big Sur / Homebrew - as just reported https://groups.google.com/g/sage-devel/c/Yut08rvqgvg/m/9uD4W6hFBAAJ",
    "created_at": "2021-05-10T18:58:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29703#issuecomment-468247",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@dimpase](#comment:19):
> let's not duplicate the efforts of Homebree and Conda...


And here we go. Our Sage 9.3 does not build with Big Sur / Homebrew - as just reported https://groups.google.com/g/sage-devel/c/Yut08rvqgvg/m/9uD4W6hFBAAJ



---

archive/issue_events_408721.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-10T19:06:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29703#event-408721"
}
```



---

archive/issue_events_408722.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-10T19:06:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "label": "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p: 1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29703#event-408722"
}
```



---

archive/issue_comments_468248.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nwe need a  proper formula for building Sage using Homebrew, then we can pin versions of dependencies etc.",
    "created_at": "2021-05-10T20:07:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29703#issuecomment-468248",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:26" align="right">comment:26</div>

we need a  proper formula for building Sage using Homebrew, then we can pin versions of dependencies etc.



---

archive/issue_comments_468249.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nDownstream packaging is traditionally considered not part of the upstream project. But if you want to work on it, this would certainly be valuable to some mac users. But lots of packages are missing on homebrew, so you'd be ... duplicating packaging work that has already been done in conda-forge.",
    "created_at": "2021-05-10T20:16:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29703#issuecomment-468249",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:27" align="right">comment:27</div>

Downstream packaging is traditionally considered not part of the upstream project. But if you want to work on it, this would certainly be valuable to some mac users. But lots of packages are missing on homebrew, so you'd be ... duplicating packaging work that has already been done in conda-forge.



---

archive/issue_events_408723.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-05-27T20:30:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29703#event-408723"
}
```



---

archive/issue_events_408724.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "05c2ecadc50d0b429fbbfdec28d654ab6a8eeaf5",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-05-27T20:30:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29703#event-408724"
}
```



---

archive/issue_comments_468250.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/upgrade_gcc_to_10_3__latest_10_x___fix___without_system_gcc_builds](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/upgrade_gcc_to_10_3__latest_10_x___fix___without_system_gcc_builds)** to **[22c050a](https://github.com/sagemath/sagetrac-mirror/commit/22c050ad6060bbb820b3acbeeebe1c3fa225e47a)**",
    "created_at": "2021-05-27T20:30:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29703",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29703#issuecomment-468250",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/upgrade_gcc_to_10_3__latest_10_x___fix___without_system_gcc_builds](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/upgrade_gcc_to_10_3__latest_10_x___fix___without_system_gcc_builds)** to **[22c050a](https://github.com/sagemath/sagetrac-mirror/commit/22c050ad6060bbb820b3acbeeebe1c3fa225e47a)**
