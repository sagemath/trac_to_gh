# Issue 29222: Improvements to padic polylog

archive/issues_028985.json:
```json
{
    "assignees": [],
    "body": "Two improvements for p-adic polylogarithms:\n\nPython2->3 broke range of a rational in a way that didn't trigger any doctest failures, fix it and add a doctest.\n\nAllow the user to specify the branch of the p-adic logarithm that is used, in the same way as for logarithm.\n\nCC:  @xcaruso\n\nKeywords: **polylog, padic**\n\nBranch: **[5281973](https://github.com/sagemath/sagetrac-mirror/commit/528197349e2f6aee483ed2ebb5d18cc28b764ca7)**\n\nReviewer: **Fr\u00e9d\u00e9ric Chapoton, David Roe**\n\nAuthor: **Alex J. Best**\n\nComponent: **padics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29222_\n\n",
    "closed_at": "2021-06-06T13:19:28Z",
    "created_at": "2020-02-19T21:02:00Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20padics",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Improvements to padic polylog",
    "type": "issue",
    "updated_at": "2021-08-22T20:45:20Z",
    "url": "https://github.com/sagemath/sage/issues/29222",
    "user": "https://github.com/alexjbest"
}
```
Two improvements for p-adic polylogarithms:

Python2->3 broke range of a rational in a way that didn't trigger any doctest failures, fix it and add a doctest.

Allow the user to specify the branch of the p-adic logarithm that is used, in the same way as for logarithm.

CC:  @xcaruso

Keywords: **polylog, padic**

Branch: **[5281973](https://github.com/sagemath/sagetrac-mirror/commit/528197349e2f6aee483ed2ebb5d18cc28b764ca7)**

Reviewer: **Frédéric Chapoton, David Roe**

Author: **Alex J. Best**

Component: **padics**

_Issue created by migration from https://trac.sagemath.org/ticket/29222_





---

archive/issue_events_401748.json:
```json
{
    "actor": "https://github.com/alexjbest",
    "created_at": "2020-02-19T21:02:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29222#event-401748"
}
```



---

archive/issue_events_401749.json:
```json
{
    "actor": "https://github.com/alexjbest",
    "created_at": "2020-02-19T21:02:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20padics",
    "label_color": "0000ff",
    "label_name": "c: padics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29222#event-401749"
}
```



---

archive/issue_events_401750.json:
```json
{
    "actor": "https://github.com/alexjbest",
    "created_at": "2020-02-19T21:02:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29222#event-401750"
}
```



---

archive/issue_events_401751.json:
```json
{
    "actor": "https://github.com/alexjbest",
    "created_at": "2020-02-19T21:02:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29222#event-401751"
}
```



---

archive/issue_events_401752.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-15T14:58:55Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29222#event-401752"
}
```



---

archive/issue_events_401753.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-15T14:58:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29222#event-401753"
}
```



---

archive/issue_comments_458374.json:
```json
{
    "body": "Branch: **[u/alexjbest/lip](https://github.com/sagemath/sagetrac-mirror/tree/u/alexjbest/lip)**",
    "created_at": "2020-04-16T22:32:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29222#issuecomment-458374",
    "user": "https://github.com/alexjbest"
}
```

Branch: **[u/alexjbest/lip](https://github.com/sagemath/sagetrac-mirror/tree/u/alexjbest/lip)**



---

archive/issue_events_401754.json:
```json
{
    "actor": "https://github.com/alexjbest",
    "created_at": "2020-04-16T22:40:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29222#event-401754"
}
```



---

archive/issue_comments_458375.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0d2b3800a4697ae286f9389f36978604d54a1502\">0d2b380</a></td><td><code>fixes for polylogs</code></td></tr></table>\n",
    "created_at": "2020-04-16T22:40:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29222#issuecomment-458375",
    "user": "https://github.com/alexjbest"
}
```

<div id="comment:3"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0d2b3800a4697ae286f9389f36978604d54a1502">0d2b380</a></td><td><code>fixes for polylogs</code></td></tr></table>




---

archive/issue_comments_458376.json:
```json
{
    "body": "Commit: **[0d2b380](https://github.com/sagemath/sagetrac-mirror/commit/0d2b3800a4697ae286f9389f36978604d54a1502)**",
    "created_at": "2020-04-16T22:40:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29222#issuecomment-458376",
    "user": "https://github.com/alexjbest"
}
```

Commit: **[0d2b380](https://github.com/sagemath/sagetrac-mirror/commit/0d2b3800a4697ae286f9389f36978604d54a1502)**



---

archive/issue_comments_458377.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\none failing doctest, see bot report",
    "created_at": "2020-05-17T16:27:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29222#issuecomment-458377",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:4" align="right">comment:4</div>

one failing doctest, see bot report



---

archive/issue_events_401755.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-05-17T16:27:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29222#event-401755"
}
```



---

archive/issue_events_401756.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-05-17T16:27:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29222#event-401756"
}
```



---

archive/issue_events_401757.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-05-17T16:28:01Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "title_is": "Improvements to padic polylog",
    "title_was": "Improvements to padic poylog",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29222#event-401757"
}
```



---

archive/issue_comments_458378.json:
```json
{
    "body": "Changed commit from **[0d2b380](https://github.com/sagemath/sagetrac-mirror/commit/0d2b3800a4697ae286f9389f36978604d54a1502)** to **[e983616](https://github.com/sagemath/sagetrac-mirror/commit/e983616bfeca554868a277ff9bf99dca2853b002)**",
    "created_at": "2020-05-17T17:27:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29222#issuecomment-458378",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0d2b380](https://github.com/sagemath/sagetrac-mirror/commit/0d2b3800a4697ae286f9389f36978604d54a1502)** to **[e983616](https://github.com/sagemath/sagetrac-mirror/commit/e983616bfeca554868a277ff9bf99dca2853b002)**



---

archive/issue_comments_458379.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e983616bfeca554868a277ff9bf99dca2853b002\">e983616</a></td><td><code>fix doctest</code></td></tr></table>\n",
    "created_at": "2020-05-17T17:27:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29222#issuecomment-458379",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e983616bfeca554868a277ff9bf99dca2853b002">e983616</a></td><td><code>fix doctest</code></td></tr></table>




---

archive/issue_comments_458380.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nOoops how did I miss that, thanks for the heads up.",
    "created_at": "2020-05-17T17:28:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29222#issuecomment-458380",
    "user": "https://github.com/alexjbest"
}
```

<div id="comment:7" align="right">comment:7</div>

Ooops how did I miss that, thanks for the heads up.



---

archive/issue_events_401758.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-05-22T11:59:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29222#event-401758"
}
```



---

archive/issue_events_401759.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-05-22T11:59:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29222#event-401759"
}
```



---

archive/issue_comments_458381.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nrather ask an expert of the field",
    "created_at": "2020-05-22T11:59:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29222#issuecomment-458381",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:8" align="right">comment:8</div>

rather ask an expert of the field



---

archive/issue_comments_458382.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f092ee0fb045282e2d5676576485dc95310d28dc\">f092ee0</a></td><td><code>define polylogs at 1 using duplication formula</code></td></tr></table>\n",
    "created_at": "2020-05-27T20:53:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29222#issuecomment-458382",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f092ee0fb045282e2d5676576485dc95310d28dc">f092ee0</a></td><td><code>define polylogs at 1 using duplication formula</code></td></tr></table>




---

archive/issue_comments_458383.json:
```json
{
    "body": "Changed commit from **[e983616](https://github.com/sagemath/sagetrac-mirror/commit/e983616bfeca554868a277ff9bf99dca2853b002)** to **[f092ee0](https://github.com/sagemath/sagetrac-mirror/commit/f092ee0fb045282e2d5676576485dc95310d28dc)**",
    "created_at": "2020-05-27T20:53:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29222#issuecomment-458383",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e983616](https://github.com/sagemath/sagetrac-mirror/commit/e983616bfeca554868a277ff9bf99dca2853b002)** to **[f092ee0](https://github.com/sagemath/sagetrac-mirror/commit/f092ee0fb045282e2d5676576485dc95310d28dc)**



---

archive/issue_comments_458384.json:
```json
{
    "body": "Work Issues: **wait for patchbots**",
    "created_at": "2020-05-27T20:54:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29222#issuecomment-458384",
    "user": "https://github.com/alexjbest"
}
```

Work Issues: **wait for patchbots**



---

archive/issue_comments_458385.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThe two new `raise ValueError` should be doctested.",
    "created_at": "2020-05-28T09:03:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29222#issuecomment-458385",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:11" align="right">comment:11</div>

The two new `raise ValueError` should be doctested.



---

archive/issue_comments_458386.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/099e1faa8421c0e23fecf978397165ce89699926\">099e1fa</a></td><td><code>add test for new valueerror</code></td></tr></table>\n",
    "created_at": "2020-05-30T21:38:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29222#issuecomment-458386",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/099e1faa8421c0e23fecf978397165ce89699926">099e1fa</a></td><td><code>add test for new valueerror</code></td></tr></table>




---

archive/issue_comments_458387.json:
```json
{
    "body": "Changed commit from **[f092ee0](https://github.com/sagemath/sagetrac-mirror/commit/f092ee0fb045282e2d5676576485dc95310d28dc)** to **[099e1fa](https://github.com/sagemath/sagetrac-mirror/commit/099e1faa8421c0e23fecf978397165ce89699926)**",
    "created_at": "2020-05-30T21:38:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29222#issuecomment-458387",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f092ee0](https://github.com/sagemath/sagetrac-mirror/commit/f092ee0fb045282e2d5676576485dc95310d28dc)** to **[099e1fa](https://github.com/sagemath/sagetrac-mirror/commit/099e1faa8421c0e23fecf978397165ce89699926)**



---

archive/issue_comments_458388.json:
```json
{
    "body": "Changed commit from **[099e1fa](https://github.com/sagemath/sagetrac-mirror/commit/099e1faa8421c0e23fecf978397165ce89699926)** to **[c699a80](https://github.com/sagemath/sagetrac-mirror/commit/c699a80a48352a18f856d0f8543c12dc6010385f)**",
    "created_at": "2020-05-30T21:46:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29222#issuecomment-458388",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[099e1fa](https://github.com/sagemath/sagetrac-mirror/commit/099e1faa8421c0e23fecf978397165ce89699926)** to **[c699a80](https://github.com/sagemath/sagetrac-mirror/commit/c699a80a48352a18f856d0f8543c12dc6010385f)**



---

archive/issue_comments_458389.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c699a80a48352a18f856d0f8543c12dc6010385f\">c699a80</a></td><td><code>other valueerror</code></td></tr></table>\n",
    "created_at": "2020-05-30T21:46:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29222#issuecomment-458389",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c699a80a48352a18f856d0f8543c12dc6010385f">c699a80</a></td><td><code>other valueerror</code></td></tr></table>




---

archive/issue_comments_458390.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\none doctest for the ValueError does not pass, and seems to trigger the other one instead",
    "created_at": "2020-06-04T19:06:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29222#issuecomment-458390",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:14" align="right">comment:14</div>

one doctest for the ValueError does not pass, and seems to trigger the other one instead



---

archive/issue_events_401760.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-07-02T19:48:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29222#event-401760"
}
```



---

archive/issue_events_401761.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-07-02T19:48:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29222#event-401761"
}
```



---

archive/issue_events_401762.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29222#event-401762"
}
```



---

archive/issue_events_401763.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29222#event-401763"
}
```



---

archive/issue_comments_458391.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c046b390e4dc6b21c729a9836bf015426870dd98\">c046b39</a></td><td><code>Merge branch 'master' of git://github.com/sagemath/sage into lip</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/17099aba137872f8ccb9f19a0ec9429e92df0f4a\">17099ab</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into lip</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e0abdc0f7fe0aff9c7677430fcd1518ee55fe8de\">e0abdc0</a></td><td><code>use numerical comparisons for logs, fix doctests</code></td></tr></table>\n",
    "created_at": "2020-10-20T20:39:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29222#issuecomment-458391",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c046b390e4dc6b21c729a9836bf015426870dd98">c046b39</a></td><td><code>Merge branch 'master' of git://github.com/sagemath/sage into lip</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/17099aba137872f8ccb9f19a0ec9429e92df0f4a">17099ab</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into lip</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e0abdc0f7fe0aff9c7677430fcd1518ee55fe8de">e0abdc0</a></td><td><code>use numerical comparisons for logs, fix doctests</code></td></tr></table>




---

archive/issue_comments_458392.json:
```json
{
    "body": "Changed commit from **[c699a80](https://github.com/sagemath/sagetrac-mirror/commit/c699a80a48352a18f856d0f8543c12dc6010385f)** to **[e0abdc0](https://github.com/sagemath/sagetrac-mirror/commit/e0abdc0f7fe0aff9c7677430fcd1518ee55fe8de)**",
    "created_at": "2020-10-20T20:39:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29222#issuecomment-458392",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c699a80](https://github.com/sagemath/sagetrac-mirror/commit/c699a80a48352a18f856d0f8543c12dc6010385f)** to **[e0abdc0](https://github.com/sagemath/sagetrac-mirror/commit/e0abdc0f7fe0aff9c7677430fcd1518ee55fe8de)**



---

archive/issue_comments_458393.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nThere appears to be some memory leak type problems with the polylog functions as the code\n\n```\nfor p in prime_range(100):\n    K = Qp(p,prec=10)\n    print(p)\n    for t in K.teichmuller_system():\n        if t == 1:      \n            continue    \n        l = t.polylog(2)\n        print(p,l)\n```\neats more and more memory which isn't freed at the end.\n\nI don't think these problems were necessarily introduced in this ticket, but nevertheless I'd like to diagnose them if anyone has any suggestions how to find the leaks or advice about likely culprits in the code.",
    "created_at": "2020-10-20T21:45:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29222#issuecomment-458393",
    "user": "https://github.com/alexjbest"
}
```

<div id="comment:18" align="right">comment:18</div>

There appears to be some memory leak type problems with the polylog functions as the code

```
for p in prime_range(100):
    K = Qp(p,prec=10)
    print(p)
    for t in K.teichmuller_system():
        if t == 1:      
            continue    
        l = t.polylog(2)
        print(p,l)
```
eats more and more memory which isn't freed at the end.

I don't think these problems were necessarily introduced in this ticket, but nevertheless I'd like to diagnose them if anyone has any suggestions how to find the leaks or advice about likely culprits in the code.



---

archive/issue_comments_458394.json:
```json
{
    "body": "Changed work issues from **wait for patchbots** to **fix leaks?**",
    "created_at": "2020-10-20T21:45:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29222#issuecomment-458394",
    "user": "https://github.com/alexjbest"
}
```

Changed work issues from **wait for patchbots** to **fix leaks?**



---

archive/issue_events_401764.json:
```json
{
    "actor": "https://github.com/alexjbest",
    "created_at": "2020-10-20T21:45:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29222#event-401764"
}
```



---

archive/issue_events_401765.json:
```json
{
    "actor": "https://github.com/alexjbest",
    "created_at": "2020-10-20T21:45:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29222#event-401765"
}
```



---

archive/issue_comments_458395.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/528197349e2f6aee483ed2ebb5d18cc28b764ca7\">5281973</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into lip</code></td></tr></table>\n",
    "created_at": "2020-10-20T21:50:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29222#issuecomment-458395",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/528197349e2f6aee483ed2ebb5d18cc28b764ca7">5281973</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into lip</code></td></tr></table>




---

archive/issue_comments_458396.json:
```json
{
    "body": "Changed commit from **[e0abdc0](https://github.com/sagemath/sagetrac-mirror/commit/e0abdc0f7fe0aff9c7677430fcd1518ee55fe8de)** to **[5281973](https://github.com/sagemath/sagetrac-mirror/commit/528197349e2f6aee483ed2ebb5d18cc28b764ca7)**",
    "created_at": "2020-10-20T21:50:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29222#issuecomment-458396",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e0abdc0](https://github.com/sagemath/sagetrac-mirror/commit/e0abdc0f7fe0aff9c7677430fcd1518ee55fe8de)** to **[5281973](https://github.com/sagemath/sagetrac-mirror/commit/528197349e2f6aee483ed2ebb5d18cc28b764ca7)**



---

archive/issue_comments_458397.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nThe memory leaks could be the same issue as #27536 it appears there are many `sage.rings.real_mpfr.RealNumber` left on the heap.",
    "created_at": "2020-11-13T22:14:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29222#issuecomment-458397",
    "user": "https://github.com/alexjbest"
}
```

<div id="comment:20" align="right">comment:20</div>

The memory leaks could be the same issue as #27536 it appears there are many `sage.rings.real_mpfr.RealNumber` left on the heap.



---

archive/issue_events_401766.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-15T22:07:04Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29222#event-401766"
}
```



---

archive/issue_events_401767.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-15T22:07:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29222#event-401767"
}
```



---

archive/issue_comments_458398.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-15T22:07:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29222#issuecomment-458398",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:21" align="right">comment:21</div>

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_401768.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2021-04-28T21:08:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29222#event-401768"
}
```



---

archive/issue_events_401769.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2021-04-28T21:08:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29222#event-401769"
}
```



---

archive/issue_comments_458399.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nOverall this looks good to me.\n\nHave you made any progress on the memory leak?  I don't have any suggestions off the top of my head.  I think it's fine to create another ticket for that issue.\n\nYou use the `.n()` numerical approximation extensively.  Would it be better to specify the precision of the real field to use?  I'm also not sure if people like seeing the symbolic expression in some cases.  Maybe have a precision parameter that defaults to 53, but if it's set to None uses symbolic logs?\n\nI'm happy giving this a positive review if you don't want to work on either of these.",
    "created_at": "2021-04-28T21:08:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29222#issuecomment-458399",
    "user": "https://github.com/roed314"
}
```

<div id="comment:22" align="right">comment:22</div>

Overall this looks good to me.

Have you made any progress on the memory leak?  I don't have any suggestions off the top of my head.  I think it's fine to create another ticket for that issue.

You use the `.n()` numerical approximation extensively.  Would it be better to specify the precision of the real field to use?  I'm also not sure if people like seeing the symbolic expression in some cases.  Maybe have a precision parameter that defaults to 53, but if it's set to None uses symbolic logs?

I'm happy giving this a positive review if you don't want to work on either of these.



---

archive/issue_comments_458400.json:
```json
{
    "body": "Reviewer: **Frederic Chapoton, David Roe**",
    "created_at": "2021-04-28T21:08:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29222#issuecomment-458400",
    "user": "https://github.com/roed314"
}
```

Reviewer: **Frederic Chapoton, David Roe**



---

archive/issue_comments_458401.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nI haven't made progress on the leak, #27536 seems to have stalled too, so I think your suggestion of merging this as is and making a separate ticket sounds good.\n\nMost of the `.n()` parts are just for determining various cutoffs for correct precision bounds, for most of these numbers only the integer part of the result matters.\nI doubt anyone would want to look at them symbolically, or that more than 53 digits of precision would be needed. The motivation for the numerical approximations was that a lot of time was being wasted comparing various symbolic expressions to see which is larger, when comparing numerical approximations was far faster.\nI could write these sorts of things as `RR(gsl-1).log(p)` instead I suppose, but I don't think it would make too much difference?\n\nSo I don't propose making further changes, unless you have more thoughts on these two issues mentioned of course!",
    "created_at": "2021-05-10T22:51:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29222#issuecomment-458401",
    "user": "https://github.com/alexjbest"
}
```

<div id="comment:23" align="right">comment:23</div>

I haven't made progress on the leak, #27536 seems to have stalled too, so I think your suggestion of merging this as is and making a separate ticket sounds good.

Most of the `.n()` parts are just for determining various cutoffs for correct precision bounds, for most of these numbers only the integer part of the result matters.
I doubt anyone would want to look at them symbolically, or that more than 53 digits of precision would be needed. The motivation for the numerical approximations was that a lot of time was being wasted comparing various symbolic expressions to see which is larger, when comparing numerical approximations was far faster.
I could write these sorts of things as `RR(gsl-1).log(p)` instead I suppose, but I don't think it would make too much difference?

So I don't propose making further changes, unless you have more thoughts on these two issues mentioned of course!



---

archive/issue_comments_458402.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nSounds good to me.",
    "created_at": "2021-05-14T18:15:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29222#issuecomment-458402",
    "user": "https://github.com/roed314"
}
```

<div id="comment:24" align="right">comment:24</div>

Sounds good to me.



---

archive/issue_comments_458403.json:
```json
{
    "body": "Changed work issues from **fix leaks?** to none",
    "created_at": "2021-05-14T18:15:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29222#issuecomment-458403",
    "user": "https://github.com/roed314"
}
```

Changed work issues from **fix leaks?** to none



---

archive/issue_events_401770.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2021-05-14T18:15:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29222#event-401770"
}
```



---

archive/issue_events_401771.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2021-05-14T18:15:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29222#event-401771"
}
```



---

archive/issue_comments_458404.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nLeak issue now tracked at #31826.",
    "created_at": "2021-05-15T11:37:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29222#issuecomment-458404",
    "user": "https://github.com/slel"
}
```

<div id="comment:25" align="right">comment:25</div>

Leak issue now tracked at #31826.



---

archive/issue_events_401772.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-06-06T13:19:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29222#event-401772"
}
```



---

archive/issue_events_401773.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "9f031cdb059a45622cc2791f68a78e230d2c86f8",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-06-06T13:19:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29222#event-401773"
}
```



---

archive/issue_comments_458405.json:
```json
{
    "body": "Changed branch from **[u/alexjbest/lip](https://github.com/sagemath/sagetrac-mirror/tree/u/alexjbest/lip)** to **[5281973](https://github.com/sagemath/sagetrac-mirror/commit/528197349e2f6aee483ed2ebb5d18cc28b764ca7)**",
    "created_at": "2021-06-06T13:19:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29222#issuecomment-458405",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/alexjbest/lip](https://github.com/sagemath/sagetrac-mirror/tree/u/alexjbest/lip)** to **[5281973](https://github.com/sagemath/sagetrac-mirror/commit/528197349e2f6aee483ed2ebb5d18cc28b764ca7)**



---

archive/issue_comments_458406.json:
```json
{
    "body": "Changed commit from **[5281973](https://github.com/sagemath/sagetrac-mirror/commit/528197349e2f6aee483ed2ebb5d18cc28b764ca7)** to none",
    "created_at": "2021-08-22T20:45:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29222#issuecomment-458406",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[5281973](https://github.com/sagemath/sagetrac-mirror/commit/528197349e2f6aee483ed2ebb5d18cc28b764ca7)** to none



---

archive/issue_comments_458407.json:
```json
{
    "body": "Changed reviewer from **Frederic Chapoton, David Roe** to **Fr\u00e9d\u00e9ric Chapoton, David Roe**",
    "created_at": "2021-08-22T20:45:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29222#issuecomment-458407",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **Frederic Chapoton, David Roe** to **Frédéric Chapoton, David Roe**
