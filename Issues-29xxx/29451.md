# Issue 29451: PARI/GP segfault with XCode 11.4 on local-homebrew-macos-standard

archive/issues_029214.json:
```json
{
    "body": "First reported in https://groups.google.com/d/msg/sage-release/kU5M1QVuQQY/Zu10Q-CKAwAJ\n\nPARI fails its testsuite with \"bug in PARI/GP (Segmentation Fault), please report.\"\n\nConsequently, also many sagelib doctest failures of this kind:\n\n```\nFile \"src/sage/arith/misc.py\", line 5801, in sage.arith.misc.dedekind_sum\nFailed example:\n    dedekind_sum(3^54 - 1, 2^93 + 1, algorithm='pari')\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-macos-standard-nokegonly-python3_xcode/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-macos-standard-nokegonly-python3_xcode/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1123, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.arith.misc.dedekind_sum[6]>\", line 1, in <module>\n        dedekind_sum(Integer(3)**Integer(54) - Integer(1), Integer(2)**Integer(93) + Integer(1), algorithm='pari')\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-macos-standard-nokegonly-python3_xcode/local/lib/python3.7/site-packages/sage/arith/misc.py\", line 5839, in dedekind_sum\n        x = sage.interfaces.gp.gp('sumdedekind(%s,%s)' % (p, q))\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-macos-standard-nokegonly-python3_xcode/local/lib/python3.7/site-packages/sage/interfaces/interface.py\", line 297, in __call__\n        return cls(self, x, name=name)\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-macos-standard-nokegonly-python3_xcode/local/lib/python3.7/site-packages/sage/interfaces/expect.py\", line 1471, in __init__\n        self._name = parent._create(value, name=name)\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-macos-standard-nokegonly-python3_xcode/local/lib/python3.7/site-packages/sage/interfaces/interface.py\", line 502, in _create\n        self.set(name, value)\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-macos-standard-nokegonly-python3_xcode/local/lib/python3.7/site-packages/sage/interfaces/gp.py\", line 561, in set\n        raise TypeError(\"Error executing code in GP:\\nCODE:\\n\\t%s\\nPARI/GP ERROR:\\n%s\"%(cmd, out))\n    TypeError: Error executing code in GP:\n    CODE:\n    \tsage[2]=sumdedekind(58149737003040059690390168,9903520314283042199192993793);\n    PARI/GP ERROR:\n      ***   bug in PARI/GP (Segmentation Fault), please report.\n**********************************************************************\n```\n\nTo reproduce (with #29417): \n- `tox -e local-homebrew-macos-standard-nokegonly-python3_xcode -- SAGE_CHECK=yes pari`\n- `tox -e local-homebrew-macos-standard -- SAGE_CHECK=yes pari`\n\n\nCC:  @jhpalmieri\n\nBranch/Commit: ef6ecf4e857541f253e114ad12d99304627e4eeb\n\nReviewer: John Palmieri\n\nAuthor: Matthias Koeppe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29451\n\n",
    "closed_at": "2020-04-09T22:45:17Z",
    "created_at": "2020-04-02T21:30:49Z",
    "labels": [
        "component: porting",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "PARI/GP segfault with XCode 11.4 on local-homebrew-macos-standard",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29451",
    "user": "https://github.com/mkoeppe"
}
```
First reported in https://groups.google.com/d/msg/sage-release/kU5M1QVuQQY/Zu10Q-CKAwAJ

PARI fails its testsuite with "bug in PARI/GP (Segmentation Fault), please report."

Consequently, also many sagelib doctest failures of this kind:

```
File "src/sage/arith/misc.py", line 5801, in sage.arith.misc.dedekind_sum
Failed example:
    dedekind_sum(3^54 - 1, 2^93 + 1, algorithm='pari')
Exception raised:
    Traceback (most recent call last):
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-macos-standard-nokegonly-python3_xcode/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-macos-standard-nokegonly-python3_xcode/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.arith.misc.dedekind_sum[6]>", line 1, in <module>
        dedekind_sum(Integer(3)**Integer(54) - Integer(1), Integer(2)**Integer(93) + Integer(1), algorithm='pari')
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-macos-standard-nokegonly-python3_xcode/local/lib/python3.7/site-packages/sage/arith/misc.py", line 5839, in dedekind_sum
        x = sage.interfaces.gp.gp('sumdedekind(%s,%s)' % (p, q))
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-macos-standard-nokegonly-python3_xcode/local/lib/python3.7/site-packages/sage/interfaces/interface.py", line 297, in __call__
        return cls(self, x, name=name)
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-macos-standard-nokegonly-python3_xcode/local/lib/python3.7/site-packages/sage/interfaces/expect.py", line 1471, in __init__
        self._name = parent._create(value, name=name)
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-macos-standard-nokegonly-python3_xcode/local/lib/python3.7/site-packages/sage/interfaces/interface.py", line 502, in _create
        self.set(name, value)
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-homebrew-macos-standard-nokegonly-python3_xcode/local/lib/python3.7/site-packages/sage/interfaces/gp.py", line 561, in set
        raise TypeError("Error executing code in GP:\nCODE:\n\t%s\nPARI/GP ERROR:\n%s"%(cmd, out))
    TypeError: Error executing code in GP:
    CODE:
    	sage[2]=sumdedekind(58149737003040059690390168,9903520314283042199192993793);
    PARI/GP ERROR:
      ***   bug in PARI/GP (Segmentation Fault), please report.
**********************************************************************
```

To reproduce (with #29417): 
- `tox -e local-homebrew-macos-standard-nokegonly-python3_xcode -- SAGE_CHECK=yes pari`
- `tox -e local-homebrew-macos-standard -- SAGE_CHECK=yes pari`


CC:  @jhpalmieri

Branch/Commit: ef6ecf4e857541f253e114ad12d99304627e4eeb

Reviewer: John Palmieri

Author: Matthias Koeppe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29451





---

archive/issue_comments_575357.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,8 @@\n First reported in https://groups.google.com/d/msg/sage-release/kU5M1QVuQQY/Zu10Q-CKAwAJ\n \n-Many doctest failures of this kind:\n+PARI fails its testsuite with \"bug in PARI/GP (Segmentation Fault), please report.\"\n+\n+Consequently, also many sagelib doctest failures of this kind:\n \n ```\n File \"src/sage/arith/misc.py\", line 5801, in sage.arith.misc.dedekind_sum\n``````\n",
    "created_at": "2020-04-02T21:33:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29451#issuecomment-575357",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,8 @@
 First reported in https://groups.google.com/d/msg/sage-release/kU5M1QVuQQY/Zu10Q-CKAwAJ
 
-Many doctest failures of this kind:
+PARI fails its testsuite with "bug in PARI/GP (Segmentation Fault), please report."
+
+Consequently, also many sagelib doctest failures of this kind:
 
 ```
 File "src/sage/arith/misc.py", line 5801, in sage.arith.misc.dedekind_sum
``````




---

archive/issue_comments_575358.json:
```json
{
    "body": "<a id='comment:2'></a>This appears to be specific to Xcode 11.4. I just installed 9.1.beta9 on a machine with Xcode 11.3.1 and (for example) the file `schemes/elliptic_curves/ell_rational_field.py` passed tests. I upgraded that machine to use Xcode 11.4, rebuilt Sage, and then I hit these segfaults.\n\nThe new Xcode also leads to this in the top-level `config.log`:\n\n```\nclang: error: unable to execute command: Broken pipe: 13\nclang: error: clang frontend command failed due to signal (use -v to see invocation)\nApple clang version 11.0.3 (clang-1103.0.32.29)\nTarget: x86_64-apple-darwin19.3.0\nThread model: posix\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\nclang: note: diagnostic msg: PLEASE submit a bug report to http://developer.apple.com/bugreporter/ and include the crash backtrace, preprocessed source, and associated run script.\nclang: note: diagnostic msg: \n********************\n\nPLEASE ATTACH THE FOLLOWING FILES TO THE BUG REPORT:\nPreprocessed source(s) and associated run script(s) are located at:\nclang: note: diagnostic msg: /var/folders/cp/n8wtqs490tq5psknff1hv9qr0000gn/T/conftest-d428b4.cpp\nclang: note: diagnostic msg: /var/folders/cp/n8wtqs490tq5psknff1hv9qr0000gn/T/conftest-d428b4.sh\nclang: note: diagnostic msg: Crash backtrace is located in\nclang: note: diagnostic msg: /Users/palmieri/Library/Logs/DiagnosticReports/clang_<YYYY-MM-DD-HHMMSS>_<hostname>.crash\nclang: note: diagnostic msg: (choose the .crash file that corresponds to your crash)\nclang: note: diagnostic msg: \n\n```\nThis message did not appear in 11.3.1. Is there a connection?",
    "created_at": "2020-04-02T23:52:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29451#issuecomment-575358",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:2'></a>This appears to be specific to Xcode 11.4. I just installed 9.1.beta9 on a machine with Xcode 11.3.1 and (for example) the file `schemes/elliptic_curves/ell_rational_field.py` passed tests. I upgraded that machine to use Xcode 11.4, rebuilt Sage, and then I hit these segfaults.

The new Xcode also leads to this in the top-level `config.log`:

```
clang: error: unable to execute command: Broken pipe: 13
clang: error: clang frontend command failed due to signal (use -v to see invocation)
Apple clang version 11.0.3 (clang-1103.0.32.29)
Target: x86_64-apple-darwin19.3.0
Thread model: posix
InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin
clang: note: diagnostic msg: PLEASE submit a bug report to http://developer.apple.com/bugreporter/ and include the crash backtrace, preprocessed source, and associated run script.
clang: note: diagnostic msg: 
********************

PLEASE ATTACH THE FOLLOWING FILES TO THE BUG REPORT:
Preprocessed source(s) and associated run script(s) are located at:
clang: note: diagnostic msg: /var/folders/cp/n8wtqs490tq5psknff1hv9qr0000gn/T/conftest-d428b4.cpp
clang: note: diagnostic msg: /var/folders/cp/n8wtqs490tq5psknff1hv9qr0000gn/T/conftest-d428b4.sh
clang: note: diagnostic msg: Crash backtrace is located in
clang: note: diagnostic msg: /Users/palmieri/Library/Logs/DiagnosticReports/clang_<YYYY-MM-DD-HHMMSS>_<hostname>.crash
clang: note: diagnostic msg: (choose the .crash file that corresponds to your crash)
clang: note: diagnostic msg: 

```
This message did not appear in 11.3.1. Is there a connection?



---

archive/issue_comments_575359.json:
```json
{
    "body": "<a id='comment:3'></a>I also started to see the segfaults only after updating XCode.",
    "created_at": "2020-04-03T00:23:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29451#issuecomment-575359",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>I also started to see the segfaults only after updating XCode.



---

archive/issue_comments_575360.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -34,5 +34,7 @@\n **********************************************************************\n ```\n \n-To reproduce (with #29417): `tox -e local-homebrew-macos-standard-nokegonly-python3_xcode -- ptest`\n+To reproduce (with #29417): \n+- `tox -e local-homebrew-macos-standard-nokegonly-python3_xcode -- SAGE_CHECK=yes pari`\n+- `tox -e local-homebrew-macos-standard -- SAGE_CHECK=yes pari`\n \n``````\n",
    "created_at": "2020-04-03T00:28:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29451#issuecomment-575360",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -34,5 +34,7 @@
 **********************************************************************
 ```
 
-To reproduce (with #29417): `tox -e local-homebrew-macos-standard-nokegonly-python3_xcode -- ptest`
+To reproduce (with #29417): 
+- `tox -e local-homebrew-macos-standard-nokegonly-python3_xcode -- SAGE_CHECK=yes pari`
+- `tox -e local-homebrew-macos-standard -- SAGE_CHECK=yes pari`
 
``````




---

archive/issue_comments_575361.json:
```json
{
    "body": "Changing priority from major to blocker.",
    "created_at": "2020-04-03T09:53:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29451#issuecomment-575361",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from major to blocker.



---

archive/issue_comments_575362.json:
```json
{
    "body": "<a id='comment:6'></a>I also don't see this if I use \"--with-system-python3=no\". Does that make any sense?",
    "created_at": "2020-04-03T16:19:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29451#issuecomment-575362",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:6'></a>I also don't see this if I use "--with-system-python3=no". Does that make any sense?



---

archive/issue_comments_575363.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [jhpalmieri](#comment%3A6):\n> I also don't see this if I use \"--with-system-python3=no\". \n\n\nYes, I can confirm this. This configuration is now `local-homebrew-macos-standard-python3_spkg` in #29417.",
    "created_at": "2020-04-03T20:43:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29451#issuecomment-575363",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>Replying to [jhpalmieri](#comment%3A6):
> I also don't see this if I use "--with-system-python3=no". 


Yes, I can confirm this. This configuration is now `local-homebrew-macos-standard-python3_spkg` in #29417.



---

archive/issue_comments_575364.json:
```json
{
    "body": "<a id='comment:8'></a>`MACOSX_DEPLOYMENT_TARGET` is the problem. This is set in `sage-env` depending on whether we use system python3 or not. I'll investigate more.",
    "created_at": "2020-04-03T20:52:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29451#issuecomment-575364",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>`MACOSX_DEPLOYMENT_TARGET` is the problem. This is set in `sage-env` depending on whether we use system python3 or not. I'll investigate more.



---

archive/issue_comments_575365.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/pari_gp_segfault_with_xcode_11_4_on_local_homebrew_macos_standard\"",
    "created_at": "2020-04-03T21:38:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29451#issuecomment-575365",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/pari_gp_segfault_with_xcode_11_4_on_local_homebrew_macos_standard"



---

archive/issue_comments_575366.json:
```json
{
    "body": "<a id='comment:10'></a>Related previous ticket:\n- #17204: OSX Yosemite libtool version detection\n \n---\nNew commits:",
    "created_at": "2020-04-03T21:38:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29451#issuecomment-575366",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>Related previous ticket:
- #17204: OSX Yosemite libtool version detection
 
---
New commits:



---

archive/issue_comments_575367.json:
```json
{
    "body": "Changing commit from \"\" to \"79cd878b7fa7dac35626596deb488ae390269b79\"",
    "created_at": "2020-04-03T21:38:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29451#issuecomment-575367",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "79cd878b7fa7dac35626596deb488ae390269b79"



---

archive/issue_comments_575368.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-03T21:41:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29451#issuecomment-575368",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_575369.json:
```json
{
    "body": "Changing commit from \"79cd878b7fa7dac35626596deb488ae390269b79\" to \"ef6ecf4e857541f253e114ad12d99304627e4eeb\"",
    "created_at": "2020-04-03T21:41:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29451#issuecomment-575369",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "79cd878b7fa7dac35626596deb488ae390269b79" to "ef6ecf4e857541f253e114ad12d99304627e4eeb"



---

archive/issue_comments_575370.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-04-03T22:01:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29451#issuecomment-575370",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_575371.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2020-04-03T22:01:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29451#issuecomment-575371",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_575372.json:
```json
{
    "body": "Changing author from \"Matthias Koeppe\" to \"\"",
    "created_at": "2020-04-03T23:56:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29451#issuecomment-575372",
    "user": "https://github.com/jhpalmieri"
}
```

Changing author from "Matthias Koeppe" to ""



---

archive/issue_comments_575373.json:
```json
{
    "body": "<a id='comment:13'></a>See also #18272.",
    "created_at": "2020-04-03T23:56:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29451#issuecomment-575373",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:13'></a>See also #18272.



---

archive/issue_comments_575374.json:
```json
{
    "body": "<a id='comment:14'></a>This fixes Pari for me \u2014 its test suite passes \u2014 but I still see lots of doctest failures:\n\n```\nsage -t --long --warn-long 75.1 src/sage/misc/sagedoc.py  # 2 doctests failed\nsage -t --long --warn-long 75.1 src/sage/tests/cmdline.py  # 4 doctests failed\nsage -t --long --warn-long 75.1 src/sage/misc/sageinspect.py  # 35 doctests failed\nsage -t --long --warn-long 75.1 src/sage/repl/ipython_extension.py  # 2 doctests failed\nsage -t --long --warn-long 75.1 src/sage/structure/element.pyx  # 44 doctests failed\nsage -t --long --warn-long 75.1 src/sage/misc/cachefunc.pyx  # 54 doctests failed\nsage -t --long --warn-long 75.1 src/sage/geometry/polyhedron/combinatorial_polyhedron/conversions.pyx  # 24 doctests failed\nsage -t --long --warn-long 75.1 src/sage/graphs/connectivity.pyx  # 2 doctests failed\nsage -t --long --warn-long 75.1 src/sage/misc/cython.py  # 19 doctests failed\nsage -t --long --warn-long 75.1 src/sage/parallel/decorate.py  # 2 doctests failed\nsage -t --long --warn-long 75.1 src/sage/features/__init__.py  # 2 doctests failed\nsage -t --long --warn-long 75.1 src/sage/ext/memory_allocator.pxd  # 3 doctests failed\nsage -t --long --warn-long 75.1 src/sage/ext/memory_allocator.pyx  # 6 doctests failed\nsage -t --long --warn-long 75.1 src/sage/libs/pynac/pynac.pxd  # 1 doctest failed\nsage -t --long --warn-long 75.1 src/sage/cpython/cython_metaclass.pyx  # 4 doctests failed\nsage -t --long --warn-long 75.1 src/sage/arith/long.pxd  # 14 doctests failed\nsage -t --long --warn-long 75.1 src/sage/structure/factory.pyx  # 8 doctests failed\nsage -t --long --warn-long 75.1 src/sage/cpython/getattr.pyx  # 4 doctests failed\nsage -t --long --warn-long 75.1 src/sage/geometry/polyhedron/combinatorial_polyhedron/polyhedron_face_lattice.pyx  # 9 doctests failed\nsage -t --long --warn-long 75.1 src/sage/misc/superseded.py  # 2 doctests failed\nsage -t --long --warn-long 75.1 src/sage/misc/lazy_attribute.pyx  # 3 doctests failed\nsage -t --long --warn-long 75.1 src/sage/misc/inherit_comparison.pyx  # 5 doctests failed\nsage -t --long --warn-long 75.1 src/sage/misc/session.pyx  # 2 doctests failed\nsage -t --long --warn-long 75.1 src/sage/rings/integer_fake.pxd  # 1 doctest failed\nsage -t --long --warn-long 75.1 src/sage/geometry/polyhedron/combinatorial_polyhedron/list_of_faces.pyx  # 1 doctest failed\nsage -t --long --warn-long 75.1 src/sage/docs/instancedoc.pyx  # 4 doctests failed\nsage -t --long --warn-long 75.1 src/sage/libs/glpk/error.pyx  # 1 doctest failed\nsage -t --long --warn-long 75.1 src/sage/repl/load.py  # 2 doctests failed\nsage -t --long --warn-long 75.1 src/sage/cpython/wrapperdescr.pxd  # 6 doctests failed\nsage -t --long --warn-long 75.1 src/sage/misc/nested_class.pyx  # 6 doctests failed\nsage -t --long --warn-long 75.1 src/sage/cpython/string.pyx  # 1 doctest failed\n```\nOne such failure:\n\n```\nFile \"src/sage/misc/sagedoc.py\", line 647, in sage.misc.sagedoc.format\nFailed example:\n    cython('\\n'.join(cython_code))\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/local/Cellar/python/3.7.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/unixccompiler.py\", line 204, in link\n        self.spawn(linker + ld_args)\n      File \"/usr/local/Cellar/python/3.7.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/ccompiler.py\", line 910, in spawn\n        spawn(cmd, dry_run=self.dry_run)\n      File \"/usr/local/Cellar/python/3.7.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/spawn.py\", line 36, in spawn\n        _spawn_posix(cmd, search_path, dry_run=dry_run)\n      File \"/usr/local/Cellar/python/3.7.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/spawn.py\", line 159, in _spawn_posix\n        % (cmd, exit_status))\n    distutils.errors.DistutilsExecError: command 'gcc' failed with exit status 1\n\n    During handling of the above exception, another exception occurred:\n\n    Traceback (most recent call last):\n      File \"/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/default/sage-9.1.beta9/local/lib/python3.7/site-packages/sage/misc/cython.py\", line 372, in cython\n        dist.run_command(\"build\")\n      File \"/usr/local/Cellar/python/3.7.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/dist.py\", line 985, in run_command\n        cmd_obj.run()\n      File \"/usr/local/Cellar/python/3.7.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/command/build.py\", line 135, in run\n        self.run_command(cmd_name)\n      File \"/usr/local/Cellar/python/3.7.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/cmd.py\", line 313, in run_command\n        self.distribution.run_command(command)\n      File \"/usr/local/Cellar/python/3.7.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/dist.py\", line 985, in run_command\n        cmd_obj.run()\n      File \"/usr/local/Cellar/python/3.7.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/command/build_ext.py\", line 340, in run\n        self.build_extensions()\n      File \"/usr/local/Cellar/python/3.7.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/command/build_ext.py\", line 449, in build_extensions\n        self._build_extensions_serial()\n      File \"/usr/local/Cellar/python/3.7.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/command/build_ext.py\", line 474, in _build_extensions_serial\n        self.build_extension(ext)\n      File \"/usr/local/Cellar/python/3.7.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/command/build_ext.py\", line 559, in build_extension\n        target_lang=language)\n      File \"/usr/local/Cellar/python/3.7.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/ccompiler.py\", line 717, in link_shared_object\n        extra_preargs, extra_postargs, build_temp, target_lang)\n      File \"/usr/local/Cellar/python/3.7.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/unixccompiler.py\", line 206, in link\n        raise LinkError(msg)\n    distutils.errors.LinkError: command 'gcc' failed with exit status 1\n\n    During handling of the above exception, another exception occurred:\n\n    Traceback (most recent call last):\n      File \"/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/default/sage-9.1.beta9/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/default/sage-9.1.beta9/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1123, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.misc.sagedoc.format[9]>\", line 1, in <module>\n        cython('\\n'.join(cython_code))\n      File \"sage/misc/lazy_import.pyx\", line 353, in sage.misc.lazy_import.LazyImport.__call__ (build/cythonized/sage/misc/lazy_import.c:3686)\n        return self.get_object()(*args, **kwds)\n      File \"/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/default/sage-9.1.beta9/local/lib/python3.7/site-packages/sage/misc/cython.py\", line 634, in cython_compile\n        return cython_import_all(tmpfile, get_globals(), **kwds)\n      File \"/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/default/sage-9.1.beta9/local/lib/python3.7/site-packages/sage/misc/cython.py\", line 524, in cython_import_all\n        m = cython_import(filename, **kwds)\n      File \"/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/default/sage-9.1.beta9/local/lib/python3.7/site-packages/sage/misc/cython.py\", line 499, in cython_import\n        name, build_dir = cython(filename, **kwds)\n      File \"/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/default/sage-9.1.beta9/local/lib/python3.7/site-packages/sage/misc/cython.py\", line 378, in cython\n        raise RuntimeError(msg.strip())\n    RuntimeError: command 'gcc' failed with exit status 1\n    ld: library not found for -lmpfr\n    clang: error: linker command failed with exit code 1 (use -v to see invocation)\n```\nThis is with Homebrew's Python. I'm also trying with the system Python; I've already verified that Pari's test suite passes with that setup, but the rest of the build hasn't finished yet.",
    "created_at": "2020-04-04T00:12:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29451#issuecomment-575374",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:14'></a>This fixes Pari for me — its test suite passes — but I still see lots of doctest failures:

```
sage -t --long --warn-long 75.1 src/sage/misc/sagedoc.py  # 2 doctests failed
sage -t --long --warn-long 75.1 src/sage/tests/cmdline.py  # 4 doctests failed
sage -t --long --warn-long 75.1 src/sage/misc/sageinspect.py  # 35 doctests failed
sage -t --long --warn-long 75.1 src/sage/repl/ipython_extension.py  # 2 doctests failed
sage -t --long --warn-long 75.1 src/sage/structure/element.pyx  # 44 doctests failed
sage -t --long --warn-long 75.1 src/sage/misc/cachefunc.pyx  # 54 doctests failed
sage -t --long --warn-long 75.1 src/sage/geometry/polyhedron/combinatorial_polyhedron/conversions.pyx  # 24 doctests failed
sage -t --long --warn-long 75.1 src/sage/graphs/connectivity.pyx  # 2 doctests failed
sage -t --long --warn-long 75.1 src/sage/misc/cython.py  # 19 doctests failed
sage -t --long --warn-long 75.1 src/sage/parallel/decorate.py  # 2 doctests failed
sage -t --long --warn-long 75.1 src/sage/features/__init__.py  # 2 doctests failed
sage -t --long --warn-long 75.1 src/sage/ext/memory_allocator.pxd  # 3 doctests failed
sage -t --long --warn-long 75.1 src/sage/ext/memory_allocator.pyx  # 6 doctests failed
sage -t --long --warn-long 75.1 src/sage/libs/pynac/pynac.pxd  # 1 doctest failed
sage -t --long --warn-long 75.1 src/sage/cpython/cython_metaclass.pyx  # 4 doctests failed
sage -t --long --warn-long 75.1 src/sage/arith/long.pxd  # 14 doctests failed
sage -t --long --warn-long 75.1 src/sage/structure/factory.pyx  # 8 doctests failed
sage -t --long --warn-long 75.1 src/sage/cpython/getattr.pyx  # 4 doctests failed
sage -t --long --warn-long 75.1 src/sage/geometry/polyhedron/combinatorial_polyhedron/polyhedron_face_lattice.pyx  # 9 doctests failed
sage -t --long --warn-long 75.1 src/sage/misc/superseded.py  # 2 doctests failed
sage -t --long --warn-long 75.1 src/sage/misc/lazy_attribute.pyx  # 3 doctests failed
sage -t --long --warn-long 75.1 src/sage/misc/inherit_comparison.pyx  # 5 doctests failed
sage -t --long --warn-long 75.1 src/sage/misc/session.pyx  # 2 doctests failed
sage -t --long --warn-long 75.1 src/sage/rings/integer_fake.pxd  # 1 doctest failed
sage -t --long --warn-long 75.1 src/sage/geometry/polyhedron/combinatorial_polyhedron/list_of_faces.pyx  # 1 doctest failed
sage -t --long --warn-long 75.1 src/sage/docs/instancedoc.pyx  # 4 doctests failed
sage -t --long --warn-long 75.1 src/sage/libs/glpk/error.pyx  # 1 doctest failed
sage -t --long --warn-long 75.1 src/sage/repl/load.py  # 2 doctests failed
sage -t --long --warn-long 75.1 src/sage/cpython/wrapperdescr.pxd  # 6 doctests failed
sage -t --long --warn-long 75.1 src/sage/misc/nested_class.pyx  # 6 doctests failed
sage -t --long --warn-long 75.1 src/sage/cpython/string.pyx  # 1 doctest failed
```
One such failure:

```
File "src/sage/misc/sagedoc.py", line 647, in sage.misc.sagedoc.format
Failed example:
    cython('\n'.join(cython_code))
Exception raised:
    Traceback (most recent call last):
      File "/usr/local/Cellar/python/3.7.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/unixccompiler.py", line 204, in link
        self.spawn(linker + ld_args)
      File "/usr/local/Cellar/python/3.7.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/ccompiler.py", line 910, in spawn
        spawn(cmd, dry_run=self.dry_run)
      File "/usr/local/Cellar/python/3.7.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/spawn.py", line 36, in spawn
        _spawn_posix(cmd, search_path, dry_run=dry_run)
      File "/usr/local/Cellar/python/3.7.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/spawn.py", line 159, in _spawn_posix
        % (cmd, exit_status))
    distutils.errors.DistutilsExecError: command 'gcc' failed with exit status 1

    During handling of the above exception, another exception occurred:

    Traceback (most recent call last):
      File "/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/default/sage-9.1.beta9/local/lib/python3.7/site-packages/sage/misc/cython.py", line 372, in cython
        dist.run_command("build")
      File "/usr/local/Cellar/python/3.7.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/dist.py", line 985, in run_command
        cmd_obj.run()
      File "/usr/local/Cellar/python/3.7.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/command/build.py", line 135, in run
        self.run_command(cmd_name)
      File "/usr/local/Cellar/python/3.7.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/cmd.py", line 313, in run_command
        self.distribution.run_command(command)
      File "/usr/local/Cellar/python/3.7.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/dist.py", line 985, in run_command
        cmd_obj.run()
      File "/usr/local/Cellar/python/3.7.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/command/build_ext.py", line 340, in run
        self.build_extensions()
      File "/usr/local/Cellar/python/3.7.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/command/build_ext.py", line 449, in build_extensions
        self._build_extensions_serial()
      File "/usr/local/Cellar/python/3.7.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/command/build_ext.py", line 474, in _build_extensions_serial
        self.build_extension(ext)
      File "/usr/local/Cellar/python/3.7.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/command/build_ext.py", line 559, in build_extension
        target_lang=language)
      File "/usr/local/Cellar/python/3.7.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/ccompiler.py", line 717, in link_shared_object
        extra_preargs, extra_postargs, build_temp, target_lang)
      File "/usr/local/Cellar/python/3.7.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/unixccompiler.py", line 206, in link
        raise LinkError(msg)
    distutils.errors.LinkError: command 'gcc' failed with exit status 1

    During handling of the above exception, another exception occurred:

    Traceback (most recent call last):
      File "/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/default/sage-9.1.beta9/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/default/sage-9.1.beta9/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.misc.sagedoc.format[9]>", line 1, in <module>
        cython('\n'.join(cython_code))
      File "sage/misc/lazy_import.pyx", line 353, in sage.misc.lazy_import.LazyImport.__call__ (build/cythonized/sage/misc/lazy_import.c:3686)
        return self.get_object()(*args, **kwds)
      File "/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/default/sage-9.1.beta9/local/lib/python3.7/site-packages/sage/misc/cython.py", line 634, in cython_compile
        return cython_import_all(tmpfile, get_globals(), **kwds)
      File "/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/default/sage-9.1.beta9/local/lib/python3.7/site-packages/sage/misc/cython.py", line 524, in cython_import_all
        m = cython_import(filename, **kwds)
      File "/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/default/sage-9.1.beta9/local/lib/python3.7/site-packages/sage/misc/cython.py", line 499, in cython_import
        name, build_dir = cython(filename, **kwds)
      File "/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/default/sage-9.1.beta9/local/lib/python3.7/site-packages/sage/misc/cython.py", line 378, in cython
        raise RuntimeError(msg.strip())
    RuntimeError: command 'gcc' failed with exit status 1
    ld: library not found for -lmpfr
    clang: error: linker command failed with exit code 1 (use -v to see invocation)
```
This is with Homebrew's Python. I'm also trying with the system Python; I've already verified that Pari's test suite passes with that setup, but the rest of the build hasn't finished yet.



---

archive/issue_comments_575375.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2020-04-04T00:14:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29451#issuecomment-575375",
    "user": "https://github.com/jhpalmieri"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_575376.json:
```json
{
    "body": "<a id='comment:16'></a>On another machine, only a few failures:\n\n```\nsage -t --long --warn-long 149.7 src/sage/repl/ipython_extension.py  # 4 doctests failed\nsage -t --long --warn-long 149.7 src/sage/misc/persist.pyx  # 2 doctests failed\nsage -t --long --warn-long 149.7 src/sage/misc/inline_fortran.py  # 3 doctests failed\n```\nThese all seem to be Fortran-related. For example:\n\n```\nFile \"src/sage/repl/ipython_extension.py\", line 385, in sage.repl.ipython_extension.SageMagics.fortran\nFailed example:\n    shell.run_cell('''\n    %%fortran\n    C FILE: FIB1.F\n          SUBROUTINE FIB(A,N)\n    C\n    C     CALCULATE FIRST N FIBONACCI NUMBERS\n    C\n          INTEGER N\n          REAL*8 A(N)\n          DO I=1,N\n             IF (I.EQ.1) THEN\n                A(I) = 0.0D0\n             ELSEIF (I.EQ.2) THEN\n                A(I) = 1.0D0\n             ELSE\n                A(I) = A(I-1) + A(I-2)\n             ENDIF\n          ENDDO\n          END\n    C END FILE FIB1.F\n    ''')\nExpected nothing\nGot:\n    ---------------------------------------------------------------------------\n    CalledProcessError                        Traceback (most recent call last)\n    /Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/sage/misc/inline_fortran.py in eval(self, x, globals, locals)\n        190             try:\n    --> 191                 out = subprocess.check_output(cmd, stderr=subprocess.STDOUT)\n        192             except subprocess.CalledProcessError as exc:\n    <BLANKLINE>\n    /Applications/Xcode.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.7/lib/python3.7/subprocess.py in check_output(timeout, *popenargs, **kwargs)\n        394     return run(*popenargs, stdout=PIPE, timeout=timeout, check=True,\n    --> 395                **kwargs).stdout\n        396 \n    <BLANKLINE>\n    /Applications/Xcode.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.7/lib/python3.7/subprocess.py in run(input, capture_output, timeout, check, *popenargs, **kwargs)\n        486             raise CalledProcessError(retcode, process.args,\n    --> 487                                      output=stdout, stderr=stderr)\n        488     return CompletedProcess(process.args, retcode, stdout, stderr)\n    <BLANKLINE>\n    CalledProcessError: Command '['/Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/bin/python3', '-c', 'import numpy.f2py; numpy.f2py.main()', '-c', '-m', 'fortran_module', 'fortran_module.f', '--quiet', '--f77exec=sage-inline-fortran', '--f90exec=sage-inline-fortran']' returned non-zero exit status 1.\n    <BLANKLINE>\n    During handling of the above exception, another exception occurred:\n    <BLANKLINE>\n    RuntimeError                              Traceback (most recent call last)\n    <ipython-input-1-eff726e82e94> in <module>()\n          1 \n    ----> 2 get_ipython().run_cell_magic('fortran', '', 'C FILE: FIB1.F\\n      SUBROUTINE FIB(A,N)\\nC\\nC     CALCULATE FIRST N FIBONACCI NUMBERS\\nC\\n      INTEGER N\\n      REAL*8 A(N)\\n      DO I=1,N\\n         IF (I.EQ.1) THEN\\n            A(I) = 0.0D0\\n         ELSEIF (I.EQ.2) THEN\\n            A(I) = 1.0D0\\n         ELSE\\n            A(I) = A(I-1) + A(I-2)\\n         ENDIF\\n      ENDDO\\n      END\\nC END FILE FIB1.F')\n    <BLANKLINE>\n    /Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/IPython/core/interactiveshell.py in run_cell_magic(self, magic_name, line, cell)\n       2115             magic_arg_s = self.var_expand(line, stack_depth)\n       2116             with self.builtin_trap:\n    -> 2117                 result = fn(magic_arg_s, cell)\n       2118             return result\n       2119 \n    <BLANKLINE>\n    </Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/decorator.py:decorator-gen-119> in fortran(self, line, cell)\n    <BLANKLINE>\n    /Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/IPython/core/magic.py in <lambda>(f, *a, **k)\n        186     # but it's overkill for just that one bit of state.\n        187     def magic_deco(arg):\n    --> 188         call = lambda f, *a, **k: f(*a, **k)\n        189 \n        190         if callable(arg):\n    <BLANKLINE>\n    /Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/sage/repl/ipython_extension.py in fortran(self, line, cell)\n        413         \"\"\"\n        414         from sage.misc.inline_fortran import fortran\n    --> 415         return fortran(cell)\n        416 \n        417 \n    <BLANKLINE>\n    /Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/sage/misc/inline_fortran.py in __call__(self, *args, **kwds)\n         95 \n         96     def __call__(self, *args, **kwds):\n    ---> 97         return self.eval(*args, **kwds)\n         98 \n         99     def eval(self, x, globals=None, locals=None):\n    <BLANKLINE>\n    /Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/sage/misc/inline_fortran.py in eval(self, x, globals, locals)\n        192             except subprocess.CalledProcessError as exc:\n        193                 raise RuntimeError(\n    --> 194                     \"failed to compile Fortran code:\\n{}\".format(exc.output))\n        195 \n        196             # Note that f2py() doesn't raise an exception if it fails.\n    <BLANKLINE>\n    RuntimeError: failed to compile Fortran code:\n    b'Could not locate executable g++ -std=gnu++11 -pthread -bundle -undefined dynamic_lookup\\nIn file included from /var/folders/zm/sbm1ly294l7f9cvdtcr74k0h0000gn/T/tmpdpx6g93e/src.macosx-10.14-x86_64-3.7/fortran_modulemodule.c:16:\\nIn file included from /var/folders/zm/sbm1ly294l7f9cvdtcr74k0h0000gn/T/tmpdpx6g93e/src.macosx-10.14-x86_64-3.7/fortranobject.h:13:\\nIn file included from /Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/numpy/core/include/numpy/arrayobject.h:4:\\nIn file included from /Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/numpy/core/include/numpy/ndarrayobject.h:12:\\nIn file included from /Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/numpy/core/include/numpy/ndarraytypes.h:1822:\\n/Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/numpy/core/include/numpy/npy_1_7_deprecated_api.h:17:2: warning: \"Using deprecated NumPy API, disable it with \"          \"#define NPY_NO_DEPRECATED_API NPY_1_7_API_VERSION\" [-W#warnings]\\n#warning \"Using deprecated NumPy API, disable it with \" \\\\\\n ^\\nIn file included from /var/folders/zm/sbm1ly294l7f9cvdtcr74k0h0000gn/T/tmpdpx6g93e/src.macosx-10.14-x86_64-3.7/fortranobject.c:2:\\nIn file included from /var/folders/zm/sbm1ly294l7f9cvdtcr74k0h0000gn/T/tmpdpx6g93e/src.macosx-10.14-x86_64-3.7/fortranobject.h:13:\\nIn file included from /Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/numpy/core/include/numpy/arrayobject.h:4:\\nIn file included from /Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/numpy/core/include/numpy/ndarrayobject.h:12:\\nIn file included from /Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/numpy/core/include/numpy/ndarraytypes.h:1822:\\n/Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/numpy/core/include/numpy/npy_1_7_deprecated_api.h:17:2: warning: \"Using deprecated NumPy API, disable it with \"          \"#define NPY_NO_DEPRECATED_API NPY_1_7_API_VERSION\" [-W#warnings]\\n#warning \"Using deprecated NumPy API, disable it with \" \\\\\\n ^\\n/var/folders/zm/sbm1ly294l7f9cvdtcr74k0h0000gn/T/tmpdpx6g93e/src.macosx-10.14-x86_64-3.7/fortran_modulemodule.c:109:12: warning: unused function \\'f2py_size\\' [-Wunused-function]\\nstatic int f2py_size(PyArrayObject* var, ...)\\n           ^\\n/var/folders/zm/sbm1ly294l7f9cvdtcr74k0h0000gn/T/tmpdpx6g93e/src.macosx-10.14-x86_64-3.7/fortranobject.c:138:18: warning: comparison of integers of different signs: \\'Py_ssize_t\\' (aka \\'long\\') and \\'unsigned long\\' [-Wsign-compare]\\n        if (size < sizeof(notalloc)) {\\n            ~~~~ ^ ~~~~~~~~~~~~~~~~\\n2 warnings generated.\\n2 warnings generated.\\nUndefined symbols for architecture x86_64:\\n  \"_PyArg_ParseTupleAndKeywords\", referenced from:\\n      _f2py_rout_fortran_module_fib in fortran_modulemodule.o\\n  \"_PyBytes_FromString\", referenced from:\\n      _PyInit_fortran_module in fortran_modulemodule.o\\n  \"_PyCapsule_GetPointer\", referenced from:\\n      _PyInit_fortran_module in fortran_modulemodule.o\\n      _F2PyCapsule_AsVoidPtr in fortranobject.o\\n  \"_PyCapsule_New\", referenced from:\\n      _fortran_getattr in fortranobject.o\\n      _F2PyCapsule_FromVoidPtr in fortranobject.o\\n  \"_PyCapsule_Type\", referenced from:\\n      _PyInit_fortran_module in fortran_modulemodule.o\\n      _F2PyCapsule_Check in fortranobject.o\\n  \"_PyComplex_Type\", referenced from:\\n      _int_from_pyobj in fortran_modulemodule.o\\n  \"_PyDict_DelItemString\", referenced from:\\n      _fortran_setattr in fortranobject.o\\n  \"_PyDict_GetItemString\", referenced from:\\n      _fortran_getattr in fortranobject.o\\n  \"_PyDict_New\", referenced from:\\n      _PyFortranObject_New in fortranobject.o\\n      _PyFortranObject_NewAsAttr in fortranobject.o\\n      _fortran_setattr in fortranobject.o\\n  \"_PyDict_SetItemString\", referenced from:\\n      _PyInit_fortran_module in fortran_modulemodule.o\\n      _F2PyDict_SetItemString in fortranobject.o\\n      _PyFortranObject_New in fortranobject.o\\n      _fortran_getattr in fortranobject.o\\n      _fortran_setattr in fortranobject.o\\n  \"_PyErr_Clear\", referenced from:\\n      _int_from_pyobj in fortran_modulemodule.o\\n      _F2PyDict_SetItemString in fortranobject.o\\n      _fortran_getattr in fortranobject.o\\n      _fortran_repr in fortranobject.o\\n      _F2PyCapsule_FromVoidPtr in fortranobject.o\\n      _F2PyCapsule_AsVoidPtr in fortranobject.o\\n  \"_PyErr_Format\", referenced from:\\n      _PyInit_fortran_module in fortran_modulemodule.o\\n      _fortran_call in fortranobject.o\\n      _check_and_fix_dimensions in fortranobject.o\\n  \"_PyErr_NewException\", referenced from:\\n      _PyInit_fortran_module in fortran_modulemodule.o\\n  \"_PyErr_NoMemory\", referenced from:\\n      _fortran_getattr in fortranobject.o\\n  \"_PyErr_Occurred\", referenced from:\\n      _PyInit_fortran_module in fortran_modulemodule.o\\n      _f2py_rout_fortran_module_fib in fortran_modulemodule.o\\n      _int_from_pyobj in fortran_modulemodule.o\\n      _F2PyDict_SetItemString in fortranobject.o\\n  \"_PyErr_Print\", referenced from:\\n      _PyInit_fortran_module in fortran_modulemodule.o\\n      _F2PyDict_SetItemString in fortranobject.o\\n  \"_PyErr_SetString\", referenced from:\\n      _PyInit_fortran_module in fortran_modulemodule.o\\n      _f2py_rout_fortran_module_fib in fortran_modulemodule.o\\n      _int_from_pyobj in fortran_modulemodule.o\\n      _fortran_setattr in fortranobject.o\\n      _array_from_pyobj in fortranobject.o\\n      _check_and_fix_dimensions in fortranobject.o\\n  \"_PyExc_AttributeError\", referenced from:\\n      _PyInit_fortran_module in fortran_modulemodule.o\\n      _fortran_setattr in fortranobject.o\\n  \"_PyExc_ImportError\", referenced from:\\n      _PyInit_fortran_module in fortran_modulemodule.o\\n  \"_PyExc_RuntimeError\", referenced from:\\n      _PyInit_fortran_module in fortran_modulemodule.o\\n      _fortran_call in fortranobject.o\\n  \"_PyExc_TypeError\", referenced from:\\n      _fortran_call in fortranobject.o\\n      _array_from_pyobj in fortranobject.o\\n  \"_PyExc_ValueError\", referenced from:\\n      _array_from_pyobj in fortranobject.o\\n      _check_and_fix_dimensions in fortranobject.o\\n  \"_PyImport_ImportModule\", referenced from:\\n      _PyInit_fortran_module in fortran_modulemodule.o\\n  \"_PyLong_AsLong\", referenced from:\\n      _int_from_pyobj in fortran_modulemodule.o\\n  \"_PyMem_Free\", referenced from:\\n      _fortran_dealloc in fortranobject.o\\n      _fortran_getattr in fortranobject.o\\n  \"_PyMem_Malloc\", referenced from:\\n      _fortran_getattr in fortranobject.o\\n  \"_PyModule_Create2\", referenced from:\\n      _PyInit_fortran_module in fortran_modulemodule.o\\n  \"_PyModule_GetDict\", referenced from:\\n      _PyInit_fortran_module in fortran_modulemodule.o\\n  \"_PyNumber_Long\", referenced from:\\n      _int_from_pyobj in fortran_modulemodule.o\\n  \"_PyOS_snprintf\", referenced from:\\n      _fortran_getattr in fortranobject.o\\n  \"_PyObject_GenericGetAttr\", referenced from:\\n      _fortran_getattr in fortranobject.o\\n  \"_PyObject_GetAttrString\", referenced from:\\n      _PyInit_fortran_module in fortran_modulemodule.o\\n      _int_from_pyobj in fortran_modulemodule.o\\n      _fortran_repr in fortranobject.o\\n  \"_PySequence_Check\", referenced from:\\n      _int_from_pyobj in fortran_modulemodule.o\\n  \"_PySequence_GetItem\", referenced from:\\n      _int_from_pyobj in fortran_modulemodule.o\\n  \"_PyType_IsSubtype\", referenced from:\\n      _int_from_pyobj in fortran_modulemodule.o\\n      _array_from_pyobj in fortranobject.o\\n  \"_PyType_Type\", referenced from:\\n      _PyInit_fortran_module in fortran_modulemodule.o\\n  \"_PyUnicode_Concat\", referenced from:\\n      _fortran_getattr in fortranobject.o\\n  \"_PyUnicode_FromFormat\", referenced from:\\n      _fortran_repr in fortranobject.o\\n  \"_PyUnicode_FromString\", referenced from:\\n      _PyInit_fortran_module in fortran_modulemodule.o\\n      _fortran_getattr in fortranobject.o\\n      _fortran_repr in fortranobject.o\\n  \"_PyUnicode_FromStringAndSize\", referenced from:\\n      _fortran_getattr in fortranobject.o\\n  \"_Py_BuildValue\", referenced from:\\n      _f2py_rout_fortran_module_fib in fortran_modulemodule.o\\n  \"__PyObject_New\", referenced from:\\n      _PyFortranObject_New in fortranobject.o\\n      _PyFortranObject_NewAsAttr in fortranobject.o\\n  \"__Py_NoneStruct\", referenced from:\\n      _f2py_rout_fortran_module_fib in fortran_modulemodule.o\\n      _fortran_getattr in fortranobject.o\\n      _fortran_setattr in fortranobject.o\\n      _array_from_pyobj in fortranobject.o\\n  \"_main\", referenced from:\\n     implicit entry/start for main executable\\nld: symbol(s) not found for architecture x86_64\\ncollect2: error: ld returned 1 exit status\\n/Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/numpy/distutils/fcompiler/__init__.py:530: UserWarning: LDFLAGS is used as is, not appended to flags already defined by numpy.distutils! Use NPY_DISTUTILS_APPEND_FLAGS=1 to obtain appending behavior instead (this behavior will become default in a future release).\\n  linker_so_flags = self.flag_vars.linker_so\\n/Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/numpy/distutils/fcompiler/__init__.py:540: UserWarning: LDFLAGS is used as is, not appended to flags already defined by numpy.distutils! Use NPY_DISTUTILS_APPEND_FLAGS=1 to obtain appending behavior instead (this behavior will become default in a future release).\\n  linker_exe_flags = self.flag_vars.linker_exe\\n/Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/numpy/distutils/fcompiler/__init__.py:530: UserWarning: LDFLAGS is used as is, not appended to flags already defined by numpy.distutils! Use NPY_DISTUTILS_APPEND_FLAGS=1 to obtain appending behavior instead (this behavior will become default in a future release).\\n  linker_so_flags = self.flag_vars.linker_so\\n/Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/numpy/distutils/fcompiler/__init__.py:540: UserWarning: LDFLAGS is used as is, not appended to flags already defined by numpy.distutils! Use NPY_DISTUTILS_APPEND_FLAGS=1 to obtain appending behavior instead (this behavior will become default in a future release).\\n  linker_exe_flags = self.flag_vars.linker_exe\\nerror: Command \"/usr/local/bin/gfortran -Wall -g -L/Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib -Wl,-rpath,/Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib /var/folders/zm/sbm1ly294l7f9cvdtcr74k0h0000gn/T/tmpdpx6g93e/var/folders/zm/sbm1ly294l7f9cvdtcr74k0h0000gn/T/tmpdpx6g93e/src.macosx-10.14-x86_64-3.7/fortran_modulemodule.o /var/folders/zm/sbm1ly294l7f9cvdtcr74k0h0000gn/T/tmpdpx6g93e/var/folders/zm/sbm1ly294l7f9cvdtcr74k0h0000gn/T/tmpdpx6g93e/src.macosx-10.14-x86_64-3.7/fortranobject.o /var/folders/zm/sbm1ly294l7f9cvdtcr74k0h0000gn/T/tmpdpx6g93e/fortran_module.o -L/usr/local/Cellar/gcc/9.2.0_3/lib/gcc/9/gcc/x86_64-apple-darwin19/9.2.0 -L/usr/local/Cellar/gcc/9.2.0_3/lib/gcc/9/gcc/x86_64-apple-darwin19/9.2.0/../../.. -L/usr/local/Cellar/gcc/9.2.0_3/lib/gcc/9/gcc/x86_64-apple-darwin19/9.2.0/../../.. -lgfortran -o ./fortran_module.cpython-37m-darwin.so\" failed with exit status 1\\n'\n```",
    "created_at": "2020-04-04T05:23:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29451#issuecomment-575376",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:16'></a>On another machine, only a few failures:

```
sage -t --long --warn-long 149.7 src/sage/repl/ipython_extension.py  # 4 doctests failed
sage -t --long --warn-long 149.7 src/sage/misc/persist.pyx  # 2 doctests failed
sage -t --long --warn-long 149.7 src/sage/misc/inline_fortran.py  # 3 doctests failed
```
These all seem to be Fortran-related. For example:

```
File "src/sage/repl/ipython_extension.py", line 385, in sage.repl.ipython_extension.SageMagics.fortran
Failed example:
    shell.run_cell('''
    %%fortran
    C FILE: FIB1.F
          SUBROUTINE FIB(A,N)
    C
    C     CALCULATE FIRST N FIBONACCI NUMBERS
    C
          INTEGER N
          REAL*8 A(N)
          DO I=1,N
             IF (I.EQ.1) THEN
                A(I) = 0.0D0
             ELSEIF (I.EQ.2) THEN
                A(I) = 1.0D0
             ELSE
                A(I) = A(I-1) + A(I-2)
             ENDIF
          ENDDO
          END
    C END FILE FIB1.F
    ''')
Expected nothing
Got:
    ---------------------------------------------------------------------------
    CalledProcessError                        Traceback (most recent call last)
    /Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/sage/misc/inline_fortran.py in eval(self, x, globals, locals)
        190             try:
    --> 191                 out = subprocess.check_output(cmd, stderr=subprocess.STDOUT)
        192             except subprocess.CalledProcessError as exc:
    <BLANKLINE>
    /Applications/Xcode.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.7/lib/python3.7/subprocess.py in check_output(timeout, *popenargs, **kwargs)
        394     return run(*popenargs, stdout=PIPE, timeout=timeout, check=True,
    --> 395                **kwargs).stdout
        396 
    <BLANKLINE>
    /Applications/Xcode.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.7/lib/python3.7/subprocess.py in run(input, capture_output, timeout, check, *popenargs, **kwargs)
        486             raise CalledProcessError(retcode, process.args,
    --> 487                                      output=stdout, stderr=stderr)
        488     return CompletedProcess(process.args, retcode, stdout, stderr)
    <BLANKLINE>
    CalledProcessError: Command '['/Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/bin/python3', '-c', 'import numpy.f2py; numpy.f2py.main()', '-c', '-m', 'fortran_module', 'fortran_module.f', '--quiet', '--f77exec=sage-inline-fortran', '--f90exec=sage-inline-fortran']' returned non-zero exit status 1.
    <BLANKLINE>
    During handling of the above exception, another exception occurred:
    <BLANKLINE>
    RuntimeError                              Traceback (most recent call last)
    <ipython-input-1-eff726e82e94> in <module>()
          1 
    ----> 2 get_ipython().run_cell_magic('fortran', '', 'C FILE: FIB1.F\n      SUBROUTINE FIB(A,N)\nC\nC     CALCULATE FIRST N FIBONACCI NUMBERS\nC\n      INTEGER N\n      REAL*8 A(N)\n      DO I=1,N\n         IF (I.EQ.1) THEN\n            A(I) = 0.0D0\n         ELSEIF (I.EQ.2) THEN\n            A(I) = 1.0D0\n         ELSE\n            A(I) = A(I-1) + A(I-2)\n         ENDIF\n      ENDDO\n      END\nC END FILE FIB1.F')
    <BLANKLINE>
    /Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/IPython/core/interactiveshell.py in run_cell_magic(self, magic_name, line, cell)
       2115             magic_arg_s = self.var_expand(line, stack_depth)
       2116             with self.builtin_trap:
    -> 2117                 result = fn(magic_arg_s, cell)
       2118             return result
       2119 
    <BLANKLINE>
    </Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/decorator.py:decorator-gen-119> in fortran(self, line, cell)
    <BLANKLINE>
    /Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/IPython/core/magic.py in <lambda>(f, *a, **k)
        186     # but it's overkill for just that one bit of state.
        187     def magic_deco(arg):
    --> 188         call = lambda f, *a, **k: f(*a, **k)
        189 
        190         if callable(arg):
    <BLANKLINE>
    /Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/sage/repl/ipython_extension.py in fortran(self, line, cell)
        413         """
        414         from sage.misc.inline_fortran import fortran
    --> 415         return fortran(cell)
        416 
        417 
    <BLANKLINE>
    /Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/sage/misc/inline_fortran.py in __call__(self, *args, **kwds)
         95 
         96     def __call__(self, *args, **kwds):
    ---> 97         return self.eval(*args, **kwds)
         98 
         99     def eval(self, x, globals=None, locals=None):
    <BLANKLINE>
    /Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/sage/misc/inline_fortran.py in eval(self, x, globals, locals)
        192             except subprocess.CalledProcessError as exc:
        193                 raise RuntimeError(
    --> 194                     "failed to compile Fortran code:\n{}".format(exc.output))
        195 
        196             # Note that f2py() doesn't raise an exception if it fails.
    <BLANKLINE>
    RuntimeError: failed to compile Fortran code:
    b'Could not locate executable g++ -std=gnu++11 -pthread -bundle -undefined dynamic_lookup\nIn file included from /var/folders/zm/sbm1ly294l7f9cvdtcr74k0h0000gn/T/tmpdpx6g93e/src.macosx-10.14-x86_64-3.7/fortran_modulemodule.c:16:\nIn file included from /var/folders/zm/sbm1ly294l7f9cvdtcr74k0h0000gn/T/tmpdpx6g93e/src.macosx-10.14-x86_64-3.7/fortranobject.h:13:\nIn file included from /Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/numpy/core/include/numpy/arrayobject.h:4:\nIn file included from /Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/numpy/core/include/numpy/ndarrayobject.h:12:\nIn file included from /Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/numpy/core/include/numpy/ndarraytypes.h:1822:\n/Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/numpy/core/include/numpy/npy_1_7_deprecated_api.h:17:2: warning: "Using deprecated NumPy API, disable it with "          "#define NPY_NO_DEPRECATED_API NPY_1_7_API_VERSION" [-W#warnings]\n#warning "Using deprecated NumPy API, disable it with " \\\n ^\nIn file included from /var/folders/zm/sbm1ly294l7f9cvdtcr74k0h0000gn/T/tmpdpx6g93e/src.macosx-10.14-x86_64-3.7/fortranobject.c:2:\nIn file included from /var/folders/zm/sbm1ly294l7f9cvdtcr74k0h0000gn/T/tmpdpx6g93e/src.macosx-10.14-x86_64-3.7/fortranobject.h:13:\nIn file included from /Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/numpy/core/include/numpy/arrayobject.h:4:\nIn file included from /Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/numpy/core/include/numpy/ndarrayobject.h:12:\nIn file included from /Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/numpy/core/include/numpy/ndarraytypes.h:1822:\n/Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/numpy/core/include/numpy/npy_1_7_deprecated_api.h:17:2: warning: "Using deprecated NumPy API, disable it with "          "#define NPY_NO_DEPRECATED_API NPY_1_7_API_VERSION" [-W#warnings]\n#warning "Using deprecated NumPy API, disable it with " \\\n ^\n/var/folders/zm/sbm1ly294l7f9cvdtcr74k0h0000gn/T/tmpdpx6g93e/src.macosx-10.14-x86_64-3.7/fortran_modulemodule.c:109:12: warning: unused function \'f2py_size\' [-Wunused-function]\nstatic int f2py_size(PyArrayObject* var, ...)\n           ^\n/var/folders/zm/sbm1ly294l7f9cvdtcr74k0h0000gn/T/tmpdpx6g93e/src.macosx-10.14-x86_64-3.7/fortranobject.c:138:18: warning: comparison of integers of different signs: \'Py_ssize_t\' (aka \'long\') and \'unsigned long\' [-Wsign-compare]\n        if (size < sizeof(notalloc)) {\n            ~~~~ ^ ~~~~~~~~~~~~~~~~\n2 warnings generated.\n2 warnings generated.\nUndefined symbols for architecture x86_64:\n  "_PyArg_ParseTupleAndKeywords", referenced from:\n      _f2py_rout_fortran_module_fib in fortran_modulemodule.o\n  "_PyBytes_FromString", referenced from:\n      _PyInit_fortran_module in fortran_modulemodule.o\n  "_PyCapsule_GetPointer", referenced from:\n      _PyInit_fortran_module in fortran_modulemodule.o\n      _F2PyCapsule_AsVoidPtr in fortranobject.o\n  "_PyCapsule_New", referenced from:\n      _fortran_getattr in fortranobject.o\n      _F2PyCapsule_FromVoidPtr in fortranobject.o\n  "_PyCapsule_Type", referenced from:\n      _PyInit_fortran_module in fortran_modulemodule.o\n      _F2PyCapsule_Check in fortranobject.o\n  "_PyComplex_Type", referenced from:\n      _int_from_pyobj in fortran_modulemodule.o\n  "_PyDict_DelItemString", referenced from:\n      _fortran_setattr in fortranobject.o\n  "_PyDict_GetItemString", referenced from:\n      _fortran_getattr in fortranobject.o\n  "_PyDict_New", referenced from:\n      _PyFortranObject_New in fortranobject.o\n      _PyFortranObject_NewAsAttr in fortranobject.o\n      _fortran_setattr in fortranobject.o\n  "_PyDict_SetItemString", referenced from:\n      _PyInit_fortran_module in fortran_modulemodule.o\n      _F2PyDict_SetItemString in fortranobject.o\n      _PyFortranObject_New in fortranobject.o\n      _fortran_getattr in fortranobject.o\n      _fortran_setattr in fortranobject.o\n  "_PyErr_Clear", referenced from:\n      _int_from_pyobj in fortran_modulemodule.o\n      _F2PyDict_SetItemString in fortranobject.o\n      _fortran_getattr in fortranobject.o\n      _fortran_repr in fortranobject.o\n      _F2PyCapsule_FromVoidPtr in fortranobject.o\n      _F2PyCapsule_AsVoidPtr in fortranobject.o\n  "_PyErr_Format", referenced from:\n      _PyInit_fortran_module in fortran_modulemodule.o\n      _fortran_call in fortranobject.o\n      _check_and_fix_dimensions in fortranobject.o\n  "_PyErr_NewException", referenced from:\n      _PyInit_fortran_module in fortran_modulemodule.o\n  "_PyErr_NoMemory", referenced from:\n      _fortran_getattr in fortranobject.o\n  "_PyErr_Occurred", referenced from:\n      _PyInit_fortran_module in fortran_modulemodule.o\n      _f2py_rout_fortran_module_fib in fortran_modulemodule.o\n      _int_from_pyobj in fortran_modulemodule.o\n      _F2PyDict_SetItemString in fortranobject.o\n  "_PyErr_Print", referenced from:\n      _PyInit_fortran_module in fortran_modulemodule.o\n      _F2PyDict_SetItemString in fortranobject.o\n  "_PyErr_SetString", referenced from:\n      _PyInit_fortran_module in fortran_modulemodule.o\n      _f2py_rout_fortran_module_fib in fortran_modulemodule.o\n      _int_from_pyobj in fortran_modulemodule.o\n      _fortran_setattr in fortranobject.o\n      _array_from_pyobj in fortranobject.o\n      _check_and_fix_dimensions in fortranobject.o\n  "_PyExc_AttributeError", referenced from:\n      _PyInit_fortran_module in fortran_modulemodule.o\n      _fortran_setattr in fortranobject.o\n  "_PyExc_ImportError", referenced from:\n      _PyInit_fortran_module in fortran_modulemodule.o\n  "_PyExc_RuntimeError", referenced from:\n      _PyInit_fortran_module in fortran_modulemodule.o\n      _fortran_call in fortranobject.o\n  "_PyExc_TypeError", referenced from:\n      _fortran_call in fortranobject.o\n      _array_from_pyobj in fortranobject.o\n  "_PyExc_ValueError", referenced from:\n      _array_from_pyobj in fortranobject.o\n      _check_and_fix_dimensions in fortranobject.o\n  "_PyImport_ImportModule", referenced from:\n      _PyInit_fortran_module in fortran_modulemodule.o\n  "_PyLong_AsLong", referenced from:\n      _int_from_pyobj in fortran_modulemodule.o\n  "_PyMem_Free", referenced from:\n      _fortran_dealloc in fortranobject.o\n      _fortran_getattr in fortranobject.o\n  "_PyMem_Malloc", referenced from:\n      _fortran_getattr in fortranobject.o\n  "_PyModule_Create2", referenced from:\n      _PyInit_fortran_module in fortran_modulemodule.o\n  "_PyModule_GetDict", referenced from:\n      _PyInit_fortran_module in fortran_modulemodule.o\n  "_PyNumber_Long", referenced from:\n      _int_from_pyobj in fortran_modulemodule.o\n  "_PyOS_snprintf", referenced from:\n      _fortran_getattr in fortranobject.o\n  "_PyObject_GenericGetAttr", referenced from:\n      _fortran_getattr in fortranobject.o\n  "_PyObject_GetAttrString", referenced from:\n      _PyInit_fortran_module in fortran_modulemodule.o\n      _int_from_pyobj in fortran_modulemodule.o\n      _fortran_repr in fortranobject.o\n  "_PySequence_Check", referenced from:\n      _int_from_pyobj in fortran_modulemodule.o\n  "_PySequence_GetItem", referenced from:\n      _int_from_pyobj in fortran_modulemodule.o\n  "_PyType_IsSubtype", referenced from:\n      _int_from_pyobj in fortran_modulemodule.o\n      _array_from_pyobj in fortranobject.o\n  "_PyType_Type", referenced from:\n      _PyInit_fortran_module in fortran_modulemodule.o\n  "_PyUnicode_Concat", referenced from:\n      _fortran_getattr in fortranobject.o\n  "_PyUnicode_FromFormat", referenced from:\n      _fortran_repr in fortranobject.o\n  "_PyUnicode_FromString", referenced from:\n      _PyInit_fortran_module in fortran_modulemodule.o\n      _fortran_getattr in fortranobject.o\n      _fortran_repr in fortranobject.o\n  "_PyUnicode_FromStringAndSize", referenced from:\n      _fortran_getattr in fortranobject.o\n  "_Py_BuildValue", referenced from:\n      _f2py_rout_fortran_module_fib in fortran_modulemodule.o\n  "__PyObject_New", referenced from:\n      _PyFortranObject_New in fortranobject.o\n      _PyFortranObject_NewAsAttr in fortranobject.o\n  "__Py_NoneStruct", referenced from:\n      _f2py_rout_fortran_module_fib in fortran_modulemodule.o\n      _fortran_getattr in fortranobject.o\n      _fortran_setattr in fortranobject.o\n      _array_from_pyobj in fortranobject.o\n  "_main", referenced from:\n     implicit entry/start for main executable\nld: symbol(s) not found for architecture x86_64\ncollect2: error: ld returned 1 exit status\n/Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/numpy/distutils/fcompiler/__init__.py:530: UserWarning: LDFLAGS is used as is, not appended to flags already defined by numpy.distutils! Use NPY_DISTUTILS_APPEND_FLAGS=1 to obtain appending behavior instead (this behavior will become default in a future release).\n  linker_so_flags = self.flag_vars.linker_so\n/Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/numpy/distutils/fcompiler/__init__.py:540: UserWarning: LDFLAGS is used as is, not appended to flags already defined by numpy.distutils! Use NPY_DISTUTILS_APPEND_FLAGS=1 to obtain appending behavior instead (this behavior will become default in a future release).\n  linker_exe_flags = self.flag_vars.linker_exe\n/Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/numpy/distutils/fcompiler/__init__.py:530: UserWarning: LDFLAGS is used as is, not appended to flags already defined by numpy.distutils! Use NPY_DISTUTILS_APPEND_FLAGS=1 to obtain appending behavior instead (this behavior will become default in a future release).\n  linker_so_flags = self.flag_vars.linker_so\n/Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib/python3.7/site-packages/numpy/distutils/fcompiler/__init__.py:540: UserWarning: LDFLAGS is used as is, not appended to flags already defined by numpy.distutils! Use NPY_DISTUTILS_APPEND_FLAGS=1 to obtain appending behavior instead (this behavior will become default in a future release).\n  linker_exe_flags = self.flag_vars.linker_exe\nerror: Command "/usr/local/bin/gfortran -Wall -g -L/Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib -Wl,-rpath,/Users/palmieri/Sage/new-xcode/sage-9.1.beta9/local/lib /var/folders/zm/sbm1ly294l7f9cvdtcr74k0h0000gn/T/tmpdpx6g93e/var/folders/zm/sbm1ly294l7f9cvdtcr74k0h0000gn/T/tmpdpx6g93e/src.macosx-10.14-x86_64-3.7/fortran_modulemodule.o /var/folders/zm/sbm1ly294l7f9cvdtcr74k0h0000gn/T/tmpdpx6g93e/var/folders/zm/sbm1ly294l7f9cvdtcr74k0h0000gn/T/tmpdpx6g93e/src.macosx-10.14-x86_64-3.7/fortranobject.o /var/folders/zm/sbm1ly294l7f9cvdtcr74k0h0000gn/T/tmpdpx6g93e/fortran_module.o -L/usr/local/Cellar/gcc/9.2.0_3/lib/gcc/9/gcc/x86_64-apple-darwin19/9.2.0 -L/usr/local/Cellar/gcc/9.2.0_3/lib/gcc/9/gcc/x86_64-apple-darwin19/9.2.0/../../.. -L/usr/local/Cellar/gcc/9.2.0_3/lib/gcc/9/gcc/x86_64-apple-darwin19/9.2.0/../../.. -lgfortran -o ./fortran_module.cpython-37m-darwin.so" failed with exit status 1\n'
```



---

archive/issue_comments_575377.json:
```json
{
    "body": "<a id='comment:17'></a>Let's do these on separate tickets.\n\nI have created #29463 for the Fortran-related things.",
    "created_at": "2020-04-04T13:28:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29451#issuecomment-575377",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>Let's do these on separate tickets.

I have created #29463 for the Fortran-related things.



---

archive/issue_comments_575378.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-04-04T16:01:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29451#issuecomment-575378",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_575379.json:
```json
{
    "body": "Changing reviewer from \"\" to \"John Palmieri\"",
    "created_at": "2020-04-04T16:01:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29451#issuecomment-575379",
    "user": "https://github.com/jhpalmieri"
}
```

Changing reviewer from "" to "John Palmieri"



---

archive/issue_comments_575380.json:
```json
{
    "body": "<a id='comment:18'></a>Okay, looks good. Let me know if you manage to reproduce the failures in[comment:14](#comment%3A14).",
    "created_at": "2020-04-04T16:01:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29451#issuecomment-575380",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:18'></a>Okay, looks good. Let me know if you manage to reproduce the failures in[comment:14](#comment%3A14).



---

archive/issue_comments_575381.json:
```json
{
    "body": "<a id='comment:19'></a>Thanks! I'll first look into the Fortran-related failures.",
    "created_at": "2020-04-04T16:05:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29451#issuecomment-575381",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:19'></a>Thanks! I'll first look into the Fortran-related failures.



---

archive/issue_comments_575382.json:
```json
{
    "body": "<a id='comment:20'></a>Replying to [jhpalmieri](#comment%3A18):\n> Okay, looks good. Let me know if you manage to reproduce the failures in[comment:14](#comment%3A14).\n\n\nI am having problems reproducing them, in fact. Maybe there was something off in my environment? I'll keep an eye out, in any case.",
    "created_at": "2020-04-05T02:59:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29451#issuecomment-575382",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:20'></a>Replying to [jhpalmieri](#comment%3A18):
> Okay, looks good. Let me know if you manage to reproduce the failures in[comment:14](#comment%3A14).


I am having problems reproducing them, in fact. Maybe there was something off in my environment? I'll keep an eye out, in any case.



---

archive/issue_comments_575383.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-04-09T22:45:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29451#issuecomment-575383",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_075069.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-09T22:45:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29451",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29451#event-75069"
}
```



---

archive/issue_comments_575384.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/pari_gp_segfault_with_xcode_11_4_on_local_homebrew_macos_standard\" to \"ef6ecf4e857541f253e114ad12d99304627e4eeb\"",
    "created_at": "2020-04-09T22:45:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29451#issuecomment-575384",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/pari_gp_segfault_with_xcode_11_4_on_local_homebrew_macos_standard" to "ef6ecf4e857541f253e114ad12d99304627e4eeb"
