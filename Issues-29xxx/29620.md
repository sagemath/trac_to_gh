# Issue 29620: ./configure --without-system-A --without-system-B can build both A and B

archive/issues_029383.json:
```json
{
    "body": "Some functionality can be provided by\neither one of two SPKGs.\n\nFor such pairs (A, B) of SPKGs, configuring with\n\n```\n./configure --without-system-A --without-system-B\n```\nor equivalently\n\n```\n./configure --with-system-A=no --with-system-B=no\n```\ncan result in both A and B being built.\n\nSome cases are solved after the removal\nof one of the spkgs in the pair.\n\n- `gmp` vs `mpir`: remove `mpir` #32549, #32727\n- `atlas` vs `openblas`; remove `atlas` #30350\n- full `boost` vs `boost_cropped`; remove full #31575;\n  m4 files use cropped #31871\n\nRemaining cases:\n\n- gfortran can be provided by the `gcc` or `gfortran` SPKGs\n- some database packages have `SPKG` vs `SPKG_small` pairs\n\n**gfortran**\n\nBoth `gcc` and `gfortran` built after\n\n```\n./configure --with-system-gcc=no --with-system-gfortran=no`\n```\n\n- [sage-devel report](https://groups.google.com/d/msg/sage-devel/YyB2zk2Lbtg/4YTwKlMJAgAJ)\n\n**SPKG_small**\n\n```\n  --with-system-pari_seadata={no|yes (default)|force (exit with an error if no usable version is found)}\n                          detect and use an existing system pari_seadata\n  --with-system-pari_seadata_small={no|yes (default)|force (exit with an error if no usable version is found)}\n                          detect and use an existing system pari_seadata_small\n```\n\nOverall, we need a better solution for such pairs of packages.\n\n**CC:**  @orlitzky @dimpase @jhpalmieri @slel\n\n**Keywords:** spkg-pairs\n\n**Status:** new\n\nIssue created by migration from https://trac.sagemath.org/ticket/29620\n\n",
    "created_at": "2020-04-29T19:11:30Z",
    "labels": [
        "component: build: configure",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "./configure --without-system-A --without-system-B can build both A and B",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29620",
    "user": "https://github.com/mkoeppe"
}
```
Some functionality can be provided by
either one of two SPKGs.

For such pairs (A, B) of SPKGs, configuring with

```
./configure --without-system-A --without-system-B
```
or equivalently

```
./configure --with-system-A=no --with-system-B=no
```
can result in both A and B being built.

Some cases are solved after the removal
of one of the spkgs in the pair.

- `gmp` vs `mpir`: remove `mpir` #32549, #32727
- `atlas` vs `openblas`; remove `atlas` #30350
- full `boost` vs `boost_cropped`; remove full #31575;
  m4 files use cropped #31871

Remaining cases:

- gfortran can be provided by the `gcc` or `gfortran` SPKGs
- some database packages have `SPKG` vs `SPKG_small` pairs

**gfortran**

Both `gcc` and `gfortran` built after

```
./configure --with-system-gcc=no --with-system-gfortran=no`
```

- [sage-devel report](https://groups.google.com/d/msg/sage-devel/YyB2zk2Lbtg/4YTwKlMJAgAJ)

**SPKG_small**

```
  --with-system-pari_seadata={no|yes (default)|force (exit with an error if no usable version is found)}
                          detect and use an existing system pari_seadata
  --with-system-pari_seadata_small={no|yes (default)|force (exit with an error if no usable version is found)}
                          detect and use an existing system pari_seadata_small
```

Overall, we need a better solution for such pairs of packages.

**CC:**  @orlitzky @dimpase @jhpalmieri @slel

**Keywords:** spkg-pairs

**Status:** new

Issue created by migration from https://trac.sagemath.org/ticket/29620





---

archive/issue_comments_580319.json:
```json
{
    "body": "<a id='comment:1'></a>\nperhaps fixing this in ./configure is the most natural thing to do.",
    "created_at": "2020-04-30T05:53:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29620",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29620#issuecomment-580319",
    "user": "https://github.com/dimpase"
}
```


<a id='comment:1'></a>
perhaps fixing this in ./configure is the most natural thing to do.



---

archive/issue_comments_580320.json:
```json
{
    "body": "<a id='comment:2'></a>\nI agree",
    "created_at": "2020-05-01T05:53:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29620",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29620#issuecomment-580320",
    "user": "https://github.com/mkoeppe"
}
```


<a id='comment:2'></a>
I agree



---

archive/issue_comments_580321.json:
```json
{
    "body": "<a id='comment:3'></a>\nThis is ugly because `sage_spkg_install_mpir=no` can mean multiple things when you take `--with-mp` into consideration. There's a simpler statement of the problem: passing `--without-system-gmp` causes the gmp SPKG to be installed when mpir will be used anyway. I haven't been able to wrap my head around  a solution that works in all cases. We may need to introduce another variable that indicates what's actually going on, rather than trying to reverse engineer what happened from the `sage_spkg_install` variables at the end of gmp's post-check phase.",
    "created_at": "2020-05-01T14:21:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29620",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29620#issuecomment-580321",
    "user": "https://github.com/orlitzky"
}
```


<a id='comment:3'></a>
This is ugly because `sage_spkg_install_mpir=no` can mean multiple things when you take `--with-mp` into consideration. There's a simpler statement of the problem: passing `--without-system-gmp` causes the gmp SPKG to be installed when mpir will be used anyway. I haven't been able to wrap my head around  a solution that works in all cases. We may need to introduce another variable that indicates what's actually going on, rather than trying to reverse engineer what happened from the `sage_spkg_install` variables at the end of gmp's post-check phase.



---

archive/issue_comments_580322.json:
```json
{
    "body": "<a id='comment:4'></a>\nYes, we should first define the meaning of these options.",
    "created_at": "2020-05-01T15:33:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29620",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29620#issuecomment-580322",
    "user": "https://github.com/mkoeppe"
}
```


<a id='comment:4'></a>
Yes, we should first define the meaning of these options.



---

archive/issue_events_085400.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-05T17:58:29Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29620",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29620#event-85400"
}
```




---

archive/issue_comments_580323.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+Likewise for `--with-system-gcc=no --with-system-gfortran=no`, as reported in https://groups.google.com/d/msg/sage-devel/YyB2zk2Lbtg/4YTwKlMJAgAJ\n``````\n",
    "created_at": "2020-08-01T00:54:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29620",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29620#issuecomment-580323",
    "user": "https://github.com/mkoeppe"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+Likewise for `--with-system-gcc=no --with-system-gfortran=no`, as reported in https://groups.google.com/d/msg/sage-devel/YyB2zk2Lbtg/4YTwKlMJAgAJ
``````




---

archive/issue_events_085401.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29620",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29620#event-85401"
}
```




---

archive/issue_events_085402.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29620",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29620#event-85402"
}
```




---

archive/issue_comments_580324.json:
```json
{
    "body": "<a id='comment:9'></a>\nJust got bitten by this again.",
    "created_at": "2021-03-24T19:09:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29620",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29620#issuecomment-580324",
    "user": "https://github.com/mkoeppe"
}
```


<a id='comment:9'></a>
Just got bitten by this again.



---

archive/issue_events_085403.json:
```json
{
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/29620",
    "label": "critical",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29620#event-85403"
}
```




---

archive/issue_comments_580325.json:
```json
{
    "body": "<a id='comment:10'></a>\nWe recently switched the default back to GMP because MPIR is bit-rotting. Being able to choose GMP instead of MPIR had obvious benefits when MPIR was the default. But is there any benefit to being able to use MPIR as an alternative when GMP is the default?",
    "created_at": "2021-03-25T00:35:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29620",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29620#issuecomment-580325",
    "user": "https://github.com/orlitzky"
}
```


<a id='comment:10'></a>
We recently switched the default back to GMP because MPIR is bit-rotting. Being able to choose GMP instead of MPIR had obvious benefits when MPIR was the default. But is there any benefit to being able to use MPIR as an alternative when GMP is the default?



---

archive/issue_comments_580326.json:
```json
{
    "body": "<a id='comment:11'></a>\nThe only reason that comes to mind is that at least one package uses an mpir-specific interface: #30325.\n\nFor Sage 9.3, I would be reluctant to remove MPIR completely. But it would be good to remove this trap in our configure script.",
    "created_at": "2021-03-25T00:39:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29620",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29620#issuecomment-580326",
    "user": "https://github.com/mkoeppe"
}
```


<a id='comment:11'></a>
The only reason that comes to mind is that at least one package uses an mpir-specific interface: #30325.

For Sage 9.3, I would be reluctant to remove MPIR completely. But it would be good to remove this trap in our configure script.



---

archive/issue_comments_580327.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,48 @@\n Likewise for `--with-system-gcc=no --with-system-gfortran=no`, as reported in https://groups.google.com/d/msg/sage-devel/YyB2zk2Lbtg/4YTwKlMJAgAJ\n+\n+For gmp/mpir, we have:\n+\n+```\n+  --with-system-gmp={no|yes (default)|force (exit with an error if no usable version is found)}\n+                          detect and use an existing system gmp\n+  --with-system-mpir={no|yes (default)|force (exit with an error if no usable version is found)}\n+                          detect and use an existing system mpir\n+  --with-mp=system        use the system GMP as multiprecision library, if\n+                          possible (default)\n+  --with-mp=mpir          use the Sage SPKG for MPIR as multiprecision library\n+  --with-mp=gmp           use the Sage SPKG for GMP as multiprecision library\n+```\n+(The first two are automatically generated and do not work properly. The `--with-mp` option is legacy and works properly but does not fit well with the systematic naming scheme.\n+\n+Same for BLAS:\n+\n+```\n+  --with-system-atlas={no|yes (default)|force (exit with an error if no usable version is found)}\n+                          detect and use an existing system atlas\n+  --with-system-openblas={no|yes (default)|force (exit with an error if no usable version is found)}\n+                          detect and use an existing system openblas\n+  --with-blas=openblas    use OpenBLAS as BLAS library (default)\n+    --with-blas=atlas       use ATLAS as BLAS library\n+``` \n+\n+And to a lesser degree for these ones:\n+\n+```\n+  --with-system-boost={no|yes (default)|force (exit with an error if no usable version is found)}\n+                          detect and use an existing system boost\n+  --with-system-boost_cropped={no|yes (default)|force (exit with an error if no usable version is found)}\n+                          detect and use an existing system boost_cropped\n+```\n+\n+```\n+  --with-system-pari_seadata={no|yes (default)|force (exit with an error if no usable version is found)}\n+                          detect and use an existing system pari_seadata\n+  --with-system-pari_seadata_small={no|yes (default)|force (exit with an error if no usable version is found)}\n+                          detect and use an existing system pari_seadata_small\n+```\n+\n+\n+Overall, we need a better solution for such mutually exclusive packages.\n+\n+\n+\n``````\n",
    "created_at": "2021-03-27T16:39:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29620",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29620#issuecomment-580327",
    "user": "https://github.com/mkoeppe"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,48 @@
 Likewise for `--with-system-gcc=no --with-system-gfortran=no`, as reported in https://groups.google.com/d/msg/sage-devel/YyB2zk2Lbtg/4YTwKlMJAgAJ
+
+For gmp/mpir, we have:
+
+```
+  --with-system-gmp={no|yes (default)|force (exit with an error if no usable version is found)}
+                          detect and use an existing system gmp
+  --with-system-mpir={no|yes (default)|force (exit with an error if no usable version is found)}
+                          detect and use an existing system mpir
+  --with-mp=system        use the system GMP as multiprecision library, if
+                          possible (default)
+  --with-mp=mpir          use the Sage SPKG for MPIR as multiprecision library
+  --with-mp=gmp           use the Sage SPKG for GMP as multiprecision library
+```
+(The first two are automatically generated and do not work properly. The `--with-mp` option is legacy and works properly but does not fit well with the systematic naming scheme.
+
+Same for BLAS:
+
+```
+  --with-system-atlas={no|yes (default)|force (exit with an error if no usable version is found)}
+                          detect and use an existing system atlas
+  --with-system-openblas={no|yes (default)|force (exit with an error if no usable version is found)}
+                          detect and use an existing system openblas
+  --with-blas=openblas    use OpenBLAS as BLAS library (default)
+    --with-blas=atlas       use ATLAS as BLAS library
+``` 
+
+And to a lesser degree for these ones:
+
+```
+  --with-system-boost={no|yes (default)|force (exit with an error if no usable version is found)}
+                          detect and use an existing system boost
+  --with-system-boost_cropped={no|yes (default)|force (exit with an error if no usable version is found)}
+                          detect and use an existing system boost_cropped
+```
+
+```
+  --with-system-pari_seadata={no|yes (default)|force (exit with an error if no usable version is found)}
+                          detect and use an existing system pari_seadata
+  --with-system-pari_seadata_small={no|yes (default)|force (exit with an error if no usable version is found)}
+                          detect and use an existing system pari_seadata_small
+```
+
+
+Overall, we need a better solution for such mutually exclusive packages.
+
+
+
``````




---

archive/issue_comments_580328.json:
```json
{
    "body": "<a id='comment:13'></a>\nFor boost, of course, we could just remove the full `boost` package and only offer our cropped version of `boost`. It could be argued again that it's not Sage's job to provide a full `boost` installation. (Our version is ancient in any case)",
    "created_at": "2021-03-28T01:16:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29620",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29620#issuecomment-580328",
    "user": "https://github.com/mkoeppe"
}
```


<a id='comment:13'></a>
For boost, of course, we could just remove the full `boost` package and only offer our cropped version of `boost`. It could be argued again that it's not Sage's job to provide a full `boost` installation. (Our version is ancient in any case)



---

archive/issue_comments_580329.json:
```json
{
    "body": "<a id='comment:14'></a>\nremoving full boost is certainly a good idea.",
    "created_at": "2021-03-28T15:11:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29620",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29620#issuecomment-580329",
    "user": "https://github.com/dimpase"
}
```


<a id='comment:14'></a>
removing full boost is certainly a good idea.



---

archive/issue_comments_580330.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [dimpase](#comment%3A14):\n> removing full boost is certainly a good idea.\n\nThat's now #31575.",
    "created_at": "2021-03-29T04:59:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29620",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29620#issuecomment-580330",
    "user": "https://github.com/mkoeppe"
}
```


<a id='comment:15'></a>
Replying to [dimpase](#comment%3A14):
> removing full boost is certainly a good idea.

That's now #31575.



---

archive/issue_comments_580331.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -14,7 +14,7 @@\n ```\n (The first two are automatically generated and do not work properly. The `--with-mp` option is legacy and works properly but does not fit well with the systematic naming scheme.\n \n-Same for BLAS:\n+Same for BLAS (as reported most recently in https://groups.google.com/g/sage-support/c/pqnhfUJYS-Q/m/lOQJ3EtYBwAJ):\n \n ```\n   --with-system-atlas={no|yes (default)|force (exit with an error if no usable version is found)}\n``````\n",
    "created_at": "2021-04-08T19:20:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29620",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29620#issuecomment-580331",
    "user": "https://github.com/mkoeppe"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -14,7 +14,7 @@
 ```
 (The first two are automatically generated and do not work properly. The `--with-mp` option is legacy and works properly but does not fit well with the systematic naming scheme.
 
-Same for BLAS:
+Same for BLAS (as reported most recently in https://groups.google.com/g/sage-support/c/pqnhfUJYS-Q/m/lOQJ3EtYBwAJ):
 
 ```
   --with-system-atlas={no|yes (default)|force (exit with an error if no usable version is found)}
``````




---

archive/issue_events_085404.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/29620",
    "rename": {
        "from": "./configure --without-system-gmp --without-system-mpir installs both GMP and MPIR spkg",
        "to": "./configure --without-system-gmp --without-system-mpir installs both GMP and MPIR spkg; and similar issues for openblas/atlas, boost/boost_cropped, SPKG/SPKG_small"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29620#event-85404"
}
```




---

archive/issue_events_085405.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-10T17:42:09Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29620",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29620#event-85405"
}
```




---

archive/issue_events_085406.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-10T17:42:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29620",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29620#event-85406"
}
```




---

archive/issue_comments_580332.json:
```json
{
    "body": "<a id='comment:18'></a>\nMoving to 9.4, as 9.3 has been released.",
    "created_at": "2021-05-10T17:42:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29620",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29620#issuecomment-580332",
    "user": "https://github.com/mkoeppe"
}
```


<a id='comment:18'></a>
Moving to 9.4, as 9.3 has been released.



---

archive/issue_events_085407.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T02:58:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29620",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29620#event-85407"
}
```




---

archive/issue_events_085408.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T02:58:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29620",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29620#event-85408"
}
```




---

archive/issue_comments_580333.json:
```json
{
    "body": "<a id='comment:20'></a>\nI have opened #32549 to remove package `mpir`",
    "created_at": "2021-09-22T03:01:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29620",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29620#issuecomment-580333",
    "user": "https://github.com/mkoeppe"
}
```


<a id='comment:20'></a>
I have opened #32549 to remove package `mpir`



---

archive/issue_comments_580334.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -13,6 +13,7 @@\n   --with-mp=gmp           use the Sage SPKG for GMP as multiprecision library\n ```\n (The first two are automatically generated and do not work properly. The `--with-mp` option is legacy and works properly but does not fit well with the systematic naming scheme.\n+(removing `mpir` in #32549 removes this case)\n \n Same for BLAS (as reported most recently in https://groups.google.com/g/sage-support/c/pqnhfUJYS-Q/m/lOQJ3EtYBwAJ):\n \n@@ -24,6 +25,7 @@\n   --with-blas=openblas    use OpenBLAS as BLAS library (default)\n     --with-blas=atlas       use ATLAS as BLAS library\n ``` \n+(removing `atlas` in #30350 removes this case)\n \n And to a lesser degree for these ones:\n \n``````\n",
    "created_at": "2021-09-25T17:33:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29620",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29620#issuecomment-580334",
    "user": "https://github.com/mkoeppe"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -13,6 +13,7 @@
   --with-mp=gmp           use the Sage SPKG for GMP as multiprecision library
 ```
 (The first two are automatically generated and do not work properly. The `--with-mp` option is legacy and works properly but does not fit well with the systematic naming scheme.
+(removing `mpir` in #32549 removes this case)
 
 Same for BLAS (as reported most recently in https://groups.google.com/g/sage-support/c/pqnhfUJYS-Q/m/lOQJ3EtYBwAJ):
 
@@ -24,6 +25,7 @@
   --with-blas=openblas    use OpenBLAS as BLAS library (default)
     --with-blas=atlas       use ATLAS as BLAS library
 ``` 
+(removing `atlas` in #30350 removes this case)
 
 And to a lesser degree for these ones:
 
``````




---

archive/issue_events_085409.json:
```json
{
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/29620",
    "label": "critical",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29620#event-85409"
}
```




---

archive/issue_events_085410.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29620",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29620#event-85410"
}
```




---

archive/issue_events_085411.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29620",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29620#event-85411"
}
```




---

archive/issue_comments_580335.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"spkg-pairs\".",
    "created_at": "2022-01-01T22:32:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29620",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29620#issuecomment-580335",
    "user": "https://github.com/slel"
}
```


**Changing keywords** from "" to "spkg-pairs".



---

archive/issue_comments_580336.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,40 +1,42 @@\n-Likewise for `--with-system-gcc=no --with-system-gfortran=no`, as reported in https://groups.google.com/d/msg/sage-devel/YyB2zk2Lbtg/4YTwKlMJAgAJ\n+Some functionality can be provided by\n+either one of two SPKGs.\n \n-For gmp/mpir, we have:\n+For such pairs (A, B) of SPKGs, configuring with\n \n ```\n-  --with-system-gmp={no|yes (default)|force (exit with an error if no usable version is found)}\n-                          detect and use an existing system gmp\n-  --with-system-mpir={no|yes (default)|force (exit with an error if no usable version is found)}\n-                          detect and use an existing system mpir\n-  --with-mp=system        use the system GMP as multiprecision library, if\n-                          possible (default)\n-  --with-mp=mpir          use the Sage SPKG for MPIR as multiprecision library\n-  --with-mp=gmp           use the Sage SPKG for GMP as multiprecision library\n+./configure --without-system-A --without-system-B\n ```\n-(The first two are automatically generated and do not work properly. The `--with-mp` option is legacy and works properly but does not fit well with the systematic naming scheme.\n-(removing `mpir` in #32549 removes this case)\n-\n-Same for BLAS (as reported most recently in https://groups.google.com/g/sage-support/c/pqnhfUJYS-Q/m/lOQJ3EtYBwAJ):\n+or equivalently\n \n ```\n-  --with-system-atlas={no|yes (default)|force (exit with an error if no usable version is found)}\n-                          detect and use an existing system atlas\n-  --with-system-openblas={no|yes (default)|force (exit with an error if no usable version is found)}\n-                          detect and use an existing system openblas\n-  --with-blas=openblas    use OpenBLAS as BLAS library (default)\n-    --with-blas=atlas       use ATLAS as BLAS library\n-``` \n-(removing `atlas` in #30350 removes this case)\n+./configure --with-system-A=no --with-system-B=no\n+```\n+can result in both A and B being built.\n \n-And to a lesser degree for these ones:\n+Some cases are solved after the removal\n+of one of the spkgs in the pair.\n+\n+- `gmp` vs `mpir`: remove `mpir` #32549, #32727\n+- `atlas` vs `openblas`; remove `atlas` #30350\n+- full `boost` vs `boost_cropped`; remove full #31575;\n+  m4 files use cropped #31871\n+\n+Remaining cases:\n+\n+- gfortran can be provided by the `gcc` or `gfortran` SPKGs\n+- some database packages have `SPKG` vs `SPKG_small` pairs\n+\n+**gfortran**\n+\n+Both `gcc` and `gfortran` built after\n \n ```\n-  --with-system-boost={no|yes (default)|force (exit with an error if no usable version is found)}\n-                          detect and use an existing system boost\n-  --with-system-boost_cropped={no|yes (default)|force (exit with an error if no usable version is found)}\n-                          detect and use an existing system boost_cropped\n+./configure --with-system-gcc=no --with-system-gfortran=no`\n ```\n+\n+- [sage-devel report](https://groups.google.com/d/msg/sage-devel/YyB2zk2Lbtg/4YTwKlMJAgAJ)\n+\n+**SPKG_small**\n \n ```\n   --with-system-pari_seadata={no|yes (default)|force (exit with an error if no usable version is found)}\n@@ -43,8 +45,4 @@\n                           detect and use an existing system pari_seadata_small\n ```\n \n-\n-Overall, we need a better solution for such mutually exclusive packages.\n-\n-\n-\n+Overall, we need a better solution for such pairs of packages.\n``````\n",
    "created_at": "2022-01-01T22:32:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29620",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29620#issuecomment-580336",
    "user": "https://github.com/slel"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -1,40 +1,42 @@
-Likewise for `--with-system-gcc=no --with-system-gfortran=no`, as reported in https://groups.google.com/d/msg/sage-devel/YyB2zk2Lbtg/4YTwKlMJAgAJ
+Some functionality can be provided by
+either one of two SPKGs.
 
-For gmp/mpir, we have:
+For such pairs (A, B) of SPKGs, configuring with
 
 ```
-  --with-system-gmp={no|yes (default)|force (exit with an error if no usable version is found)}
-                          detect and use an existing system gmp
-  --with-system-mpir={no|yes (default)|force (exit with an error if no usable version is found)}
-                          detect and use an existing system mpir
-  --with-mp=system        use the system GMP as multiprecision library, if
-                          possible (default)
-  --with-mp=mpir          use the Sage SPKG for MPIR as multiprecision library
-  --with-mp=gmp           use the Sage SPKG for GMP as multiprecision library
+./configure --without-system-A --without-system-B
 ```
-(The first two are automatically generated and do not work properly. The `--with-mp` option is legacy and works properly but does not fit well with the systematic naming scheme.
-(removing `mpir` in #32549 removes this case)
-
-Same for BLAS (as reported most recently in https://groups.google.com/g/sage-support/c/pqnhfUJYS-Q/m/lOQJ3EtYBwAJ):
+or equivalently
 
 ```
-  --with-system-atlas={no|yes (default)|force (exit with an error if no usable version is found)}
-                          detect and use an existing system atlas
-  --with-system-openblas={no|yes (default)|force (exit with an error if no usable version is found)}
-                          detect and use an existing system openblas
-  --with-blas=openblas    use OpenBLAS as BLAS library (default)
-    --with-blas=atlas       use ATLAS as BLAS library
-``` 
-(removing `atlas` in #30350 removes this case)
+./configure --with-system-A=no --with-system-B=no
+```
+can result in both A and B being built.
 
-And to a lesser degree for these ones:
+Some cases are solved after the removal
+of one of the spkgs in the pair.
+
+- `gmp` vs `mpir`: remove `mpir` #32549, #32727
+- `atlas` vs `openblas`; remove `atlas` #30350
+- full `boost` vs `boost_cropped`; remove full #31575;
+  m4 files use cropped #31871
+
+Remaining cases:
+
+- gfortran can be provided by the `gcc` or `gfortran` SPKGs
+- some database packages have `SPKG` vs `SPKG_small` pairs
+
+**gfortran**
+
+Both `gcc` and `gfortran` built after
 
 ```
-  --with-system-boost={no|yes (default)|force (exit with an error if no usable version is found)}
-                          detect and use an existing system boost
-  --with-system-boost_cropped={no|yes (default)|force (exit with an error if no usable version is found)}
-                          detect and use an existing system boost_cropped
+./configure --with-system-gcc=no --with-system-gfortran=no`
 ```
+
+- [sage-devel report](https://groups.google.com/d/msg/sage-devel/YyB2zk2Lbtg/4YTwKlMJAgAJ)
+
+**SPKG_small**
 
 ```
   --with-system-pari_seadata={no|yes (default)|force (exit with an error if no usable version is found)}
@@ -43,8 +45,4 @@
                           detect and use an existing system pari_seadata_small
 ```
 
-
-Overall, we need a better solution for such mutually exclusive packages.
-
-
-
+Overall, we need a better solution for such pairs of packages.
``````




---

archive/issue_comments_580337.json:
```json
{
    "body": "<a id='comment:23'></a>\nReworded ticket description (removing some bits\nreproduced below) after\n\n- ATLAS removed in #30350.\n- MPIR removed in #32549 and #32727.\n- work on boost and boost-cropped:\n  - #31871: replace boost by boost_cropped in m4 files\n  - #31575: Remove full boost package\n  - #31250: Upgrade: boost_cropped 1.78.0\n\n---\n\nFor gmp/mpir, we have:\n\n```\n  --with-system-gmp={no|yes (default)|force (exit with an error if no usable version is found)}\n                          detect and use an existing system gmp\n  --with-system-mpir={no|yes (default)|force (exit with an error if no usable version is found)}\n                          detect and use an existing system mpir\n  --with-mp=system        use the system GMP as multiprecision library, if\n                          possible (default)\n  --with-mp=mpir          use the Sage SPKG for MPIR as multiprecision library\n  --with-mp=gmp           use the Sage SPKG for GMP as multiprecision library\n```\nThe first two are automatically generated and do not work properly. The `--with-mp` option is legacy and works properly but does not fit well with the systematic naming scheme. Removing `mpir` in #32549 removes this case.\n\nSame for BLAS (as reported most recently in https://groups.google.com/g/sage-support/c/pqnhfUJYS-Q/m/lOQJ3EtYBwAJ):\n\n```\n  --with-system-atlas={no|yes (default)|force (exit with an error if no usable version is found)}\n                          detect and use an existing system atlas\n  --with-system-openblas={no|yes (default)|force (exit with an error if no usable version is found)}\n                          detect and use an existing system openblas\n  --with-blas=openblas    use OpenBLAS as BLAS library (default)\n    --with-blas=atlas       use ATLAS as BLAS library\n``` \nRemoving `atlas` in #30350 removes this case.\n\nAnd to a lesser degree for these ones:\n\n```\n  --with-system-boost={no|yes (default)|force (exit with an error if no usable version is found)}\n                          detect and use an existing system boost\n  --with-system-boost_cropped={no|yes (default)|force (exit with an error if no usable version is found)}\n                          detect and use an existing system boost_cropped\n```",
    "created_at": "2022-01-01T22:32:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29620",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29620#issuecomment-580337",
    "user": "https://github.com/slel"
}
```


<a id='comment:23'></a>
Reworded ticket description (removing some bits
reproduced below) after

- ATLAS removed in #30350.
- MPIR removed in #32549 and #32727.
- work on boost and boost-cropped:
  - #31871: replace boost by boost_cropped in m4 files
  - #31575: Remove full boost package
  - #31250: Upgrade: boost_cropped 1.78.0

---

For gmp/mpir, we have:

```
  --with-system-gmp={no|yes (default)|force (exit with an error if no usable version is found)}
                          detect and use an existing system gmp
  --with-system-mpir={no|yes (default)|force (exit with an error if no usable version is found)}
                          detect and use an existing system mpir
  --with-mp=system        use the system GMP as multiprecision library, if
                          possible (default)
  --with-mp=mpir          use the Sage SPKG for MPIR as multiprecision library
  --with-mp=gmp           use the Sage SPKG for GMP as multiprecision library
```
The first two are automatically generated and do not work properly. The `--with-mp` option is legacy and works properly but does not fit well with the systematic naming scheme. Removing `mpir` in #32549 removes this case.

Same for BLAS (as reported most recently in https://groups.google.com/g/sage-support/c/pqnhfUJYS-Q/m/lOQJ3EtYBwAJ):

```
  --with-system-atlas={no|yes (default)|force (exit with an error if no usable version is found)}
                          detect and use an existing system atlas
  --with-system-openblas={no|yes (default)|force (exit with an error if no usable version is found)}
                          detect and use an existing system openblas
  --with-blas=openblas    use OpenBLAS as BLAS library (default)
    --with-blas=atlas       use ATLAS as BLAS library
``` 
Removing `atlas` in #30350 removes this case.

And to a lesser degree for these ones:

```
  --with-system-boost={no|yes (default)|force (exit with an error if no usable version is found)}
                          detect and use an existing system boost
  --with-system-boost_cropped={no|yes (default)|force (exit with an error if no usable version is found)}
                          detect and use an existing system boost_cropped
```



---

archive/issue_events_085412.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/29620",
    "rename": {
        "from": "./configure --without-system-gmp --without-system-mpir installs both GMP and MPIR spkg; and similar issues for openblas/atlas, boost/boost_cropped, SPKG/SPKG_small",
        "to": "./configure --without-system-A --without-system-B can build both A and B"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29620#event-85412"
}
```




---

archive/issue_events_085413.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T01:55:27Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29620",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29620#event-85413"
}
```




---

archive/issue_events_085414.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T01:55:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29620",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29620#event-85414"
}
```




---

archive/issue_events_085415.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29620",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29620#event-85415"
}
```




---

archive/issue_events_085416.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29620",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29620#event-85416"
}
```

