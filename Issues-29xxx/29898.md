# Issue 29898: vertex facet graph for trivial polyhedra fails

archive/issues_029661.json:
```json
{
    "body": "The vertex facet graph of `CombinatorialPolyhedron` only works for polyhedra of dimension at least one. With #29188 this makes it fail with for `Polyhedron_base` as well.\n\nWe fix this to return\n- the `Digraph` on 0 vertices for the empty polyhedron and\n- the `Digraph` on 1 vertex for the 0-dimensional polyhedron (it was misbehaved even before #29188).\n\nWe also \"fix\" the definition of facets to correspond to inequalities.\nThe `0`-dimensional polyhedron does not have facets in this case anymore.\n(Before this ticket `n_facets` and `facets` would use different definitions of facets.)\n\n**CC:**  @jplab @LaisRast\n\n**Keywords:** polyhedra, vertex facet graph\n\n**Branch:** [25cfaa04806fdd91dc1d5aebac5b946d10f19f83](https://github.com/sagemath/sagetrac-mirror/commit/25cfaa04806fdd91dc1d5aebac5b946d10f19f83)\n\n**Reviewer:** Matthias Koeppe\n\n**Author:** Jonathan Kliem\n\nIssue created by migration from https://trac.sagemath.org/ticket/29898\n\n",
    "closed_at": "2020-07-10T19:33:57Z",
    "created_at": "2020-06-19T14:31:02Z",
    "labels": [
        "component: geometry",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.2",
    "title": "vertex facet graph for trivial polyhedra fails",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/29898",
    "user": "https://github.com/kliem"
}
```
The vertex facet graph of `CombinatorialPolyhedron` only works for polyhedra of dimension at least one. With #29188 this makes it fail with for `Polyhedron_base` as well.

We fix this to return
- the `Digraph` on 0 vertices for the empty polyhedron and
- the `Digraph` on 1 vertex for the 0-dimensional polyhedron (it was misbehaved even before #29188).

We also "fix" the definition of facets to correspond to inequalities.
The `0`-dimensional polyhedron does not have facets in this case anymore.
(Before this ticket `n_facets` and `facets` would use different definitions of facets.)

**CC:**  @jplab @LaisRast

**Keywords:** polyhedra, vertex facet graph

**Branch:** [25cfaa04806fdd91dc1d5aebac5b946d10f19f83](https://github.com/sagemath/sagetrac-mirror/commit/25cfaa04806fdd91dc1d5aebac5b946d10f19f83)

**Reviewer:** Matthias Koeppe

**Author:** Jonathan Kliem

Issue created by migration from https://trac.sagemath.org/ticket/29898





---

archive/issue_events_266780.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-19T14:34:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29898#event-266780"
}
```



---

archive/issue_comments_475257.json:
```json
{
    "body": "**Branch:** [public/29898](https://github.com/sagemath/sagetrac-mirror/tree/public/29898)",
    "created_at": "2020-06-19T14:34:28Z",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475257",
    "user": "https://github.com/kliem"
}
```

**Branch:** [public/29898](https://github.com/sagemath/sagetrac-mirror/tree/public/29898)



---

archive/issue_comments_475258.json:
```json
{
    "body": "**Commit:** [790dfbcad639920619b3d792f728c6d4070bc40f](https://github.com/sagemath/sagetrac-mirror/commit/790dfbcad639920619b3d792f728c6d4070bc40f)",
    "created_at": "2020-06-19T14:34:28Z",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475258",
    "user": "https://github.com/kliem"
}
```

**Commit:** [790dfbcad639920619b3d792f728c6d4070bc40f](https://github.com/sagemath/sagetrac-mirror/commit/790dfbcad639920619b3d792f728c6d4070bc40f)



---

archive/issue_comments_475259.json:
```json
{
    "body": "<a id='comment:1'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/790dfbcad639920619b3d792f728c6d4070bc40f\">790dfbc</a></td><td><code>fix trivial vertex facet graphs</code></td></tr></table>\n",
    "created_at": "2020-06-19T14:34:28Z",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475259",
    "user": "https://github.com/kliem"
}
```

<a id='comment:1'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/790dfbcad639920619b3d792f728c6d4070bc40f">790dfbc</a></td><td><code>fix trivial vertex facet graphs</code></td></tr></table>




---

archive/issue_comments_475260.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7cca4927943438b7091e10d036d08b19279f0a2\">d7cca49</a></td><td><code>correct fix for 0-dimensional polyhedron</code></td></tr></table>\n",
    "created_at": "2020-06-19T17:40:40Z",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475260",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7cca4927943438b7091e10d036d08b19279f0a2">d7cca49</a></td><td><code>correct fix for 0-dimensional polyhedron</code></td></tr></table>




---

archive/issue_comments_475261.json:
```json
{
    "body": "**Changing commit** from \"[790dfbcad639920619b3d792f728c6d4070bc40f](https://github.com/sagemath/sagetrac-mirror/commit/790dfbcad639920619b3d792f728c6d4070bc40f)\" to \"[d7cca4927943438b7091e10d036d08b19279f0a2](https://github.com/sagemath/sagetrac-mirror/commit/d7cca4927943438b7091e10d036d08b19279f0a2)\".",
    "created_at": "2020-06-19T17:40:40Z",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475261",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[790dfbcad639920619b3d792f728c6d4070bc40f](https://github.com/sagemath/sagetrac-mirror/commit/790dfbcad639920619b3d792f728c6d4070bc40f)" to "[d7cca4927943438b7091e10d036d08b19279f0a2](https://github.com/sagemath/sagetrac-mirror/commit/d7cca4927943438b7091e10d036d08b19279f0a2)".



---

archive/issue_comments_475262.json:
```json
{
    "body": "<a id='comment:3'></a>\nDoes a 0-dimensional polyhedron really have a facet??",
    "created_at": "2020-06-22T05:01:43Z",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475262",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>
Does a 0-dimensional polyhedron really have a facet??



---

archive/issue_comments_475263.json:
```json
{
    "body": "<a id='comment:4'></a>\nI would say so. This is the \"definition\" from G\u00fcnter Zieglers book \"Lectures on Polytopes\":\n\n> Also the empty set is a face for\n> every polytope. Less trivially, one has as faces the vertices of the polytope,\n> which are single points, the edges, which are 1-dimensional line segments,\n> and the facets, i.e., the maximal proper faces, whose dimension is one less\n> than that of the polytope itself.\n\n\nAccording to this the facets of the 0-dimensional polytope is the empty face. And I would say that this is reasonable. There is also an inequality defining that face: \"(0,...,0)*x + 1 >= 0\" (and the 0-vector might have lenght 0 according to ambient dimension).\nThis is how it is currently handled in most parts\n\n```\nsage: P = Polyhedron([[0]])\nsage: P.incidence_matrix()\n[1]\nsage: P.facets()\n(A -1-dimensional face of a Polyhedron in ZZ^1,)\n```\n\nBut of course, I might have be influential to \"bug fixes\" to make it behave like this.",
    "created_at": "2020-06-22T06:14:49Z",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475263",
    "user": "https://github.com/kliem"
}
```

<a id='comment:4'></a>
I would say so. This is the "definition" from GÃ¼nter Zieglers book "Lectures on Polytopes":

> Also the empty set is a face for
> every polytope. Less trivially, one has as faces the vertices of the polytope,
> which are single points, the edges, which are 1-dimensional line segments,
> and the facets, i.e., the maximal proper faces, whose dimension is one less
> than that of the polytope itself.


According to this the facets of the 0-dimensional polytope is the empty face. And I would say that this is reasonable. There is also an inequality defining that face: "(0,...,0)*x + 1 >= 0" (and the 0-vector might have lenght 0 according to ambient dimension).
This is how it is currently handled in most parts

```
sage: P = Polyhedron([[0]])
sage: P.incidence_matrix()
[1]
sage: P.facets()
(A -1-dimensional face of a Polyhedron in ZZ^1,)
```

But of course, I might have be influential to "bug fixes" to make it behave like this.



---

archive/issue_comments_475264.json:
```json
{
    "body": "<a id='comment:5'></a>\nHm... the old version of Ziegler's at https://arxiv.org/pdf/math/9909177.pdf says \"The maximal non-trivial faces, of dimension dim(P) \u2212 1, are the facets of P.\" -- which excludes the empty face as a possibility.",
    "created_at": "2020-06-22T06:18:38Z",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475264",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>
Hm... the old version of Ziegler's at https://arxiv.org/pdf/math/9909177.pdf says "The maximal non-trivial faces, of dimension dim(P) â 1, are the facets of P." -- which excludes the empty face as a possibility.



---

archive/issue_comments_475265.json:
```json
{
    "body": "<a id='comment:6'></a>\nI find the version that allows the empty face pretty disturbing.",
    "created_at": "2020-06-22T06:21:45Z",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475265",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
I find the version that allows the empty face pretty disturbing.



---

archive/issue_comments_475266.json:
```json
{
    "body": "<a id='comment:7'></a>\nEither definition is trouble:\n\n- If you define facets by correspondence with irreducible inequalites than the empty face of the 0-dimensional polytope is not a facet. However it is certainly maximal.\n- If you define the facets by maximality than you loose that correspondence.",
    "created_at": "2020-06-22T06:23:03Z",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475266",
    "user": "https://github.com/kliem"
}
```

<a id='comment:7'></a>
Either definition is trouble:

- If you define facets by correspondence with irreducible inequalites than the empty face of the 0-dimensional polytope is not a facet. However it is certainly maximal.
- If you define the facets by maximality than you loose that correspondence.



---

archive/issue_comments_475267.json:
```json
{
    "body": "<a id='comment:8'></a>\nEither way, I set up the vertex-facet graph wrong. There shouldn't be an edge, as the vertex is not contained in the facet.",
    "created_at": "2020-06-22T06:23:33Z",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475267",
    "user": "https://github.com/kliem"
}
```

<a id='comment:8'></a>
Either way, I set up the vertex-facet graph wrong. There shouldn't be an edge, as the vertex is not contained in the facet.



---

archive/issue_comments_475268.json:
```json
{
    "body": "<a id='comment:9'></a>\nWell the empty face is maximal in the proper faces but not maximal in the nontrivial faces.",
    "created_at": "2020-06-22T06:25:40Z",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475268",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
Well the empty face is maximal in the proper faces but not maximal in the nontrivial faces.



---

archive/issue_comments_475269.json:
```json
{
    "body": "<a id='comment:10'></a>\nIn the new definition that is different:\n\n> We consider the polytope itself as a trivial\n> face; all other faces are called proper faces\n\n\nAnd then comes the part that I already quoted.\n\nBut...\n\nThe facets not corresponding to inequalities is huge trouble. I myself made \"mistakes\" because of that. It seems much easier to define the facets as maximal non-trival faces with the empty face being trivial as well.\n\nThan we have our irreducible inequality/facet correspondence. So I agree with you that this definition makes more sense.\n\nBut that would involve a few \"fixes\".\n\nI'll also send a quick note to G\u00fcnter Ziegler and see what he thinks, as he is still revising his new definition I believe.",
    "created_at": "2020-06-22T06:31:35Z",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475269",
    "user": "https://github.com/kliem"
}
```

<a id='comment:10'></a>
In the new definition that is different:

> We consider the polytope itself as a trivial
> face; all other faces are called proper faces


And then comes the part that I already quoted.

But...

The facets not corresponding to inequalities is huge trouble. I myself made "mistakes" because of that. It seems much easier to define the facets as maximal non-trival faces with the empty face being trivial as well.

Than we have our irreducible inequality/facet correspondence. So I agree with you that this definition makes more sense.

But that would involve a few "fixes".

I'll also send a quick note to GÃ¼nter Ziegler and see what he thinks, as he is still revising his new definition I believe.



---

archive/issue_comments_475270.json:
```json
{
    "body": "<a id='comment:11'></a>\n> An inequality is irredundant if and only if it defines a facet of P\n> and no multiple of it is contained in the system.\n\n\nThis statement is exercise 2.15 (iii) and clearly doesn't fit to the definition. Then again we loose the vertex-facet correspondence for polarity.\n\nBtw the polarity for 0-dimensional polyhedra is broken as well (but only for base ring `ZZ`):\n\n```\nsage: P = Polyhedron([[]])\nsage: P\nA 0-dimensional polyhedron in ZZ^0 defined as the convex hull of 1 vertex\nsage: P.polar()\nThe empty polyhedron in ZZ^0\n```",
    "created_at": "2020-06-22T08:36:27Z",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475270",
    "user": "https://github.com/kliem"
}
```

<a id='comment:11'></a>
> An inequality is irredundant if and only if it defines a facet of P
> and no multiple of it is contained in the system.


This statement is exercise 2.15 (iii) and clearly doesn't fit to the definition. Then again we loose the vertex-facet correspondence for polarity.

Btw the polarity for 0-dimensional polyhedra is broken as well (but only for base ring `ZZ`):

```
sage: P = Polyhedron([[]])
sage: P
A 0-dimensional polyhedron in ZZ^0 defined as the convex hull of 1 vertex
sage: P.polar()
The empty polyhedron in ZZ^0
```



---

archive/issue_comments_475271.json:
```json
{
    "body": "<a id='comment:12'></a>\n\n```\nsage: P = Polyhedron([[]])\nsage: P.n_facets()\n0\nsage: P.facets()\n(A -1-dimensional face of a Polyhedron in ZZ^0,)\n```",
    "created_at": "2020-06-22T10:32:57Z",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475271",
    "user": "https://github.com/kliem"
}
```

<a id='comment:12'></a>

```
sage: P = Polyhedron([[]])
sage: P.n_facets()
0
sage: P.facets()
(A -1-dimensional face of a Polyhedron in ZZ^0,)
```



---

archive/issue_comments_475272.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [gh-kliem](#comment%3A12):\n> \n> ```\n> sage: P = Polyhedron([[]])\n> sage: P.n_facets()\n> 0\n> sage: P.facets()\n> (A -1-dimensional face of a Polyhedron in ZZ^0,)\n> ```\n\n\nYes, this is not good.",
    "created_at": "2020-06-26T16:50:37Z",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475272",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>
Replying to [gh-kliem](#comment%3A12):
> 
> ```
> sage: P = Polyhedron([[]])
> sage: P.n_facets()
> 0
> sage: P.facets()
> (A -1-dimensional face of a Polyhedron in ZZ^0,)
> ```


Yes, this is not good.



---

archive/issue_events_266781.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-06-26T16:50:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29898#event-266781"
}
```



---

archive/issue_events_266782.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-06-26T16:50:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29898#event-266782"
}
```



---

archive/issue_comments_475273.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [mkoeppe](#comment%3A13):\n> Replying to [gh-kliem](#comment%3A12):\n> > \n> > ```\n> > sage: P = Polyhedron([[]])\n> > sage: P.n_facets()\n> > 0\n> > sage: P.facets()\n> > (A -1-dimensional face of a Polyhedron in ZZ^0,)\n> > ```\n\n> \n> Yes, this is not good.\n\n\nThe reason for this is simple. `n_facets` is just an alias of `n_inequalities`.\n\nEither way, we cannot have it consistent:\n- The class of polyhedra without inequalities doesn't have any facets.\n- Facets of polyhedra correspond to coatoms of their face lattice.\n- vertices of polytopes correspond to facets of their polar/dual.\n- (irredundant) Inequalities of polyhedra correspond to facets.\n\nI personally think that we should define facets as the `d-1`-faces of `d`-polyhedra.\n\nBut I have no hard feelings either way. It just should be made clear that the 0-polytope cannot be made consistent in some ways.",
    "created_at": "2020-06-27T09:46:00Z",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475273",
    "user": "https://github.com/kliem"
}
```

<a id='comment:14'></a>
Replying to [mkoeppe](#comment%3A13):
> Replying to [gh-kliem](#comment%3A12):
> > 
> > ```
> > sage: P = Polyhedron([[]])
> > sage: P.n_facets()
> > 0
> > sage: P.facets()
> > (A -1-dimensional face of a Polyhedron in ZZ^0,)
> > ```

> 
> Yes, this is not good.


The reason for this is simple. `n_facets` is just an alias of `n_inequalities`.

Either way, we cannot have it consistent:
- The class of polyhedra without inequalities doesn't have any facets.
- Facets of polyhedra correspond to coatoms of their face lattice.
- vertices of polytopes correspond to facets of their polar/dual.
- (irredundant) Inequalities of polyhedra correspond to facets.

I personally think that we should define facets as the `d-1`-faces of `d`-polyhedra.

But I have no hard feelings either way. It just should be made clear that the 0-polytope cannot be made consistent in some ways.



---

archive/issue_comments_475274.json:
```json
{
    "body": "<a id='comment:15'></a>\nEither way, definitely `n_facets()` must be the same as the cardinality of `facets()`.\n\nTo me, the bijection between facets and irredundant inequalities is the most important. Let me add that even the status of the empty set as a face is not uniform across the literature. For example, in Schrijver, Theory of Linear and Integer Programming, faces are nonempty by definition (section 8.3), and the face lattice is obtained by considering the empty set as a special element in addition to the faces (section 8.6).",
    "created_at": "2020-06-27T17:58:32Z",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475274",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>
Either way, definitely `n_facets()` must be the same as the cardinality of `facets()`.

To me, the bijection between facets and irredundant inequalities is the most important. Let me add that even the status of the empty set as a face is not uniform across the literature. For example, in Schrijver, Theory of Linear and Integer Programming, faces are nonempty by definition (section 8.3), and the face lattice is obtained by considering the empty set as a special element in addition to the faces (section 8.6).



---

archive/issue_comments_475275.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [mkoeppe](#comment%3A15):\n> Either way, definitely `n_facets()` must be the same as the cardinality of `facets()`.\n> \n> To me, the bijection between facets and irredundant inequalities is the most important. Let me add that even the status of the empty set as a face is not uniform across the literature. For example, in Schrijver, Theory of Linear and Integer Programming, faces are nonempty by definition (section 8.3), and the face lattice is obtained by considering the empty set as a special element in addition to the faces (section 8.6). \n> \n\n+1\n\nLooking at the subsets of the polytope obtained through supporting hyperplanes gives faces. My interpretation here is that it is a combinatorial discussion to have \"the whole polytope\" and \"the empty face\" included in the poset of faces, as of course adding them makes it a lattice. This act of \"adding the trivial faces\" forces an eventual consideration of \"non-proper/non-trivial\" faces when defining anything...\n\nObviously, things go wrong in the following case:\n\n  one removes the non-proper faces and obtains a poset which consists of an anti-chain (can only contain 1 or 2 elements in our case...)\n\nIn this case, \"vertices\" and \"facets\" are the same. Now you can even go wild and think about the actual object in space (not-being full-dimensional).\n\nIf you have one element only, i.e., you have a 0-dimensional polytope, then, what happens combinatorially is that the two elements are fusioned into one and yes, there isn't a bijection between actual maximal subsets given by supporting hyperplanes and the facet defining inequalities.\n\nI would say that the 0-dimensional polytopes form \"the exception that confirms the rule\", as we say in French. Because of the fact that vertices and facet are the same, this creates this special situation, otherwise, the bijection should exist.\n\nWith this perspective, the next step is that\n\n  one removes the non-proper faces and obtains an empty poset, for the empty polyhedron. Does the empty polyhedron have facets? I hope not, right?",
    "created_at": "2020-06-29T07:35:09Z",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475275",
    "user": "https://github.com/jplab"
}
```

<a id='comment:16'></a>
Replying to [mkoeppe](#comment%3A15):
> Either way, definitely `n_facets()` must be the same as the cardinality of `facets()`.
> 
> To me, the bijection between facets and irredundant inequalities is the most important. Let me add that even the status of the empty set as a face is not uniform across the literature. For example, in Schrijver, Theory of Linear and Integer Programming, faces are nonempty by definition (section 8.3), and the face lattice is obtained by considering the empty set as a special element in addition to the faces (section 8.6). 
> 

+1

Looking at the subsets of the polytope obtained through supporting hyperplanes gives faces. My interpretation here is that it is a combinatorial discussion to have "the whole polytope" and "the empty face" included in the poset of faces, as of course adding them makes it a lattice. This act of "adding the trivial faces" forces an eventual consideration of "non-proper/non-trivial" faces when defining anything...

Obviously, things go wrong in the following case:

  one removes the non-proper faces and obtains a poset which consists of an anti-chain (can only contain 1 or 2 elements in our case...)

In this case, "vertices" and "facets" are the same. Now you can even go wild and think about the actual object in space (not-being full-dimensional).

If you have one element only, i.e., you have a 0-dimensional polytope, then, what happens combinatorially is that the two elements are fusioned into one and yes, there isn't a bijection between actual maximal subsets given by supporting hyperplanes and the facet defining inequalities.

I would say that the 0-dimensional polytopes form "the exception that confirms the rule", as we say in French. Because of the fact that vertices and facet are the same, this creates this special situation, otherwise, the bijection should exist.

With this perspective, the next step is that

  one removes the non-proper faces and obtains an empty poset, for the empty polyhedron. Does the empty polyhedron have facets? I hope not, right?



---

archive/issue_comments_475276.json:
```json
{
    "body": "<a id='comment:17'></a>\nThe case where vertices and facets are the same, is for 1-dimensional polyhedra.",
    "created_at": "2020-06-29T07:56:21Z",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475276",
    "user": "https://github.com/kliem"
}
```

<a id='comment:17'></a>
The case where vertices and facets are the same, is for 1-dimensional polyhedra.



---

archive/issue_comments_475277.json:
```json
{
    "body": "<a id='comment:18'></a>\nOne other problem with the definition as maximal subfaces (including the empty face) is that it doesn't make any sense for any polyhedron without inequalities. Surely you don't want that the empty face is a facet of RR^2\n\nThe 0-dimensional polytope belongs to that family.\n\nThe other thing is that the vertex-facet-digraph relies on the fact that vertices are contained in facets or not. If facets are -1-dimensional and vertices 0-dimensional, this doesn't make any sense anymore.\n\nTo summarize this discussion, I think we agree that we should alter `facets` and maybe other methods, such that facets need to be proper faces of polyhedra. Where proper means neither empty nor full-dimensional. Should I open a seperate ticket for it?",
    "created_at": "2020-06-29T08:11:23Z",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475277",
    "user": "https://github.com/kliem"
}
```

<a id='comment:18'></a>
One other problem with the definition as maximal subfaces (including the empty face) is that it doesn't make any sense for any polyhedron without inequalities. Surely you don't want that the empty face is a facet of RR^2

The 0-dimensional polytope belongs to that family.

The other thing is that the vertex-facet-digraph relies on the fact that vertices are contained in facets or not. If facets are -1-dimensional and vertices 0-dimensional, this doesn't make any sense anymore.

To summarize this discussion, I think we agree that we should alter `facets` and maybe other methods, such that facets need to be proper faces of polyhedra. Where proper means neither empty nor full-dimensional. Should I open a seperate ticket for it?



---

archive/issue_comments_475278.json:
```json
{
    "body": "<a id='comment:19'></a>\nI think it's fine to do this here on this ticket.",
    "created_at": "2020-07-04T19:21:34Z",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475278",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:19'></a>
I think it's fine to do this here on this ticket.



---

archive/issue_comments_475279.json:
```json
{
    "body": "<a id='comment:20'></a>\nI will.",
    "created_at": "2020-07-05T06:01:13Z",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475279",
    "user": "https://github.com/kliem"
}
```

<a id='comment:20'></a>
I will.



---

archive/issue_events_266783.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-07-05T06:01:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29898#event-266783"
}
```



---

archive/issue_events_266784.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-07-05T06:01:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29898#event-266784"
}
```



---

archive/issue_comments_475280.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,6 +2,8 @@\n \n We fix this to return\n - the `Digraph` on 0 vertices for the empty polyhedron and\n-- the `Digraph` on 2 vertices with one edge for the 0-dimensional polyhedron (it was misbehaved even before #29188).\n+- the `Digraph` on 1 vertex for the 0-dimensional polyhedron (it was misbehaved even before #29188).\n \n-The vertex-facet-graph for the `0`-dimensional polyhedron is a bit tricky, as it doesn't have inequalities and `Polyhedron(([0])).combinatorial_polyhedron())` therefore lacks facet names.\n+We also \"fix\" the definition of facets to correspond to inequalities.\n+The `0`-dimensional polyhedron does not have facets in this case anymore.\n+(Before this ticket `n_facets` and `facets` would use different definitions of facets.)b\n``````\n",
    "created_at": "2020-07-05T08:03:53Z",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475280",
    "user": "https://github.com/kliem"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,6 +2,8 @@
 
 We fix this to return
 - the `Digraph` on 0 vertices for the empty polyhedron and
-- the `Digraph` on 2 vertices with one edge for the 0-dimensional polyhedron (it was misbehaved even before #29188).
+- the `Digraph` on 1 vertex for the 0-dimensional polyhedron (it was misbehaved even before #29188).
 
-The vertex-facet-graph for the `0`-dimensional polyhedron is a bit tricky, as it doesn't have inequalities and `Polyhedron(([0])).combinatorial_polyhedron())` therefore lacks facet names.
+We also "fix" the definition of facets to correspond to inequalities.
+The `0`-dimensional polyhedron does not have facets in this case anymore.
+(Before this ticket `n_facets` and `facets` would use different definitions of facets.)b
``````




---

archive/issue_comments_475281.json:
```json
{
    "body": "**Changing branch** from \"[public/29898](https://github.com/sagemath/sagetrac-mirror/tree/public/29898)\" to \"[public/29898-reb](https://github.com/sagemath/sagetrac-mirror/tree/public/29898-reb)\".",
    "created_at": "2020-07-05T08:46:04Z",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475281",
    "user": "https://github.com/kliem"
}
```

**Changing branch** from "[public/29898](https://github.com/sagemath/sagetrac-mirror/tree/public/29898)" to "[public/29898-reb](https://github.com/sagemath/sagetrac-mirror/tree/public/29898-reb)".



---

archive/issue_comments_475282.json:
```json
{
    "body": "<a id='comment:22'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/569cdce2de2d6bd19df8a324e0874ccb6785ae0a\">569cdce</a></td><td><code>Merge branch 'public/29898' of git://trac.sagemath.org/sage into public/29898-reb</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4379565f70a25c335d9f000450fa8239d1d557c\">d437956</a></td><td><code>fix definition of facets</code></td></tr></table>\n",
    "created_at": "2020-07-05T08:46:04Z",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475282",
    "user": "https://github.com/kliem"
}
```

<a id='comment:22'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/569cdce2de2d6bd19df8a324e0874ccb6785ae0a">569cdce</a></td><td><code>Merge branch 'public/29898' of git://trac.sagemath.org/sage into public/29898-reb</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4379565f70a25c335d9f000450fa8239d1d557c">d437956</a></td><td><code>fix definition of facets</code></td></tr></table>




---

archive/issue_events_266785.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-07-05T08:46:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29898#event-266785"
}
```



---

archive/issue_events_266786.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-07-05T08:46:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29898#event-266786"
}
```



---

archive/issue_comments_475283.json:
```json
{
    "body": "**Changing commit** from \"[d7cca4927943438b7091e10d036d08b19279f0a2](https://github.com/sagemath/sagetrac-mirror/commit/d7cca4927943438b7091e10d036d08b19279f0a2)\" to \"[d4379565f70a25c335d9f000450fa8239d1d557c](https://github.com/sagemath/sagetrac-mirror/commit/d4379565f70a25c335d9f000450fa8239d1d557c)\".",
    "created_at": "2020-07-05T08:46:04Z",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475283",
    "user": "https://github.com/kliem"
}
```

**Changing commit** from "[d7cca4927943438b7091e10d036d08b19279f0a2](https://github.com/sagemath/sagetrac-mirror/commit/d7cca4927943438b7091e10d036d08b19279f0a2)" to "[d4379565f70a25c335d9f000450fa8239d1d557c](https://github.com/sagemath/sagetrac-mirror/commit/d4379565f70a25c335d9f000450fa8239d1d557c)".



---

archive/issue_comments_475284.json:
```json
{
    "body": "<a id='comment:23'></a>\nTypo \"non-trival\" -> \"nontrivial\".\n\nWhen done, you can set \"positive review\"",
    "created_at": "2020-07-06T21:26:25Z",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475284",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'></a>
Typo "non-trival" -> "nontrivial".

When done, you can set "positive review"



---

archive/issue_comments_475285.json:
```json
{
    "body": "**Reviewer:** Matthias Koeppe",
    "created_at": "2020-07-06T21:26:25Z",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475285",
    "user": "https://github.com/mkoeppe"
}
```

**Reviewer:** Matthias Koeppe



---

archive/issue_comments_475286.json:
```json
{
    "body": "<a id='comment:24'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/25cfaa04806fdd91dc1d5aebac5b946d10f19f83\">25cfaa0</a></td><td><code>typo</code></td></tr></table>\n",
    "created_at": "2020-07-07T06:01:01Z",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475286",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/25cfaa04806fdd91dc1d5aebac5b946d10f19f83">25cfaa0</a></td><td><code>typo</code></td></tr></table>




---

archive/issue_comments_475287.json:
```json
{
    "body": "**Changing commit** from \"[d4379565f70a25c335d9f000450fa8239d1d557c](https://github.com/sagemath/sagetrac-mirror/commit/d4379565f70a25c335d9f000450fa8239d1d557c)\" to \"[25cfaa04806fdd91dc1d5aebac5b946d10f19f83](https://github.com/sagemath/sagetrac-mirror/commit/25cfaa04806fdd91dc1d5aebac5b946d10f19f83)\".",
    "created_at": "2020-07-07T06:01:01Z",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475287",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d4379565f70a25c335d9f000450fa8239d1d557c](https://github.com/sagemath/sagetrac-mirror/commit/d4379565f70a25c335d9f000450fa8239d1d557c)" to "[25cfaa04806fdd91dc1d5aebac5b946d10f19f83](https://github.com/sagemath/sagetrac-mirror/commit/25cfaa04806fdd91dc1d5aebac5b946d10f19f83)".



---

archive/issue_comments_475288.json:
```json
{
    "body": "<a id='comment:25'></a>\nThank you.",
    "created_at": "2020-07-07T06:01:45Z",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475288",
    "user": "https://github.com/kliem"
}
```

<a id='comment:25'></a>
Thank you.



---

archive/issue_events_266787.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-07-07T06:01:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29898#event-266787"
}
```



---

archive/issue_events_266788.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-07-07T06:01:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29898#event-266788"
}
```



---

archive/issue_comments_475289.json:
```json
{
    "body": "**Changing branch** from \"[public/29898-reb](https://github.com/sagemath/sagetrac-mirror/tree/public/29898-reb)\" to \"[25cfaa04806fdd91dc1d5aebac5b946d10f19f83](https://github.com/sagemath/sagetrac-mirror/commit/25cfaa04806fdd91dc1d5aebac5b946d10f19f83)\".",
    "created_at": "2020-07-10T19:33:57Z",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475289",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/29898-reb](https://github.com/sagemath/sagetrac-mirror/tree/public/29898-reb)" to "[25cfaa04806fdd91dc1d5aebac5b946d10f19f83](https://github.com/sagemath/sagetrac-mirror/commit/25cfaa04806fdd91dc1d5aebac5b946d10f19f83)".



---

archive/issue_events_266789.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-07-10T19:33:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29898#event-266789"
}
```



---

archive/issue_events_266790.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "04219c9cd48dae4729f8d397186a05aec8171cc0",
    "created_at": "2020-07-10T19:33:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29898#event-266790"
}
```



---

archive/issue_comments_475290.json:
```json
{
    "body": "**Changing commit** from \"[25cfaa04806fdd91dc1d5aebac5b946d10f19f83](https://github.com/sagemath/sagetrac-mirror/commit/25cfaa04806fdd91dc1d5aebac5b946d10f19f83)\" to \"\".",
    "created_at": "2020-08-27T05:14:10Z",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475290",
    "user": "https://github.com/kliem"
}
```

**Changing commit** from "[25cfaa04806fdd91dc1d5aebac5b946d10f19f83](https://github.com/sagemath/sagetrac-mirror/commit/25cfaa04806fdd91dc1d5aebac5b946d10f19f83)" to "".



---

archive/issue_comments_475291.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,4 +6,4 @@\n \n We also \"fix\" the definition of facets to correspond to inequalities.\n The `0`-dimensional polyhedron does not have facets in this case anymore.\n-(Before this ticket `n_facets` and `facets` would use different definitions of facets.)b\n+(Before this ticket `n_facets` and `facets` would use different definitions of facets.)\n``````\n",
    "created_at": "2020-08-27T05:14:10Z",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475291",
    "user": "https://github.com/kliem"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,4 +6,4 @@
 
 We also "fix" the definition of facets to correspond to inequalities.
 The `0`-dimensional polyhedron does not have facets in this case anymore.
-(Before this ticket `n_facets` and `facets` would use different definitions of facets.)b
+(Before this ticket `n_facets` and `facets` would use different definitions of facets.)
``````

