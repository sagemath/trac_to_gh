# Issue 29898: vertex facet graph for trivial polyhedra fails

archive/issues_029661.json:
```json
{
    "assignees": [],
    "body": "The vertex facet graph of `CombinatorialPolyhedron` only works for polyhedra of dimension at least one. With #29188 this makes it fail with for `Polyhedron_base` as well.\n\nWe fix this to return\n- the `Digraph` on 0 vertices for the empty polyhedron and\n- the `Digraph` on 1 vertex for the 0-dimensional polyhedron (it was misbehaved even before #29188).\n\nWe also \"fix\" the definition of facets to correspond to inequalities.\nThe `0`-dimensional polyhedron does not have facets in this case anymore.\n(Before this ticket `n_facets` and `facets` would use different definitions of facets.)\n\nCC:  @jplab @LaisRast\n\nKeywords: **polyhedra, vertex facet graph**\n\nBranch: **[25cfaa0](https://github.com/sagemath/sagetrac-mirror/commit/25cfaa04806fdd91dc1d5aebac5b946d10f19f83)**\n\nReviewer: **Matthias Koeppe**\n\nAuthor: **Jonathan Kliem**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29898_\n\n",
    "closed_at": "2020-07-10T19:33:57Z",
    "created_at": "2020-06-19T14:31:02Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20geometry",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "vertex facet graph for trivial polyhedra fails",
    "type": "issue",
    "updated_at": "2020-08-27T05:14:10Z",
    "url": "https://github.com/sagemath/sage/issues/29898",
    "user": "https://github.com/kliem"
}
```
The vertex facet graph of `CombinatorialPolyhedron` only works for polyhedra of dimension at least one. With #29188 this makes it fail with for `Polyhedron_base` as well.

We fix this to return
- the `Digraph` on 0 vertices for the empty polyhedron and
- the `Digraph` on 1 vertex for the 0-dimensional polyhedron (it was misbehaved even before #29188).

We also "fix" the definition of facets to correspond to inequalities.
The `0`-dimensional polyhedron does not have facets in this case anymore.
(Before this ticket `n_facets` and `facets` would use different definitions of facets.)

CC:  @jplab @LaisRast

Keywords: **polyhedra, vertex facet graph**

Branch: **[25cfaa0](https://github.com/sagemath/sagetrac-mirror/commit/25cfaa04806fdd91dc1d5aebac5b946d10f19f83)**

Reviewer: **Matthias Koeppe**

Author: **Jonathan Kliem**

_Issue created by migration from https://trac.sagemath.org/ticket/29898_





---

archive/issue_events_393292.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-19T14:31:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29898#event-393292"
}
```



---

archive/issue_events_393293.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-19T14:31:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20geometry",
    "label_color": "0000ff",
    "label_name": "component: geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29898#event-393293"
}
```



---

archive/issue_events_393294.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-19T14:31:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29898#event-393294"
}
```



---

archive/issue_events_393295.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-19T14:31:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29898#event-393295"
}
```



---

archive/issue_events_393296.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-19T14:34:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29898#event-393296"
}
```



---

archive/issue_comments_475475.json:
```json
{
    "body": "Branch: **[public/29898](https://github.com/sagemath/sagetrac-mirror/tree/public/29898)**",
    "created_at": "2020-06-19T14:34:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475475",
    "user": "https://github.com/kliem"
}
```

Branch: **[public/29898](https://github.com/sagemath/sagetrac-mirror/tree/public/29898)**



---

archive/issue_comments_475476.json:
```json
{
    "body": "Commit: **[790dfbc](https://github.com/sagemath/sagetrac-mirror/commit/790dfbcad639920619b3d792f728c6d4070bc40f)**",
    "created_at": "2020-06-19T14:34:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475476",
    "user": "https://github.com/kliem"
}
```

Commit: **[790dfbc](https://github.com/sagemath/sagetrac-mirror/commit/790dfbcad639920619b3d792f728c6d4070bc40f)**



---

archive/issue_comments_475477.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/790dfbcad639920619b3d792f728c6d4070bc40f\">790dfbc</a></td><td><code>fix trivial vertex facet graphs</code></td></tr></table>\n",
    "created_at": "2020-06-19T14:34:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475477",
    "user": "https://github.com/kliem"
}
```

<a id='comment:1'>Comment 1:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/790dfbcad639920619b3d792f728c6d4070bc40f">790dfbc</a></td><td><code>fix trivial vertex facet graphs</code></td></tr></table>




---

archive/issue_comments_475478.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7cca4927943438b7091e10d036d08b19279f0a2\">d7cca49</a></td><td><code>correct fix for 0-dimensional polyhedron</code></td></tr></table>\n",
    "created_at": "2020-06-19T17:40:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475478",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:2'>Comment 2:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7cca4927943438b7091e10d036d08b19279f0a2">d7cca49</a></td><td><code>correct fix for 0-dimensional polyhedron</code></td></tr></table>




---

archive/issue_comments_475479.json:
```json
{
    "body": "Changed commit from **[790dfbc](https://github.com/sagemath/sagetrac-mirror/commit/790dfbcad639920619b3d792f728c6d4070bc40f)** to **[d7cca49](https://github.com/sagemath/sagetrac-mirror/commit/d7cca4927943438b7091e10d036d08b19279f0a2)**",
    "created_at": "2020-06-19T17:40:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475479",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[790dfbc](https://github.com/sagemath/sagetrac-mirror/commit/790dfbcad639920619b3d792f728c6d4070bc40f)** to **[d7cca49](https://github.com/sagemath/sagetrac-mirror/commit/d7cca4927943438b7091e10d036d08b19279f0a2)**



---

archive/issue_comments_475480.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nDoes a 0-dimensional polyhedron really have a facet??",
    "created_at": "2020-06-22T05:01:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475480",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'>Comment 3:</a>
Does a 0-dimensional polyhedron really have a facet??



---

archive/issue_comments_475481.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nI would say so. This is the \"definition\" from G\u00fcnter Zieglers book \"Lectures on Polytopes\":\n\n> Also the empty set is a face for\n> every polytope. Less trivially, one has as faces the vertices of the polytope,\n> which are single points, the edges, which are 1-dimensional line segments,\n> and the facets, i.e., the maximal proper faces, whose dimension is one less\n> than that of the polytope itself.\n\nAccording to this the facets of the 0-dimensional polytope is the empty face. And I would say that this is reasonable. There is also an inequality defining that face: \"(0,...,0)*x + 1 >= 0\" (and the 0-vector might have lenght 0 according to ambient dimension).\nThis is how it is currently handled in most parts\n\n```\nsage: P = Polyhedron([[0]])\nsage: P.incidence_matrix()\n[1]\nsage: P.facets()\n(A -1-dimensional face of a Polyhedron in ZZ^1,)\n```\n\nBut of course, I might have be influential to \"bug fixes\" to make it behave like this.",
    "created_at": "2020-06-22T06:14:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475481",
    "user": "https://github.com/kliem"
}
```

<a id='comment:4'>Comment 4:</a>
I would say so. This is the "definition" from Günter Zieglers book "Lectures on Polytopes":

> Also the empty set is a face for
> every polytope. Less trivially, one has as faces the vertices of the polytope,
> which are single points, the edges, which are 1-dimensional line segments,
> and the facets, i.e., the maximal proper faces, whose dimension is one less
> than that of the polytope itself.

According to this the facets of the 0-dimensional polytope is the empty face. And I would say that this is reasonable. There is also an inequality defining that face: "(0,...,0)*x + 1 >= 0" (and the 0-vector might have lenght 0 according to ambient dimension).
This is how it is currently handled in most parts

```
sage: P = Polyhedron([[0]])
sage: P.incidence_matrix()
[1]
sage: P.facets()
(A -1-dimensional face of a Polyhedron in ZZ^1,)
```

But of course, I might have be influential to "bug fixes" to make it behave like this.



---

archive/issue_comments_475482.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nHm... the old version of Ziegler's at https://arxiv.org/pdf/math/9909177.pdf says \"The maximal non-trivial faces, of dimension dim(P) \u2212 1, are the facets of P.\" -- which excludes the empty face as a possibility.",
    "created_at": "2020-06-22T06:18:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475482",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'>Comment 5:</a>
Hm... the old version of Ziegler's at https://arxiv.org/pdf/math/9909177.pdf says "The maximal non-trivial faces, of dimension dim(P) − 1, are the facets of P." -- which excludes the empty face as a possibility.



---

archive/issue_comments_475483.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nI find the version that allows the empty face pretty disturbing.",
    "created_at": "2020-06-22T06:21:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475483",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'>Comment 6:</a>
I find the version that allows the empty face pretty disturbing.



---

archive/issue_comments_475484.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nEither definition is trouble:\n\n- If you define facets by correspondence with irreducible inequalites than the empty face of the 0-dimensional polytope is not a facet. However it is certainly maximal.\n- If you define the facets by maximality than you loose that correspondence.",
    "created_at": "2020-06-22T06:23:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475484",
    "user": "https://github.com/kliem"
}
```

<a id='comment:7'>Comment 7:</a>
Either definition is trouble:

- If you define facets by correspondence with irreducible inequalites than the empty face of the 0-dimensional polytope is not a facet. However it is certainly maximal.
- If you define the facets by maximality than you loose that correspondence.



---

archive/issue_comments_475485.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nEither way, I set up the vertex-facet graph wrong. There shouldn't be an edge, as the vertex is not contained in the facet.",
    "created_at": "2020-06-22T06:23:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475485",
    "user": "https://github.com/kliem"
}
```

<a id='comment:8'>Comment 8:</a>
Either way, I set up the vertex-facet graph wrong. There shouldn't be an edge, as the vertex is not contained in the facet.



---

archive/issue_comments_475486.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nWell the empty face is maximal in the proper faces but not maximal in the nontrivial faces.",
    "created_at": "2020-06-22T06:25:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475486",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'>Comment 9:</a>
Well the empty face is maximal in the proper faces but not maximal in the nontrivial faces.



---

archive/issue_comments_475487.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nIn the new definition that is different:\n\n> We consider the polytope itself as a trivial\n> face; all other faces are called proper faces\n\nAnd then comes the part that I already quoted.\n\nBut...\n\nThe facets not corresponding to inequalities is huge trouble. I myself made \"mistakes\" because of that. It seems much easier to define the facets as maximal non-trival faces with the empty face being trivial as well.\n\nThan we have our irreducible inequality/facet correspondence. So I agree with you that this definition makes more sense.\n\nBut that would involve a few \"fixes\".\n\nI'll also send a quick note to G\u00fcnter Ziegler and see what he thinks, as he is still revising his new definition I believe.",
    "created_at": "2020-06-22T06:31:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475487",
    "user": "https://github.com/kliem"
}
```

<a id='comment:10'>Comment 10:</a>
In the new definition that is different:

> We consider the polytope itself as a trivial
> face; all other faces are called proper faces

And then comes the part that I already quoted.

But...

The facets not corresponding to inequalities is huge trouble. I myself made "mistakes" because of that. It seems much easier to define the facets as maximal non-trival faces with the empty face being trivial as well.

Than we have our irreducible inequality/facet correspondence. So I agree with you that this definition makes more sense.

But that would involve a few "fixes".

I'll also send a quick note to Günter Ziegler and see what he thinks, as he is still revising his new definition I believe.



---

archive/issue_comments_475488.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\n> An inequality is irredundant if and only if it defines a facet of P\n> and no multiple of it is contained in the system.\n\nThis statement is exercise 2.15 (iii) and clearly doesn't fit to the definition. Then again we loose the vertex-facet correspondence for polarity.\n\nBtw the polarity for 0-dimensional polyhedra is broken as well (but only for base ring `ZZ`):\n\n```\nsage: P = Polyhedron([[]])\nsage: P\nA 0-dimensional polyhedron in ZZ^0 defined as the convex hull of 1 vertex\nsage: P.polar()\nThe empty polyhedron in ZZ^0\n```",
    "created_at": "2020-06-22T08:36:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475488",
    "user": "https://github.com/kliem"
}
```

<a id='comment:11'>Comment 11:</a>
> An inequality is irredundant if and only if it defines a facet of P
> and no multiple of it is contained in the system.

This statement is exercise 2.15 (iii) and clearly doesn't fit to the definition. Then again we loose the vertex-facet correspondence for polarity.

Btw the polarity for 0-dimensional polyhedra is broken as well (but only for base ring `ZZ`):

```
sage: P = Polyhedron([[]])
sage: P
A 0-dimensional polyhedron in ZZ^0 defined as the convex hull of 1 vertex
sage: P.polar()
The empty polyhedron in ZZ^0
```



---

archive/issue_comments_475489.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\n\n```\nsage: P = Polyhedron([[]])\nsage: P.n_facets()\n0\nsage: P.facets()\n(A -1-dimensional face of a Polyhedron in ZZ^0,)\n```",
    "created_at": "2020-06-22T10:32:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475489",
    "user": "https://github.com/kliem"
}
```

<a id='comment:12'>Comment 12:</a>

```
sage: P = Polyhedron([[]])
sage: P.n_facets()
0
sage: P.facets()
(A -1-dimensional face of a Polyhedron in ZZ^0,)
```



---

archive/issue_comments_475490.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nReplying to [@kliem](#comment%3A12):\n> \n> ```\n> sage: P = Polyhedron([[]])\n> sage: P.n_facets()\n> 0\n> sage: P.facets()\n> (A -1-dimensional face of a Polyhedron in ZZ^0,)\n> ```\n\nYes, this is not good.",
    "created_at": "2020-06-26T16:50:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475490",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'>Comment 13:</a>
Replying to [@kliem](#comment%3A12):
> 
> ```
> sage: P = Polyhedron([[]])
> sage: P.n_facets()
> 0
> sage: P.facets()
> (A -1-dimensional face of a Polyhedron in ZZ^0,)
> ```

Yes, this is not good.



---

archive/issue_events_393297.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-06-26T16:50:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29898#event-393297"
}
```



---

archive/issue_events_393298.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-06-26T16:50:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29898#event-393298"
}
```



---

archive/issue_comments_475491.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nReplying to [@mkoeppe](#comment%3A13):\n> Replying to [@kliem](#comment%3A12):\n> > \n> > ```\n> > sage: P = Polyhedron([[]])\n> > sage: P.n_facets()\n> > 0\n> > sage: P.facets()\n> > (A -1-dimensional face of a Polyhedron in ZZ^0,)\n> > ```\n\n> \n> Yes, this is not good.\n\nThe reason for this is simple. `n_facets` is just an alias of `n_inequalities`.\n\nEither way, we cannot have it consistent:\n- The class of polyhedra without inequalities doesn't have any facets.\n- Facets of polyhedra correspond to coatoms of their face lattice.\n- vertices of polytopes correspond to facets of their polar/dual.\n- (irredundant) Inequalities of polyhedra correspond to facets.\n\nI personally think that we should define facets as the `d-1`-faces of `d`-polyhedra.\n\nBut I have no hard feelings either way. It just should be made clear that the 0-polytope cannot be made consistent in some ways.",
    "created_at": "2020-06-27T09:46:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475491",
    "user": "https://github.com/kliem"
}
```

<a id='comment:14'>Comment 14:</a>
Replying to [@mkoeppe](#comment%3A13):
> Replying to [@kliem](#comment%3A12):
> > 
> > ```
> > sage: P = Polyhedron([[]])
> > sage: P.n_facets()
> > 0
> > sage: P.facets()
> > (A -1-dimensional face of a Polyhedron in ZZ^0,)
> > ```

> 
> Yes, this is not good.

The reason for this is simple. `n_facets` is just an alias of `n_inequalities`.

Either way, we cannot have it consistent:
- The class of polyhedra without inequalities doesn't have any facets.
- Facets of polyhedra correspond to coatoms of their face lattice.
- vertices of polytopes correspond to facets of their polar/dual.
- (irredundant) Inequalities of polyhedra correspond to facets.

I personally think that we should define facets as the `d-1`-faces of `d`-polyhedra.

But I have no hard feelings either way. It just should be made clear that the 0-polytope cannot be made consistent in some ways.



---

archive/issue_comments_475492.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nEither way, definitely `n_facets()` must be the same as the cardinality of `facets()`.\n\nTo me, the bijection between facets and irredundant inequalities is the most important. Let me add that even the status of the empty set as a face is not uniform across the literature. For example, in Schrijver, Theory of Linear and Integer Programming, faces are nonempty by definition (section 8.3), and the face lattice is obtained by considering the empty set as a special element in addition to the faces (section 8.6).",
    "created_at": "2020-06-27T17:58:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475492",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'>Comment 15:</a>
Either way, definitely `n_facets()` must be the same as the cardinality of `facets()`.

To me, the bijection between facets and irredundant inequalities is the most important. Let me add that even the status of the empty set as a face is not uniform across the literature. For example, in Schrijver, Theory of Linear and Integer Programming, faces are nonempty by definition (section 8.3), and the face lattice is obtained by considering the empty set as a special element in addition to the faces (section 8.6).



---

archive/issue_comments_475493.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nReplying to [@mkoeppe](#comment%3A15):\n> Either way, definitely `n_facets()` must be the same as the cardinality of `facets()`.\n> \n> To me, the bijection between facets and irredundant inequalities is the most important. Let me add that even the status of the empty set as a face is not uniform across the literature. For example, in Schrijver, Theory of Linear and Integer Programming, faces are nonempty by definition (section 8.3), and the face lattice is obtained by considering the empty set as a special element in addition to the faces (section 8.6). \n> \n\n+1\n\nLooking at the subsets of the polytope obtained through supporting hyperplanes gives faces. My interpretation here is that it is a combinatorial discussion to have \"the whole polytope\" and \"the empty face\" included in the poset of faces, as of course adding them makes it a lattice. This act of \"adding the trivial faces\" forces an eventual consideration of \"non-proper/non-trivial\" faces when defining anything...\n\nObviously, things go wrong in the following case:\n\n  one removes the non-proper faces and obtains a poset which consists of an anti-chain (can only contain 1 or 2 elements in our case...)\n\nIn this case, \"vertices\" and \"facets\" are the same. Now you can even go wild and think about the actual object in space (not-being full-dimensional).\n\nIf you have one element only, i.e., you have a 0-dimensional polytope, then, what happens combinatorially is that the two elements are fusioned into one and yes, there isn't a bijection between actual maximal subsets given by supporting hyperplanes and the facet defining inequalities.\n\nI would say that the 0-dimensional polytopes form \"the exception that confirms the rule\", as we say in French. Because of the fact that vertices and facet are the same, this creates this special situation, otherwise, the bijection should exist.\n\nWith this perspective, the next step is that\n\n  one removes the non-proper faces and obtains an empty poset, for the empty polyhedron. Does the empty polyhedron have facets? I hope not, right?",
    "created_at": "2020-06-29T07:35:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475493",
    "user": "https://github.com/jplab"
}
```

<a id='comment:16'>Comment 16:</a>
Replying to [@mkoeppe](#comment%3A15):
> Either way, definitely `n_facets()` must be the same as the cardinality of `facets()`.
> 
> To me, the bijection between facets and irredundant inequalities is the most important. Let me add that even the status of the empty set as a face is not uniform across the literature. For example, in Schrijver, Theory of Linear and Integer Programming, faces are nonempty by definition (section 8.3), and the face lattice is obtained by considering the empty set as a special element in addition to the faces (section 8.6). 
> 

+1

Looking at the subsets of the polytope obtained through supporting hyperplanes gives faces. My interpretation here is that it is a combinatorial discussion to have "the whole polytope" and "the empty face" included in the poset of faces, as of course adding them makes it a lattice. This act of "adding the trivial faces" forces an eventual consideration of "non-proper/non-trivial" faces when defining anything...

Obviously, things go wrong in the following case:

  one removes the non-proper faces and obtains a poset which consists of an anti-chain (can only contain 1 or 2 elements in our case...)

In this case, "vertices" and "facets" are the same. Now you can even go wild and think about the actual object in space (not-being full-dimensional).

If you have one element only, i.e., you have a 0-dimensional polytope, then, what happens combinatorially is that the two elements are fusioned into one and yes, there isn't a bijection between actual maximal subsets given by supporting hyperplanes and the facet defining inequalities.

I would say that the 0-dimensional polytopes form "the exception that confirms the rule", as we say in French. Because of the fact that vertices and facet are the same, this creates this special situation, otherwise, the bijection should exist.

With this perspective, the next step is that

  one removes the non-proper faces and obtains an empty poset, for the empty polyhedron. Does the empty polyhedron have facets? I hope not, right?



---

archive/issue_comments_475494.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nThe case where vertices and facets are the same, is for 1-dimensional polyhedra.",
    "created_at": "2020-06-29T07:56:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475494",
    "user": "https://github.com/kliem"
}
```

<a id='comment:17'>Comment 17:</a>
The case where vertices and facets are the same, is for 1-dimensional polyhedra.



---

archive/issue_comments_475495.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nOne other problem with the definition as maximal subfaces (including the empty face) is that it doesn't make any sense for any polyhedron without inequalities. Surely you don't want that the empty face is a facet of RR^2\n\nThe 0-dimensional polytope belongs to that family.\n\nThe other thing is that the vertex-facet-digraph relies on the fact that vertices are contained in facets or not. If facets are -1-dimensional and vertices 0-dimensional, this doesn't make any sense anymore.\n\nTo summarize this discussion, I think we agree that we should alter `facets` and maybe other methods, such that facets need to be proper faces of polyhedra. Where proper means neither empty nor full-dimensional. Should I open a seperate ticket for it?",
    "created_at": "2020-06-29T08:11:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475495",
    "user": "https://github.com/kliem"
}
```

<a id='comment:18'>Comment 18:</a>
One other problem with the definition as maximal subfaces (including the empty face) is that it doesn't make any sense for any polyhedron without inequalities. Surely you don't want that the empty face is a facet of RR^2

The 0-dimensional polytope belongs to that family.

The other thing is that the vertex-facet-digraph relies on the fact that vertices are contained in facets or not. If facets are -1-dimensional and vertices 0-dimensional, this doesn't make any sense anymore.

To summarize this discussion, I think we agree that we should alter `facets` and maybe other methods, such that facets need to be proper faces of polyhedra. Where proper means neither empty nor full-dimensional. Should I open a seperate ticket for it?



---

archive/issue_comments_475496.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nI think it's fine to do this here on this ticket.",
    "created_at": "2020-07-04T19:21:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475496",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:19'>Comment 19:</a>
I think it's fine to do this here on this ticket.



---

archive/issue_comments_475497.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nI will.",
    "created_at": "2020-07-05T06:01:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475497",
    "user": "https://github.com/kliem"
}
```

<a id='comment:20'>Comment 20:</a>
I will.



---

archive/issue_events_393299.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-07-05T06:01:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29898#event-393299"
}
```



---

archive/issue_events_393300.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-07-05T06:01:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29898#event-393300"
}
```



---

archive/issue_comments_475498.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,6 +2,8 @@\n \n We fix this to return\n - the `Digraph` on 0 vertices for the empty polyhedron and\n-- the `Digraph` on 2 vertices with one edge for the 0-dimensional polyhedron (it was misbehaved even before #29188).\n+- the `Digraph` on 1 vertex for the 0-dimensional polyhedron (it was misbehaved even before #29188).\n \n-The vertex-facet-graph for the `0`-dimensional polyhedron is a bit tricky, as it doesn't have inequalities and `Polyhedron(([0])).combinatorial_polyhedron())` therefore lacks facet names.\n+We also \"fix\" the definition of facets to correspond to inequalities.\n+The `0`-dimensional polyhedron does not have facets in this case anymore.\n+(Before this ticket `n_facets` and `facets` would use different definitions of facets.)b\n``````\n",
    "created_at": "2020-07-05T08:03:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475498",
    "user": "https://github.com/kliem"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,6 +2,8 @@
 
 We fix this to return
 - the `Digraph` on 0 vertices for the empty polyhedron and
-- the `Digraph` on 2 vertices with one edge for the 0-dimensional polyhedron (it was misbehaved even before #29188).
+- the `Digraph` on 1 vertex for the 0-dimensional polyhedron (it was misbehaved even before #29188).
 
-The vertex-facet-graph for the `0`-dimensional polyhedron is a bit tricky, as it doesn't have inequalities and `Polyhedron(([0])).combinatorial_polyhedron())` therefore lacks facet names.
+We also "fix" the definition of facets to correspond to inequalities.
+The `0`-dimensional polyhedron does not have facets in this case anymore.
+(Before this ticket `n_facets` and `facets` would use different definitions of facets.)b
``````




---

archive/issue_comments_475499.json:
```json
{
    "body": "Changed branch from **[public/29898](https://github.com/sagemath/sagetrac-mirror/tree/public/29898)** to **[public/29898-reb](https://github.com/sagemath/sagetrac-mirror/tree/public/29898-reb)**",
    "created_at": "2020-07-05T08:46:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475499",
    "user": "https://github.com/kliem"
}
```

Changed branch from **[public/29898](https://github.com/sagemath/sagetrac-mirror/tree/public/29898)** to **[public/29898-reb](https://github.com/sagemath/sagetrac-mirror/tree/public/29898-reb)**



---

archive/issue_comments_475500.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/569cdce2de2d6bd19df8a324e0874ccb6785ae0a\">569cdce</a></td><td><code>Merge branch 'public/29898' of git://trac.sagemath.org/sage into public/29898-reb</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4379565f70a25c335d9f000450fa8239d1d557c\">d437956</a></td><td><code>fix definition of facets</code></td></tr></table>\n",
    "created_at": "2020-07-05T08:46:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475500",
    "user": "https://github.com/kliem"
}
```

<a id='comment:22'>Comment 22:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/569cdce2de2d6bd19df8a324e0874ccb6785ae0a">569cdce</a></td><td><code>Merge branch 'public/29898' of git://trac.sagemath.org/sage into public/29898-reb</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4379565f70a25c335d9f000450fa8239d1d557c">d437956</a></td><td><code>fix definition of facets</code></td></tr></table>




---

archive/issue_events_393301.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-07-05T08:46:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29898#event-393301"
}
```



---

archive/issue_events_393302.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-07-05T08:46:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29898#event-393302"
}
```



---

archive/issue_comments_475501.json:
```json
{
    "body": "Changed commit from **[d7cca49](https://github.com/sagemath/sagetrac-mirror/commit/d7cca4927943438b7091e10d036d08b19279f0a2)** to **[d437956](https://github.com/sagemath/sagetrac-mirror/commit/d4379565f70a25c335d9f000450fa8239d1d557c)**",
    "created_at": "2020-07-05T08:46:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475501",
    "user": "https://github.com/kliem"
}
```

Changed commit from **[d7cca49](https://github.com/sagemath/sagetrac-mirror/commit/d7cca4927943438b7091e10d036d08b19279f0a2)** to **[d437956](https://github.com/sagemath/sagetrac-mirror/commit/d4379565f70a25c335d9f000450fa8239d1d557c)**



---

archive/issue_comments_475502.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nTypo \"non-trival\" -> \"nontrivial\".\n\nWhen done, you can set \"positive review\"",
    "created_at": "2020-07-06T21:26:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475502",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'>Comment 23:</a>
Typo "non-trival" -> "nontrivial".

When done, you can set "positive review"



---

archive/issue_comments_475503.json:
```json
{
    "body": "Reviewer: **Matthias Koeppe**",
    "created_at": "2020-07-06T21:26:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475503",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Matthias Koeppe**



---

archive/issue_comments_475504.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/25cfaa04806fdd91dc1d5aebac5b946d10f19f83\">25cfaa0</a></td><td><code>typo</code></td></tr></table>\n",
    "created_at": "2020-07-07T06:01:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475504",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:24'>Comment 24:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/25cfaa04806fdd91dc1d5aebac5b946d10f19f83">25cfaa0</a></td><td><code>typo</code></td></tr></table>




---

archive/issue_comments_475505.json:
```json
{
    "body": "Changed commit from **[d437956](https://github.com/sagemath/sagetrac-mirror/commit/d4379565f70a25c335d9f000450fa8239d1d557c)** to **[25cfaa0](https://github.com/sagemath/sagetrac-mirror/commit/25cfaa04806fdd91dc1d5aebac5b946d10f19f83)**",
    "created_at": "2020-07-07T06:01:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475505",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d437956](https://github.com/sagemath/sagetrac-mirror/commit/d4379565f70a25c335d9f000450fa8239d1d557c)** to **[25cfaa0](https://github.com/sagemath/sagetrac-mirror/commit/25cfaa04806fdd91dc1d5aebac5b946d10f19f83)**



---

archive/issue_comments_475506.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nThank you.",
    "created_at": "2020-07-07T06:01:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475506",
    "user": "https://github.com/kliem"
}
```

<a id='comment:25'>Comment 25:</a>
Thank you.



---

archive/issue_events_393303.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-07-07T06:01:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29898#event-393303"
}
```



---

archive/issue_events_393304.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-07-07T06:01:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29898#event-393304"
}
```



---

archive/issue_comments_475507.json:
```json
{
    "body": "Changed branch from **[public/29898-reb](https://github.com/sagemath/sagetrac-mirror/tree/public/29898-reb)** to **[25cfaa0](https://github.com/sagemath/sagetrac-mirror/commit/25cfaa04806fdd91dc1d5aebac5b946d10f19f83)**",
    "created_at": "2020-07-10T19:33:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475507",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/29898-reb](https://github.com/sagemath/sagetrac-mirror/tree/public/29898-reb)** to **[25cfaa0](https://github.com/sagemath/sagetrac-mirror/commit/25cfaa04806fdd91dc1d5aebac5b946d10f19f83)**



---

archive/issue_events_393305.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-07-10T19:33:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29898#event-393305"
}
```



---

archive/issue_events_393306.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "04219c9cd48dae4729f8d397186a05aec8171cc0",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-07-10T19:33:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29898#event-393306"
}
```



---

archive/issue_comments_475508.json:
```json
{
    "body": "Changed commit from **[25cfaa0](https://github.com/sagemath/sagetrac-mirror/commit/25cfaa04806fdd91dc1d5aebac5b946d10f19f83)** to none",
    "created_at": "2020-08-27T05:14:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475508",
    "user": "https://github.com/kliem"
}
```

Changed commit from **[25cfaa0](https://github.com/sagemath/sagetrac-mirror/commit/25cfaa04806fdd91dc1d5aebac5b946d10f19f83)** to none



---

archive/issue_comments_475509.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,4 +6,4 @@\n \n We also \"fix\" the definition of facets to correspond to inequalities.\n The `0`-dimensional polyhedron does not have facets in this case anymore.\n-(Before this ticket `n_facets` and `facets` would use different definitions of facets.)b\n+(Before this ticket `n_facets` and `facets` would use different definitions of facets.)\n``````\n",
    "created_at": "2020-08-27T05:14:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29898#issuecomment-475509",
    "user": "https://github.com/kliem"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,4 +6,4 @@
 
 We also "fix" the definition of facets to correspond to inequalities.
 The `0`-dimensional polyhedron does not have facets in this case anymore.
-(Before this ticket `n_facets` and `facets` would use different definitions of facets.)b
+(Before this ticket `n_facets` and `facets` would use different definitions of facets.)
``````

