# Issue 29386: Install script and pip packages via sage-spkg

archive/issues_029149.json:
```json
{
    "assignees": [],
    "body": "Follow-up from #29287.\n\nScript packages are installed by special rules in `build/make/Makefile`.\n\nThis ticket installs them by `sage-spkg` instead. This enables script packages to participate in the staged installs (`SAGE_DESTDIR`) and uninstallation mechanisms.\n\nThis is useful for #29387 to clean up #27870/#29003/#29082, which introduced files in `SAGE_LOCAL` that do not belong to any package and are never uninstalled.\n\nWe also make the decision whether `spkg-install` is generated from a template `spkg-install.in` or provided as is in the source tree orthogonal to the distinction `source=script` vs. `source=pip`.\nWe simply generate `spkg-install` if `spkg-install.in` is present.\n\nIdeally, when done, changing a package's source between script and normal and pip will no longer require running `bootstrap`.\n\n\nCC:  @dimpase @jhpalmieri @embray @orlitzky\n\nComponent: **build**\n\nWork Issues: **Move \"dummy script package\" code to sage-spkg**\n\nAuthor: **Matthias Koeppe**\n\nBranch/Commit: **[u/mkoeppe/install_script_packages_via_sage_spkg](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/install_script_packages_via_sage_spkg) @ [`7a25d1d`](https://github.com/sagemath/sagetrac-mirror/commit/7a25d1d0b74cf7fe7b29b0169ba2539b323ae04a)**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29386_\n\n",
    "created_at": "2020-03-21T13:06:08Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.9",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Install script and pip packages via sage-spkg",
    "type": "issue",
    "updated_at": "2022-12-31T21:31:21Z",
    "url": "https://github.com/sagemath/sage/issues/29386",
    "user": "https://github.com/mkoeppe"
}
```
Follow-up from #29287.

Script packages are installed by special rules in `build/make/Makefile`.

This ticket installs them by `sage-spkg` instead. This enables script packages to participate in the staged installs (`SAGE_DESTDIR`) and uninstallation mechanisms.

This is useful for #29387 to clean up #27870/#29003/#29082, which introduced files in `SAGE_LOCAL` that do not belong to any package and are never uninstalled.

We also make the decision whether `spkg-install` is generated from a template `spkg-install.in` or provided as is in the source tree orthogonal to the distinction `source=script` vs. `source=pip`.
We simply generate `spkg-install` if `spkg-install.in` is present.

Ideally, when done, changing a package's source between script and normal and pip will no longer require running `bootstrap`.


CC:  @dimpase @jhpalmieri @embray @orlitzky

Component: **build**

Work Issues: **Move "dummy script package" code to sage-spkg**

Author: **Matthias Koeppe**

Branch/Commit: **[u/mkoeppe/install_script_packages_via_sage_spkg](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/install_script_packages_via_sage_spkg) @ [`7a25d1d`](https://github.com/sagemath/sagetrac-mirror/commit/7a25d1d0b74cf7fe7b29b0169ba2539b323ae04a)**

_Issue created by migration from https://trac.sagemath.org/ticket/29386_





---

archive/issue_events_400999.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-21T13:06:08Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29386#event-400999"
}
```



---

archive/issue_events_401000.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-21T13:06:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "0000b0",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29386#event-401000"
}
```



---

archive/issue_events_401001.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-21T13:06:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29386#event-401001"
}
```



---

archive/issue_events_401002.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-21T13:06:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29386#event-401002"
}
```



---

archive/issue_comments_461113.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\npushing these forward to 9.2",
    "created_at": "2020-04-14T06:33:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29386#issuecomment-461113",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:1" align="right">comment:1</div>

pushing these forward to 9.2



---

archive/issue_events_401003.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T06:33:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29386#event-401003"
}
```



---

archive/issue_events_401004.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T06:33:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29386#event-401004"
}
```



---

archive/issue_comments_461114.json:
```json
{
    "body": "Dependencies: **#29793**",
    "created_at": "2020-06-04T17:25:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29386#issuecomment-461114",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#29793**



---

archive/issue_comments_461115.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,3 +7,6 @@\n This is useful for #29082... to clean up #27870/#29003, which introduced files in `SAGE_LOCAL` that do not belong to any package and are never uninstalled.\n \n \n+We also make the decision whether `spkg-install` is generated from a template `spkg-install.in` or provided as is in the source tree orthogonal to the distinction `source=script` vs. `source=pip`.\n+\n+\n``````\n",
    "created_at": "2020-06-12T22:52:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29386#issuecomment-461115",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,3 +7,6 @@
 This is useful for #29082... to clean up #27870/#29003, which introduced files in `SAGE_LOCAL` that do not belong to any package and are never uninstalled.
 
 
+We also make the decision whether `spkg-install` is generated from a template `spkg-install.in` or provided as is in the source tree orthogonal to the distinction `source=script` vs. `source=pip`.
+
+
``````




---

archive/issue_events_401005.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-13T17:11:30Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29386#event-401005"
}
```



---

archive/issue_events_401006.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-13T17:11:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29386#event-401006"
}
```



---

archive/issue_comments_461116.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\n+1 this would be a very nice improvement.",
    "created_at": "2020-09-02T09:25:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29386#issuecomment-461116",
    "user": "https://github.com/embray"
}
```

<div id="comment:6" align="right">comment:6</div>

+1 this would be a very nice improvement.



---

archive/issue_comments_461117.json:
```json
{
    "body": "Branch: **[u/mkoeppe/install_script_packages_via_sage_spkg](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/install_script_packages_via_sage_spkg)**",
    "created_at": "2020-09-24T21:45:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29386#issuecomment-461117",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/install_script_packages_via_sage_spkg](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/install_script_packages_via_sage_spkg)**



---

archive/issue_comments_461118.json:
```json
{
    "body": "Changed dependencies from **#29793** to **#29793, #30657**",
    "created_at": "2020-09-24T22:09:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29386#issuecomment-461118",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#29793** to **#29793, #30657**



---

archive/issue_comments_461119.json:
```json
{
    "body": "Commit: **[`fee5bc2`](https://github.com/sagemath/sagetrac-mirror/commit/fee5bc2c04387745dbb9b8265ec13be7bcd434e1)**",
    "created_at": "2020-09-24T22:09:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29386#issuecomment-461119",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`fee5bc2`](https://github.com/sagemath/sagetrac-mirror/commit/fee5bc2c04387745dbb9b8265ec13be7bcd434e1)**



---

archive/issue_comments_461120.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f0f03c9e68e90f8fc8a9c63d5793860cd1c3ddf0\"><code>f0f03c9</code></a></td><td><code>build/bin/sage-spkg: Remove dead code for manufacturing an spkg-install script</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/46e5f687b745a1ec892d09cec5971b1287e2550d\"><code>46e5f68</code></a></td><td><code>build/bin/sage-spkg: Get rid of USE_LOCAL_SCRIPTS (it was always yes); prepare for script packages</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fee5bc2c04387745dbb9b8265ec13be7bcd434e1\"><code>fee5bc2</code></a></td><td><code>build/bin/sage-spkg: For script packages, do not poison the proxy variables</code></td></tr></table>\n",
    "created_at": "2020-09-24T22:09:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29386#issuecomment-461120",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f0f03c9e68e90f8fc8a9c63d5793860cd1c3ddf0"><code>f0f03c9</code></a></td><td><code>build/bin/sage-spkg: Remove dead code for manufacturing an spkg-install script</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/46e5f687b745a1ec892d09cec5971b1287e2550d"><code>46e5f68</code></a></td><td><code>build/bin/sage-spkg: Get rid of USE_LOCAL_SCRIPTS (it was always yes); prepare for script packages</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fee5bc2c04387745dbb9b8265ec13be7bcd434e1"><code>fee5bc2</code></a></td><td><code>build/bin/sage-spkg: For script packages, do not poison the proxy variables</code></td></tr></table>




---

archive/issue_comments_461121.json:
```json
{
    "body": "Changed commit from **[`fee5bc2`](https://github.com/sagemath/sagetrac-mirror/commit/fee5bc2c04387745dbb9b8265ec13be7bcd434e1)** to **[`e4c27f6`](https://github.com/sagemath/sagetrac-mirror/commit/e4c27f6f307c06d6a1c9fc368cb72a461e4c6b20)**",
    "created_at": "2020-09-24T22:35:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29386#issuecomment-461121",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fee5bc2`](https://github.com/sagemath/sagetrac-mirror/commit/fee5bc2c04387745dbb9b8265ec13be7bcd434e1)** to **[`e4c27f6`](https://github.com/sagemath/sagetrac-mirror/commit/e4c27f6f307c06d6a1c9fc368cb72a461e4c6b20)**



---

archive/issue_comments_461122.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9ee21109dfb001feec2b032c197defb91cc75783\"><code>9ee2110</code></a></td><td><code>build/bin/sage-dist-helpers: Also use $sudo for storing the wheel file</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7aac84ab4dd86ad6203a99eb82371c1d2a46363\"><code>d7aac84</code></a></td><td><code>src/doc/en/developer/packaging.rst: Update sdh_... documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9b7c7a04d658838ce511e352edb9c03f42c4a7f2\"><code>9b7c7a0</code></a></td><td><code>build/bin/sage-pip-{install,uninstall}: Fix typo in comment</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4135e8b236d2e5491b3ee96cbd00196dc5b6e036\"><code>4135e8b</code></a></td><td><code>build/bin/sage-pip-install: Remove an outdated comment</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f2e707561ab3044221b57151ae4cc67d502fe9f8\"><code>f2e7075</code></a></td><td><code>Merge tag '9.2.beta13' into t/29500/install_all_python_packages_via_pip_wheel__create_pep_503_simple_repository_for_wheels</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd0fd2f3142b08a906ebdbe3e2f37be6bec5f135\"><code>bd0fd2f</code></a></td><td><code>Merge branch 't/29500/install_all_python_packages_via_pip_wheel__create_pep_503_simple_repository_for_wheels' into t/30657/fix_up__sage__p_</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2e20f230c0ac0b24c14b04b180217db68a2b7278\"><code>2e20f23</code></a></td><td><code>build/bin/sage-spkg: Move SAGE_SPKG_{INST,SCRIPTS,WHEELS} setting here from build/bin/install, make them relative to SAGE_INST_LOCAL</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ac09b149632a091799a390ff13d6fbb2574480c4\"><code>ac09b14</code></a></td><td><code>Merge branch 't/30657/fix_up__sage__p_' into t/29386/install_script_packages_via_sage_spkg</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf0c3dc1db15c4fb83a804be2a7df1ac412d716e\"><code>bf0c3dc</code></a></td><td><code>build/bin/sage-spkg: Exit with error for some old-style script invocations</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e4c27f6f307c06d6a1c9fc368cb72a461e4c6b20\"><code>e4c27f6</code></a></td><td><code>build/bin/sage-spkg: Remove error message when checksums.ini does not exist (script package)</code></td></tr></table>\n",
    "created_at": "2020-09-24T22:35:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29386#issuecomment-461122",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9ee21109dfb001feec2b032c197defb91cc75783"><code>9ee2110</code></a></td><td><code>build/bin/sage-dist-helpers: Also use $sudo for storing the wheel file</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7aac84ab4dd86ad6203a99eb82371c1d2a46363"><code>d7aac84</code></a></td><td><code>src/doc/en/developer/packaging.rst: Update sdh_... documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9b7c7a04d658838ce511e352edb9c03f42c4a7f2"><code>9b7c7a0</code></a></td><td><code>build/bin/sage-pip-{install,uninstall}: Fix typo in comment</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4135e8b236d2e5491b3ee96cbd00196dc5b6e036"><code>4135e8b</code></a></td><td><code>build/bin/sage-pip-install: Remove an outdated comment</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f2e707561ab3044221b57151ae4cc67d502fe9f8"><code>f2e7075</code></a></td><td><code>Merge tag '9.2.beta13' into t/29500/install_all_python_packages_via_pip_wheel__create_pep_503_simple_repository_for_wheels</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd0fd2f3142b08a906ebdbe3e2f37be6bec5f135"><code>bd0fd2f</code></a></td><td><code>Merge branch 't/29500/install_all_python_packages_via_pip_wheel__create_pep_503_simple_repository_for_wheels' into t/30657/fix_up__sage__p_</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2e20f230c0ac0b24c14b04b180217db68a2b7278"><code>2e20f23</code></a></td><td><code>build/bin/sage-spkg: Move SAGE_SPKG_{INST,SCRIPTS,WHEELS} setting here from build/bin/install, make them relative to SAGE_INST_LOCAL</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ac09b149632a091799a390ff13d6fbb2574480c4"><code>ac09b14</code></a></td><td><code>Merge branch 't/30657/fix_up__sage__p_' into t/29386/install_script_packages_via_sage_spkg</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf0c3dc1db15c4fb83a804be2a7df1ac412d716e"><code>bf0c3dc</code></a></td><td><code>build/bin/sage-spkg: Exit with error for some old-style script invocations</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e4c27f6f307c06d6a1c9fc368cb72a461e4c6b20"><code>e4c27f6</code></a></td><td><code>build/bin/sage-spkg: Remove error message when checksums.ini does not exist (script package)</code></td></tr></table>




---

archive/issue_comments_461123.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3ceeaa73f60a4640380015059b50cf30bb74e972\"><code>3ceeaa7</code></a></td><td><code>build/bin/sage-spkg: Fix up for normal and script packages</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c4fb4da757361aeb8a0ac6299425f0a41983497\"><code>8c4fb4d</code></a></td><td><code>build/bin/sage-spkg: Handle script packages without package-version.txt</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/137365af932c9006e5d92150ed5b0e389627c55b\"><code>137365a</code></a></td><td><code>build/make/Makefile.in: Replace 'SPKG-clean' by 'SPKG-uninstall', with deprecation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a9cbfdaba49b4f754ec273aa588185313807217b\"><code>a9cbfda</code></a></td><td><code>build/make/Makefile.in: Install script packages using sage-spkg</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/81a63df3107793d067f1bd5a9807bfff8c0cd054\"><code>81a63df</code></a></td><td><code>src/bin/sage: Use 'make SPKG-uninstall' instead of -clean</code></td></tr></table>\n",
    "created_at": "2020-09-24T23:31:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29386#issuecomment-461123",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3ceeaa73f60a4640380015059b50cf30bb74e972"><code>3ceeaa7</code></a></td><td><code>build/bin/sage-spkg: Fix up for normal and script packages</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c4fb4da757361aeb8a0ac6299425f0a41983497"><code>8c4fb4d</code></a></td><td><code>build/bin/sage-spkg: Handle script packages without package-version.txt</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/137365af932c9006e5d92150ed5b0e389627c55b"><code>137365a</code></a></td><td><code>build/make/Makefile.in: Replace 'SPKG-clean' by 'SPKG-uninstall', with deprecation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a9cbfdaba49b4f754ec273aa588185313807217b"><code>a9cbfda</code></a></td><td><code>build/make/Makefile.in: Install script packages using sage-spkg</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/81a63df3107793d067f1bd5a9807bfff8c0cd054"><code>81a63df</code></a></td><td><code>src/bin/sage: Use 'make SPKG-uninstall' instead of -clean</code></td></tr></table>




---

archive/issue_comments_461124.json:
```json
{
    "body": "Changed commit from **[`e4c27f6`](https://github.com/sagemath/sagetrac-mirror/commit/e4c27f6f307c06d6a1c9fc368cb72a461e4c6b20)** to **[`81a63df`](https://github.com/sagemath/sagetrac-mirror/commit/81a63df3107793d067f1bd5a9807bfff8c0cd054)**",
    "created_at": "2020-09-24T23:31:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29386#issuecomment-461124",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e4c27f6`](https://github.com/sagemath/sagetrac-mirror/commit/e4c27f6f307c06d6a1c9fc368cb72a461e4c6b20)** to **[`81a63df`](https://github.com/sagemath/sagetrac-mirror/commit/81a63df3107793d067f1bd5a9807bfff8c0cd054)**



---

archive/issue_comments_461125.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3d6fa5924f54b85a28f5c4d969afca01da8801fc\"><code>3d6fa59</code></a></td><td><code>build/make/Makefile.in: Replace 'SPKG-clean' by 'SPKG-uninstall', with deprecation, for pip packages too</code></td></tr></table>\n",
    "created_at": "2020-09-24T23:38:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29386#issuecomment-461125",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3d6fa5924f54b85a28f5c4d969afca01da8801fc"><code>3d6fa59</code></a></td><td><code>build/make/Makefile.in: Replace 'SPKG-clean' by 'SPKG-uninstall', with deprecation, for pip packages too</code></td></tr></table>




---

archive/issue_comments_461126.json:
```json
{
    "body": "Changed commit from **[`81a63df`](https://github.com/sagemath/sagetrac-mirror/commit/81a63df3107793d067f1bd5a9807bfff8c0cd054)** to **[`3d6fa59`](https://github.com/sagemath/sagetrac-mirror/commit/3d6fa5924f54b85a28f5c4d969afca01da8801fc)**",
    "created_at": "2020-09-24T23:38:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29386#issuecomment-461126",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`81a63df`](https://github.com/sagemath/sagetrac-mirror/commit/81a63df3107793d067f1bd5a9807bfff8c0cd054)** to **[`3d6fa59`](https://github.com/sagemath/sagetrac-mirror/commit/3d6fa5924f54b85a28f5c4d969afca01da8801fc)**



---

archive/issue_comments_461127.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,5 +8,9 @@\n \n \n We also make the decision whether `spkg-install` is generated from a template `spkg-install.in` or provided as is in the source tree orthogonal to the distinction `source=script` vs. `source=pip`.\n+We simply generate `spkg-install` if `spkg-install.in` is present.\n \n \n+We also rename targets `SPKG-clean` to `SPKG-uninstall` (as originally discussed in #29097), leaving a deprecated target behind.  This is to unify the targets between normal and script packages (the latter used `-uninstall` already). \n+\n+\n``````\n",
    "created_at": "2020-09-24T23:57:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29386#issuecomment-461127",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,5 +8,9 @@
 
 
 We also make the decision whether `spkg-install` is generated from a template `spkg-install.in` or provided as is in the source tree orthogonal to the distinction `source=script` vs. `source=pip`.
+We simply generate `spkg-install` if `spkg-install.in` is present.
 
 
+We also rename targets `SPKG-clean` to `SPKG-uninstall` (as originally discussed in #29097), leaving a deprecated target behind.  This is to unify the targets between normal and script packages (the latter used `-uninstall` already). 
+
+
``````




---

archive/issue_comments_461128.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2020-09-24T23:57:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29386#issuecomment-461128",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_comments_461129.json:
```json
{
    "body": "Changed commit from **[`3d6fa59`](https://github.com/sagemath/sagetrac-mirror/commit/3d6fa5924f54b85a28f5c4d969afca01da8801fc)** to **[`ae5ea98`](https://github.com/sagemath/sagetrac-mirror/commit/ae5ea98908707d8ce3f23603f51b070b117c3892)**",
    "created_at": "2020-09-25T00:19:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29386#issuecomment-461129",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3d6fa59`](https://github.com/sagemath/sagetrac-mirror/commit/3d6fa5924f54b85a28f5c4d969afca01da8801fc)** to **[`ae5ea98`](https://github.com/sagemath/sagetrac-mirror/commit/ae5ea98908707d8ce3f23603f51b070b117c3892)**



---

archive/issue_comments_461130.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ae5ea98908707d8ce3f23603f51b070b117c3892\"><code>ae5ea98</code></a></td><td><code>build/make/Makefile.in: Make SPKG-uninstall targets phony</code></td></tr></table>\n",
    "created_at": "2020-09-25T00:19:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29386#issuecomment-461130",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ae5ea98908707d8ce3f23603f51b070b117c3892"><code>ae5ea98</code></a></td><td><code>build/make/Makefile.in: Make SPKG-uninstall targets phony</code></td></tr></table>




---

archive/issue_comments_461131.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/47ef805fff45ed166ca2210becf68ba72276eeab\"><code>47ef805</code></a></td><td><code>WIP: Install pip packages with sage-spkg</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c27c05e64886bfb2133dc70c6f87145eb74fcf5\"><code>6c27c05</code></a></td><td><code>build/make/Makefile.in: Another SPKG-clean -> SPKG-uninstall</code></td></tr></table>\n",
    "created_at": "2020-09-25T01:46:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29386#issuecomment-461131",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/47ef805fff45ed166ca2210becf68ba72276eeab"><code>47ef805</code></a></td><td><code>WIP: Install pip packages with sage-spkg</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c27c05e64886bfb2133dc70c6f87145eb74fcf5"><code>6c27c05</code></a></td><td><code>build/make/Makefile.in: Another SPKG-clean -> SPKG-uninstall</code></td></tr></table>




---

archive/issue_comments_461132.json:
```json
{
    "body": "Changed commit from **[`ae5ea98`](https://github.com/sagemath/sagetrac-mirror/commit/ae5ea98908707d8ce3f23603f51b070b117c3892)** to **[`6c27c05`](https://github.com/sagemath/sagetrac-mirror/commit/6c27c05e64886bfb2133dc70c6f87145eb74fcf5)**",
    "created_at": "2020-09-25T01:46:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29386#issuecomment-461132",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ae5ea98`](https://github.com/sagemath/sagetrac-mirror/commit/ae5ea98908707d8ce3f23603f51b070b117c3892)** to **[`6c27c05`](https://github.com/sagemath/sagetrac-mirror/commit/6c27c05e64886bfb2133dc70c6f87145eb74fcf5)**



---

archive/issue_comments_461133.json:
```json
{
    "body": "Changed commit from **[`6c27c05`](https://github.com/sagemath/sagetrac-mirror/commit/6c27c05e64886bfb2133dc70c6f87145eb74fcf5)** to **[`660d689`](https://github.com/sagemath/sagetrac-mirror/commit/660d689c8fc712b813adb19f076aa9d8eeaaccb4)**",
    "created_at": "2020-10-02T02:07:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29386#issuecomment-461133",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6c27c05`](https://github.com/sagemath/sagetrac-mirror/commit/6c27c05e64886bfb2133dc70c6f87145eb74fcf5)** to **[`660d689`](https://github.com/sagemath/sagetrac-mirror/commit/660d689c8fc712b813adb19f076aa9d8eeaaccb4)**



---

archive/issue_comments_461134.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9750195b6f71ff414c06576a66708b3fbd21365c\"><code>9750195</code></a></td><td><code>WIP: Install pip packages with sage-spkg</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/be2417cd48549b2c1a9fa29bcd362b08c2a6fda7\"><code>be2417c</code></a></td><td><code>Merge tag '9.2.beta14' into t/30657/fix_up__sage__p_</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ee7ee29ea4686a968846df1621f52adcd8f4173\"><code>8ee7ee2</code></a></td><td><code>build/make/install: Set SAGE_SPKG_WHEELS also here so that script packages still work</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72c59013c7fde5ca457a537402a9b7fb8ef50958\"><code>72c5901</code></a></td><td><code>Merge branch 't/30657/fix_up__sage__p_' into t/29386/install_script_packages_via_sage_spkg</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/660d689c8fc712b813adb19f076aa9d8eeaaccb4\"><code>660d689</code></a></td><td><code>Revert \"build/make/install: Set SAGE_SPKG_WHEELS also here so that script packages still work\"</code></td></tr></table>\n",
    "created_at": "2020-10-02T02:07:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29386#issuecomment-461134",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9750195b6f71ff414c06576a66708b3fbd21365c"><code>9750195</code></a></td><td><code>WIP: Install pip packages with sage-spkg</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/be2417cd48549b2c1a9fa29bcd362b08c2a6fda7"><code>be2417c</code></a></td><td><code>Merge tag '9.2.beta14' into t/30657/fix_up__sage__p_</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ee7ee29ea4686a968846df1621f52adcd8f4173"><code>8ee7ee2</code></a></td><td><code>build/make/install: Set SAGE_SPKG_WHEELS also here so that script packages still work</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72c59013c7fde5ca457a537402a9b7fb8ef50958"><code>72c5901</code></a></td><td><code>Merge branch 't/30657/fix_up__sage__p_' into t/29386/install_script_packages_via_sage_spkg</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/660d689c8fc712b813adb19f076aa9d8eeaaccb4"><code>660d689</code></a></td><td><code>Revert "build/make/install: Set SAGE_SPKG_WHEELS also here so that script packages still work"</code></td></tr></table>




---

archive/issue_events_401007.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29386#event-401007"
}
```



---

archive/issue_events_401008.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29386#event-401008"
}
```



---

archive/issue_comments_461135.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29386#issuecomment-461135",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:16" align="right">comment:16</div>

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_461136.json:
```json
{
    "body": "Changed dependencies from **#29793, #30657** to **#29793, #30657, #29013**",
    "created_at": "2021-04-05T18:34:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29386#issuecomment-461136",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#29793, #30657** to **#29793, #30657, #29013**



---

archive/issue_comments_461137.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -14,3 +14,6 @@\n We also rename targets `SPKG-clean` to `SPKG-uninstall` (as originally discussed in #29097), leaving a deprecated target behind.  This is to unify the targets between normal and script packages (the latter used `-uninstall` already). \n \n \n+\n+Ideally, when done, changing a package's source between script and normal and pip will no longer require running `bootstrap`.\n+\n``````\n",
    "created_at": "2021-04-05T18:34:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29386#issuecomment-461137",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -14,3 +14,6 @@
 We also rename targets `SPKG-clean` to `SPKG-uninstall` (as originally discussed in #29097), leaving a deprecated target behind.  This is to unify the targets between normal and script packages (the latter used `-uninstall` already). 
 
 
+
+Ideally, when done, changing a package's source between script and normal and pip will no longer require running `bootstrap`.
+
``````




---

archive/issue_comments_461138.json:
```json
{
    "body": "Work Issues: **rework on top of #29013**",
    "created_at": "2021-04-05T18:34:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29386#issuecomment-461138",
    "user": "https://github.com/mkoeppe"
}
```

Work Issues: **rework on top of #29013**



---

archive/issue_comments_461139.json:
```json
{
    "body": "Changed dependencies from **#29793, #30657, #29013** to **#29013**",
    "created_at": "2021-04-05T18:35:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29386#issuecomment-461139",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#29793, #30657, #29013** to **#29013**



---

archive/issue_events_401009.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T02:58:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29386#event-401009"
}
```



---

archive/issue_events_401010.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T02:58:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29386#event-401010"
}
```



---

archive/issue_events_401011.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29386#event-401011"
}
```



---

archive/issue_events_401012.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29386#event-401012"
}
```



---

archive/issue_events_401013.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29386#event-401013"
}
```



---

archive/issue_events_401014.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29386#event-401014"
}
```



---

archive/issue_comments_461140.json:
```json
{
    "body": "Changed commit from **[`660d689`](https://github.com/sagemath/sagetrac-mirror/commit/660d689c8fc712b813adb19f076aa9d8eeaaccb4)** to **[`7a25d1d`](https://github.com/sagemath/sagetrac-mirror/commit/7a25d1d0b74cf7fe7b29b0169ba2539b323ae04a)**",
    "created_at": "2022-07-21T07:01:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29386#issuecomment-461140",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`660d689`](https://github.com/sagemath/sagetrac-mirror/commit/660d689c8fc712b813adb19f076aa9d8eeaaccb4)** to **[`7a25d1d`](https://github.com/sagemath/sagetrac-mirror/commit/7a25d1d0b74cf7fe7b29b0169ba2539b323ae04a)**



---

archive/issue_comments_461141.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/483b65e5d576a8ceefa574c514353945bf9e303a\"><code>483b65e</code></a></td><td><code>build/bin/sage-spkg: Remove dead code for manufacturing an spkg-install script</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/445ed7e10f70899ddc0c44bda203d25f8164a22d\"><code>445ed7e</code></a></td><td><code>build/bin/sage-spkg: Get rid of USE_LOCAL_SCRIPTS (it was always yes); prepare for script packages</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/74f549c1c51471773e4376762006bd9399a3817c\"><code>74f549c</code></a></td><td><code>build/bin/sage-spkg: For script packages, do not poison the proxy variables</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/20ddd7eff31e2e3c34642988ebbbdbda27e47e32\"><code>20ddd7e</code></a></td><td><code>build/bin/sage-spkg: Exit with error for some old-style script invocations</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/25d38e9561d14a9a13aaca825e031018fcdf3a6b\"><code>25d38e9</code></a></td><td><code>build/bin/sage-spkg: Remove error message when checksums.ini does not exist (script package)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/97c61be1bc28897c14cf927e67862e2102916737\"><code>97c61be</code></a></td><td><code>build/bin/sage-spkg: Fix up for normal and script packages</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b1401d03133198899e9a791f8a690d28019d7d4\"><code>1b1401d</code></a></td><td><code>build/bin/sage-spkg: Handle script packages without package-version.txt</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d850e60f4bbb1effe3d713b6e0581db4e61614e8\"><code>d850e60</code></a></td><td><code>build/make/Makefile.in: Install script packages using sage-spkg</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7a25d1d0b74cf7fe7b29b0169ba2539b323ae04a\"><code>7a25d1d</code></a></td><td><code>WIP: Install pip packages with sage-spkg</code></td></tr></table>\n",
    "created_at": "2022-07-21T07:01:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29386#issuecomment-461141",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/483b65e5d576a8ceefa574c514353945bf9e303a"><code>483b65e</code></a></td><td><code>build/bin/sage-spkg: Remove dead code for manufacturing an spkg-install script</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/445ed7e10f70899ddc0c44bda203d25f8164a22d"><code>445ed7e</code></a></td><td><code>build/bin/sage-spkg: Get rid of USE_LOCAL_SCRIPTS (it was always yes); prepare for script packages</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/74f549c1c51471773e4376762006bd9399a3817c"><code>74f549c</code></a></td><td><code>build/bin/sage-spkg: For script packages, do not poison the proxy variables</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/20ddd7eff31e2e3c34642988ebbbdbda27e47e32"><code>20ddd7e</code></a></td><td><code>build/bin/sage-spkg: Exit with error for some old-style script invocations</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/25d38e9561d14a9a13aaca825e031018fcdf3a6b"><code>25d38e9</code></a></td><td><code>build/bin/sage-spkg: Remove error message when checksums.ini does not exist (script package)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/97c61be1bc28897c14cf927e67862e2102916737"><code>97c61be</code></a></td><td><code>build/bin/sage-spkg: Fix up for normal and script packages</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b1401d03133198899e9a791f8a690d28019d7d4"><code>1b1401d</code></a></td><td><code>build/bin/sage-spkg: Handle script packages without package-version.txt</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d850e60f4bbb1effe3d713b6e0581db4e61614e8"><code>d850e60</code></a></td><td><code>build/make/Makefile.in: Install script packages using sage-spkg</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7a25d1d0b74cf7fe7b29b0169ba2539b323ae04a"><code>7a25d1d</code></a></td><td><code>WIP: Install pip packages with sage-spkg</code></td></tr></table>




---

archive/issue_comments_461142.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,14 +6,8 @@\n \n This is useful for #29082... to clean up #27870/#29003, which introduced files in `SAGE_LOCAL` that do not belong to any package and are never uninstalled.\n \n-\n We also make the decision whether `spkg-install` is generated from a template `spkg-install.in` or provided as is in the source tree orthogonal to the distinction `source=script` vs. `source=pip`.\n We simply generate `spkg-install` if `spkg-install.in` is present.\n \n-\n-We also rename targets `SPKG-clean` to `SPKG-uninstall` (as originally discussed in #29097), leaving a deprecated target behind.  This is to unify the targets between normal and script packages (the latter used `-uninstall` already). \n-\n-\n-\n Ideally, when done, changing a package's source between script and normal and pip will no longer require running `bootstrap`.\n \n``````\n",
    "created_at": "2022-07-21T07:03:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29386#issuecomment-461142",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,14 +6,8 @@
 
 This is useful for #29082... to clean up #27870/#29003, which introduced files in `SAGE_LOCAL` that do not belong to any package and are never uninstalled.
 
-
 We also make the decision whether `spkg-install` is generated from a template `spkg-install.in` or provided as is in the source tree orthogonal to the distinction `source=script` vs. `source=pip`.
 We simply generate `spkg-install` if `spkg-install.in` is present.
 
-
-We also rename targets `SPKG-clean` to `SPKG-uninstall` (as originally discussed in #29097), leaving a deprecated target behind.  This is to unify the targets between normal and script packages (the latter used `-uninstall` already). 
-
-
-
 Ideally, when done, changing a package's source between script and normal and pip will no longer require running `bootstrap`.
 
``````




---

archive/issue_comments_461143.json:
```json
{
    "body": "Changed work issues from **rework on top of #29013** to none",
    "created_at": "2022-07-21T07:03:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29386#issuecomment-461143",
    "user": "https://github.com/mkoeppe"
}
```

Changed work issues from **rework on top of #29013** to none



---

archive/issue_comments_461144.json:
```json
{
    "body": "Changed dependencies from **#29013** to none",
    "created_at": "2022-07-21T07:03:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29386#issuecomment-461144",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#29013** to none



---

archive/issue_comments_461145.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,7 +4,7 @@\n \n This ticket installs them by `sage-spkg` instead. This enables script packages to participate in the staged installs (`SAGE_DESTDIR`) and uninstallation mechanisms.\n \n-This is useful for #29082... to clean up #27870/#29003, which introduced files in `SAGE_LOCAL` that do not belong to any package and are never uninstalled.\n+This is useful for #29387 to clean up #27870/#29003/#29082, which introduced files in `SAGE_LOCAL` that do not belong to any package and are never uninstalled.\n \n We also make the decision whether `spkg-install` is generated from a template `spkg-install.in` or provided as is in the source tree orthogonal to the distinction `source=script` vs. `source=pip`.\n We simply generate `spkg-install` if `spkg-install.in` is present.\n``````\n",
    "created_at": "2022-07-21T07:05:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29386#issuecomment-461145",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,7 +4,7 @@
 
 This ticket installs them by `sage-spkg` instead. This enables script packages to participate in the staged installs (`SAGE_DESTDIR`) and uninstallation mechanisms.
 
-This is useful for #29082... to clean up #27870/#29003, which introduced files in `SAGE_LOCAL` that do not belong to any package and are never uninstalled.
+This is useful for #29387 to clean up #27870/#29003/#29082, which introduced files in `SAGE_LOCAL` that do not belong to any package and are never uninstalled.
 
 We also make the decision whether `spkg-install` is generated from a template `spkg-install.in` or provided as is in the source tree orthogonal to the distinction `source=script` vs. `source=pip`.
 We simply generate `spkg-install` if `spkg-install.in` is present.
``````




---

archive/issue_comments_461146.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nRebased and dropped all clean/uninstall changes here because that is #29097",
    "created_at": "2022-07-21T07:06:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29386#issuecomment-461146",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:25" align="right">comment:25</div>

Rebased and dropped all clean/uninstall changes here because that is #29097



---

archive/issue_comments_461147.json:
```json
{
    "body": "Work Issues: **Move \"dummy script package\" code to sage-spkg**",
    "created_at": "2022-07-21T07:19:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29386#issuecomment-461147",
    "user": "https://github.com/mkoeppe"
}
```

Work Issues: **Move "dummy script package" code to sage-spkg**



---

archive/issue_events_401015.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-21T07:21:14Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29386#event-401015"
}
```



---

archive/issue_events_401016.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-21T07:21:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29386#event-401016"
}
```



---

archive/issue_events_401017.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-12T19:26:02Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "title_is": "Install script and pip packages via sage-spkg",
    "title_was": "Install script packages via sage-spkg",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29386#event-401017"
}
```



---

archive/issue_events_401018.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-31T21:31:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29386#event-401018"
}
```



---

archive/issue_events_401019.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-31T21:31:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29386",
    "milestone_number": null,
    "milestone_title": "sage-9.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29386#event-401019"
}
```
