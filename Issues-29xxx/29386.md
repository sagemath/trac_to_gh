# Issue 29386: Install script and pip packages via sage-spkg

archive/issues_029149.json:
```json
{
    "body": "Follow-up from #29287.\n\nScript packages are installed by special rules in `build/make/Makefile`.\n\nThis ticket installs them by `sage-spkg` instead. This enables script packages to participate in the staged installs (`SAGE_DESTDIR`) and uninstallation mechanisms.\n\nThis is useful for #29387 to clean up #27870/#29003/#29082, which introduced files in `SAGE_LOCAL` that do not belong to any package and are never uninstalled.\n\nWe also make the decision whether `spkg-install` is generated from a template `spkg-install.in` or provided as is in the source tree orthogonal to the distinction `source=script` vs. `source=pip`.\nWe simply generate `spkg-install` if `spkg-install.in` is present.\n\nIdeally, when done, changing a package's source between script and normal and pip will no longer require running `bootstrap`.\n\n\nCC:  @dimpase @jhpalmieri @embray @orlitzky\n\nBranch: [u/mkoeppe/install_script_packages_via_sage_spkg](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/install_script_packages_via_sage_spkg)\n\nCommit: [7a25d1d0b74cf7fe7b29b0169ba2539b323ae04a](https://github.com/sagemath/sagetrac-mirror/commit/7a25d1d0b74cf7fe7b29b0169ba2539b323ae04a)\n\nWork Issues: Move \"dummy script package\" code to sage-spkg\n\nAuthor: Matthias Koeppe\n\nStatus: new\n\nIssue created by migration from https://trac.sagemath.org/ticket/29386\n\n",
    "created_at": "2020-03-21T13:06:08Z",
    "labels": [
        "component: build"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Install script and pip packages via sage-spkg",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29386",
    "user": "https://github.com/mkoeppe"
}
```
Follow-up from #29287.

Script packages are installed by special rules in `build/make/Makefile`.

This ticket installs them by `sage-spkg` instead. This enables script packages to participate in the staged installs (`SAGE_DESTDIR`) and uninstallation mechanisms.

This is useful for #29387 to clean up #27870/#29003/#29082, which introduced files in `SAGE_LOCAL` that do not belong to any package and are never uninstalled.

We also make the decision whether `spkg-install` is generated from a template `spkg-install.in` or provided as is in the source tree orthogonal to the distinction `source=script` vs. `source=pip`.
We simply generate `spkg-install` if `spkg-install.in` is present.

Ideally, when done, changing a package's source between script and normal and pip will no longer require running `bootstrap`.


CC:  @dimpase @jhpalmieri @embray @orlitzky

Branch: [u/mkoeppe/install_script_packages_via_sage_spkg](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/install_script_packages_via_sage_spkg)

Commit: [7a25d1d0b74cf7fe7b29b0169ba2539b323ae04a](https://github.com/sagemath/sagetrac-mirror/commit/7a25d1d0b74cf7fe7b29b0169ba2539b323ae04a)

Work Issues: Move "dummy script package" code to sage-spkg

Author: Matthias Koeppe

Status: new

Issue created by migration from https://trac.sagemath.org/ticket/29386





---

archive/issue_comments_574388.json:
```json
{
    "body": "<a id='comment:1'></a>\npushing these forward to 9.2",
    "created_at": "2020-04-14T06:33:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29386#issuecomment-574388",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'></a>
pushing these forward to 9.2



---

archive/issue_events_084484.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T06:33:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29386#event-84484"
}
```



---

archive/issue_comments_574389.json:
```json
{
    "body": "Dependencies: #29793",
    "created_at": "2020-06-04T17:25:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29386#issuecomment-574389",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: #29793



---

archive/issue_comments_574390.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,3 +7,6 @@\n This is useful for #29082... to clean up #27870/#29003, which introduced files in `SAGE_LOCAL` that do not belong to any package and are never uninstalled.\n \n \n+We also make the decision whether `spkg-install` is generated from a template `spkg-install.in` or provided as is in the source tree orthogonal to the distinction `source=script` vs. `source=pip`.\n+\n+\n``````\n",
    "created_at": "2020-06-12T22:52:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29386#issuecomment-574390",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,3 +7,6 @@
 This is useful for #29082... to clean up #27870/#29003, which introduced files in `SAGE_LOCAL` that do not belong to any package and are never uninstalled.
 
 
+We also make the decision whether `spkg-install` is generated from a template `spkg-install.in` or provided as is in the source tree orthogonal to the distinction `source=script` vs. `source=pip`.
+
+
``````




---

archive/issue_events_084485.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-13T17:11:30Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29386#event-84485"
}
```



---

archive/issue_events_084486.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-13T17:11:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29386#event-84486"
}
```



---

archive/issue_comments_574391.json:
```json
{
    "body": "<a id='comment:6'></a>\n+1 this would be a very nice improvement.",
    "created_at": "2020-09-02T09:25:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29386#issuecomment-574391",
    "user": "https://github.com/embray"
}
```

<a id='comment:6'></a>
+1 this would be a very nice improvement.



---

archive/issue_comments_574392.json:
```json
{
    "body": "Branch: [u/mkoeppe/install_script_packages_via_sage_spkg](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/install_script_packages_via_sage_spkg)",
    "created_at": "2020-09-24T21:45:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29386#issuecomment-574392",
    "user": "https://github.com/mkoeppe"
}
```

Branch: [u/mkoeppe/install_script_packages_via_sage_spkg](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/install_script_packages_via_sage_spkg)



---

archive/issue_comments_574393.json:
```json
{
    "body": "<a id='comment:8'></a>\nNew commits:\n|                                                                                                                                          |                                                                                |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------|\n|[f0f03c9](https://github.com/sagemath/sagetrac-mirror/commit/f0f03c9e68e90f8fc8a9c63d5793860cd1c3ddf0)|`build/bin/sage-spkg: Remove dead code for manufacturing an spkg-install script`|\n|[46e5f68](https://github.com/sagemath/sagetrac-mirror/commit/46e5f687b745a1ec892d09cec5971b1287e2550d)|`build/bin/sage-spkg: Get rid of USE_LOCAL_SCRIPTS (it was always yes); prepare for script packages`|\n|[fee5bc2](https://github.com/sagemath/sagetrac-mirror/commit/fee5bc2c04387745dbb9b8265ec13be7bcd434e1)|`build/bin/sage-spkg: For script packages, do not poison the proxy variables`|",
    "created_at": "2020-09-24T22:09:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29386#issuecomment-574393",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
New commits:
|                                                                                                                                          |                                                                                |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------|
|[f0f03c9](https://github.com/sagemath/sagetrac-mirror/commit/f0f03c9e68e90f8fc8a9c63d5793860cd1c3ddf0)|`build/bin/sage-spkg: Remove dead code for manufacturing an spkg-install script`|
|[46e5f68](https://github.com/sagemath/sagetrac-mirror/commit/46e5f687b745a1ec892d09cec5971b1287e2550d)|`build/bin/sage-spkg: Get rid of USE_LOCAL_SCRIPTS (it was always yes); prepare for script packages`|
|[fee5bc2](https://github.com/sagemath/sagetrac-mirror/commit/fee5bc2c04387745dbb9b8265ec13be7bcd434e1)|`build/bin/sage-spkg: For script packages, do not poison the proxy variables`|



---

archive/issue_comments_574394.json:
```json
{
    "body": "Commit: [fee5bc2c04387745dbb9b8265ec13be7bcd434e1](https://github.com/sagemath/sagetrac-mirror/commit/fee5bc2c04387745dbb9b8265ec13be7bcd434e1)",
    "created_at": "2020-09-24T22:09:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29386#issuecomment-574394",
    "user": "https://github.com/mkoeppe"
}
```

Commit: [fee5bc2c04387745dbb9b8265ec13be7bcd434e1](https://github.com/sagemath/sagetrac-mirror/commit/fee5bc2c04387745dbb9b8265ec13be7bcd434e1)



---

archive/issue_comments_574395.json:
```json
{
    "body": "Changing dependencies from \"#29793\" to \"#29793, #30657\"",
    "created_at": "2020-09-24T22:09:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29386#issuecomment-574395",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29793" to "#29793, #30657"



---

archive/issue_comments_574396.json:
```json
{
    "body": "Changing commit from \"[fee5bc2c04387745dbb9b8265ec13be7bcd434e1](https://github.com/sagemath/sagetrac-mirror/commit/fee5bc2c04387745dbb9b8265ec13be7bcd434e1)\" to \"[e4c27f6f307c06d6a1c9fc368cb72a461e4c6b20](https://github.com/sagemath/sagetrac-mirror/commit/e4c27f6f307c06d6a1c9fc368cb72a461e4c6b20)\"",
    "created_at": "2020-09-24T22:35:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29386#issuecomment-574396",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[fee5bc2c04387745dbb9b8265ec13be7bcd434e1](https://github.com/sagemath/sagetrac-mirror/commit/fee5bc2c04387745dbb9b8265ec13be7bcd434e1)" to "[e4c27f6f307c06d6a1c9fc368cb72a461e4c6b20](https://github.com/sagemath/sagetrac-mirror/commit/e4c27f6f307c06d6a1c9fc368cb72a461e4c6b20)"



---

archive/issue_comments_574397.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n|                                                                                                                                           |                                                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------|\n|[9ee2110](https://github.com/sagemath/sagetrac-mirror/commit/9ee21109dfb001feec2b032c197defb91cc75783)|`build/bin/sage-dist-helpers: Also use $sudo for storing the wheel file`|\n|[d7aac84](https://github.com/sagemath/sagetrac-mirror/commit/d7aac84ab4dd86ad6203a99eb82371c1d2a46363)|`src/doc/en/developer/packaging.rst: Update sdh_... documentation`|\n|[9b7c7a0](https://github.com/sagemath/sagetrac-mirror/commit/9b7c7a04d658838ce511e352edb9c03f42c4a7f2)|`build/bin/sage-pip-{install,uninstall}: Fix typo in comment`|\n|[4135e8b](https://github.com/sagemath/sagetrac-mirror/commit/4135e8b236d2e5491b3ee96cbd00196dc5b6e036)|`build/bin/sage-pip-install: Remove an outdated comment`|\n|[f2e7075](https://github.com/sagemath/sagetrac-mirror/commit/f2e707561ab3044221b57151ae4cc67d502fe9f8)|`Merge tag '9.2.beta13' into t/29500/install_all_python_packages_via_pip_wheel__create_pep_503_simple_repository_for_wheels`|\n|[bd0fd2f](https://github.com/sagemath/sagetrac-mirror/commit/bd0fd2f3142b08a906ebdbe3e2f37be6bec5f135)|`Merge branch 't/29500/install_all_python_packages_via_pip_wheel__create_pep_503_simple_repository_for_wheels' into t/30657/fix_up__sage__p_`|\n|[2e20f23](https://github.com/sagemath/sagetrac-mirror/commit/2e20f230c0ac0b24c14b04b180217db68a2b7278)|`build/bin/sage-spkg: Move SAGE_SPKG_{INST,SCRIPTS,WHEELS} setting here from build/bin/install, make them relative to SAGE_INST_LOCAL`|\n|[ac09b14](https://github.com/sagemath/sagetrac-mirror/commit/ac09b149632a091799a390ff13d6fbb2574480c4)|`Merge branch 't/30657/fix_up__sage__p_' into t/29386/install_script_packages_via_sage_spkg`|\n|[bf0c3dc](https://github.com/sagemath/sagetrac-mirror/commit/bf0c3dc1db15c4fb83a804be2a7df1ac412d716e)|`build/bin/sage-spkg: Exit with error for some old-style script invocations`|\n|[e4c27f6](https://github.com/sagemath/sagetrac-mirror/commit/e4c27f6f307c06d6a1c9fc368cb72a461e4c6b20)|`build/bin/sage-spkg: Remove error message when checksums.ini does not exist (script package)`|",
    "created_at": "2020-09-24T22:35:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29386#issuecomment-574397",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
|                                                                                                                                           |                                                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------|
|[9ee2110](https://github.com/sagemath/sagetrac-mirror/commit/9ee21109dfb001feec2b032c197defb91cc75783)|`build/bin/sage-dist-helpers: Also use $sudo for storing the wheel file`|
|[d7aac84](https://github.com/sagemath/sagetrac-mirror/commit/d7aac84ab4dd86ad6203a99eb82371c1d2a46363)|`src/doc/en/developer/packaging.rst: Update sdh_... documentation`|
|[9b7c7a0](https://github.com/sagemath/sagetrac-mirror/commit/9b7c7a04d658838ce511e352edb9c03f42c4a7f2)|`build/bin/sage-pip-{install,uninstall}: Fix typo in comment`|
|[4135e8b](https://github.com/sagemath/sagetrac-mirror/commit/4135e8b236d2e5491b3ee96cbd00196dc5b6e036)|`build/bin/sage-pip-install: Remove an outdated comment`|
|[f2e7075](https://github.com/sagemath/sagetrac-mirror/commit/f2e707561ab3044221b57151ae4cc67d502fe9f8)|`Merge tag '9.2.beta13' into t/29500/install_all_python_packages_via_pip_wheel__create_pep_503_simple_repository_for_wheels`|
|[bd0fd2f](https://github.com/sagemath/sagetrac-mirror/commit/bd0fd2f3142b08a906ebdbe3e2f37be6bec5f135)|`Merge branch 't/29500/install_all_python_packages_via_pip_wheel__create_pep_503_simple_repository_for_wheels' into t/30657/fix_up__sage__p_`|
|[2e20f23](https://github.com/sagemath/sagetrac-mirror/commit/2e20f230c0ac0b24c14b04b180217db68a2b7278)|`build/bin/sage-spkg: Move SAGE_SPKG_{INST,SCRIPTS,WHEELS} setting here from build/bin/install, make them relative to SAGE_INST_LOCAL`|
|[ac09b14](https://github.com/sagemath/sagetrac-mirror/commit/ac09b149632a091799a390ff13d6fbb2574480c4)|`Merge branch 't/30657/fix_up__sage__p_' into t/29386/install_script_packages_via_sage_spkg`|
|[bf0c3dc](https://github.com/sagemath/sagetrac-mirror/commit/bf0c3dc1db15c4fb83a804be2a7df1ac412d716e)|`build/bin/sage-spkg: Exit with error for some old-style script invocations`|
|[e4c27f6](https://github.com/sagemath/sagetrac-mirror/commit/e4c27f6f307c06d6a1c9fc368cb72a461e4c6b20)|`build/bin/sage-spkg: Remove error message when checksums.ini does not exist (script package)`|



---

archive/issue_comments_574398.json:
```json
{
    "body": "Changing commit from \"[e4c27f6f307c06d6a1c9fc368cb72a461e4c6b20](https://github.com/sagemath/sagetrac-mirror/commit/e4c27f6f307c06d6a1c9fc368cb72a461e4c6b20)\" to \"[81a63df3107793d067f1bd5a9807bfff8c0cd054](https://github.com/sagemath/sagetrac-mirror/commit/81a63df3107793d067f1bd5a9807bfff8c0cd054)\"",
    "created_at": "2020-09-24T23:31:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29386#issuecomment-574398",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[e4c27f6f307c06d6a1c9fc368cb72a461e4c6b20](https://github.com/sagemath/sagetrac-mirror/commit/e4c27f6f307c06d6a1c9fc368cb72a461e4c6b20)" to "[81a63df3107793d067f1bd5a9807bfff8c0cd054](https://github.com/sagemath/sagetrac-mirror/commit/81a63df3107793d067f1bd5a9807bfff8c0cd054)"



---

archive/issue_comments_574399.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|\n|[3ceeaa7](https://github.com/sagemath/sagetrac-mirror/commit/3ceeaa73f60a4640380015059b50cf30bb74e972)|`build/bin/sage-spkg: Fix up for normal and script packages`|\n|[8c4fb4d](https://github.com/sagemath/sagetrac-mirror/commit/8c4fb4da757361aeb8a0ac6299425f0a41983497)|`build/bin/sage-spkg: Handle script packages without package-version.txt`|\n|[137365a](https://github.com/sagemath/sagetrac-mirror/commit/137365af932c9006e5d92150ed5b0e389627c55b)|`build/make/Makefile.in: Replace 'SPKG-clean' by 'SPKG-uninstall', with deprecation`|\n|[a9cbfda](https://github.com/sagemath/sagetrac-mirror/commit/a9cbfdaba49b4f754ec273aa588185313807217b)|`build/make/Makefile.in: Install script packages using sage-spkg`|\n|[81a63df](https://github.com/sagemath/sagetrac-mirror/commit/81a63df3107793d067f1bd5a9807bfff8c0cd054)|`src/bin/sage: Use 'make SPKG-uninstall' instead of -clean`|",
    "created_at": "2020-09-24T23:31:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29386#issuecomment-574399",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|
|[3ceeaa7](https://github.com/sagemath/sagetrac-mirror/commit/3ceeaa73f60a4640380015059b50cf30bb74e972)|`build/bin/sage-spkg: Fix up for normal and script packages`|
|[8c4fb4d](https://github.com/sagemath/sagetrac-mirror/commit/8c4fb4da757361aeb8a0ac6299425f0a41983497)|`build/bin/sage-spkg: Handle script packages without package-version.txt`|
|[137365a](https://github.com/sagemath/sagetrac-mirror/commit/137365af932c9006e5d92150ed5b0e389627c55b)|`build/make/Makefile.in: Replace 'SPKG-clean' by 'SPKG-uninstall', with deprecation`|
|[a9cbfda](https://github.com/sagemath/sagetrac-mirror/commit/a9cbfdaba49b4f754ec273aa588185313807217b)|`build/make/Makefile.in: Install script packages using sage-spkg`|
|[81a63df](https://github.com/sagemath/sagetrac-mirror/commit/81a63df3107793d067f1bd5a9807bfff8c0cd054)|`src/bin/sage: Use 'make SPKG-uninstall' instead of -clean`|



---

archive/issue_comments_574400.json:
```json
{
    "body": "<a id='comment:11'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------|\n|[3d6fa59](https://github.com/sagemath/sagetrac-mirror/commit/3d6fa5924f54b85a28f5c4d969afca01da8801fc)|`build/make/Makefile.in: Replace 'SPKG-clean' by 'SPKG-uninstall', with deprecation, for pip packages too`|",
    "created_at": "2020-09-24T23:38:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29386#issuecomment-574400",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                          |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------|
|[3d6fa59](https://github.com/sagemath/sagetrac-mirror/commit/3d6fa5924f54b85a28f5c4d969afca01da8801fc)|`build/make/Makefile.in: Replace 'SPKG-clean' by 'SPKG-uninstall', with deprecation, for pip packages too`|



---

archive/issue_comments_574401.json:
```json
{
    "body": "Changing commit from \"[81a63df3107793d067f1bd5a9807bfff8c0cd054](https://github.com/sagemath/sagetrac-mirror/commit/81a63df3107793d067f1bd5a9807bfff8c0cd054)\" to \"[3d6fa5924f54b85a28f5c4d969afca01da8801fc](https://github.com/sagemath/sagetrac-mirror/commit/3d6fa5924f54b85a28f5c4d969afca01da8801fc)\"",
    "created_at": "2020-09-24T23:38:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29386#issuecomment-574401",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[81a63df3107793d067f1bd5a9807bfff8c0cd054](https://github.com/sagemath/sagetrac-mirror/commit/81a63df3107793d067f1bd5a9807bfff8c0cd054)" to "[3d6fa5924f54b85a28f5c4d969afca01da8801fc](https://github.com/sagemath/sagetrac-mirror/commit/3d6fa5924f54b85a28f5c4d969afca01da8801fc)"



---

archive/issue_comments_574402.json:
```json
{
    "body": "Author: Matthias Koeppe",
    "created_at": "2020-09-24T23:57:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29386#issuecomment-574402",
    "user": "https://github.com/mkoeppe"
}
```

Author: Matthias Koeppe



---

archive/issue_comments_574403.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,5 +8,9 @@\n \n \n We also make the decision whether `spkg-install` is generated from a template `spkg-install.in` or provided as is in the source tree orthogonal to the distinction `source=script` vs. `source=pip`.\n+We simply generate `spkg-install` if `spkg-install.in` is present.\n \n \n+We also rename targets `SPKG-clean` to `SPKG-uninstall` (as originally discussed in #29097), leaving a deprecated target behind.  This is to unify the targets between normal and script packages (the latter used `-uninstall` already). \n+\n+\n``````\n",
    "created_at": "2020-09-24T23:57:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29386#issuecomment-574403",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,5 +8,9 @@
 
 
 We also make the decision whether `spkg-install` is generated from a template `spkg-install.in` or provided as is in the source tree orthogonal to the distinction `source=script` vs. `source=pip`.
+We simply generate `spkg-install` if `spkg-install.in` is present.
 
 
+We also rename targets `SPKG-clean` to `SPKG-uninstall` (as originally discussed in #29097), leaving a deprecated target behind.  This is to unify the targets between normal and script packages (the latter used `-uninstall` already). 
+
+
``````




---

archive/issue_comments_574404.json:
```json
{
    "body": "<a id='comment:13'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------|\n|[ae5ea98](https://github.com/sagemath/sagetrac-mirror/commit/ae5ea98908707d8ce3f23603f51b070b117c3892)|`build/make/Makefile.in: Make SPKG-uninstall targets phony`|",
    "created_at": "2020-09-25T00:19:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29386#issuecomment-574404",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------|
|[ae5ea98](https://github.com/sagemath/sagetrac-mirror/commit/ae5ea98908707d8ce3f23603f51b070b117c3892)|`build/make/Makefile.in: Make SPKG-uninstall targets phony`|



---

archive/issue_comments_574405.json:
```json
{
    "body": "Changing commit from \"[3d6fa5924f54b85a28f5c4d969afca01da8801fc](https://github.com/sagemath/sagetrac-mirror/commit/3d6fa5924f54b85a28f5c4d969afca01da8801fc)\" to \"[ae5ea98908707d8ce3f23603f51b070b117c3892](https://github.com/sagemath/sagetrac-mirror/commit/ae5ea98908707d8ce3f23603f51b070b117c3892)\"",
    "created_at": "2020-09-25T00:19:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29386#issuecomment-574405",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[3d6fa5924f54b85a28f5c4d969afca01da8801fc](https://github.com/sagemath/sagetrac-mirror/commit/3d6fa5924f54b85a28f5c4d969afca01da8801fc)" to "[ae5ea98908707d8ce3f23603f51b070b117c3892](https://github.com/sagemath/sagetrac-mirror/commit/ae5ea98908707d8ce3f23603f51b070b117c3892)"



---

archive/issue_comments_574406.json:
```json
{
    "body": "Changing commit from \"[ae5ea98908707d8ce3f23603f51b070b117c3892](https://github.com/sagemath/sagetrac-mirror/commit/ae5ea98908707d8ce3f23603f51b070b117c3892)\" to \"[6c27c05e64886bfb2133dc70c6f87145eb74fcf5](https://github.com/sagemath/sagetrac-mirror/commit/6c27c05e64886bfb2133dc70c6f87145eb74fcf5)\"",
    "created_at": "2020-09-25T01:46:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29386#issuecomment-574406",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[ae5ea98908707d8ce3f23603f51b070b117c3892](https://github.com/sagemath/sagetrac-mirror/commit/ae5ea98908707d8ce3f23603f51b070b117c3892)" to "[6c27c05e64886bfb2133dc70c6f87145eb74fcf5](https://github.com/sagemath/sagetrac-mirror/commit/6c27c05e64886bfb2133dc70c6f87145eb74fcf5)"



---

archive/issue_comments_574407.json:
```json
{
    "body": "<a id='comment:14'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|\n|[47ef805](https://github.com/sagemath/sagetrac-mirror/commit/47ef805fff45ed166ca2210becf68ba72276eeab)|`WIP: Install pip packages with sage-spkg`|\n|[6c27c05](https://github.com/sagemath/sagetrac-mirror/commit/6c27c05e64886bfb2133dc70c6f87145eb74fcf5)|`build/make/Makefile.in: Another SPKG-clean -> SPKG-uninstall`|",
    "created_at": "2020-09-25T01:46:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29386#issuecomment-574407",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                          |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|
|[47ef805](https://github.com/sagemath/sagetrac-mirror/commit/47ef805fff45ed166ca2210becf68ba72276eeab)|`WIP: Install pip packages with sage-spkg`|
|[6c27c05](https://github.com/sagemath/sagetrac-mirror/commit/6c27c05e64886bfb2133dc70c6f87145eb74fcf5)|`build/make/Makefile.in: Another SPKG-clean -> SPKG-uninstall`|



---

archive/issue_comments_574408.json:
```json
{
    "body": "Changing commit from \"[6c27c05e64886bfb2133dc70c6f87145eb74fcf5](https://github.com/sagemath/sagetrac-mirror/commit/6c27c05e64886bfb2133dc70c6f87145eb74fcf5)\" to \"[660d689c8fc712b813adb19f076aa9d8eeaaccb4](https://github.com/sagemath/sagetrac-mirror/commit/660d689c8fc712b813adb19f076aa9d8eeaaccb4)\"",
    "created_at": "2020-10-02T02:07:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29386#issuecomment-574408",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[6c27c05e64886bfb2133dc70c6f87145eb74fcf5](https://github.com/sagemath/sagetrac-mirror/commit/6c27c05e64886bfb2133dc70c6f87145eb74fcf5)" to "[660d689c8fc712b813adb19f076aa9d8eeaaccb4](https://github.com/sagemath/sagetrac-mirror/commit/660d689c8fc712b813adb19f076aa9d8eeaaccb4)"



---

archive/issue_comments_574409.json:
```json
{
    "body": "<a id='comment:15'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|\n|[9750195](https://github.com/sagemath/sagetrac-mirror/commit/9750195b6f71ff414c06576a66708b3fbd21365c)|`WIP: Install pip packages with sage-spkg`|\n|[be2417c](https://github.com/sagemath/sagetrac-mirror/commit/be2417cd48549b2c1a9fa29bcd362b08c2a6fda7)|`Merge tag '9.2.beta14' into t/30657/fix_up__sage__p_`|\n|[8ee7ee2](https://github.com/sagemath/sagetrac-mirror/commit/8ee7ee29ea4686a968846df1621f52adcd8f4173)|`build/make/install: Set SAGE_SPKG_WHEELS also here so that script packages still work`|\n|[72c5901](https://github.com/sagemath/sagetrac-mirror/commit/72c59013c7fde5ca457a537402a9b7fb8ef50958)|`Merge branch 't/30657/fix_up__sage__p_' into t/29386/install_script_packages_via_sage_spkg`|\n|[660d689](https://github.com/sagemath/sagetrac-mirror/commit/660d689c8fc712b813adb19f076aa9d8eeaaccb4)|`Revert \"build/make/install: Set SAGE_SPKG_WHEELS also here so that script packages still work\"`|",
    "created_at": "2020-10-02T02:07:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29386#issuecomment-574409",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                          |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|
|[9750195](https://github.com/sagemath/sagetrac-mirror/commit/9750195b6f71ff414c06576a66708b3fbd21365c)|`WIP: Install pip packages with sage-spkg`|
|[be2417c](https://github.com/sagemath/sagetrac-mirror/commit/be2417cd48549b2c1a9fa29bcd362b08c2a6fda7)|`Merge tag '9.2.beta14' into t/30657/fix_up__sage__p_`|
|[8ee7ee2](https://github.com/sagemath/sagetrac-mirror/commit/8ee7ee29ea4686a968846df1621f52adcd8f4173)|`build/make/install: Set SAGE_SPKG_WHEELS also here so that script packages still work`|
|[72c5901](https://github.com/sagemath/sagetrac-mirror/commit/72c59013c7fde5ca457a537402a9b7fb8ef50958)|`Merge branch 't/30657/fix_up__sage__p_' into t/29386/install_script_packages_via_sage_spkg`|
|[660d689](https://github.com/sagemath/sagetrac-mirror/commit/660d689c8fc712b813adb19f076aa9d8eeaaccb4)|`Revert "build/make/install: Set SAGE_SPKG_WHEELS also here so that script packages still work"`|



---

archive/issue_events_084487.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29386#event-84487"
}
```



---

archive/issue_events_084488.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29386#event-84488"
}
```



---

archive/issue_comments_574410.json:
```json
{
    "body": "<a id='comment:16'></a>\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29386#issuecomment-574410",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>
Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_574411.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -14,3 +14,6 @@\n We also rename targets `SPKG-clean` to `SPKG-uninstall` (as originally discussed in #29097), leaving a deprecated target behind.  This is to unify the targets between normal and script packages (the latter used `-uninstall` already). \n \n \n+\n+Ideally, when done, changing a package's source between script and normal and pip will no longer require running `bootstrap`.\n+\n``````\n",
    "created_at": "2021-04-05T18:34:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29386#issuecomment-574411",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -14,3 +14,6 @@
 We also rename targets `SPKG-clean` to `SPKG-uninstall` (as originally discussed in #29097), leaving a deprecated target behind.  This is to unify the targets between normal and script packages (the latter used `-uninstall` already). 
 
 
+
+Ideally, when done, changing a package's source between script and normal and pip will no longer require running `bootstrap`.
+
``````




---

archive/issue_comments_574412.json:
```json
{
    "body": "Work_Issues: rework on top of #29013",
    "created_at": "2021-04-05T18:34:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29386#issuecomment-574412",
    "user": "https://github.com/mkoeppe"
}
```

Work_Issues: rework on top of #29013



---

archive/issue_comments_574413.json:
```json
{
    "body": "Changing dependencies from \"#29793, #30657\" to \"#29793, #30657, #29013\"",
    "created_at": "2021-04-05T18:34:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29386#issuecomment-574413",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29793, #30657" to "#29793, #30657, #29013"



---

archive/issue_comments_574414.json:
```json
{
    "body": "Changing dependencies from \"#29793, #30657, #29013\" to \"#29013\"",
    "created_at": "2021-04-05T18:35:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29386#issuecomment-574414",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29793, #30657, #29013" to "#29013"



---

archive/issue_events_084489.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T02:58:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29386#event-84489"
}
```



---

archive/issue_events_084490.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T02:58:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29386#event-84490"
}
```



---

archive/issue_events_084491.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29386#event-84491"
}
```



---

archive/issue_events_084492.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29386#event-84492"
}
```



---

archive/issue_events_084493.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29386#event-84493"
}
```



---

archive/issue_events_084494.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29386#event-84494"
}
```



---

archive/issue_comments_574415.json:
```json
{
    "body": "Changing commit from \"[660d689c8fc712b813adb19f076aa9d8eeaaccb4](https://github.com/sagemath/sagetrac-mirror/commit/660d689c8fc712b813adb19f076aa9d8eeaaccb4)\" to \"[7a25d1d0b74cf7fe7b29b0169ba2539b323ae04a](https://github.com/sagemath/sagetrac-mirror/commit/7a25d1d0b74cf7fe7b29b0169ba2539b323ae04a)\"",
    "created_at": "2022-07-21T07:01:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29386#issuecomment-574415",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[660d689c8fc712b813adb19f076aa9d8eeaaccb4](https://github.com/sagemath/sagetrac-mirror/commit/660d689c8fc712b813adb19f076aa9d8eeaaccb4)" to "[7a25d1d0b74cf7fe7b29b0169ba2539b323ae04a](https://github.com/sagemath/sagetrac-mirror/commit/7a25d1d0b74cf7fe7b29b0169ba2539b323ae04a)"



---

archive/issue_comments_574416.json:
```json
{
    "body": "<a id='comment:22'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                                                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------|\n|[483b65e](https://github.com/sagemath/sagetrac-mirror/commit/483b65e5d576a8ceefa574c514353945bf9e303a)|`build/bin/sage-spkg: Remove dead code for manufacturing an spkg-install script`|\n|[445ed7e](https://github.com/sagemath/sagetrac-mirror/commit/445ed7e10f70899ddc0c44bda203d25f8164a22d)|`build/bin/sage-spkg: Get rid of USE_LOCAL_SCRIPTS (it was always yes); prepare for script packages`|\n|[74f549c](https://github.com/sagemath/sagetrac-mirror/commit/74f549c1c51471773e4376762006bd9399a3817c)|`build/bin/sage-spkg: For script packages, do not poison the proxy variables`|\n|[20ddd7e](https://github.com/sagemath/sagetrac-mirror/commit/20ddd7eff31e2e3c34642988ebbbdbda27e47e32)|`build/bin/sage-spkg: Exit with error for some old-style script invocations`|\n|[25d38e9](https://github.com/sagemath/sagetrac-mirror/commit/25d38e9561d14a9a13aaca825e031018fcdf3a6b)|`build/bin/sage-spkg: Remove error message when checksums.ini does not exist (script package)`|\n|[97c61be](https://github.com/sagemath/sagetrac-mirror/commit/97c61be1bc28897c14cf927e67862e2102916737)|`build/bin/sage-spkg: Fix up for normal and script packages`|\n|[1b1401d](https://github.com/sagemath/sagetrac-mirror/commit/1b1401d03133198899e9a791f8a690d28019d7d4)|`build/bin/sage-spkg: Handle script packages without package-version.txt`|\n|[d850e60](https://github.com/sagemath/sagetrac-mirror/commit/d850e60f4bbb1effe3d713b6e0581db4e61614e8)|`build/make/Makefile.in: Install script packages using sage-spkg`|\n|[7a25d1d](https://github.com/sagemath/sagetrac-mirror/commit/7a25d1d0b74cf7fe7b29b0169ba2539b323ae04a)|`WIP: Install pip packages with sage-spkg`|",
    "created_at": "2022-07-21T07:01:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29386#issuecomment-574416",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                                                |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------|
|[483b65e](https://github.com/sagemath/sagetrac-mirror/commit/483b65e5d576a8ceefa574c514353945bf9e303a)|`build/bin/sage-spkg: Remove dead code for manufacturing an spkg-install script`|
|[445ed7e](https://github.com/sagemath/sagetrac-mirror/commit/445ed7e10f70899ddc0c44bda203d25f8164a22d)|`build/bin/sage-spkg: Get rid of USE_LOCAL_SCRIPTS (it was always yes); prepare for script packages`|
|[74f549c](https://github.com/sagemath/sagetrac-mirror/commit/74f549c1c51471773e4376762006bd9399a3817c)|`build/bin/sage-spkg: For script packages, do not poison the proxy variables`|
|[20ddd7e](https://github.com/sagemath/sagetrac-mirror/commit/20ddd7eff31e2e3c34642988ebbbdbda27e47e32)|`build/bin/sage-spkg: Exit with error for some old-style script invocations`|
|[25d38e9](https://github.com/sagemath/sagetrac-mirror/commit/25d38e9561d14a9a13aaca825e031018fcdf3a6b)|`build/bin/sage-spkg: Remove error message when checksums.ini does not exist (script package)`|
|[97c61be](https://github.com/sagemath/sagetrac-mirror/commit/97c61be1bc28897c14cf927e67862e2102916737)|`build/bin/sage-spkg: Fix up for normal and script packages`|
|[1b1401d](https://github.com/sagemath/sagetrac-mirror/commit/1b1401d03133198899e9a791f8a690d28019d7d4)|`build/bin/sage-spkg: Handle script packages without package-version.txt`|
|[d850e60](https://github.com/sagemath/sagetrac-mirror/commit/d850e60f4bbb1effe3d713b6e0581db4e61614e8)|`build/make/Makefile.in: Install script packages using sage-spkg`|
|[7a25d1d](https://github.com/sagemath/sagetrac-mirror/commit/7a25d1d0b74cf7fe7b29b0169ba2539b323ae04a)|`WIP: Install pip packages with sage-spkg`|



---

archive/issue_comments_574417.json:
```json
{
    "body": "Changing dependencies from \"#29013\" to \"\"",
    "created_at": "2022-07-21T07:03:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29386#issuecomment-574417",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29013" to ""



---

archive/issue_comments_574418.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,14 +6,8 @@\n \n This is useful for #29082... to clean up #27870/#29003, which introduced files in `SAGE_LOCAL` that do not belong to any package and are never uninstalled.\n \n-\n We also make the decision whether `spkg-install` is generated from a template `spkg-install.in` or provided as is in the source tree orthogonal to the distinction `source=script` vs. `source=pip`.\n We simply generate `spkg-install` if `spkg-install.in` is present.\n \n-\n-We also rename targets `SPKG-clean` to `SPKG-uninstall` (as originally discussed in #29097), leaving a deprecated target behind.  This is to unify the targets between normal and script packages (the latter used `-uninstall` already). \n-\n-\n-\n Ideally, when done, changing a package's source between script and normal and pip will no longer require running `bootstrap`.\n \n``````\n",
    "created_at": "2022-07-21T07:03:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29386#issuecomment-574418",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,14 +6,8 @@
 
 This is useful for #29082... to clean up #27870/#29003, which introduced files in `SAGE_LOCAL` that do not belong to any package and are never uninstalled.
 
-
 We also make the decision whether `spkg-install` is generated from a template `spkg-install.in` or provided as is in the source tree orthogonal to the distinction `source=script` vs. `source=pip`.
 We simply generate `spkg-install` if `spkg-install.in` is present.
 
-
-We also rename targets `SPKG-clean` to `SPKG-uninstall` (as originally discussed in #29097), leaving a deprecated target behind.  This is to unify the targets between normal and script packages (the latter used `-uninstall` already). 
-
-
-
 Ideally, when done, changing a package's source between script and normal and pip will no longer require running `bootstrap`.
 
``````




---

archive/issue_comments_574419.json:
```json
{
    "body": "Changing work_issues from \"rework on top of #29013\" to \"\"",
    "created_at": "2022-07-21T07:03:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29386#issuecomment-574419",
    "user": "https://github.com/mkoeppe"
}
```

Changing work_issues from "rework on top of #29013" to ""



---

archive/issue_comments_574420.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,7 +4,7 @@\n \n This ticket installs them by `sage-spkg` instead. This enables script packages to participate in the staged installs (`SAGE_DESTDIR`) and uninstallation mechanisms.\n \n-This is useful for #29082... to clean up #27870/#29003, which introduced files in `SAGE_LOCAL` that do not belong to any package and are never uninstalled.\n+This is useful for #29387 to clean up #27870/#29003/#29082, which introduced files in `SAGE_LOCAL` that do not belong to any package and are never uninstalled.\n \n We also make the decision whether `spkg-install` is generated from a template `spkg-install.in` or provided as is in the source tree orthogonal to the distinction `source=script` vs. `source=pip`.\n We simply generate `spkg-install` if `spkg-install.in` is present.\n``````\n",
    "created_at": "2022-07-21T07:05:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29386#issuecomment-574420",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,7 +4,7 @@
 
 This ticket installs them by `sage-spkg` instead. This enables script packages to participate in the staged installs (`SAGE_DESTDIR`) and uninstallation mechanisms.
 
-This is useful for #29082... to clean up #27870/#29003, which introduced files in `SAGE_LOCAL` that do not belong to any package and are never uninstalled.
+This is useful for #29387 to clean up #27870/#29003/#29082, which introduced files in `SAGE_LOCAL` that do not belong to any package and are never uninstalled.
 
 We also make the decision whether `spkg-install` is generated from a template `spkg-install.in` or provided as is in the source tree orthogonal to the distinction `source=script` vs. `source=pip`.
 We simply generate `spkg-install` if `spkg-install.in` is present.
``````




---

archive/issue_comments_574421.json:
```json
{
    "body": "<a id='comment:25'></a>\nRebased and dropped all clean/uninstall changes here because that is #29097",
    "created_at": "2022-07-21T07:06:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29386#issuecomment-574421",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'></a>
Rebased and dropped all clean/uninstall changes here because that is #29097



---

archive/issue_comments_574422.json:
```json
{
    "body": "Work_Issues: Move \"dummy script package\" code to sage-spkg",
    "created_at": "2022-07-21T07:19:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29386#issuecomment-574422",
    "user": "https://github.com/mkoeppe"
}
```

Work_Issues: Move "dummy script package" code to sage-spkg



---

archive/issue_events_084495.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-21T07:21:14Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29386#event-84495"
}
```



---

archive/issue_events_084496.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-21T07:21:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29386#event-84496"
}
```



---

archive/issue_events_084497.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/29386",
    "rename": {
        "from": "Install script packages via sage-spkg",
        "to": "Install script and pip packages via sage-spkg"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29386#event-84497"
}
```
