# Issue 29536: Make docker images from tox/GitHub CI workflow, regular Sage Docker images, gitpod, CoCalc interoperable

archive/issues_029299.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\n1. Adjust directory names to something that works for both cases ...\n   - `docker/Dockerfile` currently has:\n      - `SAGE_ROOT=/home/sage/sage`\n      - `SAGE_LOCAL=$SAGE_ROOT/local`\n   - Docker images built with tox/GH Actions (including Gitpod) and also `computop/sage` have:\n      - `SAGE_ROOT=/sage`\n      - `SAGE_LOCAL=/sage/local`\n   - **After this ticket:**\n      - `SAGE_ROOT=/sage`\n      - `SAGE_LOCAL=/opt/sage`\n   - CoCalc Docker image has:\n      - `SAGE_ROOT=/usr/local/sage`\n      - `SAGE_LOCAL=/usr/local/sage/local`\n\n2. #33851: Define a script package representing \"useful stuff to have on a Docker image\" \n\n3. Replace all `apt-get` in `docker/Dockerfile` by using a Docker image built using `build/bin/write-dockerfile` as the base image.\n\n4. By default, `docker/Dockerfile` would use `configure --without-system-...` a lot so that CI is done against \"the reference distribution\"\n\n\n5. Move `build/bin/write-dockerfile.sh` into `docker/`\n\n6. Add a mechanism (environment variable) to `tox -e docker...` to copy SAGE_LOCAL from a given Docker image.\n\n\n\nCC:  @kliem @dimpase @embray @saraedum @slel @fchapoton @tobiasdiez @williamstein @culler @NathanDunfield\n\nComponent: **docker**\n\nKeywords: **ci, ContinuousIntegration, sd109**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29536_\n\n",
    "created_at": "2020-04-20T01:41:38Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20docker",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/c%3A%20docker"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.9",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Make docker images from tox/GitHub CI workflow, regular Sage Docker images, gitpod, CoCalc interoperable",
    "type": "issue",
    "updated_at": "2023-01-07T21:39:40Z",
    "url": "https://github.com/sagemath/sage/issues/29536",
    "user": "https://github.com/mkoeppe"
}
```
<div id="comment:0"></div>

1. Adjust directory names to something that works for both cases ...
   - `docker/Dockerfile` currently has:
      - `SAGE_ROOT=/home/sage/sage`
      - `SAGE_LOCAL=$SAGE_ROOT/local`
   - Docker images built with tox/GH Actions (including Gitpod) and also `computop/sage` have:
      - `SAGE_ROOT=/sage`
      - `SAGE_LOCAL=/sage/local`
   - **After this ticket:**
      - `SAGE_ROOT=/sage`
      - `SAGE_LOCAL=/opt/sage`
   - CoCalc Docker image has:
      - `SAGE_ROOT=/usr/local/sage`
      - `SAGE_LOCAL=/usr/local/sage/local`

2. #33851: Define a script package representing "useful stuff to have on a Docker image" 

3. Replace all `apt-get` in `docker/Dockerfile` by using a Docker image built using `build/bin/write-dockerfile` as the base image.

4. By default, `docker/Dockerfile` would use `configure --without-system-...` a lot so that CI is done against "the reference distribution"


5. Move `build/bin/write-dockerfile.sh` into `docker/`

6. Add a mechanism (environment variable) to `tox -e docker...` to copy SAGE_LOCAL from a given Docker image.



CC:  @kliem @dimpase @embray @saraedum @slel @fchapoton @tobiasdiez @williamstein @culler @NathanDunfield

Component: **docker**

Keywords: **ci, ContinuousIntegration, sd109**

_Issue created by migration from https://trac.sagemath.org/ticket/29536_





---

archive/issue_events_403172.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-20T01:41:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20docker",
    "label_color": "0000b0",
    "label_name": "c: docker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29536#event-403172"
}
```



---

archive/issue_events_403173.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-20T01:41:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29536#event-403173"
}
```



---

archive/issue_events_403174.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-20T01:41:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29536#event-403174"
}
```



---

archive/issue_events_403175.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-20T01:41:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20docker",
    "label_color": "0000b0",
    "label_name": "c: docker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29536#event-403175"
}
```



---

archive/issue_events_403176.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-20T01:41:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "label": "https://github.com/sagemath/sage/labels/wishlist%20item",
    "label_color": "e81ff9",
    "label_name": "wishlist item",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29536#event-403176"
}
```



---

archive/issue_comments_464324.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,7 @@\n ... by adjusting directory names to something that works for both cases ...\n \n+`docker/Dockerfile`:\n+- `SAGE_ROOT=/home/sage/sage`\n+- `SAGE_LOCAL=$SAGE_ROOT/local`\n \n+\n``````\n",
    "created_at": "2020-04-21T02:44:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29536#issuecomment-464324",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,7 @@
 ... by adjusting directory names to something that works for both cases ...
 
+`docker/Dockerfile`:
+- `SAGE_ROOT=/home/sage/sage`
+- `SAGE_LOCAL=$SAGE_ROOT/local`
 
+
``````




---

archive/issue_comments_464325.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nby the way, we don't seem to have in docs an explanation regarding file shared between docker images and regular file system of the host system.",
    "created_at": "2020-04-26T08:35:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29536#issuecomment-464325",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:2" align="right">comment:2</div>

by the way, we don't seem to have in docs an explanation regarding file shared between docker images and regular file system of the host system.



---

archive/issue_comments_464326.json:
```json
{
    "body": "Changed keywords from **ci, ContinuousIntegration** to **ci, ContinuousIntegration, sd109**",
    "created_at": "2020-05-27T12:03:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29536#issuecomment-464326",
    "user": "https://github.com/mkoeppe"
}
```

Changed keywords from **ci, ContinuousIntegration** to **ci, ContinuousIntegration, sd109**



---

archive/issue_comments_464327.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,12 @@\n-... by adjusting directory names to something that works for both cases ...\n+1. adjust directory names to something that works for both cases ...\n \n-`docker/Dockerfile`:\n-- `SAGE_ROOT=/home/sage/sage`\n-- `SAGE_LOCAL=$SAGE_ROOT/local`\n+   `docker/Dockerfile`:\n+   - `SAGE_ROOT=/home/sage/sage`\n+   - `SAGE_LOCAL=$SAGE_ROOT/local`\n \n+2. Define a script package representing \"useful stuff to have on a Docker image\" (more than the `_recommended` package from #29557)\n \n+3. Replace all `apt-get` in `docker/Dockerfile` by using a Docker image built using `build/bin/write-dockerfile` as the base image.\n+\n+4. By default, `docker/Dockerfile` would use `configure --without-system-...` a lot so that CI is done against \"the reference distribution\"\n+\n``````\n",
    "created_at": "2020-05-28T00:25:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29536#issuecomment-464327",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,12 @@
-... by adjusting directory names to something that works for both cases ...
+1. adjust directory names to something that works for both cases ...
 
-`docker/Dockerfile`:
-- `SAGE_ROOT=/home/sage/sage`
-- `SAGE_LOCAL=$SAGE_ROOT/local`
+   `docker/Dockerfile`:
+   - `SAGE_ROOT=/home/sage/sage`
+   - `SAGE_LOCAL=$SAGE_ROOT/local`
 
+2. Define a script package representing "useful stuff to have on a Docker image" (more than the `_recommended` package from #29557)
 
+3. Replace all `apt-get` in `docker/Dockerfile` by using a Docker image built using `build/bin/write-dockerfile` as the base image.
+
+4. By default, `docker/Dockerfile` would use `configure --without-system-...` a lot so that CI is done against "the reference distribution"
+
``````




---

archive/issue_comments_464328.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI'm confused--should this say \"GitHub\" in the title or \"GitLab\"?  I don't know of any [GitHub](../wiki/GitHub) CI docker images.",
    "created_at": "2020-05-28T14:57:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29536#issuecomment-464328",
    "user": "https://github.com/embray"
}
```

<div id="comment:5" align="right">comment:5</div>

I'm confused--should this say "GitHub" in the title or "GitLab"?  I don't know of any [GitHub](../wiki/GitHub) CI docker images.



---

archive/issue_comments_464329.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@embray](#comment%3A5):\n> I'm confused--should this say \"GitHub\" in the title or \"GitLab\"?  I don't know of any [GitHub](../wiki/GitHub) CI docker images.\n\nplease see\nhttps://doc.sagemath.org/html/en/developer/index.html#testing-on-multiple-platforms\n\nwe now have a builder of docker images for multiple platforms, configurable, and by default hosted on github.",
    "created_at": "2020-05-28T15:26:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29536#issuecomment-464329",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@embray](#comment%3A5):
> I'm confused--should this say "GitHub" in the title or "GitLab"?  I don't know of any [GitHub](../wiki/GitHub) CI docker images.

please see
https://doc.sagemath.org/html/en/developer/index.html#testing-on-multiple-platforms

we now have a builder of docker images for multiple platforms, configurable, and by default hosted on github.



---

archive/issue_comments_464330.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,8 @@\n 1. adjust directory names to something that works for both cases ...\n \n-   `docker/Dockerfile`:\n-   - `SAGE_ROOT=/home/sage/sage`\n-   - `SAGE_LOCAL=$SAGE_ROOT/local`\n+   `docker/Dockerfile` currently has:\n+    - `SAGE_ROOT=/home/sage/sage`\n+    - `SAGE_LOCAL=$SAGE_ROOT/local`\n \n 2. Define a script package representing \"useful stuff to have on a Docker image\" (more than the `_recommended` package from #29557)\n \n``````\n",
    "created_at": "2020-05-29T17:48:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29536#issuecomment-464330",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,8 @@
 1. adjust directory names to something that works for both cases ...
 
-   `docker/Dockerfile`:
-   - `SAGE_ROOT=/home/sage/sage`
-   - `SAGE_LOCAL=$SAGE_ROOT/local`
+   `docker/Dockerfile` currently has:
+    - `SAGE_ROOT=/home/sage/sage`
+    - `SAGE_LOCAL=$SAGE_ROOT/local`
 
 2. Define a script package representing "useful stuff to have on a Docker image" (more than the `_recommended` package from #29557)
 
``````




---

archive/issue_events_403177.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-03T17:39:11Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29536#event-403177"
}
```



---

archive/issue_events_403178.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-03T17:39:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "label": "https://github.com/sagemath/sage/labels/wishlist%20item",
    "label_color": "e81ff9",
    "label_name": "wishlist item",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29536#event-403178"
}
```



---

archive/issue_comments_464331.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,3 +10,7 @@\n \n 4. By default, `docker/Dockerfile` would use `configure --without-system-...` a lot so that CI is done against \"the reference distribution\"\n \n+\n+5. Move `build/bin/write-dockerfile` into `docker/`\n+\n+\n``````\n",
    "created_at": "2020-09-04T18:01:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29536#issuecomment-464331",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,3 +10,7 @@
 
 4. By default, `docker/Dockerfile` would use `configure --without-system-...` a lot so that CI is done against "the reference distribution"
 
+
+5. Move `build/bin/write-dockerfile` into `docker/`
+
+
``````




---

archive/issue_events_403179.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29536#event-403179"
}
```



---

archive/issue_events_403180.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29536#event-403180"
}
```



---

archive/issue_comments_464332.json:
```json
{
    "body": "Dependencies: **#30960**",
    "created_at": "2020-11-25T20:00:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29536#issuecomment-464332",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#30960**



---

archive/issue_comments_464333.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nSage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-24T02:04:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29536#issuecomment-464333",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:14" align="right">comment:14</div>

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_403181.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T02:04:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29536#event-403181"
}
```



---

archive/issue_events_403182.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T02:04:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29536#event-403182"
}
```



---

archive/issue_events_403183.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-28T18:57:47Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "title_is": "Make docker images from tox/GitHub CI workflow and regular Sage Docker images interoperable",
    "title_was": "Make docker images from GitHub CI workflow and regular Sage Docker images interoperable",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29536#event-403183"
}
```



---

archive/issue_comments_464334.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,4 +13,6 @@\n \n 5. Move `build/bin/write-dockerfile` into `docker/`\n \n+6. Add a mechanism (environment variable) to `tox -e docker...` to copy SAGE_LOCAL from a given Docker image.\n \n+\n``````\n",
    "created_at": "2021-03-28T18:57:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29536#issuecomment-464334",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,4 +13,6 @@
 
 5. Move `build/bin/write-dockerfile` into `docker/`
 
+6. Add a mechanism (environment variable) to `tox -e docker...` to copy SAGE_LOCAL from a given Docker image.
 
+
``````




---

archive/issue_events_403184.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:16:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29536#event-403184"
}
```



---

archive/issue_events_403185.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:16:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29536#event-403185"
}
```



---

archive/issue_comments_464335.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nGiven that [GitLab](../wiki/GitLab) Docker build is broken for ages, can we arrange for GitHub-built docker images to be pushed to the main Docker repo,\nor at least create some sort of advertised Docker repo on [GitHub](../wiki/GitHub)?",
    "created_at": "2021-10-01T08:06:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29536#issuecomment-464335",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:17" align="right">comment:17</div>

Given that [GitLab](../wiki/GitLab) Docker build is broken for ages, can we arrange for GitHub-built docker images to be pushed to the main Docker repo,
or at least create some sort of advertised Docker repo on [GitHub](../wiki/GitHub)?



---

archive/issue_events_403186.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:11:26Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29536#event-403186"
}
```



---

archive/issue_events_403187.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:11:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29536#event-403187"
}
```



---

archive/issue_events_403188.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-27T21:44:42Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "title_is": "Make docker images from tox/GitHub CI workflow, regular Sage Docker images, and gitpod interoperable",
    "title_was": "Make docker images from tox/GitHub CI workflow and regular Sage Docker images interoperable",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29536#event-403188"
}
```



---

archive/issue_comments_464336.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -16,3 +16,5 @@\n 6. Add a mechanism (environment variable) to `tox -e docker...` to copy SAGE_LOCAL from a given Docker image.\n \n \n+\n+Gitpod - see #32749\n``````\n",
    "created_at": "2021-12-27T21:44:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29536#issuecomment-464336",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -16,3 +16,5 @@
 6. Add a mechanism (environment variable) to `tox -e docker...` to copy SAGE_LOCAL from a given Docker image.
 
 
+
+Gitpod - see #32749
``````




---

archive/issue_events_403189.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-07T00:07:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29536#event-403189"
}
```



---

archive/issue_events_403190.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-07T00:07:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29536#event-403190"
}
```



---

archive/issue_comments_464337.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nBikeshedding time! Let's pick `SAGE_ROOT`, `SAGE_LOCAL`. My proposal is in the ticket description. \n\n(The only important constraint for me is: Don't nest `SAGE_LOCAL` within `SAGE_ROOT` - for flexibility such as bind-mounting a new version of the source tree over `SAGE_ROOT` without hiding `SAGE_LOCAL`.)",
    "created_at": "2022-05-11T21:44:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29536#issuecomment-464337",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:22" align="right">comment:22</div>

Bikeshedding time! Let's pick `SAGE_ROOT`, `SAGE_LOCAL`. My proposal is in the ticket description. 

(The only important constraint for me is: Don't nest `SAGE_LOCAL` within `SAGE_ROOT` - for flexibility such as bind-mounting a new version of the source tree over `SAGE_ROOT` without hiding `SAGE_LOCAL`.)



---

archive/issue_comments_464338.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,20 +1,24 @@\n-1. adjust directory names to something that works for both cases ...\n-\n-   `docker/Dockerfile` currently has:\n-    - `SAGE_ROOT=/home/sage/sage`\n-    - `SAGE_LOCAL=$SAGE_ROOT/local`\n+1. Adjust directory names to something that works for both cases ...\n+   - `docker/Dockerfile` currently has:\n+      - `SAGE_ROOT=/home/sage/sage`\n+      - `SAGE_LOCAL=$SAGE_ROOT/local`\n+   - Docker images built with tox/GH Actions (including Gitpod) have:\n+      - `SAGE_ROOT=/sage`\n+      - `SAGE_LOCAL=/sage/local`\n+   - **After this ticket:**\n+      - `SAGE_ROOT=/sage`\n+      - `SAGE_LOCAL=/opt/sage`\n \n 2. Define a script package representing \"useful stuff to have on a Docker image\" (more than the `_recommended` package from #29557)\n+   - perhaps call it `_devtools`? \n \n 3. Replace all `apt-get` in `docker/Dockerfile` by using a Docker image built using `build/bin/write-dockerfile` as the base image.\n \n 4. By default, `docker/Dockerfile` would use `configure --without-system-...` a lot so that CI is done against \"the reference distribution\"\n \n \n-5. Move `build/bin/write-dockerfile` into `docker/`\n+5. Move `build/bin/write-dockerfile.sh` into `docker/`\n \n 6. Add a mechanism (environment variable) to `tox -e docker...` to copy SAGE_LOCAL from a given Docker image.\n \n \n-\n-Gitpod - see #32749\n``````\n",
    "created_at": "2022-05-11T21:44:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29536#issuecomment-464338",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,20 +1,24 @@
-1. adjust directory names to something that works for both cases ...
-
-   `docker/Dockerfile` currently has:
-    - `SAGE_ROOT=/home/sage/sage`
-    - `SAGE_LOCAL=$SAGE_ROOT/local`
+1. Adjust directory names to something that works for both cases ...
+   - `docker/Dockerfile` currently has:
+      - `SAGE_ROOT=/home/sage/sage`
+      - `SAGE_LOCAL=$SAGE_ROOT/local`
+   - Docker images built with tox/GH Actions (including Gitpod) have:
+      - `SAGE_ROOT=/sage`
+      - `SAGE_LOCAL=/sage/local`
+   - **After this ticket:**
+      - `SAGE_ROOT=/sage`
+      - `SAGE_LOCAL=/opt/sage`
 
 2. Define a script package representing "useful stuff to have on a Docker image" (more than the `_recommended` package from #29557)
+   - perhaps call it `_devtools`? 
 
 3. Replace all `apt-get` in `docker/Dockerfile` by using a Docker image built using `build/bin/write-dockerfile` as the base image.
 
 4. By default, `docker/Dockerfile` would use `configure --without-system-...` a lot so that CI is done against "the reference distribution"
 
 
-5. Move `build/bin/write-dockerfile` into `docker/`
+5. Move `build/bin/write-dockerfile.sh` into `docker/`
 
 6. Add a mechanism (environment variable) to `tox -e docker...` to copy SAGE_LOCAL from a given Docker image.
 
 
-
-Gitpod - see #32749
``````




---

archive/issue_comments_464339.json:
```json
{
    "body": "Changed dependencies from **#30960** to **#33740**",
    "created_at": "2022-05-11T21:46:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29536#issuecomment-464339",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#30960** to **#33740**



---

archive/issue_comments_464340.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,6 +11,7 @@\n \n 2. Define a script package representing \"useful stuff to have on a Docker image\" (more than the `_recommended` package from #29557)\n    - perhaps call it `_devtools`? \n+   - include the stuff added in #33740 to `environment-dev.yml`\n \n 3. Replace all `apt-get` in `docker/Dockerfile` by using a Docker image built using `build/bin/write-dockerfile` as the base image.\n \n``````\n",
    "created_at": "2022-05-11T21:46:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29536#issuecomment-464340",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,6 +11,7 @@
 
 2. Define a script package representing "useful stuff to have on a Docker image" (more than the `_recommended` package from #29557)
    - perhaps call it `_devtools`? 
+   - include the stuff added in #33740 to `environment-dev.yml`
 
 3. Replace all `apt-get` in `docker/Dockerfile` by using a Docker image built using `build/bin/write-dockerfile` as the base image.
 
``````




---

archive/issue_comments_464341.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,6 +12,7 @@\n 2. Define a script package representing \"useful stuff to have on a Docker image\" (more than the `_recommended` package from #29557)\n    - perhaps call it `_devtools`? \n    - include the stuff added in #33740 to `environment-dev.yml`\n+   - solve #27677, #29153\n \n 3. Replace all `apt-get` in `docker/Dockerfile` by using a Docker image built using `build/bin/write-dockerfile` as the base image.\n \n``````\n",
    "created_at": "2022-05-11T21:49:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29536#issuecomment-464341",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,6 +12,7 @@
 2. Define a script package representing "useful stuff to have on a Docker image" (more than the `_recommended` package from #29557)
    - perhaps call it `_devtools`? 
    - include the stuff added in #33740 to `environment-dev.yml`
+   - solve #27677, #29153
 
 3. Replace all `apt-get` in `docker/Dockerfile` by using a Docker image built using `build/bin/write-dockerfile` as the base image.
 
``````




---

archive/issue_comments_464342.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,7 +11,7 @@\n \n 2. Define a script package representing \"useful stuff to have on a Docker image\" (more than the `_recommended` package from #29557)\n    - perhaps call it `_devtools`? \n-   - include the stuff added in #33740 to `environment-dev.yml`\n+   - include the stuff added in #33740 to `environment-dev.yml` and #33671\n    - solve #27677, #29153\n \n 3. Replace all `apt-get` in `docker/Dockerfile` by using a Docker image built using `build/bin/write-dockerfile` as the base image.\n``````\n",
    "created_at": "2022-05-14T17:51:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29536#issuecomment-464342",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,7 +11,7 @@
 
 2. Define a script package representing "useful stuff to have on a Docker image" (more than the `_recommended` package from #29557)
    - perhaps call it `_devtools`? 
-   - include the stuff added in #33740 to `environment-dev.yml`
+   - include the stuff added in #33740 to `environment-dev.yml` and #33671
    - solve #27677, #29153
 
 3. Replace all `apt-get` in `docker/Dockerfile` by using a Docker image built using `build/bin/write-dockerfile` as the base image.
``````




---

archive/issue_comments_464343.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,7 +10,7 @@\n       - `SAGE_LOCAL=/opt/sage`\n \n 2. Define a script package representing \"useful stuff to have on a Docker image\" (more than the `_recommended` package from #29557)\n-   - perhaps call it `_devtools`? \n+   - perhaps call it `_develop`? \n    - include the stuff added in #33740 to `environment-dev.yml` and #33671\n    - solve #27677, #29153\n \n``````\n",
    "created_at": "2022-05-14T17:53:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29536#issuecomment-464343",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,7 +10,7 @@
       - `SAGE_LOCAL=/opt/sage`
 
 2. Define a script package representing "useful stuff to have on a Docker image" (more than the `_recommended` package from #29557)
-   - perhaps call it `_devtools`? 
+   - perhaps call it `_develop`? 
    - include the stuff added in #33740 to `environment-dev.yml` and #33671
    - solve #27677, #29153
 
``````




---

archive/issue_comments_464344.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,10 +9,7 @@\n       - `SAGE_ROOT=/sage`\n       - `SAGE_LOCAL=/opt/sage`\n \n-2. Define a script package representing \"useful stuff to have on a Docker image\" (more than the `_recommended` package from #29557)\n-   - perhaps call it `_develop`? \n-   - include the stuff added in #33740 to `environment-dev.yml` and #33671\n-   - solve #27677, #29153\n+2. #33851: Define a script package representing \"useful stuff to have on a Docker image\" \n \n 3. Replace all `apt-get` in `docker/Dockerfile` by using a Docker image built using `build/bin/write-dockerfile` as the base image.\n \n``````\n",
    "created_at": "2022-05-14T18:05:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29536#issuecomment-464344",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,10 +9,7 @@
       - `SAGE_ROOT=/sage`
       - `SAGE_LOCAL=/opt/sage`
 
-2. Define a script package representing "useful stuff to have on a Docker image" (more than the `_recommended` package from #29557)
-   - perhaps call it `_develop`? 
-   - include the stuff added in #33740 to `environment-dev.yml` and #33671
-   - solve #27677, #29153
+2. #33851: Define a script package representing "useful stuff to have on a Docker image" 
 
 3. Replace all `apt-get` in `docker/Dockerfile` by using a Docker image built using `build/bin/write-dockerfile` as the base image.
 
``````




---

archive/issue_comments_464345.json:
```json
{
    "body": "Branch: **[u/mkoeppe/make_docker_images_from_tox_github_ci_workflow__regular_sage_docker_images__and_gitpod_interoperable](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/make_docker_images_from_tox_github_ci_workflow__regular_sage_docker_images__and_gitpod_interoperable)**",
    "created_at": "2022-05-14T18:05:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29536#issuecomment-464345",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/make_docker_images_from_tox_github_ci_workflow__regular_sage_docker_images__and_gitpod_interoperable](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/make_docker_images_from_tox_github_ci_workflow__regular_sage_docker_images__and_gitpod_interoperable)**



---

archive/issue_comments_464346.json:
```json
{
    "body": "Commit: **[`58e112a`](https://github.com/sagemath/sagetrac-mirror/commit/58e112ab36ecec775199528c66e4b6e5535ad953)**",
    "created_at": "2022-05-14T18:20:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29536#issuecomment-464346",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`58e112a`](https://github.com/sagemath/sagetrac-mirror/commit/58e112ab36ecec775199528c66e4b6e5535ad953)**



---

archive/issue_comments_464347.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/10338a76ce5812db62f4ac72a17e6c6330f1fb8c\"><code>10338a7</code></a></td><td><code>Change ci as well</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0cf7334736fa9ec9fb2af8099722767fea2bdc0d\"><code>0cf7334</code></a></td><td><code>Add sage-setup as install-requires dep</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d2b14978335da5bfd8148266183a8abd5f32cce\"><code>6d2b149</code></a></td><td><code>Use relative paths to not install src package</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1dba3ba01d15153940f310a9e1c427f00d4460d6\"><code>1dba3ba</code></a></td><td><code>Maybe thats the correct shebang?</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c1b2fbf6b82fb388cbb143453b2eeaa428b604ff\"><code>c1b2fbf</code></a></td><td><code>Revert install_requires change</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad56ba3dab303edea7cdd2d449c69feaaf624beb\"><code>ad56ba3</code></a></td><td><code>Go back to two pip installs for now</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b42f5f51e716d6d01cb491699220ba42c674cd5c\"><code>b42f5f5</code></a></td><td><code>Readd how to use specific python version</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87f360ca7a4703b6c45ad3427363ccf4ae531b2c\"><code>87f360c</code></a></td><td><code>Readd name arg</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/01eb374c6949224b36b27b2472eceb44fa51e8f6\"><code>01eb374</code></a></td><td><code>Merge #33740</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/58e112ab36ecec775199528c66e4b6e5535ad953\"><code>58e112a</code></a></td><td><code>bootstrap-conda: Use script package _develop instead of hardcoded list of dev tools; remove unused RECOMMENDED</code></td></tr></table>\n",
    "created_at": "2022-05-14T18:20:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29536#issuecomment-464347",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/10338a76ce5812db62f4ac72a17e6c6330f1fb8c"><code>10338a7</code></a></td><td><code>Change ci as well</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0cf7334736fa9ec9fb2af8099722767fea2bdc0d"><code>0cf7334</code></a></td><td><code>Add sage-setup as install-requires dep</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d2b14978335da5bfd8148266183a8abd5f32cce"><code>6d2b149</code></a></td><td><code>Use relative paths to not install src package</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1dba3ba01d15153940f310a9e1c427f00d4460d6"><code>1dba3ba</code></a></td><td><code>Maybe thats the correct shebang?</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c1b2fbf6b82fb388cbb143453b2eeaa428b604ff"><code>c1b2fbf</code></a></td><td><code>Revert install_requires change</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad56ba3dab303edea7cdd2d449c69feaaf624beb"><code>ad56ba3</code></a></td><td><code>Go back to two pip installs for now</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b42f5f51e716d6d01cb491699220ba42c674cd5c"><code>b42f5f5</code></a></td><td><code>Readd how to use specific python version</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87f360ca7a4703b6c45ad3427363ccf4ae531b2c"><code>87f360c</code></a></td><td><code>Readd name arg</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/01eb374c6949224b36b27b2472eceb44fa51e8f6"><code>01eb374</code></a></td><td><code>Merge #33740</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/58e112ab36ecec775199528c66e4b6e5535ad953"><code>58e112a</code></a></td><td><code>bootstrap-conda: Use script package _develop instead of hardcoded list of dev tools; remove unused RECOMMENDED</code></td></tr></table>




---

archive/issue_comments_464348.json:
```json
{
    "body": "Changed commit from **[`58e112a`](https://github.com/sagemath/sagetrac-mirror/commit/58e112ab36ecec775199528c66e4b6e5535ad953)** to none",
    "created_at": "2022-05-14T20:19:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29536#issuecomment-464348",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[`58e112a`](https://github.com/sagemath/sagetrac-mirror/commit/58e112ab36ecec775199528c66e4b6e5535ad953)** to none



---

archive/issue_comments_464349.json:
```json
{
    "body": "Changed dependencies from **#33740** to none",
    "created_at": "2022-05-14T20:19:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29536#issuecomment-464349",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#33740** to none



---

archive/issue_comments_464350.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/make_docker_images_from_tox_github_ci_workflow__regular_sage_docker_images__and_gitpod_interoperable](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/make_docker_images_from_tox_github_ci_workflow__regular_sage_docker_images__and_gitpod_interoperable)** to none",
    "created_at": "2022-05-14T20:19:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29536#issuecomment-464350",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/mkoeppe/make_docker_images_from_tox_github_ci_workflow__regular_sage_docker_images__and_gitpod_interoperable](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/make_docker_images_from_tox_github_ci_workflow__regular_sage_docker_images__and_gitpod_interoperable)** to none



---

archive/issue_events_403191.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-17T18:31:43Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "title_is": "Make docker images from tox/GitHub CI workflow, regular Sage Docker images, gitpod, CoCalc interoperable",
    "title_was": "Make docker images from tox/GitHub CI workflow, regular Sage Docker images, and gitpod interoperable",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29536#event-403191"
}
```



---

archive/issue_comments_464351.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,6 +8,9 @@\n    - **After this ticket:**\n       - `SAGE_ROOT=/sage`\n       - `SAGE_LOCAL=/opt/sage`\n+   - CoCalc Docker image has:\n+      - `SAGE_ROOT=/usr/local/sage`\n+      - `SAGE_LOCAL=/usr/local/sage/local`\n \n 2. #33851: Define a script package representing \"useful stuff to have on a Docker image\" \n \n``````\n",
    "created_at": "2022-05-17T21:44:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29536#issuecomment-464351",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,6 +8,9 @@
    - **After this ticket:**
       - `SAGE_ROOT=/sage`
       - `SAGE_LOCAL=/opt/sage`
+   - CoCalc Docker image has:
+      - `SAGE_ROOT=/usr/local/sage`
+      - `SAGE_LOCAL=/usr/local/sage/local`
 
 2. #33851: Define a script package representing "useful stuff to have on a Docker image" 
 
``````




---

archive/issue_comments_464352.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,7 +2,7 @@\n    - `docker/Dockerfile` currently has:\n       - `SAGE_ROOT=/home/sage/sage`\n       - `SAGE_LOCAL=$SAGE_ROOT/local`\n-   - Docker images built with tox/GH Actions (including Gitpod) have:\n+   - Docker images built with tox/GH Actions (including Gitpod) and also `computop/sage` have:\n       - `SAGE_ROOT=/sage`\n       - `SAGE_LOCAL=/sage/local`\n    - **After this ticket:**\n``````\n",
    "created_at": "2022-05-17T23:05:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29536#issuecomment-464352",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,7 +2,7 @@
    - `docker/Dockerfile` currently has:
       - `SAGE_ROOT=/home/sage/sage`
       - `SAGE_LOCAL=$SAGE_ROOT/local`
-   - Docker images built with tox/GH Actions (including Gitpod) have:
+   - Docker images built with tox/GH Actions (including Gitpod) and also `computop/sage` have:
       - `SAGE_ROOT=/sage`
       - `SAGE_LOCAL=/sage/local`
    - **After this ticket:**
``````




---

archive/issue_events_403192.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-01T20:41:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29536#event-403192"
}
```



---

archive/issue_events_403193.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-01T20:41:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29536#event-403193"
}
```



---

archive/issue_events_403194.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2023-01-07T21:39:40Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29536#event-403194"
}
```



---

archive/issue_events_403195.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2023-01-07T21:39:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29536",
    "milestone_number": null,
    "milestone_title": "sage-9.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29536#event-403195"
}
```
