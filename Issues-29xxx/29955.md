# Issue 29955: Reduction from dancing links instance to MILP instance

archive/issues_029718.json:
```json
{
    "assignees": [],
    "body": "Following #29338, the proposed branch adds 2 new methods which allows what follows:\n\n```\nsage: from sage.combinat.matrices.dancing_links import dlx_solver\nsage: rows = [[0,1,2], [3,4,5], [0,1], [2,3,4,5], [0], [1,2,3,4,5]]\nsage: d = dlx_solver(rows)\nsage: d.one_solution()\n[1, 0]\nsage: d.one_solution_using_milp_solver()\n[0, 1]\nsage: d.one_solution_using_milp_solver('Gurobi')\n[2, 3]\nsage: d.one_solution_using_milp_solver('CPLEX')\n[2, 3]\netc.\n```\n\nThis is based on the new method:\n\n```\nsage: p,x = d.to_milp()\nsage: p\nBoolean Program (no objective, 6 variables, 6 constraints)\nsage: x\nMIPVariable of dimension 1 \n```\n\nDepends on #29338\n\nCC:  @slel\n\nComponent: **combinatorics**\n\nAuthor: **S\u00e9bastien Labb\u00e9**\n\nBranch/Commit: **[`da23ad1`](https://github.com/sagemath/sagetrac-mirror/commit/da23ad1d5973bea8e7df69800ca2dd0a4c647ea3)**\n\nReviewer: **Franco Saliola, Matthias Koeppe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29955_\n\n",
    "closed_at": "2020-07-08T19:33:21Z",
    "created_at": "2020-06-24T13:04:55Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Reduction from dancing links instance to MILP instance",
    "type": "issue",
    "updated_at": "2020-07-08T19:33:21Z",
    "url": "https://github.com/sagemath/sage/issues/29955",
    "user": "https://github.com/seblabbe"
}
```
Following #29338, the proposed branch adds 2 new methods which allows what follows:

```
sage: from sage.combinat.matrices.dancing_links import dlx_solver
sage: rows = [[0,1,2], [3,4,5], [0,1], [2,3,4,5], [0], [1,2,3,4,5]]
sage: d = dlx_solver(rows)
sage: d.one_solution()
[1, 0]
sage: d.one_solution_using_milp_solver()
[0, 1]
sage: d.one_solution_using_milp_solver('Gurobi')
[2, 3]
sage: d.one_solution_using_milp_solver('CPLEX')
[2, 3]
etc.
```

This is based on the new method:

```
sage: p,x = d.to_milp()
sage: p
Boolean Program (no objective, 6 variables, 6 constraints)
sage: x
MIPVariable of dimension 1 
```

Depends on #29338

CC:  @slel

Component: **combinatorics**

Author: **Sébastien Labbé**

Branch/Commit: **[`da23ad1`](https://github.com/sagemath/sagetrac-mirror/commit/da23ad1d5973bea8e7df69800ca2dd0a4c647ea3)**

Reviewer: **Franco Saliola, Matthias Koeppe**

_Issue created by migration from https://trac.sagemath.org/ticket/29955_





---

archive/issue_events_409319.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2020-06-24T13:04:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29955#event-409319"
}
```



---

archive/issue_events_409320.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2020-06-24T13:04:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29955#event-409320"
}
```



---

archive/issue_events_409321.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2020-06-24T13:04:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29955#event-409321"
}
```



---

archive/issue_events_409322.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2020-06-24T13:04:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29955#event-409322"
}
```



---

archive/issue_events_409323.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2020-06-24T13:06:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29955#event-409323"
}
```



---

archive/issue_comments_473841.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/542c3fcde6d838360d71a94ef88db1fde33f5662\"><code>542c3fc</code></a></td><td><code>29338: reduction from DLX to SAT</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2e97345c41638ae8be5d8d7cac2737300883dfcf\"><code>2e97345</code></a></td><td><code>29338:return None if no solution found</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8cf91eca49d83fae744d881c6be5be3858836962\"><code>8cf91ec</code></a></td><td><code>29955: reduction from DLX to MILP</code></td></tr></table>\n",
    "created_at": "2020-06-24T13:06:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29955#issuecomment-473841",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/542c3fcde6d838360d71a94ef88db1fde33f5662"><code>542c3fc</code></a></td><td><code>29338: reduction from DLX to SAT</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2e97345c41638ae8be5d8d7cac2737300883dfcf"><code>2e97345</code></a></td><td><code>29338:return None if no solution found</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8cf91eca49d83fae744d881c6be5be3858836962"><code>8cf91ec</code></a></td><td><code>29955: reduction from DLX to MILP</code></td></tr></table>




---

archive/issue_comments_473842.json:
```json
{
    "body": "Commit: **[`8cf91ec`](https://github.com/sagemath/sagetrac-mirror/commit/8cf91eca49d83fae744d881c6be5be3858836962)**",
    "created_at": "2020-06-24T13:06:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29955#issuecomment-473842",
    "user": "https://github.com/seblabbe"
}
```

Commit: **[`8cf91ec`](https://github.com/sagemath/sagetrac-mirror/commit/8cf91eca49d83fae744d881c6be5be3858836962)**



---

archive/issue_comments_473843.json:
```json
{
    "body": "Branch: **[u/slabbe/29955](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/29955)**",
    "created_at": "2020-06-24T13:06:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29955#issuecomment-473843",
    "user": "https://github.com/seblabbe"
}
```

Branch: **[u/slabbe/29955](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/29955)**



---

archive/issue_comments_473844.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b2f02481c09b7f54b9ad80aad5b9be493b16a22f\"><code>b2f0248</code></a></td><td><code>29955: making the MILP variable indices correspond to dlx row indices</code></td></tr></table>\n",
    "created_at": "2020-06-24T13:27:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29955#issuecomment-473844",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b2f02481c09b7f54b9ad80aad5b9be493b16a22f"><code>b2f0248</code></a></td><td><code>29955: making the MILP variable indices correspond to dlx row indices</code></td></tr></table>




---

archive/issue_comments_473845.json:
```json
{
    "body": "Changed commit from **[`8cf91ec`](https://github.com/sagemath/sagetrac-mirror/commit/8cf91eca49d83fae744d881c6be5be3858836962)** to **[`b2f0248`](https://github.com/sagemath/sagetrac-mirror/commit/b2f02481c09b7f54b9ad80aad5b9be493b16a22f)**",
    "created_at": "2020-06-24T13:27:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29955#issuecomment-473845",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8cf91ec`](https://github.com/sagemath/sagetrac-mirror/commit/8cf91eca49d83fae744d881c6be5be3858836962)** to **[`b2f0248`](https://github.com/sagemath/sagetrac-mirror/commit/b2f02481c09b7f54b9ad80aad5b9be493b16a22f)**



---

archive/issue_comments_473846.json:
```json
{
    "body": "Author: **S\u00e9bastien Labb\u00e9**",
    "created_at": "2020-06-24T13:37:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29955#issuecomment-473846",
    "user": "https://github.com/seblabbe"
}
```

Author: **Sébastien Labbé**



---

archive/issue_comments_473847.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI found two issues with the doctests. I'll post them as two separate comments.\n\nFirst, there is a doctest error (all the variables in the constraints are named `x_` instead of `x_0`, `x_1`, etc.).\n\n```\nRunning doctests with ID 2020-06-24-13-55-51-1a738b74.\nGit branch: u/slabbe/29955\nUsing --optional=build,cmake,cryptominisat,dochtml,glucose,pycosat,sage,sage_numerical_backends_gurobi\nDoctesting 1 file.\nsage -t --warn-long 44.8 dancing_links.pyx\n**********************************************************************\nFile \"dancing_links.pyx\", line 1037, in sage.combinat.matrices.dancing_links.dancing_linksWrapper.to_milp_solver\nFailed example:\n    p.show()\nExpected:\n    Maximization:\n    <BLANKLINE>\n    <BLANKLINE>\n    Constraints:\n      one 1 in 0-th column: 1.0 <= x_0 + x_1 <= 1.0\n      one 1 in 1-th column: 1.0 <= x_0 + x_2 <= 1.0\n      one 1 in 2-th column: 1.0 <= x_0 + x_1 <= 1.0\n      one 1 in 3-th column: 1.0 <= x_3 <= 1.0\n    Variables:\n      x_0 is a boolean variable (min=0.0, max=1.0)\n      x_1 is a boolean variable (min=0.0, max=1.0)\n      x_2 is a boolean variable (min=0.0, max=1.0)\n      x_3 is a boolean variable (min=0.0, max=1.0)\nGot:\n    Maximization:\n    <BLANKLINE>\n    <BLANKLINE>\n    Constraints:\n      one 1 in 0-th column: 1.0 <= x_ + x_ <= 1.0\n      one 1 in 1-th column: 1.0 <= x_ + x_ <= 1.0\n      one 1 in 2-th column: 1.0 <= x_ + x_ <= 1.0\n      one 1 in 3-th column: 1.0 <= x_ <= 1.0\n    Variables:\n      x_ = x_0 is a boolean variable (min=0.0, max=1.0)\n      x_ = x_1 is a boolean variable (min=0.0, max=1.0)\n      x_ = x_2 is a boolean variable (min=0.0, max=1.0)\n      x_ = x_3 is a boolean variable (min=0.0, max=1.0)\n**********************************************************************\n1 item had failures:\n   1 of   8 in sage.combinat.matrices.dancing_links.dancing_linksWrapper.to_milp_solver\n    [250 tests, 1 failure, 3.73 s]\n----------------------------------------------------------------------\nsage -t --warn-long 44.8 dancing_links.pyx  # 1 doctest failed\n----------------------------------------------------------------------\nTotal time for all tests: 3.8 seconds\n    cpu time: 3.2 seconds\n    cumulative wall time: 3.7 seconds\n```",
    "created_at": "2020-06-24T18:02:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29955#issuecomment-473847",
    "user": "https://github.com/saliola"
}
```

<div id="comment:4" align="right">comment:4</div>

I found two issues with the doctests. I'll post them as two separate comments.

First, there is a doctest error (all the variables in the constraints are named `x_` instead of `x_0`, `x_1`, etc.).

```
Running doctests with ID 2020-06-24-13-55-51-1a738b74.
Git branch: u/slabbe/29955
Using --optional=build,cmake,cryptominisat,dochtml,glucose,pycosat,sage,sage_numerical_backends_gurobi
Doctesting 1 file.
sage -t --warn-long 44.8 dancing_links.pyx
**********************************************************************
File "dancing_links.pyx", line 1037, in sage.combinat.matrices.dancing_links.dancing_linksWrapper.to_milp_solver
Failed example:
    p.show()
Expected:
    Maximization:
    <BLANKLINE>
    <BLANKLINE>
    Constraints:
      one 1 in 0-th column: 1.0 <= x_0 + x_1 <= 1.0
      one 1 in 1-th column: 1.0 <= x_0 + x_2 <= 1.0
      one 1 in 2-th column: 1.0 <= x_0 + x_1 <= 1.0
      one 1 in 3-th column: 1.0 <= x_3 <= 1.0
    Variables:
      x_0 is a boolean variable (min=0.0, max=1.0)
      x_1 is a boolean variable (min=0.0, max=1.0)
      x_2 is a boolean variable (min=0.0, max=1.0)
      x_3 is a boolean variable (min=0.0, max=1.0)
Got:
    Maximization:
    <BLANKLINE>
    <BLANKLINE>
    Constraints:
      one 1 in 0-th column: 1.0 <= x_ + x_ <= 1.0
      one 1 in 1-th column: 1.0 <= x_ + x_ <= 1.0
      one 1 in 2-th column: 1.0 <= x_ + x_ <= 1.0
      one 1 in 3-th column: 1.0 <= x_ <= 1.0
    Variables:
      x_ = x_0 is a boolean variable (min=0.0, max=1.0)
      x_ = x_1 is a boolean variable (min=0.0, max=1.0)
      x_ = x_2 is a boolean variable (min=0.0, max=1.0)
      x_ = x_3 is a boolean variable (min=0.0, max=1.0)
**********************************************************************
1 item had failures:
   1 of   8 in sage.combinat.matrices.dancing_links.dancing_linksWrapper.to_milp_solver
    [250 tests, 1 failure, 3.73 s]
----------------------------------------------------------------------
sage -t --warn-long 44.8 dancing_links.pyx  # 1 doctest failed
----------------------------------------------------------------------
Total time for all tests: 3.8 seconds
    cpu time: 3.2 seconds
    cumulative wall time: 3.7 seconds
```



---

archive/issue_comments_473848.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nSecond, the answer I get from the following doctest does not agree with the answer specified in the doctest.\n\n```\nsage: from sage.combinat.matrices.dancing_links import dlx_solver\nsage: rows = [[0,1,2], [0,2], [1], [3]]\nsage: d = dlx_solver(rows)\nsage: d.to_milp_solver(\"gurobi\")\n(Boolean Program (no objective, 4 variables, 4 constraints),\n MIPVariable of dimension 1)\n```\nThe doctest says the above should be:\n\n```\nsage: d.to_milp_solver('gurobi')   # optional gurobi sage_numerical_backends_gurobi\nBoolean Program (no objective, 4 variables, 4 constraints)\n```\nI'm not sure why this error is not caught by the doctest system.",
    "created_at": "2020-06-24T18:07:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29955#issuecomment-473848",
    "user": "https://github.com/saliola"
}
```

<div id="comment:5" align="right">comment:5</div>

Second, the answer I get from the following doctest does not agree with the answer specified in the doctest.

```
sage: from sage.combinat.matrices.dancing_links import dlx_solver
sage: rows = [[0,1,2], [0,2], [1], [3]]
sage: d = dlx_solver(rows)
sage: d.to_milp_solver("gurobi")
(Boolean Program (no objective, 4 variables, 4 constraints),
 MIPVariable of dimension 1)
```
The doctest says the above should be:

```
sage: d.to_milp_solver('gurobi')   # optional gurobi sage_numerical_backends_gurobi
Boolean Program (no objective, 4 variables, 4 constraints)
```
I'm not sure why this error is not caught by the doctest system.



---

archive/issue_comments_473849.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@saliola](#comment%3A5):\n> I'm not sure why this error is not caught by the doctest system.\n\nI just learned about the `--show-skipped` option for `sage -t`. Since `gurobi` is not a sage optional package, I had to specify it explicitly with the `---optional` command. If I run \n\n```\nsage -t --optional=sage,gurobi,sage_numerical_backends_gurobi dancing_links.pyx\n```\nthen I see two doctest failures.",
    "created_at": "2020-06-24T18:14:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29955#issuecomment-473849",
    "user": "https://github.com/saliola"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@saliola](#comment%3A5):
> I'm not sure why this error is not caught by the doctest system.

I just learned about the `--show-skipped` option for `sage -t`. Since `gurobi` is not a sage optional package, I had to specify it explicitly with the `---optional` command. If I run 

```
sage -t --optional=sage,gurobi,sage_numerical_backends_gurobi dancing_links.pyx
```
then I see two doctest failures.



---

archive/issue_comments_473850.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI made some changes to address the second doctest problem above and I've updated the branch. Hopefully I didn't mess up....\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/90c4d47cccbb4ad31dd4835ddf3842ee0d694cfe\"><code>90c4d47</code></a></td><td><code>cleanup optional tags & correct doctest output</code></td></tr></table>\n",
    "created_at": "2020-06-24T18:29:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29955#issuecomment-473850",
    "user": "https://github.com/saliola"
}
```

<div id="comment:7" align="right">comment:7</div>

I made some changes to address the second doctest problem above and I've updated the branch. Hopefully I didn't mess up....

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/90c4d47cccbb4ad31dd4835ddf3842ee0d694cfe"><code>90c4d47</code></a></td><td><code>cleanup optional tags & correct doctest output</code></td></tr></table>




---

archive/issue_comments_473851.json:
```json
{
    "body": "Changed commit from **[`b2f0248`](https://github.com/sagemath/sagetrac-mirror/commit/b2f02481c09b7f54b9ad80aad5b9be493b16a22f)** to **[`90c4d47`](https://github.com/sagemath/sagetrac-mirror/commit/90c4d47cccbb4ad31dd4835ddf3842ee0d694cfe)**",
    "created_at": "2020-06-24T18:29:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29955#issuecomment-473851",
    "user": "https://github.com/saliola"
}
```

Changed commit from **[`b2f0248`](https://github.com/sagemath/sagetrac-mirror/commit/b2f02481c09b7f54b9ad80aad5b9be493b16a22f)** to **[`90c4d47`](https://github.com/sagemath/sagetrac-mirror/commit/90c4d47cccbb4ad31dd4835ddf3842ee0d694cfe)**



---

archive/issue_comments_473852.json:
```json
{
    "body": "Changed branch from **[u/slabbe/29955](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/29955)** to **[public/29955](https://github.com/sagemath/sagetrac-mirror/tree/public/29955)**",
    "created_at": "2020-06-24T18:29:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29955#issuecomment-473852",
    "user": "https://github.com/saliola"
}
```

Changed branch from **[u/slabbe/29955](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/29955)** to **[public/29955](https://github.com/sagemath/sagetrac-mirror/tree/public/29955)**



---

archive/issue_comments_473853.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nOK, it seems I was able to correctly create and set a public branch for this ticket. Any ideas on what to do for the doctest for `p.show()`?",
    "created_at": "2020-06-24T18:49:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29955#issuecomment-473853",
    "user": "https://github.com/saliola"
}
```

<div id="comment:8" align="right">comment:8</div>

OK, it seems I was able to correctly create and set a public branch for this ticket. Any ideas on what to do for the doctest for `p.show()`?



---

archive/issue_comments_473854.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nYes indeed, I wanted to write\n\n```\nsage: p,x = d.to_milp_solver(solver='Gurobi')\nsage: p\nBoolean Program (no objective, 6 variables, 6 constraints)\nsage: x\nMIPVariable of dimension 1 \n```\n...as you fixed it is okay as well.\n\nOn another machine running a more recent version of Sage, with the current public branch, I get:\n\n```\n$ sage -version\nSageMath version 9.2.beta1, Release Date: 2020-06-13\n$ sage -bt --optional=sage,optional,external --show-skipped src/sage/combinat/matrices/dancing_links.pyx\n...\nsage -t src/sage/combinat/matrices/dancing_links.pyx\n    3 gurobi tests not run\n    0 tests not run because we ran out of time\n    [250 tests, 2.26 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nExternal software detected for doctesting: \n```\n\n(The licence of my Gurobi licence just expired. I need to renew it.)\n\nSo the error with the `x_` in the `p.show()` is weird. Are you able to reproduce it on another machine?",
    "created_at": "2020-06-24T19:14:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29955#issuecomment-473854",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:9" align="right">comment:9</div>

Yes indeed, I wanted to write

```
sage: p,x = d.to_milp_solver(solver='Gurobi')
sage: p
Boolean Program (no objective, 6 variables, 6 constraints)
sage: x
MIPVariable of dimension 1 
```
...as you fixed it is okay as well.

On another machine running a more recent version of Sage, with the current public branch, I get:

```
$ sage -version
SageMath version 9.2.beta1, Release Date: 2020-06-13
$ sage -bt --optional=sage,optional,external --show-skipped src/sage/combinat/matrices/dancing_links.pyx
...
sage -t src/sage/combinat/matrices/dancing_links.pyx
    3 gurobi tests not run
    0 tests not run because we ran out of time
    [250 tests, 2.26 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
External software detected for doctesting: 
```

(The licence of my Gurobi licence just expired. I need to renew it.)

So the error with the `x_` in the `p.show()` is weird. Are you able to reproduce it on another machine?



---

archive/issue_comments_473855.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI was using sage version 9.1rc1 because that is what the branch switched too. I'll update to the develop version and test again.",
    "created_at": "2020-06-24T19:52:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29955#issuecomment-473855",
    "user": "https://github.com/saliola"
}
```

<div id="comment:10" align="right">comment:10</div>

I was using sage version 9.1rc1 because that is what the branch switched too. I'll update to the develop version and test again.



---

archive/issue_comments_473856.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI figured out what is causing the error with the `x_` in the `p.show()` command. It is somehow caused by the `sage_numerical_backends_gurobi` optional package. The error is triggered as soon as this package is installed. I am not sure how to report this problem.",
    "created_at": "2020-06-25T17:14:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29955#issuecomment-473856",
    "user": "https://github.com/saliola"
}
```

<div id="comment:11" align="right">comment:11</div>

I figured out what is causing the error with the `x_` in the `p.show()` command. It is somehow caused by the `sage_numerical_backends_gurobi` optional package. The error is triggered as soon as this package is installed. I am not sure how to report this problem.



---

archive/issue_events_409324.json:
```json
{
    "actor": "https://github.com/saliola",
    "created_at": "2020-06-25T17:33:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29955#event-409324"
}
```



---

archive/issue_events_409325.json:
```json
{
    "actor": "https://github.com/saliola",
    "created_at": "2020-06-25T17:33:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29955#event-409325"
}
```



---

archive/issue_comments_473857.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThank you so much for this S\u00e9bastien!",
    "created_at": "2020-06-25T17:33:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29955#issuecomment-473857",
    "user": "https://github.com/saliola"
}
```

<div id="comment:13" align="right">comment:13</div>

Thank you so much for this Sébastien!



---

archive/issue_comments_473858.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@saliola](#comment%3A11):\n> I figured out what is causing the error with the `x_` in the `p.show()` command. It is somehow caused by the `sage_numerical_backends_gurobi` optional package. The error is triggered as soon as this package is installed. I am not sure how to report this problem.\n\nUpstream is https://github.com/mkoeppe/sage-numerical-backends-gurobi",
    "created_at": "2020-06-25T18:36:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29955#issuecomment-473858",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@saliola](#comment%3A11):
> I figured out what is causing the error with the `x_` in the `p.show()` command. It is somehow caused by the `sage_numerical_backends_gurobi` optional package. The error is triggered as soon as this package is installed. I am not sure how to report this problem.

Upstream is https://github.com/mkoeppe/sage-numerical-backends-gurobi



---

archive/issue_comments_473859.json:
```json
{
    "body": "Reviewer: **Franco Saliola**",
    "created_at": "2020-06-25T19:37:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29955#issuecomment-473859",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Franco Saliola**



---

archive/issue_comments_473860.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nThank you for your review Franco!",
    "created_at": "2020-06-25T20:02:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29955#issuecomment-473860",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:16" align="right">comment:16</div>

Thank you for your review Franco!



---

archive/issue_comments_473861.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nThank you. I created an issue upstream with an example that does not require this ticket; see https://github.com/mkoeppe/sage-numerical-backends-gurobi/issues/2",
    "created_at": "2020-06-25T20:04:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29955#issuecomment-473861",
    "user": "https://github.com/saliola"
}
```

<div id="comment:17" align="right">comment:17</div>

Thank you. I created an issue upstream with an example that does not require this ticket; see https://github.com/mkoeppe/sage-numerical-backends-gurobi/issues/2



---

archive/issue_comments_473862.json:
```json
{
    "body": "Changed reviewer from **Franco Saliola** to none",
    "created_at": "2020-06-25T20:04:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29955#issuecomment-473862",
    "user": "https://github.com/saliola"
}
```

Changed reviewer from **Franco Saliola** to none



---

archive/issue_comments_473863.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@mkoeppe](#comment%3A14):\n\nI just created \nhttps://github.com/mkoeppe/sage-numerical-backends-gurobi/issues/3",
    "created_at": "2020-06-25T20:06:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29955#issuecomment-473863",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@mkoeppe](#comment%3A14):

I just created 
https://github.com/mkoeppe/sage-numerical-backends-gurobi/issues/3



---

archive/issue_comments_473864.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\noups, we did the same thing at the same time!",
    "created_at": "2020-06-25T20:07:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29955#issuecomment-473864",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:19" align="right">comment:19</div>

oups, we did the same thing at the same time!



---

archive/issue_comments_473865.json:
```json
{
    "body": "Reviewer: **Franco Saliola**",
    "created_at": "2020-06-25T20:09:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29955#issuecomment-473865",
    "user": "https://github.com/seblabbe"
}
```

Reviewer: **Franco Saliola**



---

archive/issue_comments_473866.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,7 +10,7 @@\n [0, 1]\n sage: d.one_solution_using_milp_solver('Gurobi')\n [2, 3]\n-sage: d.one_solution_using_milp_solver('CLPEX')\n+sage: d.one_solution_using_milp_solver('CPLEX')\n [2, 3]\n etc.\n ```\n``````\n",
    "created_at": "2020-06-26T17:45:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29955#issuecomment-473866",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,7 +10,7 @@
 [0, 1]
 sage: d.one_solution_using_milp_solver('Gurobi')
 [2, 3]
-sage: d.one_solution_using_milp_solver('CLPEX')
+sage: d.one_solution_using_milp_solver('CPLEX')
 [2, 3]
 etc.
 ```
``````




---

archive/issue_comments_473867.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nA quick comment. I think `to_milp_solver` should be renamed to `to_milp`. In terminology of `sage.numerical.mip`, \"solver\" would be an instance of a subclass of `GenericBackend`.",
    "created_at": "2020-06-26T18:13:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29955#issuecomment-473867",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:22" align="right">comment:22</div>

A quick comment. I think `to_milp_solver` should be renamed to `to_milp`. In terminology of `sage.numerical.mip`, "solver" would be an instance of a subclass of `GenericBackend`.



---

archive/issue_comments_473868.json:
```json
{
    "body": "Changed commit from **[`90c4d47`](https://github.com/sagemath/sagetrac-mirror/commit/90c4d47cccbb4ad31dd4835ddf3842ee0d694cfe)** to **[`da23ad1`](https://github.com/sagemath/sagetrac-mirror/commit/da23ad1d5973bea8e7df69800ca2dd0a4c647ea3)**",
    "created_at": "2020-06-28T19:32:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29955#issuecomment-473868",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`90c4d47`](https://github.com/sagemath/sagetrac-mirror/commit/90c4d47cccbb4ad31dd4835ddf3842ee0d694cfe)** to **[`da23ad1`](https://github.com/sagemath/sagetrac-mirror/commit/da23ad1d5973bea8e7df69800ca2dd0a4c647ea3)**



---

archive/issue_events_409326.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2020-06-28T19:32:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29955#event-409326"
}
```



---

archive/issue_events_409327.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2020-06-28T19:32:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29955#event-409327"
}
```



---

archive/issue_comments_473869.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/da23ad1d5973bea8e7df69800ca2dd0a4c647ea3\"><code>da23ad1</code></a></td><td><code>29955:to_milp_solver -> to_milp</code></td></tr></table>\n",
    "created_at": "2020-06-28T19:32:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29955#issuecomment-473869",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/da23ad1d5973bea8e7df69800ca2dd0a4c647ea3"><code>da23ad1</code></a></td><td><code>29955:to_milp_solver -> to_milp</code></td></tr></table>




---

archive/issue_comments_473870.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nI agree. I just did a commit. Hoping that Volker did not started to merge that ticket while it was on positive review status. Needs review.",
    "created_at": "2020-06-28T19:33:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29955#issuecomment-473870",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:24" align="right">comment:24</div>

I agree. I just did a commit. Hoping that Volker did not started to merge that ticket while it was on positive review status. Needs review.



---

archive/issue_comments_473871.json:
```json
{
    "body": "Changed reviewer from **Franco Saliola** to **Franco Saliola, Matthias Koeppe**",
    "created_at": "2020-06-28T20:56:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29955#issuecomment-473871",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **Franco Saliola** to **Franco Saliola, Matthias Koeppe**



---

archive/issue_events_409328.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-06-28T20:56:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29955#event-409328"
}
```



---

archive/issue_events_409329.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-06-28T20:56:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29955#event-409329"
}
```



---

archive/issue_comments_473872.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -18,7 +18,7 @@\n This is based on the new method:\n \n ```\n-sage: p,x = d.to_milp_solver()\n+sage: p,x = d.to_milp()\n sage: p\n Boolean Program (no objective, 6 variables, 6 constraints)\n sage: x\n``````\n",
    "created_at": "2020-06-29T08:17:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29955#issuecomment-473872",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -18,7 +18,7 @@
 This is based on the new method:
 
 ```
-sage: p,x = d.to_milp_solver()
+sage: p,x = d.to_milp()
 sage: p
 Boolean Program (no objective, 6 variables, 6 constraints)
 sage: x
``````




---

archive/issue_events_409330.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-07-08T19:33:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29955#event-409330"
}
```



---

archive/issue_events_409331.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "7d65facffb2f976d2d6312669829f133d83f957a",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-07-08T19:33:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29955#event-409331"
}
```



---

archive/issue_comments_473873.json:
```json
{
    "body": "Changed branch from **[public/29955](https://github.com/sagemath/sagetrac-mirror/tree/public/29955)** to **[`da23ad1`](https://github.com/sagemath/sagetrac-mirror/commit/da23ad1d5973bea8e7df69800ca2dd0a4c647ea3)**",
    "created_at": "2020-07-08T19:33:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29955#issuecomment-473873",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/29955](https://github.com/sagemath/sagetrac-mirror/tree/public/29955)** to **[`da23ad1`](https://github.com/sagemath/sagetrac-mirror/commit/da23ad1d5973bea8e7df69800ca2dd0a4c647ea3)**
