# Issue 29300: Latte test failure

archive/issues_029063.json:
```json
{
    "body": "I'm hitting this now, though there seems to be no change that caused it. Possibly random:\n\n```\n**********************************************************************\nFile \"src/sage/interfaces/latte.py\", line 70, in sage.interfaces.latte.count\nFailed example:\n    print(count(cddin, **opts))  # optional - latte_int\nExpected:\n    x[0]^2*x[1]^(-2)*x[2]^(-2)/((1-x[1])*(1-x[2])*(1-x[0]^(-1)))\n     + x[0]^(-2)*x[1]^(-2)*x[2]^(-2)/((1-x[1])*(1-x[2])*(1-x[0]))\n     + x[0]^2*x[1]^(-2)*x[2]^2/((1-x[1])*(1-x[0]^(-1))*(1-x[2]^(-1)))\n     + x[0]^(-2)*x[1]^(-2)*x[2]^2/((1-x[1])*(1-x[0])*(1-x[2]^(-1)))\n     + x[0]^2*x[1]^2*x[2]^(-2)/((1-x[2])*(1-x[0]^(-1))*(1-x[1]^(-1)))\n     + x[0]^(-2)*x[1]^2*x[2]^(-2)/((1-x[2])*(1-x[0])*(1-x[1]^(-1)))\n     + x[0]^2*x[1]^2*x[2]^2/((1-x[0]^(-1))*(1-x[1]^(-1))*(1-x[2]^(-1)))\n     + x[0]^(-2)*x[1]^2*x[2]^2/((1-x[0])*(1-x[1]^(-1))*(1-x[2]^(-1)))\nGot:\n    x[0]^2*x[1]^(-2)*x[2]^(-2)/((1-x[1])*(1-x[2])*(1-x[0]^(-1)))\n     + x[0]^(-2)*x[1]^(-2)*x[2]^(-2)/((1-x[1])*(1-x[2])*(1-x[0]))\n     + x[0]^2*x[1]^(-2)*x[2]^2/((1-x[1])*(1-x[2]^(-1))*(1-x[0]^(-1)))\n     + x[0]^(-2)*x[1]^(-2)*x[2]^2/((1-x[1])*(1-x[0])*(1-x[2]^(-1)))\n     + x[0]^2*x[1]^2*x[2]^(-2)/((1-x[2])*(1-x[1]^(-1))*(1-x[0]^(-1)))\n     + x[0]^(-2)*x[1]^2*x[2]^(-2)/((1-x[2])*(1-x[0])*(1-x[1]^(-1)))\n     + x[0]^2*x[1]^2*x[2]^2/((1-x[2]^(-1))*(1-x[1]^(-1))*(1-x[0]^(-1)))\n     + x[0]^(-2)*x[1]^2*x[2]^2/((1-x[0])*(1-x[2]^(-1))*(1-x[1]^(-1)))\n    <BLANKLINE>\n**********************************************************************\n1 item had failures:\n   1 of  19 in sage.interfaces.latte.count\n    [58 tests, 1 failure, 0.80 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/interfaces/latte.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\n\nCC:  @seblabbe @kliem\n\nKeywords: random_fail\n\nBranch/Commit: 2f36788f5606d6c325adf0dd46b019895b1d253d\n\nReviewer: Volker Braun\n\nAuthor: S\u00e9bastien Labb\u00e9\n\nDependencies: #29200\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29300\n\n",
    "closed_at": "2020-03-10T23:27:20Z",
    "created_at": "2020-03-08T14:17:27Z",
    "labels": [
        "component: packages: optional",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "Latte test failure",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29300",
    "user": "https://github.com/vbraun"
}
```
I'm hitting this now, though there seems to be no change that caused it. Possibly random:

```
**********************************************************************
File "src/sage/interfaces/latte.py", line 70, in sage.interfaces.latte.count
Failed example:
    print(count(cddin, **opts))  # optional - latte_int
Expected:
    x[0]^2*x[1]^(-2)*x[2]^(-2)/((1-x[1])*(1-x[2])*(1-x[0]^(-1)))
     + x[0]^(-2)*x[1]^(-2)*x[2]^(-2)/((1-x[1])*(1-x[2])*(1-x[0]))
     + x[0]^2*x[1]^(-2)*x[2]^2/((1-x[1])*(1-x[0]^(-1))*(1-x[2]^(-1)))
     + x[0]^(-2)*x[1]^(-2)*x[2]^2/((1-x[1])*(1-x[0])*(1-x[2]^(-1)))
     + x[0]^2*x[1]^2*x[2]^(-2)/((1-x[2])*(1-x[0]^(-1))*(1-x[1]^(-1)))
     + x[0]^(-2)*x[1]^2*x[2]^(-2)/((1-x[2])*(1-x[0])*(1-x[1]^(-1)))
     + x[0]^2*x[1]^2*x[2]^2/((1-x[0]^(-1))*(1-x[1]^(-1))*(1-x[2]^(-1)))
     + x[0]^(-2)*x[1]^2*x[2]^2/((1-x[0])*(1-x[1]^(-1))*(1-x[2]^(-1)))
Got:
    x[0]^2*x[1]^(-2)*x[2]^(-2)/((1-x[1])*(1-x[2])*(1-x[0]^(-1)))
     + x[0]^(-2)*x[1]^(-2)*x[2]^(-2)/((1-x[1])*(1-x[2])*(1-x[0]))
     + x[0]^2*x[1]^(-2)*x[2]^2/((1-x[1])*(1-x[2]^(-1))*(1-x[0]^(-1)))
     + x[0]^(-2)*x[1]^(-2)*x[2]^2/((1-x[1])*(1-x[0])*(1-x[2]^(-1)))
     + x[0]^2*x[1]^2*x[2]^(-2)/((1-x[2])*(1-x[1]^(-1))*(1-x[0]^(-1)))
     + x[0]^(-2)*x[1]^2*x[2]^(-2)/((1-x[2])*(1-x[0])*(1-x[1]^(-1)))
     + x[0]^2*x[1]^2*x[2]^2/((1-x[2]^(-1))*(1-x[1]^(-1))*(1-x[0]^(-1)))
     + x[0]^(-2)*x[1]^2*x[2]^2/((1-x[0])*(1-x[2]^(-1))*(1-x[1]^(-1)))
    <BLANKLINE>
**********************************************************************
1 item had failures:
   1 of  19 in sage.interfaces.latte.count
    [58 tests, 1 failure, 0.80 s]
----------------------------------------------------------------------
sage -t --long src/sage/interfaces/latte.py  # 1 doctest failed
----------------------------------------------------------------------
```

CC:  @seblabbe @kliem

Keywords: random_fail

Branch/Commit: 2f36788f5606d6c325adf0dd46b019895b1d253d

Reviewer: Volker Braun

Author: Sébastien Labbé

Dependencies: #29200

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29300





---

archive/issue_comments_571404.json:
```json
{
    "body": "<a id='comment:1'></a>I confirm this issue was caused by #29200. Dilation of polytopes changed the ordering of their representation and few lines above in `src/sage/interfaces/latte.py`, the polytope is created by dilation:\n\n```\n   sage: P = 2 * polytopes.cube()\n```",
    "created_at": "2020-03-08T17:01:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29300",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29300#issuecomment-571404",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:1'></a>I confirm this issue was caused by #29200. Dilation of polytopes changed the ordering of their representation and few lines above in `src/sage/interfaces/latte.py`, the polytope is created by dilation:

```
   sage: P = 2 * polytopes.cube()
```



---

archive/issue_comments_571405.json:
```json
{
    "body": "Changing author from \"\" to \"S\u00e9bastien Labb\u00e9\"",
    "created_at": "2020-03-08T17:09:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29300",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29300#issuecomment-571405",
    "user": "https://github.com/seblabbe"
}
```

Changing author from "" to "Sébastien Labbé"



---

archive/issue_comments_571406.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2020-03-08T17:09:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29300",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29300#issuecomment-571406",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_571407.json:
```json
{
    "body": "Changing dependencies from \"\" to \"29200\"",
    "created_at": "2020-03-08T17:09:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29300",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29300#issuecomment-571407",
    "user": "https://github.com/seblabbe"
}
```

Changing dependencies from "" to "29200"



---

archive/issue_comments_571408.json:
```json
{
    "body": "Changing commit from \"\" to \"2f36788f5606d6c325adf0dd46b019895b1d253d\"",
    "created_at": "2020-03-08T17:09:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29300",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29300#issuecomment-571408",
    "user": "https://github.com/seblabbe"
}
```

Changing commit from "" to "2f36788f5606d6c325adf0dd46b019895b1d253d"



---

archive/issue_comments_571409.json:
```json
{
    "body": "Changing branch from \"\" to \"u/slabbe/29300\"",
    "created_at": "2020-03-08T17:09:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29300",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29300#issuecomment-571409",
    "user": "https://github.com/seblabbe"
}
```

Changing branch from "" to "u/slabbe/29300"



---

archive/issue_comments_571410.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-03-08T17:09:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29300",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29300#issuecomment-571410",
    "user": "https://github.com/seblabbe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_571411.json:
```json
{
    "body": "Changing dependencies from \"29200\" to \"#29200\"",
    "created_at": "2020-03-08T17:10:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29300",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29300#issuecomment-571411",
    "user": "https://github.com/seblabbe"
}
```

Changing dependencies from "29200" to "#29200"



---

archive/issue_comments_571412.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Volker Braun\"",
    "created_at": "2020-03-08T22:30:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29300",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29300#issuecomment-571412",
    "user": "https://github.com/vbraun"
}
```

Changing reviewer from "" to "Volker Braun"



---

archive/issue_comments_571413.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-03-08T22:30:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29300",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29300#issuecomment-571413",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_074545.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-03-10T23:27:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29300",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29300#event-74545"
}
```



---

archive/issue_comments_571414.json:
```json
{
    "body": "Changing branch from \"u/slabbe/29300\" to \"2f36788f5606d6c325adf0dd46b019895b1d253d\"",
    "created_at": "2020-03-10T23:27:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29300",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29300#issuecomment-571414",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/slabbe/29300" to "2f36788f5606d6c325adf0dd46b019895b1d253d"



---

archive/issue_comments_571415.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-03-10T23:27:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29300",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29300#issuecomment-571415",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
