# Issue 29662: Deprecate sage.stats.basic_stats

archive/issues_029425.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nRight now in [sage stats](http://doc.sagemath.org/html/en/reference/stats/index.html) there are a few very basic things, and then lots of very technical stuff sampling from e.g. polynomials or for hidden markov modeling!\n\nIn this ticket, we deprecate `sage.stats.basic_stats`, which is underdeveloped. Users are usually better off to learn to use other facilities available in Python that provide better coverage and consistency. For example, `mean` happens to work with vectors (which is used in some doctests elsewhere in sage), but `variance` does not.\n\nNote that Python 3 comes with a basic [built-in stats module](https://docs.python.org/3/library/statistics.html), but much of its functionality is incompatible with Sage's numbers in #28234.\n\nIn the deprecation messages, we instead point users to suitable `numpy` and `scipy` functions, as well as to `pandas` (for `moving_average`).\n\n\nSee also #29663\n\n\nCC:  @dcoudert @tscrim\n\nComponent: **statistics**\n\nAuthor: **Matthias Koeppe**\n\nBranch: **[`7e7331a`](https://github.com/sagemath/sagetrac-mirror/commit/7e7331a3fe55bb85e6a583c20b532fcaaf52b6a3)**\n\nReviewer: **David Coudert**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29662_\n\n",
    "closed_at": "2021-09-01T20:55:20Z",
    "created_at": "2020-05-08T01:14:47Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20statistics",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Deprecate sage.stats.basic_stats",
    "type": "issue",
    "updated_at": "2022-03-03T07:17:31Z",
    "url": "https://github.com/sagemath/sage/issues/29662",
    "user": "https://github.com/kcrisman"
}
```
<div id="comment:0"></div>

Right now in [sage stats](http://doc.sagemath.org/html/en/reference/stats/index.html) there are a few very basic things, and then lots of very technical stuff sampling from e.g. polynomials or for hidden markov modeling!

In this ticket, we deprecate `sage.stats.basic_stats`, which is underdeveloped. Users are usually better off to learn to use other facilities available in Python that provide better coverage and consistency. For example, `mean` happens to work with vectors (which is used in some doctests elsewhere in sage), but `variance` does not.

Note that Python 3 comes with a basic [built-in stats module](https://docs.python.org/3/library/statistics.html), but much of its functionality is incompatible with Sage's numbers in #28234.

In the deprecation messages, we instead point users to suitable `numpy` and `scipy` functions, as well as to `pandas` (for `moving_average`).


See also #29663


CC:  @dcoudert @tscrim

Component: **statistics**

Author: **Matthias Koeppe**

Branch: **[`7e7331a`](https://github.com/sagemath/sagetrac-mirror/commit/7e7331a3fe55bb85e6a583c20b532fcaaf52b6a3)**

Reviewer: **David Coudert**

_Issue created by migration from https://trac.sagemath.org/ticket/29662_





---

archive/issue_events_405087.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2020-05-08T01:14:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20statistics",
    "label_color": "0000ff",
    "label_name": "c: statistics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29662#event-405087"
}
```



---

archive/issue_events_405088.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2020-05-08T01:14:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29662#event-405088"
}
```



---

archive/issue_events_405089.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2020-05-08T01:14:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "label": "https://github.com/sagemath/sage/labels/feature",
    "label_color": "008080",
    "label_name": "feature",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29662#event-405089"
}
```



---

archive/issue_comments_467106.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,9 @@\n Right now in [sage stats](http://doc.sagemath.org/html/en/reference/stats/index.html) there are a few very basic things, and then lots of very technical stuff sampling from e.g. polynomials or for hidden markov modeling!\n \n This ticket is to split the more technical stuff (which presumably may still be used for researchers, but not for the sort of things basic R or pandas data frames would be) into a separate module where it can be taken care of.\n+\n+Note that Python 3 comes with built-in stats module.\n+https://docs.python.org/3/library/statistics.html\n+\n+See also #29662\n+\n``````\n",
    "created_at": "2020-05-08T08:33:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467106",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,9 @@
 Right now in [sage stats](http://doc.sagemath.org/html/en/reference/stats/index.html) there are a few very basic things, and then lots of very technical stuff sampling from e.g. polynomials or for hidden markov modeling!
 
 This ticket is to split the more technical stuff (which presumably may still be used for researchers, but not for the sort of things basic R or pandas data frames would be) into a separate module where it can be taken care of.
+
+Note that Python 3 comes with built-in stats module.
+https://docs.python.org/3/library/statistics.html
+
+See also #29662
+
``````




---

archive/issue_comments_467107.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThanks for that comment about Py3.  So perhaps there are already namespace clashes ... though presumably that module can't handle (say) the mean of several `Integer`s or even stranger objects, as-is.",
    "created_at": "2020-05-08T11:26:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467107",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:2" align="right">comment:2</div>

Thanks for that comment about Py3.  So perhaps there are already namespace clashes ... though presumably that module can't handle (say) the mean of several `Integer`s or even stranger objects, as-is.



---

archive/issue_comments_467108.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,5 +5,5 @@\n Note that Python 3 comes with built-in stats module.\n https://docs.python.org/3/library/statistics.html\n \n-See also #29662\n+See also #29663\n \n``````\n",
    "created_at": "2020-05-08T11:26:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467108",
    "user": "https://github.com/kcrisman"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,5 +5,5 @@
 Note that Python 3 comes with built-in stats module.
 https://docs.python.org/3/library/statistics.html
 
-See also #29662
+See also #29663
 
``````




---

archive/issue_comments_467109.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@kcrisman](#comment%3A2):\n> Thanks for that comment about Py3.  So perhaps there are already namespace clashes ... though presumably that module can't handle (say) the mean of several `Integer`s or even stranger objects, as-is.\n\nthis might be an upstream bug.\nOne should check whether this works with unusual numpy types, by the way. If it doesn't we have a case...",
    "created_at": "2020-05-10T11:06:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467109",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@kcrisman](#comment%3A2):
> Thanks for that comment about Py3.  So perhaps there are already namespace clashes ... though presumably that module can't handle (say) the mean of several `Integer`s or even stranger objects, as-is.

this might be an upstream bug.
One should check whether this works with unusual numpy types, by the way. If it doesn't we have a case...



---

archive/issue_comments_467110.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nUnfortunately the Python3 `statistics` module is not compatible with Sage numbers. This is coming from #28234.\n\n```\nsage: import statistics                                                                                                                                                 \nsage: statistics.mean([1, 2])                                                                                                                                           \n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-3-c5dde83ca691> in <module>\n----> 1 statistics.mean([Integer(1), Integer(2)])\n\n/usr/local/Cellar/python@3.9/3.9.6/Frameworks/Python.framework/Versions/3.9/lib/python3.9/statistics.py in mean(data)\n    314     if n < 1:\n    315         raise StatisticsError('mean requires at least one data point')\n--> 316     T, total, count = _sum(data)\n    317     assert count == n\n    318     return _convert(total / n, T)\n\n/usr/local/Cellar/python@3.9/3.9.6/Frameworks/Python.framework/Versions/3.9/lib/python3.9/statistics.py in _sum(data, start)\n    166         for n, d in map(_exact_ratio, values):\n    167             count += 1\n--> 168             partials[d] = partials_get(d, 0) + n\n    169     if None in partials:\n    170         # The sum will be a NAN or INF. We can ignore all the finite\n\nTypeError: unsupported operand type(s) for +: 'int' and 'builtin_function_or_method'\n```",
    "created_at": "2021-08-27T01:00:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467110",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:5" align="right">comment:5</div>

Unfortunately the Python3 `statistics` module is not compatible with Sage numbers. This is coming from #28234.

```
sage: import statistics                                                                                                                                                 
sage: statistics.mean([1, 2])                                                                                                                                           
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-3-c5dde83ca691> in <module>
----> 1 statistics.mean([Integer(1), Integer(2)])

/usr/local/Cellar/python@3.9/3.9.6/Frameworks/Python.framework/Versions/3.9/lib/python3.9/statistics.py in mean(data)
    314     if n < 1:
    315         raise StatisticsError('mean requires at least one data point')
--> 316     T, total, count = _sum(data)
    317     assert count == n
    318     return _convert(total / n, T)

/usr/local/Cellar/python@3.9/3.9.6/Frameworks/Python.framework/Versions/3.9/lib/python3.9/statistics.py in _sum(data, start)
    166         for n, d in map(_exact_ratio, values):
    167             count += 1
--> 168             partials[d] = partials_get(d, 0) + n
    169     if None in partials:
    170         # The sum will be a NAN or INF. We can ignore all the finite

TypeError: unsupported operand type(s) for +: 'int' and 'builtin_function_or_method'
```



---

archive/issue_comments_467111.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nSo to get rid of the single use of `sage.stats` within `sage.graphs`, a workaround like in this commit is needed. I don't know if this is acceptable",
    "created_at": "2021-08-27T01:06:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467111",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">comment:6</div>

So to get rid of the single use of `sage.stats` within `sage.graphs`, a workaround like in this commit is needed. I don't know if this is acceptable



---

archive/issue_comments_467112.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2021-08-27T01:06:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467112",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_comments_467113.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nPython 3.8 introduces [https://docs.python.org/3/library/statistics.html#statistics.fmean](https://docs.python.org/3/library/statistics.html#statistics.fmean), which coerces to `float` first and therefore works fine; but we cannot use it yet as we still support Python 3.7. Also `geometric_mean` (Python >= 3.8), `median`, `median_low`, `median_high`, `median_grouped` work fine for the same reason.\n\n`mode`, `multimode`, and `quantiles` also work fine. They do not convert to `float`.\n\nOTOH, `harmonic_mean`, `pstdev`, `pvariance`, `stdev`, `variance` all lead to the same error as `mean`.",
    "created_at": "2021-08-27T01:21:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467113",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

Python 3.8 introduces [https://docs.python.org/3/library/statistics.html#statistics.fmean](https://docs.python.org/3/library/statistics.html#statistics.fmean), which coerces to `float` first and therefore works fine; but we cannot use it yet as we still support Python 3.7. Also `geometric_mean` (Python >= 3.8), `median`, `median_low`, `median_high`, `median_grouped` work fine for the same reason.

`mode`, `multimode`, and `quantiles` also work fine. They do not convert to `float`.

OTOH, `harmonic_mean`, `pstdev`, `pvariance`, `stdev`, `variance` all lead to the same error as `mean`.



---

archive/issue_comments_467114.json:
```json
{
    "body": "Branch: **[u/mkoeppe/clarify_stats_module_role](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/clarify_stats_module_role)**",
    "created_at": "2021-08-27T01:23:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467114",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/clarify_stats_module_role](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/clarify_stats_module_role)**



---

archive/issue_comments_467115.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\n[numpy](https://numpy.org/doc/stable/reference/routines.statistics.html) and [scipy.stats](https://docs.scipy.org/doc/scipy/reference/stats.html) functions do not have this problem; they just convert everything to `numpy.float64` first.\n\nSo if we want to deprecate `sage.stats.basic_stats`, the deprecation messages should probably send users to a combination of numpy and scipy functions.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2be6a71916d5f963b039a59a90f3f0e4d50daee7\"><code>2be6a71</code></a></td><td><code>GenericGraph.clustering_average: Replace use of sage.stats.basic_stats by statistics</code></td></tr></table>\n",
    "created_at": "2021-08-27T02:24:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467115",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">comment:9</div>

[numpy](https://numpy.org/doc/stable/reference/routines.statistics.html) and [scipy.stats](https://docs.scipy.org/doc/scipy/reference/stats.html) functions do not have this problem; they just convert everything to `numpy.float64` first.

So if we want to deprecate `sage.stats.basic_stats`, the deprecation messages should probably send users to a combination of numpy and scipy functions.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2be6a71916d5f963b039a59a90f3f0e4d50daee7"><code>2be6a71</code></a></td><td><code>GenericGraph.clustering_average: Replace use of sage.stats.basic_stats by statistics</code></td></tr></table>




---

archive/issue_comments_467116.json:
```json
{
    "body": "Commit: **[`2be6a71`](https://github.com/sagemath/sagetrac-mirror/commit/2be6a71916d5f963b039a59a90f3f0e4d50daee7)**",
    "created_at": "2021-08-27T02:24:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467116",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`2be6a71`](https://github.com/sagemath/sagetrac-mirror/commit/2be6a71916d5f963b039a59a90f3f0e4d50daee7)**



---

archive/issue_events_405090.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-27T02:26:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29662#event-405090"
}
```



---

archive/issue_events_405091.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-27T02:26:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "label": "https://github.com/sagemath/sage/labels/feature",
    "label_color": "008080",
    "label_name": "feature",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29662#event-405091"
}
```



---

archive/issue_comments_467117.json:
```json
{
    "body": "Changed commit from **[`2be6a71`](https://github.com/sagemath/sagetrac-mirror/commit/2be6a71916d5f963b039a59a90f3f0e4d50daee7)** to **[`d10694a`](https://github.com/sagemath/sagetrac-mirror/commit/d10694a244dff78cb7c6624c222701d633150624)**",
    "created_at": "2021-08-27T06:13:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467117",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2be6a71`](https://github.com/sagemath/sagetrac-mirror/commit/2be6a71916d5f963b039a59a90f3f0e4d50daee7)** to **[`d10694a`](https://github.com/sagemath/sagetrac-mirror/commit/d10694a244dff78cb7c6624c222701d633150624)**



---

archive/issue_comments_467118.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d10694a244dff78cb7c6624c222701d633150624\"><code>d10694a</code></a></td><td><code>sage.stats.basic_stats: Add deprecations for all functions</code></td></tr></table>\n",
    "created_at": "2021-08-27T06:13:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467118",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d10694a244dff78cb7c6624c222701d633150624"><code>d10694a</code></a></td><td><code>sage.stats.basic_stats: Add deprecations for all functions</code></td></tr></table>




---

archive/issue_events_405092.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-27T06:15:55Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "title_is": "Deprecate sage.stats.basic_stats",
    "title_was": "Clarify stats module role",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29662#event-405092"
}
```



---

archive/issue_comments_467119.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nCurrently, `clustering_coeff` returns a rational when `implementation` is `\"dense_copy\"` or `\"sparse_copy\"`. Unfortunately, the rational field of sage is currently not able to take as input the type `Fraction` from Python library `fractions`.\n\nA solution could be\n\n```\nfrom statistics import mean\nfrom fractions import Fraction\nreturn QQ(str(mean([Fraction(str(x)) for x in G.clustering_coeff(implementation=implementation).values()])))\n```",
    "created_at": "2021-08-27T08:01:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467119",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:13" align="right">comment:13</div>

Currently, `clustering_coeff` returns a rational when `implementation` is `"dense_copy"` or `"sparse_copy"`. Unfortunately, the rational field of sage is currently not able to take as input the type `Fraction` from Python library `fractions`.

A solution could be

```
from statistics import mean
from fractions import Fraction
return QQ(str(mean([Fraction(str(x)) for x in G.clustering_coeff(implementation=implementation).values()])))
```



---

archive/issue_comments_467120.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nOK. Sounds like having the result in QQ is important to you.",
    "created_at": "2021-08-27T20:15:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467120",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:14" align="right">comment:14</div>

OK. Sounds like having the result in QQ is important to you.



---

archive/issue_comments_467121.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/933f0aac40783595a3ccb9d8c243142187b97750\"><code>933f0aa</code></a></td><td><code>sage.stats.basic_stats: Add deprecations for all functions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d3d374bf6ebad93051102102de5a7581c1edf48e\"><code>d3d374b</code></a></td><td><code>GenericGraph.clustering_average: Remove use of sage.stats.basic_stats</code></td></tr></table>\n",
    "created_at": "2021-08-27T20:20:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467121",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/933f0aac40783595a3ccb9d8c243142187b97750"><code>933f0aa</code></a></td><td><code>sage.stats.basic_stats: Add deprecations for all functions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d3d374bf6ebad93051102102de5a7581c1edf48e"><code>d3d374b</code></a></td><td><code>GenericGraph.clustering_average: Remove use of sage.stats.basic_stats</code></td></tr></table>




---

archive/issue_comments_467122.json:
```json
{
    "body": "Changed commit from **[`d10694a`](https://github.com/sagemath/sagetrac-mirror/commit/d10694a244dff78cb7c6624c222701d633150624)** to **[`d3d374b`](https://github.com/sagemath/sagetrac-mirror/commit/d3d374bf6ebad93051102102de5a7581c1edf48e)**",
    "created_at": "2021-08-27T20:20:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467122",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d10694a`](https://github.com/sagemath/sagetrac-mirror/commit/d10694a244dff78cb7c6624c222701d633150624)** to **[`d3d374b`](https://github.com/sagemath/sagetrac-mirror/commit/d3d374bf6ebad93051102102de5a7581c1edf48e)**



---

archive/issue_comments_467123.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\n... so instead of going through `Fraction` I have just replaced it by `sum` followed by division",
    "created_at": "2021-08-27T20:21:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467123",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:16" align="right">comment:16</div>

... so instead of going through `Fraction` I have just replaced it by `sum` followed by division



---

archive/issue_comments_467124.json:
```json
{
    "body": "Changed commit from **[`d3d374b`](https://github.com/sagemath/sagetrac-mirror/commit/d3d374bf6ebad93051102102de5a7581c1edf48e)** to **[`03e926f`](https://github.com/sagemath/sagetrac-mirror/commit/03e926f08886317fa83ec1991971bdb1a1df5cbc)**",
    "created_at": "2021-08-27T20:30:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467124",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d3d374b`](https://github.com/sagemath/sagetrac-mirror/commit/d3d374bf6ebad93051102102de5a7581c1edf48e)** to **[`03e926f`](https://github.com/sagemath/sagetrac-mirror/commit/03e926f08886317fa83ec1991971bdb1a1df5cbc)**



---

archive/issue_comments_467125.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/03e926f08886317fa83ec1991971bdb1a1df5cbc\"><code>03e926f</code></a></td><td><code>src/sage/stats/basic_stats.py: Update doctest outputs with deprecation warnings</code></td></tr></table>\n",
    "created_at": "2021-08-27T20:30:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467125",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/03e926f08886317fa83ec1991971bdb1a1df5cbc"><code>03e926f</code></a></td><td><code>src/sage/stats/basic_stats.py: Update doctest outputs with deprecation warnings</code></td></tr></table>




---

archive/issue_events_405093.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-27T20:32:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29662#event-405093"
}
```



---

archive/issue_events_405094.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-27T20:32:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29662#event-405094"
}
```



---

archive/issue_events_405095.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-27T20:32:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29662#event-405095"
}
```



---

archive/issue_comments_467126.json:
```json
{
    "body": "Reviewer: **David Coudert**",
    "created_at": "2021-08-27T20:54:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467126",
    "user": "https://github.com/dcoudert"
}
```

Reviewer: **David Coudert**



---

archive/issue_events_405096.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-08-27T20:54:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29662#event-405096"
}
```



---

archive/issue_events_405097.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-08-27T20:54:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29662#event-405097"
}
```



---

archive/issue_comments_467127.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nLGTM. Thank you.",
    "created_at": "2021-08-27T20:54:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467127",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:19" align="right">comment:19</div>

LGTM. Thank you.



---

archive/issue_comments_467128.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nThanks!",
    "created_at": "2021-08-27T21:31:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467128",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:20" align="right">comment:20</div>

Thanks!



---

archive/issue_events_405098.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-08-29T14:47:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29662#event-405098"
}
```



---

archive/issue_events_405099.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-08-29T14:47:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29662#event-405099"
}
```



---

archive/issue_comments_467129.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\n\n```\n...\n    :\n    DeprecationWarning: sage.stats.basic_stats.mean is deprecated; use numpy.mean or numpy.nanmean instead\n    See https://trac.sagemath.org/29662 for details.\n**********************************************************************\n1 item had failures:\n   1 of  14 in sage.crypto.lwe.LWE.__init__\n    [111 tests, 1 failure, 0.32 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long 46.3 --random-seed=0 src/sage/crypto/lwe.py  # 1 doctest failed\n----------------------------------------------------------------------\n```",
    "created_at": "2021-08-29T14:47:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467129",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:21" align="right">comment:21</div>


```
...
    :
    DeprecationWarning: sage.stats.basic_stats.mean is deprecated; use numpy.mean or numpy.nanmean instead
    See https://trac.sagemath.org/29662 for details.
**********************************************************************
1 item had failures:
   1 of  14 in sage.crypto.lwe.LWE.__init__
    [111 tests, 1 failure, 0.32 s]
----------------------------------------------------------------------
sage -t --long --warn-long 46.3 --random-seed=0 src/sage/crypto/lwe.py  # 1 doctest failed
----------------------------------------------------------------------
```



---

archive/issue_comments_467130.json:
```json
{
    "body": "Changed commit from **[`03e926f`](https://github.com/sagemath/sagetrac-mirror/commit/03e926f08886317fa83ec1991971bdb1a1df5cbc)** to **[`5966df9`](https://github.com/sagemath/sagetrac-mirror/commit/5966df91465a86652ae4c217d2ab0cfcd4f4ccd6)**",
    "created_at": "2021-08-29T19:10:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467130",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`03e926f`](https://github.com/sagemath/sagetrac-mirror/commit/03e926f08886317fa83ec1991971bdb1a1df5cbc)** to **[`5966df9`](https://github.com/sagemath/sagetrac-mirror/commit/5966df91465a86652ae4c217d2ab0cfcd4f4ccd6)**



---

archive/issue_comments_467131.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5966df91465a86652ae4c217d2ab0cfcd4f4ccd6\"><code>5966df9</code></a></td><td><code>src/sage/crypto/lwe.py: Replace use of sage.stats.basic_stats in doctest by numpy</code></td></tr></table>\n",
    "created_at": "2021-08-29T19:10:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467131",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5966df91465a86652ae4c217d2ab0cfcd4f4ccd6"><code>5966df9</code></a></td><td><code>src/sage/crypto/lwe.py: Replace use of sage.stats.basic_stats in doctest by numpy</code></td></tr></table>




---

archive/issue_events_405100.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-29T19:10:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29662#event-405100"
}
```



---

archive/issue_events_405101.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-29T19:10:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29662#event-405101"
}
```



---

archive/issue_events_405102.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-08-30T07:02:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29662#event-405102"
}
```



---

archive/issue_events_405103.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-08-30T07:02:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29662#event-405103"
}
```



---

archive/issue_comments_467132.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nThe patchbot reports several errors due to `mean`\n\n```\nsage -t --long --random-seed=0 src/sage/stats/distributions/discrete_gaussian_lattice.py  # 3 doctests failed\nsage -t --long --random-seed=0 src/doc/en/prep/Quickstarts/Statistics-and-Distributions.rst  # 2 doctests failed\nsage -t --long --random-seed=0 src/sage/stats/distributions/discrete_gaussian_polynomial.py  # 1 doctest failed\nsage -t --long --random-seed=0 src/sage/coding/information_set_decoder.py  # 2 doctests failed\nsage -t --long --random-seed=0 src/sage/graphs/graph_generators_pyx.pyx  # 1 doctest failed\n```",
    "created_at": "2021-08-30T07:02:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467132",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:24" align="right">comment:24</div>

The patchbot reports several errors due to `mean`

```
sage -t --long --random-seed=0 src/sage/stats/distributions/discrete_gaussian_lattice.py  # 3 doctests failed
sage -t --long --random-seed=0 src/doc/en/prep/Quickstarts/Statistics-and-Distributions.rst  # 2 doctests failed
sage -t --long --random-seed=0 src/sage/stats/distributions/discrete_gaussian_polynomial.py  # 1 doctest failed
sage -t --long --random-seed=0 src/sage/coding/information_set_decoder.py  # 2 doctests failed
sage -t --long --random-seed=0 src/sage/graphs/graph_generators_pyx.pyx  # 1 doctest failed
```



---

archive/issue_comments_467133.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,9 +1,11 @@\n Right now in [sage stats](http://doc.sagemath.org/html/en/reference/stats/index.html) there are a few very basic things, and then lots of very technical stuff sampling from e.g. polynomials or for hidden markov modeling!\n \n-This ticket is to split the more technical stuff (which presumably may still be used for researchers, but not for the sort of things basic R or pandas data frames would be) into a separate module where it can be taken care of.\n+In this ticket, we deprecate `sage.stats.basic_stats`, which is underdeveloped. Users are usually better off to learn to use other facilities available in Python that provide better coverage and consistency. For example, `mean` happens to work with vectors (which is used in some doctests elsewhere in sage), but `variance` does not.\n \n-Note that Python 3 comes with built-in stats module.\n-https://docs.python.org/3/library/statistics.html\n+Note that Python 3 comes with a basic [built-in stats module](https://docs.python.org/3/library/statistics.html), but much of its functionality is incompatible with Sage's numbers in #28234.\n+\n+In the deprecation messages, we instead point users to suitable `numpy` and `scipy` functions, as well as to `pandas` (for `moving_average`).\n+\n \n See also #29663\n \n``````\n",
    "created_at": "2021-08-30T20:38:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467133",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,9 +1,11 @@
 Right now in [sage stats](http://doc.sagemath.org/html/en/reference/stats/index.html) there are a few very basic things, and then lots of very technical stuff sampling from e.g. polynomials or for hidden markov modeling!
 
-This ticket is to split the more technical stuff (which presumably may still be used for researchers, but not for the sort of things basic R or pandas data frames would be) into a separate module where it can be taken care of.
+In this ticket, we deprecate `sage.stats.basic_stats`, which is underdeveloped. Users are usually better off to learn to use other facilities available in Python that provide better coverage and consistency. For example, `mean` happens to work with vectors (which is used in some doctests elsewhere in sage), but `variance` does not.
 
-Note that Python 3 comes with built-in stats module.
-https://docs.python.org/3/library/statistics.html
+Note that Python 3 comes with a basic [built-in stats module](https://docs.python.org/3/library/statistics.html), but much of its functionality is incompatible with Sage's numbers in #28234.
+
+In the deprecation messages, we instead point users to suitable `numpy` and `scipy` functions, as well as to `pandas` (for `moving_average`).
+
 
 See also #29663
 
``````




---

archive/issue_comments_467134.json:
```json
{
    "body": "Changed commit from **[`5966df9`](https://github.com/sagemath/sagetrac-mirror/commit/5966df91465a86652ae4c217d2ab0cfcd4f4ccd6)** to **[`88745e1`](https://github.com/sagemath/sagetrac-mirror/commit/88745e18d58b36df2df61aada8c270a7980f02a7)**",
    "created_at": "2021-08-30T23:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467134",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5966df9`](https://github.com/sagemath/sagetrac-mirror/commit/5966df91465a86652ae4c217d2ab0cfcd4f4ccd6)** to **[`88745e1`](https://github.com/sagemath/sagetrac-mirror/commit/88745e18d58b36df2df61aada8c270a7980f02a7)**



---

archive/issue_comments_467135.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/88745e18d58b36df2df61aada8c270a7980f02a7\"><code>88745e1</code></a></td><td><code>src/sage/stats/distributions/discrete_gaussian_lattice.py: Remove use of sage.basic_stats.mean in doctests</code></td></tr></table>\n",
    "created_at": "2021-08-30T23:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467135",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/88745e18d58b36df2df61aada8c270a7980f02a7"><code>88745e1</code></a></td><td><code>src/sage/stats/distributions/discrete_gaussian_lattice.py: Remove use of sage.basic_stats.mean in doctests</code></td></tr></table>




---

archive/issue_comments_467136.json:
```json
{
    "body": "Changed commit from **[`88745e1`](https://github.com/sagemath/sagetrac-mirror/commit/88745e18d58b36df2df61aada8c270a7980f02a7)** to **[`c6e40a5`](https://github.com/sagemath/sagetrac-mirror/commit/c6e40a58ad8a607dcbcacf4503018d3b9ed8f97f)**",
    "created_at": "2021-08-31T00:17:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467136",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`88745e1`](https://github.com/sagemath/sagetrac-mirror/commit/88745e18d58b36df2df61aada8c270a7980f02a7)** to **[`c6e40a5`](https://github.com/sagemath/sagetrac-mirror/commit/c6e40a58ad8a607dcbcacf4503018d3b9ed8f97f)**



---

archive/issue_comments_467137.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb1083910c0f237f072b6270cb311dfae6e1af44\"><code>fb10839</code></a></td><td><code>src/sage/stats/distributions/discrete_gaussian_polynomial.py: Remove use of sage.stats.basic_stats.mean in doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/768ebdf4c9b5bac48767f521d7a9703836f59e3e\"><code>768ebdf</code></a></td><td><code>src/sage/graphs/graph_generators_pyx.pyx: Remove use of sage.stats.basic_stats.mean in doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c6e40a58ad8a607dcbcacf4503018d3b9ed8f97f\"><code>c6e40a5</code></a></td><td><code>src/sage/coding/information_set_decoder.py: Remove use of sage.stats.basic_stats; make imports more specific</code></td></tr></table>\n",
    "created_at": "2021-08-31T00:17:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467137",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb1083910c0f237f072b6270cb311dfae6e1af44"><code>fb10839</code></a></td><td><code>src/sage/stats/distributions/discrete_gaussian_polynomial.py: Remove use of sage.stats.basic_stats.mean in doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/768ebdf4c9b5bac48767f521d7a9703836f59e3e"><code>768ebdf</code></a></td><td><code>src/sage/graphs/graph_generators_pyx.pyx: Remove use of sage.stats.basic_stats.mean in doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c6e40a58ad8a607dcbcacf4503018d3b9ed8f97f"><code>c6e40a5</code></a></td><td><code>src/sage/coding/information_set_decoder.py: Remove use of sage.stats.basic_stats; make imports more specific</code></td></tr></table>




---

archive/issue_comments_467138.json:
```json
{
    "body": "Changed commit from **[`c6e40a5`](https://github.com/sagemath/sagetrac-mirror/commit/c6e40a58ad8a607dcbcacf4503018d3b9ed8f97f)** to **[`7e7331a`](https://github.com/sagemath/sagetrac-mirror/commit/7e7331a3fe55bb85e6a583c20b532fcaaf52b6a3)**",
    "created_at": "2021-08-31T02:52:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467138",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c6e40a5`](https://github.com/sagemath/sagetrac-mirror/commit/c6e40a58ad8a607dcbcacf4503018d3b9ed8f97f)** to **[`7e7331a`](https://github.com/sagemath/sagetrac-mirror/commit/7e7331a3fe55bb85e6a583c20b532fcaaf52b6a3)**



---

archive/issue_comments_467139.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7e7331a3fe55bb85e6a583c20b532fcaaf52b6a3\"><code>7e7331a</code></a></td><td><code>src/doc/en/prep/Quickstarts/Statistics-and-Distributions.rst: Update, stop recommending deprecated functions</code></td></tr></table>\n",
    "created_at": "2021-08-31T02:52:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467139",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7e7331a3fe55bb85e6a583c20b532fcaaf52b6a3"><code>7e7331a</code></a></td><td><code>src/doc/en/prep/Quickstarts/Statistics-and-Distributions.rst: Update, stop recommending deprecated functions</code></td></tr></table>




---

archive/issue_events_405104.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-31T02:55:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29662#event-405104"
}
```



---

archive/issue_events_405105.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-31T02:55:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29662#event-405105"
}
```



---

archive/issue_events_405106.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-08-31T09:06:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29662#event-405106"
}
```



---

archive/issue_events_405107.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-08-31T09:06:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29662#event-405107"
}
```



---

archive/issue_comments_467140.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nI think it's OK now. We have a few pyflake warnings that can be fixed afterward.",
    "created_at": "2021-08-31T09:06:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467140",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:30" align="right">comment:30</div>

I think it's OK now. We have a few pyflake warnings that can be fixed afterward.



---

archive/issue_comments_467141.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nThanks for reviewing!",
    "created_at": "2021-08-31T14:59:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467141",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:31" align="right">comment:31</div>

Thanks for reviewing!



---

archive/issue_events_405108.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-09-01T20:55:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29662#event-405108"
}
```



---

archive/issue_events_405109.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "39228cbfed3f5c8041f06abbf8b215b305664f46",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-09-01T20:55:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29662#event-405109"
}
```



---

archive/issue_comments_467142.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/clarify_stats_module_role](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/clarify_stats_module_role)** to **[`7e7331a`](https://github.com/sagemath/sagetrac-mirror/commit/7e7331a3fe55bb85e6a583c20b532fcaaf52b6a3)**",
    "created_at": "2021-09-01T20:55:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467142",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/clarify_stats_module_role](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/clarify_stats_module_role)** to **[`7e7331a`](https://github.com/sagemath/sagetrac-mirror/commit/7e7331a3fe55bb85e6a583c20b532fcaaf52b6a3)**



---

archive/issue_comments_467143.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nThe definition of \"numpy.mean\" is different than Sage's built in mean:\n\n```\nsage: mean([vector([1,2]),vector([3,4])])\n<ipython-input-4-37be8bb3881f>:1: DeprecationWarning: sage.stats.basic_stats.mean is deprecated; use numpy.mean or numpy.nanmean instead\nSee https://trac.sagemath.org/29662 for details.\n  mean([vector([Integer(1),Integer(2)]),vector([Integer(3),Integer(4)])])\n(2, 3)\nsage: numpy.mean([vector([1,2]),vector([3,4])])\n2.5\n```\n\nAlso, one of the examples in the Sage docs involving mean doesn't work with numpy.mean:\n\n```\nsage: v = stats.TimeSeries([1..10])\nsage: mean(v)\n<ipython-input-13-9d6545956b1d>:1: DeprecationWarning: sage.stats.basic_stats.mean is deprecated; use numpy.mean or numpy.nanmean instead\nSee https://trac.sagemath.org/29662 for details.\n  mean(v)\n5.5\nsage: numpy.mean(v)\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-14-2e91276b932b> in <module>\n----> 1 numpy.mean(v)\n\n<__array_function__ internals> in mean(*args, **kwargs)\n\n/ext/sage/9.5/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/numpy/core/fromnumeric.py in mean(a, axis, dtype, out, keepdims, where)\n   3436             pass\n   3437         else:\n-> 3438             return mean(axis=axis, dtype=dtype, out=out, **kwargs)\n   3439 \n   3440     return _methods._mean(a, axis=axis, dtype=dtype,\n\nTypeError: TimeSeries.mean() takes no keyword arguments\n```\n\nMaybe this is an argument to improve variance, rather than delete it?\n\n>  For example, mean happens to work with vectors (which is used in some doctests elsewhere in sage), but variance does not.",
    "created_at": "2022-02-13T03:27:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467143",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:33" align="right">comment:33</div>

The definition of "numpy.mean" is different than Sage's built in mean:

```
sage: mean([vector([1,2]),vector([3,4])])
<ipython-input-4-37be8bb3881f>:1: DeprecationWarning: sage.stats.basic_stats.mean is deprecated; use numpy.mean or numpy.nanmean instead
See https://trac.sagemath.org/29662 for details.
  mean([vector([Integer(1),Integer(2)]),vector([Integer(3),Integer(4)])])
(2, 3)
sage: numpy.mean([vector([1,2]),vector([3,4])])
2.5
```

Also, one of the examples in the Sage docs involving mean doesn't work with numpy.mean:

```
sage: v = stats.TimeSeries([1..10])
sage: mean(v)
<ipython-input-13-9d6545956b1d>:1: DeprecationWarning: sage.stats.basic_stats.mean is deprecated; use numpy.mean or numpy.nanmean instead
See https://trac.sagemath.org/29662 for details.
  mean(v)
5.5
sage: numpy.mean(v)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-14-2e91276b932b> in <module>
----> 1 numpy.mean(v)

<__array_function__ internals> in mean(*args, **kwargs)

/ext/sage/9.5/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/numpy/core/fromnumeric.py in mean(a, axis, dtype, out, keepdims, where)
   3436             pass
   3437         else:
-> 3438             return mean(axis=axis, dtype=dtype, out=out, **kwargs)
   3439 
   3440     return _methods._mean(a, axis=axis, dtype=dtype,

TypeError: TimeSeries.mean() takes no keyword arguments
```

Maybe this is an argument to improve variance, rather than delete it?

>  For example, mean happens to work with vectors (which is used in some doctests elsewhere in sage), but variance does not.



---

archive/issue_comments_467144.json:
```json
{
    "body": "Changed commit from **[`7e7331a`](https://github.com/sagemath/sagetrac-mirror/commit/7e7331a3fe55bb85e6a583c20b532fcaaf52b6a3)** to none",
    "created_at": "2022-02-13T03:27:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467144",
    "user": "https://github.com/williamstein"
}
```

Changed commit from **[`7e7331a`](https://github.com/sagemath/sagetrac-mirror/commit/7e7331a3fe55bb85e6a583c20b532fcaaf52b6a3)** to none



---

archive/issue_comments_467145.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nperhaps removing `mean`, `variance`, etc. from global namespace would be enough for the time being.",
    "created_at": "2022-02-13T09:05:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467145",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:34" align="right">comment:34</div>

perhaps removing `mean`, `variance`, etc. from global namespace would be enough for the time being.



---

archive/issue_comments_467146.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@dimpase](#comment%3A34):\n> perhaps removing `mean`, `variance`, etc. from global namespace would be enough for the time being.\n\nI think that having sage versions of `mean` and `variance` in the global namespace are useful to many users. Much more than `EllipticCurve` let say.\n\nnumpy and python are floating point focused when it comes to mathematics. This is not what sage tries to teach.",
    "created_at": "2022-02-13T09:26:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467146",
    "user": "https://github.com/videlec"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@dimpase](#comment%3A34):
> perhaps removing `mean`, `variance`, etc. from global namespace would be enough for the time being.

I think that having sage versions of `mean` and `variance` in the global namespace are useful to many users. Much more than `EllipticCurve` let say.

numpy and python are floating point focused when it comes to mathematics. This is not what sage tries to teach.



---

archive/issue_comments_467147.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nBy default, `EllipticCurve`, or in fact anything that's not in vanilla Python, should not be in global namespace.\nThis is in line with other Python packages. \n\nBy the way, one of the worst is currently `sum`, which overloads Python's sum at Sage prompt, but does not do this in the library.\n\nHaving said that, nothing then would prevent one from having \"classical Sage\" module, which populates the global namespace with stuff.",
    "created_at": "2022-02-13T10:56:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467147",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:36" align="right">comment:36</div>

By default, `EllipticCurve`, or in fact anything that's not in vanilla Python, should not be in global namespace.
This is in line with other Python packages. 

By the way, one of the worst is currently `sum`, which overloads Python's sum at Sage prompt, but does not do this in the library.

Having said that, nothing then would prevent one from having "classical Sage" module, which populates the global namespace with stuff.



---

archive/issue_comments_467148.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplying to [@dimpase](#comment%3A36):\n> By default, `EllipticCurve`, or in fact anything that's not in vanilla Python, should not be in global namespace.\n> This is in line with other Python packages.\n\nIndeed, and then with `from sage.all import *` people can get a standard set of stuff in their global namespace. And the `sage` command environment should probably preload that, just as the preparser. It's great if sage can work like a python package, but the sage-specific environment is very valuable for quick stuff. And for, for instance, teaching, it is very useful if there is a useful \"standard\" set, if only so that it's easily available in `sagecell`.\n\nIt's valuable that in maple, maxima, mathematica, you can start right away with typing in math one-liners and get results, without having to execute boiler plate. We have that in sagemath now as well. I think it would reduce the usability of sagemath in many informal settings if we were to do away with it. A python library is just not a very good match for what people expect from an interactive CAS, so I think it's good we have a shim layer that makes sagemath behave a little more like a traditional CAS.",
    "created_at": "2022-02-13T19:29:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467148",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:37" align="right">comment:37</div>

Replying to [@dimpase](#comment%3A36):
> By default, `EllipticCurve`, or in fact anything that's not in vanilla Python, should not be in global namespace.
> This is in line with other Python packages.

Indeed, and then with `from sage.all import *` people can get a standard set of stuff in their global namespace. And the `sage` command environment should probably preload that, just as the preparser. It's great if sage can work like a python package, but the sage-specific environment is very valuable for quick stuff. And for, for instance, teaching, it is very useful if there is a useful "standard" set, if only so that it's easily available in `sagecell`.

It's valuable that in maple, maxima, mathematica, you can start right away with typing in math one-liners and get results, without having to execute boiler plate. We have that in sagemath now as well. I think it would reduce the usability of sagemath in many informal settings if we were to do away with it. A python library is just not a very good match for what people expect from an interactive CAS, so I think it's good we have a shim layer that makes sagemath behave a little more like a traditional CAS.



---

archive/issue_comments_467149.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nDiscussions after this ticket was merged:\n\n- [sage-devel, 2022-02-13, Can we restore `mean`?](https://groups.google.com/g/sage-devel/c/14L4DdJfJuw)\n- [sage-support, 2022-02-25, Basic Stats deprecated?](https://groups.google.com/g/sage-support/c/fglHtSGKFJk)",
    "created_at": "2022-02-27T17:46:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467149",
    "user": "https://github.com/slel"
}
```

<div id="comment:38" align="right">comment:38</div>

Discussions after this ticket was merged:

- [sage-devel, 2022-02-13, Can we restore `mean`?](https://groups.google.com/g/sage-devel/c/14L4DdJfJuw)
- [sage-support, 2022-02-25, Basic Stats deprecated?](https://groups.google.com/g/sage-support/c/fglHtSGKFJk)



---

archive/issue_comments_467150.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nFollow-up ticket: #33432",
    "created_at": "2022-03-01T11:52:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467150",
    "user": "https://github.com/slel"
}
```

<div id="comment:39" align="right">comment:39</div>

Follow-up ticket: #33432



---

archive/issue_comments_467151.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nFollow-up ticket: #33453",
    "created_at": "2022-03-03T07:17:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29662",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29662#issuecomment-467151",
    "user": "https://github.com/videlec"
}
```

<div id="comment:40" align="right">comment:40</div>

Follow-up ticket: #33453
