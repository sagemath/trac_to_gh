# Issue 29801: FormalPolyhedraModule - (so far finitely generated) free modules

archive/issues_029564.json:
```json
{
    "body": "Add a class `FormalPolyhedraModule` for formal modules generated by polyhedra, graded by dimension, and a category `PolyhedraModules`.\n\nSo far everything is finitely generated. This will be changed in follow-up tickets.\n\n\n**CC:**  @tscrim @braunmath\n\n**Branch/Commit:** [463dea29704f27a9f23a639b5dedcdf83711d9fb](https://github.com/sagemath/sagetrac-mirror/commit/463dea29704f27a9f23a639b5dedcdf83711d9fb)\n\n**Reviewer:** Travis Scrimshaw\n\n**Author:** Matthias Koeppe\n\nIssue created by migration from https://trac.sagemath.org/ticket/29801\n\n",
    "closed_at": "2020-06-27T09:26:20Z",
    "created_at": "2020-06-05T00:23:56Z",
    "labels": [
        "component: geometry",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.2",
    "title": "FormalPolyhedraModule - (so far finitely generated) free modules",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/29801",
    "user": "https://github.com/mkoeppe"
}
```
Add a class `FormalPolyhedraModule` for formal modules generated by polyhedra, graded by dimension, and a category `PolyhedraModules`.

So far everything is finitely generated. This will be changed in follow-up tickets.


**CC:**  @tscrim @braunmath

**Branch/Commit:** [463dea29704f27a9f23a639b5dedcdf83711d9fb](https://github.com/sagemath/sagetrac-mirror/commit/463dea29704f27a9f23a639b5dedcdf83711d9fb)

**Reviewer:** Travis Scrimshaw

**Author:** Matthias Koeppe

Issue created by migration from https://trac.sagemath.org/ticket/29801





---

archive/issue_comments_473262.json:
```json
{
    "body": "**Branch:** [u/mkoeppe/formalpolyhedramodule____so_far_finitely_generated__free_modules](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/formalpolyhedramodule____so_far_finitely_generated__free_modules)",
    "created_at": "2020-06-05T01:13:11Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473262",
    "user": "https://github.com/mkoeppe"
}
```

**Branch:** [u/mkoeppe/formalpolyhedramodule____so_far_finitely_generated__free_modules](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/formalpolyhedramodule____so_far_finitely_generated__free_modules)



---

archive/issue_comments_473263.json:
```json
{
    "body": "**Commit:** [b9d939cda4644785d76063b3d7996866a11c2d34](https://github.com/sagemath/sagetrac-mirror/commit/b9d939cda4644785d76063b3d7996866a11c2d34)",
    "created_at": "2020-06-05T01:13:35Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473263",
    "user": "https://github.com/mkoeppe"
}
```

**Commit:** [b9d939cda4644785d76063b3d7996866a11c2d34](https://github.com/sagemath/sagetrac-mirror/commit/b9d939cda4644785d76063b3d7996866a11c2d34)



---

archive/issue_comments_473264.json:
```json
{
    "body": "**Author:** Matthias Koeppe",
    "created_at": "2020-06-05T01:13:35Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473264",
    "user": "https://github.com/mkoeppe"
}
```

**Author:** Matthias Koeppe



---

archive/issue_comments_473265.json:
```json
{
    "body": "<a id='comment:2'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b9d939cda4644785d76063b3d7996866a11c2d34\">b9d939c</a></td><td><code>sage.geometry.polyhedron.modules.formal_polyhedra_module: New</code></td></tr></table>\n",
    "created_at": "2020-06-05T01:13:35Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473265",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b9d939cda4644785d76063b3d7996866a11c2d34">b9d939c</a></td><td><code>sage.geometry.polyhedron.modules.formal_polyhedra_module: New</code></td></tr></table>




---

archive/issue_comments_473266.json:
```json
{
    "body": "**Changing commit** from \"[b9d939cda4644785d76063b3d7996866a11c2d34](https://github.com/sagemath/sagetrac-mirror/commit/b9d939cda4644785d76063b3d7996866a11c2d34)\" to \"[8721d98249a1cde0c389bae5b83afe92d1163c84](https://github.com/sagemath/sagetrac-mirror/commit/8721d98249a1cde0c389bae5b83afe92d1163c84)\".",
    "created_at": "2020-06-05T01:18:24Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473266",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[b9d939cda4644785d76063b3d7996866a11c2d34](https://github.com/sagemath/sagetrac-mirror/commit/b9d939cda4644785d76063b3d7996866a11c2d34)" to "[8721d98249a1cde0c389bae5b83afe92d1163c84](https://github.com/sagemath/sagetrac-mirror/commit/8721d98249a1cde0c389bae5b83afe92d1163c84)".



---

archive/issue_comments_473267.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8721d98249a1cde0c389bae5b83afe92d1163c84\">8721d98</a></td><td><code>Add __init__.py and imports</code></td></tr></table>\n",
    "created_at": "2020-06-05T01:18:24Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473267",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8721d98249a1cde0c389bae5b83afe92d1163c84">8721d98</a></td><td><code>Add __init__.py and imports</code></td></tr></table>




---

archive/issue_comments_473268.json:
```json
{
    "body": "<a id='comment:4'></a>\nThe results of `retract` print using a prefix \"B\".  Do I need to override the submodule method?",
    "created_at": "2020-06-05T01:22:08Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473268",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
The results of `retract` print using a prefix "B".  Do I need to override the submodule method?



---

archive/issue_comments_473269.json:
```json
{
    "body": "<a id='comment:5'></a>\nThis is the default prefix for a submodule, so if you want a different prefix, you will need to override it with something like\n\n```python\ndef submodule(self, gens, check=True, already_echelonized=False,\n              unitriangular=False, category=None):\n    if not already_echelonized:\n        gens = self.echelon_form(gens, unitriangular)\n    from sage.modules.with_basis.subquotient import SubmoduleWithBasis\n        return SubmoduleWithBasis(gens, ambient=self, prefix='M',\n                                  unitriangular=unitriangular,\n                                  category=category)\n```\nHowever, you can set/change this dynamically at any point with:\n\n```\nsage: M_lower.print_options(prefix='V')\nsage: y\nV[0]\n```\nAlthough there probably should be an option added to the `submodule` to pass along such information to the submodule's constructor...",
    "created_at": "2020-06-05T01:42:00Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473269",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>
This is the default prefix for a submodule, so if you want a different prefix, you will need to override it with something like

```python
def submodule(self, gens, check=True, already_echelonized=False,
              unitriangular=False, category=None):
    if not already_echelonized:
        gens = self.echelon_form(gens, unitriangular)
    from sage.modules.with_basis.subquotient import SubmoduleWithBasis
        return SubmoduleWithBasis(gens, ambient=self, prefix='M',
                                  unitriangular=unitriangular,
                                  category=category)
```
However, you can set/change this dynamically at any point with:

```
sage: M_lower.print_options(prefix='V')
sage: y
V[0]
```
Although there probably should be an option added to the `submodule` to pass along such information to the submodule's constructor...



---

archive/issue_comments_473270.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fd5bc3494aafafd41283d8e6c90054e62ebba3c4\">fd5bc34</a></td><td><code>sage.categories.polyhedra_modules: New</code></td></tr></table>\n",
    "created_at": "2020-06-05T01:46:10Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473270",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fd5bc3494aafafd41283d8e6c90054e62ebba3c4">fd5bc34</a></td><td><code>sage.categories.polyhedra_modules: New</code></td></tr></table>




---

archive/issue_comments_473271.json:
```json
{
    "body": "**Changing commit** from \"[8721d98249a1cde0c389bae5b83afe92d1163c84](https://github.com/sagemath/sagetrac-mirror/commit/8721d98249a1cde0c389bae5b83afe92d1163c84)\" to \"[fd5bc3494aafafd41283d8e6c90054e62ebba3c4](https://github.com/sagemath/sagetrac-mirror/commit/fd5bc3494aafafd41283d8e6c90054e62ebba3c4)\".",
    "created_at": "2020-06-05T01:46:10Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473271",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8721d98249a1cde0c389bae5b83afe92d1163c84](https://github.com/sagemath/sagetrac-mirror/commit/8721d98249a1cde0c389bae5b83afe92d1163c84)" to "[fd5bc3494aafafd41283d8e6c90054e62ebba3c4](https://github.com/sagemath/sagetrac-mirror/commit/fd5bc3494aafafd41283d8e6c90054e62ebba3c4)".



---

archive/issue_comments_473272.json:
```json
{
    "body": "<a id='comment:7'></a>\nIs the idea of the prefix for the submodule elements to refer to the ambient module, or to distinguish from the ambient module?",
    "created_at": "2020-06-05T01:49:33Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473272",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
Is the idea of the prefix for the submodule elements to refer to the ambient module, or to distinguish from the ambient module?



---

archive/issue_comments_473273.json:
```json
{
    "body": "<a id='comment:8'></a>\nI am not quite sure I understand your question. All CFMs have a prefix parameter that can be set by the user to help them distinguish between the different *modules they are working with. This is used extensively in Sage (e.g., symmetric functions).",
    "created_at": "2020-06-05T02:23:19Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473273",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>
I am not quite sure I understand your question. All CFMs have a prefix parameter that can be set by the user to help them distinguish between the different *modules they are working with. This is used extensively in Sage (e.g., symmetric functions).



---

archive/issue_comments_473274.json:
```json
{
    "body": "<a id='comment:9'></a>\nI guess I need to ask a more basic question first.  In the example:\n\n```\n   sage: M.basis()\n   Finite family {conv([0], [1]): [conv([0], [1])], {[1]}: [{[1]}], conv([1], [2]): \n   [conv([1], [2])]}\n   sage: M_lower.basis()\n   Finite family {0: B[0]}\n```\nHow come these two bases (of the ambient module and of the submodule) are indexed in very different ways?",
    "created_at": "2020-06-05T05:49:23Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473274",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
I guess I need to ask a more basic question first.  In the example:

```
   sage: M.basis()
   Finite family {conv([0], [1]): [conv([0], [1])], {[1]}: [{[1]}], conv([1], [2]): 
   [conv([1], [2])]}
   sage: M_lower.basis()
   Finite family {0: B[0]}
```
How come these two bases (of the ambient module and of the submodule) are indexed in very different ways?



---

archive/issue_comments_473275.json:
```json
{
    "body": "<a id='comment:10'></a>\nA submodule of dimension d just uses the indexing set 0,...,d-1 because any generic submodule would not necessarily have any particular way to relate its basis with that of the ambient module. Moreover, it needs some indexing set for the basis, so it just chooses the simplest and most generic one. One possible way would be to use the leading support of each of the echeleonized basis elements, but that still feels fairly artificial/arbitrary to me.",
    "created_at": "2020-06-05T11:21:41Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473275",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'></a>
A submodule of dimension d just uses the indexing set 0,...,d-1 because any generic submodule would not necessarily have any particular way to relate its basis with that of the ambient module. Moreover, it needs some indexing set for the basis, so it just chooses the simplest and most generic one. One possible way would be to use the leading support of each of the echeleonized basis elements, but that still feels fairly artificial/arbitrary to me.



---

archive/issue_comments_473276.json:
```json
{
    "body": "<a id='comment:11'></a>\nOK, thanks a lot for the explanation.  I think I will revisit this cosmetic issue later.",
    "created_at": "2020-06-06T00:14:16Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473276",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>
OK, thanks a lot for the explanation.  I think I will revisit this cosmetic issue later.



---

archive/issue_comments_473277.json:
```json
{
    "body": "<a id='comment:12'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a0d791e24e32f7ab190d25360e01031dbfd012ec\">a0d791e</a></td><td><code>WIP: add submodule method</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b2ba70e6001be24bc5e71842f0b79e009681f9a7\">b2ba70e</a></td><td><code>Update documentation</code></td></tr></table>\n",
    "created_at": "2020-06-06T00:14:43Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473277",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a0d791e24e32f7ab190d25360e01031dbfd012ec">a0d791e</a></td><td><code>WIP: add submodule method</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b2ba70e6001be24bc5e71842f0b79e009681f9a7">b2ba70e</a></td><td><code>Update documentation</code></td></tr></table>




---

archive/issue_comments_473278.json:
```json
{
    "body": "**Changing commit** from \"[fd5bc3494aafafd41283d8e6c90054e62ebba3c4](https://github.com/sagemath/sagetrac-mirror/commit/fd5bc3494aafafd41283d8e6c90054e62ebba3c4)\" to \"[b2ba70e6001be24bc5e71842f0b79e009681f9a7](https://github.com/sagemath/sagetrac-mirror/commit/b2ba70e6001be24bc5e71842f0b79e009681f9a7)\".",
    "created_at": "2020-06-06T00:14:43Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473278",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[fd5bc3494aafafd41283d8e6c90054e62ebba3c4](https://github.com/sagemath/sagetrac-mirror/commit/fd5bc3494aafafd41283d8e6c90054e62ebba3c4)" to "[b2ba70e6001be24bc5e71842f0b79e009681f9a7](https://github.com/sagemath/sagetrac-mirror/commit/b2ba70e6001be24bc5e71842f0b79e009681f9a7)".



---

archive/issue_comments_473279.json:
```json
{
    "body": "**Changing commit** from \"[b2ba70e6001be24bc5e71842f0b79e009681f9a7](https://github.com/sagemath/sagetrac-mirror/commit/b2ba70e6001be24bc5e71842f0b79e009681f9a7)\" to \"[5115960d7658f153e6425e7da8e933f1c71e8005](https://github.com/sagemath/sagetrac-mirror/commit/5115960d7658f153e6425e7da8e933f1c71e8005)\".",
    "created_at": "2020-06-06T00:16:36Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473279",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[b2ba70e6001be24bc5e71842f0b79e009681f9a7](https://github.com/sagemath/sagetrac-mirror/commit/b2ba70e6001be24bc5e71842f0b79e009681f9a7)" to "[5115960d7658f153e6425e7da8e933f1c71e8005](https://github.com/sagemath/sagetrac-mirror/commit/5115960d7658f153e6425e7da8e933f1c71e8005)".



---

archive/issue_comments_473280.json:
```json
{
    "body": "<a id='comment:13'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5115960d7658f153e6425e7da8e933f1c71e8005\">5115960</a></td><td><code>Update documentation</code></td></tr></table>\n",
    "created_at": "2020-06-06T00:16:36Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473280",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5115960d7658f153e6425e7da8e933f1c71e8005">5115960</a></td><td><code>Update documentation</code></td></tr></table>




---

archive/issue_comments_473281.json:
```json
{
    "body": "<a id='comment:14'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/59889736fe7e3054e942312141236a02ddea325c\">5988973</a></td><td><code>Update doctests to set prefixes for distinguishing the ambient, sub, quotient</code></td></tr></table>\n",
    "created_at": "2020-06-06T00:19:54Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473281",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/59889736fe7e3054e942312141236a02ddea325c">5988973</a></td><td><code>Update doctests to set prefixes for distinguishing the ambient, sub, quotient</code></td></tr></table>




---

archive/issue_comments_473282.json:
```json
{
    "body": "**Changing commit** from \"[5115960d7658f153e6425e7da8e933f1c71e8005](https://github.com/sagemath/sagetrac-mirror/commit/5115960d7658f153e6425e7da8e933f1c71e8005)\" to \"[59889736fe7e3054e942312141236a02ddea325c](https://github.com/sagemath/sagetrac-mirror/commit/59889736fe7e3054e942312141236a02ddea325c)\".",
    "created_at": "2020-06-06T00:19:54Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473282",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5115960d7658f153e6425e7da8e933f1c71e8005](https://github.com/sagemath/sagetrac-mirror/commit/5115960d7658f153e6425e7da8e933f1c71e8005)" to "[59889736fe7e3054e942312141236a02ddea325c](https://github.com/sagemath/sagetrac-mirror/commit/59889736fe7e3054e942312141236a02ddea325c)".



---

archive/issue_comments_473283.json:
```json
{
    "body": "<a id='comment:15'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ae0c7e5a77cdcb19598db5697bd313e6f84bbb7\">7ae0c7e</a></td><td><code>Add to doc</code></td></tr></table>\n",
    "created_at": "2020-06-06T00:21:37Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473283",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ae0c7e5a77cdcb19598db5697bd313e6f84bbb7">7ae0c7e</a></td><td><code>Add to doc</code></td></tr></table>




---

archive/issue_comments_473284.json:
```json
{
    "body": "**Changing commit** from \"[59889736fe7e3054e942312141236a02ddea325c](https://github.com/sagemath/sagetrac-mirror/commit/59889736fe7e3054e942312141236a02ddea325c)\" to \"[7ae0c7e5a77cdcb19598db5697bd313e6f84bbb7](https://github.com/sagemath/sagetrac-mirror/commit/7ae0c7e5a77cdcb19598db5697bd313e6f84bbb7)\".",
    "created_at": "2020-06-06T00:21:37Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473284",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[59889736fe7e3054e942312141236a02ddea325c](https://github.com/sagemath/sagetrac-mirror/commit/59889736fe7e3054e942312141236a02ddea325c)" to "[7ae0c7e5a77cdcb19598db5697bd313e6f84bbb7](https://github.com/sagemath/sagetrac-mirror/commit/7ae0c7e5a77cdcb19598db5697bd313e6f84bbb7)".



---

archive/issue_comments_473285.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,4 @@\n+Add a class `FormalPolyhedraModule` for formal modules generated by polyhedra, graded by dimension, and a category `PolyhedraModules`.\n \n+So far everything is finitely generated. This will be changed in follow-up tickets.\n+\n``````\n",
    "created_at": "2020-06-06T00:24:07Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473285",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,4 @@
+Add a class `FormalPolyhedraModule` for formal modules generated by polyhedra, graded by dimension, and a category `PolyhedraModules`.
 
+So far everything is finitely generated. This will be changed in follow-up tickets.
+
``````




---

archive/issue_events_265809.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-06-06T00:24:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29801#event-265809"
}
```



---

archive/issue_comments_473286.json:
```json
{
    "body": "<a id='comment:17'></a>\nAt this point, I don't see the need for having a category `PolyhedraModules`. Perhaps this is something you will expand on later, but currently you can just put the `degree_on_basis` in the `FormalPolyhedraModule` (which would belong to the category of `GradedModulesWithBasis`). So can you explain a bit why we should have this category?\n\nIf you do keep the category, `super_categories` needs a doctest.\n\nYour `INPUT:` block should follow this format:\n\n```\nINPUT:\n\n- ``foo`` -- some information\n- ``bar`` -- other information that is\n  really long\n```\nNote the alignment (you have an additional 1 space indentation) and the double `--` for the non-bullet point.\n\n`FormalPolyhedraModule.__init__` needs a doctest; here we usually do a `TestSuite(M).run()` as the test.",
    "created_at": "2020-06-06T00:38:26Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473286",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:17'></a>
At this point, I don't see the need for having a category `PolyhedraModules`. Perhaps this is something you will expand on later, but currently you can just put the `degree_on_basis` in the `FormalPolyhedraModule` (which would belong to the category of `GradedModulesWithBasis`). So can you explain a bit why we should have this category?

If you do keep the category, `super_categories` needs a doctest.

Your `INPUT:` block should follow this format:

```
INPUT:

- ``foo`` -- some information
- ``bar`` -- other information that is
  really long
```
Note the alignment (you have an additional 1 space indentation) and the double `--` for the non-bullet point.

`FormalPolyhedraModule.__init__` needs a doctest; here we usually do a `TestSuite(M).run()` as the test.



---

archive/issue_comments_473287.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [tscrim](#comment%3A17):\n> At this point, I don't see the need for having a category `PolyhedraModules`. Perhaps this is something you will expand on later, but currently you can just put the `degree_on_basis` in the `FormalPolyhedraModule` (which would belong to the category of `GradedModulesWithBasis`). So can you explain a bit why we should have this category?\n\nIt is indeed for future use, when I introduce the space generated by indicator functions of polyhedra, which is the quotient by all inclusion-exclusion relations.  That space is no longer graded, but only filtered by dimension.",
    "created_at": "2020-06-06T00:42:07Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473287",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>
Replying to [tscrim](#comment%3A17):
> At this point, I don't see the need for having a category `PolyhedraModules`. Perhaps this is something you will expand on later, but currently you can just put the `degree_on_basis` in the `FormalPolyhedraModule` (which would belong to the category of `GradedModulesWithBasis`). So can you explain a bit why we should have this category?

It is indeed for future use, when I introduce the space generated by indicator functions of polyhedra, which is the quotient by all inclusion-exclusion relations.  That space is no longer graded, but only filtered by dimension.



---

archive/issue_comments_473288.json:
```json
{
    "body": "<a id='comment:19'></a>\nBut I'll follow your advice and make it just a method of the class for now.",
    "created_at": "2020-06-06T00:44:55Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473288",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:19'></a>
But I'll follow your advice and make it just a method of the class for now.



---

archive/issue_comments_473289.json:
```json
{
    "body": "**Changing commit** from \"[7ae0c7e5a77cdcb19598db5697bd313e6f84bbb7](https://github.com/sagemath/sagetrac-mirror/commit/7ae0c7e5a77cdcb19598db5697bd313e6f84bbb7)\" to \"[37aae77b44856eaaf6f416a3229e8456e0b61faf](https://github.com/sagemath/sagetrac-mirror/commit/37aae77b44856eaaf6f416a3229e8456e0b61faf)\".",
    "created_at": "2020-06-06T00:52:36Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473289",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7ae0c7e5a77cdcb19598db5697bd313e6f84bbb7](https://github.com/sagemath/sagetrac-mirror/commit/7ae0c7e5a77cdcb19598db5697bd313e6f84bbb7)" to "[37aae77b44856eaaf6f416a3229e8456e0b61faf](https://github.com/sagemath/sagetrac-mirror/commit/37aae77b44856eaaf6f416a3229e8456e0b61faf)".



---

archive/issue_comments_473290.json:
```json
{
    "body": "<a id='comment:20'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/37aae77b44856eaaf6f416a3229e8456e0b61faf\">37aae77</a></td><td><code>Remove category, merge method degree_on_basis into the class</code></td></tr></table>\n",
    "created_at": "2020-06-06T00:52:36Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473290",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/37aae77b44856eaaf6f416a3229e8456e0b61faf">37aae77</a></td><td><code>Remove category, merge method degree_on_basis into the class</code></td></tr></table>




---

archive/issue_comments_473291.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [tscrim](#comment%3A17):\n> Your `INPUT:` block should follow this format...\n> Note the alignment (you have an additional 1 space indentation) and the double `--` for the non-bullet point.\n\nThanks, fixed.\n\nI really wish we had a linter for the docstrings that we could run locally instead of wasting reviewers' time with these formatting details and/or waiting for the patchbot...",
    "created_at": "2020-06-06T00:55:03Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473291",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'></a>
Replying to [tscrim](#comment%3A17):
> Your `INPUT:` block should follow this format...
> Note the alignment (you have an additional 1 space indentation) and the double `--` for the non-bullet point.

Thanks, fixed.

I really wish we had a linter for the docstrings that we could run locally instead of wasting reviewers' time with these formatting details and/or waiting for the patchbot...



---

archive/issue_comments_473292.json:
```json
{
    "body": "<a id='comment:22'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bdbd9e4aa28c2d56e2ec265d56e7aea0b791ced2\">bdbd9e4</a></td><td><code>Another formatting fix</code></td></tr></table>\n",
    "created_at": "2020-06-06T01:02:01Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473292",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bdbd9e4aa28c2d56e2ec265d56e7aea0b791ced2">bdbd9e4</a></td><td><code>Another formatting fix</code></td></tr></table>




---

archive/issue_comments_473293.json:
```json
{
    "body": "**Changing commit** from \"[37aae77b44856eaaf6f416a3229e8456e0b61faf](https://github.com/sagemath/sagetrac-mirror/commit/37aae77b44856eaaf6f416a3229e8456e0b61faf)\" to \"[bdbd9e4aa28c2d56e2ec265d56e7aea0b791ced2](https://github.com/sagemath/sagetrac-mirror/commit/bdbd9e4aa28c2d56e2ec265d56e7aea0b791ced2)\".",
    "created_at": "2020-06-06T01:02:01Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473293",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[37aae77b44856eaaf6f416a3229e8456e0b61faf](https://github.com/sagemath/sagetrac-mirror/commit/37aae77b44856eaaf6f416a3229e8456e0b61faf)" to "[bdbd9e4aa28c2d56e2ec265d56e7aea0b791ced2](https://github.com/sagemath/sagetrac-mirror/commit/bdbd9e4aa28c2d56e2ec265d56e7aea0b791ced2)".



---

archive/issue_comments_473294.json:
```json
{
    "body": "<a id='comment:23'></a>\nSorry, that wasn't meant to be a suggestion to remove it; it was purely a question as I don't know what your long term structural plans are. Although I do think purely local to this ticket it is better.\n\nYour `__init__` still needs a doctest, something like\n\n```python\n            sage: from sage.geometry.polyhedron.modules.formal_polyhedra_module import FormalPolyhedraModule\n            sage: def closed_interval(a,b): return Polyhedron(vertices=[[a], [b]])\n            sage: I01 = closed_interval(0, 1); I01.rename(\"conv([0], [1])\")\n            sage: I11 = closed_interval(1, 1); I11.rename(\"{[1]}\")\n            sage: I12 = closed_interval(1, 2); I12.rename(\"conv([1], [2])\")\n            sage: I02 = closed_interval(0, 2); I02.rename(\"conv([0], [2])\")\n            sage: M = FormalPolyhedraModule(QQ, 1, basis=[I01, I11, I12, I02])\n            sage: TestSuite(M).run()\n```\n\nTo help avoid some confusion in `degree_on_basis`, I think it would be a bit better to say `this would only be a filtration,` since this module does not (yet) have the linear relations implemented and it is in the category of graded modules.\n\nIndeed, such a linter would be nice.",
    "created_at": "2020-06-06T01:03:02Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473294",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:23'></a>
Sorry, that wasn't meant to be a suggestion to remove it; it was purely a question as I don't know what your long term structural plans are. Although I do think purely local to this ticket it is better.

Your `__init__` still needs a doctest, something like

```python
            sage: from sage.geometry.polyhedron.modules.formal_polyhedra_module import FormalPolyhedraModule
            sage: def closed_interval(a,b): return Polyhedron(vertices=[[a], [b]])
            sage: I01 = closed_interval(0, 1); I01.rename("conv([0], [1])")
            sage: I11 = closed_interval(1, 1); I11.rename("{[1]}")
            sage: I12 = closed_interval(1, 2); I12.rename("conv([1], [2])")
            sage: I02 = closed_interval(0, 2); I02.rename("conv([0], [2])")
            sage: M = FormalPolyhedraModule(QQ, 1, basis=[I01, I11, I12, I02])
            sage: TestSuite(M).run()
```

To help avoid some confusion in `degree_on_basis`, I think it would be a bit better to say `this would only be a filtration,` since this module does not (yet) have the linear relations implemented and it is in the category of graded modules.

Indeed, such a linter would be nice.



---

archive/issue_comments_473295.json:
```json
{
    "body": "<a id='comment:24'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aecc78a392862650bfcae3a6a058c77b77dad72d\">aecc78a</a></td><td><code>Update doc and link into reference manual</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/463dea29704f27a9f23a639b5dedcdf83711d9fb\">463dea2</a></td><td><code>FormalPolyhedraModule.__init__: Add test</code></td></tr></table>\n",
    "created_at": "2020-06-06T01:16:38Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473295",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aecc78a392862650bfcae3a6a058c77b77dad72d">aecc78a</a></td><td><code>Update doc and link into reference manual</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/463dea29704f27a9f23a639b5dedcdf83711d9fb">463dea2</a></td><td><code>FormalPolyhedraModule.__init__: Add test</code></td></tr></table>




---

archive/issue_comments_473296.json:
```json
{
    "body": "**Changing commit** from \"[bdbd9e4aa28c2d56e2ec265d56e7aea0b791ced2](https://github.com/sagemath/sagetrac-mirror/commit/bdbd9e4aa28c2d56e2ec265d56e7aea0b791ced2)\" to \"[463dea29704f27a9f23a639b5dedcdf83711d9fb](https://github.com/sagemath/sagetrac-mirror/commit/463dea29704f27a9f23a639b5dedcdf83711d9fb)\".",
    "created_at": "2020-06-06T01:16:38Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473296",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[bdbd9e4aa28c2d56e2ec265d56e7aea0b791ced2](https://github.com/sagemath/sagetrac-mirror/commit/bdbd9e4aa28c2d56e2ec265d56e7aea0b791ced2)" to "[463dea29704f27a9f23a639b5dedcdf83711d9fb](https://github.com/sagemath/sagetrac-mirror/commit/463dea29704f27a9f23a639b5dedcdf83711d9fb)".



---

archive/issue_comments_473297.json:
```json
{
    "body": "<a id='comment:25'></a>\nDone.",
    "created_at": "2020-06-06T01:17:16Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473297",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'></a>
Done.



---

archive/issue_comments_473298.json:
```json
{
    "body": "<a id='comment:26'></a>\nReplying to [tscrim](#comment%3A23):\n> Indeed, such a linter would be nice.\n\nMeta-ticket #28936 (Adopt mainstream Python testing/linting infrastructure, describe in Developer's Guide) has several wishlist items in this direction.",
    "created_at": "2020-06-06T01:18:59Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473298",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>
Replying to [tscrim](#comment%3A23):
> Indeed, such a linter would be nice.

Meta-ticket #28936 (Adopt mainstream Python testing/linting infrastructure, describe in Developer's Guide) has several wishlist items in this direction.



---

archive/issue_events_265810.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2020-06-06T02:14:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29801#event-265810"
}
```



---

archive/issue_events_265811.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2020-06-06T02:14:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29801#event-265811"
}
```



---

archive/issue_comments_473299.json:
```json
{
    "body": "<a id='comment:27'></a>\nThank you.",
    "created_at": "2020-06-06T02:14:31Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473299",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:27'></a>
Thank you.



---

archive/issue_comments_473300.json:
```json
{
    "body": "**Reviewer:** Travis Scrimshaw",
    "created_at": "2020-06-06T02:14:31Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473300",
    "user": "https://github.com/tscrim"
}
```

**Reviewer:** Travis Scrimshaw



---

archive/issue_comments_473301.json:
```json
{
    "body": "<a id='comment:28'></a>\nThanks!",
    "created_at": "2020-06-06T02:16:29Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473301",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:28'></a>
Thanks!



---

archive/issue_events_265812.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-06-27T09:26:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29801#event-265812"
}
```



---

archive/issue_events_265813.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "699f21662122727acdc298ef524ff238aa1cb9ac",
    "created_at": "2020-06-27T09:26:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29801#event-265813"
}
```



---

archive/issue_comments_473302.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/formalpolyhedramodule____so_far_finitely_generated__free_modules](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/formalpolyhedramodule____so_far_finitely_generated__free_modules)\" to \"[463dea29704f27a9f23a639b5dedcdf83711d9fb](https://github.com/sagemath/sagetrac-mirror/commit/463dea29704f27a9f23a639b5dedcdf83711d9fb)\".",
    "created_at": "2020-06-27T09:26:20Z",
    "issue": "https://github.com/sagemath/sage/issues/29801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29801#issuecomment-473302",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/mkoeppe/formalpolyhedramodule____so_far_finitely_generated__free_modules](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/formalpolyhedramodule____so_far_finitely_generated__free_modules)" to "[463dea29704f27a9f23a639b5dedcdf83711d9fb](https://github.com/sagemath/sagetrac-mirror/commit/463dea29704f27a9f23a639b5dedcdf83711d9fb)".
