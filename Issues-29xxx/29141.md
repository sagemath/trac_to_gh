# Issue 29141: Meta-ticket: Remove Python 2 support for Sage 9.2; upgrades enabled by the removal

archive/issues_028904.json:
```json
{
    "body": "From https://groups.google.com/forum/#!topic/sage-devel/vYlbnAwKATM \"drop python2 compatibility in 9.1\" (thread Jan 5-22, 2020).\n\nRemoval of Python 2 support in Sage 9.2 has been announced at https://wiki.sagemath.org/Python3-Switch and https://wiki.sagemath.org/ReleaseTours/sage-9.1\n\nRemoval tickets:\n\n- #28000 For Sage 9.2: Remove python 2 support from sagelib\n- #29669 For Sage 9.2: Remove Python 2 support from the build system and CI scripts\n- #27826 - remove `long` hack for Python 3 in `doctest/forker.py`, remove all calls to `long()`\n- #29754 - remove Python 2 package and packages which backports various parts of Python\n\nUpgrade tickets:\n\n**Please check that upgraded packages are compatible with Python >= 3.6** (and note this on the upgrade ticket) because we may wish to support Python 3.6 venv (#29033).\n\n- #28197 - upgrade to ipython 7 / prompt-toolkit 2. See also #29042\n- #27754 - Upgrade: Python 3.8.x (see ticket:27754#comment:55 in particular)\n- numpy >= 1.17 - #29425 Upgrade Cython to 0.29.16, NumPy to 1.18.2 to fix numpy build error on local-conda-forge-macos-standard\n- #29730 Update sympy to 1.6\n- matplotlib-3: #29547. Related: #28449 and ticket:27866#comment:25\n- sphinx-2: #28856, #29095\n- scipy-1.3+: #29115\n- rpy2 3.x: #28988, #29441 \n- networkx 2.4: #28450\n- #29803 - Upgrade setuptools, setuptools_scm, pip\n\nOther:\n\n- compatibility with python 3.8... needs details\n  * \"at this point the major issues are python 3.8 and ipython 7, and I don't see how one could support several versions of them without forking hundreds of doctests. Both updates require multi-thousand-lines patches, due to changes in dict sorting and hashes.\"\n- remove `src/sage/cpython/_py2_random.py`\n  * This was added in #24508 and is only used during doctesting in order to ensure consistent random results between Python 2 and 3.\n \nReference: Tickets that kept Python 2 compatibility but introduced a performance penalty for Python 2:\n\n- #29103 (get rid of part of itervalues)\n\nSee also:\n\n- #29756 Meta-ticket: Review of Python 3 features that sagelib should use systematically\n\n**CC:**  @fchapoton @embray @jdemeyer @slel @antonio-rojas @kiwifb @timokau @jhpalmieri @tscrim @isuruf @nbruin @orlitzky @vbraun @dimpase @videlec @kliem\n\n**Keywords:** sd109\n\n**Reviewer:** Dima Pasechnik\n\n**Resolution:** worksforme\n\nIssue created by migration from https://trac.sagemath.org/ticket/29141\n\n",
    "closed_at": "2020-08-22T08:52:15Z",
    "created_at": "2020-02-02T14:14:20Z",
    "labels": [
        "component: python3"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Meta-ticket: Remove Python 2 support for Sage 9.2; upgrades enabled by the removal",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29141",
    "user": "https://github.com/mkoeppe"
}
```
From https://groups.google.com/forum/#!topic/sage-devel/vYlbnAwKATM "drop python2 compatibility in 9.1" (thread Jan 5-22, 2020).

Removal of Python 2 support in Sage 9.2 has been announced at https://wiki.sagemath.org/Python3-Switch and https://wiki.sagemath.org/ReleaseTours/sage-9.1

Removal tickets:

- #28000 For Sage 9.2: Remove python 2 support from sagelib
- #29669 For Sage 9.2: Remove Python 2 support from the build system and CI scripts
- #27826 - remove `long` hack for Python 3 in `doctest/forker.py`, remove all calls to `long()`
- #29754 - remove Python 2 package and packages which backports various parts of Python

Upgrade tickets:

**Please check that upgraded packages are compatible with Python >= 3.6** (and note this on the upgrade ticket) because we may wish to support Python 3.6 venv (#29033).

- #28197 - upgrade to ipython 7 / prompt-toolkit 2. See also #29042
- #27754 - Upgrade: Python 3.8.x (see ticket:27754#comment:55 in particular)
- numpy >= 1.17 - #29425 Upgrade Cython to 0.29.16, NumPy to 1.18.2 to fix numpy build error on local-conda-forge-macos-standard
- #29730 Update sympy to 1.6
- matplotlib-3: #29547. Related: #28449 and ticket:27866#comment:25
- sphinx-2: #28856, #29095
- scipy-1.3+: #29115
- rpy2 3.x: #28988, #29441 
- networkx 2.4: #28450
- #29803 - Upgrade setuptools, setuptools_scm, pip

Other:

- compatibility with python 3.8... needs details
  * "at this point the major issues are python 3.8 and ipython 7, and I don't see how one could support several versions of them without forking hundreds of doctests. Both updates require multi-thousand-lines patches, due to changes in dict sorting and hashes."
- remove `src/sage/cpython/_py2_random.py`
  * This was added in #24508 and is only used during doctesting in order to ensure consistent random results between Python 2 and 3.
 
Reference: Tickets that kept Python 2 compatibility but introduced a performance penalty for Python 2:

- #29103 (get rid of part of itervalues)

See also:

- #29756 Meta-ticket: Review of Python 3 features that sagelib should use systematically

**CC:**  @fchapoton @embray @jdemeyer @slel @antonio-rojas @kiwifb @timokau @jhpalmieri @tscrim @isuruf @nbruin @orlitzky @vbraun @dimpase @videlec @kliem

**Keywords:** sd109

**Reviewer:** Dima Pasechnik

**Resolution:** worksforme

Issue created by migration from https://trac.sagemath.org/ticket/29141





---

archive/issue_comments_569147.json:
```json
{
    "body": "<a id='comment:1'></a>\npython 3.8 update is tracked in #27754, there is a list of issues that need fixing. rpy3 support is merged already in 9.1.beta2 (#28988), as well as networkx 2.4, which is also py3-only (#28450). IMO #28190 is no longer worth the effort at this point, provided that python2 support is to be dropped at 9.2 in the worst case.",
    "created_at": "2020-02-02T14:36:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29141",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29141#issuecomment-569147",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:1'></a>
python 3.8 update is tracked in #27754, there is a list of issues that need fixing. rpy3 support is merged already in 9.1.beta2 (#28988), as well as networkx 2.4, which is also py3-only (#28450). IMO #28190 is no longer worth the effort at this point, provided that python2 support is to be dropped at 9.2 in the worst case.



---

archive/issue_comments_569148.json:
```json
{
    "body": "<a id='comment:2'></a>\nPlease feel free to update the ticket description.",
    "created_at": "2020-02-02T14:37:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29141",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29141#issuecomment-569148",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
Please feel free to update the ticket description.



---

archive/issue_comments_569149.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,19 +2,20 @@\n \n Tickets:\n \n-- #28197- upgrade to ipython 7 / prompt-toolkit 2\n+- #28197 - upgrade to ipython 7 / prompt-toolkit 2. See also #29042\n+- #27754 - Upgrade: Python 3.8.x (see ticket:27754#comment:55 in particular)\n \n Goals without tickets:\n \n - compatibility with python 3.8... needs details\n   * \"at this point the major issues are python 3.8 and ipython 7, and I don't see how one could support several versions of them without forking hundreds of doctests. Both updates require multi-thousand-lines patches, due to changes in dict sorting and hashes.\"\n - packages upgrades:\n-  * matplotlib-3\n-  * sphinx-2\n+  * matplotlib-3. Related: #28449 and ticket:27866#comment:25\n+  * sphinx-2: #28856, #29095\n   * numpy-1.17\n-  * scipy-1.3+\n-  * rpy2: sage has rpy2 2.8.2. rpy2 latest is 3.2.4 but 3.x series is python 3 only and sage requires breaking changes to support rpy2 3.x. See ticket:28494#comment:6\n-While python2 support for rpy2 is required, sage codebase can't be updated to 3.x (unless someone adds code to detect rpy2 version and support both 2.8.2 and 3.2.4). See also #28988.\n+  * scipy-1.3+: #29115\n+  * rpy2 3.x: #28988\n+  * networkx 2.4: #28450\n  \n - deprecation warning when people use './configure --with-python=2'.\n - document milestone 9.2 or 10 as py3-only\n``````\n",
    "created_at": "2020-02-02T14:56:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29141",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29141#issuecomment-569149",
    "user": "https://github.com/antonio-rojas"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,19 +2,20 @@
 
 Tickets:
 
-- #28197- upgrade to ipython 7 / prompt-toolkit 2
+- #28197 - upgrade to ipython 7 / prompt-toolkit 2. See also #29042
+- #27754 - Upgrade: Python 3.8.x (see ticket:27754#comment:55 in particular)
 
 Goals without tickets:
 
 - compatibility with python 3.8... needs details
   * "at this point the major issues are python 3.8 and ipython 7, and I don't see how one could support several versions of them without forking hundreds of doctests. Both updates require multi-thousand-lines patches, due to changes in dict sorting and hashes."
 - packages upgrades:
-  * matplotlib-3
-  * sphinx-2
+  * matplotlib-3. Related: #28449 and ticket:27866#comment:25
+  * sphinx-2: #28856, #29095
   * numpy-1.17
-  * scipy-1.3+
-  * rpy2: sage has rpy2 2.8.2. rpy2 latest is 3.2.4 but 3.x series is python 3 only and sage requires breaking changes to support rpy2 3.x. See ticket:28494#comment:6
-While python2 support for rpy2 is required, sage codebase can't be updated to 3.x (unless someone adds code to detect rpy2 version and support both 2.8.2 and 3.2.4). See also #28988.
+  * scipy-1.3+: #29115
+  * rpy2 3.x: #28988
+  * networkx 2.4: #28450
  
 - deprecation warning when people use './configure --with-python=2'.
 - document milestone 9.2 or 10 as py3-only
``````




---

archive/issue_comments_569150.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -24,4 +24,6 @@\n \n - #28190: Allow different versions of python modules depending on the python version used\n \n+See also:\n \n+- #28000: Remove python 2 support\n``````\n",
    "created_at": "2020-02-10T00:08:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29141",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29141#issuecomment-569150",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -24,4 +24,6 @@
 
 - #28190: Allow different versions of python modules depending on the python version used
 
+See also:
 
+- #28000: Remove python 2 support
``````




---

archive/issue_comments_569151.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -24,6 +24,10 @@\n \n - #28190: Allow different versions of python modules depending on the python version used\n \n+Tickets that keep Python 2 compatibility but introduce a performance penalty for Python 2:\n+\n+- #29103 (get rid of part of itervalues)\n+\n See also:\n \n - #28000: Remove python 2 support\n``````\n",
    "created_at": "2020-02-16T20:53:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29141",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29141#issuecomment-569151",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -24,6 +24,10 @@
 
 - #28190: Allow different versions of python modules depending on the python version used
 
+Tickets that keep Python 2 compatibility but introduce a performance penalty for Python 2:
+
+- #29103 (get rid of part of itervalues)
+
 See also:
 
 - #28000: Remove python 2 support
``````




---

archive/issue_comments_569152.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,6 +4,7 @@\n \n - #28197 - upgrade to ipython 7 / prompt-toolkit 2. See also #29042\n - #27754 - Upgrade: Python 3.8.x (see ticket:27754#comment:55 in particular)\n+- numpy >= 1.17 - #29425 Upgrade Cython to 0.29.16, NumPy to 1.18.2 to fix numpy build error on local-conda-forge-macos-standard\n \n Goals without tickets:\n \n@@ -12,7 +13,6 @@\n - packages upgrades:\n   * matplotlib-3. Related: #28449 and ticket:27866#comment:25\n   * sphinx-2: #28856, #29095\n-  * numpy-1.17\n   * scipy-1.3+: #29115\n   * rpy2 3.x: #28988\n   * networkx 2.4: #28450\n``````\n",
    "created_at": "2020-03-30T12:30:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29141",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29141#issuecomment-569152",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,6 +4,7 @@
 
 - #28197 - upgrade to ipython 7 / prompt-toolkit 2. See also #29042
 - #27754 - Upgrade: Python 3.8.x (see ticket:27754#comment:55 in particular)
+- numpy >= 1.17 - #29425 Upgrade Cython to 0.29.16, NumPy to 1.18.2 to fix numpy build error on local-conda-forge-macos-standard
 
 Goals without tickets:
 
@@ -12,7 +13,6 @@
 - packages upgrades:
   * matplotlib-3. Related: #28449 and ticket:27866#comment:25
   * sphinx-2: #28856, #29095
-  * numpy-1.17
   * scipy-1.3+: #29115
   * rpy2 3.x: #28988
   * networkx 2.4: #28450
``````




---

archive/issue_comments_569153.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -14,7 +14,7 @@\n   * matplotlib-3. Related: #28449 and ticket:27866#comment:25\n   * sphinx-2: #28856, #29095\n   * scipy-1.3+: #29115\n-  * rpy2 3.x: #28988\n+  * rpy2 3.x: #28988, #29441 \n   * networkx 2.4: #28450\n  \n - deprecation warning when people use './configure --with-python=2'.\n``````\n",
    "created_at": "2020-03-31T21:19:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29141",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29141#issuecomment-569153",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -14,7 +14,7 @@
   * matplotlib-3. Related: #28449 and ticket:27866#comment:25
   * sphinx-2: #28856, #29095
   * scipy-1.3+: #29115
-  * rpy2 3.x: #28988
+  * rpy2 3.x: #28988, #29441 
   * networkx 2.4: #28450
  
 - deprecation warning when people use './configure --with-python=2'.
``````




---

archive/issue_comments_569154.json:
```json
{
    "body": "<a id='comment:8'></a>\nI have just updated https://wiki.sagemath.org/Python3-Switch to say that the upcoming 9.1 will still support Python 2",
    "created_at": "2020-04-08T20:45:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29141",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29141#issuecomment-569154",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
I have just updated https://wiki.sagemath.org/Python3-Switch to say that the upcoming 9.1 will still support Python 2



---

archive/issue_comments_569155.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -11,7 +11,7 @@\n - compatibility with python 3.8... needs details\n   * \"at this point the major issues are python 3.8 and ipython 7, and I don't see how one could support several versions of them without forking hundreds of doctests. Both updates require multi-thousand-lines patches, due to changes in dict sorting and hashes.\"\n - packages upgrades:\n-  * matplotlib-3. Related: #28449 and ticket:27866#comment:25\n+  * matplotlib-3: #29547. Related: #28449 and ticket:27866#comment:25\n   * sphinx-2: #28856, #29095\n   * scipy-1.3+: #29115\n   * rpy2 3.x: #28988, #29441 \n``````\n",
    "created_at": "2020-04-21T22:40:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29141",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29141#issuecomment-569155",
    "user": "https://github.com/jhpalmieri"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -11,7 +11,7 @@
 - compatibility with python 3.8... needs details
   * "at this point the major issues are python 3.8 and ipython 7, and I don't see how one could support several versions of them without forking hundreds of doctests. Both updates require multi-thousand-lines patches, due to changes in dict sorting and hashes."
 - packages upgrades:
-  * matplotlib-3. Related: #28449 and ticket:27866#comment:25
+  * matplotlib-3: #29547. Related: #28449 and ticket:27866#comment:25
   * sphinx-2: #28856, #29095
   * scipy-1.3+: #29115
   * rpy2 3.x: #28988, #29441 
``````




---

archive/issue_events_083462.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/29141",
    "rename": {
        "from": "Meta-ticket: Upgrades and other changes that require dropping py2 support or separate package versions for py2/py3",
        "to": "Meta-ticket: Remove Python 2 support for Sage 9.2; upgrades enabled by the removal"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29141#event-83462"
}
```



---

archive/issue_comments_569156.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,6 +2,8 @@\n \n Tickets:\n \n+- #28000 For Sage 9.2: Remove python 2 support from sagelib\n+- #29669 For Sage 9.2: Remove Python 2 support from the build system and CI scripts\n - #28197 - upgrade to ipython 7 / prompt-toolkit 2. See also #29042\n - #27754 - Upgrade: Python 3.8.x (see ticket:27754#comment:55 in particular)\n - numpy >= 1.17 - #29425 Upgrade Cython to 0.29.16, NumPy to 1.18.2 to fix numpy build error on local-conda-forge-macos-standard\n@@ -28,6 +30,4 @@\n \n - #29103 (get rid of part of itervalues)\n \n-See also:\n \n-- #28000: Remove python 2 support\n``````\n",
    "created_at": "2020-05-09T19:25:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29141",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29141#issuecomment-569156",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,6 +2,8 @@
 
 Tickets:
 
+- #28000 For Sage 9.2: Remove python 2 support from sagelib
+- #29669 For Sage 9.2: Remove Python 2 support from the build system and CI scripts
 - #28197 - upgrade to ipython 7 / prompt-toolkit 2. See also #29042
 - #27754 - Upgrade: Python 3.8.x (see ticket:27754#comment:55 in particular)
 - numpy >= 1.17 - #29425 Upgrade Cython to 0.29.16, NumPy to 1.18.2 to fix numpy build error on local-conda-forge-macos-standard
@@ -28,6 +30,4 @@
 
 - #29103 (get rid of part of itervalues)
 
-See also:
 
-- #28000: Remove python 2 support
``````




---

archive/issue_comments_569157.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n From https://groups.google.com/forum/#!topic/sage-devel/vYlbnAwKATM \"drop python2 compatibility in 9.1' (thread Jan 5-22, 2020).\n+\n+Removal of Python 2 support in Sage 9.2 has been announced at https://wiki.sagemath.org/Python3-Switch and https://wiki.sagemath.org/ReleaseTours/sage-9.1\n \n Tickets:\n \n@@ -19,14 +21,7 @@\n   * rpy2 3.x: #28988, #29441 \n   * networkx 2.4: #28450\n  \n-- deprecation warning when people use './configure --with-python=2'.\n-- document milestone 9.2 or 10 as py3-only\n-\n-Separate package versions:\n-\n-- #28190: Allow different versions of python modules depending on the python version used\n-\n-Tickets that keep Python 2 compatibility but introduce a performance penalty for Python 2:\n+Tickets that kept Python 2 compatibility but introduced a performance penalty for Python 2:\n \n - #29103 (get rid of part of itervalues)\n \n``````\n",
    "created_at": "2020-05-09T19:27:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29141",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29141#issuecomment-569157",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,6 @@
 From https://groups.google.com/forum/#!topic/sage-devel/vYlbnAwKATM "drop python2 compatibility in 9.1' (thread Jan 5-22, 2020).
+
+Removal of Python 2 support in Sage 9.2 has been announced at https://wiki.sagemath.org/Python3-Switch and https://wiki.sagemath.org/ReleaseTours/sage-9.1
 
 Tickets:
 
@@ -19,14 +21,7 @@
   * rpy2 3.x: #28988, #29441 
   * networkx 2.4: #28450
  
-- deprecation warning when people use './configure --with-python=2'.
-- document milestone 9.2 or 10 as py3-only
-
-Separate package versions:
-
-- #28190: Allow different versions of python modules depending on the python version used
-
-Tickets that keep Python 2 compatibility but introduce a performance penalty for Python 2:
+Tickets that kept Python 2 compatibility but introduced a performance penalty for Python 2:
 
 - #29103 (get rid of part of itervalues)
 
``````




---

archive/issue_comments_569158.json:
```json
{
    "body": "<a id='comment:12'></a>\nI am working on #29042 and I noticed that neither #28000 or #29669 remove `# py2` and  `# py3` for doctesting. Is there a ticket for that which should then be in the summary, or is it something that is planned to be removed on the longer term?",
    "created_at": "2020-05-23T09:56:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29141",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29141#issuecomment-569158",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:12'></a>
I am working on #29042 and I noticed that neither #28000 or #29669 remove `# py2` and  `# py3` for doctesting. Is there a ticket for that which should then be in the summary, or is it something that is planned to be removed on the longer term?



---

archive/issue_comments_569159.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -9,6 +9,7 @@\n - #28197 - upgrade to ipython 7 / prompt-toolkit 2. See also #29042\n - #27754 - Upgrade: Python 3.8.x (see ticket:27754#comment:55 in particular)\n - numpy >= 1.17 - #29425 Upgrade Cython to 0.29.16, NumPy to 1.18.2 to fix numpy build error on local-conda-forge-macos-standard\n+- #29730 Update sympy to 1.6\n \n Goals without tickets:\n \n``````\n",
    "created_at": "2020-05-25T00:43:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29141",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29141#issuecomment-569159",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -9,6 +9,7 @@
 - #28197 - upgrade to ipython 7 / prompt-toolkit 2. See also #29042
 - #27754 - Upgrade: Python 3.8.x (see ticket:27754#comment:55 in particular)
 - numpy >= 1.17 - #29425 Upgrade Cython to 0.29.16, NumPy to 1.18.2 to fix numpy build error on local-conda-forge-macos-standard
+- #29730 Update sympy to 1.6
 
 Goals without tickets:
 
``````




---

archive/issue_comments_569160.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -10,6 +10,7 @@\n - #27754 - Upgrade: Python 3.8.x (see ticket:27754#comment:55 in particular)\n - numpy >= 1.17 - #29425 Upgrade Cython to 0.29.16, NumPy to 1.18.2 to fix numpy build error on local-conda-forge-macos-standard\n - #29730 Update sympy to 1.6\n+- #27826 - remove `long` hack for Python 3 in `doctest/forker.py`, remove all calls to `long()`\n \n Goals without tickets:\n \n``````\n",
    "created_at": "2020-05-25T03:10:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29141",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29141#issuecomment-569160",
    "user": "https://github.com/jhpalmieri"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -10,6 +10,7 @@
 - #27754 - Upgrade: Python 3.8.x (see ticket:27754#comment:55 in particular)
 - numpy >= 1.17 - #29425 Upgrade Cython to 0.29.16, NumPy to 1.18.2 to fix numpy build error on local-conda-forge-macos-standard
 - #29730 Update sympy to 1.6
+- #27826 - remove `long` hack for Python 3 in `doctest/forker.py`, remove all calls to `long()`
 
 Goals without tickets:
 
``````




---

archive/issue_comments_569161.json:
```json
{
    "body": "<a id='comment:15'></a>\n@kiwifb: I don't know of any ticket for removing `py2` and `py3` tags.",
    "created_at": "2020-05-25T03:10:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29141",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29141#issuecomment-569161",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:15'></a>
@kiwifb: I don't know of any ticket for removing `py2` and `py3` tags.



---

archive/issue_comments_569162.json:
```json
{
    "body": "<a id='comment:16'></a>\nAnother thing that I spotted scanning stuff in #29633. We have a lot python feature backport packages in our tree. We may want to get rid of them as we get rid of python 2.7 and anything older than python 3.7 in fact. Look at `enum34` if you don't get what I mean.",
    "created_at": "2020-05-26T09:20:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29141",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29141#issuecomment-569162",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:16'></a>
Another thing that I spotted scanning stuff in #29633. We have a lot python feature backport packages in our tree. We may want to get rid of them as we get rid of python 2.7 and anything older than python 3.7 in fact. Look at `enum34` if you don't get what I mean.



---

archive/issue_comments_569163.json:
```json
{
    "body": "<a id='comment:17'></a>\n> Another thing that I spotted scanning stuff in #29633.\n> We have a lot of Python feature backport packages in our tree.\n> We may want to get rid of them as we get rid of Python 2.7\n> and anything older than Python 3.7 in fact. Look at `enum34`\n> if you don't get what I mean.\n\n\nConsider keeping support Python 3.6, whose official support is till 2021-12-23. See #29033.\n\nPython 3.5 support ends in 2020-09, so fine to drop it. See life cycle of Python versions:\n\n- currently or recently supported versions: https://www.python.org/downloads/\n- older versions: https://devguide.python.org/devcycle/#end-of-life-branches",
    "created_at": "2020-05-26T12:43:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29141",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29141#issuecomment-569163",
    "user": "https://github.com/slel"
}
```

<a id='comment:17'></a>
> Another thing that I spotted scanning stuff in #29633.
> We have a lot of Python feature backport packages in our tree.
> We may want to get rid of them as we get rid of Python 2.7
> and anything older than Python 3.7 in fact. Look at `enum34`
> if you don't get what I mean.


Consider keeping support Python 3.6, whose official support is till 2021-12-23. See #29033.

Python 3.5 support ends in 2020-09, so fine to drop it. See life cycle of Python versions:

- currently or recently supported versions: https://www.python.org/downloads/
- older versions: https://devguide.python.org/devcycle/#end-of-life-branches



---

archive/issue_comments_569164.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"sd109\".",
    "created_at": "2020-05-28T06:05:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29141",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29141#issuecomment-569164",
    "user": "https://github.com/mkoeppe"
}
```

**Changing keywords** from "" to "sd109".



---

archive/issue_comments_569165.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [fbissey](#comment%3A16):\n> Another thing that I spotted scanning stuff in #29633. We have a lot python feature backport packages in our tree. We may want to get rid of them as we get rid of python 2.7 and anything older than python 3.7 in fact. Look at `enum34` if you don't get what I mean. \n\n\nI'm working on this. I'll open up a ticket and post a link here some time soon.",
    "created_at": "2020-05-28T17:59:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29141",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29141#issuecomment-569165",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:19'></a>
Replying to [fbissey](#comment%3A16):
> Another thing that I spotted scanning stuff in #29633. We have a lot python feature backport packages in our tree. We may want to get rid of them as we get rid of python 2.7 and anything older than python 3.7 in fact. Look at `enum34` if you don't get what I mean. 


I'm working on this. I'll open up a ticket and post a link here some time soon.



---

archive/issue_comments_569166.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [jhpalmieri](#comment%3A19):\n> I'm working on this. I'll open up a ticket and post a link here some time soon.\n\n\nSee #29754.",
    "created_at": "2020-05-28T20:33:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29141",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29141#issuecomment-569166",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:20'></a>
Replying to [jhpalmieri](#comment%3A19):
> I'm working on this. I'll open up a ticket and post a link here some time soon.


See #29754.



---

archive/issue_comments_569167.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -11,6 +11,7 @@\n - numpy >= 1.17 - #29425 Upgrade Cython to 0.29.16, NumPy to 1.18.2 to fix numpy build error on local-conda-forge-macos-standard\n - #29730 Update sympy to 1.6\n - #27826 - remove `long` hack for Python 3 in `doctest/forker.py`, remove all calls to `long()`\n+- #29754 - remove Python 2 package and packages which backports various parts of Python\n \n Goals without tickets:\n \n``````\n",
    "created_at": "2020-05-28T20:38:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29141",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29141#issuecomment-569167",
    "user": "https://github.com/jhpalmieri"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -11,6 +11,7 @@
 - numpy >= 1.17 - #29425 Upgrade Cython to 0.29.16, NumPy to 1.18.2 to fix numpy build error on local-conda-forge-macos-standard
 - #29730 Update sympy to 1.6
 - #27826 - remove `long` hack for Python 3 in `doctest/forker.py`, remove all calls to `long()`
+- #29754 - remove Python 2 package and packages which backports various parts of Python
 
 Goals without tickets:
 
``````




---

archive/issue_comments_569168.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -28,4 +28,6 @@\n \n - #29103 (get rid of part of itervalues)\n \n+See also:\n \n+- #29756 Meta-ticket: Review of Python 3 features that sagelib should use systematically\n``````\n",
    "created_at": "2020-05-29T15:16:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29141",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29141#issuecomment-569168",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -28,4 +28,6 @@
 
 - #29103 (get rid of part of itervalues)
 
+See also:
 
+- #29756 Meta-ticket: Review of Python 3 features that sagelib should use systematically
``````




---

archive/issue_comments_569169.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,29 +2,32 @@\n \n Removal of Python 2 support in Sage 9.2 has been announced at https://wiki.sagemath.org/Python3-Switch and https://wiki.sagemath.org/ReleaseTours/sage-9.1\n \n-Tickets:\n+Removal tickets:\n \n - #28000 For Sage 9.2: Remove python 2 support from sagelib\n - #29669 For Sage 9.2: Remove Python 2 support from the build system and CI scripts\n+- #27826 - remove `long` hack for Python 3 in `doctest/forker.py`, remove all calls to `long()`\n+- #29754 - remove Python 2 package and packages which backports various parts of Python\n+\n+Upgrade tickets:\n+\n - #28197 - upgrade to ipython 7 / prompt-toolkit 2. See also #29042\n - #27754 - Upgrade: Python 3.8.x (see ticket:27754#comment:55 in particular)\n - numpy >= 1.17 - #29425 Upgrade Cython to 0.29.16, NumPy to 1.18.2 to fix numpy build error on local-conda-forge-macos-standard\n - #29730 Update sympy to 1.6\n-- #27826 - remove `long` hack for Python 3 in `doctest/forker.py`, remove all calls to `long()`\n-- #29754 - remove Python 2 package and packages which backports various parts of Python\n+- matplotlib-3: #29547. Related: #28449 and ticket:27866#comment:25\n+- sphinx-2: #28856, #29095\n+- scipy-1.3+: #29115\n+- rpy2 3.x: #28988, #29441 \n+- networkx 2.4: #28450\n+- #29803 - Upgrade setuptools, setuptools_scm, pip\n \n-Goals without tickets:\n+Other:\n \n - compatibility with python 3.8... needs details\n   * \"at this point the major issues are python 3.8 and ipython 7, and I don't see how one could support several versions of them without forking hundreds of doctests. Both updates require multi-thousand-lines patches, due to changes in dict sorting and hashes.\"\n-- packages upgrades:\n-  * matplotlib-3: #29547. Related: #28449 and ticket:27866#comment:25\n-  * sphinx-2: #28856, #29095\n-  * scipy-1.3+: #29115\n-  * rpy2 3.x: #28988, #29441 \n-  * networkx 2.4: #28450\n  \n-Tickets that kept Python 2 compatibility but introduced a performance penalty for Python 2:\n+Reference: Tickets that kept Python 2 compatibility but introduced a performance penalty for Python 2:\n \n - #29103 (get rid of part of itervalues)\n \n``````\n",
    "created_at": "2020-06-05T05:11:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29141",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29141#issuecomment-569169",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,29 +2,32 @@
 
 Removal of Python 2 support in Sage 9.2 has been announced at https://wiki.sagemath.org/Python3-Switch and https://wiki.sagemath.org/ReleaseTours/sage-9.1
 
-Tickets:
+Removal tickets:
 
 - #28000 For Sage 9.2: Remove python 2 support from sagelib
 - #29669 For Sage 9.2: Remove Python 2 support from the build system and CI scripts
+- #27826 - remove `long` hack for Python 3 in `doctest/forker.py`, remove all calls to `long()`
+- #29754 - remove Python 2 package and packages which backports various parts of Python
+
+Upgrade tickets:
+
 - #28197 - upgrade to ipython 7 / prompt-toolkit 2. See also #29042
 - #27754 - Upgrade: Python 3.8.x (see ticket:27754#comment:55 in particular)
 - numpy >= 1.17 - #29425 Upgrade Cython to 0.29.16, NumPy to 1.18.2 to fix numpy build error on local-conda-forge-macos-standard
 - #29730 Update sympy to 1.6
-- #27826 - remove `long` hack for Python 3 in `doctest/forker.py`, remove all calls to `long()`
-- #29754 - remove Python 2 package and packages which backports various parts of Python
+- matplotlib-3: #29547. Related: #28449 and ticket:27866#comment:25
+- sphinx-2: #28856, #29095
+- scipy-1.3+: #29115
+- rpy2 3.x: #28988, #29441 
+- networkx 2.4: #28450
+- #29803 - Upgrade setuptools, setuptools_scm, pip
 
-Goals without tickets:
+Other:
 
 - compatibility with python 3.8... needs details
   * "at this point the major issues are python 3.8 and ipython 7, and I don't see how one could support several versions of them without forking hundreds of doctests. Both updates require multi-thousand-lines patches, due to changes in dict sorting and hashes."
-- packages upgrades:
-  * matplotlib-3: #29547. Related: #28449 and ticket:27866#comment:25
-  * sphinx-2: #28856, #29095
-  * scipy-1.3+: #29115
-  * rpy2 3.x: #28988, #29441 
-  * networkx 2.4: #28450
  
-Tickets that kept Python 2 compatibility but introduced a performance penalty for Python 2:
+Reference: Tickets that kept Python 2 compatibility but introduced a performance penalty for Python 2:
 
 - #29103 (get rid of part of itervalues)
 
``````




---

archive/issue_comments_569170.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-From https://groups.google.com/forum/#!topic/sage-devel/vYlbnAwKATM \"drop python2 compatibility in 9.1' (thread Jan 5-22, 2020).\n+From https://groups.google.com/forum/#!topic/sage-devel/vYlbnAwKATM \"drop python2 compatibility in 9.1\" (thread Jan 5-22, 2020).\n \n Removal of Python 2 support in Sage 9.2 has been announced at https://wiki.sagemath.org/Python3-Switch and https://wiki.sagemath.org/ReleaseTours/sage-9.1\n \n@@ -10,6 +10,8 @@\n - #29754 - remove Python 2 package and packages which backports various parts of Python\n \n Upgrade tickets:\n+\n+**Please check that upgraded packages are compatible with Python >= 3.6** (and note this on the upgrade ticket) because we may wish to support Python 3.6 venv (#29033).\n \n - #28197 - upgrade to ipython 7 / prompt-toolkit 2. See also #29042\n - #27754 - Upgrade: Python 3.8.x (see ticket:27754#comment:55 in particular)\n``````\n",
    "created_at": "2020-06-05T20:08:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29141",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29141#issuecomment-569170",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-From https://groups.google.com/forum/#!topic/sage-devel/vYlbnAwKATM "drop python2 compatibility in 9.1' (thread Jan 5-22, 2020).
+From https://groups.google.com/forum/#!topic/sage-devel/vYlbnAwKATM "drop python2 compatibility in 9.1" (thread Jan 5-22, 2020).
 
 Removal of Python 2 support in Sage 9.2 has been announced at https://wiki.sagemath.org/Python3-Switch and https://wiki.sagemath.org/ReleaseTours/sage-9.1
 
@@ -10,6 +10,8 @@
 - #29754 - remove Python 2 package and packages which backports various parts of Python
 
 Upgrade tickets:
+
+**Please check that upgraded packages are compatible with Python >= 3.6** (and note this on the upgrade ticket) because we may wish to support Python 3.6 venv (#29033).
 
 - #28197 - upgrade to ipython 7 / prompt-toolkit 2. See also #29042
 - #27754 - Upgrade: Python 3.8.x (see ticket:27754#comment:55 in particular)
``````




---

archive/issue_comments_569171.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -28,6 +28,8 @@\n \n - compatibility with python 3.8... needs details\n   * \"at this point the major issues are python 3.8 and ipython 7, and I don't see how one could support several versions of them without forking hundreds of doctests. Both updates require multi-thousand-lines patches, due to changes in dict sorting and hashes.\"\n+- remove `src/sage/cpython/_py2_random.py`\n+  * This was added in #24508 and is only used during doctesting in order to ensure consistent random results between Python 2 and 3.\n  \n Reference: Tickets that kept Python 2 compatibility but introduced a performance penalty for Python 2:\n \n``````\n",
    "created_at": "2020-06-23T19:12:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29141",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29141#issuecomment-569171",
    "user": "https://github.com/mwageringel"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -28,6 +28,8 @@
 
 - compatibility with python 3.8... needs details
   * "at this point the major issues are python 3.8 and ipython 7, and I don't see how one could support several versions of them without forking hundreds of doctests. Both updates require multi-thousand-lines patches, due to changes in dict sorting and hashes."
+- remove `src/sage/cpython/_py2_random.py`
+  * This was added in #24508 and is only used during doctesting in order to ensure consistent random results between Python 2 and 3.
  
 Reference: Tickets that kept Python 2 compatibility but introduced a performance penalty for Python 2:
 
``````




---

archive/issue_events_083463.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-18T15:35:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29141",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29141#event-83463"
}
```



---

archive/issue_comments_569172.json:
```json
{
    "body": "<a id='comment:26'></a>\nWe can close this ticket as completed.",
    "created_at": "2020-08-18T15:35:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29141",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29141#issuecomment-569172",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>
We can close this ticket as completed.



---

archive/issue_comments_569173.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2020-08-18T15:35:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29141",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29141#issuecomment-569173",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_569174.json:
```json
{
    "body": "**Reviewer:** Dima Pasechnik",
    "created_at": "2020-08-21T17:51:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29141",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29141#issuecomment-569174",
    "user": "https://github.com/dimpase"
}
```

**Reviewer:** Dima Pasechnik



---

archive/issue_comments_569175.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2020-08-21T17:51:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29141",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29141#issuecomment-569175",
    "user": "https://github.com/dimpase"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_events_083464.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-08-22T08:52:15Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29141",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29141#event-83464"
}
```



---

archive/issue_comments_569176.json:
```json
{
    "body": "**Resolution:** worksforme",
    "created_at": "2020-08-22T08:52:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29141",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29141#issuecomment-569176",
    "user": "https://github.com/fchapoton"
}
```

**Resolution:** worksforme
