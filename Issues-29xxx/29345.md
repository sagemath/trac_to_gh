# Issue 29345: replace bashisms in m4/sage_spkg_collect.m4, m4/sage_spkg_enable.m4, build/pkgs/*/spkg-configure.m4, src/bin/sage-env, build/make/Makefile.in

archive/issues_029108.json:
```json
{
    "assignees": [],
    "body": "Autoconf scripts should be POSIX sh rather than bash, but there are a few bashisms in m4/sage_spkg_collect.m4 and m4/sage_spkg_enable.m4:\n\n* The quoted newlines `$'\\n'`\n* The use of `VAR+=VALUE`\n\nSome of these should be straightforward to fix. The format\n\n```\nSAGE_BUILT_PACKAGES+=\"    $SPKG_NAME \\\\\"$'\\n'\n```\n\ncan be changed to\n\n```\nSAGE_BUILT_PACKAGES=\"$SAGE_BUILT_PACKAGES $SPKG_NAME\"\n```\n\nsince the newline is only used to make the `BUILT_PACKAGES` rule in the resulting Makefile look nice. Changing them to spaces doesn't change what the rule does. I'm not sure about\n\n```\nSAGE_PACKAGE_VERSIONS+=\"vers_$SPKG_NAME = $SPKG_VERSION\"$'\\n\n```\n\nand \n\n```\nSAGE_PACKAGE_DEPENDENCIES+=\"deps_$SPKG_NAME = $DEPS\"$'\\n'\n```\n\nthough, because those are inserted verbatim into the Makefile as rules, and the newlines probably matter.\n\n\n\nCC:  @dimpase @mkoeppe @embray @vbraun\n\nBranch: **[`0e66a0a`](https://github.com/sagemath/sagetrac-mirror/commit/0e66a0abc00d5bf5ac1496e13f4d2f4ef7fe29dc)**\n\nUpstream: **Fixed upstream, in a later stable release.**\n\nReviewer: **Dima Pasechnik**\n\nAuthor: **Michael Orlitzky**\n\nComponent: **build: configure**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29345_\n\n",
    "closed_at": "2020-06-21T22:37:08Z",
    "created_at": "2020-03-15T22:50:28Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build%3A%20configure",
        "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "replace bashisms in m4/sage_spkg_collect.m4, m4/sage_spkg_enable.m4, build/pkgs/*/spkg-configure.m4, src/bin/sage-env, build/make/Makefile.in",
    "type": "issue",
    "updated_at": "2020-09-03T15:53:08Z",
    "url": "https://github.com/sagemath/sage/issues/29345",
    "user": "https://github.com/orlitzky"
}
```
Autoconf scripts should be POSIX sh rather than bash, but there are a few bashisms in m4/sage_spkg_collect.m4 and m4/sage_spkg_enable.m4:

* The quoted newlines `$'\n'`
* The use of `VAR+=VALUE`

Some of these should be straightforward to fix. The format

```
SAGE_BUILT_PACKAGES+="    $SPKG_NAME \\"$'\n'
```

can be changed to

```
SAGE_BUILT_PACKAGES="$SAGE_BUILT_PACKAGES $SPKG_NAME"
```

since the newline is only used to make the `BUILT_PACKAGES` rule in the resulting Makefile look nice. Changing them to spaces doesn't change what the rule does. I'm not sure about

```
SAGE_PACKAGE_VERSIONS+="vers_$SPKG_NAME = $SPKG_VERSION"$'\n
```

and 

```
SAGE_PACKAGE_DEPENDENCIES+="deps_$SPKG_NAME = $DEPS"$'\n'
```

though, because those are inserted verbatim into the Makefile as rules, and the newlines probably matter.



CC:  @dimpase @mkoeppe @embray @vbraun

Branch: **[`0e66a0a`](https://github.com/sagemath/sagetrac-mirror/commit/0e66a0abc00d5bf5ac1496e13f4d2f4ef7fe29dc)**

Upstream: **Fixed upstream, in a later stable release.**

Reviewer: **Dima Pasechnik**

Author: **Michael Orlitzky**

Component: **build: configure**

_Issue created by migration from https://trac.sagemath.org/ticket/29345_





---

archive/issue_events_403471.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2020-03-15T22:50:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29345#event-403471"
}
```



---

archive/issue_events_403472.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2020-03-15T22:50:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build%3A%20configure",
    "label_color": "000080",
    "label_name": "c: build: configure",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29345#event-403472"
}
```



---

archive/issue_events_403473.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2020-03-15T22:50:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29345#event-403473"
}
```



---

archive/issue_events_403474.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2020-03-15T22:50:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29345#event-403474"
}
```



---

archive/issue_comments_460471.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI agree in general - do you actually run this with a CONFIG_SHELL other than bash? Is the other configure code clean?",
    "created_at": "2020-03-15T22:56:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460471",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:1" align="right">comment:1</div>

I agree in general - do you actually run this with a CONFIG_SHELL other than bash? Is the other configure code clean?



---

archive/issue_comments_460472.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThis should probably be done on top of #29287, which touches the same file",
    "created_at": "2020-03-15T22:58:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460472",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2" align="right">comment:2</div>

This should probably be done on top of #29287, which touches the same file



---

archive/issue_comments_460473.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThings seem to run OK with dash if I comment out the part of configure.ac that forces bash. Of course I can't be sure that it *works* until I have a suggestion for how to fix `SAGE_PACKAGE_VERSIONS` and `SAGE_PACKAGE_DEPENDENCIES`.",
    "created_at": "2020-03-15T23:00:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460473",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:3" align="right">comment:3</div>

Things seem to run OK with dash if I comment out the part of configure.ac that forces bash. Of course I can't be sure that it *works* until I have a suggestion for how to fix `SAGE_PACKAGE_VERSIONS` and `SAGE_PACKAGE_DEPENDENCIES`.



---

archive/issue_comments_460474.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nOne way to address this is to make things a liitle more static (see #29114 - \"Only ./bootstrap should glob build/pkgs\"), also getting rid of GNU-make-isms and macrology in `build/make/Makefile`.\n\n`bootstrap` already emits macro calls for many packages into `m4/sage_spkg_configures.m4`, of three types.\n- m4_sinclude([build/pkgs/arb/spkg-configure.m4])\n- SAGE_SPKG_CONFIGURE_ARB\n- SAGE_SPKG_ENABLE([ninja_build], [optional])\nMight as well emit another line for every package that creates whatever is needed in the Makefile.",
    "created_at": "2020-03-16T01:57:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460474",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:4" align="right">comment:4</div>

One way to address this is to make things a liitle more static (see #29114 - "Only ./bootstrap should glob build/pkgs"), also getting rid of GNU-make-isms and macrology in `build/make/Makefile`.

`bootstrap` already emits macro calls for many packages into `m4/sage_spkg_configures.m4`, of three types.
- m4_sinclude([build/pkgs/arb/spkg-configure.m4])
- SAGE_SPKG_CONFIGURE_ARB
- SAGE_SPKG_ENABLE([ninja_build], [optional])
Might as well emit another line for every package that creates whatever is needed in the Makefile.



---

archive/issue_events_403475.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-09T23:11:45Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29345#event-403475"
}
```



---

archive/issue_events_403476.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-09T23:11:45Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29345#event-403476"
}
```



---

archive/issue_events_403477.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2020-04-30T00:26:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29345#event-403477"
}
```



---

archive/issue_comments_460475.json:
```json
{
    "body": "Author: **Michael Orlitzky**",
    "created_at": "2020-04-30T00:26:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460475",
    "user": "https://github.com/orlitzky"
}
```

Author: **Michael Orlitzky**



---

archive/issue_comments_460476.json:
```json
{
    "body": "Commit: **[`4a09db5`](https://github.com/sagemath/sagetrac-mirror/commit/4a09db546ace687c0e466b2cd5e8b6fef8a52cee)**",
    "created_at": "2020-04-30T00:26:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460476",
    "user": "https://github.com/orlitzky"
}
```

Commit: **[`4a09db5`](https://github.com/sagemath/sagetrac-mirror/commit/4a09db546ace687c0e466b2cd5e8b6fef8a52cee)**



---

archive/issue_comments_460477.json:
```json
{
    "body": "Branch: **[u/mjo/ticket/29345](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/29345)**",
    "created_at": "2020-04-30T00:26:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460477",
    "user": "https://github.com/orlitzky"
}
```

Branch: **[u/mjo/ticket/29345](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/29345)**



---

archive/issue_comments_460478.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThe printf stuff is going to make anyone reading the code think we're stupid, but it works and didn't involve changing much code. I just completed a full build using `/bin/dash` as my shell.",
    "created_at": "2020-04-30T00:26:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460478",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:6" align="right">comment:6</div>

The printf stuff is going to make anyone reading the code think we're stupid, but it works and didn't involve changing much code. I just completed a full build using `/bin/dash` as my shell.



---

archive/issue_comments_460479.json:
```json
{
    "body": "Changed commit from **[`4a09db5`](https://github.com/sagemath/sagetrac-mirror/commit/4a09db546ace687c0e466b2cd5e8b6fef8a52cee)** to **[`489d8cc`](https://github.com/sagemath/sagetrac-mirror/commit/489d8ccd27bd03b4e3771062b042de6f7092e5df)**",
    "created_at": "2020-04-30T00:34:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460479",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4a09db5`](https://github.com/sagemath/sagetrac-mirror/commit/4a09db546ace687c0e466b2cd5e8b6fef8a52cee)** to **[`489d8cc`](https://github.com/sagemath/sagetrac-mirror/commit/489d8ccd27bd03b4e3771062b042de6f7092e5df)**



---

archive/issue_comments_460480.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/26bf7af491f5e83bcd79e90c07773aa068caa35b\"><code>26bf7af</code></a></td><td><code>Trac #29345: replace a few obsolete \"-a\" tests with \"-e\".</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fea7ad913e7d32b9305b3f9c32eab586eaae3547\"><code>fea7ad9</code></a></td><td><code>Trac #29345: replace a bash array with something portable.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4f0a56a1ea3bf53396876cf02b48e2657bd8636d\"><code>4f0a56a</code></a></td><td><code>Trac #29345: replace a few uses of \"source\" with \".\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/42a63fd9e547f424d44ebfbc62b96adaaa2ac819\"><code>42a63fd</code></a></td><td><code>Trac #29345: fix some bashisms in sage-env's resolvelinks() function.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/489d8ccd27bd03b4e3771062b042de6f7092e5df\"><code>489d8cc</code></a></td><td><code>Trac #29345: don't force SHELL=bash any longer.</code></td></tr></table>\n",
    "created_at": "2020-04-30T00:34:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460480",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/26bf7af491f5e83bcd79e90c07773aa068caa35b"><code>26bf7af</code></a></td><td><code>Trac #29345: replace a few obsolete "-a" tests with "-e".</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fea7ad913e7d32b9305b3f9c32eab586eaae3547"><code>fea7ad9</code></a></td><td><code>Trac #29345: replace a bash array with something portable.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4f0a56a1ea3bf53396876cf02b48e2657bd8636d"><code>4f0a56a</code></a></td><td><code>Trac #29345: replace a few uses of "source" with "."</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/42a63fd9e547f424d44ebfbc62b96adaaa2ac819"><code>42a63fd</code></a></td><td><code>Trac #29345: fix some bashisms in sage-env's resolvelinks() function.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/489d8ccd27bd03b4e3771062b042de6f7092e5df"><code>489d8cc</code></a></td><td><code>Trac #29345: don't force SHELL=bash any longer.</code></td></tr></table>




---

archive/issue_comments_460481.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nNice on first glance. I'll be happy to do a full review after 9.1 is out",
    "created_at": "2020-04-30T01:42:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460481",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

Nice on first glance. I'll be happy to do a full review after 9.1 is out



---

archive/issue_comments_460482.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nit's a bit in vain, as there are bashisms or just \"bash required\" in several Sage packages.",
    "created_at": "2020-04-30T06:04:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460482",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:9" align="right">comment:9</div>

it's a bit in vain, as there are bashisms or just "bash required" in several Sage packages.



---

archive/issue_comments_460483.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nregarding newline, perhaps https://stackoverflow.com/questions/21880891/newline-character-in-posix-shell says something.",
    "created_at": "2020-04-30T06:05:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460483",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:10" align="right">comment:10</div>

regarding newline, perhaps https://stackoverflow.com/questions/21880891/newline-character-in-posix-shell says something.



---

archive/issue_comments_460484.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@dimpase](#comment:9):\n> it's a bit in vain, as there are bashisms or just \"bash required\" in several Sage packages.\n\nUltimately my goal is to not install any sage packages =)\n\nI'll always need bash installed for other stuff, but ./configure is noticeably faster with dash. It may be a \"micro-optimization\" but half of what I do lately is re-run ./configure.",
    "created_at": "2020-04-30T12:11:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460484",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@dimpase](#comment:9):
> it's a bit in vain, as there are bashisms or just "bash required" in several Sage packages.

Ultimately my goal is to not install any sage packages =)

I'll always need bash installed for other stuff, but ./configure is noticeably faster with dash. It may be a "micro-optimization" but half of what I do lately is re-run ./configure.



---

archive/issue_comments_460485.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@dimpase](#comment:10):\n> regarding newline, perhaps https://stackoverflow.com/questions/21880891/newline-character-in-posix-shell says something. \n\nThe suggestion there is to print a newline and a space at the end of each line, and then remove the space afterwards. Since all of the lines in question are indented, what I did instead was switch to printing a newline and some spaces at the *beginning* of each line -- that way the newline is still followed by spaces (and therefore doesn't get dropped), but the spaces aren't \"extra\" and don't need to be removed.",
    "created_at": "2020-04-30T12:14:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460485",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@dimpase](#comment:10):
> regarding newline, perhaps https://stackoverflow.com/questions/21880891/newline-character-in-posix-shell says something. 

The suggestion there is to print a newline and a space at the end of each line, and then remove the space afterwards. Since all of the lines in question are indented, what I did instead was switch to printing a newline and some spaces at the *beginning* of each line -- that way the newline is still followed by spaces (and therefore doesn't get dropped), but the spaces aren't "extra" and don't need to be removed.



---

archive/issue_comments_460486.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nneeds rebase.",
    "created_at": "2020-05-06T11:57:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460486",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:13" align="right">comment:13</div>

needs rebase.



---

archive/issue_comments_460487.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/165d55464e487477d79358e47a86ca0769da019c\"><code>165d554</code></a></td><td><code>Trac #29345: fix most autotools bashisms.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b5dafb426cdc5ed7d78ce0852433525dce8ad8f\"><code>1b5dafb</code></a></td><td><code>Trac #29345: fix one more newline-constant bashism in SAGE_SPKG_ENABLE.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c4a74d8e4ee3aaea2aa241c81124722e45a4fea5\"><code>c4a74d8</code></a></td><td><code>Trac #29345: replace a few obsolete \"-a\" tests with \"-e\".</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fcd9cef4c6fa929a5d44b74630979dd51db6a109\"><code>fcd9cef</code></a></td><td><code>Trac #29345: replace a bash array with something portable.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/839623ac0e364fef2609765891ba356867ffc9af\"><code>839623a</code></a></td><td><code>Trac #29345: replace a few uses of \"source\" with \".\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0717ec4c24de68bcfacb68742b2a2875fd731f2b\"><code>0717ec4</code></a></td><td><code>Trac #29345: fix some bashisms in sage-env's resolvelinks() function.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/279765f38a9ae291313055520d115c23ca4d5b9c\"><code>279765f</code></a></td><td><code>Trac #29345: don't force SHELL=bash any longer.</code></td></tr></table>\n",
    "created_at": "2020-05-06T20:07:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460487",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/165d55464e487477d79358e47a86ca0769da019c"><code>165d554</code></a></td><td><code>Trac #29345: fix most autotools bashisms.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b5dafb426cdc5ed7d78ce0852433525dce8ad8f"><code>1b5dafb</code></a></td><td><code>Trac #29345: fix one more newline-constant bashism in SAGE_SPKG_ENABLE.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c4a74d8e4ee3aaea2aa241c81124722e45a4fea5"><code>c4a74d8</code></a></td><td><code>Trac #29345: replace a few obsolete "-a" tests with "-e".</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fcd9cef4c6fa929a5d44b74630979dd51db6a109"><code>fcd9cef</code></a></td><td><code>Trac #29345: replace a bash array with something portable.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/839623ac0e364fef2609765891ba356867ffc9af"><code>839623a</code></a></td><td><code>Trac #29345: replace a few uses of "source" with "."</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0717ec4c24de68bcfacb68742b2a2875fd731f2b"><code>0717ec4</code></a></td><td><code>Trac #29345: fix some bashisms in sage-env's resolvelinks() function.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/279765f38a9ae291313055520d115c23ca4d5b9c"><code>279765f</code></a></td><td><code>Trac #29345: don't force SHELL=bash any longer.</code></td></tr></table>




---

archive/issue_comments_460488.json:
```json
{
    "body": "Changed commit from **[`489d8cc`](https://github.com/sagemath/sagetrac-mirror/commit/489d8ccd27bd03b4e3771062b042de6f7092e5df)** to **[`279765f`](https://github.com/sagemath/sagetrac-mirror/commit/279765f38a9ae291313055520d115c23ca4d5b9c)**",
    "created_at": "2020-05-06T20:07:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460488",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`489d8cc`](https://github.com/sagemath/sagetrac-mirror/commit/489d8ccd27bd03b4e3771062b042de6f7092e5df)** to **[`279765f`](https://github.com/sagemath/sagetrac-mirror/commit/279765f38a9ae291313055520d115c23ca4d5b9c)**



---

archive/issue_comments_460489.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nfixed, thanks",
    "created_at": "2020-05-06T20:07:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460489",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:15" align="right">comment:15</div>

fixed, thanks



---

archive/issue_comments_460490.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nA interesting test (apart from using dash) would be to use ksh (on OpenBSD - trying this now for lolz) or zsh (the latter is the default on recent macOS, I am told).",
    "created_at": "2020-05-07T11:01:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460490",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:16" align="right">comment:16</div>

A interesting test (apart from using dash) would be to use ksh (on OpenBSD - trying this now for lolz) or zsh (the latter is the default on recent macOS, I am told).



---

archive/issue_comments_460491.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\n./configure fails with `/bin/sh -> /bin/zsh` at,\n\n```\nChecking whether SageMath should install SPKG mpir...\nchecking gmp.h usability... yes\nchecking gmp.h presence... yes\nchecking for gmp.h... yes\nchecking gmpxx.h usability... yes\nchecking gmpxx.h presence... yes\nchecking for gmpxx.h... yes\nchecking for library containing __gmpq_cmp_z... -lgmp\n./configure:break:10258: not in while, until, select, or repeat loop\n```\n\nSince it was executed via /bin/sh, I think zsh is already in bourne-shell compatibility mode.",
    "created_at": "2020-05-07T12:34:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460491",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:17" align="right">comment:17</div>

./configure fails with `/bin/sh -> /bin/zsh` at,

```
Checking whether SageMath should install SPKG mpir...
checking gmp.h usability... yes
checking gmp.h presence... yes
checking for gmp.h... yes
checking gmpxx.h usability... yes
checking gmpxx.h presence... yes
checking for gmpxx.h... yes
checking for library containing __gmpq_cmp_z... -lgmp
./configure:break:10258: not in while, until, select, or repeat loop
```

Since it was executed via /bin/sh, I think zsh is already in bourne-shell compatibility mode.



---

archive/issue_comments_460492.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nksh also notices a stray break and prints a warning, no error.",
    "created_at": "2020-05-07T13:30:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460492",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:18" align="right">comment:18</div>

ksh also notices a stray break and prints a warning, no error.



---

archive/issue_comments_460493.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nwith ksh/openbsd, the ugly hack in spkg-install of lrcalc does not work, as copied over config.status gets really confused, and complains about `print` not found etc.\nThe following (needs autotools isntalled, obviously) fixes this:\n\n```diff\n-cp \"$SAGE_ROOT\"/config/config.* .\n+autoreconf -ivf\n```",
    "created_at": "2020-05-08T08:09:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460493",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:19" align="right">comment:19</div>

with ksh/openbsd, the ugly hack in spkg-install of lrcalc does not work, as copied over config.status gets really confused, and complains about `print` not found etc.
The following (needs autotools isntalled, obviously) fixes this:

```diff
-cp "$SAGE_ROOT"/config/config.* .
+autoreconf -ivf
```



---

archive/issue_comments_460494.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nditto (ksh/openbsd) - this is how givaro outputs its givaro.pc - which is of course broken this way\n\n```\n/------------------ givaro.pc ------------------------\nprefix=/home/dima/sagetrac-mirror/local\nexec_prefix=/home/dima/sagetrac-mirror/local\nlibdir=/home/dima/sagetrac-mirror/local/lib\nincludedir=/home/dima/sagetrac-mirror/local/include\n\nName: Givaro\nDescription: C++ library for arithmetic and algebraic computations\nURL: https://casys.gricad-pages.univ-grenoble-alpes.fr/givaro\nVersion: 4.1.1\nRequires:\nLibs: -L/home/dima/sagetrac-mirror/local/lib -lgivaro  -lgmp -lgmpxx\nCflags: -I${prefix}/include  \n\\-------------------------------------------------------\n```",
    "created_at": "2020-05-08T08:50:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460494",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:20" align="right">comment:20</div>

ditto (ksh/openbsd) - this is how givaro outputs its givaro.pc - which is of course broken this way

```
/------------------ givaro.pc ------------------------
prefix=/home/dima/sagetrac-mirror/local
exec_prefix=/home/dima/sagetrac-mirror/local
libdir=/home/dima/sagetrac-mirror/local/lib
includedir=/home/dima/sagetrac-mirror/local/include

Name: Givaro
Description: C++ library for arithmetic and algebraic computations
URL: https://casys.gricad-pages.univ-grenoble-alpes.fr/givaro
Version: 4.1.1
Requires:
Libs: -L/home/dima/sagetrac-mirror/local/lib -lgivaro  -lgmp -lgmpxx
Cflags: -I${prefix}/include  
\-------------------------------------------------------
```



---

archive/issue_comments_460495.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@dimpase](#comment:19):\n> with ksh/openbsd, the ugly hack in spkg-install of lrcalc does not work, as copied over config.status gets really confused, and complains about `print` not found etc.\n> The following (needs autotools isntalled, obviously) fixes this:\n> \n> ```diff\n> -cp \"$SAGE_ROOT\"/config/config.* .\n> +autoreconf -ivf\n> ```\n\nThat commit mentions only `config.guess`, but it doesn't say what problem it was solving. Maybe copying `config.status` was unintentional.",
    "created_at": "2020-05-08T15:55:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460495",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@dimpase](#comment:19):
> with ksh/openbsd, the ugly hack in spkg-install of lrcalc does not work, as copied over config.status gets really confused, and complains about `print` not found etc.
> The following (needs autotools isntalled, obviously) fixes this:
> 
> ```diff
> -cp "$SAGE_ROOT"/config/config.* .
> +autoreconf -ivf
> ```

That commit mentions only `config.guess`, but it doesn't say what problem it was solving. Maybe copying `config.status` was unintentional.



---

archive/issue_comments_460496.json:
```json
{
    "body": "Changed commit from **[`279765f`](https://github.com/sagemath/sagetrac-mirror/commit/279765f38a9ae291313055520d115c23ca4d5b9c)** to **[`65ee1fb`](https://github.com/sagemath/sagetrac-mirror/commit/65ee1fb28d27aa8d31cee492b0fbfbb6a4e205e1)**",
    "created_at": "2020-05-08T16:07:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460496",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`279765f`](https://github.com/sagemath/sagetrac-mirror/commit/279765f38a9ae291313055520d115c23ca4d5b9c)** to **[`65ee1fb`](https://github.com/sagemath/sagetrac-mirror/commit/65ee1fb28d27aa8d31cee492b0fbfbb6a4e205e1)**



---

archive/issue_comments_460497.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e0cd5d71f5a76df6e9610dcc617f170b686e0026\"><code>e0cd5d7</code></a></td><td><code>Trac #29345: remove \"break\" statements from AC_SEARCH_LIBS.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/65ee1fb28d27aa8d31cee492b0fbfbb6a4e205e1\"><code>65ee1fb</code></a></td><td><code>Trac #29345: don't use sage's config.status for the lrcalc build.</code></td></tr></table>\n",
    "created_at": "2020-05-08T16:07:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460497",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e0cd5d71f5a76df6e9610dcc617f170b686e0026"><code>e0cd5d7</code></a></td><td><code>Trac #29345: remove "break" statements from AC_SEARCH_LIBS.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/65ee1fb28d27aa8d31cee492b0fbfbb6a4e205e1"><code>65ee1fb</code></a></td><td><code>Trac #29345: don't use sage's config.status for the lrcalc build.</code></td></tr></table>




---

archive/issue_comments_460498.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nNew commits fix the `break` statements and probably lrcalc.",
    "created_at": "2020-05-08T16:07:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460498",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:23" align="right">comment:23</div>

New commits fix the `break` statements and probably lrcalc.



---

archive/issue_comments_460499.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nThe is also a bug in `build/pkgs/cvxopt/spkg-install.in`, in\n\n```\n# Stolen from Gentoo\npkg_libs() {\n        pkg-config --libs-only-l $* | \\\n                sed -e 's:[ ]-l*\\(pthread\\|m\\)\\([ ]\\|$\\)::g' -e 's:[ ]*$::' | \\\n                tr ' ' '\\n' | sort -u | sed -e \"s:^-l\\(.*\\):\\1:g\" | \\\n                tr '\\n' ';' | sed -e 's:;$::'\n}\n```\nso that on ksh/openbsd I get `CVXOPT_BLAS_LIB=\"$(pkg_libs blas)\"`\ngets `;openblas` rather than `openblas`.\nNote that \n\n```\n(sage-buildsh) dima@sagemath:sagetrac-mirror$ pkg-config --libs-only-l blas\n -lopenblas\n```\noutputs a leading  space.\n\n```\n$ pkg-config --libs-only-l blas | sed -e 's:[ ]-l*\\(pthread\\|m\\)\\([ ]\\|$\\)::g' -e 's:[ ]*$::' | tr ' ' '\\n'\n\n-lopenblas\n```\nAnd so the latter outputs an extra blank line, leading to erroneous `;`.\nIt would suffice to remove the leading spaces from the output of `pkg-config`, say.",
    "created_at": "2020-05-10T10:22:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460499",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:24" align="right">comment:24</div>

The is also a bug in `build/pkgs/cvxopt/spkg-install.in`, in

```
# Stolen from Gentoo
pkg_libs() {
        pkg-config --libs-only-l $* | \
                sed -e 's:[ ]-l*\(pthread\|m\)\([ ]\|$\)::g' -e 's:[ ]*$::' | \
                tr ' ' '\n' | sort -u | sed -e "s:^-l\(.*\):\1:g" | \
                tr '\n' ';' | sed -e 's:;$::'
}
```
so that on ksh/openbsd I get `CVXOPT_BLAS_LIB="$(pkg_libs blas)"`
gets `;openblas` rather than `openblas`.
Note that 

```
(sage-buildsh) dima@sagemath:sagetrac-mirror$ pkg-config --libs-only-l blas
 -lopenblas
```
outputs a leading  space.

```
$ pkg-config --libs-only-l blas | sed -e 's:[ ]-l*\(pthread\|m\)\([ ]\|$\)::g' -e 's:[ ]*$::' | tr ' ' '\n'

-lopenblas
```
And so the latter outputs an extra blank line, leading to erroneous `;`.
It would suffice to remove the leading spaces from the output of `pkg-config`, say.



---

archive/issue_comments_460500.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nThe following does the job to fix the latter\n\n```diff\n--- a/build/pkgs/cvxopt/spkg-install.in\n+++ b/build/pkgs/cvxopt/spkg-install.in\n@@ -2,7 +2,7 @@ cd src\n \n # Stolen from Gentoo\n pkg_libs() {\n-       pkg-config --libs-only-l $* | \\\n+       pkg-config --libs-only-l $* | sed -e 's/^ *//g' | \\\n                sed -e 's:[ ]-l*\\(pthread\\|m\\)\\([ ]\\|$\\)::g' -e 's:[ ]*$::' | \\\n                tr ' ' '\\n' | sort -u | sed -e \"s:^-l\\(.*\\):\\1:g\" | \\\n                tr '\\n' ';' | sed -e 's:;$::'\n```",
    "created_at": "2020-05-10T10:36:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460500",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:25" align="right">comment:25</div>

The following does the job to fix the latter

```diff
--- a/build/pkgs/cvxopt/spkg-install.in
+++ b/build/pkgs/cvxopt/spkg-install.in
@@ -2,7 +2,7 @@ cd src
 
 # Stolen from Gentoo
 pkg_libs() {
-       pkg-config --libs-only-l $* | \
+       pkg-config --libs-only-l $* | sed -e 's/^ *//g' | \
                sed -e 's:[ ]-l*\(pthread\|m\)\([ ]\|$\)::g' -e 's:[ ]*$::' | \
                tr ' ' '\n' | sort -u | sed -e "s:^-l\(.*\):\1:g" | \
                tr '\n' ';' | sed -e 's:;$::'
```



---

archive/issue_comments_460501.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nAnd here are already merged upstream fixes for [comment:20](#comment:20) problem\n\nhttps://github.com/linbox-team/givaro/pull/157\n\nhttps://github.com/linbox-team/linbox/pull/255\n\nhttps://github.com/linbox-team/fflas-ffpack/pull/308",
    "created_at": "2020-05-10T10:41:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460501",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:26" align="right">comment:26</div>

And here are already merged upstream fixes for [comment:20](#comment:20) problem

https://github.com/linbox-team/givaro/pull/157

https://github.com/linbox-team/linbox/pull/255

https://github.com/linbox-team/fflas-ffpack/pull/308



---

archive/issue_comments_460502.json:
```json
{
    "body": "Upstream: **Fixed upstream, in a later stable release.**",
    "created_at": "2020-05-10T10:41:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460502",
    "user": "https://github.com/dimpase"
}
```

Upstream: **Fixed upstream, in a later stable release.**



---

archive/issue_comments_460503.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nLol that's like ten pipelines just to parse a space delimited list and replace `-l` with `;`. I think this does the same thing, and works with bash, dash, ksh, zsh, and posh:\n\n```\n# The BLAS_LIB and LAPACK_LIB variables (among others) in cvxopt's setup.py\n# are passed in as colon-delimited strings. So, for example, if your blas\n# lib flags are \"-lblas -lcblas\", then cvxopt wants \"blas;cblas\". The\n# following function takes a package name, feeds it to pkg-config, and then\n# converts it to the proper format.\ncvxopt_libs() {\n    CVXOPT_LIBS=\"\"\n    SKIP_LIBS=\"pthread m\"\n    for PKGCONFIG_LIB in $(pkg-config --libs-only-l \"${1}\"); do\n\tfor SKIP_LIB in ${SKIP_LIBS}; do\n\t    if [ \"${PKGCONFIG_LIB}\" = \"-l${SKIP_LIB}\" ]; then\n\t\t# break out of the big loop if we're skipping this lib\n\t\tcontinue 2\n\t    fi\n\tdone\n\t# replace leading \"-l\" with \";\"\n\tCVXOPT_LIBS=\"${CVXOPT_LIBS};${PKGCONFIG_LIB#-l}\"\n    done\n    # strip the leading \";\" from \";foo;bar\" before output\n    echo \"${CVXOPT_LIBS#;}\"\n}\n```",
    "created_at": "2020-05-10T12:17:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460503",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:27" align="right">comment:27</div>

Lol that's like ten pipelines just to parse a space delimited list and replace `-l` with `;`. I think this does the same thing, and works with bash, dash, ksh, zsh, and posh:

```
# The BLAS_LIB and LAPACK_LIB variables (among others) in cvxopt's setup.py
# are passed in as colon-delimited strings. So, for example, if your blas
# lib flags are "-lblas -lcblas", then cvxopt wants "blas;cblas". The
# following function takes a package name, feeds it to pkg-config, and then
# converts it to the proper format.
cvxopt_libs() {
    CVXOPT_LIBS=""
    SKIP_LIBS="pthread m"
    for PKGCONFIG_LIB in $(pkg-config --libs-only-l "${1}"); do
	for SKIP_LIB in ${SKIP_LIBS}; do
	    if [ "${PKGCONFIG_LIB}" = "-l${SKIP_LIB}" ]; then
		# break out of the big loop if we're skipping this lib
		continue 2
	    fi
	done
	# replace leading "-l" with ";"
	CVXOPT_LIBS="${CVXOPT_LIBS};${PKGCONFIG_LIB#-l}"
    done
    # strip the leading ";" from ";foo;bar" before output
    echo "${CVXOPT_LIBS#;}"
}
```



---

archive/issue_comments_460504.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\ncare to add the latter to the branch?",
    "created_at": "2020-05-10T12:35:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460504",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:28" align="right">comment:28</div>

care to add the latter to the branch?



---

archive/issue_comments_460505.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nYeah I will after I'm sure that it works. I'll probably also update the Gentoo ebuild. Some ad-hoc testing shows differences between the two, but it looks like they're all mistakes in the existing version; some things aren't handled correctly after `-lpthread` or `-lm` are removed, for example:\n\n```\n$ pkg-config --libs-only-l librsvg-2.0\n-lrsvg-2 -lm -lgio-2.0 -lgdk_pixbuf-2.0 -lgobject-2.0 -lglib-2.0 -lcairo\n\n# sage/gentoo version\n$ ./orig.sh librsvg-2.0\ncairo;gdk_pixbuf-2.0;glib-2.0;gobject-2.0;rsvg-2-lgio-2.0\n\n# the new one\n$ ./cvxopt_libs.sh librsvg-2.0\nrsvg-2;gio-2.0;gdk_pixbuf-2.0;gobject-2.0;glib-2.0;cairo\n```",
    "created_at": "2020-05-10T13:06:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460505",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:29" align="right">comment:29</div>

Yeah I will after I'm sure that it works. I'll probably also update the Gentoo ebuild. Some ad-hoc testing shows differences between the two, but it looks like they're all mistakes in the existing version; some things aren't handled correctly after `-lpthread` or `-lm` are removed, for example:

```
$ pkg-config --libs-only-l librsvg-2.0
-lrsvg-2 -lm -lgio-2.0 -lgdk_pixbuf-2.0 -lgobject-2.0 -lglib-2.0 -lcairo

# sage/gentoo version
$ ./orig.sh librsvg-2.0
cairo;gdk_pixbuf-2.0;glib-2.0;gobject-2.0;rsvg-2-lgio-2.0

# the new one
$ ./cvxopt_libs.sh librsvg-2.0
rsvg-2;gio-2.0;gdk_pixbuf-2.0;gobject-2.0;glib-2.0;cairo
```



---

archive/issue_comments_460506.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nI opened #29677 to track OpenBSD quirks.",
    "created_at": "2020-05-12T09:06:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460506",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:30" align="right">comment:30</div>

I opened #29677 to track OpenBSD quirks.



---

archive/issue_comments_460507.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nThere are more issues with cvxopt in both Gentoo and Sage... for example, if you don't set one of the `*_LIB` variables, then it defaults to adding `/usr/lib` to your search path which will pick up the wrong libraries on most Gentoo systems (you want `/usr/lib64` instead). Passing in the empty string to override sort-of works, but not for the `*_INC_DIR` variables, meaning that we need special cases everywhere to do it right. I've opened an issue with cvxopt to see if they can make our lives easier by treating the empty string as \"no extra libs/paths\" rather than \"one extra lib/path consisting of the empty string.\"",
    "created_at": "2020-05-13T12:09:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460507",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:31" align="right">comment:31</div>

There are more issues with cvxopt in both Gentoo and Sage... for example, if you don't set one of the `*_LIB` variables, then it defaults to adding `/usr/lib` to your search path which will pick up the wrong libraries on most Gentoo systems (you want `/usr/lib64` instead). Passing in the empty string to override sort-of works, but not for the `*_INC_DIR` variables, meaning that we need special cases everywhere to do it right. I've opened an issue with cvxopt to see if they can make our lives easier by treating the empty string as "no extra libs/paths" rather than "one extra lib/path consisting of the empty string."



---

archive/issue_comments_460508.json:
```json
{
    "body": "<div id=\"comment:32\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/21cbae89235a44ec83a062f8415c6fb6ae29adbc\"><code>21cbae8</code></a></td><td><code>Trac #29345: replace the function that populates the CVXOPT_* variables.</code></td></tr></table>\n",
    "created_at": "2020-05-13T21:49:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460508",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/21cbae89235a44ec83a062f8415c6fb6ae29adbc"><code>21cbae8</code></a></td><td><code>Trac #29345: replace the function that populates the CVXOPT_* variables.</code></td></tr></table>




---

archive/issue_comments_460509.json:
```json
{
    "body": "Changed commit from **[`65ee1fb`](https://github.com/sagemath/sagetrac-mirror/commit/65ee1fb28d27aa8d31cee492b0fbfbb6a4e205e1)** to **[`21cbae8`](https://github.com/sagemath/sagetrac-mirror/commit/21cbae89235a44ec83a062f8415c6fb6ae29adbc)**",
    "created_at": "2020-05-13T21:49:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460509",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`65ee1fb`](https://github.com/sagemath/sagetrac-mirror/commit/65ee1fb28d27aa8d31cee492b0fbfbb6a4e205e1)** to **[`21cbae8`](https://github.com/sagemath/sagetrac-mirror/commit/21cbae89235a44ec83a062f8415c6fb6ae29adbc)**



---

archive/issue_comments_460510.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nThe latest commit lets me build cvxopt against the suitesparse SPKG using ksh.\n\nNow that I'm familiar, I have a feeling that some more work is going to be needed on the suitesparse spkg-configure.m4 ticket to keep cvxopt working if suitesparse comes from the system. The new function I added should help if that proves true.",
    "created_at": "2020-05-13T21:51:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460510",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:33" align="right">comment:33</div>

The latest commit lets me build cvxopt against the suitesparse SPKG using ksh.

Now that I'm familiar, I have a feeling that some more work is going to be needed on the suitesparse spkg-configure.m4 ticket to keep cvxopt working if suitesparse comes from the system. The new function I added should help if that proves true.



---

archive/issue_comments_460511.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nIs this ready for review? Just checking.",
    "created_at": "2020-05-15T09:03:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460511",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:34" align="right">comment:34</div>

Is this ready for review? Just checking.



---

archive/issue_comments_460512.json:
```json
{
    "body": "Changed commit from **[`21cbae8`](https://github.com/sagemath/sagetrac-mirror/commit/21cbae89235a44ec83a062f8415c6fb6ae29adbc)** to **[`00de6b3`](https://github.com/sagemath/sagetrac-mirror/commit/00de6b33336d253703aac11866ced81431d1477d)**",
    "created_at": "2020-05-15T12:11:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460512",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`21cbae8`](https://github.com/sagemath/sagetrac-mirror/commit/21cbae89235a44ec83a062f8415c6fb6ae29adbc)** to **[`00de6b3`](https://github.com/sagemath/sagetrac-mirror/commit/00de6b33336d253703aac11866ced81431d1477d)**



---

archive/issue_comments_460513.json:
```json
{
    "body": "<div id=\"comment:35\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e778266859dd23d0b7b8694678ca1a7ea55fb5bd\"><code>e778266</code></a></td><td><code>Trac #29345: fix one more newline-constant bashism in SAGE_SPKG_ENABLE.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c18eda8e97105d1fb50cdd649d38e0b0ec56c4e2\"><code>c18eda8</code></a></td><td><code>Trac #29345: replace a few obsolete \"-a\" tests with \"-e\".</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ba5fe9758a2be632ae71e084ed3e0c303b1e9b7\"><code>2ba5fe9</code></a></td><td><code>Trac #29345: replace a bash array with something portable.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f86546eeaa605144a659b314f546daab3138177a\"><code>f86546e</code></a></td><td><code>Trac #29345: replace a few uses of \"source\" with \".\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/76311fd8b205ea2ecd54431874c44f2aec6c86b6\"><code>76311fd</code></a></td><td><code>Trac #29345: fix some bashisms in sage-env's resolvelinks() function.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f72178bea68c57187348cb1ac63c613718eb48f8\"><code>f72178b</code></a></td><td><code>Trac #29345: don't force SHELL=bash any longer.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f040377f794419a69e8eb416f9bccce02d2774b9\"><code>f040377</code></a></td><td><code>Trac #29345: remove \"break\" statements from AC_SEARCH_LIBS.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ef2888e75ea7c3eadf90c3618e9475fdb4673f7b\"><code>ef2888e</code></a></td><td><code>Trac #29345: don't use sage's config.status for the lrcalc build.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3e2d6f3aa53139663492078dfdf0cbd1ee604bd7\"><code>3e2d6f3</code></a></td><td><code>Trac #29345: replace the function that populates the CVXOPT_* variables.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/00de6b33336d253703aac11866ced81431d1477d\"><code>00de6b3</code></a></td><td><code>Trac #29345: add Dima's SPKG patches for ksh compatibility.</code></td></tr></table>\n",
    "created_at": "2020-05-15T12:11:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460513",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:35"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e778266859dd23d0b7b8694678ca1a7ea55fb5bd"><code>e778266</code></a></td><td><code>Trac #29345: fix one more newline-constant bashism in SAGE_SPKG_ENABLE.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c18eda8e97105d1fb50cdd649d38e0b0ec56c4e2"><code>c18eda8</code></a></td><td><code>Trac #29345: replace a few obsolete "-a" tests with "-e".</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ba5fe9758a2be632ae71e084ed3e0c303b1e9b7"><code>2ba5fe9</code></a></td><td><code>Trac #29345: replace a bash array with something portable.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f86546eeaa605144a659b314f546daab3138177a"><code>f86546e</code></a></td><td><code>Trac #29345: replace a few uses of "source" with "."</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/76311fd8b205ea2ecd54431874c44f2aec6c86b6"><code>76311fd</code></a></td><td><code>Trac #29345: fix some bashisms in sage-env's resolvelinks() function.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f72178bea68c57187348cb1ac63c613718eb48f8"><code>f72178b</code></a></td><td><code>Trac #29345: don't force SHELL=bash any longer.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f040377f794419a69e8eb416f9bccce02d2774b9"><code>f040377</code></a></td><td><code>Trac #29345: remove "break" statements from AC_SEARCH_LIBS.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ef2888e75ea7c3eadf90c3618e9475fdb4673f7b"><code>ef2888e</code></a></td><td><code>Trac #29345: don't use sage's config.status for the lrcalc build.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3e2d6f3aa53139663492078dfdf0cbd1ee604bd7"><code>3e2d6f3</code></a></td><td><code>Trac #29345: replace the function that populates the CVXOPT_* variables.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/00de6b33336d253703aac11866ced81431d1477d"><code>00de6b3</code></a></td><td><code>Trac #29345: add Dima's SPKG patches for ksh compatibility.</code></td></tr></table>




---

archive/issue_comments_460514.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@dimpase](#comment:34):\n> Is this ready for review? Just checking.\n\nYes, I've added one more commit with your pc-file patches for givaro, linbox, and fflas-ffpack. There are no more (known) problems with non-bash shells.",
    "created_at": "2020-05-15T12:12:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460514",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@dimpase](#comment:34):
> Is this ready for review? Just checking.

Yes, I've added one more commit with your pc-file patches for givaro, linbox, and fflas-ffpack. There are no more (known) problems with non-bash shells.



---

archive/issue_comments_460515.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nOK to rebase this on top of #29098 (Merge build/make/deps into build/make/Makefile.in)?",
    "created_at": "2020-05-16T01:33:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460515",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:37" align="right">comment:37</div>

OK to rebase this on top of #29098 (Merge build/make/deps into build/make/Makefile.in)?



---

archive/issue_comments_460516.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nReplying to [@mkoeppe](#comment:37):\n> OK to rebase this on top of #29098 (Merge build/make/deps into build/make/Makefile.in)?\n\nSure. I'm running a full build/ptestlong today to ensure that my new sympow package works with #29673. If you don't beat me to it, I'll rebase on Monday most likely.",
    "created_at": "2020-05-16T13:06:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460516",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:38" align="right">comment:38</div>

Replying to [@mkoeppe](#comment:37):
> OK to rebase this on top of #29098 (Merge build/make/deps into build/make/Makefile.in)?

Sure. I'm running a full build/ptestlong today to ensure that my new sympow package works with #29673. If you don't beat me to it, I'll rebase on Monday most likely.



---

archive/issue_comments_460517.json:
```json
{
    "body": "Changed commit from **[`00de6b3`](https://github.com/sagemath/sagetrac-mirror/commit/00de6b33336d253703aac11866ced81431d1477d)** to **[`2f5f383`](https://github.com/sagemath/sagetrac-mirror/commit/2f5f383c2be1eec62b7c7ea72ae2de25c5d34cb8)**",
    "created_at": "2020-05-18T13:14:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460517",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`00de6b3`](https://github.com/sagemath/sagetrac-mirror/commit/00de6b33336d253703aac11866ced81431d1477d)** to **[`2f5f383`](https://github.com/sagemath/sagetrac-mirror/commit/2f5f383c2be1eec62b7c7ea72ae2de25c5d34cb8)**



---

archive/issue_comments_460518.json:
```json
{
    "body": "<div id=\"comment:39\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11eba29c65a3160601e95c4ba43081e56ea72f41\"><code>11eba29</code></a></td><td><code>Trac #29345: fix one more newline-constant bashism in SAGE_SPKG_ENABLE.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f6746dd147d4d8383060326345fc7463d0643a2c\"><code>f6746dd</code></a></td><td><code>Trac #29345: replace a few obsolete \"-a\" tests with \"-e\".</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/31a5a18365748789cc75c2762bf1a57f6ec263bf\"><code>31a5a18</code></a></td><td><code>Trac #29345: replace a bash array with something portable.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e0d0f6ca16f82bfdc451657b73cd3807065f27e4\"><code>e0d0f6c</code></a></td><td><code>Trac #29345: replace a few uses of \"source\" with \".\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/47ff65ce0e3a20ac327fcfd84b321247e39b9021\"><code>47ff65c</code></a></td><td><code>Trac #29345: fix some bashisms in sage-env's resolvelinks() function.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/59b8ccc319d3de525f5b4ae53838c06d461b6850\"><code>59b8ccc</code></a></td><td><code>Trac #29345: don't force SHELL=bash any longer.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/43a81c3aff76fd3e99d64b86d6b5f3739f49583c\"><code>43a81c3</code></a></td><td><code>Trac #29345: remove \"break\" statements from AC_SEARCH_LIBS.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/76a931ddcc47c299e8d6097ea8a476f9cda8caaf\"><code>76a931d</code></a></td><td><code>Trac #29345: don't use sage's config.status for the lrcalc build.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e0d871a55de016cd98ea1524ee773904a671e6be\"><code>e0d871a</code></a></td><td><code>Trac #29345: replace the function that populates the CVXOPT_* variables.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2f5f383c2be1eec62b7c7ea72ae2de25c5d34cb8\"><code>2f5f383</code></a></td><td><code>Trac #29345: add Dima's SPKG patches for ksh compatibility.</code></td></tr></table>\n",
    "created_at": "2020-05-18T13:14:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460518",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:39"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11eba29c65a3160601e95c4ba43081e56ea72f41"><code>11eba29</code></a></td><td><code>Trac #29345: fix one more newline-constant bashism in SAGE_SPKG_ENABLE.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f6746dd147d4d8383060326345fc7463d0643a2c"><code>f6746dd</code></a></td><td><code>Trac #29345: replace a few obsolete "-a" tests with "-e".</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/31a5a18365748789cc75c2762bf1a57f6ec263bf"><code>31a5a18</code></a></td><td><code>Trac #29345: replace a bash array with something portable.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e0d0f6ca16f82bfdc451657b73cd3807065f27e4"><code>e0d0f6c</code></a></td><td><code>Trac #29345: replace a few uses of "source" with "."</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/47ff65ce0e3a20ac327fcfd84b321247e39b9021"><code>47ff65c</code></a></td><td><code>Trac #29345: fix some bashisms in sage-env's resolvelinks() function.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/59b8ccc319d3de525f5b4ae53838c06d461b6850"><code>59b8ccc</code></a></td><td><code>Trac #29345: don't force SHELL=bash any longer.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/43a81c3aff76fd3e99d64b86d6b5f3739f49583c"><code>43a81c3</code></a></td><td><code>Trac #29345: remove "break" statements from AC_SEARCH_LIBS.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/76a931ddcc47c299e8d6097ea8a476f9cda8caaf"><code>76a931d</code></a></td><td><code>Trac #29345: don't use sage's config.status for the lrcalc build.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e0d871a55de016cd98ea1524ee773904a671e6be"><code>e0d871a</code></a></td><td><code>Trac #29345: replace the function that populates the CVXOPT_* variables.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2f5f383c2be1eec62b7c7ea72ae2de25c5d34cb8"><code>2f5f383</code></a></td><td><code>Trac #29345: add Dima's SPKG patches for ksh compatibility.</code></td></tr></table>




---

archive/issue_comments_460519.json:
```json
{
    "body": "Dependencies: **29098**",
    "created_at": "2020-05-18T13:15:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460519",
    "user": "https://github.com/orlitzky"
}
```

Dependencies: **29098**



---

archive/issue_comments_460520.json:
```json
{
    "body": "Changed commit from **[`2f5f383`](https://github.com/sagemath/sagetrac-mirror/commit/2f5f383c2be1eec62b7c7ea72ae2de25c5d34cb8)** to **[`b3f9f55`](https://github.com/sagemath/sagetrac-mirror/commit/b3f9f5595c5443571cbe38dea141f9246d62f271)**",
    "created_at": "2020-05-26T14:15:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460520",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2f5f383`](https://github.com/sagemath/sagetrac-mirror/commit/2f5f383c2be1eec62b7c7ea72ae2de25c5d34cb8)** to **[`b3f9f55`](https://github.com/sagemath/sagetrac-mirror/commit/b3f9f5595c5443571cbe38dea141f9246d62f271)**



---

archive/issue_comments_460521.json:
```json
{
    "body": "<div id=\"comment:41\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/647e64cf8b5f16713fb4fd0d00ae224aff74f182\"><code>647e64c</code></a></td><td><code>Trac #29345: fix one more newline-constant bashism in SAGE_SPKG_ENABLE.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4e0b8dde25a4e41dabcee2def918e205b603e127\"><code>4e0b8dd</code></a></td><td><code>Trac #29345: replace a few obsolete \"-a\" tests with \"-e\".</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/955da4d303230e2f7c6cf3d8d6def7315b3be30f\"><code>955da4d</code></a></td><td><code>Trac #29345: replace a bash array with something portable.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/76bdb66bc187cfdc91ac4a83bc7b400695b56bd7\"><code>76bdb66</code></a></td><td><code>Trac #29345: replace a few uses of \"source\" with \".\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7f46fae03550fc7e4d21b8849844a30171f8ac2b\"><code>7f46fae</code></a></td><td><code>Trac #29345: fix some bashisms in sage-env's resolvelinks() function.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/791194a71d2aff3a4eece09280a775a0deebc8c9\"><code>791194a</code></a></td><td><code>Trac #29345: don't force SHELL=bash any longer.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c22ef4189b98b499a81fe776a23cd45c394950a0\"><code>c22ef41</code></a></td><td><code>Trac #29345: remove \"break\" statements from AC_SEARCH_LIBS.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/20a1cdbac6a052fcde65dcad5b54729e34dfe52c\"><code>20a1cdb</code></a></td><td><code>Trac #29345: don't use sage's config.status for the lrcalc build.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7077feb09e87ec87c651f79e5de587169f4c3c4e\"><code>7077feb</code></a></td><td><code>Trac #29345: replace the function that populates the CVXOPT_* variables.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b3f9f5595c5443571cbe38dea141f9246d62f271\"><code>b3f9f55</code></a></td><td><code>Trac #29345: add Dima's SPKG patches for ksh compatibility.</code></td></tr></table>\n",
    "created_at": "2020-05-26T14:15:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460521",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:41"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/647e64cf8b5f16713fb4fd0d00ae224aff74f182"><code>647e64c</code></a></td><td><code>Trac #29345: fix one more newline-constant bashism in SAGE_SPKG_ENABLE.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4e0b8dde25a4e41dabcee2def918e205b603e127"><code>4e0b8dd</code></a></td><td><code>Trac #29345: replace a few obsolete "-a" tests with "-e".</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/955da4d303230e2f7c6cf3d8d6def7315b3be30f"><code>955da4d</code></a></td><td><code>Trac #29345: replace a bash array with something portable.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/76bdb66bc187cfdc91ac4a83bc7b400695b56bd7"><code>76bdb66</code></a></td><td><code>Trac #29345: replace a few uses of "source" with "."</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7f46fae03550fc7e4d21b8849844a30171f8ac2b"><code>7f46fae</code></a></td><td><code>Trac #29345: fix some bashisms in sage-env's resolvelinks() function.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/791194a71d2aff3a4eece09280a775a0deebc8c9"><code>791194a</code></a></td><td><code>Trac #29345: don't force SHELL=bash any longer.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c22ef4189b98b499a81fe776a23cd45c394950a0"><code>c22ef41</code></a></td><td><code>Trac #29345: remove "break" statements from AC_SEARCH_LIBS.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/20a1cdbac6a052fcde65dcad5b54729e34dfe52c"><code>20a1cdb</code></a></td><td><code>Trac #29345: don't use sage's config.status for the lrcalc build.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7077feb09e87ec87c651f79e5de587169f4c3c4e"><code>7077feb</code></a></td><td><code>Trac #29345: replace the function that populates the CVXOPT_* variables.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b3f9f5595c5443571cbe38dea141f9246d62f271"><code>b3f9f55</code></a></td><td><code>Trac #29345: add Dima's SPKG patches for ksh compatibility.</code></td></tr></table>




---

archive/issue_comments_460522.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nThat last one is just a rebase onto the rebase in #29098.",
    "created_at": "2020-05-26T14:16:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460522",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:42" align="right">comment:42</div>

That last one is just a rebase onto the rebase in #29098.



---

archive/issue_comments_460523.json:
```json
{
    "body": "Changed dependencies from **29098** to **#29098**",
    "created_at": "2020-05-27T12:21:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460523",
    "user": "https://github.com/dimpase"
}
```

Changed dependencies from **29098** to **#29098**



---

archive/issue_comments_460524.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\noops, needs another rebase, over the beta0 that just came out.",
    "created_at": "2020-05-28T22:03:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460524",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:44" align="right">comment:44</div>

oops, needs another rebase, over the beta0 that just came out.



---

archive/issue_comments_460525.json:
```json
{
    "body": "<div id=\"comment:45\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc3ea8e7448a3501a92bf4d800e19303154c6a75\"><code>bc3ea8e</code></a></td><td><code>Trac #29345: fix one more newline-constant bashism in SAGE_SPKG_ENABLE.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb475f3311972d819723c0d8f7d8a4cb3036b74c\"><code>fb475f3</code></a></td><td><code>Trac #29345: replace a few obsolete \"-a\" tests with \"-e\".</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/305d8cfac37e6b110710d6b0892f00c3abce1a98\"><code>305d8cf</code></a></td><td><code>Trac #29345: replace a bash array with something portable.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d0dff56f6bb004b32f07c067b653f966bd1f7569\"><code>d0dff56</code></a></td><td><code>Trac #29345: replace a few uses of \"source\" with \".\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5ac420b15ac0e561e5e8f7f64bb9566a1b6e7890\"><code>5ac420b</code></a></td><td><code>Trac #29345: fix some bashisms in sage-env's resolvelinks() function.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0a617950488b3945fb6f494cec8b50e8486bd9dd\"><code>0a61795</code></a></td><td><code>Trac #29345: don't force SHELL=bash any longer.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5db53186b9ae9a546bc78fc9107cc1af713b7e24\"><code>5db5318</code></a></td><td><code>Trac #29345: remove \"break\" statements from AC_SEARCH_LIBS.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e810ad1596d527c832bf43d3aac745407c9ba98d\"><code>e810ad1</code></a></td><td><code>Trac #29345: don't use sage's config.status for the lrcalc build.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/93c9921cc5ff461cd1f02f441b46cea4400dcd85\"><code>93c9921</code></a></td><td><code>Trac #29345: replace the function that populates the CVXOPT_* variables.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0e66a0abc00d5bf5ac1496e13f4d2f4ef7fe29dc\"><code>0e66a0a</code></a></td><td><code>Trac #29345: add Dima's SPKG patches for ksh compatibility.</code></td></tr></table>\n",
    "created_at": "2020-05-30T12:20:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460525",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:45"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc3ea8e7448a3501a92bf4d800e19303154c6a75"><code>bc3ea8e</code></a></td><td><code>Trac #29345: fix one more newline-constant bashism in SAGE_SPKG_ENABLE.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb475f3311972d819723c0d8f7d8a4cb3036b74c"><code>fb475f3</code></a></td><td><code>Trac #29345: replace a few obsolete "-a" tests with "-e".</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/305d8cfac37e6b110710d6b0892f00c3abce1a98"><code>305d8cf</code></a></td><td><code>Trac #29345: replace a bash array with something portable.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d0dff56f6bb004b32f07c067b653f966bd1f7569"><code>d0dff56</code></a></td><td><code>Trac #29345: replace a few uses of "source" with "."</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5ac420b15ac0e561e5e8f7f64bb9566a1b6e7890"><code>5ac420b</code></a></td><td><code>Trac #29345: fix some bashisms in sage-env's resolvelinks() function.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0a617950488b3945fb6f494cec8b50e8486bd9dd"><code>0a61795</code></a></td><td><code>Trac #29345: don't force SHELL=bash any longer.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5db53186b9ae9a546bc78fc9107cc1af713b7e24"><code>5db5318</code></a></td><td><code>Trac #29345: remove "break" statements from AC_SEARCH_LIBS.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e810ad1596d527c832bf43d3aac745407c9ba98d"><code>e810ad1</code></a></td><td><code>Trac #29345: don't use sage's config.status for the lrcalc build.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/93c9921cc5ff461cd1f02f441b46cea4400dcd85"><code>93c9921</code></a></td><td><code>Trac #29345: replace the function that populates the CVXOPT_* variables.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0e66a0abc00d5bf5ac1496e13f4d2f4ef7fe29dc"><code>0e66a0a</code></a></td><td><code>Trac #29345: add Dima's SPKG patches for ksh compatibility.</code></td></tr></table>




---

archive/issue_comments_460526.json:
```json
{
    "body": "Changed commit from **[`b3f9f55`](https://github.com/sagemath/sagetrac-mirror/commit/b3f9f5595c5443571cbe38dea141f9246d62f271)** to **[`0e66a0a`](https://github.com/sagemath/sagetrac-mirror/commit/0e66a0abc00d5bf5ac1496e13f4d2f4ef7fe29dc)**",
    "created_at": "2020-05-30T12:20:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460526",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b3f9f55`](https://github.com/sagemath/sagetrac-mirror/commit/b3f9f5595c5443571cbe38dea141f9246d62f271)** to **[`0e66a0a`](https://github.com/sagemath/sagetrac-mirror/commit/0e66a0abc00d5bf5ac1496e13f4d2f4ef7fe29dc)**



---

archive/issue_comments_460527.json:
```json
{
    "body": "Changed dependencies from **#29098** to none",
    "created_at": "2020-05-30T12:21:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460527",
    "user": "https://github.com/orlitzky"
}
```

Changed dependencies from **#29098** to none



---

archive/issue_comments_460528.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nDone again.",
    "created_at": "2020-05-30T12:21:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460528",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:46" align="right">comment:46</div>

Done again.



---

archive/issue_comments_460529.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nlgtm",
    "created_at": "2020-06-04T00:44:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460529",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:47" align="right">comment:47</div>

lgtm



---

archive/issue_comments_460530.json:
```json
{
    "body": "Reviewer: **Dima Pasechnik**",
    "created_at": "2020-06-04T00:44:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460530",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Dima Pasechnik**



---

archive/issue_events_403478.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-06-04T00:44:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29345#event-403478"
}
```



---

archive/issue_events_403479.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-06-04T00:44:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29345#event-403479"
}
```



---

archive/issue_events_403480.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-06-12T11:07:28Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "title_is": "replace bashisms in m4/sage_spkg_collect.m4, m4/sage_spkg_enable.m4, build/pkgs/*/spkg-configure.m4, src/bin/sage-env, build/make/Makefile.in",
    "title_was": "replace bashisms in m4/sage_spkg_collect.m4 and m4/sage_spkg_enable.m4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29345#event-403480"
}
```



---

archive/issue_comments_460531.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -29,3 +29,4 @@\n \n though, because those are inserted verbatim into the Makefile as rules, and the newlines probably matter.\n \n+\n``````\n",
    "created_at": "2020-06-12T11:07:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460531",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -29,3 +29,4 @@
 
 though, because those are inserted verbatim into the Makefile as rules, and the newlines probably matter.
 
+
``````




---

archive/issue_events_403481.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-06-15T11:36:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29345#event-403481"
}
```



---

archive/issue_events_403482.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-06-15T11:36:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29345#event-403482"
}
```



---

archive/issue_comments_460532.json:
```json
{
    "body": "Changed commit from **[`0e66a0a`](https://github.com/sagemath/sagetrac-mirror/commit/0e66a0abc00d5bf5ac1496e13f4d2f4ef7fe29dc)** to **[`604657a`](https://github.com/sagemath/sagetrac-mirror/commit/604657ac876c0ab6c6ba96f151db03eec3e8ad2e)**",
    "created_at": "2020-06-15T11:36:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460532",
    "user": "https://github.com/dimpase"
}
```

Changed commit from **[`0e66a0a`](https://github.com/sagemath/sagetrac-mirror/commit/0e66a0abc00d5bf5ac1496e13f4d2f4ef7fe29dc)** to **[`604657a`](https://github.com/sagemath/sagetrac-mirror/commit/604657ac876c0ab6c6ba96f151db03eec3e8ad2e)**



---

archive/issue_comments_460533.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nrebased over 9.2.beta1 - making this critical, as we're approaching a rebase hell state with this ticket not merged for 4 weeks.\n\n---\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bbf52658d1cbda23e8bf20ed4a6fb67b16b3a8f1\"><code>bbf5265</code></a></td><td><code>Trac #29345: fix one more newline-constant bashism in SAGE_SPKG_ENABLE.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/beccf2473182c432265af91566ffbb91948f9211\"><code>beccf24</code></a></td><td><code>Trac #29345: replace a few obsolete \"-a\" tests with \"-e\".</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ff632101c52b37bfc804f4b871000878f3179944\"><code>ff63210</code></a></td><td><code>Trac #29345: replace a bash array with something portable.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bb69c7eb546ec75f7f17c3e9ad10577775a29a02\"><code>bb69c7e</code></a></td><td><code>Trac #29345: replace a few uses of \"source\" with \".\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c549738a8864fc20590fffe227b903b4515bd790\"><code>c549738</code></a></td><td><code>Trac #29345: fix some bashisms in sage-env's resolvelinks() function.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b445b6efc05c57fd10d59110a77a0af3864ff887\"><code>b445b6e</code></a></td><td><code>Trac #29345: don't force SHELL=bash any longer.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/18dd12481cf7d2995d773375760a3c1a51a81679\"><code>18dd124</code></a></td><td><code>Trac #29345: remove \"break\" statements from AC_SEARCH_LIBS.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a5d73ffeefce3b92b83a81186e78632955f5926\"><code>6a5d73f</code></a></td><td><code>Trac #29345: don't use sage's config.status for the lrcalc build.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3d8ba26d4b81b765954ffe0e0246301c4430ae03\"><code>3d8ba26</code></a></td><td><code>Trac #29345: replace the function that populates the CVXOPT_* variables.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/604657ac876c0ab6c6ba96f151db03eec3e8ad2e\"><code>604657a</code></a></td><td><code>Trac #29345: add Dima's SPKG patches for ksh compatibility.</code></td></tr></table>\n",
    "created_at": "2020-06-15T11:36:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460533",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:49" align="right">comment:49</div>

rebased over 9.2.beta1 - making this critical, as we're approaching a rebase hell state with this ticket not merged for 4 weeks.

---
Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bbf52658d1cbda23e8bf20ed4a6fb67b16b3a8f1"><code>bbf5265</code></a></td><td><code>Trac #29345: fix one more newline-constant bashism in SAGE_SPKG_ENABLE.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/beccf2473182c432265af91566ffbb91948f9211"><code>beccf24</code></a></td><td><code>Trac #29345: replace a few obsolete "-a" tests with "-e".</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ff632101c52b37bfc804f4b871000878f3179944"><code>ff63210</code></a></td><td><code>Trac #29345: replace a bash array with something portable.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bb69c7eb546ec75f7f17c3e9ad10577775a29a02"><code>bb69c7e</code></a></td><td><code>Trac #29345: replace a few uses of "source" with "."</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c549738a8864fc20590fffe227b903b4515bd790"><code>c549738</code></a></td><td><code>Trac #29345: fix some bashisms in sage-env's resolvelinks() function.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b445b6efc05c57fd10d59110a77a0af3864ff887"><code>b445b6e</code></a></td><td><code>Trac #29345: don't force SHELL=bash any longer.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/18dd12481cf7d2995d773375760a3c1a51a81679"><code>18dd124</code></a></td><td><code>Trac #29345: remove "break" statements from AC_SEARCH_LIBS.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a5d73ffeefce3b92b83a81186e78632955f5926"><code>6a5d73f</code></a></td><td><code>Trac #29345: don't use sage's config.status for the lrcalc build.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3d8ba26d4b81b765954ffe0e0246301c4430ae03"><code>3d8ba26</code></a></td><td><code>Trac #29345: replace the function that populates the CVXOPT_* variables.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/604657ac876c0ab6c6ba96f151db03eec3e8ad2e"><code>604657a</code></a></td><td><code>Trac #29345: add Dima's SPKG patches for ksh compatibility.</code></td></tr></table>




---

archive/issue_comments_460534.json:
```json
{
    "body": "Changed branch from **[u/mjo/ticket/29345](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/29345)** to **[public/build/29345rebased](https://github.com/sagemath/sagetrac-mirror/tree/public/build/29345rebased)**",
    "created_at": "2020-06-15T11:36:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460534",
    "user": "https://github.com/dimpase"
}
```

Changed branch from **[u/mjo/ticket/29345](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/29345)** to **[public/build/29345rebased](https://github.com/sagemath/sagetrac-mirror/tree/public/build/29345rebased)**



---

archive/issue_comments_460535.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\n0e66a0a is already merged on Volker's branch.",
    "created_at": "2020-06-15T13:59:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460535",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:50" align="right">comment:50</div>

0e66a0a is already merged on Volker's branch.



---

archive/issue_comments_460536.json:
```json
{
    "body": "Changed commit from **[`604657a`](https://github.com/sagemath/sagetrac-mirror/commit/604657ac876c0ab6c6ba96f151db03eec3e8ad2e)** to **[`0e66a0a`](https://github.com/sagemath/sagetrac-mirror/commit/0e66a0abc00d5bf5ac1496e13f4d2f4ef7fe29dc)**",
    "created_at": "2020-06-15T14:01:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460536",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[`604657a`](https://github.com/sagemath/sagetrac-mirror/commit/604657ac876c0ab6c6ba96f151db03eec3e8ad2e)** to **[`0e66a0a`](https://github.com/sagemath/sagetrac-mirror/commit/0e66a0abc00d5bf5ac1496e13f4d2f4ef7fe29dc)**



---

archive/issue_comments_460537.json:
```json
{
    "body": "Changed branch from **[public/build/29345rebased](https://github.com/sagemath/sagetrac-mirror/tree/public/build/29345rebased)** to **[u/mjo/ticket/29345](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/29345)**",
    "created_at": "2020-06-15T14:01:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460537",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[public/build/29345rebased](https://github.com/sagemath/sagetrac-mirror/tree/public/build/29345rebased)** to **[u/mjo/ticket/29345](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/29345)**



---

archive/issue_comments_460538.json:
```json
{
    "body": "Changed branch from **[u/mjo/ticket/29345](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/29345)** to **[`0e66a0a`](https://github.com/sagemath/sagetrac-mirror/commit/0e66a0abc00d5bf5ac1496e13f4d2f4ef7fe29dc)**",
    "created_at": "2020-06-21T22:37:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460538",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mjo/ticket/29345](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/29345)** to **[`0e66a0a`](https://github.com/sagemath/sagetrac-mirror/commit/0e66a0abc00d5bf5ac1496e13f4d2f4ef7fe29dc)**



---

archive/issue_events_403483.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-06-21T22:37:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29345#event-403483"
}
```



---

archive/issue_events_403484.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "0527ee760d1c90c714a8594836a511abdcc206bf",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-06-21T22:37:08Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29345#event-403484"
}
```



---

archive/issue_comments_460539.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nReplying to [@orlitzky](#comment:23):\n> New commits fix the `break` statements and probably lrcalc.\n\nno, lrcalc on OpenBSD is still broken due to this `print` issue. Probably we really need to run a modern autoconf on it and replace the resulting scripts.",
    "created_at": "2020-09-03T15:53:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460539",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:53" align="right">comment:53</div>

Replying to [@orlitzky](#comment:23):
> New commits fix the `break` statements and probably lrcalc.

no, lrcalc on OpenBSD is still broken due to this `print` issue. Probably we really need to run a modern autoconf on it and replace the resulting scripts.



---

archive/issue_comments_460540.json:
```json
{
    "body": "Changed commit from **[`0e66a0a`](https://github.com/sagemath/sagetrac-mirror/commit/0e66a0abc00d5bf5ac1496e13f4d2f4ef7fe29dc)** to none",
    "created_at": "2020-09-03T15:53:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29345",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29345#issuecomment-460540",
    "user": "https://github.com/dimpase"
}
```

Changed commit from **[`0e66a0a`](https://github.com/sagemath/sagetrac-mirror/commit/0e66a0abc00d5bf5ac1496e13f4d2f4ef7fe29dc)** to none
