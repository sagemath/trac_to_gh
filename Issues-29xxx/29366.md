# Issue 29366: archlinux: Add missing system packages (arch.txt), add arch section to installation manual, fix detection of system packages

archive/issues_029129.json:
```json
{
    "assignees": [],
    "body": "https://groups.google.com/d/msg/sage-devel/JgArPVx7dwg/gMxeB4b7AgAJ\n\nTo test:\n\n```\n  tox -e docker-archlinux-latest-standard\n```\n\n\nCC:  @videlec @antonio-rojas @dimpase\n\nBranch/Commit: **[338468f](https://github.com/sagemath/sagetrac-mirror/commit/338468facda0ba5aef8ab8c505bdcaa4e47efb7b)**\n\nReviewer: **Dima Pasechnik**\n\nAuthor: **Matthias Koeppe, Vincent Delecroix**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29366_\n\n",
    "closed_at": "2020-04-09T22:44:51Z",
    "created_at": "2020-03-19T14:23:55Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20porting",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "archlinux: Add missing system packages (arch.txt), add arch section to installation manual, fix detection of system packages",
    "type": "issue",
    "updated_at": "2020-04-09T22:44:51Z",
    "url": "https://github.com/sagemath/sage/issues/29366",
    "user": "https://github.com/mkoeppe"
}
```
https://groups.google.com/d/msg/sage-devel/JgArPVx7dwg/gMxeB4b7AgAJ

To test:

```
  tox -e docker-archlinux-latest-standard
```


CC:  @videlec @antonio-rojas @dimpase

Branch/Commit: **[338468f](https://github.com/sagemath/sagetrac-mirror/commit/338468facda0ba5aef8ab8c505bdcaa4e47efb7b)**

Reviewer: **Dima Pasechnik**

Author: **Matthias Koeppe, Vincent Delecroix**

_Issue created by migration from https://trac.sagemath.org/ticket/29366_





---

archive/issue_events_385536.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-19T14:23:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29366#event-385536"
}
```



---

archive/issue_events_385537.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-19T14:23:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20porting",
    "label_color": "000080",
    "label_name": "component: porting",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29366#event-385537"
}
```



---

archive/issue_events_385538.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-19T14:23:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29366#event-385538"
}
```



---

archive/issue_events_385539.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-19T14:23:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29366#event-385539"
}
```



---

archive/issue_events_385540.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-19T14:43:42Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "title_is": "archlinux: Fix detection of system packages",
    "title_was": "archlinux: Fix detection detection of system packages",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29366#event-385540"
}
```



---

archive/issue_comments_463805.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nAttachment: **[config.log](https://github.com/sagemath/sage/files/ticket29366/config.log)**\n\nnot sure there is much on Sage's side that can be done - apart from keeping correct lists of packages to install.",
    "created_at": "2020-03-19T15:10:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463805",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:3" align="right">Comment 3</div>

Attachment: **[config.log](https://github.com/sagemath/sage/files/ticket29366/config.log)**

not sure there is much on Sage's side that can be done - apart from keeping correct lists of packages to install.



---

archive/issue_comments_463806.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nIndeed, I would like to be sure that it is not on Sage side **and** have an up to date developer manual for the relevant packages.",
    "created_at": "2020-03-19T15:14:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463806",
    "user": "https://github.com/videlec"
}
```

<div id="comment:4" align="right">Comment 4</div>

Indeed, I would like to be sure that it is not on Sage side **and** have an up to date developer manual for the relevant packages.



---

archive/issue_comments_463807.json:
```json
{
    "body": "Attachment: **[configure-output.log](https://github.com/sagemath/sage/files/ticket29366/configure-output.log)**",
    "created_at": "2020-03-19T15:15:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463807",
    "user": "https://github.com/videlec"
}
```

Attachment: **[configure-output.log](https://github.com/sagemath/sage/files/ticket29366/configure-output.log)**



---

archive/issue_comments_463808.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nIn case you haven't seen it yet: the system package lists in the developer's manual are now autogenerated. But adding some Arch specific instructions would be a useful addition",
    "created_at": "2020-03-19T15:17:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463808",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:5" align="right">Comment 5</div>

In case you haven't seen it yet: the system package lists in the developer's manual are now autogenerated. But adding some Arch specific instructions would be a useful addition



---

archive/issue_comments_463809.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nInstallation manual, that is",
    "created_at": "2020-03-19T15:17:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463809",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">Comment 6</div>

Installation manual, that is



---

archive/issue_comments_463810.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nWell, config.log is clear enough on e.g. what's missing w.r.t. Pari:\nnamely, install elldata, galpol, seadata, as seen in\n\n```\nconfigure:14982: checking is pari_elldata installed?\n1735\t  ***   at top-level: r=ellinit(\"11a1\");r[11]\n1736\t  ***                   ^---------------------\n1737\t  *** ellinit: error opening elldata file: `/usr/share/pari/elldata/ell0'.\n1738\tconfigure:14989: result: no; cannot use system pari/GP without elldata package\n1739\tconfigure:14991: Install elldata package and reconfigure.\n1740\tconfigure:14993: Otherwise Sage will build its own pari/GP.\n1741\tconfigure:14997: checking is pari_galdata installed?\n1742\tconfigure:15001: result: yes\n1743\tconfigure:15012: checking is pari_galpol installed?\n1744\t  ***   at top-level: galoisgetname(12,1)==\"C3 : C4\"\n1745\t  ***                 ^------------------------------\n1746\t  *** galoisgetname: error opening galpol file: `/usr/share/pari/galpol/12/nb'.\n1747\tconfigure:15019: result: no; cannot use system pari/GP without galpol package\n1748\tconfigure:15021: Install galpol package and reconfigure.\n1749\tconfigure:15023: Otherwise Sage will build its own pari/GP.\n1750\tconfigure:15027: checking is pari_seadata installed?\n1751\t  ***   at top-level: poldegree(ellmodulareqn(211)[1])\n1752\t  ***                           ^----------------------\n1753\t  *** ellmodulareqn: error opening seadata file: `/usr/share/pari/seadata/sea211'.\n1754\tconfigure:15034: result: no; cannot use system pari/GP without seadata package\n1755\tconfigure:15036: Install seadata package and reconfigure.\n1756\tconfigure:15038: Otherwise Sage will build its own pari/GP.\n1757\tconfigure:15266: no suitable system package found for SPKG pari\n1758\tconfigure:15284: result: using Sage's pari SPKG\n```",
    "created_at": "2020-03-19T15:18:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463810",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:7" align="right">Comment 7</div>

Well, config.log is clear enough on e.g. what's missing w.r.t. Pari:
namely, install elldata, galpol, seadata, as seen in

```
configure:14982: checking is pari_elldata installed?
1735	  ***   at top-level: r=ellinit("11a1");r[11]
1736	  ***                   ^---------------------
1737	  *** ellinit: error opening elldata file: `/usr/share/pari/elldata/ell0'.
1738	configure:14989: result: no; cannot use system pari/GP without elldata package
1739	configure:14991: Install elldata package and reconfigure.
1740	configure:14993: Otherwise Sage will build its own pari/GP.
1741	configure:14997: checking is pari_galdata installed?
1742	configure:15001: result: yes
1743	configure:15012: checking is pari_galpol installed?
1744	  ***   at top-level: galoisgetname(12,1)=="C3 : C4"
1745	  ***                 ^------------------------------
1746	  *** galoisgetname: error opening galpol file: `/usr/share/pari/galpol/12/nb'.
1747	configure:15019: result: no; cannot use system pari/GP without galpol package
1748	configure:15021: Install galpol package and reconfigure.
1749	configure:15023: Otherwise Sage will build its own pari/GP.
1750	configure:15027: checking is pari_seadata installed?
1751	  ***   at top-level: poldegree(ellmodulareqn(211)[1])
1752	  ***                           ^----------------------
1753	  *** ellmodulareqn: error opening seadata file: `/usr/share/pari/seadata/sea211'.
1754	configure:15034: result: no; cannot use system pari/GP without seadata package
1755	configure:15036: Install seadata package and reconfigure.
1756	configure:15038: Otherwise Sage will build its own pari/GP.
1757	configure:15266: no suitable system package found for SPKG pari
1758	configure:15284: result: using Sage's pari SPKG
```



---

archive/issue_comments_463811.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nNothing to fix on Arch side either - givaro is not used because you have an older version on /usr/local which is detected first, and pari is not used because of missing optional packages",
    "created_at": "2020-03-19T15:19:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463811",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:8" align="right">Comment 8</div>

Nothing to fix on Arch side either - givaro is not used because you have an older version on /usr/local which is detected first, and pari is not used because of missing optional packages



---

archive/issue_comments_463812.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nCould you also take a look at the build logs at https://github.com/mkoeppe/sage/runs/518106289 please?",
    "created_at": "2020-03-19T15:24:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463812",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">Comment 9</div>

Could you also take a look at the build logs at https://github.com/mkoeppe/sage/runs/518106289 please?



---

archive/issue_comments_463813.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nReplying to [@mkoeppe](#comment%3A9):\n> Could you also take a look at the build logs at https://github.com/mkoeppe/sage/runs/518106289 please?\n\nLooks like Arch's ntl is not accepted because it is built with threads, which in turn causes all its reverse dependencies to be compiled. Other packages (fplll, ecm) are simply not installed on the build machine.",
    "created_at": "2020-03-19T15:33:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463813",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:10" align="right">Comment 10</div>

Replying to [@mkoeppe](#comment%3A9):
> Could you also take a look at the build logs at https://github.com/mkoeppe/sage/runs/518106289 please?

Looks like Arch's ntl is not accepted because it is built with threads, which in turn causes all its reverse dependencies to be compiled. Other packages (fplll, ecm) are simply not installed on the build machine.



---

archive/issue_comments_463814.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nReplying to [@antonio-rojas](#comment%3A10):\n> Replying to [@mkoeppe](#comment%3A9):\n> > Could you also take a look at the build logs at https://github.com/mkoeppe/sage/runs/518106289 please?\n\n> \n> Looks like Arch's ntl is not accepted because it is built with threads, which in turn causes all its reverse dependencies to be compiled. \n\nRight, this build is using #29339 - Fix NTL spkg-configure.m4 so it rejects NTLs built with NTL_THREADS\n\n> Other packages (fplll, ecm) are simply not installed on the build machine.\n\nOK, this means we need to add `arch.txt` files for these packages",
    "created_at": "2020-03-19T15:38:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463814",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:11" align="right">Comment 11</div>

Replying to [@antonio-rojas](#comment%3A10):
> Replying to [@mkoeppe](#comment%3A9):
> > Could you also take a look at the build logs at https://github.com/mkoeppe/sage/runs/518106289 please?

> 
> Looks like Arch's ntl is not accepted because it is built with threads, which in turn causes all its reverse dependencies to be compiled. 

Right, this build is using #29339 - Fix NTL spkg-configure.m4 so it rejects NTLs built with NTL_THREADS

> Other packages (fplll, ecm) are simply not installed on the build machine.

OK, this means we need to add `arch.txt` files for these packages



---

archive/issue_comments_463815.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nand for more of the following listed here:\n\nconfigure: notice: the following SPKGs did not find equivalent system packages: arb cbc cliquer cmake eclib ecm flint fplll git givaro gp2c isl lcalc libatomic_ops libsemigroups mpfi ninja_build ntl pari pari_elldata pari_galdata pari_galpol pari_nftables pari_seadata pari_seadata_small perl_term_readline_gnu yasm zeromq",
    "created_at": "2020-03-19T15:42:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463815",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:12" align="right">Comment 12</div>

and for more of the following listed here:

configure: notice: the following SPKGs did not find equivalent system packages: arb cbc cliquer cmake eclib ecm flint fplll git givaro gp2c isl lcalc libatomic_ops libsemigroups mpfi ninja_build ntl pari pari_elldata pari_galdata pari_galpol pari_nftables pari_seadata pari_seadata_small perl_term_readline_gnu yasm zeromq



---

archive/issue_comments_463816.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nReplying to [@mkoeppe](#comment%3A11):\n> Replying to [@antonio-rojas](#comment%3A10):\n> > Replying to [@mkoeppe](#comment%3A9):\n> > > Could you also take a look at the build logs at https://github.com/mkoeppe/sage/runs/518106289 please?\n\n> > \n> > Looks like Arch's ntl is not accepted because it is built with threads, which in turn causes all its reverse dependencies to be compiled. \n\n> \n> Right, this build is using #29339 - Fix NTL spkg-configure.m4 so it rejects NTLs built with NTL_THREADS\n\nI believe that I was able to use Arch's NTL in builds few betas ago.\nThis again points at #29339 as being too drastic in its approach.",
    "created_at": "2020-03-19T15:44:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463816",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:13" align="right">Comment 13</div>

Replying to [@mkoeppe](#comment%3A11):
> Replying to [@antonio-rojas](#comment%3A10):
> > Replying to [@mkoeppe](#comment%3A9):
> > > Could you also take a look at the build logs at https://github.com/mkoeppe/sage/runs/518106289 please?

> > 
> > Looks like Arch's ntl is not accepted because it is built with threads, which in turn causes all its reverse dependencies to be compiled. 

> 
> Right, this build is using #29339 - Fix NTL spkg-configure.m4 so it rejects NTLs built with NTL_THREADS

I believe that I was able to use Arch's NTL in builds few betas ago.
This again points at #29339 as being too drastic in its approach.



---

archive/issue_comments_463817.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nReplying to [@dimpase](#comment%3A13):\n> Replying to [@mkoeppe](#comment%3A11):\n> > Replying to [@antonio-rojas](#comment%3A10):\n> > > Replying to [@mkoeppe](#comment%3A9):\n> > > > Could you also take a look at the build logs at https://github.com/mkoeppe/sage/runs/518106289 please?\n\n> > > \n> > > Looks like Arch's ntl is not accepted because it is built with threads, which in turn causes all its reverse dependencies to be compiled. \n\n> > \n> > Right, this build is using #29339 - Fix NTL spkg-configure.m4 so it rejects NTLs built with NTL_THREADS\n\n> \n> I believe that I was able to use Arch's NTL in builds few betas ago.\n> This again points at #29339 as being too drastic in its approach.\n> \n\nAnd the distro sagemath package has been using multithreaded NTL for years with no issues whatsoever",
    "created_at": "2020-03-19T15:46:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463817",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:14" align="right">Comment 14</div>

Replying to [@dimpase](#comment%3A13):
> Replying to [@mkoeppe](#comment%3A11):
> > Replying to [@antonio-rojas](#comment%3A10):
> > > Replying to [@mkoeppe](#comment%3A9):
> > > > Could you also take a look at the build logs at https://github.com/mkoeppe/sage/runs/518106289 please?

> > > 
> > > Looks like Arch's ntl is not accepted because it is built with threads, which in turn causes all its reverse dependencies to be compiled. 

> > 
> > Right, this build is using #29339 - Fix NTL spkg-configure.m4 so it rejects NTLs built with NTL_THREADS

> 
> I believe that I was able to use Arch's NTL in builds few betas ago.
> This again points at #29339 as being too drastic in its approach.
> 

And the distro sagemath package has been using multithreaded NTL for years with no issues whatsoever



---

archive/issue_comments_463818.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nReplying to [@antonio-rojas](#comment%3A14):\n> And the distro sagemath package has been using multithreaded NTL for years with no issues whatsoever\n\nWell, it is currently disabled as of last NTL upgrade  #20590.",
    "created_at": "2020-03-19T16:06:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463818",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:15" align="right">Comment 15</div>

Replying to [@antonio-rojas](#comment%3A14):
> And the distro sagemath package has been using multithreaded NTL for years with no issues whatsoever

Well, it is currently disabled as of last NTL upgrade  #20590.



---

archive/issue_comments_463819.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nReplying to [@mkoeppe](#comment%3A15):\n> Replying to [@antonio-rojas](#comment%3A14):\n> > And the distro sagemath package has been using multithreaded NTL for years with no issues whatsoever\n\n> \n> Well, it is currently disabled as of last NTL upgrade  #20590.\n\nI mean the Arch sagemath package, not sage-the-distro",
    "created_at": "2020-03-19T16:10:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463819",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:16" align="right">Comment 16</div>

Replying to [@mkoeppe](#comment%3A15):
> Replying to [@antonio-rojas](#comment%3A14):
> > And the distro sagemath package has been using multithreaded NTL for years with no issues whatsoever

> 
> Well, it is currently disabled as of last NTL upgrade  #20590.

I mean the Arch sagemath package, not sage-the-distro



---

archive/issue_comments_463820.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nAh, thanks for the clarification",
    "created_at": "2020-03-19T16:11:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463820",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:17" align="right">Comment 17</div>

Ah, thanks for the clarification



---

archive/issue_events_385541.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-19T17:18:33Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "title_is": "archlinux: Add missing system packages (arch.txt), fix detection of system packages",
    "title_was": "archlinux: Fix detection of system packages",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29366#event-385541"
}
```



---

archive/issue_events_385542.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-19T17:24:54Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "title_is": "archlinux: Add missing system packages (arch.txt), add arch section to installation manual, fix detection of system packages",
    "title_was": "archlinux: Add missing system packages (arch.txt), fix detection of system packages",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29366#event-385542"
}
```



---

archive/issue_comments_463821.json:
```json
{
    "body": "Branch: **[u/mkoeppe/archlinux__add_missing_system_packages__arch_txt___add_arch_section_to_installation_manual__fix_detection_of_system_packages](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/archlinux__add_missing_system_packages__arch_txt___add_arch_section_to_installation_manual__fix_detection_of_system_packages)**",
    "created_at": "2020-03-19T17:35:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463821",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/archlinux__add_missing_system_packages__arch_txt___add_arch_section_to_installation_manual__fix_detection_of_system_packages](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/archlinux__add_missing_system_packages__arch_txt___add_arch_section_to_installation_manual__fix_detection_of_system_packages)**



---

archive/issue_comments_463822.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nReplying to [@mkoeppe](#comment%3A12):\n> and for more of the following listed here:\n> \n> configure: notice: the following SPKGs did not find equivalent system packages: arb cbc cliquer cmake eclib ecm flint fplll git givaro gp2c isl lcalc libatomic_ops libsemigroups mpfi ninja_build ntl pari pari_elldata pari_galdata pari_galpol pari_nftables pari_seadata pari_seadata_small perl_term_readline_gnu yasm zeromq\n> \n\nNote that the packages `pari-seadata` and `pari-seadata-small` conflict.\n\nAfter removing the pkgconfig file of givaro in `/usr/local` (my bad) and installing the three pari packages (`pari-seadata`, `pari-galpol`, `pari-elldata`), everything is now taken from the system! Thanks.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9a21aa77889fb4cababf0edde195bec499164b71\">9a21aa7</a></td><td><code>build/pkgs/readline/distros/arch.txt: New</code></td></tr></table>\n",
    "created_at": "2020-03-19T21:57:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463822",
    "user": "https://github.com/videlec"
}
```

<div id="comment:21" align="right">Comment 21</div>

Replying to [@mkoeppe](#comment%3A12):
> and for more of the following listed here:
> 
> configure: notice: the following SPKGs did not find equivalent system packages: arb cbc cliquer cmake eclib ecm flint fplll git givaro gp2c isl lcalc libatomic_ops libsemigroups mpfi ninja_build ntl pari pari_elldata pari_galdata pari_galpol pari_nftables pari_seadata pari_seadata_small perl_term_readline_gnu yasm zeromq
> 

Note that the packages `pari-seadata` and `pari-seadata-small` conflict.

After removing the pkgconfig file of givaro in `/usr/local` (my bad) and installing the three pari packages (`pari-seadata`, `pari-galpol`, `pari-elldata`), everything is now taken from the system! Thanks.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9a21aa77889fb4cababf0edde195bec499164b71">9a21aa7</a></td><td><code>build/pkgs/readline/distros/arch.txt: New</code></td></tr></table>




---

archive/issue_comments_463823.json:
```json
{
    "body": "Commit: **[9a21aa7](https://github.com/sagemath/sagetrac-mirror/commit/9a21aa77889fb4cababf0edde195bec499164b71)**",
    "created_at": "2020-03-19T21:57:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463823",
    "user": "https://github.com/videlec"
}
```

Commit: **[9a21aa7](https://github.com/sagemath/sagetrac-mirror/commit/9a21aa77889fb4cababf0edde195bec499164b71)**



---

archive/issue_comments_463824.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nSo what are we missing in our arch.txt files?",
    "created_at": "2020-03-19T22:00:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463824",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:22" align="right">Comment 22</div>

So what are we missing in our arch.txt files?



---

archive/issue_comments_463825.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nI don't understand what these `arch.txt` are supposed to say. It looks like a kind of translation `sage package` -> `arch package`. However, for pari to be recognized by the sagemath configure, it needs to be installed with the optional packages `pari-seadata`, `pari-galpol`, `pari-elldata`. Where is this specified?",
    "created_at": "2020-03-20T07:59:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463825",
    "user": "https://github.com/videlec"
}
```

<div id="comment:23" align="right">Comment 23</div>

I don't understand what these `arch.txt` are supposed to say. It looks like a kind of translation `sage package` -> `arch package`. However, for pari to be recognized by the sagemath configure, it needs to be installed with the optional packages `pari-seadata`, `pari-galpol`, `pari-elldata`. Where is this specified?



---

archive/issue_comments_463826.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nHere is an example from `build/pkgs/pari/distros/debian.txt`:\n\n```\npari-gp2c libpari-dev\n# #29319: cypari2 needs gphelp at installation time\npari-doc\n# We add these data packages because they are checked by spkg-configure.m4\npari-elldata pari-galdata pari-galpol pari-seadata\n```\nPut the equivalent of these Debian package names\ninto  `build/pkgs/pari/distros/arch.txt`",
    "created_at": "2020-03-20T08:03:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463826",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:24" align="right">Comment 24</div>

Here is an example from `build/pkgs/pari/distros/debian.txt`:

```
pari-gp2c libpari-dev
# #29319: cypari2 needs gphelp at installation time
pari-doc
# We add these data packages because they are checked by spkg-configure.m4
pari-elldata pari-galdata pari-galpol pari-seadata
```
Put the equivalent of these Debian package names
into  `build/pkgs/pari/distros/arch.txt`



---

archive/issue_comments_463827.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nWhere is the format documented?",
    "created_at": "2020-03-20T08:10:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463827",
    "user": "https://github.com/videlec"
}
```

<div id="comment:25" align="right">Comment 25</div>

Where is the format documented?



---

archive/issue_comments_463828.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nAs many things in our build system, nowhere, AFAIK - unless I miss a ticket that didn't make it into Sage 9.1.beta8 (the renaming `spkg-install` -> `spkg-install.in` did make it there, though). Please feel free to add things to Developer Guide, in `src/doc/en/developer/packaging.rst`",
    "created_at": "2020-03-20T08:25:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463828",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:26" align="right">Comment 26</div>

As many things in our build system, nowhere, AFAIK - unless I miss a ticket that didn't make it into Sage 9.1.beta8 (the renaming `spkg-install` -> `spkg-install.in` did make it there, though). Please feel free to add things to Developer Guide, in `src/doc/en/developer/packaging.rst`



---

archive/issue_comments_463829.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nthese files are processed by `src/doc/bootstrap` called from `./bootstrap`.",
    "created_at": "2020-03-20T08:27:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463829",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:27" align="right">Comment 27</div>

these files are processed by `src/doc/bootstrap` called from `./bootstrap`.



---

archive/issue_comments_463830.json:
```json
{
    "body": "Changed commit from **[9a21aa7](https://github.com/sagemath/sagetrac-mirror/commit/9a21aa77889fb4cababf0edde195bec499164b71)** to **[2acd21d](https://github.com/sagemath/sagetrac-mirror/commit/2acd21d61ee2a2f9bfb5c9e0e3abbabec8d9f7a1)**",
    "created_at": "2020-03-20T19:22:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463830",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9a21aa7](https://github.com/sagemath/sagetrac-mirror/commit/9a21aa77889fb4cababf0edde195bec499164b71)** to **[2acd21d](https://github.com/sagemath/sagetrac-mirror/commit/2acd21d61ee2a2f9bfb5c9e0e3abbabec8d9f7a1)**



---

archive/issue_comments_463831.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2acd21d61ee2a2f9bfb5c9e0e3abbabec8d9f7a1\">2acd21d</a></td><td><code>src/doc/bootstrap: Also process arch.txt</code></td></tr></table>\n",
    "created_at": "2020-03-20T19:22:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463831",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28" align="right">Comment 28</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2acd21d61ee2a2f9bfb5c9e0e3abbabec8d9f7a1">2acd21d</a></td><td><code>src/doc/bootstrap: Also process arch.txt</code></td></tr></table>




---

archive/issue_comments_463832.json:
```json
{
    "body": "Changed commit from **[2acd21d](https://github.com/sagemath/sagetrac-mirror/commit/2acd21d61ee2a2f9bfb5c9e0e3abbabec8d9f7a1)** to none",
    "created_at": "2020-03-20T20:42:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463832",
    "user": "https://github.com/videlec"
}
```

Changed commit from **[2acd21d](https://github.com/sagemath/sagetrac-mirror/commit/2acd21d61ee2a2f9bfb5c9e0e3abbabec8d9f7a1)** to none



---

archive/issue_comments_463833.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/archlinux__add_missing_system_packages__arch_txt___add_arch_section_to_installation_manual__fix_detection_of_system_packages](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/archlinux__add_missing_system_packages__arch_txt___add_arch_section_to_installation_manual__fix_detection_of_system_packages)** to **[public/29366](https://github.com/sagemath/sagetrac-mirror/tree/public/29366)**",
    "created_at": "2020-03-20T20:42:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463833",
    "user": "https://github.com/videlec"
}
```

Changed branch from **[u/mkoeppe/archlinux__add_missing_system_packages__arch_txt___add_arch_section_to_installation_manual__fix_detection_of_system_packages](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/archlinux__add_missing_system_packages__arch_txt___add_arch_section_to_installation_manual__fix_detection_of_system_packages)** to **[public/29366](https://github.com/sagemath/sagetrac-mirror/tree/public/29366)**



---

archive/issue_comments_463834.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9a21aa77889fb4cababf0edde195bec499164b71\">9a21aa7</a></td><td><code>build/pkgs/readline/distros/arch.txt: New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2acd21d61ee2a2f9bfb5c9e0e3abbabec8d9f7a1\">2acd21d</a></td><td><code>src/doc/bootstrap: Also process arch.txt</code></td></tr></table>\n",
    "created_at": "2020-03-20T20:42:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463834",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30" align="right">Comment 30</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9a21aa77889fb4cababf0edde195bec499164b71">9a21aa7</a></td><td><code>build/pkgs/readline/distros/arch.txt: New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2acd21d61ee2a2f9bfb5c9e0e3abbabec8d9f7a1">2acd21d</a></td><td><code>src/doc/bootstrap: Also process arch.txt</code></td></tr></table>




---

archive/issue_comments_463835.json:
```json
{
    "body": "Commit: **[2acd21d](https://github.com/sagemath/sagetrac-mirror/commit/2acd21d61ee2a2f9bfb5c9e0e3abbabec8d9f7a1)**",
    "created_at": "2020-03-20T20:42:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463835",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[2acd21d](https://github.com/sagemath/sagetrac-mirror/commit/2acd21d61ee2a2f9bfb5c9e0e3abbabec8d9f7a1)**



---

archive/issue_comments_463836.json:
```json
{
    "body": "Changed commit from **[2acd21d](https://github.com/sagemath/sagetrac-mirror/commit/2acd21d61ee2a2f9bfb5c9e0e3abbabec8d9f7a1)** to **[187761e](https://github.com/sagemath/sagetrac-mirror/commit/187761e1d2a00eb75bb50eef1cac97f8aa807201)**",
    "created_at": "2020-03-20T20:43:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463836",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2acd21d](https://github.com/sagemath/sagetrac-mirror/commit/2acd21d61ee2a2f9bfb5c9e0e3abbabec8d9f7a1)** to **[187761e](https://github.com/sagemath/sagetrac-mirror/commit/187761e1d2a00eb75bb50eef1cac97f8aa807201)**



---

archive/issue_comments_463837.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/187761e1d2a00eb75bb50eef1cac97f8aa807201\">187761e</a></td><td><code>packages for pari</code></td></tr></table>\n",
    "created_at": "2020-03-20T20:43:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463837",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:31" align="right">Comment 31</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/187761e1d2a00eb75bb50eef1cac97f8aa807201">187761e</a></td><td><code>packages for pari</code></td></tr></table>




---

archive/issue_comments_463838.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nAlso, both pari-seadata and pari-elldata are from [AUR](https://wiki.archlinux.org/index.php/Arch_User_Repository).",
    "created_at": "2020-03-20T20:48:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463838",
    "user": "https://github.com/videlec"
}
```

<div id="comment:32" align="right">Comment 32</div>

Also, both pari-seadata and pari-elldata are from [AUR](https://wiki.archlinux.org/index.php/Arch_User_Repository).



---

archive/issue_comments_463839.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\n\n```\n$ tox -e docker-archlinux-latest-standard\ndocker-archlinux-latest-standard run-test-pre: PYTHONHASHSEED='2835960636'\ndocker-archlinux-latest-standard run-test: commands[0] | bash -c 'build/bin/write-dockerfile.sh arch \"standard\" yes no > /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/docker-archlinux-latest-standard/Dockerfile'\ndocker-archlinux-latest-standard run-test: commands[1] | docker build . -f /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/docker-archlinux-latest-standard/Dockerfile --build-arg EXTRA_CONFIGURE_ARGS= --build-arg BASE_IMAGE=archlinux:latest --build-arg http_proxy=http://host.docker.internal:3128 --build-arg https_proxy=http://host.docker.internal:3128\nSending build context to Docker daemon  179.1MB\nStep 1/23 : ARG BASE_IMAGE=archlinux:latest\nStep 2/23 : FROM ${BASE_IMAGE}\n ---> 0152bf6f0800\nStep 3/23 : ENV PACKAGES=\"binutils make m4 perl python tar bc gcc which gettext autoconf automake libtool pkg-config arb boost eclib gcc gf2x gfan gcc-fortran glpk gsl lcalc gd lrcalc m4ri m4rie nauty openblas lapack cblas pari pari-galdata pari-seadata pari-elldata pari-galdata pari-seadata-small patch planarity r readline rankwidth sqlite3 symmetrica tachyon\"\n ---> Using cache\n ---> 61ceb4b4c200\nStep 4/23 : RUN  pacman -Syu --noconfirm binutils make m4 perl python tar bc gcc which gettext autoconf automake libtool pkg-config arb boost eclib gcc gf2x gfan gcc-fortran glpk gsl lcalc gd lrcalc m4ri m4rie nauty openblas lapack cblas pari pari-galdata pari-seadata pari-elldata pari-galdata pari-seadata-small patch planarity r readline rankwidth sqlite3 symmetrica tachyon\n ---> Running in a4547b23d1cc\n:: Synchronizing package databases...\ndownloading core.db...\ndownloading extra.db...\ndownloading community.db...\nwarning: perl-5.30.1-1 is up to date -- reinstalling\nwarning: tar-1.32-3 is up to date -- reinstalling\nerror: target not found: pari-seadata\nerror: target not found: pari-elldata\nThe command '/bin/sh -c pacman -Syu --noconfirm binutils make m4 perl python tar bc gcc which gettext autoconf automake libtool pkg-config arb boost eclib gcc gf2x gfan gcc-fortran glpk gsl lcalc gd lrcalc m4ri m4rie nauty openblas lapack cblas pari pari-galdata pari-seadata pari-elldata pari-galdata pari-seadata-small patch planarity r readline rankwidth sqlite3 symmetrica tachyon' returned a non-zero code: 1\nERROR: InvocationError for command /usr/local/bin/docker build . -f .tox/docker-archlinux-latest-standard/Dockerfile --build-arg EXTRA_CONFIGURE_ARGS= --build-arg BASE_IMAGE=archlinux:latest --build-arg http_proxy=http://host.docker.internal:3128 --build-arg https_proxy=http://host.docker.internal:3128 (exited with code 1)\n```",
    "created_at": "2020-03-21T00:47:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463839",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:33" align="right">Comment 33</div>


```
$ tox -e docker-archlinux-latest-standard
docker-archlinux-latest-standard run-test-pre: PYTHONHASHSEED='2835960636'
docker-archlinux-latest-standard run-test: commands[0] | bash -c 'build/bin/write-dockerfile.sh arch "standard" yes no > /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/docker-archlinux-latest-standard/Dockerfile'
docker-archlinux-latest-standard run-test: commands[1] | docker build . -f /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/docker-archlinux-latest-standard/Dockerfile --build-arg EXTRA_CONFIGURE_ARGS= --build-arg BASE_IMAGE=archlinux:latest --build-arg http_proxy=http://host.docker.internal:3128 --build-arg https_proxy=http://host.docker.internal:3128
Sending build context to Docker daemon  179.1MB
Step 1/23 : ARG BASE_IMAGE=archlinux:latest
Step 2/23 : FROM ${BASE_IMAGE}
 ---> 0152bf6f0800
Step 3/23 : ENV PACKAGES="binutils make m4 perl python tar bc gcc which gettext autoconf automake libtool pkg-config arb boost eclib gcc gf2x gfan gcc-fortran glpk gsl lcalc gd lrcalc m4ri m4rie nauty openblas lapack cblas pari pari-galdata pari-seadata pari-elldata pari-galdata pari-seadata-small patch planarity r readline rankwidth sqlite3 symmetrica tachyon"
 ---> Using cache
 ---> 61ceb4b4c200
Step 4/23 : RUN  pacman -Syu --noconfirm binutils make m4 perl python tar bc gcc which gettext autoconf automake libtool pkg-config arb boost eclib gcc gf2x gfan gcc-fortran glpk gsl lcalc gd lrcalc m4ri m4rie nauty openblas lapack cblas pari pari-galdata pari-seadata pari-elldata pari-galdata pari-seadata-small patch planarity r readline rankwidth sqlite3 symmetrica tachyon
 ---> Running in a4547b23d1cc
:: Synchronizing package databases...
downloading core.db...
downloading extra.db...
downloading community.db...
warning: perl-5.30.1-1 is up to date -- reinstalling
warning: tar-1.32-3 is up to date -- reinstalling
error: target not found: pari-seadata
error: target not found: pari-elldata
The command '/bin/sh -c pacman -Syu --noconfirm binutils make m4 perl python tar bc gcc which gettext autoconf automake libtool pkg-config arb boost eclib gcc gf2x gfan gcc-fortran glpk gsl lcalc gd lrcalc m4ri m4rie nauty openblas lapack cblas pari pari-galdata pari-seadata pari-elldata pari-galdata pari-seadata-small patch planarity r readline rankwidth sqlite3 symmetrica tachyon' returned a non-zero code: 1
ERROR: InvocationError for command /usr/local/bin/docker build . -f .tox/docker-archlinux-latest-standard/Dockerfile --build-arg EXTRA_CONFIGURE_ARGS= --build-arg BASE_IMAGE=archlinux:latest --build-arg http_proxy=http://host.docker.internal:3128 --build-arg https_proxy=http://host.docker.internal:3128 (exited with code 1)
```



---

archive/issue_comments_463840.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\npacman cannot install packages from AUR, they need to be built from source:\nhttps://wiki.archlinux.org/index.php/Arch_User_Repository#Installing_packages\n\n(in case of these packages \"building\" is instant though, it just needs different commands to be run)\n\nYes, it'd be possible to script this, so these packages need to at least be tagged somehow.",
    "created_at": "2020-03-21T03:01:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463840",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:34" align="right">Comment 34</div>

pacman cannot install packages from AUR, they need to be built from source:
https://wiki.archlinux.org/index.php/Arch_User_Repository#Installing_packages

(in case of these packages "building" is instant though, it just needs different commands to be run)

Yes, it'd be possible to script this, so these packages need to at least be tagged somehow.



---

archive/issue_comments_463841.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8fdaa9e3cf354a48522dede4fe6cecb3dc2b02fc\">8fdaa9e</a></td><td><code>build/pkgs/pari/distros/arch.txt: Comment out these packages (uninstallable)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4cd1b55817f88191b3759ddfd2cc3863010e8223\">4cd1b55</a></td><td><code>src/doc/en/installation/source.rst: Include arch*.txt</code></td></tr></table>\n",
    "created_at": "2020-03-29T02:31:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463841",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:35" align="right">Comment 35</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8fdaa9e3cf354a48522dede4fe6cecb3dc2b02fc">8fdaa9e</a></td><td><code>build/pkgs/pari/distros/arch.txt: Comment out these packages (uninstallable)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4cd1b55817f88191b3759ddfd2cc3863010e8223">4cd1b55</a></td><td><code>src/doc/en/installation/source.rst: Include arch*.txt</code></td></tr></table>




---

archive/issue_comments_463842.json:
```json
{
    "body": "Changed commit from **[187761e](https://github.com/sagemath/sagetrac-mirror/commit/187761e1d2a00eb75bb50eef1cac97f8aa807201)** to **[4cd1b55](https://github.com/sagemath/sagetrac-mirror/commit/4cd1b55817f88191b3759ddfd2cc3863010e8223)**",
    "created_at": "2020-03-29T02:31:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463842",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[187761e](https://github.com/sagemath/sagetrac-mirror/commit/187761e1d2a00eb75bb50eef1cac97f8aa807201)** to **[4cd1b55](https://github.com/sagemath/sagetrac-mirror/commit/4cd1b55817f88191b3759ddfd2cc3863010e8223)**



---

archive/issue_events_385543.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-29T02:33:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29366#event-385543"
}
```



---

archive/issue_comments_463843.json:
```json
{
    "body": "Author: **Matthias Koeppe, Vincent Delecroix**",
    "created_at": "2020-03-29T02:33:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463843",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe, Vincent Delecroix**



---

archive/issue_comments_463844.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">Comment 36</div>\n\nThis is not complete but let's get it into 9.1",
    "created_at": "2020-03-29T02:33:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463844",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:36" align="right">Comment 36</div>

This is not complete but let's get it into 9.1



---

archive/issue_comments_463845.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">Comment 37</div>\n\nthere are replacements for `pacman` which allow automatic install of packages from AUR and the standard repo, such as `yay`.\n\nso the script can first install yay, and then use it for the rest.",
    "created_at": "2020-03-29T02:39:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463845",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:37" align="right">Comment 37</div>

there are replacements for `pacman` which allow automatic install of packages from AUR and the standard repo, such as `yay`.

so the script can first install yay, and then use it for the rest.



---

archive/issue_comments_463846.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">Comment 38</div>\n\nReplying to [@dimpase](#comment%3A37):\n> there are replacements for `pacman` which allow automatic install of packages from AUR and the standard repo, such as `yay`.\n> \n> so the script can first install yay, and then use it for the rest.\n\nPlease don't. AUR is unsupported, user generated content. There's no guarantee that it couldn't be replaced with broken or even malicious content at any time.\n\nIf necessary, I could move these packages to the binary repos. But I don't really see the need to check for those at build time, at least on Arch, given that they can be installed by the user at any time after Sage install.",
    "created_at": "2020-03-29T08:39:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463846",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:38" align="right">Comment 38</div>

Replying to [@dimpase](#comment%3A37):
> there are replacements for `pacman` which allow automatic install of packages from AUR and the standard repo, such as `yay`.
> 
> so the script can first install yay, and then use it for the rest.

Please don't. AUR is unsupported, user generated content. There's no guarantee that it couldn't be replaced with broken or even malicious content at any time.

If necessary, I could move these packages to the binary repos. But I don't really see the need to check for those at build time, at least on Arch, given that they can be installed by the user at any time after Sage install.



---

archive/issue_comments_463847.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nwell, if we recommend AUR packages, it's better if we test with them too, no?\nBut, indeed, if they can be moved to the regular package repo, why not?",
    "created_at": "2020-03-29T08:59:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463847",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:39" align="right">Comment 39</div>

well, if we recommend AUR packages, it's better if we test with them too, no?
But, indeed, if they can be moved to the regular package repo, why not?



---

archive/issue_comments_463848.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nAlright, packages are now in the official repos",
    "created_at": "2020-03-29T12:59:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463848",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:40" align="right">Comment 40</div>

Alright, packages are now in the official repos



---

archive/issue_comments_463849.json:
```json
{
    "body": "Changed commit from **[4cd1b55](https://github.com/sagemath/sagetrac-mirror/commit/4cd1b55817f88191b3759ddfd2cc3863010e8223)** to **[338468f](https://github.com/sagemath/sagetrac-mirror/commit/338468facda0ba5aef8ab8c505bdcaa4e47efb7b)**",
    "created_at": "2020-03-29T14:22:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463849",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4cd1b55](https://github.com/sagemath/sagetrac-mirror/commit/4cd1b55817f88191b3759ddfd2cc3863010e8223)** to **[338468f](https://github.com/sagemath/sagetrac-mirror/commit/338468facda0ba5aef8ab8c505bdcaa4e47efb7b)**



---

archive/issue_comments_463850.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5a62319747ce74e4b7b4108c2f9a0eb23e005e6d\">5a62319</a></td><td><code>build/pkgs/readline/distros/arch.txt: New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1236a4ec57d82c9cdfb5e957fc8b8c91adb505ab\">1236a4e</a></td><td><code>src/doc/bootstrap: Also process arch.txt</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5e203e9d92d3e5628c6bb895dbbdc2257b7bb5ea\">5e203e9</a></td><td><code>packages for pari</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ba6f6f924494abd9ddb0440af270f4b77997d691\">ba6f6f9</a></td><td><code>build/pkgs/pari/distros/arch.txt: Comment out these packages (uninstallable)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cefaf09a1131642bc0ce66566f650a6674d8294f\">cefaf09</a></td><td><code>src/doc/en/installation/source.rst: Include arch*.txt</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/338468facda0ba5aef8ab8c505bdcaa4e47efb7b\">338468f</a></td><td><code>build/pkgs/pari*/distros/arch.txt: Update/add</code></td></tr></table>\n",
    "created_at": "2020-03-29T14:22:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463850",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:41" align="right">Comment 41</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5a62319747ce74e4b7b4108c2f9a0eb23e005e6d">5a62319</a></td><td><code>build/pkgs/readline/distros/arch.txt: New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1236a4ec57d82c9cdfb5e957fc8b8c91adb505ab">1236a4e</a></td><td><code>src/doc/bootstrap: Also process arch.txt</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5e203e9d92d3e5628c6bb895dbbdc2257b7bb5ea">5e203e9</a></td><td><code>packages for pari</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ba6f6f924494abd9ddb0440af270f4b77997d691">ba6f6f9</a></td><td><code>build/pkgs/pari/distros/arch.txt: Comment out these packages (uninstallable)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cefaf09a1131642bc0ce66566f650a6674d8294f">cefaf09</a></td><td><code>src/doc/en/installation/source.rst: Include arch*.txt</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/338468facda0ba5aef8ab8c505bdcaa4e47efb7b">338468f</a></td><td><code>build/pkgs/pari*/distros/arch.txt: Update/add</code></td></tr></table>




---

archive/issue_comments_463851.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,8 @@\n https://groups.google.com/d/msg/sage-devel/JgArPVx7dwg/gMxeB4b7AgAJ\n \n+To test:\n+\n+```\n+  tox -e docker-archlinux-latest-standard\n+```\n+\n``````\n",
    "created_at": "2020-03-29T14:24:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463851",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,8 @@
 https://groups.google.com/d/msg/sage-devel/JgArPVx7dwg/gMxeB4b7AgAJ
 
+To test:
+
+```
+  tox -e docker-archlinux-latest-standard
+```
+
``````




---

archive/issue_comments_463852.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">Comment 43</div>\n\nReplying to [@antonio-rojas](#comment%3A40):\n> Alright, packages are now in the official repos\n\nThanks very much, that's great.\n\n`configure` now finds the packages!\n\n```\ntox -e docker-archlinux-latest-standard -- base-toolchain\n...\nChecking whether SageMath should install SPKG pari...\nchecking installing gmp/mpir or readline? ... no\nchecking installing PARI/GP packages? ... checking for gp... /usr/sbin/gp\nchecking for gphelp... /usr/sbin/gphelp\nchecking whether gphelp has access to the documentation... yes\nchecking is pari_elldata installed? ... yes\nchecking is pari_galdata installed? ... yes\nchecking is pari_galpol installed? ... yes\nchecking is pari_seadata installed? ... yes\nconfigure: will use system package and not install SPKG pari\nusing pari/gp from the system\n```\n\nNeeds review.",
    "created_at": "2020-03-29T14:28:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463852",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:43" align="right">Comment 43</div>

Replying to [@antonio-rojas](#comment%3A40):
> Alright, packages are now in the official repos

Thanks very much, that's great.

`configure` now finds the packages!

```
tox -e docker-archlinux-latest-standard -- base-toolchain
...
Checking whether SageMath should install SPKG pari...
checking installing gmp/mpir or readline? ... no
checking installing PARI/GP packages? ... checking for gp... /usr/sbin/gp
checking for gphelp... /usr/sbin/gphelp
checking whether gphelp has access to the documentation... yes
checking is pari_elldata installed? ... yes
checking is pari_galdata installed? ... yes
checking is pari_galpol installed? ... yes
checking is pari_seadata installed? ... yes
configure: will use system package and not install SPKG pari
using pari/gp from the system
```

Needs review.



---

archive/issue_events_385544.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-03-29T14:43:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29366#event-385544"
}
```



---

archive/issue_events_385545.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-03-29T14:43:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29366#event-385545"
}
```



---

archive/issue_comments_463853.json:
```json
{
    "body": "Reviewer: **Dima Pasechnik**",
    "created_at": "2020-03-29T14:43:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463853",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Dima Pasechnik**



---

archive/issue_comments_463854.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">Comment 44</div>\n\nlgtm",
    "created_at": "2020-03-29T14:43:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463854",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:44" align="right">Comment 44</div>

lgtm



---

archive/issue_comments_463855.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">Comment 45</div>\n\nThank you!",
    "created_at": "2020-03-29T14:55:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463855",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:45" align="right">Comment 45</div>

Thank you!



---

archive/issue_events_385546.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-09T22:44:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29366#event-385546"
}
```



---

archive/issue_events_385547.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "a1c396db85f349a7fb50edc6783eb1f48d7955c1",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-04-09T22:44:51Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29366#event-385547"
}
```



---

archive/issue_comments_463856.json:
```json
{
    "body": "Changed branch from **[public/29366](https://github.com/sagemath/sagetrac-mirror/tree/public/29366)** to **[338468f](https://github.com/sagemath/sagetrac-mirror/commit/338468facda0ba5aef8ab8c505bdcaa4e47efb7b)**",
    "created_at": "2020-04-09T22:44:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29366#issuecomment-463856",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/29366](https://github.com/sagemath/sagetrac-mirror/tree/public/29366)** to **[338468f](https://github.com/sagemath/sagetrac-mirror/commit/338468facda0ba5aef8ab8c505bdcaa4e47efb7b)**
