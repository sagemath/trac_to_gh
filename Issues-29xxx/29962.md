# Issue 29962: Introduce random-seed option to allow fuzzing of doctests

archive/issues_029725.json:
```json
{
    "assignees": [],
    "body": "This is the first step towards #29935.\n\nWe introduce an option for doctests: `--random-seed`.\n\nThis allows specifying which seed to use for tests\ninvolving randomness.\n\nThe seed is displayed in the test log:\n\n```\nsage -t --long --random-seed=9876543210 src/sage/all.py \n...\nDoctesting 1 file.\nsage -t --long --random-seed=9876543210 src/sage/all.py\n    [16 tests, 0.73 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 0.8 seconds\n    cpu time: 0.7 seconds\n    cumulative wall time: 0.7 seconds\n```\n\nwhich makes it easy to re-run tests with the same seed.\n\nThe seed defaults to `0` for now:\n\n```\nsage -t --long src/sage/all.py \n...\nDoctesting 1 file.\nsage -t --long --random-seed=0 src/sage/all.py\n    [16 tests, 0.73 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 0.8 seconds\n    cpu time: 0.7 seconds\n    cumulative wall time: 0.7 seconds\n```\n\nbut the plan in #29935 is to eventually have\nthe random seed itself picked at random by default.\n\nCC:  @slel\n\nKeywords: **doctests, random**\n\nBranch: **[`1d99129`](https://github.com/sagemath/sagetrac-mirror/commit/1d99129f26f4a065f9f9e5e13c3d5120a029e89f)**\n\nReviewer: **Markus Wageringel, Matthias Koeppe**\n\nAuthor: **Jonathan Kliem**\n\nComponent: **doctest framework**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29962_\n\n",
    "closed_at": "2020-07-19T07:24:18Z",
    "created_at": "2020-06-24T19:06:29Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20doctest%20framework",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Introduce random-seed option to allow fuzzing of doctests",
    "type": "issue",
    "updated_at": "2021-06-08T14:38:58Z",
    "url": "https://github.com/sagemath/sage/issues/29962",
    "user": "https://github.com/kliem"
}
```
This is the first step towards #29935.

We introduce an option for doctests: `--random-seed`.

This allows specifying which seed to use for tests
involving randomness.

The seed is displayed in the test log:

```
sage -t --long --random-seed=9876543210 src/sage/all.py 
...
Doctesting 1 file.
sage -t --long --random-seed=9876543210 src/sage/all.py
    [16 tests, 0.73 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 0.8 seconds
    cpu time: 0.7 seconds
    cumulative wall time: 0.7 seconds
```

which makes it easy to re-run tests with the same seed.

The seed defaults to `0` for now:

```
sage -t --long src/sage/all.py 
...
Doctesting 1 file.
sage -t --long --random-seed=0 src/sage/all.py
    [16 tests, 0.73 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 0.8 seconds
    cpu time: 0.7 seconds
    cumulative wall time: 0.7 seconds
```

but the plan in #29935 is to eventually have
the random seed itself picked at random by default.

CC:  @slel

Keywords: **doctests, random**

Branch: **[`1d99129`](https://github.com/sagemath/sagetrac-mirror/commit/1d99129f26f4a065f9f9e5e13c3d5120a029e89f)**

Reviewer: **Markus Wageringel, Matthias Koeppe**

Author: **Jonathan Kliem**

Component: **doctest framework**

_Issue created by migration from https://trac.sagemath.org/ticket/29962_





---

archive/issue_events_412515.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-24T19:06:29Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29962#event-412515"
}
```



---

archive/issue_events_412516.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-24T19:06:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20doctest%20framework",
    "label_color": "000080",
    "label_name": "c: doctest framework",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29962#event-412516"
}
```



---

archive/issue_events_412517.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-24T19:06:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29962#event-412517"
}
```



---

archive/issue_events_412518.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-24T19:06:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29962#event-412518"
}
```



---

archive/issue_events_412519.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-06-24T19:17:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29962#event-412519"
}
```



---

archive/issue_comments_474103.json:
```json
{
    "body": "Branch: **[public/29962](https://github.com/sagemath/sagetrac-mirror/tree/public/29962)**",
    "created_at": "2020-06-24T19:17:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29962#issuecomment-474103",
    "user": "https://github.com/kliem"
}
```

Branch: **[public/29962](https://github.com/sagemath/sagetrac-mirror/tree/public/29962)**



---

archive/issue_comments_474104.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/da1c6beec7d0bb6b972d88ecf9fb4eccbdf285a5\"><code>da1c6be</code></a></td><td><code>start from a \"random\" random seed for doctesting</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b7b836d789e034433d62f331f33fbc1821c0deaa\"><code>b7b836d</code></a></td><td><code>make random seed reproducible</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eedbe5ebea9c2b9da79404013c566fe17d0a3e20\"><code>eedbe5e</code></a></td><td><code>document random_seed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/998b1b94ce1289ea92451a86e5f6191c37eaeb5a\"><code>998b1b9</code></a></td><td><code>default random seed 0 for now</code></td></tr></table>\n",
    "created_at": "2020-06-24T19:17:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29962#issuecomment-474104",
    "user": "https://github.com/kliem"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/da1c6beec7d0bb6b972d88ecf9fb4eccbdf285a5"><code>da1c6be</code></a></td><td><code>start from a "random" random seed for doctesting</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b7b836d789e034433d62f331f33fbc1821c0deaa"><code>b7b836d</code></a></td><td><code>make random seed reproducible</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eedbe5ebea9c2b9da79404013c566fe17d0a3e20"><code>eedbe5e</code></a></td><td><code>document random_seed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/998b1b94ce1289ea92451a86e5f6191c37eaeb5a"><code>998b1b9</code></a></td><td><code>default random seed 0 for now</code></td></tr></table>




---

archive/issue_comments_474105.json:
```json
{
    "body": "Commit: **[`998b1b9`](https://github.com/sagemath/sagetrac-mirror/commit/998b1b94ce1289ea92451a86e5f6191c37eaeb5a)**",
    "created_at": "2020-06-24T19:17:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29962#issuecomment-474105",
    "user": "https://github.com/kliem"
}
```

Commit: **[`998b1b9`](https://github.com/sagemath/sagetrac-mirror/commit/998b1b94ce1289ea92451a86e5f6191c37eaeb5a)**



---

archive/issue_comments_474106.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/23ed583462cad48b1c0cf47dbfc77752d3dd3be1\"><code>23ed583</code></a></td><td><code>fix doctest in hyperbolic_space/hyperbolic_point</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5283dc49042f5bfd45e2cfa92c567e6843b22f6d\"><code>5283dc4</code></a></td><td><code>use abs tol flag</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7b244c03bb763bde8a3b95fa2ce5c129562c3260\"><code>7b244c0</code></a></td><td><code>modify doctests to the extend that they hold with fuzz</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/228f37973f5abf380feab366f931c8c4f3c85563\"><code>228f379</code></a></td><td><code>Merge branch 'public/29936' of git://trac.sagemath.org/sage into public/29962</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5c7e5620e9f8d66f0d131a6bda9da3b923f8330d\"><code>5c7e562</code></a></td><td><code>fix double description of hypercube</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e1bf211177ee3b734a314493c9474d9cd7eec661\"><code>e1bf211</code></a></td><td><code>remove set_random_seed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0e7a998ff4281ba3911cc84c4b060d177e2931ec\"><code>0e7a998</code></a></td><td><code>Merge branch 'public/29904' of git://trac.sagemath.org/sage into public/29962</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b6a5dc7c96125b6140e56feafb82dd13599998e7\"><code>b6a5dc7</code></a></td><td><code>fix random test in geometry/linear_expression</code></td></tr></table>\n",
    "created_at": "2020-06-24T19:45:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29962#issuecomment-474106",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/23ed583462cad48b1c0cf47dbfc77752d3dd3be1"><code>23ed583</code></a></td><td><code>fix doctest in hyperbolic_space/hyperbolic_point</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5283dc49042f5bfd45e2cfa92c567e6843b22f6d"><code>5283dc4</code></a></td><td><code>use abs tol flag</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7b244c03bb763bde8a3b95fa2ce5c129562c3260"><code>7b244c0</code></a></td><td><code>modify doctests to the extend that they hold with fuzz</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/228f37973f5abf380feab366f931c8c4f3c85563"><code>228f379</code></a></td><td><code>Merge branch 'public/29936' of git://trac.sagemath.org/sage into public/29962</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5c7e5620e9f8d66f0d131a6bda9da3b923f8330d"><code>5c7e562</code></a></td><td><code>fix double description of hypercube</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e1bf211177ee3b734a314493c9474d9cd7eec661"><code>e1bf211</code></a></td><td><code>remove set_random_seed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0e7a998ff4281ba3911cc84c4b060d177e2931ec"><code>0e7a998</code></a></td><td><code>Merge branch 'public/29904' of git://trac.sagemath.org/sage into public/29962</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b6a5dc7c96125b6140e56feafb82dd13599998e7"><code>b6a5dc7</code></a></td><td><code>fix random test in geometry/linear_expression</code></td></tr></table>




---

archive/issue_comments_474107.json:
```json
{
    "body": "Changed commit from **[`998b1b9`](https://github.com/sagemath/sagetrac-mirror/commit/998b1b94ce1289ea92451a86e5f6191c37eaeb5a)** to **[`b6a5dc7`](https://github.com/sagemath/sagetrac-mirror/commit/b6a5dc7c96125b6140e56feafb82dd13599998e7)**",
    "created_at": "2020-06-24T19:45:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29962#issuecomment-474107",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`998b1b9`](https://github.com/sagemath/sagetrac-mirror/commit/998b1b94ce1289ea92451a86e5f6191c37eaeb5a)** to **[`b6a5dc7`](https://github.com/sagemath/sagetrac-mirror/commit/b6a5dc7c96125b6140e56feafb82dd13599998e7)**



---

archive/issue_comments_474108.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-06-24T19:47:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29962#issuecomment-474108",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_474109.json:
```json
{
    "body": "Changed commit from **[`b6a5dc7`](https://github.com/sagemath/sagetrac-mirror/commit/b6a5dc7c96125b6140e56feafb82dd13599998e7)** to **[`998b1b9`](https://github.com/sagemath/sagetrac-mirror/commit/998b1b94ce1289ea92451a86e5f6191c37eaeb5a)**",
    "created_at": "2020-06-24T19:47:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29962#issuecomment-474109",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b6a5dc7`](https://github.com/sagemath/sagetrac-mirror/commit/b6a5dc7c96125b6140e56feafb82dd13599998e7)** to **[`998b1b9`](https://github.com/sagemath/sagetrac-mirror/commit/998b1b94ce1289ea92451a86e5f6191c37eaeb5a)**



---

archive/issue_comments_474110.json:
```json
{
    "body": "Changed commit from **[`998b1b9`](https://github.com/sagemath/sagetrac-mirror/commit/998b1b94ce1289ea92451a86e5f6191c37eaeb5a)** to **[`1d7b00e`](https://github.com/sagemath/sagetrac-mirror/commit/1d7b00e3fc2ebc1dc9982a2df91d15e3f12e9432)**",
    "created_at": "2020-06-24T19:58:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29962#issuecomment-474110",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`998b1b9`](https://github.com/sagemath/sagetrac-mirror/commit/998b1b94ce1289ea92451a86e5f6191c37eaeb5a)** to **[`1d7b00e`](https://github.com/sagemath/sagetrac-mirror/commit/1d7b00e3fc2ebc1dc9982a2df91d15e3f12e9432)**



---

archive/issue_comments_474111.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d7b00e3fc2ebc1dc9982a2df91d15e3f12e9432\"><code>1d7b00e</code></a></td><td><code>dash instead of underscore for command line options</code></td></tr></table>\n",
    "created_at": "2020-06-24T19:58:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29962#issuecomment-474111",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d7b00e3fc2ebc1dc9982a2df91d15e3f12e9432"><code>1d7b00e</code></a></td><td><code>dash instead of underscore for command line options</code></td></tr></table>




---

archive/issue_comments_474112.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,10 +1,10 @@\n-We introduce an option for doctests `--random_seed` that defaults to `0` for now:\n+We introduce an option for doctests `--random-seed` that defaults to `0` for now:\n \n ```\n sage -t --long src/sage/all.py \n ...\n Doctesting 1 file.\n-sage -t --long --random_seed=0 src/sage/all.py\n+sage -t --long --random-seed=0 src/sage/all.py\n     [16 tests, 0.73 s]\n ----------------------------------------------------------------------\n All tests passed!\n``````\n",
    "created_at": "2020-06-24T19:59:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29962#issuecomment-474112",
    "user": "https://github.com/kliem"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,10 +1,10 @@
-We introduce an option for doctests `--random_seed` that defaults to `0` for now:
+We introduce an option for doctests `--random-seed` that defaults to `0` for now:
 
 ```
 sage -t --long src/sage/all.py 
 ...
 Doctesting 1 file.
-sage -t --long --random_seed=0 src/sage/all.py
+sage -t --long --random-seed=0 src/sage/all.py
     [16 tests, 0.73 s]
 ----------------------------------------------------------------------
 All tests passed!
``````




---

archive/issue_comments_474113.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nOverall, this looks good to me. The following changes seem to be needed:\n\n```diff\n-    sage: subprocess.call([\"sage\", \"-t\", \"--warn-long\", \"0\", \"--random-seed=0\", -random_seed.rst\"], **kwds)  # long time\n+    sage: subprocess.call([\"sage\", \"-t\", \"--warn-long\", \"0\", \"--random-seed=0\", \"random_seed.rst\"], **kwds)  # long time\n```\n\n```diff\n-  - ``--random_seed[=seed]`` -- random seed for fuzzing doctests\n+  - ``--random-seed[=seed]`` -- random seed for fuzzing doctests\n```",
    "created_at": "2020-07-10T22:17:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29962#issuecomment-474113",
    "user": "https://github.com/mwageringel"
}
```

<div id="comment:6" align="right">comment:6</div>

Overall, this looks good to me. The following changes seem to be needed:

```diff
-    sage: subprocess.call(["sage", "-t", "--warn-long", "0", "--random-seed=0", -random_seed.rst"], **kwds)  # long time
+    sage: subprocess.call(["sage", "-t", "--warn-long", "0", "--random-seed=0", "random_seed.rst"], **kwds)  # long time
```

```diff
-  - ``--random_seed[=seed]`` -- random seed for fuzzing doctests
+  - ``--random-seed[=seed]`` -- random seed for fuzzing doctests
```



---

archive/issue_comments_474114.json:
```json
{
    "body": "Reviewer: **Markus Wageringel**",
    "created_at": "2020-07-10T22:17:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29962#issuecomment-474114",
    "user": "https://github.com/mwageringel"
}
```

Reviewer: **Markus Wageringel**



---

archive/issue_comments_474115.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThe branch adds this to the documentation, which is not true for this ticket:\n\n```\n--- a/src/doc/en/developer/doctesting.rst\n+++ b/src/doc/en/developer/doctesting.rst\n...\n+Doctests start from a random seed::\n+\n+    [kliem@sage sage-9.2]$ sage -t src/sage/doctest/tests/random_seed.rst\n...\n+    sage -t --warn-long 89.5 --random-seed=112986622569797306072457879734474628454 src/sage/doctest/tests/random_seed.rst\n+    **********************************************************************\n```",
    "created_at": "2020-07-10T23:48:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29962#issuecomment-474115",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

The branch adds this to the documentation, which is not true for this ticket:

```
--- a/src/doc/en/developer/doctesting.rst
+++ b/src/doc/en/developer/doctesting.rst
...
+Doctests start from a random seed::
+
+    [kliem@sage sage-9.2]$ sage -t src/sage/doctest/tests/random_seed.rst
...
+    sage -t --warn-long 89.5 --random-seed=112986622569797306072457879734474628454 src/sage/doctest/tests/random_seed.rst
+    **********************************************************************
```



---

archive/issue_comments_474116.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b31e2d5dba166fdb4d8f9f6730df8cdb065ccae7\"><code>b31e2d5</code></a></td><td><code>Merge branch 'public/29962' of git://trac.sagemath.org/sage into public/29962-reb</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2f30dd9b9e13cb8134b85a1165375ac8bdd1f683\"><code>2f30dd9</code></a></td><td><code>small fixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b62f781647851a3f27ecc95ea4b98b53838da112\"><code>b62f781</code></a></td><td><code>doctests do not start from a random seed by default yet</code></td></tr></table>\n",
    "created_at": "2020-07-11T05:52:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29962#issuecomment-474116",
    "user": "https://github.com/kliem"
}
```

<div id="comment:8"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b31e2d5dba166fdb4d8f9f6730df8cdb065ccae7"><code>b31e2d5</code></a></td><td><code>Merge branch 'public/29962' of git://trac.sagemath.org/sage into public/29962-reb</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2f30dd9b9e13cb8134b85a1165375ac8bdd1f683"><code>2f30dd9</code></a></td><td><code>small fixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b62f781647851a3f27ecc95ea4b98b53838da112"><code>b62f781</code></a></td><td><code>doctests do not start from a random seed by default yet</code></td></tr></table>




---

archive/issue_comments_474117.json:
```json
{
    "body": "Changed commit from **[`1d7b00e`](https://github.com/sagemath/sagetrac-mirror/commit/1d7b00e3fc2ebc1dc9982a2df91d15e3f12e9432)** to **[`b62f781`](https://github.com/sagemath/sagetrac-mirror/commit/b62f781647851a3f27ecc95ea4b98b53838da112)**",
    "created_at": "2020-07-11T05:52:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29962#issuecomment-474117",
    "user": "https://github.com/kliem"
}
```

Changed commit from **[`1d7b00e`](https://github.com/sagemath/sagetrac-mirror/commit/1d7b00e3fc2ebc1dc9982a2df91d15e3f12e9432)** to **[`b62f781`](https://github.com/sagemath/sagetrac-mirror/commit/b62f781647851a3f27ecc95ea4b98b53838da112)**



---

archive/issue_comments_474118.json:
```json
{
    "body": "Changed branch from **[public/29962](https://github.com/sagemath/sagetrac-mirror/tree/public/29962)** to **[public/29962-reb](https://github.com/sagemath/sagetrac-mirror/tree/public/29962-reb)**",
    "created_at": "2020-07-11T05:52:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29962#issuecomment-474118",
    "user": "https://github.com/kliem"
}
```

Changed branch from **[public/29962](https://github.com/sagemath/sagetrac-mirror/tree/public/29962)** to **[public/29962-reb](https://github.com/sagemath/sagetrac-mirror/tree/public/29962-reb)**



---

archive/issue_comments_474119.json:
```json
{
    "body": "Changed reviewer from **Markus Wageringel** to **Markus Wageringel, Matthias Koeppe**",
    "created_at": "2020-07-11T06:01:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29962#issuecomment-474119",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **Markus Wageringel** to **Markus Wageringel, Matthias Koeppe**



---

archive/issue_comments_474120.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nFrom my side this is a positive review - if patchbot is green",
    "created_at": "2020-07-11T06:01:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29962#issuecomment-474120",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">comment:9</div>

From my side this is a positive review - if patchbot is green



---

archive/issue_comments_474121.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nThanks. This successfully passes ptestlong.",
    "created_at": "2020-07-11T09:01:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29962#issuecomment-474121",
    "user": "https://github.com/mwageringel"
}
```

<div id="comment:10" align="right">comment:10</div>

Thanks. This successfully passes ptestlong.



---

archive/issue_events_412520.json:
```json
{
    "actor": "https://github.com/mwageringel",
    "created_at": "2020-07-11T09:01:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29962#event-412520"
}
```



---

archive/issue_events_412521.json:
```json
{
    "actor": "https://github.com/mwageringel",
    "created_at": "2020-07-11T09:01:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29962#event-412521"
}
```



---

archive/issue_comments_474122.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThank you.",
    "created_at": "2020-07-11T09:01:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29962#issuecomment-474122",
    "user": "https://github.com/kliem"
}
```

<div id="comment:11" align="right">comment:11</div>

Thank you.



---

archive/issue_comments_474123.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nMerge conflict",
    "created_at": "2020-07-11T23:22:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29962#issuecomment-474123",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:12" align="right">comment:12</div>

Merge conflict



---

archive/issue_events_412522.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-07-11T23:22:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29962#event-412522"
}
```



---

archive/issue_events_412523.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-07-11T23:22:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29962#event-412523"
}
```



---

archive/issue_events_412524.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-07-12T17:08:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29962#event-412524"
}
```



---

archive/issue_events_412525.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-07-12T17:08:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29962#event-412525"
}
```



---

archive/issue_comments_474124.json:
```json
{
    "body": "Changed commit from **[`b62f781`](https://github.com/sagemath/sagetrac-mirror/commit/b62f781647851a3f27ecc95ea4b98b53838da112)** to **[`1d99129`](https://github.com/sagemath/sagetrac-mirror/commit/1d99129f26f4a065f9f9e5e13c3d5120a029e89f)**",
    "created_at": "2020-07-12T17:08:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29962#issuecomment-474124",
    "user": "https://github.com/kliem"
}
```

Changed commit from **[`b62f781`](https://github.com/sagemath/sagetrac-mirror/commit/b62f781647851a3f27ecc95ea4b98b53838da112)** to **[`1d99129`](https://github.com/sagemath/sagetrac-mirror/commit/1d99129f26f4a065f9f9e5e13c3d5120a029e89f)**



---

archive/issue_comments_474125.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\n`sage -t --long --all` passes for me.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d99129f26f4a065f9f9e5e13c3d5120a029e89f\"><code>1d99129</code></a></td><td><code>fix merge conflict</code></td></tr></table>\n",
    "created_at": "2020-07-12T17:08:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29962#issuecomment-474125",
    "user": "https://github.com/kliem"
}
```

<div id="comment:13" align="right">comment:13</div>

`sage -t --long --all` passes for me.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d99129f26f4a065f9f9e5e13c3d5120a029e89f"><code>1d99129</code></a></td><td><code>fix merge conflict</code></td></tr></table>




---

archive/issue_comments_474126.json:
```json
{
    "body": "Changed branch from **[public/29962-reb](https://github.com/sagemath/sagetrac-mirror/tree/public/29962-reb)** to **[public/29962-reb2](https://github.com/sagemath/sagetrac-mirror/tree/public/29962-reb2)**",
    "created_at": "2020-07-12T17:08:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29962#issuecomment-474126",
    "user": "https://github.com/kliem"
}
```

Changed branch from **[public/29962-reb](https://github.com/sagemath/sagetrac-mirror/tree/public/29962-reb)** to **[public/29962-reb2](https://github.com/sagemath/sagetrac-mirror/tree/public/29962-reb2)**



---

archive/issue_events_412526.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-12T17:23:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29962#event-412526"
}
```



---

archive/issue_events_412527.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-12T17:23:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29962#event-412527"
}
```



---

archive/issue_comments_474127.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThank you.",
    "created_at": "2020-07-12T18:03:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29962#issuecomment-474127",
    "user": "https://github.com/kliem"
}
```

<div id="comment:15" align="right">comment:15</div>

Thank you.



---

archive/issue_comments_474128.json:
```json
{
    "body": "Changed branch from **[public/29962-reb2](https://github.com/sagemath/sagetrac-mirror/tree/public/29962-reb2)** to **[`1d99129`](https://github.com/sagemath/sagetrac-mirror/commit/1d99129f26f4a065f9f9e5e13c3d5120a029e89f)**",
    "created_at": "2020-07-19T07:24:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29962#issuecomment-474128",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/29962-reb2](https://github.com/sagemath/sagetrac-mirror/tree/public/29962-reb2)** to **[`1d99129`](https://github.com/sagemath/sagetrac-mirror/commit/1d99129f26f4a065f9f9e5e13c3d5120a029e89f)**



---

archive/issue_events_412528.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-07-19T07:24:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29962#event-412528"
}
```



---

archive/issue_events_412529.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "aa8340920cc850b71148223a35649930f1cbd361",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-07-19T07:24:18Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29962#event-412529"
}
```



---

archive/issue_comments_474129.json:
```json
{
    "body": "Changed commit from **[`1d99129`](https://github.com/sagemath/sagetrac-mirror/commit/1d99129f26f4a065f9f9e5e13c3d5120a029e89f)** to none",
    "created_at": "2020-08-23T15:34:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29962#issuecomment-474129",
    "user": "https://github.com/slel"
}
```

Changed commit from **[`1d99129`](https://github.com/sagemath/sagetrac-mirror/commit/1d99129f26f4a065f9f9e5e13c3d5120a029e89f)** to none



---

archive/issue_comments_474130.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nWhat random seeds are allowed? Any integer?\nOf any sign? Arbitrarily large?",
    "created_at": "2020-08-23T15:34:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29962#issuecomment-474130",
    "user": "https://github.com/slel"
}
```

<div id="comment:17" align="right">comment:17</div>

What random seeds are allowed? Any integer?
Of any sign? Arbitrarily large?



---

archive/issue_comments_474131.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nThis is how we will eventually get the random seeds.\n\n```\nsage: import sage.misc.randstate as randstate                                   \nsage: randstate.set_random_seed()                                               \nsage: randstate.initial_seed()                                                  \n11032378495085541661748859066830408537\n```\n\nAt least that's the plan for now. Any random seed that you can feed into `set_random_seed` should work.\n\n(Edit: But I wouldn't be surprised if there are bugs somewhere with some strange random seed. There is no way, you can avoid all of them. But at least you can prepare for rather probable cases.)",
    "created_at": "2020-08-23T16:01:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29962#issuecomment-474131",
    "user": "https://github.com/kliem"
}
```

<div id="comment:18" align="right">comment:18</div>

This is how we will eventually get the random seeds.

```
sage: import sage.misc.randstate as randstate                                   
sage: randstate.set_random_seed()                                               
sage: randstate.initial_seed()                                                  
11032378495085541661748859066830408537
```

At least that's the plan for now. Any random seed that you can feed into `set_random_seed` should work.

(Edit: But I wouldn't be surprised if there are bugs somewhere with some strange random seed. There is no way, you can avoid all of them. But at least you can prepare for rather probable cases.)



---

archive/issue_comments_474132.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nThe `random_seed` docstring says seed \"must be coercible to a Python long\".\n\nIs that from `-2**127` to `2**127 - 1`?\nOr are 32-bit and 64-bit systems different there?\n\nAlso isn't \"long\" a Python 2 concept,\nwith only \"int\" existing in Python 3?\n\nCould we document the admissible range in a follow-up ticket, for non-experts like me?",
    "created_at": "2020-08-23T22:51:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29962#issuecomment-474132",
    "user": "https://github.com/slel"
}
```

<div id="comment:19" align="right">comment:19</div>

The `random_seed` docstring says seed "must be coercible to a Python long".

Is that from `-2**127` to `2**127 - 1`?
Or are 32-bit and 64-bit systems different there?

Also isn't "long" a Python 2 concept,
with only "int" existing in Python 3?

Could we document the admissible range in a follow-up ticket, for non-experts like me?



---

archive/issue_comments_474133.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nAnd thanks for the work on varying random seeds when testing!",
    "created_at": "2020-08-23T22:58:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29962#issuecomment-474133",
    "user": "https://github.com/slel"
}
```

<div id="comment:20" align="right">comment:20</div>

And thanks for the work on varying random seeds when testing!



---

archive/issue_comments_474134.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nI added this issue to #29935.\n\nThe idea was that once all parts of Sage are ready for it, the default would be to select a \"random\" random seed.",
    "created_at": "2020-08-24T06:32:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29962#issuecomment-474134",
    "user": "https://github.com/kliem"
}
```

<div id="comment:21" align="right">comment:21</div>

I added this issue to #29935.

The idea was that once all parts of Sage are ready for it, the default would be to select a "random" random seed.



---

archive/issue_comments_474135.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,7 @@\n-We introduce an option for doctests `--random-seed` that defaults to `0` for now:\n+Part of #29935.\n+\n+We introduce an option for doctests: `--random-seed`,\n+that defaults to `0` for now:\n \n ```\n sage -t --long src/sage/all.py \n@@ -14,4 +17,4 @@\n     cumulative wall time: 0.7 seconds\n ```\n \n-This allows specifying, which random seed shall be used for the doctests.\n+This allows specifying which random seed to use for the doctests.\n``````\n",
    "created_at": "2021-04-29T22:04:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29962#issuecomment-474135",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,7 @@
-We introduce an option for doctests `--random-seed` that defaults to `0` for now:
+Part of #29935.
+
+We introduce an option for doctests: `--random-seed`,
+that defaults to `0` for now:
 
 ```
 sage -t --long src/sage/all.py 
@@ -14,4 +17,4 @@
     cumulative wall time: 0.7 seconds
 ```
 
-This allows specifying, which random seed shall be used for the doctests.
+This allows specifying which random seed to use for the doctests.
``````




---

archive/issue_comments_474136.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,29 @@\n-Part of #29935.\n+This is the first step towards #29935.\n \n-We introduce an option for doctests: `--random-seed`,\n-that defaults to `0` for now:\n+We introduce an option for doctests: `--random-seed`.\n+\n+This allows specifying which seed to use for tests\n+involving randomness.\n+\n+The seed is displayed in the test log:\n+\n+```\n+sage -t --long --random-seed=9876543210 src/sage/all.py \n+...\n+Doctesting 1 file.\n+sage -t --long --random-seed=9876543210 src/sage/all.py\n+    [16 tests, 0.73 s]\n+----------------------------------------------------------------------\n+All tests passed!\n+----------------------------------------------------------------------\n+Total time for all tests: 0.8 seconds\n+    cpu time: 0.7 seconds\n+    cumulative wall time: 0.7 seconds\n+```\n+\n+which makes it easy to re-run tests with the same seed.\n+\n+The seed defaults to `0` for now:\n \n ```\n sage -t --long src/sage/all.py \n@@ -17,4 +39,5 @@\n     cumulative wall time: 0.7 seconds\n ```\n \n-This allows specifying which random seed to use for the doctests.\n+but the plan in #29935 is to eventually have\n+the random seed itself picked at random by default.\n``````\n",
    "created_at": "2021-06-08T14:38:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29962#issuecomment-474136",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,29 @@
-Part of #29935.
+This is the first step towards #29935.
 
-We introduce an option for doctests: `--random-seed`,
-that defaults to `0` for now:
+We introduce an option for doctests: `--random-seed`.
+
+This allows specifying which seed to use for tests
+involving randomness.
+
+The seed is displayed in the test log:
+
+```
+sage -t --long --random-seed=9876543210 src/sage/all.py 
+...
+Doctesting 1 file.
+sage -t --long --random-seed=9876543210 src/sage/all.py
+    [16 tests, 0.73 s]
+----------------------------------------------------------------------
+All tests passed!
+----------------------------------------------------------------------
+Total time for all tests: 0.8 seconds
+    cpu time: 0.7 seconds
+    cumulative wall time: 0.7 seconds
+```
+
+which makes it easy to re-run tests with the same seed.
+
+The seed defaults to `0` for now:
 
 ```
 sage -t --long src/sage/all.py 
@@ -17,4 +39,5 @@
     cumulative wall time: 0.7 seconds
 ```
 
-This allows specifying which random seed to use for the doctests.
+but the plan in #29935 is to eventually have
+the random seed itself picked at random by default.
``````




---

archive/issue_events_412530.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2021-06-08T14:38:58Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29962",
    "title_is": "Introduce random-seed option to allow fuzzing of doctests",
    "title_was": "Allow fuzzing of doctests",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29962#event-412530"
}
```
