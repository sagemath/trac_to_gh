# Issue 29775: Add a bit of typing to manifold code

archive/issues_029538.json:
```json
{
    "assignees": [],
    "body": "This PR adds a bit of typing information to some of the methods in the manifolds module.\n\nCC:  @tscrim @nthiery @mjungmath @fchapoton\n\nKeywords: **typing**\n\nBranch/Commit: **[`7c18c7f`](https://github.com/sagemath/sagetrac-mirror/commit/7c18c7f8cd8c123d850e1aeaae25d5e6e37e5cec)**\n\nReviewer: **Matthias Koeppe, Tobias Diez, Eric Gourgoulhon**\n\nAuthor: **Tobias Diez**\n\nComponent: **manifolds**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29775_\n\n",
    "closed_at": "2022-04-02T10:52:31Z",
    "created_at": "2020-06-01T12:04:41Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20manifolds",
        "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Add a bit of typing to manifold code",
    "type": "issue",
    "updated_at": "2022-04-02T10:52:31Z",
    "url": "https://github.com/sagemath/sage/issues/29775",
    "user": "https://github.com/tobiasdiez"
}
```
This PR adds a bit of typing information to some of the methods in the manifolds module.

CC:  @tscrim @nthiery @mjungmath @fchapoton

Keywords: **typing**

Branch/Commit: **[`7c18c7f`](https://github.com/sagemath/sagetrac-mirror/commit/7c18c7f8cd8c123d850e1aeaae25d5e6e37e5cec)**

Reviewer: **Matthias Koeppe, Tobias Diez, Eric Gourgoulhon**

Author: **Tobias Diez**

Component: **manifolds**

_Issue created by migration from https://trac.sagemath.org/ticket/29775_





---

archive/issue_events_406671.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-06-01T12:04:41Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406671"
}
```



---

archive/issue_events_406672.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-06-01T12:04:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20geometry",
    "label_color": "0000ff",
    "label_name": "c: geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406672"
}
```



---

archive/issue_events_406673.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-06-01T12:04:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406673"
}
```



---

archive/issue_events_406674.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-06-01T12:04:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406674"
}
```



---

archive/issue_comments_469839.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nIn case people are interested in a general discussion of typing in the Sage library: #29756 Meta-ticket: Review of Python 3 features that sagelib should use systematically",
    "created_at": "2020-06-01T19:26:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469839",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:1" align="right">comment:1</div>

In case people are interested in a general discussion of typing in the Sage library: #29756 Meta-ticket: Review of Python 3 features that sagelib should use systematically



---

archive/issue_events_406675.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-06-01T22:49:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406675"
}
```



---

archive/issue_comments_469840.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThe addition of `identity_map` to `DifferentiableManifold` is code duplication (the code is identical to `identity_map` provided by the mother class `TopologicalManifold`). I'm not sure adding typing  is worth duplicating the code, opening the root to all evil...",
    "created_at": "2020-06-02T10:32:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469840",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:3" align="right">comment:3</div>

The addition of `identity_map` to `DifferentiableManifold` is code duplication (the code is identical to `identity_map` provided by the mother class `TopologicalManifold`). I'm not sure adding typing  is worth duplicating the code, opening the root to all evil...



---

archive/issue_comments_469841.json:
```json
{
    "body": "Changed commit from **[`e620d05`](https://github.com/sagemath/sagetrac-mirror/commit/e620d059f0f89f840fa2b0091477e7a7ddaa6630)** to **[`23b6012`](https://github.com/sagemath/sagetrac-mirror/commit/23b6012d4b5a2f9dbd1b8a07f454ec29191bf0a3)**",
    "created_at": "2020-06-02T14:44:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469841",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e620d05`](https://github.com/sagemath/sagetrac-mirror/commit/e620d059f0f89f840fa2b0091477e7a7ddaa6630)** to **[`23b6012`](https://github.com/sagemath/sagetrac-mirror/commit/23b6012d4b5a2f9dbd1b8a07f454ec29191bf0a3)**



---

archive/issue_comments_469842.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/23b6012d4b5a2f9dbd1b8a07f454ec29191bf0a3\"><code>23b6012</code></a></td><td><code>Add more typing</code></td></tr></table>\n",
    "created_at": "2020-06-02T14:44:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469842",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/23b6012d4b5a2f9dbd1b8a07f454ec29191bf0a3"><code>23b6012</code></a></td><td><code>Add more typing</code></td></tr></table>




---

archive/issue_comments_469843.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@egourgoulhon](#comment%3A3):\n> The addition of `identity_map` to `DifferentiableManifold` is code duplication (the code is identical to `identity_map` provided by the mother class `TopologicalManifold`). I'm not sure adding typing  is worth duplicating the code, opening the root to all evil...\n\nI think this is a very important point, and one that needs discussion in a broader context. \n\n1) Can the category system be used to add these tightened type annotations automatically?\n\n2) In such situations, should the doctests be replaced or augmented by `_test_...` methods so that subclasses are tested properly.",
    "created_at": "2020-06-02T16:26:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469843",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@egourgoulhon](#comment%3A3):
> The addition of `identity_map` to `DifferentiableManifold` is code duplication (the code is identical to `identity_map` provided by the mother class `TopologicalManifold`). I'm not sure adding typing  is worth duplicating the code, opening the root to all evil...

I think this is a very important point, and one that needs discussion in a broader context. 

1) Can the category system be used to add these tightened type annotations automatically?

2) In such situations, should the doctests be replaced or augmented by `_test_...` methods so that subclasses are tested properly.



---

archive/issue_comments_469844.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@egourgoulhon](#comment%3A3):\n> The addition of `identity_map` to `DifferentiableManifold` is code duplication (the code is identical to `identity_map` provided by the mother class `TopologicalManifold`). I'm not sure adding typing  is worth duplicating the code, opening the root to all evil...\n\nIf we don't duplicate the code, then the output type of `identity_map` is indicated as `ContinuousMap`, which is correct for a smooth manifold as well. Of course, for such a manifold, it is a particular kind of continuous map, namely a smooth one and the returned object pertains to the subclass `DiffMap` of `ContinuousMap`. But I would say we can live with this; IMHO, it is preferable not to duplicate the code and have type hints not as precise as they could be.",
    "created_at": "2020-06-02T18:58:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469844",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@egourgoulhon](#comment%3A3):
> The addition of `identity_map` to `DifferentiableManifold` is code duplication (the code is identical to `identity_map` provided by the mother class `TopologicalManifold`). I'm not sure adding typing  is worth duplicating the code, opening the root to all evil...

If we don't duplicate the code, then the output type of `identity_map` is indicated as `ContinuousMap`, which is correct for a smooth manifold as well. Of course, for such a manifold, it is a particular kind of continuous map, namely a smooth one and the returned object pertains to the subclass `DiffMap` of `ContinuousMap`. But I would say we can live with this; IMHO, it is preferable not to duplicate the code and have type hints not as precise as they could be.



---

archive/issue_comments_469845.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n-This PR adds a bit of typing information to some of the methods in the manifolds package that I added while browsing the code. I've changed the inline documentation accordingly. If these types of changes are ok, I'll add further typing information as I proceed understanding the code.\n-Probably the biggest change is the addition of the identity map for a smooth manifold (which is a `DiffMap` and not just a `ContininousMap`).\n+This PR adds a bit of typing information to some of the methods in the manifolds module that I added while browsing the code. I've changed the inline documentation accordingly. If these types of changes are ok, I'll add further typing information as I proceed understanding the code.\n+Probably the biggest change is the addition of the identity map for a smooth manifold (which is a `DiffMap` and not just a `ContinousMap`).\n \n Moreover, a few very minor clarifications to the documentation were added as well.\n \n``````\n",
    "created_at": "2020-06-02T19:05:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469845",
    "user": "https://github.com/egourgoulhon"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
-This PR adds a bit of typing information to some of the methods in the manifolds package that I added while browsing the code. I've changed the inline documentation accordingly. If these types of changes are ok, I'll add further typing information as I proceed understanding the code.
-Probably the biggest change is the addition of the identity map for a smooth manifold (which is a `DiffMap` and not just a `ContininousMap`).
+This PR adds a bit of typing information to some of the methods in the manifolds module that I added while browsing the code. I've changed the inline documentation accordingly. If these types of changes are ok, I'll add further typing information as I proceed understanding the code.
+Probably the biggest change is the addition of the identity map for a smooth manifold (which is a `DiffMap` and not just a `ContinousMap`).
 
 Moreover, a few very minor clarifications to the documentation were added as well.
 
``````




---

archive/issue_events_406676.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2020-06-02T19:05:17Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "title_is": "Add a bit of typing to manifold code",
    "title_was": "Add a bit of typing to manifolds package",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406676"
}
```



---

archive/issue_comments_469846.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nIt's true that I noticed while working on typing support, but the addition is actually rather independent of this. As Eric says, `identity_map` on a differentiable manifold only returns a `ContinuousMap` and one can thus not take it's differential etc. So far this doesn't lead to any problems since the identity case is always handled separately in the code. I'm not familiar with the category code, but maybe it can be improved so that the function `def hom_set: return Hom(self, self)` defined in class A, returns the correct homomrophisms for derived classes `B(A)` as well (so `b.hom_set` returns the hom set of `b` as an element of B).\n\nIf it were just for typing, one could also annotate the original `identity_map` on `TopologicalManifold` (see https://mypy.readthedocs.io/en/stable/more_types.html#advanced-uses-of-self-types).",
    "created_at": "2020-06-03T11:50:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469846",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:8" align="right">comment:8</div>

It's true that I noticed while working on typing support, but the addition is actually rather independent of this. As Eric says, `identity_map` on a differentiable manifold only returns a `ContinuousMap` and one can thus not take it's differential etc. So far this doesn't lead to any problems since the identity case is always handled separately in the code. I'm not familiar with the category code, but maybe it can be improved so that the function `def hom_set: return Hom(self, self)` defined in class A, returns the correct homomrophisms for derived classes `B(A)` as well (so `b.hom_set` returns the hom set of `b` as an element of B).

If it were just for typing, one could also annotate the original `identity_map` on `TopologicalManifold` (see https://mypy.readthedocs.io/en/stable/more_types.html#advanced-uses-of-self-types).



---

archive/issue_comments_469847.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@tobiasdiez](#comment%3A8):\n> It's true that I noticed while working on typing support, but the addition is actually rather independent of this. As Eric says, `identity_map` on a differentiable manifold only returns a `ContinuousMap` and one can thus not take it's differential etc. \n\nNo, one can take the differential because the returned object in this case is actually a `DiffMap`, which is also a `ContinuousMap` since `DiffMap` is a subclass of `ContinuousMap` (see the example below). \n\n>I'm not familiar with the category code, but maybe it can be improved so that the function `def hom_set: return Hom(self, self)` defined in class A, returns the correct homomrophisms for derived classes `B(A)` as well (so `b.hom_set` returns the hom set of `b` as an element of B).\n\nNo need for improvement, this is already the case:\n\n```\nsage: M = Manifold(2, 'M'); M\n2-dimensional differentiable manifold M\nsage: Id = M.identity_map()\nsage: type(Id)\n<class 'sage.manifolds.differentiable.manifold_homset.DifferentiableManifoldHomset_with_category.element_class'>\nsage: isinstance(Id, sage.manifolds.differentiable.diff_map.DiffMap)\nTrue\nsage: isinstance(Id, sage.manifolds.continuous_map.ContinuousMap)\nTrue\nsage: Id.parent()\nSet of Morphisms from 2-dimensional differentiable manifold M \n to 2-dimensional differentiable manifold M in Category of \n smooth manifolds over Real Field with 53 bits of precision\n```",
    "created_at": "2020-06-03T12:18:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469847",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@tobiasdiez](#comment%3A8):
> It's true that I noticed while working on typing support, but the addition is actually rather independent of this. As Eric says, `identity_map` on a differentiable manifold only returns a `ContinuousMap` and one can thus not take it's differential etc. 

No, one can take the differential because the returned object in this case is actually a `DiffMap`, which is also a `ContinuousMap` since `DiffMap` is a subclass of `ContinuousMap` (see the example below). 

>I'm not familiar with the category code, but maybe it can be improved so that the function `def hom_set: return Hom(self, self)` defined in class A, returns the correct homomrophisms for derived classes `B(A)` as well (so `b.hom_set` returns the hom set of `b` as an element of B).

No need for improvement, this is already the case:

```
sage: M = Manifold(2, 'M'); M
2-dimensional differentiable manifold M
sage: Id = M.identity_map()
sage: type(Id)
<class 'sage.manifolds.differentiable.manifold_homset.DifferentiableManifoldHomset_with_category.element_class'>
sage: isinstance(Id, sage.manifolds.differentiable.diff_map.DiffMap)
True
sage: isinstance(Id, sage.manifolds.continuous_map.ContinuousMap)
True
sage: Id.parent()
Set of Morphisms from 2-dimensional differentiable manifold M 
 to 2-dimensional differentiable manifold M in Category of 
 smooth manifolds over Real Field with 53 bits of precision
```



---

archive/issue_comments_469848.json:
```json
{
    "body": "Changed commit from **[`23b6012`](https://github.com/sagemath/sagetrac-mirror/commit/23b6012d4b5a2f9dbd1b8a07f454ec29191bf0a3)** to **[`3f93d31`](https://github.com/sagemath/sagetrac-mirror/commit/3f93d314779566116609cf208ba3651fbdadca03)**",
    "created_at": "2020-06-04T10:19:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469848",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`23b6012`](https://github.com/sagemath/sagetrac-mirror/commit/23b6012d4b5a2f9dbd1b8a07f454ec29191bf0a3)** to **[`3f93d31`](https://github.com/sagemath/sagetrac-mirror/commit/3f93d314779566116609cf208ba3651fbdadca03)**



---

archive/issue_comments_469849.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ca06162b4f767fa35b2919f8ee1f4b5c11510da2\"><code>ca06162</code></a></td><td><code>Remove identity_map duplication</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3f93d314779566116609cf208ba3651fbdadca03\"><code>3f93d31</code></a></td><td><code>Add mininmal configuration for type checking</code></td></tr></table>\n",
    "created_at": "2020-06-04T10:19:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469849",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ca06162b4f767fa35b2919f8ee1f4b5c11510da2"><code>ca06162</code></a></td><td><code>Remove identity_map duplication</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3f93d314779566116609cf208ba3651fbdadca03"><code>3f93d31</code></a></td><td><code>Add mininmal configuration for type checking</code></td></tr></table>




---

archive/issue_comments_469850.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThanks for the clarification. I actually tested it before, but apparently made some mistakes as `identity_map` indeed returns a `DiffMap` on a differentiable manifold.\n\nI've thus removed the `identity_map` method again from `DifferentiableManifold` and instead added the typing information to the existing map.\n\nAnything else that needs improvement? From my side this is good to go. I would add more typing in follow-up issues to keep the size of the changes small and reviewable.",
    "created_at": "2020-06-04T14:09:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469850",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:11" align="right">comment:11</div>

Thanks for the clarification. I actually tested it before, but apparently made some mistakes as `identity_map` indeed returns a `DiffMap` on a differentiable manifold.

I've thus removed the `identity_map` method again from `DifferentiableManifold` and instead added the typing information to the existing map.

Anything else that needs improvement? From my side this is good to go. I would add more typing in follow-up issues to keep the size of the changes small and reviewable.



---

archive/issue_comments_469851.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nThere are some doctest errors, as well as coverage, pyflakes and pycodeystyle errors; check the patchbot reports (click on the \"9.2.beta0 button\" in the top right of the ticket description).",
    "created_at": "2020-06-08T13:27:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469851",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:12" align="right">comment:12</div>

There are some doctest errors, as well as coverage, pyflakes and pycodeystyle errors; check the patchbot reports (click on the "9.2.beta0 button" in the top right of the ticket description).



---

archive/issue_comments_469852.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nAnother thing: the typing information does not show up in the html documentation produced by Sphinx.",
    "created_at": "2020-06-08T13:30:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469852",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:13" align="right">comment:13</div>

Another thing: the typing information does not show up in the html documentation produced by Sphinx.



---

archive/issue_comments_469853.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nThe file `pyrightconfig.json` at the root of the Sage directory has probably been added to the commit by mistake.",
    "created_at": "2020-06-08T13:40:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469853",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:14" align="right">comment:14</div>

The file `pyrightconfig.json` at the root of the Sage directory has probably been added to the commit by mistake.



---

archive/issue_comments_469854.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nI had a quick look at the errors and most of them are a result of that the tools (pyflakes and pycodestyle) have problems with the typing syntax. After a bit of googling, it appears that these issues are fixed in the most recent versions (e.g. https://github.com/PyCQA/pyflakes/issues/247 and https://github.com/vim-syntastic/syntastic/issues/1667). Where do I find the version used? Moreover, one common problems seems to be that these tools need to be installed under python 3, since otherwise they check the files using python 2 syntax (e.g. https://github.com/vim-syntastic/syntastic/issues/1667#issuecomment-172538109). How can I make sure that it's the case indeed?\nI'll have a look at the remaining issues after these false positives are fixed.\n\nFinally, the `pyrightconfig.json` is the configuration file for `pyright`, which is static type checker. At the moment there are still to many type problems but in the long term this should be integrated in the build progress.",
    "created_at": "2020-06-08T17:02:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469854",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:15" align="right">comment:15</div>

I had a quick look at the errors and most of them are a result of that the tools (pyflakes and pycodestyle) have problems with the typing syntax. After a bit of googling, it appears that these issues are fixed in the most recent versions (e.g. https://github.com/PyCQA/pyflakes/issues/247 and https://github.com/vim-syntastic/syntastic/issues/1667). Where do I find the version used? Moreover, one common problems seems to be that these tools need to be installed under python 3, since otherwise they check the files using python 2 syntax (e.g. https://github.com/vim-syntastic/syntastic/issues/1667#issuecomment-172538109). How can I make sure that it's the case indeed?
I'll have a look at the remaining issues after these false positives are fixed.

Finally, the `pyrightconfig.json` is the configuration file for `pyright`, which is static type checker. At the moment there are still to many type problems but in the long term this should be integrated in the build progress.



---

archive/issue_comments_469855.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@tobiasdiez](#comment%3A15):\n> Finally, the `pyrightconfig.json` is the configuration file for `pyright`, which is static type checker. At the moment there are still to many type problems but in the long term this should be integrated in the build progress.\n\nCould you create a separate ticket for this please and link to it from #28936",
    "created_at": "2020-07-22T17:28:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469855",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@tobiasdiez](#comment%3A15):
> Finally, the `pyrightconfig.json` is the configuration file for `pyright`, which is static type checker. At the moment there are still to many type problems but in the long term this should be integrated in the build progress.

Could you create a separate ticket for this please and link to it from #28936



---

archive/issue_comments_469856.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@tobiasdiez](#comment%3A15):\n> I had a quick look at the errors and most of them are a result of that the tools (pyflakes and pycodestyle) have problems with the typing syntax. ... Where do I find the version used? \n\nBest to open an issue on https://github.com/sagemath/sage-patchbot",
    "created_at": "2020-07-22T17:31:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469856",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@tobiasdiez](#comment%3A15):
> I had a quick look at the errors and most of them are a result of that the tools (pyflakes and pycodestyle) have problems with the typing syntax. ... Where do I find the version used? 

Best to open an issue on https://github.com/sagemath/sage-patchbot



---

archive/issue_events_406677.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-08-14T12:46:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406677"
}
```



---

archive/issue_events_406678.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-08-14T12:46:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406678"
}
```



---

archive/issue_comments_469857.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nbranch is red and needs to be rebased on the latest beta",
    "created_at": "2020-08-14T12:46:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469857",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:19" align="right">comment:19</div>

branch is red and needs to be rebased on the latest beta



---

archive/issue_comments_469858.json:
```json
{
    "body": "Changed commit from **[`3f93d31`](https://github.com/sagemath/sagetrac-mirror/commit/3f93d314779566116609cf208ba3651fbdadca03)** to **[`f348b54`](https://github.com/sagemath/sagetrac-mirror/commit/f348b54a4ddb2d0bf45836af3b12ab2b460558d0)**",
    "created_at": "2020-08-14T20:21:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469858",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3f93d31`](https://github.com/sagemath/sagetrac-mirror/commit/3f93d314779566116609cf208ba3651fbdadca03)** to **[`f348b54`](https://github.com/sagemath/sagetrac-mirror/commit/f348b54a4ddb2d0bf45836af3b12ab2b460558d0)**



---

archive/issue_comments_469859.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f348b54a4ddb2d0bf45836af3b12ab2b460558d0\"><code>f348b54</code></a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/manifolds/typing</code></td></tr></table>\n",
    "created_at": "2020-08-14T20:21:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469859",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f348b54a4ddb2d0bf45836af3b12ab2b460558d0"><code>f348b54</code></a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/manifolds/typing</code></td></tr></table>




---

archive/issue_comments_469860.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a4e0ebeb1ae217cae58fbd8c8e645eed6e1e7b0\"><code>3a4e0eb</code></a></td><td><code>Remove pyright config</code></td></tr></table>\n",
    "created_at": "2020-08-14T20:32:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469860",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a4e0ebeb1ae217cae58fbd8c8e645eed6e1e7b0"><code>3a4e0eb</code></a></td><td><code>Remove pyright config</code></td></tr></table>




---

archive/issue_comments_469861.json:
```json
{
    "body": "Changed commit from **[`f348b54`](https://github.com/sagemath/sagetrac-mirror/commit/f348b54a4ddb2d0bf45836af3b12ab2b460558d0)** to **[`3a4e0eb`](https://github.com/sagemath/sagetrac-mirror/commit/3a4e0ebeb1ae217cae58fbd8c8e645eed6e1e7b0)**",
    "created_at": "2020-08-14T20:32:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469861",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f348b54`](https://github.com/sagemath/sagetrac-mirror/commit/f348b54a4ddb2d0bf45836af3b12ab2b460558d0)** to **[`3a4e0eb`](https://github.com/sagemath/sagetrac-mirror/commit/3a4e0ebeb1ae217cae58fbd8c8e645eed6e1e7b0)**



---

archive/issue_comments_469862.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\n@mkoeppe done!\n@fchapoton rebased!\n\nThe pyflakes tests still fail because pyflakes does not (fully) understand the typings code. Not sure if the reason is an old pyflakes or if this is even unresolved in the most recent version. Refs https://github.com/sagemath/sage-patchbot/issues/143. Can I disable pyflakes for the lines that are wrongly reported?",
    "created_at": "2020-08-14T21:04:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469862",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:22" align="right">comment:22</div>

@mkoeppe done!
@fchapoton rebased!

The pyflakes tests still fail because pyflakes does not (fully) understand the typings code. Not sure if the reason is an old pyflakes or if this is even unresolved in the most recent version. Refs https://github.com/sagemath/sage-patchbot/issues/143. Can I disable pyflakes for the lines that are wrongly reported?



---

archive/issue_events_406679.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-08-14T21:04:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406679"
}
```



---

archive/issue_events_406680.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-08-14T21:04:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406680"
}
```



---

archive/issue_events_406681.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-08-16T05:48:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406681"
}
```



---

archive/issue_events_406682.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-08-16T05:48:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406682"
}
```



---

archive/issue_comments_469863.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\n\n```\nsage -t --long --warn-long 63.8 --random-seed=0 src/sage/manifolds/manifold.py\n**********************************************************************\nFile \"src/sage/manifolds/manifold.py\", line 2203, in sage.manifolds.manifold.TopologicalManifold.identity_map\nFailed example:\n    isinstance(id, DiffMap)\nException raised:\n    Traceback (most recent call last):\n      File \"/srv/public/patchbot-sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 715, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/srv/public/patchbot-sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1139, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.manifolds.manifold.TopologicalManifold.identity_map[10]>\", line 1, in <module>\n        isinstance(id, DiffMap)\n    NameError: name 'DiffMap' is not defined\n**********************************************************************\nFile \"src/sage/manifolds/manifold.py\", line 2209, in sage.manifolds.manifold.TopologicalManifold.identity_map\nFailed example:\n    isinstance(M.identity_map(), DiffMap)\nException raised:\n    Traceback (most recent call last):\n      File \"/srv/public/patchbot-sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 715, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/srv/public/patchbot-sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1139, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.manifolds.manifold.TopologicalManifold.identity_map[12]>\", line 1, in <module>\n        isinstance(M.identity_map(), DiffMap)\n    NameError: name 'DiffMap' is not defined\n```",
    "created_at": "2020-08-16T05:48:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469863",
    "user": "https://github.com/kliem"
}
```

<div id="comment:24" align="right">comment:24</div>


```
sage -t --long --warn-long 63.8 --random-seed=0 src/sage/manifolds/manifold.py
**********************************************************************
File "src/sage/manifolds/manifold.py", line 2203, in sage.manifolds.manifold.TopologicalManifold.identity_map
Failed example:
    isinstance(id, DiffMap)
Exception raised:
    Traceback (most recent call last):
      File "/srv/public/patchbot-sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 715, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/patchbot-sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1139, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.manifolds.manifold.TopologicalManifold.identity_map[10]>", line 1, in <module>
        isinstance(id, DiffMap)
    NameError: name 'DiffMap' is not defined
**********************************************************************
File "src/sage/manifolds/manifold.py", line 2209, in sage.manifolds.manifold.TopologicalManifold.identity_map
Failed example:
    isinstance(M.identity_map(), DiffMap)
Exception raised:
    Traceback (most recent call last):
      File "/srv/public/patchbot-sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 715, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/patchbot-sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1139, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.manifolds.manifold.TopologicalManifold.identity_map[12]>", line 1, in <module>
        isinstance(M.identity_map(), DiffMap)
    NameError: name 'DiffMap' is not defined
```



---

archive/issue_comments_469864.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nThanks for your comment. How are imports for the documentation handled? Should I simply add the import for the whole file, or is there a special way to do this just for the doc tests?",
    "created_at": "2020-08-16T12:53:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469864",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:25" align="right">comment:25</div>

Thanks for your comment. How are imports for the documentation handled? Should I simply add the import for the whole file, or is there a special way to do this just for the doc tests?



---

archive/issue_comments_469865.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nI think you can just do\n\n```\nfrom sage.manifolds.differentiable.diff_map import DiffMap\n```\n\nat the beginning of the doctest or\n\n```\nisinstance(id, sage.manifolds.differentiable.diff_map.DiffMap)\n```\n\nAfter building your modified sage, the doctest should pass with\n\n```\nsage -t --long src/sage/manifolds/manifold.py\n```\n\nThe doctest works almost like a mini sage session.",
    "created_at": "2020-08-16T18:22:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469865",
    "user": "https://github.com/kliem"
}
```

<div id="comment:26" align="right">comment:26</div>

I think you can just do

```
from sage.manifolds.differentiable.diff_map import DiffMap
```

at the beginning of the doctest or

```
isinstance(id, sage.manifolds.differentiable.diff_map.DiffMap)
```

After building your modified sage, the doctest should pass with

```
sage -t --long src/sage/manifolds/manifold.py
```

The doctest works almost like a mini sage session.



---

archive/issue_comments_469866.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/40aab0b315fbd08bad8410797b121efb2f17d080\"><code>40aab0b</code></a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/manifolds/typing</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/45c55d6a05ec9305751db34bbb4ce24a3d04c2fc\"><code>45c55d6</code></a></td><td><code>Fix patchbot warnings</code></td></tr></table>\n",
    "created_at": "2020-08-28T17:08:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469866",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/40aab0b315fbd08bad8410797b121efb2f17d080"><code>40aab0b</code></a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/manifolds/typing</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/45c55d6a05ec9305751db34bbb4ce24a3d04c2fc"><code>45c55d6</code></a></td><td><code>Fix patchbot warnings</code></td></tr></table>




---

archive/issue_comments_469867.json:
```json
{
    "body": "Changed commit from **[`3a4e0eb`](https://github.com/sagemath/sagetrac-mirror/commit/3a4e0ebeb1ae217cae58fbd8c8e645eed6e1e7b0)** to **[`45c55d6`](https://github.com/sagemath/sagetrac-mirror/commit/45c55d6a05ec9305751db34bbb4ce24a3d04c2fc)**",
    "created_at": "2020-08-28T17:08:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469867",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3a4e0eb`](https://github.com/sagemath/sagetrac-mirror/commit/3a4e0ebeb1ae217cae58fbd8c8e645eed6e1e7b0)** to **[`45c55d6`](https://github.com/sagemath/sagetrac-mirror/commit/45c55d6a05ec9305751db34bbb4ce24a3d04c2fc)**



---

archive/issue_comments_469868.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4827cd2c643327a228fbf5f19c9d097e379ba5b2\"><code>4827cd2</code></a></td><td><code>Fix import problem</code></td></tr></table>\n",
    "created_at": "2020-08-28T17:17:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469868",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4827cd2c643327a228fbf5f19c9d097e379ba5b2"><code>4827cd2</code></a></td><td><code>Fix import problem</code></td></tr></table>




---

archive/issue_comments_469869.json:
```json
{
    "body": "Changed commit from **[`45c55d6`](https://github.com/sagemath/sagetrac-mirror/commit/45c55d6a05ec9305751db34bbb4ce24a3d04c2fc)** to **[`4827cd2`](https://github.com/sagemath/sagetrac-mirror/commit/4827cd2c643327a228fbf5f19c9d097e379ba5b2)**",
    "created_at": "2020-08-28T17:17:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469869",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`45c55d6`](https://github.com/sagemath/sagetrac-mirror/commit/45c55d6a05ec9305751db34bbb4ce24a3d04c2fc)** to **[`4827cd2`](https://github.com/sagemath/sagetrac-mirror/commit/4827cd2c643327a228fbf5f19c9d097e379ba5b2)**



---

archive/issue_events_406683.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-08-28T17:21:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406683"
}
```



---

archive/issue_events_406684.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-08-28T17:21:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406684"
}
```



---

archive/issue_comments_469870.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nI've finally fixed these missing imports (or so I hope, I cannot run sage -t because pip couldn't be installed via make -- I will report this elsewhere). Thanks @kliem for the helpful instructions.\n\nThe patchbot warnings should be fixed now as well. Note that the negative coverage changes  are due to the fact that `@overload` seems not to be supported.",
    "created_at": "2020-08-28T17:21:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469870",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:29" align="right">comment:29</div>

I've finally fixed these missing imports (or so I hope, I cannot run sage -t because pip couldn't be installed via make -- I will report this elsewhere). Thanks @kliem for the helpful instructions.

The patchbot warnings should be fixed now as well. Note that the negative coverage changes  are due to the fact that `@overload` seems not to be supported.



---

archive/issue_events_406685.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-09-25T17:01:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406685"
}
```



---

archive/issue_events_406686.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-09-25T17:01:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406686"
}
```



---

archive/issue_comments_469871.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nred branch => needs work",
    "created_at": "2020-09-25T17:01:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469871",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:30" align="right">comment:30</div>

red branch => needs work



---

archive/issue_comments_469872.json:
```json
{
    "body": "Changed commit from **[`4827cd2`](https://github.com/sagemath/sagetrac-mirror/commit/4827cd2c643327a228fbf5f19c9d097e379ba5b2)** to **[`c9bf862`](https://github.com/sagemath/sagetrac-mirror/commit/c9bf8620892a7ed243a6f4bebc0dafa801f1950f)**",
    "created_at": "2020-09-26T19:39:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469872",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4827cd2`](https://github.com/sagemath/sagetrac-mirror/commit/4827cd2c643327a228fbf5f19c9d097e379ba5b2)** to **[`c9bf862`](https://github.com/sagemath/sagetrac-mirror/commit/c9bf8620892a7ed243a6f4bebc0dafa801f1950f)**



---

archive/issue_comments_469873.json:
```json
{
    "body": "<div id=\"comment:31\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c9bf8620892a7ed243a6f4bebc0dafa801f1950f\"><code>c9bf862</code></a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/manifolds/typing</code></td></tr></table>\n",
    "created_at": "2020-09-26T19:39:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469873",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:31"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c9bf8620892a7ed243a6f4bebc0dafa801f1950f"><code>c9bf862</code></a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/manifolds/typing</code></td></tr></table>




---

archive/issue_comments_469874.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nThanks. I've now merged upstream into this branch.",
    "created_at": "2020-09-26T19:41:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469874",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:32" align="right">comment:32</div>

Thanks. I've now merged upstream into this branch.



---

archive/issue_events_406687.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-09-26T19:41:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406687"
}
```



---

archive/issue_events_406688.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-09-26T19:41:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406688"
}
```



---

archive/issue_events_406689.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406689"
}
```



---

archive/issue_events_406690.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406690"
}
```



---

archive/issue_comments_469875.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nred branch => needs work",
    "created_at": "2020-11-01T18:06:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469875",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:34" align="right">comment:34</div>

red branch => needs work



---

archive/issue_events_406691.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-11-01T18:06:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406691"
}
```



---

archive/issue_events_406692.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-11-01T18:06:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406692"
}
```



---

archive/issue_comments_469876.json:
```json
{
    "body": "<div id=\"comment:36\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5db7ddfe2123b2bbf8500736548921ed3698ac35\"><code>5db7ddf</code></a></td><td><code>Merge develop</code></td></tr></table>\n",
    "created_at": "2020-11-08T13:47:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469876",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:36"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5db7ddfe2123b2bbf8500736548921ed3698ac35"><code>5db7ddf</code></a></td><td><code>Merge develop</code></td></tr></table>




---

archive/issue_comments_469877.json:
```json
{
    "body": "Changed commit from **[`c9bf862`](https://github.com/sagemath/sagetrac-mirror/commit/c9bf8620892a7ed243a6f4bebc0dafa801f1950f)** to **[`5db7ddf`](https://github.com/sagemath/sagetrac-mirror/commit/5db7ddfe2123b2bbf8500736548921ed3698ac35)**",
    "created_at": "2020-11-08T13:47:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469877",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c9bf862`](https://github.com/sagemath/sagetrac-mirror/commit/c9bf8620892a7ed243a6f4bebc0dafa801f1950f)** to **[`5db7ddf`](https://github.com/sagemath/sagetrac-mirror/commit/5db7ddfe2123b2bbf8500736548921ed3698ac35)**



---

archive/issue_comments_469878.json:
```json
{
    "body": "<div id=\"comment:37\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cd9ef9e0cd24aaa748fdc470268f6ce8dc69aefe\"><code>cd9ef9e</code></a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/manifolds/typing</code></td></tr></table>\n",
    "created_at": "2020-11-08T13:52:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469878",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:37"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cd9ef9e0cd24aaa748fdc470268f6ce8dc69aefe"><code>cd9ef9e</code></a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/manifolds/typing</code></td></tr></table>




---

archive/issue_comments_469879.json:
```json
{
    "body": "Changed commit from **[`5db7ddf`](https://github.com/sagemath/sagetrac-mirror/commit/5db7ddfe2123b2bbf8500736548921ed3698ac35)** to **[`cd9ef9e`](https://github.com/sagemath/sagetrac-mirror/commit/cd9ef9e0cd24aaa748fdc470268f6ce8dc69aefe)**",
    "created_at": "2020-11-08T13:52:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469879",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5db7ddf`](https://github.com/sagemath/sagetrac-mirror/commit/5db7ddfe2123b2bbf8500736548921ed3698ac35)** to **[`cd9ef9e`](https://github.com/sagemath/sagetrac-mirror/commit/cd9ef9e0cd24aaa748fdc470268f6ce8dc69aefe)**



---

archive/issue_events_406693.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-11-08T13:55:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406693"
}
```



---

archive/issue_events_406694.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-11-08T13:55:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406694"
}
```



---

archive/issue_comments_469880.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nMerged upstream.",
    "created_at": "2020-11-08T13:55:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469880",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:38" align="right">comment:38</div>

Merged upstream.



---

archive/issue_comments_469881.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nIn changes like this one:\n\n```\n@@ -596,14 +597,13 @@ class DegenerateSubmanifold(DegenerateManifold, DifferentiableSubmanifold):\n         self._default_screen = self._screens[name]\n         return self._screens[name]\n \n-    def induced_metric(self):\n+    def induced_metric(self) -> DegenerateMetric:\n         r\"\"\"\n         Return the pullback of the ambient metric.\n \n         OUTPUT:\n \n-        - induced metric, as an instance of\n-          :class:`~sage.manifolds.differentiable.metric.DegenerateMetric`\n+        - induced mettric\n \n         EXAMPLES:\n```\nDid you check that our built documentation contains the output type?\n\n(Also note this introduces a typo)",
    "created_at": "2020-11-09T02:06:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469881",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:39" align="right">comment:39</div>

In changes like this one:

```
@@ -596,14 +597,13 @@ class DegenerateSubmanifold(DegenerateManifold, DifferentiableSubmanifold):
         self._default_screen = self._screens[name]
         return self._screens[name]
 
-    def induced_metric(self):
+    def induced_metric(self) -> DegenerateMetric:
         r"""
         Return the pullback of the ambient metric.
 
         OUTPUT:
 
-        - induced metric, as an instance of
-          :class:`~sage.manifolds.differentiable.metric.DegenerateMetric`
+        - induced mettric
 
         EXAMPLES:
```
Did you check that our built documentation contains the output type?

(Also note this introduces a typo)



---

archive/issue_comments_469882.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nReplying to [@mkoeppe](#comment%3A39):\n> In changes like this one:\n> \n> ```\n> -    def induced_metric(self):\n> +    def induced_metric(self) -> DegenerateMetric:\n>  \n> -        - induced metric, as an instance of\n> -          :class:`~sage.manifolds.differentiable.metric.DegenerateMetric`\n> +        - induced mettric\n> ```\n> Did you check that our built documentation contains the output type?\n> \n\nNo it does not: the output type does no longer appear in the generated html documentation.\n> (Also note this introduces a typo)\n> \n\nMoreover, what is the meaning of this change in `src/sage/manifolds/differentiable/manifold.py`:\n\n```diff\n-    def metric(self, name, signature=None, latex_name=None, dest_map=None):\n+    def metric(self, name=None, signature=None, latex_name=None, dest_map=None) -> PseudoRiemannianMetric:\n```\ni.e. why `name` is replaced by `name=None` ?",
    "created_at": "2020-11-09T20:54:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469882",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:40" align="right">comment:40</div>

Replying to [@mkoeppe](#comment%3A39):
> In changes like this one:
> 
> ```
> -    def induced_metric(self):
> +    def induced_metric(self) -> DegenerateMetric:
>  
> -        - induced metric, as an instance of
> -          :class:`~sage.manifolds.differentiable.metric.DegenerateMetric`
> +        - induced mettric
> ```
> Did you check that our built documentation contains the output type?
> 

No it does not: the output type does no longer appear in the generated html documentation.
> (Also note this introduces a typo)
> 

Moreover, what is the meaning of this change in `src/sage/manifolds/differentiable/manifold.py`:

```diff
-    def metric(self, name, signature=None, latex_name=None, dest_map=None):
+    def metric(self, name=None, signature=None, latex_name=None, dest_map=None) -> PseudoRiemannianMetric:
```
i.e. why `name` is replaced by `name=None` ?



---

archive/issue_comments_469883.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nIf we do\n\n```\nsage: M = Manifold(2, 'M')                                                                          \nsage: M.vector_field_module?                                                                        \n```\nwe get\n\n``` \nSignature:     \nM.vector_field_module(\n    dest_map: sage.manifolds.differentiable.diff_map.DiffMap = None,\n    force_free=False,\n) -> sage.manifolds.differentiable.vectorfield_module.VectorFieldModule\n```\nwhich is barely readable, I think.",
    "created_at": "2020-11-09T21:28:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469883",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:41" align="right">comment:41</div>

If we do

```
sage: M = Manifold(2, 'M')                                                                          
sage: M.vector_field_module?                                                                        
```
we get

``` 
Signature:     
M.vector_field_module(
    dest_map: sage.manifolds.differentiable.diff_map.DiffMap = None,
    force_free=False,
) -> sage.manifolds.differentiable.vectorfield_module.VectorFieldModule
```
which is barely readable, I think.



---

archive/issue_comments_469884.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nI'm currently working on a solution to show the typing information in the documentation using https://pypi.org/project/sphinx-autodoc-typehints/ (in a new ticket of course).\n\nNot sure why I changed the name to `None`. Probably I was \"inspired\" by the constructor of a generic tensor field:\n\n```\ndef __init__(self, vector_field_module, tensor_type, name=None,\n                 latex_name=None, sym=None, antisym=None, parent=None):\n```\nDoes the name has to be set for a metric?",
    "created_at": "2020-11-09T21:29:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469884",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:42" align="right">comment:42</div>

I'm currently working on a solution to show the typing information in the documentation using https://pypi.org/project/sphinx-autodoc-typehints/ (in a new ticket of course).

Not sure why I changed the name to `None`. Probably I was "inspired" by the constructor of a generic tensor field:

```
def __init__(self, vector_field_module, tensor_type, name=None,
                 latex_name=None, sym=None, antisym=None, parent=None):
```
Does the name has to be set for a metric?



---

archive/issue_comments_469885.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nReplying to [@tobiasdiez](#comment%3A42):\n> \n> Not sure why I changed the name to `None`. Probably I was \"inspired\" by the constructor of a generic tensor field:\n> \n> ```\n> def __init__(self, vector_field_module, tensor_type, name=None,\n>                  latex_name=None, sym=None, antisym=None, parent=None):\n> ```\n> Does the name has to be set for a metric? \n\nYes for it is used to set the name of derived quantities (Levi-Civita connection, curvature tensor, etc.). Of course, this can be discussed and changed, but in another ticket, since this definitely does not pertain to the current ticket.",
    "created_at": "2020-11-10T14:43:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469885",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:43" align="right">comment:43</div>

Replying to [@tobiasdiez](#comment%3A42):
> 
> Not sure why I changed the name to `None`. Probably I was "inspired" by the constructor of a generic tensor field:
> 
> ```
> def __init__(self, vector_field_module, tensor_type, name=None,
>                  latex_name=None, sym=None, antisym=None, parent=None):
> ```
> Does the name has to be set for a metric? 

Yes for it is used to set the name of derived quantities (Levi-Civita connection, curvature tensor, etc.). Of course, this can be discussed and changed, but in another ticket, since this definitely does not pertain to the current ticket.



---

archive/issue_events_406695.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-11T17:01:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406695"
}
```



---

archive/issue_events_406696.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-11T17:01:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406696"
}
```



---

archive/issue_comments_469886.json:
```json
{
    "body": "<div id=\"comment:45\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/db5a3fc859f51c490964b271e4a3b53883cd2ad1\"><code>db5a3fc</code></a></td><td><code>Readd documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c937af86321a0814134ee7181def881e3804ec2\"><code>0c937af</code></a></td><td><code>Remove none for metric</code></td></tr></table>\n",
    "created_at": "2020-11-21T12:20:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469886",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:45"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/db5a3fc859f51c490964b271e4a3b53883cd2ad1"><code>db5a3fc</code></a></td><td><code>Readd documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c937af86321a0814134ee7181def881e3804ec2"><code>0c937af</code></a></td><td><code>Remove none for metric</code></td></tr></table>




---

archive/issue_comments_469887.json:
```json
{
    "body": "Changed commit from **[`cd9ef9e`](https://github.com/sagemath/sagetrac-mirror/commit/cd9ef9e0cd24aaa748fdc470268f6ce8dc69aefe)** to **[`0c937af`](https://github.com/sagemath/sagetrac-mirror/commit/0c937af86321a0814134ee7181def881e3804ec2)**",
    "created_at": "2020-11-21T12:20:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469887",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cd9ef9e`](https://github.com/sagemath/sagetrac-mirror/commit/cd9ef9e0cd24aaa748fdc470268f6ce8dc69aefe)** to **[`0c937af`](https://github.com/sagemath/sagetrac-mirror/commit/0c937af86321a0814134ee7181def881e3804ec2)**



---

archive/issue_comments_469888.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nI tried to change the documentation to incorporate typing information, but this turns out to be a bit more complicated than expected.\nSo for now I've readded the class information in the documentation.\n\nMoreover, I've removed the `name = None` for the metric again.\n\nSo it should be ready for review now.",
    "created_at": "2020-11-21T12:35:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469888",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:46" align="right">comment:46</div>

I tried to change the documentation to incorporate typing information, but this turns out to be a bit more complicated than expected.
So for now I've readded the class information in the documentation.

Moreover, I've removed the `name = None` for the metric again.

So it should be ready for review now.



---

archive/issue_events_406697.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-11-21T12:35:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406697"
}
```



---

archive/issue_events_406698.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-11-21T12:35:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406698"
}
```



---

archive/issue_comments_469889.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,3 @@\n-This PR adds a bit of typing information to some of the methods in the manifolds module that I added while browsing the code. I've changed the inline documentation accordingly. If these types of changes are ok, I'll add further typing information as I proceed understanding the code.\n-Probably the biggest change is the addition of the identity map for a smooth manifold (which is a `DiffMap` and not just a `ContinousMap`).\n+This PR adds a bit of typing information to some of the methods in the manifolds module that I added while browsing the code. If these types of changes are ok, I'll add further typing information as I proceed understanding the code.\n \n Moreover, a few very minor clarifications to the documentation were added as well.\n-\n-(This is my first real PR to sagemath, so please forgive me if I overlooked something.)\n``````\n",
    "created_at": "2020-11-21T12:35:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469889",
    "user": "https://github.com/tobiasdiez"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,3 @@
-This PR adds a bit of typing information to some of the methods in the manifolds module that I added while browsing the code. I've changed the inline documentation accordingly. If these types of changes are ok, I'll add further typing information as I proceed understanding the code.
-Probably the biggest change is the addition of the identity map for a smooth manifold (which is a `DiffMap` and not just a `ContinousMap`).
+This PR adds a bit of typing information to some of the methods in the manifolds module that I added while browsing the code. If these types of changes are ok, I'll add further typing information as I proceed understanding the code.
 
 Moreover, a few very minor clarifications to the documentation were added as well.
-
-(This is my first real PR to sagemath, so please forgive me if I overlooked something.)
``````




---

archive/issue_events_406699.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-12-19T18:21:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406699"
}
```



---

archive/issue_events_406700.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-12-19T18:21:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406700"
}
```



---

archive/issue_comments_469890.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nred branch",
    "created_at": "2020-12-19T18:21:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469890",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:47" align="right">comment:47</div>

red branch



---

archive/issue_comments_469891.json:
```json
{
    "body": "Changed commit from **[`0c937af`](https://github.com/sagemath/sagetrac-mirror/commit/0c937af86321a0814134ee7181def881e3804ec2)** to **[`06770cd`](https://github.com/sagemath/sagetrac-mirror/commit/06770cdb3dafa5f0833b96580675e2bf847d5ca3)**",
    "created_at": "2020-12-20T22:46:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469891",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0c937af`](https://github.com/sagemath/sagetrac-mirror/commit/0c937af86321a0814134ee7181def881e3804ec2)** to **[`06770cd`](https://github.com/sagemath/sagetrac-mirror/commit/06770cdb3dafa5f0833b96580675e2bf847d5ca3)**



---

archive/issue_comments_469892.json:
```json
{
    "body": "<div id=\"comment:48\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/06770cdb3dafa5f0833b96580675e2bf847d5ca3\"><code>06770cd</code></a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/manifolds/typing</code></td></tr></table>\n",
    "created_at": "2020-12-20T22:46:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469892",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:48"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/06770cdb3dafa5f0833b96580675e2bf847d5ca3"><code>06770cd</code></a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/manifolds/typing</code></td></tr></table>




---

archive/issue_events_406701.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-20T22:47:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406701"
}
```



---

archive/issue_events_406702.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-20T22:47:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406702"
}
```



---

archive/issue_comments_469893.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nMerged develop branch.",
    "created_at": "2020-12-20T22:47:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469893",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:49" align="right">comment:49</div>

Merged develop branch.



---

archive/issue_comments_469894.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-15T22:07:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469894",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:50" align="right">comment:50</div>

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_406703.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-15T22:07:04Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406703"
}
```



---

archive/issue_events_406704.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-15T22:07:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406704"
}
```



---

archive/issue_comments_469895.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nIt would be nice if this ticket could be reviewed. Thanks!",
    "created_at": "2021-04-23T08:12:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469895",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:51" align="right">comment:51</div>

It would be nice if this ticket could be reviewed. Thanks!



---

archive/issue_comments_469896.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nThe patchbot reports many doctest errors.",
    "created_at": "2021-04-24T12:26:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469896",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:52" align="right">comment:52</div>

The patchbot reports many doctest errors.



---

archive/issue_events_406705.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-24T21:03:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406705"
}
```



---

archive/issue_events_406706.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-24T21:03:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406706"
}
```



---

archive/issue_comments_469897.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nAlso, now that we can use `from `__future__` import annotations`, I think some of the type annotations can be simplified",
    "created_at": "2021-05-27T23:28:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469897",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:54" align="right">comment:54</div>

Also, now that we can use `from `__future__` import annotations`, I think some of the type annotations can be simplified



---

archive/issue_comments_469898.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nSetting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469898",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:55" align="right">comment:55</div>

Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_406707.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406707"
}
```



---

archive/issue_events_406708.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406708"
}
```



---

archive/issue_comments_469899.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nSorry for the delay, but the doctests should be fixed now. I also use the future import for annotations, which indeed simplifies a few things. \nAgain ready for review.",
    "created_at": "2021-11-28T20:52:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469899",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:56" align="right">comment:56</div>

Sorry for the delay, but the doctests should be fixed now. I also use the future import for annotations, which indeed simplifies a few things. 
Again ready for review.



---

archive/issue_events_406709.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2021-11-28T20:52:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406709"
}
```



---

archive/issue_events_406710.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2021-11-28T20:52:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406710"
}
```



---

archive/issue_comments_469900.json:
```json
{
    "body": "Changed commit from **[`06770cd`](https://github.com/sagemath/sagetrac-mirror/commit/06770cdb3dafa5f0833b96580675e2bf847d5ca3)** to **[`fc15d33`](https://github.com/sagemath/sagetrac-mirror/commit/fc15d33011d3b64a937f2e3b3f54610d66707741)**",
    "created_at": "2021-11-28T20:53:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469900",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`06770cd`](https://github.com/sagemath/sagetrac-mirror/commit/06770cdb3dafa5f0833b96580675e2bf847d5ca3)** to **[`fc15d33`](https://github.com/sagemath/sagetrac-mirror/commit/fc15d33011d3b64a937f2e3b3f54610d66707741)**



---

archive/issue_comments_469901.json:
```json
{
    "body": "<div id=\"comment:57\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b45edce74275bef50ab7af981973bbfd9538c77f\"><code>b45edce</code></a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into public/manifolds/typing</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fc15d33011d3b64a937f2e3b3f54610d66707741\"><code>fc15d33</code></a></td><td><code>Improve typing</code></td></tr></table>\n",
    "created_at": "2021-11-28T20:53:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469901",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:57"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b45edce74275bef50ab7af981973bbfd9538c77f"><code>b45edce</code></a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into public/manifolds/typing</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fc15d33011d3b64a937f2e3b3f54610d66707741"><code>fc15d33</code></a></td><td><code>Improve typing</code></td></tr></table>




---

archive/issue_comments_469902.json:
```json
{
    "body": "Changed commit from **[`fc15d33`](https://github.com/sagemath/sagetrac-mirror/commit/fc15d33011d3b64a937f2e3b3f54610d66707741)** to **[`3f16aee`](https://github.com/sagemath/sagetrac-mirror/commit/3f16aee5f3d1ba819e7506deb4dc647cea8f1a86)**",
    "created_at": "2021-11-28T20:53:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469902",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fc15d33`](https://github.com/sagemath/sagetrac-mirror/commit/fc15d33011d3b64a937f2e3b3f54610d66707741)** to **[`3f16aee`](https://github.com/sagemath/sagetrac-mirror/commit/3f16aee5f3d1ba819e7506deb4dc647cea8f1a86)**



---

archive/issue_comments_469903.json:
```json
{
    "body": "<div id=\"comment:58\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3f16aee5f3d1ba819e7506deb4dc647cea8f1a86\"><code>3f16aee</code></a></td><td><code>Fix tests</code></td></tr></table>\n",
    "created_at": "2021-11-28T20:53:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469903",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:58"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3f16aee5f3d1ba819e7506deb4dc647cea8f1a86"><code>3f16aee</code></a></td><td><code>Fix tests</code></td></tr></table>




---

archive/issue_events_406711.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:53:12Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406711"
}
```



---

archive/issue_events_406712.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:53:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406712"
}
```



---

archive/issue_comments_469904.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nStalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.",
    "created_at": "2021-12-18T19:53:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469904",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:59" align="right">comment:59</div>

Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.



---

archive/issue_events_406713.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-12-28T16:27:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406713"
}
```



---

archive/issue_events_406714.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-12-28T16:27:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406714"
}
```



---

archive/issue_comments_469905.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nred branch => needs work",
    "created_at": "2021-12-28T16:27:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469905",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:60" align="right">comment:60</div>

red branch => needs work



---

archive/issue_events_406715.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2021-12-28T17:53:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406715"
}
```



---

archive/issue_events_406716.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2021-12-28T17:53:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406716"
}
```



---

archive/issue_comments_469906.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nSetting it back to needs review as the merge conflict should be easy to resolve but I'm not near my dev machine for a couple of days.\n\nIt would be really nice if someone could review this ticket, as it's in this limbo state now for quite some time.",
    "created_at": "2021-12-28T17:53:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469906",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:61" align="right">comment:61</div>

Setting it back to needs review as the merge conflict should be easy to resolve but I'm not near my dev machine for a couple of days.

It would be really nice if someone could review this ticket, as it's in this limbo state now for quite some time.



---

archive/issue_comments_469907.json:
```json
{
    "body": "<div id=\"comment:62\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/69c09434fd99d865c4740f864844e52778042267\"><code>69c0943</code></a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into public/manifolds/typing</code></td></tr></table>\n",
    "created_at": "2022-01-03T12:13:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469907",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:62"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/69c09434fd99d865c4740f864844e52778042267"><code>69c0943</code></a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into public/manifolds/typing</code></td></tr></table>




---

archive/issue_comments_469908.json:
```json
{
    "body": "Changed commit from **[`3f16aee`](https://github.com/sagemath/sagetrac-mirror/commit/3f16aee5f3d1ba819e7506deb4dc647cea8f1a86)** to **[`69c0943`](https://github.com/sagemath/sagetrac-mirror/commit/69c09434fd99d865c4740f864844e52778042267)**",
    "created_at": "2022-01-03T12:13:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469908",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3f16aee`](https://github.com/sagemath/sagetrac-mirror/commit/3f16aee5f3d1ba819e7506deb4dc647cea8f1a86)** to **[`69c0943`](https://github.com/sagemath/sagetrac-mirror/commit/69c09434fd99d865c4740f864844e52778042267)**



---

archive/issue_events_406717.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-01-28T00:07:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20geometry",
    "label_color": "0000ff",
    "label_name": "c: geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406717"
}
```



---

archive/issue_events_406718.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-01-28T00:07:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20manifolds",
    "label_color": "0000ff",
    "label_name": "c: manifolds",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406718"
}
```



---

archive/issue_comments_469909.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nred branch",
    "created_at": "2022-02-23T17:58:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469909",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:64" align="right">comment:64</div>

red branch



---

archive/issue_events_406719.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-02-23T17:58:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406719"
}
```



---

archive/issue_events_406720.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-02-23T17:58:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406720"
}
```



---

archive/issue_events_406721.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-02-23T21:52:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406721"
}
```



---

archive/issue_events_406722.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-02-23T21:52:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406722"
}
```



---

archive/issue_comments_469910.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nMerging the develop branch should be trivial, but I'll not be able to do this is in the near future; so setting it back to \"needs review\".",
    "created_at": "2022-02-23T21:52:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469910",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:65" align="right">comment:65</div>

Merging the develop branch should be trivial, but I'll not be able to do this is in the near future; so setting it back to "needs review".



---

archive/issue_comments_469911.json:
```json
{
    "body": "Changed commit from **[`69c0943`](https://github.com/sagemath/sagetrac-mirror/commit/69c09434fd99d865c4740f864844e52778042267)** to **[`229fde1`](https://github.com/sagemath/sagetrac-mirror/commit/229fde199d98d0eb71102ff413c827277b2c2c54)**",
    "created_at": "2022-03-01T13:30:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469911",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`69c0943`](https://github.com/sagemath/sagetrac-mirror/commit/69c09434fd99d865c4740f864844e52778042267)** to **[`229fde1`](https://github.com/sagemath/sagetrac-mirror/commit/229fde199d98d0eb71102ff413c827277b2c2c54)**



---

archive/issue_comments_469912.json:
```json
{
    "body": "<div id=\"comment:66\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/229fde199d98d0eb71102ff413c827277b2c2c54\"><code>229fde1</code></a></td><td><code>Merge remote-tracking branch 'origin/develop' into public/manifolds/typing</code></td></tr></table>\n",
    "created_at": "2022-03-01T13:30:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469912",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:66"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/229fde199d98d0eb71102ff413c827277b2c2c54"><code>229fde1</code></a></td><td><code>Merge remote-tracking branch 'origin/develop' into public/manifolds/typing</code></td></tr></table>




---

archive/issue_comments_469913.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\n\n```\n--- a/src/sage/manifolds/differentiable/metric.py\n+++ b/src/sage/manifolds/differentiable/metric.py\n@@ -41,12 +41,16 @@ REFERENCES:\n #  the License, or (at your option) any later version.\n #                  https://www.gnu.org/licenses/\n # *****************************************************************************\n+from __future__ import annotations\n+from typing import overload, TYPE_CHECKING\n \n from __future__ import annotations\n from typing import TYPE_CHECKING\n from sage.rings.integer import Integer\n from sage.manifolds.differentiable.tensorfield import TensorField\n from sage.manifolds.differentiable.tensorfield_paral import TensorFieldParal\n+if TYPE_CHECKING:\n+    from sage.manifolds.differentiable.diff_form import DiffForm\n \n if TYPE_CHECKING:\n     from sage.manifolds.differentiable.diff_form import DiffForm\n```\n\nThis doesn't look right",
    "created_at": "2022-03-01T17:24:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469913",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:67" align="right">comment:67</div>


```
--- a/src/sage/manifolds/differentiable/metric.py
+++ b/src/sage/manifolds/differentiable/metric.py
@@ -41,12 +41,16 @@ REFERENCES:
 #  the License, or (at your option) any later version.
 #                  https://www.gnu.org/licenses/
 # *****************************************************************************
+from __future__ import annotations
+from typing import overload, TYPE_CHECKING
 
 from __future__ import annotations
 from typing import TYPE_CHECKING
 from sage.rings.integer import Integer
 from sage.manifolds.differentiable.tensorfield import TensorField
 from sage.manifolds.differentiable.tensorfield_paral import TensorFieldParal
+if TYPE_CHECKING:
+    from sage.manifolds.differentiable.diff_form import DiffForm
 
 if TYPE_CHECKING:
     from sage.manifolds.differentiable.diff_form import DiffForm
```

This doesn't look right



---

archive/issue_events_406723.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-01T17:24:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406723"
}
```



---

archive/issue_events_406724.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-01T17:24:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406724"
}
```



---

archive/issue_comments_469914.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nAnd I would urge to use more restraint in changing the coding style.\nFor example, these changes are entirely gratuitous:\n\n```\n     if structure is None:\n-        diff_degree = extra_kwds.get('diff_degree', infinity)\n+        diff_degree = extra_kwds.get(\"diff_degree\", infinity)\n         if diff_degree == infinity:\n-            structure = 'smooth'\n+            structure = \"smooth\"\n         elif diff_degree > 0:\n-            structure = 'differentiable'\n+            structure = \"differentiable\"\n         else:\n-            structure = 'topological'\n+            structure = \"topological\"\n```",
    "created_at": "2022-03-01T17:25:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469914",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:69" align="right">comment:69</div>

And I would urge to use more restraint in changing the coding style.
For example, these changes are entirely gratuitous:

```
     if structure is None:
-        diff_degree = extra_kwds.get('diff_degree', infinity)
+        diff_degree = extra_kwds.get("diff_degree", infinity)
         if diff_degree == infinity:
-            structure = 'smooth'
+            structure = "smooth"
         elif diff_degree > 0:
-            structure = 'differentiable'
+            structure = "differentiable"
         else:
-            structure = 'topological'
+            structure = "topological"
```



---

archive/issue_comments_469915.json:
```json
{
    "body": "<div id=\"comment:70\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4290c246b93db15f99eb683fcbb6b44de326813d\"><code>4290c24</code></a></td><td><code>Fix style</code></td></tr></table>\n",
    "created_at": "2022-03-01T18:18:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469915",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:70"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4290c246b93db15f99eb683fcbb6b44de326813d"><code>4290c24</code></a></td><td><code>Fix style</code></td></tr></table>




---

archive/issue_comments_469916.json:
```json
{
    "body": "Changed commit from **[`229fde1`](https://github.com/sagemath/sagetrac-mirror/commit/229fde199d98d0eb71102ff413c827277b2c2c54)** to **[`4290c24`](https://github.com/sagemath/sagetrac-mirror/commit/4290c246b93db15f99eb683fcbb6b44de326813d)**",
    "created_at": "2022-03-01T18:18:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469916",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`229fde1`](https://github.com/sagemath/sagetrac-mirror/commit/229fde199d98d0eb71102ff413c827277b2c2c54)** to **[`4290c24`](https://github.com/sagemath/sagetrac-mirror/commit/4290c246b93db15f99eb683fcbb6b44de326813d)**



---

archive/issue_events_406725.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-03-01T18:19:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406725"
}
```



---

archive/issue_events_406726.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-03-01T18:19:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406726"
}
```



---

archive/issue_comments_469917.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nReplying to [@mkoeppe](#comment%3A67):\n> \n> ```\n> --- a/src/sage/manifolds/differentiable/metric.py\n> +++ b/src/sage/manifolds/differentiable/metric.py\n> This doesn't look right\n> ```\n\nThanks, I was still in the process of fixing some of the merge conflicts. Done now.",
    "created_at": "2022-03-01T18:19:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469917",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:71" align="right">comment:71</div>

Replying to [@mkoeppe](#comment%3A67):
> 
> ```
> --- a/src/sage/manifolds/differentiable/metric.py
> +++ b/src/sage/manifolds/differentiable/metric.py
> This doesn't look right
> ```

Thanks, I was still in the process of fixing some of the merge conflicts. Done now.



---

archive/issue_comments_469918.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nYou didn't address [comment:69](#comment%3A69)",
    "created_at": "2022-03-03T01:01:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469918",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:72" align="right">comment:72</div>

You didn't address [comment:69](#comment%3A69)



---

archive/issue_events_406727.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-03T01:01:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406727"
}
```



---

archive/issue_events_406728.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-03T01:01:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406728"
}
```



---

archive/issue_comments_469919.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nAnd this change is an API change (= introduces a bug).\n\nThe argument `tensor_type` does NOT have `Tuple[int, int]` as its input type. It also accepts lists. It marshals the input to a tuple.\n\nYour change removes the marshaling.\n\n```\n TensorType = Tuple[int, int]\n\n@@ -402,8 +405,17 @@ class TensorField(ModuleElementWithMutability):\n         ValueError: the name of an immutable element cannot be changed\n \n     \"\"\"\n-    def __init__(self, vector_field_module, tensor_type, name=None,\n-                 latex_name=None, sym=None, antisym=None, parent=None):\n+\n+    def __init__(\n+        self,\n+        vector_field_module: VectorFieldModule,\n+        tensor_type: TensorType,\n+        name: Optional[str] = None,\n+        latex_name: Optional[str] = None,\n+        sym=None,\n+        antisym=None,\n+        parent=None,\n+    ):\n         r\"\"\"\n         Construct a tensor field.\n \n@@ -451,7 +463,7 @@ class TensorField(ModuleElementWithMutability):\n             parent = vector_field_module.tensor_module(*tensor_type)\n         ModuleElementWithMutability.__init__(self, parent)\n         self._vmodule = vector_field_module\n-        self._tensor_type = tuple(tensor_type)\n+        self._tensor_type = tensor_type\n         self._tensor_rank = self._tensor_type[0] + self._tensor_type[1]\n         self._is_zero = False # a priori, may be changed below or via\n                               # method __bool__()\n```",
    "created_at": "2022-03-03T01:11:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469919",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:73" align="right">comment:73</div>

And this change is an API change (= introduces a bug).

The argument `tensor_type` does NOT have `Tuple[int, int]` as its input type. It also accepts lists. It marshals the input to a tuple.

Your change removes the marshaling.

```
 TensorType = Tuple[int, int]

@@ -402,8 +405,17 @@ class TensorField(ModuleElementWithMutability):
         ValueError: the name of an immutable element cannot be changed
 
     """
-    def __init__(self, vector_field_module, tensor_type, name=None,
-                 latex_name=None, sym=None, antisym=None, parent=None):
+
+    def __init__(
+        self,
+        vector_field_module: VectorFieldModule,
+        tensor_type: TensorType,
+        name: Optional[str] = None,
+        latex_name: Optional[str] = None,
+        sym=None,
+        antisym=None,
+        parent=None,
+    ):
         r"""
         Construct a tensor field.
 
@@ -451,7 +463,7 @@ class TensorField(ModuleElementWithMutability):
             parent = vector_field_module.tensor_module(*tensor_type)
         ModuleElementWithMutability.__init__(self, parent)
         self._vmodule = vector_field_module
-        self._tensor_type = tuple(tensor_type)
+        self._tensor_type = tensor_type
         self._tensor_rank = self._tensor_type[0] + self._tensor_type[1]
         self._is_zero = False # a priori, may be changed below or via
                               # method __bool__()
```



---

archive/issue_comments_469920.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nReplying to [@mkoeppe](#comment%3A73):\n> And this change is an API change (= introduces a bug).\n> \n> The argument `tensor_type` does NOT have `Tuple[int, int]` as its input type. It also accepts lists. It marshals the input to a tuple.\n\nAccording to the documentation \n> - ``tensor_type`` -- pair `(k,l)` with `k` being the contravariant rank\n\n      and `l` the covariant rank\n\nwhich is quite clear about that it expects a 2-tuple. Thus, this change is only a formalization of the current public interface; I can of course revert it and adapt the documentation to point out that it also accepts arbitrary iterables if that's really desired. It feels however more consistent to represent the tensor type everywhere by a tuple.",
    "created_at": "2022-03-03T12:10:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469920",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:74" align="right">comment:74</div>

Replying to [@mkoeppe](#comment%3A73):
> And this change is an API change (= introduces a bug).
> 
> The argument `tensor_type` does NOT have `Tuple[int, int]` as its input type. It also accepts lists. It marshals the input to a tuple.

According to the documentation 
> - ``tensor_type`` -- pair `(k,l)` with `k` being the contravariant rank

      and `l` the covariant rank

which is quite clear about that it expects a 2-tuple. Thus, this change is only a formalization of the current public interface; I can of course revert it and adapt the documentation to point out that it also accepts arbitrary iterables if that's really desired. It feels however more consistent to represent the tensor type everywhere by a tuple.



---

archive/issue_comments_469921.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nReplying to [@mkoeppe](#comment%3A72):\n> You didn't address [comment:69](#comment%3A69)\n\nI accidentally run a code formatter over these files and committed the changes; sorry for this. Will try not to do this again in the future.",
    "created_at": "2022-03-03T12:11:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469921",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:75" align="right">comment:75</div>

Replying to [@mkoeppe](#comment%3A72):
> You didn't address [comment:69](#comment%3A69)

I accidentally run a code formatter over these files and committed the changes; sorry for this. Will try not to do this again in the future.



---

archive/issue_comments_469922.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nReplying to [@tobiasdiez](#comment%3A74):\n> Replying to [@mkoeppe](#comment%3A73):\n> > And this change is an API change (= introduces a bug).\n> > \n> > The argument `tensor_type` does NOT have `Tuple[int, int]` as its input type. It also accepts lists. It marshals the input to a tuple.\n\n> \n> According to the documentation \n> > - ``tensor_type`` -- pair `(k,l)` with `k` being the contravariant rank\n\n>       and `l` the covariant rank\n> \n> which is quite clear about that it expects a 2-tuple. \n\nWell, the code obviously was concerned about making it a tuple to provide a robust interface. \n\n> Thus, this change is only a formalization of the current public interface\n\nNo, this is not how Python typing works. You cannot rely on the type annotations for input checking/marshaling; this still has to be done by code. Type annotations are merely decoration for documentation purposes and static checkers.",
    "created_at": "2022-03-03T19:07:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469922",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:76" align="right">comment:76</div>

Replying to [@tobiasdiez](#comment%3A74):
> Replying to [@mkoeppe](#comment%3A73):
> > And this change is an API change (= introduces a bug).
> > 
> > The argument `tensor_type` does NOT have `Tuple[int, int]` as its input type. It also accepts lists. It marshals the input to a tuple.

> 
> According to the documentation 
> > - ``tensor_type`` -- pair `(k,l)` with `k` being the contravariant rank

>       and `l` the covariant rank
> 
> which is quite clear about that it expects a 2-tuple. 

Well, the code obviously was concerned about making it a tuple to provide a robust interface. 

> Thus, this change is only a formalization of the current public interface

No, this is not how Python typing works. You cannot rely on the type annotations for input checking/marshaling; this still has to be done by code. Type annotations are merely decoration for documentation purposes and static checkers.



---

archive/issue_comments_469923.json:
```json
{
    "body": "Changed commit from **[`4290c24`](https://github.com/sagemath/sagetrac-mirror/commit/4290c246b93db15f99eb683fcbb6b44de326813d)** to **[`b7d121c`](https://github.com/sagemath/sagetrac-mirror/commit/b7d121c6a5c178273069a0fc0b638e41aea86c65)**",
    "created_at": "2022-03-20T13:13:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469923",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4290c24`](https://github.com/sagemath/sagetrac-mirror/commit/4290c246b93db15f99eb683fcbb6b44de326813d)** to **[`b7d121c`](https://github.com/sagemath/sagetrac-mirror/commit/b7d121c6a5c178273069a0fc0b638e41aea86c65)**



---

archive/issue_comments_469924.json:
```json
{
    "body": "<div id=\"comment:77\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8e911a4f3eabc5b6a556fee6444f068886c1d69f\"><code>8e911a4</code></a></td><td><code>Readd tuple</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b7d121c6a5c178273069a0fc0b638e41aea86c65\"><code>b7d121c</code></a></td><td><code>Merge remote-tracking branch 'origin/develop' into public/manifolds/typing</code></td></tr></table>\n",
    "created_at": "2022-03-20T13:13:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469924",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:77"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8e911a4f3eabc5b6a556fee6444f068886c1d69f"><code>8e911a4</code></a></td><td><code>Readd tuple</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b7d121c6a5c178273069a0fc0b638e41aea86c65"><code>b7d121c</code></a></td><td><code>Merge remote-tracking branch 'origin/develop' into public/manifolds/typing</code></td></tr></table>




---

archive/issue_events_406729.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-03-20T16:23:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406729"
}
```



---

archive/issue_events_406730.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-03-20T16:23:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406730"
}
```



---

archive/issue_comments_469925.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\nI think these changes are not good. They are obscuring the internal data representation\n\n```\n@@ -847,11 +847,11 @@ class TopologicalSubmanifold(TopologicalManifold):\n              3-dimensional topological manifold M\n \n         \"\"\"\n-        if not self._immersed:\n+        if not self._immersed or not self._immersion:\n             raise ValueError(\"the submanifold is not immersed\")\n         return self._immersion\n\n[...] \n@@ -873,7 +873,7 @@ class TopologicalSubmanifold(TopologicalManifold):\n              3-dimensional topological manifold M\n \n         \"\"\"\n-        if not self._embedded:\n+        if not self._embedded or not self._immersion:\n             raise ValueError(\"the submanifold is not embedded\")\n         return self._immersion\n \n```",
    "created_at": "2022-03-20T16:54:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469925",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:79" align="right">comment:79</div>

I think these changes are not good. They are obscuring the internal data representation

```
@@ -847,11 +847,11 @@ class TopologicalSubmanifold(TopologicalManifold):
              3-dimensional topological manifold M
 
         """
-        if not self._immersed:
+        if not self._immersed or not self._immersion:
             raise ValueError("the submanifold is not immersed")
         return self._immersion

[...] 
@@ -873,7 +873,7 @@ class TopologicalSubmanifold(TopologicalManifold):
              3-dimensional topological manifold M
 
         """
-        if not self._embedded:
+        if not self._embedded or not self._immersion:
             raise ValueError("the submanifold is not embedded")
         return self._immersion
 
```



---

archive/issue_comments_469926.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">comment:80</div>\n\nI'm personally in favor of these changes (the 80 character limit is a bit inflexible when module names or identifiers are already 40-ish characters long), but probably @egourgoulhon should indicate whether these formatting changes are acceptable / welcome.\n\n```\n@@ -647,8 +654,8 @@ class VectorFieldModule(UniqueRepresentation, Parent):\n             for more examples and documentation.\n \n         \"\"\"\n-        from sage.manifolds.differentiable.diff_form_module import \\\n-                                                                 DiffFormModule\n+        from sage.manifolds.differentiable.diff_form_module import DiffFormModule\n+\n         if p == 0:\n             return self._ring\n         if p not in self._dual_exterior_powers:\n```",
    "created_at": "2022-03-20T16:57:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469926",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:80" align="right">comment:80</div>

I'm personally in favor of these changes (the 80 character limit is a bit inflexible when module names or identifiers are already 40-ish characters long), but probably @egourgoulhon should indicate whether these formatting changes are acceptable / welcome.

```
@@ -647,8 +654,8 @@ class VectorFieldModule(UniqueRepresentation, Parent):
             for more examples and documentation.
 
         """
-        from sage.manifolds.differentiable.diff_form_module import \
-                                                                 DiffFormModule
+        from sage.manifolds.differentiable.diff_form_module import DiffFormModule
+
         if p == 0:
             return self._ring
         if p not in self._dual_exterior_powers:
```



---

archive/issue_comments_469927.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nI don't understand what you mean. How can a submanifold be considered to be immersed/embedded if there is map that provides such an immersion?",
    "created_at": "2022-03-20T17:00:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469927",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:81" align="right">comment:81</div>

I don't understand what you mean. How can a submanifold be considered to be immersed/embedded if there is map that provides such an immersion?



---

archive/issue_comments_469928.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\nIt is an invariant of the internal representation (data structure) that `_immersed or _embedded` implies that `_immersion` is set.",
    "created_at": "2022-03-20T18:58:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469928",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:82" align="right">comment:82</div>

It is an invariant of the internal representation (data structure) that `_immersed or _embedded` implies that `_immersion` is set.



---

archive/issue_comments_469929.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">comment:83</div>\n\nReplying to [@mkoeppe](#comment%3A82):\n> It is an invariant of the internal representation (data structure) that `_immersed or _embedded` implies that `_immersion` is set.\n\nBut that's not something a static checker could infer and thus they warn that `return self._immersion` might return null although the method is decorated to always return a continuous map.",
    "created_at": "2022-03-20T19:39:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469929",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:83" align="right">comment:83</div>

Replying to [@mkoeppe](#comment%3A82):
> It is an invariant of the internal representation (data structure) that `_immersed or _embedded` implies that `_immersion` is set.

But that's not something a static checker could infer and thus they warn that `return self._immersion` might return null although the method is decorated to always return a continuous map.



---

archive/issue_comments_469930.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\nIt may be a use case for an `assert _immersion` here. If the static checker still can't infer it after that, get a better one",
    "created_at": "2022-03-20T19:41:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469930",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:84" align="right">comment:84</div>

It may be a use case for an `assert _immersion` here. If the static checker still can't infer it after that, get a better one



---

archive/issue_comments_469931.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\nReplying to [@mkoeppe](#comment%3A84):\n> It may be a use case for an `assert _immersion` here. If the static checker still can't infer it after that, get a better one\n\nBut that's what the above code is doing (except for displaying a nicer error message in the case its null). What a type checker cannot infer is the \"invariant of the internal representation\" that `_immersed is true` implies that `_immersion is not null`. There are workarounds for such implications for type checkers but they are overkill in this situation.",
    "created_at": "2022-03-20T19:46:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469931",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:85" align="right">comment:85</div>

Replying to [@mkoeppe](#comment%3A84):
> It may be a use case for an `assert _immersion` here. If the static checker still can't infer it after that, get a better one

But that's what the above code is doing (except for displaying a nicer error message in the case its null). What a type checker cannot infer is the "invariant of the internal representation" that `_immersed is true` implies that `_immersion is not null`. There are workarounds for such implications for type checkers but they are overkill in this situation.



---

archive/issue_comments_469932.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">comment:86</div>\n\nNo, your changes weaken the invariant, indicating to developers that it's OK to set `_immersed` to `True` and `_immersion` to `None`.",
    "created_at": "2022-03-20T19:50:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469932",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:86" align="right">comment:86</div>

No, your changes weaken the invariant, indicating to developers that it's OK to set `_immersed` to `True` and `_immersion` to `None`.



---

archive/issue_comments_469933.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">comment:87</div>\n\nWould it be okay if I completely replace the `_immersed` variable with checks if `_immersion` is None? As you indirectly noticed, keeping the internal state consistent just creates an unnecessary overhead.",
    "created_at": "2022-03-20T20:08:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469933",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:87" align="right">comment:87</div>

Would it be okay if I completely replace the `_immersed` variable with checks if `_immersion` is None? As you indirectly noticed, keeping the internal state consistent just creates an unnecessary overhead.



---

archive/issue_comments_469934.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">comment:88</div>\n\nTry `assert` if you haven't yet.",
    "created_at": "2022-03-20T20:10:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469934",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:88" align="right">comment:88</div>

Try `assert` if you haven't yet.



---

archive/issue_comments_469935.json:
```json
{
    "body": "Changed commit from **[`b7d121c`](https://github.com/sagemath/sagetrac-mirror/commit/b7d121c6a5c178273069a0fc0b638e41aea86c65)** to **[`3dd340d`](https://github.com/sagemath/sagetrac-mirror/commit/3dd340d3c6e6c80ff1e5e576632aae61dff6b228)**",
    "created_at": "2022-03-20T21:08:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469935",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b7d121c`](https://github.com/sagemath/sagetrac-mirror/commit/b7d121c6a5c178273069a0fc0b638e41aea86c65)** to **[`3dd340d`](https://github.com/sagemath/sagetrac-mirror/commit/3dd340d3c6e6c80ff1e5e576632aae61dff6b228)**



---

archive/issue_comments_469936.json:
```json
{
    "body": "<div id=\"comment:89\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3dd340d3c6e6c80ff1e5e576632aae61dff6b228\"><code>3dd340d</code></a></td><td><code>Use assert</code></td></tr></table>\n",
    "created_at": "2022-03-20T21:08:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469936",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:89"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3dd340d3c6e6c80ff1e5e576632aae61dff6b228"><code>3dd340d</code></a></td><td><code>Use assert</code></td></tr></table>




---

archive/issue_comments_469937.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">comment:90</div>\n\nTo separate the changes that the ticket promises from the reformatting, I'd recommend `git merge 9.6.beta5 && git reset 9.6.beta5 && git add -p`.",
    "created_at": "2022-03-20T21:25:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469937",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:90" align="right">comment:90</div>

To separate the changes that the ticket promises from the reformatting, I'd recommend `git merge 9.6.beta5 && git reset 9.6.beta5 && git add -p`.



---

archive/issue_comments_469938.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">comment:91</div>\n\nJust tried it on gitpod: merge: 9.6.beta5 - not something we can merge",
    "created_at": "2022-03-20T21:31:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469938",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:91" align="right">comment:91</div>

Just tried it on gitpod: merge: 9.6.beta5 - not something we can merge



---

archive/issue_comments_469939.json:
```json
{
    "body": "<div id=\"comment:92\" align=\"right\">comment:92</div>\n\nFetch it first: `git fetch trac 9.6.beta5`",
    "created_at": "2022-03-20T21:35:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469939",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:92" align="right">comment:92</div>

Fetch it first: `git fetch trac 9.6.beta5`



---

archive/issue_comments_469940.json:
```json
{
    "body": "Changed commit from **[`3dd340d`](https://github.com/sagemath/sagetrac-mirror/commit/3dd340d3c6e6c80ff1e5e576632aae61dff6b228)** to **[`0a52165`](https://github.com/sagemath/sagetrac-mirror/commit/0a521654d98ce20d8d5a24cb8f869a71f06a4767)**",
    "created_at": "2022-03-20T22:01:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469940",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3dd340d`](https://github.com/sagemath/sagetrac-mirror/commit/3dd340d3c6e6c80ff1e5e576632aae61dff6b228)** to **[`0a52165`](https://github.com/sagemath/sagetrac-mirror/commit/0a521654d98ce20d8d5a24cb8f869a71f06a4767)**



---

archive/issue_comments_469941.json:
```json
{
    "body": "<div id=\"comment:93\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0a521654d98ce20d8d5a24cb8f869a71f06a4767\"><code>0a52165</code></a></td><td><code>Add a bit of typing to manifold code</code></td></tr></table>\n",
    "created_at": "2022-03-20T22:01:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469941",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:93"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0a521654d98ce20d8d5a24cb8f869a71f06a4767"><code>0a52165</code></a></td><td><code>Add a bit of typing to manifold code</code></td></tr></table>




---

archive/issue_comments_469942.json:
```json
{
    "body": "<div id=\"comment:94\" align=\"right\">comment:94</div>\n\nThat also don't work, but I've managed to revert (most of) the formatting changes now. Still don't understand why its worth that we both spend more time discussing this than it would to have been to review.",
    "created_at": "2022-03-20T22:03:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469942",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:94" align="right">comment:94</div>

That also don't work, but I've managed to revert (most of) the formatting changes now. Still don't understand why its worth that we both spend more time discussing this than it would to have been to review.



---

archive/issue_comments_469943.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">comment:95</div>\n\nI think time would be well spent on some git practice...",
    "created_at": "2022-03-20T22:06:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469943",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:95" align="right">comment:95</div>

I think time would be well spent on some git practice...



---

archive/issue_events_406731.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-20T22:09:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406731"
}
```



---

archive/issue_events_406732.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-20T22:09:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406732"
}
```



---

archive/issue_comments_469944.json:
```json
{
    "body": "<div id=\"comment:96\" align=\"right\">comment:96</div>\n\nPlease learn to use `git reset` and `git add -p` and prepare a ticket that only changes what needs to be changed. [comment:69](#comment%3A69) still unaddressed.",
    "created_at": "2022-03-20T22:09:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469944",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:96" align="right">comment:96</div>

Please learn to use `git reset` and `git add -p` and prepare a ticket that only changes what needs to be changed. [comment:69](#comment%3A69) still unaddressed.



---

archive/issue_comments_469945.json:
```json
{
    "body": "<div id=\"comment:97\" align=\"right\">comment:97</div>\n\nReplying to [@tobiasdiez](#comment%3A94):\n> Still don't understand why its worth that we both spend more time discussing this than it would to have been to review. \n\nThen please prepare a focused ticket instead of forcing reviewers to look at all that stuff.",
    "created_at": "2022-03-20T22:11:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469945",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:97" align="right">comment:97</div>

Replying to [@tobiasdiez](#comment%3A94):
> Still don't understand why its worth that we both spend more time discussing this than it would to have been to review. 

Then please prepare a focused ticket instead of forcing reviewers to look at all that stuff.



---

archive/issue_comments_469946.json:
```json
{
    "body": "<div id=\"comment:98\" align=\"right\">comment:98</div>\n\nReplying to [@mkoeppe](#comment%3A95):\n> I think time would be well spent on some git practice...\n\nThanks for this very constructive and helpful comment. Definitely motivated me to not spend any more time in reverting formatting changes.\n\nIf you really think its worth the time to extract the homogenization of quotes around strings in 3 lines to a new ticket, please be my guest.",
    "created_at": "2022-03-20T22:16:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469946",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:98" align="right">comment:98</div>

Replying to [@mkoeppe](#comment%3A95):
> I think time would be well spent on some git practice...

Thanks for this very constructive and helpful comment. Definitely motivated me to not spend any more time in reverting formatting changes.

If you really think its worth the time to extract the homogenization of quotes around strings in 3 lines to a new ticket, please be my guest.



---

archive/issue_comments_469947.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">comment:99</div>\n\nThere's no need for a new ticket because the change is not an improvement.",
    "created_at": "2022-03-20T22:19:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469947",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:99" align="right">comment:99</div>

There's no need for a new ticket because the change is not an improvement.



---

archive/issue_comments_469948.json:
```json
{
    "body": "<div id=\"comment:100\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c3239f7e07180b53e3958b8e6e99976f91b46ad3\"><code>c3239f7</code></a></td><td><code>Add a bit of typing to manifold code</code></td></tr></table>\n",
    "created_at": "2022-03-20T22:25:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469948",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:100"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c3239f7e07180b53e3958b8e6e99976f91b46ad3"><code>c3239f7</code></a></td><td><code>Add a bit of typing to manifold code</code></td></tr></table>




---

archive/issue_comments_469949.json:
```json
{
    "body": "Changed commit from **[`0a52165`](https://github.com/sagemath/sagetrac-mirror/commit/0a521654d98ce20d8d5a24cb8f869a71f06a4767)** to **[`c3239f7`](https://github.com/sagemath/sagetrac-mirror/commit/c3239f7e07180b53e3958b8e6e99976f91b46ad3)**",
    "created_at": "2022-03-20T22:25:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469949",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0a52165`](https://github.com/sagemath/sagetrac-mirror/commit/0a521654d98ce20d8d5a24cb8f869a71f06a4767)** to **[`c3239f7`](https://github.com/sagemath/sagetrac-mirror/commit/c3239f7e07180b53e3958b8e6e99976f91b46ad3)**



---

archive/issue_comments_469950.json:
```json
{
    "body": "<div id=\"comment:101\" align=\"right\">comment:101</div>\n\nReplying to [@tobiasdiez](#comment%3A98):\n> please be my guest.\n\nhere we go",
    "created_at": "2022-03-20T22:26:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469950",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:101" align="right">comment:101</div>

Replying to [@tobiasdiez](#comment%3A98):
> please be my guest.

here we go



---

archive/issue_events_406733.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-20T22:26:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406733"
}
```



---

archive/issue_events_406734.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-20T22:26:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406734"
}
```



---

archive/issue_comments_469951.json:
```json
{
    "body": "<div id=\"comment:103\" align=\"right\">comment:103</div>\n\nThis is now focused on the change described on the ticket, so I can review it without needing to consult with the original authors regarding style changes (comment:80).",
    "created_at": "2022-03-20T22:35:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469951",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:103" align="right">comment:103</div>

This is now focused on the change described on the ticket, so I can review it without needing to consult with the original authors regarding style changes (comment:80).



---

archive/issue_comments_469952.json:
```json
{
    "body": "<div id=\"comment:104\" align=\"right\">comment:104</div>\n\nReplying to [@tobiasdiez](#comment%3A94):\n> why its worth that we both spend more time discussing this\n\nThere's no need to worry about my time - I'm investing it for the long term benefits.",
    "created_at": "2022-03-20T22:47:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469952",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:104" align="right">comment:104</div>

Replying to [@tobiasdiez](#comment%3A94):
> why its worth that we both spend more time discussing this

There's no need to worry about my time - I'm investing it for the long term benefits.



---

archive/issue_comments_469953.json:
```json
{
    "body": "Reviewer: **Matthias Koeppe**",
    "created_at": "2022-03-20T22:59:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469953",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Matthias Koeppe**



---

archive/issue_comments_469954.json:
```json
{
    "body": "<div id=\"comment:106\" align=\"right\">comment:106</div>\n\nOK, `./sage -tox -e pyright src/sage/manifolds/topological_submanifold.py` (#30411) does not report additional failures introduced here, so it looks like the solution with `assert` worked.",
    "created_at": "2022-03-20T23:11:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469954",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:106" align="right">comment:106</div>

OK, `./sage -tox -e pyright src/sage/manifolds/topological_submanifold.py` (#30411) does not report additional failures introduced here, so it looks like the solution with `assert` worked.



---

archive/issue_comments_469955.json:
```json
{
    "body": "<div id=\"comment:107\" align=\"right\">comment:107</div>\n\nI've also successfully tested `./sage -tp --long src/sage/manifolds/` with python 3.7.",
    "created_at": "2022-03-21T00:09:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469955",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:107" align="right">comment:107</div>

I've also successfully tested `./sage -tp --long src/sage/manifolds/` with python 3.7.



---

archive/issue_events_406735.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-21T00:09:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406735"
}
```



---

archive/issue_events_406736.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-21T00:09:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406736"
}
```



---

archive/issue_comments_469956.json:
```json
{
    "body": "<div id=\"comment:108\" align=\"right\">comment:108</div>\n\nThanks for this contribution.",
    "created_at": "2022-03-21T00:09:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469956",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:108" align="right">comment:108</div>

Thanks for this contribution.



---

archive/issue_comments_469957.json:
```json
{
    "body": "<div id=\"comment:109\" align=\"right\">comment:109</div>\n\nThanks",
    "created_at": "2022-03-21T09:50:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469957",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:109" align="right">comment:109</div>

Thanks



---

archive/issue_comments_469958.json:
```json
{
    "body": "<div id=\"comment:110\" align=\"right\">comment:110</div>\n\nWhy do we have doc changes in here such as:\n\n```diff\n-    the *vector field module* `\\mathfrak{X}(U,\\Phi)` is the set of\n+    the *vector field module* `\\mathfrak{X}(U,\\Phi) = \\Gamma(\\Phi^* TM)` is the set of\n```\n\nThis should not be part of this ticket, should it?\n\nI agree that the doc could use some upgrades, but I suggest we do that in another ticket, and then thoroughly.",
    "created_at": "2022-03-21T10:24:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469958",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:110" align="right">comment:110</div>

Why do we have doc changes in here such as:

```diff
-    the *vector field module* `\mathfrak{X}(U,\Phi)` is the set of
+    the *vector field module* `\mathfrak{X}(U,\Phi) = \Gamma(\Phi^* TM)` is the set of
```

This should not be part of this ticket, should it?

I agree that the doc could use some upgrades, but I suggest we do that in another ticket, and then thoroughly.



---

archive/issue_events_406737.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2022-03-21T10:24:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406737"
}
```



---

archive/issue_events_406738.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2022-03-21T10:24:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406738"
}
```



---

archive/issue_comments_469959.json:
```json
{
    "body": "<div id=\"comment:111\" align=\"right\">comment:111</div>\n\nHere's the corresponding follow-up: #33542",
    "created_at": "2022-03-21T10:35:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469959",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:111" align="right">comment:111</div>

Here's the corresponding follow-up: #33542



---

archive/issue_comments_469960.json:
```json
{
    "body": "Changed commit from **[`c3239f7`](https://github.com/sagemath/sagetrac-mirror/commit/c3239f7e07180b53e3958b8e6e99976f91b46ad3)** to **[`10bdad9`](https://github.com/sagemath/sagetrac-mirror/commit/10bdad975caba590cd96cbbad73f3473346435a5)**",
    "created_at": "2022-03-21T11:34:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469960",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c3239f7`](https://github.com/sagemath/sagetrac-mirror/commit/c3239f7e07180b53e3958b8e6e99976f91b46ad3)** to **[`10bdad9`](https://github.com/sagemath/sagetrac-mirror/commit/10bdad975caba590cd96cbbad73f3473346435a5)**



---

archive/issue_comments_469961.json:
```json
{
    "body": "<div id=\"comment:112\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/10bdad975caba590cd96cbbad73f3473346435a5\"><code>10bdad9</code></a></td><td><code>Add a bit of typing to manifold code</code></td></tr></table>\n",
    "created_at": "2022-03-21T11:34:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469961",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:112"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/10bdad975caba590cd96cbbad73f3473346435a5"><code>10bdad9</code></a></td><td><code>Add a bit of typing to manifold code</code></td></tr></table>




---

archive/issue_events_406739.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-21T11:35:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406739"
}
```



---

archive/issue_events_406740.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-21T11:35:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406740"
}
```



---

archive/issue_comments_469962.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1 @@\n-This PR adds a bit of typing information to some of the methods in the manifolds module that I added while browsing the code. If these types of changes are ok, I'll add further typing information as I proceed understanding the code.\n-\n-Moreover, a few very minor clarifications to the documentation were added as well.\n+This PR adds a bit of typing information to some of the methods in the manifolds module.\n``````\n",
    "created_at": "2022-03-21T11:35:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469962",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1 @@
-This PR adds a bit of typing information to some of the methods in the manifolds module that I added while browsing the code. If these types of changes are ok, I'll add further typing information as I proceed understanding the code.
-
-Moreover, a few very minor clarifications to the documentation were added as well.
+This PR adds a bit of typing information to some of the methods in the manifolds module.
``````




---

archive/issue_comments_469963.json:
```json
{
    "body": "Changed reviewer from **Matthias Koeppe** to **Matthias Koeppe, ...**",
    "created_at": "2022-03-21T11:35:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469963",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **Matthias Koeppe** to **Matthias Koeppe, ...**



---

archive/issue_comments_469964.json:
```json
{
    "body": "<div id=\"comment:114\" align=\"right\">comment:114</div>\n\nI've reduced the scope of the ticket as requested",
    "created_at": "2022-03-21T11:36:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469964",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:114" align="right">comment:114</div>

I've reduced the scope of the ticket as requested



---

archive/issue_comments_469965.json:
```json
{
    "body": "<div id=\"comment:115\" align=\"right\">comment:115</div>\n\nThe documentation changes are now on #33542.",
    "created_at": "2022-03-21T11:39:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469965",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:115" align="right">comment:115</div>

The documentation changes are now on #33542.



---

archive/issue_comments_469966.json:
```json
{
    "body": "<div id=\"comment:116\" align=\"right\">comment:116</div>\n\nI really don't like the extra imports like\n\n```diff\n+ from sage.tensor.modules.free_module_basis import FreeModuleBasis\n```\nin `src/sage/tensor/modules/free_module_tensor.py`. They are used only for type checking. On a pure Python side, they make the code more complicated (and potentially slower) for nothing. Do we have a policy at the level of all Sage for this?",
    "created_at": "2022-03-21T17:43:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469966",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:116" align="right">comment:116</div>

I really don't like the extra imports like

```diff
+ from sage.tensor.modules.free_module_basis import FreeModuleBasis
```
in `src/sage/tensor/modules/free_module_tensor.py`. They are used only for type checking. On a pure Python side, they make the code more complicated (and potentially slower) for nothing. Do we have a policy at the level of all Sage for this?



---

archive/issue_comments_469967.json:
```json
{
    "body": "<div id=\"comment:117\" align=\"right\">comment:117</div>\n\nWe can move them into `if TYPE_CHECKING:` blocks.",
    "created_at": "2022-03-21T20:02:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469967",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:117" align="right">comment:117</div>

We can move them into `if TYPE_CHECKING:` blocks.



---

archive/issue_comments_469968.json:
```json
{
    "body": "<div id=\"comment:118\" align=\"right\">comment:118</div>\n\nI believe this the currently preferred solution, at least until https://peps.python.org/pep-0649/ hits. I don't think we need a Sage-specific policy on this.",
    "created_at": "2022-03-21T20:05:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469968",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:118" align="right">comment:118</div>

I believe this the currently preferred solution, at least until https://peps.python.org/pep-0649/ hits. I don't think we need a Sage-specific policy on this.



---

archive/issue_comments_469969.json:
```json
{
    "body": "<div id=\"comment:119\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a3905b5e1000496963225f17031a910cc7ffef17\"><code>a3905b5</code></a></td><td><code>src/sage/tensor/modules/free_module_tensor.py: Conditionalize an import with 'if TYPE_CHECKING:', add 'from `__future__` import annotations'</code></td></tr></table>\n",
    "created_at": "2022-03-21T20:09:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469969",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:119"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a3905b5e1000496963225f17031a910cc7ffef17"><code>a3905b5</code></a></td><td><code>src/sage/tensor/modules/free_module_tensor.py: Conditionalize an import with 'if TYPE_CHECKING:', add 'from `__future__` import annotations'</code></td></tr></table>




---

archive/issue_comments_469970.json:
```json
{
    "body": "Changed commit from **[`10bdad9`](https://github.com/sagemath/sagetrac-mirror/commit/10bdad975caba590cd96cbbad73f3473346435a5)** to **[`a3905b5`](https://github.com/sagemath/sagetrac-mirror/commit/a3905b5e1000496963225f17031a910cc7ffef17)**",
    "created_at": "2022-03-21T20:09:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469970",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`10bdad9`](https://github.com/sagemath/sagetrac-mirror/commit/10bdad975caba590cd96cbbad73f3473346435a5)** to **[`a3905b5`](https://github.com/sagemath/sagetrac-mirror/commit/a3905b5e1000496963225f17031a910cc7ffef17)**



---

archive/issue_comments_469971.json:
```json
{
    "body": "<div id=\"comment:120\" align=\"right\">comment:120</div>\n\nReplying to [@mkoeppe](#comment%3A117):\n> We can move them into `if TYPE_CHECKING:` blocks.\n\nYes, at least this would be consistent with other parts of the code introduced in this ticket where `if TYPE_CHECKING:` is used.",
    "created_at": "2022-03-21T20:11:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469971",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:120" align="right">comment:120</div>

Replying to [@mkoeppe](#comment%3A117):
> We can move them into `if TYPE_CHECKING:` blocks.

Yes, at least this would be consistent with other parts of the code introduced in this ticket where `if TYPE_CHECKING:` is used.



---

archive/issue_comments_469972.json:
```json
{
    "body": "<div id=\"comment:121\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b2a68dc74673077d9d40ff287c7f01400a2b1985\"><code>b2a68dc</code></a></td><td><code>src/sage/manifolds/differentiable/manifold.py: Conditionalize imports with 'if TYPE_CHECKING:'</code></td></tr></table>\n",
    "created_at": "2022-03-21T20:14:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469972",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:121"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b2a68dc74673077d9d40ff287c7f01400a2b1985"><code>b2a68dc</code></a></td><td><code>src/sage/manifolds/differentiable/manifold.py: Conditionalize imports with 'if TYPE_CHECKING:'</code></td></tr></table>




---

archive/issue_comments_469973.json:
```json
{
    "body": "Changed commit from **[`a3905b5`](https://github.com/sagemath/sagetrac-mirror/commit/a3905b5e1000496963225f17031a910cc7ffef17)** to **[`b2a68dc`](https://github.com/sagemath/sagetrac-mirror/commit/b2a68dc74673077d9d40ff287c7f01400a2b1985)**",
    "created_at": "2022-03-21T20:14:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469973",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a3905b5`](https://github.com/sagemath/sagetrac-mirror/commit/a3905b5e1000496963225f17031a910cc7ffef17)** to **[`b2a68dc`](https://github.com/sagemath/sagetrac-mirror/commit/b2a68dc74673077d9d40ff287c7f01400a2b1985)**



---

archive/issue_comments_469974.json:
```json
{
    "body": "<div id=\"comment:122\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2061a5033457dd1ffd6f4aad3b5f4bbde3ace65f\"><code>2061a50</code></a></td><td><code>src/sage/manifolds/differentiable/degenerate.py: Conditionalize an import with 'if TYPE_CHECKING:'</code></td></tr></table>\n",
    "created_at": "2022-03-21T20:15:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469974",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:122"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2061a5033457dd1ffd6f4aad3b5f4bbde3ace65f"><code>2061a50</code></a></td><td><code>src/sage/manifolds/differentiable/degenerate.py: Conditionalize an import with 'if TYPE_CHECKING:'</code></td></tr></table>




---

archive/issue_comments_469975.json:
```json
{
    "body": "Changed commit from **[`b2a68dc`](https://github.com/sagemath/sagetrac-mirror/commit/b2a68dc74673077d9d40ff287c7f01400a2b1985)** to **[`2061a50`](https://github.com/sagemath/sagetrac-mirror/commit/2061a5033457dd1ffd6f4aad3b5f4bbde3ace65f)**",
    "created_at": "2022-03-21T20:15:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469975",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b2a68dc`](https://github.com/sagemath/sagetrac-mirror/commit/b2a68dc74673077d9d40ff287c7f01400a2b1985)** to **[`2061a50`](https://github.com/sagemath/sagetrac-mirror/commit/2061a5033457dd1ffd6f4aad3b5f4bbde3ace65f)**



---

archive/issue_comments_469976.json:
```json
{
    "body": "Changed commit from **[`2061a50`](https://github.com/sagemath/sagetrac-mirror/commit/2061a5033457dd1ffd6f4aad3b5f4bbde3ace65f)** to **[`056a69d`](https://github.com/sagemath/sagetrac-mirror/commit/056a69dbffe57c7b866cfc622556645c82b2afc5)**",
    "created_at": "2022-03-21T20:19:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469976",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2061a50`](https://github.com/sagemath/sagetrac-mirror/commit/2061a5033457dd1ffd6f4aad3b5f4bbde3ace65f)** to **[`056a69d`](https://github.com/sagemath/sagetrac-mirror/commit/056a69dbffe57c7b866cfc622556645c82b2afc5)**



---

archive/issue_comments_469977.json:
```json
{
    "body": "<div id=\"comment:123\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/056a69dbffe57c7b866cfc622556645c82b2afc5\"><code>056a69d</code></a></td><td><code>src/sage/manifolds/differentiable/degenerate_submanifold.py: Conditionalize an import with 'if TYPE_CHECKING:'</code></td></tr></table>\n",
    "created_at": "2022-03-21T20:19:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469977",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:123"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/056a69dbffe57c7b866cfc622556645c82b2afc5"><code>056a69d</code></a></td><td><code>src/sage/manifolds/differentiable/degenerate_submanifold.py: Conditionalize an import with 'if TYPE_CHECKING:'</code></td></tr></table>




---

archive/issue_comments_469978.json:
```json
{
    "body": "<div id=\"comment:124\" align=\"right\">comment:124</div>\n\nThere's also one file that still manually string-quotes types instead of relying on `from `__future__` import annotations`.",
    "created_at": "2022-03-21T20:21:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469978",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:124" align="right">comment:124</div>

There's also one file that still manually string-quotes types instead of relying on `from `__future__` import annotations`.



---

archive/issue_comments_469979.json:
```json
{
    "body": "<div id=\"comment:125\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f813f3c8e852a1ca33f9ccbc61eb20d4fbc3a249\"><code>f813f3c</code></a></td><td><code>src/sage/manifolds/differentiable/tensorfield.py: Don't string-quote types</code></td></tr></table>\n",
    "created_at": "2022-03-21T20:26:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469979",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:125"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f813f3c8e852a1ca33f9ccbc61eb20d4fbc3a249"><code>f813f3c</code></a></td><td><code>src/sage/manifolds/differentiable/tensorfield.py: Don't string-quote types</code></td></tr></table>




---

archive/issue_comments_469980.json:
```json
{
    "body": "Changed commit from **[`056a69d`](https://github.com/sagemath/sagetrac-mirror/commit/056a69dbffe57c7b866cfc622556645c82b2afc5)** to **[`f813f3c`](https://github.com/sagemath/sagetrac-mirror/commit/f813f3c8e852a1ca33f9ccbc61eb20d4fbc3a249)**",
    "created_at": "2022-03-21T20:26:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469980",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`056a69d`](https://github.com/sagemath/sagetrac-mirror/commit/056a69dbffe57c7b866cfc622556645c82b2afc5)** to **[`f813f3c`](https://github.com/sagemath/sagetrac-mirror/commit/f813f3c8e852a1ca33f9ccbc61eb20d4fbc3a249)**



---

archive/issue_comments_469981.json:
```json
{
    "body": "<div id=\"comment:126\" align=\"right\">comment:126</div>\n\nReady now, I think. \n\nThe patch is still bigger than really necessary as a result of Tobias's tool alphabetically sorting the imports.\n\nAlso the formatting of the typed argument lists uses a mix of styles across the file.",
    "created_at": "2022-03-21T20:35:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469981",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:126" align="right">comment:126</div>

Ready now, I think. 

The patch is still bigger than really necessary as a result of Tobias's tool alphabetically sorting the imports.

Also the formatting of the typed argument lists uses a mix of styles across the file.



---

archive/issue_comments_469982.json:
```json
{
    "body": "<div id=\"comment:127\" align=\"right\">comment:127</div>\n\nTests still OK with Python 3.7",
    "created_at": "2022-03-21T20:52:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469982",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:127" align="right">comment:127</div>

Tests still OK with Python 3.7



---

archive/issue_events_406741.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-03-28T10:37:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406741"
}
```



---

archive/issue_events_406742.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-03-28T10:37:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406742"
}
```



---

archive/issue_comments_469983.json:
```json
{
    "body": "<div id=\"comment:128\" align=\"right\">comment:128</div>\n\nAs all remarks seem to be addressed, Matthias is fine with my changes and I'm with his, I'll set it back to positively reviewed.",
    "created_at": "2022-03-28T10:37:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469983",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:128" align="right">comment:128</div>

As all remarks seem to be addressed, Matthias is fine with my changes and I'm with his, I'll set it back to positively reviewed.



---

archive/issue_comments_469984.json:
```json
{
    "body": "Changed reviewer from **Matthias Koeppe, ...** to **Matthias Koeppe, Tobias Diez**",
    "created_at": "2022-03-28T10:37:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469984",
    "user": "https://github.com/tobiasdiez"
}
```

Changed reviewer from **Matthias Koeppe, ...** to **Matthias Koeppe, Tobias Diez**



---

archive/issue_comments_469985.json:
```json
{
    "body": "<div id=\"comment:129\" align=\"right\">comment:129</div>\n\nThere is a merge failure with Sage 9.6.beta6",
    "created_at": "2022-03-28T10:48:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469985",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:129" align="right">comment:129</div>

There is a merge failure with Sage 9.6.beta6



---

archive/issue_events_406743.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2022-03-28T10:48:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406743"
}
```



---

archive/issue_events_406744.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2022-03-28T10:48:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406744"
}
```



---

archive/issue_comments_469986.json:
```json
{
    "body": "<div id=\"comment:130\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51ee92b98cdb7f7e67fc7a737524b856ba5ca76e\"><code>51ee92b</code></a></td><td><code>Add a bit of typing to manifold code</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/974ec0afd442eb5a162ee0a947dc41de92fd09ec\"><code>974ec0a</code></a></td><td><code>src/sage/tensor/modules/free_module_tensor.py: Conditionalize an import with 'if TYPE_CHECKING:', add 'from `__future__` import annotations'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9905ade3c53aa1473c1ec36fb930e23de723ad82\"><code>9905ade</code></a></td><td><code>src/sage/manifolds/differentiable/manifold.py: Conditionalize imports with 'if TYPE_CHECKING:'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ba751f16e22519baca848b044d214cbb9e7f79ae\"><code>ba751f1</code></a></td><td><code>src/sage/manifolds/differentiable/degenerate.py: Conditionalize an import with 'if TYPE_CHECKING:'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3beb020f68ac2f1a0427f417ba2d030010fbebf9\"><code>3beb020</code></a></td><td><code>src/sage/manifolds/differentiable/degenerate_submanifold.py: Conditionalize an import with 'if TYPE_CHECKING:'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7c18c7f8cd8c123d850e1aeaae25d5e6e37e5cec\"><code>7c18c7f</code></a></td><td><code>src/sage/manifolds/differentiable/tensorfield.py: Don't string-quote types</code></td></tr></table>\n",
    "created_at": "2022-03-28T16:42:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469986",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:130"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51ee92b98cdb7f7e67fc7a737524b856ba5ca76e"><code>51ee92b</code></a></td><td><code>Add a bit of typing to manifold code</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/974ec0afd442eb5a162ee0a947dc41de92fd09ec"><code>974ec0a</code></a></td><td><code>src/sage/tensor/modules/free_module_tensor.py: Conditionalize an import with 'if TYPE_CHECKING:', add 'from `__future__` import annotations'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9905ade3c53aa1473c1ec36fb930e23de723ad82"><code>9905ade</code></a></td><td><code>src/sage/manifolds/differentiable/manifold.py: Conditionalize imports with 'if TYPE_CHECKING:'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ba751f16e22519baca848b044d214cbb9e7f79ae"><code>ba751f1</code></a></td><td><code>src/sage/manifolds/differentiable/degenerate.py: Conditionalize an import with 'if TYPE_CHECKING:'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3beb020f68ac2f1a0427f417ba2d030010fbebf9"><code>3beb020</code></a></td><td><code>src/sage/manifolds/differentiable/degenerate_submanifold.py: Conditionalize an import with 'if TYPE_CHECKING:'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7c18c7f8cd8c123d850e1aeaae25d5e6e37e5cec"><code>7c18c7f</code></a></td><td><code>src/sage/manifolds/differentiable/tensorfield.py: Don't string-quote types</code></td></tr></table>




---

archive/issue_comments_469987.json:
```json
{
    "body": "Changed commit from **[`f813f3c`](https://github.com/sagemath/sagetrac-mirror/commit/f813f3c8e852a1ca33f9ccbc61eb20d4fbc3a249)** to **[`7c18c7f`](https://github.com/sagemath/sagetrac-mirror/commit/7c18c7f8cd8c123d850e1aeaae25d5e6e37e5cec)**",
    "created_at": "2022-03-28T16:42:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469987",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f813f3c`](https://github.com/sagemath/sagetrac-mirror/commit/f813f3c8e852a1ca33f9ccbc61eb20d4fbc3a249)** to **[`7c18c7f`](https://github.com/sagemath/sagetrac-mirror/commit/7c18c7f8cd8c123d850e1aeaae25d5e6e37e5cec)**



---

archive/issue_comments_469988.json:
```json
{
    "body": "<div id=\"comment:131\" align=\"right\">comment:131</div>\n\nrebased",
    "created_at": "2022-03-28T16:42:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469988",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:131" align="right">comment:131</div>

rebased



---

archive/issue_events_406745.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-28T16:42:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406745"
}
```



---

archive/issue_events_406746.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-28T16:42:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406746"
}
```



---

archive/issue_events_406747.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2022-03-29T06:59:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406747"
}
```



---

archive/issue_events_406748.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2022-03-29T06:59:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406748"
}
```



---

archive/issue_comments_469989.json:
```json
{
    "body": "<div id=\"comment:132\" align=\"right\">comment:132</div>\n\nThe patchbot reveals some coverage issue, but this seems to be triggered by the use of `@overload`, hence this is more an issue about the patchbot's `coverage` plugin than about the present code.",
    "created_at": "2022-03-29T06:59:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469989",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:132" align="right">comment:132</div>

The patchbot reveals some coverage issue, but this seems to be triggered by the use of `@overload`, hence this is more an issue about the patchbot's `coverage` plugin than about the present code.



---

archive/issue_comments_469990.json:
```json
{
    "body": "<div id=\"comment:133\" align=\"right\">comment:133</div>\n\nThanks!",
    "created_at": "2022-03-29T08:41:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469990",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:133" align="right">comment:133</div>

Thanks!



---

archive/issue_comments_469991.json:
```json
{
    "body": "Changed reviewer from **Matthias Koeppe, Tobias Diez** to **Matthias Koeppe, Tobias Diez, Eric Gourgoulhon**",
    "created_at": "2022-03-29T18:14:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469991",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **Matthias Koeppe, Tobias Diez** to **Matthias Koeppe, Tobias Diez, Eric Gourgoulhon**



---

archive/issue_comments_469992.json:
```json
{
    "body": "<div id=\"comment:135\" align=\"right\">comment:135</div>\n\nReplying to [@egourgoulhon](#comment%3A132):\n> The patchbot reveals some coverage issue, but this seems\n> to be triggered by the use of `@overload`, hence this is\n> more an issue about the patchbot's `coverage` plugin\n> than about the present code.\n\nMight be worth opening a ticket at\n\n- https://github.com/sagemath/sage-patchbot/issues",
    "created_at": "2022-03-29T19:11:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469992",
    "user": "https://github.com/slel"
}
```

<div id="comment:135" align="right">comment:135</div>

Replying to [@egourgoulhon](#comment%3A132):
> The patchbot reveals some coverage issue, but this seems
> to be triggered by the use of `@overload`, hence this is
> more an issue about the patchbot's `coverage` plugin
> than about the present code.

Might be worth opening a ticket at

- https://github.com/sagemath/sage-patchbot/issues



---

archive/issue_comments_469993.json:
```json
{
    "body": "<div id=\"comment:136\" align=\"right\">comment:136</div>\n\nReplying to [@slel](#comment%3A135):\n> \n> Might be worth opening a ticket at\n> \n> - https://github.com/sagemath/sage-patchbot/issues\n\nThanks for the suggestion; this is now\nhttps://github.com/sagemath/sage-patchbot/issues/161",
    "created_at": "2022-03-30T20:07:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469993",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:136" align="right">comment:136</div>

Replying to [@slel](#comment%3A135):
> 
> Might be worth opening a ticket at
> 
> - https://github.com/sagemath/sage-patchbot/issues

Thanks for the suggestion; this is now
https://github.com/sagemath/sage-patchbot/issues/161



---

archive/issue_events_406749.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-04-02T10:52:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406749"
}
```



---

archive/issue_events_406750.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "f4a39b12e3480c563a1f1d013dbf3629ad58e011",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-04-02T10:52:31Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29775#event-406750"
}
```



---

archive/issue_comments_469994.json:
```json
{
    "body": "Changed branch from **[public/manifolds/typing](https://github.com/sagemath/sagetrac-mirror/tree/public/manifolds/typing)** to **[`7c18c7f`](https://github.com/sagemath/sagetrac-mirror/commit/7c18c7f8cd8c123d850e1aeaae25d5e6e37e5cec)**",
    "created_at": "2022-04-02T10:52:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29775",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29775#issuecomment-469994",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/manifolds/typing](https://github.com/sagemath/sagetrac-mirror/tree/public/manifolds/typing)** to **[`7c18c7f`](https://github.com/sagemath/sagetrac-mirror/commit/7c18c7f8cd8c123d850e1aeaae25d5e6e37e5cec)**
