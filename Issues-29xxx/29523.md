# Issue 29523: Sample points exponentially when plotting log-scale graphs

archive/issues_029286.json:
```json
{
    "assignees": [],
    "body": "This patch modifies src/plot/plot.py so that when scale='semilogx' or 'loglog' is specified generate_plot_points() will sample exponentially.  This decreases the number of points necessary for an accurate plot (and also increases the chance that the default number of points will produce an acceptable plot).\n\nDoctests pass on Debian x86-64\n\nSee: https://groups.google.com/d/msgid/sage-devel/7164f726-788d-4718-8ddc-90eba8e858ce%40googlegroups.com?utm_medium=email&utm_source=footer\n\nBranch/Commit: **[7dbeded](https://github.com/sagemath/sagetrac-mirror/commit/7dbededec0ca47fd4cda07e8134aeb67e5bb6818)**\n\nReviewer: **S\u00e9bastien Labb\u00e9**\n\nAuthor: **Blair Mason**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29523_\n\n",
    "closed_at": "2020-06-03T22:28:58Z",
    "created_at": "2020-04-17T17:35:08Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graphics",
        "https://github.com/sagemath/sage/labels/p5%20%E2%80%93%20trivial",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Sample points exponentially when plotting log-scale graphs",
    "type": "issue",
    "updated_at": "2020-06-03T22:28:58Z",
    "url": "https://github.com/sagemath/sage/issues/29523",
    "user": "https://github.com/rbmj"
}
```
This patch modifies src/plot/plot.py so that when scale='semilogx' or 'loglog' is specified generate_plot_points() will sample exponentially.  This decreases the number of points necessary for an accurate plot (and also increases the chance that the default number of points will produce an acceptable plot).

Doctests pass on Debian x86-64

See: https://groups.google.com/d/msgid/sage-devel/7164f726-788d-4718-8ddc-90eba8e858ce%40googlegroups.com?utm_medium=email&utm_source=footer

Branch/Commit: **[7dbeded](https://github.com/sagemath/sagetrac-mirror/commit/7dbededec0ca47fd4cda07e8134aeb67e5bb6818)**

Reviewer: **Sébastien Labbé**

Author: **Blair Mason**

_Issue created by migration from https://trac.sagemath.org/ticket/29523_





---

archive/issue_events_387806.json:
```json
{
    "actor": "https://github.com/rbmj",
    "created_at": "2020-04-17T17:35:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graphics",
    "label_color": "0000ff",
    "label_name": "component: graphics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-387806"
}
```



---

archive/issue_events_387807.json:
```json
{
    "actor": "https://github.com/rbmj",
    "created_at": "2020-04-17T17:35:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "label": "https://github.com/sagemath/sage/labels/p5%20%E2%80%93%20trivial",
    "label_color": "fff9e5",
    "label_name": "p5 \u2013 trivial",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-387807"
}
```



---

archive/issue_events_387808.json:
```json
{
    "actor": "https://github.com/rbmj",
    "created_at": "2020-04-17T17:35:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-387808"
}
```



---

archive/issue_events_387809.json:
```json
{
    "actor": "https://github.com/rbmj",
    "created_at": "2020-04-17T17:35:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "label": "https://github.com/sagemath/sage/labels/feature",
    "label_color": "008080",
    "label_name": "feature",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-387809"
}
```



---

archive/issue_events_387810.json:
```json
{
    "actor": "https://github.com/rbmj",
    "created_at": "2020-04-17T17:40:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-387810"
}
```



---

archive/issue_comments_467196.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nAttachment: **[0001-Add-logarithmic-point-selection-to-generate_plot_poi.patch.gz](https://github.com/sagemath/sage/files/ticket29523/0001-Add-logarithmic-point-selection-to-generate_plot_poi.patch.gz)**",
    "created_at": "2020-04-17T17:40:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-467196",
    "user": "https://github.com/rbmj"
}
```

<a id='comment:1'>Comment 1:</a>
Attachment: **[0001-Add-logarithmic-point-selection-to-generate_plot_poi.patch.gz](https://github.com/sagemath/sage/files/ticket29523/0001-Add-logarithmic-point-selection-to-generate_plot_poi.patch.gz)**



---

archive/issue_comments_467197.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,6 @@\n \n Doctests pass on Debian x86-64\n \n+Trac didn't like me trying to push it a new branch, so patch is attached to the ticket (in git format)\n+\n See: https://groups.google.com/d/msgid/sage-devel/7164f726-788d-4718-8ddc-90eba8e858ce%40googlegroups.com?utm_medium=email&utm_source=footer\n``````\n",
    "created_at": "2020-04-17T17:40:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-467197",
    "user": "https://github.com/rbmj"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,6 @@
 
 Doctests pass on Debian x86-64
 
+Trac didn't like me trying to push it a new branch, so patch is attached to the ticket (in git format)
+
 See: https://groups.google.com/d/msgid/sage-devel/7164f726-788d-4718-8ddc-90eba8e858ce%40googlegroups.com?utm_medium=email&utm_source=footer
``````




---

archive/issue_comments_467198.json:
```json
{
    "body": "Branch: **[u/gh-rbmj/sample_points_exponentially_when_plotting_log_scale_graphs](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-rbmj/sample_points_exponentially_when_plotting_log_scale_graphs)**",
    "created_at": "2020-04-17T17:58:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-467198",
    "user": "https://github.com/rbmj"
}
```

Branch: **[u/gh-rbmj/sample_points_exponentially_when_plotting_log_scale_graphs](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-rbmj/sample_points_exponentially_when_plotting_log_scale_graphs)**



---

archive/issue_comments_467199.json:
```json
{
    "body": "Commit: **[71c02c0](https://github.com/sagemath/sagetrac-mirror/commit/71c02c0e0834f7119b528ff884c584b44308076c)**",
    "created_at": "2020-04-18T21:10:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-467199",
    "user": "https://github.com/slel"
}
```

Commit: **[71c02c0](https://github.com/sagemath/sagetrac-mirror/commit/71c02c0e0834f7119b528ff884c584b44308076c)**



---

archive/issue_comments_467200.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nPossibly related: #15320.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/71c02c0e0834f7119b528ff884c584b44308076c\">71c02c0</a></td><td><code>Add logarithmic point selection to generate_plot_points()</code></td></tr></table>\n",
    "created_at": "2020-04-18T21:10:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-467200",
    "user": "https://github.com/slel"
}
```

<a id='comment:3'>Comment 3:</a>
Possibly related: #15320.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/71c02c0e0834f7119b528ff884c584b44308076c">71c02c0</a></td><td><code>Add logarithmic point selection to generate_plot_points()</code></td></tr></table>




---

archive/issue_comments_467201.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nThanks for working on this issue. I have few comments after reading the branch.\n\n1. I do not agree to change the inside of `generate_plot_points`. I believe it would be cleaner to do the change of variables:\n\n```\n        f = lambda x: f_actual(exp(x))\n        xrange = (log(xrange[0]), log(xrange[1]))\n```\nbefore the call to `generate_plot_point` and then do `generate_plot_point(f,xrange,...)` on the new `f` and `xrange`. Also, the part\n\n```\n    if exp_dist:\n        for i in range(len(data)):\n            data[i] = (exp(data[i][0]), data[i][1])\n```\nwould go outside of the function but after the call to that function. \n\n2. Also, I would use the following for the name of new variables to be more explicit on what they are:\n\n```\n        f_exp = lambda x: f_actual(exp(x))\n        log_xrange = (log(xrange[0]), log(xrange[1]))\n```\n\n3. I suggest to use `is_log_scale` or `log_scale` for the name of the boolean variable and avoid the `if` to define it:\n\n```diff\n-    #check to see if this is a log scale graph on the x axis\n-    exp_points = False\n-    if ('scale' in options.keys() and not parametric and\n-            (options['scale'] == 'loglog' or options['scale'] == 'semilogx')):\n-        exp_points = True\n+    #check to see if this is a log scale graph on the x axis\n+    log_scale = ('scale' in options.keys() and\n+                  not parametric and\n+                  (options['scale'] == 'loglog' or\n+                   options['scale'] == 'semilogx'))\n```\n\n4. I would avoid `exp_dist=exp_points` by using the same name for the variable as for the keyword.\n\n5. You need to add some new doctest showing that the bug is fixed (maybe with a picture). You can look at recent branch from Travis to see how he did to include picture in the doc here: #25796",
    "created_at": "2020-04-24T12:05:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-467201",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:4'>Comment 4:</a>
Thanks for working on this issue. I have few comments after reading the branch.

1. I do not agree to change the inside of `generate_plot_points`. I believe it would be cleaner to do the change of variables:

```
        f = lambda x: f_actual(exp(x))
        xrange = (log(xrange[0]), log(xrange[1]))
```
before the call to `generate_plot_point` and then do `generate_plot_point(f,xrange,...)` on the new `f` and `xrange`. Also, the part

```
    if exp_dist:
        for i in range(len(data)):
            data[i] = (exp(data[i][0]), data[i][1])
```
would go outside of the function but after the call to that function. 

2. Also, I would use the following for the name of new variables to be more explicit on what they are:

```
        f_exp = lambda x: f_actual(exp(x))
        log_xrange = (log(xrange[0]), log(xrange[1]))
```

3. I suggest to use `is_log_scale` or `log_scale` for the name of the boolean variable and avoid the `if` to define it:

```diff
-    #check to see if this is a log scale graph on the x axis
-    exp_points = False
-    if ('scale' in options.keys() and not parametric and
-            (options['scale'] == 'loglog' or options['scale'] == 'semilogx')):
-        exp_points = True
+    #check to see if this is a log scale graph on the x axis
+    log_scale = ('scale' in options.keys() and
+                  not parametric and
+                  (options['scale'] == 'loglog' or
+                   options['scale'] == 'semilogx'))
```

4. I would avoid `exp_dist=exp_points` by using the same name for the variable as for the keyword.

5. You need to add some new doctest showing that the bug is fixed (maybe with a picture). You can look at recent branch from Travis to see how he did to include picture in the doc here: #25796



---

archive/issue_events_387811.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2020-04-24T12:05:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-387811"
}
```



---

archive/issue_events_387812.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2020-04-24T12:05:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-387812"
}
```



---

archive/issue_comments_467202.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nThe Author field is missing (necessary for the release manager to merge the ticket).",
    "created_at": "2020-04-24T12:08:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-467202",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:6'>Comment 6:</a>
The Author field is missing (necessary for the release manager to merge the ticket).



---

archive/issue_comments_467203.json:
```json
{
    "body": "Reviewer: **S\u00e9bastien Labb\u00e9**",
    "created_at": "2020-04-24T12:08:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-467203",
    "user": "https://github.com/seblabbe"
}
```

Reviewer: **Sébastien Labbé**



---

archive/issue_comments_467204.json:
```json
{
    "body": "Changed commit from **[71c02c0](https://github.com/sagemath/sagetrac-mirror/commit/71c02c0e0834f7119b528ff884c584b44308076c)** to **[e8f2f9f](https://github.com/sagemath/sagetrac-mirror/commit/e8f2f9fd7d9ed913c5aff3164faf15d2a543fd00)**",
    "created_at": "2020-05-03T16:12:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-467204",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[71c02c0](https://github.com/sagemath/sagetrac-mirror/commit/71c02c0e0834f7119b528ff884c584b44308076c)** to **[e8f2f9f](https://github.com/sagemath/sagetrac-mirror/commit/e8f2f9fd7d9ed913c5aff3164faf15d2a543fd00)**



---

archive/issue_comments_467205.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e8f2f9fd7d9ed913c5aff3164faf15d2a543fd00\">e8f2f9f</a></td><td><code>Moved exponential sampling to _plot() and added documentation in plot_semilogx()</code></td></tr></table>\n",
    "created_at": "2020-05-03T16:12:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-467205",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:7'>Comment 7:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e8f2f9fd7d9ed913c5aff3164faf15d2a543fd00">e8f2f9f</a></td><td><code>Moved exponential sampling to _plot() and added documentation in plot_semilogx()</code></td></tr></table>




---

archive/issue_comments_467206.json:
```json
{
    "body": "Author: **Blair Mason**",
    "created_at": "2020-05-03T16:18:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-467206",
    "user": "https://github.com/rbmj"
}
```

Author: **Blair Mason**



---

archive/issue_comments_467207.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nIncorporated your suggestions - tests pass and docs build.\n\nAdded one doctest to plot_semilogx() which does not render properly on previous versions of sage - hopefully that is sufficient.  A decent amount of the diff in the last commit is just me reverting my previous changes.\n\nApologize for the delay in updating this!",
    "created_at": "2020-05-03T16:18:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-467207",
    "user": "https://github.com/rbmj"
}
```

<a id='comment:8'>Comment 8:</a>
Incorporated your suggestions - tests pass and docs build.

Added one doctest to plot_semilogx() which does not render properly on previous versions of sage - hopefully that is sufficient.  A decent amount of the diff in the last commit is just me reverting my previous changes.

Apologize for the delay in updating this!



---

archive/issue_events_387813.json:
```json
{
    "actor": "https://github.com/rbmj",
    "created_at": "2020-05-03T16:18:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-387813"
}
```



---

archive/issue_events_387814.json:
```json
{
    "actor": "https://github.com/rbmj",
    "created_at": "2020-05-03T16:18:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-387814"
}
```



---

archive/issue_comments_467208.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,6 +2,4 @@\n \n Doctests pass on Debian x86-64\n \n-Trac didn't like me trying to push it a new branch, so patch is attached to the ticket (in git format)\n-\n See: https://groups.google.com/d/msgid/sage-devel/7164f726-788d-4718-8ddc-90eba8e858ce%40googlegroups.com?utm_medium=email&utm_source=footer\n``````\n",
    "created_at": "2020-05-03T16:18:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-467208",
    "user": "https://github.com/rbmj"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,6 +2,4 @@
 
 Doctests pass on Debian x86-64
 
-Trac didn't like me trying to push it a new branch, so patch is attached to the ticket (in git format)
-
 See: https://groups.google.com/d/msgid/sage-devel/7164f726-788d-4718-8ddc-90eba8e858ce%40googlegroups.com?utm_medium=email&utm_source=footer
``````




---

archive/issue_comments_467209.json:
```json
{
    "body": "Changed commit from **[e8f2f9f](https://github.com/sagemath/sagetrac-mirror/commit/e8f2f9fd7d9ed913c5aff3164faf15d2a543fd00)** to **[bfc9c57](https://github.com/sagemath/sagetrac-mirror/commit/bfc9c572cc65a3de4b0cc3e9d9ade6f022b808f4)**",
    "created_at": "2020-05-07T08:18:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-467209",
    "user": "https://github.com/seblabbe"
}
```

Changed commit from **[e8f2f9f](https://github.com/sagemath/sagetrac-mirror/commit/e8f2f9fd7d9ed913c5aff3164faf15d2a543fd00)** to **[bfc9c57](https://github.com/sagemath/sagetrac-mirror/commit/bfc9c572cc65a3de4b0cc3e9d9ade6f022b808f4)**



---

archive/issue_comments_467210.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nThanks for the changes. No problem for the delay. Same for me, apologize for my delay in answering.\n\nSo, I looked at the code. There were still some modifications I wanted to be made. I allowed myself to make a commit on top of yours.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/894960d899e1cdde5efe71b1cfa0c8cce036e349\">894960d</a></td><td><code>Merge branch 'u/gh-rbmj/sample_points_exponentially_when_plotting_log_scale_graphs' of trac.sagemath.org:sage into 29523</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bfc9c572cc65a3de4b0cc3e9d9ade6f022b808f4\">bfc9c57</a></td><td><code>29523: changes by reviewer</code></td></tr></table>\n",
    "created_at": "2020-05-07T08:18:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-467210",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:9'>Comment 9:</a>
Thanks for the changes. No problem for the delay. Same for me, apologize for my delay in answering.

So, I looked at the code. There were still some modifications I wanted to be made. I allowed myself to make a commit on top of yours.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/894960d899e1cdde5efe71b1cfa0c8cce036e349">894960d</a></td><td><code>Merge branch 'u/gh-rbmj/sample_points_exponentially_when_plotting_log_scale_graphs' of trac.sagemath.org:sage into 29523</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bfc9c572cc65a3de4b0cc3e9d9ade6f022b808f4">bfc9c57</a></td><td><code>29523: changes by reviewer</code></td></tr></table>




---

archive/issue_comments_467211.json:
```json
{
    "body": "Changed branch from **[u/gh-rbmj/sample_points_exponentially_when_plotting_log_scale_graphs](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-rbmj/sample_points_exponentially_when_plotting_log_scale_graphs)** to **[public/29523](https://github.com/sagemath/sagetrac-mirror/tree/public/29523)**",
    "created_at": "2020-05-07T08:18:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-467211",
    "user": "https://github.com/seblabbe"
}
```

Changed branch from **[u/gh-rbmj/sample_points_exponentially_when_plotting_log_scale_graphs](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-rbmj/sample_points_exponentially_when_plotting_log_scale_graphs)** to **[public/29523](https://github.com/sagemath/sagetrac-mirror/tree/public/29523)**



---

archive/issue_comments_467212.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nI confirm that #15320 is fixed by this ticket.",
    "created_at": "2020-05-07T08:28:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-467212",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:10'>Comment 10:</a>
I confirm that #15320 is fixed by this ticket.



---

archive/issue_comments_467213.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nDocumentation builds fine on my side. Issues are fixed. Doctests pass in `src/sage/plot` directory. If you agree with my changes, I let you change the status of ticket to positive review.",
    "created_at": "2020-05-07T09:44:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-467213",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:11'>Comment 11:</a>
Documentation builds fine on my side. Issues are fixed. Doctests pass in `src/sage/plot` directory. If you agree with my changes, I let you change the status of ticket to positive review.



---

archive/issue_comments_467214.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7dbededec0ca47fd4cda07e8134aeb67e5bb6818\">7dbeded</a></td><td><code>29523: same if structure as before</code></td></tr></table>\n",
    "created_at": "2020-05-07T12:10:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-467214",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:12'>Comment 12:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7dbededec0ca47fd4cda07e8134aeb67e5bb6818">7dbeded</a></td><td><code>29523: same if structure as before</code></td></tr></table>




---

archive/issue_comments_467215.json:
```json
{
    "body": "Changed commit from **[bfc9c57](https://github.com/sagemath/sagetrac-mirror/commit/bfc9c572cc65a3de4b0cc3e9d9ade6f022b808f4)** to **[7dbeded](https://github.com/sagemath/sagetrac-mirror/commit/7dbededec0ca47fd4cda07e8134aeb67e5bb6818)**",
    "created_at": "2020-05-07T12:10:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-467215",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[bfc9c57](https://github.com/sagemath/sagetrac-mirror/commit/bfc9c572cc65a3de4b0cc3e9d9ade6f022b808f4)** to **[7dbeded](https://github.com/sagemath/sagetrac-mirror/commit/7dbededec0ca47fd4cda07e8134aeb67e5bb6818)**



---

archive/issue_events_387815.json:
```json
{
    "actor": "https://github.com/rbmj",
    "created_at": "2020-05-07T14:44:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-387815"
}
```



---

archive/issue_events_387816.json:
```json
{
    "actor": "https://github.com/rbmj",
    "created_at": "2020-05-07T14:44:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-387816"
}
```



---

archive/issue_comments_467216.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nLooks good to me, thanks for the review!",
    "created_at": "2020-05-07T14:44:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-467216",
    "user": "https://github.com/rbmj"
}
```

<a id='comment:13'>Comment 13:</a>
Looks good to me, thanks for the review!



---

archive/issue_events_387817.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2020-05-08T14:47:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-387817"
}
```



---

archive/issue_events_387818.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2020-05-08T14:47:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-387818"
}
```



---

archive/issue_comments_467217.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nWhat about the related `show` command on [graphics](http://doc.sagemath.org/html/en/reference/plotting/sage/plot/graphics.html)?  E.g. \n\n```\nsage: G = plot(exp, 1, 10)\nsage: G.show(scale='semiology')\n```\n\nDoes this problem show up there (because if I recall correctly, the `plot` object already has the points computed before `show` is called) after this ticket is applied?\n\n* If not, ignore this and set back to positive review.\n* If so, I see two options, either of which is fine:\n  * Open a new ticket for that (default)\n  * Put this ticket back to needs work and fix it (if there is some pretty easy fix)\n\nThanks so much for fixing this.  We spent a lot of time on edge cases like this back in the day, but there were so many ... and then one has other duties.  It's so great to have lots of people still working on not just cutting-edge stuff, but more generally useful things like this.",
    "created_at": "2020-05-08T14:47:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-467217",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:14'>Comment 14:</a>
What about the related `show` command on [graphics](http://doc.sagemath.org/html/en/reference/plotting/sage/plot/graphics.html)?  E.g. 

```
sage: G = plot(exp, 1, 10)
sage: G.show(scale='semiology')
```

Does this problem show up there (because if I recall correctly, the `plot` object already has the points computed before `show` is called) after this ticket is applied?

* If not, ignore this and set back to positive review.
* If so, I see two options, either of which is fine:
  * Open a new ticket for that (default)
  * Put this ticket back to needs work and fix it (if there is some pretty easy fix)

Thanks so much for fixing this.  We spent a lot of time on edge cases like this back in the day, but there were so many ... and then one has other duties.  It's so great to have lots of people still working on not just cutting-edge stuff, but more generally useful things like this.



---

archive/issue_comments_467218.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nThis patch will not work when the scale is passed to `show` rather than `plot`.  All `plot` does is create a `line` from the points it generates and add that to the `graphics` object.\n\nThe only way I could see to work as expected in that case would be to make `plot` lazy and not generate any points until the actual graphics object gets rendered.  One would need to capture all of the arguments (deep copy?) into an object which would then implement `_render_on_subplot` by calling `_plot`, then calling `_render_on_subplot` to the resulting line.\n\nI'm not sure how much work that would be to do - I'm a C++ person mostly so I'm not as familiar with the python memory model (incidentally one of the reasons S\u00e9bastien had to fix my non-pythonic code; I'm not used to the scoping flexibility!).  I'm not sure if there's a way for the user to mess with variables in a way that is observable to someone who has taken a copy of the expression.\n\nThe other option (which I don't like) is to add a note in the documentation saying there's a gotcha, of course.  I don't know if anyone for whatever reason would rely on the old behavior, but then passing the scale to `show` only could be a backdoor way to re-enable it.",
    "created_at": "2020-05-08T15:27:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-467218",
    "user": "https://github.com/rbmj"
}
```

<a id='comment:15'>Comment 15:</a>
This patch will not work when the scale is passed to `show` rather than `plot`.  All `plot` does is create a `line` from the points it generates and add that to the `graphics` object.

The only way I could see to work as expected in that case would be to make `plot` lazy and not generate any points until the actual graphics object gets rendered.  One would need to capture all of the arguments (deep copy?) into an object which would then implement `_render_on_subplot` by calling `_plot`, then calling `_render_on_subplot` to the resulting line.

I'm not sure how much work that would be to do - I'm a C++ person mostly so I'm not as familiar with the python memory model (incidentally one of the reasons Sébastien had to fix my non-pythonic code; I'm not used to the scoping flexibility!).  I'm not sure if there's a way for the user to mess with variables in a way that is observable to someone who has taken a copy of the expression.

The other option (which I don't like) is to add a note in the documentation saying there's a gotcha, of course.  I don't know if anyone for whatever reason would rely on the old behavior, but then passing the scale to `show` only could be a backdoor way to re-enable it.



---

archive/issue_comments_467219.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nThat is what I figured.  Could you open a new ticket for at least documenting this problem for that case?  One could then point people to the need to use the option in the `plot` command rather than `show` for situations of this type.  I think that is better than trying to do the lazy plot, it is too likely to give us new bugs.",
    "created_at": "2020-05-08T16:31:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-467219",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:16'>Comment 16:</a>
That is what I figured.  Could you open a new ticket for at least documenting this problem for that case?  One could then point people to the need to use the option in the `plot` command rather than `show` for situations of this type.  I think that is better than trying to do the lazy plot, it is too likely to give us new bugs.



---

archive/issue_comments_467220.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nCreated #29667",
    "created_at": "2020-05-08T17:47:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-467220",
    "user": "https://github.com/rbmj"
}
```

<a id='comment:17'>Comment 17:</a>
Created #29667



---

archive/issue_comments_467221.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nGreat, thanks.",
    "created_at": "2020-05-08T20:27:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-467221",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:18'>Comment 18:</a>
Great, thanks.



---

archive/issue_events_387819.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2020-05-08T20:27:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-387819"
}
```



---

archive/issue_events_387820.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2020-05-08T20:27:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-387820"
}
```



---

archive/issue_comments_467222.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nI do not like that `_plot` function which is just too long and too complicated and leads to bug of this kind. It would need to be broken up into pieces.\n\nShould we deprecate the scale in the show?",
    "created_at": "2020-05-08T21:05:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-467222",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:19'>Comment 19:</a>
I do not like that `_plot` function which is just too long and too complicated and leads to bug of this kind. It would need to be broken up into pieces.

Should we deprecate the scale in the show?



---

archive/issue_comments_467223.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\n> I do not like that `_plot` function which is just too long and too complicated and leads to bug of this kind. It would need to be broken up into pieces.\n\nIdeally.  But that is a big big job.  Ideally it wouldn't be so tied to matplotlib either, as William said long ago.  But I think for most people they wouldn't think it is worth the bother.\n\n> Should we deprecate the scale in the show?\n\nNo.  I think that people may often want to show the same plot in several different scales, and that is the beauty of separating the semantics of the graphics object and how it is shown.  If anything, it would be the other way around - but unfortunately in this case the problem here arises.",
    "created_at": "2020-05-08T22:21:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-467223",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:20'>Comment 20:</a>
> I do not like that `_plot` function which is just too long and too complicated and leads to bug of this kind. It would need to be broken up into pieces.

Ideally.  But that is a big big job.  Ideally it wouldn't be so tied to matplotlib either, as William said long ago.  But I think for most people they wouldn't think it is worth the bother.

> Should we deprecate the scale in the show?

No.  I think that people may often want to show the same plot in several different scales, and that is the beauty of separating the semantics of the graphics object and how it is shown.  If anything, it would be the other way around - but unfortunately in this case the problem here arises.



---

archive/issue_events_387821.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2020-05-11T00:37:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-387821"
}
```



---

archive/issue_events_387822.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2020-05-11T00:37:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "label": "https://github.com/sagemath/sage/labels/feature",
    "label_color": "008080",
    "label_name": "feature",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-387822"
}
```



---

archive/issue_comments_467224.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nMaybe this can make it into Sage 9.1. Otherwise it will be for Sage 9.2.",
    "created_at": "2020-05-11T00:37:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-467224",
    "user": "https://github.com/slel"
}
```

<a id='comment:21'>Comment 21:</a>
Maybe this can make it into Sage 9.1. Otherwise it will be for Sage 9.2.



---

archive/issue_events_387823.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-17T18:33:40Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-387823"
}
```



---

archive/issue_events_387824.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-17T18:33:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-387824"
}
```



---

archive/issue_events_387825.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-06-03T22:28:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-387825"
}
```



---

archive/issue_events_387826.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "01d9c1deffeed55daad63a17f05ce21f5bbf9d4b",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-06-03T22:28:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-387826"
}
```



---

archive/issue_comments_467225.json:
```json
{
    "body": "Changed branch from **[public/29523](https://github.com/sagemath/sagetrac-mirror/tree/public/29523)** to **[7dbeded](https://github.com/sagemath/sagetrac-mirror/commit/7dbededec0ca47fd4cda07e8134aeb67e5bb6818)**",
    "created_at": "2020-06-03T22:28:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-467225",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/29523](https://github.com/sagemath/sagetrac-mirror/tree/public/29523)** to **[7dbeded](https://github.com/sagemath/sagetrac-mirror/commit/7dbededec0ca47fd4cda07e8134aeb67e5bb6818)**
