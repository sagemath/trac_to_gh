# Issue 29523: Sample points exponentially when plotting log-scale graphs

archive/issues_029286.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nThis patch modifies src/plot/plot.py so that when scale='semilogx' or 'loglog' is specified generate_plot_points() will sample exponentially.  This decreases the number of points necessary for an accurate plot (and also increases the chance that the default number of points will produce an acceptable plot).\n\nDoctests pass on Debian x86-64\n\nSee: https://groups.google.com/d/msgid/sage-devel/7164f726-788d-4718-8ddc-90eba8e858ce%40googlegroups.com?utm_medium=email&utm_source=footer\n\nComponent: **graphics**\n\nAuthor: **Blair Mason**\n\nBranch/Commit: **[`7dbeded`](https://github.com/sagemath/sagetrac-mirror/commit/7dbededec0ca47fd4cda07e8134aeb67e5bb6818)**\n\nReviewer: **S\u00e9bastien Labb\u00e9**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29523_\n\n",
    "closed_at": "2020-06-03T22:28:58Z",
    "created_at": "2020-04-17T17:35:08Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graphics",
        "https://github.com/sagemath/sage/labels/p%3A%20trivial%20/%205",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Sample points exponentially when plotting log-scale graphs",
    "type": "issue",
    "updated_at": "2020-06-03T22:28:58Z",
    "url": "https://github.com/sagemath/sage/issues/29523",
    "user": "https://github.com/rbmj"
}
```
<div id="comment:0"></div>

This patch modifies src/plot/plot.py so that when scale='semilogx' or 'loglog' is specified generate_plot_points() will sample exponentially.  This decreases the number of points necessary for an accurate plot (and also increases the chance that the default number of points will produce an acceptable plot).

Doctests pass on Debian x86-64

See: https://groups.google.com/d/msgid/sage-devel/7164f726-788d-4718-8ddc-90eba8e858ce%40googlegroups.com?utm_medium=email&utm_source=footer

Component: **graphics**

Author: **Blair Mason**

Branch/Commit: **[`7dbeded`](https://github.com/sagemath/sagetrac-mirror/commit/7dbededec0ca47fd4cda07e8134aeb67e5bb6818)**

Reviewer: **Sébastien Labbé**

_Issue created by migration from https://trac.sagemath.org/ticket/29523_





---

archive/issue_events_402999.json:
```json
{
    "actor": "https://github.com/rbmj",
    "created_at": "2020-04-17T17:35:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graphics",
    "label_color": "0000ff",
    "label_name": "c: graphics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-402999"
}
```



---

archive/issue_events_403000.json:
```json
{
    "actor": "https://github.com/rbmj",
    "created_at": "2020-04-17T17:35:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20trivial%20/%205",
    "label_color": "fff9e5",
    "label_name": "p: trivial / 5",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-403000"
}
```



---

archive/issue_events_403001.json:
```json
{
    "actor": "https://github.com/rbmj",
    "created_at": "2020-04-17T17:35:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-403001"
}
```



---

archive/issue_events_403002.json:
```json
{
    "actor": "https://github.com/rbmj",
    "created_at": "2020-04-17T17:35:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "label": "https://github.com/sagemath/sage/labels/feature",
    "label_color": "008080",
    "label_name": "feature",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-403002"
}
```



---

archive/issue_events_403003.json:
```json
{
    "actor": "https://github.com/rbmj",
    "created_at": "2020-04-17T17:40:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-403003"
}
```



---

archive/issue_comments_464150.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nAttachment: **[0001-Add-logarithmic-point-selection-to-generate_plot_poi.patch.gz](https://github.com/sagemath/sage/files/ticket29523/0001-Add-logarithmic-point-selection-to-generate_plot_poi.patch.gz)**",
    "created_at": "2020-04-17T17:40:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-464150",
    "user": "https://github.com/rbmj"
}
```

<div id="comment:1" align="right">comment:1</div>

Attachment: **[0001-Add-logarithmic-point-selection-to-generate_plot_poi.patch.gz](https://github.com/sagemath/sage/files/ticket29523/0001-Add-logarithmic-point-selection-to-generate_plot_poi.patch.gz)**



---

archive/issue_comments_464151.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,6 @@\n \n Doctests pass on Debian x86-64\n \n+Trac didn't like me trying to push it a new branch, so patch is attached to the ticket (in git format)\n+\n See: https://groups.google.com/d/msgid/sage-devel/7164f726-788d-4718-8ddc-90eba8e858ce%40googlegroups.com?utm_medium=email&utm_source=footer\n``````\n",
    "created_at": "2020-04-17T17:40:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-464151",
    "user": "https://github.com/rbmj"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,6 @@
 
 Doctests pass on Debian x86-64
 
+Trac didn't like me trying to push it a new branch, so patch is attached to the ticket (in git format)
+
 See: https://groups.google.com/d/msgid/sage-devel/7164f726-788d-4718-8ddc-90eba8e858ce%40googlegroups.com?utm_medium=email&utm_source=footer
``````




---

archive/issue_comments_464152.json:
```json
{
    "body": "Branch: **[u/gh-rbmj/sample_points_exponentially_when_plotting_log_scale_graphs](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-rbmj/sample_points_exponentially_when_plotting_log_scale_graphs)**",
    "created_at": "2020-04-17T17:58:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-464152",
    "user": "https://github.com/rbmj"
}
```

Branch: **[u/gh-rbmj/sample_points_exponentially_when_plotting_log_scale_graphs](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-rbmj/sample_points_exponentially_when_plotting_log_scale_graphs)**



---

archive/issue_comments_464153.json:
```json
{
    "body": "Commit: **[`71c02c0`](https://github.com/sagemath/sagetrac-mirror/commit/71c02c0e0834f7119b528ff884c584b44308076c)**",
    "created_at": "2020-04-18T21:10:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-464153",
    "user": "https://github.com/slel"
}
```

Commit: **[`71c02c0`](https://github.com/sagemath/sagetrac-mirror/commit/71c02c0e0834f7119b528ff884c584b44308076c)**



---

archive/issue_comments_464154.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nPossibly related: #15320.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/71c02c0e0834f7119b528ff884c584b44308076c\"><code>71c02c0</code></a></td><td><code>Add logarithmic point selection to generate_plot_points()</code></td></tr></table>\n",
    "created_at": "2020-04-18T21:10:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-464154",
    "user": "https://github.com/slel"
}
```

<div id="comment:3" align="right">comment:3</div>

Possibly related: #15320.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/71c02c0e0834f7119b528ff884c584b44308076c"><code>71c02c0</code></a></td><td><code>Add logarithmic point selection to generate_plot_points()</code></td></tr></table>




---

archive/issue_comments_464155.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThanks for working on this issue. I have few comments after reading the branch.\n\n1. I do not agree to change the inside of `generate_plot_points`. I believe it would be cleaner to do the change of variables:\n\n```\n        f = lambda x: f_actual(exp(x))\n        xrange = (log(xrange[0]), log(xrange[1]))\n```\nbefore the call to `generate_plot_point` and then do `generate_plot_point(f,xrange,...)` on the new `f` and `xrange`. Also, the part\n\n```\n    if exp_dist:\n        for i in range(len(data)):\n            data[i] = (exp(data[i][0]), data[i][1])\n```\nwould go outside of the function but after the call to that function. \n\n2. Also, I would use the following for the name of new variables to be more explicit on what they are:\n\n```\n        f_exp = lambda x: f_actual(exp(x))\n        log_xrange = (log(xrange[0]), log(xrange[1]))\n```\n\n3. I suggest to use `is_log_scale` or `log_scale` for the name of the boolean variable and avoid the `if` to define it:\n\n```diff\n-    #check to see if this is a log scale graph on the x axis\n-    exp_points = False\n-    if ('scale' in options.keys() and not parametric and\n-            (options['scale'] == 'loglog' or options['scale'] == 'semilogx')):\n-        exp_points = True\n+    #check to see if this is a log scale graph on the x axis\n+    log_scale = ('scale' in options.keys() and\n+                  not parametric and\n+                  (options['scale'] == 'loglog' or\n+                   options['scale'] == 'semilogx'))\n```\n\n4. I would avoid `exp_dist=exp_points` by using the same name for the variable as for the keyword.\n\n5. You need to add some new doctest showing that the bug is fixed (maybe with a picture). You can look at recent branch from Travis to see how he did to include picture in the doc here: https://github.com/sagemath/sage/issues/25796",
    "created_at": "2020-04-24T12:05:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-464155",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:4" align="right">comment:4</div>

Thanks for working on this issue. I have few comments after reading the branch.

1. I do not agree to change the inside of `generate_plot_points`. I believe it would be cleaner to do the change of variables:

```
        f = lambda x: f_actual(exp(x))
        xrange = (log(xrange[0]), log(xrange[1]))
```
before the call to `generate_plot_point` and then do `generate_plot_point(f,xrange,...)` on the new `f` and `xrange`. Also, the part

```
    if exp_dist:
        for i in range(len(data)):
            data[i] = (exp(data[i][0]), data[i][1])
```
would go outside of the function but after the call to that function. 

2. Also, I would use the following for the name of new variables to be more explicit on what they are:

```
        f_exp = lambda x: f_actual(exp(x))
        log_xrange = (log(xrange[0]), log(xrange[1]))
```

3. I suggest to use `is_log_scale` or `log_scale` for the name of the boolean variable and avoid the `if` to define it:

```diff
-    #check to see if this is a log scale graph on the x axis
-    exp_points = False
-    if ('scale' in options.keys() and not parametric and
-            (options['scale'] == 'loglog' or options['scale'] == 'semilogx')):
-        exp_points = True
+    #check to see if this is a log scale graph on the x axis
+    log_scale = ('scale' in options.keys() and
+                  not parametric and
+                  (options['scale'] == 'loglog' or
+                   options['scale'] == 'semilogx'))
```

4. I would avoid `exp_dist=exp_points` by using the same name for the variable as for the keyword.

5. You need to add some new doctest showing that the bug is fixed (maybe with a picture). You can look at recent branch from Travis to see how he did to include picture in the doc here: https://github.com/sagemath/sage/issues/25796



---

archive/issue_events_403004.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2020-04-24T12:05:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-403004"
}
```



---

archive/issue_events_403005.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2020-04-24T12:05:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-403005"
}
```



---

archive/issue_comments_464156.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThe Author field is missing (necessary for the release manager to merge the ticket).",
    "created_at": "2020-04-24T12:08:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-464156",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:6" align="right">comment:6</div>

The Author field is missing (necessary for the release manager to merge the ticket).



---

archive/issue_comments_464157.json:
```json
{
    "body": "Reviewer: **S\u00e9bastien Labb\u00e9**",
    "created_at": "2020-04-24T12:08:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-464157",
    "user": "https://github.com/seblabbe"
}
```

Reviewer: **Sébastien Labbé**



---

archive/issue_comments_464158.json:
```json
{
    "body": "Changed commit from **[`71c02c0`](https://github.com/sagemath/sagetrac-mirror/commit/71c02c0e0834f7119b528ff884c584b44308076c)** to **[`e8f2f9f`](https://github.com/sagemath/sagetrac-mirror/commit/e8f2f9fd7d9ed913c5aff3164faf15d2a543fd00)**",
    "created_at": "2020-05-03T16:12:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-464158",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`71c02c0`](https://github.com/sagemath/sagetrac-mirror/commit/71c02c0e0834f7119b528ff884c584b44308076c)** to **[`e8f2f9f`](https://github.com/sagemath/sagetrac-mirror/commit/e8f2f9fd7d9ed913c5aff3164faf15d2a543fd00)**



---

archive/issue_comments_464159.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e8f2f9fd7d9ed913c5aff3164faf15d2a543fd00\"><code>e8f2f9f</code></a></td><td><code>Moved exponential sampling to _plot() and added documentation in plot_semilogx()</code></td></tr></table>\n",
    "created_at": "2020-05-03T16:12:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-464159",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e8f2f9fd7d9ed913c5aff3164faf15d2a543fd00"><code>e8f2f9f</code></a></td><td><code>Moved exponential sampling to _plot() and added documentation in plot_semilogx()</code></td></tr></table>




---

archive/issue_comments_464160.json:
```json
{
    "body": "Author: **Blair Mason**",
    "created_at": "2020-05-03T16:18:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-464160",
    "user": "https://github.com/rbmj"
}
```

Author: **Blair Mason**



---

archive/issue_comments_464161.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nIncorporated your suggestions - tests pass and docs build.\n\nAdded one doctest to plot_semilogx() which does not render properly on previous versions of sage - hopefully that is sufficient.  A decent amount of the diff in the last commit is just me reverting my previous changes.\n\nApologize for the delay in updating this!",
    "created_at": "2020-05-03T16:18:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-464161",
    "user": "https://github.com/rbmj"
}
```

<div id="comment:8" align="right">comment:8</div>

Incorporated your suggestions - tests pass and docs build.

Added one doctest to plot_semilogx() which does not render properly on previous versions of sage - hopefully that is sufficient.  A decent amount of the diff in the last commit is just me reverting my previous changes.

Apologize for the delay in updating this!



---

archive/issue_events_403006.json:
```json
{
    "actor": "https://github.com/rbmj",
    "created_at": "2020-05-03T16:18:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-403006"
}
```



---

archive/issue_events_403007.json:
```json
{
    "actor": "https://github.com/rbmj",
    "created_at": "2020-05-03T16:18:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-403007"
}
```



---

archive/issue_comments_464162.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,6 +2,4 @@\n \n Doctests pass on Debian x86-64\n \n-Trac didn't like me trying to push it a new branch, so patch is attached to the ticket (in git format)\n-\n See: https://groups.google.com/d/msgid/sage-devel/7164f726-788d-4718-8ddc-90eba8e858ce%40googlegroups.com?utm_medium=email&utm_source=footer\n``````\n",
    "created_at": "2020-05-03T16:18:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-464162",
    "user": "https://github.com/rbmj"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,6 +2,4 @@
 
 Doctests pass on Debian x86-64
 
-Trac didn't like me trying to push it a new branch, so patch is attached to the ticket (in git format)
-
 See: https://groups.google.com/d/msgid/sage-devel/7164f726-788d-4718-8ddc-90eba8e858ce%40googlegroups.com?utm_medium=email&utm_source=footer
``````




---

archive/issue_comments_464163.json:
```json
{
    "body": "Changed commit from **[`e8f2f9f`](https://github.com/sagemath/sagetrac-mirror/commit/e8f2f9fd7d9ed913c5aff3164faf15d2a543fd00)** to **[`bfc9c57`](https://github.com/sagemath/sagetrac-mirror/commit/bfc9c572cc65a3de4b0cc3e9d9ade6f022b808f4)**",
    "created_at": "2020-05-07T08:18:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-464163",
    "user": "https://github.com/seblabbe"
}
```

Changed commit from **[`e8f2f9f`](https://github.com/sagemath/sagetrac-mirror/commit/e8f2f9fd7d9ed913c5aff3164faf15d2a543fd00)** to **[`bfc9c57`](https://github.com/sagemath/sagetrac-mirror/commit/bfc9c572cc65a3de4b0cc3e9d9ade6f022b808f4)**



---

archive/issue_comments_464164.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThanks for the changes. No problem for the delay. Same for me, apologize for my delay in answering.\n\nSo, I looked at the code. There were still some modifications I wanted to be made. I allowed myself to make a commit on top of yours.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/894960d899e1cdde5efe71b1cfa0c8cce036e349\"><code>894960d</code></a></td><td><code>Merge branch 'u/gh-rbmj/sample_points_exponentially_when_plotting_log_scale_graphs' of trac.sagemath.org:sage into 29523</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bfc9c572cc65a3de4b0cc3e9d9ade6f022b808f4\"><code>bfc9c57</code></a></td><td><code>29523: changes by reviewer</code></td></tr></table>\n",
    "created_at": "2020-05-07T08:18:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-464164",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:9" align="right">comment:9</div>

Thanks for the changes. No problem for the delay. Same for me, apologize for my delay in answering.

So, I looked at the code. There were still some modifications I wanted to be made. I allowed myself to make a commit on top of yours.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/894960d899e1cdde5efe71b1cfa0c8cce036e349"><code>894960d</code></a></td><td><code>Merge branch 'u/gh-rbmj/sample_points_exponentially_when_plotting_log_scale_graphs' of trac.sagemath.org:sage into 29523</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bfc9c572cc65a3de4b0cc3e9d9ade6f022b808f4"><code>bfc9c57</code></a></td><td><code>29523: changes by reviewer</code></td></tr></table>




---

archive/issue_comments_464165.json:
```json
{
    "body": "Changed branch from **[u/gh-rbmj/sample_points_exponentially_when_plotting_log_scale_graphs](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-rbmj/sample_points_exponentially_when_plotting_log_scale_graphs)** to **[public/29523](https://github.com/sagemath/sagetrac-mirror/tree/public/29523)**",
    "created_at": "2020-05-07T08:18:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-464165",
    "user": "https://github.com/seblabbe"
}
```

Changed branch from **[u/gh-rbmj/sample_points_exponentially_when_plotting_log_scale_graphs](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-rbmj/sample_points_exponentially_when_plotting_log_scale_graphs)** to **[public/29523](https://github.com/sagemath/sagetrac-mirror/tree/public/29523)**



---

archive/issue_comments_464166.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI confirm that #15320 is fixed by this ticket.",
    "created_at": "2020-05-07T08:28:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-464166",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:10" align="right">comment:10</div>

I confirm that #15320 is fixed by this ticket.



---

archive/issue_comments_464167.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nDocumentation builds fine on my side. Issues are fixed. Doctests pass in `src/sage/plot` directory. If you agree with my changes, I let you change the status of ticket to positive review.",
    "created_at": "2020-05-07T09:44:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-464167",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:11" align="right">comment:11</div>

Documentation builds fine on my side. Issues are fixed. Doctests pass in `src/sage/plot` directory. If you agree with my changes, I let you change the status of ticket to positive review.



---

archive/issue_comments_464168.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7dbededec0ca47fd4cda07e8134aeb67e5bb6818\"><code>7dbeded</code></a></td><td><code>29523: same if structure as before</code></td></tr></table>\n",
    "created_at": "2020-05-07T12:10:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-464168",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7dbededec0ca47fd4cda07e8134aeb67e5bb6818"><code>7dbeded</code></a></td><td><code>29523: same if structure as before</code></td></tr></table>




---

archive/issue_comments_464169.json:
```json
{
    "body": "Changed commit from **[`bfc9c57`](https://github.com/sagemath/sagetrac-mirror/commit/bfc9c572cc65a3de4b0cc3e9d9ade6f022b808f4)** to **[`7dbeded`](https://github.com/sagemath/sagetrac-mirror/commit/7dbededec0ca47fd4cda07e8134aeb67e5bb6818)**",
    "created_at": "2020-05-07T12:10:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-464169",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bfc9c57`](https://github.com/sagemath/sagetrac-mirror/commit/bfc9c572cc65a3de4b0cc3e9d9ade6f022b808f4)** to **[`7dbeded`](https://github.com/sagemath/sagetrac-mirror/commit/7dbededec0ca47fd4cda07e8134aeb67e5bb6818)**



---

archive/issue_events_403008.json:
```json
{
    "actor": "https://github.com/rbmj",
    "created_at": "2020-05-07T14:44:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-403008"
}
```



---

archive/issue_events_403009.json:
```json
{
    "actor": "https://github.com/rbmj",
    "created_at": "2020-05-07T14:44:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-403009"
}
```



---

archive/issue_comments_464170.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nLooks good to me, thanks for the review!",
    "created_at": "2020-05-07T14:44:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-464170",
    "user": "https://github.com/rbmj"
}
```

<div id="comment:13" align="right">comment:13</div>

Looks good to me, thanks for the review!



---

archive/issue_events_403010.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2020-05-08T14:47:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-403010"
}
```



---

archive/issue_events_403011.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2020-05-08T14:47:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-403011"
}
```



---

archive/issue_comments_464171.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nWhat about the related `show` command on [graphics](http://doc.sagemath.org/html/en/reference/plotting/sage/plot/graphics.html)?  E.g. \n\n```\nsage: G = plot(exp, 1, 10)\nsage: G.show(scale='semiology')\n```\n\nDoes this problem show up there (because if I recall correctly, the `plot` object already has the points computed before `show` is called) after this ticket is applied?\n\n* If not, ignore this and set back to positive review.\n* If so, I see two options, either of which is fine:\n  * Open a new ticket for that (default)\n  * Put this ticket back to needs work and fix it (if there is some pretty easy fix)\n\nThanks so much for fixing this.  We spent a lot of time on edge cases like this back in the day, but there were so many ... and then one has other duties.  It's so great to have lots of people still working on not just cutting-edge stuff, but more generally useful things like this.",
    "created_at": "2020-05-08T14:47:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-464171",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:14" align="right">comment:14</div>

What about the related `show` command on [graphics](http://doc.sagemath.org/html/en/reference/plotting/sage/plot/graphics.html)?  E.g. 

```
sage: G = plot(exp, 1, 10)
sage: G.show(scale='semiology')
```

Does this problem show up there (because if I recall correctly, the `plot` object already has the points computed before `show` is called) after this ticket is applied?

* If not, ignore this and set back to positive review.
* If so, I see two options, either of which is fine:
  * Open a new ticket for that (default)
  * Put this ticket back to needs work and fix it (if there is some pretty easy fix)

Thanks so much for fixing this.  We spent a lot of time on edge cases like this back in the day, but there were so many ... and then one has other duties.  It's so great to have lots of people still working on not just cutting-edge stuff, but more generally useful things like this.



---

archive/issue_comments_464172.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThis patch will not work when the scale is passed to `show` rather than `plot`.  All `plot` does is create a `line` from the points it generates and add that to the `graphics` object.\n\nThe only way I could see to work as expected in that case would be to make `plot` lazy and not generate any points until the actual graphics object gets rendered.  One would need to capture all of the arguments (deep copy?) into an object which would then implement `_render_on_subplot` by calling `_plot`, then calling `_render_on_subplot` to the resulting line.\n\nI'm not sure how much work that would be to do - I'm a C++ person mostly so I'm not as familiar with the python memory model (incidentally one of the reasons S\u00e9bastien had to fix my non-pythonic code; I'm not used to the scoping flexibility!).  I'm not sure if there's a way for the user to mess with variables in a way that is observable to someone who has taken a copy of the expression.\n\nThe other option (which I don't like) is to add a note in the documentation saying there's a gotcha, of course.  I don't know if anyone for whatever reason would rely on the old behavior, but then passing the scale to `show` only could be a backdoor way to re-enable it.",
    "created_at": "2020-05-08T15:27:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-464172",
    "user": "https://github.com/rbmj"
}
```

<div id="comment:15" align="right">comment:15</div>

This patch will not work when the scale is passed to `show` rather than `plot`.  All `plot` does is create a `line` from the points it generates and add that to the `graphics` object.

The only way I could see to work as expected in that case would be to make `plot` lazy and not generate any points until the actual graphics object gets rendered.  One would need to capture all of the arguments (deep copy?) into an object which would then implement `_render_on_subplot` by calling `_plot`, then calling `_render_on_subplot` to the resulting line.

I'm not sure how much work that would be to do - I'm a C++ person mostly so I'm not as familiar with the python memory model (incidentally one of the reasons Sébastien had to fix my non-pythonic code; I'm not used to the scoping flexibility!).  I'm not sure if there's a way for the user to mess with variables in a way that is observable to someone who has taken a copy of the expression.

The other option (which I don't like) is to add a note in the documentation saying there's a gotcha, of course.  I don't know if anyone for whatever reason would rely on the old behavior, but then passing the scale to `show` only could be a backdoor way to re-enable it.



---

archive/issue_comments_464173.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nThat is what I figured.  Could you open a new ticket for at least documenting this problem for that case?  One could then point people to the need to use the option in the `plot` command rather than `show` for situations of this type.  I think that is better than trying to do the lazy plot, it is too likely to give us new bugs.",
    "created_at": "2020-05-08T16:31:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-464173",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:16" align="right">comment:16</div>

That is what I figured.  Could you open a new ticket for at least documenting this problem for that case?  One could then point people to the need to use the option in the `plot` command rather than `show` for situations of this type.  I think that is better than trying to do the lazy plot, it is too likely to give us new bugs.



---

archive/issue_comments_464174.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nCreated #29667",
    "created_at": "2020-05-08T17:47:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-464174",
    "user": "https://github.com/rbmj"
}
```

<div id="comment:17" align="right">comment:17</div>

Created #29667



---

archive/issue_comments_464175.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nGreat, thanks.",
    "created_at": "2020-05-08T20:27:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-464175",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:18" align="right">comment:18</div>

Great, thanks.



---

archive/issue_events_403012.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2020-05-08T20:27:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-403012"
}
```



---

archive/issue_events_403013.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2020-05-08T20:27:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-403013"
}
```



---

archive/issue_comments_464176.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nI do not like that `_plot` function which is just too long and too complicated and leads to bug of this kind. It would need to be broken up into pieces.\n\nShould we deprecate the scale in the show?",
    "created_at": "2020-05-08T21:05:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-464176",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:19" align="right">comment:19</div>

I do not like that `_plot` function which is just too long and too complicated and leads to bug of this kind. It would need to be broken up into pieces.

Should we deprecate the scale in the show?



---

archive/issue_comments_464177.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\n> I do not like that `_plot` function which is just too long and too complicated and leads to bug of this kind. It would need to be broken up into pieces.\n\nIdeally.  But that is a big big job.  Ideally it wouldn't be so tied to matplotlib either, as William said long ago.  But I think for most people they wouldn't think it is worth the bother.\n\n> Should we deprecate the scale in the show?\n\nNo.  I think that people may often want to show the same plot in several different scales, and that is the beauty of separating the semantics of the graphics object and how it is shown.  If anything, it would be the other way around - but unfortunately in this case the problem here arises.",
    "created_at": "2020-05-08T22:21:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-464177",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:20" align="right">comment:20</div>

> I do not like that `_plot` function which is just too long and too complicated and leads to bug of this kind. It would need to be broken up into pieces.

Ideally.  But that is a big big job.  Ideally it wouldn't be so tied to matplotlib either, as William said long ago.  But I think for most people they wouldn't think it is worth the bother.

> Should we deprecate the scale in the show?

No.  I think that people may often want to show the same plot in several different scales, and that is the beauty of separating the semantics of the graphics object and how it is shown.  If anything, it would be the other way around - but unfortunately in this case the problem here arises.



---

archive/issue_events_403014.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2020-05-11T00:37:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-403014"
}
```



---

archive/issue_events_403015.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2020-05-11T00:37:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "label": "https://github.com/sagemath/sage/labels/feature",
    "label_color": "008080",
    "label_name": "feature",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-403015"
}
```



---

archive/issue_comments_464178.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nMaybe this can make it into Sage 9.1. Otherwise it will be for Sage 9.2.",
    "created_at": "2020-05-11T00:37:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-464178",
    "user": "https://github.com/slel"
}
```

<div id="comment:21" align="right">comment:21</div>

Maybe this can make it into Sage 9.1. Otherwise it will be for Sage 9.2.



---

archive/issue_events_403016.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-17T18:33:40Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-403016"
}
```



---

archive/issue_events_403017.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-17T18:33:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-403017"
}
```



---

archive/issue_events_403018.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-06-03T22:28:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-403018"
}
```



---

archive/issue_events_403019.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "01d9c1deffeed55daad63a17f05ce21f5bbf9d4b",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-06-03T22:28:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29523#event-403019"
}
```



---

archive/issue_comments_464179.json:
```json
{
    "body": "Changed branch from **[public/29523](https://github.com/sagemath/sagetrac-mirror/tree/public/29523)** to **[`7dbeded`](https://github.com/sagemath/sagetrac-mirror/commit/7dbededec0ca47fd4cda07e8134aeb67e5bb6818)**",
    "created_at": "2020-06-03T22:28:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29523#issuecomment-464179",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/29523](https://github.com/sagemath/sagetrac-mirror/tree/public/29523)** to **[`7dbeded`](https://github.com/sagemath/sagetrac-mirror/commit/7dbededec0ca47fd4cda07e8134aeb67e5bb6818)**
