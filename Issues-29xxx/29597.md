# Issue 29597: Don't override LDFLAGS in m4rie

archive/issues_029360.json:
```json
{
    "body": "https://bitbucket.org/malb/m4rie/pull-requests/4/do-not-interfere-with-ldflags-while\n\n**CC:**  @mkoeppe\n\n**Branch/Commit:** [cebd333a26429db1acfb0df50351981c31fd0336](https://github.com/sagemath/sagetrac-mirror/commit/cebd333a26429db1acfb0df50351981c31fd0336)\n\n**Upstream:** Fixed upstream, but not in a stable release.\n\n**Reviewer:** Matthias Koeppe\n\n**Author:** Isuru Fernando\n\nIssue created by migration from https://trac.sagemath.org/ticket/29597\n\n",
    "closed_at": "2020-05-04T06:41:21Z",
    "created_at": "2020-04-27T03:51:36Z",
    "labels": [
        "component: packages: standard",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "Don't override LDFLAGS in m4rie",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29597",
    "user": "https://github.com/isuruf"
}
```
https://bitbucket.org/malb/m4rie/pull-requests/4/do-not-interfere-with-ldflags-while

**CC:**  @mkoeppe

**Branch/Commit:** [cebd333a26429db1acfb0df50351981c31fd0336](https://github.com/sagemath/sagetrac-mirror/commit/cebd333a26429db1acfb0df50351981c31fd0336)

**Upstream:** Fixed upstream, but not in a stable release.

**Reviewer:** Matthias Koeppe

**Author:** Isuru Fernando

Issue created by migration from https://trac.sagemath.org/ticket/29597





---

archive/issue_comments_553178.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2020-04-27T03:51:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29597#issuecomment-553178",
    "user": "https://github.com/isuruf"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_553179.json:
```json
{
    "body": "<a id='comment:2'></a>\nThis one won't work as is - need to patch Makefile.in as well",
    "created_at": "2020-04-27T03:53:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29597#issuecomment-553179",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
This one won't work as is - need to patch Makefile.in as well



---

archive/issue_comments_553180.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/64dc4370412b76e893cc977fd5f5fcbe0f8d2b94\">64dc437</a></td><td><code>Fix m4rie's tests/Makefile.in</code></td></tr></table>\n",
    "created_at": "2020-04-27T04:15:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29597#issuecomment-553180",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/64dc4370412b76e893cc977fd5f5fcbe0f8d2b94">64dc437</a></td><td><code>Fix m4rie's tests/Makefile.in</code></td></tr></table>




---

archive/issue_comments_553181.json:
```json
{
    "body": "**Changing commit** from \"[1fb29e65dbce1b1e6ed1d5e6ad53156643bfb43e](https://github.com/sagemath/sagetrac-mirror/commit/1fb29e65dbce1b1e6ed1d5e6ad53156643bfb43e)\" to \"[64dc4370412b76e893cc977fd5f5fcbe0f8d2b94](https://github.com/sagemath/sagetrac-mirror/commit/64dc4370412b76e893cc977fd5f5fcbe0f8d2b94)\".",
    "created_at": "2020-04-27T04:15:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29597#issuecomment-553181",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1fb29e65dbce1b1e6ed1d5e6ad53156643bfb43e](https://github.com/sagemath/sagetrac-mirror/commit/1fb29e65dbce1b1e6ed1d5e6ad53156643bfb43e)" to "[64dc4370412b76e893cc977fd5f5fcbe0f8d2b94](https://github.com/sagemath/sagetrac-mirror/commit/64dc4370412b76e893cc977fd5f5fcbe0f8d2b94)".



---

archive/issue_comments_553182.json:
```json
{
    "body": "<a id='comment:4'></a>\nThanks!",
    "created_at": "2020-04-27T04:24:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29597#issuecomment-553182",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
Thanks!



---

archive/issue_comments_553183.json:
```json
{
    "body": "**Reviewer:** Matthias Koeppe",
    "created_at": "2020-04-27T04:45:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29597#issuecomment-553183",
    "user": "https://github.com/mkoeppe"
}
```

**Reviewer:** Matthias Koeppe



---

archive/issue_comments_553184.json:
```json
{
    "body": "<a id='comment:6'></a>\nThis seems to break other platforms - https://github.com/mkoeppe/sage/actions/runs/88768093",
    "created_at": "2020-04-27T14:41:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29597#issuecomment-553184",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
This seems to break other platforms - https://github.com/mkoeppe/sage/actions/runs/88768093



---

archive/issue_comments_553185.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2020-04-27T14:41:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29597#issuecomment-553185",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_553186.json:
```json
{
    "body": "<a id='comment:7'></a>\nLooks like the patch failed to apply",
    "created_at": "2020-04-27T14:48:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29597#issuecomment-553186",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:7'></a>
Looks like the patch failed to apply



---

archive/issue_comments_553187.json:
```json
{
    "body": "**Changing commit** from \"[64dc4370412b76e893cc977fd5f5fcbe0f8d2b94](https://github.com/sagemath/sagetrac-mirror/commit/64dc4370412b76e893cc977fd5f5fcbe0f8d2b94)\" to \"[cc0453b440312031f58681d73327bfaf28f809dd](https://github.com/sagemath/sagetrac-mirror/commit/cc0453b440312031f58681d73327bfaf28f809dd)\".",
    "created_at": "2020-04-27T14:55:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29597#issuecomment-553187",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[64dc4370412b76e893cc977fd5f5fcbe0f8d2b94](https://github.com/sagemath/sagetrac-mirror/commit/64dc4370412b76e893cc977fd5f5fcbe0f8d2b94)" to "[cc0453b440312031f58681d73327bfaf28f809dd](https://github.com/sagemath/sagetrac-mirror/commit/cc0453b440312031f58681d73327bfaf28f809dd)".



---

archive/issue_comments_553188.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cc0453b440312031f58681d73327bfaf28f809dd\">cc0453b</a></td><td><code>Update patch for m4rie</code></td></tr></table>\n",
    "created_at": "2020-04-27T14:55:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29597#issuecomment-553188",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cc0453b440312031f58681d73327bfaf28f809dd">cc0453b</a></td><td><code>Update patch for m4rie</code></td></tr></table>




---

archive/issue_comments_553189.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2020-04-27T14:56:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29597#issuecomment-553189",
    "user": "https://github.com/isuruf"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_553190.json:
```json
{
    "body": "<a id='comment:10'></a>\nLet me try",
    "created_at": "2020-04-27T17:46:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29597#issuecomment-553190",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>
Let me try



---

archive/issue_comments_553191.json:
```json
{
    "body": "<a id='comment:11'></a>\nHm... doesn't the release that we use already have this patch in?",
    "created_at": "2020-04-27T19:20:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29597#issuecomment-553191",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>
Hm... doesn't the release that we use already have this patch in?



---

archive/issue_comments_553192.json:
```json
{
    "body": "<a id='comment:12'></a>\nhttps://github.com/mkoeppe/sage/runs/623414296\n\n```\nm4rie-20200115\n====================================================\nSetting up build directory for m4rie-20200115\nFinished extraction\nApplying patches from ../patches...\nApplying ../patches/use_AM_LDLFAGS.patch\npatching file Makefile.am\nHunk #1 FAILED at 2.\n1 out of 1 hunk FAILED -- saving rejects to file Makefile.am.rej\npatching file Makefile.in\nReversed (or previously applied) patch detected!  Assume -R? [n] \nApply anyway? [n] \nSkipping patch.\n2 out of 2 hunks ignored -- saving rejects to file Makefile.in.rej\nError applying '../patches/use_AM_LDLFAGS.patch'\n************************************************************************\n```",
    "created_at": "2020-04-27T19:21:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29597#issuecomment-553192",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>
https://github.com/mkoeppe/sage/runs/623414296

```
m4rie-20200115
====================================================
Setting up build directory for m4rie-20200115
Finished extraction
Applying patches from ../patches...
Applying ../patches/use_AM_LDLFAGS.patch
patching file Makefile.am
Hunk #1 FAILED at 2.
1 out of 1 hunk FAILED -- saving rejects to file Makefile.am.rej
patching file Makefile.in
Reversed (or previously applied) patch detected!  Assume -R? [n] 
Apply anyway? [n] 
Skipping patch.
2 out of 2 hunks ignored -- saving rejects to file Makefile.in.rej
Error applying '../patches/use_AM_LDLFAGS.patch'
************************************************************************
```



---

archive/issue_events_084980.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-28T00:27:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29597",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29597#event-84980"
}
```



---

archive/issue_comments_553193.json:
```json
{
    "body": "<a id='comment:14'></a>\nSomething indeed needs fixing",
    "created_at": "2020-04-28T03:15:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29597#issuecomment-553193",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>
Something indeed needs fixing



---

archive/issue_comments_553194.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2020-04-28T03:15:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29597#issuecomment-553194",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_553195.json:
```json
{
    "body": "**Changing branch** from \"[u/isuruf/m4rie_ldflags](https://github.com/sagemath/sagetrac-mirror/tree/u/isuruf/m4rie_ldflags)\" to \"[u/mkoeppe/m4rie_ldflags](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/m4rie_ldflags)\".",
    "created_at": "2020-04-28T03:38:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29597#issuecomment-553195",
    "user": "https://github.com/mkoeppe"
}
```

**Changing branch** from "[u/isuruf/m4rie_ldflags](https://github.com/sagemath/sagetrac-mirror/tree/u/isuruf/m4rie_ldflags)" to "[u/mkoeppe/m4rie_ldflags](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/m4rie_ldflags)".



---

archive/issue_comments_553196.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/m4rie_ldflags](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/m4rie_ldflags)\" to \"[u/isuruf/m4rie_ldflags](https://github.com/sagemath/sagetrac-mirror/tree/u/isuruf/m4rie_ldflags)\".",
    "created_at": "2020-04-28T03:38:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29597#issuecomment-553196",
    "user": "https://github.com/mkoeppe"
}
```

**Changing branch** from "[u/mkoeppe/m4rie_ldflags](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/m4rie_ldflags)" to "[u/isuruf/m4rie_ldflags](https://github.com/sagemath/sagetrac-mirror/tree/u/isuruf/m4rie_ldflags)".



---

archive/issue_comments_553197.json:
```json
{
    "body": "<a id='comment:16'></a>\nSquashed",
    "created_at": "2020-04-28T03:38:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29597#issuecomment-553197",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>
Squashed



---

archive/issue_events_084981.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-28T03:43:50Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29597",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29597#event-84981"
}
```



---

archive/issue_events_084982.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-28T03:43:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29597",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29597#event-84982"
}
```



---

archive/issue_comments_553198.json:
```json
{
    "body": "**Changing branch** from \"[u/isuruf/m4rie_ldflags](https://github.com/sagemath/sagetrac-mirror/tree/u/isuruf/m4rie_ldflags)\" to \"[u/mkoeppe/m4rie_ldflags](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/m4rie_ldflags)\".",
    "created_at": "2020-04-28T03:45:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29597#issuecomment-553198",
    "user": "https://github.com/mkoeppe"
}
```

**Changing branch** from "[u/isuruf/m4rie_ldflags](https://github.com/sagemath/sagetrac-mirror/tree/u/isuruf/m4rie_ldflags)" to "[u/mkoeppe/m4rie_ldflags](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/m4rie_ldflags)".



---

archive/issue_comments_553199.json:
```json
{
    "body": "<a id='comment:19'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cebd333a26429db1acfb0df50351981c31fd0336\">cebd333</a></td><td><code>Fixup m4rie patch</code></td></tr></table>\n",
    "created_at": "2020-04-28T03:49:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29597#issuecomment-553199",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cebd333a26429db1acfb0df50351981c31fd0336">cebd333</a></td><td><code>Fixup m4rie patch</code></td></tr></table>




---

archive/issue_comments_553200.json:
```json
{
    "body": "**Changing commit** from \"[cc0453b440312031f58681d73327bfaf28f809dd](https://github.com/sagemath/sagetrac-mirror/commit/cc0453b440312031f58681d73327bfaf28f809dd)\" to \"[cebd333a26429db1acfb0df50351981c31fd0336](https://github.com/sagemath/sagetrac-mirror/commit/cebd333a26429db1acfb0df50351981c31fd0336)\".",
    "created_at": "2020-04-28T03:49:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29597#issuecomment-553200",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[cc0453b440312031f58681d73327bfaf28f809dd](https://github.com/sagemath/sagetrac-mirror/commit/cc0453b440312031f58681d73327bfaf28f809dd)" to "[cebd333a26429db1acfb0df50351981c31fd0336](https://github.com/sagemath/sagetrac-mirror/commit/cebd333a26429db1acfb0df50351981c31fd0336)".



---

archive/issue_comments_553201.json:
```json
{
    "body": "<a id='comment:20'></a>\nOK now it works!",
    "created_at": "2020-04-28T03:50:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29597#issuecomment-553201",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'></a>
OK now it works!



---

archive/issue_comments_553202.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2020-04-28T03:50:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29597#issuecomment-553202",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_553203.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2020-04-29T04:25:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29597#issuecomment-553203",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_553204.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/m4rie_ldflags](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/m4rie_ldflags)\" to \"[cebd333a26429db1acfb0df50351981c31fd0336](https://github.com/sagemath/sagetrac-mirror/commit/cebd333a26429db1acfb0df50351981c31fd0336)\".",
    "created_at": "2020-05-04T06:41:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29597#issuecomment-553204",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/mkoeppe/m4rie_ldflags](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/m4rie_ldflags)" to "[cebd333a26429db1acfb0df50351981c31fd0336](https://github.com/sagemath/sagetrac-mirror/commit/cebd333a26429db1acfb0df50351981c31fd0336)".



---

archive/issue_events_084983.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-05-04T06:41:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29597",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29597#event-84983"
}
```
