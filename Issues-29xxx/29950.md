# Issue 29950: Build sagelib from build/pkgs/sagelib/src, fix `setup.py sdist`, add spkg-src and tox.ini

archive/issues_029713.json:
```json
{
    "body": "As a follow-up to #29411, we set up a separate directory `build/pkgs/sagelib/src` with symlinks into `SAGE_ROOT/src` so that sagelib's `setup.py` does not have access to the whole tree `SAGE_ROOT/src`.\n\nWe fix `setup.py sdist`, which can be tested using `spkg-src` (which builds a pip-installable tarball in `upstream/`) and `tox`:\n\n```\n./sage -sh -c '(cd build/pkgs/sagelib/src && tox -v -v)'\n./sage -sh -c 'build/pkgs/sagelib/src/.tox/python/bin/sage-ipython'\n```\n\nThe call of `./sage -sh` is necessary so that `SAGE_LOCAL` is set. \nMoreover, for scripts that use `sage-env`, also `SAGE_ENV_SOURCED` is crucial for the correct operation; otherwise `sage-env` sets things based on `SAGE_LOCAL` again. \n\nCC:  @kiwifb @jhpalmieri @dimpase @kliem @isuruf @vbraun\n\nBranch/Commit: ccc67b0356373330164dd75060f574c184142473\n\nReviewer: Dima Pasechnik\n\nAuthor: Matthias Koeppe\n\nDependencies: #29701\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29950\n\n",
    "closed_at": "2020-08-12T19:53:18Z",
    "created_at": "2020-06-24T02:12:57Z",
    "labels": [
        "component: refactoring"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Build sagelib from build/pkgs/sagelib/src, fix `setup.py sdist`, add spkg-src and tox.ini",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29950",
    "user": "https://github.com/mkoeppe"
}
```
As a follow-up to #29411, we set up a separate directory `build/pkgs/sagelib/src` with symlinks into `SAGE_ROOT/src` so that sagelib's `setup.py` does not have access to the whole tree `SAGE_ROOT/src`.

We fix `setup.py sdist`, which can be tested using `spkg-src` (which builds a pip-installable tarball in `upstream/`) and `tox`:

```
./sage -sh -c '(cd build/pkgs/sagelib/src && tox -v -v)'
./sage -sh -c 'build/pkgs/sagelib/src/.tox/python/bin/sage-ipython'
```

The call of `./sage -sh` is necessary so that `SAGE_LOCAL` is set. 
Moreover, for scripts that use `sage-env`, also `SAGE_ENV_SOURCED` is crucial for the correct operation; otherwise `sage-env` sets things based on `SAGE_LOCAL` again. 

CC:  @kiwifb @jhpalmieri @dimpase @kliem @isuruf @vbraun

Branch/Commit: ccc67b0356373330164dd75060f574c184142473

Reviewer: Dima Pasechnik

Author: Matthias Koeppe

Dependencies: #29701

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29950





---

archive/issue_comments_580929.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/build_sagelib_using_installed_sage_setup\"",
    "created_at": "2020-06-24T02:28:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580929",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/build_sagelib_using_installed_sage_setup"



---

archive/issue_comments_580930.json:
```json
{
    "body": "Changing commit from \"\" to \"1ab75a99c46a00e7424a5d91366097fc32c9a13a\"",
    "created_at": "2020-06-24T02:32:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580930",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "1ab75a99c46a00e7424a5d91366097fc32c9a13a"



---

archive/issue_comments_580931.json:
```json
{
    "body": "<a id='comment:2'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|\n|[0459006](https://github.com/sagemath/sagetrac-mirror/commit/0459006f8ad828e3c3f83004b6db605ec036a0f6)|`.gitignore: Ignore generated files in build/pkgs/*/src`|\n|[1ab75a9](https://github.com/sagemath/sagetrac-mirror/commit/1ab75a99c46a00e7424a5d91366097fc32c9a13a)|`Build sagelib using the installed sage_setup`|",
    "created_at": "2020-06-24T02:32:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580931",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|
|[0459006](https://github.com/sagemath/sagetrac-mirror/commit/0459006f8ad828e3c3f83004b6db605ec036a0f6)|`.gitignore: Ignore generated files in build/pkgs/*/src`|
|[1ab75a9](https://github.com/sagemath/sagetrac-mirror/commit/1ab75a99c46a00e7424a5d91366097fc32c9a13a)|`Build sagelib using the installed sage_setup`|



---

archive/issue_events_094647.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "rename": {
        "from": "Build sagelib using the installed sage_setup",
        "to": "Build sagelib using the installed sage_setup, add spkg-src"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29950#event-94647"
}
```



---

archive/issue_comments_580932.json:
```json
{
    "body": "Changing work_issues from \"\" to \"add spkg-src\"",
    "created_at": "2020-06-24T02:47:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580932",
    "user": "https://github.com/mkoeppe"
}
```

Changing work_issues from "" to "add spkg-src"



---

archive/issue_comments_580933.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2020-06-24T05:04:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580933",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_580934.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|\n|[3d83c12](https://github.com/sagemath/sagetrac-mirror/commit/3d83c125fc0b3fdfe5538805336c84b335c7e77a)|`build/pkgs/sagelib/spkg-src: New`|\n|[a2bde50](https://github.com/sagemath/sagetrac-mirror/commit/a2bde507b741801e970744fbb127a6f9cbf7d06a)|`src/MANIFEST.in: prune .tox`|\n|[4b258d3](https://github.com/sagemath/sagetrac-mirror/commit/4b258d39f92f93e44f04724b50383f3558bc2349)|`src/MANIFEST.in: Remove bitrotted file`|\n|[a29cd2d](https://github.com/sagemath/sagetrac-mirror/commit/a29cd2d79dd84d9653f9f0ea38466f846edb0e4f)|`build/pkgs/sagelib/MANIFEST.in: New`|",
    "created_at": "2020-06-25T06:32:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580934",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|
|[3d83c12](https://github.com/sagemath/sagetrac-mirror/commit/3d83c125fc0b3fdfe5538805336c84b335c7e77a)|`build/pkgs/sagelib/spkg-src: New`|
|[a2bde50](https://github.com/sagemath/sagetrac-mirror/commit/a2bde507b741801e970744fbb127a6f9cbf7d06a)|`src/MANIFEST.in: prune .tox`|
|[4b258d3](https://github.com/sagemath/sagetrac-mirror/commit/4b258d39f92f93e44f04724b50383f3558bc2349)|`src/MANIFEST.in: Remove bitrotted file`|
|[a29cd2d](https://github.com/sagemath/sagetrac-mirror/commit/a29cd2d79dd84d9653f9f0ea38466f846edb0e4f)|`build/pkgs/sagelib/MANIFEST.in: New`|



---

archive/issue_comments_580935.json:
```json
{
    "body": "Changing commit from \"1ab75a99c46a00e7424a5d91366097fc32c9a13a\" to \"a29cd2d79dd84d9653f9f0ea38466f846edb0e4f\"",
    "created_at": "2020-06-25T06:32:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580935",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "1ab75a99c46a00e7424a5d91366097fc32c9a13a" to "a29cd2d79dd84d9653f9f0ea38466f846edb0e4f"



---

archive/issue_comments_580936.json:
```json
{
    "body": "Changing work_issues from \"add spkg-src\" to \"Fixup MANIFEST.in\"",
    "created_at": "2020-06-25T06:45:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580936",
    "user": "https://github.com/mkoeppe"
}
```

Changing work_issues from "add spkg-src" to "Fixup MANIFEST.in"



---

archive/issue_comments_580937.json:
```json
{
    "body": "<a id='comment:8'></a>\nsdist is broken: Files named `**` end up in the tar file.",
    "created_at": "2020-06-28T16:25:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580937",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
sdist is broken: Files named `**` end up in the tar file.



---

archive/issue_comments_580938.json:
```json
{
    "body": "Changing dependencies from \"#29411, #29847\" to \"#29411, #29847, #29701\"",
    "created_at": "2020-06-28T16:26:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580938",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29411, #29847" to "#29411, #29847, #29701"



---

archive/issue_comments_580939.json:
```json
{
    "body": "<a id='comment:10'></a>\nhttps://github.com/sagemath/cypari2/issues/93",
    "created_at": "2020-06-28T18:18:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580939",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>
https://github.com/sagemath/cypari2/issues/93



---

archive/issue_comments_580940.json:
```json
{
    "body": "<a id='comment:11'></a>\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n|                                                                                                                                           |                                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[7f8850a](https://github.com/sagemath/sagetrac-mirror/commit/7f8850adc52d8798852646b550f4f9c88b30b468)|`src/module_list.py: Document that it is obsolete`|\n|[26a85a4](https://github.com/sagemath/sagetrac-mirror/commit/26a85a4303d4774427d173cae932ad48b5ac5926)|`Merge branch 't/29702/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup' into t/29701/replace_use_of_module_list_optionalextension`|\n|[5d5803e](https://github.com/sagemath/sagetrac-mirror/commit/5d5803ef5920f894bcac69ed1268e1e03ea9dd5e)|`src/sage/graphs/planarity.pyx: Add forgotten distutils directive`|\n|[a0be9b6](https://github.com/sagemath/sagetrac-mirror/commit/a0be9b64ce3623fe4470d7b2483d21f343225ca7)|`Merge branch 't/29790/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_5__sage_graphs_' into t/29701/replace_use_of_module_list_optionalextension`|\n|[14396af](https://github.com/sagemath/sagetrac-mirror/commit/14396af45af31c8f3a48d934d0e1ad424712ba4c)|`Merge tag '9.2.beta2' into t/29701/replace_use_of_module_list_optionalextension`|\n|[821e337](https://github.com/sagemath/sagetrac-mirror/commit/821e33757098467c10108f7e467a1634150b5d0f)|`Merge branch 't/29701/replace_use_of_module_list_optionalextension' into t/29950/build_sagelib_using_installed_sage_setup`|\n|[eeb6ba4](https://github.com/sagemath/sagetrac-mirror/commit/eeb6ba458a2fd725e91f578db4d15156005d270e)|`build/pkgs/sagelib/src/requirements.txt, tox.ini: New`|\n|[ce8b84d](https://github.com/sagemath/sagetrac-mirror/commit/ce8b84da913604989f28945fa0dd08833ccadda0)|`build/pkgs/sagelib/src/MANIFEST.in: Prune sage/ext/interpreters`|\n|[a9a1335](https://github.com/sagemath/sagetrac-mirror/commit/a9a1335840197b854b78957dc6a8b59666323633)|`build/pkgs/sagelib/src/requirements.txt: Add packages required for runtime`|\n|[c3b8f8f](https://github.com/sagemath/sagetrac-mirror/commit/c3b8f8f057647eca8725a7a35a415c1cc3e19d4b)|`Suggest tox -v -v`|",
    "created_at": "2020-06-28T18:26:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580940",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
|                                                                                                                                           |                                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[7f8850a](https://github.com/sagemath/sagetrac-mirror/commit/7f8850adc52d8798852646b550f4f9c88b30b468)|`src/module_list.py: Document that it is obsolete`|
|[26a85a4](https://github.com/sagemath/sagetrac-mirror/commit/26a85a4303d4774427d173cae932ad48b5ac5926)|`Merge branch 't/29702/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup' into t/29701/replace_use_of_module_list_optionalextension`|
|[5d5803e](https://github.com/sagemath/sagetrac-mirror/commit/5d5803ef5920f894bcac69ed1268e1e03ea9dd5e)|`src/sage/graphs/planarity.pyx: Add forgotten distutils directive`|
|[a0be9b6](https://github.com/sagemath/sagetrac-mirror/commit/a0be9b64ce3623fe4470d7b2483d21f343225ca7)|`Merge branch 't/29790/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_5__sage_graphs_' into t/29701/replace_use_of_module_list_optionalextension`|
|[14396af](https://github.com/sagemath/sagetrac-mirror/commit/14396af45af31c8f3a48d934d0e1ad424712ba4c)|`Merge tag '9.2.beta2' into t/29701/replace_use_of_module_list_optionalextension`|
|[821e337](https://github.com/sagemath/sagetrac-mirror/commit/821e33757098467c10108f7e467a1634150b5d0f)|`Merge branch 't/29701/replace_use_of_module_list_optionalextension' into t/29950/build_sagelib_using_installed_sage_setup`|
|[eeb6ba4](https://github.com/sagemath/sagetrac-mirror/commit/eeb6ba458a2fd725e91f578db4d15156005d270e)|`build/pkgs/sagelib/src/requirements.txt, tox.ini: New`|
|[ce8b84d](https://github.com/sagemath/sagetrac-mirror/commit/ce8b84da913604989f28945fa0dd08833ccadda0)|`build/pkgs/sagelib/src/MANIFEST.in: Prune sage/ext/interpreters`|
|[a9a1335](https://github.com/sagemath/sagetrac-mirror/commit/a9a1335840197b854b78957dc6a8b59666323633)|`build/pkgs/sagelib/src/requirements.txt: Add packages required for runtime`|
|[c3b8f8f](https://github.com/sagemath/sagetrac-mirror/commit/c3b8f8f057647eca8725a7a35a415c1cc3e19d4b)|`Suggest tox -v -v`|



---

archive/issue_comments_580941.json:
```json
{
    "body": "Changing commit from \"a29cd2d79dd84d9653f9f0ea38466f846edb0e4f\" to \"c3b8f8f057647eca8725a7a35a415c1cc3e19d4b\"",
    "created_at": "2020-06-28T18:26:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580941",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a29cd2d79dd84d9653f9f0ea38466f846edb0e4f" to "c3b8f8f057647eca8725a7a35a415c1cc3e19d4b"



---

archive/issue_comments_580942.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,8 @@\n-After #29411 and #29847, we set up a separate directory `build/pkgs/sagelib/src` with symlinks into `SAGE_ROOT/src` so that sagelib's `setup.py` does not have access to the whole tree `SAGE_ROOT/src`. In particular, we arrange for the installed `sage_setup` (#29847), rather than the one from the source tree, to be used.\n+As a follow-up to #29411, we set up a separate directory `build/pkgs/sagelib/src` with symlinks into `SAGE_ROOT/src` so that sagelib's `setup.py` does not have access to the whole tree `SAGE_ROOT/src`.\n \n+We fix `setup.py sdist`, which can be tested using `spkg-src` and `tox`.\n+\n+```\n+./sage -sh -c '(cd build/pkgs/sagelib/src && tox -v -v)'\n+```\n+\n``````\n",
    "created_at": "2020-06-28T18:29:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580942",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,8 @@
-After #29411 and #29847, we set up a separate directory `build/pkgs/sagelib/src` with symlinks into `SAGE_ROOT/src` so that sagelib's `setup.py` does not have access to the whole tree `SAGE_ROOT/src`. In particular, we arrange for the installed `sage_setup` (#29847), rather than the one from the source tree, to be used.
+As a follow-up to #29411, we set up a separate directory `build/pkgs/sagelib/src` with symlinks into `SAGE_ROOT/src` so that sagelib's `setup.py` does not have access to the whole tree `SAGE_ROOT/src`.
 
+We fix `setup.py sdist`, which can be tested using `spkg-src` and `tox`.
+
+```
+./sage -sh -c '(cd build/pkgs/sagelib/src && tox -v -v)'
+```
+
``````




---

archive/issue_comments_580943.json:
```json
{
    "body": "Changing work_issues from \"Fixup MANIFEST.in\" to \"Rebase away from #29847\"",
    "created_at": "2020-06-28T18:29:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580943",
    "user": "https://github.com/mkoeppe"
}
```

Changing work_issues from "Fixup MANIFEST.in" to "Rebase away from #29847"



---

archive/issue_events_094648.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "rename": {
        "from": "Build sagelib using the installed sage_setup, add spkg-src",
        "to": "Build sagelib from build/pkgs/sagelib/src, fix `setup.py sdist`, add spkg-src and tox.ini"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29950#event-94648"
}
```



---

archive/issue_comments_580944.json:
```json
{
    "body": "<a id='comment:13'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|\n|[cdf501f](https://github.com/sagemath/sagetrac-mirror/commit/cdf501f96008303331b78fa398aa039a080c23fb)|`build/pkgs/sagelib/spkg-src: New`|\n|[ef4f5b8](https://github.com/sagemath/sagetrac-mirror/commit/ef4f5b8b6536243e494faa80148cf0bbb0b348b4)|`Move src/MANIFEST.in to build/pkgs/sagelib/MANIFEST.in, fix up`|\n|[233f6ba](https://github.com/sagemath/sagetrac-mirror/commit/233f6baf8f2d701104232601ad6fb7362fef7071)|`build/pkgs/sagelib/src/requirements.txt, tox.ini: New`|\n|[177cd4c](https://github.com/sagemath/sagetrac-mirror/commit/177cd4c40a9f74a547f605375ad501aa986c39ec)|`build/pkgs/sagelib/src/MANIFEST.in: Prune sage/ext/interpreters`|\n|[07b29fb](https://github.com/sagemath/sagetrac-mirror/commit/07b29fbe8af49c018f4b6453fe31225f7a9bc53c)|`build/pkgs/sagelib/src/requirements.txt: Add packages required for runtime`|\n|[ad33705](https://github.com/sagemath/sagetrac-mirror/commit/ad3370590f559c4a13132896d31054b939ffaea5)|`Suggest tox -v -v`|\n|[481e212](https://github.com/sagemath/sagetrac-mirror/commit/481e2128aa39dd1f9961955e51575d6bebb5031b)|`.gitignore: Ignore generated files in build/pkgs/*/src`|\n|[9955a3f](https://github.com/sagemath/sagetrac-mirror/commit/9955a3ff69870ff844e5ebb45cf47c4b6f214263)|`Build sagelib from build/pkgs/sagelib/src`|",
    "created_at": "2020-06-28T19:04:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580944",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|
|[cdf501f](https://github.com/sagemath/sagetrac-mirror/commit/cdf501f96008303331b78fa398aa039a080c23fb)|`build/pkgs/sagelib/spkg-src: New`|
|[ef4f5b8](https://github.com/sagemath/sagetrac-mirror/commit/ef4f5b8b6536243e494faa80148cf0bbb0b348b4)|`Move src/MANIFEST.in to build/pkgs/sagelib/MANIFEST.in, fix up`|
|[233f6ba](https://github.com/sagemath/sagetrac-mirror/commit/233f6baf8f2d701104232601ad6fb7362fef7071)|`build/pkgs/sagelib/src/requirements.txt, tox.ini: New`|
|[177cd4c](https://github.com/sagemath/sagetrac-mirror/commit/177cd4c40a9f74a547f605375ad501aa986c39ec)|`build/pkgs/sagelib/src/MANIFEST.in: Prune sage/ext/interpreters`|
|[07b29fb](https://github.com/sagemath/sagetrac-mirror/commit/07b29fbe8af49c018f4b6453fe31225f7a9bc53c)|`build/pkgs/sagelib/src/requirements.txt: Add packages required for runtime`|
|[ad33705](https://github.com/sagemath/sagetrac-mirror/commit/ad3370590f559c4a13132896d31054b939ffaea5)|`Suggest tox -v -v`|
|[481e212](https://github.com/sagemath/sagetrac-mirror/commit/481e2128aa39dd1f9961955e51575d6bebb5031b)|`.gitignore: Ignore generated files in build/pkgs/*/src`|
|[9955a3f](https://github.com/sagemath/sagetrac-mirror/commit/9955a3ff69870ff844e5ebb45cf47c4b6f214263)|`Build sagelib from build/pkgs/sagelib/src`|



---

archive/issue_comments_580945.json:
```json
{
    "body": "Changing commit from \"c3b8f8f057647eca8725a7a35a415c1cc3e19d4b\" to \"9955a3ff69870ff844e5ebb45cf47c4b6f214263\"",
    "created_at": "2020-06-28T19:04:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580945",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c3b8f8f057647eca8725a7a35a415c1cc3e19d4b" to "9955a3ff69870ff844e5ebb45cf47c4b6f214263"



---

archive/issue_comments_580946.json:
```json
{
    "body": "Changing dependencies from \"#29411, #29847, #29701\" to \"#29411, #29701\"",
    "created_at": "2020-06-28T19:04:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580946",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29411, #29847, #29701" to "#29411, #29701"



---

archive/issue_comments_580947.json:
```json
{
    "body": "Changing work_issues from \"Rebase away from #29847\" to \"\"",
    "created_at": "2020-06-28T19:04:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580947",
    "user": "https://github.com/mkoeppe"
}
```

Changing work_issues from "Rebase away from #29847" to ""



---

archive/issue_comments_580948.json:
```json
{
    "body": "<a id='comment:15'></a>\n\n```\n    from .maxima import maxima, Maxima\n  File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sagelib/src/.tox/python/lib/python3.7/site-packages/sage/interfaces/maxima.py\", line 1236, in <module>\n    script_subdirectory=None)\n  File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sagelib/src/.tox/python/lib/python3.7/site-packages/sage/interfaces/maxima.py\", line 528, in __init__\n    raise RuntimeError('You must get the file local/bin/sage-maxima.lisp')\nRuntimeError: You must get the file local/bin/sage-maxima.lisp\n```",
    "created_at": "2020-06-28T19:07:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580948",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>

```
    from .maxima import maxima, Maxima
  File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sagelib/src/.tox/python/lib/python3.7/site-packages/sage/interfaces/maxima.py", line 1236, in <module>
    script_subdirectory=None)
  File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sagelib/src/.tox/python/lib/python3.7/site-packages/sage/interfaces/maxima.py", line 528, in __init__
    raise RuntimeError('You must get the file local/bin/sage-maxima.lisp')
RuntimeError: You must get the file local/bin/sage-maxima.lisp
```



---

archive/issue_comments_580949.json:
```json
{
    "body": "Changing dependencies from \"#29411, #29701\" to \"#29411, #29701, #27171\"",
    "created_at": "2020-06-28T19:14:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580949",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29411, #29701" to "#29411, #29701, #27171"



---

archive/issue_comments_580950.json:
```json
{
    "body": "Changing dependencies from \"#29411, #29701, #27171\" to \"#29411, #29701, #21559\"",
    "created_at": "2020-06-28T19:18:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580950",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29411, #29701, #27171" to "#29411, #29701, #21559"



---

archive/issue_comments_580951.json:
```json
{
    "body": "<a id='comment:18'></a>\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n|                                                                                                                                           |                                                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------|\n|[875940d](https://github.com/sagemath/sagetrac-mirror/commit/875940dea7853575e42f567759bcaa5392d6c5b3)|`trac 29111: more tinkering. Fix doctests in tests/cmdline.py.`|\n|[4a3d36e](https://github.com/sagemath/sagetrac-mirror/commit/4a3d36eb78976d31d9d27623712b2af7b6b74006)|`Move 'sage -app' back to src/bin/sage`|\n|[3a0193c](https://github.com/sagemath/sagetrac-mirror/commit/3a0193c9f0a12407ac3708fea6d70c9b72d4f864)|`src/bin/sage: Remove handling of 'sage -axiom'`|\n|[6b04075](https://github.com/sagemath/sagetrac-mirror/commit/6b04075aca84249a2418a365f31ea4a0978461a8)|`Merge branch 't/29111/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution' into t/21559/change-src-bin-installation`|\n|[9c7116b](https://github.com/sagemath/sagetrac-mirror/commit/9c7116b5cb5bb36cfa4834719d7cd4220fae0d91)|`src/bin/sage-list-optional, sage-list-experimental, sage-list-standard: Remove deprecated scripts`|\n|[831cc09](https://github.com/sagemath/sagetrac-mirror/commit/831cc09d32828144a27f7bc8c8b2f70150ed0047)|`Merge branch 't/29920/remove_deprecated_scripts_sage_list_optional__sage_list_experimental__sage_list_standard' into t/21559/change-src-bin-installation`|\n|[a56dc35](https://github.com/sagemath/sagetrac-mirror/commit/a56dc35031486df9378f17c2d2ae6405946fac25)|`Merge tag '9.2.beta1' into t/29702/public/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup`|\n|[e3eca85](https://github.com/sagemath/sagetrac-mirror/commit/e3eca857db71b602cf2c7c16755ab2cdeaca1773)|`Merge branch 'public/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup' of git://trac.sagemath.org/sage into t/21559/change-src-bin-installation`|\n|[7d29141](https://github.com/sagemath/sagetrac-mirror/commit/7d29141662fe9ffd80c61e8867153244004d0a37)|`src/setup.py: Do not install removed script sage-rsyncdist`|\n|[08f5175](https://github.com/sagemath/sagetrac-mirror/commit/08f5175bdf71236ccf3e80f6efaffa83d5edc532)|`Merge branch 'u/mkoeppe/change-src-bin-installation' of git://trac.sagemath.org/sage into t/29950/build_sagelib_using_installed_sage_setup`|",
    "created_at": "2020-06-28T19:19:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580951",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
|                                                                                                                                           |                                                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------|
|[875940d](https://github.com/sagemath/sagetrac-mirror/commit/875940dea7853575e42f567759bcaa5392d6c5b3)|`trac 29111: more tinkering. Fix doctests in tests/cmdline.py.`|
|[4a3d36e](https://github.com/sagemath/sagetrac-mirror/commit/4a3d36eb78976d31d9d27623712b2af7b6b74006)|`Move 'sage -app' back to src/bin/sage`|
|[3a0193c](https://github.com/sagemath/sagetrac-mirror/commit/3a0193c9f0a12407ac3708fea6d70c9b72d4f864)|`src/bin/sage: Remove handling of 'sage -axiom'`|
|[6b04075](https://github.com/sagemath/sagetrac-mirror/commit/6b04075aca84249a2418a365f31ea4a0978461a8)|`Merge branch 't/29111/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution' into t/21559/change-src-bin-installation`|
|[9c7116b](https://github.com/sagemath/sagetrac-mirror/commit/9c7116b5cb5bb36cfa4834719d7cd4220fae0d91)|`src/bin/sage-list-optional, sage-list-experimental, sage-list-standard: Remove deprecated scripts`|
|[831cc09](https://github.com/sagemath/sagetrac-mirror/commit/831cc09d32828144a27f7bc8c8b2f70150ed0047)|`Merge branch 't/29920/remove_deprecated_scripts_sage_list_optional__sage_list_experimental__sage_list_standard' into t/21559/change-src-bin-installation`|
|[a56dc35](https://github.com/sagemath/sagetrac-mirror/commit/a56dc35031486df9378f17c2d2ae6405946fac25)|`Merge tag '9.2.beta1' into t/29702/public/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup`|
|[e3eca85](https://github.com/sagemath/sagetrac-mirror/commit/e3eca857db71b602cf2c7c16755ab2cdeaca1773)|`Merge branch 'public/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup' of git://trac.sagemath.org/sage into t/21559/change-src-bin-installation`|
|[7d29141](https://github.com/sagemath/sagetrac-mirror/commit/7d29141662fe9ffd80c61e8867153244004d0a37)|`src/setup.py: Do not install removed script sage-rsyncdist`|
|[08f5175](https://github.com/sagemath/sagetrac-mirror/commit/08f5175bdf71236ccf3e80f6efaffa83d5edc532)|`Merge branch 'u/mkoeppe/change-src-bin-installation' of git://trac.sagemath.org/sage into t/29950/build_sagelib_using_installed_sage_setup`|



---

archive/issue_comments_580952.json:
```json
{
    "body": "Changing commit from \"9955a3ff69870ff844e5ebb45cf47c4b6f214263\" to \"08f5175bdf71236ccf3e80f6efaffa83d5edc532\"",
    "created_at": "2020-06-28T19:19:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580952",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9955a3ff69870ff844e5ebb45cf47c4b6f214263" to "08f5175bdf71236ccf3e80f6efaffa83d5edc532"



---

archive/issue_comments_580953.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n As a follow-up to #29411, we set up a separate directory `build/pkgs/sagelib/src` with symlinks into `SAGE_ROOT/src` so that sagelib's `setup.py` does not have access to the whole tree `SAGE_ROOT/src`.\n \n-We fix `setup.py sdist`, which can be tested using `spkg-src` and `tox`.\n+We fix `setup.py sdist`, which can be tested using `spkg-src` (which builds a pip-installable tarball in `upstream/`) and `tox`:\n \n ```\n ./sage -sh -c '(cd build/pkgs/sagelib/src && tox -v -v)'\n``````\n",
    "created_at": "2020-06-28T19:31:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580953",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 As a follow-up to #29411, we set up a separate directory `build/pkgs/sagelib/src` with symlinks into `SAGE_ROOT/src` so that sagelib's `setup.py` does not have access to the whole tree `SAGE_ROOT/src`.
 
-We fix `setup.py sdist`, which can be tested using `spkg-src` and `tox`.
+We fix `setup.py sdist`, which can be tested using `spkg-src` (which builds a pip-installable tarball in `upstream/`) and `tox`:
 
 ```
 ./sage -sh -c '(cd build/pkgs/sagelib/src && tox -v -v)'
``````




---

archive/issue_comments_580954.json:
```json
{
    "body": "<a id='comment:20'></a>\n\n```\n./sage -sh -c '(cd build/pkgs/sagelib/src && tox -r -v -v)'\n...\nRuntimeError: libSingular not found--a working Singular install in $SAGE_LOCAL is required for Sage to work\nERROR: InvocationError for command /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sagelib/src/.tox/python/bin/python -c 'import sys; \"\" in sys.path and sys.path.remove(\"\"); import sage.all' (exited with code 1)\n```\n\nThis is because of:\n\n```\n$ build/pkgs/sagelib/src/.tox/python/bin/python\nPython 3.7.7 (v3.7.7:d7c567b08f, Mar 10 2020, 02:56:16) \n[Clang 6.0 (clang-600.0.57)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import sage.env\n>>> sage.env.SINGULAR_SO\n>>> sage.env.GAP_SO\n>>> sage.env.SAGE_LOCAL\n'/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sagelib/src/.tox/python'\n>>> \n```",
    "created_at": "2020-06-28T20:36:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580954",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'></a>

```
./sage -sh -c '(cd build/pkgs/sagelib/src && tox -r -v -v)'
...
RuntimeError: libSingular not found--a working Singular install in $SAGE_LOCAL is required for Sage to work
ERROR: InvocationError for command /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sagelib/src/.tox/python/bin/python -c 'import sys; "" in sys.path and sys.path.remove(""); import sage.all' (exited with code 1)
```

This is because of:

```
$ build/pkgs/sagelib/src/.tox/python/bin/python
Python 3.7.7 (v3.7.7:d7c567b08f, Mar 10 2020, 02:56:16) 
[Clang 6.0 (clang-600.0.57)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import sage.env
>>> sage.env.SINGULAR_SO
>>> sage.env.GAP_SO
>>> sage.env.SAGE_LOCAL
'/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sagelib/src/.tox/python'
>>> 
```



---

archive/issue_comments_580955.json:
```json
{
    "body": "<a id='comment:21'></a>\nPassing the correct `SAGE_LOCAL` suffices to fix this, of course. But the singular library location should be configured separately (#29024).",
    "created_at": "2020-06-28T20:48:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580955",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'></a>
Passing the correct `SAGE_LOCAL` suffices to fix this, of course. But the singular library location should be configured separately (#29024).



---

archive/issue_comments_580956.json:
```json
{
    "body": "Changing commit from \"08f5175bdf71236ccf3e80f6efaffa83d5edc532\" to \"516358b66059dbf458ed7c970ff05923b539b71c\"",
    "created_at": "2020-06-28T20:48:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580956",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "08f5175bdf71236ccf3e80f6efaffa83d5edc532" to "516358b66059dbf458ed7c970ff05923b539b71c"



---

archive/issue_comments_580957.json:
```json
{
    "body": "<a id='comment:22'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[516358b](https://github.com/sagemath/sagetrac-mirror/commit/516358b66059dbf458ed7c970ff05923b539b71c)|`build/pkgs/sagelib/src/tox.ini: Pass SAGE_LOCAL`|",
    "created_at": "2020-06-28T20:48:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580957",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[516358b](https://github.com/sagemath/sagetrac-mirror/commit/516358b66059dbf458ed7c970ff05923b539b71c)|`build/pkgs/sagelib/src/tox.ini: Pass SAGE_LOCAL`|



---

archive/issue_comments_580958.json:
```json
{
    "body": "Changing commit from \"516358b66059dbf458ed7c970ff05923b539b71c\" to \"eaced098339d5c7655244667b3dd1c90f5fd7f9e\"",
    "created_at": "2020-06-28T22:52:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580958",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "516358b66059dbf458ed7c970ff05923b539b71c" to "eaced098339d5c7655244667b3dd1c90f5fd7f9e"



---

archive/issue_comments_580959.json:
```json
{
    "body": "<a id='comment:23'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------|\n|[d62da15](https://github.com/sagemath/sagetrac-mirror/commit/d62da1559ca1448b07962ea69fcde212cfea75f0)|`sage_setup.command.sage_build: Add the extensions to the distribution`|\n|[5e577ab](https://github.com/sagemath/sagetrac-mirror/commit/5e577ab0bc470fb6d74500b5e855b3b6f828dd50)|`Merge branch 't/29701/replace_use_of_module_list_optionalextension' into t/29950/build_sagelib_using_installed_sage_setup`|\n|[eaced09](https://github.com/sagemath/sagetrac-mirror/commit/eaced098339d5c7655244667b3dd1c90f5fd7f9e)|`build/pkgs/sagelib: Add remaining Python dependencies for sage.all`|",
    "created_at": "2020-06-28T22:52:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580959",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------|
|[d62da15](https://github.com/sagemath/sagetrac-mirror/commit/d62da1559ca1448b07962ea69fcde212cfea75f0)|`sage_setup.command.sage_build: Add the extensions to the distribution`|
|[5e577ab](https://github.com/sagemath/sagetrac-mirror/commit/5e577ab0bc470fb6d74500b5e855b3b6f828dd50)|`Merge branch 't/29701/replace_use_of_module_list_optionalextension' into t/29950/build_sagelib_using_installed_sage_setup`|
|[eaced09](https://github.com/sagemath/sagetrac-mirror/commit/eaced098339d5c7655244667b3dd1c90f5fd7f9e)|`build/pkgs/sagelib: Add remaining Python dependencies for sage.all`|



---

archive/issue_comments_580960.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,5 +4,6 @@\n \n ```\n ./sage -sh -c '(cd build/pkgs/sagelib/src && tox -v -v)'\n+./sage -sh -c 'build/pkgs/sagelib/src/.tox/python/bin/sage-ipython'\n ```\n \n``````\n",
    "created_at": "2020-06-28T23:03:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580960",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,5 +4,6 @@
 
 ```
 ./sage -sh -c '(cd build/pkgs/sagelib/src && tox -v -v)'
+./sage -sh -c 'build/pkgs/sagelib/src/.tox/python/bin/sage-ipython'
 ```
 
``````




---

archive/issue_comments_580961.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-06-28T23:08:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580961",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_580962.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,3 +7,5 @@\n ./sage -sh -c 'build/pkgs/sagelib/src/.tox/python/bin/sage-ipython'\n ```\n \n+Scripts installed into the tox virtual environment that use `sage-env` do not work yet -- `sage-env` sets things based on `SAGE_LOCAL` again.\n+\n``````\n",
    "created_at": "2020-06-28T23:08:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580962",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,3 +7,5 @@
 ./sage -sh -c 'build/pkgs/sagelib/src/.tox/python/bin/sage-ipython'
 ```
 
+Scripts installed into the tox virtual environment that use `sage-env` do not work yet -- `sage-env` sets things based on `SAGE_LOCAL` again.
+
``````




---

archive/issue_comments_580963.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,5 +7,5 @@\n ./sage -sh -c 'build/pkgs/sagelib/src/.tox/python/bin/sage-ipython'\n ```\n \n-Scripts installed into the tox virtual environment that use `sage-env` do not work yet -- `sage-env` sets things based on `SAGE_LOCAL` again.\n-\n+The call of `./sage -sh` is necessary so that `SAGE_LOCAL` is set. \n+Moreover, for scripts that use `sage-env`, also `SAGE_ENV_SOURCED` is crucial for the correct operation; otherwise `sage-env` sets things based on `SAGE_LOCAL` again. \n``````\n",
    "created_at": "2020-06-28T23:54:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580963",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,5 +7,5 @@
 ./sage -sh -c 'build/pkgs/sagelib/src/.tox/python/bin/sage-ipython'
 ```
 
-Scripts installed into the tox virtual environment that use `sage-env` do not work yet -- `sage-env` sets things based on `SAGE_LOCAL` again.
-
+The call of `./sage -sh` is necessary so that `SAGE_LOCAL` is set. 
+Moreover, for scripts that use `sage-env`, also `SAGE_ENV_SOURCED` is crucial for the correct operation; otherwise `sage-env` sets things based on `SAGE_LOCAL` again. 
``````




---

archive/issue_comments_580964.json:
```json
{
    "body": "<a id='comment:27'></a>\nThe `sage` script relies on `PATH` to be set correctly when invoking auxiliary scripts such as `sage-eval`.  Hence the following does not work correctly:\n\n```\n$ ./sage -sh -c 'build/pkgs/sagelib/src/.tox/python/bin/sage -c \"print(sys.path)\"'\n['/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/src/bin', '/Library/Frameworks/Python.framework/Versions/3.7/lib/python37.zip', '/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7', '/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/lib-dynload', '/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/local/lib/python3.7/site-packages']\n```",
    "created_at": "2020-06-28T23:54:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580964",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>
The `sage` script relies on `PATH` to be set correctly when invoking auxiliary scripts such as `sage-eval`.  Hence the following does not work correctly:

```
$ ./sage -sh -c 'build/pkgs/sagelib/src/.tox/python/bin/sage -c "print(sys.path)"'
['/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/src/bin', '/Library/Frameworks/Python.framework/Versions/3.7/lib/python37.zip', '/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7', '/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/lib-dynload', '/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/local/lib/python3.7/site-packages']
```



---

archive/issue_comments_580965.json:
```json
{
    "body": "<a id='comment:28'></a>\nThis will be fixed by #30013 (`src/bin/sage-env`: Make sure `SAGE_SCRIPTS_DIR` is at the beginning of the `PATH`).",
    "created_at": "2020-06-29T00:10:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580965",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:28'></a>
This will be fixed by #30013 (`src/bin/sage-env`: Make sure `SAGE_SCRIPTS_DIR` is at the beginning of the `PATH`).



---

archive/issue_comments_580966.json:
```json
{
    "body": "<a id='comment:29'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|\n|[b8e366e](https://github.com/sagemath/sagetrac-mirror/commit/b8e366ec56a9d3527c81df9d8d4206afc2562be4)|`build/pkgs/sagelib/spkg-src: chmod +x`|",
    "created_at": "2020-06-29T00:11:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580966",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|
|[b8e366e](https://github.com/sagemath/sagetrac-mirror/commit/b8e366ec56a9d3527c81df9d8d4206afc2562be4)|`build/pkgs/sagelib/spkg-src: chmod +x`|



---

archive/issue_comments_580967.json:
```json
{
    "body": "Changing commit from \"eaced098339d5c7655244667b3dd1c90f5fd7f9e\" to \"b8e366ec56a9d3527c81df9d8d4206afc2562be4\"",
    "created_at": "2020-06-29T00:11:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580967",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "eaced098339d5c7655244667b3dd1c90f5fd7f9e" to "b8e366ec56a9d3527c81df9d8d4206afc2562be4"



---

archive/issue_comments_580968.json:
```json
{
    "body": "<a id='comment:31'></a>\nAll dependencies of this ticket are green. Ready for review.",
    "created_at": "2020-07-02T20:14:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580968",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:31'></a>
All dependencies of this ticket are green. Ready for review.



---

archive/issue_comments_580969.json:
```json
{
    "body": "<a id='comment:32'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------|\n|[c5f7f2f](https://github.com/sagemath/sagetrac-mirror/commit/c5f7f2fb29d376c6bb103e2f070f92690c689161)|`Merge tag '9.2.beta3' into t/21559/change-src-bin-installation`|\n|[0473ef3](https://github.com/sagemath/sagetrac-mirror/commit/0473ef3670f0a39c7d0141c09b9e9fc738d3d0b2)|`Merge branch 't/21559/change-src-bin-installation' into t/29950/build_sagelib_using_installed_sage_setup`|\n|[06a3609](https://github.com/sagemath/sagetrac-mirror/commit/06a360974cc56699a85f291494a493fed041dbc9)|`sage_setup.find.find_python_sources: Add benchmark doctest`|\n|[174626c](https://github.com/sagemath/sagetrac-mirror/commit/174626c7f81e7b9417bbad49fd110144a07165a6)|`Merge branch 't/29786/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_4__sage_rings_' into t/29701/replace_use_of_module_list_optionalextension`|\n|[034a7f7](https://github.com/sagemath/sagetrac-mirror/commit/034a7f71a52fffc9a6566bda3e63abccdb5d6825)|`Merge branch 'public/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup' of git://trac.sagemath.org/sage into t/29701/replace_use_of_module_list_optionalextension`|\n|[d3c608b](https://github.com/sagemath/sagetrac-mirror/commit/d3c608b0d59077ef2ec58d32a5da0dccdbcddfd8)|`Merge tag '9.2.beta3' into t/29701/replace_use_of_module_list_optionalextension`|\n|[7244371](https://github.com/sagemath/sagetrac-mirror/commit/72443711047daa51d1ba92b087ec9022b2eeef06)|`Merge branch 't/29701/replace_use_of_module_list_optionalextension' into t/29950/build_sagelib_using_installed_sage_setup`|",
    "created_at": "2020-07-04T16:30:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580969",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------|
|[c5f7f2f](https://github.com/sagemath/sagetrac-mirror/commit/c5f7f2fb29d376c6bb103e2f070f92690c689161)|`Merge tag '9.2.beta3' into t/21559/change-src-bin-installation`|
|[0473ef3](https://github.com/sagemath/sagetrac-mirror/commit/0473ef3670f0a39c7d0141c09b9e9fc738d3d0b2)|`Merge branch 't/21559/change-src-bin-installation' into t/29950/build_sagelib_using_installed_sage_setup`|
|[06a3609](https://github.com/sagemath/sagetrac-mirror/commit/06a360974cc56699a85f291494a493fed041dbc9)|`sage_setup.find.find_python_sources: Add benchmark doctest`|
|[174626c](https://github.com/sagemath/sagetrac-mirror/commit/174626c7f81e7b9417bbad49fd110144a07165a6)|`Merge branch 't/29786/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_4__sage_rings_' into t/29701/replace_use_of_module_list_optionalextension`|
|[034a7f7](https://github.com/sagemath/sagetrac-mirror/commit/034a7f71a52fffc9a6566bda3e63abccdb5d6825)|`Merge branch 'public/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup' of git://trac.sagemath.org/sage into t/29701/replace_use_of_module_list_optionalextension`|
|[d3c608b](https://github.com/sagemath/sagetrac-mirror/commit/d3c608b0d59077ef2ec58d32a5da0dccdbcddfd8)|`Merge tag '9.2.beta3' into t/29701/replace_use_of_module_list_optionalextension`|
|[7244371](https://github.com/sagemath/sagetrac-mirror/commit/72443711047daa51d1ba92b087ec9022b2eeef06)|`Merge branch 't/29701/replace_use_of_module_list_optionalextension' into t/29950/build_sagelib_using_installed_sage_setup`|



---

archive/issue_comments_580970.json:
```json
{
    "body": "Changing commit from \"b8e366ec56a9d3527c81df9d8d4206afc2562be4\" to \"72443711047daa51d1ba92b087ec9022b2eeef06\"",
    "created_at": "2020-07-04T16:30:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580970",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b8e366ec56a9d3527c81df9d8d4206afc2562be4" to "72443711047daa51d1ba92b087ec9022b2eeef06"



---

archive/issue_comments_580971.json:
```json
{
    "body": "<a id='comment:33'></a>\nMerged in latest versions #29701, #21559 (on top of 9.2.beta3). Needs review",
    "created_at": "2020-07-04T16:31:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580971",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:33'></a>
Merged in latest versions #29701, #21559 (on top of 9.2.beta3). Needs review



---

archive/issue_comments_580972.json:
```json
{
    "body": "Changing commit from \"72443711047daa51d1ba92b087ec9022b2eeef06\" to \"4344f8940fc44d959da5d20dbea43b64181b961f\"",
    "created_at": "2020-07-08T23:26:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580972",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "72443711047daa51d1ba92b087ec9022b2eeef06" to "4344f8940fc44d959da5d20dbea43b64181b961f"



---

archive/issue_comments_580973.json:
```json
{
    "body": "<a id='comment:34'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                                                                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------|\n|[3953671](https://github.com/sagemath/sagetrac-mirror/commit/39536716aef05e8953bdc50038c49e5959ffdb6a)|`Merge tag '9.2.beta4' into t/29111/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution`|\n|[19d7f67](https://github.com/sagemath/sagetrac-mirror/commit/19d7f677eab07dc41e3f1e71b9a37f3b58560c39)|`Merge branch 't/29111/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution' into t/21559/change-src-bin-installation`|\n|[4344f89](https://github.com/sagemath/sagetrac-mirror/commit/4344f8940fc44d959da5d20dbea43b64181b961f)|`Merge branch 't/21559/change-src-bin-installation' into t/29950/build_sagelib_using_installed_sage_setup`|",
    "created_at": "2020-07-08T23:26:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580973",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                                                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------|
|[3953671](https://github.com/sagemath/sagetrac-mirror/commit/39536716aef05e8953bdc50038c49e5959ffdb6a)|`Merge tag '9.2.beta4' into t/29111/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution`|
|[19d7f67](https://github.com/sagemath/sagetrac-mirror/commit/19d7f677eab07dc41e3f1e71b9a37f3b58560c39)|`Merge branch 't/29111/specify_a_subset_of_sage_command_line_options_that_are_supported_by_sagelib___rather_than_sage_the_distribution' into t/21559/change-src-bin-installation`|
|[4344f89](https://github.com/sagemath/sagetrac-mirror/commit/4344f8940fc44d959da5d20dbea43b64181b961f)|`Merge branch 't/21559/change-src-bin-installation' into t/29950/build_sagelib_using_installed_sage_setup`|



---

archive/issue_comments_580974.json:
```json
{
    "body": "Changing commit from \"4344f8940fc44d959da5d20dbea43b64181b961f\" to \"01b96b0f44f4ff7407fd2f3ce83de1cc74259d58\"",
    "created_at": "2020-08-03T00:53:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580974",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4344f8940fc44d959da5d20dbea43b64181b961f" to "01b96b0f44f4ff7407fd2f3ce83de1cc74259d58"



---

archive/issue_comments_580975.json:
```json
{
    "body": "<a id='comment:35'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------|\n|[fcad518](https://github.com/sagemath/sagetrac-mirror/commit/fcad5184daba6a9d1d347950b3908fc98ec856ce)|`Merge tag '9.2.beta7' into t/29701/replace_use_of_module_list_optionalextension`|\n|[55c3fbc](https://github.com/sagemath/sagetrac-mirror/commit/55c3fbc565fd7884f3df9555de83dd326ace276e)|`src/sage_setup/clean.py: Fix doctest`|\n|[01b96b0](https://github.com/sagemath/sagetrac-mirror/commit/01b96b0f44f4ff7407fd2f3ce83de1cc74259d58)|`Merge branch 't/29701/replace_use_of_module_list_optionalextension' into t/29950/build_sagelib_using_installed_sage_setup`|",
    "created_at": "2020-08-03T00:53:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580975",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------|
|[fcad518](https://github.com/sagemath/sagetrac-mirror/commit/fcad5184daba6a9d1d347950b3908fc98ec856ce)|`Merge tag '9.2.beta7' into t/29701/replace_use_of_module_list_optionalextension`|
|[55c3fbc](https://github.com/sagemath/sagetrac-mirror/commit/55c3fbc565fd7884f3df9555de83dd326ace276e)|`src/sage_setup/clean.py: Fix doctest`|
|[01b96b0](https://github.com/sagemath/sagetrac-mirror/commit/01b96b0f44f4ff7407fd2f3ce83de1cc74259d58)|`Merge branch 't/29701/replace_use_of_module_list_optionalextension' into t/29950/build_sagelib_using_installed_sage_setup`|



---

archive/issue_comments_580976.json:
```json
{
    "body": "Changing dependencies from \"#29411, #29701, #21559\" to \"#29701\"",
    "created_at": "2020-08-03T00:54:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580976",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29411, #29701, #21559" to "#29701"



---

archive/issue_comments_580977.json:
```json
{
    "body": "<a id='comment:37'></a>\nlgtm",
    "created_at": "2020-08-05T08:22:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580977",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:37'></a>
lgtm



---

archive/issue_comments_580978.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Dima Pasechnik\"",
    "created_at": "2020-08-05T08:22:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580978",
    "user": "https://github.com/dimpase"
}
```

Changing reviewer from "" to "Dima Pasechnik"



---

archive/issue_comments_580979.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-08-05T08:22:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580979",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_580980.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-08-08T20:50:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580980",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_580981.json:
```json
{
    "body": "<a id='comment:38'></a>\nFailing doctest needs work as noted in #29701.",
    "created_at": "2020-08-08T20:50:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580981",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:38'></a>
Failing doctest needs work as noted in #29701.



---

archive/issue_comments_580982.json:
```json
{
    "body": "<a id='comment:39'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|\n|[8a19fe2](https://github.com/sagemath/sagetrac-mirror/commit/8a19fe2a9bf4ed64a48ac3110cccbbdff97684ca)|`build/make/Makefile.in (sagelib-clean): Clean the new build location`|",
    "created_at": "2020-08-08T22:50:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580982",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|
|[8a19fe2](https://github.com/sagemath/sagetrac-mirror/commit/8a19fe2a9bf4ed64a48ac3110cccbbdff97684ca)|`build/make/Makefile.in (sagelib-clean): Clean the new build location`|



---

archive/issue_comments_580983.json:
```json
{
    "body": "Changing commit from \"01b96b0f44f4ff7407fd2f3ce83de1cc74259d58\" to \"8a19fe2a9bf4ed64a48ac3110cccbbdff97684ca\"",
    "created_at": "2020-08-08T22:50:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580983",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "01b96b0f44f4ff7407fd2f3ce83de1cc74259d58" to "8a19fe2a9bf4ed64a48ac3110cccbbdff97684ca"



---

archive/issue_comments_580984.json:
```json
{
    "body": "<a id='comment:40'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|\n|[ccc67b0](https://github.com/sagemath/sagetrac-mirror/commit/ccc67b0356373330164dd75060f574c184142473)|`src/sage_setup: Update cythonized_dir in doctests`|",
    "created_at": "2020-08-08T23:08:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580984",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:40'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|
|[ccc67b0](https://github.com/sagemath/sagetrac-mirror/commit/ccc67b0356373330164dd75060f574c184142473)|`src/sage_setup: Update cythonized_dir in doctests`|



---

archive/issue_comments_580985.json:
```json
{
    "body": "Changing commit from \"8a19fe2a9bf4ed64a48ac3110cccbbdff97684ca\" to \"ccc67b0356373330164dd75060f574c184142473\"",
    "created_at": "2020-08-08T23:08:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580985",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "8a19fe2a9bf4ed64a48ac3110cccbbdff97684ca" to "ccc67b0356373330164dd75060f574c184142473"



---

archive/issue_comments_580986.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-08-08T23:11:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580986",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_580987.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-08-10T16:45:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580987",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_580988.json:
```json
{
    "body": "<a id='comment:42'></a>\nok",
    "created_at": "2020-08-10T16:45:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580988",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:42'></a>
ok



---

archive/issue_comments_580989.json:
```json
{
    "body": "<a id='comment:43'></a>\nThanks!",
    "created_at": "2020-08-10T16:51:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580989",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:43'></a>
Thanks!



---

archive/issue_events_094649.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-12T19:53:18Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29950#event-94649"
}
```



---

archive/issue_comments_580990.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/build_sagelib_using_installed_sage_setup\" to \"ccc67b0356373330164dd75060f574c184142473\"",
    "created_at": "2020-08-12T19:53:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580990",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/build_sagelib_using_installed_sage_setup" to "ccc67b0356373330164dd75060f574c184142473"



---

archive/issue_comments_580991.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-08-12T19:53:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29950#issuecomment-580991",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
