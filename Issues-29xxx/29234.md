# Issue 29234: Inheritance Structure: Tensor Fields -> Vec. Bdl. Sections

archive/issues_028997.json:
```json
{
    "assignees": [],
    "body": "This ticket is created to establish a concise and efficient inheritance structure between sections of vector bundles and tensor fields in order to avoid or reduce code redundancies.\n\nIn this ticket, we restrict the modification to tensor fields only. The issue \"vectorframes -> local frames\" is devoted to another ticket (opening soon).\n\nCC:  @egourgoulhon @tscrim\n\nKeywords: **tensor-bundles, vector-bundles**\n\nComponent: **geometry**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29234_\n\n",
    "created_at": "2020-02-23T09:40:58Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20geometry",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Inheritance Structure: Tensor Fields -> Vec. Bdl. Sections",
    "type": "issue",
    "updated_at": "2022-08-31T05:25:02Z",
    "url": "https://github.com/sagemath/sage/issues/29234",
    "user": "https://github.com/DeRhamSource"
}
```
This ticket is created to establish a concise and efficient inheritance structure between sections of vector bundles and tensor fields in order to avoid or reduce code redundancies.

In this ticket, we restrict the modification to tensor fields only. The issue "vectorframes -> local frames" is devoted to another ticket (opening soon).

CC:  @egourgoulhon @tscrim

Keywords: **tensor-bundles, vector-bundles**

Component: **geometry**

_Issue created by migration from https://trac.sagemath.org/ticket/29234_





---

archive/issue_events_401925.json:
```json
{
    "actor": "https://github.com/DeRhamSource",
    "created_at": "2020-02-23T09:40:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29234#event-401925"
}
```



---

archive/issue_events_401926.json:
```json
{
    "actor": "https://github.com/DeRhamSource",
    "created_at": "2020-02-23T09:40:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20geometry",
    "label_color": "0000ff",
    "label_name": "c: geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29234#event-401926"
}
```



---

archive/issue_events_401927.json:
```json
{
    "actor": "https://github.com/DeRhamSource",
    "created_at": "2020-02-23T09:40:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29234#event-401927"
}
```



---

archive/issue_events_401928.json:
```json
{
    "actor": "https://github.com/DeRhamSource",
    "created_at": "2020-02-23T09:40:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29234#event-401928"
}
```



---

archive/issue_comments_458567.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nIt would be a shame when some documentations of tensor fields will be erased due to this task. Any suggestions how to keep them?",
    "created_at": "2020-02-23T09:42:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29234#issuecomment-458567",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:1" align="right">comment:1</div>

It would be a shame when some documentations of tensor fields will be erased due to this task. Any suggestions how to keep them?



---

archive/issue_comments_458568.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nReplying to [@DeRhamSource](#comment:1):\n> It would be a shame when some documentations of tensor fields will be erased due to this task. Any suggestions how to keep them?\n\nThis is certainly something to discuss (and more generally all the topic of this ticket) during your visit in Meudon in two weeks.",
    "created_at": "2020-02-24T13:18:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29234#issuecomment-458568",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:2" align="right">comment:2</div>

Replying to [@DeRhamSource](#comment:1):
> It would be a shame when some documentations of tensor fields will be erased due to this task. Any suggestions how to keep them?

This is certainly something to discuss (and more generally all the topic of this ticket) during your visit in Meudon in two weeks.



---

archive/issue_comments_458569.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThe documentation is not lost. It will just appear as links in the compiled doc (which is a bit of loss for the `?` form). You can also just append it with `+ BaseClass.__doc__` I think, but I am not sure I would do this.",
    "created_at": "2020-02-24T23:09:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29234#issuecomment-458569",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:3" align="right">comment:3</div>

The documentation is not lost. It will just appear as links in the compiled doc (which is a bit of loss for the `?` form). You can also just append it with `+ BaseClass.__doc__` I think, but I am not sure I would do this.



---

archive/issue_comments_458570.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nBatch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.",
    "created_at": "2020-04-14T19:41:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29234#issuecomment-458570",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:4" align="right">comment:4</div>

Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.



---

archive/issue_events_401929.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29234#event-401929"
}
```



---

archive/issue_events_401930.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29234#event-401930"
}
```



---

archive/issue_comments_458571.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI guess, a first way to start would be to let `TensorField` inherit from `Section` since the most common code snipptes are hidden there. Then we can try to use a pattern like\n\n```python\ndef overloaded_method(self, *args, **kwargs):\n    r\"\"\"\n    Keep documentation and docstring\n    \"\"\"\n    return super().overloaded_method(args, kwargs)\n```\n\nto keep the documentation.\n\nAlternatively one could think about another documentation page functioning as a compendium for these kind of things.\n\nI'd prefer the former option because this is easier for users who are not involved in the development process to follow the changes, meaning things are kept as known for them.",
    "created_at": "2020-07-24T11:49:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29234#issuecomment-458571",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:5" align="right">comment:5</div>

I guess, a first way to start would be to let `TensorField` inherit from `Section` since the most common code snipptes are hidden there. Then we can try to use a pattern like

```python
def overloaded_method(self, *args, **kwargs):
    r"""
    Keep documentation and docstring
    """
    return super().overloaded_method(args, kwargs)
```

to keep the documentation.

Alternatively one could think about another documentation page functioning as a compendium for these kind of things.

I'd prefer the former option because this is easier for users who are not involved in the development process to follow the changes, meaning things are kept as known for them.



---

archive/issue_comments_458572.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@mjungmath](#comment:5):\n> I guess, a first way to start would be to let `TensorField` inherit from `Section` since the most common code snipptes are hidden there. Then we can try to use a pattern like\n> \n> ```python\n> def overloaded_method(self, *args, **kwargs):\n>     r\"\"\"\n>     Keep documentation and docstring\n>     \"\"\"\n>     return super().overloaded_method(args, kwargs)\n> ```\n> \n> to keep the documentation.\n> \n\nThis is code duplication and should be avoided IMHO. \nWhy not pasting the current doctests in `TensorField` to the `EXAMPLES` section of the method implemented at the section level? In this way, the end user will still discover these examples with the `?` key.",
    "created_at": "2020-07-24T12:12:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29234#issuecomment-458572",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@mjungmath](#comment:5):
> I guess, a first way to start would be to let `TensorField` inherit from `Section` since the most common code snipptes are hidden there. Then we can try to use a pattern like
> 
> ```python
> def overloaded_method(self, *args, **kwargs):
>     r"""
>     Keep documentation and docstring
>     """
>     return super().overloaded_method(args, kwargs)
> ```
> 
> to keep the documentation.
> 

This is code duplication and should be avoided IMHO. 
Why not pasting the current doctests in `TensorField` to the `EXAMPLES` section of the method implemented at the section level? In this way, the end user will still discover these examples with the `?` key.



---

archive/issue_comments_458573.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nAs part of this refactorization, one could also extract a class representing general (pre)sheaves. This should actually not be too difficult as both implementations of sections as well as tensorfields mostly talk about the restriction of the section/tensor field to an open subset, i.e. exactly the sheaf-property.",
    "created_at": "2020-07-24T22:00:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29234#issuecomment-458573",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:7" align="right">comment:7</div>

As part of this refactorization, one could also extract a class representing general (pre)sheaves. This should actually not be too difficult as both implementations of sections as well as tensorfields mostly talk about the restriction of the section/tensor field to an open subset, i.e. exactly the sheaf-property.



---

archive/issue_comments_458574.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@tobiasdiez](#comment:7):\n> As part of this refactorization, one could also extract a class representing general (pre)sheaves. This should actually not be too difficult as both implementations of sections as well as tensorfields mostly talk about the restriction of the section/tensor field to an open subset, i.e. exactly the sheaf-property.\n\nActually, this is an amazing idea. This is also beneficial in the sense that we can put all preexisting examples regarding tensor fields and sections in there since they represent the most prominent examples for sheafs on manifolds. By the way, scalar fields also define sheafs and should be covered here, too.",
    "created_at": "2020-07-25T07:00:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29234#issuecomment-458574",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@tobiasdiez](#comment:7):
> As part of this refactorization, one could also extract a class representing general (pre)sheaves. This should actually not be too difficult as both implementations of sections as well as tensorfields mostly talk about the restriction of the section/tensor field to an open subset, i.e. exactly the sheaf-property.

Actually, this is an amazing idea. This is also beneficial in the sense that we can put all preexisting examples regarding tensor fields and sections in there since they represent the most prominent examples for sheafs on manifolds. By the way, scalar fields also define sheafs and should be covered here, too.



---

archive/issue_events_401931.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-29T16:37:33Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29234#event-401931"
}
```



---

archive/issue_events_401932.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-29T16:37:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29234#event-401932"
}
```



---

archive/issue_events_401933.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29234#event-401933"
}
```



---

archive/issue_events_401934.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29234#event-401934"
}
```



---

archive/issue_comments_458575.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29234#issuecomment-458575",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:10" align="right">comment:10</div>

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_401935.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:43:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29234#event-401935"
}
```



---

archive/issue_events_401936.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:43:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29234#event-401936"
}
```



---

archive/issue_events_401937.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:41:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29234#event-401937"
}
```



---

archive/issue_events_401938.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:41:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29234#event-401938"
}
```



---

archive/issue_events_401939.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-01T21:16:35Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29234#event-401939"
}
```



---

archive/issue_events_401940.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-01T21:16:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29234#event-401940"
}
```



---

archive/issue_events_401941.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T05:25:02Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29234#event-401941"
}
```



---

archive/issue_events_401942.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T05:25:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29234#event-401942"
}
```
