# Issue 29234: Inheritance Structure: Tensor Fields -> Vec. Bdl. Sections

archive/issues_028997.json:
```json
{
    "assignees": [],
    "body": "This ticket is created to establish a concise and efficient inheritance structure between sections of vector bundles and tensor fields in order to avoid or reduce code redundancies.\n\nIn this ticket, we restrict the modification to tensor fields only. The issue \"vectorframes -> local frames\" is devoted to another ticket (opening soon).\n\nCC:  @egourgoulhon @tscrim\n\nKeywords: **tensor-bundles, vector-bundles**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29234_\n\n",
    "created_at": "2020-02-23T09:40:58Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20geometry",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Inheritance Structure: Tensor Fields -> Vec. Bdl. Sections",
    "type": "issue",
    "updated_at": "2022-08-31T05:25:02Z",
    "url": "https://github.com/sagemath/sage/issues/29234",
    "user": "https://github.com/DeRhamSource"
}
```
This ticket is created to establish a concise and efficient inheritance structure between sections of vector bundles and tensor fields in order to avoid or reduce code redundancies.

In this ticket, we restrict the modification to tensor fields only. The issue "vectorframes -> local frames" is devoted to another ticket (opening soon).

CC:  @egourgoulhon @tscrim

Keywords: **tensor-bundles, vector-bundles**

_Issue created by migration from https://trac.sagemath.org/ticket/29234_





---

archive/issue_events_383680.json:
```json
{
    "actor": "https://github.com/DeRhamSource",
    "created_at": "2020-02-23T09:40:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29234#event-383680"
}
```



---

archive/issue_events_383681.json:
```json
{
    "actor": "https://github.com/DeRhamSource",
    "created_at": "2020-02-23T09:40:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20geometry",
    "label_color": "0000ff",
    "label_name": "component: geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29234#event-383681"
}
```



---

archive/issue_events_383682.json:
```json
{
    "actor": "https://github.com/DeRhamSource",
    "created_at": "2020-02-23T09:40:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29234#event-383682"
}
```



---

archive/issue_events_383683.json:
```json
{
    "actor": "https://github.com/DeRhamSource",
    "created_at": "2020-02-23T09:40:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29234#event-383683"
}
```



---

archive/issue_comments_461451.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nIt would be a shame when some documentations of tensor fields will be erased due to this task. Any suggestions how to keep them?",
    "created_at": "2020-02-23T09:42:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29234#issuecomment-461451",
    "user": "https://github.com/DeRhamSource"
}
```

<a id='comment:1'>Comment 1:</a>
It would be a shame when some documentations of tensor fields will be erased due to this task. Any suggestions how to keep them?



---

archive/issue_comments_461452.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nReplying to [@DeRhamSource](#comment%3A1):\n> It would be a shame when some documentations of tensor fields will be erased due to this task. Any suggestions how to keep them?\n\nThis is certainly something to discuss (and more generally all the topic of this ticket) during your visit in Meudon in two weeks.",
    "created_at": "2020-02-24T13:18:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29234#issuecomment-461452",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:2'>Comment 2:</a>
Replying to [@DeRhamSource](#comment%3A1):
> It would be a shame when some documentations of tensor fields will be erased due to this task. Any suggestions how to keep them?

This is certainly something to discuss (and more generally all the topic of this ticket) during your visit in Meudon in two weeks.



---

archive/issue_comments_461453.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nThe documentation is not lost. It will just appear as links in the compiled doc (which is a bit of loss for the `?` form). You can also just append it with `+ BaseClass.__doc__` I think, but I am not sure I would do this.",
    "created_at": "2020-02-24T23:09:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29234#issuecomment-461453",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:3'>Comment 3:</a>
The documentation is not lost. It will just appear as links in the compiled doc (which is a bit of loss for the `?` form). You can also just append it with `+ BaseClass.__doc__` I think, but I am not sure I would do this.



---

archive/issue_comments_461454.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nBatch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.",
    "created_at": "2020-04-14T19:41:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29234#issuecomment-461454",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'>Comment 4:</a>
Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.



---

archive/issue_events_383684.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29234#event-383684"
}
```



---

archive/issue_events_383685.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29234#event-383685"
}
```



---

archive/issue_comments_461455.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nI guess, a first way to start would be to let `TensorField` inherit from `Section` since the most common code snipptes are hidden there. Then we can try to use a pattern like\n\n```python\ndef overloaded_method(self, *args, **kwargs):\n    r\"\"\"\n    Keep documentation and docstring\n    \"\"\"\n    return super().overloaded_method(args, kwargs)\n```\n\nto keep the documentation.\n\nAlternatively one could think about another documentation page functioning as a compendium for these kind of things.\n\nI'd prefer the former option because this is easier for users who are not involved in the development process to follow the changes, meaning things are kept as known for them.",
    "created_at": "2020-07-24T11:49:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29234#issuecomment-461455",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:5'>Comment 5:</a>
I guess, a first way to start would be to let `TensorField` inherit from `Section` since the most common code snipptes are hidden there. Then we can try to use a pattern like

```python
def overloaded_method(self, *args, **kwargs):
    r"""
    Keep documentation and docstring
    """
    return super().overloaded_method(args, kwargs)
```

to keep the documentation.

Alternatively one could think about another documentation page functioning as a compendium for these kind of things.

I'd prefer the former option because this is easier for users who are not involved in the development process to follow the changes, meaning things are kept as known for them.



---

archive/issue_comments_461456.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nReplying to [@mjungmath](#comment%3A5):\n> I guess, a first way to start would be to let `TensorField` inherit from `Section` since the most common code snipptes are hidden there. Then we can try to use a pattern like\n> \n> ```python\n> def overloaded_method(self, *args, **kwargs):\n>     r\"\"\"\n>     Keep documentation and docstring\n>     \"\"\"\n>     return super().overloaded_method(args, kwargs)\n> ```\n> \n> to keep the documentation.\n> \n\nThis is code duplication and should be avoided IMHO. \nWhy not pasting the current doctests in `TensorField` to the `EXAMPLES` section of the method implemented at the section level? In this way, the end user will still discover these examples with the `?` key.",
    "created_at": "2020-07-24T12:12:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29234#issuecomment-461456",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:6'>Comment 6:</a>
Replying to [@mjungmath](#comment%3A5):
> I guess, a first way to start would be to let `TensorField` inherit from `Section` since the most common code snipptes are hidden there. Then we can try to use a pattern like
> 
> ```python
> def overloaded_method(self, *args, **kwargs):
>     r"""
>     Keep documentation and docstring
>     """
>     return super().overloaded_method(args, kwargs)
> ```
> 
> to keep the documentation.
> 

This is code duplication and should be avoided IMHO. 
Why not pasting the current doctests in `TensorField` to the `EXAMPLES` section of the method implemented at the section level? In this way, the end user will still discover these examples with the `?` key.



---

archive/issue_comments_461457.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nAs part of this refactorization, one could also extract a class representing general (pre)sheaves. This should actually not be too difficult as both implementations of sections as well as tensorfields mostly talk about the restriction of the section/tensor field to an open subset, i.e. exactly the sheaf-property.",
    "created_at": "2020-07-24T22:00:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29234#issuecomment-461457",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:7'>Comment 7:</a>
As part of this refactorization, one could also extract a class representing general (pre)sheaves. This should actually not be too difficult as both implementations of sections as well as tensorfields mostly talk about the restriction of the section/tensor field to an open subset, i.e. exactly the sheaf-property.



---

archive/issue_comments_461458.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nReplying to [@tobiasdiez](#comment%3A7):\n> As part of this refactorization, one could also extract a class representing general (pre)sheaves. This should actually not be too difficult as both implementations of sections as well as tensorfields mostly talk about the restriction of the section/tensor field to an open subset, i.e. exactly the sheaf-property.\n\nActually, this is an amazing idea. This is also beneficial in the sense that we can put all preexisting examples regarding tensor fields and sections in there since they represent the most prominent examples for sheafs on manifolds. By the way, scalar fields also define sheafs and should be covered here, too.",
    "created_at": "2020-07-25T07:00:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29234#issuecomment-461458",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:8'>Comment 8:</a>
Replying to [@tobiasdiez](#comment%3A7):
> As part of this refactorization, one could also extract a class representing general (pre)sheaves. This should actually not be too difficult as both implementations of sections as well as tensorfields mostly talk about the restriction of the section/tensor field to an open subset, i.e. exactly the sheaf-property.

Actually, this is an amazing idea. This is also beneficial in the sense that we can put all preexisting examples regarding tensor fields and sections in there since they represent the most prominent examples for sheafs on manifolds. By the way, scalar fields also define sheafs and should be covered here, too.



---

archive/issue_events_383686.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-29T16:37:33Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29234#event-383686"
}
```



---

archive/issue_events_383687.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-29T16:37:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29234#event-383687"
}
```



---

archive/issue_events_383688.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29234#event-383688"
}
```



---

archive/issue_events_383689.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29234#event-383689"
}
```



---

archive/issue_comments_461459.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29234#issuecomment-461459",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'>Comment 10:</a>
Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_383690.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:43:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29234#event-383690"
}
```



---

archive/issue_events_383691.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:43:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29234#event-383691"
}
```



---

archive/issue_events_383692.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:41:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29234#event-383692"
}
```



---

archive/issue_events_383693.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:41:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29234#event-383693"
}
```



---

archive/issue_events_383694.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-01T21:16:35Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29234#event-383694"
}
```



---

archive/issue_events_383695.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-01T21:16:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29234#event-383695"
}
```



---

archive/issue_events_383696.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T05:25:02Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29234#event-383696"
}
```



---

archive/issue_events_383697.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T05:25:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29234",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29234#event-383697"
}
```
