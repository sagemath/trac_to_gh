# Issue 29481: Fix up "sage -i" for optional packages

archive/issues_029244.json:
```json
{
    "body": "Follow-up from #29113 (\"Reimplement `sage -i SPKG` for optional/experimental packages as `configure --enable-SPKG && make build`\").\n\nThis does not work in some situations as noted in #29418.\n\nWe fix it by reverting to the old installation method, but at least print some hints that explain the new configure arguments.\n\nWe will revisit this when other aspects of the Makefile have been cleaned up enough.\n\n**CC:**  @jhpalmieri @dimpase\n\n**Branch:** [4de76485f3d087f14cd9d3bcb474b1cb07580fb4](https://github.com/sagemath/sagetrac-mirror/commit/4de76485f3d087f14cd9d3bcb474b1cb07580fb4)\n\n**Reviewer:** John Palmieri\n\n**Author:** Matthias Koeppe\n\nIssue created by migration from https://trac.sagemath.org/ticket/29481\n\n",
    "closed_at": "2020-04-14T22:04:13Z",
    "created_at": "2020-04-08T23:23:14Z",
    "labels": [
        "component: build",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.1",
    "title": "Fix up \"sage -i\" for optional packages",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/29481",
    "user": "https://github.com/mkoeppe"
}
```
Follow-up from #29113 ("Reimplement `sage -i SPKG` for optional/experimental packages as `configure --enable-SPKG && make build`").

This does not work in some situations as noted in #29418.

We fix it by reverting to the old installation method, but at least print some hints that explain the new configure arguments.

We will revisit this when other aspects of the Makefile have been cleaned up enough.

**CC:**  @jhpalmieri @dimpase

**Branch:** [4de76485f3d087f14cd9d3bcb474b1cb07580fb4](https://github.com/sagemath/sagetrac-mirror/commit/4de76485f3d087f14cd9d3bcb474b1cb07580fb4)

**Reviewer:** John Palmieri

**Author:** Matthias Koeppe

Issue created by migration from https://trac.sagemath.org/ticket/29481





---

archive/issue_comments_466082.json:
```json
{
    "body": "<a id='comment:1'></a>\nAny progress here?",
    "created_at": "2020-04-12T15:35:15Z",
    "issue": "https://github.com/sagemath/sage/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29481#issuecomment-466082",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:1'></a>
Any progress here?



---

archive/issue_comments_466083.json:
```json
{
    "body": "**Dependencies:** #29460",
    "created_at": "2020-04-12T15:40:11Z",
    "issue": "https://github.com/sagemath/sage/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29481#issuecomment-466083",
    "user": "https://github.com/mkoeppe"
}
```

**Dependencies:** #29460



---

archive/issue_comments_466084.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,3 +2,6 @@\n \n This does not work in some situations as noted in #29418.\n \n+We fix it by reverting to the old installation method, but at least print some hints that explain the new configure arguments.\n+\n+We will revisit this when other aspects of the Makefile have been cleaned up enough.\n``````\n",
    "created_at": "2020-04-12T16:34:58Z",
    "issue": "https://github.com/sagemath/sage/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29481#issuecomment-466084",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,3 +2,6 @@
 
 This does not work in some situations as noted in #29418.
 
+We fix it by reverting to the old installation method, but at least print some hints that explain the new configure arguments.
+
+We will revisit this when other aspects of the Makefile have been cleaned up enough.
``````




---

archive/issue_comments_466085.json:
```json
{
    "body": "**Branch:** [u/mkoeppe/fix_up__sage__i__for_optional_packages](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/fix_up__sage__i__for_optional_packages)",
    "created_at": "2020-04-12T16:37:35Z",
    "issue": "https://github.com/sagemath/sage/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29481#issuecomment-466085",
    "user": "https://github.com/mkoeppe"
}
```

**Branch:** [u/mkoeppe/fix_up__sage__i__for_optional_packages](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/fix_up__sage__i__for_optional_packages)



---

archive/issue_comments_466086.json:
```json
{
    "body": "<a id='comment:5'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4de76485f3d087f14cd9d3bcb474b1cb07580fb4\">4de7648</a></td><td><code>Partial revert of #29113; only display configure hints</code></td></tr></table>\n",
    "created_at": "2020-04-12T16:38:15Z",
    "issue": "https://github.com/sagemath/sage/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29481#issuecomment-466086",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4de76485f3d087f14cd9d3bcb474b1cb07580fb4">4de7648</a></td><td><code>Partial revert of #29113; only display configure hints</code></td></tr></table>




---

archive/issue_comments_466087.json:
```json
{
    "body": "**Changing dependencies** from \"#29460\" to \"\".",
    "created_at": "2020-04-12T16:38:15Z",
    "issue": "https://github.com/sagemath/sage/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29481#issuecomment-466087",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#29460" to "".



---

archive/issue_comments_466088.json:
```json
{
    "body": "**Author:** Matthias Koeppe",
    "created_at": "2020-04-12T16:38:15Z",
    "issue": "https://github.com/sagemath/sage/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29481#issuecomment-466088",
    "user": "https://github.com/mkoeppe"
}
```

**Author:** Matthias Koeppe



---

archive/issue_events_262513.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-12T16:38:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29481",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29481#event-262513"
}
```



---

archive/issue_comments_466089.json:
```json
{
    "body": "**Commit:** [4de76485f3d087f14cd9d3bcb474b1cb07580fb4](https://github.com/sagemath/sagetrac-mirror/commit/4de76485f3d087f14cd9d3bcb474b1cb07580fb4)",
    "created_at": "2020-04-12T16:38:15Z",
    "issue": "https://github.com/sagemath/sage/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29481#issuecomment-466089",
    "user": "https://github.com/mkoeppe"
}
```

**Commit:** [4de76485f3d087f14cd9d3bcb474b1cb07580fb4](https://github.com/sagemath/sagetrac-mirror/commit/4de76485f3d087f14cd9d3bcb474b1cb07580fb4)



---

archive/issue_comments_466090.json:
```json
{
    "body": "<a id='comment:6'></a>\nOK this should do the job for the next beta",
    "created_at": "2020-04-12T16:38:48Z",
    "issue": "https://github.com/sagemath/sage/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29481#issuecomment-466090",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
OK this should do the job for the next beta



---

archive/issue_comments_466091.json:
```json
{
    "body": "<a id='comment:7'></a>\nThis looks good to me.",
    "created_at": "2020-04-12T20:32:23Z",
    "issue": "https://github.com/sagemath/sage/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29481#issuecomment-466091",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:7'></a>
This looks good to me.



---

archive/issue_events_262514.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2020-04-12T20:32:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29481",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29481#event-262514"
}
```



---

archive/issue_events_262515.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2020-04-12T20:32:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29481",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29481#event-262515"
}
```



---

archive/issue_comments_466092.json:
```json
{
    "body": "**Reviewer:** John Palmieri",
    "created_at": "2020-04-12T20:32:23Z",
    "issue": "https://github.com/sagemath/sage/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29481#issuecomment-466092",
    "user": "https://github.com/jhpalmieri"
}
```

**Reviewer:** John Palmieri



---

archive/issue_comments_466093.json:
```json
{
    "body": "<a id='comment:8'></a>\nThanks!",
    "created_at": "2020-04-12T20:33:03Z",
    "issue": "https://github.com/sagemath/sage/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29481#issuecomment-466093",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
Thanks!



---

archive/issue_events_262516.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-14T22:04:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29481",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29481#event-262516"
}
```



---

archive/issue_events_262517.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-14T22:04:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29481",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29481#event-262517"
}
```



---

archive/issue_comments_466094.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/fix_up__sage__i__for_optional_packages](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/fix_up__sage__i__for_optional_packages)\" to \"[4de76485f3d087f14cd9d3bcb474b1cb07580fb4](https://github.com/sagemath/sagetrac-mirror/commit/4de76485f3d087f14cd9d3bcb474b1cb07580fb4)\".",
    "created_at": "2020-04-14T22:04:13Z",
    "issue": "https://github.com/sagemath/sage/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29481#issuecomment-466094",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/mkoeppe/fix_up__sage__i__for_optional_packages](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/fix_up__sage__i__for_optional_packages)" to "[4de76485f3d087f14cd9d3bcb474b1cb07580fb4](https://github.com/sagemath/sagetrac-mirror/commit/4de76485f3d087f14cd9d3bcb474b1cb07580fb4)".



---

archive/issue_comments_466095.json:
```json
{
    "body": "<a id='comment:10'></a>\nIsn't a space missing between \"passing\" and \"$ENABLE_ARGS\" here?\n\n```\n+        echo >&2 \"to be installed by passing$ENABLE_ARGS to ./configure\"\n```",
    "created_at": "2020-04-20T16:47:18Z",
    "issue": "https://github.com/sagemath/sage/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29481#issuecomment-466095",
    "user": "https://github.com/slel"
}
```

<a id='comment:10'></a>
Isn't a space missing between "passing" and "$ENABLE_ARGS" here?

```
+        echo >&2 "to be installed by passing$ENABLE_ARGS to ./configure"
```



---

archive/issue_comments_466096.json:
```json
{
    "body": "**Changing commit** from \"[4de76485f3d087f14cd9d3bcb474b1cb07580fb4](https://github.com/sagemath/sagetrac-mirror/commit/4de76485f3d087f14cd9d3bcb474b1cb07580fb4)\" to \"\".",
    "created_at": "2020-04-20T16:47:18Z",
    "issue": "https://github.com/sagemath/sage/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29481#issuecomment-466096",
    "user": "https://github.com/slel"
}
```

**Changing commit** from "[4de76485f3d087f14cd9d3bcb474b1cb07580fb4](https://github.com/sagemath/sagetrac-mirror/commit/4de76485f3d087f14cd9d3bcb474b1cb07580fb4)" to "".



---

archive/issue_comments_466097.json:
```json
{
    "body": "<a id='comment:11'></a>\n$ENABLE_ARGS should contain a leading space: it's defined by the line\n\n```\nENABLE_ARGS=\"$ENABLE_ARGS '--enable-$PKG'\"\n```\nadding `\" '--enable-...'\"` (including a leading space) each time it's updated.",
    "created_at": "2020-04-20T17:15:31Z",
    "issue": "https://github.com/sagemath/sage/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29481#issuecomment-466097",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:11'></a>
$ENABLE_ARGS should contain a leading space: it's defined by the line

```
ENABLE_ARGS="$ENABLE_ARGS '--enable-$PKG'"
```
adding `" '--enable-...'"` (including a leading space) each time it's updated.
