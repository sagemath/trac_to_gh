# Issue 29481: Fix up "sage -i" for optional packages

archive/issues_029244.json:
```json
{
    "body": "Follow-up from #29113 (\"Reimplement `sage -i SPKG` for optional/experimental packages as `configure --enable-SPKG && make build`\").\n\nThis does not work in some situations as noted in #29418.\n\nWe fix it by reverting to the old installation method, but at least print some hints that explain the new configure arguments.\n\nWe will revisit this when other aspects of the Makefile have been cleaned up enough.\n\nCC:  @jhpalmieri @dimpase\n\nReviewer: John Palmieri\n\nAuthor: Matthias Koeppe\n\nBranch: 4de76485f3d087f14cd9d3bcb474b1cb07580fb4\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29481\n\n",
    "closed_at": "2020-04-14T22:04:13Z",
    "created_at": "2020-04-08T23:23:14Z",
    "labels": [
        "component: build",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "Fix up \"sage -i\" for optional packages",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29481",
    "user": "https://github.com/mkoeppe"
}
```
Follow-up from #29113 ("Reimplement `sage -i SPKG` for optional/experimental packages as `configure --enable-SPKG && make build`").

This does not work in some situations as noted in #29418.

We fix it by reverting to the old installation method, but at least print some hints that explain the new configure arguments.

We will revisit this when other aspects of the Makefile have been cleaned up enough.

CC:  @jhpalmieri @dimpase

Reviewer: John Palmieri

Author: Matthias Koeppe

Branch: 4de76485f3d087f14cd9d3bcb474b1cb07580fb4

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29481





---

archive/issue_comments_568780.json:
```json
{
    "body": "<a id='comment:1'></a>\nAny progress here?",
    "created_at": "2020-04-12T15:35:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29481#issuecomment-568780",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:1'></a>
Any progress here?



---

archive/issue_comments_568781.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#29460\"",
    "created_at": "2020-04-12T15:40:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29481#issuecomment-568781",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#29460"



---

archive/issue_comments_568782.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,3 +2,6 @@\n \n This does not work in some situations as noted in #29418.\n \n+We fix it by reverting to the old installation method, but at least print some hints that explain the new configure arguments.\n+\n+We will revisit this when other aspects of the Makefile have been cleaned up enough.\n``````\n",
    "created_at": "2020-04-12T16:34:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29481#issuecomment-568782",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,3 +2,6 @@
 
 This does not work in some situations as noted in #29418.
 
+We fix it by reverting to the old installation method, but at least print some hints that explain the new configure arguments.
+
+We will revisit this when other aspects of the Makefile have been cleaned up enough.
``````




---

archive/issue_comments_568783.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/fix_up__sage__i__for_optional_packages\"",
    "created_at": "2020-04-12T16:37:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29481#issuecomment-568783",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/fix_up__sage__i__for_optional_packages"



---

archive/issue_comments_568784.json:
```json
{
    "body": "<a id='comment:5'></a>\nNew commits:\n|                                                                                                                                          |                                                        |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|\n|[4de7648](https://github.com/sagemath/sagetrac-mirror/commit/4de76485f3d087f14cd9d3bcb474b1cb07580fb4)|`Partial revert of #29113; only display configure hints`|",
    "created_at": "2020-04-12T16:38:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29481#issuecomment-568784",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>
New commits:
|                                                                                                                                          |                                                        |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|
|[4de7648](https://github.com/sagemath/sagetrac-mirror/commit/4de76485f3d087f14cd9d3bcb474b1cb07580fb4)|`Partial revert of #29113; only display configure hints`|



---

archive/issue_comments_568785.json:
```json
{
    "body": "Changing dependencies from \"#29460\" to \"\"",
    "created_at": "2020-04-12T16:38:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29481#issuecomment-568785",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29460" to ""



---

archive/issue_comments_568786.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2020-04-12T16:38:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29481#issuecomment-568786",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_568787.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-04-12T16:38:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29481#issuecomment-568787",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_568788.json:
```json
{
    "body": "Changing commit from \"\" to \"4de76485f3d087f14cd9d3bcb474b1cb07580fb4\"",
    "created_at": "2020-04-12T16:38:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29481#issuecomment-568788",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "4de76485f3d087f14cd9d3bcb474b1cb07580fb4"



---

archive/issue_comments_568789.json:
```json
{
    "body": "<a id='comment:6'></a>\nOK this should do the job for the next beta",
    "created_at": "2020-04-12T16:38:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29481#issuecomment-568789",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
OK this should do the job for the next beta



---

archive/issue_comments_568790.json:
```json
{
    "body": "<a id='comment:7'></a>\nThis looks good to me.",
    "created_at": "2020-04-12T20:32:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29481#issuecomment-568790",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:7'></a>
This looks good to me.



---

archive/issue_comments_568791.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-04-12T20:32:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29481#issuecomment-568791",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_568792.json:
```json
{
    "body": "Changing reviewer from \"\" to \"John Palmieri\"",
    "created_at": "2020-04-12T20:32:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29481#issuecomment-568792",
    "user": "https://github.com/jhpalmieri"
}
```

Changing reviewer from "" to "John Palmieri"



---

archive/issue_comments_568793.json:
```json
{
    "body": "<a id='comment:8'></a>\nThanks!",
    "created_at": "2020-04-12T20:33:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29481#issuecomment-568793",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
Thanks!



---

archive/issue_comments_568794.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-04-14T22:04:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29481#issuecomment-568794",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_092721.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-14T22:04:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29481",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29481#event-92721"
}
```



---

archive/issue_comments_568795.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/fix_up__sage__i__for_optional_packages\" to \"4de76485f3d087f14cd9d3bcb474b1cb07580fb4\"",
    "created_at": "2020-04-14T22:04:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29481#issuecomment-568795",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/fix_up__sage__i__for_optional_packages" to "4de76485f3d087f14cd9d3bcb474b1cb07580fb4"



---

archive/issue_comments_568796.json:
```json
{
    "body": "<a id='comment:10'></a>\nIsn't a space missing between \"passing\" and \"$ENABLE_ARGS\" here?\n\n```\n+        echo >&2 \"to be installed by passing$ENABLE_ARGS to ./configure\"\n```",
    "created_at": "2020-04-20T16:47:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29481#issuecomment-568796",
    "user": "https://github.com/slel"
}
```

<a id='comment:10'></a>
Isn't a space missing between "passing" and "$ENABLE_ARGS" here?

```
+        echo >&2 "to be installed by passing$ENABLE_ARGS to ./configure"
```



---

archive/issue_comments_568797.json:
```json
{
    "body": "Changing commit from \"4de76485f3d087f14cd9d3bcb474b1cb07580fb4\" to \"\"",
    "created_at": "2020-04-20T16:47:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29481#issuecomment-568797",
    "user": "https://github.com/slel"
}
```

Changing commit from "4de76485f3d087f14cd9d3bcb474b1cb07580fb4" to ""



---

archive/issue_comments_568798.json:
```json
{
    "body": "<a id='comment:11'></a>\n$ENABLE_ARGS should contain a leading space: it's defined by the line\n\n```\nENABLE_ARGS=\"$ENABLE_ARGS '--enable-$PKG'\"\n```\nadding `\" '--enable-...'\"` (including a leading space) each time it's updated.",
    "created_at": "2020-04-20T17:15:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29481#issuecomment-568798",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:11'></a>
$ENABLE_ARGS should contain a leading space: it's defined by the line

```
ENABLE_ARGS="$ENABLE_ARGS '--enable-$PKG'"
```
adding `" '--enable-...'"` (including a leading space) each time it's updated.
