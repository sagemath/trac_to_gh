# Issue 29481: Fix up "sage -i" for optional packages

archive/issues_029244.json:
```json
{
    "body": "Follow-up from #29113 (\"Reimplement `sage -i SPKG` for optional/experimental packages as `configure --enable-SPKG && make build`\").\n\nThis does not work in some situations as noted in #29418.\n\nWe fix it by reverting to the old installation method, but at least print some hints that explain the new configure arguments.\n\nWe will revisit this when other aspects of the Makefile have been cleaned up enough.\n\nCC:  @jhpalmieri @dimpase\n\nReviewer: John Palmieri\n\nAuthor: Matthias Koeppe\n\nBranch: 4de76485f3d087f14cd9d3bcb474b1cb07580fb4\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29481\n\n",
    "closed_at": "2020-04-14T22:04:13Z",
    "created_at": "2020-04-08T23:23:14Z",
    "labels": [
        "component: build",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "Fix up \"sage -i\" for optional packages",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29481",
    "user": "https://github.com/mkoeppe"
}
```
Follow-up from #29113 ("Reimplement `sage -i SPKG` for optional/experimental packages as `configure --enable-SPKG && make build`").

This does not work in some situations as noted in #29418.

We fix it by reverting to the old installation method, but at least print some hints that explain the new configure arguments.

We will revisit this when other aspects of the Makefile have been cleaned up enough.

CC:  @jhpalmieri @dimpase

Reviewer: John Palmieri

Author: Matthias Koeppe

Branch: 4de76485f3d087f14cd9d3bcb474b1cb07580fb4

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29481





---

archive/issue_comments_441291.json:
```json
{
    "body": "<a id='comment:1'></a>Any progress here?",
    "created_at": "2020-04-12T15:35:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29481#issuecomment-441291",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:1'></a>Any progress here?



---

archive/issue_comments_441292.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,6 +1,10 @@\n Follow-up from #29113 (\"Reimplement \\`sage -i SPKG\\` for optional/experimental packages as \\`configure --enable-SPKG && make build\\`\").\n \n This does not work in some situations as noted in #29418.\n+\n+We fix it by reverting to the old installation method, but at least print some hints that explain the new configure arguments.\n+\n+We will revisit this when other aspects of the Makefile have been cleaned up enough.\n \n Comment: 1\n \n```\n",
    "created_at": "2020-04-12T16:34:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29481#issuecomment-441292",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,6 +1,10 @@
 Follow-up from #29113 ("Reimplement \`sage -i SPKG\` for optional/experimental packages as \`configure --enable-SPKG && make build\`").
 
 This does not work in some situations as noted in #29418.
+
+We fix it by reverting to the old installation method, but at least print some hints that explain the new configure arguments.
+
+We will revisit this when other aspects of the Makefile have been cleaned up enough.
 
 Comment: 1
 
```




---

archive/issue_comments_441293.json:
```json
{
    "body": "<a id='comment:5'></a>New commits:",
    "created_at": "2020-04-12T16:38:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29481#issuecomment-441293",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>New commits:



---

archive/issue_comments_441294.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-04-12T16:38:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29481#issuecomment-441294",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_441295.json:
```json
{
    "body": "<a id='comment:6'></a>OK this should do the job for the next beta",
    "created_at": "2020-04-12T16:38:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29481#issuecomment-441295",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>OK this should do the job for the next beta



---

archive/issue_comments_441296.json:
```json
{
    "body": "<a id='comment:7'></a>This looks good to me.",
    "created_at": "2020-04-12T20:32:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29481#issuecomment-441296",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:7'></a>This looks good to me.



---

archive/issue_comments_441297.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-04-12T20:32:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29481#issuecomment-441297",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_441298.json:
```json
{
    "body": "<a id='comment:8'></a>Thanks!",
    "created_at": "2020-04-12T20:33:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29481#issuecomment-441298",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>Thanks!



---

archive/issue_comments_441299.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-04-14T22:04:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29481#issuecomment-441299",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_075161.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-14T22:04:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29481",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29481#event-75161"
}
```



---

archive/issue_comments_441300.json:
```json
{
    "body": "<a id='comment:10'></a>Isn't a space missing between \"passing\" and \"$ENABLE_ARGS\" here?\n\n```\n+        echo >&2 \"to be installed by passing$ENABLE_ARGS to ./configure\"\n```",
    "created_at": "2020-04-20T16:47:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29481#issuecomment-441300",
    "user": "https://github.com/slel"
}
```

<a id='comment:10'></a>Isn't a space missing between "passing" and "$ENABLE_ARGS" here?

```
+        echo >&2 "to be installed by passing$ENABLE_ARGS to ./configure"
```



---

archive/issue_comments_441301.json:
```json
{
    "body": "<a id='comment:11'></a>$ENABLE_ARGS should contain a leading space: it's defined by the line\n\n```\nENABLE_ARGS=\"$ENABLE_ARGS '--enable-$PKG'\"\n```\nadding `\" '--enable-...'\"` (including a leading space) each time it's updated.",
    "created_at": "2020-04-20T17:15:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29481",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29481#issuecomment-441301",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:11'></a>$ENABLE_ARGS should contain a leading space: it's defined by the line

```
ENABLE_ARGS="$ENABLE_ARGS '--enable-$PKG'"
```
adding `" '--enable-...'"` (including a leading space) each time it's updated.
