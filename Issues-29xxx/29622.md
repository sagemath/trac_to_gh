# Issue 29622: cygwin, conda, homebrew: Fixes for CI

archive/issues_029385.json:
```json
{
    "body": "Hopefully the last change for the CI for 9.1\n\nCC:  @dimpase @slel @embray\n\nBranch/Commit: 630576b0ced872081c792a3b339b3b505d65b404\n\nReviewer: Dima Pasechnik\n\nAuthor: Matthias Koeppe\n\nDependencies: #29530\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29622\n\n",
    "closed_at": "2020-05-07T22:21:04Z",
    "created_at": "2020-04-29T23:58:19Z",
    "labels": [
        "component: porting: cygwin",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "cygwin, conda, homebrew: Fixes for CI",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29622",
    "user": "https://github.com/mkoeppe"
}
```
Hopefully the last change for the CI for 9.1

CC:  @dimpase @slel @embray

Branch/Commit: 630576b0ced872081c792a3b339b3b505d65b404

Reviewer: Dima Pasechnik

Author: Matthias Koeppe

Dependencies: #29530

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29622





---

archive/issue_events_093313.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "rename": {
        "from": "cygwin: Fixes for CI",
        "to": "cygwin, conda: Fixes for CI"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29622#event-93313"
}
```



---

archive/issue_comments_572243.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/cygwin__fixes_for_ci\"",
    "created_at": "2020-04-30T00:01:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-572243",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/cygwin__fixes_for_ci"



---

archive/issue_events_093314.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "rename": {
        "from": "cygwin, conda: Fixes for CI",
        "to": "cygwin, conda, homebrew: Fixes for CI"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29622#event-93314"
}
```



---

archive/issue_comments_572244.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#29530\"",
    "created_at": "2020-04-30T00:02:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-572244",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#29530"



---

archive/issue_comments_572245.json:
```json
{
    "body": "Changing commit from \"\" to \"f9700fd16d6faa0701088fd8f9743e0ee2d08207\"",
    "created_at": "2020-04-30T00:02:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-572245",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "f9700fd16d6faa0701088fd8f9743e0ee2d08207"



---

archive/issue_comments_572246.json:
```json
{
    "body": "<a id='comment:3'></a>\nLast 10 new commits:\n|                                                                                                                                          |                                                                           |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------|\n|[652787b](https://github.com/sagemath/sagetrac-mirror/commit/652787bd0a1094a08d84a2d6a364b8f7dbdfcc61)|`.github/workflows/tox*.yml: Make copying logs from containers more robust`|\n|[f8c6e7a](https://github.com/sagemath/sagetrac-mirror/commit/f8c6e7a30e822fcd6a0b7690db5bbb7d8fc1fde4)|`tox.ini: Commit a failed build container so that logs are copied from it`|\n|[5c8e685](https://github.com/sagemath/sagetrac-mirror/commit/5c8e685ec555dadde9be207a49d1132474496e32)|`tox-optional.yml: Fix likewise`|\n|[4f4fe60](https://github.com/sagemath/sagetrac-mirror/commit/4f4fe609ce1fe22a543cdbed3d798d129db4c9b8)|`ci-cygwin.yml: Split the file so that unrelated stages do not wait`|\n|[27c63f1](https://github.com/sagemath/sagetrac-mirror/commit/27c63f19bdfc6ef314cb0007a65daa192bb1c499)|`Improve docker login instructions`|\n|[dbf461d](https://github.com/sagemath/sagetrac-mirror/commit/dbf461da6562dae7312ab0c1fb025c5de5babeb8)|`Merge tag '9.1.rc2' into t/29530/make_docker_images_generated_by_github_ci_workflows_available`|\n|[163562d](https://github.com/sagemath/sagetrac-mirror/commit/163562d24508d81271a0333c131c13020a052856)|`Rename cygwin workflows`|\n|[97a96c6](https://github.com/sagemath/sagetrac-mirror/commit/97a96c63ef4efcf8a153a1aeefdf4999e8189ae8)|`ci-cygwin*.yml: Fix typos`|\n|[9187128](https://github.com/sagemath/sagetrac-mirror/commit/9187128f619e3021f97110374d3d8e35f5f09f93)|`tox.yml: Add docker-conda-forge`|\n|[f9700fd](https://github.com/sagemath/sagetrac-mirror/commit/f9700fd16d6faa0701088fd8f9743e0ee2d08207)|`tox.yml: Add homebrew-macos-python3_xcode-gcc_spkg`|",
    "created_at": "2020-04-30T00:02:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-572246",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>
Last 10 new commits:
|                                                                                                                                          |                                                                           |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------|
|[652787b](https://github.com/sagemath/sagetrac-mirror/commit/652787bd0a1094a08d84a2d6a364b8f7dbdfcc61)|`.github/workflows/tox*.yml: Make copying logs from containers more robust`|
|[f8c6e7a](https://github.com/sagemath/sagetrac-mirror/commit/f8c6e7a30e822fcd6a0b7690db5bbb7d8fc1fde4)|`tox.ini: Commit a failed build container so that logs are copied from it`|
|[5c8e685](https://github.com/sagemath/sagetrac-mirror/commit/5c8e685ec555dadde9be207a49d1132474496e32)|`tox-optional.yml: Fix likewise`|
|[4f4fe60](https://github.com/sagemath/sagetrac-mirror/commit/4f4fe609ce1fe22a543cdbed3d798d129db4c9b8)|`ci-cygwin.yml: Split the file so that unrelated stages do not wait`|
|[27c63f1](https://github.com/sagemath/sagetrac-mirror/commit/27c63f19bdfc6ef314cb0007a65daa192bb1c499)|`Improve docker login instructions`|
|[dbf461d](https://github.com/sagemath/sagetrac-mirror/commit/dbf461da6562dae7312ab0c1fb025c5de5babeb8)|`Merge tag '9.1.rc2' into t/29530/make_docker_images_generated_by_github_ci_workflows_available`|
|[163562d](https://github.com/sagemath/sagetrac-mirror/commit/163562d24508d81271a0333c131c13020a052856)|`Rename cygwin workflows`|
|[97a96c6](https://github.com/sagemath/sagetrac-mirror/commit/97a96c63ef4efcf8a153a1aeefdf4999e8189ae8)|`ci-cygwin*.yml: Fix typos`|
|[9187128](https://github.com/sagemath/sagetrac-mirror/commit/9187128f619e3021f97110374d3d8e35f5f09f93)|`tox.yml: Add docker-conda-forge`|
|[f9700fd](https://github.com/sagemath/sagetrac-mirror/commit/f9700fd16d6faa0701088fd8f9743e0ee2d08207)|`tox.yml: Add homebrew-macos-python3_xcode-gcc_spkg`|



---

archive/issue_comments_572247.json:
```json
{
    "body": "<a id='comment:4'></a>\nThis fixes some syntax errors in the cygwin build. Now it times out in stage 3. This would need to be rebalanced or split into several parallel stages",
    "created_at": "2020-05-01T00:55:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-572247",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
This fixes some syntax errors in the cygwin build. Now it times out in stage 3. This would need to be rebalanced or split into several parallel stages



---

archive/issue_comments_572248.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-05-01T20:03:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-572248",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_572249.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------|\n|[8406e25](https://github.com/sagemath/sagetrac-mirror/commit/8406e258a82d6e9fcdf2f40d81fda8f2983760e0)|`Rebalance stages`|\n|[99342f1](https://github.com/sagemath/sagetrac-mirror/commit/99342f17927a67978cb9ac27de843b36d95670be)|`Update cygwin-minimal, cygwin-standard-python2`|\n|[8df6b20](https://github.com/sagemath/sagetrac-mirror/commit/8df6b206ee3bd5a7b4bba676a8b6ef0c036bbe89)|`Fixup, rebalance`|",
    "created_at": "2020-05-02T18:08:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-572249",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------|
|[8406e25](https://github.com/sagemath/sagetrac-mirror/commit/8406e258a82d6e9fcdf2f40d81fda8f2983760e0)|`Rebalance stages`|
|[99342f1](https://github.com/sagemath/sagetrac-mirror/commit/99342f17927a67978cb9ac27de843b36d95670be)|`Update cygwin-minimal, cygwin-standard-python2`|
|[8df6b20](https://github.com/sagemath/sagetrac-mirror/commit/8df6b206ee3bd5a7b4bba676a8b6ef0c036bbe89)|`Fixup, rebalance`|



---

archive/issue_comments_572250.json:
```json
{
    "body": "Changing commit from \"f9700fd16d6faa0701088fd8f9743e0ee2d08207\" to \"8df6b206ee3bd5a7b4bba676a8b6ef0c036bbe89\"",
    "created_at": "2020-05-02T18:08:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-572250",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f9700fd16d6faa0701088fd8f9743e0ee2d08207" to "8df6b206ee3bd5a7b4bba676a8b6ef0c036bbe89"



---

archive/issue_comments_572251.json:
```json
{
    "body": "<a id='comment:7'></a>\ngetting closer - https://github.com/mkoeppe/sage/runs/639064085",
    "created_at": "2020-05-02T18:09:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-572251",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
getting closer - https://github.com/mkoeppe/sage/runs/639064085



---

archive/issue_comments_572252.json:
```json
{
    "body": "<a id='comment:8'></a>\n`Fatal error: can't write 24 bytes to section .text of build/temp.cygwin-3.1.4-x86_64-3.7/build/cythonized/sage/rings/laurent_series_ring_element.o: 'No space left on device'`",
    "created_at": "2020-05-02T19:30:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-572252",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
`Fatal error: can't write 24 bytes to section .text of build/temp.cygwin-3.1.4-x86_64-3.7/build/cythonized/sage/rings/laurent_series_ring_element.o: 'No space left on device'`



---

archive/issue_comments_572253.json:
```json
{
    "body": "Changing commit from \"8df6b206ee3bd5a7b4bba676a8b6ef0c036bbe89\" to \"ea92c284b5204560d65478e84c60806cc3a8c2ea\"",
    "created_at": "2020-05-02T20:14:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-572253",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "8df6b206ee3bd5a7b4bba676a8b6ef0c036bbe89" to "ea92c284b5204560d65478e84c60806cc3a8c2ea"



---

archive/issue_comments_572254.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------|\n|[ea92c28](https://github.com/sagemath/sagetrac-mirror/commit/ea92c284b5204560d65478e84c60806cc3a8c2ea)|`Factor out .github/workflows/extra-sage-local.sh from ci-cygwin*.yml, remove archives after extracting`|",
    "created_at": "2020-05-02T20:14:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-572254",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------|
|[ea92c28](https://github.com/sagemath/sagetrac-mirror/commit/ea92c284b5204560d65478e84c60806cc3a8c2ea)|`Factor out .github/workflows/extra-sage-local.sh from ci-cygwin*.yml, remove archives after extracting`|



---

archive/issue_comments_572255.json:
```json
{
    "body": "Changing commit from \"ea92c284b5204560d65478e84c60806cc3a8c2ea\" to \"0d4655355f32bb312dcda24292c9a5676428ad2b\"",
    "created_at": "2020-05-02T20:27:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-572255",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ea92c284b5204560d65478e84c60806cc3a8c2ea" to "0d4655355f32bb312dcda24292c9a5676428ad2b"



---

archive/issue_comments_572256.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------|\n|[0d46553](https://github.com/sagemath/sagetrac-mirror/commit/0d4655355f32bb312dcda24292c9a5676428ad2b)|`Fixup`|",
    "created_at": "2020-05-02T20:27:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-572256",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |       |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------|
|[0d46553](https://github.com/sagemath/sagetrac-mirror/commit/0d4655355f32bb312dcda24292c9a5676428ad2b)|`Fixup`|



---

archive/issue_comments_572257.json:
```json
{
    "body": "<a id='comment:11'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------|\n|[2eb8351](https://github.com/sagemath/sagetrac-mirror/commit/2eb8351a7ad30853c77e7dedf92dc619b3c742de)|`.github/workflows/*.yml: Use max-parallel so that the multi-stage workflows get a chance to run`|\n|[9b1214f](https://github.com/sagemath/sagetrac-mirror/commit/9b1214fb51a1d9c5d5790d834ce406bbf51e6490)|`fiuxp`|",
    "created_at": "2020-05-02T22:59:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-572257",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------|
|[2eb8351](https://github.com/sagemath/sagetrac-mirror/commit/2eb8351a7ad30853c77e7dedf92dc619b3c742de)|`.github/workflows/*.yml: Use max-parallel so that the multi-stage workflows get a chance to run`|
|[9b1214f](https://github.com/sagemath/sagetrac-mirror/commit/9b1214fb51a1d9c5d5790d834ce406bbf51e6490)|`fiuxp`|



---

archive/issue_comments_572258.json:
```json
{
    "body": "Changing commit from \"0d4655355f32bb312dcda24292c9a5676428ad2b\" to \"9b1214fb51a1d9c5d5790d834ce406bbf51e6490\"",
    "created_at": "2020-05-02T22:59:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-572258",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0d4655355f32bb312dcda24292c9a5676428ad2b" to "9b1214fb51a1d9c5d5790d834ce406bbf51e6490"



---

archive/issue_comments_572259.json:
```json
{
    "body": "Changing commit from \"9b1214fb51a1d9c5d5790d834ce406bbf51e6490\" to \"d3b5f8cb275fc7fd9b5aed8a86003c527d140ac2\"",
    "created_at": "2020-05-03T15:24:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-572259",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9b1214fb51a1d9c5d5790d834ce406bbf51e6490" to "d3b5f8cb275fc7fd9b5aed8a86003c527d140ac2"



---

archive/issue_comments_572260.json:
```json
{
    "body": "<a id='comment:12'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------|\n|[801a0d0](https://github.com/sagemath/sagetrac-mirror/commit/801a0d0af153a8e252818d3ad37ca9c008ea0d25)|`Rebalance`|\n|[bf15a04](https://github.com/sagemath/sagetrac-mirror/commit/bf15a04bff9f19f541f6e98270c876ef1606c72c)|`Use tar --remove-files`|\n|[016df8a](https://github.com/sagemath/sagetrac-mirror/commit/016df8a139cc0c464f683d4c96d9b01bad2e2041)|`Prepare sage-local artifacts in /tmp`|\n|[c400c37](https://github.com/sagemath/sagetrac-mirror/commit/c400c37585adc0f521693655fff947e5204074fb)|`.github/workflows/extract-sage-local.sh: Show df`|\n|[d3b5f8c](https://github.com/sagemath/sagetrac-mirror/commit/d3b5f8cb275fc7fd9b5aed8a86003c527d140ac2)|`Fix up listing tar files`|",
    "created_at": "2020-05-03T15:24:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-572260",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |           |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------|
|[801a0d0](https://github.com/sagemath/sagetrac-mirror/commit/801a0d0af153a8e252818d3ad37ca9c008ea0d25)|`Rebalance`|
|[bf15a04](https://github.com/sagemath/sagetrac-mirror/commit/bf15a04bff9f19f541f6e98270c876ef1606c72c)|`Use tar --remove-files`|
|[016df8a](https://github.com/sagemath/sagetrac-mirror/commit/016df8a139cc0c464f683d4c96d9b01bad2e2041)|`Prepare sage-local artifacts in /tmp`|
|[c400c37](https://github.com/sagemath/sagetrac-mirror/commit/c400c37585adc0f521693655fff947e5204074fb)|`.github/workflows/extract-sage-local.sh: Show df`|
|[d3b5f8c](https://github.com/sagemath/sagetrac-mirror/commit/d3b5f8cb275fc7fd9b5aed8a86003c527d140ac2)|`Fix up listing tar files`|



---

archive/issue_comments_572261.json:
```json
{
    "body": "<a id='comment:13'></a>\nThis now manages to build Sage on Cygwin (see `cygwin-stage-iii` in https://github.com/mkoeppe/sage/runs/640373882)",
    "created_at": "2020-05-03T15:52:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-572261",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>
This now manages to build Sage on Cygwin (see `cygwin-stage-iii` in https://github.com/mkoeppe/sage/runs/640373882)



---

archive/issue_comments_572262.json:
```json
{
    "body": "Changing commit from \"d3b5f8cb275fc7fd9b5aed8a86003c527d140ac2\" to \"630576b0ced872081c792a3b339b3b505d65b404\"",
    "created_at": "2020-05-03T16:02:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-572262",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d3b5f8cb275fc7fd9b5aed8a86003c527d140ac2" to "630576b0ced872081c792a3b339b3b505d65b404"



---

archive/issue_comments_572263.json:
```json
{
    "body": "<a id='comment:14'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|\n|[630576b](https://github.com/sagemath/sagetrac-mirror/commit/630576b0ced872081c792a3b339b3b505d65b404)|`Update cygwin-minimal, cygwin-standard-python2`|",
    "created_at": "2020-05-03T16:02:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-572263",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|
|[630576b](https://github.com/sagemath/sagetrac-mirror/commit/630576b0ced872081c792a3b339b3b505d65b404)|`Update cygwin-minimal, cygwin-standard-python2`|



---

archive/issue_comments_572264.json:
```json
{
    "body": "<a id='comment:15'></a>\nReady for review",
    "created_at": "2020-05-03T16:14:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-572264",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>
Ready for review



---

archive/issue_comments_572265.json:
```json
{
    "body": "<a id='comment:16'></a>\n`cygwin-minimal`, stage-ii-a and stage-ii-c still time out (https://github.com/mkoeppe/sage/runs/641053384); more rebalancing should be done in the next release cycle. I stop for this ticket and 9.1. \n\nUploading and downloading of our large sage-local artifacts is somewhat brittle, a game of chance: For example, in https://github.com/mkoeppe/sage/runs/641209977 (`cygwin-standard`), stage-iii :\n\n```\nExponential backoff for retry #5. Waiting for 33036.92082171844 milliseconds before continuing the upload at offset 1379926016\nTotal file count: 1 ---- Processed file #0 (0.0%)\nFinished backoff for retry #5, continuing with upload\nTotal file count: 1 ---- Processed file #0 (0.0%)\nAn error has been caught http-client index 0, retrying the upload\nError: read ECONNRESET\n    at TLSWrap.onStreamRead (internal/stream_base_commons.js:201:27) {\n  errno: 'ECONNRESET',\n  code: 'ECONNRESET',\n  syscall: 'read'\n}\nRetry limit has been reached for chunk at offset 1379926016 to https://pipelines.actions.githubusercontent.com/4D1poTSDSSApU42GXYeGgQX6WjHwGPK9ZzdaE2SeHdlUs0ZBhW/_apis/resources/Containers/3201477?itemPath=sage-local-commit-b2c012bfed0fb9414e0db531acc43a3abf1ae1ba-cygwin-standard%5Csage-local-iii.tar\n##[warning]Aborting upload for C:\\tools\\cygwin\\tmp\\sage-local-iii.tar due to failure\nTotal size of all the files uploaded is 1379926016 bytes\n```\n\nIn the same run, for https://github.com/mkoeppe/sage/runs/641394549 (`cygwin-standard-python2`), the upload of stage-iii succeeded,\nand stage-iv-a ... stage-iv-d downloaded it successfully. \n- stage-iv-a (`make ptest`, https://github.com/mkoeppe/sage/runs/641394549) terminates, with a number of doctest errors and timeouts:\n  {{{\nsage -t src/doc/en/constructions/plotting.rst  # Timed out\nsage -t src/doc/fr/tutorial/interfaces.rst  # 1 doctest failed\nsage -t src/doc/ja/tutorial/interfaces.rst  # 2 doctests failed\nsage -t src/doc/pt/tutorial/interfaces.rst  # Timed out\nsage -t src/doc/ru/tutorial/interfaces.rst  # 6 doctests failed\nsage -t src/sage/coding/binary_code.pyx  # Timed out\nsage -t src/sage/doctest/control.py  # 1 doctest failed\nsage -t src/sage/functions/log.py  # 1 doctest failed\nsage -t src/sage/functions/orthogonal_polys.py  # 1 doctest failed\nsage -t src/sage/functions/other.py  # 2 doctests failed\nsage -t src/sage/dynamics/arithmetic_dynamics/projective_ds.py  # Timed out\nsage -t src/sage/interfaces/gap.py  # 1 doctest failed\nsage -t src/sage/groups/class_function.py  # Timed out\nsage -t src/sage/interfaces/giac.py  # 41 doctests failed\nsage -t src/sage/libs/gap/element.pyx  # 1 doctest failed\nsage -t src/sage/libs/glpk/error.pyx  # 2 doctests failed\nsage -t src/sage/matrix/matrix1.pyx  # 1 doctest failed\nsage -t src/sage/numerical/backends/glpk_backend.pyx  # 2 doctests failed\nsage -t src/sage/parallel/map_reduce.py  # Timed out after testing finished\nsage -t src/sage/repl/interpreter.py  # 3 doctests failed\nsage -t src/sage/rings/number_field/number_field_element.pyx  # Timed out\nsage -t src/sage/sandpiles/sandpile.py  # Timed out\nsage -t src/sage/symbolic/constants.py  # 3 doctests failed\nsage -t src/sage/symbolic/expression_conversions.py  # 1 doctest failed\nsage -t src/sage/symbolic/expression.pyx  # 1 doctest failed\nsage -t src/sage/tests/benchmark.py  # 2 doctests failed\nsage -t src/sage/tests/books/computational-mathematics-with-sagemath/sol/graphique_doctest.py  # 1 doctest failed\nsage -t src/sage/tests/cmdline.py  # 3 doctests failed\n  }}}\n  Looks like the giac interface is broken. \n\n- stage-iv-b builds a few optional packages; I have noted build failures in some separate tickets.\n\n- stage-iv-c builds `cbc`, `sage_numerical_backends_coin` successfully.\n\n- stage-iv-d (https://github.com/mkoeppe/sage/runs/641394565) builds a long list of optional packages, times out;  I have noted build failures in some separate tickets.",
    "created_at": "2020-05-04T02:49:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-572265",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>
`cygwin-minimal`, stage-ii-a and stage-ii-c still time out (https://github.com/mkoeppe/sage/runs/641053384); more rebalancing should be done in the next release cycle. I stop for this ticket and 9.1. 

Uploading and downloading of our large sage-local artifacts is somewhat brittle, a game of chance: For example, in https://github.com/mkoeppe/sage/runs/641209977 (`cygwin-standard`), stage-iii :

```
Exponential backoff for retry #5. Waiting for 33036.92082171844 milliseconds before continuing the upload at offset 1379926016
Total file count: 1 ---- Processed file #0 (0.0%)
Finished backoff for retry #5, continuing with upload
Total file count: 1 ---- Processed file #0 (0.0%)
An error has been caught http-client index 0, retrying the upload
Error: read ECONNRESET
    at TLSWrap.onStreamRead (internal/stream_base_commons.js:201:27) {
  errno: 'ECONNRESET',
  code: 'ECONNRESET',
  syscall: 'read'
}
Retry limit has been reached for chunk at offset 1379926016 to https://pipelines.actions.githubusercontent.com/4D1poTSDSSApU42GXYeGgQX6WjHwGPK9ZzdaE2SeHdlUs0ZBhW/_apis/resources/Containers/3201477?itemPath=sage-local-commit-b2c012bfed0fb9414e0db531acc43a3abf1ae1ba-cygwin-standard%5Csage-local-iii.tar
##[warning]Aborting upload for C:\tools\cygwin\tmp\sage-local-iii.tar due to failure
Total size of all the files uploaded is 1379926016 bytes
```

In the same run, for https://github.com/mkoeppe/sage/runs/641394549 (`cygwin-standard-python2`), the upload of stage-iii succeeded,
and stage-iv-a ... stage-iv-d downloaded it successfully. 
- stage-iv-a (`make ptest`, https://github.com/mkoeppe/sage/runs/641394549) terminates, with a number of doctest errors and timeouts:
  {{{
sage -t src/doc/en/constructions/plotting.rst  # Timed out
sage -t src/doc/fr/tutorial/interfaces.rst  # 1 doctest failed
sage -t src/doc/ja/tutorial/interfaces.rst  # 2 doctests failed
sage -t src/doc/pt/tutorial/interfaces.rst  # Timed out
sage -t src/doc/ru/tutorial/interfaces.rst  # 6 doctests failed
sage -t src/sage/coding/binary_code.pyx  # Timed out
sage -t src/sage/doctest/control.py  # 1 doctest failed
sage -t src/sage/functions/log.py  # 1 doctest failed
sage -t src/sage/functions/orthogonal_polys.py  # 1 doctest failed
sage -t src/sage/functions/other.py  # 2 doctests failed
sage -t src/sage/dynamics/arithmetic_dynamics/projective_ds.py  # Timed out
sage -t src/sage/interfaces/gap.py  # 1 doctest failed
sage -t src/sage/groups/class_function.py  # Timed out
sage -t src/sage/interfaces/giac.py  # 41 doctests failed
sage -t src/sage/libs/gap/element.pyx  # 1 doctest failed
sage -t src/sage/libs/glpk/error.pyx  # 2 doctests failed
sage -t src/sage/matrix/matrix1.pyx  # 1 doctest failed
sage -t src/sage/numerical/backends/glpk_backend.pyx  # 2 doctests failed
sage -t src/sage/parallel/map_reduce.py  # Timed out after testing finished
sage -t src/sage/repl/interpreter.py  # 3 doctests failed
sage -t src/sage/rings/number_field/number_field_element.pyx  # Timed out
sage -t src/sage/sandpiles/sandpile.py  # Timed out
sage -t src/sage/symbolic/constants.py  # 3 doctests failed
sage -t src/sage/symbolic/expression_conversions.py  # 1 doctest failed
sage -t src/sage/symbolic/expression.pyx  # 1 doctest failed
sage -t src/sage/tests/benchmark.py  # 2 doctests failed
sage -t src/sage/tests/books/computational-mathematics-with-sagemath/sol/graphique_doctest.py  # 1 doctest failed
sage -t src/sage/tests/cmdline.py  # 3 doctests failed
  }}}
  Looks like the giac interface is broken. 

- stage-iv-b builds a few optional packages; I have noted build failures in some separate tickets.

- stage-iv-c builds `cbc`, `sage_numerical_backends_coin` successfully.

- stage-iv-d (https://github.com/mkoeppe/sage/runs/641394565) builds a long list of optional packages, times out;  I have noted build failures in some separate tickets.



---

archive/issue_comments_572266.json:
```json
{
    "body": "<a id='comment:17'></a>\nNeeds review. Let's get this into 9.1 please",
    "created_at": "2020-05-04T17:36:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-572266",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>
Needs review. Let's get this into 9.1 please



---

archive/issue_events_093315.json:
```json
{
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "label": "critical",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29622#event-93315"
}
```



---

archive/issue_comments_572267.json:
```json
{
    "body": "<a id='comment:19'></a>\nthis looks good; one minor question is how to get logs for particular failed spkg builds.\nIs the latter possible/documented, and I'm just not looking at the right place?",
    "created_at": "2020-05-04T18:11:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-572267",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:19'></a>
this looks good; one minor question is how to get logs for particular failed spkg builds.
Is the latter possible/documented, and I'm just not looking at the right place?



---

archive/issue_comments_572268.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Dima Pasechnik\"",
    "created_at": "2020-05-04T18:11:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-572268",
    "user": "https://github.com/dimpase"
}
```

Changing reviewer from "" to "Dima Pasechnik"



---

archive/issue_comments_572269.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-05-04T18:11:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-572269",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_572270.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [dimpase](#comment%3A19):\n> one minor question is how to get logs for particular failed spkg builds.\n> Is the latter possible/documented, and I'm just not looking at the right place?\n\n\nDo you see the artifact named \"logs-....\" in\nhttps://github.com/mkoeppe/sage/actions/runs/94565308?",
    "created_at": "2020-05-04T18:16:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-572270",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'></a>
Replying to [dimpase](#comment%3A19):
> one minor question is how to get logs for particular failed spkg builds.
> Is the latter possible/documented, and I'm just not looking at the right place?


Do you see the artifact named "logs-...." in
https://github.com/mkoeppe/sage/actions/runs/94565308?



---

archive/issue_comments_572271.json:
```json
{
    "body": "<a id='comment:21'></a>\nIt contains both the logs of all packages, \nand the contents of $SAGE_LOCAL/var/tmp/sage/build/ (all failed packages)",
    "created_at": "2020-05-04T18:20:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-572271",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'></a>
It contains both the logs of all packages, 
and the contents of $SAGE_LOCAL/var/tmp/sage/build/ (all failed packages)



---

archive/issue_comments_572272.json:
```json
{
    "body": "<a id='comment:22'></a>\nAlternatively, if one does not want to download these huge log archives, one can open the section \"Print out logs for immediate inspection\" (for example in https://github.com/mkoeppe/sage/runs/641394520?check_suite_focus=true) to see logs of packages with errors. (This already works before artifacts are made available.)",
    "created_at": "2020-05-04T18:21:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-572272",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:22'></a>
Alternatively, if one does not want to download these huge log archives, one can open the section "Print out logs for immediate inspection" (for example in https://github.com/mkoeppe/sage/runs/641394520?check_suite_focus=true) to see logs of packages with errors. (This already works before artifacts are made available.)



---

archive/issue_comments_572273.json:
```json
{
    "body": "<a id='comment:23'></a>\nReplying to [mkoeppe](#comment%3A21):\n> It contains both the logs of all packages, \n> and the contents of $SAGE_LOCAL/var/tmp/sage/build/ (all failed packages)\n> \n\nok - I only looked at \"view raw logs\" - and these are, despite the name, less complete than artefacts, right?",
    "created_at": "2020-05-04T19:36:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-572273",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:23'></a>
Replying to [mkoeppe](#comment%3A21):
> It contains both the logs of all packages, 
> and the contents of $SAGE_LOCAL/var/tmp/sage/build/ (all failed packages)
> 

ok - I only looked at "view raw logs" - and these are, despite the name, less complete than artefacts, right?



---

archive/issue_comments_572274.json:
```json
{
    "body": "<a id='comment:24'></a>\n\"View raw logs\" just gives you what is displayed in the right pane. This is a [GitHub](GitHub) Actions feature.\nThe log artefacts have a lot more, from my scripts.",
    "created_at": "2020-05-04T19:57:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-572274",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'></a>
"View raw logs" just gives you what is displayed in the right pane. This is a [GitHub](GitHub) Actions feature.
The log artefacts have a lot more, from my scripts.



---

archive/issue_events_093316.json:
```json
{
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "label": "critical",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29622#event-93316"
}
```



---

archive/issue_events_093317.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-05-07T22:21:04Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29622#event-93317"
}
```



---

archive/issue_comments_572275.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-05-07T22:21:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-572275",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_572276.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/cygwin__fixes_for_ci\" to \"630576b0ced872081c792a3b339b3b505d65b404\"",
    "created_at": "2020-05-07T22:21:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29622#issuecomment-572276",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/cygwin__fixes_for_ci" to "630576b0ced872081c792a3b339b3b505d65b404"
