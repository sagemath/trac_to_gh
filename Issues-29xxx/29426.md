# Issue 29426: Make dependencies of optional packages more detailed, no longer depend on all standard packages

archive/issues_029189.json:
```json
{
    "body": "#28095 (Add `--enable-OPTIONALSPKG` options to `configure`) made it possible to build Sage and a number of optional packages in one pass.\n\nTo improve opportunities for build parallelization, we should make dependencies of optional packages more detailed and no longer depend on all standard packages.\n\nThis will also make it faster to test builds from scratch to a specific optional package.\n\n\nCC:  @embray @dimpase @jhpalmieri\n\nReviewer: Jonathan Kliem\n\nAuthor: Matthias Koeppe\n\nBranch: a5818c08ff57d35be19ed2429321bd90a965f1c6\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29426\n\n",
    "closed_at": "2020-04-23T22:32:45Z",
    "created_at": "2020-03-29T17:33:24Z",
    "labels": [
        "component: build"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "Make dependencies of optional packages more detailed, no longer depend on all standard packages",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29426",
    "user": "https://github.com/mkoeppe"
}
```
#28095 (Add `--enable-OPTIONALSPKG` options to `configure`) made it possible to build Sage and a number of optional packages in one pass.

To improve opportunities for build parallelization, we should make dependencies of optional packages more detailed and no longer depend on all standard packages.

This will also make it faster to test builds from scratch to a specific optional package.


CC:  @embray @dimpase @jhpalmieri

Reviewer: Jonathan Kliem

Author: Matthias Koeppe

Branch: a5818c08ff57d35be19ed2429321bd90a965f1c6

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29426





---

archive/issue_comments_440437.json:
```json
{
    "body": "<a id='comment:2'></a>pushing these forward to 9.2",
    "created_at": "2020-04-14T06:33:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29426#issuecomment-440437",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>pushing these forward to 9.2



---

archive/issue_events_075002.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T06:33:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29426",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29426#event-75002"
}
```



---

archive/issue_comments_440438.json:
```json
{
    "body": "<a id='comment:3'></a>Tests ran at https://github.com/mkoeppe/sage/actions/runs/77739151\n\nSeveral optional packages that run their tests with the Sage doctester depend on `ipywidgets` when `SAGE_CHECK=yes`.\nSee for example https://github.com/mkoeppe/sage/runs/584777416?check_suite_focus=true: \n`sage_numerical_backends_coin`, `p_group_cohomology`\n\n---\nNew commits:",
    "created_at": "2020-04-15T05:34:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29426#issuecomment-440438",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>Tests ran at https://github.com/mkoeppe/sage/actions/runs/77739151

Several optional packages that run their tests with the Sage doctester depend on `ipywidgets` when `SAGE_CHECK=yes`.
See for example https://github.com/mkoeppe/sage/runs/584777416?check_suite_focus=true: 
`sage_numerical_backends_coin`, `p_group_cohomology`

---
New commits:



---

archive/issue_comments_440439.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-17T07:29:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29426#issuecomment-440439",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_440440.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-04-17T20:11:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29426#issuecomment-440440",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_440441.json:
```json
{
    "body": "<a id='comment:6'></a>Rebased on top of #26018",
    "created_at": "2020-04-17T20:12:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29426#issuecomment-440441",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>Rebased on top of #26018



---

archive/issue_comments_440442.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-04-18T19:00:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29426#issuecomment-440442",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_events_075003.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-18T19:00:27Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29426",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29426#event-75003"
}
```



---

archive/issue_events_075004.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-18T19:00:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29426",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29426#event-75004"
}
```



---

archive/issue_comments_440443.json:
```json
{
    "body": "<a id='comment:8'></a>New tests are running at https://github.com/mkoeppe/sage/actions/runs/81669565 (with #29341)",
    "created_at": "2020-04-18T19:21:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29426#issuecomment-440443",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>New tests are running at https://github.com/mkoeppe/sage/actions/runs/81669565 (with #29341)



---

archive/issue_comments_440444.json:
```json
{
    "body": "<a id='comment:9'></a>This seems to work well. Needs review",
    "created_at": "2020-04-19T19:24:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29426#issuecomment-440444",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>This seems to work well. Needs review



---

archive/issue_comments_440445.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-04-21T07:48:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29426#issuecomment-440445",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_440446.json:
```json
{
    "body": "<a id='comment:10'></a>LGTM.",
    "created_at": "2020-04-21T07:48:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29426#issuecomment-440446",
    "user": "https://github.com/kliem"
}
```

<a id='comment:10'></a>LGTM.



---

archive/issue_comments_440447.json:
```json
{
    "body": "<a id='comment:11'></a>Thanks!",
    "created_at": "2020-04-21T16:11:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29426#issuecomment-440447",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>Thanks!



---

archive/issue_events_075005.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-23T22:32:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29426",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29426#event-75005"
}
```



---

archive/issue_comments_440448.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-04-23T22:32:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29426#issuecomment-440448",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_440449.json:
```json
{
    "body": "<a id='comment:13'></a>Follow-up: #30324",
    "created_at": "2020-08-10T02:41:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29426#issuecomment-440449",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>Follow-up: #30324



---

archive/issue_comments_440450.json:
```json
{
    "body": "<a id='comment:14'></a>+1 thanks",
    "created_at": "2020-08-31T16:12:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29426",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29426#issuecomment-440450",
    "user": "https://github.com/embray"
}
```

<a id='comment:14'></a>+1 thanks
