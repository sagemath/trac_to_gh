# Issue 29543: normal_basis for positive-dimensional ideals

archive/issues_029306.json:
```json
{
    "body": "This ticket adds a `degree` option to the `normal_basis` method of ideals.\n\nThis allows to limit the output to monomials of a particular degree, which is useful when the corresponding quotient ring is not finite-dimensional as a vector space.\n\n```\nsage: R.<x,y,z> = QQ[]\nsage: I = R.ideal(x^2 + y^2 - 1)\nsage: [I.normal_basis(d) for d in (0..3)]\n[[1],\n [z, y, x],\n [z^2, y*z, x*z, y^2, x*y],\n [z^3, y*z^2, x*z^2, y^2*z, x*y*z, y^3, x*y^2]]\n```\n\nPreviously, the method could only be used when the quotient ring was finite-dimensional.\n\nThis functionality is provided by Singular. For reference, the corresponding Singular function is [kbase](https://www.singular.uni-kl.de/Manual/4-1-2/sing_275.htm#SEC315).\n\n\nCC:  @kwankyu\n\nKeywords: singular\n\nBranch/Commit: 8fd56280a16c52638ae9a0e324162e4c6258acf4\n\nReviewer: Travis Scrimshaw, Kwankyu Lee\n\nAuthor: Markus Wageringel\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/29543\n\n",
    "closed_at": "2020-04-24T22:28:09Z",
    "created_at": "2020-04-21T18:58:07Z",
    "labels": [
        "component: commutative algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "normal_basis for positive-dimensional ideals",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29543",
    "user": "https://github.com/mwageringel"
}
```
This ticket adds a `degree` option to the `normal_basis` method of ideals.

This allows to limit the output to monomials of a particular degree, which is useful when the corresponding quotient ring is not finite-dimensional as a vector space.

```
sage: R.<x,y,z> = QQ[]
sage: I = R.ideal(x^2 + y^2 - 1)
sage: [I.normal_basis(d) for d in (0..3)]
[[1],
 [z, y, x],
 [z^2, y*z, x*z, y^2, x*y],
 [z^3, y*z^2, x*z^2, y^2*z, x*y*z, y^3, x*y^2]]
```

Previously, the method could only be used when the quotient ring was finite-dimensional.

This functionality is provided by Singular. For reference, the corresponding Singular function is [kbase](https://www.singular.uni-kl.de/Manual/4-1-2/sing_275.htm#SEC315).


CC:  @kwankyu

Keywords: singular

Branch/Commit: 8fd56280a16c52638ae9a0e324162e4c6258acf4

Reviewer: Travis Scrimshaw, Kwankyu Lee

Author: Markus Wageringel

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/29543





---

archive/issue_comments_578431.json:
```json
{
    "body": "Changing branch from \"\" to \"u/gh-mwageringel/29543\"",
    "created_at": "2020-04-21T19:03:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29543#issuecomment-578431",
    "user": "https://github.com/mwageringel"
}
```

Changing branch from "" to "u/gh-mwageringel/29543"



---

archive/issue_comments_578432.json:
```json
{
    "body": "Changing commit from \"\" to \"223802c0c46154392886f77378a80d41d24ae87c\"",
    "created_at": "2020-04-21T19:03:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29543#issuecomment-578432",
    "user": "https://github.com/mwageringel"
}
```

Changing commit from "" to "223802c0c46154392886f77378a80d41d24ae87c"



---

archive/issue_comments_578433.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-04-21T19:03:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29543#issuecomment-578433",
    "user": "https://github.com/mwageringel"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_578434.json:
```json
{
    "body": "Changing keywords from \"\" to \"singular\".",
    "created_at": "2020-04-21T19:03:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29543#issuecomment-578434",
    "user": "https://github.com/mwageringel"
}
```

Changing keywords from "" to "singular".



---

archive/issue_comments_578435.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                                          |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|\n|[223802c](https://github.com/sagemath/sagetrac-mirror/commit/223802c0c46154392886f77378a80d41d24ae87c)|`29543: add degree option to normal_basis`|",
    "created_at": "2020-04-21T19:03:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29543#issuecomment-578435",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                                          |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|
|[223802c](https://github.com/sagemath/sagetrac-mirror/commit/223802c0c46154392886f77378a80d41d24ae87c)|`29543: add degree option to normal_basis`|



---

archive/issue_events_085094.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/29543",
    "rename": {
        "from": "normal_basis() for positive-dimensional ideals",
        "to": "normal_basis for positive-dimensional ideals"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29543#event-85094"
}
```



---

archive/issue_comments_578436.json:
```json
{
    "body": "Changing author from \"\" to \"Markus Wageringel\"",
    "created_at": "2020-04-21T19:03:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29543#issuecomment-578436",
    "user": "https://github.com/mwageringel"
}
```

Changing author from "" to "Markus Wageringel"



---

archive/issue_comments_578437.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2020-04-22T02:38:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29543#issuecomment-578437",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_578438.json:
```json
{
    "body": "<a id='comment:2'></a>\nNote that this change is backwards incompatible for anyone who was passing `algorithm` to `normal_basis` but not as a keyword. IMO, this is sufficiently unlikely to warrant additional action, but you could do a deprecation warning `if isinstance(degree, str):` to possibly catch this. I leave that choice up to you. Either way you decide, you can set a positive review (after adding the deprecation).",
    "created_at": "2020-04-22T02:38:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29543#issuecomment-578438",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:2'></a>
Note that this change is backwards incompatible for anyone who was passing `algorithm` to `normal_basis` but not as a keyword. IMO, this is sufficiently unlikely to warrant additional action, but you could do a deprecation warning `if isinstance(degree, str):` to possibly catch this. I leave that choice up to you. Either way you decide, you can set a positive review (after adding the deprecation).



---

archive/issue_comments_578439.json:
```json
{
    "body": "<a id='comment:3'></a>\nSome comments:\n\n(1) An explicit OUTPUT seems better.\n\n```\n         INPUT:\n \n-        - ``degree`` -- integer; if not ``None``, return only the monomials of\n-          the given degree\n+        - ``degree`` -- ``None`` or integer\n+\n+        OUTPUT:\n+\n+        If ``degree`` is an integer, only the monomials of the given degree in\n+        the normal basis.\n```\n(2) Some trimming.\n\n```\n         \"\"\"\n-        Return a vector space basis (consisting of monomials) of the\n-        quotient ring of this ideal.\n+        Return a vector space basis of the quotient ring of this ideal.\n \n         INPUT:\n \n-        - ``degree`` -- integer (default: ``None``); if not ``None``, return\n-          only the monomials of the given degree\n-\n-        - ``algorithm`` -- string (default: ``\"libsingular\"``); if different\n-          from the default, this will use the ``kbase()`` command from\n-          Singular instead of libsingular\n-\n-        - ``singular`` -- instance of Singular interface (default: the default\n-          instance); the singular interpreter to use when ``algorithm`` is not\n-          ``\"libsingular\"``\n+        - ``degree`` -- integer (default: ``None``)\n+\n+        - ``algorithm`` -- string (default: ``\"libsingular\"``); if not the\n+          default, this will use the ``kbase()`` command from Singular\n+\n+        - ``singular`` -- the singular interpreter to use when ``algorithm`` is\n+          not ``\"libsingular\"`` (default: the default instance)\n+\n+        OUTPUT:\n+\n+        Monomials in the basis. If ``degree`` is given, only the monomials of\n+        the given degree.\n```",
    "created_at": "2020-04-22T07:26:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29543#issuecomment-578439",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:3'></a>
Some comments:

(1) An explicit OUTPUT seems better.

```
         INPUT:
 
-        - ``degree`` -- integer; if not ``None``, return only the monomials of
-          the given degree
+        - ``degree`` -- ``None`` or integer
+
+        OUTPUT:
+
+        If ``degree`` is an integer, only the monomials of the given degree in
+        the normal basis.
```
(2) Some trimming.

```
         """
-        Return a vector space basis (consisting of monomials) of the
-        quotient ring of this ideal.
+        Return a vector space basis of the quotient ring of this ideal.
 
         INPUT:
 
-        - ``degree`` -- integer (default: ``None``); if not ``None``, return
-          only the monomials of the given degree
-
-        - ``algorithm`` -- string (default: ``"libsingular"``); if different
-          from the default, this will use the ``kbase()`` command from
-          Singular instead of libsingular
-
-        - ``singular`` -- instance of Singular interface (default: the default
-          instance); the singular interpreter to use when ``algorithm`` is not
-          ``"libsingular"``
+        - ``degree`` -- integer (default: ``None``)
+
+        - ``algorithm`` -- string (default: ``"libsingular"``); if not the
+          default, this will use the ``kbase()`` command from Singular
+
+        - ``singular`` -- the singular interpreter to use when ``algorithm`` is
+          not ``"libsingular"`` (default: the default instance)
+
+        OUTPUT:
+
+        Monomials in the basis. If ``degree`` is given, only the monomials of
+        the given degree.
```



---

archive/issue_comments_578440.json:
```json
{
    "body": "Changing commit from \"223802c0c46154392886f77378a80d41d24ae87c\" to \"8fd56280a16c52638ae9a0e324162e4c6258acf4\"",
    "created_at": "2020-04-22T18:09:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29543#issuecomment-578440",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "223802c0c46154392886f77378a80d41d24ae87c" to "8fd56280a16c52638ae9a0e324162e4c6258acf4"



---

archive/issue_comments_578441.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|\n|[8fd5628](https://github.com/sagemath/sagetrac-mirror/commit/8fd56280a16c52638ae9a0e324162e4c6258acf4)|`29543: add deprecation and reformat docstring`|",
    "created_at": "2020-04-22T18:09:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29543#issuecomment-578441",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|
|[8fd5628](https://github.com/sagemath/sagetrac-mirror/commit/8fd56280a16c52638ae9a0e324162e4c6258acf4)|`29543: add deprecation and reformat docstring`|



---

archive/issue_comments_578442.json:
```json
{
    "body": "<a id='comment:5'></a>\nThanks for the suggestions. I have implemented them accordingly. Indeed, it is good to keep backward compatibility when possible.",
    "created_at": "2020-04-22T19:07:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29543#issuecomment-578442",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:5'></a>
Thanks for the suggestions. I have implemented them accordingly. Indeed, it is good to keep backward compatibility when possible.



---

archive/issue_comments_578443.json:
```json
{
    "body": "Changing reviewer from \"Travis Scrimshaw\" to \"Travis Scrimshaw, Kwankyu Lee\"",
    "created_at": "2020-04-23T05:18:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29543#issuecomment-578443",
    "user": "https://github.com/kwankyu"
}
```

Changing reviewer from "Travis Scrimshaw" to "Travis Scrimshaw, Kwankyu Lee"



---

archive/issue_comments_578444.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-04-23T05:18:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29543#issuecomment-578444",
    "user": "https://github.com/kwankyu"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_578445.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-04-24T22:28:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29543#issuecomment-578445",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_578446.json:
```json
{
    "body": "Changing branch from \"u/gh-mwageringel/29543\" to \"8fd56280a16c52638ae9a0e324162e4c6258acf4\"",
    "created_at": "2020-04-24T22:28:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29543",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29543#issuecomment-578446",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/gh-mwageringel/29543" to "8fd56280a16c52638ae9a0e324162e4c6258acf4"



---

archive/issue_events_085095.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-24T22:28:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29543",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29543#event-85095"
}
```



---

archive/issue_events_085096.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-02T02:15:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29543",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29543#event-85096"
}
```
