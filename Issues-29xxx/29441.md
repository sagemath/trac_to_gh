# Issue 29441: upgrade rpy2 package 2.8.2 -> 3.3.5, upgrade R to 3.6.3, add new dependencies

archive/issues_029204.json:
```json
{
    "assignees": [],
    "body": "Main changes:\n- [https://pypi.org/project/rpy2/](https://pypi.org/project/rpy2/), supports python >= 3.6\n- `cygwin.patch` does not apply anymore\n- [cffi>=1.13.1](https://pypi.org/project/cffi/) is a new dependency, we install latest 1.14.0 (supports python >= 3.2)\n- [pycparser](https://pypi.org/project/pycparser/) is a new dependency (required by cffi, supports python >= 3.4)\n- [https://pypi.org/project/tzlocal/](https://pypi.org/project/tzlocal/) is a new dependency, we install latest 2.1 (supports python >= 2.7)\n- [https://pypi.org/project/pytz/](https://pypi.org/project/pytz/) is a new dependency, we update to latest 2020.1 (supports python >= 2.4)\n\n- add small patches to `setup.py` that\n  - disables printing on `stdout` (that perturbs `pip`) - accepted upstream\n  - removes the build dependency on `pytest`\n- some more dependencies (pytest, numpy, tzlocal) conditional on SAGE_CHECK!=no\n\ntarballs: see `checksums.ini` (to download automatically, use `./configure --enable-download-from-upstream-url`)\n\nUpstream issues and PR\n- https://github.com/rpy2/rpy2/issues/670\n- \u200bhttps://github.com/rpy2/rpy2/pull/716\n\nDepends on #29851\nDepends on #30064\nDepends on #30118\nDepends on #30067\nDepends on #30147\nDepends on #29929\nDepends on #30149\n\nCC:  @mkoeppe @EmmanuelCharpentier @timokau @isuruf @slel @antonio-rojas @embray @dimpase\n\nComponent: **packages: standard**\n\nAuthor: **Vincent Delecroix, Matthias Koeppe**\n\nBranch: **[`54d0f99`](https://github.com/sagemath/sagetrac-mirror/commit/54d0f9927d3bd2b1b24a1ca3b2fb9c15a1df816c)**\n\nReviewer: **Emmanuel Charpentier, Dima Pasechnik**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29441_\n\n",
    "closed_at": "2020-08-02T08:20:57Z",
    "created_at": "2020-03-31T20:40:11Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "upgrade rpy2 package 2.8.2 -> 3.3.5, upgrade R to 3.6.3, add new dependencies",
    "type": "issue",
    "updated_at": "2020-09-04T02:47:18Z",
    "url": "https://github.com/sagemath/sage/issues/29441",
    "user": "https://github.com/videlec"
}
```
Main changes:
- [https://pypi.org/project/rpy2/](https://pypi.org/project/rpy2/), supports python >= 3.6
- `cygwin.patch` does not apply anymore
- [cffi>=1.13.1](https://pypi.org/project/cffi/) is a new dependency, we install latest 1.14.0 (supports python >= 3.2)
- [pycparser](https://pypi.org/project/pycparser/) is a new dependency (required by cffi, supports python >= 3.4)
- [https://pypi.org/project/tzlocal/](https://pypi.org/project/tzlocal/) is a new dependency, we install latest 2.1 (supports python >= 2.7)
- [https://pypi.org/project/pytz/](https://pypi.org/project/pytz/) is a new dependency, we update to latest 2020.1 (supports python >= 2.4)

- add small patches to `setup.py` that
  - disables printing on `stdout` (that perturbs `pip`) - accepted upstream
  - removes the build dependency on `pytest`
- some more dependencies (pytest, numpy, tzlocal) conditional on SAGE_CHECK!=no

tarballs: see `checksums.ini` (to download automatically, use `./configure --enable-download-from-upstream-url`)

Upstream issues and PR
- https://github.com/rpy2/rpy2/issues/670
- â€‹https://github.com/rpy2/rpy2/pull/716

Depends on #29851
Depends on #30064
Depends on #30118
Depends on #30067
Depends on #30147
Depends on #29929
Depends on #30149

CC:  @mkoeppe @EmmanuelCharpentier @timokau @isuruf @slel @antonio-rojas @embray @dimpase

Component: **packages: standard**

Author: **Vincent Delecroix, Matthias Koeppe**

Branch: **[`54d0f99`](https://github.com/sagemath/sagetrac-mirror/commit/54d0f9927d3bd2b1b24a1ca3b2fb9c15a1df816c)**

Reviewer: **Emmanuel Charpentier, Dima Pasechnik**

_Issue created by migration from https://trac.sagemath.org/ticket/29441_





---

archive/issue_events_401859.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-03-31T20:40:11Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29441#event-401859"
}
```



---

archive/issue_events_401860.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-03-31T20:40:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "0000b0",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29441#event-401860"
}
```



---

archive/issue_events_401861.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-03-31T20:40:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29441#event-401861"
}
```



---

archive/issue_events_401862.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-03-31T20:40:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29441#event-401862"
}
```



---

archive/issue_comments_462476.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThe `cygwin.patch` does not longer apply.",
    "created_at": "2020-03-31T20:50:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462476",
    "user": "https://github.com/videlec"
}
```

<div id="comment:1" align="right">comment:1</div>

The `cygwin.patch` does not longer apply.



---

archive/issue_comments_462477.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-The release 3.2.7 is only Python 3 compatible\n+The release 3.2.7 is only Python 3 compatible.\n \n tarball: https://files.pythonhosted.org/packages/39/c0/61120f9dae06b4887426d229b68a7a5f0ca1f9cb3986319bb9484819a28d/rpy2-3.2.7.tar.gz\n``````\n",
    "created_at": "2020-03-31T20:50:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462477",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-The release 3.2.7 is only Python 3 compatible
+The release 3.2.7 is only Python 3 compatible.
 
 tarball: https://files.pythonhosted.org/packages/39/c0/61120f9dae06b4887426d229b68a7a5f0ca1f9cb3986319bb9484819a28d/rpy2-3.2.7.tar.gz
``````




---

archive/issue_comments_462478.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,11 @@\n The release 3.2.7 is only Python 3 compatible.\n \n-tarball: https://files.pythonhosted.org/packages/39/c0/61120f9dae06b4887426d229b68a7a5f0ca1f9cb3986319bb9484819a28d/rpy2-3.2.7.tar.gz\n+Main changes:\n+- `cygwin.patch` does not apply anymore\n+- [https://pypi.org/project/pytest/](https://pypi.org/project/pytest/) is a new dependency (!?)\n+- [https://pypi.org/project/cffi/ cffi>=1.13.1](https://pypi.org/project/cffi/ cffi>=1.13.1) is a new dependency\n+\n+tarballs: \n+- https://files.pythonhosted.org/packages/39/c0/61120f9dae06b4887426d229b68a7a5f0ca1f9cb3986319bb9484819a28d/rpy2-3.2.7.tar.gz\n+- https://files.pythonhosted.org/packages/6d/4e/572aed20422dee7fa2bd27995b2a53a32de90c1826e5531c9df6d3ea77ed/pytest-5.4.1.tar.gz\n+- https://files.pythonhosted.org/packages/05/54/3324b0c46340c31b909fcec598696aaec7ddc8c18a63f2db352562d3354c/cffi-1.14.0.tar.gz\n``````\n",
    "created_at": "2020-03-31T20:59:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462478",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,11 @@
 The release 3.2.7 is only Python 3 compatible.
 
-tarball: https://files.pythonhosted.org/packages/39/c0/61120f9dae06b4887426d229b68a7a5f0ca1f9cb3986319bb9484819a28d/rpy2-3.2.7.tar.gz
+Main changes:
+- `cygwin.patch` does not apply anymore
+- [https://pypi.org/project/pytest/](https://pypi.org/project/pytest/) is a new dependency (!?)
+- [https://pypi.org/project/cffi/ cffi>=1.13.1](https://pypi.org/project/cffi/ cffi>=1.13.1) is a new dependency
+
+tarballs: 
+- https://files.pythonhosted.org/packages/39/c0/61120f9dae06b4887426d229b68a7a5f0ca1f9cb3986319bb9484819a28d/rpy2-3.2.7.tar.gz
+- https://files.pythonhosted.org/packages/6d/4e/572aed20422dee7fa2bd27995b2a53a32de90c1826e5531c9df6d3ea77ed/pytest-5.4.1.tar.gz
+- https://files.pythonhosted.org/packages/05/54/3324b0c46340c31b909fcec598696aaec7ddc8c18a63f2db352562d3354c/cffi-1.14.0.tar.gz
``````




---

archive/issue_comments_462479.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,8 +4,10 @@\n - `cygwin.patch` does not apply anymore\n - [https://pypi.org/project/pytest/](https://pypi.org/project/pytest/) is a new dependency (!?)\n - [https://pypi.org/project/cffi/ cffi>=1.13.1](https://pypi.org/project/cffi/ cffi>=1.13.1) is a new dependency\n+- [https://pypi.org/project/pycparser/ pycparser](https://pypi.org/project/pycparser/ pycparser) is a new dependency (required by cffi)\n \n tarballs: \n - https://files.pythonhosted.org/packages/39/c0/61120f9dae06b4887426d229b68a7a5f0ca1f9cb3986319bb9484819a28d/rpy2-3.2.7.tar.gz\n - https://files.pythonhosted.org/packages/6d/4e/572aed20422dee7fa2bd27995b2a53a32de90c1826e5531c9df6d3ea77ed/pytest-5.4.1.tar.gz\n - https://files.pythonhosted.org/packages/05/54/3324b0c46340c31b909fcec598696aaec7ddc8c18a63f2db352562d3354c/cffi-1.14.0.tar.gz\n+- https://files.pythonhosted.org/packages/0f/86/e19659527668d70be91d0369aeaa055b4eb396b0f387a4f92293a20035bd/pycparser-2.20.tar.gz\n``````\n",
    "created_at": "2020-03-31T21:01:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462479",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,8 +4,10 @@
 - `cygwin.patch` does not apply anymore
 - [https://pypi.org/project/pytest/](https://pypi.org/project/pytest/) is a new dependency (!?)
 - [https://pypi.org/project/cffi/ cffi>=1.13.1](https://pypi.org/project/cffi/ cffi>=1.13.1) is a new dependency
+- [https://pypi.org/project/pycparser/ pycparser](https://pypi.org/project/pycparser/ pycparser) is a new dependency (required by cffi)
 
 tarballs: 
 - https://files.pythonhosted.org/packages/39/c0/61120f9dae06b4887426d229b68a7a5f0ca1f9cb3986319bb9484819a28d/rpy2-3.2.7.tar.gz
 - https://files.pythonhosted.org/packages/6d/4e/572aed20422dee7fa2bd27995b2a53a32de90c1826e5531c9df6d3ea77ed/pytest-5.4.1.tar.gz
 - https://files.pythonhosted.org/packages/05/54/3324b0c46340c31b909fcec598696aaec7ddc8c18a63f2db352562d3354c/cffi-1.14.0.tar.gz
+- https://files.pythonhosted.org/packages/0f/86/e19659527668d70be91d0369aeaa055b4eb396b0f387a4f92293a20035bd/pycparser-2.20.tar.gz
``````




---

archive/issue_comments_462480.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\n`pytest` has a lot of dependencies\n- `attrs`\n- `importlib-metadata`\n- `more-itertools`\n- `pluggy`\n- `py`\n- `zipp`\nThe easiest might be to patch `rpy2` to not depend on `pytest`. I suspect that only the test suite of `rpy2` depends on `pytest`.",
    "created_at": "2020-03-31T21:05:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462480",
    "user": "https://github.com/videlec"
}
```

<div id="comment:4" align="right">comment:4</div>

`pytest` has a lot of dependencies
- `attrs`
- `importlib-metadata`
- `more-itertools`
- `pluggy`
- `py`
- `zipp`
The easiest might be to patch `rpy2` to not depend on `pytest`. I suspect that only the test suite of `rpy2` depends on `pytest`.



---

archive/issue_comments_462481.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,12 +2,15 @@\n \n Main changes:\n - `cygwin.patch` does not apply anymore\n+- the `setup.py` script is broken in several ways (!!)\n - [https://pypi.org/project/pytest/](https://pypi.org/project/pytest/) is a new dependency (!?)\n - [https://pypi.org/project/cffi/ cffi>=1.13.1](https://pypi.org/project/cffi/ cffi>=1.13.1) is a new dependency\n - [https://pypi.org/project/pycparser/ pycparser](https://pypi.org/project/pycparser/ pycparser) is a new dependency (required by cffi)\n+- [https://pypi.org/project/tzlocal/ tzlocal](https://pypi.org/project/tzlocal/ tzlocal)\n \n tarballs: \n - https://files.pythonhosted.org/packages/39/c0/61120f9dae06b4887426d229b68a7a5f0ca1f9cb3986319bb9484819a28d/rpy2-3.2.7.tar.gz\n - https://files.pythonhosted.org/packages/6d/4e/572aed20422dee7fa2bd27995b2a53a32de90c1826e5531c9df6d3ea77ed/pytest-5.4.1.tar.gz\n - https://files.pythonhosted.org/packages/05/54/3324b0c46340c31b909fcec598696aaec7ddc8c18a63f2db352562d3354c/cffi-1.14.0.tar.gz\n - https://files.pythonhosted.org/packages/0f/86/e19659527668d70be91d0369aeaa055b4eb396b0f387a4f92293a20035bd/pycparser-2.20.tar.gz\n+- https://files.pythonhosted.org/packages/c6/52/5ec375d4efcbe4e31805f3c4b301bdfcff9dcbdb3605d4b79e117a16b38d/tzlocal-2.0.0.tar.gz\n``````\n",
    "created_at": "2020-03-31T21:13:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462481",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,12 +2,15 @@
 
 Main changes:
 - `cygwin.patch` does not apply anymore
+- the `setup.py` script is broken in several ways (!!)
 - [https://pypi.org/project/pytest/](https://pypi.org/project/pytest/) is a new dependency (!?)
 - [https://pypi.org/project/cffi/ cffi>=1.13.1](https://pypi.org/project/cffi/ cffi>=1.13.1) is a new dependency
 - [https://pypi.org/project/pycparser/ pycparser](https://pypi.org/project/pycparser/ pycparser) is a new dependency (required by cffi)
+- [https://pypi.org/project/tzlocal/ tzlocal](https://pypi.org/project/tzlocal/ tzlocal)
 
 tarballs: 
 - https://files.pythonhosted.org/packages/39/c0/61120f9dae06b4887426d229b68a7a5f0ca1f9cb3986319bb9484819a28d/rpy2-3.2.7.tar.gz
 - https://files.pythonhosted.org/packages/6d/4e/572aed20422dee7fa2bd27995b2a53a32de90c1826e5531c9df6d3ea77ed/pytest-5.4.1.tar.gz
 - https://files.pythonhosted.org/packages/05/54/3324b0c46340c31b909fcec598696aaec7ddc8c18a63f2db352562d3354c/cffi-1.14.0.tar.gz
 - https://files.pythonhosted.org/packages/0f/86/e19659527668d70be91d0369aeaa055b4eb396b0f387a4f92293a20035bd/pycparser-2.20.tar.gz
+- https://files.pythonhosted.org/packages/c6/52/5ec375d4efcbe4e31805f3c4b301bdfcff9dcbdb3605d4b79e117a16b38d/tzlocal-2.0.0.tar.gz
``````




---

archive/issue_comments_462482.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nGood news: tests pass on my machine!",
    "created_at": "2020-03-31T21:14:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462482",
    "user": "https://github.com/videlec"
}
```

<div id="comment:6" align="right">comment:6</div>

Good news: tests pass on my machine!



---

archive/issue_events_401863.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-31T21:17:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29441#event-401863"
}
```



---

archive/issue_events_401864.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-31T21:17:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29441#event-401864"
}
```



---

archive/issue_comments_462483.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nSee #28998\tfor pytest",
    "created_at": "2020-03-31T21:18:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462483",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

See #28998	for pytest



---

archive/issue_comments_462484.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@videlec](#comment%3A4):\n> `pytest` has a lot of dependencies\n> - `attrs`\n> - `importlib-metadata`\n> - `more-itertools`\n> - `pluggy`\n> - `py`\n> - `zipp`\n\nTall order, indeed...\n\n> The easiest might be to patch `rpy2` to not depend on `pytest`. I suspect that only the test suite of `rpy2` depends on `pytest`.\n\nMy first reaction was: No, no, no, no, no. And no.\". A patched version has a very heavy price in terms of maintenance each and every update entails patch checking/upgrading, up to the point the whole mess becomes unmaintainable.\n\nThe maintenance price of the added dependencies should be considered, of course, but I suspect that it may be lower than the price of a patch to `rpy2`.",
    "created_at": "2020-03-31T21:20:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462484",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@videlec](#comment%3A4):
> `pytest` has a lot of dependencies
> - `attrs`
> - `importlib-metadata`
> - `more-itertools`
> - `pluggy`
> - `py`
> - `zipp`

Tall order, indeed...

> The easiest might be to patch `rpy2` to not depend on `pytest`. I suspect that only the test suite of `rpy2` depends on `pytest`.

My first reaction was: No, no, no, no, no. And no.". A patched version has a very heavy price in terms of maintenance each and every update entails patch checking/upgrading, up to the point the whole mess becomes unmaintainable.

The maintenance price of the added dependencies should be considered, of course, but I suspect that it may be lower than the price of a patch to `rpy2`.



---

archive/issue_comments_462485.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,15 +2,12 @@\n \n Main changes:\n - `cygwin.patch` does not apply anymore\n-- the `setup.py` script is broken in several ways (!!)\n - [https://pypi.org/project/pytest/](https://pypi.org/project/pytest/) is a new dependency (!?)\n - [https://pypi.org/project/cffi/ cffi>=1.13.1](https://pypi.org/project/cffi/ cffi>=1.13.1) is a new dependency\n - [https://pypi.org/project/pycparser/ pycparser](https://pypi.org/project/pycparser/ pycparser) is a new dependency (required by cffi)\n-- [https://pypi.org/project/tzlocal/ tzlocal](https://pypi.org/project/tzlocal/ tzlocal)\n \n tarballs: \n - https://files.pythonhosted.org/packages/39/c0/61120f9dae06b4887426d229b68a7a5f0ca1f9cb3986319bb9484819a28d/rpy2-3.2.7.tar.gz\n - https://files.pythonhosted.org/packages/6d/4e/572aed20422dee7fa2bd27995b2a53a32de90c1826e5531c9df6d3ea77ed/pytest-5.4.1.tar.gz\n - https://files.pythonhosted.org/packages/05/54/3324b0c46340c31b909fcec598696aaec7ddc8c18a63f2db352562d3354c/cffi-1.14.0.tar.gz\n - https://files.pythonhosted.org/packages/0f/86/e19659527668d70be91d0369aeaa055b4eb396b0f387a4f92293a20035bd/pycparser-2.20.tar.gz\n-- https://files.pythonhosted.org/packages/c6/52/5ec375d4efcbe4e31805f3c4b301bdfcff9dcbdb3605d4b79e117a16b38d/tzlocal-2.0.0.tar.gz\n``````\n",
    "created_at": "2020-03-31T21:20:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462485",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,15 +2,12 @@
 
 Main changes:
 - `cygwin.patch` does not apply anymore
-- the `setup.py` script is broken in several ways (!!)
 - [https://pypi.org/project/pytest/](https://pypi.org/project/pytest/) is a new dependency (!?)
 - [https://pypi.org/project/cffi/ cffi>=1.13.1](https://pypi.org/project/cffi/ cffi>=1.13.1) is a new dependency
 - [https://pypi.org/project/pycparser/ pycparser](https://pypi.org/project/pycparser/ pycparser) is a new dependency (required by cffi)
-- [https://pypi.org/project/tzlocal/ tzlocal](https://pypi.org/project/tzlocal/ tzlocal)
 
 tarballs: 
 - https://files.pythonhosted.org/packages/39/c0/61120f9dae06b4887426d229b68a7a5f0ca1f9cb3986319bb9484819a28d/rpy2-3.2.7.tar.gz
 - https://files.pythonhosted.org/packages/6d/4e/572aed20422dee7fa2bd27995b2a53a32de90c1826e5531c9df6d3ea77ed/pytest-5.4.1.tar.gz
 - https://files.pythonhosted.org/packages/05/54/3324b0c46340c31b909fcec598696aaec7ddc8c18a63f2db352562d3354c/cffi-1.14.0.tar.gz
 - https://files.pythonhosted.org/packages/0f/86/e19659527668d70be91d0369aeaa055b4eb396b0f387a4f92293a20035bd/pycparser-2.20.tar.gz
-- https://files.pythonhosted.org/packages/c6/52/5ec375d4efcbe4e31805f3c4b301bdfcff9dcbdb3605d4b79e117a16b38d/tzlocal-2.0.0.tar.gz
``````




---

archive/issue_events_401865.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2020-03-31T21:20:16Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29441#event-401865"
}
```



---

archive/issue_events_401866.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2020-03-31T21:20:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29441#event-401866"
}
```



---

archive/issue_comments_462486.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@mkoeppe](#comment%3A8):\n> See #28998\tfor pytest\n\nThanks for the pointer. Would `pytest` be installed as a \"standard\" package?",
    "created_at": "2020-03-31T21:22:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462486",
    "user": "https://github.com/videlec"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@mkoeppe](#comment%3A8):
> See #28998	for pytest

Thanks for the pointer. Would `pytest` be installed as a "standard" package?



---

archive/issue_comments_462487.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@mkoeppe](#comment%3A8):\n> See #28998\tfor pytest\n\nDors it need much work ?",
    "created_at": "2020-03-31T21:23:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462487",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@mkoeppe](#comment%3A8):
> See #28998	for pytest

Dors it need much work ?



---

archive/issue_comments_462488.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@videlec](#comment%3A10):\n> Replying to [@mkoeppe](#comment%3A8):\n> > See #28998\tfor pytest\n\n> \n> Thanks for the pointer. Would `pytest` be installed as a \"standard\" package?\n\nIt would have to : `r` depends on `rpy2`, which would depend on `pytest`. ISTR that you yourself stated that having a standard package depend on an optional package would be madness (and I agree...). Therefore...",
    "created_at": "2020-03-31T21:25:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462488",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@videlec](#comment%3A10):
> Replying to [@mkoeppe](#comment%3A8):
> > See #28998	for pytest

> 
> Thanks for the pointer. Would `pytest` be installed as a "standard" package?

It would have to : `r` depends on `rpy2`, which would depend on `pytest`. ISTR that you yourself stated that having a standard package depend on an optional package would be madness (and I agree...). Therefore...



---

archive/issue_comments_462489.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/de753f871a98aa1aa2c57a1099c770af6aa26714\"><code>de753f8</code></a></td><td><code>upgrade rpy2 version</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ca13368692b0ef7ea5c36e35db75476c8b77dc8\"><code>7ca1336</code></a></td><td><code>remove cygwin.patch (rpy2)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c525fc2441b5a93f7c38e3c9bdff170b0454ef3b\"><code>c525fc2</code></a></td><td><code>add setup.patch (rpy2)</code></td></tr></table>\n",
    "created_at": "2020-03-31T21:26:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462489",
    "user": "https://github.com/videlec"
}
```

<div id="comment:13"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/de753f871a98aa1aa2c57a1099c770af6aa26714"><code>de753f8</code></a></td><td><code>upgrade rpy2 version</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ca13368692b0ef7ea5c36e35db75476c8b77dc8"><code>7ca1336</code></a></td><td><code>remove cygwin.patch (rpy2)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c525fc2441b5a93f7c38e3c9bdff170b0454ef3b"><code>c525fc2</code></a></td><td><code>add setup.patch (rpy2)</code></td></tr></table>




---

archive/issue_comments_462490.json:
```json
{
    "body": "Branch: **[public/29441](https://github.com/sagemath/sagetrac-mirror/tree/public/29441)**",
    "created_at": "2020-03-31T21:26:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462490",
    "user": "https://github.com/videlec"
}
```

Branch: **[public/29441](https://github.com/sagemath/sagetrac-mirror/tree/public/29441)**



---

archive/issue_comments_462491.json:
```json
{
    "body": "Commit: **[`c525fc2`](https://github.com/sagemath/sagetrac-mirror/commit/c525fc2441b5a93f7c38e3c9bdff170b0454ef3b)**",
    "created_at": "2020-03-31T21:26:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462491",
    "user": "https://github.com/videlec"
}
```

Commit: **[`c525fc2`](https://github.com/sagemath/sagetrac-mirror/commit/c525fc2441b5a93f7c38e3c9bdff170b0454ef3b)**



---

archive/issue_comments_462492.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nAs far as tests are concerned, the design of `rpy2` is weird. Tests should be separate from the `rpy2` module (and hence the dependency of `pytest` superfluous).",
    "created_at": "2020-03-31T21:28:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462492",
    "user": "https://github.com/videlec"
}
```

<div id="comment:14" align="right">comment:14</div>

As far as tests are concerned, the design of `rpy2` is weird. Tests should be separate from the `rpy2` module (and hence the dependency of `pytest` superfluous).



---

archive/issue_comments_462493.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@EmmanuelCharpentier](#comment%3A9):\n> Milestone changed from sage-9.2 to sage-9.1\n\nWas this intentional?\nWe definitely cannot drop py2 support for 9.1",
    "created_at": "2020-03-31T21:37:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462493",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@EmmanuelCharpentier](#comment%3A9):
> Milestone changed from sage-9.2 to sage-9.1

Was this intentional?
We definitely cannot drop py2 support for 9.1



---

archive/issue_comments_462494.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@mkoeppe](#comment%3A15):\n> Replying to [@EmmanuelCharpentier](#comment%3A9):\n> > Milestone changed from sage-9.2 to sage-9.1\n\n> \n> Was this intentional?\n> We definitely cannot drop py2 support for 9.1\n\nAgreed. This was a mistake.",
    "created_at": "2020-03-31T21:38:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462494",
    "user": "https://github.com/videlec"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@mkoeppe](#comment%3A15):
> Replying to [@EmmanuelCharpentier](#comment%3A9):
> > Milestone changed from sage-9.2 to sage-9.1

> 
> Was this intentional?
> We definitely cannot drop py2 support for 9.1

Agreed. This was a mistake.



---

archive/issue_events_401867.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-03-31T21:38:44Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29441#event-401867"
}
```



---

archive/issue_events_401868.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-03-31T21:38:44Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29441#event-401868"
}
```



---

archive/issue_comments_462495.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,12 +2,15 @@\n \n Main changes:\n - `cygwin.patch` does not apply anymore\n-- [https://pypi.org/project/pytest/](https://pypi.org/project/pytest/) is a new dependency (!?)\n-- [https://pypi.org/project/cffi/ cffi>=1.13.1](https://pypi.org/project/cffi/ cffi>=1.13.1) is a new dependency\n-- [https://pypi.org/project/pycparser/ pycparser](https://pypi.org/project/pycparser/ pycparser) is a new dependency (required by cffi)\n+- [pytest](https://pypi.org/project/pytest/) is a new dependency (!?)\n+- [cffi>=1.13.1](https://pypi.org/project/cffi/) is a new dependency\n+- [pycparser](https://pypi.org/project/pycparser/) is a new dependency (required by cffi)\n \n tarballs: \n - https://files.pythonhosted.org/packages/39/c0/61120f9dae06b4887426d229b68a7a5f0ca1f9cb3986319bb9484819a28d/rpy2-3.2.7.tar.gz\n - https://files.pythonhosted.org/packages/6d/4e/572aed20422dee7fa2bd27995b2a53a32de90c1826e5531c9df6d3ea77ed/pytest-5.4.1.tar.gz\n - https://files.pythonhosted.org/packages/05/54/3324b0c46340c31b909fcec598696aaec7ddc8c18a63f2db352562d3354c/cffi-1.14.0.tar.gz\n - https://files.pythonhosted.org/packages/0f/86/e19659527668d70be91d0369aeaa055b4eb396b0f387a4f92293a20035bd/pycparser-2.20.tar.gz\n+\n+upstream issues and PR\n+- [issues #670 (about tests in rpy2 and pytest dependency)](https://github.com/rpy2/rpy2/issues/670)\n``````\n",
    "created_at": "2020-03-31T21:40:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462495",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,12 +2,15 @@
 
 Main changes:
 - `cygwin.patch` does not apply anymore
-- [https://pypi.org/project/pytest/](https://pypi.org/project/pytest/) is a new dependency (!?)
-- [https://pypi.org/project/cffi/ cffi>=1.13.1](https://pypi.org/project/cffi/ cffi>=1.13.1) is a new dependency
-- [https://pypi.org/project/pycparser/ pycparser](https://pypi.org/project/pycparser/ pycparser) is a new dependency (required by cffi)
+- [pytest](https://pypi.org/project/pytest/) is a new dependency (!?)
+- [cffi>=1.13.1](https://pypi.org/project/cffi/) is a new dependency
+- [pycparser](https://pypi.org/project/pycparser/) is a new dependency (required by cffi)
 
 tarballs: 
 - https://files.pythonhosted.org/packages/39/c0/61120f9dae06b4887426d229b68a7a5f0ca1f9cb3986319bb9484819a28d/rpy2-3.2.7.tar.gz
 - https://files.pythonhosted.org/packages/6d/4e/572aed20422dee7fa2bd27995b2a53a32de90c1826e5531c9df6d3ea77ed/pytest-5.4.1.tar.gz
 - https://files.pythonhosted.org/packages/05/54/3324b0c46340c31b909fcec598696aaec7ddc8c18a63f2db352562d3354c/cffi-1.14.0.tar.gz
 - https://files.pythonhosted.org/packages/0f/86/e19659527668d70be91d0369aeaa055b4eb396b0f387a4f92293a20035bd/pycparser-2.20.tar.gz
+
+upstream issues and PR
+- [issues #670 (about tests in rpy2 and pytest dependency)](https://github.com/rpy2/rpy2/issues/670)
``````




---

archive/issue_comments_462496.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@videlec](#comment%3A14):\n> As far as tests are concerned, the design of `rpy2` is weird. Tests should be separate from the `rpy2` module (and hence the dependency of `pytest` superfluous).\n\nReplying to [@videlec](#comment%3A14):\n> As far as tests are concerned, the design of `rpy2` is weird. Tests should be separate from the `rpy2` module (and hence the dependency of `pytest` superfluous).\n\n1) Can `rpy2` use packages hypothetically installed by an hypothetical package implementing #28998 ?\n\n2) should we instead wait for an upstream-fixed `rpy2` (supposing that upstream agrees with you...) ?",
    "created_at": "2020-03-31T21:40:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462496",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@videlec](#comment%3A14):
> As far as tests are concerned, the design of `rpy2` is weird. Tests should be separate from the `rpy2` module (and hence the dependency of `pytest` superfluous).

Replying to [@videlec](#comment%3A14):
> As far as tests are concerned, the design of `rpy2` is weird. Tests should be separate from the `rpy2` module (and hence the dependency of `pytest` superfluous).

1) Can `rpy2` use packages hypothetically installed by an hypothetical package implementing #28998 ?

2) should we instead wait for an upstream-fixed `rpy2` (supposing that upstream agrees with you...) ?



---

archive/issue_comments_462497.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@EmmanuelCharpentier](#comment%3A18):\n> Replying to [@videlec](#comment%3A14):\n> > As far as tests are concerned, the design of `rpy2` is weird. Tests should be separate from the `rpy2` module (and hence the dependency of `pytest` superfluous).\n\n> \n> 2) should we instead wait for an upstream-fixed `rpy2` (supposing that upstream agrees with you...) ?\n\nYES",
    "created_at": "2020-03-31T21:42:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462497",
    "user": "https://github.com/videlec"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@EmmanuelCharpentier](#comment%3A18):
> Replying to [@videlec](#comment%3A14):
> > As far as tests are concerned, the design of `rpy2` is weird. Tests should be separate from the `rpy2` module (and hence the dependency of `pytest` superfluous).

> 
> 2) should we instead wait for an upstream-fixed `rpy2` (supposing that upstream agrees with you...) ?

YES



---

archive/issue_comments_462498.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,15 +2,12 @@\n \n Main changes:\n - `cygwin.patch` does not apply anymore\n-- [pytest](https://pypi.org/project/pytest/) is a new dependency (!?)\n-- [cffi>=1.13.1](https://pypi.org/project/cffi/) is a new dependency\n-- [pycparser](https://pypi.org/project/pycparser/) is a new dependency (required by cffi)\n+- [https://pypi.org/project/pytest/](https://pypi.org/project/pytest/) is a new dependency (!?)\n+- [https://pypi.org/project/cffi/ cffi>=1.13.1](https://pypi.org/project/cffi/ cffi>=1.13.1) is a new dependency\n+- [https://pypi.org/project/pycparser/ pycparser](https://pypi.org/project/pycparser/ pycparser) is a new dependency (required by cffi)\n \n tarballs: \n - https://files.pythonhosted.org/packages/39/c0/61120f9dae06b4887426d229b68a7a5f0ca1f9cb3986319bb9484819a28d/rpy2-3.2.7.tar.gz\n - https://files.pythonhosted.org/packages/6d/4e/572aed20422dee7fa2bd27995b2a53a32de90c1826e5531c9df6d3ea77ed/pytest-5.4.1.tar.gz\n - https://files.pythonhosted.org/packages/05/54/3324b0c46340c31b909fcec598696aaec7ddc8c18a63f2db352562d3354c/cffi-1.14.0.tar.gz\n - https://files.pythonhosted.org/packages/0f/86/e19659527668d70be91d0369aeaa055b4eb396b0f387a4f92293a20035bd/pycparser-2.20.tar.gz\n-\n-upstream issues and PR\n-- [issues #670 (about tests in rpy2 and pytest dependency)](https://github.com/rpy2/rpy2/issues/670)\n``````\n",
    "created_at": "2020-03-31T21:43:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462498",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,15 +2,12 @@
 
 Main changes:
 - `cygwin.patch` does not apply anymore
-- [pytest](https://pypi.org/project/pytest/) is a new dependency (!?)
-- [cffi>=1.13.1](https://pypi.org/project/cffi/) is a new dependency
-- [pycparser](https://pypi.org/project/pycparser/) is a new dependency (required by cffi)
+- [https://pypi.org/project/pytest/](https://pypi.org/project/pytest/) is a new dependency (!?)
+- [https://pypi.org/project/cffi/ cffi>=1.13.1](https://pypi.org/project/cffi/ cffi>=1.13.1) is a new dependency
+- [https://pypi.org/project/pycparser/ pycparser](https://pypi.org/project/pycparser/ pycparser) is a new dependency (required by cffi)
 
 tarballs: 
 - https://files.pythonhosted.org/packages/39/c0/61120f9dae06b4887426d229b68a7a5f0ca1f9cb3986319bb9484819a28d/rpy2-3.2.7.tar.gz
 - https://files.pythonhosted.org/packages/6d/4e/572aed20422dee7fa2bd27995b2a53a32de90c1826e5531c9df6d3ea77ed/pytest-5.4.1.tar.gz
 - https://files.pythonhosted.org/packages/05/54/3324b0c46340c31b909fcec598696aaec7ddc8c18a63f2db352562d3354c/cffi-1.14.0.tar.gz
 - https://files.pythonhosted.org/packages/0f/86/e19659527668d70be91d0369aeaa055b4eb396b0f387a4f92293a20035bd/pycparser-2.20.tar.gz
-
-upstream issues and PR
-- [issues #670 (about tests in rpy2 and pytest dependency)](https://github.com/rpy2/rpy2/issues/670)
``````




---

archive/issue_comments_462499.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nrpy2 should be patched so that pytest is not an actual dependency, but test-only. \n\nrpy2 is missing modern metadata such as requirements.txt, test-requirements.txt, tox.ini where things like this are commonly declared.\n\n\n#28998 would install pytest only when SAGE_CHECK=yes.",
    "created_at": "2020-03-31T21:43:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462499",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:20" align="right">comment:20</div>

rpy2 should be patched so that pytest is not an actual dependency, but test-only. 

rpy2 is missing modern metadata such as requirements.txt, test-requirements.txt, tox.ini where things like this are commonly declared.


#28998 would install pytest only when SAGE_CHECK=yes.



---

archive/issue_comments_462500.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nBy the way, I recommend that you add the new `upstream_url` fields to `checksum.ini`.\nMakes it easier to test the ticket.",
    "created_at": "2020-03-31T21:45:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462500",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:21" align="right">comment:21</div>

By the way, I recommend that you add the new `upstream_url` fields to `checksum.ini`.
Makes it easier to test the ticket.



---

archive/issue_comments_462501.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\n(See #29425 for an example)",
    "created_at": "2020-03-31T21:45:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462501",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:22" align="right">comment:22</div>

(See #29425 for an example)



---

archive/issue_comments_462502.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@mkoeppe](#comment%3A20):\n> Description modified (diff) \n\n@mkoeppe: Did you intentionally erase my modifications to the ticket description!?",
    "created_at": "2020-03-31T21:47:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462502",
    "user": "https://github.com/videlec"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@mkoeppe](#comment%3A20):
> Description modified (diff) 

@mkoeppe: Did you intentionally erase my modifications to the ticket description!?



---

archive/issue_comments_462503.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e672b6eef2b52c368c8288e33bdef57391be36b0\"><code>e672b6e</code></a></td><td><code>add upstream_url field to rpy2 checksums.ini</code></td></tr></table>\n",
    "created_at": "2020-03-31T21:49:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462503",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e672b6eef2b52c368c8288e33bdef57391be36b0"><code>e672b6e</code></a></td><td><code>add upstream_url field to rpy2 checksums.ini</code></td></tr></table>




---

archive/issue_comments_462504.json:
```json
{
    "body": "Changed commit from **[`c525fc2`](https://github.com/sagemath/sagetrac-mirror/commit/c525fc2441b5a93f7c38e3c9bdff170b0454ef3b)** to **[`e672b6e`](https://github.com/sagemath/sagetrac-mirror/commit/e672b6eef2b52c368c8288e33bdef57391be36b0)**",
    "created_at": "2020-03-31T21:49:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462504",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c525fc2`](https://github.com/sagemath/sagetrac-mirror/commit/c525fc2441b5a93f7c38e3c9bdff170b0454ef3b)** to **[`e672b6e`](https://github.com/sagemath/sagetrac-mirror/commit/e672b6eef2b52c368c8288e33bdef57391be36b0)**



---

archive/issue_comments_462505.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,12 +2,13 @@\n \n Main changes:\n - `cygwin.patch` does not apply anymore\n-- [https://pypi.org/project/pytest/](https://pypi.org/project/pytest/) is a new dependency (!?)\n-- [https://pypi.org/project/cffi/ cffi>=1.13.1](https://pypi.org/project/cffi/ cffi>=1.13.1) is a new dependency\n-- [https://pypi.org/project/pycparser/ pycparser](https://pypi.org/project/pycparser/ pycparser) is a new dependency (required by cffi)\n+- [cffi>=1.13.1](https://pypi.org/project/cffi/) is a new dependency\n+- [pycparser](https://pypi.org/project/pycparser/) is a new dependency (required by cffi)\n \n tarballs: \n - https://files.pythonhosted.org/packages/39/c0/61120f9dae06b4887426d229b68a7a5f0ca1f9cb3986319bb9484819a28d/rpy2-3.2.7.tar.gz\n-- https://files.pythonhosted.org/packages/6d/4e/572aed20422dee7fa2bd27995b2a53a32de90c1826e5531c9df6d3ea77ed/pytest-5.4.1.tar.gz\n - https://files.pythonhosted.org/packages/05/54/3324b0c46340c31b909fcec598696aaec7ddc8c18a63f2db352562d3354c/cffi-1.14.0.tar.gz\n - https://files.pythonhosted.org/packages/0f/86/e19659527668d70be91d0369aeaa055b4eb396b0f387a4f92293a20035bd/pycparser-2.20.tar.gz\n+\n+Upstream issues and PR\n+- https://github.com/rpy2/rpy2/issues/670\n``````\n",
    "created_at": "2020-03-31T21:52:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462505",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,12 +2,13 @@
 
 Main changes:
 - `cygwin.patch` does not apply anymore
-- [https://pypi.org/project/pytest/](https://pypi.org/project/pytest/) is a new dependency (!?)
-- [https://pypi.org/project/cffi/ cffi>=1.13.1](https://pypi.org/project/cffi/ cffi>=1.13.1) is a new dependency
-- [https://pypi.org/project/pycparser/ pycparser](https://pypi.org/project/pycparser/ pycparser) is a new dependency (required by cffi)
+- [cffi>=1.13.1](https://pypi.org/project/cffi/) is a new dependency
+- [pycparser](https://pypi.org/project/pycparser/) is a new dependency (required by cffi)
 
 tarballs: 
 - https://files.pythonhosted.org/packages/39/c0/61120f9dae06b4887426d229b68a7a5f0ca1f9cb3986319bb9484819a28d/rpy2-3.2.7.tar.gz
-- https://files.pythonhosted.org/packages/6d/4e/572aed20422dee7fa2bd27995b2a53a32de90c1826e5531c9df6d3ea77ed/pytest-5.4.1.tar.gz
 - https://files.pythonhosted.org/packages/05/54/3324b0c46340c31b909fcec598696aaec7ddc8c18a63f2db352562d3354c/cffi-1.14.0.tar.gz
 - https://files.pythonhosted.org/packages/0f/86/e19659527668d70be91d0369aeaa055b4eb396b0f387a4f92293a20035bd/pycparser-2.20.tar.gz
+
+Upstream issues and PR
+- https://github.com/rpy2/rpy2/issues/670
``````




---

archive/issue_comments_462506.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/86d0d175c7e8d840ff6685910825f026b537f012\"><code>86d0d17</code></a></td><td><code>let rpy2 not depend on pytest</code></td></tr></table>\n",
    "created_at": "2020-03-31T21:59:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462506",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/86d0d175c7e8d840ff6685910825f026b537f012"><code>86d0d17</code></a></td><td><code>let rpy2 not depend on pytest</code></td></tr></table>




---

archive/issue_comments_462507.json:
```json
{
    "body": "Changed commit from **[`e672b6e`](https://github.com/sagemath/sagetrac-mirror/commit/e672b6eef2b52c368c8288e33bdef57391be36b0)** to **[`86d0d17`](https://github.com/sagemath/sagetrac-mirror/commit/86d0d175c7e8d840ff6685910825f026b537f012)**",
    "created_at": "2020-03-31T21:59:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462507",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e672b6e`](https://github.com/sagemath/sagetrac-mirror/commit/e672b6eef2b52c368c8288e33bdef57391be36b0)** to **[`86d0d17`](https://github.com/sagemath/sagetrac-mirror/commit/86d0d175c7e8d840ff6685910825f026b537f012)**



---

archive/issue_comments_462508.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@videlec](#comment%3A23):\n> Replying to [@mkoeppe](#comment%3A20):\n> > Description modified (diff) \n\n> \n> @mkoeppe: Did you intentionally erase my modifications to the ticket description!?\n\nNo, sorry! Looks like on this ticket trac is playing funny tricks",
    "created_at": "2020-03-31T22:01:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462508",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@videlec](#comment%3A23):
> Replying to [@mkoeppe](#comment%3A20):
> > Description modified (diff) 

> 
> @mkoeppe: Did you intentionally erase my modifications to the ticket description!?

No, sorry! Looks like on this ticket trac is playing funny tricks



---

archive/issue_comments_462509.json:
```json
{
    "body": "Changed commit from **[`86d0d17`](https://github.com/sagemath/sagetrac-mirror/commit/86d0d175c7e8d840ff6685910825f026b537f012)** to **[`5eee83e`](https://github.com/sagemath/sagetrac-mirror/commit/5eee83e9693a6e146b1a135329b8e6c153fe1288)**",
    "created_at": "2020-03-31T22:21:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462509",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`86d0d17`](https://github.com/sagemath/sagetrac-mirror/commit/86d0d175c7e8d840ff6685910825f026b537f012)** to **[`5eee83e`](https://github.com/sagemath/sagetrac-mirror/commit/5eee83e9693a6e146b1a135329b8e6c153fe1288)**



---

archive/issue_comments_462510.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a1debab4357fb67ff47528367e3f937264e52641\"><code>a1debab</code></a></td><td><code>cffi package (rpy2 dependency)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a8b6e666666b7b1db46244f491f2e302d8e7286e\"><code>a8b6e66</code></a></td><td><code>pycparser (rpy2 dependency)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5eee83e9693a6e146b1a135329b8e6c153fe1288\"><code>5eee83e</code></a></td><td><code>update rpy2 dependencies</code></td></tr></table>\n",
    "created_at": "2020-03-31T22:21:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462510",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a1debab4357fb67ff47528367e3f937264e52641"><code>a1debab</code></a></td><td><code>cffi package (rpy2 dependency)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a8b6e666666b7b1db46244f491f2e302d8e7286e"><code>a8b6e66</code></a></td><td><code>pycparser (rpy2 dependency)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5eee83e9693a6e146b1a135329b8e6c153fe1288"><code>5eee83e</code></a></td><td><code>update rpy2 dependencies</code></td></tr></table>




---

archive/issue_comments_462511.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nReady for tests (especially on cygwin), but not for merging!",
    "created_at": "2020-03-31T22:23:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462511",
    "user": "https://github.com/videlec"
}
```

<div id="comment:29" align="right">comment:29</div>

Ready for tests (especially on cygwin), but not for merging!



---

archive/issue_events_401869.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-03-31T22:23:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29441#event-401869"
}
```



---

archive/issue_comments_462512.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nIf you want to test cygwin via github actions, be sure to use #29403",
    "created_at": "2020-03-31T22:28:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462512",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:30" align="right">comment:30</div>

If you want to test cygwin via github actions, be sure to use #29403



---

archive/issue_comments_462513.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nupstream is not (totally) convinced by dropping the pytest dependency. I propose to however keep the patch in Sage (on archlinux `rpy2` does not depend on `pytest` either).\n\nI will add a commit that still installs the test as part of `rpy2` (it did not make much sense to remove it).",
    "created_at": "2020-04-19T21:24:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462513",
    "user": "https://github.com/videlec"
}
```

<div id="comment:32" align="right">comment:32</div>

upstream is not (totally) convinced by dropping the pytest dependency. I propose to however keep the patch in Sage (on archlinux `rpy2` does not depend on `pytest` either).

I will add a commit that still installs the test as part of `rpy2` (it did not make much sense to remove it).



---

archive/issue_comments_462514.json:
```json
{
    "body": "<div id=\"comment:33\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/308d39c4ce3e477716aa4408def52c68c1416482\"><code>308d39c</code></a></td><td><code>still install tests along rpy2</code></td></tr></table>\n",
    "created_at": "2020-04-20T07:37:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462514",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/308d39c4ce3e477716aa4408def52c68c1416482"><code>308d39c</code></a></td><td><code>still install tests along rpy2</code></td></tr></table>




---

archive/issue_comments_462515.json:
```json
{
    "body": "Changed commit from **[`5eee83e`](https://github.com/sagemath/sagetrac-mirror/commit/5eee83e9693a6e146b1a135329b8e6c153fe1288)** to **[`308d39c`](https://github.com/sagemath/sagetrac-mirror/commit/308d39c4ce3e477716aa4408def52c68c1416482)**",
    "created_at": "2020-04-20T07:37:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462515",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5eee83e`](https://github.com/sagemath/sagetrac-mirror/commit/5eee83e9693a6e146b1a135329b8e6c153fe1288)** to **[`308d39c`](https://github.com/sagemath/sagetrac-mirror/commit/308d39c4ce3e477716aa4408def52c68c1416482)**



---

archive/issue_comments_462516.json:
```json
{
    "body": "Author: **Vincent Delecroix**",
    "created_at": "2020-04-20T08:37:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462516",
    "user": "https://github.com/videlec"
}
```

Author: **Vincent Delecroix**



---

archive/issue_comments_462517.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,6 +4,9 @@\n - `cygwin.patch` does not apply anymore\n - [cffi>=1.13.1](https://pypi.org/project/cffi/) is a new dependency\n - [pycparser](https://pypi.org/project/pycparser/) is a new dependency (required by cffi)\n+- add a small patch to `setup.py` that\n+  - disables printing on `stdout` (that perturbs `pip`)\n+  - removes the dependency to `pytest`\n \n tarballs: \n - https://files.pythonhosted.org/packages/39/c0/61120f9dae06b4887426d229b68a7a5f0ca1f9cb3986319bb9484819a28d/rpy2-3.2.7.tar.gz\n``````\n",
    "created_at": "2020-04-20T08:37:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462517",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,6 +4,9 @@
 - `cygwin.patch` does not apply anymore
 - [cffi>=1.13.1](https://pypi.org/project/cffi/) is a new dependency
 - [pycparser](https://pypi.org/project/pycparser/) is a new dependency (required by cffi)
+- add a small patch to `setup.py` that
+  - disables printing on `stdout` (that perturbs `pip`)
+  - removes the dependency to `pytest`
 
 tarballs: 
 - https://files.pythonhosted.org/packages/39/c0/61120f9dae06b4887426d229b68a7a5f0ca1f9cb3986319bb9484819a28d/rpy2-3.2.7.tar.gz
``````




---

archive/issue_events_401870.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-23T03:19:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29441#event-401870"
}
```



---

archive/issue_events_401871.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-23T03:19:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29441#event-401871"
}
```



---

archive/issue_comments_462518.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nNeeds rebasing",
    "created_at": "2020-04-23T03:19:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462518",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:35" align="right">comment:35</div>

Needs rebasing



---

archive/issue_comments_462519.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\n#29813 adds `pytest`",
    "created_at": "2020-06-14T20:03:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462519",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:36" align="right">comment:36</div>

#29813 adds `pytest`



---

archive/issue_comments_462520.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,6 +8,8 @@\n   - disables printing on `stdout` (that perturbs `pip`)\n   - removes the dependency to `pytest`\n \n+https://pypi.org/project/rpy2/\n+\n tarballs: \n - https://files.pythonhosted.org/packages/39/c0/61120f9dae06b4887426d229b68a7a5f0ca1f9cb3986319bb9484819a28d/rpy2-3.2.7.tar.gz\n - https://files.pythonhosted.org/packages/05/54/3324b0c46340c31b909fcec598696aaec7ddc8c18a63f2db352562d3354c/cffi-1.14.0.tar.gz\n``````\n",
    "created_at": "2020-06-14T20:04:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462520",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,6 +8,8 @@
   - disables printing on `stdout` (that perturbs `pip`)
   - removes the dependency to `pytest`
 
+https://pypi.org/project/rpy2/
+
 tarballs: 
 - https://files.pythonhosted.org/packages/39/c0/61120f9dae06b4887426d229b68a7a5f0ca1f9cb3986319bb9484819a28d/rpy2-3.2.7.tar.gz
 - https://files.pythonhosted.org/packages/05/54/3324b0c46340c31b909fcec598696aaec7ddc8c18a63f2db352562d3354c/cffi-1.14.0.tar.gz
``````




---

archive/issue_comments_462521.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nLatest rpy2 is now 3.3.3",
    "created_at": "2020-06-14T20:04:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462521",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:38" align="right">comment:38</div>

Latest rpy2 is now 3.3.3



---

archive/issue_comments_462522.json:
```json
{
    "body": "<div id=\"comment:39\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/68ea7be4ce107685995da17ccda7fcee8220ad71\"><code>68ea7be</code></a></td><td><code>upgrade rpy2 version</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f1cd4e2ef423bccdeac62218a6c5140182a622a9\"><code>f1cd4e2</code></a></td><td><code>remove cygwin.patch (rpy2)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/68f6f928b4042228cbd1f2bb8c2b102a79eec992\"><code>68f6f92</code></a></td><td><code>add setup.patch (rpy2)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b550f43cefe88466e080ff4fc72bf8cd5c22f8bb\"><code>b550f43</code></a></td><td><code>add upstream_url field to rpy2 checksums.ini</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2cd2191f620f82cddaa047d8db3a4f81433d1be9\"><code>2cd2191</code></a></td><td><code>let rpy2 not depend on pytest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b76ee25d67fccc77e1f4ba7fb0f4589c022bca4f\"><code>b76ee25</code></a></td><td><code>cffi package (rpy2 dependency)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/84ded30cafa163fd19da294d546dd24ff6550e46\"><code>84ded30</code></a></td><td><code>pycparser (rpy2 dependency)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2e0fe7351b0151e94fca927ddb9e6c15913b2aad\"><code>2e0fe73</code></a></td><td><code>update rpy2 dependencies</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/81f580eff5007a666dc712e5219d47f5933e1573\"><code>81f580e</code></a></td><td><code>still install tests along rpy2</code></td></tr></table>\n",
    "created_at": "2020-07-03T18:45:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462522",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:39"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/68ea7be4ce107685995da17ccda7fcee8220ad71"><code>68ea7be</code></a></td><td><code>upgrade rpy2 version</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f1cd4e2ef423bccdeac62218a6c5140182a622a9"><code>f1cd4e2</code></a></td><td><code>remove cygwin.patch (rpy2)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/68f6f928b4042228cbd1f2bb8c2b102a79eec992"><code>68f6f92</code></a></td><td><code>add setup.patch (rpy2)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b550f43cefe88466e080ff4fc72bf8cd5c22f8bb"><code>b550f43</code></a></td><td><code>add upstream_url field to rpy2 checksums.ini</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2cd2191f620f82cddaa047d8db3a4f81433d1be9"><code>2cd2191</code></a></td><td><code>let rpy2 not depend on pytest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b76ee25d67fccc77e1f4ba7fb0f4589c022bca4f"><code>b76ee25</code></a></td><td><code>cffi package (rpy2 dependency)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/84ded30cafa163fd19da294d546dd24ff6550e46"><code>84ded30</code></a></td><td><code>pycparser (rpy2 dependency)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2e0fe7351b0151e94fca927ddb9e6c15913b2aad"><code>2e0fe73</code></a></td><td><code>update rpy2 dependencies</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/81f580eff5007a666dc712e5219d47f5933e1573"><code>81f580e</code></a></td><td><code>still install tests along rpy2</code></td></tr></table>




---

archive/issue_comments_462523.json:
```json
{
    "body": "Changed commit from **[`308d39c`](https://github.com/sagemath/sagetrac-mirror/commit/308d39c4ce3e477716aa4408def52c68c1416482)** to **[`81f580e`](https://github.com/sagemath/sagetrac-mirror/commit/81f580eff5007a666dc712e5219d47f5933e1573)**",
    "created_at": "2020-07-03T18:45:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462523",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`308d39c`](https://github.com/sagemath/sagetrac-mirror/commit/308d39c4ce3e477716aa4408def52c68c1416482)** to **[`81f580e`](https://github.com/sagemath/sagetrac-mirror/commit/81f580eff5007a666dc712e5219d47f5933e1573)**



---

archive/issue_comments_462524.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nRebased on 9.2.beta2",
    "created_at": "2020-07-03T18:45:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462524",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:40" align="right">comment:40</div>

Rebased on 9.2.beta2



---

archive/issue_comments_462525.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,19 +1,15 @@\n-The release 3.2.7 is only Python 3 compatible.\n-\n Main changes:\n+- [https://pypi.org/project/rpy2/](https://pypi.org/project/rpy2/), supports python >= 3.6\n - `cygwin.patch` does not apply anymore\n-- [cffi>=1.13.1](https://pypi.org/project/cffi/) is a new dependency\n-- [pycparser](https://pypi.org/project/pycparser/) is a new dependency (required by cffi)\n+- [cffi>=1.13.1](https://pypi.org/project/cffi/) is a new dependency, we install latest 1.14.0 (supports python >= 3.2)\n+- [pycparser](https://pypi.org/project/pycparser/) is a new dependency (required by cffi, supports python >= 3.4)\n - add a small patch to `setup.py` that\n   - disables printing on `stdout` (that perturbs `pip`)\n   - removes the dependency to `pytest`\n \n-https://pypi.org/project/rpy2/\n \n-tarballs: \n-- https://files.pythonhosted.org/packages/39/c0/61120f9dae06b4887426d229b68a7a5f0ca1f9cb3986319bb9484819a28d/rpy2-3.2.7.tar.gz\n-- https://files.pythonhosted.org/packages/05/54/3324b0c46340c31b909fcec598696aaec7ddc8c18a63f2db352562d3354c/cffi-1.14.0.tar.gz\n-- https://files.pythonhosted.org/packages/0f/86/e19659527668d70be91d0369aeaa055b4eb396b0f387a4f92293a20035bd/pycparser-2.20.tar.gz\n+tarballs: see checksums.ini\n \n Upstream issues and PR\n - https://github.com/rpy2/rpy2/issues/670\n+\n``````\n",
    "created_at": "2020-07-03T18:50:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462525",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,19 +1,15 @@
-The release 3.2.7 is only Python 3 compatible.
-
 Main changes:
+- [https://pypi.org/project/rpy2/](https://pypi.org/project/rpy2/), supports python >= 3.6
 - `cygwin.patch` does not apply anymore
-- [cffi>=1.13.1](https://pypi.org/project/cffi/) is a new dependency
-- [pycparser](https://pypi.org/project/pycparser/) is a new dependency (required by cffi)
+- [cffi>=1.13.1](https://pypi.org/project/cffi/) is a new dependency, we install latest 1.14.0 (supports python >= 3.2)
+- [pycparser](https://pypi.org/project/pycparser/) is a new dependency (required by cffi, supports python >= 3.4)
 - add a small patch to `setup.py` that
   - disables printing on `stdout` (that perturbs `pip`)
   - removes the dependency to `pytest`
 
-https://pypi.org/project/rpy2/
 
-tarballs: 
-- https://files.pythonhosted.org/packages/39/c0/61120f9dae06b4887426d229b68a7a5f0ca1f9cb3986319bb9484819a28d/rpy2-3.2.7.tar.gz
-- https://files.pythonhosted.org/packages/05/54/3324b0c46340c31b909fcec598696aaec7ddc8c18a63f2db352562d3354c/cffi-1.14.0.tar.gz
-- https://files.pythonhosted.org/packages/0f/86/e19659527668d70be91d0369aeaa055b4eb396b0f387a4f92293a20035bd/pycparser-2.20.tar.gz
+tarballs: see checksums.ini
 
 Upstream issues and PR
 - https://github.com/rpy2/rpy2/issues/670
+
``````




---

archive/issue_events_401872.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-03T18:50:28Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "title_is": "upgrade rpy2 package 2.8.2 -> 3.3.4, add new dependencies",
    "title_was": "upgrade rpy2 package 2.8.2 -> 3.2.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29441#event-401872"
}
```



---

archive/issue_comments_462526.json:
```json
{
    "body": "<div id=\"comment:43\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4c16728171baa763dcb653f83aa485fdbeedefa\"><code>d4c1672</code></a></td><td><code>build/pkgs: Upgrade rpy2 to 3.3.4, use patterns for upstream_urls of dependencies</code></td></tr></table>\n",
    "created_at": "2020-07-03T19:03:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462526",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:43"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4c16728171baa763dcb653f83aa485fdbeedefa"><code>d4c1672</code></a></td><td><code>build/pkgs: Upgrade rpy2 to 3.3.4, use patterns for upstream_urls of dependencies</code></td></tr></table>




---

archive/issue_comments_462527.json:
```json
{
    "body": "Changed commit from **[`81f580e`](https://github.com/sagemath/sagetrac-mirror/commit/81f580eff5007a666dc712e5219d47f5933e1573)** to **[`d4c1672`](https://github.com/sagemath/sagetrac-mirror/commit/d4c16728171baa763dcb653f83aa485fdbeedefa)**",
    "created_at": "2020-07-03T19:03:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462527",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`81f580e`](https://github.com/sagemath/sagetrac-mirror/commit/81f580eff5007a666dc712e5219d47f5933e1573)** to **[`d4c1672`](https://github.com/sagemath/sagetrac-mirror/commit/d4c16728171baa763dcb653f83aa485fdbeedefa)**



---

archive/issue_comments_462528.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nPatches need updating!",
    "created_at": "2020-07-03T19:08:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462528",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:44" align="right">comment:44</div>

Patches need updating!



---

archive/issue_comments_462529.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,7 +8,7 @@\n   - removes the dependency to `pytest`\n \n \n-tarballs: see checksums.ini\n+tarballs: see `checksums.ini` (to download automatically, use `./configure --enable-download-from-upstream-url`)\n \n Upstream issues and PR\n - https://github.com/rpy2/rpy2/issues/670\n``````\n",
    "created_at": "2020-07-03T19:08:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462529",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,7 +8,7 @@
   - removes the dependency to `pytest`
 
 
-tarballs: see checksums.ini
+tarballs: see `checksums.ini` (to download automatically, use `./configure --enable-download-from-upstream-url`)
 
 Upstream issues and PR
 - https://github.com/rpy2/rpy2/issues/670
``````




---

archive/issue_comments_462530.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nhttps://github.com/rpy2/rpy2/pull/716",
    "created_at": "2020-07-03T19:55:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462530",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:45" align="right">comment:45</div>

https://github.com/rpy2/rpy2/pull/716



---

archive/issue_comments_462531.json:
```json
{
    "body": "Changed author from **Vincent Delecroix** to **Vincent Delecroix, Matthias Koeppe**",
    "created_at": "2020-07-04T04:33:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462531",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Vincent Delecroix** to **Vincent Delecroix, Matthias Koeppe**



---

archive/issue_comments_462532.json:
```json
{
    "body": "Dependencies: **#29813**",
    "created_at": "2020-07-04T04:33:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462532",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#29813**



---

archive/issue_comments_462533.json:
```json
{
    "body": "<div id=\"comment:47\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/28552a28400afe4afd1ff2e51b64b1a09271e659\"><code>28552a2</code></a></td><td><code>Update patches</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/04b4c678f508b3ba99c952129fc7cf8146357e57\"><code>04b4c67</code></a></td><td><code>build/pkgs/pytest: New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/55babfaf2fdfe2c5d96f1fbcc29ce987737c29ee\"><code>55babfa</code></a></td><td><code>src/bin/sage [-i]: Set SAGE_CHECK here so that Makefile dependencies can depend on it</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bedc7ae9cd5a134df1aa2a07170724bba18ee02f\"><code>bedc7ae</code></a></td><td><code>build/make/Makefile.in: Allow pip packages as dependencies</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e0db954aa04ff7eb0e6d83eacc0956d255d44fa0\"><code>e0db954</code></a></td><td><code>Merge branch 't/29813/add_pytest_as_a_type_optional__source_pip_package' into t/29441/public/29441</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/20133ada14046474d5c0a5b563580e6949caeaba\"><code>20133ad</code></a></td><td><code>build/pkgs/rpy2: Add spkg-check.in, add conditional dep on pytest, simplify spkg-install.in</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c02362ea4e827885fc95a356e77ff31d7c1355b5\"><code>c02362e</code></a></td><td><code>build/pkgs/tzlocal: New (pip package)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d33797fe7e8f7a069a39eb446419592916fc90a9\"><code>d33797f</code></a></td><td><code>build/pkgs/rpy2/dependencies: Add conditional dep on tzlocal, numpy</code></td></tr></table>\n",
    "created_at": "2020-07-04T04:41:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462533",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:47"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/28552a28400afe4afd1ff2e51b64b1a09271e659"><code>28552a2</code></a></td><td><code>Update patches</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/04b4c678f508b3ba99c952129fc7cf8146357e57"><code>04b4c67</code></a></td><td><code>build/pkgs/pytest: New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/55babfaf2fdfe2c5d96f1fbcc29ce987737c29ee"><code>55babfa</code></a></td><td><code>src/bin/sage [-i]: Set SAGE_CHECK here so that Makefile dependencies can depend on it</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bedc7ae9cd5a134df1aa2a07170724bba18ee02f"><code>bedc7ae</code></a></td><td><code>build/make/Makefile.in: Allow pip packages as dependencies</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e0db954aa04ff7eb0e6d83eacc0956d255d44fa0"><code>e0db954</code></a></td><td><code>Merge branch 't/29813/add_pytest_as_a_type_optional__source_pip_package' into t/29441/public/29441</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/20133ada14046474d5c0a5b563580e6949caeaba"><code>20133ad</code></a></td><td><code>build/pkgs/rpy2: Add spkg-check.in, add conditional dep on pytest, simplify spkg-install.in</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c02362ea4e827885fc95a356e77ff31d7c1355b5"><code>c02362e</code></a></td><td><code>build/pkgs/tzlocal: New (pip package)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d33797fe7e8f7a069a39eb446419592916fc90a9"><code>d33797f</code></a></td><td><code>build/pkgs/rpy2/dependencies: Add conditional dep on tzlocal, numpy</code></td></tr></table>




---

archive/issue_comments_462534.json:
```json
{
    "body": "Changed commit from **[`d4c1672`](https://github.com/sagemath/sagetrac-mirror/commit/d4c16728171baa763dcb653f83aa485fdbeedefa)** to **[`d33797f`](https://github.com/sagemath/sagetrac-mirror/commit/d33797fe7e8f7a069a39eb446419592916fc90a9)**",
    "created_at": "2020-07-04T04:41:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462534",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d4c1672`](https://github.com/sagemath/sagetrac-mirror/commit/d4c16728171baa763dcb653f83aa485fdbeedefa)** to **[`d33797f`](https://github.com/sagemath/sagetrac-mirror/commit/d33797fe7e8f7a069a39eb446419592916fc90a9)**



---

archive/issue_comments_462535.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nReplying to [@EmmanuelCharpentier](#comment%3A18):\n> Replying to [@videlec](#comment%3A14):\n> > As far as tests are concerned, the design of `rpy2` is weird. Tests should be separate from the `rpy2` module (and hence the dependency of `pytest` superfluous).\n\n> \n> 1) Can `rpy2` use packages hypothetically installed by an hypothetical package implementing #28998 ?\n\nYes, this is done here on the ticket now, using #29813 instead of the larger #28998.",
    "created_at": "2020-07-04T04:43:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462535",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:48" align="right">comment:48</div>

Replying to [@EmmanuelCharpentier](#comment%3A18):
> Replying to [@videlec](#comment%3A14):
> > As far as tests are concerned, the design of `rpy2` is weird. Tests should be separate from the `rpy2` module (and hence the dependency of `pytest` superfluous).

> 
> 1) Can `rpy2` use packages hypothetically installed by an hypothetical package implementing #28998 ?

Yes, this is done here on the ticket now, using #29813 instead of the larger #28998.



---

archive/issue_events_401873.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-04T04:43:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29441#event-401873"
}
```



---

archive/issue_events_401874.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-04T04:43:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29441#event-401874"
}
```



---

archive/issue_comments_462536.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nBuild testing runs at https://github.com/mkoeppe/sage/actions/runs/157245915",
    "created_at": "2020-07-04T04:47:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462536",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:50" align="right">comment:50</div>

Build testing runs at https://github.com/mkoeppe/sage/actions/runs/157245915



---

archive/issue_comments_462537.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,8 +3,8 @@\n - `cygwin.patch` does not apply anymore\n - [cffi>=1.13.1](https://pypi.org/project/cffi/) is a new dependency, we install latest 1.14.0 (supports python >= 3.2)\n - [pycparser](https://pypi.org/project/pycparser/) is a new dependency (required by cffi, supports python >= 3.4)\n-- add a small patch to `setup.py` that\n-  - disables printing on `stdout` (that perturbs `pip`)\n+- add small patches to `setup.py` that\n+  - disables printing on `stdout` (that perturbs `pip`) - accepted upstream\n   - removes the dependency to `pytest`\n \n \n@@ -12,4 +12,4 @@\n \n Upstream issues and PR\n - https://github.com/rpy2/rpy2/issues/670\n-\n+- \u200bhttps://github.com/rpy2/rpy2/pull/716\n``````\n",
    "created_at": "2020-07-04T04:48:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462537",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,8 +3,8 @@
 - `cygwin.patch` does not apply anymore
 - [cffi>=1.13.1](https://pypi.org/project/cffi/) is a new dependency, we install latest 1.14.0 (supports python >= 3.2)
 - [pycparser](https://pypi.org/project/pycparser/) is a new dependency (required by cffi, supports python >= 3.4)
-- add a small patch to `setup.py` that
-  - disables printing on `stdout` (that perturbs `pip`)
+- add small patches to `setup.py` that
+  - disables printing on `stdout` (that perturbs `pip`) - accepted upstream
   - removes the dependency to `pytest`
 
 
@@ -12,4 +12,4 @@
 
 Upstream issues and PR
 - https://github.com/rpy2/rpy2/issues/670
-
+- â€‹https://github.com/rpy2/rpy2/pull/716
``````




---

archive/issue_comments_462538.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,8 +5,8 @@\n - [pycparser](https://pypi.org/project/pycparser/) is a new dependency (required by cffi, supports python >= 3.4)\n - add small patches to `setup.py` that\n   - disables printing on `stdout` (that perturbs `pip`) - accepted upstream\n-  - removes the dependency to `pytest`\n-\n+  - removes the build dependency on `pytest`\n+- some more dependencies (pytest, numpy, tzlocal) conditional on SAGE_CHECK!=no\n \n tarballs: see `checksums.ini` (to download automatically, use `./configure --enable-download-from-upstream-url`)\n \n``````\n",
    "created_at": "2020-07-04T04:50:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462538",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,8 +5,8 @@
 - [pycparser](https://pypi.org/project/pycparser/) is a new dependency (required by cffi, supports python >= 3.4)
 - add small patches to `setup.py` that
   - disables printing on `stdout` (that perturbs `pip`) - accepted upstream
-  - removes the dependency to `pytest`
-
+  - removes the build dependency on `pytest`
+- some more dependencies (pytest, numpy, tzlocal) conditional on SAGE_CHECK!=no
 
 tarballs: see `checksums.ini` (to download automatically, use `./configure --enable-download-from-upstream-url`)
 
``````




---

archive/issue_comments_462539.json:
```json
{
    "body": "<div id=\"comment:53\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b66e9df749993b975920a440f870bc3f6df19884\"><code>b66e9df</code></a></td><td><code>build/pkgs/{cffi,pycparser}/dependencies: New</code></td></tr></table>\n",
    "created_at": "2020-07-04T15:46:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462539",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:53"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b66e9df749993b975920a440f870bc3f6df19884"><code>b66e9df</code></a></td><td><code>build/pkgs/{cffi,pycparser}/dependencies: New</code></td></tr></table>




---

archive/issue_comments_462540.json:
```json
{
    "body": "Changed commit from **[`d33797f`](https://github.com/sagemath/sagetrac-mirror/commit/d33797fe7e8f7a069a39eb446419592916fc90a9)** to **[`b66e9df`](https://github.com/sagemath/sagetrac-mirror/commit/b66e9df749993b975920a440f870bc3f6df19884)**",
    "created_at": "2020-07-04T15:46:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462540",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d33797f`](https://github.com/sagemath/sagetrac-mirror/commit/d33797fe7e8f7a069a39eb446419592916fc90a9)** to **[`b66e9df`](https://github.com/sagemath/sagetrac-mirror/commit/b66e9df749993b975920a440f870bc3f6df19884)**



---

archive/issue_comments_462541.json:
```json
{
    "body": "Changed dependencies from **#29813** to none",
    "created_at": "2020-07-08T15:33:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462541",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#29813** to none



---

archive/issue_comments_462542.json:
```json
{
    "body": "Changed commit from **[`b66e9df`](https://github.com/sagemath/sagetrac-mirror/commit/b66e9df749993b975920a440f870bc3f6df19884)** to **[`4c7f18d`](https://github.com/sagemath/sagetrac-mirror/commit/4c7f18dfc607ebe77bce93ea1db14509fc7a5c10)**",
    "created_at": "2020-07-08T15:35:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462542",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b66e9df`](https://github.com/sagemath/sagetrac-mirror/commit/b66e9df749993b975920a440f870bc3f6df19884)** to **[`4c7f18d`](https://github.com/sagemath/sagetrac-mirror/commit/4c7f18dfc607ebe77bce93ea1db14509fc7a5c10)**



---

archive/issue_comments_462543.json:
```json
{
    "body": "<div id=\"comment:55\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/539c1828dd17c90e5baa63d814f2c84419146f90\"><code>539c182</code></a></td><td><code>build/make/install: Do not depend on src/bin/sage-version.sh</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/761092cf85b86b7dc3e9ee873bd7adf96c5abf24\"><code>761092c</code></a></td><td><code>Merge branch 't/29987/build_make_install__do_not_depend_on_src_bin_sage_version_sh' into t/30064/fix_tox_docker_builds_broken_by__29884</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f2efa6ae443d74920fa942699996d820d7faa4f5\"><code>f2efa6a</code></a></td><td><code>src/doc/bootstrap: Create the directory src/doc/en/reference/repl if it does not exist</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b7bf43b488ad8ed5e0808dc7d4942c0c32f7a8d9\"><code>b7bf43b</code></a></td><td><code>build/bin/write-dockerfile.sh: ADD src/bin for bootstrapping, needed by src/doc/bootstrap after #29884</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/365ce61daf91fae1d1ea43ab03a76c2bc85b8c4e\"><code>365ce61</code></a></td><td><code>Merge branch 'u/mkoeppe/fix_tox_docker_builds_broken_by__29884' of git://trac.sagemath.org/sage into HEAD</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1e7becc551c3bad53ce67fa8457c5c3d977cad71\"><code>1e7becc</code></a></td><td><code>tox.ini [debian-buster, -sid]: IGNORE_MISSING_SYSTEM_PACKAGES=yes because of libpython3.7-dev</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb61a31a781e37591a09b9c9642c97a0e7d79166\"><code>fb61a31</code></a></td><td><code>Merge branch 'u/mkoeppe/tox_ini__debian_bullseye___sid_have_python3_8_instead_of_3_7' of git://trac.sagemath.org/sage into 9.2.beta3+ci-fixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4c7f18dfc607ebe77bce93ea1db14509fc7a5c10\"><code>4c7f18d</code></a></td><td><code>Merge branch '9.2.beta3+ci-fixes' into t/29441/public/29441</code></td></tr></table>\n",
    "created_at": "2020-07-08T15:35:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462543",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:55"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/539c1828dd17c90e5baa63d814f2c84419146f90"><code>539c182</code></a></td><td><code>build/make/install: Do not depend on src/bin/sage-version.sh</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/761092cf85b86b7dc3e9ee873bd7adf96c5abf24"><code>761092c</code></a></td><td><code>Merge branch 't/29987/build_make_install__do_not_depend_on_src_bin_sage_version_sh' into t/30064/fix_tox_docker_builds_broken_by__29884</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f2efa6ae443d74920fa942699996d820d7faa4f5"><code>f2efa6a</code></a></td><td><code>src/doc/bootstrap: Create the directory src/doc/en/reference/repl if it does not exist</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b7bf43b488ad8ed5e0808dc7d4942c0c32f7a8d9"><code>b7bf43b</code></a></td><td><code>build/bin/write-dockerfile.sh: ADD src/bin for bootstrapping, needed by src/doc/bootstrap after #29884</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/365ce61daf91fae1d1ea43ab03a76c2bc85b8c4e"><code>365ce61</code></a></td><td><code>Merge branch 'u/mkoeppe/fix_tox_docker_builds_broken_by__29884' of git://trac.sagemath.org/sage into HEAD</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1e7becc551c3bad53ce67fa8457c5c3d977cad71"><code>1e7becc</code></a></td><td><code>tox.ini [debian-buster, -sid]: IGNORE_MISSING_SYSTEM_PACKAGES=yes because of libpython3.7-dev</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb61a31a781e37591a09b9c9642c97a0e7d79166"><code>fb61a31</code></a></td><td><code>Merge branch 'u/mkoeppe/tox_ini__debian_bullseye___sid_have_python3_8_instead_of_3_7' of git://trac.sagemath.org/sage into 9.2.beta3+ci-fixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4c7f18dfc607ebe77bce93ea1db14509fc7a5c10"><code>4c7f18d</code></a></td><td><code>Merge branch '9.2.beta3+ci-fixes' into t/29441/public/29441</code></td></tr></table>




---

archive/issue_comments_462544.json:
```json
{
    "body": "Dependencies: **#29851, #30064**",
    "created_at": "2020-07-08T15:37:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462544",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#29851, #30064**



---

archive/issue_comments_462545.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nReplying to [@mkoeppe](#comment%3A50):\n> Build testing runs at https://github.com/mkoeppe/sage/actions/runs/157245915\n> \n\nSome unrelated problems are in the way. For example, on `ubuntu-eoan-minimal`, \n\n```\n  [pytest]     Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'SSLError(\"Can't connect to HTTPS URL because the SSL module is not available.\")': /simple/pytest/\n  [pytest]     Could not fetch URL https://pypi.org/simple/pytest/: There was a problem confirming the ssl certificate: HTTPSConnectionPool(host='pypi.org', port=443): Max \n```",
    "created_at": "2020-07-08T15:42:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462545",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:57" align="right">comment:57</div>

Replying to [@mkoeppe](#comment%3A50):
> Build testing runs at https://github.com/mkoeppe/sage/actions/runs/157245915
> 

Some unrelated problems are in the way. For example, on `ubuntu-eoan-minimal`, 

```
  [pytest]     Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'SSLError("Can't connect to HTTPS URL because the SSL module is not available.")': /simple/pytest/
  [pytest]     Could not fetch URL https://pypi.org/simple/pytest/: There was a problem confirming the ssl certificate: HTTPSConnectionPool(host='pypi.org', port=443): Max 
```



---

archive/issue_comments_462546.json:
```json
{
    "body": "Changed dependencies from **#29851, #30064** to **#29851, #30064, #30118**",
    "created_at": "2020-07-12T05:04:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462546",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#29851, #30064** to **#29851, #30064, #30118**



---

archive/issue_comments_462547.json:
```json
{
    "body": "Changed commit from **[`4c7f18d`](https://github.com/sagemath/sagetrac-mirror/commit/4c7f18dfc607ebe77bce93ea1db14509fc7a5c10)** to **[`3b14bf5`](https://github.com/sagemath/sagetrac-mirror/commit/3b14bf51517e2c8c77a49dcc286fe6dfaf38dc48)**",
    "created_at": "2020-07-12T05:11:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462547",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4c7f18d`](https://github.com/sagemath/sagetrac-mirror/commit/4c7f18dfc607ebe77bce93ea1db14509fc7a5c10)** to **[`3b14bf5`](https://github.com/sagemath/sagetrac-mirror/commit/3b14bf51517e2c8c77a49dcc286fe6dfaf38dc48)**



---

archive/issue_comments_462548.json:
```json
{
    "body": "<div id=\"comment:59\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/25393b03b5add035608cd09543b3aa4666d100f9\"><code>25393b0</code></a></td><td><code>Handle SAGE_CHECK_PACKAGES in build/make/Makefile.in, not sage-spkg</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/833ff0eeeb5a9ac76ce9fbae3548f50ff81fa9d2\"><code>833ff0e</code></a></td><td><code>Merge branch 't/30118/handle_sage_check_packages_in_build_make_makefile_in__not_sage_spkg' into t/29441/public/29441</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b14bf51517e2c8c77a49dcc286fe6dfaf38dc48\"><code>3b14bf5</code></a></td><td><code>build/pkgs/rpy2/dependencies: Conditionalize on SAGE_CHECK_rpy2</code></td></tr></table>\n",
    "created_at": "2020-07-12T05:11:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462548",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:59"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/25393b03b5add035608cd09543b3aa4666d100f9"><code>25393b0</code></a></td><td><code>Handle SAGE_CHECK_PACKAGES in build/make/Makefile.in, not sage-spkg</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/833ff0eeeb5a9ac76ce9fbae3548f50ff81fa9d2"><code>833ff0e</code></a></td><td><code>Merge branch 't/30118/handle_sage_check_packages_in_build_make_makefile_in__not_sage_spkg' into t/29441/public/29441</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b14bf51517e2c8c77a49dcc286fe6dfaf38dc48"><code>3b14bf5</code></a></td><td><code>build/pkgs/rpy2/dependencies: Conditionalize on SAGE_CHECK_rpy2</code></td></tr></table>




---

archive/issue_comments_462549.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\n* On Debian testing running n core i7 + 16 GB RAM\n* Sage configured to use systemwide R\n* Rebase on develop at 9.2.beta5\n\n```\nsage: r.sessionInfo()\n---------------------------------------------------------------------------\nModuleNotFoundError                       Traceback (most recent call last)\n<ipython-input-24-69f706c2bf29> in <module>()\n----> 1 r.sessionInfo()\n\n/usr/local/sage-9/local/lib/python3.7/site-packages/sage/interfaces/r.py in __call__(self, *args, **kwds)\n   2001             [1] 3\n   2002         \"\"\"\n-> 2003         return self._parent.function_call(self._name, args=list(args), kwds=kwds)\n   2004 \n   2005 def is_RElement(x):\n\n/usr/local/sage-9/local/lib/python3.7/site-packages/sage/interfaces/r.py in function_call(self, function, args, kwds)\n   1078         self._check_valid_function_name(function)\n   1079         return self.new(\"%s(%s)\"%(function, \",\".join([s.name() for s in args] +\n-> 1080                                                      [self._sage_to_r_name(key)+'='+kwds[key].name() for key in kwds ] )))\n   1081 \n   1082     def call(self, function_name, *args, **kwds):\n\n/usr/local/sage-9/local/lib/python3.7/site-packages/sage/interfaces/interface.py in new(self, code)\n    368 \n    369     def new(self, code):\n--> 370         return self(code)\n    371 \n    372     ###################################################################\n\n/usr/local/sage-9/local/lib/python3.7/site-packages/sage/interfaces/interface.py in __call__(self, x, name)\n    294 \n    295         if isinstance(x, str):\n--> 296             return cls(self, x, name=name)\n    297         try:\n    298             # Special methods do not and should not have an option to\n\n/usr/local/sage-9/local/lib/python3.7/site-packages/sage/interfaces/interface.py in __init__(self, parent, value, is_name, name)\n    716         else:\n    717             try:\n--> 718                 self._name = parent._create(value, name=name)\n    719             except (TypeError, RuntimeError, ValueError) as x:\n    720                 raise TypeError(x)\n\n/usr/local/sage-9/local/lib/python3.7/site-packages/sage/interfaces/interface.py in _create(self, value, name)\n    499     def _create(self, value, name=None):\n    500         name = self._next_var_name() if name is None else name\n--> 501         self.set(name, value)\n    502         return name\n    503 \n\n/usr/local/sage-9/local/lib/python3.7/site-packages/sage/interfaces/r.py in set(self, var, value)\n   1124         \"\"\"\n   1125         cmd = '%s <- %s'%(var,value)\n-> 1126         out = self.eval(cmd)\n   1127 \n   1128     def get(self, var):\n\n/usr/local/sage-9/local/lib/python3.7/site-packages/sage/interfaces/r.py in eval(self, code, *args, **kwds)\n   1337         \"\"\"\n   1338         self._lazy_init()\n-> 1339         return str(robjects.r(code)).rstrip()\n   1340 \n   1341 \n\n/usr/local/sage-9/local/lib/python3.7/site-packages/sage/misc/lazy_import.pyx in sage.misc.lazy_import.LazyImport.__getattr__ (build/cythonized/sage/misc/lazy_import.c:3525)()\n    319             True\n    320         \"\"\"\n--> 321         return getattr(self.get_object(), attr)\n    322 \n    323     # We need to wrap all the slot methods, as they are not forwarded\n\n/usr/local/sage-9/local/lib/python3.7/site-packages/sage/misc/lazy_import.pyx in sage.misc.lazy_import.LazyImport.get_object (build/cythonized/sage/misc/lazy_import.c:2336)()\n    186         if likely(self._object is not None):\n    187             return self._object\n--> 188         return self._get_object()\n    189 \n    190     cpdef _get_object(self):\n\n/usr/local/sage-9/local/lib/python3.7/site-packages/sage/misc/lazy_import.pyx in sage.misc.lazy_import.LazyImport._get_object (build/cythonized/sage/misc/lazy_import.c:2575)()\n    218         elif self._at_startup and not startup_guard:\n    219             print('Option ``at_startup=True`` for lazy import {0} not needed anymore'.format(self._name))\n--> 220         self._object = getattr(__import__(self._module, {}, {}, [self._name]), self._name)\n    221         name = self._as_name\n    222         if self._deprecation is not None:\n\n/usr/local/sage-9/local/lib/python3.7/site-packages/rpy2/robjects/__init__.py in <module>()\n     24 \n     25 from . import conversion\n---> 26 from . import vectors\n     27 from . import language\n     28 \n\n/usr/local/sage-9/local/lib/python3.7/site-packages/rpy2/robjects/vectors.py in <module>()\n     14 import time\n     15 import pytz\n---> 16 import tzlocal\n     17 from datetime import date, datetime, timedelta, timezone\n     18 from time import struct_time, mktime, tzname\n\nModuleNotFoundError: No module named 'tzlocal'\n```\n\nAll othetr attemps end up similarly.\n\n==>`needs_work`",
    "created_at": "2020-07-16T13:44:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462549",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:61" align="right">comment:61</div>

* On Debian testing running n core i7 + 16 GB RAM
* Sage configured to use systemwide R
* Rebase on develop at 9.2.beta5

```
sage: r.sessionInfo()
---------------------------------------------------------------------------
ModuleNotFoundError                       Traceback (most recent call last)
<ipython-input-24-69f706c2bf29> in <module>()
----> 1 r.sessionInfo()

/usr/local/sage-9/local/lib/python3.7/site-packages/sage/interfaces/r.py in __call__(self, *args, **kwds)
   2001             [1] 3
   2002         """
-> 2003         return self._parent.function_call(self._name, args=list(args), kwds=kwds)
   2004 
   2005 def is_RElement(x):

/usr/local/sage-9/local/lib/python3.7/site-packages/sage/interfaces/r.py in function_call(self, function, args, kwds)
   1078         self._check_valid_function_name(function)
   1079         return self.new("%s(%s)"%(function, ",".join([s.name() for s in args] +
-> 1080                                                      [self._sage_to_r_name(key)+'='+kwds[key].name() for key in kwds ] )))
   1081 
   1082     def call(self, function_name, *args, **kwds):

/usr/local/sage-9/local/lib/python3.7/site-packages/sage/interfaces/interface.py in new(self, code)
    368 
    369     def new(self, code):
--> 370         return self(code)
    371 
    372     ###################################################################

/usr/local/sage-9/local/lib/python3.7/site-packages/sage/interfaces/interface.py in __call__(self, x, name)
    294 
    295         if isinstance(x, str):
--> 296             return cls(self, x, name=name)
    297         try:
    298             # Special methods do not and should not have an option to

/usr/local/sage-9/local/lib/python3.7/site-packages/sage/interfaces/interface.py in __init__(self, parent, value, is_name, name)
    716         else:
    717             try:
--> 718                 self._name = parent._create(value, name=name)
    719             except (TypeError, RuntimeError, ValueError) as x:
    720                 raise TypeError(x)

/usr/local/sage-9/local/lib/python3.7/site-packages/sage/interfaces/interface.py in _create(self, value, name)
    499     def _create(self, value, name=None):
    500         name = self._next_var_name() if name is None else name
--> 501         self.set(name, value)
    502         return name
    503 

/usr/local/sage-9/local/lib/python3.7/site-packages/sage/interfaces/r.py in set(self, var, value)
   1124         """
   1125         cmd = '%s <- %s'%(var,value)
-> 1126         out = self.eval(cmd)
   1127 
   1128     def get(self, var):

/usr/local/sage-9/local/lib/python3.7/site-packages/sage/interfaces/r.py in eval(self, code, *args, **kwds)
   1337         """
   1338         self._lazy_init()
-> 1339         return str(robjects.r(code)).rstrip()
   1340 
   1341 

/usr/local/sage-9/local/lib/python3.7/site-packages/sage/misc/lazy_import.pyx in sage.misc.lazy_import.LazyImport.__getattr__ (build/cythonized/sage/misc/lazy_import.c:3525)()
    319             True
    320         """
--> 321         return getattr(self.get_object(), attr)
    322 
    323     # We need to wrap all the slot methods, as they are not forwarded

/usr/local/sage-9/local/lib/python3.7/site-packages/sage/misc/lazy_import.pyx in sage.misc.lazy_import.LazyImport.get_object (build/cythonized/sage/misc/lazy_import.c:2336)()
    186         if likely(self._object is not None):
    187             return self._object
--> 188         return self._get_object()
    189 
    190     cpdef _get_object(self):

/usr/local/sage-9/local/lib/python3.7/site-packages/sage/misc/lazy_import.pyx in sage.misc.lazy_import.LazyImport._get_object (build/cythonized/sage/misc/lazy_import.c:2575)()
    218         elif self._at_startup and not startup_guard:
    219             print('Option ``at_startup=True`` for lazy import {0} not needed anymore'.format(self._name))
--> 220         self._object = getattr(__import__(self._module, {}, {}, [self._name]), self._name)
    221         name = self._as_name
    222         if self._deprecation is not None:

/usr/local/sage-9/local/lib/python3.7/site-packages/rpy2/robjects/__init__.py in <module>()
     24 
     25 from . import conversion
---> 26 from . import vectors
     27 from . import language
     28 

/usr/local/sage-9/local/lib/python3.7/site-packages/rpy2/robjects/vectors.py in <module>()
     14 import time
     15 import pytz
---> 16 import tzlocal
     17 from datetime import date, datetime, timedelta, timezone
     18 from time import struct_time, mktime, tzname

ModuleNotFoundError: No module named 'tzlocal'
```

All othetr attemps end up similarly.

==>`needs_work`



---

archive/issue_events_401875.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2020-07-16T13:44:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29441#event-401875"
}
```



---

archive/issue_events_401876.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2020-07-16T13:44:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29441#event-401876"
}
```



---

archive/issue_comments_462550.json:
```json
{
    "body": "Attachment: **[rdoctest.txt.gz](https://github.com/sagemath/sage/files/ticket29441/rdoctest.txt.gz)**\n\nDoctest for src/sage/interfaces/r.py",
    "created_at": "2020-07-16T14:09:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462550",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Attachment: **[rdoctest.txt.gz](https://github.com/sagemath/sage/files/ticket29441/rdoctest.txt.gz)**

Doctest for src/sage/interfaces/r.py



---

archive/issue_comments_462551.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nReplying to [@EmmanuelCharpentier](#comment%3A61):\n> * On Debian testing running n core i7 + 16 GB RAM\n> * Sage configured to use systemwide R\n> * Rebase on develop at 9.2.beta5\n\n[ Snip... ]\n\nBTW, `sage -t --long src/sage/interfaces/r.py` gives the enclosed `rdoctest.txt.gz`\n\nHTH,",
    "created_at": "2020-07-16T14:11:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462551",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:62" align="right">comment:62</div>

Replying to [@EmmanuelCharpentier](#comment%3A61):
> * On Debian testing running n core i7 + 16 GB RAM
> * Sage configured to use systemwide R
> * Rebase on develop at 9.2.beta5

[ Snip... ]

BTW, `sage -t --long src/sage/interfaces/r.py` gives the enclosed `rdoctest.txt.gz`

HTH,



---

archive/issue_comments_462552.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nyeah, I see this error too.",
    "created_at": "2020-07-16T15:32:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462552",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:63" align="right">comment:63</div>

yeah, I see this error too.



---

archive/issue_comments_462553.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nmissing dep, can be installed using pip:\n\n```\n$ ./sage --pip install tzlocal\nCollecting tzlocal\n  Downloading tzlocal-2.1-py2.py3-none-any.whl (16 kB)\nRequirement already satisfied: pytz in ./local/lib/python3.7/site-packages (from tzlocal) (2018.7)\nInstalling collected packages: tzlocal\nSuccessfully installed tzlocal-2.1\ndimpase@penguin:~/sage$ ./sage\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 SageMath version 9.2.beta5, Release Date: 2020-07-12               \u2502\n\u2502 Using Python 3.7.3. Type \"help()\" for help.                        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\nsage: r.sessionInfo()\nR version 3.5.2 (2018-12-20)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Debian GNU/Linux 10 (buster)\n\nMatrix products: default\nBLAS: /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3\nLAPACK: /usr/lib/x86_64-linux-gnu/openblas/liblapack.so.3\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] tools     stats     graphics  grDevices utils     datasets  methods  \n[8] base     \n\nloaded via a namespace (and not attached):\n[1] compiler_3.5.2\n```",
    "created_at": "2020-07-16T15:39:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462553",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:64" align="right">comment:64</div>

missing dep, can be installed using pip:

```
$ ./sage --pip install tzlocal
Collecting tzlocal
  Downloading tzlocal-2.1-py2.py3-none-any.whl (16 kB)
Requirement already satisfied: pytz in ./local/lib/python3.7/site-packages (from tzlocal) (2018.7)
Installing collected packages: tzlocal
Successfully installed tzlocal-2.1
dimpase@penguin:~/sage$ ./sage
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SageMath version 9.2.beta5, Release Date: 2020-07-12               â”‚
â”‚ Using Python 3.7.3. Type "help()" for help.                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ Warning: this is a prerelease version, and it may be unstable.     â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
sage: r.sessionInfo()
R version 3.5.2 (2018-12-20)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Debian GNU/Linux 10 (buster)

Matrix products: default
BLAS: /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3
LAPACK: /usr/lib/x86_64-linux-gnu/openblas/liblapack.so.3

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
 [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] tools     stats     graphics  grDevices utils     datasets  methods  
[8] base     

loaded via a namespace (and not attached):
[1] compiler_3.5.2
```



---

archive/issue_comments_462554.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nReplying to [@dimpase](#comment%3A64):\n> missing dep, can be installed using pip:\n\n[ Snip... ]\n\nCould you add the relevant commit(s) to this branch before a new test ?",
    "created_at": "2020-07-16T16:42:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462554",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:65" align="right">comment:65</div>

Replying to [@dimpase](#comment%3A64):
> missing dep, can be installed using pip:

[ Snip... ]

Could you add the relevant commit(s) to this branch before a new test ?



---

archive/issue_comments_462555.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nthis seems to need addition of a new pip package, no?",
    "created_at": "2020-07-16T17:00:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462555",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:66" align="right">comment:66</div>

this seems to need addition of a new pip package, no?



---

archive/issue_comments_462556.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\noops, the package is there, it's just not getting installed for some reason, I guess\ndue to something fishy in\n\n```diff\n--- a/build/pkgs/rpy2/dependencies\n+++ b/build/pkgs/rpy2/dependencies\n@@ -1,4 +1,4 @@\n-$(PYTHON) r six | $(PYTHON_TOOLCHAIN)\n+$(PYTHON) r cffi | $(PYTHON_TOOLCHAIN) pycparser $(and $(filter-out no,$(SAGE_CHECK_rpy2)), pytest tzlocal numpy)\n ```",
    "created_at": "2020-07-16T17:03:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462556",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:67" align="right">comment:67</div>

oops, the package is there, it's just not getting installed for some reason, I guess
due to something fishy in

```diff
--- a/build/pkgs/rpy2/dependencies
+++ b/build/pkgs/rpy2/dependencies
@@ -1,4 +1,4 @@
-$(PYTHON) r six | $(PYTHON_TOOLCHAIN)
+$(PYTHON) r cffi | $(PYTHON_TOOLCHAIN) pycparser $(and $(filter-out no,$(SAGE_CHECK_rpy2)), pytest tzlocal numpy)
 ```



---

archive/issue_comments_462557.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\ntzlocal is only pulled in for tests (`SAGE_CHECK=yes`). Is it needed for normal installation or at runtime as well?",
    "created_at": "2020-07-16T17:11:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462557",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:68" align="right">comment:68</div>

tzlocal is only pulled in for tests (`SAGE_CHECK=yes`). Is it needed for normal installation or at runtime as well?



---

archive/issue_comments_462558.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nIn that case, we would have to add it as a normal package.",
    "created_at": "2020-07-16T17:12:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462558",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:69" align="right">comment:69</div>

In that case, we would have to add it as a normal package.



---

archive/issue_comments_462559.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\n... and update package pytz to 2020.1",
    "created_at": "2020-07-16T17:14:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462559",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:70" align="right">comment:70</div>

... and update package pytz to 2020.1



---

archive/issue_comments_462560.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nLooking at the traceback in comment 61, the answer seems to be \"yes\".\n\nI'll prepare the pytz update first.",
    "created_at": "2020-07-16T17:16:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462560",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:71" align="right">comment:71</div>

Looking at the traceback in comment 61, the answer seems to be "yes".

I'll prepare the pytz update first.



---

archive/issue_comments_462561.json:
```json
{
    "body": "<div id=\"comment:72\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5f93e7f059fcbfa3eecf1dd22112fb647498a506\"><code>5f93e7f</code></a></td><td><code>build/pkgs/pytz: Update to 2020.1</code></td></tr></table>\n",
    "created_at": "2020-07-16T17:21:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462561",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:72"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5f93e7f059fcbfa3eecf1dd22112fb647498a506"><code>5f93e7f</code></a></td><td><code>build/pkgs/pytz: Update to 2020.1</code></td></tr></table>




---

archive/issue_comments_462562.json:
```json
{
    "body": "Changed commit from **[`3b14bf5`](https://github.com/sagemath/sagetrac-mirror/commit/3b14bf51517e2c8c77a49dcc286fe6dfaf38dc48)** to **[`5f93e7f`](https://github.com/sagemath/sagetrac-mirror/commit/5f93e7f059fcbfa3eecf1dd22112fb647498a506)**",
    "created_at": "2020-07-16T17:21:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462562",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3b14bf5`](https://github.com/sagemath/sagetrac-mirror/commit/3b14bf51517e2c8c77a49dcc286fe6dfaf38dc48)** to **[`5f93e7f`](https://github.com/sagemath/sagetrac-mirror/commit/5f93e7f059fcbfa3eecf1dd22112fb647498a506)**



---

archive/issue_comments_462563.json:
```json
{
    "body": "<div id=\"comment:73\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/091ed905e020537a18ff6f7c1251c87253537a0d\"><code>091ed90</code></a></td><td><code>build/pkgs/tzlocal: Make it a normal, standard package (new dep of standard package rpy2)</code></td></tr></table>\n",
    "created_at": "2020-07-16T17:27:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462563",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:73"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/091ed905e020537a18ff6f7c1251c87253537a0d"><code>091ed90</code></a></td><td><code>build/pkgs/tzlocal: Make it a normal, standard package (new dep of standard package rpy2)</code></td></tr></table>




---

archive/issue_comments_462564.json:
```json
{
    "body": "Changed commit from **[`5f93e7f`](https://github.com/sagemath/sagetrac-mirror/commit/5f93e7f059fcbfa3eecf1dd22112fb647498a506)** to **[`091ed90`](https://github.com/sagemath/sagetrac-mirror/commit/091ed905e020537a18ff6f7c1251c87253537a0d)**",
    "created_at": "2020-07-16T17:27:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462564",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5f93e7f`](https://github.com/sagemath/sagetrac-mirror/commit/5f93e7f059fcbfa3eecf1dd22112fb647498a506)** to **[`091ed90`](https://github.com/sagemath/sagetrac-mirror/commit/091ed905e020537a18ff6f7c1251c87253537a0d)**



---

archive/issue_comments_462565.json:
```json
{
    "body": "<div id=\"comment:74\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b01e92dd86b042c17d2bb17d44354d60bef861ab\"><code>b01e92d</code></a></td><td><code>build/pkgs/rpy2/dependencies: Add tzlocal pytz as normal dependencies</code></td></tr></table>\n",
    "created_at": "2020-07-16T17:28:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462565",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:74"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b01e92dd86b042c17d2bb17d44354d60bef861ab"><code>b01e92d</code></a></td><td><code>build/pkgs/rpy2/dependencies: Add tzlocal pytz as normal dependencies</code></td></tr></table>




---

archive/issue_comments_462566.json:
```json
{
    "body": "Changed commit from **[`091ed90`](https://github.com/sagemath/sagetrac-mirror/commit/091ed905e020537a18ff6f7c1251c87253537a0d)** to **[`b01e92d`](https://github.com/sagemath/sagetrac-mirror/commit/b01e92dd86b042c17d2bb17d44354d60bef861ab)**",
    "created_at": "2020-07-16T17:28:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462566",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`091ed90`](https://github.com/sagemath/sagetrac-mirror/commit/091ed905e020537a18ff6f7c1251c87253537a0d)** to **[`b01e92d`](https://github.com/sagemath/sagetrac-mirror/commit/b01e92dd86b042c17d2bb17d44354d60bef861ab)**



---

archive/issue_events_401877.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-16T17:28:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29441#event-401877"
}
```



---

archive/issue_events_401878.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-16T17:28:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29441#event-401878"
}
```



---

archive/issue_comments_462567.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,6 +3,9 @@\n - `cygwin.patch` does not apply anymore\n - [cffi>=1.13.1](https://pypi.org/project/cffi/) is a new dependency, we install latest 1.14.0 (supports python >= 3.2)\n - [pycparser](https://pypi.org/project/pycparser/) is a new dependency (required by cffi, supports python >= 3.4)\n+- [https://pypi.org/project/tzlocal/](https://pypi.org/project/tzlocal/) is a new dependency, we install latest 2.1 (supports python >= 2.7)\n+- [https://pypi.org/project/pytz/](https://pypi.org/project/pytz/) is a new dependency, we update to latest 2020.1 (supports python >= 2.4)\n+\n - add small patches to `setup.py` that\n   - disables printing on `stdout` (that perturbs `pip`) - accepted upstream\n   - removes the build dependency on `pytest`\n``````\n",
    "created_at": "2020-07-16T17:30:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462567",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,6 +3,9 @@
 - `cygwin.patch` does not apply anymore
 - [cffi>=1.13.1](https://pypi.org/project/cffi/) is a new dependency, we install latest 1.14.0 (supports python >= 3.2)
 - [pycparser](https://pypi.org/project/pycparser/) is a new dependency (required by cffi, supports python >= 3.4)
+- [https://pypi.org/project/tzlocal/](https://pypi.org/project/tzlocal/) is a new dependency, we install latest 2.1 (supports python >= 2.7)
+- [https://pypi.org/project/pytz/](https://pypi.org/project/pytz/) is a new dependency, we update to latest 2020.1 (supports python >= 2.4)
+
 - add small patches to `setup.py` that
   - disables printing on `stdout` (that perturbs `pip`) - accepted upstream
   - removes the build dependency on `pytest`
``````




---

archive/issue_comments_462568.json:
```json
{
    "body": "<div id=\"comment:77\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4ce897074e0570143ec4642a91bf2d846f313635\"><code>4ce8970</code></a></td><td><code>build/pkgs/rpy2: Update to 3.3.5</code></td></tr></table>\n",
    "created_at": "2020-07-16T17:49:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462568",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:77"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4ce897074e0570143ec4642a91bf2d846f313635"><code>4ce8970</code></a></td><td><code>build/pkgs/rpy2: Update to 3.3.5</code></td></tr></table>




---

archive/issue_comments_462569.json:
```json
{
    "body": "Changed commit from **[`b01e92d`](https://github.com/sagemath/sagetrac-mirror/commit/b01e92dd86b042c17d2bb17d44354d60bef861ab)** to **[`4ce8970`](https://github.com/sagemath/sagetrac-mirror/commit/4ce897074e0570143ec4642a91bf2d846f313635)**",
    "created_at": "2020-07-16T17:49:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462569",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b01e92d`](https://github.com/sagemath/sagetrac-mirror/commit/b01e92dd86b042c17d2bb17d44354d60bef861ab)** to **[`4ce8970`](https://github.com/sagemath/sagetrac-mirror/commit/4ce897074e0570143ec4642a91bf2d846f313635)**



---

archive/issue_events_401879.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-16T17:51:08Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "title_is": "upgrade rpy2 package 2.8.2 -> 3.3.5, add new dependencies",
    "title_was": "upgrade rpy2 package 2.8.2 -> 3.3.4, add new dependencies",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29441#event-401879"
}
```



---

archive/issue_comments_462570.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">comment:78</div>\n\n3.3.5 has a bugfix but did not backport https://github.com/rpy2/rpy2/pull/716, so we have to keep it as a patch.",
    "created_at": "2020-07-16T17:51:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462570",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:78" align="right">comment:78</div>

3.3.5 has a bugfix but did not backport https://github.com/rpy2/rpy2/pull/716, so we have to keep it as a patch.



---

archive/issue_comments_462571.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\nReplying to [@sagetrac-git](#comment%3A77):\n> Branch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4ce897074e0570143ec4642a91bf2d846f313635\"><code>4ce8970</code></a></td><td><code>build/pkgs/rpy2: Update to 3.3.5</code></td></tr></table>\n\nThe mails emanating from Trac are not timely. So *please* don't update this branch just after asking for review... and *please* return state to `needs_work` before doing so.",
    "created_at": "2020-07-16T18:00:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462571",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:79" align="right">comment:79</div>

Replying to [@sagetrac-git](#comment%3A77):
> Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4ce897074e0570143ec4642a91bf2d846f313635"><code>4ce8970</code></a></td><td><code>build/pkgs/rpy2: Update to 3.3.5</code></td></tr></table>

The mails emanating from Trac are not timely. So *please* don't update this branch just after asking for review... and *please* return state to `needs_work` before doing so.



---

archive/issue_comments_462572.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">comment:80</div>\n\nThanks for taking the time to test.",
    "created_at": "2020-07-16T18:04:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462572",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:80" align="right">comment:80</div>

Thanks for taking the time to test.



---

archive/issue_comments_462573.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\n* Debian testing running on core i7 + 16 GB RAM\n* Sage configured to use system's R (4.0.2, as packaged by Debian)\n* Rebased on 9.2.beta5 (penibly : 5 merge conflicts...)\n\nCompiles fine. Some rough tests in the Jupyter notebook.\n\n```\nsage -t --long --warn-long 194.3 src/sage/interfaces/r.py\n    [257 tests, 4.80 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 4.9 seconds\n    cpu time: 4.5 seconds\n    cumulative wall time: 4.8 seconds\n```\n\n`ptestlong` underway.",
    "created_at": "2020-07-16T19:58:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462573",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:81" align="right">comment:81</div>

* Debian testing running on core i7 + 16 GB RAM
* Sage configured to use system's R (4.0.2, as packaged by Debian)
* Rebased on 9.2.beta5 (penibly : 5 merge conflicts...)

Compiles fine. Some rough tests in the Jupyter notebook.

```
sage -t --long --warn-long 194.3 src/sage/interfaces/r.py
    [257 tests, 4.80 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 4.9 seconds
    cpu time: 4.5 seconds
    cumulative wall time: 4.8 seconds
```

`ptestlong` underway.



---

archive/issue_comments_462574.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\nReplying to [@EmmanuelCharpentier](#comment%3A81):\n> * Rebased on 9.2.beta5 (penibly : 5 merge conflicts...)\n\nThanks for pointing this out - I've just merged 9.2.beta5 into dependency #30118",
    "created_at": "2020-07-16T20:03:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462574",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:82" align="right">comment:82</div>

Replying to [@EmmanuelCharpentier](#comment%3A81):
> * Rebased on 9.2.beta5 (penibly : 5 merge conflicts...)

Thanks for pointing this out - I've just merged 9.2.beta5 into dependency #30118



---

archive/issue_events_401880.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-16T20:05:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29441#event-401880"
}
```



---

archive/issue_events_401881.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-16T20:05:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29441#event-401881"
}
```



---

archive/issue_comments_462575.json:
```json
{
    "body": "<div id=\"comment:84\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d132389ee3a0d5d07f91a66deb243f780a930bd\"><code>5d13238</code></a></td><td><code>Merge tag '9.2.beta5' into t/30118/handle_sage_check_packages_in_build_make_makefile_in__not_sage_spkg</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1cf262c4348678f6b5bcaaa61b0df11eb8159392\"><code>1cf262c</code></a></td><td><code>Merge branch 't/30118/handle_sage_check_packages_in_build_make_makefile_in__not_sage_spkg' into t/29441/public/29441</code></td></tr></table>\n",
    "created_at": "2020-07-16T20:05:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462575",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:84"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d132389ee3a0d5d07f91a66deb243f780a930bd"><code>5d13238</code></a></td><td><code>Merge tag '9.2.beta5' into t/30118/handle_sage_check_packages_in_build_make_makefile_in__not_sage_spkg</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1cf262c4348678f6b5bcaaa61b0df11eb8159392"><code>1cf262c</code></a></td><td><code>Merge branch 't/30118/handle_sage_check_packages_in_build_make_makefile_in__not_sage_spkg' into t/29441/public/29441</code></td></tr></table>




---

archive/issue_comments_462576.json:
```json
{
    "body": "Changed commit from **[`4ce8970`](https://github.com/sagemath/sagetrac-mirror/commit/4ce897074e0570143ec4642a91bf2d846f313635)** to **[`1cf262c`](https://github.com/sagemath/sagetrac-mirror/commit/1cf262c4348678f6b5bcaaa61b0df11eb8159392)**",
    "created_at": "2020-07-16T20:05:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462576",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4ce8970`](https://github.com/sagemath/sagetrac-mirror/commit/4ce897074e0570143ec4642a91bf2d846f313635)** to **[`1cf262c`](https://github.com/sagemath/sagetrac-mirror/commit/1cf262c4348678f6b5bcaaa61b0df11eb8159392)**



---

archive/issue_comments_462577.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\nNow it's on top of 9.2.beta5.",
    "created_at": "2020-07-16T20:06:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462577",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:85" align="right">comment:85</div>

Now it's on top of 9.2.beta5.



---

archive/issue_events_401882.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-16T20:06:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29441#event-401882"
}
```



---

archive/issue_events_401883.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-16T20:06:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29441#event-401883"
}
```



---

archive/issue_comments_462578.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">comment:87</div>\n\nReplying to [@mkoeppe](#comment%3A86):\n\nYou did it. Again...",
    "created_at": "2020-07-16T20:11:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462578",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:87" align="right">comment:87</div>

Replying to [@mkoeppe](#comment%3A86):

You did it. Again...



---

archive/issue_comments_462579.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">comment:88</div>\n\nDo you have additional ways of testing the R interface, or thoughts how we could expand the automatic tests? The big problem with R integration in Sage is that essentially there is none - just a few basic tests in `r.py`.",
    "created_at": "2020-07-16T20:15:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462579",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:88" align="right">comment:88</div>

Do you have additional ways of testing the R interface, or thoughts how we could expand the automatic tests? The big problem with R integration in Sage is that essentially there is none - just a few basic tests in `r.py`.



---

archive/issue_comments_462580.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">comment:89</div>\n\nBy the way, you can verify that your rebased tree is identical to the one from my merge by doing `git trac fetch 29441 && git reset FETCH_HEAD`.",
    "created_at": "2020-07-16T21:01:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462580",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:89" align="right">comment:89</div>

By the way, you can verify that your rebased tree is identical to the one from my merge by doing `git trac fetch 29441 && git reset FETCH_HEAD`.



---

archive/issue_comments_462581.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">comment:90</div>\n\nAutomatic tests (of commit 4ce897074e, together with some other upgrade tickets) run at https://github.com/mkoeppe/sage/actions/runs/171722885",
    "created_at": "2020-07-16T21:04:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462581",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:90" align="right">comment:90</div>

Automatic tests (of commit 4ce897074e, together with some other upgrade tickets) run at https://github.com/mkoeppe/sage/actions/runs/171722885



---

archive/issue_comments_462582.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">comment:91</div>\n\nReplying to [@EmmanuelCharpentier](#comment%3A87):\n> Replying to [@mkoeppe](#comment%3A86):\n> \n> You did it. Again...\n\nOn Debian testing running on ore i7 + 16 GB RAM, after rebasing #29441 on 9.2.beta5, `ptestlong` gives 9 permanent (and no transient) failures :\n\n```\n| File                            | Result             | P/T | Notes            |\n|---------------------------------+--------------------+-----+------------------|\n| src/sage/doctest/test.py        | 23 doctests failed | P   | Ununderstandable |\n| src/sage/plot/plot.py           | 1 doctest failed   | P   | Cosmetic ?       |\n| src/sage/tests/cmdline.py       | 31 doctests failed | P   | Cosmetic ?       |\n| src/sage/libs/ppl.pyx           | 9 doctests failed  | P   | Cosmetic ?       |\n| src/sage/repl/interpreter.py    | 1 doctest failed   | P   | Cosmetic ?       |\n| src/sage/rings/complex_arb.pyx  | 6 doctests failed  | P   | Known            |\n| src/sage/misc/temporary_file.py | 1 doctest failed   | P   | Cosmetic ?       |\n| src/sage/tests/gap_packages.py  | 1 doctest failed   | P   | Known, cosmetic  |\n| src/sage/rings/real_arb.pyx     | 2 doctests failed  | P   | Known            |\n```\n\nFWIW, the same tests gave 3 permanent and one transient failures on 9.2.beta5 (identical to those reported for beta2 and beta4) :\n\n```\n| File                           | Result            | P/T |\n|--------------------------------+-------------------+-----|\n| src/sage/tests/parigp.py       | Timed out         | T   |\n| src/sage/rings/complex_arb.pyx | 6 doctests failed | P   |\n| src/sage/tests/gap_packages.py | 1 doctest failed  | P   |\n| src/sage/rings/real_arb.pyx    | 2 doctests failed | P   |\n```\n\nMost of the \"new\" errors seems to be bound to a runtime redefinition of SAGE_ROOT, changing from `/usr/local/sag` to `/usr/local/sage-9` (on my system, the former is a symlink to the latter, and `/usr/local/bin/sage` is a symlink to `/usr/local/sage/sage` ; this allows for a quick switch of Sage trees...).\n\nI upload `chkerrs.txt` which is the log of re-running failed tests.\n\nI'll retest the latest state of this branch when I have some credible indication that it is indeed intended to be stable...",
    "created_at": "2020-07-16T22:37:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462582",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:91" align="right">comment:91</div>

Replying to [@EmmanuelCharpentier](#comment%3A87):
> Replying to [@mkoeppe](#comment%3A86):
> 
> You did it. Again...

On Debian testing running on ore i7 + 16 GB RAM, after rebasing #29441 on 9.2.beta5, `ptestlong` gives 9 permanent (and no transient) failures :

```
| File                            | Result             | P/T | Notes            |
|---------------------------------+--------------------+-----+------------------|
| src/sage/doctest/test.py        | 23 doctests failed | P   | Ununderstandable |
| src/sage/plot/plot.py           | 1 doctest failed   | P   | Cosmetic ?       |
| src/sage/tests/cmdline.py       | 31 doctests failed | P   | Cosmetic ?       |
| src/sage/libs/ppl.pyx           | 9 doctests failed  | P   | Cosmetic ?       |
| src/sage/repl/interpreter.py    | 1 doctest failed   | P   | Cosmetic ?       |
| src/sage/rings/complex_arb.pyx  | 6 doctests failed  | P   | Known            |
| src/sage/misc/temporary_file.py | 1 doctest failed   | P   | Cosmetic ?       |
| src/sage/tests/gap_packages.py  | 1 doctest failed   | P   | Known, cosmetic  |
| src/sage/rings/real_arb.pyx     | 2 doctests failed  | P   | Known            |
```

FWIW, the same tests gave 3 permanent and one transient failures on 9.2.beta5 (identical to those reported for beta2 and beta4) :

```
| File                           | Result            | P/T |
|--------------------------------+-------------------+-----|
| src/sage/tests/parigp.py       | Timed out         | T   |
| src/sage/rings/complex_arb.pyx | 6 doctests failed | P   |
| src/sage/tests/gap_packages.py | 1 doctest failed  | P   |
| src/sage/rings/real_arb.pyx    | 2 doctests failed | P   |
```

Most of the "new" errors seems to be bound to a runtime redefinition of SAGE_ROOT, changing from `/usr/local/sag` to `/usr/local/sage-9` (on my system, the former is a symlink to the latter, and `/usr/local/bin/sage` is a symlink to `/usr/local/sage/sage` ; this allows for a quick switch of Sage trees...).

I upload `chkerrs.txt` which is the log of re-running failed tests.

I'll retest the latest state of this branch when I have some credible indication that it is indeed intended to be stable...



---

archive/issue_comments_462583.json:
```json
{
    "body": "<div id=\"comment:92\" align=\"right\">comment:92</div>\n\nAttachment: **[chkerrs.txt](https://github.com/sagemath/sage/files/ticket29441/chkerrs.txt)**\n\nThanks for testing. We have a fix for the symlink behavior in #29446. This is unrelated to the present ticket.",
    "created_at": "2020-07-16T22:41:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462583",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:92" align="right">comment:92</div>

Attachment: **[chkerrs.txt](https://github.com/sagemath/sage/files/ticket29441/chkerrs.txt)**

Thanks for testing. We have a fix for the symlink behavior in #29446. This is unrelated to the present ticket.



---

archive/issue_comments_462584.json:
```json
{
    "body": "<div id=\"comment:93\" align=\"right\">comment:93</div>\n\nIn case you did not see this:\n\nReplying to [@mkoeppe](#comment%3A88):\n> Do you have additional ways of testing the R interface, or thoughts how we could expand the automatic tests? The big problem with R integration in Sage is that essentially there is none - just a few basic tests in `r.py`.",
    "created_at": "2020-07-16T22:42:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462584",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:93" align="right">comment:93</div>

In case you did not see this:

Replying to [@mkoeppe](#comment%3A88):
> Do you have additional ways of testing the R interface, or thoughts how we could expand the automatic tests? The big problem with R integration in Sage is that essentially there is none - just a few basic tests in `r.py`.



---

archive/issue_comments_462585.json:
```json
{
    "body": "<div id=\"comment:94\" align=\"right\">comment:94</div>\n\n`cygwin-standard` build succeeded at https://github.com/mkoeppe/sage/runs/879259688\n\n`cygwin-minimal` did not get to `rpy2` because of unrelated problems",
    "created_at": "2020-07-16T22:59:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462585",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:94" align="right">comment:94</div>

`cygwin-standard` build succeeded at https://github.com/mkoeppe/sage/runs/879259688

`cygwin-minimal` did not get to `rpy2` because of unrelated problems



---

archive/issue_events_401884.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2020-07-17T07:12:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29441#event-401884"
}
```



---

archive/issue_events_401885.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2020-07-17T07:12:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29441#event-401885"
}
```



---

archive/issue_comments_462586.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">comment:95</div>\n\nReplying to [@EmmanuelCharpentier](#comment%3A91):\n\n[ Snip... ]\n\n> I'll retest the latest state of this branch when I have some credible indication that it is indeed intended to be stable...irmed by someone using Sage's interpreter\n\nI now have done so, and get identical results.\n\nMy *impression* is that this upgrade doesn't bring new detectable bugs : the \"new\" bugs I have found seem unrelated.\n\n==>`positive_review`.\n\nHowever, I *strongly* advise a confirmation of  this review by someone using Sage's R interpreter.",
    "created_at": "2020-07-17T07:12:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462586",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:95" align="right">comment:95</div>

Replying to [@EmmanuelCharpentier](#comment%3A91):

[ Snip... ]

> I'll retest the latest state of this branch when I have some credible indication that it is indeed intended to be stable...irmed by someone using Sage's interpreter

I now have done so, and get identical results.

My *impression* is that this upgrade doesn't bring new detectable bugs : the "new" bugs I have found seem unrelated.

==>`positive_review`.

However, I *strongly* advise a confirmation of  this review by someone using Sage's R interpreter.



---

archive/issue_comments_462587.json:
```json
{
    "body": "<div id=\"comment:96\" align=\"right\">comment:96</div>\n\nThank you.",
    "created_at": "2020-07-17T07:20:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462587",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:96" align="right">comment:96</div>

Thank you.



---

archive/issue_comments_462588.json:
```json
{
    "body": "Reviewer: **Emmanuel Charpentier, ...**",
    "created_at": "2020-07-17T07:21:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462588",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Emmanuel Charpentier, ...**



---

archive/issue_comments_462589.json:
```json
{
    "body": "<div id=\"comment:98\" align=\"right\">comment:98</div>\n\n\n```\nFile \"src/sage/stats/r.py\", line 42, in sage.stats.r.ttest\nFailed example:\n    a, b = ttest([1,2,3,4,5],[1,2,3,3.5,5.121]); a # abs tol 1e-12\nException raised:\n    Traceback (most recent call last):\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/interfaces/interface.py\", line 331, in _coerce_from_special_method\n        return (x.__getattribute__(s))(self)\n      File \"sage/structure/element.pyx\", line 493, in sage.structure.element.Element.__getattr__ (build/cythonized/sage/structure/element.c:4644)\n        return self.getattr_from_category(name)\n      File \"sage/structure/element.pyx\", line 506, in sage.structure.element.Element.getattr_from_category (build/cythonized/sage/structure/element.c:4756)\n        return getattr_from_other_class(self, cls, name)\n      File \"sage/cpython/getattr.pyx\", line 394, in sage.cpython.getattr.getattr_from_other_class (build/cythonized/sage/cpython/getattr.c:2641)\n        raise AttributeError(dummy_error_message)\n    AttributeError: 'sage.rings.integer.Integer' object has no attribute '_r_'\n    During handling of the above exception, another exception occurred:\n    Traceback (most recent call last):\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 715, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1139, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.stats.r.ttest[0]>\", line 1, in <module>\n        a, b = ttest([Integer(1),Integer(2),Integer(3),Integer(4),Integer(5)],[Integer(1),Integer(2),Integer(3),RealNumber('3.5'),RealNumber('5.121')]); a # abs tol 1e-12\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/stats/r.py\", line 48, in ttest\n        test = myR.t_test(x,y,conf_level = conf_level, **kw)._sage_()\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/interfaces/r.py\", line 2003, in __call__\n        return self._parent.function_call(self._name, args=list(args), kwds=kwds)\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/interfaces/r.py\", line 1077, in function_call\n        args, kwds = self._convert_args_kwds(args, kwds)\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/interfaces/interface.py\", line 557, in _convert_args_kwds\n        args[i] = self(arg)\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/interfaces/interface.py\", line 310, in __call__\n        result = self._coerce_impl(x, use_special=False)\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/interfaces/r.py\", line 558, in _coerce_impl\n        return super(R, self)._coerce_impl(x, use_special=use_special)\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/interfaces/interface.py\", line 359, in _coerce_impl\n        w = self(v)\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/interfaces/interface.py\", line 303, in __call__\n        result = self._coerce_from_special_method(x)\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/interfaces/interface.py\", line 333, in _coerce_from_special_method\n        return self(x._interface_init_())\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/interfaces/interface.py\", line 296, in __call__\n        return cls(self, x, name=name)\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/interfaces/interface.py\", line 718, in __init__\n        self._name = parent._create(value, name=name)\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/interfaces/interface.py\", line 501, in _create\n        self.set(name, value)\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/interfaces/r.py\", line 1126, in set\n        out = self.eval(cmd)\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/interfaces/r.py\", line 1338, in eval\n        self._lazy_init()\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/interfaces/r.py\", line 541, in _lazy_init\n        self._r_to_sage_converter = _setup_r_to_sage_converter()\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/interfaces/r.py\", line 367, in _setup_r_to_sage_converter\n        from rpy2.robjects.conversion import Converter\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/rpy2/robjects/__init__.py\", line 19, in <module>\n        from rpy2.robjects.robject import RObjectMixin, RObject\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/rpy2/robjects/robject.py\", line 58, in <module>\n        class RObjectMixin(object):\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/rpy2/robjects/robject.py\", line 70, in RObjectMixin\n        __show = _get_exported_value('methods', 'show')\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/rpy2/rinterface_lib/conversion.py\", line 44, in _\n        cdata = function(*args, **kwargs)\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/rpy2/rinterface.py\", line 624, in __call__\n        raise embedded.RRuntimeError(_rinterface._geterrmessage())\n    rpy2.rinterface_lib.embedded.RRuntimeError: Error in dyn.load(file, DLLpath = DLLpath, ...) : \n      unable to load shared object '/home/buildbot/slave/sage_git/build/local/lib/R/library/methods/libs/methods.so':\n      libR.so: cannot open shared object file: No such file or directory\n```",
    "created_at": "2020-07-22T22:38:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462589",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:98" align="right">comment:98</div>


```
File "src/sage/stats/r.py", line 42, in sage.stats.r.ttest
Failed example:
    a, b = ttest([1,2,3,4,5],[1,2,3,3.5,5.121]); a # abs tol 1e-12
Exception raised:
    Traceback (most recent call last):
      File "/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/interfaces/interface.py", line 331, in _coerce_from_special_method
        return (x.__getattribute__(s))(self)
      File "sage/structure/element.pyx", line 493, in sage.structure.element.Element.__getattr__ (build/cythonized/sage/structure/element.c:4644)
        return self.getattr_from_category(name)
      File "sage/structure/element.pyx", line 506, in sage.structure.element.Element.getattr_from_category (build/cythonized/sage/structure/element.c:4756)
        return getattr_from_other_class(self, cls, name)
      File "sage/cpython/getattr.pyx", line 394, in sage.cpython.getattr.getattr_from_other_class (build/cythonized/sage/cpython/getattr.c:2641)
        raise AttributeError(dummy_error_message)
    AttributeError: 'sage.rings.integer.Integer' object has no attribute '_r_'
    During handling of the above exception, another exception occurred:
    Traceback (most recent call last):
      File "/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 715, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1139, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.stats.r.ttest[0]>", line 1, in <module>
        a, b = ttest([Integer(1),Integer(2),Integer(3),Integer(4),Integer(5)],[Integer(1),Integer(2),Integer(3),RealNumber('3.5'),RealNumber('5.121')]); a # abs tol 1e-12
      File "/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/stats/r.py", line 48, in ttest
        test = myR.t_test(x,y,conf_level = conf_level, **kw)._sage_()
      File "/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/interfaces/r.py", line 2003, in __call__
        return self._parent.function_call(self._name, args=list(args), kwds=kwds)
      File "/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/interfaces/r.py", line 1077, in function_call
        args, kwds = self._convert_args_kwds(args, kwds)
      File "/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/interfaces/interface.py", line 557, in _convert_args_kwds
        args[i] = self(arg)
      File "/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/interfaces/interface.py", line 310, in __call__
        result = self._coerce_impl(x, use_special=False)
      File "/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/interfaces/r.py", line 558, in _coerce_impl
        return super(R, self)._coerce_impl(x, use_special=use_special)
      File "/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/interfaces/interface.py", line 359, in _coerce_impl
        w = self(v)
      File "/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/interfaces/interface.py", line 303, in __call__
        result = self._coerce_from_special_method(x)
      File "/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/interfaces/interface.py", line 333, in _coerce_from_special_method
        return self(x._interface_init_())
      File "/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/interfaces/interface.py", line 296, in __call__
        return cls(self, x, name=name)
      File "/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/interfaces/interface.py", line 718, in __init__
        self._name = parent._create(value, name=name)
      File "/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/interfaces/interface.py", line 501, in _create
        self.set(name, value)
      File "/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/interfaces/r.py", line 1126, in set
        out = self.eval(cmd)
      File "/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/interfaces/r.py", line 1338, in eval
        self._lazy_init()
      File "/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/interfaces/r.py", line 541, in _lazy_init
        self._r_to_sage_converter = _setup_r_to_sage_converter()
      File "/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/interfaces/r.py", line 367, in _setup_r_to_sage_converter
        from rpy2.robjects.conversion import Converter
      File "/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/rpy2/robjects/__init__.py", line 19, in <module>
        from rpy2.robjects.robject import RObjectMixin, RObject
      File "/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/rpy2/robjects/robject.py", line 58, in <module>
        class RObjectMixin(object):
      File "/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/rpy2/robjects/robject.py", line 70, in RObjectMixin
        __show = _get_exported_value('methods', 'show')
      File "/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/rpy2/rinterface_lib/conversion.py", line 44, in _
        cdata = function(*args, **kwargs)
      File "/home/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/rpy2/rinterface.py", line 624, in __call__
        raise embedded.RRuntimeError(_rinterface._geterrmessage())
    rpy2.rinterface_lib.embedded.RRuntimeError: Error in dyn.load(file, DLLpath = DLLpath, ...) : 
      unable to load shared object '/home/buildbot/slave/sage_git/build/local/lib/R/library/methods/libs/methods.so':
      libR.so: cannot open shared object file: No such file or directory
```



---

archive/issue_events_401886.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-07-22T22:38:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29441#event-401886"
}
```



---

archive/issue_events_401887.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-07-22T22:38:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29441#event-401887"
}
```



---

archive/issue_comments_462590.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">comment:99</div>\n\non what machine",
    "created_at": "2020-07-22T22:39:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462590",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:99" align="right">comment:99</div>

on what machine



---

archive/issue_comments_462591.json:
```json
{
    "body": "<div id=\"comment:100\" align=\"right\">comment:100</div>\n\nDoesn't appear to be machin specific, e.g. http://build.sagemath.org/#/builders/35/builds/1",
    "created_at": "2020-07-23T07:21:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462591",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:100" align="right">comment:100</div>

Doesn't appear to be machin specific, e.g. http://build.sagemath.org/#/builders/35/builds/1



---

archive/issue_comments_462592.json:
```json
{
    "body": "<div id=\"comment:101\" align=\"right\">comment:101</div>\n\nmaybe we only tested on `libR` coming from the system?",
    "created_at": "2020-07-23T07:59:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462592",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:101" align="right">comment:101</div>

maybe we only tested on `libR` coming from the system?



---

archive/issue_comments_462593.json:
```json
{
    "body": "<div id=\"comment:102\" align=\"right\">comment:102</div>\n\nReplying to [@dimpase](#comment%3A101):\n> maybe we only tested on `libR` coming from the system?\n\nThat's why I advised to test on a machine using Sage's R...",
    "created_at": "2020-07-23T16:52:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462593",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:102" align="right">comment:102</div>

Replying to [@dimpase](#comment%3A101):
> maybe we only tested on `libR` coming from the system?

That's why I advised to test on a machine using Sage's R...



---

archive/issue_comments_462594.json:
```json
{
    "body": "<div id=\"comment:103\" align=\"right\">comment:103</div>\n\nReplying to [@vbraun](#comment%3A100):\n> Doesn't appear to be machin specific, e.g. http://build.sagemath.org/#/builders/35/builds/1\n\nThe build log there is not helpful. rpy2 was not built in that run.",
    "created_at": "2020-07-23T17:10:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462594",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:103" align="right">comment:103</div>

Replying to [@vbraun](#comment%3A100):
> Doesn't appear to be machin specific, e.g. http://build.sagemath.org/#/builders/35/builds/1

The build log there is not helpful. rpy2 was not built in that run.



---

archive/issue_comments_462595.json:
```json
{
    "body": "<div id=\"comment:104\" align=\"right\">comment:104</div>\n\nReplying to [@dimpase](#comment%3A101):\n> maybe we only tested on `libR` coming from the system?\n\nOf course we test builds where R is built as an spkg. \nThat's pretty much the point of the `-minimal` builds.",
    "created_at": "2020-07-23T17:14:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462595",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:104" align="right">comment:104</div>

Replying to [@dimpase](#comment%3A101):
> maybe we only tested on `libR` coming from the system?

Of course we test builds where R is built as an spkg. 
That's pretty much the point of the `-minimal` builds.



---

archive/issue_comments_462596.json:
```json
{
    "body": "<div id=\"comment:105\" align=\"right\">comment:105</div>\n\nAnd I do see this error in a (from scratch) build for `linuxmint-19-minimal` at https://github.com/mkoeppe/sage/runs/878897239?check_suite_focus=true",
    "created_at": "2020-07-23T17:15:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462596",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:105" align="right">comment:105</div>

And I do see this error in a (from scratch) build for `linuxmint-19-minimal` at https://github.com/mkoeppe/sage/runs/878897239?check_suite_focus=true



---

archive/issue_comments_462597.json:
```json
{
    "body": "<div id=\"comment:106\" align=\"right\">comment:106</div>\n\nReplying to [@EmmanuelCharpentier](#comment%3A102):\n> Replying to [@dimpase](#comment%3A101):\n> > maybe we only tested on `libR` coming from the system?\n\n> \n> That's why I advised to test on a machine using Sage's R...\n\nYes, you were right about this. We have a systematic problem with R in Sage. I think in the long run we will have to make R an optional or experimental package (a remedy that I brought up before, during the 9.1 cycle) -- unless developers step up and take over maintenance of the R / rpy2 spkgs in Sage.",
    "created_at": "2020-07-23T17:24:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462597",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:106" align="right">comment:106</div>

Replying to [@EmmanuelCharpentier](#comment%3A102):
> Replying to [@dimpase](#comment%3A101):
> > maybe we only tested on `libR` coming from the system?

> 
> That's why I advised to test on a machine using Sage's R...

Yes, you were right about this. We have a systematic problem with R in Sage. I think in the long run we will have to make R an optional or experimental package (a remedy that I brought up before, during the 9.1 cycle) -- unless developers step up and take over maintenance of the R / rpy2 spkgs in Sage.



---

archive/issue_comments_462598.json:
```json
{
    "body": "<div id=\"comment:107\" align=\"right\">comment:107</div>\n\nReplying to [@mkoeppe](#comment%3A105):\n> And I do see this error in a (from scratch) build for `linuxmint-19-minimal` at https://github.com/mkoeppe/sage/runs/878897239?check_suite_focus=true\n\n\n```\ndocker run -it docker.pkg.github.com/mkoeppe/sage/sage-docker-linuxmint-19-minimal-with-targets:9.1.rc4-68125-g83dfe657f5\n```",
    "created_at": "2020-07-23T17:31:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462598",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:107" align="right">comment:107</div>

Replying to [@mkoeppe](#comment%3A105):
> And I do see this error in a (from scratch) build for `linuxmint-19-minimal` at https://github.com/mkoeppe/sage/runs/878897239?check_suite_focus=true


```
docker run -it docker.pkg.github.com/mkoeppe/sage/sage-docker-linuxmint-19-minimal-with-targets:9.1.rc4-68125-g83dfe657f5
```



---

archive/issue_comments_462599.json:
```json
{
    "body": "<div id=\"comment:108\" align=\"right\">comment:108</div>\n\n\n```\n# ldd /sage/local/lib/R/library/methods/libs/methods.so\n\tlinux-vdso.so.1 (0x00007ffea0df9000)\n\tlibR.so => not found\n\tlibc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f605284e000)\n\t/lib64/ld-linux-x86-64.so.2 (0x00007f6052e49000)\n```",
    "created_at": "2020-07-23T18:04:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462599",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:108" align="right">comment:108</div>


```
# ldd /sage/local/lib/R/library/methods/libs/methods.so
	linux-vdso.so.1 (0x00007ffea0df9000)
	libR.so => not found
	libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f605284e000)
	/lib64/ld-linux-x86-64.so.2 (0x00007f6052e49000)
```



---

archive/issue_events_401888.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-23T18:41:01Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "title_is": "upgrade rpy2 package 2.8.2 -> 3.3.5, upgrade R to 3.6.3, add new dependencies",
    "title_was": "upgrade rpy2 package 2.8.2 -> 3.3.5, add new dependencies",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29441#event-401888"
}
```



---

archive/issue_comments_462600.json:
```json
{
    "body": "Changed commit from **[`1cf262c`](https://github.com/sagemath/sagetrac-mirror/commit/1cf262c4348678f6b5bcaaa61b0df11eb8159392)** to **[`9d667e8`](https://github.com/sagemath/sagetrac-mirror/commit/9d667e828a60c0782c60876d8b470d20b035d1c9)**",
    "created_at": "2020-07-23T18:50:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462600",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1cf262c`](https://github.com/sagemath/sagetrac-mirror/commit/1cf262c4348678f6b5bcaaa61b0df11eb8159392)** to **[`9d667e8`](https://github.com/sagemath/sagetrac-mirror/commit/9d667e828a60c0782c60876d8b470d20b035d1c9)**



---

archive/issue_comments_462601.json:
```json
{
    "body": "<div id=\"comment:110\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11448a68499ee087ad7cac6e0c979cdf9f01a370\"><code>11448a6</code></a></td><td><code>Update R to 3.6.3, add upstream_url</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d667e828a60c0782c60876d8b470d20b035d1c9\"><code>9d667e8</code></a></td><td><code>build/pkgs/r/spkg-install.in: Set rpath</code></td></tr></table>\n",
    "created_at": "2020-07-23T18:50:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462601",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:110"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11448a68499ee087ad7cac6e0c979cdf9f01a370"><code>11448a6</code></a></td><td><code>Update R to 3.6.3, add upstream_url</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d667e828a60c0782c60876d8b470d20b035d1c9"><code>9d667e8</code></a></td><td><code>build/pkgs/r/spkg-install.in: Set rpath</code></td></tr></table>




---

archive/issue_comments_462602.json:
```json
{
    "body": "<div id=\"comment:111\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a17c655a2aac9c80a52893c5373805a233731186\"><code>a17c655</code></a></td><td><code>m4/sage_spkg_collect.m4: Do not include script packages in SAGE_SDIST_PACKAGES</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/827923adc48858709deba6f99464665e689dc5ef\"><code>827923a</code></a></td><td><code>bootstrap: Accept 2020s in config.guess version check</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c30ac5431056413c24b1544c2a6a142a4ece9dc5\"><code>c30ac54</code></a></td><td><code>tox.ini: Add local-nobootstrap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/de6464db6b94fcebd5f88337681994fc0eb07e4b\"><code>de6464d</code></a></td><td><code>.github/workflows/tox.yml: Add jobs \"dist\", \"local-macos-nohomebrew</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/775b7f7a8a406f9ae8aa9ef542384c060b4cbbd4\"><code>775b7f7</code></a></td><td><code>Trac #30088: add a few explanatory comments to m4/sage_spkg_collect.m4.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/160862fb38046c22a4798f9aa00c6cad4415f540\"><code>160862f</code></a></td><td><code>m4/sage_spkg_collect.m4: Mention sagelib in the comment</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d1a2cbf833f020a591777c40abfc5ab26ec04fe0\"><code>d1a2cbf</code></a></td><td><code>Merge branch 't/30088/fix__make_sdist___add_test_run_to_github_actions' into t/29929/tox_ini__add_a_macos_environment_without_homebrew__conda</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4398ea853e46cfc7c8d702d6d1ec2661e0832fe1\"><code>4398ea8</code></a></td><td><code>Merge branch 'u/mkoeppe/tox_ini__add_a_macos_environment_without_homebrew__conda' of git://trac.sagemath.org/sage into t/29441/public/29441</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f7213c57463ab5af8441cd8410d26cca6ef95d2f\"><code>f7213c5</code></a></td><td><code>Trac #30149: When creating the Python venv on Cygwin make sure to copy</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/314b15feb5e580628d77c11190d0118b1e15e746\"><code>314b15f</code></a></td><td><code>Merge branch 'u/embray/ticket-30149' of git://trac.sagemath.org/sage into t/29441/public/29441</code></td></tr></table>\n",
    "created_at": "2020-07-23T18:55:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462602",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:111"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a17c655a2aac9c80a52893c5373805a233731186"><code>a17c655</code></a></td><td><code>m4/sage_spkg_collect.m4: Do not include script packages in SAGE_SDIST_PACKAGES</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/827923adc48858709deba6f99464665e689dc5ef"><code>827923a</code></a></td><td><code>bootstrap: Accept 2020s in config.guess version check</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c30ac5431056413c24b1544c2a6a142a4ece9dc5"><code>c30ac54</code></a></td><td><code>tox.ini: Add local-nobootstrap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/de6464db6b94fcebd5f88337681994fc0eb07e4b"><code>de6464d</code></a></td><td><code>.github/workflows/tox.yml: Add jobs "dist", "local-macos-nohomebrew</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/775b7f7a8a406f9ae8aa9ef542384c060b4cbbd4"><code>775b7f7</code></a></td><td><code>Trac #30088: add a few explanatory comments to m4/sage_spkg_collect.m4.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/160862fb38046c22a4798f9aa00c6cad4415f540"><code>160862f</code></a></td><td><code>m4/sage_spkg_collect.m4: Mention sagelib in the comment</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d1a2cbf833f020a591777c40abfc5ab26ec04fe0"><code>d1a2cbf</code></a></td><td><code>Merge branch 't/30088/fix__make_sdist___add_test_run_to_github_actions' into t/29929/tox_ini__add_a_macos_environment_without_homebrew__conda</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4398ea853e46cfc7c8d702d6d1ec2661e0832fe1"><code>4398ea8</code></a></td><td><code>Merge branch 'u/mkoeppe/tox_ini__add_a_macos_environment_without_homebrew__conda' of git://trac.sagemath.org/sage into t/29441/public/29441</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f7213c57463ab5af8441cd8410d26cca6ef95d2f"><code>f7213c5</code></a></td><td><code>Trac #30149: When creating the Python venv on Cygwin make sure to copy</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/314b15feb5e580628d77c11190d0118b1e15e746"><code>314b15f</code></a></td><td><code>Merge branch 'u/embray/ticket-30149' of git://trac.sagemath.org/sage into t/29441/public/29441</code></td></tr></table>




---

archive/issue_comments_462603.json:
```json
{
    "body": "Changed commit from **[`9d667e8`](https://github.com/sagemath/sagetrac-mirror/commit/9d667e828a60c0782c60876d8b470d20b035d1c9)** to **[`314b15f`](https://github.com/sagemath/sagetrac-mirror/commit/314b15feb5e580628d77c11190d0118b1e15e746)**",
    "created_at": "2020-07-23T18:55:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462603",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9d667e8`](https://github.com/sagemath/sagetrac-mirror/commit/9d667e828a60c0782c60876d8b470d20b035d1c9)** to **[`314b15f`](https://github.com/sagemath/sagetrac-mirror/commit/314b15feb5e580628d77c11190d0118b1e15e746)**



---

archive/issue_comments_462604.json:
```json
{
    "body": "Changed dependencies from **#29851, #30064, #30118** to **#29851, #30064, #30118, #30067, #30147, #29929, #30149**",
    "created_at": "2020-07-23T18:57:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462604",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#29851, #30064, #30118** to **#29851, #30064, #30118, #30067, #30147, #29929, #30149**



---

archive/issue_comments_462605.json:
```json
{
    "body": "<div id=\"comment:113\" align=\"right\">comment:113</div>\n\nTests run at https://github.com/mkoeppe/sage/actions/runs/180231628",
    "created_at": "2020-07-23T18:58:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462605",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:113" align="right">comment:113</div>

Tests run at https://github.com/mkoeppe/sage/actions/runs/180231628



---

archive/issue_events_401889.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-23T18:58:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29441#event-401889"
}
```



---

archive/issue_events_401890.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-23T18:58:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29441#event-401890"
}
```



---

archive/issue_comments_462606.json:
```json
{
    "body": "<div id=\"comment:115\" align=\"right\">comment:115</div>\n\nReplying to [@mkoeppe](#comment%3A113):\n> Tests run at https://github.com/mkoeppe/sage/actions/runs/180231628\n\nTests look all clean now, including the `-minimal` platforms that failed previously.\n\nNeeds review.",
    "created_at": "2020-07-25T18:32:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462606",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:115" align="right">comment:115</div>

Replying to [@mkoeppe](#comment%3A113):
> Tests run at https://github.com/mkoeppe/sage/actions/runs/180231628

Tests look all clean now, including the `-minimal` platforms that failed previously.

Needs review.



---

archive/issue_comments_462607.json:
```json
{
    "body": "<div id=\"comment:116\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/54d0f9927d3bd2b1b24a1ca3b2fb9c15a1df816c\"><code>54d0f99</code></a></td><td><code>Merge tag '9.2.beta6' into t/29441/public/29441</code></td></tr></table>\n",
    "created_at": "2020-07-25T23:54:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462607",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:116"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/54d0f9927d3bd2b1b24a1ca3b2fb9c15a1df816c"><code>54d0f99</code></a></td><td><code>Merge tag '9.2.beta6' into t/29441/public/29441</code></td></tr></table>




---

archive/issue_comments_462608.json:
```json
{
    "body": "Changed commit from **[`314b15f`](https://github.com/sagemath/sagetrac-mirror/commit/314b15feb5e580628d77c11190d0118b1e15e746)** to **[`54d0f99`](https://github.com/sagemath/sagetrac-mirror/commit/54d0f9927d3bd2b1b24a1ca3b2fb9c15a1df816c)**",
    "created_at": "2020-07-25T23:54:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462608",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`314b15f`](https://github.com/sagemath/sagetrac-mirror/commit/314b15feb5e580628d77c11190d0118b1e15e746)** to **[`54d0f99`](https://github.com/sagemath/sagetrac-mirror/commit/54d0f9927d3bd2b1b24a1ca3b2fb9c15a1df816c)**



---

archive/issue_comments_462609.json:
```json
{
    "body": "Changed reviewer from **Emmanuel Charpentier, ...** to **Emmanuel Charpentier, Dima Pasechnik**",
    "created_at": "2020-07-26T22:58:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462609",
    "user": "https://github.com/dimpase"
}
```

Changed reviewer from **Emmanuel Charpentier, ...** to **Emmanuel Charpentier, Dima Pasechnik**



---

archive/issue_events_401891.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-07-26T22:58:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29441#event-401891"
}
```



---

archive/issue_events_401892.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-07-26T22:58:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29441#event-401892"
}
```



---

archive/issue_comments_462610.json:
```json
{
    "body": "<div id=\"comment:117\" align=\"right\">comment:117</div>\n\nlooks ok",
    "created_at": "2020-07-26T22:58:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462610",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:117" align="right">comment:117</div>

looks ok



---

archive/issue_comments_462611.json:
```json
{
    "body": "<div id=\"comment:118\" align=\"right\">comment:118</div>\n\nThanks!",
    "created_at": "2020-07-26T23:00:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462611",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:118" align="right">comment:118</div>

Thanks!



---

archive/issue_events_401893.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-02T08:20:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29441#event-401893"
}
```



---

archive/issue_events_401894.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "a901400536f7e9f069903ed70eabc963e4dda451",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-08-02T08:20:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29441#event-401894"
}
```



---

archive/issue_comments_462612.json:
```json
{
    "body": "Changed branch from **[public/29441](https://github.com/sagemath/sagetrac-mirror/tree/public/29441)** to **[`54d0f99`](https://github.com/sagemath/sagetrac-mirror/commit/54d0f9927d3bd2b1b24a1ca3b2fb9c15a1df816c)**",
    "created_at": "2020-08-02T08:20:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462612",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/29441](https://github.com/sagemath/sagetrac-mirror/tree/public/29441)** to **[`54d0f99`](https://github.com/sagemath/sagetrac-mirror/commit/54d0f9927d3bd2b1b24a1ca3b2fb9c15a1df816c)**



---

archive/issue_comments_462613.json:
```json
{
    "body": "<div id=\"comment:120\" align=\"right\">comment:120</div>\n\nThis ticket causes some warning messages to be printed to the screen during doctesting:\n\n```\n% ./sage -t src/sage/interfaces/r.py\nRunning doctests with ID 2020-09-03-19-46-40-e4332149.\nGit branch: t/29441/54d0f9927d3bd2b1b24a1ca3b2fb9c15a1df816c\nUsing --optional=build,dochtml,sage\nDoctesting 1 file.\nR[write to console]: Warning messages:\n\nR[write to console]: 1: \nR[write to console]: In sage10 + sage6 :\nR[write to console]: \n \nR[write to console]:  longer object length is not a multiple of shorter object length\n\nR[write to console]: 2: \nR[write to console]: In sqrt(sage10) :\nR[write to console]:  NaNs produced\n\nR[write to console]: 3: \nR[write to console]: In sqrt(sage4) :\nR[write to console]:  NaNs produced\n\nsage -t --warn-long 83.1 --random-seed=0 src/sage/interfaces/r.py\n    [257 tests, 3.44 s]\n----------------------------------------------------------------------\nAll tests passed!\n```\nI think these should be silenced.",
    "created_at": "2020-09-04T02:47:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462613",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:120" align="right">comment:120</div>

This ticket causes some warning messages to be printed to the screen during doctesting:

```
% ./sage -t src/sage/interfaces/r.py
Running doctests with ID 2020-09-03-19-46-40-e4332149.
Git branch: t/29441/54d0f9927d3bd2b1b24a1ca3b2fb9c15a1df816c
Using --optional=build,dochtml,sage
Doctesting 1 file.
R[write to console]: Warning messages:

R[write to console]: 1: 
R[write to console]: In sage10 + sage6 :
R[write to console]: 
 
R[write to console]:  longer object length is not a multiple of shorter object length

R[write to console]: 2: 
R[write to console]: In sqrt(sage10) :
R[write to console]:  NaNs produced

R[write to console]: 3: 
R[write to console]: In sqrt(sage4) :
R[write to console]:  NaNs produced

sage -t --warn-long 83.1 --random-seed=0 src/sage/interfaces/r.py
    [257 tests, 3.44 s]
----------------------------------------------------------------------
All tests passed!
```
I think these should be silenced.



---

archive/issue_comments_462614.json:
```json
{
    "body": "Changed commit from **[`54d0f99`](https://github.com/sagemath/sagetrac-mirror/commit/54d0f9927d3bd2b1b24a1ca3b2fb9c15a1df816c)** to none",
    "created_at": "2020-09-04T02:47:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29441",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29441#issuecomment-462614",
    "user": "https://github.com/jhpalmieri"
}
```

Changed commit from **[`54d0f99`](https://github.com/sagemath/sagetrac-mirror/commit/54d0f9927d3bd2b1b24a1ca3b2fb9c15a1df816c)** to none
